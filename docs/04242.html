<html>
<head>
<title>Getting started with Apache Kafka — Windows</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Apache Kafka入门— Windows</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/getting-started-with-apache-kafka-windows-dff0bb7c6543?source=collection_archive---------6-----------------------#2020-03-11">https://medium.com/analytics-vidhya/getting-started-with-apache-kafka-windows-dff0bb7c6543?source=collection_archive---------6-----------------------#2020-03-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="3537" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你好。在<a class="ae jd" rel="noopener" href="/@nandini.vishwa94/apache-kafka-an-introduction-beaaaedb6cfa">之前的文章</a>中，我简要概述了Kafka的基础知识，回答了基本的“是什么”和“为什么”的问题，以帮助你很好地理解这项技术。在本文中，我将带您完成安装，我们将看到一个简单的生产者和消费者的行动！</p><p id="067d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在文章的最后，我列出了您将使用来完成本教程的所有命令。所以只要复制粘贴，节省时间！目标是学习概念，而不是浪费时间键入命令。</p><h2 id="d8f4" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">家政</h2><p id="f916" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">在我们开始Kafka安装之前，请确保您的系统上已经安装了java，并将jre添加到您的路径中。</p><p id="ad78" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要安装java，去<a class="ae jd" href="https://www.java.com/en/" rel="noopener ugc nofollow" target="_blank">这个链接</a>下载最新的jre版本。然后，您可以将jre bin路径添加到path变量中，并验证您的系统上是否安装了java。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es et"><img src="../Images/4195bab56dd862a1d7671b9139854765.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NBNeXkEkCBo-2lJsyGSuaw.png"/></div></div></figure><h2 id="a5ab" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">卡夫卡装置</h2><p id="220a" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">我在上一篇文章中提到，安装不会超过3分钟。我没开玩笑。你所要做的就是下载一个tar文件，解压它，瞧，你的系统中就有了卡夫卡的力量。没有复杂的安装向导，让你不断点击下一步。我几乎能听到你如释重负的叹息。</p><ol class=""><li id="37c9" class="kp kq hi ih b ii ij im in iq kr iu ks iy kt jc ku kv kw kx bi translated">从<a class="ae jd" href="https://www.apache.org/dyn/closer.cgi?path=/kafka/2.4.0/kafka_2.12-2.4.0.tgz" rel="noopener ugc nofollow" target="_blank"> Apache </a>下载最新的Kafka版本。最新的版本是2.4.0(从推荐的镜像站点下载以获得最稳定的版本)。</li></ol><p id="6860" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意:</strong>如果您计划将Kafka与现有的Scala项目集成，您可能需要下载一个与您正在使用的Scala版本兼容的Kafka版本。</p><p id="f7a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你怎么知道的？tar文件通常遵循命名约定<em class="ky"> kafka_ &lt; scala版本&gt; - &lt; kafka发布版本&gt;。tgz </em>。例如，您现有的项目可以在Scala 2.11上编译，因此您必须选择<em class="ky"> kafka_2.11- &lt;最新的kafka版本&gt; </em>。大多数人没有注意到这一步，这会导致各种版本问题。预防胜于治疗，对吗？</p><p id="555b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，解压缩tgz文件:</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kz"><img src="../Images/1b3a90ab914696c202f6884dd1173d0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P9w2255FynbCIHEiv9XqTQ.png"/></div></div></figure><p id="19dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ky">注:</em> </strong>你可能已经注意到了，我把目录重命名为卡夫卡。这是为了防止启动Kafka服务器时出现<em class="ky">“输入路径过长”</em>错误。</p><p id="24f6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">幸运的是，Kafka内置了一个单节点Zookeeper实例。这为我们节省了几分钟时间。这甚至不需要3分钟，不是吗？</p><h1 id="6266" class="la jf hi bd jg lb lc ld jk le lf lg jo lh li lj jr lk ll lm ju ln lo lp jx lq bi translated">投入卡夫卡的世界</h1><h2 id="39a8" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">单一代理集群</h2><p id="bd55" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">我们将从一个简单的代理Kafka集群开始，看看生产者和消费者是如何交互的！</p><p id="0a90" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另外，快速提醒一下！你将有很多终端开放。对这个事实不能全信。我们开始吧！</p><p id="d721" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">卡夫卡<strong class="ih hj">不能离开动物园管理员</strong>跑！现在重复令人作呕！</p><ol class=""><li id="a1e7" class="kp kq hi ih b ii ij im in iq kr iu ks iy kt jc ku kv kw kx bi translated"><strong class="ih hj"> Zookeeper实例</strong> —第一步是启动Zookeeper实例。</li></ol><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es lr"><img src="../Images/f0351701fffaf6a726b6b98e275941ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wArrTgrBfLq5RkEzdfENVA.png"/></div></div></figure><p id="8e23" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.<strong class="ih hj">启动Kafka服务器— </strong>一旦zookeeper启动并运行，您就可以使用下面的命令启动Kafka服务器。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es ls"><img src="../Images/ee922756f6b0bcc7f4272177c68797bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0nFJ8zXHkd_Ll4MP_cl13A.png"/></div></div></figure><p id="7aeb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请注意，我们已经将属性文件作为参数传递来启动zookeeper和Kafka服务器。属性文件不过是一堆键值对，允许您定义服务器的“特性”并对其进行配置。请随意打开属性文件并浏览它。</p><p id="bffb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.<strong class="ih hj">创建主题</strong> —接下来我们将创建一个主题，生产者将向其发布消息。我们把这个题目叫做<em class="ky">“test topic”</em>。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es lt"><img src="../Images/4b4a621c6bd79d43c0da7cf7e0d16070.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z5bfCpfcw-e12eHhwcZIog.png"/></div></div></figure><p id="d61b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个指挥部里似乎有很多事情在进行。我们来分解一下。</p><p id="8202" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">a.<strong class="ih hj">引导服务器</strong> —引导服务器只不过是代理的地址(还记得代理吗？负责接收来自生产者的信息并将其发送给消费者的人？如果不回去看<a class="ae jd" rel="noopener" href="/analytics-vidhya/apache-kafka-an-introduction-beaaaedb6cfa">上一篇</a>)。</p><p id="3ca7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">b.<strong class="ih hj">复制因子</strong> —这表示我们选择保留在Kafka集群中的主题的副本数量。在这种情况下，我们维护主题的一个副本。在多代理集群中，我们可以有更多的副本，并将它们均匀地分布在Kafka代理之间(容错)。可以在主题级别定义复制因子。复制因子为3通常是一个好习惯。如果您正在处理关键项目，这个数字可能会更高。</p><p id="f264" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请务必注意，复制因子不能超过可用代理的数量。例如:对于2个代理的集群，允许的最大复制因子是2。</p><p id="4124" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">c.<strong class="ih hj">分区</strong> —分区是卡夫卡的基本平行单位。分区可以分布在多个代理上。这允许多个使用者并行读取来自主题的消息。</p><p id="d836" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.<strong class="ih hj">生产者</strong> —现在让我们开始我们的第一个适度的命令行生产者。每一行(以'&gt;'开头的将是发送到Kafka集群的新消息)。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es lu"><img src="../Images/58e9232002168b2083cd335be03a43ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fJ-rzHOtHJFNR5NQh05a9Q.png"/></div></div></figure><p id="cb27" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以看到，这里的代理列表指向与我们在前面的命令中提供的引导服务器相同的地址。生产者将把消息发送给本地主机上的代理:9092。</p><p id="fed7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.<strong class="ih hj">消费者</strong> —消费者订阅testTopic并消费来自代理的消息(在localhost:9092，没什么奇怪的)。注意命令中的<em class="ky">【从-开始】</em>。这表明使用者将从最早的消息到最新的消息读取由生产者发送的所有消息。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es lv"><img src="../Images/95610ff7c8cc6e2669b9a6370bae75f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*71CYiyjteaS0aRJB_dz8Dg.png"/></div></div></figure><p id="9509" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你正式成为卡夫卡的用户了！恭喜你！您刚刚创建了您自己的生产者和消费者，并从一个向另一个发送消息。</p><p id="5ff0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您已经看到了消息以最快的速度在两个窗口之间流动，让我们快速看看多代理Kafka集群是如何工作的。</p><h2 id="b808" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">多代理集群</h2><p id="73e3" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">在下一个示例中，我们将看一个3节点Kafka集群。通常，每个代理都与其自己的机器相关联。但是出于演示的目的，我们将在本地机器上启动所有3个代理。</p><ol class=""><li id="a1ef" class="kp kq hi ih b ii ij im in iq kr iu ks iy kt jc ku kv kw kx bi translated">还记得server.properties文件吗？这就像经纪人的PII。经纪人有他们自己指定的属性文件，这些文件唯一地标识了他们，并赋予他们特征(现在这有点过火了，但你明白了)。</li></ol><p id="7f4a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">我们不能用同一个房产档案创建多个经纪人！！</strong></p><ol class=""><li id="f1cd" class="kp kq hi ih b ii ij im in iq kr iu ks iy kt jc ku kv kw kx bi translated">要在集群中引入2个额外的代理，您所要做的就是复制server.properties文件，并将其命名为server-1.properties和server-2.properties(或者您想要的任何名称，但请记住它必须仍然是一个*。属性文件。发挥创造力！)对应于2个新经纪人。</li></ol><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es lw"><img src="../Images/38ac1ea30ed3aae5fcc2eece5bfa4249.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GqUIf7e-NZlaeidhjNYMvQ.png"/></div></div></figure><p id="e3d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.现在，您必须修改这些新创建的属性文件中的3个属性。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es lx"><img src="../Images/a4fdf6579b5ab6c72b52add1dad11a7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:452/format:webp/1*uKd21SrdDeyk2kDwcYVmmg.png"/></div></figure><p id="2807" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">i. <strong class="ih hj"> broker.id </strong> —这是代理的唯一标识符。默认情况下，您的第一个经纪人id应该是0。</p><p id="68ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">二。<strong class="ih hj">监听器</strong> —这是代理与生产者和消费者通信的端口。如果你不修改地址，经纪人将重写彼此的数据，这不是我们想要的。(如果代理在不同的机器上，则不必修改端口号)。</p><p id="5c44" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">三。<strong class="ih hj"> log.dirs </strong> —代理生成的所有日志将存储到的目录。</p><p id="97d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.我们已经运行了动物园管理员和经纪人0。我们将使用修改后的server-1.properties和server-2.properties文件来启动第二个和第三个代理。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es ly"><img src="../Images/833a5f4c9484fb2ff18ada05fe5f15ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TUH4JgTB2hC0jKOnn5ydAA.png"/></div></div></figure><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es lz"><img src="../Images/f0558a281a7058541cf4cc633e7bce77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bx-tO0YscqjiB28itzLLnA.png"/></div></div></figure><p id="c5dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.我们将创建一个复制因子为3的新主题。这意味着我们将在集群中的3个代理之间维护3个主题副本。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es ma"><img src="../Images/e150a68acdbbabc275601ff95e77213a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b0avUx4CXERLtHVOIsi1YQ.png"/></div></div></figure><p id="1aaf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.好了，现在我们已经创建了一个新主题，并设置了复制因子。但是内部发生了什么呢？让我们看看。对该主题的简单描述给出了以下输出:</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es mb"><img src="../Images/d660418b466550ef03d08aa31d288b1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7zrMHf4ySUkhMGwqSqpfkw.png"/></div></div></figure><h2 id="f9b8" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">领导者-追随者模型</h2><p id="0e6e" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">要解释上面的输出，我们需要了解卡夫卡的固有模式。Kafka遵循领导者-追随者模型，每个分区选出一个经纪人作为领导者。在我们的示例中，我们有1个分区，代理0被选为其领导者。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es mc"><img src="../Images/46d56a7ec915dc063591e18ec79be6a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SZhsvJUFLbOnK1P6GCzXFQ.png"/></div></div></figure><p id="b050" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">a.<strong class="ih hj">领导</strong> —领导负责与客户的所有互动。换句话说，领导者负责所有的读写。生产者将为分区向其指定的领导者发送消息。在这种情况下，生产者将其所有消息发送给代理0。反过来，消费者与领导者交互以消费来自分区的消息。那么复制在哪里起作用呢？</p><p id="1145" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">b.<strong class="ih hj">副本</strong> —一旦消息被发送到领导者，该分区的从者将复制领导者中存在的数据。由于生产者将数据发送给领导者，因此在代理0中已经存在一个副本。为了再创建2个副本，Kafka找到了2个代理，并在其中复制了分区。</p><p id="dfb4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">c.<strong class="ih hj"> Isr(同步副本)</strong> —表示与领导者同步的副本数量。目前，所有3个代理都是同步的。</p><p id="0201" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6.现在我们将启动一个生产者shell来发布消息到主题</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es md"><img src="../Images/f5fcf7bb1e10fcfd40a4bedd66bedebf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_J_doF327gSkd65apCEdmA.png"/></div></div></figure><p id="0937" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">7.让我们启动一个消费者来消费这些消息。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es me"><img src="../Images/5cf35f17152b8b67696136c06fd8767c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NJriQAMT1DeJf2-jBu_x2w.png"/></div></div></figure><h2 id="c0e4" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">容错在行动</h2><p id="6d55" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">现在来看看容错是如何工作的，让我们杀死其中一个Kafka服务器(代理)。使用下面显示的命令获取任何一个代理的进程ID。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es mf"><img src="../Images/12a510e01736c9645ff253ac913017eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O7ljs1Jl2wwrHWMj_2KyMA.png"/></div></div></figure><p id="c55f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果这个命令对您不起作用，请尝试netstat。您必须选择当前正在监听的进程ID。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es mg"><img src="../Images/10ff2cb0b66cb4a66c633bc230ea9172.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z064Rv6juyTlL4vSpud1uQ.png"/></div></div></figure><p id="35ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您已经有了进程id，继续执行并终止任务。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es mh"><img src="../Images/80e2180a5e923f330d4dcaabb0613886.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*EVRuG7vyGwAB-Am0FPE_VQ.png"/></div></figure><p id="cbd7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们刚刚做了什么？我们杀了一个经纪人。我们来描述一下题目，进一步分析一下内部。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es mi"><img src="../Images/0e3df61265ff6e25401c2bc007324e74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NBYFaXrunP5X_VU4z7D53Q.png"/></div></div></figure><p id="29f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以看到，领头的还是经纪人0。请注意，同步副本(ISR)已经更改。因为我们杀死了代理1，所以当前同步的副本是代理0和代理2。现在下一个逻辑问题出现了。消费者还能从主题中获取信息吗？</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es mj"><img src="../Images/d1bb4b0bb5c1b44dea2779099af3d078.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HdAjUNZFoQhZTEwUU4JndQ.png"/></div></div></figure><p id="34e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">是啊！尽管代理受到威胁，消费者仍然能够从主题中读取消息。因此是容错的！</p><p id="0296" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，为了让事情变得更有趣一点，我改变了主题中的分区数量，终止了代理0并重新启动了代理1。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es mk"><img src="../Images/c9e7ba33b686dd6852606a124eecdaaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bslh2x1Lzi6vFDMXGYQ-EA.png"/></div></div></figure><p id="b492" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在描述这个主题给出了下面的输出。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es ml"><img src="../Images/fd4ebbda27705a5ed1778916f73ecc0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lq6cF47rbD6Y7nBOK6w31A.png"/></div></div></figure><p id="d24f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们看到每个分区都有自己的领导者。领导者选举是自动的，尽管最初的领导者受到威胁，但没有数据丢失。容错能力再次得到证明！</p><p id="d62f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你爱上卡夫卡了吗？什么事？我想是的！今天就到这里，伙计们。希望您在学习和交流中获得乐趣！</p><p id="2818" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是您开始工作所需的命令列表:</p><pre class="ke kf kg kh fd mm mn mo mp aw mq bi"><span id="bc7e" class="je jf hi mn b fi mr ms l mt mu"><strong class="mn hj">###Commands </strong></span><span id="6165" class="je jf hi mn b fi mv ms l mt mu"><strong class="mn hj">##Un-tarring the tar file you downloaded. Make sure the it's the ##same tgz file. Modify it if you have downloaded a different ##version</strong></span><span id="e6b6" class="je jf hi mn b fi mv ms l mt mu">tar -xzf kafka_2.12-2.4.0.tgz<br/>ren kafka_2.12-2.4.0 kafka<br/>cd kafka</span><span id="0778" class="je jf hi mn b fi mv ms l mt mu"><strong class="mn hj">##Single node Kafka cluster</strong></span><span id="4840" class="je jf hi mn b fi mv ms l mt mu">1. Zookeeper instance (new terminal)<br/>.\bin\windows\zookeeper-server-start.bat .\config\zookeeper.properties</span><span id="c6c0" class="je jf hi mn b fi mv ms l mt mu">2. Kafka server (new terminal)<br/>.\bin\windows\kafka-server-start.bat .\config\server.properties</span><span id="f2b5" class="je jf hi mn b fi mv ms l mt mu">3. Create a topic (new terminal)<br/>.\bin\windows\kafka-topics.bat --create --bootstrap-server localhost:9092 --replication-factor 1 --partitions 1 --topic testTopic</span><span id="ea3c" class="je jf hi mn b fi mv ms l mt mu">4. Producer (new terminal)<br/>.\bin\windows\kafka-console-producer.bat --broker-list localhost:9092 --topic testTopic</span><span id="d36a" class="je jf hi mn b fi mv ms l mt mu">5. Consumer (new terminal)<br/>.\bin\windows\kafka-console-consumer.bat --bootstrap-server localhost:9092 --topic testTopic --from-beginning</span><span id="249d" class="je jf hi mn b fi mv ms l mt mu"><strong class="mn hj">##Multiple node Kafka cluster</strong></span><span id="a3b7" class="je jf hi mn b fi mv ms l mt mu">1. Zookeeper instance (new terminal)<br/>.\bin\windows\zookeeper-server-start.bat .\config\zookeeper.properties</span><span id="79bc" class="je jf hi mn b fi mv ms l mt mu">2. Kafka server 0(new terminal)<br/>.\bin\windows\kafka-server-start.bat .\config\server.properties</span><span id="58d1" class="je jf hi mn b fi mv ms l mt mu">3. Kafka server 1(new terminal)<br/>.\bin\windows\kafka-server-start.bat .\config\server-1.properties</span><span id="5271" class="je jf hi mn b fi mv ms l mt mu">4. Kafka server 2(new terminal)<br/>.\bin\windows\kafka-server-start.bat .\config\server-2.properties</span><span id="608b" class="je jf hi mn b fi mv ms l mt mu">5. Create a topic (new terminal)<br/>.\bin\windows\kafka-topics.bat --create --bootstrap-server localhost:9092 --replication-factor 1 --partitions 1 --topic testReplication</span><span id="ca24" class="je jf hi mn b fi mv ms l mt mu">6. Describe the topic<br/>.\bin\windows\kafka-topics.bat --describe --bootstrap-server localhost:9092 --topic testReplication</span><span id="f52b" class="je jf hi mn b fi mv ms l mt mu">7. Producer (new terminal)<br/>.\bin\windows\kafka-console-producer.bat --broker-list localhost:9092 --topic testReplication</span><span id="eda3" class="je jf hi mn b fi mv ms l mt mu">8. Consumer (new terminal)<br/>.\bin\windows\kafka-console-consumer.bat --bootstrap-server localhost:9092 --topic testReplication --from-beginning</span></pre></div></div>    
</body>
</html>