<html>
<head>
<title>SQL for Data Professionals (Useful commands)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">面向数据专业人员的SQL(有用的命令)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/sql-for-data-professionals-useful-commands-8bf01e16f5a7?source=collection_archive---------21-----------------------#2020-09-23">https://medium.com/analytics-vidhya/sql-for-data-professionals-useful-commands-8bf01e16f5a7?source=collection_archive---------21-----------------------#2020-09-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/9ee10d34aec537faf5a52cc8a4455ca5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NyT2xZPFl98ymTOZjLQE9A.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片来自托比亚斯·菲舍尔在Unsplash上</figcaption></figure><h2 id="227e" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">首先，SQL是什么意思？</h2><p id="c2ba" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km hb bi translated"><strong class="ju hj"> <em class="kn"> SQL </em> </strong>是<strong class="ju hj">s</strong><em class="kn">结构化</em><strong class="ju hj"><em class="kn">q</em></strong><em class="kn">uery</em><strong class="ju hj"><em class="kn">l</em></strong><em class="kn">语言</em></p><h2 id="0226" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">结构化查询语言(SQL)是什么意思？</h2><p id="5597" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km hb bi translated">结构化查询语言(SQL)是一种编程语言，通常用于关系数据库或数据流管理系统。</p><p id="000c" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated">它由IBM在20世纪70年代初开发，现在是美国国家标准协会(ANSI)和国际标准化组织(ISO)认可的官方标准。</p><h2 id="66a9" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">为什么使用SQL？</h2><p id="fb6f" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km hb bi translated">这样想想:你有没有在Excel中打开一个非常大的数据集，结果却是电脑死机甚至关机？SQL允许您一次只访问数据的特定部分，因此您不必将数据下载到CSV中，对其进行操作，也不必让Excel过载。换句话说，SQL负责您可能习惯于在Excel中进行的数据分析。</p><h2 id="95a0" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">SQL子集</h2><p id="3b2b" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km hb bi translated">根据我们希望在数据库上执行的操作，SQL语言被划分为子集，例如:</p><p id="e85f" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated"><strong class="ju hj"> DML —数据操作语言</strong></p><p id="37e6" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated">第一组是DML(数据操作语言)。DML是SQL语言的一个子集，用于包含、查询、更改和删除记录中的数据。可以同时对几个表中的几个记录执行这些任务。执行上述功能的命令有<strong class="ju hj">插入</strong>、<strong class="ju hj">更新</strong>和<strong class="ju hj">删除</strong></p><p id="0a59" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated"><strong class="ju hj"> DDL —数据定义语言</strong></p><p id="2f65" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated">第二组是DDL(数据定义语言)。DDL允许用户定义新的表和相关的元素。大多数商业SQL数据库都有对DDL的专有扩展。</p><p id="d9b7" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated">基本DDL命令包括:</p><ul class=""><li id="876b" class="kt ku hi ju b jv ko jz kp jf kv jj kw jn kx km ky kz la lb bi translated"><strong class="ju hj">创建索引</strong></li><li id="f9a4" class="kt ku hi ju b jv lc jz ld jf le jj lf jn lg km ky kz la lb bi translated"><strong class="ju hj">创建视图</strong></li><li id="88a5" class="kt ku hi ju b jv lc jz ld jf le jj lf jn lg km ky kz la lb bi translated"><strong class="ju hj">更改表格</strong></li><li id="2579" class="kt ku hi ju b jv lc jz ld jf le jj lf jn lg km ky kz la lb bi translated"><strong class="ju hj">改变索引</strong></li><li id="b127" class="kt ku hi ju b jv lc jz ld jf le jj lf jn lg km ky kz la lb bi translated"><strong class="ju hj">下降指数</strong></li><li id="ef60" class="kt ku hi ju b jv lc jz ld jf le jj lf jn lg km ky kz la lb bi translated"><strong class="ju hj">下降视图</strong></li></ul><p id="84d7" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated"><strong class="ju hj"> DCL —数据控制语言</strong></p><p id="8ed2" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated">第三组是DCL(数据控制语言)。DCL控制数据授权和用户许可的各个方面，以控制谁有权查看或操作数据库中的数据。</p><p id="83ae" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated"><strong class="ju hj">两个DCL关键字:</strong></p><p id="08fa" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated"><strong class="ju hj">授权</strong> —授权用户执行或设置操作。<br/> <strong class="ju hj">撤销</strong> —取消或限制用户执行操作的能力。</p><p id="082c" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated"><strong class="ju hj"> DTL —数据交易语言</strong></p><p id="c68f" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated"><strong class="ju hj">开始工作</strong>——(或<strong class="ju hj">开始事务</strong>，取决于<strong class="ju hj"> SQL </strong>方言)——可以用来标记一个数据库事务的开始，可以完成也可以不完成。<br/> <strong class="ju hj">提交</strong> —在数据库管理系统中完成一个事务。<br/> <strong class="ju hj">回滚</strong> —导致自上次<strong class="ju hj">提交</strong>或<strong class="ju hj">回滚</strong>以来对现有数据的更改被丢弃。<br/> <strong class="ju hj">提交</strong>和<strong class="ju hj">回滚</strong>与交易、租赁等控制区域交互。两者都结束任何打开的事务并释放任何与数据关联的挂锁。在没有<strong class="ju hj"> BEGIN WORK </strong>或类似语句的情况下，<strong class="ju hj"> SQL </strong>的语义是依赖于实现的。</p><p id="2d15" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated"><strong class="ju hj"> DQL —数据查询语言</strong></p><p id="6389" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated">虽然只有一个命令，<strong class="ju hj"> DQL </strong>是<strong class="ju hj"> SQL </strong>中使用最多的部分。<strong class="ju hj">选择</strong>命令允许用户指定一个查询(“查询”)作为所需结果的描述。这个命令由几个子句和选项组成，可以准备从最简单到最复杂的查询。</p><p id="09e1" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated">在这篇文章中，我们将重点关注DQL和一些子句、一些逻辑运算符和关系运算符，例如:</p><p id="12fc" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated"><strong class="ju hj">条款</strong></p><ul class=""><li id="1e7f" class="kt ku hi ju b jv ko jz kp jf kv jj kw jn kx km ky kz la lb bi translated">从-用于指定选择记录的表。</li><li id="2064" class="kt ku hi ju b jv lc jz ld jf le jj lf jn lg km ky kz la lb bi translated">其中—用于指定必须收集要选择的记录的条件。</li><li id="5cc2" class="kt ku hi ju b jv lc jz ld jf le jj lf jn lg km ky kz la lb bi translated">分组依据—用于将选定的记录分成特定的组。</li><li id="b808" class="kt ku hi ju b jv lc jz ld jf le jj lf jn lg km ky kz la lb bi translated">排序依据—用于按特定顺序对所选记录进行排序。</li></ul><p id="5033" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated"><strong class="ju hj">逻辑运算符</strong></p><p id="6eba" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated">而且——而且合乎逻辑。评估条件，如果两个条件都正确，则返回true值。<br/>或—或逻辑。评估条件，如果条件正确，则返回真值。</p><p id="83a2" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated"><strong class="ju hj">关系运算符</strong></p><p id="e818" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated">LIKE用于比较模型和指定数据库中的记录。“Like”+%扩展名表示搜索与扩展名开头相同的所有结果。</p><p id="c6ad" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated">介于-用于指定封闭范围内的值。</p><h2 id="5031" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">让我们开始编码吧</h2><figure class="li lj lk ll fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/3e1101dde1e5405096a9bf30c1bbdbea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-ceHJjq8wNgI5zUk1u9nTw.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片来自Bruce Mars的Splash</figcaption></figure><p id="5008" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated">首先，我们有一个名为car的表</p><figure class="li lj lk ll fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="3685" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated">我们使用命令<strong class="ju hj">选择</strong>来告诉选择什么列。在这个例子中，我们想要选择所有的列，所以我们需要使用符号<strong class="ju hj"> * </strong>。之后，我们使用来自的子句<strong class="ju hj">来告诉它应该选择哪个表，这里我们需要表car，我们用分号结束我们的代码，因为这是一个好的实践。</strong></p><pre class="li lj lk ll fd lo lp lq lr aw ls bi"><span id="a30a" class="iu iv hi lp b fi lt lu l lv lw">SELECT *</span><span id="98f5" class="iu iv hi lp b fi lx lu l lv lw">FROM car ;</span></pre><p id="d4b1" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated">结果是整个表格</p><figure class="li lj lk ll fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="8c51" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated">现在，我们不再使用符号*来告诉我们需要哪些列，在名称之后，我们需要使用逗号来书写下一列。我们有了一个新的子句<strong class="ju hj">，其中</strong>我们可以使用这个命令来过滤我们的列，在这个例子中，我们正在过滤生产年份等于1999年的汽车。</p><pre class="li lj lk ll fd lo lp lq lr aw ls bi"><span id="033c" class="iu iv hi lp b fi lt lu l lv lw">SELECT brand , production_year , model , color</span><span id="8635" class="iu iv hi lp b fi lx lu l lv lw">FROM car</span><span id="3c7c" class="iu iv hi lp b fi lx lu l lv lw">WHERE production_year =  1999;</span></pre><figure class="li lj lk ll fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="077f" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated">现在我们将从表车、<strong class="ju hj">中<strong class="ju hj">选择</strong>栏目品牌、生产年份、型号、颜色、<strong class="ju hj">，其中</strong>生产年份为2000年</strong>和2009年<strong class="ju hj">之间的<strong class="ju hj">。</strong></strong></p><pre class="li lj lk ll fd lo lp lq lr aw ls bi"><span id="2af1" class="iu iv hi lp b fi lt lu l lv lw"><strong class="lp hj">SELECT</strong> brand , production_year , model , color</span><span id="a581" class="iu iv hi lp b fi lx lu l lv lw"><strong class="lp hj">FROM</strong> car</span><span id="9529" class="iu iv hi lp b fi lx lu l lv lw"><strong class="lp hj">WHERE</strong> production_year <strong class="lp hj">BETWEEN</strong> 2000 <strong class="lp hj">AND</strong> 2009;</span></pre><figure class="li lj lk ll fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><h1 id="ef6b" class="ly iv hi bd iw lz ma mb ja mc md me je mf mg mh ji mi mj mk jm ml mm mn jq mo bi translated">使用两个表格</h1><p id="65fa" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km hb bi translated">我们将从两个表中选择数据，因为在现实世界中，我们通常使用多个表来查询必要的数据。</p><p id="196d" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated"><strong class="ju hj">第一桌导演</strong></p><figure class="li lj lk ll fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="fbae" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated"><strong class="ju hj">第二桌电影</strong></p><figure class="li lj lk ll fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="c319" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated">我们将从表格电影中<strong class="ju hj">选择</strong>所有列<strong class="ju hj">，并在</strong>(其中)<strong class="ju hj"> </strong>电影上<strong class="ju hj">连接</strong>表格导演【movie.director _ id等于表格导演的id，并使用<strong class="ju hj"> ORDER BY按标题的字母顺序对数据进行排序。</strong></p><pre class="li lj lk ll fd lo lp lq lr aw ls bi"><span id="b168" class="iu iv hi lp b fi lt lu l lv lw"><strong class="lp hj">SELECT</strong> *</span><span id="3b07" class="iu iv hi lp b fi lx lu l lv lw"><strong class="lp hj">FROM</strong> movie</span><span id="6926" class="iu iv hi lp b fi lx lu l lv lw"><strong class="lp hj">JOIN</strong> director <strong class="lp hj">ON</strong>  movie.director_id = director.id </span><span id="dc36" class="iu iv hi lp b fi lx lu l lv lw"><strong class="lp hj">ORDER BY title;</strong></span></pre><figure class="li lj lk ll fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><figure class="li lj lk ll fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="bf8d" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated">我们将从表格电影中<strong class="ju hj">选择</strong>所有列<strong class="ju hj">，并在</strong>(其中)<strong class="ju hj"> </strong>电影中<strong class="ju hj">连接</strong>表格导演<strong class="ju hj">。例如，如果数据中有重复项，可以使用“分组依据”来计算字段中重复项的数量。)和<strong class="ju hj">限制</strong>(当您有一个非常大的数据库，并且不想长时间加载数据时，您可以限制最大数据量，这很有帮助)<strong class="ju hj">。</strong></strong></p><pre class="li lj lk ll fd lo lp lq lr aw ls bi"><span id="5b7a" class="iu iv hi lp b fi lt lu l lv lw"><strong class="lp hj">SELECT</strong> *</span><span id="f871" class="iu iv hi lp b fi lx lu l lv lw"><strong class="lp hj">FROM</strong> movie</span><span id="8d55" class="iu iv hi lp b fi lx lu l lv lw"><strong class="lp hj">JOIN</strong> director <strong class="lp hj">ON</strong>  movie.director_id = director.id</span><span id="a2c4" class="iu iv hi lp b fi lx lu l lv lw"><strong class="lp hj">GROUP </strong>title</span><span id="f088" class="iu iv hi lp b fi lx lu l lv lw"><br/><strong class="lp hj">LIMIT</strong> 100 ;</span></pre><figure class="li lj lk ll fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="39eb" class="pw-post-body-paragraph js jt hi ju b jv ko jx jy jz kp kb kc jf kq ke kf jj kr kh ki jn ks kk kl km hb bi translated">对于那些刚开始学习SQL的人来说，有了这些知识和命令，就有可能提取开始分析和产生价值所需的数据。</p><figure class="li lj lk ll fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mp"><img src="../Images/b56b41b4850101dee1c7b84d706d0117.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AtfzpKK4zfVsCelY9ge-pw.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片来自Tobias Fischer on Splash</figcaption></figure></div></div>    
</body>
</html>