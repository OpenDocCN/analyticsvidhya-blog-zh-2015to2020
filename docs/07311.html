<html>
<head>
<title>Scraping tweets using twitterscraper library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用twitterscraper库抓取推文</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/twitter-scraper-using-twitterscraper-library-dd76802a8ddf?source=collection_archive---------2-----------------------#2020-06-21">https://medium.com/analytics-vidhya/twitter-scraper-using-twitterscraper-library-dd76802a8ddf?source=collection_archive---------2-----------------------#2020-06-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="07f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，我们将学习如何使用twitter-scrapper库来抓取特定主题的推文</p><p id="925b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们需要使用下面提到的命令安装twitterscraper库。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="94a6" class="jm jn hi ji b fi jo jp l jq jr">!pip install twitterscraper</span></pre><p id="09c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在安装后，检查它是否是当前版本。当我写这篇博客的时候，我用的是最新的1.4.0版本。</p><p id="eb17" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们需要导入三样东西，它们是query_tweets、datetime和pandas。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="bbfd" class="jm jn hi ji b fi jo jp l jq jr">from<strong class="ji hj"> </strong>twitterscraper<strong class="ji hj"> </strong>import query_tweets<br/>import datetime as dt<br/>import pandas as pd</span></pre><p id="4eeb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们将提到想要抓取推文的时间跨度。然后，我们将提到我们想要多少条推文(这里我们没有得到完全相同的推文数量，但大致如此)。之后，我们将提到我们需要哪种语言的推文。Twitter支持34种不同类型的语言。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="5557" class="jm jn hi ji b fi jo jp l jq jr">begin_date=dt.date(2020,4,14)<br/>end_date=dt.date(2020,5,14)<br/>limit=1000<br/>lang='english'</span></pre><p id="b7a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们不提及begin_date和end_date，那么它将抓取所有的推文。如果我们没有提到任何限制，那么它将会抓取所有的推文。如果我们不提及lang，它将收集所有语言的推文。</p><p id="7ec5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们将通过<strong class="ih hj"> query_tweets( ) </strong>函数收集推文。在这里，我们将第一个参数作为我们想要收集tweets的标签或主题发送，之后我们将所有上述参数作为参数。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="f308" class="jm jn hi ji b fi jo jp l jq jr">tweets=query_tweets("#lockdown AND #India ",begindate=begin_date,enddate=end_date,limit=limit,lang=lang)</span></pre><p id="5708" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，从2020年3月14日到2020年4月14日，推文将包含大约1000条关于一级防范禁闭和印度的英文推文。</p><p id="48ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是这里tweets是一个对象，所以我们必须使用下面提到的代码将它转换成熊猫数据帧。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="8642" class="jm jn hi ji b fi jo jp l jq jr">df=pd.DataFrame(t.__dict__ <strong class="ji hj">for</strong> t <strong class="ji hj">in</strong> tweets)</span></pre><p id="471d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们可以轻松地可视化我们收集的所有推文。这个<strong class="ih hj"> df </strong>数据帧将有22列或特征。那些特征分别是<strong class="ih hj">未命名:0 </strong>、<strong class="ih hj">有_媒体</strong>、<strong class="ih hj">标签</strong>、<strong class="ih hj"> img_urls </strong>、<strong class="ih hj">被_回复</strong>、<strong class="ih hj">被_回复</strong>、<strong class="ih hj">点赞</strong>、<strong class="ih hj">链接</strong>、<strong class="ih hj"> parent_tweet_id </strong>、<strong class="ih hj">回复</strong>、<strong class="ih hj">回复_回复</strong></p><p id="9efe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个twitterscraper的优点是我们可以抓取任何时间段的推文，而如果我们使用twitter API，那么我们最多只能抓取过去15天的数据，不能超过15天。</p></div></div>    
</body>
</html>