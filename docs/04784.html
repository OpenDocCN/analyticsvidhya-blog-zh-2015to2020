<html>
<head>
<title>Jupyter/Python for COVID-19 data analysis (part 1)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于新冠肺炎数据分析的Jupyter/Python(第1部分)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/jupyter-python-for-covid-19-data-analysis-part-1-df73afa27462?source=collection_archive---------19-----------------------#2020-03-31">https://medium.com/analytics-vidhya/jupyter-python-for-covid-19-data-analysis-part-1-df73afa27462?source=collection_archive---------19-----------------------#2020-03-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="c175" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们在拉平曲线吗？我们预计会有多少人死亡？死亡率是多少？</p><p id="3a00" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这组帖子中，我将尝试展示如何使用Python工具来获得对问题的简单而快速的数据洞察。它不能作为真正科学研究的参考，但它可以帮助更好地理解疫情趋势；以及给出一些关键值的粗略估计。我还希望展示Python中应用数据分析的简易性。</p><h2 id="532d" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">你需要什么？</h2><p id="29e4" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">要跟踪我，您需要安装Jupyter笔记本；另外，下面的Python包:<code class="du kd ke kf kg b">pandas</code>、<code class="du kd ke kf kg b">numpy</code>、<code class="du kd ke kf kg b">scipy</code>、<code class="du kd ke kf kg b">matplotlib</code>和请求。在正文里我会放上我笔记本的截图。文件本身可以在这里找到:<a class="ae kh" href="https://github.com/dmitrii303/covid/blob/master/Covid%20part1.ipynb" rel="noopener ugc nofollow" target="_blank">https://github . com/dmitrii 303/Covid/blob/master/Covid % 20 part 1 . ipynb</a></p><h2 id="d751" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">数据准备</h2><p id="5933" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">我通过这个API跟踪冠状病毒病例的每日更新:<a class="ae kh" href="https://coronavirus-tracker-api.herokuapp.com" rel="noopener ugc nofollow" target="_blank">https://coronavirus-tracker-api.herokuapp.com</a></p><p id="307e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一步是请求对应于病例、死亡和恢复数据的三个不同的终点:</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es ki"><img src="../Images/ef2a47288f200a279bd0dc2147a3e523.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jfcTZe89zfIPCkCLlYvo2Q.png"/></div></div></figure><p id="e797" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所提供的数据是按国家分类的，我们需要按国家/天来分类。另外，这三个资源都有相似的模式，所以我们可以创建一个函数，从HTTP-request中获取JSON-data，并返回一个包含基本数据的Python字典列表:</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es ku"><img src="../Images/fbcb1fe93e1db512114f7a883ece4931.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GXJvWECX75KzNaMeNvtGzA.png"/></div></div></figure><p id="1b10" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们将使用<code class="du kd ke kf kg b">pandas</code>库将所有数据放入数据帧，并合并三个数据源:</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es kv"><img src="../Images/d0726c6ac44f32399fa20f639e0c552c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fC1jTkuB92u_kOIdIeTh-w.png"/></div></div></figure><p id="77df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们有了一个单一的数据框架，其中包含每个国家每个日期的完整病例/死亡/恢复数据。由于不同的国家遵循不同的战略，因此具有完全不同的动态，我们将重点关注一个国家的统计数据。我选择了意大利，因为它已经有了大量的数据，疫情仍在持续，目前还没有开始大规模的测试。下一步是按国家和日期过滤数据。当根本没有案例时，我们不想关注陈旧的数据，因此，我们将起始日期定为2020年2月10日(案例开始显著增长的前10天)。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es kv"><img src="../Images/278ffd90f857804dca902f88dc9bbcba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b0wTbt-mACRtqxzcirwLog.png"/></div></div></figure><h2 id="f582" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">动力学研究</h2><p id="5c72" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">现在可以显示病例数的历史演变情况:</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es kw"><img src="../Images/0f089211004f05b1fb0c161defca8e11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nfNxnvnVejJXTJg2zeSd5g.png"/></div></div></figure><p id="495b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们想尝试预测曲线的未来行为，我们可以尝试猜测它的形状。一般来说，流行病的过程开始呈指数增长，并在某一点达到饱和。描述它的最标准方法是使用逻辑函数(S形或S形):</p><figure class="kj kk kl km fd kn er es paragraph-image"><div class="er es kx"><img src="../Images/fe86af88e3c1cfdefed2a6e379149b4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:528/1*SJfTOsTd17vG8oqBX8Blng.gif"/></div></figure><p id="c24f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">物流增长模型用于流行病学，这个特殊的函数是那些用于真实研究的函数的简化版本。我在这里提出一个简单的方法，但它仍然会给出对过程的定性理解。</p><p id="307c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们认为它是从流行病开始的天数的函数。该函数由3个参数描述(<code class="du kd ke kf kg b">M</code>、<code class="du kd ke kf kg b">k</code>、<code class="du kd ke kf kg b">x0</code>)，其中<code class="du kd ke kf kg b">M</code>代表函数的最大值(在我们的例子中，它将是案例的最大总数)。有了历史数据，我们可以尝试推导出这三个参数。为此，我们使用了<code class="du kd ke kf kg b">scipy</code>优化包，就这么简单:</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es ku"><img src="../Images/0191f57a8287c9882c3c8539be7f0304.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E4YlsQGjDYnavNrSqaqaHA.png"/></div></div></figure><p id="9911" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个片段输出了三个参数，我们可以看到我们应该预期的最大案例数大约是13万。此外，该过程的典型时间为40天左右。这意味着在疫情开始后40天(3月21日)达到最大病例数(65K)的一半。为了说明该函数对历史数据的描述有多好，以及为了预测未来的行为，我们可以在更大的日期范围内运行该函数，并将结果与历史数据一起绘制出来:</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es ki"><img src="../Images/6cb695d1e83d361ad057701c13100bfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PbHA62cSDkb2D7JmY3BedQ.png"/></div></div></figure><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es ky"><img src="../Images/736199a32e39c7f1a1509c561e13bc4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vnc4PB6t0_XYuey_8DyJyA.png"/></div></div></figure><h2 id="0194" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">每日增量预测</h2><p id="a266" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">除了累计确诊病例动态之外，关注每日增长可能也很有趣，因为这些是我们每天观察的真实数字。为此，我们只需用相邻天数的简单替换将累积案例转换为每日增量列表:</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es kv"><img src="../Images/7a97a7b55e9010930741682c841bd8eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bfBXwPKspvbNEHAYF_9cqA.png"/></div></div></figure><p id="4b3e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果模型预测的趋势是正确的，我们可以预计在4月10日左右突破每天1，000例新病例的阈值。</p><h2 id="a8c3" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated"><strong class="ak">总结</strong></h2><p id="d653" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">我试图展示用简单的Python编码进行简单的数学建模可以快速而有意义地洞察实时数据。代码是灵活的，你可以尝试检查其他国家的动态，甚至尝试自己的调查。在下一部分中，我将展示如何预测死亡/恢复动态，以及最终活动案例的数量何时开始减少。</p></div></div>    
</body>
</html>