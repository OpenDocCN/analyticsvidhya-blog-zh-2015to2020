<html>
<head>
<title>Real-Time Webcam Face Detection System using OpenCV in Python — Windows and macOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Python-Windows和macOS中使用OpenCV的实时网络摄像头人脸检测系统</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/real-time-webcam-face-detection-system-using-opencv-in-python-windows-and-macos-86c31fddd2bc?source=collection_archive---------7-----------------------#2020-01-02">https://medium.com/analytics-vidhya/real-time-webcam-face-detection-system-using-opencv-in-python-windows-and-macos-86c31fddd2bc?source=collection_archive---------7-----------------------#2020-01-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/f44258380fd1896582a43fa513ec6ddc.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*EvFccCvEJfGilIvINESc1g.gif"/></div><figcaption class="im in et er es io ip bd b be z dx translated">通过网络摄像头进行人脸检测</figcaption></figure><p id="28ff" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">人脸检测使用计算机视觉从图像中提取信息来识别人脸。在这个项目中，我们将学习如何使用python以简单的步骤创建一个人脸检测系统。该系统的输入将通过计算机的网络摄像头实时进行。</p><h1 id="79e7" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated"><strong class="ak">要在pip (Windows + macOS)中安装的库</strong></h1><ol class=""><li id="2cb9" class="km kn hi is b it ko ix kp jb kq jf kr jj ks jn kt ku kv kw bi translated"><strong class="is hj"> OpenCV(开源计算机视觉)库:</strong>它的建立是为了帮助开发者执行与计算机视觉相关的任务。</li></ol><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="d719" class="lg jp hi lc b fi lh li l lj lk">pip install opencv-python</span></pre><p id="5212" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，我们需要安装人脸识别API</p><p id="68d3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> 2。dlib库:</strong> dlib是通过预先训练好的模型建立起来的，用来定位面部标志点。</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="dcc1" class="lg jp hi lc b fi lh li l lj lk">pip install dlib</span></pre><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es ll"><img src="../Images/30943cace8cbcaf2d3506908db3fd8cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pbqisy-J1z5Wtspm_ts7KA.png"/></div></div></figure><p id="b377" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> 3。face_recognition库:</strong> face_recognition是一个开源项目，也被称为最直白的人脸识别API。</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="883f" class="lg jp hi lc b fi lh li l lj lk">pip install face_recognition</span></pre><h1 id="2488" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated"><strong class="ak">让我们开始使用Python </strong></h1><p id="424b" class="pw-post-body-paragraph iq ir hi is b it ko iv iw ix kp iz ja jb lq jd je jf lr jh ji jj ls jl jm jn hb bi translated">现在，我们已经安装了所需的库。我们将开始实现如下所示的代码。我解释了每个代码块，以帮助您理解后台发生了什么。</p><p id="fc4a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请随意跳到这一页的末尾，获得完整代码的链接。</p><p id="cb7c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤1: </strong>打开Spyder</p><p id="4079" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤2: </strong>导入库</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="1a12" class="lg jp hi lc b fi lh li l lj lk">import cv2<br/>import face_recognition</span></pre><p id="9804" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤3: </strong>参考您系统的网络摄像头</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="2698" class="lg jp hi lc b fi lh li l lj lk">video_capture = cv2.VideoCapture(0)</span></pre><p id="448e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第四步:</strong>初始化需要的变量。这些变量将在稍后的代码中填充</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="3f0b" class="lg jp hi lc b fi lh li l lj lk">face_locations = []</span></pre><p id="384e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第五步:</strong>我们把我们的视频(实时)分成不同的帧。在每一帧中，我们使用上面导入的API来检测人脸的位置。对于检测到的每一张脸，我们定位坐标并在它周围画一个矩形，然后将视频发布给观众。</p><p id="c69f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">完整的代码如下所示——代码下面有解释</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="a6c3" class="lg jp hi lc b fi lh li l lj lk">while True:<br/> # Grab a single frame of video<br/> ret, frame = video_capture.read()</span><span id="52c6" class="lg jp hi lc b fi lt li l lj lk"># Convert the image from BGR color (which OpenCV uses) to RGB color (which face_recognition uses)<br/> rgb_frame = frame[:, :, ::-1]</span><span id="7264" class="lg jp hi lc b fi lt li l lj lk"># Find all the faces in the current frame of video<br/> face_locations = face_recognition.face_locations(rgb_frame)</span><span id="da54" class="lg jp hi lc b fi lt li l lj lk"># Display the results<br/> for top, right, bottom, left in face_locations:<br/> # Draw a box around the face<br/> cv2.rectangle(frame, (left, top), (right, bottom), (0, 0, 255), 2)</span><span id="9d99" class="lg jp hi lc b fi lt li l lj lk"># Display the resulting image<br/> cv2.imshow(‘Video’, frame)</span><span id="9768" class="lg jp hi lc b fi lt li l lj lk"># Hit ‘q’ on the keyboard to quit!<br/> if cv2.waitKey(1) &amp; 0xFF == ord(‘q’):<br/> break</span></pre><p id="cd3b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第一区:</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="339f" class="lg jp hi lc b fi lh li l lj lk"># Grab a single frame of video<br/> ret, frame = video_capture.read()</span><span id="6b3c" class="lg jp hi lc b fi lt li l lj lk"># Convert the image from BGR color (which OpenCV uses) to RGB color (which face_recognition uses)<br/> rgb_frame = frame[:, :, ::-1]</span></pre><p id="6705" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里，我们一次处理一帧。使用cv2库提取帧，cv2库以BGR(蓝-绿-红)颜色捕获帧，而面部识别库使用RGB(红-绿-蓝)格式。因此，我们翻转框架的颜色代码。</p><p id="616f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">模块2: </strong></p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="0021" class="lg jp hi lc b fi lh li l lj lk"> face_locations = face_recognition.face_locations(rgb_frame)</span></pre><p id="aaec" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里，我们定位帧中存在的面部的坐标。列表<em class="lu"> face_locations </em>由检测到的面部的x、y坐标以及宽度和高度填充。</p><p id="454d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第3块:</strong></p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="e035" class="lg jp hi lc b fi lh li l lj lk"> for top, right, bottom, left in face_locations:<br/> # Draw a box around the face<br/> cv2.rectangle(frame, (left, top), (right, bottom), (0, 0, 255), 2)</span></pre><p id="9ba5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里，我们在每个捕捉到的人脸周围画一个矩形。该矩形从x和y坐标(在本例中为左侧和顶部)开始，延伸到检测到的面部的宽度和高度(在本例中为右侧和底部)。代码(0，0，255)代表B-G-R序列中的颜色代码。</p><p id="4a98" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第4块:</strong></p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="1389" class="lg jp hi lc b fi lh li l lj lk"> cv2.imshow(‘Video’, frame)</span><span id="6c3f" class="lg jp hi lc b fi lt li l lj lk"> if cv2.waitKey(1) &amp; 0xFF == ord(‘q’):<br/> break</span></pre><p id="002d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">生成的图像(帧)被释放给查看者，循环继续运行，直到用户按下键盘上的q键。</p><p id="533e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第六步:</strong>必须发布所有拍摄的视频。</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="55b8" class="lg jp hi lc b fi lh li l lj lk">video_capture.release()<br/>cv2.destroyAllWindows()</span></pre><h1 id="b87a" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated"><strong class="ak">在命令行运行程序</strong></h1><p id="08c6" class="pw-post-body-paragraph iq ir hi is b it ko iv iw ix kp iz ja jb lq jd je jf lr jh ji jj ls jl jm jn hb bi translated">下一步是<a class="ae lv" rel="noopener" href="/@venkatesh.chandra_75550/saving-output-of-object-recognition-in-macos-opencv-python-5914bb5d9ca8">保存</a>文件。py格式并在命令行/Anaconda提示符下运行它。</p><p id="fe94" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我在Anaconda提示符下运行它，首先使用命令cd导航到该文件夹。</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="baaa" class="lg jp hi lc b fi lh li l lj lk">cd &lt;folder path&gt;</span></pre><p id="327a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">运行python文件</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="7360" class="lg jp hi lc b fi lh li l lj lk">python filename.py</span></pre><p id="fb84" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您将看到一个弹出窗口，您的网络摄像头将打开。试着移动你的脸或者让你的朋友和你一起加入相框。面部检测系统将检测所有的面部。你也可以尝试图片。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es lw"><img src="../Images/b027b3e4985ce4cfbc7a62dab817cf6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jBkjAweV0ovQx2YklqXdnQ.png"/></div></div></figure><p id="d776" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">瞧！您已经成功构建了一个实时人脸检测系统。</p><p id="c6a4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你有任何问题，请在评论区告诉我。</p><h1 id="91bc" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated"><strong class="ak">代码</strong></h1><p id="6e59" class="pw-post-body-paragraph iq ir hi is b it ko iv iw ix kp iz ja jb lq jd je jf lr jh ji jj ls jl jm jn hb bi translated"><a class="ae lv" href="https://github.com/chandravenky/Computer-Vision---Object-Detection-in-Python/tree/master" rel="noopener ugc nofollow" target="_blank">Python/tree/master中的https://github.com/chandravenky/Computer-Vision对象检测</a></p><h1 id="320c" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated"><strong class="ak">相关链接</strong></h1><p id="4e1c" class="pw-post-body-paragraph iq ir hi is b it ko iv iw ix kp iz ja jb lq jd je jf lr jh ji jj ls jl jm jn hb bi translated"><a class="ae lv" rel="noopener" href="/@venkatesh.chandra_75550/face-detection-on-recorded-videos-using-opencv-in-python-windows-and-macos-407635c699"><strong class="is hj">Python中录制视频的人脸检测— Windows和macOS </strong> </a></p><p id="673e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae lv" rel="noopener" href="/@venkatesh.chandra_75550/vehicle-car-detection-in-real-time-and-recorded-videos-in-python-windows-and-macos-c5548b243b18"> <strong class="is hj">使用OpenCV的Python中的车辆检测— Windows和macOS </strong> </a></p><p id="5e44" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae lv" rel="noopener" href="/@venkatesh.chandra_75550/person-pedestrian-detection-in-real-time-and-recorded-videos-in-python-windows-and-macos-4c81142f5f59"> <strong class="is hj">使用OpenCV的Python中的行人检测— Windows和macOS </strong> </a></p><p id="311a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae lv" rel="noopener" href="/@venkatesh.chandra_75550/saving-output-of-object-recognition-in-macos-opencv-python-5914bb5d9ca8"> <strong class="is hj">在macOS中保存物体识别的输出</strong> </a></p><h1 id="da4c" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">去哪里找我🤓</h1><ol class=""><li id="e833" class="km kn hi is b it ko ix kp jb kq jf kr jj ks jn kt ku kv kw bi translated">在<a class="ae lv" href="https://www.linkedin.com/in/venkateshchandra/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>/<a class="ae lv" href="https://github.com/chandravenky" rel="noopener ugc nofollow" target="_blank">GitHub</a>/<a class="ae lv" href="http://chatraja.com/" rel="noopener ugc nofollow" target="_blank">我的网站</a>上与我联系</li><li id="b89e" class="km kn hi is b it lx ix ly jb lz jf ma jj mb jn kt ku kv kw bi translated">感觉大方？在这里给我买一杯<a class="ae lv" href="https://www.buymeacoffee.com/chandravenky" rel="noopener ugc nofollow" target="_blank">咖啡</a> ☕️</li></ol></div></div>    
</body>
</html>