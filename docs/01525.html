<html>
<head>
<title>Working on Jupyter notebooks in VS Code from virtual conda environment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在虚拟conda环境中使用VS代码开发Jupyter笔记本</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/working-on-jupyter-notebooks-in-vs-code-from-virtual-conda-environment-f415726e329d?source=collection_archive---------1-----------------------#2019-10-29">https://medium.com/analytics-vidhya/working-on-jupyter-notebooks-in-vs-code-from-virtual-conda-environment-f415726e329d?source=collection_archive---------1-----------------------#2019-10-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="ffb2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们可以从Visual Studio代码中对Jupyter笔记本进行本地编辑，可视化交互式图形，并从一个位置部署数据科学项目！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/cab8d808061a8e50c224cb8e20a305cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ckWxE4b3zxi1bgZoJFFxOw.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">卡斯帕·卡米尔·鲁宾在<a class="ae jt" href="https://unsplash.com/s/photos/microsoft?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="dfc3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我看到微软关于在VS代码中对Jupyter笔记本进行<a class="ae jt" href="https://devblogs.microsoft.com/python/announcing-support-for-native-editing-of-jupyter-notebooks-in-vs-code/" rel="noopener ugc nofollow" target="_blank">原生编辑的公告时，我很兴奋能够使用这个功能，因为你现在可以直接编辑了。ipynb文件，并获得Jupyter笔记本的交互性和VS代码的所有功能。</a></p><p id="71de" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">为什么要VS代码？</strong></p><blockquote class="ju jv jw"><p id="1549" class="if ig jx ih b ii ij ik il im in io ip jy ir is it jz iv iw ix ka iz ja jb jc hb bi translated">“VS Code有很多内置特性，比如调试、嵌入式Git控件和GitHub、语法高亮、智能代码完成、代码片段和代码重构。它是非常可定制的，允许用户改变主题、键盘快捷键、偏好，并安装增加额外功能的插件。它还有一个嵌入其中的终端。”— <a class="ae jt" href="https://www.datacamp.com/community/tutorials/top-python-ides-for-2019" rel="noopener ugc nofollow" target="_blank">数据营</a></p></blockquote><p id="2f70" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是在尝试这个新特性时，由于不熟悉VS代码和Anaconda虚拟环境，我花了一些时间来解决环境问题。我想分享一下我的经验，主要是给和我一样习惯在jupyter笔记本上做数据科学，想开始使用jupyter笔记本的VS代码原生编辑的人。</p><p id="6088" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们开始吧:</p><ol class=""><li id="4fef" class="kb kc hi ih b ii ij im in iq kd iu ke iy kf jc kg kh ki kj bi translated">安装anaconda.com<a class="ae jt" href="https://docs.anaconda.com/anaconda/install/" rel="noopener ugc nofollow" target="_blank">的Anaconda</a>(如果你对Anaconda vs Miniconda vs conda 感到困惑，请浏览Daniel Bourke的精彩博客。如果您的系统中已经安装了Anaconda，那么您可以从第3步开始</li><li id="2c6d" class="kb kc hi ih b ii kk im kl iq km iu kn iy ko jc kg kh ki kj bi translated">如果您喜欢使用命令行界面(CLI ),您可以使用conda在Windows或终端上使用Anaconda提示符来验证安装。</li><li id="2352" class="kb kc hi ih b ii kk im kl iq km iu kn iy ko jc kg kh ki kj bi translated">要打开Anaconda提示符:</li></ol><p id="84eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Windows:单击开始，搜索或从菜单中选择Anaconda提示符。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kp"><img src="../Images/301fb2807cf986c5e5b1cccb20e908f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:894/0*9sHpEuXXDezwVAJ1"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">资料来源:anaconda.com</figcaption></figure><p id="17d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意:</strong> Anaconda提示符是Anaconda安装附带的，与常规的Windows powershell或命令提示符不同。详细说明请查看官方<a class="ae jt" href="https://www.anaconda.com/distribution/" rel="noopener ugc nofollow" target="_blank">蟒蛇网站</a>。</p><p id="9707" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.a)如果你想在基本位置创建虚拟conda环境/项目文件夹<my-proj>:</my-proj></p><pre class="je jf jg jh fd kq kr ks kt aw ku bi"><span id="b79a" class="kv kw hi kr b fi kx ky l kz la">(base)C:\Users\&lt;user-name&gt;</span></pre><p id="0fcc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Anaconda提示符下键入:</p><pre class="je jf jg jh fd kq kr ks kt aw ku bi"><span id="310d" class="kv kw hi kr b fi kx ky l kz la">(base)C:\Users\&lt;user-name&gt; conda create -n my-proj python=3.7 pandas numpy matplotlib scikit-learn jupyter notebook</span></pre><p id="2322" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用上面的命令我们要求<strong class="ih hj"> conda </strong>到<strong class="ih hj">创建</strong>一个虚拟环境由<strong class="ih hj">命名my-proj </strong>带有特定版本<a class="ae jt" href="https://www.python.org/" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">python 3.7</strong></a><strong class="ih hj"/><a class="ae jt" href="https://numpy.org/" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">numpy</strong></a><strong class="ih hj"/><a class="ae jt" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">matplotlib</strong></a><strong class="ih hj"/><a class="ae jt" href="https://scikit-learn.org/stable/" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">scikit-learn</strong>您可以根据您的项目需求编辑包名。</a></p><p id="6ecc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">键入以下命令以激活虚拟环境。</p><pre class="je jf jg jh fd kq kr ks kt aw ku bi"><span id="97c2" class="kv kw hi kr b fi kx ky l kz la">(base) C:\Users\&lt;user-name&gt; conda activate my-proj</span><span id="0a61" class="kv kw hi kr b fi lb ky l kz la">(my-proj) C:\Users\&lt;user-name&gt; code</span></pre><p id="7ef2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以使用<em class="jx">‘conda install&lt;package-name&gt;’</em>或<em class="jx">‘pip install&lt;package-name&gt;’</em>命令添加额外的库。</p><p id="0081" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.将您的项目文件夹<my-proj>添加到VS代码项目工作区。</my-proj></p><p id="1752" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jx">注意:</em> </strong> <em class="jx">确保安装了</em> <a class="ae jt" href="https://code.visualstudio.com/download" rel="noopener ugc nofollow" target="_blank"> <em class="jx"> Visual Studio代码</em> </a> <em class="jx">并启用了Anaconda、Python和Jupyter扩展。</em> <a class="ae jt" href="https://code.visualstudio.com/docs/python/jupyter-support" rel="noopener ugc nofollow" target="_blank"> <em class="jx"> Jupyter笔记本对visual studio代码的支持</em> </a> <em class="jx">给出了从Visual Studio代码访问Jupyter笔记本的完整细节。这个博客主要关注康达环境下jupyter笔记本的本地编辑。</em></p><p id="f14a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6.从VS代码中打开终端，并确保您处于虚拟conda环境中。如果没有再次激活环境—</p><pre class="je jf jg jh fd kq kr ks kt aw ku bi"><span id="b602" class="kv kw hi kr b fi kx ky l kz la">C:\Users\&lt;user-name&gt;\Anaconda3\envs\my-proj&gt; conda activate my-proj</span></pre><p id="fe3e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">7.从可用的解释器中选择解释器，并确保它与我们在上面创建的虚拟conda环境路径相同，后跟python.exe:</p><pre class="je jf jg jh fd kq kr ks kt aw ku bi"><span id="64b8" class="kv kw hi kr b fi kx ky l kz la"> C:\Users\&lt;user-name&gt;\&lt;my-proj&gt;\python.exe</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lc"><img src="../Images/83df6d8db04589780c640be37e7d93dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hl_-u4mY7lvkulYmLL-1Xg.png"/></div></div></figure><p id="9629" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 8 </strong>。如果出现错误，打开<strong class="ih hj">。在<strong class="ih hj"> </strong> our &lt; my-proj &gt;文件夹中创建的vscode </strong>文件夹。验证<strong class="ih hj">settings . JSON</strong>' python . python path '字典值设置为</p><pre class="je jf jg jh fd kq kr ks kt aw ku bi"><span id="751f" class="kv kw hi kr b fi kx ky l kz la">“C:\\Users\\&lt;user-name&gt;\\&lt;my-proj&gt;\\python.exe” </span></pre><p id="f20a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果没有，请编辑当前虚拟环境位置的路径，后跟“python.exe”，并用“\\”替换“\”。</p><p id="250a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">9.创建一个新的jupyter笔记本并开始编码！！</p><p id="06fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">或者</p><p id="f804" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下载<a class="ae jt" href="https://scikit-learn.org/stable/auto_examples/datasets/plot_iris_dataset.html#sphx-glr-auto-examples-datasets-plot-iris-dataset-py" rel="noopener ugc nofollow" target="_blank"> plot_iris_dataset.ipynb </a>并上传到&lt; my-proj &gt;文件夹，在Visual Studio代码中测试jupyter笔记本的原生编辑。如果一切正常，你将能够看到下面的可视化。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ld"><img src="../Images/338ca3ed2d733448e73fd2b8d1e4bcf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1-XTBRsSjrdVX01F4Uj4sA.png"/></div></div></figure><h1 id="a3bb" class="le kw hi bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated"><strong class="ak">绘图查看器</strong></h1><blockquote class="ju jv jw"><p id="088c" class="if ig jx ih b ii ij ik il im in io ip jy ir is it jz iv iw ix ka iz ja jb jc hb bi translated">绘图查看器使您能够更深入地处理绘图。在查看器中，您可以在当前任务中平移、缩放和导航地块。您也可以将图导出为PDF、SVG和PNG格式。</p><p id="08fd" class="if ig jx ih b ii ij ik il im in io ip jy ir is it jz iv iw ix ka iz ja jb jc hb bi translated">在笔记本编辑器窗口中，双击任何图，在查看器中打开它，或选择图左上角的图查看器按钮(悬停时可见)——<a class="ae jt" href="https://code.visualstudio.com/docs/python/jupyter-support" rel="noopener ugc nofollow" target="_blank">code.visualstudio.com</a></p></blockquote><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mb"><img src="../Images/b156796b48b106fe37e2e0469faf890c.png" data-original-src="https://miro.medium.com/v2/resize:fit:902/format:webp/1*Zmmpb2gFIAX4KAD0pe5ukA.png"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mc"><img src="../Images/0c4a0940b260e6b9789d6fb7d62f3318.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O9TW5SMahz0SObdVjQcR9g.png"/></div></div></figure><p id="fe62" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jx">免责声明:在虚拟环境中首次启动jupyter服务器大约需要2-3分钟！！！</em></p><p id="2009" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢下面帮助我理解Python中的Anaconda、miniconda和虚拟环境，并尝试Visual Studio代码。</p><ol class=""><li id="1dda" class="kb kc hi ih b ii ij im in iq kd iu ke iy kf jc kg kh ki kj bi translated"><a class="ae jt" href="https://kiwidamien.github.io/save-the-environment-with-conda-and-how-to-let-others-run-your-programs.html" rel="noopener ugc nofollow" target="_blank">用康达拯救环境(以及如何让别人运行你的程序)</a> —丹尼尔·马丁</li><li id="03a8" class="kb kc hi ih b ii kk im kl iq km iu kn iy ko jc kg kh ki kj bi translated"><a class="ae jt" href="https://towardsdatascience.com/get-your-computer-ready-for-machine-learning-how-what-and-why-you-should-use-anaconda-miniconda-d213444f36d6" rel="noopener" target="_blank">让你的电脑为机器学习做好准备:如何使用Anaconda、Miniconda和conda以及为什么要使用它们</a></li><li id="35e3" class="kb kc hi ih b ii kk im kl iq km iu kn iy ko jc kg kh ki kj bi translated"><a class="ae jt" href="https://stackoverflow.com/questions/37926940/how-to-specify-new-environment-location-for-conda-create" rel="noopener ugc nofollow" target="_blank"> StackOverflow线程</a></li><li id="cfda" class="kb kc hi ih b ii kk im kl iq km iu kn iy ko jc kg kh ki kj bi translated"><a class="ae jt" href="https://code.visualstudio.com/docs/python/environments" rel="noopener ugc nofollow" target="_blank"> Visual Studio文档</a></li><li id="b226" class="kb kc hi ih b ii kk im kl iq km iu kn iy ko jc kg kh ki kj bi translated"><a class="ae jt" href="https://devblogs.microsoft.com/dotnet/" rel="noopener ugc nofollow" target="_blank">Devblogs.microsoft.com</a></li></ol></div></div>    
</body>
</html>