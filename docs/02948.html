<html>
<head>
<title>School Java Project Chess (2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学校Java项目国际象棋(2)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/school-java-project-chess-2-e640d4391a20?source=collection_archive---------8-----------------------#2020-01-09">https://medium.com/analytics-vidhya/school-java-project-chess-2-e640d4391a20?source=collection_archive---------8-----------------------#2020-01-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/3f1801577ea74c3888ca6fb5931f2e3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WPn_HFs40VGNs6BW.png"/></div></div></figure><div class=""/><div class=""><h2 id="9e81" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh dx translated">部署32个初始部件</h2></div><p id="5113" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">上次我们打印出了空棋盘。今天，我们将用最初的32件物品填充白板。当我们完成时，板子看起来会像下面这样。</p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="5426" class="kn ko ht kj b fi kp kq l kr ks">  a b c d e f g h<br/>8 r n b q k b n r 8<br/>7 p p p p p p p p 7<br/>6 . . . . . . . . 6<br/>5 . . . . . . . . 5<br/>4 . . . . . . . . 4<br/>3 . . . . . . . . 3<br/>2 P P P P P P P P 2<br/>1 R N B Q K B N R 1<br/>  a b c d e f g h</span></pre><p id="96e2" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">打开Chess.java并在文件末尾创建一个枚举<code class="du kt ku kv kj b">Type</code>来表示棋子类型。</p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="5723" class="kn ko ht kj b fi kp kq l kr ks">class Chess {<br/>  public static void main(String[] args) {<br/>    Board brd = new Board();<br/>    System.out.println(brd);<br/>  }<br/>}</span><span id="d6fb" class="kn ko ht kj b fi kw kq l kr ks">class Board {<br/>  public String toString() {<br/>    String brdStr = "";<br/>    brdStr += "  0 1 2 3 4 5 6 7\n";<br/>    for (int row = 0; row &lt; 8; row++) {<br/>      brdStr += row + "";<br/>      for (int col = 0; col &lt; 8; col++) {<br/>        brdStr += " .";<br/>      }<br/>      brdStr += "\n"; // line break<br/>    }<br/>    return brdStr;<br/>  }<br/>}</span><span id="7e91" class="kn ko ht kj b fi kw kq l kr ks"><strong class="kj hu">enum Type {<br/>  P, // pawn<br/>  R, // rook<br/>  N, // knight<br/>  B, // bishop<br/>  Q, // queen<br/>  K, // king<br/>}</strong></span></pre><p id="6b27" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">编辑/编译/运行Chess.java。</p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="a292" class="kn ko ht kj b fi kp kq l kr ks">🄹 vim Chess.java                <br/>🄹 javac Chess.java &amp;&amp; java Chess<br/>  0 1 2 3 4 5 6 7<br/>0 . . . . . . . .<br/>1 . . . . . . . .<br/>2 . . . . . . . .<br/>3 . . . . . . . .<br/>4 . . . . . . . .<br/>5 . . . . . . . .<br/>6 . . . . . . . .<br/>7 . . . . . . . .</span></pre><p id="4336" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">现在我们可以设计一个新的类<code class="du kt ku kv kj b">Piece</code>来表示一块。将以下代码添加到文件Chess.java的末尾。</p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="d469" class="kn ko ht kj b fi kp kq l kr ks">class Piece {<br/>  int c; // column<br/>  int r; // row<br/>  boolean w; // isWhite<br/>  Type t;</span><span id="2785" class="kn ko ht kj b fi kw kq l kr ks">Piece(int c, int r, boolean w, Type t) {<br/>    this.c = c;<br/>    this.r = r;<br/>    this.w = w;<br/>    this.t = t;<br/>  }<br/>}</span></pre><p id="606f" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">我们可以使用两个vim命令来稍微加快编辑速度。“L”将光标移动到底部。“o”进入插入模式，并在光标下方插入一个新行。顺便说一下，“H”移动光标到顶部，“M”移动到中间。“O”进入插入模式并在光标上方插入一个新行。</p><p id="7151" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">编辑/编译/运行Chess.java以确保一切正常。</p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="b1ed" class="kn ko ht kj b fi kp kq l kr ks">🄹 vim Chess.java                <br/>🄹 javac Chess.java &amp;&amp; java Chess<br/>  0 1 2 3 4 5 6 7<br/>0 . . . . . . . .<br/>1 . . . . . . . .<br/>2 . . . . . . . .<br/>3 . . . . . . . .<br/>4 . . . . . . . .<br/>5 . . . . . . . .<br/>6 . . . . . . . .<br/>7 . . . . . . . .</span></pre><p id="4d96" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">为了使用数据类型集作为所有组件的容器，我们需要在Chess.java的顶部添加两行代码。</p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="3aeb" class="kn ko ht kj b fi kp kq l kr ks">import java.util.Set;<br/>import java.util.HashSet;</span></pre><p id="345a" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">我们将创建一个类型设置为<piece>的实例变量，并在构造函数<code class="du kt ku kv kj b">Board()</code>中插入一个白皇后。</piece></p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="8b9f" class="kn ko ht kj b fi kp kq l kr ks">class Board {<br/>  <strong class="kj hu">private Set&lt;Piece&gt; pieces = new HashSet&lt;&gt;();</strong></span><span id="c609" class="kn ko ht kj b fi kw kq l kr ks"><strong class="kj hu">  Board() {<br/>    pieces.add(new Piece(3, 7, true, Type.Q));<br/>  }</strong></span><span id="9db2" class="kn ko ht kj b fi kw kq l kr ks">  public String toString() {<br/>    String brdStr = "";<br/>    brdStr += "  0 1 2 3 4 5 6 7\n";<br/>    for (int row = 0; row &lt; 8; row++) {<br/>      brdStr += row + "";<br/>      for (int col = 0; col &lt; 8; col++) {<br/>        brdStr += " .";<br/>      }<br/>      brdStr += "\n"; // line break<br/>    }<br/>    return brdStr;<br/>  }<br/>}</span></pre><p id="2357" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">通过编译和运行更新的Chess.java来确保它仍然工作。</p><p id="f5bc" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">为了在板上打印出Piece，我们可以创建下面的helper方法<code class="du kt ku kv kj b">Piece pieceAt(int c, int r)</code>来返回一个特定位置的Piece对象。</p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="e41e" class="kn ko ht kj b fi kp kq l kr ks">class Board {<br/>  private Set&lt;Piece&gt; pieces = new HashSet&lt;&gt;();</span><span id="4562" class="kn ko ht kj b fi kw kq l kr ks">  Board() {<br/>    pieces.add(new Piece(3, 7, true, Type.Q));<br/>  }</span><span id="4d6d" class="kn ko ht kj b fi kw kq l kr ks"><strong class="kj hu">  Piece pieceAt(int c, int r) {<br/>    for (Piece p : pieces) {<br/>      if (p.c == c &amp;&amp; p.r == r) {<br/>        return p;<br/>      }<br/>    }<br/>    return null;<br/>  }</strong></span><span id="a98b" class="kn ko ht kj b fi kw kq l kr ks">  public String toString() {<br/>    String brdStr = "";<br/>    brdStr += "  0 1 2 3 4 5 6 7\n";<br/>    for (int row = 0; row &lt; 8; row++) {<br/>      brdStr += row + "";<br/>      for (int col = 0; col &lt; 8; col++) {<br/>        brdStr += " .";<br/>      }<br/>      brdStr += "\n"; // line break<br/>    }<br/>    return brdStr;<br/>  }<br/>}</span></pre><p id="bb92" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">现在我们需要修改类Board的toString()方法来显示片段。</p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="c86d" class="kn ko ht kj b fi kp kq l kr ks">class Board {<br/>  private Set&lt;Piece&gt; pieces = new HashSet&lt;&gt;();</span><span id="ecc1" class="kn ko ht kj b fi kw kq l kr ks">  Board() {<br/>    pieces.add(new Piece(3, 7, true, Type.Q));<br/>  }</span><span id="bd14" class="kn ko ht kj b fi kw kq l kr ks">  Piece pieceAt(int c, int r) {<br/>    for (Piece p : pieces) {<br/>      if (p.c == c &amp;&amp; p.r == r) {<br/>        return p;<br/>      }<br/>    }<br/>    return null;<br/>  }</span><span id="393c" class="kn ko ht kj b fi kw kq l kr ks">  public String toString() {<br/>    String brdStr = "";<br/>    brdStr += "  0 1 2 3 4 5 6 7\n";<br/>    for (int r = 0; r &lt; 8; r++) {<br/>      brdStr += r + "";<br/>      for (int c = 0; c &lt; 8; c++) {<br/>        Piece p = pieceAt(c, r);<br/>        if (p == null) {<br/>          brdStr += " .";<br/>        } else {<br/>          switch (p.t) {<br/>          case P: brdStr += p.w ? " P" : " p"; break;<br/>          case R: brdStr += p.w ? " R" : " r"; break;<br/>          case N: brdStr += p.w ? " N" : " n"; break;<br/>          case B: brdStr += p.w ? " B" : " b"; break;<br/>          case Q: brdStr += p.w ? " Q" : " q"; break;<br/>          case K: brdStr += p.w ? " K" : " k"; break;<br/>          }<br/>        }<br/>      }<br/>      brdStr += "\n"; // line break<br/>    }<br/>    return brdStr;<br/>  }<br/>}</span></pre><p id="a605" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">编辑/编译/运行Chess.java，看看船上的单件女王。</p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="2537" class="kn ko ht kj b fi kp kq l kr ks">🄹 vim Chess.java                <br/>🄹 javac Chess.java &amp;&amp; java Chess<br/>  a b c d e f g h<br/>8 . . . . . . . . 8<br/>7 . . . . . . . . 7<br/>6 . . . . . . . . 6<br/>5 . . . . . . . . 5<br/>4 . . . . . . . . 4<br/>3 . . . . . . . . 3<br/>2 . . . . . . . . 2<br/>1 . . . Q . . . . 1<br/>  a b c d e f g h</span></pre><p id="8068" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">是时候在<code class="du kt ku kv kj b">Board</code>类的构造函数中添加剩余的31个代码了。</p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="ae6f" class="kn ko ht kj b fi kp kq l kr ks">  Board() {<br/>    pieces.add(new Piece(3, 0, false, Type.Q));<br/>    pieces.add(new Piece(3, 7, true , Type.Q));<br/>    pieces.add(new Piece(4, 0, false, Type.K));<br/>    pieces.add(new Piece(4, 7, true , Type.K));<br/>    for (int i = 0; i &lt; 2; i++) {<br/>      pieces.add(new Piece(0 + i * 7, 0, false, Type.R));<br/>      pieces.add(new Piece(0 + i * 7, 7, true , Type.R));<br/>      pieces.add(new Piece(1 + i * 5, 0, false, Type.N));<br/>      pieces.add(new Piece(1 + i * 5, 7, true , Type.N));<br/>      pieces.add(new Piece(2 + i * 3, 0, false, Type.B));<br/>      pieces.add(new Piece(2 + i * 3, 7, true , Type.B));<br/>    }<br/>    for (int i = 0; i &lt; 8; i++) {<br/>      pieces.add(new Piece(i, 1, false, Type.P));<br/>      pieces.add(new Piece(i, 6, true , Type.P));<br/>    }<br/>  }</span></pre><p id="21b7" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">编辑/编译/运行Chess.java看到所有32件。</p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="ffd3" class="kn ko ht kj b fi kp kq l kr ks">🄹 vim Chess.java                <br/>🄹 javac Chess.java &amp;&amp; java Chess<br/>  a b c d e f g h<br/>8 r n b q k b n r 8<br/>7 p p p p p p p p 7<br/>6 . . . . . . . . 6<br/>5 . . . . . . . . 5<br/>4 . . . . . . . . 4<br/>3 . . . . . . . . 3<br/>2 P P P P P P P P 2<br/>1 R N B Q K B N R 1<br/>  a b c d e f g h</span></pre><p id="7359" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">这是目前为止完整的代码。</p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="811c" class="kn ko ht kj b fi kp kq l kr ks">import java.util.Set;<br/>import java.util.HashSet;</span><span id="f240" class="kn ko ht kj b fi kw kq l kr ks">class Chess {<br/>  public static void main(String[] args) {<br/>    Board brd = new Board();<br/>    System.out.println(brd);<br/>  }<br/>}</span><span id="b98f" class="kn ko ht kj b fi kw kq l kr ks">class Board {<br/>  private Set&lt;Piece&gt; pieces = new HashSet&lt;&gt;();</span><span id="00a6" class="kn ko ht kj b fi kw kq l kr ks">  Board() {<br/>    pieces.add(new Piece(3, 0, false, Type.Q));<br/>    pieces.add(new Piece(3, 7, true , Type.Q));<br/>    pieces.add(new Piece(4, 0, false, Type.K));<br/>    pieces.add(new Piece(4, 7, true , Type.K));<br/>    for (int i = 0; i &lt; 2; i++) {<br/>      pieces.add(new Piece(0 + i * 7, 0, false, Type.R));<br/>      pieces.add(new Piece(0 + i * 7, 7, true , Type.R));<br/>      pieces.add(new Piece(1 + i * 5, 0, false, Type.N));<br/>      pieces.add(new Piece(1 + i * 5, 7, true , Type.N));<br/>      pieces.add(new Piece(2 + i * 3, 0, false, Type.B));<br/>      pieces.add(new Piece(2 + i * 3, 7, true , Type.B));<br/>    }<br/>    for (int i = 0; i &lt; 8; i++) {<br/>      pieces.add(new Piece(i, 1, false, Type.P));<br/>      pieces.add(new Piece(i, 6, true , Type.P));<br/>    }<br/>  }</span><span id="9784" class="kn ko ht kj b fi kw kq l kr ks">  Piece pieceAt(int c, int r) {<br/>    for (Piece p : pieces) {<br/>      if (p.c == c &amp;&amp; p.r == r) {<br/>        return p;<br/>      }<br/>    }<br/>    return null;<br/>  }</span><span id="ed30" class="kn ko ht kj b fi kw kq l kr ks">  public String toString() {<br/>    String brdStr = "";<br/>    brdStr += "  a b c d e f g h\n";<br/>    for (int r = 0; r &lt; 8; r++) {<br/>      brdStr += (8 - r) + "";<br/>      for (int c = 0; c &lt; 8; c++) {<br/>        Piece p = pieceAt(c, r);<br/>        if (p == null) {<br/>          brdStr += " .";<br/>        } else {<br/>          switch (p.t) {<br/>          case P: brdStr += p.w ? " P" : " p"; break;<br/>          case R: brdStr += p.w ? " R" : " r"; break;<br/>          case N: brdStr += p.w ? " N" : " n"; break;<br/>          case B: brdStr += p.w ? " B" : " b"; break;<br/>          case Q: brdStr += p.w ? " Q" : " q"; break;<br/>          case K: brdStr += p.w ? " K" : " k"; break;<br/>          }<br/>        }<br/>      }<br/>      brdStr += " " + (8 - r) + "\n";<br/>    }<br/>    brdStr += "  a b c d e f g h\n";<br/>    return brdStr;<br/>  }<br/>}</span><span id="d742" class="kn ko ht kj b fi kw kq l kr ks">enum Type {<br/>  P, // pawn<br/>  R, // rook<br/>  N, // knight<br/>  B, // bishop<br/>  Q, // queen<br/>  K, // king<br/>}</span><span id="7ae9" class="kn ko ht kj b fi kw kq l kr ks">class Piece {<br/>  int c; // column<br/>  int r; // row<br/>  boolean w; // isWhite<br/>  Type t;</span><span id="b05f" class="kn ko ht kj b fi kw kq l kr ks">Piece(int c, int r, boolean w, Type t) {<br/>    this.c = c;<br/>    this.r = r;<br/>    this.w = w;<br/>    this.t = t;<br/>  }<br/>}</span></pre><p id="673c" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">我们结束了。</p></div><div class="ab cl kx ky gp kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hb hc hd he hf"><p id="d320" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated"><a class="ae le" rel="noopener" href="/@zhijunsheng/school-java-project-chess-1-85f97a2d1877?source=friends_link&amp;sk=eab9b54731072ce1aefe26f2bf2f2d7b">学校Java项目象棋(1) </a></p><p id="5276" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated"><a class="ae le" rel="noopener" href="/@zhijunsheng/school-java-project-chess-2-e640d4391a20?source=friends_link&amp;sk=502668bdbc9ff9291585144d5702c2fc">学校Java项目象棋(2) </a></p></div></div>    
</body>
</html>