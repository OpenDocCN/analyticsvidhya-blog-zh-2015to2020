<html>
<head>
<title>Poke-API — HttpClient GET Tutorial</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Poke-API — HttpClient获取教程</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/poke-api-get-tutorial-4e1f9838c669?source=collection_archive---------9-----------------------#2020-06-22">https://medium.com/analytics-vidhya/poke-api-get-tutorial-4e1f9838c669?source=collection_archive---------9-----------------------#2020-06-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2ee5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我还没见过一个开发者对口袋妖怪没有一点欣赏——如果不是像我这样的童年痴迷的话。所以，我决定用Poke-API来说明最重要的基础Web开发(和数据挖掘/可视化/分析)技能之一——API，这会很有趣。</p><p id="3914" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可能会问什么是API？API代表应用程序编程接口，根据谷歌的说法，它被定义为<em class="jd">一组允许创建访问操作系统、应用程序或其他服务的功能或数据的应用程序的功能和过程。</em>用更基本的术语来说，API是允许一个应用程序与另一个应用程序对话的指令集。</p><p id="c96b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然API可以有许多不同类型的调用，但最常见的两种是GET(从远程实体读取)和POST(写回远程实体)。然而，用于进行这些调用的语法会因语言和平台的不同而有很大差异。本教程将向您展示如何创建一个基本的Angular应用程序来调用Poke-API服务器。我们上车吧！</p><p id="0d8e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">打造新棱角项目</strong></p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="c805" class="jn jo hi jj b fi jp jq l jr js">ng new poke-tutorial<br/>cd poke-tutorial</span></pre><p id="9961" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">创建一个从Poke-API获取数据的服务</strong></p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="3b37" class="jn jo hi jj b fi jp jq l jr js">ng g service pokeData</span></pre><p id="8485" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在您的文件目录中，您会看到两个新文件</p><figure class="je jf jg jh fd ju er es paragraph-image"><div class="er es jt"><img src="../Images/9dd47d83c5c945d26b3fe56fc63577c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:584/format:webp/1*lu-WurKi1nmLzHNsEIJ6YQ.png"/></div></figure><p id="0a5f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<strong class="ih hj"> poke-data.service.ts </strong>中，导入Angular的HttpClient</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="fb92" class="jn jo hi jj b fi jp jq l jr js">import {HttpClient} from '@angular/common/http';</span></pre><p id="a9e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">并将HttpClient作为参数包含在构造函数中</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="06a5" class="jn jo hi jj b fi jp jq l jr js">constructor(private http:HttpClient) { }</span></pre><p id="a26b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，在这个服务文件中创建一个GET函数。它接受一个URL字符串并进行调用。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="c063" class="jn jo hi jj b fi jp jq l jr js">getData(url:string){</span><span id="0deb" class="jn jo hi jj b fi jx jq l jr js">   return this.http.get(url)</span><span id="cda6" class="jn jo hi jj b fi jx jq l jr js">}</span></pre><p id="2382" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">将HttpClientModule添加到app.module.ts中</strong></p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="9962" class="jn jo hi jj b fi jp jq l jr js">import {HttpClientModule} from '@angular/common/http';</span><span id="37f3" class="jn jo hi jj b fi jx jq l jr js">...</span><span id="5f9e" class="jn jo hi jj b fi jx jq l jr js">imports: [</span><span id="0ffe" class="jn jo hi jj b fi jx jq l jr js">   BrowserModule,</span><span id="1a68" class="jn jo hi jj b fi jx jq l jr js">   HttpClientModule</span><span id="7b16" class="jn jo hi jj b fi jx jq l jr js">],</span></pre><p id="9721" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">编辑我们的app.component.ts以使用服务</strong></p><p id="cf90" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，导入OnInit和我们的服务，并将服务添加为提供者</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="7874" class="jn jo hi jj b fi jp jq l jr js">import { PokeDataService} from './poke-data.service'</span><span id="ca15" class="jn jo hi jj b fi jx jq l jr js">import { Component, OnInit } from '@angular/core';</span><span id="1a77" class="jn jo hi jj b fi jx jq l jr js">@Component({</span><span id="adad" class="jn jo hi jj b fi jx jq l jr js">   selector: 'app-root',</span><span id="6ce6" class="jn jo hi jj b fi jx jq l jr js">   templateUrl: './app.component.html',</span><span id="66bd" class="jn jo hi jj b fi jx jq l jr js">   styleUrls: ['./app.component.css'],</span><span id="7219" class="jn jo hi jj b fi jx jq l jr js">   providers: [PokeDataService]</span><span id="c1b3" class="jn jo hi jj b fi jx jq l jr js">})</span></pre><p id="f43a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用构造函数实现OnInit并接受服务</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="da0d" class="jn jo hi jj b fi jp jq l jr js">export class AppComponent implements OnInit{</span><span id="ed64" class="jn jo hi jj b fi jx jq l jr js">constructor(private srv: PokeDataService){}</span><span id="ff2b" class="jn jo hi jj b fi jx jq l jr js">ngOnInit(){}<br/>}</span></pre><p id="f1f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">写getPoke函数。调用服务，将字段this.poke设置为HTTP请求返回的对象。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="d2dd" class="jn jo hi jj b fi jp jq l jr js">export class AppComponent implements OnInit{</span><span id="3616" class="jn jo hi jj b fi jx jq l jr js">poke: any;</span><span id="0809" class="jn jo hi jj b fi jx jq l jr js">url = 'https://pokeapi.co/api/v2/pokemon/growlithe/'</span><span id="30a3" class="jn jo hi jj b fi jx jq l jr js">constructor(private srv: PokeDataService){}</span><span id="8266" class="jn jo hi jj b fi jx jq l jr js">getPoke():void{</span><span id="721b" class="jn jo hi jj b fi jx jq l jr js">   this.srv.getData(this.url).subscribe(data=&gt;this.poke=data)</span><span id="a2f9" class="jn jo hi jj b fi jx jq l jr js">}</span><span id="19fc" class="jn jo hi jj b fi jx jq l jr js">ngOnInit(){</span><span id="00a4" class="jn jo hi jj b fi jx jq l jr js">this.getPoke()</span><span id="d9bc" class="jn jo hi jj b fi jx jq l jr js">}</span><span id="b289" class="jn jo hi jj b fi jx jq l jr js">}</span></pre><p id="fcc5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">编辑我们的HTML以显示从Poke-API服务器收到的口袋妖怪</strong></p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="6949" class="jn jo hi jj b fi jp jq l jr js">&lt;div style="text-align:center"&gt;</span><span id="24a2" class="jn jo hi jj b fi jx jq l jr js">&lt;h1&gt;</span><span id="6664" class="jn jo hi jj b fi jx jq l jr js">Welcome from {{ poke.name }}!</span><span id="66be" class="jn jo hi jj b fi jx jq l jr js">&lt;/h1&gt;</span><span id="5ec0" class="jn jo hi jj b fi jx jq l jr js">&lt;img width="300" alt="Pokemon sprite" src=                                               {{poke.sprites.front_default}}&gt;</span><span id="71cf" class="jn jo hi jj b fi jx jq l jr js">&lt;/div&gt;</span></pre><p id="2cda" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当你使用你的应用程序时，你应该看看这个！</p><figure class="je jf jg jh fd ju er es paragraph-image"><div class="er es jy"><img src="../Images/1ea819804c975441aee902a6ee9c6d27.png" data-original-src="https://miro.medium.com/v2/resize:fit:852/format:webp/1*Wh9-VLHpM1qUHYNeLFsnug.png"/></div></figure><p id="ac87" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">向前迈进一步…添加用户输入！</strong></p><p id="f7e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">向我们的HTML添加一个输入和按钮</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="6509" class="jn jo hi jj b fi jp jq l jr js">&lt;div style="text-align:center"&gt;</span><span id="875d" class="jn jo hi jj b fi jx jq l jr js">&lt;h1&gt;</span><span id="c6eb" class="jn jo hi jj b fi jx jq l jr js">Welcome from {{ poke.name }}!</span><span id="48b2" class="jn jo hi jj b fi jx jq l jr js">&lt;/h1&gt;</span><span id="cb6d" class="jn jo hi jj b fi jx jq l jr js">&lt;img width="300" alt="Pokemon sprite" src={{poke.sprites.front_default}}&gt;</span><span id="ed6c" class="jn jo hi jj b fi jx jq l jr js">&lt;input id = "Pokemon2GET"&gt;</span><span id="ee16" class="jn jo hi jj b fi jx jq l jr js">&lt;button id = "iChooseYou"&gt;I CHOOSE YOU!!&lt;/button&gt;</span><span id="abf4" class="jn jo hi jj b fi jx jq l jr js">&lt;/div&gt;</span></pre><p id="3d0f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">添加事件侦听器和函数来更改url</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="73e9" class="jn jo hi jj b fi jp jq l jr js">constructor(private srv: PokeDataService){</span><span id="fc89" class="jn jo hi jj b fi jx jq l jr js">   let self = this;</span><span id="9b3a" class="jn jo hi jj b fi jx jq l jr js">   window.onload=function(){</span><span id="e62a" class="jn jo hi jj b fi jx jq l jr js">      let btn = document.getElementById("iChooseYou");</span><span id="b2da" class="jn jo hi jj b fi jx jq l jr js">      btn.addEventListener("click", (e:Event) =&gt; self.changeURL());</span><span id="24b2" class="jn jo hi jj b fi jx jq l jr js">   }</span><span id="ed9b" class="jn jo hi jj b fi jx jq l jr js">}</span><span id="9af8" class="jn jo hi jj b fi jx jq l jr js">changeURL():void{</span><span id="4b33" class="jn jo hi jj b fi jx jq l jr js">let pokemon2use = (&lt;HTMLInputElement&gt;document.getElementById("Pokemon2Get")).value</span><span id="a701" class="jn jo hi jj b fi jx jq l jr js">this.url = 'https://pokeapi.co/api/v2/pokemon/'+ pokemon2use + '/'</span><span id="92c1" class="jn jo hi jj b fi jx jq l jr js">console.log(this.url)</span><span id="457b" class="jn jo hi jj b fi jx jq l jr js">this.getPoke()</span><span id="7ac4" class="jn jo hi jj b fi jx jq l jr js">}</span></pre><p id="baed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在当你服务你的应用程序时，你可以输入一个新的口袋妖怪，然后按“我选择你！!"按钮</p><figure class="je jf jg jh fd ju er es paragraph-image"><div class="er es jz"><img src="../Images/0a45a34775bf47b14076921058992816.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*0uUKT8dAW3-bTkFuSUF3KA.png"/></div></figure><p id="8942" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">恭喜你！你现在有一个超级书呆子的API应用程序，你可以向你的朋友炫耀。一定要把这个加入Github。但是严肃地说，这个项目可以作为使用API调用的更密集工作的主干。所以玩一玩，体验一下，享受一下，并留下评论让我知道进展如何，或者只是你最喜欢的口袋妖怪是什么(我的是妙蛙种子)。</p><p id="cda7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">保持金色，每个人❤</p></div></div>    
</body>
</html>