<html>
<head>
<title>The Magic of Asterisks in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中星号的魔力</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/the-magic-of-asterisks-in-python-aed3538deef9?source=collection_archive---------5-----------------------#2020-03-31">https://medium.com/analytics-vidhya/the-magic-of-asterisks-in-python-aed3538deef9?source=collection_archive---------5-----------------------#2020-03-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="0556" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">包装和拆包</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/1293ded9ef7b5b2c82749600b4e9110f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FDVi6dqpo1hFcT_Q"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">Artem Maltsev 在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="36bf" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Python现在是基于PYPL的最流行的编程语言。下图说明了一切。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es kk"><img src="../Images/f1690a16ee38477c4a30c64fdc7596c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/format:webp/1*wPS2lIgBdGe4j7VfE_SMkw.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">基于2020年3月PYPL的编程语言流行度。</figcaption></figure><p id="ffb9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在，python是如何在当今如此流行的？是因为魔法！是的，python的魔力为开发者提供了一些特性。星号(*)就是其中一个神奇之处。</p><h1 id="ab3d" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">1.魔术1:打包</h1><p id="7154" class="pw-post-body-paragraph jo jp hi jq b jr ld ij jt ju le im jw jx lf jz ka kb lg kd ke kf lh kh ki kj hb bi translated">我们经常使用<code class="du li lj lk ll b">print</code>来显示对象到流文件的输出。如果你查看<a class="ae jn" href="https://docs.python.org/3.7/library/functions.html#print" rel="noopener ugc nofollow" target="_blank">打印函数</a>的文档，参数<code class="du li lj lk ll b">*objects</code>是一个<strong class="jq hj">打包参数</strong>。比方说，你想打印一个变量<code class="du li lj lk ll b">text = "Work From Home"</code>并添加一个前缀<code class="du li lj lk ll b">sentence: </code>。你可以写:</p><pre class="iy iz ja jb fd lm ll ln lo aw lp bi"><span id="259d" class="lq km hi ll b fi lr ls l lt lu">&gt;&gt;&gt; text = "Work From Home"<br/>&gt;&gt;&gt; print("sentence:", text)<br/>sentence: Work From Home</span></pre><p id="0433" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这是因为你传递给<code class="du li lj lk ll b">print</code>的参数都打包在变量<code class="du li lj lk ll b">objects</code>中。变量<code class="du li lj lk ll b">object</code>中的星号(*)前缀用于告诉python这是一个打包参数，“亲爱的python，接受所有参数！”。这与传递多个参数的方式相同。所以，你可以传递任意数量的参数到函数中。</p><pre class="iy iz ja jb fd lm ll ln lo aw lp bi"><span id="06e9" class="lq km hi ll b fi lr ls l lt lu">&gt;&gt;&gt; print("this", "could", "work", "too.", "But,", "a", "waste", "of", "time")</span></pre><blockquote class="lv"><p id="0afb" class="lw lx hi bd ly lz ma mb mc md me kj dx translated">这怎么可能呢？</p></blockquote><p id="2569" class="pw-post-body-paragraph jo jp hi jq b jr mf ij jt ju mg im jw jx mh jz ka kb mi kd ke kf mj kh ki kj hb bi translated">现在，让我们创建自己的函数来解开这个谜团。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mk ml l"/></div></figure><p id="c66b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">该函数将接受您传递的任意数量的参数。我们打印整个对象，我们会看到它是什么类型，我们会做一个循环(等等，什么？).如果将这些长参数传递给函数，</p><pre class="iy iz ja jb fd lm ll ln lo aw lp bi"><span id="49e7" class="lq km hi ll b fi lr ls l lt lu">demystify_single_asterisk(a, text, ["text one", "text two"], {"your", "set"}, 100, .30, {"this": "is", "your": "dict"}, ("tuple", "too"))</span></pre><p id="c5df" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们将有一个输出如下。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mm"><img src="../Images/4c192af102e1922af03766897798c94a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xl8i7-2y_FvQv2pv2Ww1zQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">非常酷的魔术！</figcaption></figure><p id="6730" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">原来Python把我们的打包参数当成了一个<code class="du li lj lk ll b">tuple</code>。因此，我们可以像任何其他元组一样执行任何操作，比如索引或循环。</p><p id="682f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这个星号(*)给了我们很酷的魔力。我们再加一个星号做双星号(**)怎么样？</p><p id="0e3f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你曾经使用过Matplotlib <code class="du li lj lk ll b"><a class="ae jn" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.plot.html#matplotlib.pyplot.plot" rel="noopener ugc nofollow" target="_blank">plot</a></code> <a class="ae jn" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.plot.html#matplotlib.pyplot.plot" rel="noopener ugc nofollow" target="_blank">函数</a>，你可能会遇到一个名为<code class="du li lj lk ll b">**kwargs</code>的参数。这也是一个包装论点，作为包装论点<code class="du li lj lk ll b">*args</code>的补充。您可能试图将一个关键字参数<code class="du li lj lk ll b">label</code>传递到函数中，但是在参数列表中找不到它。这是由双星号打包参数处理的。让我们创建另一个类似于上一个的函数来解开这个谜团。</p><blockquote class="mn mo mp"><p id="5258" class="jo jp mq jq b jr js ij jt ju jv im jw mr jy jz ka ms kc kd ke mt kg kh ki kj hb bi translated"><a class="ae jn" href="https://docs.python.org/3.7/glossary.html" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hj">关键字参数</strong> </a> <strong class="jq hj"> </strong>是前面带有标识符的参数(如<code class="du li lj lk ll b"><em class="hi">name=</em></code></p></blockquote><p id="3ab7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在，试着用下面的参数调用这个函数。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mk ml l"/></div></figure><pre class="iy iz ja jb fd lm ll ln lo aw lp bi"><span id="6a39" class="lq km hi ll b fi lr ls l lt lu">demystify_double_asterisk(name="Tony", job="Hero", quotes="I love you tons")</span></pre><p id="8e3e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们会得到这样的输出。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mu"><img src="../Images/e8729b61853650adf0a7e79b6523acf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kh6TFi8OGc4DtIGxYdgC8g.png"/></div></div></figure><p id="9952" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">因此，在一个参数前面加上两个星号(**)会将其视为一个打包参数，从而生成一个Python字典。关键字名称将作为字典键，参数将作为字典值。因此，当我们通过<code class="du li lj lk ll b">name='Tony'</code>时，Python会像对待字典一样对待它<code class="du li lj lk ll b">{'name': 'Tony'}</code>。我们以上论点的完整字典如下。</p><pre class="iy iz ja jb fd lm ll ln lo aw lp bi"><span id="f4bf" class="lq km hi ll b fi lr ls l lt lu">{'name': 'Tony', 'job': 'Hero', 'quotes': 'I love you tons'}</span></pre><p id="5972" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">通过创建我们自己的函数，比如制作一个HTML标签，这种魔法是多么有用的一个例子(很大程度上受T <a class="ae jn" href="https://treyhunner.com/2018/10/asterisks-in-python-what-they-are-and-how-to-use-them/#Asterisks_for_packing_arguments_given_to_function" rel="noopener ugc nofollow" target="_blank">雷伊·亨纳</a>的启发)。</p><pre class="iy iz ja jb fd lm ll ln lo aw lp bi"><span id="ede3" class="lq km hi ll b fi lr ls l lt lu">def make_tag(tag_name, **attr):<br/>    attributes = [f"{name}={value}" for name, value in attr.items()]<br/>    return f"&lt;{tag_name} {' '.join(attributes)}&gt;"</span></pre><p id="e670" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你想做一个图像标签，你只需要输入下面的语法。</p><pre class="iy iz ja jb fd lm ll ln lo aw lp bi"><span id="0242" class="lq km hi ll b fi lr ls l lt lu">make_tag("img", width=100, height=100, href="'img/example.png'")</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mv"><img src="../Images/b0d30c3d0228cc468e12940aea940e9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*d4SqbaglWioUN6QsRF50KQ.png"/></div></figure><h1 id="80ec" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">2.魔术2:拆包</h1><p id="e9c0" class="pw-post-body-paragraph jo jp hi jq b jr ld ij jt ju le im jw jx lf jz ka kb lg kd ke kf lh kh ki kj hb bi translated">当然，从语法上来说，打包论证的相反魔法是<strong class="jq hj">解包</strong>。解包会很好，解包，所有python可迭代。让我们再次使用<code class="du li lj lk ll b">print</code>功能。如果您像下面这样定义一个列表<code class="du li lj lk ll b">my_list</code>，然后打印它，您将得到</p><pre class="iy iz ja jb fd lm ll ln lo aw lp bi"><span id="7073" class="lq km hi ll b fi lr ls l lt lu">&gt;&gt;&gt; my_list = ["write", "from", "home"]<br/>&gt;&gt;&gt; print(my_list)<br/>['write', 'from', 'home']</span></pre><p id="f422" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在，如果您在打印函数中的<code class="du li lj lk ll b">my_list</code>前加上一个星号(*)，您将得到</p><pre class="iy iz ja jb fd lm ll ln lo aw lp bi"><span id="edbc" class="lq km hi ll b fi lr ls l lt lu">&gt;&gt;&gt; print(*my_list)<br/>write from home</span></pre><p id="f4f3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">神奇！</p><p id="0f31" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在<code class="du li lj lk ll b">my_list</code>前的星号(*)将把<code class="du li lj lk ll b">my_list</code>中的项目解包成传递给打印函数的独立参数，因此它将像我们传递像<code class="du li lj lk ll b">print('write', 'from', 'home')</code>这样的参数一样工作。让我们开始吧！</p><p id="adb3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这里，我创建了一个简单的函数<code class="du li lj lk ll b">demystify_unpack</code>，它接受打包在<code class="du li lj lk ll b">iterables</code>中的任意数量的参数。这个函数只打印参数和数据类型。</p><pre class="iy iz ja jb fd lm ll ln lo aw lp bi"><span id="e4f7" class="lq km hi ll b fi lr ls l lt lu">def demystify_unpacking(*iterables):<br/>    print(iterables, type(iterables)</span></pre><p id="243f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后我们通过<code class="du li lj lk ll b">my_list</code>和<code class="du li lj lk ll b">*my_list</code>作为参数。这两个实验的输出分别是:</p><pre class="iy iz ja jb fd lm ll ln lo aw lp bi"><span id="a598" class="lq km hi ll b fi lr ls l lt lu">&gt;&gt;&gt; (['write', 'from', 'home'],) &lt;class 'tuple'&gt;<br/>&gt;&gt;&gt; ('write', 'from', 'home') &lt;class 'tuple'&gt;</span></pre><p id="6570" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">正如我们所知，任何数量的参数都会被<code class="du li lj lk ll b">iterables</code>打包，因此类型总是一个元组。不同之处在于<code class="du li lj lk ll b">my_list</code>传递一个列表，但是<code class="du li lj lk ll b">*my_list</code>会先解包它，然后传递多个参数，就像我们将<code class="du li lj lk ll b">'write', 'from', 'home'</code>传递给函数一样。</p><p id="122f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">另一个使用这种魔力的实用程序，当它用于在赋值中解包iterable时(首次在<a class="ae jn" href="https://www.python.org/dev/peps/pep-3132/#id8" rel="noopener ugc nofollow" target="_blank"> PEP 3132 </a>中介绍)。这里有一些例子。</p><pre class="iy iz ja jb fd lm ll ln lo aw lp bi"><span id="61e9" class="lq km hi ll b fi lr ls l lt lu">&gt;&gt;&gt; seq = ["write", "and", "work", "from", "home", "is", "awesome"]<br/>&gt;&gt;&gt; a, b, c, *d = seq<br/>&gt;&gt;&gt; print(a)<br/>write<br/>&gt;&gt;&gt; print(b)<br/>and<br/>&gt;&gt;&gt; print(c)<br/>work<br/>&gt;&gt;&gt; print(d)<br/>['from', 'home', 'is', 'awesome']</span></pre><p id="76f8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">操作员左侧将从<code class="du li lj lk ll b">seq</code>分配项目，其中<code class="du li lj lk ll b">a</code>为第一个项目，<code class="du li lj lk ll b">b</code>为第二个项目，<code class="du li lj lk ll b">c</code>为第三个项目。对于变量<code class="du li lj lk ll b">d</code>，由于解包的魔力，我们将获得所有剩余的项目。你可能想尝试另一个赋值，比如<code class="du li lj lk ll b">*k, l, m = seq</code>，结果<code class="du li lj lk ll b">k</code>等于<code class="du li lj lk ll b">['write', 'and', 'work', 'from', 'home']</code>。</p><h1 id="c64d" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">就是这样！</h1><p id="7406" class="pw-post-body-paragraph jo jp hi jq b jr ld ij jt ju le im jw jx lf jz ka kb lg kd ke kf lh kh ki kj hb bi translated">在本文中，我们只讨论了打包和解包，但是仍然存在其他的魔法，比如在<code class="du li lj lk ll b">list</code>或<code class="du li lj lk ll b">dict</code>文字中的星号，以及在只有关键字的参数和只有关键字的位置参数中的用法。我们将在下一篇文章中讨论它们。</p><h1 id="f86e" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">参考资料和资源</h1><p id="348b" class="pw-post-body-paragraph jo jp hi jq b jr ld ij jt ju le im jw jx lf jz ka kb lg kd ke kf lh kh ki kj hb bi translated">[1] Trey Hunner，<a class="ae jn" href="https://treyhunner.com/2018/10/asterisks-in-python-what-they-are-and-how-to-use-them/#Positional_arguments_with_keyword-only_arguments" rel="noopener ugc nofollow" target="_blank">Python中的星号:它们是什么以及如何使用它们</a> (2018)</p><p id="40f5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">[2] <a class="ae jn" href="https://www.python.org/dev/peps/pep-3132/#id8" rel="noopener ugc nofollow" target="_blank">人教版3132 </a> (2007)</p></div></div>    
</body>
</html>