<html>
<head>
<title>My Own Home Automation System- 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我自己的家庭自动化系统- 1</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/my-own-home-automation-system-1-b4462057d019?source=collection_archive---------13-----------------------#2019-10-01">https://medium.com/analytics-vidhya/my-own-home-automation-system-1-b4462057d019?source=collection_archive---------13-----------------------#2019-10-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/e6af746df2baf81c74e0c6ed5ddbf516.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DaLQ3rO5RPYHpo1kO5b6bQ.jpeg"/></div></figure><p id="6714" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我在这里分享我的经验，我如何把我的家变成一个智能家居，并减少我的努力，你实际上不需要把任何努力放在像开关按钮这样费力的工作上。如果你有点技术的话。投资₹5K -₹6K.可以自己做</p><p id="6849" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">当我买了一个新的树莓派来探索这个神奇的足球，根据它的大小有很多功能时，我想到了这个想法。作为一个懒惰的人，我想到了自动化我的家，在那里我不必站起来做一些愚蠢的小事，如通过将它们与智能助手如谷歌助手、Alexa和安卓手机集成来关灯。我的智能家居理念的目标是，</p><ol class=""><li id="df6d" class="jk jl hi io b ip iq it iu ix jm jb jn jf jo jj jp jq jr js bi translated">打开/关闭所有二进制驱动的电器。示例灯泡、管状灯，</li><li id="81c1" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jp jq jr js bi translated">通过RFID开门，以及从内部开门的按钮。</li><li id="1477" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jp jq jr js bi translated">通过在您正在使用的所有设备(包括智能手机、笔记本电脑、台式机和智能手表)上发送通知，确保厨房不会发生液化石油气泄漏。</li><li id="d589" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jp jq jr js bi translated">使用Alexa等智能助手控制您的电视或任何其他远程控制驱动的设备。</li></ol><p id="5270" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了实现我的目标，我需要</p><ul class=""><li id="ac6a" class="jk jl hi io b ip iq it iu ix jm jb jn jf jo jj jy jq jr js bi translated">树莓派3B+</li><li id="3ae8" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jy jq jr js bi translated">传感器(RFID、MQ6 LPG检测器、32 KHz(射频)红外发射器、红外接收器)</li><li id="cd83" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jy jq jr js bi translated">继电器电路</li><li id="37c2" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jy jq jr js bi translated">一点编程技巧</li></ul><h1 id="bc15" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">准备安装</h1><p id="e501" class="pw-post-body-paragraph im in hi io b ip kx ir is it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj hb bi translated">为了开始，我必须用<a class="ae lc" href="https://projects.raspberrypi.org/en/projects/raspberry-pi-setting-up/2" rel="noopener ugc nofollow" target="_blank">Raspberry Pi 3设置Raspberry Os安装</a>，并用简单的python编程检查Raspberry的所有gpio是否正常工作，python编程是控制gpio的最基本程序</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="f9dc" class="lm ka hi li b fi ln lo l lp lq">import RPi.GPIO as GPIO<br/>import time<br/><br/>GPIO.setmode(GPIO.BCM)<br/><br/>GPIO.setup(18, GPIO.OUT)<br/>GPIO.output(18, GPIO.HIGH)<br/><br/>time.sleep(3)<br/><br/>GPIO.output(18, GPIO.LOW)<br/>GPIO.cleanup()</span></pre><p id="5aef" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在Raspberry Pi终端上保存并运行程序</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="8c7a" class="lm ka hi li b fi ln lo l lp lq">python Gpio.py</span></pre><p id="c9e1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我使用Raspberry Pi作为我的家庭自动化服务器，并使用java网络API编写了一个服务器代码，它接受来自客户端的命令，并在物联网设备上反映相同的内容。访问<a class="ae lc" href="https://github.com/f71uday/HAS" rel="noopener ugc nofollow" target="_blank">这里</a>的代码片段。</p><h2 id="7448" class="lm ka hi bd kb lr ls lt kf lu lv lw kj ix lx ly kn jb lz ma kr jf mb mc kv md bi translated">启动继电器</h2><p id="f391" class="pw-post-body-paragraph im in hi io b ip kx ir is it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj hb bi translated">Raspberry pi只能控制0V-5V之间的信号输出，所以当你需要控制任何工作在高压<br/> (100 V到220V)的电器时，你不能直接将GPIO直接连接到电器上，这就是继电器在现场的作用，借助继电器你可以切换电流，要获得继电器你只需要5V。所以现在控制更高的电压变得简单了。</p><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="er es me"><img src="../Images/27ba3d26de3126a984f937060715e36f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GZcHagsDCvYu1Cgq7HsKgQ.jpeg"/></div></div><figcaption class="mj mk et er es ml mm bd b be z dx translated">Raspberry pi至继电器电路的连接图</figcaption></figure><p id="0693" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">建立上述连接，并在Rpi终端上运行以下代码</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="2fb5" class="lm ka hi li b fi ln lo l lp lq"><strong class="li hj">import</strong> RPi.GPIO <strong class="li hj">as</strong> GPIO<br/><strong class="li hj">import</strong> time <strong class="li hj">import</strong> math</span><span id="affa" class="lm ka hi li b fi mn lo l lp lq"># Board Setup <br/>GPIO.setmode(GPIO.BCM)</span><span id="bef8" class="lm ka hi li b fi mn lo l lp lq"># Pin Setup <br/>bulb = 4</span><span id="49b8" class="lm ka hi li b fi mn lo l lp lq">GPIO.setup(bulb, GPIO.OUT)</span><span id="6b67" class="lm ka hi li b fi mn lo l lp lq">GPIO.output(bulb, GPIO.HIGH)</span></pre><p id="5fa0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">上面的脚本同样用于关闭设备，并将所有脚本与服务器代码集成。</p><h2 id="d62c" class="lm ka hi bd kb lr ls lt kf lu lv lw kj ix lx ly kn jb lz ma kr jf mb mc kv md bi translated">液化石油气安全家园</h2><p id="3702" class="pw-post-body-paragraph im in hi io b ip kx ir is it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj hb bi translated">有许多伤亡是由于室内液化石油气泄漏造成的，很多时候你不在家，液化石油气持续泄漏。因此，为了让您了解这一点，并且您可以在正确的时间采取行动，我们可以实现<a class="ae lc" href="https://www.sparkfun.com/datasheets/Sensors/Biometric/MQ-6.pdf" rel="noopener ugc nofollow" target="_blank"> MQ6气体传感器</a>来通知我们。</p><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="er es mo"><img src="../Images/c137a063749453dd35bdbc2914d5540d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qoVX81jAeSAwbFyX.png"/></div></div></figure><p id="3a61" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">根据进行连接，并在raspberry pi上运行以下代码</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="b454" class="lm ka hi li b fi ln lo l lp lq"><strong class="li hj">import</strong> RPi.GPIO <strong class="li hj">as</strong> GPIO<br/><strong class="li hj">import</strong> time <strong class="li hj">import</strong> math  </span><span id="304e" class="lm ka hi li b fi mn lo l lp lq"># Board Setup <br/>GPIO.setmode(GPIO.BCM)</span><span id="e658" class="lm ka hi li b fi mn lo l lp lq"># Pin Setup <br/>gas = 17</span><span id="ca39" class="lm ka hi li b fi mn lo l lp lq">GPIO.setup(gas, GPIO.IN)<br/>   <strong class="li hj">while</strong> <strong class="li hj">True</strong>:<br/>           digGas = GPIO.input(gas)<br/>           <strong class="li hj">if</strong> digGas == 0:<br/>              notify.send ("notification message")<br/>           time.sleep(3)</span></pre><h2 id="05c5" class="lm ka hi bd kb lr ls lt kf lu lv lw kj ix lx ly kn jb lz ma kr jf mb mc kv md bi translated">为每个设备上的每个操作推送通知</h2><p id="b46f" class="pw-post-body-paragraph im in hi io b ip kx ir is it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj hb bi translated">然而，这项任务似乎是如此沉重和耗时的只是阅读名称，但这项任务只是一个单一的python代码行。对于您想要发送通知的任何物联网设备，需要在raspberry pi的后台运行一个专用服务，该服务监控设备的每个动作，并将通知发送给设备的每个订户。</p><p id="fe3f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了实现这一点，python有一个名为<a class="ae lc" href="https://notify.run/" rel="noopener ugc nofollow" target="_blank"> notify.run </a>的开源库。您可以使用终端在您的Raspberry Pi上进行设置。</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="5785" class="lm ka hi li b fi ln lo l lp lq">$pip install notify-run<br/>$notify-run register</span></pre><p id="4ddb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">用于监控物联网设备的每项服务。将这段代码放在适当的位置</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="f073" class="lm ka hi li b fi ln lo l lp lq">from notify_run import Notify</span><span id="1be6" class="lm ka hi li b fi mn lo l lp lq">notify = Notify()</span><span id="880e" class="lm ka hi li b fi mn lo l lp lq">notify.send("Notification Content here")</span></pre><p id="250a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">就这样，在这一部分我告诉你我如何实现LPG安全系统，通知和控制二进制驱动电器。</p><p id="0277" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在下一部分，我将告诉你我如何用语音助手控制这些电器，以及如何用Alexa和Raspberry Pi控制电视，即使电视不是智能的。</p><p id="ebc7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">要收到下一篇文章的通知，请跟我来<a class="mp mq ge" href="https://medium.com/u/7008caa98366?source=post_page-----b4462057d019--------------------------------" rel="noopener" target="_blank">乌代·辛格</a>:</p><p id="b260" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">github:<a class="ae lc" href="https://github.com/f71uday" rel="noopener ugc nofollow" target="_blank">https://github.com/f71uday</a></p></div></div>    
</body>
</html>