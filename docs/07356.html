<html>
<head>
<title>Python enumerate and Iterators</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python枚举器和迭代器</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/python-enumerate-and-iterators-5fbb16ee563c?source=collection_archive---------27-----------------------#2020-06-22">https://medium.com/analytics-vidhya/python-enumerate-and-iterators-5fbb16ee563c?source=collection_archive---------27-----------------------#2020-06-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7b9a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Python附带了许多易于使用的内置函数。这篇文章旨在讨论<code class="du jd je jf jg b">enumerate</code>函数，并简要介绍如何使用迭代器。</p><p id="8f2f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">和往常一样，让我先给你源代码的链接:</p><div class="jh ji ez fb jj jk"><a href="https://github.com/python/cpython/blob/master/Python/bltinmodule.c" rel="noopener  ugc nofollow" target="_blank"><div class="jl ab dw"><div class="jm ab jn cl cj jo"><h2 class="bd hj fi z dy jp ea eb jq ed ef hh bi translated">python/cpython</h2><div class="jr l"><h3 class="bd b fi z dy jp ea eb jq ed ef dx translated">Python编程语言。通过在GitHub上创建帐户，为python/cpython开发做出贡献。</h3></div><div class="js l"><p class="bd b fp z dy jp ea eb jq ed ef dx translated">github.com</p></div></div><div class="jt l"><div class="ju l jv jw jx jt jy jz jk"/></div></div></a></div><div class="jh ji ez fb jj jk"><a href="https://github.com/python/cpython/blob/master/Objects/enumobject.c" rel="noopener  ugc nofollow" target="_blank"><div class="jl ab dw"><div class="jm ab jn cl cj jo"><h2 class="bd hj fi z dy jp ea eb jq ed ef hh bi translated">python/cpython</h2><div class="jr l"><h3 class="bd b fi z dy jp ea eb jq ed ef dx translated">Python编程语言。通过在GitHub上创建帐户，为python/cpython开发做出贡献。</h3></div><div class="js l"><p class="bd b fp z dy jp ea eb jq ed ef dx translated">github.com</p></div></div><div class="jt l"><div class="ka l jv jw jx jt jy jz jk"/></div></div></a></div><p id="0036" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是来自<a class="ae kb" href="https://docs.python.org/3/library/functions.html#enumerate" rel="noopener ugc nofollow" target="_blank">文档</a>的函数定义:</p><p id="27d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jd je jf jg b">enumerate(<em class="kc">iterable</em>, <em class="kc">start=0</em>)</code></p><p id="1c38" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其中<code class="du jd je jf jg b">iterable</code>是一个序列，一个迭代器或者一个支持迭代的对象。<br/> <code class="du jd je jf jg b">start</code>为整数，默认为<code class="du jd je jf jg b">0</code>。</p><p id="11ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是您可以想到的实现枚举的方式:</p><pre class="kd ke kf kg fd kh jg ki kj aw kk bi"><span id="7a61" class="kl km hi jg b fi kn ko l kp kq">def enumerate(sequence, start=0):<br/>    n = start<br/>    for elem in sequence:<br/>        yield n, elem<br/>        n += 1</span></pre><p id="a4fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是一些如何使用枚举的示例:</p><pre class="kd ke kf kg fd kh jg ki kj aw kk bi"><span id="14b7" class="kl km hi jg b fi kn ko l kp kq">months = [<strong class="jg hj">"January"</strong>, <strong class="jg hj">"February"</strong>, <strong class="jg hj">"March"</strong>, <strong class="jg hj">"April"</strong>, <strong class="jg hj">"May"</strong>, <strong class="jg hj">"June"</strong>, <strong class="jg hj">"July"</strong>, <strong class="jg hj">"August"</strong>, <strong class="jg hj">"September"</strong>, <strong class="jg hj">"October"</strong>, <strong class="jg hj">"November"</strong>, <strong class="jg hj">"December"</strong>]<br/><br/><strong class="jg hj">for </strong>month_no, month <strong class="jg hj">in </strong>enumerate(months, start=1):<br/>    print(month_no, <strong class="jg hj">" - "</strong>, month)<br/><br/>print(<strong class="jg hj">"Months in Reverse Order:"</strong>)<br/><strong class="jg hj">for </strong>month_no, month <strong class="jg hj">in </strong>enumerate(months[::-1], start=-12):<br/>    print(month_no, <strong class="jg hj">" - "</strong>, month)</span><span id="38c3" class="kl km hi jg b fi kr ko l kp kq">Output:<br/>*******<br/>1  -  January<br/>2  -  February<br/>3  -  March<br/>4  -  April<br/>5  -  May<br/>6  -  June<br/>7  -  July<br/>8  -  August<br/>9  -  September<br/>10  -  October<br/>11  -  November<br/>12  -  December</span><span id="143a" class="kl km hi jg b fi kr ko l kp kq">Months in Reverse Order:<br/>-12  -  December<br/>-11  -  November<br/>-10  -  October<br/>-9  -  September<br/>-8  -  August<br/>-7  -  July<br/>-6  -  June<br/>-5  -  May<br/>-4  -  April<br/>-3  -  March<br/>-2  -  February<br/>-1  -  January</span></pre><p id="7624" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">嗯，<code class="du jd je jf jg b">start</code>只支持整数，所以如果你想要文本标签或其他东西，你可以这样做:</p><pre class="kd ke kf kg fd kh jg ki kj aw kk bi"><span id="4fe9" class="kl km hi jg b fi kn ko l kp kq"><strong class="jg hj">import </strong>string<br/>things_to_do = [<strong class="jg hj">"get up"</strong>, <strong class="jg hj">"exercise"</strong>, <strong class="jg hj">"eat"</strong>, <strong class="jg hj">"pray"</strong>, <strong class="jg hj">"study"</strong>, <strong class="jg hj">"have fun"</strong>, <strong class="jg hj">"sleep"</strong>]<br/><strong class="jg hj">for </strong>label, activity <strong class="jg hj">in </strong>enumerate(things_to_do, start=0):<br/>    print(string.ascii_lowercase[label], <strong class="jg hj">") "</strong>, activity)</span><span id="ee35" class="kl km hi jg b fi kr ko l kp kq"><br/>Output:<br/>*******</span><span id="c140" class="kl km hi jg b fi kr ko l kp kq">a )  get up<br/>b )  exercise<br/>c )  eat<br/>d )  pray<br/>e )  study<br/>f )  have fun<br/>g )  sleep</span></pre><p id="f60c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如你所见,<code class="du jd je jf jg b">start</code>可以是负整数也可以是正整数，但它只能是一个<code class="du jd je jf jg b">integer</code></p><p id="9cac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面的例子展示了如何使用迭代器而不是序列:</p><pre class="kd ke kf kg fd kh jg ki kj aw kk bi"><span id="44ca" class="kl km hi jg b fi kn ko l kp kq"><strong class="jg hj">class </strong>CalendarMonths:<br/><br/>    <strong class="jg hj">def </strong>__init__(self, wrap_around=<strong class="jg hj">False</strong>, start_month=<strong class="jg hj">None</strong>):<br/>        self.months = [<strong class="jg hj">"January"</strong>, <strong class="jg hj">"February"</strong>, <strong class="jg hj">"March"</strong>, <strong class="jg hj">"April"</strong>, <strong class="jg hj">"May"</strong>, <strong class="jg hj">"June"</strong>, <strong class="jg hj">"July"</strong>, <strong class="jg hj">"August"</strong>, <strong class="jg hj">"September"</strong>, <strong class="jg hj">"October"</strong>, <strong class="jg hj">"November"</strong>, <strong class="jg hj">"December"</strong>]<br/>        self.wrap_around = wrap_around<br/>        self.start_month = start_month<br/><br/>    <strong class="jg hj">def </strong>__iter__(self):<br/>        <strong class="jg hj">if </strong>self.start_month:<br/>            <strong class="jg hj">try</strong>:<br/>                self.cur_index = self.months.index(self.start_month.capitalize()) - 1<br/>            <strong class="jg hj">except </strong>ValueError <strong class="jg hj">as </strong>ve:<br/>                print(<strong class="jg hj">"%s is not a valid month"</strong>)<br/>                self.cur_index = -1<br/>            <strong class="jg hj">except </strong>Exception <strong class="jg hj">as </strong>ex:<br/>                print(<strong class="jg hj">"Exception when trying to process start month %s. Error : %s" </strong>% (self.start_month, ex))<br/>                self.cur_index = -1<br/>        <strong class="jg hj">else</strong>:<br/>            self.cur_index = -1<br/>        <strong class="jg hj">return </strong>self<br/><br/>    <strong class="jg hj">def </strong>__next__(self):<br/>        self.cur_index += 1<br/>        cur_index_exceeds_item_length = self.cur_index &gt; len(self.months) - 1<br/>        self.cur_index = 0 <strong class="jg hj">if </strong>self.wrap_around <strong class="jg hj">and </strong>cur_index_exceeds_item_length <strong class="jg hj">else </strong>self.cur_index<br/>        <strong class="jg hj">if not </strong>self.wrap_around <strong class="jg hj">and </strong>cur_index_exceeds_item_length:<br/>            <strong class="jg hj">raise </strong>StopIteration(<strong class="jg hj">"No more months to display"</strong>)<br/>        <strong class="jg hj">return </strong>self.months[self.cur_index]<br/><br/><br/><strong class="jg hj">def </strong>print_months(months_iterator, r, start):<br/>    <strong class="jg hj">try</strong>:<br/>        <strong class="jg hj">for </strong>i, _ <strong class="jg hj">in </strong>enumerate(range(r), start=start):<br/>            print(<strong class="jg hj">"Call No - "</strong>, i, <strong class="jg hj">" - "</strong>, next(months_iterator))<br/>    <strong class="jg hj">except </strong>Exception <strong class="jg hj">as </strong>ex:<br/>        print(ex)<br/><br/><br/>months_with_wrap_around = CalendarMonths(<strong class="jg hj">True</strong>)<br/>months_without_wrap_around = CalendarMonths(<strong class="jg hj">False</strong>)<br/>months_with_wrap_around_start_at_march = CalendarMonths(<strong class="jg hj">True</strong>, <strong class="jg hj">"march"</strong>)<br/>months_without_wrap_around_start_at_march = CalendarMonths(<strong class="jg hj">False</strong>, <strong class="jg hj">"march"</strong>)<br/><br/><strong class="jg hj">for </strong>obj <strong class="jg hj">in </strong>[months_with_wrap_around, months_without_wrap_around, months_without_wrap_around_start_at_march, months_with_wrap_around_start_at_march]:<br/>    print_months(iter(obj), 25, 1)</span></pre><p id="e391" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出将是这样的:</p><pre class="kd ke kf kg fd kh jg ki kj aw kk bi"><span id="4075" class="kl km hi jg b fi kn ko l kp kq">Call No -  1  -  January<br/>Call No -  2  -  February<br/>Call No -  3  -  March<br/>Call No -  4  -  April<br/>Call No -  5  -  May<br/>Call No -  6  -  June<br/>Call No -  7  -  July<br/>Call No -  8  -  August<br/>Call No -  9  -  September<br/>Call No -  10  -  October<br/>Call No -  11  -  November<br/>Call No -  12  -  December<br/>Call No -  13  -  January<br/>Call No -  14  -  February<br/>Call No -  15  -  March<br/>Call No -  16  -  April<br/>Call No -  17  -  May<br/>Call No -  18  -  June<br/>Call No -  19  -  July<br/>Call No -  20  -  August<br/>Call No -  21  -  September<br/>Call No -  22  -  October<br/>Call No -  23  -  November<br/>Call No -  24  -  December<br/>Call No -  25  -  January<br/>Call No -  1  -  January<br/>Call No -  2  -  February<br/>Call No -  3  -  March<br/>Call No -  4  -  April<br/>Call No -  5  -  May<br/>Call No -  6  -  June<br/>Call No -  7  -  July<br/>Call No -  8  -  August<br/>Call No -  9  -  September<br/>Call No -  10  -  October<br/>Call No -  11  -  November<br/>Call No -  12  -  December<br/>No more months to display</span><span id="1a92" class="kl km hi jg b fi kr ko l kp kq">Call No -  1  -  March<br/>Call No -  2  -  April<br/>Call No -  3  -  May<br/>Call No -  4  -  June<br/>Call No -  5  -  July<br/>Call No -  6  -  August<br/>Call No -  7  -  September<br/>Call No -  8  -  October<br/>Call No -  9  -  November<br/>Call No -  10  -  December<br/>No more months to display</span><span id="804e" class="kl km hi jg b fi kr ko l kp kq">Call No -  1  -  March<br/>Call No -  2  -  April<br/>Call No -  3  -  May<br/>Call No -  4  -  June<br/>Call No -  5  -  July<br/>Call No -  6  -  August<br/>Call No -  7  -  September<br/>Call No -  8  -  October<br/>Call No -  9  -  November<br/>Call No -  10  -  December<br/>Call No -  11  -  January<br/>Call No -  12  -  February<br/>Call No -  13  -  March<br/>Call No -  14  -  April<br/>Call No -  15  -  May<br/>Call No -  16  -  June<br/>Call No -  17  -  July<br/>Call No -  18  -  August<br/>Call No -  19  -  September<br/>Call No -  20  -  October<br/>Call No -  21  -  November<br/>Call No -  22  -  December<br/>Call No -  23  -  January<br/>Call No -  24  -  February<br/>Call No -  25  -  March</span><span id="35a5" class="kl km hi jg b fi kr ko l kp kq">Process finished with exit code 0</span></pre><p id="2f1d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以你知道了<code class="du jd je jf jg b">enumerate</code>和<code class="du jd je jf jg b">Iterators</code>时间，去和他们玩得开心。享受学习。</p><p id="f0e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="kc">花絮:</em> </strong>计算机科学中最奇怪的事情之一是为什么所有的索引都从0开始，而不是从1开始(谷歌一下其中的原因，你就会明白为什么从性能的角度来看这是必要的)</p></div></div>    
</body>
</html>