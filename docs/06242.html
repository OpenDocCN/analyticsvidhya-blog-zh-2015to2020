<html>
<head>
<title>Summarize and Extract information from Text to answer Questions.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从文本中总结和提取信息来回答问题。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/summarize-and-extract-information-from-text-to-answer-questions-67e2f415b4b1?source=collection_archive---------25-----------------------#2020-05-15">https://medium.com/analytics-vidhya/summarize-and-extract-information-from-text-to-answer-questions-67e2f415b4b1?source=collection_archive---------25-----------------------#2020-05-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/60c29f7868a74fc82ea22da57e4782d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hBBeRNtxJ-deWtUr.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">自然语言处理</figcaption></figure><blockquote class="iu iv iw"><p id="42d9" class="ix iy iz ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">一幅画胜过千言万语。</p></blockquote><p id="eddb" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">如今，每天都会产生大量数据。这些数据有很多模式，可以回答很多问题。但是由于数据非常大，没有人能够浏览所有的数据并找到模式。但是由于机器学习和数据可视化的最新进展，我们可以总结这些数据并找到模式。有了这个，我们可以找到许多与该领域相关的见解。</p><p id="dd23" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">在本文中，我们将探索美国数据科学家就业市场中的<a class="ae jz" href="https://www.kaggle.com/sl6149/data-scientist-job-market-in-the-us" rel="noopener ugc nofollow" target="_blank"><em class="iz"/></a>数据，以回答一些普遍问题。</p></div><div class="ab cl ka kb gp kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hb hc hd he hf"><p id="ad02" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">该数据集有5个属性，即职位、公司、描述、评论和位置。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kh"><img src="../Images/af4a7d9e637ace7ce9f4b7bae872330b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*61pj4C_MLkcfFtzNqTrS9g.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">数据集的数据</figcaption></figure><p id="9fc6" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">通过查看数据，我们可以看到有空值、标点符号和大写字母。所以数据需要清理。我们先去掉标点符号。</p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="bdf8" class="kr ks hi kn b fi kt ku l kv kw">import string<br/>def punc(text):<br/>    try:<br/>        text = [c for c in text if c not in string.punctuation]  #removes punctuation<br/>    except:<br/>        text = [' ']<br/>    return ''.join(text)<br/>#removing punctuation from position ,description ,company columns<br/>data.position = data.position.apply(punc)<br/>data.description = data.description.apply(punc)<br/>data.company = data.company.apply(punc)</span></pre><p id="49f0" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">现在让我们把所有的大写字母转换成小写字母。这在对列值执行操作时非常有用。</p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="b52c" class="kr ks hi kn b fi kt ku l kv kw">data.description = [i.lower() for i in data.description]<br/>data.position = [i.lower() for i in data.position]<br/>data.company = [i.lower() for i in data.company]</span></pre><p id="35b1" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">现在让我们从列location中只提取place，并更新location列。</p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="e0ec" class="kr ks hi kn b fi kt ku l kv kw">def place(text):<br/>    try:<br/>        text = text.split(',')#removes ',' and return first word<br/>        return text[0]<br/>    except:<br/>        pass<br/>    return ''<br/>#getting location <br/>data.location = data.location.apply(place)</span></pre><p id="e51e" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">让我们删除review列，因为我们不会使用它，因为它有许多空值。</p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="fd3f" class="kr ks hi kn b fi kt ku l kv kw">data.drop('reviews',axis = 1,inplace = True)</span></pre><p id="8eab" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">现在，我们的数据已经清理完毕，可以进行分析了。让我们来看看吧。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kx"><img src="../Images/b3e87a2b2ade9d1d38c9ed1b7f5172f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ffdnSN1UUQz0oEdn5efTiA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">清理的数据</figcaption></figure><p id="7033" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">现在让我们试着回答一些问题。<strong class="ja hj">首先让我们看看哪家公司有最多的职位空缺。</strong></p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="b335" class="kr ks hi kn b fi kt ku l kv kw">vacancies = data.company.value_counts().rename_axis('values')<br/>vacancies = vacancies.reset_index(name='counts')<br/>plt.figure(figsize = (10,7))<br/>sns.barplot(x = 'counts',y = 'values',data = vacancies[:15])</span></pre><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ky"><img src="../Images/2dcdf4633a79ccc215ed459278e0193c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rHfGi0v8w4pX4s005CHgXA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">职位发布数量最多的公司的条形图</figcaption></figure><p id="eac6" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">从这个图中，我们可以很容易地一眼看出亚马逊有一个最大数量的空缺。它有350多个空缺。紧随亚马逊之后的是Ball Aerospace、微软和谷歌。</p><p id="8c24" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">让我们看看哪个职位有最多的空缺。</p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="43ff" class="kr ks hi kn b fi kt ku l kv kw">positions = data.position.value_counts().rename_axis('values')<br/>positions = positions.reset_index(name = 'counts')<br/>plt.figure(figsize = (10,7))<br/>sns.barplot(x = 'counts',y = 'values',data = positions[:15])</span></pre><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kz"><img src="../Images/25a84eb5b7d07c5106594fd0ac15082e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5hGvMEu7QnmpNbsWbmw5Kg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">职位发布的条形图</figcaption></figure><p id="db66" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">从这个柱状图中，我们可以看到数据科学家的人数最多，有超过350个空缺。接下来是超过100名的高级数据科学家和研究分析师。</p><p id="7e6f" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated"><strong class="ja hj">我们来看看哪个位置机会最多。</strong></p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="71be" class="kr ks hi kn b fi kt ku l kv kw">locations = data.location.value_counts().rename_axis('values')<br/>locations = locations.reset_index(name = 'counts')                       plt.figure(figsize = (10,7))                       <br/>sns.barplot(x = 'counts',y = 'values',data = locations[:15])</span></pre><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es la"><img src="../Images/84c8f0ed3b44ba59fdfd1634816d3100.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N5JsANdn4-ECcZ3DQRffVg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">大多数机会的条形图</figcaption></figure><p id="f165" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">看起来纽约的机会最多，其次是西雅图和剑桥。</p><p id="4195" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated"><strong class="ja hj">现在，让我们试着找出雇主在招聘数据科学家时最想要的技能、工具和学位。</strong></p><p id="2d9d" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">仅仅通过总结信息来回答这个问题是不可能的，因为没有技能一栏。但是我们有一个描述栏。该列包含对该行中职位的描述。在描述中，提到了这项工作所需的技能。我们可以分析这个描述，借助职位栏找到合适的技能。</p><p id="34fe" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">但是在专栏位置，价值数据科学家是以不同的方式被提及的。例如高级数据科学家、研究数据科学家。所以，我们把数据科学家的各种价值观替换成“数据科学家”。让我们为机器学习工程师、数据分析师、数据科学经理做这件事。让我们把剩下的几类归入“其他”。</p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="62c3" class="kr ks hi kn b fi kt ku l kv kw">def change(text):<br/>    if 'data scientist' in text:<br/>        return 'data scientist'<br/>    elif 'analyst' in text:<br/>        return 'data analyst'<br/>    elif 'consultant' in text or 'manager' in text:<br/>        return 'data science manager'<br/>    elif 'machine learning' in text or 'statistical programmer' in text:<br/>        return 'machine learning engineer'<br/>    else:<br/>        return 'other'<br/>data.position = data.position.apply(change)</span></pre><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/bf1a68c02b0ea47863cc253dc3ab9f0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CxyeZHK57_IpUlZ53t1k6g.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">分组位置列</figcaption></figure><p id="8274" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">现在，我们可以根据列的位置轻松识别描述。</p><p id="e019" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">但是这种描述对每行的文本都有理解，不容易分析。这里自然语言处理帮助了我们。它有许多有用的功能，大大减少了我们的工作。</p><p id="0184" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">我们的假设是，<strong class="ja hj">既然每一行职位数据科学家的描述中都出现了相同的技能，自然这些词的出现频率就高</strong>。因此，让我们使用ngrams将文章分成单词，这是NLTK中的一个有用特性，并使用barplot将它们绘制出来以识别技能。</p><p id="aff5" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">但是在此之前，像“the，is，a，an，…”等词出现得更频繁，所以我们需要将它们从描述中删除。我们可以在NLTK中使用停用词来做到这一点。</p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="7ff5" class="kr ks hi kn b fi kt ku l kv kw">def nostop(text):<br/>    stop = set(stopwords.words('english'))<br/>    filtered = [w for w in text.split() if w not in stop] <br/>    #removing stop words<br/>    return ' '.join(filtered)</span></pre><p id="2a39" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">现在让我们从一个数据科学家职位的所有行的描述中制作1克、2克和3克，并将它们存储在一个数据框中。现在让我们来看看前15个最常用的单词。</p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="f871" class="kr ks hi kn b fi kt ku l kv kw">def grams(pos,n):<br/>    des = data[data.position == pos].description <br/>    #taking description<br/>    most_frequent = []<br/>    words = []<br/>    for i in des:<br/>        i = nostop(i)<br/>        most_frequent += ngrams(i.split(),n) <br/>        #creating ngrams<br/>    words = pd.DataFrame(most_frequent)<br/>    words['gram_' + str(n)] = words[0]<br/>    for i in range(1,n):<br/>        words['gram_' + str(n)] += ' ' + words[i] <br/>        #creating single column with with all values of tuple<br/>    return words['gram_' + str(n)]<br/>    <br/>da1 = grams('data scientist',1) #1gram<br/>da2 = grams('data scientist',2) #2grams<br/>da3 = grams('data scientist',3) #3grams</span><span id="e0bd" class="kr ks hi kn b fi lc ku l kv kw">da1 = da1.value_counts().rename_axis('values').<br/>da1 = da1.reset_index(name='counts')[:15]<br/>#converting into dataframe<br/>da2 = da2.value_counts().rename_axis('values')<br/>da2 = da2.reset_index(name='counts')[:15]<br/>da3 = da3.value_counts().rename_axis('values')<br/>da3 = da3.reset_index(name='counts')[:15]</span></pre><p id="0ec4" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">让我们制作一个柱状图，以便于可视化。第一克。</p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="09f2" class="kr ks hi kn b fi kt ku l kv kw">sns.barplot(x = 'counts',y = 'values',data = da1)</span></pre><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es ld"><img src="../Images/9646ce87dcad7970b5a299ea51496269.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*28uspkMF5jLksAzjQsVnbQ.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">一克</figcaption></figure><p id="8b2d" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">由此我们无法获得太多信息，但我们可以假设机器学习是一项必要的技能，因为机器和学习单词都存在。看来统计也是必要的。</p><p id="2c93" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">因此，我们在这里尝试做的是，我们尝试从最频繁的单词中确定所需的技能。但是看起来用1克是没有效率的，我们不能获得这样的信息。尽管如此，这也比浏览所有可能的职位描述来寻找雇主最需要的技能要好。</p><p id="4e56" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">现在让我们试试2克。它类似于1克，但提取两个单词。</p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="e235" class="kr ks hi kn b fi kt ku l kv kw">sns.barplot(x = ‘counts’,y = ‘values’,data = da2)</span></pre><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es le"><img src="../Images/c2d010edaa9f30b22a668a1cab2cf05a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ee09CPAv3vEousM8G25jUw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">两克</figcaption></figure><p id="d878" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">这看起来更清楚了。我们可以很容易地识别像机器学习、大数据、数据挖掘、数据分析等技术技能。像沟通技巧这样的软技能。数据科学和计算机科学之类的学位。我们还可以看到，雇主想要的是工作经验和国籍。</p><p id="c53b" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">让我们试试3克。它也类似于1克，但一次提取3个单词。</p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="7bed" class="kr ks hi kn b fi kt ku l kv kw">sns.barplot(x = 'counts',y = 'values',data = da3)</span></pre><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lf"><img src="../Images/668dc5134fb2c0790dbf606f27f53581.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NkX_oKoeSJ0m2koB8sx3_A.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">三克</figcaption></figure><p id="962c" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">从上面的图表中，我们可以看到数据科学家的一些重要技能是自然语言处理、机器学习技术和算法、计算机科学统计和处理大型数据集等。</p></div><div class="ab cl ka kb gp kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hb hc hd he hf"><p id="0242" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">在这个项目中，我为各种工作岗位做了类似的分析，如机器学习工程师、数据分析师等。你可以在这里找到结果<a class="ae jz" href="https://github.com/narsym/Data-science-job-market-in-US" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="3080" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">通过使用这些技术和大约2个小时的编码，我们能够获得这些洞察力，如果手动完成，这将需要数周时间。</p><p id="d27e" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">希望文章不要太长太无聊。</p><p id="de1c" class="pw-post-body-paragraph ix iy hi ja b jb jc jd je jf jg jh ji jw jk jl jm jx jo jp jq jy js jt ju jv hb bi translated">感谢阅读。</p></div></div>    
</body>
</html>