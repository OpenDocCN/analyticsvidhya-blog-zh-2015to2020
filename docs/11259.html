<html>
<head>
<title>Interactive data viz using Altair</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">互动数据即使用牛郎星</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/interactive-data-viz-using-altair-873139771fe2?source=collection_archive---------2-----------------------#2020-11-26">https://medium.com/analytics-vidhya/interactive-data-viz-using-altair-873139771fe2?source=collection_archive---------2-----------------------#2020-11-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="5328" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在从事Data Viz项目时，每个人都希望在他们的笔记本和仪表板上呈现交互式绘图。尽管建立有效的互动情节似乎是一项艰巨的任务。最近，我偶然发现了一个开源数据可视化库的瑰宝，叫做<a class="ae jd" href="https://altair-viz.github.io/getting_started/overview.html" rel="noopener ugc nofollow" target="_blank"> Altair </a>。</p><h1 id="f89d" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated"><strong class="ak">关于:</strong></h1><p id="0e76" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">Altair是一个用于声明性统计可视化的开源python库，基于Vega和Vega-Lite。Altair提供了一种有效而简洁的可视化语法，允许我们快速构建各种各样的统计可视化。</p><p id="ca95" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们可以有更多的时间通过构建优雅而有效的图表来探索我们的数据，而不仅仅是与代码作斗争。</p><h1 id="4741" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated"><strong class="ak">安装:</strong></h1><p id="7859" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">Altair可以与示例数据集一起安装在<a class="ae jd" href="https://github.com/altair-viz/vega_datasets" rel="noopener ugc nofollow" target="_blank"> vega_datasets </a>中，使用:</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="f121" class="kq jf hi km b fi kr ks l kt ku">$ pip install altair <br/>or <br/>$ pip install altair vega_datasets</span></pre><p id="856a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于Conda软件包管理器，等效于:</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="0d5b" class="kq jf hi km b fi kr ks l kt ku">$ conda install -c conda-forge altair vega_datasets</span></pre><h1 id="2bb4" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">让我们为下面的<strong class="ak">案例研究构建一个交互式图表:</strong></h1><p id="b27c" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">本文涵盖了一个小案例研究，并提供了构建交互式图表的一步一步的过程。如果想要最后的代码直接跳到底部或者勾选这个<a class="ae jd" href="https://github.com/samarth0174/Interactive-Data-Viz-using-Altair/blob/main/interactivedataviz_altair.py" rel="noopener ugc nofollow" target="_blank"> <em class="kv">回购</em> </a>。</p><p id="a58c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将采用<a class="ae jd" href="https://vega.github.io/vega-datasets/data/seattle-weather.csv" rel="noopener ugc nofollow" target="_blank">西雅图天气数据集</a>，其中包含2012-2015年西雅图的每日天气观测。</p><figure class="kh ki kj kk fd kx er es paragraph-image"><div class="er es kw"><img src="../Images/36cdc392e5b23438d9f925f30870d1de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*DPa4lJCOAIVrdxaqymAWZg.gif"/></div><figcaption class="la lb et er es lc ld bd b be z dx translated">交互式串联散点图和条形图</figcaption></figure><p id="2201" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这张图表提供了一年来西雅图天气的互动探索。它包括一个单轴画笔选择&amp;点击选择，轻松查看特定日期范围内天气类型的分布。</p><h2 id="2925" class="kq jf hi bd jg le lf lg jk lh li lj jo iq lk ll js iu lm ln jw iy lo lp ka lq bi translated"><strong class="ak"> <em class="lr"> 1。导入数据集:</em> </strong></h2><p id="8b92" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">由于我们安装了带有示例数据集的Altair，我们可以导入数据集，或者使用Pandas从<a class="ae jd" href="https://vega.github.io/vega-datasets/data/seattle-weather.csv" rel="noopener ugc nofollow" target="_blank"> CSV </a>导入数据。</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="0b9a" class="kq jf hi km b fi kr ks l kt ku"><strong class="km hj">import altair as alt <br/>from vega_datasets import data<br/></strong>settle_data = data.seattle_weather()<br/>settle_data.head()</span><span id="ace3" class="kq jf hi km b fi ls ks l kt ku"><strong class="km hj">or </strong></span><span id="8295" class="kq jf hi km b fi ls ks l kt ku"><strong class="km hj">import altair as alt<br/>import pandas as pd</strong><br/>settle_data = pd.read_csv("/content/seattle-weather.csv")<br/>settle_data.head()</span></pre><figure class="kh ki kj kk fd kx er es paragraph-image"><div class="er es lt"><img src="../Images/17efde3c10668918d4f491122483a849.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*sczW_E7cMAkJatl6vUxiMw.png"/></div></figure><p id="a60f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Altair内部使用的数据以Pandas DataFrame格式存储，但它支持多种输入格式。这是最好的部分，我们可以在Altair中操作我们的数据，就像你处理熊猫数据帧一样。</p><h2 id="72f1" class="kq jf hi bd jg le lf lg jk lh li lj jo iq lk ll js iu lm ln jw iy lo lp ka lq bi translated"><strong class="ak">2<em class="lr">2。定义标尺:</em> </strong></h2><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="e43d" class="kq jf hi km b fi kr ks l kt ku">settle_data.weather.unique()<br/>&gt;&gt; array(['drizzle', 'rain', 'sun', 'snow', 'fog'], dtype=object)</span></pre><p id="b2ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将根据天气类型的分布绘制数据。当我们查看“天气”栏时，我们发现了5个类别，它们是根据等级定义的。</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="10fe" class="kq jf hi km b fi kr ks l kt ku"><strong class="km hj"># Defining the color scale for the plot (distribution based on Weather types)</strong></span><span id="1dcc" class="kq jf hi km b fi ls ks l kt ku">scale = alt.Scale(domain=['sun', 'fog', 'drizzle', 'rain', 'snow'],range=['#e7ba52', '#a7a7a7', '#aec7e8', '#1f77b4', '#9467bd'])</span><span id="3ffe" class="kq jf hi km b fi ls ks l kt ku">color = alt.Color('weather:N', scale=scale) <br/># N : used to specify nominal data</span></pre><h2 id="88e6" class="kq jf hi bd jg le lf lg jk lh li lj jo iq lk ll js iu lm ln jw iy lo lp ka lq bi translated"><strong class="ak"> <em class="lr"> 3。顶部散点图:温度与日期</em> </strong></h2><ul class=""><li id="6c51" class="lu lv hi ih b ii kc im kd iq lw iu lx iy ly jc lz ma mb mc bi translated">x轴:日期，y轴:温度</li><li id="7387" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">我们有兴趣知道温度和日期(时间)之间的关系。我们通过使用<code class="du mi mj mk km b">make_point()</code> fn将数据显示为点来指定我们想要绘制的绘图类型。</li><li id="4f9b" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">我们将<em class="kv">数据</em>传递给<em class="kv"> alt。Chart() </em>函数。</li></ul><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="cc75" class="kq jf hi km b fi kr ks l kt ku">points = alt.Chart(<strong class="km hj">settle_data</strong>).mark_point().encode(<br/>  alt.X('<strong class="km hj">monthdate(date):T</strong>', title='Date'),<br/>  alt.Y('<strong class="km hj">temp_max:Q</strong>',<br/>         title='Maximum Daily Temperature (C)',<br/>         scale=alt.Scale(domain=[-5, 40])<br/>       )</span><span id="bd14" class="kq jf hi km b fi ls ks l kt ku"># T- Specify Time data<br/># Q- Specify quantitative data<br/># O- Specify ordinal data</span></pre><figure class="kh ki kj kk fd kx er es paragraph-image"><div class="er es ml"><img src="../Images/1d36130a8e28631ef20759cd7b0ed519.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*Uk2eF95u83UIuqBcNq9SYg.png"/></div><figcaption class="la lb et er es lc ld bd b be z dx translated">散点图</figcaption></figure><p id="8bd8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以通过添加一个额外的属性，即降水测量值(查看数据集)，作为大小属性，使我们的图更具信息性。</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="a766" class="kq jf hi km b fi kr ks l kt ku">points = alt.Chart().mark_point().encode(<br/>  alt.X('monthdate(date):T', title='Date'),<br/>  alt.Y('temp_max:Q',title='Maximum Daily Temperature (C)',<br/>         scale=alt.Scale(domain=[-5, 40]),<br/>  <strong class="km hj">size=alt.Size('precipitation:Q',scale=alt.Scale(range=[5,  200])</strong><br/>)<br/>)</span></pre><figure class="kh ki kj kk fd kx er es paragraph-image"><div class="er es mm"><img src="../Images/42756b4e9eba82754de2613e3b66bb11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1058/format:webp/1*QndR7fD4AvoC4_ELrhLGSQ.png"/></div><figcaption class="la lb et er es lc ld bd b be z dx translated">添加了降水属性</figcaption></figure><p id="9835" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">确保每次添加一个属性时，它都应该包含在encode()函数中，并用逗号分隔。</strong></p><blockquote class="mn mo mp"><p id="0586" class="if ig kv ih b ii ij ik il im in io ip mq ir is it mr iv iw ix ms iz ja jb jc hb bi translated">在altair中，可视属性到数据列的映射被称为<strong class="ih hj">编码。</strong>因此我们需要为每个图表定义编码，以便定义属性。</p></blockquote><h2 id="5cf4" class="kq jf hi bd jg le lf lg jk lh li lj jo iq lk ll js iu lm ln jw iy lo lp ka lq bi translated"><strong class="ak"> 4。添加互动功能:</strong></h2><p id="4b9f" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">我们将使用<code class="du mi mj mk km b">selection()</code>功能，该功能可用于创建交互式图像。</p><p id="6284" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将在顶部面板添加一个处于活动状态的画笔，该画笔可用于使用<code class="du mi mj mk km b"><a class="ae jd" href="https://altair-viz.github.io/user_guide/generated/api/altair.selection_interval.html#altair.selection_interval" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">selection_interval()</strong></a></code>功能进行时间间隔选择，以选择时间间隔(编码:x轴，即日期/时间</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="87b7" class="kq jf hi km b fi kr ks l kt ku">brush = alt.selection_interval(encodings=['x'])</span></pre><p id="aec6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们将把画笔添加到图表中。我们还将使用condition() fn根据区间选择为绘图提供条件颜色编码(针对不同的天气类型)。</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="d0e7" class="kq jf hi km b fi kr ks l kt ku">points = alt.Chart(settle_data).mark_point().encode(<br/>    alt.X('monthdate(date):T', title='Date'),<br/>    alt.Y('temp_max:Q',<br/>        title='Maximum Daily Temperature (C)',<br/>        scale=alt.Scale(domain=[-5, 40])<br/>    ),<br/>    <strong class="km hj">color=alt.condition(brush, color, alt.value('lightgray'))</strong>,<br/>    size=alt.Size('precipitation:Q', scale=alt.Scale(range=[5, 200]))).<strong class="km hj">add_selection(<br/>    brush<br/>    )<br/></strong>points</span></pre><figure class="kh ki kj kk fd kx er es paragraph-image"><div class="er es kw"><img src="../Images/b5142fa7a51e5f44f1a3461f3318da4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*nGwO6aPvnA9isgPhNEBF0w.gif"/></div><figcaption class="la lb et er es lc ld bd b be z dx translated">从x轴(日期)选择一个间隔</figcaption></figure><h2 id="a612" class="kq jf hi bd jg le lf lg jk lh li lj jo iq lk ll js iu lm ln jw iy lo lp ka lq bi translated"><strong class="ak"> 5。底部柱状图:天气类型</strong></h2><ul class=""><li id="8169" class="lu lv hi ih b ii kc im kd iq lw iu lx iy ly jc lz ma mb mc bi translated">x轴:天气，y轴:记录数</li><li id="af3d" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">我们使用<code class="du mi mj mk km b">make_bar()</code> fn将数据显示为柱状图。</li></ul><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="850a" class="kq jf hi km b fi kr ks l kt ku">bars = alt.Chart(<strong class="km hj">settle_data</strong>).mark_bar().encode(<br/>    x='<strong class="km hj">count()</strong>',<br/>    y='<strong class="km hj">weather:N</strong>')</span></pre><figure class="kh ki kj kk fd kx er es paragraph-image"><div class="er es mt"><img src="../Images/59b74d7371959889008c847a6b603e26.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/format:webp/1*OBFJl6r_F29NFs8epKDyHw.png"/></div><figcaption class="la lb et er es lc ld bd b be z dx translated">条形图(天气与记录)</figcaption></figure><p id="dcd1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们添加一个交互式功能，即一个基于天气类型的多点选择工具，以颜色显示。</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="7c3b" class="kq jf hi km b fi kr ks l kt ku">click = alt.selection_multi(encodings=['color'])</span></pre><p id="94e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将它绑定到图表，并添加一个条件()fn。</p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="23d0" class="kq jf hi km b fi kr ks l kt ku">bars = alt.Chart(settle_data).mark_bar().encode(<br/>    x='count()',<br/>    y='weather:N',<br/>    <strong class="km hj">color=alt.condition(click, color, alt.value('lightgray'))</strong>,<br/>).<strong class="km hj">add_selection(<br/>    click<br/>)</strong></span></pre><figure class="kh ki kj kk fd kx er es paragraph-image"><div class="er es kw"><img src="../Images/a10053009116106da4192e7f1ff0605d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*_c92ifnxTGuxu2Pf0JstoA.gif"/></div></figure><h2 id="aac6" class="kq jf hi bd jg le lf lg jk lh li lj jo iq lk ll js iu lm ln jw iy lo lp ka lq bi translated">6。构建复合图表:垂直连接两个图表:</h2><p id="6214" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">接下来是我们案例研究的最后一部分，我们将垂直连接两个图，正如您在开始时看到的那样。</p><p id="3a19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将使用<strong class="ih hj"> vconcat(plot1，plot2，data，)</strong>函数来堆叠这些图，并且还对我们之前的代码进行了<strong class="ih hj">一些调整，以便两个图连接起来，表现为一个单独的交互式图表。也可以参考其他类型的<a class="ae jd" href="https://altair-viz.github.io/user_guide/compound_charts.html" rel="noopener ugc nofollow" target="_blank"> <em class="kv">复合图表</em> </a> <em class="kv">。</em></strong></p><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="37dc" class="kq jf hi km b fi kr ks l kt ku">alt.vconcat(<br/>    points,<br/>    bars,<br/>    data=settle_data,<br/>    title="Seattle Weather: 2012-2015"<br/>)</span></pre><h2 id="db43" class="kq jf hi bd jg le lf lg jk lh li lj jo iq lk ll js iu lm ln jw iy lo lp ka lq bi translated"><strong class="ak"> 7。最终代码:</strong></h2><p id="626d" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">进行了一些重要的调整:</p><ul class=""><li id="d439" class="lu lv hi ih b ii ij im in iq mu iu mv iy mw jc lz ma mb mc bi translated">当我们使用复合图时，数据集(此处为:seattle_data)作为输入传递给<em class="kv"> vconcat </em>()，而不是传递给单独的绘图函数，即<em class="kv"> alt。</em>(图表())。</li><li id="6759" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">此外，properties()用于为每个图表提供相等的宽度和高度。</li></ul><figure class="kh ki kj kk fd kx er es paragraph-image"><div class="er es mx"><img src="../Images/c3f48702e200a3f5993eda9704628f7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/1*RkN7mUp7byHoO7VmUeV3iw.gif"/></div><figcaption class="la lb et er es lc ld bd b be z dx translated">滤镜变换(笔刷)</figcaption></figure><figure class="kh ki kj kk fd kx er es paragraph-image"><div class="er es mx"><img src="../Images/1b96e594f400e3d7237f3c81ff870f7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/1*I3H7NgTtlgCIsZKbOhpVfQ.gif"/></div><figcaption class="la lb et er es lc ld bd b be z dx translated">过滤变换(单击)</figcaption></figure><ul class=""><li id="5aa2" class="lu lv hi ih b ii ij im in iq mu iu mv iy mw jc lz ma mb mc bi translated"><em class="kv">我还为每个剧情定义添加了</em> <code class="du mi mj mk km b"><em class="kv">transform_filter()</em></code> <em class="kv">。</em></li><li id="111f" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated"><em class="kv">过滤转换根据提供的过滤表达式、选择或其他过滤谓词从数据流中删除对象。</em></li><li id="dbf2" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated"><strong class="ih hj"> <em class="kv">这里，根据散点图中的画笔选择过滤条形图。</em> </strong></li><li id="d217" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated"><strong class="ih hj"><em class="kv"/></strong><strong class="ih hj"><em class="kv">散点图是根据条形图</em> </strong>中的点击选择进行过滤的</li><li id="304c" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">因此，每个图都与其他图相连，提供了一个无缝的系综图。</li></ul></div><div class="ab cl my mz gp na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="hb hc hd he hf"><h1 id="e87d" class="je jf hi bd jg jh nf jj jk jl ng jn jo jp nh jr js jt ni jv jw jx nj jz ka kb bi translated"><strong class="ak">完整代码:</strong></h1><pre class="kh ki kj kk fd kl km kn ko aw kp bi"><span id="b798" class="kq jf hi km b fi kr ks l kt ku">import pandas as pd</span><span id="eee7" class="kq jf hi km b fi ls ks l kt ku">settle_data = pd.read_csv("/content/seattle-weather.csv")</span><span id="8c4b" class="kq jf hi km b fi ls ks l kt ku">settle_data.head()</span><span id="3677" class="kq jf hi km b fi ls ks l kt ku">settle_data.weather.unique()</span><span id="43ed" class="kq jf hi km b fi ls ks l kt ku">scale = alt.Scale(domain=['sun', 'fog', 'drizzle', 'rain', 'snow'],<br/>                  range=['#e7ba52', '#a7a7a7', '#aec7e8', '#1f77b4', '#9467bd'])<br/>color = alt.Color('weather:N', scale=scale)</span><span id="d911" class="kq jf hi km b fi ls ks l kt ku"><strong class="km hj"># We create two selections<br/># - a brush that is active on the top panel<br/># - a multi-click that is active on the bottom panel</strong><br/>brush = alt.selection_interval(encodings=['x'])<br/>click = alt.selection_multi(encodings=['color'])</span><span id="15ed" class="kq jf hi km b fi ls ks l kt ku"><strong class="km hj"># 1. Top panel is scatter plot of temperature vs time</strong></span><span id="5bd9" class="kq jf hi km b fi ls ks l kt ku">points = alt.Chart().mark_point().encode(<br/>    alt.X('monthdate(date):T', title='Date'),<br/>    alt.Y('temp_max:Q',<br/>        title='Maximum Daily Temperature (C)',<br/>        scale=alt.Scale(domain=[-5, 40])<br/>    ),<br/>    color=alt.condition(brush, color, alt.value('lightgray')),<br/>    size=alt.Size('precipitation:Q', scale=alt.Scale(range=[5, 200]))<br/>).<strong class="km hj">properties(<br/>    width=550,<br/>    height=300</strong><br/>).add_selection(<br/>    brush<br/>).<strong class="km hj">transform_filter(<br/>    click<br/>)</strong></span><span id="51dd" class="kq jf hi km b fi ls ks l kt ku">##########################<strong class="km hj"><br/># 2. Bottom panel is a bar chart of weather type<br/></strong>bars = alt.Chart().mark_bar().encode(<br/>    x='count()',<br/>    y='weather:N',<br/>    color=alt.condition(click, color, alt.value('lightgray')),<br/>)<strong class="km hj">.transform_filter(<br/>    brush</strong><br/>).<strong class="km hj">properties(<br/>    width=550,</strong><br/>).add_selection(<br/>    click<br/>)</span><span id="db84" class="kq jf hi km b fi ls ks l kt ku">##########################</span><span id="5dd1" class="kq jf hi km b fi ls ks l kt ku"><strong class="km hj">#3. Build Compound Plot<br/>alt.vconcat(<br/></strong>    points,<br/>    bars,<br/>    <strong class="km hj">data=settle_data</strong>,<br/>    title="Seattle Weather: 2012-2015"<br/>)</span></pre><figure class="kh ki kj kk fd kx er es paragraph-image"><div class="er es nk"><img src="../Images/bc884123234a5f7254bf7bf3abc7fd25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/1*0r5LBWauYO67g0M9n-kmgA.gif"/></div><figcaption class="la lb et er es lc ld bd b be z dx translated"><strong class="bd jg">最终结果</strong></figcaption></figure></div><div class="ab cl my mz gp na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="hb hc hd he hf"><h1 id="5069" class="je jf hi bd jg jh nf jj jk jl ng jn jo jp nh jr js jt ni jv jw jx nj jz ka kb bi translated">结论:</h1><p id="b7eb" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">我们已经成功地建立了自己的互动数据，即使用Altair。这是一个让你开始使用Altair工作流程的快速指南。Altair是一个很大的库，也支持许多其他的情节，你应该看一下<a class="ae jd" href="https://altair-viz.github.io/getting_started/overview.html" rel="noopener ugc nofollow" target="_blank"> <em class="kv">官方文档</em> </a> &amp;也可以查看一下<a class="ae jd" href="https://altair-viz.github.io/gallery/index.html" rel="noopener ugc nofollow" target="_blank"> <em class="kv">范例库</em> </a>，在那里你可以找到类似于刚刚提到的那个的不同案例研究。</p></div><div class="ab cl my mz gp na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="hb hc hd he hf"><p id="5c8a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望这篇文章已经为您节省了一些浏览完整文档的时间。我仍在学习，我肯定会喜欢一些关于我的写作和过程的反馈。</p><p id="ddb9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以在<a class="ae jd" href="https://www.linkedin.com/in/samarth0174/" rel="noopener ugc nofollow" target="_blank"> <em class="kv"> LinkedIn </em> </a>上联系我，在<a class="ae jd" rel="noopener" href="/@samarth0174">Medium</a>&amp;<a class="ae jd" href="https://github.com/samarth0174" rel="noopener ugc nofollow" target="_blank"><em class="kv">GitHub</em></a>上关注我</p><p id="80a0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="kv">我以前的文章- </em> </strong></p><div class="nl nm ez fb nn no"><a rel="noopener follow" target="_blank" href="/datadriveninvestor/deploy-your-deep-learning-models-on-iot-devices-using-tensorflow-lite-99d3ccdfc853"><div class="np ab dw"><div class="nq ab nr cl cj ns"><h2 class="bd hj fi z dy nt ea eb nu ed ef hh bi translated">使用TensorFlow lite在物联网设备上部署深度学习模型</h2><div class="nv l"><h3 class="bd b fi z dy nt ea eb nu ed ef dx translated">在Raspberry pie上转换和部署模型的完整工作流程。</h3></div><div class="nw l"><p class="bd b fp z dy nt ea eb nu ed ef dx translated">medium.com</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc ky no"/></div></div></a></div></div></div>    
</body>
</html>