<html>
<head>
<title>How to create a Loading Icon for your React Native App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何为你的React本地应用创建一个加载图标</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-create-a-loading-icon-for-your-react-native-app-20d50cbf5dc3?source=collection_archive---------1-----------------------#2019-10-06">https://medium.com/analytics-vidhya/how-to-create-a-loading-icon-for-your-react-native-app-20d50cbf5dc3?source=collection_archive---------1-----------------------#2019-10-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="1d35" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大家好，现在是周日下午，此时此刻英国天气晴朗但忧郁…所以我认为写一个关于如何为你的React本地应用创建一个简单的加载屏幕的教程会很酷。我们开始吧！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/dbc4efe181f6fa0057d3c12270db8bc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*67HGfUmoR1ZZVCnQ.jpg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">《思想者》雕像造型</figcaption></figure><p id="3655" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您首先要做的是创建一个新的React本地项目。因此，打开您的终端，导航到您的计算机中您希望项目所在的位置/文件夹。使用下面的命令创建React本地项目。</p><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="98f9" class="jy jz hi ju b fi ka kb l kc kd">react-native init MyAwesomeProjectNow</span></pre><p id="8606" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，在你选择的文本编辑器中打开这个项目，我喜欢使用Visual Studio代码，React Native或React的一个众所周知的做法是有一个简洁的文件夹结构，因为这只是一个小教程，我们不会太担心，但是，在你的项目的根目录下创建一个名为“components”的文件夹，并在其中创建一个名为“LoadingIcon”的js文件。</p><p id="2b59" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以现在你的项目应该看起来像下面的截图。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ke"><img src="../Images/482e751dfdfa7a12e89485e600b3359e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VqZHZcbQSVYLaoSLB9LuHA.png"/></div></div></figure><p id="56c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您需要输入到“LoadingIcon”文件中的前两段代码如下。</p><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="0e1b" class="jy jz hi ju b fi ka kb l kc kd">import React from 'react';</span><span id="04d3" class="jy jz hi ju b fi kf kb l kc kd">import { ActivityIndicator } from 'react-native';</span></pre><p id="7878" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“从react导入React”——用于将React的功能导入文件。</p><p id="7e2e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“从react-native导入{ ActivityIndicator }”—导入显示循环加载指示器动画的“activity indicator”组件。你可以用不同的颜色和尺寸定制这个动画。</p><p id="ded0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为我们不会在这个文件中使用state，所以我们不需要创建一个类，而是创建一个等于“ActivityIndicator”组件的变量，所以它被称为“无状态组件”。下面是一个例子。</p><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="5680" class="jy jz hi ju b fi ka kb l kc kd"><em class="kg">const</em> LoadingIcon = ({ <em class="kg">isIconAnimating</em> }) <em class="kg">=&gt;</em> &lt;<em class="kg">ActivityIndicator</em> size="large" color="#0000ff" animating={<em class="kg">isIconAnimating</em>} /&gt;;</span></pre><p id="54a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面我已经创建了一个名为“LoadingIcon”的变量，并析构了参数，这样我就不必在组件中引用一个道具之前输入“props”了。</p><p id="38d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我传入了一个“<em class="kg"> isIconAnimating </em>的属性，它等于“ActivityIndicator”组件中的引用方法“Animating”。“动画”是“真”或“假”值，如果为真，活动指示器将显示在屏幕上，但是，如果为假，活动指示器将不显示。</p><p id="eb85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大小方法可以是“小”或“大”或者可以使用数字，但是，使用数字仅在Android上受支持。我更喜欢用“大”。</p><p id="094c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">颜色方法是不言自明的，只定义活动指示器的颜色。</p><p id="d325" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一步是使用下面的代码简单地导出组件。</p><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="0f28" class="jy jz hi ju b fi ka kb l kc kd">export default LoadingIcon;</span></pre><p id="7ee0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为常量“LoadingIcon”是我们导出的唯一函数，所以我们可以在“export”后使用“default”关键字。</p><p id="08df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一步是将“LoadingIcon”函数导入到另一个文件中，并在组件的加载上显示加载图标。</p><p id="c305" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">找到名为“App.js”的组件，它应该包含应用程序的所有默认文本。现在使用下面的代码将你的加载图标导入到这个文件中。</p><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="0dd2" class="jy jz hi ju b fi ka kb l kc kd">import LoadingIcon from './components/LoadingIcon';</span></pre><p id="0c97" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，您应该放弃默认的“App”常量变量和其中的代码，现在用下面的代码替换它。</p><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="edd9" class="jy jz hi ju b fi ka kb l kc kd"><em class="kg">class</em> App extends React.<em class="kg">Component</em>{</span><span id="759b" class="jy jz hi ju b fi kf kb l kc kd"><em class="kg">constructor</em>(<em class="kg">props</em>){</span><span id="bace" class="jy jz hi ju b fi kf kb l kc kd">super(props);</span><span id="d321" class="jy jz hi ju b fi kf kb l kc kd">}</span><span id="132c" class="jy jz hi ju b fi kf kb l kc kd">render(){</span><span id="808b" class="jy jz hi ju b fi kf kb l kc kd">return(</span><span id="110f" class="jy jz hi ju b fi kf kb l kc kd">&lt;<em class="kg">View</em>&gt;</span><span id="71cb" class="jy jz hi ju b fi kf kb l kc kd">&lt;<em class="kg">View</em> style={{justifyContent:'center'}}&gt;</span><span id="21ed" class="jy jz hi ju b fi kf kb l kc kd">&lt;<em class="kg">Text</em> style={{textAlign:'center',color:'black'}}&gt;This is my home page!&lt;/<em class="kg">Text</em>&gt;</span><span id="7c3f" class="jy jz hi ju b fi kf kb l kc kd">&lt;/<em class="kg">View</em>&gt;</span><span id="e939" class="jy jz hi ju b fi kf kb l kc kd">&lt;/<em class="kg">View</em>&gt;</span><span id="c1b0" class="jy jz hi ju b fi kf kb l kc kd">)}<br/>}</span></pre><p id="43b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此加载图标的主要用途之一是在数据等待加载到屏幕上时显示图标，供用户查看，这可能来自网站、数据库或API。对于今天的教程，我将使用一个API作为例子来显示加载图标。这个api是完全免费使用的，你不需要一个API密匙，这个API可以获取我最喜欢的动物之一的随机图像，除了火烈鸟和骆驼…狗！</p><p id="24b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将获取一只狗的随机图像，因此您首先需要从“react-native”导入“image”组件。因此，您的react-native导入现在应该如下所示。</p><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="f26d" class="jy jz hi ju b fi ka kb l kc kd">import {</span><span id="a314" class="jy jz hi ju b fi kf kb l kc kd">SafeAreaView,</span><span id="863b" class="jy jz hi ju b fi kf kb l kc kd">StyleSheet,</span><span id="e63b" class="jy jz hi ju b fi kf kb l kc kd">ScrollView,</span><span id="2cc1" class="jy jz hi ju b fi kf kb l kc kd">View,</span><span id="180e" class="jy jz hi ju b fi kf kb l kc kd">Text,</span><span id="acf6" class="jy jz hi ju b fi kf kb l kc kd">StatusBar,</span><span id="71b4" class="jy jz hi ju b fi kf kb l kc kd">Image</span><span id="eaa6" class="jy jz hi ju b fi kf kb l kc kd">} from 'react-native';</span></pre><p id="bd42" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来将状态添加到组件中(您需要将它添加到构造函数标记中)，您将需要两个状态，一个用于显示图标，另一个用于显示从API返回到image组件中的图像。下面是该状态的一个示例。</p><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="41ca" class="jy jz hi ju b fi ka kb l kc kd">this.state = {</span><span id="3c17" class="jy jz hi ju b fi kf kb l kc kd">iconAnimating:true,</span><span id="4962" class="jy jz hi ju b fi kf kb l kc kd">imageURL:''</span><span id="14f9" class="jy jz hi ju b fi kf kb l kc kd">}</span></pre><p id="5bb3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来添加生命周期组件方法“componentDidMount”。这种生命周期方法是在组件挂载后直接调用/运行的，它只是下面的代码。</p><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="7c25" class="jy jz hi ju b fi ka kb l kc kd">componentDidMount(){</span><span id="a6fb" class="jy jz hi ju b fi kf kb l kc kd">}</span></pre><p id="025c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是我们将编写代码从我们的API获取数据的地方。我们将使用“fetch”来检索这些数据，然后将其转换成json。在函数的“success”部分中，我们将iconAnimating的状态设置为false，这是因为我们希望图标在组件加载时显示，并且只在我们成功从API中检索数据时隐藏，因此我们只会看到加载图标几秒钟，如果我们检索10，000条记录，我们会看到更长时间。</p><p id="1dc9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，我们将状态“imageURL”设置为“jsonResponse.message ”,因为“jsonResponse”是我设置的参数，它将包含从API成功返回的数据。该消息是用于访问返回的图像url的密钥。</p><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="d1bb" class="jy jz hi ju b fi ka kb l kc kd">fetch('https://dog.ceo/api/breeds/image/random')</span><span id="311a" class="jy jz hi ju b fi kf kb l kc kd">.then(<em class="kg">response=&gt;</em>response.json())</span><span id="3c35" class="jy jz hi ju b fi kf kb l kc kd">.then(<em class="kg">jsonResponse=&gt;</em>{</span><span id="35e9" class="jy jz hi ju b fi kf kb l kc kd"><em class="kg">console</em>.log(jsonResponse);</span><span id="0568" class="jy jz hi ju b fi kf kb l kc kd">this.setState({</span><span id="7a1a" class="jy jz hi ju b fi kf kb l kc kd">iconAnimating:false,</span><span id="4ff4" class="jy jz hi ju b fi kf kb l kc kd">imageURL:jsonResponse.message</span><span id="b119" class="jy jz hi ju b fi kf kb l kc kd">});</span><span id="140e" class="jy jz hi ju b fi kf kb l kc kd">})</span><span id="7575" class="jy jz hi ju b fi kf kb l kc kd">.catch(<em class="kg">error=&gt;</em>{</span><span id="c019" class="jy jz hi ju b fi kf kb l kc kd"><em class="kg">console</em>.log("Error loading dog data: " + error);</span><span id="61a2" class="jy jz hi ju b fi kf kb l kc kd">})</span></pre><p id="78f6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想看到“console.log”语句，那么你可以打开你的应用程序的模拟器，方法是在你正在使用的代码编辑器的终端中输入命令“react-native run-ios ”,然后当它打开时，在你的mac上按下“cmd”和“D ”,然后单击“debugging”或“start debugging ”,这将在你的默认浏览器上打开一个标签，你可以在那里检查控制台结果。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kh"><img src="../Images/6a851e49b0752bcc8984f3857e640f31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2n-lnKmdGBqBhHjNklY-KQ.png"/></div></div></figure><p id="d784" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，因为我们现在已经编写了检索数据的方法，所以我们需要使用image组件来显示数据。下面是一个使用图像组件的例子。</p><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="42ab" class="jy jz hi ju b fi ka kb l kc kd">&lt;<em class="kg">Image</em> source={{uri:this.state.imageURL}} style={{width:350,height:300}}/&gt;</span></pre><p id="5f64" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将宽度设置为350，高度设置为300。此外，我们将图像源设置为状态值“imageURL ”,如果您还记得，我们之前将此状态设置为从API返回的URL，因此此URL将显示在图像中，加载图标将在图像显示在模拟器上之前显示。</p><p id="c511" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是我在模拟器上加载应用程序时得到的一个例子！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ki"><img src="../Images/0b08745d5d028c5d143d061b2dd5dbd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:782/format:webp/1*1wy9EpU8X-T22OhuEGqScA.png"/></div></figure><p id="de96" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">希望你从本教程中学到了一些东西，一如既往，我欢迎反馈和/或批评，因为我总是希望提高我的编码和文章写作能力。感谢您阅读本文，祝您愉快:)</p><p id="eac1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你愿意，你可以通过这个链接支持——<a class="ae kj" href="http://buymeacoff.ee/angrycoder95" rel="noopener ugc nofollow" target="_blank">buymeacoff.ee/angrycoder95</a></p></div></div>    
</body>
</html>