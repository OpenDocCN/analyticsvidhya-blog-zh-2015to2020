<html>
<head>
<title>Numeric Scoring Metrics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数字评分指标</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/numeric-scoring-metrics-83a579d12a80?source=collection_archive---------15-----------------------#2020-11-20">https://medium.com/analytics-vidhya/numeric-scoring-metrics-83a579d12a80?source=collection_archive---------15-----------------------#2020-11-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="7c4a" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">为预测模型找到正确的指标</h2></div><p id="b223" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">作者玛瑞·威德曼</em></p><p id="953e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">量化数据有说不完的故事！</p><p id="2628" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">每日收盘价告诉我们股票市场的动态，小型智能电表告诉我们家庭的能源消耗，智能手表告诉我们人体在锻炼时发生了什么，以及关于一些人在某个时间点对某个话题的看法的调查。不同类型的专家可以讲述这些故事:金融分析师、数据科学家、体育科学家、社会学家、心理学家等等。他们的故事基于模型，例如，<a class="ae ju" href="https://en.wikipedia.org/wiki/Regression_analysis" rel="noopener ugc nofollow" target="_blank">回归模型</a>、<a class="ae ju" href="https://en.wikipedia.org/wiki/Time_series" rel="noopener ugc nofollow" target="_blank">时间序列模型</a>和<a class="ae ju" href="https://en.wikipedia.org/wiki/Analysis_of_variance#:~:text=Analysis%2520of%2520variance%2520(ANOVA)%2520is,by%2520the%2520statistician%2520Ronald%2520Fisher." rel="noopener ugc nofollow" target="_blank">方差分析模型</a>。</p><h1 id="69c6" class="jv jw hi bd jx jy jz ka kb kc kd ke kf io kg ip kh ir ki is kj iu kk iv kl km bi translated">为什么需要数字评分指标？</h1><p id="33a4" class="pw-post-body-paragraph ix iy hi iz b ja kn ij jc jd ko im jf jg kp ji jj jk kq jm jn jo kr jq jr js hb bi translated">这些模型在现实世界中有许多后果，从投资组合经理的决策到一天、一周和一年中不同时间的电力定价。需要数字评分指标，以便:</p><ul class=""><li id="5a38" class="ks kt hi iz b ja jb jd je jg ku jk kv jo kw js kx ky kz la bi translated">选择最准确的型号</li><li id="fee5" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated">估计模型误差对现实世界的影响</li></ul><p id="0376" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文中，我们将描述数值预测模型的五个真实用例，在每个用例中，我们从稍微不同的角度来衡量预测准确性。在一种情况下，我们衡量一个模型是否有系统偏差，在另一种情况下，我们衡量一个模型的解释能力。本文最后回顾了数字评分指标，展示了计算它们的公式，并总结了它们的属性。我们还将链接到几个示例实现，用于在<a class="ae ju" href="https://www.knime.com/knime-analytics-platform" rel="noopener ugc nofollow" target="_blank"> KNIME分析平台</a>中构建和评估预测模型。</p><h1 id="5165" class="jv jw hi bd jx jy jz ka kb kc kd ke kf io kg ip kh ir ki is kj iu kk iv kl km bi translated">五个指标:预测准确性的五个不同角度</h1><p id="8eaf" class="pw-post-body-paragraph ix iy hi iz b ja kn ij jc jd ko im jf jg kp ji jj jk kq jm jn jo kr jq jr js hb bi translated"><strong class="iz hj">(根)均方误差，(R)MSE——哪个模型最能捕捉到波动的股票市场的快速变化？</strong></p><p id="5556" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在下面的图1中，你可以看到LinkedIn股票收盘价从2011年到2016年的变化。在该时间段内，行为包括突然的峰值、突然的低点、更长时间的增加和减少值，以及几个稳定期。预测这种不稳定的行为具有挑战性，尤其是从长期来看。然而，对于LinkedIn的利益相关者来说，这是有价值的。因此，我们更喜欢捕捉突然变化的预测模型，而不是在五年内平均表现良好的模型。</p><p id="3012" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们选择具有最低<a class="ae ju" href="https://en.wikipedia.org/wiki/Mean_squared_error" rel="noopener ugc nofollow" target="_blank">(根)均方误差</a>的模型，因为与小误差相比，该指标更重视大误差，并且支持能够对短期变化做出反应并节省利益相关者资金的模型。</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es lg"><img src="../Images/b41e974621545758b581d883259c081a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hpq94J0FSnYn3rQj.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">图一。2011-2016年LinkedIn每日股市收盘价:规律少，突变多，可预测性低的数据。我们选择具有最低(根)均方误差的预测模型，因为它更重视大的预测误差，并且更喜欢捕捉突然的峰值和低点的模型。</figcaption></figure><p id="795b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">平均绝对误差，MAE——哪个模型能最好地估计长期能耗？</strong></p><p id="f08d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在图2中，您可以看到都柏林2009年7月的每小时能耗值，这些值是从一组家庭和行业收集的。能源消耗显示出相对规律的模式，在工作时间和工作日的数值较高，在晚上和周末的数值较低。这种有规律的行为可以相对准确地预测，允许对能源供应进行长期规划。因此，我们选择一个具有最低<a class="ae ju" href="https://en.wikipedia.org/wiki/Mean_absolute_error" rel="noopener ugc nofollow" target="_blank">平均绝对误差</a>的预测模型。我们这样做是因为它对大错误和小错误的权重相等，因此对异常值具有鲁棒性，并显示了在整个时间段内哪个模型具有最高的预测准确性。</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es lg"><img src="../Images/f10a5b2f5e285f3b5b1fe5b4135d9473.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QRVbDCmp8wyamkyn.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">图二。都柏林2009年6月的每小时能耗值，收集自一组家庭和行业。该数据显示了相对有规律的行为，因此可以很容易地进行长期预测。我们选择具有最低平均绝对误差的预测模型，因为这个度量对于异常值是稳健的。</figcaption></figure><p id="2151" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">平均绝对百分比误差，MAPE——不同产品的销售预测模型是否同样准确？</strong></p><p id="dc8b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">炎炎夏日，汽水和冰淇淋的供应都要有保障！我们要检查预测这两种产品销售的两个预测模型是否同样准确。</p><p id="d8d3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这两个模型都以同样的单位——售出商品的数量——进行预测，但规模不同，因为苏打水的销量比冰淇淋大得多。在这种情况下，我们需要一个相对误差指标，我们使用<a class="ae ju" href="https://en.wikipedia.org/wiki/Mean_absolute_percentage_error" rel="noopener ugc nofollow" target="_blank">平均绝对百分比误差</a>，它报告相对于实际值的误差。在图3中，在左侧的线图中，您可以看到2020年6月苏打水的销售额(紫色线)和冰淇淋的销售额(绿色线)以及这两种产品的预测销售额(红色线)。汽水的预测线似乎比冰淇淋偏离得稍微多一点。然而，起泡水的实际值较大，这使可见的比较产生偏差。实际上，预测模型对苏打水的预测比对冰淇淋的预测更好，据MAPE报告，苏打水的预测值为0.191，冰淇淋的预测值为0.369。</p><p id="2d6c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但是请注意，当实际值接近零时，MAPE值可能会有偏差。例如，与夏季相比，冰淇淋在冬季的销量相对较低，而牛奶的销量则全年保持不变。当我们通过MAPE值比较牛奶和冰淇淋预测模型的准确性时，冰淇淋销售额中的小值使得冰淇淋预测模型看起来比牛奶预测模型差得多。</p><p id="1785" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在图3中，在中间的线图中，您可以看到牛奶(蓝线)和冰淇淋(绿线)的销售额以及这两种产品的预测销售额(红线)。如果我们看一下MAPE值，牛奶(MAPE = 0.016)的预测准确度显然比冰淇淋(0.266)好得多。然而，这种巨大的差异是由于冬季月份冰淇淋销售的低价值。图3中右边的线形图显示了冰淇淋和牛奶完全相同的实际和预测销售额，冰淇淋销售额每月增加25件。如果没有接近于零的偏差，冰淇淋(MAPE=0.036)和牛奶(MAPE=0.016)的预测精度现在更加接近。</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es lg"><img src="../Images/6acfb8e96395d21c12bb9dc475a3cad2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*uJp3tb1Xyqcwg8DE.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">图3。三个线图显示了冰淇淋和苏打水(左边的线图)以及冰淇淋和牛奶(中间和右边的线图)的实际值和预测值。在右侧的线图中，冰淇淋销售额按比例增加了25%，以避免小的实际值引起的平均绝对百分比误差偏差。</figcaption></figure><p id="06f9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">平均符号差——一个正在运行的应用程序是否提供了不切实际的期望？</strong></p><p id="fc35" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">智能手表可以连接到一个正在运行的应用程序，该应用程序可以估计10公里跑步的完成时间。有可能，作为一种激励，应用程序估计的时间比实际预期的要低。</p><p id="1d93" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了测试这一点，我们收集了一组跑步者六个月的预计和实际完成时间，并将平均值绘制在图4的线图中。如您所见，在这六个月中，实际完成时间(橙色线)比预计完成时间(红色线)减少得更慢。我们通过计算实际完成时间和估计完成时间之间的<a class="ae ju" href="https://en.wikipedia.org/wiki/Mean_signed_deviation" rel="noopener ugc nofollow" target="_blank">平均符号差</a>来确认估计值中的系统偏差。它是负的(-2.191)，所以这个应用程序确实提出了不切实际的期望！但是，请注意，这个度量并不能提供关于误差大小的信息，因为如果有一个跑步者实际上跑得比预期时间更快，这个正误差会补偿一部分负误差。</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es lg"><img src="../Images/a585b1127396909d71615c5d9140568e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XESOwSwrBJrzVZ6z.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">图4。六个月内10公里跑的预计(红线)和实际(橙线)完成时间。估计时间向下偏移，这也由平均符号差的负值示出。</figcaption></figure><p id="beee" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> R平方——我们多少年的教育可以通过查阅文献来解释？</strong></p><p id="530f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在图5中，你可以看到在一个人口样本中，获得文学(x轴)和教育年数(y轴)之间的关系。对数据拟合线性回归线，以模拟这两个变量之间的关系。为了测量线性回归模型的拟合度，我们使用了<a class="ae ju" href="https://en.wikipedia.org/wiki/Coefficient_of_determination" rel="noopener ugc nofollow" target="_blank"> R平方</a>指标。</p><p id="5e91" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">R-squared表示模型解释了目标列(受教育年限)的多少方差。基于该模型的R平方值0.76，获得文献解释了受教育年限中76%的差异。</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es lg"><img src="../Images/83239acd01f82131fdc45e30b9a2cbc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*j9ZMkFnKRmoCAbZV.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">图5。线性回归线模拟文学作品的获取与受教育年限之间的关系。R-squared用于测量模型拟合度，即目标列(受教育年限)中的方差有多少可以由模型解释，在本例中为76%。</figcaption></figure><h1 id="6ba2" class="jv jw hi bd jx jy jz ka kb kc kd ke kf io kg ip kh ir ki is kj iu kk iv kl km bi translated">五个数字评分指标的回顾</h1><p id="520c" class="pw-post-body-paragraph ix iy hi iz b ja kn ij jc jd ko im jf jg kp ji jj jk kq jm jn jo kr jq jr js hb bi translated">上面介绍的数字评分标准如图6所示。这些指标与用于计算它们的公式以及一些关键属性一起列出。公式中，<em class="jt"> yi </em>为实际值，<em class="jt"> f(xi) </em>为预测值。</p><figure class="lh li lj lk fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es lg"><img src="../Images/2640a78fd45643ff616830d9499a08ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DHmwAy27tydR4ZB9.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">图6。常见的数字评分指标、它们的公式和关键属性。公式中，<em class="lw"> yi </em>为实际值，<em class="lw"> f(xi) </em>为预测值，<em class="lw"> n </em>为样本量。</figcaption></figure><h1 id="e4c7" class="jv jw hi bd jx jy jz ka kb kc kd ke kf io kg ip kh ir ki is kj iu kk iv kl km bi translated">摘要</h1><p id="6153" class="pw-post-body-paragraph ix iy hi iz b ja kn ij jc jd ko im jf jg kp ji jj jk kq jm jn jo kr jq jr js hb bi translated">在本文中，我们介绍了最常用的数字误差度量，以及它们对模型性能的影响。</p><p id="7cac" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">通常建议查看多个数字评分指标，以全面了解模型的性能。例如，通过查看平均符号差，您可以看到您的模型是否有系统偏差，而通过研究(根)均方误差，您可以看到哪个模型最能捕捉到突然的波动。可视化，例如，线形图，补充了模型评估。</p><p id="564e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于实际的实现，请看一下可视化数据科学工具KNIME Analytics Platform中构建的示例工作流。</p><p id="1714" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从KNIME Hub下载并检查这些免费的工作流程:</p><ul class=""><li id="b9c7" class="ks kt hi iz b ja jb jd je jg ku jk kv jo kw js kx ky kz la bi translated"><a class="ae ju" href="https://kni.me/w/ijM45fGpZId_JJd3" rel="noopener ugc nofollow" target="_blank">评估回归模型的性能</a></li><li id="83cc" class="ks kt hi iz b ja lb jd lc jg ld jk le jo lf js kx ky kz la bi translated"><a class="ae ju" href="https://kni.me/w/nRzAJzVATgcqry9h" rel="noopener ugc nofollow" target="_blank">预测和重构时间序列</a></li></ul><p id="c82b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi">— — — — — — — — — -</p><p id="daab" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">正如最初在<a class="ae ju" href="https://thenewstack.io/numeric-scoring-metrics-find-the-right-metric-for-a-prediction-model/" rel="noopener ugc nofollow" target="_blank">发布的新闻标题</a>。</p><p id="3c51" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">通过 Pixabay的特征图像<a class="ae ju" href="https://pixabay.com/photos/ice-cream-summer-cornet-cone-scoop-770994/" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>