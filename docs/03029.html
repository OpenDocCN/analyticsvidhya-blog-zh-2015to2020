<html>
<head>
<title>Using Julia to control LEDs on a Raspberry Pi</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用朱莉娅控制树莓皮上的发光二极管</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/using-julia-to-control-leds-on-a-raspberry-pi-b320be83e503?source=collection_archive---------6-----------------------#2020-01-13">https://medium.com/analytics-vidhya/using-julia-to-control-leds-on-a-raspberry-pi-b320be83e503?source=collection_archive---------6-----------------------#2020-01-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/4f327f0540e5f065c7626d2d3b586229.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QM7DLKnrqZnWOttEO3viHA.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">哈里森·布罗德本特在<a class="ae iu" href="https://unsplash.com/s/photos/raspberry-pi?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="d8e9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你好。如果你正在读这篇文章，你可能想知道如何在树莓Pi上打开和关闭led，不是大家都知道的常用Python，而是Julia。今天，我们将讨论如何通过板载GPIO控制物理对象。我们将首先做一个单个电路，一个LED闪烁，然后是两个电路，两个LED交替闪烁。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jt"><img src="../Images/521bac7292e9c219a975a24dc3140e88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Mn1KQgKBJ4tFvNzxY5VMA.jpeg"/></div></div></figure><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jy"><img src="../Images/5b95591b8eda2053e75e7e8438b0d8a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JfwMcDT9D_tgNxsp17nvXQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">一个电路图，来自维基共享，CC BY-SA下</figcaption></figure></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><h1 id="c326" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">第1章:安装Julia和PiGPIO.jl</h1><p id="39b3" class="pw-post-body-paragraph iv iw hi ix b iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">首先，拿起你的覆盆子酱。打开它并打开终端。一旦你在那里，键入以下内容:</p><pre class="ju jv jw jx fd lj lk ll lm aw ln bi"><span id="b666" class="lo kh hi lk b fi lp lq l lr ls">sudo apt install julia</span></pre><p id="6727" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这应该会为您带来1.0.3版本，对于这种情况已经足够了。(我知道不是最新版本！)完成后，在终端中键入以下命令来启动Julia并安装我们今天将用来摆弄led的PiGPIO包！</p><pre class="ju jv jw jx fd lj lk ll lm aw ln bi"><span id="2f74" class="lo kh hi lk b fi lp lq l lr ls">julia<br/>]add PiGPIO</span></pre><p id="8c22" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦完成，点击删除按钮一次，离开Pkg模式。然后，键入以下命令退出julia。</p><pre class="ju jv jw jx fd lj lk ll lm aw ln bi"><span id="1d49" class="lo kh hi lk b fi lp lq l lr ls">exit()</span></pre><p id="e681" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后，键入以下命令，授予您管理权限，允许您控制GPIO。</p><pre class="ju jv jw jx fd lj lk ll lm aw ln bi"><span id="6d63" class="lo kh hi lk b fi lp lq l lr ls">sudo pigpiod</span></pre><p id="d6d1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，你就可以开始第二章了！</p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><h1 id="5236" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">第2章:单回路</h1><h1 id="aa0a" class="kg kh hi bd ki kj lt kl km kn lu kp kq kr lv kt ku kv lw kx ky kz lx lb lc ld bi translated">步骤1:收集设备</h1><p id="f263" class="pw-post-body-paragraph iv iw hi ix b iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">恭喜你的树莓派安装好了！对于单回路，除了Raspberry Pi之外，您还需要以下设备:</p><ul class=""><li id="f55b" class="ly lz hi ix b iy iz jc jd jg ma jk mb jo mc js md me mf mg bi translated">1个LED</li><li id="ed04" class="ly lz hi ix b iy mh jc mi jg mj jk mk jo ml js md me mf mg bi translated">1个330ω电阻</li><li id="db90" class="ly lz hi ix b iy mh jc mi jg mj jk mk jo ml js md me mf mg bi translated">1块试验板</li><li id="031f" class="ly lz hi ix b iy mh jc mi jg mj jk mk jo ml js md me mf mg bi translated">2根公母跨接电缆</li></ul><p id="70aa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于本实验，必须有一个约330ω的电阻，因为我们需要限制通过电路的电流量。我们绝对不希望大电流破坏我们的电路和设备，不是吗？！</p><h1 id="093c" class="kg kh hi bd ki kj lt kl km kn lu kp kq kr lv kt ku kv lw kx ky kz lx lb lc ld bi translated">步骤2:连接电路</h1><p id="fc39" class="pw-post-body-paragraph iv iw hi ix b iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">现在，如果你仔细观察LED，你可能会注意到它有两条腿，一条比另一条长。嗯，被称为“阳极”的长脚是正极，因此将连接到正电源，而被称为“阴极”的短脚将连接到地。</p><p id="38a1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于此电路，让正极朝向试验板顶部，负极朝向底部。现在，您可以插入LED灯，使灯腿位于不同的行上，较长(正极)的灯腿位于较短灯腿上方的一行上。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mm"><img src="../Images/09f12a40486a3c76ea3ce311e3a5b69e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ibRU3pb_5PxgbmX3r69DsA.jpeg"/></div></div></figure><p id="5642" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，将一个电阻放在一个位置，它的一个引脚与LED的顶部引脚在同一行，而它的另一个引脚位于上一行之上的任意一行。完成后，将两根跳线(阳端)插入与电阻器顶部引脚和LED底部引脚位于同一行的任何孔中。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/a7577724d410cd66e37f486d0e80c11e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ISExTRk4qhTq3e_cx0eyTw.jpeg"/></div></div></figure><p id="8a85" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，您可能想知道我们将跳线的另一端放在哪里？</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mo"><img src="../Images/af853edb0fe18179d07aa433aeddece8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3314R8V6HKbVsmF2ld5tRg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">该图显示了CC BY-SA下来自raspberrypi.org的GPIO端口</figcaption></figure><p id="d1a5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从上图可以看出，这里有很多PGIO端口。但是不要担心——我有你。此时，您的顶部跳线电缆应该是正极电缆，而您的底部电缆应该是组电缆。把你最上面的一个放在任何有“GPIO”的端口上。这里，我将使用端口7进行演示(其GPIO编号为4)。至于底部电缆，你可以把它放在任何你喜欢的地方，只要上面写着“接地”就行。今天，我将为此使用端口6。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mp"><img src="../Images/23ee735039059f7bfd901a3e103bd79e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8MVbnGwcip4iwwZpLgdSug.jpeg"/></div></div></figure><p id="a7b3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在您已经设置好了所有的组件，现在您可以进入第3部分了！</p><h1 id="f75a" class="kg kh hi bd ki kj lt kl km kn lu kp kq kr lv kt ku kv lw kx ky kz lx lb lc ld bi translated">步骤3:运行脚本</h1><p id="f2b7" class="pw-post-body-paragraph iv iw hi ix b iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">现在，打开文件管理器，并转到您想要存储文件的文件夹。然后，右击并选择选项<code class="du mq mr ms lk b">Create New...</code>，然后选择<code class="du mq mr ms lk b">Empty File</code>。命名为<code class="du mq mr ms lk b">led1.jl</code>，完成后点击<code class="du mq mr ms lk b">OK</code>。</p><p id="ac05" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，双击该文件将其打开，并将以下代码粘贴到其中。</p><pre class="ju jv jw jx fd lj lk ll lm aw ln bi"><span id="4efe" class="lo kh hi lk b fi lp lq l lr ls">using PiGPIO<br/><br/>pin = 4 #change this accordingly with your GPIO number<br/>p=Pi()<br/>set_mode(p, pin, PiGPIO.OUTPUT) #changed to OUTPUT mode so that we can control it<br/>try <br/>    for i in 1:10 #how many times the loop is going to run<br/>        PiGPIO.write(p, pin, PiGPIO.ON)<br/>        sleep(0.5) #how long the LED is on each time<br/>        PiGPIO.write(p, pin, PiGPIO.OFF)<br/>        sleep(0.5) #how long the LED is off each time<br/>    end<br/>finally<br/>    println("Cleaning up!")<br/>    set_mode(p, pin, PiGPIO.INPUT) #changed it back to INPUT mode<br/>end</span></pre><p id="3df3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">务必记得用您选择的GPIO号更改GPIO号！完成后点击<code class="du mq mr ms lk b">Save</code>,现在你可以返回终端并键入以下内容。</p><pre class="ju jv jw jx fd lj lk ll lm aw ln bi"><span id="2986" class="lo kh hi lk b fi lp lq l lr ls">julia &lt;path to your file&gt;/led1.jl</span></pre><p id="2972" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du mq mr ms lk b">julia /home/pi/Documents/led1.jl</code></p><p id="275c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">希望你会得到下面的结果！</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mt"><img src="../Images/bf11efd474688c81fb81e3f85033606f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CJfO_HLFmgmwV1-2O1HRtw.jpeg"/></div></div></figure><p id="adbf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在你可以回到你的代码，改变你想要循环运行的次数或者每次循环的开/关时间，或者，如果你觉得勇敢，直接跳到第3章！</p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><h1 id="8b66" class="kg kh hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">第3章:获取两条线路</h1><p id="8d5c" class="pw-post-body-paragraph iv iw hi ix b iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">恭喜你让电路运行起来！现在，让我们把它变得稍微复杂一点，最终目标是让两个led交替点亮。</p><h1 id="b6bb" class="kg kh hi bd ki kj lt kl km kn lu kp kq kr lv kt ku kv lw kx ky kz lx lb lc ld bi translated">步骤1:收集设备(再次！)</h1><p id="0b3c" class="pw-post-body-paragraph iv iw hi ix b iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">这一次，你需要以下设备:</p><ul class=""><li id="09cf" class="ly lz hi ix b iy iz jc jd jg ma jk mb jo mc js md me mf mg bi translated">第2章以上的所有内容…</li><li id="51d6" class="ly lz hi ix b iy mh jc mi jg mj jk mk jo ml js md me mf mg bi translated">1个额外的LED(希望有不同的颜色！我今天将使用蓝色)</li><li id="3445" class="ly lz hi ix b iy mh jc mi jg mj jk mk jo ml js md me mf mg bi translated">1个额外的330ω电阻</li><li id="c0da" class="ly lz hi ix b iy mh jc mi jg mj jk mk jo ml js md me mf mg bi translated">2根额外的公母跨接电缆</li></ul><h1 id="8b93" class="kg kh hi bd ki kj lt kl km kn lu kp kq kr lv kt ku kv lw kx ky kz lx lb lc ld bi translated">步骤2:连接电路</h1><p id="2568" class="pw-post-body-paragraph iv iw hi ix b iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">遵循第1章的相同说明，除了将LED、电阻器和跳线电缆放置在完全不同的位置，同时保持与第2章相同的设置。请记住记下您的GPIO号，因为我们在编写脚本时会用到它！</p><p id="67cf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这就是你的试验板现在应该的样子！</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mu"><img src="../Images/a3181efcaa84ee9a5f1a09735937bb54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y1MbHhVX5lGA0kA_h0ahpA.jpeg"/></div></div></figure><h1 id="da39" class="kg kh hi bd ki kj lt kl km kn lu kp kq kr lv kt ku kv lw kx ky kz lx lb lc ld bi translated">步骤3:运行脚本</h1><p id="0830" class="pw-post-body-paragraph iv iw hi ix b iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">一旦您有了信心，现在就可以开始运行脚本了。该脚本本身与上一个非常相似，只是增加了一些内容。放心吧！</p><p id="4cc2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，打开文件管理器，并转到您想要存储文件的文件夹。然后，右击并选择选项<code class="du mq mr ms lk b">Create New...</code>，然后选择<code class="du mq mr ms lk b">Empty File</code>。命名为<code class="du mq mr ms lk b">led2.jl</code>，完成后点击<code class="du mq mr ms lk b">OK</code>。</p><p id="d865" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，双击该文件将其打开，并将以下代码粘贴到其中。</p><pre class="ju jv jw jx fd lj lk ll lm aw ln bi"><span id="cb78" class="lo kh hi lk b fi lp lq l lr ls">using PiGPIO<br/><br/>pin1 = 4 #change these numbers accordingly with your GPIO numbers<br/>pin2 = 17<br/><br/>p=Pi()<br/><br/>set_mode(p, pin1, PiGPIO.OUTPUT)<br/>set_mode(p, pin2, PiGPIO.OUTPUT)<br/><br/>try <br/>    for i in 1:10 #how many times the loop is going to run<br/>        PiGPIO.write(p, pin1, PiGPIO.ON)<br/>        PiGPIO.write(p, pin2, PiGPIO.OFF)<br/>        sleep(0.5) #the time pin1 is on and pin2 is off<br/>        PiGPIO.write(p, pin1, PiGPIO.ON)<br/>        PiGPIO.write(p, pin2, PiGPIO.OFF)<br/>        sleep(0.5) #the time pin1 is off and pin2 is on<br/>    end<br/>finally<br/>    println("Cleaning up!")<br/>    set_mode(p, pin1, PiGPIO.INPUT)<br/>    set_mode(p, pin2, PiGPIO.INPUT)<br/>end</span></pre><p id="2c12" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">务必记得用您选择的GPIO号更改GPIO号！完成后点击<code class="du mq mr ms lk b">Save</code>,现在你可以返回终端并键入以下内容。</p><pre class="ju jv jw jx fd lj lk ll lm aw ln bi"><span id="c2cc" class="lo kh hi lk b fi lp lq l lr ls">julia &lt;path to your file&gt;/led2.jl</span></pre><p id="b428" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">例如<code class="du mq mr ms lk b">julia /home/pi/Documents/led2.jl</code></p><p id="ebc7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">希望你会得到下面的结果！(我的图像不是gif，所以它不会显示他们交替闪烁，但你明白我的意思！)</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jt"><img src="../Images/521bac7292e9c219a975a24dc3140e88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Mn1KQgKBJ4tFvNzxY5VMA.jpeg"/></div></div></figure><p id="74ff" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在你可以回到你的代码，改变你想要循环运行的次数或者每次循环的开/关时间，就像你在第二章所做的一样。再次祝贺你的led灯闪亮，感谢你的阅读！</p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><p id="1806" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">【参考资料:<br/><a class="ae iu" href="https://www.raspberrypi.org/documentation/usage/gpio/" rel="noopener ugc nofollow" target="_blank">https://www.raspberrypi.org/documentation/usage/gpio/</a><br/><a class="ae iu" href="https://www.instructables.com/id/Control-LED-Using-Raspberry-Pi-GPIO/" rel="noopener ugc nofollow" target="_blank">https://www . instructables . com/id/Control-LED-Using-Raspberry-Pi-GPIO/</a><br/><a class="ae iu" href="https://github.com/JuliaBerry/PiGPIO.jl" rel="noopener ugc nofollow" target="_blank">https://github.com/JuliaBerry/PiGPIO.jl</a></p></div></div>    
</body>
</html>