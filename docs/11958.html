<html>
<head>
<title>MLOps: DevOps fancier cousin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">德沃普斯更好的表亲</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/mlops-devops-fancier-cousin-3b4667e81719?source=collection_archive---------12-----------------------#2020-12-25">https://medium.com/analytics-vidhya/mlops-devops-fancier-cousin-3b4667e81719?source=collection_archive---------12-----------------------#2020-12-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="3274" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们镇上有了一位新警长。DevOps 的老大哥…见见 MLOps。</p><p id="eb81" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ML 模型以实验的形式经历多次迭代，数据科学家在一组数据上训练它们，并在其他数据上测试它们。机器学习操作(MLOps)是创建从开发者到产品的管道的实践。DevOps 关注软件的版本，而 MLOps 关注代码、数据和 ML 模型本身的版本。</p><p id="34d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">目标</strong>:使用完整的监控和再培训管道在生产中部署模型。</p><p id="e34d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">借助 MLOps，我们为 CI/CD 实践添加了两个新范例</p><ol class=""><li id="a3a1" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><strong class="ih hj">持续监控(CM): </strong>一个 ML 系统就像它的预测一样好。由于数据变化、模型漂移和各种其他因素，经过最严格训练的模型可能会变坏。必须为模型保持一定的阈值，并且需要持续监控系统以捕捉这些变化并触发模型再训练管道</li><li id="6eff" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><strong class="ih hj">持续训练(CT) </strong>:一个模型和它被训练的数据一样好。随着时间的推移，输入数据可能会随之改变，这可能会导致错误的预测。该模型可以通过对新获得的数据进行再训练来改进。</li></ol><p id="6958" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> MLOps 管道:</strong></p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es jr"><img src="../Images/1ac1c710ab0e17d0ade297fab41c86e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ASiIB0QX-ZzTXLDLHYSQCQ.png"/></div></div><figcaption class="kd ke et er es kf kg bd b be z dx translated">MLOps 管道</figcaption></figure><p id="0758" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ML 系统的核心在于数据。需要从多个来源收集数据，然后针对 ds 用例进行处理和转换。基于手边的用例，数据收集可以通过多种工具来完成。我使用的一些工具有<a class="ae kh" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj"/></a><strong class="ih hj"/><a class="ae kh" href="https://dask.org/" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">Dask</strong></a><strong class="ih hj"/><a class="ae kh" href="https://spark.apache.org/" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">Spark</strong></a>。</p><p id="7605" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，在收集数据后，数据科学家必须进行实验，以提取相关特征，然后训练模型。必须调整超参数，并使用不同版本的数据迭代进行模型训练，以获得最佳模型。这里有两件事非常重要:数据版本控制和模型版本控制。对于数据版本化，我更喜欢<a class="ae kh" href="https://dvc.org/" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj"/></a>，对于模型版本化，我使用<a class="ae kh" href="https://mlflow.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> MLFlow </strong> </a> <strong class="ih hj">。</strong></p><p id="006d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据提取是一个昂贵的过程，当不同的数据科学团队处理相同的数据以提取相同的特征集时，可能会出现各种各样的问题。为了避免这种情况，使用存储所有最新功能的功能库是可行的。这里一些不错的选项有<a class="ae kh" href="https://feast.dev/" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj"/></a><a class="ae kh" href="https://www.hopsworks.ai/" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">hops works</strong></a>。</p><p id="1244" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上述数据加载和模型工程是作为流水线步骤创建的。可以用来创建这些的一些工作流工具有:<a class="ae kh" href="https://airflow.apache.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">气流</strong> </a>，<a class="ae kh" href="https://www.kubeflow.org/docs/pipelines/overview/pipelines-overview/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> Kubeflow 管道</strong> </a>，<a class="ae kh" href="https://argoproj.github.io/argo/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> Argo 工作流</strong> </a>。</p><p id="d5f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">代码通常存储在 Git 或 Bitbucket 中。对于构建和部署，我使用了一个<a class="ae kh" href="https://www.jenkins.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> Jenkins 管道</strong> </a> <strong class="ih hj">。</strong></p><p id="acbe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个模型可以有很多种不同的服务方式。可以使用 Flask 或 Gunicorn 这样的服务器，在公开 REST Api 端点的同时部署模型。另一种选择是将其部署在 kubernetes pod 中，使用<a class="ae kh" href="https://www.seldon.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj"/></a>或<a class="ae kh" href="https://www.kubeflow.org/docs/components/serving/kfserving/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> KFServing </strong> </a>。对于边缘设备，模型需要嵌入到应用程序本身中。例如，在你的手机上，键盘上的自动更正功能是一个驻留在应用程序中的模型。</p><p id="f67d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后是与监控系统挂钩的再培训管道。对于监控，使用 MLFlow 捕获模型输入、输出和各种其他指标。当模型度量超过某个阈值时，模型再训练管道被触发。</p><p id="9d3a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不仅仅是训练模型，何时停止训练也很重要。对于那些不同意的人，下面这个家伙还在填写他的所得税表格。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es ki"><img src="../Images/b2d2c40807f018ed7a34b03e6ff62586.png" data-original-src="https://miro.medium.com/v2/resize:fit:494/format:webp/1*Aji7jkAANIkFUIeRqbJdjw.png"/></div><figcaption class="kd ke et er es kf kg bd b be z dx translated">XKCD #2265 </figcaption></figure></div></div>    
</body>
</html>