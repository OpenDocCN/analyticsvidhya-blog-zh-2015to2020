<html>
<head>
<title>TensorFlow, Tip-ins, Tableau, R and Python, Oh My!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">张量流，提示，Tableau，R和Python，天啊！</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/tensorflow-tip-ins-tableau-r-and-python-oh-my-3bc90fe50823?source=collection_archive---------16-----------------------#2020-03-03">https://medium.com/analytics-vidhya/tensorflow-tip-ins-tableau-r-and-python-oh-my-3bc90fe50823?source=collection_archive---------16-----------------------#2020-03-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/58d0b8ceee375998d249b473fe736099.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yeesFBgifB9eYFd4v89M1w.png"/></div></div></figure><h1 id="3302" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">TL:DR；</h1><ul class=""><li id="9d7e" class="jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf bi translated">讨论使用RStudio IDE和Rmarkdown/knitter编写一篇文章，演示如何在R和python中并行实现相同的结果。<strong class="jq hj">是的，这是可能的，鉴于惊人的</strong> <code class="du kg kh ki kj b">reticulate</code> <strong class="jq hj">包</strong>傍编织者。</li><li id="2ce2" class="jo jp hi jq b jr kk jt kl jv km jx kn jz ko kb kc kd ke kf bi translated">使用TensorFlow和Keras根据NHL滑冰运动员的击球位置/类型数据来估计射手嵌入。这项工作只是表面的，但展示了一条通过深度学习和详细播放数据实现可能的途径。</li><li id="9e74" class="jo jp hi jq b jr kk jt kl jv km jx kn jz ko kb kc kd ke kf bi translated">演示我们如何通过优秀的python库<code class="du kg kh ki kj b">pantab</code>轻松地将Tableau注入到我们的探索性数据分析工作中，以及我通过<code class="du kg kh ki kj b">pantabR</code>将那个项目简单地移植到R。</li></ul><h1 id="3449" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">概观</h1><p id="f6c4" class="pw-post-body-paragraph kp kq hi jq b jr js kr ks jt ju kt ku jv kv kw kx jx ky kz la jz lb lc ld kb hb bi translated">我喜欢教我的学生如何使用R和python来获取、分析和建模数据。但是不可否认的是，我并不热衷于根据所使用的语言在不同的工具集之间切换。我知道<a class="ae le" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码</a>对python开发人员来说似乎是新事物，但是当开始一个python项目时，我通常会在<a class="ae le" href="https://colab.research.google.com/notebooks/intro.ipynb#recent=true" rel="noopener ugc nofollow" target="_blank"> Google Colaboratory </a>上启动一个新的笔记本来启动我的想法。就我个人而言，我相信笔记本在类似谷歌文档的环境中的好处(例如，评论、访问控制、安装驱动器的能力等。)让学习如何编码比python中的其他传统工具集更容易。</p><p id="f6af" class="pw-post-body-paragraph kp kq hi jq b jr lf kr ks jt lg kt ku jv lh kw kx jx li kz la jz lj lc ld kb hb bi translated">然而，不管我使用哪种语言，最终我更喜欢一种环境来教授我的课程。最近我在博客上写了一些我在使用RStudio作为python 的<a class="ae le" href="https://brocktibert.com/post/python-development-with-rstudio-using-reticulate/" rel="noopener ugc nofollow" target="_blank"> IDE时遇到的问题。因此，我想设计一个能让我真正放松的练习。</a></p><p id="c013" class="pw-post-body-paragraph kp kq hi jq b jr lf kr ks jt lg kt ku jv lh kw kx jx li kz la jz lj lc ld kb hb bi translated">为此，我想在演示几件事情的同时运行一个更大的测试:</p><ul class=""><li id="70ca" class="jo jp hi jq b jr lf jt lg jv lk jx ll jz lm kb kc kd ke kf bi translated">写一个同时包含R和python代码的笔记本的可行性。你可以在这里找到。我使用knitr和Rmarkdown编译了一个文档，该文档在R和python中都使用TensorFlow完成了一个练习。</li><li id="aedd" class="jo jp hi jq b jr kk jt kl jv km jx kn jz ko kb kc kd ke kf bi translated">我想探索为NHL选手(射手)生成<a class="ae le" href="https://www.tensorflow.org/tutorials/text/word_embeddings" rel="noopener ugc nofollow" target="_blank">嵌入</a>的概念。我最近偶然发现了<a class="ae le" href="http://www.sloansportsconference.com/wp-content/uploads/2018/02/1008.pdf" rel="noopener ugc nofollow" target="_blank">(击球手|投手)2vec </a>的工作，并想在NHL中为溜冰者执行一个类似的(但非常基础的)方法，使用“公开”可用的空间播放数据文件。射手嵌入是同时使用R和python构建的。</li></ul><blockquote class="ln lo lp"><p id="f86e" class="kp kq lq jq b jr lf kr ks jt lg kt ku lr lh kw kx ls li kz la lt lj lc ld kb hb bi translated">关于这方面的更多信息，我建议在这里查看我的帖子:<a class="ae le" href="https://brocktibert.com/post/tensorflow-tip-ins-and-tableau-oh-my/" rel="noopener ugc nofollow" target="_blank">https://Brock tibert . com/post/tensor flow-tip-ins-and-tableau-oh-my/</a></p></blockquote><ul class=""><li id="b953" class="jo jp hi jq b jr lf jt lg jv lk jx ll jz lm kb kc kd ke kf bi translated">最后但并非最不重要的是，强调一个简单的路径来轻松地将熊猫或R数据帧移动到Tableau中，以加快项目的视觉探索阶段。是的，我们可以用任何一种语言来探索我们的数据(ggplot2太棒了)，但是，Tableau为新生简化了这个过程，我个人认为该软件使快速探索我们的数据集变得更加容易。简而言之，没有什么可以阻止我们使用Tableau这样的工具来原型化我们的可视化，并将它们移植回R或python，用于我们的报告或应用程序。</li></ul><h1 id="3d82" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">r和Python在同一个文档里？</h1><p id="b97a" class="pw-post-body-paragraph kp kq hi jq b jr js kr ks jt ju kt ku jv kv kw kx jx ky kz la jz lb lc ld kb hb bi translated">为了真正地撰写一篇包含R和python的帖子，我写了一篇专注于代码的博客，演示了2019/20 NHL赛季期间为玩家下载数据、清理和估计射手嵌入的过程。我通过一个利用了<code class="du kg kh ki kj b">reticulate</code>和<code class="du kg kh ki kj b">knitr</code>的RMarkdown文档做到了这一点。</p><p id="8974" class="pw-post-body-paragraph kp kq hi jq b jr lf kr ks jt lg kt ku jv lh kw kx jx li kz la jz lj lc ld kb hb bi translated">这篇文章介绍了如何在R和python中执行相同的操作。</p><p id="2a80" class="pw-post-body-paragraph kp kq hi jq b jr lf kr ks jt lg kt ku jv lh kw kx jx li kz la jz lj lc ld kb hb bi translated">例如，下面是突出显示类似操作的代码块(在原始文档中):</p><pre class="lu lv lw lx fd ly kj lz ma aw mb bi"><span id="1a9e" class="mc ir hi kj b fi md me l mf mg">```{r}<br/># keep shots that were on goal<br/>shots_raw = shots_raw %&gt;% filter(shotWasOnGoal == 1 )<br/>shots_raw = shots_raw %&gt;% filter(shotOnEmptyNet == 0)<br/>shots_raw = shots_raw %&gt;% filter(shooterPlayerId != 0)<br/>shots_raw = shots_raw %&gt;% filter(!is.na(shooterPlayerId))<br/>```</span></pre><p id="bd60" class="pw-post-body-paragraph kp kq hi jq b jr lf kr ks jt lg kt ku jv lh kw kx jx li kz la jz lj lc ld kb hb bi translated">和</p><pre class="lu lv lw lx fd ly kj lz ma aw mb bi"><span id="0de2" class="mc ir hi kj b fi md me l mf mg">```{python}<br/>shots_raw = shots_raw.loc[shots_raw.shotOnEmptyNet == 0, :]<br/>shots_raw = shots_raw.loc[shots_raw.shotWasOnGoal == 1, :]<br/>shots_raw = shots_raw.loc[shots_raw.shooterPlayerId != 0, :]<br/>shots_raw = shots_raw.loc[~shots_raw.shooterPlayerId.isna(), :]<br/>```</span></pre><p id="9772" class="pw-post-body-paragraph kp kq hi jq b jr lf kr ks jt lg kt ku jv lh kw kx jx li kz la jz lj lc ld kb hb bi translated">与我期望大多数用户通过笔记本进行编码的方式类似，我试图在编写文档时通过代码片段进行交互工作。</p><p id="377b" class="pw-post-body-paragraph kp kq hi jq b jr lf kr ks jt lg kt ku jv lh kw kx jx li kz la jz lj lc ld kb hb bi translated">那次<strong class="jq hj"> <em class="lq">差点</em> </strong>成功了。</p><p id="efcb" class="pw-post-body-paragraph kp kq hi jq b jr lf kr ks jt lg kt ku jv lh kw kx jx li kz la jz lj lc ld kb hb bi translated">虽然R代码显然不是问题，但在整个开发过程中的不同时间，我会得到以下错误，如本期所述:</p><div class="mh mi ez fb mj mk"><a href="https://github.com/rstudio/reticulate/issues/494" rel="noopener  ugc nofollow" target="_blank"><div class="ml ab dw"><div class="mm ab mn cl cj mo"><h2 class="bd hj fi z dy mp ea eb mq ed ef hh bi translated">rmarkdown笔记本块中的Python错误显示:评估错误:选项错误具有空值。…</h2><div class="mr l"><h3 class="bd b fi z dy mp ea eb mq ed ef dx translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="ms l"><p class="bd b fp z dy mp ea eb mq ed ef dx translated">github.com</p></div></div><div class="mt l"><div class="mu l mv mw mx mt my io mk"/></div></div></a></div><p id="d629" class="pw-post-body-paragraph kp kq hi jq b jr lf kr ks jt lg kt ku jv lh kw kx jx li kz la jz lj lc ld kb hb bi translated">显然，当试图识别bug时，可再现性是关键，但不幸的是，我并不总是能够系统地再现问题。</p><p id="cbec" class="pw-post-body-paragraph kp kq hi jq b jr lf kr ks jt lg kt ku jv lh kw kx jx li kz la jz lj lc ld kb hb bi translated">然而，如果我的python代码中有一个bug(读:error ),似乎就会发生这种情况。有时，我似乎可以通过删除“坏的”python代码块，重新运行上一个成功的python代码块以获得结果，然后尝试用python重做下一段代码来解决这个问题。然而，这并不总是奏效，坦率地说，这成了一种负担。</p><p id="3827" class="pw-post-body-paragraph kp kq hi jq b jr lf kr ks jt lg kt ku jv lh kw kx jx li kz la jz lj lc ld kb hb bi translated">此外，也许更有趣的是，我发现如果手动执行python块，并且只执行python位，错误似乎不会出现。🤷‍♂️</p><p id="424d" class="pw-post-body-paragraph kp kq hi jq b jr lf kr ks jt lg kt ku jv lh kw kx jx li kz la jz lj lc ld kb hb bi translated">总的来说，即使有上述情况，我实际上对将RStudio用于所有数据科学的可能性印象深刻。虽然在R和python之间交替使用可能不是一个常见的用例，但是很明显这个解决方案正在变得成熟。</p><p id="afaa" class="pw-post-body-paragraph kp kq hi jq b jr lf kr ks jt lg kt ku jv lh kw kx jx li kz la jz lj lc ld kb hb bi translated">要访问我的原始笔记本，请在这里参考<a class="ae le" href="https://gist.github.com/Btibert3/3cc236ca7795664bd67d7b5d17e1e705" rel="noopener ugc nofollow" target="_blank">代码</a>。</p><h1 id="f434" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">Tensorflow:不仅仅针对python用户</h1><p id="3ec5" class="pw-post-body-paragraph kp kq hi jq b jr js kr ks jt ju kt ku jv kv kw kx jx ky kz la jz lb lc ld kb hb bi translated">很明显，RStudio非常努力地将深度学习，更具体地说，Tensorflow移植到r中，首先也是最重要的，文档绝对非常棒。</p><div class="mh mi ez fb mj mk"><a href="https://tensorflow.rstudio.com/" rel="noopener  ugc nofollow" target="_blank"><div class="ml ab dw"><div class="mm ab mn cl cj mo"><h2 class="bd hj fi z dy mp ea eb mq ed ef hh bi translated">R的张量流</h2><div class="mr l"><h3 class="bd b fi z dy mp ea eb mq ed ef dx translated">TensorFlow是一个使用数据流图进行数值计算的开源软件库。图表中的节点…</h3></div><div class="ms l"><p class="bd b fp z dy mp ea eb mq ed ef dx translated">tensorflow.rstudio.com</p></div></div><div class="mt l"><div class="mz l mv mw mx mt my io mk"/></div></div></a></div><p id="26e3" class="pw-post-body-paragraph kp kq hi jq b jr lf kr ks jt lg kt ku jv lh kw kx jx li kz la jz lj lc ld kb hb bi translated">该团队在将pythonic方式映射到熟悉的tidyverse方式方面做得非常好。当然，这不是两种语言之间1:1的翻译，但语法是接近的，总体上是直观的。</p><p id="1339" class="pw-post-body-paragraph kp kq hi jq b jr lf kr ks jt lg kt ku jv lh kw kx jx li kz la jz lj lc ld kb hb bi translated">例如，当处理多个输入/输出时，我们通过一个列表<code class="du kg kh ki kj b">[obj1, obj2]</code>传递python对象，在R中，我们也使用一个列表，尽管它们在结构上非常不同<code class="du kg kh ki kj b">list(obj1, obj2)</code>。</p><p id="34b7" class="pw-post-body-paragraph kp kq hi jq b jr lf kr ks jt lg kt ku jv lh kw kx jx li kz la jz lj lc ld kb hb bi translated">退一步讲，R环境下的TensorFlow是相当惊人的。如果你是一名R程序员，你应该为拥有一条通往深度学习的捷径而感到兴奋。要开始，您应该参考此回购:</p><p id="9ef9" class="pw-post-body-paragraph kp kq hi jq b jr lf kr ks jt lg kt ku jv lh kw kx jx li kz la jz lj lc ld kb hb bi translated">【https://github.com/jjallaire/deep-learning-with-r-notebooks T4】</p><h1 id="790c" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">Tableau摘录</h1><p id="cae8" class="pw-post-body-paragraph kp kq hi jq b jr js kr ks jt ju kt ku jv kv kw kx jx ky kz la jz lb lc ld kb hb bi translated">如上所述，我经常将我的原始数据帧导出到Tableau(通过CSV)以快速浏览我的数据。虽然用任何一种语言执行这项任务都是100%可能的，但在我看来，Tableau加快了我们理解数据集和识别需要纠正的问题的能力。</p><blockquote class="ln lo lp"><p id="9a5f" class="kp kq lq jq b jr lf kr ks jt lg kt ku lr lh kw kx ls li kz la lt lj lc ld kb hb bi translated">早在2013年，我就渴望这样。<a class="ae le" href="https://github.com/Btibert3/tableau-r" rel="noopener ugc nofollow" target="_blank">https://github.com/Btibert3/tableau-r</a></p></blockquote><p id="0a49" class="pw-post-body-paragraph kp kq hi jq b jr lf kr ks jt lg kt ku jv lh kw kx jx li kz la jz lj lc ld kb hb bi translated">例如，我经常使用Tableau来帮助对分类数据进行重新编码，或者对开放式回答进行编码。通过查看Tableau中的数据，事情很简单:</p><ol class=""><li id="5c9a" class="jo jp hi jq b jr lf jt lg jv lk jx ll jz lm kb na kd ke kf bi translated">确定要纠正或重新编码的数据</li><li id="8f40" class="jo jp hi jq b jr kk jt kl jv km jx kn jz ko kb na kd ke kf bi translated">用R/python编写解决方案的脚本</li><li id="95bc" class="jo jp hi jq b jr kk jt kl jv km jx kn jz ko kb na kd ke kf bi translated">用相同的文件名/位置导出数据</li><li id="9dfc" class="jo jp hi jq b jr kk jt kl jv km jx kn jz ko kb na kd ke kf bi translated">在表格内刷新</li><li id="5f1b" class="jo jp hi jq b jr kk jt kl jv km jx kn jz ko kb na kd ke kf bi translated">确认代码的行为符合您的预期</li></ol><p id="d1ac" class="pw-post-body-paragraph kp kq hi jq b jr lf kr ks jt lg kt ku jv lh kw kx jx li kz la jz lj lc ld kb hb bi translated">使用像python的<code class="du kg kh ki kj b">pantab</code>或R的<code class="du kg kh ki kj b">pantabR</code>这样的包，作为分析师，我们可以探索Tableau中的数据，用我们选择的语言修复数据，导出数据，并简单地刷新Tableau中的摘录以查看我们的更改。</p><h1 id="e936" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">摘要</h1><ol class=""><li id="c7cc" class="jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb na kd ke kf bi translated">用R和python同时编写技术文档是可能的，但是有一些<em class="lq">怪癖</em></li><li id="e822" class="jo jp hi jq b jr kk jt kl jv km jx kn jz ko kb na kd ke kf bi translated">R中的张量流太棒了。有一些明显的区别，但是希望我上面链接的代码能够帮助你将python映射到R来完成同样的任务</li><li id="87dd" class="jo jp hi jq b jr kk jt kl jv km jx kn jz ko kb na kd ke kf bi translated">Tableau可以帮助我们加快项目的数据探索阶段，特别是使用python中的<code class="du kg kh ki kj b">pantab</code>和r的衍生工具<code class="du kg kh ki kj b">pantabR</code></li></ol></div></div>    
</body>
</html>