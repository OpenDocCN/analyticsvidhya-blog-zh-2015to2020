<html>
<head>
<title>A short step by step guide on how to approach a dataset</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于如何处理数据集的简短分步指南</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/a-short-step-by-step-guide-on-how-to-approach-a-dataset-333b9f56bebc?source=collection_archive---------31-----------------------#2020-04-11">https://medium.com/analytics-vidhya/a-short-step-by-step-guide-on-how-to-approach-a-dataset-333b9f56bebc?source=collection_archive---------31-----------------------#2020-04-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d72da1a21853ff6833c8f99ccc37d1fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*K0cjfTecDggi1aec"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">奥斯曼·拉纳在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="450d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">作为一个喜欢旅行的人，像Airbnb、Tripadvisor或Hostelworld这样的网站是完美的。除了提供关于您可以旅行的下一个目的地的信息，它们还收集无数的数据，这些数据可用于可视化、分析和无数其他与数据交互的方式。</p><p id="cc1b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本帖中，我们将深入了解波士顿Airbnb房源数据。这一见解的数据来自Airbnb 内部的<a class="ae iu" href="http://insideairbnb.com/get-the-data.html" rel="noopener ugc nofollow" target="_blank">。我们将进一步研究数据集的列表和日历文件。</a></p><p id="e4d7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">清单</strong>由6155行和106个关于主机不同清单的特性组成。</p><p id="bbcf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">日历</strong>由2246575行和7列组成，具有不同日期不同价格的不同列表的特征。</p><p id="dc59" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">简单浏览了一下数据后，我想到的第一个问题是:</p><ul class=""><li id="2463" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">波士顿的Airbnbs的主要价位是什么？</li><li id="f9d3" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">公共假期或季节性会影响价格吗？</li><li id="adb0" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">有可能预测Airbnb的价格吗？</li></ul></div><div class="ab cl kh ki gp kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hb hc hd he hf"><h1 id="ad0a" class="ko kp hi bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">1.波士顿的Airbnbs的主要价位是什么？</h1><p id="934d" class="pw-post-body-paragraph iv iw hi ix b iy lm ja jb jc ln je jf jg lo ji jj jk lp jm jn jo lq jq jr js hb bi translated">回答第一个问题的第一步是好好看看数据。为此，我喜欢使用<em class="lr"> pandas profiling </em>，它使用整个数据框架并创建一个关于一切的统计数据，从概述开始，后面是变量、相关性、缺失值和样本。</p><p id="6c08" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面的gif展示了完整的报告。</p><figure class="ls lt lu lv fd ij"><div class="bz dy l di"><div class="lw lx l"/></div></figure><p id="c75a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在pandas profiler的帮助下获得了数据概览后，就该创建一些图表了。</p><p id="9c14" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">第一张热图只显示了一些影响Airbnb每晚价格的栏目。价格和卧室、价格和可观赏性之间有轻微的正相关关系。</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div class="er es ly"><img src="../Images/325ea4c6730ca37fc09d23b612363b4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*LCOuhDzBot9Peq7Wgve7Kw.png"/></div></figure><p id="1ec1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">价格——卧室、价格——住宿之间的正相关是有道理的。卧室多的房产应该比卧室少的大。较大的房产通常更贵。提到的几点也适用于住宿和浴室。这些结论的一个问题是，邻域没有被计算在内。高收入地区的小公寓通常有较少的卧室，可以容纳较少的人。</p><p id="e00b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了解决上述问题，我们将更深入地研究邻近地区的价格差异。为此，我用leav创建了一个热图，这非常简单。您需要纬度、经度和一个想要用于可视化的参数。在这种情况下，我用了最高的价格。</p><pre class="ls lt lu lv fd lz ma mb mc aw md bi"><span id="fba1" class="me kp hi ma b fi mf mg l mh mi">import folium<br/>from folium.plugins import HeatMap<br/>#the max price will be used as indicator for the color of the heatmap<br/>max_amount = float(boston_df['price'].max())<br/>hmap = folium.Map(location=[42.36, -71.05], zoom_start=12, )<br/>hm_wide = HeatMap( list(zip(boston_df.latitude.values, boston_df.longitude.values, boston_df.price.values)),<br/>                   min_opacity=0.2,<br/>                   max_val=max_amount,<br/>                   radius=17, blur=15, <br/>                   max_zoom=1, <br/>                 )<br/>hmap.add_child(hm_wide)</span></pre><p id="beee" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">正如我们从地图上看到的，列表中最昂贵的房产类型是酒店式公寓、公寓和游艇。除了均价低于250美元的房子之外，普通公寓是最常见的上市房产类型。</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mj"><img src="../Images/e582d6031b518aba46a9f63f0a88146c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K59b5S7IwsB0dGI5V7U4-Q.png"/></div></div></figure></div><div class="ab cl kh ki gp kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hb hc hd he hf"><h1 id="efd2" class="ko kp hi bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">2.公共假期或季节性会影响价格吗？</h1><p id="e207" class="pw-post-body-paragraph iv iw hi ix b iy lm ja jb jc ln je jf jg lo ji jj jk lp jm jn jo lq jq jr js hb bi translated">在看了波士顿房价最有影响力的特征之后，我们想看看日期是否影响价格。</p><p id="a491" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要解决这个问题，我们需要按照月份和年份对每天的列表数据进行分组。分组后，我们用一个简单的柱状图来描绘我们的发现。</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mk"><img src="../Images/80b2c8fc6338b3fead8b49f57fc66ce2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*53cPuYvit5tAgxKfGOyg4w.png"/></div></div></figure><p id="113c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从图表中我们可以看出，2019年2月、3月和12月的冬季月份存在季节性，平均价格低于200美元。该图还显示平均价格在一月和二月开始上升。对于问题的下一部分，我们想知道公众假期对Airbnb价格的影响。为了回答这个问题，我们使用假日套餐。</p><figure class="ls lt lu lv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ml"><img src="../Images/463d5223b6422444550277a5ca488776.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mnQKIORnVzDAZWFmLKVrEA.png"/></div></div></figure><p id="d038" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">正如我们所看到的，大多数节日的价格都在200美元以上，除了圣诞节约为190美元，唯一真正的“异常值”是华盛顿的生日，平均价格为140美元。</p></div><div class="ab cl kh ki gp kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hb hc hd he hf"><h1 id="be14" class="ko kp hi bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">3.有可能预测Airbnb的价格吗？</h1><p id="069f" class="pw-post-body-paragraph iv iw hi ix b iy lm ja jb jc ln je jf jg lo ji jj jk lp jm jn jo lq jq jr js hb bi translated">关于最后一个问题，我们还想在Crisp-DM流程中更进一步。第一个问题回答了业务和数据理解部分，第二个问题让我们更深入地了解数据，并从数据准备流程开始。现在是建模过程和更多数据清理的时候了。</p><p id="8f65" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们要做的第一件事是使用pandas让假人将我们的分类数据编码成数值，以便在建模过程中使用。完成这个过程后，我们可以开始建模。<br/>我们用sklearns train_test_split。我们将数据分为80%的训练数据和20%的测试数据。作为模型性能的衡量标准，我将使用MAE，它将很好地概述我们平均离目标衡量标准有多远。</p><p id="c857" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于建模，我们将创建一个简单的线性回归模型和一个决策树回归器。</p><pre class="ls lt lu lv fd lz ma mb mc aw md bi"><span id="90f5" class="me kp hi ma b fi mf mg l mh mi">from sklearn import tree<br/>from sklearn import metrics</span><span id="e8d4" class="me kp hi ma b fi mm mg l mh mi">dectree = tree.DecisionTreeRegressor(max_depth=5,random_state=0)<br/>dectree= dectree.fit(X_train, y_train)<br/><br/>tree_err = metrics.median_absolute_error(y_test, dectree.predict(X_test))</span></pre><p id="cdd7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将得到44.2的MAE，这意味着我们有44美元的平均差额。</p></div><div class="ab cl kh ki gp kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hb hc hd he hf"><h1 id="b30b" class="ko kp hi bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">结论</h1><p id="a510" class="pw-post-body-paragraph iv iw hi ix b iy lm ja jb jc ln je jf jg lo ji jj jk lp jm jn jo lq jq jr js hb bi translated">让我们简要总结一下我们的发现</p><p id="1d80" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们简要总结一下我们的发现。<br/>波士顿海港或水边的航空旅馆比远离水边的住宿贵。<br/>Airbnb能容纳的浴室、卧室和人越多，成本就越高。<br/>不需要太多预处理和特征选择就可以创建一个模型，其成本非常接近Airbnb。<br/>要找到更多关于代码和其他图表的信息，你可以查看<a class="ae iu" href="https://github.com/Lukas-Forst/Boston_Airbnb_simple" rel="noopener ugc nofollow" target="_blank"> jupyter笔记本</a>。</p><p id="35e5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从<a class="ae iu" href="http://insideairbnb.com/get-the-data.html" rel="noopener ugc nofollow" target="_blank">http://insideairbnb.com/get-the-data.html</a>获取数据</p></div></div>    
</body>
</html>