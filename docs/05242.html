<html>
<head>
<title>List Comprehensions in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的列表理解</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/list-comprehensions-in-python-f6a359dfe607?source=collection_archive---------35-----------------------#2020-04-14">https://medium.com/analytics-vidhya/list-comprehensions-in-python-f6a359dfe607?source=collection_archive---------35-----------------------#2020-04-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/4b4630e57ddaa4aa49ee95b1b8b55d9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Ppz_88d9QRtV4GwX.png"/></div></div></figure><h1 id="d7a4" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">介绍</h1><p id="d549" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">列表理解技术是一种基于特定条件从给定列表中导出新列表的方法。如果你还记得你的高中时代，曾经有一个集合生成器符号的概念。</p><p id="e57e" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">例如，为了表示所有小于50的偶数的数学集合(比如A ),我们可以写</p><p id="2f69" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">A ={ <em class="kr"> x </em> | <em class="kr"> x </em>是一个偶数，<em class="kr">x</em>T23】51 }，如果我们修改第二种记法，写成<strong class="jq hj"><em class="kr">A</em></strong>= { x | x %2 = = 0&amp;x&lt;51 }，这里x % 2表示x模2即x除以2后的余数。</p><p id="18d8" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这里x表示成员自然数</p><p id="f8e8" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">|的意思是</p><p id="652c" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">x&lt;51 is a condition or filter . In mathematical terminology it is called predicate that is a Boolean valued function.</p><p id="d595" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">x before | denotes output that is all x satisfying the condition .</p><p id="8780" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hj">python中的列表理解</strong></p><p id="ee62" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">假设我们有一个列表A = [1，2，3，4，5，6，7，8，9，10]，我们想创建一个包含偶数平方的列表。</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div></figure><ol class=""><li id="6631" class="ky kz hi jq b jr km jv kn jz la kd lb kh lc kl ld le lf lg bi translated"><code class="du lh li lj lk b"><strong class="jq hj">Output expression</strong></code>对成员执行的操作，在本例中为x**2</li><li id="0901" class="ky kz hi jq b jr ll jv lm jz ln kd lo kh lp kl ld le lf lg bi translated"><code class="du lh li lj lk b"><strong class="jq hj">Member</strong></code>是iterable中的对象。在上面的例子中，x作为成员工作。</li><li id="3daa" class="ky kz hi jq b jr ll jv lm jz ln kd lo kh lp kl ld le lf lg bi translated"><code class="du lh li lj lk b"><strong class="jq hj">Iterable</strong></code>任何能逐一返回其元素的物体。它可以是集合、列表、生成器。在我们的例子中，A充当iterable。</li><li id="a0e1" class="ky kz hi jq b jr ll jv lm jz ln kd lo kh lp kl ld le lf lg bi translated"><code class="du lh li lj lk b"><strong class="jq hj">Condition </strong></code>选择成员所依据的规则，可选。在我们的例子中，x%2==0是条件。</li></ol><p id="1de9" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">可以看出，列表理解更具可读性，即声明性。</p><p id="1431" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">定义列表理解的一些一般方法</p><p id="4c0a" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><code class="du lh li lj lk b">output_expression for member in iterable</code></p><p id="145f" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">例如，如果我们想生成一个包含" PYTHON" <code class="du lh li lj lk b">[x for x in 'PYTHON']</code> <br/>字符的列表，输出将是['P '，' Y '，' T '，' H '，' O '，' N']</p><p id="bfcb" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><code class="du lh li lj lk b">output_expression for member in iterable if condition</code></p><p id="86fe" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">如果不是基于特定的条件生成列表，而是想要修改列表的特定元素呢？</p><p id="7a42" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><code class="du lh li lj lk b">output_expression if condition for member in iterable</code></p><p id="0548" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">如果我们看到一个具体的例子，就会更清楚</p><p id="ecf2" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">回忆A = [1，2，3，4，5，6，7，8，9，10]。用“偶数”替换偶数，并保持元素原样。</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="13dd" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hj">嵌套列表理解</strong></p><p id="73bd" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">假设我们有一个数组A= [ [1，21，3]，[7，5，6]，[17，8，9] ]，并希望将此数组展平为类似于[1，21，3，7，5，6，17，8，9]的列表。</p><pre class="ks kt ku kv fd lq lk lr ls aw lt bi"><span id="560d" class="lu ir hi lk b fi lv lw l lx ly">[y <strong class="lk hj">for</strong> x <strong class="lk hj">in</strong> A <strong class="lk hj">for</strong> y <strong class="lk hj">in</strong> x ]</span><span id="deb1" class="lu ir hi lk b fi lz lw l lx ly">#Output<br/>[ 1,21,3, 7,5,6, 17,8,9 ]</span></pre><p id="413f" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">创建矩阵怎么样</p><pre class="ks kt ku kv fd lq lk lr ls aw lt bi"><span id="465f" class="lu ir hi lk b fi lv lw l lx ly">arr = [[m for m in range(3)] for n in range(3)]<br/>print(arr)</span></pre><p id="febd" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">输出将是</p><pre class="ks kt ku kv fd lq lk lr ls aw lt bi"><span id="f75d" class="lu ir hi lk b fi lv lw l lx ly">[[0, 1, 2], [0, 1, 2], [0, 1, 2]]</span></pre><p id="ad1c" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这样我们就可以生成矩阵。请记住，arr的类型仍将被列出。</p><p id="21ff" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">另一个例子可以是得到数组/矩阵的转置。</p><p id="24a8" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">A = [ [1，21，3]、[7，5，6]、[17，8，9] ]</p><pre class="ks kt ku kv fd lq lk lr ls aw lt bi"><span id="215c" class="lu ir hi lk b fi lv lw l lx ly">transpose <strong class="lk hj">=</strong> [[x[i] <strong class="lk hj">for</strong> x <strong class="lk hj">in</strong> A] <strong class="lk hj">for</strong> i <strong class="lk hj">in</strong> range(3)]<br/>print(transpose)</span><span id="d697" class="lu ir hi lk b fi lz lw l lx ly">#Output<br/>[[1, 7, 17], [21, 5, 8], [3, 6, 9]]</span></pre><p id="275f" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hj"> <em class="kr">集合理解</em> </strong>类似于列表理解，只是我们用花括号{}代替了方括号[]。</p><p id="195d" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hj"> <em class="kr">字典理解</em> </strong>作为集合理解工作，稍加修改，需要定义一个键。</p><p id="344c" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">示例<code class="du lh li lj lk b">{x: x **3 for x in A}</code></p><p id="f1dd" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">输出将是{1: 1，21: 9261，3: 27，7: 343，5: 125，6: 216，17: 4913，8: 512，9: 729}</p><p id="6eb0" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">让我们看另一个例子来更熟悉这个概念</p><p id="9614" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><code class="du lh li lj lk b">Team <strong class="jq hj">=</strong></code> <code class="du lh li lj lk b">['India', 'Australia', 'Pakistan']</code></p><p id="ebe7" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><code class="du lh li lj lk b">Player <strong class="jq hj">=</strong></code> <code class="du lh li lj lk b">['Sachin', 'Warne', 'Wasim']</code></p><p id="da19" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">创建一个字典，以团队为键，以玩家为值。</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="5b24" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">希望你明白理解是什么，以及如何实现它。</p></div></div>    
</body>
</html>