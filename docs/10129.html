<html>
<head>
<title>Trapping Rain Water — Day 11(Python)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">收集雨水——第11天(Python)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/trapping-rain-water-day-11-python-4d74045ae35b?source=collection_archive---------6-----------------------#2020-10-06">https://medium.com/analytics-vidhya/trapping-rain-water-day-11-python-4d74045ae35b?source=collection_archive---------6-----------------------#2020-10-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/9da4dfca2dc028d5bd174e2516356c21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nUDkFdUPCF0PX9zH"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">英格·玛利亚在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="823e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">今天我们来看看leetcode的一个难回答的问题。</p><p id="e2d8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://leetcode.com/problems/trapping-rain-water/" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj"> 42 </strong> </a> <strong class="ix hj">。收集雨水</strong></p><p id="b72b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">给定代表高程图的非负整数n，其中每个条形的宽度为1，计算下雨后它可以收集多少水。</p><figure class="jv jw jx jy fd ij er es paragraph-image"><div class="er es ju"><img src="../Images/1b1150755d0e271880a7b10910ce3e83.png" data-original-src="https://miro.medium.com/v2/resize:fit:824/format:webp/0*zUq8IZu2Mwf_sgQX.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">资料来源:Leetcode</figcaption></figure><p id="4dcb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">上面的高程图用数组[0，1，0，2，1，0，1，3，2，1，2，1]表示。在这种情况下，6个单位的雨水(蓝色部分)被截留。</p><p id="be5e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">示例:</strong></p><pre class="jv jw jx jy fd jz ka kb kc aw kd bi"><span id="3a3f" class="ke kf hi ka b fi kg kh l ki kj"><strong class="ka hj">Input:</strong> [0,1,0,2,1,0,1,3,2,1,2,1]<br/><strong class="ka hj">Output:</strong> 6</span></pre><p id="e49b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在研究解决方案之前，让我们先看几个例子。</p><pre class="jv jw jx jy fd jz ka kb kc aw kd bi"><span id="a82b" class="ke kf hi ka b fi kg kh l ki kj"><strong class="ka hj">Input:</strong> [3, 0, 3]<br/><strong class="ka hj">Output:</strong> 3</span></pre><figure class="jv jw jx jy fd ij er es paragraph-image"><div class="er es kk"><img src="../Images/463472bf6bf318eca1cec5cf3427a7bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:630/format:webp/1*BJ2ye-gfoRks76Rewn-4cQ.png"/></div></figure><pre class="jv jw jx jy fd jz ka kb kc aw kd bi"><span id="b262" class="ke kf hi ka b fi kg kh l ki kj"><strong class="ka hj">Input:</strong> [3, 0, 1, 0, 3]<br/><strong class="ka hj">Output:</strong> 8</span></pre><figure class="jv jw jx jy fd ij er es paragraph-image"><div class="er es kl"><img src="../Images/d08b00c176aa029f75aa814e93122c9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*tOefB1oe38DIwaIQyuSp0Q.png"/></div></figure><pre class="jv jw jx jy fd jz ka kb kc aw kd bi"><span id="7590" class="ke kf hi ka b fi kg kh l ki kj"><strong class="ka hj">Input:</strong> [3, 0, 1, 0, 2]<br/><strong class="ka hj">Output:</strong> 5</span></pre><figure class="jv jw jx jy fd ij er es paragraph-image"><div class="er es km"><img src="../Images/1c9698eb68cd2c2e7d4addfc4018a5a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:732/format:webp/1*qSReugVK_uekLM6A-z5lgw.png"/></div></figure><p id="7cd5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一次考虑2个柱状图，柱状图之间的封闭空间就是水量。让我们看看算法。</p><ol class=""><li id="69f5" class="kn ko hi ix b iy iz jc jd jg kp jk kq jo kr js ks kt ku kv bi translated">运行循环，直到遍历了数组中的所有条形。</li></ol><p id="a3f0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.找到当前条左侧的最大值。设这个值为left_max。</p><p id="b36e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.在当前条的右侧找到最大值。设这个值为right_max。</p><p id="b73e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">4.求left_max和right_max之间的最小值。</p><p id="fc32" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">5.从当前条形图中减去最小值。</p><p id="a273" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">6.如果结果值大于0，则将其添加到我们的结果中。因为我们不能有负数量的水被截留，我们忽略它。</p><pre class="jv jw jx jy fd jz ka kb kc aw kd bi"><span id="a65a" class="ke kf hi ka b fi kg kh l ki kj">class RainWaterTrapper:<br/>    def trap(self, height: List[int]) -&gt; int:<br/>        total_water = 0<br/>        for i in range(1, len(height)-1):<br/>            l = max(height[:i])<br/>            r = max(height[i+1:])<br/>            water = min(l, r) - height[i]<br/>            if(water&gt;=0):<br/>                total_water += water<br/>        return total_water</span></pre><p id="dfc7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">复杂性分析。</p><p id="42e8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">时间复杂度</strong></p><p id="eb3b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们正在遍历需要O(N)的完整数组。此外，我们在遍历数组时计算最大值，这需要O(N)。因此时间复杂度是O(N)。</p><p id="557a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">空间复杂度</strong></p><p id="f7a2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因为我们没有使用任何额外的空间，所以空间复杂度是O(1)。</p></div><div class="ab cl kw kx gp ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="hb hc hd he hf"><p id="35e8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们能把算法做得更好吗？</p><p id="9ddb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">每当我们到达一个新的酒吧，我们就不断地计算最大值。我们能预先跟踪最大值吗？我们可以有2个数组来记录左侧和右侧的最大值。</p><ol class=""><li id="5027" class="kn ko hi ix b iy iz jc jd jg kp jk kq jo kr js ks kt ku kv bi translated">为左创建一个数组，为右创建一个数组，都初始化为0。</li><li id="459d" class="kn ko hi ix b iy ld jc le jg lf jk lg jo lh js ks kt ku kv bi translated">对每个条形的左侧和右侧运行循环，记录最大值并将其保存在各自的位置。</li><li id="9779" class="kn ko hi ix b iy ld jc le jg lf jk lg jo lh js ks kt ku kv bi translated">完成上述步骤后，对数组中的每个条形运行循环。</li><li id="9206" class="kn ko hi ix b iy ld jc le jg lf jk lg jo lh js ks kt ku kv bi translated">在左、右中找出最小值，并将其从当前条中减去。包括在总水量中。</li></ol><pre class="jv jw jx jy fd jz ka kb kc aw kd bi"><span id="401a" class="ke kf hi ka b fi kg kh l ki kj">class RainWaterTrapper:<br/>    def trap(self, height: List[int]) -&gt; int:</span><span id="aa62" class="ke kf hi ka b fi li kh l ki kj">        if height == []:<br/>            return 0</span><span id="0748" class="ke kf hi ka b fi li kh l ki kj">        left = [0 for i in range(len(height))]<br/>        right = [0 for i in range(len(height))]<br/>        total_water = 0<br/>        <br/>        left[0] = height[0]<br/>        for i in range(1, len(height)):<br/>            left[i] = max(left[i-1], height[i])<br/>        <br/>        right[-1] = height[-1]<br/>        for i in range(len(height)-2, -1, -1):<br/>            right[i] = max(right[i+1], height[i])<br/>        <br/>        for i in range(len(height)): <br/>            total_water += min(left[i], right[i]) - height[i] <br/>  <br/>        return total_water</span></pre><p id="5390" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">时间复杂度</strong></p><p id="8911" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们正在遍历需要O(N)的完整数组。</p><p id="d1d3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">空间复杂度</strong></p><p id="ec61" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们使用2个额外的N大小的数组来存储最大值，因此空间复杂度为O(N)。</p></div><div class="ab cl kw kx gp ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="hb hc hd he hf"><p id="b9e6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你发现文章中有错误，请告诉我。此外，我想提高我的写作技巧，欢迎任何建议或意见。</p></div></div>    
</body>
</html>