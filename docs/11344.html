<html>
<head>
<title>Essential developer tools for improving your Python code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç”¨äºæ”¹è¿›Pythonä»£ç çš„åŸºæœ¬å¼€å‘å·¥å…·</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/analytics-vidhya/essential-developer-tools-for-improving-your-python-code-71616254134b?source=collection_archive---------9-----------------------#2020-11-30">https://medium.com/analytics-vidhya/essential-developer-tools-for-improving-your-python-code-71616254134b?source=collection_archive---------9-----------------------#2020-11-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/5097726cec363c5a4f265c8c608c8e5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rt_M2_BUE_6RjEKJ"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">ç”±<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šçš„<a class="ae iu" href="https://unsplash.com/@louishansel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Louis Hansel @shotsoflouis </a>æ‹æ‘„çš„ç…§ç‰‡</figcaption></figure><p id="c589" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">åœ¨æˆ‘å¤šå¹´ä½¿ç”¨Pythonä½œä¸ºç¼–ç¨‹è¯­è¨€å¼€å‘è½¯ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘è¶Šæ¥è¶Šå–œæ¬¢ä¸€äº›å¼€å‘å·¥å…·ï¼Œå®ƒä»¬å¯ä»¥å¸®åŠ©æˆ‘ç¼–å†™æ›´å¥½çš„ä»£ç ã€‚ç‰¹åˆ«æ˜¯å½“ä¸å›¢é˜Ÿä¸­çš„å…¶ä»–å¼€å‘äººå‘˜ä¸€èµ·å·¥ä½œæ—¶ï¼Œè¿™äº›å·¥å…·å¯ä»¥ç”¨æ¥åˆ›å»ºç»Ÿä¸€çš„ä»£ç åº“ï¼Œè¿™äº›ä»£ç åº“ç»è¿‡äº†è‰¯å¥½çš„æµ‹è¯•ï¼Œæ›´åŠ å®‰å…¨ï¼Œå¯¹æ‰€æœ‰åˆä½œå¼€å‘äººå‘˜æ¥è¯´éƒ½æ˜¯å¯è¯»çš„ã€‚</p><p id="8722" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†åˆ†äº«æˆ‘å–œæ¬¢çš„å¼€å‘äººå‘˜å·¥å…·ï¼Œå¹¶å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨Gité¢„æäº¤é’©å­åœ¨æ¯æ¬¡Gitæäº¤æˆ–æ¨é€æ“ä½œä¸­è‡ªåŠ¨è¿è¡Œè¿™äº›å·¥å…·ã€‚</p><h2 id="cb79" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">å†…å®¹</h2><ol class=""><li id="9ed1" class="ko kp hi ix b iy kq jc kr jg ks jk kt jo ku js kv kw kx ky bi translated">ä½ ä¸ºä»€ä¹ˆéœ€è¦è¿™äº›å·¥å…·ï¼Ÿ</li><li id="e2ae" class="ko kp hi ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">å·¥å…·</li><li id="f63d" class="ko kp hi ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">ä»£ç æ ·å¼å’Œæ ¼å¼åŒ–å·¥å…·(isortã€Flake8ã€Bugbearã€Blackã€Mypy)</li><li id="fcc4" class="ko kp hi ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">è½¯ä»¶æµ‹è¯•å·¥å…·(Pytestï¼Œcoverage.py)</li><li id="6efb" class="ko kp hi ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">å®‰å…¨å·¥å…·(åœŸåŒªï¼Œå®‰å…¨)</li><li id="738d" class="ko kp hi ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">è‡ªåŠ¨åŒ–(ä½¿ç”¨é¢„æäº¤æŒ‚é’©)</li><li id="48c9" class="ko kp hi ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">å¥–é‡‘</li></ol></div><div class="ab cl le lf gp lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hb hc hd he hf"><h1 id="6707" class="ll ju hi bd jv lm ln lo jz lp lq lr kd ls lt lu kg lv lw lx kj ly lz ma km mb bi translated">ä¸ºä»€ä¹ˆï¼Ÿ</h1><p id="44d6" class="pw-post-body-paragraph iv iw hi ix b iy kq ja jb jc kr je jf jg mc ji jj jk md jm jn jo me jq jr js hb bi translated">ç°åœ¨ä½ å¯èƒ½ä¼šæƒ³:ä¸ºä»€ä¹ˆæˆ‘éœ€è¦æ‰€æœ‰è¿™äº›å·¥å…·ï¼Ÿè€Œæœ€é‡è¦çš„ç­”æ¡ˆæ˜¯:èŠ‚çœæ—¶é—´ã€‚æ‰‹åŠ¨å®Œæˆæ‰€æœ‰è¿™äº›æ£€æŸ¥éœ€è¦å¾ˆå¤šæ—¶é—´(é™¤éä½ æ˜¯å®Œç¾çš„ç¨‹åºå‘˜)ï¼Œä½ å¯ä»¥é€šè¿‡è‡ªåŠ¨åŒ–æ¥èŠ‚çœæ—¶é—´ã€‚æ­¤å¤–ï¼Œç¼–å†™é”™è¯¯ä»£ç ä¼šå¯¼è‡´åœ¨è°ƒè¯•å’Œä¿®å¤é”™è¯¯ä¸Šæµªè´¹æ—¶é—´ã€‚åœ¨å¼€å§‹ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹æˆ‘å°†è®¨è®ºçš„ä¸åŒç±»åˆ«çš„å·¥å…·ã€‚</p><p id="5548" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">ä»£ç é£æ ¼å’Œæ ¼å¼<br/> </em>æ¯«æ— ç–‘é—®ï¼Œä»»ä½•å¼€å‘è€…éƒ½å¯ä»¥äº«å—ä¸€ä¸ªå¯è¯»çš„ã€æ ¼å¼è‰¯å¥½çš„ã€ç»Ÿä¸€çš„ä»£ç åº“ã€‚åœ¨Pythonç”Ÿæ€ç³»ç»Ÿä¸­ï¼Œæœ‰è¿™æ ·ä¸€ä¸ªæ¦‚å¿µï¼Œå³ç¼–å†™ä»£ç æ—¶å……åˆ†åˆ©ç”¨Pythonçš„ä¹ æƒ¯ç”¨æ³•(ä¹Ÿç§°ä¸ºç¼–å†™â€œPythonâ€ä»£ç )ï¼Œæœ€å¥½ç¬¦åˆPython çš„<a class="ae iu" href="https://www.python.org/dev/peps/pep-0020/" rel="noopener ugc nofollow" target="_blank">ç¦…å’Œ</a><a class="ae iu" href="https://pep8.org" rel="noopener ugc nofollow" target="_blank"> PEP 8æ ‡å‡†</a>ã€‚å¯¹äºä»»ä½•å¼€å‘äººå‘˜æ¥è¯´ï¼Œä¸»åŠ¨æ£€æŸ¥è‡ªå·±æˆ–ä»–äººä»£ç çš„ä¸€è‡´æ€§éƒ½æ˜¯ä¸€ä¸ªç›¸å½“ä¹å‘³çš„æŒ‘æˆ˜ã€‚</p><p id="a42c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">è½¯ä»¶æµ‹è¯•</em> <br/>ä½œä¸ºä¸€åå¼€å‘äººå‘˜ï¼Œå½“ä»£ç åº“çš„è½¯ä»¶æµ‹è¯•(ä¾‹å¦‚å•å…ƒæµ‹è¯•)æœ€å¥½åœ¨æ¯æ¬¡ä»£ç å˜æ›´æ—¶è‡ªåŠ¨è¿è¡Œæ—¶ï¼Œæˆ‘å¯¹ä»»ä½•ä»£ç çš„ç»“æœéƒ½æ›´æœ‰ä¿¡å¿ƒã€‚æ­¤å¤–ï¼ŒPythonä¸æ˜¯ä¸€ç§é™æ€ç±»å‹çš„ç¼–ç¨‹è¯­è¨€ï¼Œè¿™ä¸€äº‹å®åœ¨ä¸ä¸»åŠ¨æ£€æŸ¥ç±»å‹å’Œæµ‹è¯•å¤±è´¥çš„æƒ…å†µä¸‹ï¼Œç»™ç¼–å†™æ— é”™è¯¯ä»£ç å¸¦æ¥äº†ä¸€äº›æŒ‘æˆ˜ã€‚</p><p id="ed30" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">å®‰å…¨</em> <br/>å¼€å‘äººå‘˜å¯ä»¥å¾—åˆ°å¸®åŠ©çš„ç¬¬ä¸‰ä¸ªé¢†åŸŸæ˜¯å®‰å…¨é¢†åŸŸã€‚å¤§é‡ä½¿ç”¨å¼€æºè½¯ä»¶åº“æˆ–ç»„ä»¶ä¼šä½¿åº”ç”¨ç¨‹åºå®¹æ˜“å—åˆ°ä½¿ç”¨è¿™äº›åº“æˆ–ç»„ä»¶æ‰€å¸¦æ¥çš„ä»»ä½•å®‰å…¨å¨èƒã€‚å¦‚æœä¸€ä¸ªå¼€å‘è€…è¢«å‘ŠçŸ¥åœ¨ä¸€ä¸ªä¾èµ–çš„è½¯ä»¶åŒ…ä¸­å­˜åœ¨å·²çŸ¥çš„å®‰å…¨æ¼æ´ï¼Œè¿™ä¸æ˜¯å¾ˆé…·å—ï¼Ÿ</p><p id="3a18" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">æ‰€ä»¥æˆ‘ä»¬å°†è¦è®¨è®ºçš„å·¥å…·é›†ä¸­åœ¨ä¸Šé¢æè¿°çš„â€œä»£ç é£æ ¼å’Œæ ¼å¼â€ã€â€œè½¯ä»¶æµ‹è¯•â€æˆ–â€œå®‰å…¨æ€§â€ç±»åˆ«ä¸­çš„ä¸€ä¸ªã€‚æˆ‘ä»¬å¼€å§‹å§ï¼</p></div><div class="ab cl le lf gp lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hb hc hd he hf"><h1 id="88d4" class="ll ju hi bd jv lm ln lo jz lp lq lr kd ls lt lu kg lv lw lx kj ly lz ma km mb bi translated">å·¥å…·</h1><p id="d4f8" class="pw-post-body-paragraph iv iw hi ix b iy kq ja jb jc kr je jf jg mc ji jj jk md jm jn jo me jq jr js hb bi translated"><em class="mf">é¡¹ç›®é…ç½®<br/> </em>å½“ç„¶ï¼Œéœ€è¦è¿›è¡Œä¸€äº›é…ç½®æ¥è°ƒæ•´æ‰€æœ‰å·¥å…·å¹¶åŠ å…¥æˆ–æ’é™¤ä¸€äº›å‚æ•°ã€‚æ¯ä¸ªå·¥å…·éƒ½æœ‰è‡ªå·±çš„ä¸€å¥—é…ç½®å‚æ•°å’Œé…ç½®æ ¼å¼ï¼Œä½†æ˜¯æœ‰ä¸€ç§è¶‹åŠ¿æ˜¯å·¥å…·éƒ½ç¬¦åˆ<code class="du mg mh mi mj b">pyproject.toml</code>æ ¼å¼(æ›´å¤šä¿¡æ¯è§<a class="ae iu" href="https://www.python.org/dev/peps/pep-0518/" rel="noopener ugc nofollow" target="_blank"> PEP 518 </a>)ã€‚å¯¹äºä¸‹é¢çš„æ¯ä¸ªå·¥å…·ï¼Œæˆ‘å°†å°½å¯èƒ½åœ¨<code class="du mg mh mi mj b">pyproject.toml</code>éƒ¨åˆ†æåˆ°ç›¸å…³çš„é…ç½®å‚æ•°ã€‚ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæˆ‘æŠŠæœ€åä¸€ä¸ª<code class="du mg mh mi mj b">pyproject.toml</code>æ”¾åœ¨äº†Githubçš„ä»“åº“é‡Œã€‚</p><p id="38f1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">*æ³¨æ„:ä¸‹é¢ä¾‹å­ä¸­çš„â€˜appâ€™æ–‡ä»¶å¤¹æŒ‡çš„æ˜¯æˆ‘çš„é¡¹ç›®æ–‡ä»¶å¤¹ã€‚</em></p><h1 id="f709" class="ll ju hi bd jv lm mk lo jz lp ml lr kd ls mm lu kg lv mn lx kj ly mo ma km mb bi translated">ä»£ç æ ·å¼å’Œæ ¼å¼</h1><p id="9d50" class="pw-post-body-paragraph iv iw hi ix b iy kq ja jb jc kr je jf jg mc ji jj jk md jm jn jo me jq jr js hb bi translated">å¯¹äºä»£ç é£æ ¼å’Œæ ¼å¼ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯isortã€Flake8ã€Bugbearã€Blackå’ŒMypyã€‚æˆ‘å°†åœ¨ä¸‹é¢è¯¦ç»†è®¨è®ºå®ƒä»¬ã€‚</p><h2 id="f887" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">ä¼Šç´¢ç‰¹</h2><p id="faf8" class="pw-post-body-paragraph iv iw hi ix b iy kq ja jb jc kr je jf jg mc ji jj jk md jm jn jo me jq jr js hb bi translated"><a class="ae iu" href="https://github.com/PyCQA/isort" rel="noopener ugc nofollow" target="_blank"> Githubåº“</a></p><p id="618f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">å®ƒæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ<br/> </em>å®ƒå°†ä½ çš„<code class="du mg mh mi mj b">import</code>è¯­å¥ä»è¿™é‡Œæ’åº:</p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="7e6a" class="jt ju hi mj b fi mx my l mz na">from pytz import timezone<br/>from app.const import NAME<br/><br/>from datetime import datetime as dt</span></pre><p id="fbc7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¯¹æ­¤:</p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="65b4" class="jt ju hi mj b fi mx my l mz na"># Standard library imports<br/>from datetime import datetime as dt<br/><br/># Third party imports<br/>from pytz import timezone<br/><br/># Local application imports<br/>from app.const import NAME</span></pre><p id="aa74" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¾ˆæ¼‚äº®å§ï¼Ÿ</p><p id="bbee" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">é…ç½®</em></p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="688a" class="jt ju hi mj b fi mx my l mz na">[tool.isort]<br/>multi_line_output = 3<br/>include_trailing_comma = true<br/>force_grid_wrap = 0<br/>use_parentheses = true<br/>line_length = 88<br/>skip = []<br/>import_heading_stdlib = 'Standard library imports'<br/>import_heading_thirdparty = 'Third party imports'<br/>import_heading_firstparty = 'Local application imports'<br/>import_heading_localfolder = 'Local folder imports'<br/>known_first_party = ['app']</span></pre><p id="460a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">å¦‚ä½•å®‰è£…è¿è¡Œï¼Ÿ</em></p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="20ee" class="jt ju hi mj b fi mx my l mz na">pip install isort<br/>isort .</span></pre><h2 id="26b7" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">è–„ç‰‡8</h2><p id="9705" class="pw-post-body-paragraph iv iw hi ix b iy kq ja jb jc kr je jf jg mc ji jj jk md jm jn jo me jq jr js hb bi translated"><a class="ae iu" href="https://github.com/PyCQA/flake8" rel="noopener ugc nofollow" target="_blank"> Githubèµ„æºåº“</a></p><p id="7e68" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å®ƒæ˜¯åšä»€ä¹ˆçš„ï¼Ÿ<br/>  Flake8æ˜¯å›´ç»•<a class="ae iu" href="https://github.com/PyCQA/pyflakes" rel="noopener ugc nofollow" target="_blank"> pyflakes </a>ã€<a class="ae iu" href="https://github.com/PyCQA/pycodestyle" rel="noopener ugc nofollow" target="_blank"> pycodestyle </a>å’ŒNed Batchelderçš„<a class="ae iu" href="https://github.com/PyCQA/mccabe" rel="noopener ugc nofollow" target="_blank"> McCabeè„šæœ¬</a>çš„åŒ…è£…å™¨ï¼Œæœ¬è´¨ä¸Šæ£€æŸ¥æ˜¯å¦ç¬¦åˆ<a class="ae iu" href="https://pep8.org" rel="noopener ugc nofollow" target="_blank"> PEP 8 </a>ä»£ç é£æ ¼æ ‡å‡†ã€‚<br/>å¦‚æœæ£€æµ‹åˆ°ä»»ä½•ä¸ç¬¦åˆé¡¹ï¼Œå·¥å…·å°†è¾“å‡ºå¸¦æœ‰é”™è¯¯ä»£ç çš„è­¦å‘Šã€‚ä»¥ä¸‹æ˜¯å®ƒè¾“å‡ºçš„ä¸€äº›é”™è¯¯ç¤ºä¾‹:</p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="8c66" class="jt ju hi mj b fi mx my l mz na">app/main.py:14:7: E111 indentation is not a multiple of four<br/>app/main.py:14:7: E117 over-indented<br/>app/main.py:15:7: E111 indentation is not a multiple of four<br/>app/const.py:1:20: W292 no newline at end of file</span></pre><p id="1736" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">æ³¨æ„:flake8æœ‰å‡ ä¸ªæ‰©å±•å…¶åŠŸèƒ½çš„æ’ä»¶(åŒ…æ‹¬è¿™é‡Œæåˆ°çš„ä¸€äº›å…¶ä»–å·¥å…·ï¼Œä¾‹å¦‚â€œflake8-isortâ€)ï¼Œä½†æ˜¯æˆ‘æ›´å–œæ¬¢å°†è¿™äº›å·¥å…·çš„æ‰§è¡Œåˆ†å¼€ï¼Œè¿™æ ·é…ç½®å’Œæ‰§è¡Œæ›´å®¹æ˜“ã€‚</p><p id="e221" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">é…ç½®<br/> </em> Flake8è¿˜ä¸æ”¯æŒ<code class="du mg mh mi mj b">pyproject.toml</code>é…ç½®<a class="ae iu" href="https://gitlab.com/pycqa/flake8/-/issues/428" rel="noopener ugc nofollow" target="_blank"/>ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code class="du mg mh mi mj b">.flake8</code>é…ç½®æ–‡ä»¶:</p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="4e06" class="jt ju hi mj b fi mx my l mz na">[flake8]<br/>ignore = E203, E266, E501, W503<br/>max-line-length = 88<br/>max-complexity = 18<br/>select = C,E,F,W,B<br/>filename = app/*.py</span></pre><p id="62b2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">æ³¨:<code class="du mg mh mi mj b">B</code>é€‰æ‹©æ˜¯é’ˆå¯¹Bugbearé”™è¯¯ä»£ç çš„ã€‚</p><p id="06e2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">å¦‚ä½•å®‰è£…è¿è¡Œï¼Ÿ</em></p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="8435" class="jt ju hi mj b fi mx my l mz na">pip install flake8<br/>flake8 &lt;project_folder_name&gt;</span></pre><h2 id="a5b5" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">ä½¿äººè¿‡åˆ†å®³æ€•çš„ä¸œè¥¿</h2><p id="e676" class="pw-post-body-paragraph iv iw hi ix b iy kq ja jb jc kr je jf jg mc ji jj jk md jm jn jo me jq jr js hb bi translated"><a class="ae iu" href="https://github.com/PyCQA/flake8-bugbear" rel="noopener ugc nofollow" target="_blank"> Githubåº“</a></p><p id="1307" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">å®ƒæœ‰ä»€ä¹ˆä½œç”¨ï¼ŸBugbearæ˜¯flake8çš„ä¸€ä¸ªæ’ä»¶ï¼ŒåŒ…å«ä¸€äº›ä¸é€‚åˆpyflakesæˆ–pycodestyleçš„é”™è¯¯å’Œè­¦å‘Šè§„åˆ™ã€‚è¿™æ–¹é¢çš„ä¸€ä¸ªä¾‹å­æ˜¯è§„åˆ™B009:</em></p><blockquote class="nb nc nd"><p id="7a0a" class="iv iw mf ix b iy iz ja jb jc jd je jf ne jh ji jj nf jl jm jn ng jp jq jr js hb bi translated">ä¸è¦è°ƒç”¨<code class="du mg mh mi mj b">getattr(x, 'attr')</code>ï¼Œè€Œæ˜¯ä½¿ç”¨æ­£å¸¸çš„å±æ€§è®¿é—®:<code class="du mg mh mi mj b">x.attr</code>ã€‚å¯¹äºä¸å­˜åœ¨çš„å±æ€§ï¼Œç¼ºçœä¸º<code class="du mg mh mi mj b">getattr</code>å°†å¯¼è‡´<code class="du mg mh mi mj b">AttributeError</code>è¢«å¼•å‘ã€‚å¦‚æœæ‚¨äº‹å…ˆçŸ¥é“å±æ€§åï¼Œä½¿ç”¨<code class="du mg mh mi mj b">getattr</code>æ²¡æœ‰é¢å¤–çš„å®‰å…¨æ€§ã€‚</p></blockquote><p id="a495" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">é…ç½®<br/> </em>åªéœ€åœ¨flake8çš„é€‰æ‹©é…ç½®å‚æ•°ä¸­æ·»åŠ <code class="du mg mh mi mj b">B</code>å³å¯ã€‚</p><p id="fc6f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">å¦‚ä½•å®‰è£…è¿è¡Œï¼Ÿ</em></p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="20d3" class="jt ju hi mj b fi mx my l mz na">pip install flake8-bugbear<br/>flake8 &lt;project_folder_name&gt;</span></pre><h2 id="0040" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">é»‘è‰²</h2><p id="3c61" class="pw-post-body-paragraph iv iw hi ix b iy kq ja jb jc kr je jf jg mc ji jj jk md jm jn jo me jq jr js hb bi translated"><a class="ae iu" href="https://github.com/psf/black" rel="noopener ugc nofollow" target="_blank"> Githubèµ„æºåº“</a></p><p id="0cd6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å®ƒæ˜¯åšä»€ä¹ˆçš„ï¼Ÿ<br/>  Blackæ˜¯ä¸€ä¸ª(ç‰›é€¼çš„)åšæŒPEP8(å°½å¯èƒ½)çš„å›ºæ‰§å·±è§çš„ä»£ç æ ¼å¼åŒ–ç¨‹åºã€‚</p><p id="8096" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å®ƒå˜æˆäº†è¿™æ ·:</p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="0d94" class="jt ju hi mj b fi mx my l mz na">def print_hi(name):<br/> date_time = tz.localize(<br/>     dt.now())<br/> print(<br/>     f"Hi, {name} it is currently {date_time}"<br/> )<br/>def   print_hello(<br/>        name<br/>):<br/>  print(<br/>   f"Hello, {name} "<br/>   f"how are you?"<br/>  )</span></pre><p id="dd5f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å˜æˆè¿™æ ·:</p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="b486" class="jt ju hi mj b fi mx my l mz na">def print_hi(name):<br/>    date_time = tz.localize(dt.now())<br/>    print(f"Hi, {name} it is currently {date_time}")<br/><br/><br/>def print_hello(name):<br/>    print(f"Hello, {name} " f"how are you?")</span></pre><p id="cf16" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">âœ¨é­”æ³•ï¼âœ¨</p><p id="e66d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">é…ç½®</em></p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="353a" class="jt ju hi mj b fi mx my l mz na">[tool.black]<br/>line-length = 88<br/>target-version = ['py38']<br/>include = '\.pyi?$'<br/>exclude = '''<br/>/(<br/>    \.eggs          # exclude a few common directories in the<br/>  | \.git           # root of the project<br/>  | \.hg<br/>  | \.mypy_cache<br/>  | \.tox<br/>  | \.venv<br/>  | _build<br/>  | buck-out<br/>  | build<br/>  | dist<br/>  | migrations<br/><br/>  # The following are specific to Black, you probably don't want those.<br/>  | blib2to3<br/>  | tests/data<br/>)/<br/>'''</span></pre><p id="5b33" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">å¦‚ä½•å®‰è£…è¿è¡Œï¼Ÿ</em></p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="56d9" class="jt ju hi mj b fi mx my l mz na">pip install black<br/>black &lt;project_folder_name&gt;</span></pre><h2 id="6873" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">Mypy</h2><p id="b3a7" class="pw-post-body-paragraph iv iw hi ix b iy kq ja jb jc kr je jf jg mc ji jj jk md jm jn jo me jq jr js hb bi translated"><a class="ae iu" href="https://github.com/python/mypy" rel="noopener ugc nofollow" target="_blank"> Githubåº“</a></p><p id="6e91" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å®ƒæ˜¯åšä»€ä¹ˆçš„ï¼Ÿä½¿ç”¨Mypyï¼Œä½ å¯ä»¥å°†ç±»å‹hinst ( <a class="ae iu" href="https://www.python.org/dev/peps/pep-0484/" rel="noopener ugc nofollow" target="_blank"> PEP 484 </a>)æ·»åŠ åˆ°ä½ çš„ä»£ç ä¸­ï¼Œå¹¶æ£€æŸ¥ä½ çš„ä»£ç ä¸­çš„ç±»å‹é”™è¯¯ã€‚</p><p id="69e7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">æœ‰è¶£çš„äº‹å®:Mypyçš„åˆ›é€ è€…Jukka Lehtosaloåœ¨Dropboxä¸Python(å‰å¤šÂ·èŒƒÂ·ç½—è‹å§†)çš„åˆ›é€ è€…åˆä½œå¼€å‘Mypyã€‚æ›´å¤šä¿¡æ¯<a class="ae iu" href="https://dropbox.tech/application/our-journey-to-type-checking-4-million-lines-of-python" rel="noopener ugc nofollow" target="_blank">åœ¨è¿™é‡Œ</a>ã€‚</p><p id="bdad" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">è¿™ç§ç±»å‹é”™è¯¯çš„ä¾‹å­æœ‰:</p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="5397" class="jt ju hi mj b fi mx my l mz na">app/main.py:15: error: Missing return statement<br/>app/main.py:25: error: Argument 1 to "print_hi" has incompatible type "str"; expected "List[str]"<br/>Found 2 errors in 1 file (checked 3 source files)</span></pre><p id="c9ca" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">é…ç½®</em></p><p id="cd89" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Mypyè¿˜ä¸æ”¯æŒ<code class="du mg mh mi mj b">pyproject.toml</code><a class="ae iu" href="https://github.com/python/mypy/issues/5205" rel="noopener ugc nofollow" target="_blank"/>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code class="du mg mh mi mj b">mypy.ini</code>æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«:</p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="46e2" class="jt ju hi mj b fi mx my l mz na">[mypy]<br/>python_version=3.8<br/>platform=linux<br/><br/>files=app/<br/>ignore_missing_imports=true</span></pre><p id="ea0f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">å¦‚ä½•å®‰è£…è¿è¡Œï¼Ÿ</em></p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="1d18" class="jt ju hi mj b fi mx my l mz na">pip install mypy<br/>mypy &lt;project_folder_name&gt;</span></pre><h1 id="9f5e" class="ll ju hi bd jv lm mk lo jz lp ml lr kd ls mm lu kg lv mn lx kj ly mo ma km mb bi translated">è½¯ä»¶æµ‹è¯•</h1><p id="8f6d" class="pw-post-body-paragraph iv iw hi ix b iy kq ja jb jc kr je jf jg mc ji jj jk md jm jn jo me jq jr js hb bi translated">å¯¹äºè½¯ä»¶æµ‹è¯•ï¼Œæˆ‘ä½¿ç”¨Pytestå’Œcoverage.pyã€‚</p><h2 id="1b82" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">Pytest</h2><p id="70ef" class="pw-post-body-paragraph iv iw hi ix b iy kq ja jb jc kr je jf jg mc ji jj jk md jm jn jo me jq jr js hb bi translated"><a class="ae iu" href="https://github.com/pytest-dev/pytest" rel="noopener ugc nofollow" target="_blank"> Githubåº“</a></p><p id="cc20" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">å®ƒæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ<br/> </em> Pytestæ˜¯ä¸€ä¸ªè½¯ä»¶æµ‹è¯•Pythonä»£ç çš„æ¡†æ¶ã€‚æˆ‘æœ€å–œæ¬¢å®ƒçš„ä¸€ä¸ªç‰¹æ€§æ˜¯ï¼Œå®ƒå…è®¸ä½ åˆ›å»ºå¯é‡ç”¨çš„æµ‹è¯•ä»£ç ç‰‡æ®µ(<a class="ae iu" href="https://docs.pytest.org/en/stable/fixture.html" rel="noopener ugc nofollow" target="_blank"> fixtures </a>),è¿™äº›ä»£ç å¯ä»¥è¢«ç»„åˆåœ¨ä¸€ä¸ªæµ‹è¯•ä¸­ã€‚</p><p id="ee31" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">é…ç½®<br/> </em> Pytestæ”¯æŒ<code class="du mg mh mi mj b">pyproject.toml</code>é…ç½®:</p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="7614" class="jt ju hi mj b fi mx my l mz na">[tool.pytest.ini_options]<br/>minversion = "6.0"<br/>addopts = "-ra"<br/>testpaths = [<br/>    "app",<br/>]<br/>python_files = "*_test.py"<br/>junit_family = "legacy"</span></pre><p id="c9b3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">æ³¨æ„:ä»»ä½•æ–‡ä»¶åä»¥</em> <code class="du mg mh mi mj b"><em class="mf">_test.py</em></code> <em class="mf">ç»“å°¾çš„æ–‡ä»¶åœ¨è¿è¡Œpytestæ—¶éƒ½ä¼šè¢«è‡ªåŠ¨æµ‹è¯•ã€‚</em></p><p id="2239" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">å¦‚ä½•å®‰è£…è¿è¡Œï¼Ÿ</em></p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="0cf1" class="jt ju hi mj b fi mx my l mz na">pip install pytest<br/>pytest &lt;project_folder_name&gt;</span></pre><p id="4dd4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">æˆåŠŸæµ‹è¯•çš„è¾“å‡º:</p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="d948" class="jt ju hi mj b fi mx my l mz na">âœ pytest app -ra<br/>===================== test session starts ========================<br/>platform darwin -- Python 3.8.5, ...,  pluggy-0.13.1<br/>rootdir: /, configfile: pyproject.toml, testpaths: app<br/>collected 1 item</span><span id="df9a" class="jt ju hi mj b fi nh my l mz na">app/main_test.py .                                          [100%]</span><span id="55b6" class="jt ju hi mj b fi nh my l mz na">===================== 1 passed in 0.05s ==========================</span></pre><p id="f512" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¤±è´¥æµ‹è¯•çš„è¾“å‡º:</p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="00a9" class="jt ju hi mj b fi mx my l mz na">pytest app -ra<br/>===================== test session starts ========================<br/>platform darwin -- Python 3.8.5, ..., pluggy-0.13.1<br/>rootdir: /, configfile: pyproject.toml, testpaths: app<br/>collected 1 item</span><span id="3d87" class="jt ju hi mj b fi nh my l mz na">app/main_test.py F                                                                                                   [100%]</span><span id="bd71" class="jt ju hi mj b fi nh my l mz na">=========================== FAILURES ==============================<br/>________________________ test_print_hi ____________________________</span><span id="5cb1" class="jt ju hi mj b fi nh my l mz na">capsys = &lt;_pytest.capture.CaptureFixture object at 0x1056d5fa0&gt;</span><span id="1e4a" class="jt ju hi mj b fi nh my l mz na">def test_print_hi(capsys):<br/>        from app.main import print_hi</span><span id="e01d" class="jt ju hi mj b fi nh my l mz na"># Happy flow<br/>        name = "Chris"<br/>        print_hi(name)<br/>        captured = capsys.readouterr()<br/>        assert captured.out.startswith(f"Hi, {name} it is currently")</span><span id="7bad" class="jt ju hi mj b fi nh my l mz na"># Invalid type<br/>        name = 1<br/>&gt;       print_hi(name)</span><span id="369c" class="jt ju hi mj b fi nh my l mz na">app/main_test.py:16:<br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _</span><span id="3bc2" class="jt ju hi mj b fi nh my l mz na">name = 1</span><span id="f5ca" class="jt ju hi mj b fi nh my l mz na">def print_hi(name: str) -&gt; str:<br/>        if not isinstance(name, str):<br/>&gt;           raise TypeError("name is of invalid type")<br/>E           TypeError: name is of invalid type</span><span id="23f0" class="jt ju hi mj b fi nh my l mz na">app/main.py:17: TypeError<br/>===================== short test summary info =====================<br/>FAILED app/main_test.py::test_print_hi - TypeError: name is of invalid type<br/>======================= 1 failed in 0.07s =========================</span></pre><h2 id="ada4" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">Coverage.py</h2><p id="67ae" class="pw-post-body-paragraph iv iw hi ix b iy kq ja jb jc kr je jf jg mc ji jj jk md jm jn jo me jq jr js hb bi translated"><a class="ae iu" href="https://github.com/nedbat/coveragepy" rel="noopener ugc nofollow" target="_blank"> Githubèµ„æºåº“</a></p><p id="6f21" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å®ƒæ˜¯åšä»€ä¹ˆçš„ï¼Ÿä½¿ç”¨coverage.pyæ‚¨å¯ä»¥æµ‹é‡ä»£ç æ‰§è¡Œçš„ç™¾åˆ†æ¯”ï¼Œä¾‹å¦‚åœ¨è¿è¡Œpytestæ—¶ã€‚è¿™äº›åº¦é‡ç»™ä½ ä¸€ä¸ªæŒ‡ç¤ºï¼Œä½ çš„ä»£ç æœ‰å¤šå°‘è¢«è½¯ä»¶æµ‹è¯•è¦†ç›–ã€‚å½“ç„¶ï¼Œè¦†ç›–ç‡å¹¶ä¸èƒ½è¯´æ˜è½¯ä»¶æµ‹è¯•çš„è´¨é‡ã€‚</p><p id="1279" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">é…ç½®</em></p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="7078" class="jt ju hi mj b fi mx my l mz na">[tool.coverage.run]<br/>branch = true<br/>command_line = '-m pytest'<br/>source = ['app/']<br/><br/>[tool.coverage.report]<br/>precision = 2<br/>skip_covered = true<br/>fail_under = 90</span></pre><p id="4f48" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">å¦‚ä½•å®‰è£…è¿è¡Œï¼Ÿ</em></p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="7bf7" class="jt ju hi mj b fi mx my l mz na">pip install coverage[toml]<br/>coverage run<br/>coverage report -m</span></pre><p id="a5ac" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">è¦†ç›–ç‡æŠ¥å‘Šçš„è¾“å‡ºç¤ºä¾‹:</p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="21b3" class="jt ju hi mj b fi mx my l mz na">coverage report -m<br/>Name          Stmts   Miss Branch BrPart     Cover   Missing<br/>------------------------------------------------------------<br/>app/main.py      14      1      6      1    90.00%   24-&gt;25, 25<br/>------------------------------------------------------------<br/>TOTAL            28      1      6      1    94.12%</span><span id="e286" class="jt ju hi mj b fi nh my l mz na">3 files skipped due to complete coverage.</span></pre><h1 id="fd21" class="ll ju hi bd jv lm mk lo jz lp ml lr kd ls mm lu kg lv mn lx kj ly mo ma km mb bi translated">å®‰å…¨æ€§</h1><p id="1e65" class="pw-post-body-paragraph iv iw hi ix b iy kq ja jb jc kr je jf jg mc ji jj jk md jm jn jo me jq jr js hb bi translated">ä¸ºäº†æ£€æŸ¥å®‰å…¨æ¼æ´ï¼Œæˆ‘ä½¿ç”¨äº†Banditå’ŒSafetyã€‚</p><h2 id="fcb6" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">å¼ºç›—</h2><p id="2d3e" class="pw-post-body-paragraph iv iw hi ix b iy kq ja jb jc kr je jf jg mc ji jj jk md jm jn jo me jq jr js hb bi translated"><a class="ae iu" href="https://github.com/PyCQA/bandit" rel="noopener ugc nofollow" target="_blank"> Githubåº“</a></p><p id="48ee" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å®ƒæ˜¯åšä»€ä¹ˆçš„ï¼Ÿ<br/> åœ¨æ‚¨çš„ä»£ç ä¸Šè¿è¡ŒBanditå¯ä»¥è®©æ‚¨è¯†åˆ«å·²çŸ¥çš„å®‰å…¨é—®é¢˜(ä¾‹å¦‚ï¼Œä½¿ç”¨<code class="du mg mh mi mj b">assert</code>è¯­å¥ä½œä¸ºæ£€æŸ¥ï¼Œåœ¨ç¼–è¯‘æˆå­—èŠ‚ç æ—¶ä¼šè¢«åˆ é™¤)ã€‚æ‰€æœ‰æ£€æŸ¥çš„æ¸…å•å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°<a class="ae iu" href="https://bandit.readthedocs.io/en/latest/plugins/index.html#complete-test-plugin-listing" rel="noopener ugc nofollow" target="_blank">ã€‚</a></p><p id="e069" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">é…ç½®</em></p><p id="fb62" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Banditè¿˜ä¸æ”¯æŒ<code class="du mg mh mi mj b">pyproject.toml</code><a class="ae iu" href="https://github.com/PyCQA/bandit/issues/550" rel="noopener ugc nofollow" target="_blank"/>ï¼Œæ‰€ä»¥è¦é…ç½®å®ƒï¼Œå¿…é¡»åœ¨é¡¹ç›®æ–‡ä»¶å¤¹æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code class="du mg mh mi mj b">.bandit</code>æ–‡ä»¶ã€‚</p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="c5a9" class="jt ju hi mj b fi mx my l mz na">[bandit]<br/>targets = app/<br/>recursive = true<br/>skips = B101</span></pre><p id="d5aa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">æ³¨æ„:B101æµ‹è¯•è¢«è·³è¿‡ï¼Œå› ä¸ºå®ƒ(ä¹Ÿ)è§¦å‘</em> <code class="du mg mh mi mj b"><em class="mf">_test.py</em></code> <em class="mf">æ–‡ä»¶ä¸­ä½¿ç”¨çš„æ–­è¨€è¯­å¥ã€‚å½“æ–­è¨€åœ¨æµ‹è¯•æ–‡ä»¶ä¸­æ—¶ï¼Œæœ‰ä¸€ä¸ª</em> <a class="ae iu" href="https://github.com/PyCQA/bandit/issues/346" rel="noopener ugc nofollow" target="_blank"> <em class="mf">è¯·æ±‚</em> </a> <em class="mf">å¿½ç•¥B101ã€‚</em></p><p id="86e2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">å¦‚ä½•å®‰è£…è¿è¡Œï¼Ÿ</em></p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="6bee" class="jt ju hi mj b fi mx my l mz na">pip install bandit<br/>bandit --ini .bandit -r</span></pre><p id="4950" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ç¤ºä¾‹è¾“å‡º:</p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="2134" class="jt ju hi mj b fi mx my l mz na">bandit --ini .bandit -r<br/>[main] INFO Using ini file for skipped tests<br/>[main] INFO Using ini file for selected targets<br/>[main] INFO profile include tests: None<br/>[main] INFO profile exclude tests: None<br/>[main] INFO cli include tests: None<br/>[main] INFO cli exclude tests: B101<br/>[main] INFO running on Python 3.8.5<br/>Run started:2020-11-29 15:27:27.049118</span><span id="7e56" class="jt ju hi mj b fi nh my l mz na">Test results:<br/> No issues identified.</span><span id="e8a2" class="jt ju hi mj b fi nh my l mz na">Code scanned:<br/> Total lines of code: 28<br/> Total lines skipped (#nosec): 0</span><span id="81ae" class="jt ju hi mj b fi nh my l mz na">Run metrics:<br/> Total issues (by severity):<br/>  Undefined: 0.0<br/>  Low: 0.0<br/>  Medium: 0.0<br/>  High: 0.0<br/> Total issues (by confidence):<br/>  Undefined: 0.0<br/>  Low: 0.0<br/>  Medium: 0.0<br/>  High: 0.0<br/>Files skipped (0):</span></pre><h2 id="0b97" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">å®‰å…¨</h2><p id="569d" class="pw-post-body-paragraph iv iw hi ix b iy kq ja jb jc kr je jf jg mc ji jj jk md jm jn jo me jq jr js hb bi translated"><a class="ae iu" href="https://github.com/pyupio/safety" rel="noopener ugc nofollow" target="_blank"> Githubèµ„æºåº“</a></p><p id="80c2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å®ƒæ˜¯åšä»€ä¹ˆçš„ï¼Ÿ<br/> å®ƒæ‰«æä½ å·²å®‰è£…çš„ä¾èµ–é¡¹ï¼Œå¯»æ‰¾å·²çŸ¥çš„å®‰å…¨æ¼æ´ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä½¿ç”¨å¸¦æœ‰å·²çŸ¥æ¼æ´çš„<code class="du mg mh mi mj b">safety-db</code>æ•°æ®åº“ã€‚</p><p id="8f73" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">é…ç½®<br/> </em>è¿è¡Œå®‰å…¨ä¸éœ€è¦è¯¦ç»†é…ç½®ã€‚</p><p id="16a0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">å¦‚ä½•å®‰è£…è¿è¡Œï¼Ÿ</em></p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="e9cc" class="jt ju hi mj b fi mx my l mz na">pip install safety<br/>safety check</span></pre><p id="9656" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ç¤ºä¾‹è¾“å‡º:</p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="d8ea" class="jt ju hi mj b fi mx my l mz na">safety check<br/>+==================================================================+<br/>| REPORT                                                                       |<br/>| checked 50 packages, using default DB                                        |<br/>+==================================================================+<br/>| No known security vulnerabilities found.                                     |<br/>+==================================================================+</span></pre></div><div class="ab cl le lf gp lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hb hc hd he hf"><h1 id="c114" class="ll ju hi bd jv lm ln lo jz lp lq lr kd ls lt lu kg lv lw lx kj ly lz ma km mb bi translated">è‡ªåŠ¨åŒ–</h1><p id="e860" class="pw-post-body-paragraph iv iw hi ix b iy kq ja jb jc kr je jf jg mc ji jj jk md jm jn jo me jq jr js hb bi translated">ä¸ºäº†æœ‰æ•ˆåœ°ä½¿ç”¨ä¸Šè¿°å·¥å…·ï¼Œæˆ‘ä½¿ç”¨<a class="ae iu" href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks" rel="noopener ugc nofollow" target="_blank"> Gité¢„æŒ‚é’©</a>æ¥è‡ªåŠ¨è§¦å‘ä½¿ç”¨<code class="du mg mh mi mj b">pre-commit</code>çš„å·¥å…·ã€‚</p><h2 id="5250" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">é¢„æäº¤</h2><p id="2b61" class="pw-post-body-paragraph iv iw hi ix b iy kq ja jb jc kr je jf jg mc ji jj jk md jm jn jo me jq jr js hb bi translated"><a class="ae iu" href="https://github.com/pre-commit/pre-commit" rel="noopener ugc nofollow" target="_blank"> Githubåº“</a></p><p id="16a5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">å®ƒæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ<br/> </em>è¿™æ˜¯ä¸€ä¸ªç”¨äºé¢„æäº¤é’©å­çš„(å¤šè¯­è¨€)åŒ…ç®¡ç†å™¨ã€‚åœ¨<code class="du mg mh mi mj b">pre-commit</code>é…ç½®ä¸­å®šä¹‰çš„è„šæœ¬å°†åœ¨æ‰§è¡Œ<code class="du mg mh mi mj b">git commit</code>æˆ–<code class="du mg mh mi mj b">git push</code>æ—¶è§¦å‘ã€‚<br/>é¢„æäº¤å…è®¸ä½ é…ç½®è„šæœ¬ä»æœ¬åœ°åŒ…è¿è¡Œï¼Œæˆ–è€…ç›´æ¥ä»å®ƒä»¬çš„ä»“åº“è¿è¡Œé’©å­ã€‚</p><p id="3471" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">ä½¿ç”¨æœ¬åœ°åŒ…<br/> </em>çš„é…ç½®ä¸ºäº†å°†æ‰€æœ‰å·¥å…·é›†æˆåˆ°<code class="du mg mh mi mj b">commit</code>æˆ–<code class="du mg mh mi mj b">push</code>é’©å­ä¸­ï¼Œæˆ‘ä»¬å°†é€šè¿‡åˆ›å»º<code class="du mg mh mi mj b">.pre-commit-config.yaml</code>ä¸º<code class="du mg mh mi mj b">pre-commit</code>æ„å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚</p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="7f0e" class="jt ju hi mj b fi mx my l mz na">repos:<br/>  - repo: local<br/>    hooks:<br/>      - id: isort<br/>        name: isort<br/>        stages: [commit]<br/>        language: system<br/>        entry: isort<br/>        types: [python]<br/>      - id: black<br/>        name: black<br/>        stages: [commit]<br/>        language: system<br/>        entry: black<br/>        types: [python]<br/>      - id: flake8<br/>        name: flake8<br/>        stages: [commit]<br/>        language: system<br/>        entry: flake8<br/>        types: [python]<br/>      - id: mypy<br/>        name: mypy<br/>        stages: [commit]<br/>        language: system<br/>        entry: mypy<br/>        types: [python]<br/>        pass_filenames: false<br/>      - id: bandit<br/>        name: bandit<br/>        stages: [commit]<br/>        language: system<br/>        entry: bandit --ini .bandit -r<br/>        types: [python]<br/>        pass_filenames: false<br/>      - id: pytest<br/>        name: pytest<br/>        stages: [commit]<br/>        language: system<br/>        entry: pytest app -ra<br/>        types: [python]<br/>        pass_filenames: false<br/>      - id: safety<br/>        name: safety<br/>        stages: [commit]<br/>        language: system<br/>        entry: safety check<br/>        types: [python]<br/>        pass_filenames: false<br/>      - id: coverage<br/>        name: coverage<br/>        stages: [push]<br/>        language: system<br/>        entry: coverage run<br/>        types: [python]<br/>        pass_filenames: false</span></pre><p id="7be1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">æ³¨æ„:coverage.pyä¼šåœ¨æ¯ä¸€ä¸ª</em> <code class="du mg mh mi mj b"><em class="mf">git push</em></code> <em class="mf">ä¹‹å‰æ‰§è¡Œï¼Œå…¶ä½™çš„åœ¨ä¸€ä¸ª</em> <code class="du mg mh mi mj b"><em class="mf">git commit</em></code> <em class="mf">ä¹‹å‰æ‰§è¡Œã€‚</em></p><p id="0e9b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">ä½¿ç”¨éæœ¬åœ°å­˜å‚¨åº“çš„é…ç½®<br/> </em>ä½ ä¹Ÿå¯ä»¥åˆ©ç”¨åœ¨çº¿å­˜å‚¨åº“æ¥è·å–é¢„æäº¤é’©å­ã€‚é™¤äº†pytest &amp; coverage.pyä¹‹å¤–çš„æ‰€æœ‰åŒ…éƒ½æä¾›äº†å¯ä»¥ä½¿ç”¨çš„åœ¨çº¿å­˜å‚¨åº“ã€‚</p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="6123" class="jt ju hi mj b fi mx my l mz na">repos:<br/>-   repo: https://github.com/timothycrosley/isort<br/>    rev: 5.6.4<br/>    hooks:<br/>    -   id: isort<br/>-   repo: https://github.com/psf/black<br/>    rev: 20.8b1<br/>    hooks:<br/>    -   id: black<br/>-   repo: https://gitlab.com/pycqa/flake8<br/>    rev: 3.8.4<br/>    hooks:<br/>    -   id: flake8<br/>        additional_dependencies: [flake8-bugbear]<br/>-   repo: https://github.com/pre-commit/mirrors-mypy<br/>    rev: v0.790<br/>    hooks:<br/>    -   id: mypy<br/>-   repo: https://github.com/Lucas-C/pre-commit-hooks-bandit<br/>    rev: v1.0.4<br/>    hooks:<br/>    -   id: python-bandit-vulnerability-check<br/>-   repo: local<br/>    hooks:<br/>    -   id: pytest<br/>        name: pytest<br/>        stages: [commit]<br/>        language: system<br/>        entry: pytest -v --showlocals<br/>        types: [python]<br/>        pass_filenames: false<br/>    -   id: coverage<br/>        name: coverage<br/>        stages: [push]<br/>        language: system<br/>        entry: coverage run<br/>        types: [python]<br/>        pass_filenames: false<br/>-   repo: https://github.com/Lucas-C/pre-commit-hooks-safety<br/>    rev: v1.1.3<br/>    hooks:<br/>    -   id: python-safety-dependencies-check</span></pre><p id="8a15" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">å¦‚ä½•å®‰è£…ï¼Ÿ</em></p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="21f7" class="jt ju hi mj b fi mx my l mz na">pip install pre-commit<br/>pre-commit install<br/>pre-commit install --hook-type pre-push</span></pre><p id="70be" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">æ³¨æ„:ç¬¬ä¸€æ¡å‘½ä»¤å®‰è£…</em><code class="du mg mh mi mj b"><em class="mf">pre-commit</em></code><em class="mf">ï¼›ç¬¬äºŒä¸ªå‘½ä»¤å®‰è£…gité¢„æäº¤æŒ‚é’©&amp;ç¬¬ä¸‰ä¸ªå‘½ä»¤å®‰è£…é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„gité¢„æ¨é€æŒ‚é’©ã€‚</em></p><p id="5e17" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">æ€ä¹ˆè·‘ï¼Ÿ<br/> </em>å®‰è£…é¢„æäº¤å’Œé¢„æ¨é€æŒ‚é’©åï¼Œå·¥å…·å°†åœ¨æ¯æ¬¡æäº¤å’Œæ¨é€è‡³gitå­˜å‚¨åº“æ—¶è¢«è§¦å‘ã€‚<br/>æ‚¨å¯ä»¥é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ‰‹åŠ¨è§¦å‘é¢„æäº¤æŒ‚é’©(ä¾‹å¦‚ç”¨äºæµ‹è¯•ç›®çš„):</p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="1d12" class="jt ju hi mj b fi mx my l mz na">pre-commit run --all-files</span></pre><p id="3334" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ç¤ºä¾‹è¾“å‡º:</p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="5044" class="jt ju hi mj b fi mx my l mz na">âœ pre-commit run --all-files<br/>isort.........................................................Passed<br/>black.........................................................Passed<br/>flake8........................................................Passed<br/>mypy..........................................................Passed<br/>bandit........................................................Passed<br/>pytest........................................................Passed<br/>safety........................................................Passed</span></pre><p id="1f54" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å½“<code class="du mg mh mi mj b">isort</code>æˆ–<code class="du mg mh mi mj b">black</code>åœ¨æ—æŒºæ—¶ä¿®æ”¹æ–‡ä»¶æ—¶ï¼Œä¼šå‡ºç°ä¸€ä¸ªé”™è¯¯:</p><pre class="mp mq mr ms fd mt mj mu mv aw mw bi"><span id="59a2" class="jt ju hi mj b fi mx my l mz na">â‡£5% âœ pre-commit run --all-files<br/>isort....................................................................Failed<br/>- hook id: isort<br/>- files were modified by this hook</span><span id="a34e" class="jt ju hi mj b fi nh my l mz na">Fixing /Users/chris/Code/C01/developer-tools/app/main.py</span><span id="6d2b" class="jt ju hi mj b fi nh my l mz na">black.........................................................Passed<br/>flake8........................................................Passed<br/>mypy..........................................................Passed<br/>bandit........................................................Passed<br/>pytest........................................................Failed<br/>- hook id: pytest<br/>- files were modified by this hook</span><span id="a169" class="jt ju hi mj b fi nh my l mz na">====================== test session starts =========================<br/>platform darwin -- Python 3.8.5, ... -- /bin/python<br/>cachedir: .pytest_cache<br/>rootdir: /, configfile: pyproject.toml, testpaths: app<br/>collected 1 item</span><span id="3fa6" class="jt ju hi mj b fi nh my l mz na">app/main_test.py::test_print_hi PASSED                                   [100%]</span><span id="abf6" class="jt ju hi mj b fi nh my l mz na">====================== 1 passed in 0.03s ===========================</span><span id="f40a" class="jt ju hi mj b fi nh my l mz na">safety........................................................Passed</span></pre><p id="f10a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">é‡æ–°æ‰§è¡Œé’©å­å°†æ¸…é™¤å¤±è´¥(åœ¨ä¹‹å‰çš„è¿è¡Œä¸­ä¿®æ”¹äº†æ–‡ä»¶)ã€‚</p><p id="8b66" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mf">æ³¨æ„:å¦‚æœæ‚¨æƒ³åœ¨æäº¤æˆ–æ¨é€æ—¶è·³è¿‡è¿è¡Œé¢„æäº¤é’©å­ï¼Œæ‚¨å¯ä»¥é€šè¿‡å°†</em> <code class="du mg mh mi mj b"><em class="mf">--no-verify</em></code> <em class="mf">æ·»åŠ åˆ°</em> <code class="du mg mh mi mj b"><em class="mf">git commit</em></code> <em class="mf">æˆ–</em> <code class="du mg mh mi mj b"><em class="mf">git push</em></code> <em class="mf">å‘½ä»¤ä¸­æ¥å®ç°ã€‚</em></p></div><div class="ab cl le lf gp lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hb hc hd he hf"><h1 id="d515" class="ll ju hi bd jv lm ln lo jz lp lq lr kd ls lt lu kg lv lw lx kj ly lz ma km mb bi translated">å¥–é‡‘</h1><p id="c8b4" class="pw-post-body-paragraph iv iw hi ix b iy kq ja jb jc kr je jf jg mc ji jj jk md jm jn jo me jq jr js hb bi translated">ä¸ºäº†è®©ä½ å¿«é€Ÿå…¥é—¨ï¼Œæˆ‘å·²ç»ç¼–å†™äº†è¿™ä¸ª Pythonæ¡†æ¶ï¼ŒåŒ…æ‹¬ä¸Šé¢æè¿°çš„æ‰€æœ‰å·¥å…·ã€‚æ‚¨å¯ä»¥é€šè¿‡å…‹éš†å­˜å‚¨åº“å¹¶éµå¾ª<code class="du mg mh mi mj b">README.md</code>æ¥æµ‹è¯•å®ƒã€‚ç¥ä½ æ£€æŸ¥çš„æ„‰å¿«ï¼</p><p id="6076" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ä½ å·²ç»åˆ°è¾¾ç»ˆç‚¹äº†ï¼å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä¼šå¾ˆæ„Ÿæ¿€é¼“æŒğŸ‘ã€‚</p><p id="bce5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ä½ çŸ¥é“ä»»ä½•å…¶ä»–çš„å·¥å…·ä¼šæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è¡¥å……æˆ–è®¤ä¸ºè¿™ç¯‡æ–‡ç« å¯ä»¥æ”¹è¿›å—ï¼Ÿä¹Ÿè¯·è®©æˆ‘çŸ¥é“ï¼</p></div></div>    
</body>
</html>