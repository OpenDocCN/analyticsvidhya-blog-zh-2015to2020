<html>
<head>
<title>Installing Darknet on Windows</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Windows上安装Darknet</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/installing-darknet-on-windows-462d84840e5a?source=collection_archive---------1-----------------------#2019-11-18">https://medium.com/analytics-vidhya/installing-darknet-on-windows-462d84840e5a?source=collection_archive---------1-----------------------#2019-11-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="86bf" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">语境</h1><p id="83fe" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">什么是暗网？对于那些不熟悉的人，Darknet是一个开源框架，它以卷积神经网络的形式支持对象检测和图像分类任务。Darknet主要以其YOLO算法(你只需看一次)的实现而闻名，该算法在实时对象检测方面展示了最先进的性能。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kb"><img src="../Images/6f8a8ea663eeeeb1e43cb950f2da6cef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aFeEgXtb0ar-Zrxujmu1oA.png"/></div></div><figcaption class="kn ko et er es kp kq bd b be z dx translated">来自<a class="ae kr" href="https://pjreddie.com/darknet/yolo/" rel="noopener ugc nofollow" target="_blank">https://pjreddie.com/darknet/yolo/</a>的YOLOv3物体检测示例</figcaption></figure><p id="c1da" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">如果您想在网络摄像头或视频记录上创建实时对象检测模型，您可能需要考虑使用这个框架中的YOLOv3算法。话虽如此，说到这篇文章的主要目的。</p><p id="6f1f" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">任何拥有Windows PC的人都知道，设置应用程序和开发环境是一件痛苦的事情。我想从我在Windows 10笔记本电脑上安装Darknet的个人经历中提供一些建议。</p><p id="b5ce" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">首先，<strong class="jf hj">请按照正确的顺序安装应用</strong>。当我说如果你不遵守这条黄金法则，那将会是一场噩梦，这是我的经验之谈。另外，这是我对安装darknet的建议，可能对你有用，也可能没用。完全免责声明。</p><p id="67f1" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">Darknet最初的GitHub库是<a class="ae kr" href="https://github.com/pjreddie/darknet" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj">这里是</strong></a>；然而，我们将使用AlexeyAB的<a class="ae kr" href="https://github.com/AlexeyAB/darknet" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj">版本</strong> </a>，它是Darknet的精确副本，具有额外的Windows支持。</p><h1 id="15fd" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">要求</h1><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kx"><img src="../Images/65aabb8a35af80da6816009856101fec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fgj5-Xn0kCvMswSBwWotqQ.png"/></div></div><figcaption class="kn ko et er es kp kq bd b be z dx translated">暗网要求取自<a class="ae kr" href="https://github.com/AlexeyAB/darknet" rel="noopener ugc nofollow" target="_blank">https://github.com/AlexeyAB/darknet</a></figcaption></figure><p id="d485" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">我假设你有一个计算兼容版本高于3.0的GPU。(检查你的GPU是否擅长这个<a class="ae kr" href="https://en.wikipedia.org/wiki/CUDA#GPUs_supported" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj">环节</strong> </a>。)</p><h1 id="f6e7" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">第一步是OpenCV</h1><p id="6809" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">OpenCV对我来说是一场噩梦，但希望它不会成为你的痛苦。我用这个<a class="ae kr" href="https://www.learnopencv.com/install-opencv-4-on-windows/" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj">教程</strong> </a>得到了OpenCV4。我将给出一个简单的介绍和一些建议。</p><p id="9f71" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">在下载Visual Studio 2017之前，请检查您的电脑是否已经安装了Visual Studio 2019。这将影响您2017年的安装，因为由于您的电脑上存在更新的可再发行软件，2017年的<strong class="jf hj"> Microsoft Visual C++可再发行软件</strong>将不会下载。(2019款)。所以我的建议是<strong class="jf hj">卸载Visual Studio 2019 </strong>并验证2019可再发行软件是否仍然存在于你<strong class="jf hj">电脑的程序和功能中。如果是，那么请卸载2019年的x86和x64版本将修复这个问题。</strong></p><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="er es ky"><img src="../Images/f0c48b5b62ff23e6fecafaa86e44c808.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/1*h6Ke-Y_kTequr1VvSwOv_g.png"/></div><figcaption class="kn ko et er es kp kq bd b be z dx translated">在VS Studio 2017下载后验证您是否拥有这些</figcaption></figure><p id="cbed" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">记住将CMake添加到您的系统路径中。如果您忘记这样做，您可以在环境变量中将<strong class="jf hj">{ CMAKE文件夹的位置}\bin </strong>添加到您的系统路径中。CMake路径的一个例子是<strong class="jf hj">C:\ Program Files \ CMake \ bin</strong>。如果您不知道如何编辑系统路径，请参考此<a class="ae kr" href="https://www.architectryan.com/2018/03/17/add-to-the-path-on-windows-10/" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj">链接</strong> </a>。</p><p id="e016" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">同样，如果您忘记将Anaconda添加到您的系统路径，只需将<strong class="jf hj">{ Anaconda文件夹的位置}\Scripts </strong>添加到您的系统路径。例如<strong class="jf hj"> D:\Anaconda3\Scripts </strong>。</p><p id="e546" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">教程中提供的代码只能通过注册作者的时事通讯获得。所以当你看到下面的弹出窗口时，请点击“下载代码”并注册。你不需要支付任何费用，你可以在得到你需要的东西后诚实地退订。我不认识作者，也不想推销他的时事通讯，但是，这可以节省大量时间。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kz"><img src="../Images/925498c81baa1d8e1bd8c0812a1b4efb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4ZoJZb67YTVQUlRy1rc0FQ.png"/></div></div><figcaption class="kn ko et er es kp kq bd b be z dx translated">访问教程中的安装脚本</figcaption></figure><p id="4452" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">我用不同的安装指南试了两天，所以当我说它是救命稻草时，请相信我。一旦您测试出OpenCV4正在工作，恭喜您通过了安装过程中最困难的部分！</p><h1 id="95fe" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">第二步是CUDA</h1><p id="1280" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我会让你的生活变得非常简单。点击此<a class="ae kr" href="https://developer.nvidia.com/cuda-10.0-download-archive?target_os=Windows&amp;target_arch=x86_64&amp;target_version=10" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj">链接</strong> </a>并选择<strong class="jf hj">下载。当然，如果你用的是Windows 7或8，那就换个版本。</strong></p><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es la"><img src="../Images/bb592523c8475e00e1c2d10a616695ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2L-tkFVKRBSWzECGKZn4sw.png"/></div></div><figcaption class="kn ko et er es kp kq bd b be z dx translated">适用于Windows 10的CUDA 10.0下载</figcaption></figure><p id="032d" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">一旦您运行安装程序，只需继续点击下一步，并验证您不会遇到下面的屏幕，而安装。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="er es lb"><img src="../Images/cfc7d45006cafbd24b0c13d639dd7b55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/format:webp/1*4BnDLx7lxCxnyht-ceWw_A.png"/></div><figcaption class="kn ko et er es kp kq bd b be z dx translated">您的Visual Studio 2017安装不正确</figcaption></figure><p id="b8a9" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">如果是，那么你需要卸载Visual Studio 2017并重新下载。如果您没有遇到上述消息，并且CUDA已成功安装，那么您可以继续下一部分！</p><h1 id="d710" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">第三步是得到CuDNN</h1><p id="90fe" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">要下载CuDNN请点击此<a class="ae kr" href="https://developer.nvidia.com/rdp/cudnn-download" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj">链接</strong> </a>。在获得CuDNN之前，您需要注册一个Nvidia开发者帐户。一旦您注册，同意条款和条件，并点击安装程序，如下截图所示。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es lc"><img src="../Images/b3e08c0d910c68bbb431b5e742cd2e31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MvzOO0d76D4G5y0mAOYI4w.png"/></div></div></figure><p id="4de3" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">文件下载完成后，将内容直接解压到c盘。完成解压缩后，验证Cuda文件夹是否存在于c盘中，如下所示。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es ld"><img src="../Images/aa38ea7391ed5dd9891e933451f15583.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*via0xFlXoZcyeQU4-AZONg.png"/></div></div><figcaption class="kn ko et er es kp kq bd b be z dx translated">检查Cuda文件夹是否存在</figcaption></figure><p id="f79f" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">之后打开你的环境变量，添加<strong class="jf hj"> C:\cuda\bin </strong>作为你的系统路径的新入口。恭喜你已经安装了主要要求！！</p><h1 id="dfc6" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">第四步是获取vcpkg</h1><p id="294c" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">获取vcpkg库管理器的链接是<a class="ae kr" href="https://github.com/Microsoft/vcpkg" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj">这里</strong> </a>。</p><p id="3b9f" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">您可以下载vcpkg的zip文件，如下所示。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es le"><img src="../Images/426f529bd4c2dd44e64aa6cbf2b8bdc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AhXYbocMkTY7uaH9r7Vyuw.png"/></div></div><figcaption class="kn ko et er es kp kq bd b be z dx translated">正在下载vcpkg zip文件</figcaption></figure><p id="c92f" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">下载后，将内容解压缩到您选择的位置。之后，打开命令提示符并导航到vcpkg文件夹。进入后，运行命令:</p><pre class="kc kd ke kf fd lf lg lh li aw lj bi"><span id="0de5" class="lk ig hi lg b fi ll lm l ln lo">bootstrap-vcpkg.bat</span></pre><p id="4711" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">这个bat文件执行完毕后，运行下面的命令:</p><pre class="kc kd ke kf fd lf lg lh li aw lj bi"><span id="bffa" class="lk ig hi lg b fi ll lm l ln lo">vcpkg integrate install</span></pre><p id="a5d7" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">成功运行这些命令后，请打开您的环境变量，并在系统变量部分单击“新建”。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="er es lp"><img src="../Images/6a6bf190323a28c8d1a0c23ceb745077.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*svzRoowzUOUxW-6rcGM9gQ.png"/></div><figcaption class="kn ko et er es kp kq bd b be z dx translated">新系统变量</figcaption></figure><p id="13d7" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">将新变量命名为<strong class="jf hj"> VCPKG_ROOT </strong>，并使其指向VCPKG文件夹的位置。</p><p id="1bfd" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">另外，定义另一个名为<strong class="jf hj"> VCPKG_DEFAULT_TRIPLET </strong>的系统变量，并将其值设置为<strong class="jf hj"> x64-windows </strong>。</p><p id="5275" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">打开Powershell窗口，键入以下命令，为darknet安装准备vcpkg。</p><pre class="kc kd ke kf fd lf lg lh li aw lj bi"><span id="1555" class="lk ig hi lg b fi ll lm l ln lo">PS \&gt;                  cd $env:VCPKG_ROOT<br/>PS Code\vcpkg&gt;         .\vcpkg install pthreads opencv[ffmpeg]</span></pre><h1 id="c25f" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">最后一步是获取和安装Darknet</h1><p id="f2cd" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们期待已久的时刻终于到来了！导航到此<a class="ae kr" href="https://github.com/AlexeyAB/darknet" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj">链接</strong> </a>获取暗网代码。下载并解压到您选择的位置后，在管理员模式下打开Powershell窗口。</p><p id="79a5" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">导航到darknet文件夹的位置，在构建它之前，必须确保可以执行Powershell脚本。</p><p id="b8a3" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">运行下面的命令来验证您的执行权限级别。</p><pre class="kc kd ke kf fd lf lg lh li aw lj bi"><span id="2add" class="lk ig hi lg b fi ll lm l ln lo">Get-ExecutionPolicy</span></pre><p id="3c1d" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">如果返回无限制，那么您可以运行最后一个命令，但是，如果不是，那么运行下面的命令。</p><pre class="kc kd ke kf fd lf lg lh li aw lj bi"><span id="5f58" class="lk ig hi lg b fi ll lm l ln lo">Set-ExecutionPolicy -ExecutionPolicy Unrestricted</span></pre><p id="80ad" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">选择“A”或“Y ”,然后运行最后一个命令。</p><pre class="kc kd ke kf fd lf lg lh li aw lj bi"><span id="be9d" class="lk ig hi lg b fi ll lm l ln lo">.\build.ps1</span></pre><h2 id="ba26" class="lk ig hi bd ih lq lr ls il lt lu lv ip jo lw lx it js ly lz ix jw ma mb jb mc bi translated">一旦执行完毕，你的暗网库就应该安装好了。恭喜你！</h2><p id="b871" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">不要忘记运行下面的命令并键入“A”。</p><pre class="kc kd ke kf fd lf lg lh li aw lj bi"><span id="5107" class="lk ig hi lg b fi ll lm l ln lo">Set-ExecutionPolicy -ExecutionPolicy Restricted</span></pre><p id="666b" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">要测试darknet，只需运行下面的命令，就会产生一些没有任何错误的输出。</p><pre class="kc kd ke kf fd lf lg lh li aw lj bi"><span id="a40a" class="lk ig hi lg b fi ll lm l ln lo">darknet.exe detector test cfg/coco.data cfg/yolov3.cfg yolov3.weights -thresh 0.25</span></pre><p id="6ab4" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">你做到了！</p><p id="e63c" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">再说一次，这不是一个万能的解决方案，但是，如果它对你有用，我很高兴我能帮上忙。如果没有，那么请参考这个<a class="ae kr" href="https://github.com/AlexeyAB/darknet#how-to-compile-on-windows-using-cmake-gui" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj">链接</strong> </a>来尝试用Cmake-GUI安装darknet。</p><p id="ce66" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">要查看这个darknet框架可用的各种培训可能性，请参考这个<a class="ae kr" href="https://github.com/AlexeyAB/darknet#yolo-v3-and-yolo-v2-for-windows-and-linux" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj">链接</strong> </a>。</p><p id="94dd" class="pw-post-body-paragraph jd je hi jf b jg ks ji jj jk kt jm jn jo ku jq jr js kv ju jv jw kw jy jz ka hb bi translated">感谢你一直阅读到现在，希望这个指南能帮助你在你的电脑上安装darknet。现在保重！</p></div></div>    
</body>
</html>