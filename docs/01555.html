<html>
<head>
<title>Adding Logo to Images using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python向图像添加徽标</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/adding-logo-to-images-using-python-7d8946947baa?source=collection_archive---------3-----------------------#2019-10-31">https://medium.com/analytics-vidhya/adding-logo-to-images-using-python-7d8946947baa?source=collection_archive---------3-----------------------#2019-10-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/5f4042107d5d6789031bc3796dda5fd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*OAXfQypyvWJd-rjmzftLMA.png"/></div><figcaption class="im in et er es io ip bd b be z dx translated">带有"<strong class="bd iq"> MyLogo </strong>的猫</figcaption></figure><p id="6a8f" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">这篇文章是我上一篇关于<strong class="it hj">“使用Python进行图像处理”</strong>的文章的延续——在这里阅读<a class="ae jp" rel="noopener" href="/analytics-vidhya/image-manipulation-with-python-a689b83dd471"><strong class="it hj"/></a></p><p id="4a35" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">在这里，我们将看到如何使用Python中的一个简单程序将我们自己的自定义徽标添加到任意数量的图像中。</p><p id="dc14" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">首先确保Pillow (Python的图像处理库)已经安装。如果没有，那么现在使用下面的命令安装它。</p><pre class="jq jr js jt fd ju jv jw jx aw jy bi"><span id="d00f" class="jz ka hi jv b fi kb kc l kd ke">pip install Pillow</span></pre><p id="1d3f" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><strong class="it hj">项目概述</strong></p><p id="1856" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">我们的程序将添加自定义徽标图像到文件夹中所有图像的右下角。下面是该计划将如何工作的总体概述。</p><ol class=""><li id="0f08" class="kf kg hi it b iu iv iy iz jc kh jg ki jk kj jo kk kl km kn bi translated">加载徽标图像</li><li id="ac6f" class="kf kg hi it b iu ko iy kp jc kq jg kr jk ks jo kk kl km kn bi translated">循环遍历所有。jpg和。png文件</li><li id="b730" class="kf kg hi it b iu ko iy kp jc kq jg kr jk ks jo kk kl km kn bi translated">检查图像的高度是否合适(我们不希望图像比徽标本身小)</li><li id="4083" class="kf kg hi it b iu ko iy kp jc kq jg kr jk ks jo kk kl km kn bi translated">将徽标图像粘贴到右下角</li><li id="a597" class="kf kg hi it b iu ko iy kp jc kq jg kr jk ks jo kk kl km kn bi translated">将更改后的图像保存到新文件夹</li></ol><p id="2997" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><strong class="it hj">步骤— 1:打开标志图像</strong></p><p id="d021" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">创建一个新的python文件，保存为“addLogo.py”。</p><p id="7342" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">将以下代码添加到这个新创建的文件中:</p><pre class="jq jr js jt fd ju jv jw jx aw jy bi"><span id="ff48" class="jz ka hi jv b fi kb kc l kd ke"><em class="kt">import</em> os<br/><em class="kt">from</em> PIL <em class="kt">import</em> Image<br/>sq_fit_size = 300<br/>logo_file = ‘logo.png’<br/>logoIm = Image.open(logo_file)<br/>logoWidth, logoHeight = logoIm.size</span></pre><p id="1770" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">从特定目录获取元素需要导入“os”。PIL是Python的“枕头库”。我们使用了变量“sq_fit_size”来确保满足最小图像尺寸要求。我们的logo文件名简单来说就是“logo.png”。</p><p id="8ebc" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">我们会将我们的图像保存在一个名为“withlogo”的目录中。</p><p id="e419" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">下面的代码将检查这样的目录是否存在。如果没有，它将创建一个新的。</p><pre class="jq jr js jt fd ju jv jw jx aw jy bi"><span id="741e" class="jz ka hi jv b fi kb kc l kd ke">os.makedirs(‘withlogo’, exist_ok = True)</span></pre><p id="073b" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><strong class="it hj">步骤2:循环文件并打开图像</strong></p><pre class="jq jr js jt fd ju jv jw jx aw jy bi"><span id="ec05" class="jz ka hi jv b fi kb kc l kd ke"><em class="kt">for</em> filename in os.listdir(‘.’):</span><span id="6ee2" class="jz ka hi jv b fi ku kc l kd ke"><em class="kt">if</em> not (filename.endswith(‘.png’) or filename.endswith(‘.jpg’)) or filename == logo_file:</span><span id="2e5a" class="jz ka hi jv b fi ku kc l kd ke"><em class="kt">    continue</em></span><span id="b2f3" class="jz ka hi jv b fi ku kc l kd ke">    im = Image.open(filename)</span><span id="852a" class="jz ka hi jv b fi ku kc l kd ke">    width, height = im.size</span></pre><p id="1c77" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">首先，<strong class="it hj"> os.makedirs() </strong>调用创建一个“withlogo”文件夹来存储完成的带有logo的图像，而不是覆盖原来的图像文件。如果“withlogo”已经存在，<strong class="it hj"> exist_ok=True </strong>关键字参数将防止os.makedirs()引发<br/>异常。用os.listdir(' . '遍历工作目录中的所有文件<br/>)，长if语句检查每个文件名是否不以。如果是这样——或者如果文件本身就是徽标图像——那么循环应该跳过它，并使用<strong class="it hj">继续</strong>转到下一个文件。如果文件名以'结尾。png '或'。jpg '(并且不是logo文件)，你可以把它作为图像对象x打开，设置宽度和高度。</p><p id="6400" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><strong class="it hj">步骤3:调整图像大小</strong></p><p id="4ce4" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">如果图像确实需要调整大小，您需要确定它是宽图像还是高图像。如果宽度大于高度，那么高度应<br/>减少的比例与宽度减少的比例相同。该比例为<strong class="it hj"> square_fit_size </strong>值除以当前宽度。新的高度值是该比例乘以当前高度值。</p><p id="5120" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">因为除法运算符返回一个浮点值，而resize()要求<br/>维度为整数，所以记得用int()函数将结果转换为整数<br/>。最后，新的宽度值将简单地设置为<br/> <strong class="it hj"> square_fit_size </strong>。</p><pre class="jq jr js jt fd ju jv jw jx aw jy bi"><span id="9491" class="jz ka hi jv b fi kb kc l kd ke"><em class="kt">if</em> width &gt; sq_fit_size and height &gt; sq_fit_size:</span><span id="f08e" class="jz ka hi jv b fi ku kc l kd ke"><em class="kt">if</em> width &gt; height:<br/>    height = int((sq_fit_size / width) * height)<br/>    width = sq_fit_size</span><span id="d276" class="jz ka hi jv b fi ku kc l kd ke"><em class="kt">else</em>:<br/>    width = int((sq_fit_size / height) * width)<br/>    height = sq_fit_size<br/>    print(“Resizing %s”% (filename)) <br/>    im = im.resize((width, height))</span></pre><p id="26a9" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><strong class="it hj">步骤4:添加徽标并保存更改</strong></p><p id="d07d" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">徽标将粘贴在右下角。下图显示了徽标放置视图。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es kv"><img src="../Images/90188641f7eff5554c9e7df087013362.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*8shMPXqf1nMug9gdg2zSTw.png"/></div><figcaption class="im in et er es io ip bd b be z dx translated">徽标位置</figcaption></figure><p id="6763" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">下面的代码将把徽标文件粘贴到图像上，并将其作为新文件保存在我们之前创建的“withlogo”目录中。</p><pre class="jq jr js jt fd ju jv jw jx aw jy bi"><span id="920d" class="jz ka hi jv b fi kb kc l kd ke">im.paste(logoIm, (width — logoWidth, height — logoHeight), logoIm)</span><span id="4376" class="jz ka hi jv b fi ku kc l kd ke">im.save(os.path.join(‘withlogo’, filename))</span></pre><p id="80ea" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><strong class="it hj">完整代码(图片)</strong></p><p id="e940" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">下面是完整代码(不要太长)。如果是自己练的请打字。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es kw"><img src="../Images/f19acc0833b1ac11e39ea28559846a18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ggGkqnv512SbzZ1Ii_YweA.png"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated">“使用Python在图像上制作徽标”的完整代码</figcaption></figure><p id="17d3" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated"><strong class="it hj">结果</strong></p><p id="4faa" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">下面是两个美丽的图像(礼貌:Unsplash)与我们的“自定义标志”添加在图像的右下角。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es lb"><img src="../Images/8f2f938fd6be1ae398ffaac5b8ad3f30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZHUsFNtXm-GLYIU1woyTAw.jpeg"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated">带有标志的房屋照片</figcaption></figure><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es lc"><img src="../Images/0dba5b76d8dbf84c5fa1a6229c0825df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nzpwZJkGcCBvrexg2Pj36w.jpeg"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated">另一个带有我们定制标志的图像</figcaption></figure><p id="cb5e" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">就是这样……..</p><p id="83ff" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">非常感谢任何意见/建议。</p></div></div>    
</body>
</html>