<html>
<head>
<title>Parsing JSON files using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python解析JSON文件</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/parsing-json-files-using-python-f8fb04172ce7?source=collection_archive---------1-----------------------#2019-12-25">https://medium.com/analytics-vidhya/parsing-json-files-using-python-f8fb04172ce7?source=collection_archive---------1-----------------------#2019-12-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="1ac1" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">看一看关于如何使用Python读取JSON文件的简单指南。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/e6f3a2dd6102090ca2eef0055bdb1a73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EaeJFN5CNiImLUYuRPL6rA.png"/></div></div></figure><p id="e701" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">死亡触及到我们每一个人，但这绝对不是一个令人愉快的话题！但是，与此相反，在今天的数据和分析世界中，我们应该讨论死亡，因为使用我们每天产生的令人难以置信的数据量，我们可以用积极的眼光看待死亡这个话题。如果医疗从业者可以利用数据减少死亡人数，帮助我们快乐地生活，享受生活，会怎么样？你能想象这对我们所有人的影响吗？</p><p id="5d32" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">因疾病导致的医疗死亡，如果及时得到正确治疗，预防和治愈的机会更高。关于影响特定地区大多数人的不同疾病的准确信息对于医疗从业者来说是非常宝贵的。他们可以就预防措施向人们提供建议，制定一项计划来研究旨在预防这些疾病的疫苗，以及开发治疗病人的新药。你们所有人都会同意，在当今数据爆炸的世界里，收集准确的数据不成问题！</p><p id="cfb8" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在本文中，我们将调查一个类似的<a class="ae kf" href="https://catalog.data.gov/dataset/new-york-city-leading-causes-of-death-ce97f" rel="noopener ugc nofollow" target="_blank">数据集</a>，它告诉我们自2007年以来纽约市的主要死亡原因。2007年以来的年度趋势有助于衡量新药/疫苗的效果及其对死亡率的影响。它还将有助于我们筛选出越来越突出和需要紧急关注的疾病。使用该数据集，我们可以回答很多问题，包括:</p><ul class=""><li id="6883" class="kg kh hi jl b jm jn jp jq js ki jw kj ka kk ke kl km kn ko bi translated">死亡人数会因性别而异吗？</li><li id="669c" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">男女死亡的主要原因是什么？</li><li id="4297" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">就种族而言，死亡的主要原因是什么？</li><li id="5ae2" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">死亡原因的年度模式是什么？</li><li id="3cfe" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">年轻人死亡的主要原因是什么？</li></ul><p id="fe1b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">说够了！现在，让我们开始实际工作。我们拥有的<a class="ae kf" href="https://data.cityofnewyork.us/api/views/jb7j-dtam/rows.json?accessType=DOWNLOAD" rel="noopener ugc nofollow" target="_blank">数据</a>是一个JSON文件。JSON到底是什么，我们如何用Python来解析它？让我们先来窥视一下<a class="ae kf" href="https://data.cityofnewyork.us/api/views/jb7j-dtam/rows.json?accessType=DOWNLOAD" rel="noopener ugc nofollow" target="_blank">我们的JSON文件</a>的开头:</p><pre class="iy iz ja jb fd ku kv kw kx aw ky bi"><span id="1a2e" class="kz la hi kv b fi lb lc l ld le">{'meta': {'view': {'id': 'jb7j-dtam',<br/>   'name': 'New York City Leading Causes of Death',<br/>   'attribution': 'Department of Health and Mental Hygiene (DOHMH)',<br/>   'averageRating': 0,<br/>   'category': 'Health',<br/>   'createdAt': 1384963296,<br/>   'description': 'The leading causes of death by sex and ethnicity in New York City in since 2007. Cause of death is derived from the NYC death certificate which is issued for every death that occurs in New York City.\n\n&lt;/p&gt;\nReport last ran: 11/18/2018&lt;/br&gt;\nRates based on small numbers (RSE &gt; 30) as well as aggregate counts less than 5 have been suppressed in downloaded data&lt;/p&gt;\nSource: Bureau of Vital Statistics and  New York City Department of Health and Mental Hygiene',</span></pre><p id="a4d9" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">是的，这看起来令人困惑，但我们将使用下面的路线图来解码:</p><ul class=""><li id="c30a" class="kg kh hi jl b jm jn jp jq js ki jw kj ka kk ke kl km kn ko bi translated">了解JSON</li><li id="974f" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">从JSON文件中读取并在数据框中提取它</li><li id="d2d8" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">清理数据</li><li id="09ba" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">分析数据来回答我们的问题。</li></ul><h1 id="ed7f" class="lf la hi bd lg lh li lj lk ll lm ln lo io lp ip lq ir lr is ls iu lt iv lu lv bi translated">了解JSON</h1><p id="7d3c" class="pw-post-body-paragraph jj jk hi jl b jm lw ij jo jp lx im jr js ly ju jv jw lz jy jz ka ma kc kd ke hb bi translated"><strong class="jl hj">JSON是什么？我们为什么要用JSON？</strong></p><p id="b6fe" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在我们进入JSON的实际定义之前，让我们看一个例子。假设有两个人，一个只会说印地语，另一个只会说中文，想要互相交流。如果他们不懂彼此的语言，他们怎么能交谈呢？他们需要一名翻译！但是，如果他们知道一种共同的语言，不是更容易和更快吗？同理，假设JavaScript和Python想要通信。他们彼此不懂对方的语言，但是如果他们知道一种共同的语言，他们可以发送和阅读信息。此外，他们不能阅读大量的文本消息，他们需要带有一些语法和句法的格式化消息。两种语言都可以阅读的一种简单的独立于语言的消息格式是<a class="ae kf" href="https://www.json.org/json-en.html" rel="noopener ugc nofollow" target="_blank"> JSON </a>。JavaScript和Python都有内置的JSON库，可以将JSON转换成它们各自理解的编程语言。</p><p id="e514" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">JSON对象是人类可读的名称/值对列表。JSON数据看起来很像Python中的字典，键:值对。这种格式将列表和字典等数据结构编码为字符串，以确保机器能够轻松读取它们。它可以有嵌套的名称/值对，如下面的“地址”所示。</p><pre class="iy iz ja jb fd ku kv kw kx aw ky bi"><span id="7e37" class="kz la hi kv b fi lb lc l ld le">{<br/>"data": [<br/> {<br/>  "id": "A001",<br/>  "name": "John"<br/>  "address": {<br/>   "city": "Los Angeles",<br/>   "state": "California",<br/>   "zip": "90001"},<br/>  "position": "Manager",<br/> "department": "Sales",<br/> "number of years": "10" <br/>},<br/> {<br/>  "id": "A002",<br/>  "name": "Ana"<br/>  "address": {<br/>   "city": "San Diego",<br/>   "state": "California",<br/>   "zip": "91911"},<br/>  "position": "Analyst",<br/>  "department": "Marketing",<br/> "number of years": "2" }<br/>]<br/>}</span></pre><p id="5f46" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">JSON更容易解析，读写速度更快。JSON语法基于JavaScript，但采用文本格式。既然我们已经知道了JSON的基本知识和它的结构，让我们跳到我们的源代码JSON，用Python来阅读它。</p><h1 id="f50e" class="lf la hi bd lg lh li lj lk ll lm ln lo io lp ip lq ir lr is ls iu lt iv lu lv bi translated">从JSON文件中读取并在数据框中提取它</h1><p id="2ba6" class="pw-post-body-paragraph jj jk hi jl b jm lw ij jo jp lx im jr js ly ju jv jw lz jy jz ka ma kc kd ke hb bi translated"><strong class="jl hj">探索json文件:</strong> Python附带了一个名为<a class="ae kf" href="https://docs.python.org/3/library/json.html" rel="noopener ugc nofollow" target="_blank"> json </a>的内置包，用于编码和解码JSON数据，我们将使用json.load函数来加载文件。</p><pre class="iy iz ja jb fd ku kv kw kx aw ky bi"><span id="47ab" class="kz la hi kv b fi lb lc l ld le">import json<br/>file = open("NY_cause_of_death.json")<br/>ny = json.load(file)</span></pre><p id="d55c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">即使Python有内置的库，我们仍然需要知道如何找到我们需要的数据。在我们的<a class="ae kf" href="https://data.cityofnewyork.us/api/views/jb7j-dtam/rows.json?accessType=DOWNLOAD" rel="noopener ugc nofollow" target="_blank"> JSON文件</a>中，您将看到两个顶级密钥:</p><ul class=""><li id="808d" class="kg kh hi jl b jm jn jp jq js ki jw kj ka kk ke kl km kn ko bi translated"><strong class="jl hj"> meta </strong>:这通常是指关于数据本身的信息。此键有其他嵌套键:view。</li><li id="e1bb" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated"><strong class="jl hj">数据</strong>:这是包含实际数据的第二个键。(可以在大JSON文件中搜索这个键。)</li></ul><pre class="iy iz ja jb fd ku kv kw kx aw ky bi"><span id="c3fe" class="kz la hi kv b fi lb lc l ld le">ny.keys()<br/>&gt; dict_keys(['meta', 'data'])</span></pre><p id="96d6" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">当您浏览文件中的数据键时，您将看到一个包含实际数据的列表列表，但是没有列名，如下所示。</p><pre class="iy iz ja jb fd ku kv kw kx aw ky bi"><span id="04ce" class="kz la hi kv b fi lb lc l ld le">'data': [['row-t4eu.wiij.n7je',<br/>   '00000000-0000-0000-CAA9-9C2FF9B97733',<br/>   0,<br/>   1565986487,<br/>   None,<br/>   1565986487,<br/>   None,<br/>   '{ }',<br/>   '2016',<br/>   'Essential Hypertension and Renal Diseases (I10, I12)',<br/>   'Male',<br/>   'Other Race/ Ethnicity',<br/>   None,<br/>   None,<br/>   None],<br/>  ['row-v3af.mvmp-b2z4',<br/>   '00000000-0000-0000-AA10-AA914EA7CA64',<br/>   0,<br/>   1565986487,<br/>   None,<br/>   1565986487,<br/>   None,<br/>   '{ }',<br/>   '2016',<br/>   'All Other Causes',<br/>   'Female',<br/>   'Non-Hispanic White',<br/>   '2416',<br/>   '172.4',<br/>   '102.4'],<br/>  ['row-iuzu~fmzm-zkwx',<br/>   '00000000-0000-0000-0A32-492179ED2C6E',<br/>   0,<br/>   1565986487,<br/>   None,<br/>   1565986487,<br/>   None,<br/>   '{ }',<br/>   '2016',<br/>   'Accidents Except Drug Poisoning (V01-X39, X43, X45-X59, Y85-Y86)',<br/>   'Female',<br/>   'Non-Hispanic White',<br/>   '156',<br/>   '11.1',<br/>   '7.2'],</span></pre><p id="013e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">因此，在我们探索如何提取数据之前，让我们看看如何访问列名。</p><p id="339b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">获取标题信息(列名):</strong>记住<strong class="jl hj">键:值</strong>语法，当您向下滚动到JSON文件中的meta.view.columns <strong class="jl hj">键</strong>时，您可以看到很多项嵌套在<strong class="jl hj">值中。</strong>项目具有以“id”开始并以“flags”键结束的键:值对。</p><pre class="iy iz ja jb fd ku kv kw kx aw ky bi"><span id="f0d9" class="kz la hi kv b fi lb lc l ld le">"columns" : [ {<br/>        "id" : -1,<br/>        "name" : "sid",<br/>        "dataTypeName" : "meta_data",<br/>        "fieldName" : ":sid",<br/>        "position" : 0,<br/>        "renderTypeName" : "meta_data",<br/>        "format" : { },<br/>        "flags" : [ "hidden" ]<br/>      }, {<br/>        "id" : -1,<br/>        "name" : "id",<br/>        "dataTypeName" : "meta_data",<br/>        "fieldName" : ":id",<br/>        "position" : 0,<br/>        "renderTypeName" : "meta_data",<br/>        "format" : { },<br/>        "flags" : [ "hidden" ]<br/>      }, {<br/>        "id" : -1,<br/>        "name" : "position",<br/>        "dataTypeName" : "meta_data",<br/>        "fieldName" : ":position",<br/>        "position" : 0,<br/>        "renderTypeName" : "meta_data",<br/>        "format" : { },<br/>        "flags" : [ "hidden" ]<br/>      }, {<br/>        "id" : -1,<br/>        "name" : "created_at",<br/>        "dataTypeName" : "meta_data",<br/>        "fieldName" : ":created_at",<br/>        "position" : 0,<br/>        "renderTypeName" : "meta_data",<br/>        "format" : { },<br/>        "flags" : [ "hidden" ]<br/>      }</span></pre><p id="e7d9" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果您观察上面的代码片段，您可以看到‘field name’键具有类似sid、id、position、created_at的值。当您打开并向下滚动JSON <a class="ae kf" href="https://data.cityofnewyork.us/api/views/jb7j-dtam/rows.json?accessType=DOWNLOAD" rel="noopener ugc nofollow" target="_blank">文件</a>时，您将看到其他值，如year、leading_cause、sex等。查看这些值，我们可以说‘field name’是包含我们需要的列名信息的相关键。我们只需从“columns”中的每个条目块中提取“fieldName”键。让我们看看提取列名的代码。</p><pre class="iy iz ja jb fd ku kv kw kx aw ky bi"><span id="a1b8" class="kz la hi kv b fi lb lc l ld le">import ijson</span><span id="1587" class="kz la hi kv b fi mb lc l ld le">#Specify the file we want to extract data from<br/>filename = "NY_cause_of_death.json"<br/>with open(filename, 'r') as f:<br/>    #Extract each item from the meta.view.columns list<br/>    objects = ijson.items(f, 'meta.view.columns.item') <br/>    columns = list(objects) #Convert generator to list</span></pre><p id="42ca" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们将使用<a class="ae kf" href="https://pypi.org/project/ijson/" rel="noopener ugc nofollow" target="_blank"> ijson </a>库，它迭代地解析json文件，而不是一次读取所有内容。这比直接读入整个文件要慢，但它使我们能够处理内存中容纳不下的大文件。</p><p id="e644" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">打开文件后，我们将使用<a class="ae kf" href="https://pypi.org/project/ijson/" rel="noopener ugc nofollow" target="_blank"> ijson.items() </a>方法从json文件的meta.view.columns路径中提取一个列表。这里，meta.view.columns.item表示我们将提取meta.view.columns列表中的每个单独的项目。“items”方法将返回一个<a class="ae kf" href="https://wiki.python.org/moin/Generators" rel="noopener ugc nofollow" target="_blank">生成器</a>，我们可以使用list方法将其转换为Python列表。列表“列”的第一项如下所示:</p><pre class="iy iz ja jb fd ku kv kw kx aw ky bi"><span id="20f2" class="kz la hi kv b fi lb lc l ld le">{'id': -1, 'name': 'sid', 'dataTypeName': 'meta_data', 'fieldName': ':sid', 'position': 0, 'renderTypeName': 'meta_data', 'format': {}, 'flags': ['hidden']}</span></pre><p id="3302" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">“列”列表中的每一项都是一个字典，包含关于每一列的信息。您可以仔细检查这是上面的JSON文件片段。如前所述，“字段名”键对我们很重要。让我们详细看一下。</p><pre class="iy iz ja jb fd ku kv kw kx aw ky bi"><span id="bdb2" class="kz la hi kv b fi lb lc l ld le">column_names = [col["fieldName"] for col in columns]</span><span id="19b7" class="kz la hi kv b fi mb lc l ld le">[':sid',<br/> ':id',<br/> ':position',<br/> ':created_at',<br/> ':created_meta',<br/> ':updated_at',<br/> ':updated_meta',<br/> ':meta',<br/> 'year',<br/> 'leading_cause',<br/> 'sex',<br/> 'race_ethnicity',<br/> 'deaths',<br/> 'death_rate',<br/> 'age_adjusted_death_rate']</span></pre><p id="2d65" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">太好了，我们对“fieldName”键的判断是正确的，我们可以看到它包含了我们需要的列！现在，我们可以开始提取这些列的数据了。</p><p id="7ac8" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">提取数据:</strong>让我们选择分析所需的列。</p><pre class="iy iz ja jb fd ku kv kw kx aw ky bi"><span id="5899" class="kz la hi kv b fi lb lc l ld le">good_columns = [<br/>    'year',<br/> 'leading_cause',<br/> 'sex',<br/> 'race_ethnicity',<br/> 'deaths',<br/> 'death_rate',<br/> 'age_adjusted_death_rate']</span></pre><p id="3e95" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如上所述，顶级键“data”将实际数据锁定在列表列表中。现在，我们可以使用在“good_columns”中提取的列来只获取我们需要的列的数据。</p><pre class="iy iz ja jb fd ku kv kw kx aw ky bi"><span id="2b45" class="kz la hi kv b fi lb lc l ld le">data = []</span><span id="947e" class="kz la hi kv b fi mb lc l ld le">#Extract data<br/>with open(filename, 'r') as f:<br/>    objects = ijson.items(f, 'data.item')<br/>    for row in objects:<br/>        selected_row = []<br/>        for item in good_columns:<br/>            selected_row.append(row[column_names.index(item)])<br/>        data.append(selected_row)</span></pre><ul class=""><li id="f067" class="kg kh hi jl b jm jn jp jq js ki jw kj ka kk ke kl km kn ko bi translated">ijson.items()方法将使用data.item路径返回数据键中的每一项。</li><li id="5c43" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">第一个for循环将遍历data key中的每一项，给出一个按行排列的列表。</li><li id="cdc0" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">一旦我们有了行数据，我们现在只想提取‘good _ columns’的数据。因此，我们将使用另一个for循环遍历所选行中的每一列数据。我们将使用:column_names找到所选列的位置。<a class="ae kf" href="https://www.programiz.com/python-programming/methods/list/index" rel="noopener ugc nofollow" target="_blank">索引</a>(项目)，其中项目将来自‘good _ columns’。</li><li id="1b1c" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">row[column_names.index(item)]将为我们提供每行中“good_columns”的数据，我们将把这些数据追加到我们的列表“selected row”中。这样，我们将为该行中的“good_columns”的每一列选择数据。</li><li id="2f32" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">完成后，我们将对每一行执行相同的过程，并将最终数据(列表中的列表)附加到“数据”中。然后，我们将把它转换成一个数据框架，以便于分析。</li></ul><pre class="iy iz ja jb fd ku kv kw kx aw ky bi"><span id="1299" class="kz la hi kv b fi lb lc l ld le">data = pd.DataFrame(data, columns=good_columns)</span></pre><p id="dcfd" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">厉害！JSON文件中的数据已经准备好放在数据框中进行分析。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mc"><img src="../Images/8aa87e6fb38641e8d4cb14169e09d8fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jORwQo8etJ_wz2g9Eqndog.png"/></div></div></figure><p id="bce6" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们现在可以转到数据清理和分析来回答我们的问题。</p><h1 id="dd18" class="lf la hi bd lg lh li lj lk ll lm ln lo io lp ip lq ir lr is ls iu lt iv lu lv bi translated">清理数据</h1><p id="e135" class="pw-post-body-paragraph jj jk hi jl b jm lw ij jo jp lx im jr js ly ju jv jw lz jy jz ka ma kc kd ke hb bi translated">在我们继续分析之前，这是重要的一步，因为干净的数据(没有空值、正确的文本、正确的数据类型)是任何计算和推断的先决条件。我们可以从以下几点着手。详情可以参考<a class="ae kf" href="https://github.com/phtelang/Causes-of-Death-in-New-York-City" rel="noopener ugc nofollow" target="_blank">笔记本</a>。</p><ul class=""><li id="9c65" class="kg kh hi jl b jm jn jp jq js ki jw kj ka kk ke kl km kn ko bi translated">请更改None、null和“.”“死亡”列中的值转换为0，并将其转换为数字。</li><li id="e584" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">“性别”列有不同的值:“F”和“女性”，“M”和“男性”。我们会将所有值转换为“女性”和“男性”。</li><li id="125e" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">更改“.”“death_rate”列中的值转换为0，并将其转换为数字。</li><li id="9894" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">“leading_cause”是一个重要的列，因为它为我们提供了关于死亡的重要信息，但它有一些数字，我们将删除这些数字以清理列值。</li></ul><h1 id="da35" class="lf la hi bd lg lh li lj lk ll lm ln lo io lp ip lq ir lr is ls iu lt iv lu lv bi translated">分析数据以获得问题的答案</h1><p id="d7f9" class="pw-post-body-paragraph jj jk hi jl b jm lw ij jo jp lx im jr js ly ju jv jw lz jy jz ka ma kc kd ke hb bi translated">详细分析可以参考<a class="ae kf" href="https://github.com/phtelang/Causes-of-Death-in-New-York-City" rel="noopener ugc nofollow" target="_blank">笔记本</a>。</p><ul class=""><li id="c236" class="kg kh hi jl b jm jn jp jq js ki jw kj ka kk ke kl km kn ko bi translated">死亡人数会因性别而异吗？</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es md"><img src="../Images/1c0feae3d3536498667cc64effbf4318.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*xH75pn-ylAgxOmF40J-uhw.png"/></div></figure><p id="fd14" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们可以看到，男性和女性的死亡人数几乎相等，女性人数略高。</p><ul class=""><li id="a115" class="kg kh hi jl b jm jn jp jq js ki jw kj ka kk ke kl km kn ko bi translated"><strong class="jl hj">不同性别的死亡人数会有所不同吗？</strong></li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es me"><img src="../Images/79b07ea87581040e2014e7f001685c4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4SZ5xDq1tyuvSuCIkd-p7A.png"/></div></div></figure><ol class=""><li id="601a" class="kg kh hi jl b jm jn jp jq js ki jw kj ka kk ke mf km kn ko bi translated">从2007年到2016年，男性和女性的死亡人数每年都超过25000人。2008年女性死亡人数最多，2016年男性死亡人数最多。</li><li id="bfe1" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke mf km kn ko bi translated">从2009年到2014年，女性死亡人数有所下降，但之后又有所上升。自2009年以来，病房男性死亡人数持续增加。</li></ol><ul class=""><li id="40da" class="kg kh hi jl b jm jn jp jq js ki jw kj ka kk ke kl km kn ko bi translated"><strong class="jl hj">男女死亡的主要原因是什么？</strong></li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mg"><img src="../Images/4d93422490f5dc24cec9dc9daa6b9f18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WrBUkPhCu9cKpo0CKdx-sQ.png"/></div></div></figure><ol class=""><li id="aa79" class="kg kh hi jl b jm jn jp jq js ki jw kj ka kk ke mf km kn ko bi translated">男性和女性死亡的主要原因是心脏病和恶性肿瘤。这两种原因导致的女性死亡人数一直高于男性。高计数可能是由于不适当的生活方式的垃圾食品，化学品暴露，习惯，整体生活方式和压力。</li><li id="44a0" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke mf km kn ko bi translated">攻击和帕金森病只影响男性。除了药物中毒、慢性肝病、艾滋病毒、自杀、精神障碍——意外中毒，男性死于意外的几率更高。</li><li id="a414" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke mf km kn ko bi translated">女性死于老年痴呆症、脑血管疾病、呼吸系统疾病、高血压和肾病、流感和肺炎、肾炎、败血症的几率更高。</li></ol><ul class=""><li id="8832" class="kg kh hi jl b jm jn jp jq js ki jw kj ka kk ke kl km kn ko bi translated">种族死亡的主要原因是什么？</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mh"><img src="../Images/9abac068ef7bd9b3b1d27c93f70de816.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oOwpVfV0fCKyQeu5kmmp_w.png"/></div></div></figure><p id="d6e4" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">除心脏病、癌症、糖尿病、流感和肺炎外，不同种族的一些主要死因是:</p><ol class=""><li id="de28" class="kg kh hi jl b jm jn jp jq js ki jw kj ka kk ke mf km kn ko bi translated"><strong class="jl hj">非西班牙裔白人</strong>:除药物中毒、老年痴呆症、脑血管疾病、呼吸系统疾病、故意自残、精神障碍以外的意外——意外中毒、败血症。</li><li id="9b5c" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke mf km kn ko bi translated"><strong class="jl hj">非西班牙裔黑人</strong>:突出原因是殴打、脑血管疾病、呼吸系统疾病、高血压和肾脏疾病。</li><li id="25e4" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke mf km kn ko bi translated"><strong class="jl hj">西语</strong>:除药物中毒、脑血管疾病、呼吸系统疾病、艾滋病病毒、因意外中毒导致的精神障碍以外的意外。</li><li id="c72b" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke mf km kn ko bi translated"><strong class="jl hj">亚太岛民</strong>:脑血管疾病。</li></ol><ul class=""><li id="1053" class="kg kh hi jl b jm jn jp jq js ki jw kj ka kk ke kl km kn ko bi translated"><strong class="jl hj">死亡原因的年度模式是什么？</strong></li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mi"><img src="../Images/3fbe6351b7fdf6741daa043b753be386.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4nCwcNPVgpk8lXm2FzO8-Q.png"/></div></div></figure><ol class=""><li id="5b1f" class="kg kh hi jl b jm jn jp jq js ki jw kj ka kk ke mf km kn ko bi translated">如上所述，三年内死亡的主要原因是心脏病，其次是癌症。</li><li id="3c3c" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke mf km kn ko bi translated">由于阿尔茨海默氏病、脑血管疾病、肝病、呼吸系统疾病、糖尿病、高血压和肾脏疾病、精神障碍——意外中毒、帕金森氏病、围产期疾病导致的死亡人数<strong class="jl hj">逐年增加</strong>。可以进行更多关于如何开发药物来避免或治愈这些疾病的研究。</li><li id="4921" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke mf km kn ko bi translated">这些年来，因攻击、先天畸形、畸形、艾滋病毒、肾炎和肝炎导致的死亡数量有所下降。这一信息有助于了解新药是否能有效降低计数。</li><li id="5c99" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke mf km kn ko bi translated">帕金森病是2014年至2017年期间死亡的主要原因，在早些年并未导致死亡。</li></ol><ul class=""><li id="4982" class="kg kh hi jl b jm jn jp jq js ki jw kj ka kk ke kl km kn ko bi translated"><strong class="jl hj">年轻人常见的死亡原因有哪些？</strong></li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mj"><img src="../Images/d26a6b0fac89e9fdf92ad128bcd00bcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BHH0iz-zS7wJTIoz1m-Q1Q.png"/></div></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mk"><img src="../Images/601036f84301154d89eded6aa7caad82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J4dHvfVgMw7Cvdok9y0tKA.png"/></div></div></figure><ol class=""><li id="31a7" class="kg kh hi jl b jm jn jp jq js ki jw kj ka kk ke mf km kn ko bi translated">多年来，西班牙裔、非西班牙裔黑人和亚裔男性死于心脏病，这是相当惊人的。其原因可能是消费更多的加工食品、由于久坐不动的生活方式而缺乏锻炼、肥胖、吸烟等。预防是最好的治疗，医生可以提供预防的指导。</li><li id="16b6" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke mf km kn ko bi translated">在所有种族中，越来越多的年轻西班牙男性受到影响。需要做更多的研究来解释为什么更多的西班牙男性受到影响。</li></ol><h1 id="47e1" class="lf la hi bd lg lh li lj lk ll lm ln lo io lp ip lq ir lr is ls iu lt iv lu lv bi translated">结论</h1><ul class=""><li id="b71a" class="kg kh hi jl b jm lw jp lx js ml jw mm ka mn ke kl km kn ko bi translated">JSON是一种简单的独立于语言的消息组织格式，不同的语言都可以阅读。大多数语言都有解析JSON的库。</li><li id="e83b" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">JSON数据看起来很像Python中的字典，有键:值对。</li><li id="dff3" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">我们可以通过查看顶级键来读取任何json文件，并使用JSON或ijson库提取列名和数据。</li></ul><h1 id="0a06" class="lf la hi bd lg lh li lj lk ll lm ln lo io lp ip lq ir lr is ls iu lt iv lu lv bi translated">参考</h1><ul class=""><li id="b425" class="kg kh hi jl b jm lw jp lx js ml jw mm ka mn ke kl km kn ko bi translated"><a class="ae kf" href="https://www.programiz.com/python-programming/methods/list/index" rel="noopener ugc nofollow" target="_blank">www.programiz.com</a></li><li id="d245" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">https://wiki.python.org<a class="ae kf" href="https://wiki.python.org/" rel="noopener ugc nofollow" target="_blank"/></li><li id="f7d9" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">【https://pypi.org/ T4】</li><li id="798a" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated"><a class="ae kf" href="https://www.json.org/json-en.html" rel="noopener ugc nofollow" target="_blank">https://www.json.org/json-en.html</a></li></ul></div></div>    
</body>
</html>