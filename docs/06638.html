<html>
<head>
<title>COVID-19 Predicting Death Rate using Classification</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">新冠肺炎使用分类预测死亡率</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/covid-19-predicting-death-rate-using-classification-9a095eba9e57?source=collection_archive---------16-----------------------#2020-05-28">https://medium.com/analytics-vidhya/covid-19-predicting-death-rate-using-classification-9a095eba9e57?source=collection_archive---------16-----------------------#2020-05-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/dc6796261d87d8ef82e107f1dee0f2fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GQ3Gccemg8RowJIuPqBMRQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated"><a class="ae iu" href="https://www.crayon.com/en/news-and-resources/covid-machine-learning/" rel="noopener ugc nofollow" target="_blank">来源</a></figcaption></figure><p id="9d9d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi jt translated">美国5月26日因COVID 19死亡的总人数突破了10万大关。随着新冠肺炎的每日增加和有限的医院容量，医护人员极难监测所有COVID 19检测呈阳性的人，因为大多数国家的病死率低于10%。美国消费者新闻与商业频道发表的一篇<a class="ae iu" href="https://www.google.ca/amp/s/www.cnbc.com/amp/2020/04/06/coronavirus-cases-states-with-biggest-hospital-bed-shortfalls.html" rel="noopener ugc nofollow" target="_blank">文章</a>指出，许多州的医院缺乏足够的重症监护室床位来应对预计的COVID 19病例。然而，由于大多数国家每天都在更新与COVID 19相关的数据。随着使用历史数据的机器学习的进步，很容易预测哪些人因COVID 19而面临风险。</p><p id="9aba" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果我们能够准确预测所有感染COVID 19的人，患者是否会死亡。那么可以给予病人更多的优先权，并且可以对病人进行持续的监测，以防止病人死亡。</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h1 id="2728" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated"><strong class="ak">数据可视化</strong></h1><p id="91e6" class="pw-post-body-paragraph iv iw hi ix b iy lh ja jb jc li je jf jg lj ji jj jk lk jm jn jo ll jq jr js hb bi translated">由于从<a class="ae iu" href="https://www150.statcan.gc.ca/t1/tbl1/en/tv.action?pid=1310078101" rel="noopener ugc nofollow" target="_blank">加拿大统计局</a>网站下载数据的复杂性，只收集了与2000个COVID 19案例相关的数据。关于COVID 19是如何影响不同年龄组和性别的一些有趣的问题已经在我之前的博客(<a class="ae iu" rel="noopener" href="/@jaswanth.badvelu/how-does-covid-19-affect-different-age-groups-and-genders-8347155a189">链接</a>)中回答了。除了我以前的博客中使用的变量，加拿大统计局发布了地区无症状状态的更新数据。让我们在进入分类之前探索这些数据，看看是否能发现任何新的见解。</p><p id="9035" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">哪个地区的住院人数更多？</strong></p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/18ee1140ce5ae9905a161ccf9b6695b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3MGFiHwPN5zgPjIZJELZxw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图一。按区域划分的住院人数状态</figcaption></figure><p id="9db2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">大西洋地区包括新不伦瑞克、新斯科舍、爱德华王子岛、纽芬兰和拉布拉多。安大略地区包括安大略省和努勒维特。大草原地区包括阿尔伯塔省、萨斯喀彻温省、马尼托巴省和西北地区。不列颠哥伦比亚和育空被认为是公元前。可以看出，大多数病例来自安大略地区，几乎35%的感染COVID 19的人住院治疗，而不列颠哥伦比亚省为25%。大西洋和大草原地区的住院病人比例不到5%。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/8f3eb62c5e2fb3f1260d50b31cc357b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gvb4nLIf8pBY8MunYzzTgQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图二。人们死于地区性疾病</figcaption></figure><p id="5a9b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">安大略省死亡率最高，有17.5%的感染者死于新冠肺炎，大西洋地区死亡率最低，只有7.45%的感染者死亡。大草原地区的死亡率为9.9%。令人惊讶的是，即使不列颠哥伦比亚省有更多的人住院治疗，死亡率也是11%，这与安大略省相比是非常好的。</p><p id="165b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">受感染的人有任何症状吗？</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ls"><img src="../Images/13859e83c68acea82fe59f554e5b161e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R_dft4vuPuyPR5e4gnF4vw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图三。不同年龄组人群症状状况</figcaption></figure><p id="ff15" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在所有COVID 19检测呈阳性的人中。可以看出，几乎50%的男女患者即使感染了COVID 19也没有表现出任何症状。</p><p id="00bd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">看到几天后没有表现出任何症状而住院的人数将是有趣的。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lt"><img src="../Images/f4ff98f31f3a041a275da8d4b56dff95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o0WxTDHKkW8gr9QPgdr0EA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图4。人住院状态没有表现出任何症状</figcaption></figure><p id="c014" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在所有检测呈阳性的COVID 19名患者中没有任何症状。只有80岁以上的人需要医疗护理，有些人甚至需要重症监护室。大多数60岁以下的人康复时不需要医疗护理。现在让我们看看有多少人在没有任何症状的情况下死去。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ls"><img src="../Images/7c38476fb88a5bb4ccf17df33cb9f109.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9NnXsoZ0PxKY_e0oiZ7c6w.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图五。没有症状的死亡状态</figcaption></figure><p id="b105" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所有未表现出任何症状的50岁以下的人从COVID 19中康复。即使对于50岁以上的人来说，大多数人在接受医疗护理后都康复了。</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h1 id="33cb" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">分类</h1><p id="d33a" class="pw-post-body-paragraph iv iw hi ix b iy lh ja jb jc li je jf jg lj ji jj jk lk jm jn jo ll jq jr js hb bi translated">在任何预测一个变量的机器学习模型中，在训练机器模型之前识别正确的变量是非常关键的，因为每次都获得所有变量是非常困难的。正确的变量可以通过使用相关矩阵来识别。在矩阵中，应考虑与所需变量高度相关的所有变量。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lu"><img src="../Images/18a85da4b3de94e4770bae20cfe4b447.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f0Zn2GaW5xJ4lhk0Np51kg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图六。相关矩阵图</figcaption></figure><p id="36c5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从相关矩阵可以看出，死亡变量与年龄组、医院状况和无症状变量相关，即这些变量与死亡变量相关。所以用这些变量来训练模型，预测病人会不会死。</p><p id="62e1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在使用数据训练模型之后，检查模型在使用看不见的数据时是否表现良好也很重要。所以用样本。split命令在R中，70%的数据被随机划分以训练模型，剩余的30%的数据对模型隐藏，因此可以用于验证模型。</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><p id="44ab" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">支持向量机</strong></p><figure class="ln lo lp lq fd ij er es paragraph-image"><div class="er es lv"><img src="../Images/79b8f8b15c29ba0a0c352dfa79b13003.png" data-original-src="https://miro.medium.com/v2/resize:fit:680/format:webp/1*lEutMP8lCZ_XaXF89pyFZg.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">使用所有变量时的混淆矩阵和准确性</figcaption></figure><p id="8d7e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当训练支持向量机模型来预测死亡状态时。当使用所有变量时，模型预测的准确率为87.42%。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div class="er es lw"><img src="../Images/971ec3824d1435f377ed22e3c102ad20.png" data-original-src="https://miro.medium.com/v2/resize:fit:702/format:webp/1*fUR-DE4S9_sbwpNlj4v0Tw.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">仅使用3个变量进行训练时的混淆矩阵和准确性</figcaption></figure><p id="0804" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">而当年龄组、医院状况和无症状变量用于训练模型时，准确率为84.9%。</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><p id="afb8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">逻辑回归</strong></p><figure class="ln lo lp lq fd ij er es paragraph-image"><div class="er es lx"><img src="../Images/d0377f33393b008806e4fe60f2f3efc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:710/format:webp/1*rp00OrCcf9h3Arab4ygIHg.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">两种情况下逻辑回归的混淆矩阵和准确性</figcaption></figure><p id="e777" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Logistic回归<strong class="ix hj"> </strong>模型能够以87.8%预测患者是否会死亡。当使用所有变量和仅使用3个变量时，两种情况下的准确率保持相同。</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><p id="e0d7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">决策树</strong></p><p id="3050" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在决策树模型的情况下，当用所有变量训练模型以预测死亡状态时，准确率为87.42%。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div class="er es ly"><img src="../Images/13ddba9bdc5055c0517eee832dff67cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:684/format:webp/1*48KdliCFkE_IW-9cA9h6GA.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">当所有变量都用于训练时，混淆矩阵和准确性</figcaption></figure><p id="42e5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有趣的是，当只使用年龄组、医院状况和无症状变量来训练模型时，准确性略有提高，准确率为87.75%。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div class="er es lz"><img src="../Images/61ff6036270383b6d305a43a09489eba.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/1*fCPClOmlsreEiE3MEs7zSg.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">仅使用3个变量进行训练时的混淆矩阵和准确性</figcaption></figure><p id="c306" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面绘制了决策树，以便更好地理解哪些变量更重要。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lt"><img src="../Images/caeca6a2e337185d84ca17c8c4c976f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l3bgeEJFg6TdTUoXBt0qqA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图7。三变量决策树图</figcaption></figure><p id="de21" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">根据这个决策树，可以解释为，对于所有年龄在40岁以下的人，该模型假设他将存活。对于40岁以上的人，先检查症状，然后检查年龄组和医院状况。对于没有症状的人，70岁以上的人更受重视。在有症状的人的情况下，需要医疗护理的人更优先，转移到ICU的人有75%的可能性，住院的人有30%的可能性。</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><p id="1dfe" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">随机森林</strong></p><p id="a734" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当仅使用年龄组、医院状况和无症状变量来训练模型时，随机森林模型能够以87.92%的最高准确度预测患者是否会死亡。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div class="er es lz"><img src="../Images/fbbeed20ad9f572a425280883eff7bbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/1*yawTwM76j6zaLo0WJttdIw.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">使用3个变量进行训练时的精确度</figcaption></figure><p id="c792" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在让我们看看当所有变量都被使用时是否会有任何改进。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div class="er es ma"><img src="../Images/c6eecd3b85c0c5fe55a8d530e42da1b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*qzluNc203d4TunkRPg1CVw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">所有变量用于训练时的准确性</figcaption></figure><p id="1fa3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当所有变量都用于训练模型预测死亡时，随机森林的准确率为88.09%。绘制随机森林的可变重要性，以检查哪些因素对预测死亡具有最高影响。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/491edba92cbf9654fec8c5e522286018.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PhzGPPQFbzSkB_-fuVKEFA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图8。可变重要性</figcaption></figure><p id="9304" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">可以看出，作为预期年龄组，医院地位，无症状变量有更多的重要性。</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h1 id="b158" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated"><strong class="ak">结论</strong></h1><p id="b093" class="pw-post-body-paragraph iv iw hi ix b iy lh ja jb jc li je jf jg lj ji jj jk lk jm jn jo ll jq jr js hb bi translated">当已知患者的年龄组、医院状况以及患者是否出现症状时。使用随机森林，我们可以预测病人是否会死亡，准确率接近88%。这有助于卫生保健工作者识别死亡风险最高的患者，从而可以给予这些患者更多的优先权。尽管准确率是88%,但这意味着错误率是12%,这对医疗保健部门来说有点高，因为我们处理的是病人的生命。因此，该模型应该用更多的数据进行训练，并且在用于医疗保健部门进行决策之前，还应该使用超调进行改进，以降低错误率。</p><h1 id="f0fc" class="kj kk hi bd kl km mc ko kp kq md ks kt ku me kw kx ky mf la lb lc mg le lf lg bi translated">数据收集</h1><p id="c27e" class="pw-post-body-paragraph iv iw hi ix b iy lh ja jb jc li je jf jg lj ji jj jk lk jm jn jo ll jq jr js hb bi translated">数据包括从加拿大统计局收集的2000例COVID 19病例。</p></div></div>    
</body>
</html>