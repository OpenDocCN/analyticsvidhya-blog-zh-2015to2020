<html>
<head>
<title>9 Powerful Tricks for Working with Image Data using skimage in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Python中使用skimage处理图像数据的9个强大技巧</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/9-powerful-tricks-for-working-with-image-data-using-skimage-in-python-a84c3656663d?source=collection_archive---------7-----------------------#2019-09-16">https://medium.com/analytics-vidhya/9-powerful-tricks-for-working-with-image-data-using-skimage-in-python-a84c3656663d?source=collection_archive---------7-----------------------#2019-09-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="e58d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">了解什么是skimage和它是如何工作的，以及8个强大的skimage技巧，让你成为计算机视觉专家。从这里开始学习Python。</p><p id="3e28" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">听到“图像预处理”，你首先想到的是什么？当我向一群数据科学爱好者提出这个问题时，他们投来了几个探询的目光。如果你想知道这是什么，请继续阅读！</p><p id="ac21" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们非常熟悉结构化(表格)数据的预处理步骤。你发现并插入任何丢失的值，检测并处理异常值，等等。这有助于我们建立更好、更健壮的机器学习模型。但是，当我们处理图像数据时，这是如何工作的呢？</p><p id="e02d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">事实证明，预处理步骤是计算机视觉(图像、视频等)领域中至关重要的一步。skimage是scikit-learn家族的一部分，是一个非常有用的库，可以帮助我们开始学习。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/cc417a993834bd60a670520d6b0655c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UvqX2PeNQO2w5k1Z"/></div></div></figure><p id="3d0a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我们将使用Python中的skimage来研究一些简单而强大的图像预处理技术。这是你计算机视觉之旅的一个好的起点，快乐学习吧！</p><p id="7bce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jp">如果计算机视觉是你的职业选择，或者你想了解更多关于如何处理图像、构建物体检测模型等等，请查看以下课程:</em></p><ul class=""><li id="dc7a" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated"><a class="ae jz" href="https://courses.analyticsvidhya.com/courses/computer-vision-using-deep-learning-version2?utm_source=blog&amp;utm_medium=8-powerful-tricks-for-working-image-data-skimage-python" rel="noopener ugc nofollow" target="_blank"> <em class="jp">使用深度学习的计算机视觉</em> </a></li></ul><h1 id="e426" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">目录</h1><ol class=""><li id="9c3e" class="jq jr hi ih b ii ky im kz iq la iu lb iy lc jc ld jw jx jy bi translated">什么是skimage，我们为什么要使用它？</li><li id="53e2" class="jq jr hi ih b ii le im lf iq lg iu lh iy li jc ld jw jx jy bi translated">使用skimage在Python中读取图像</li><li id="5f94" class="jq jr hi ih b ii le im lf iq lg iu lh iy li jc ld jw jx jy bi translated">更改图像格式</li><li id="56cc" class="jq jr hi ih b ii le im lf iq lg iu lh iy li jc ld jw jx jy bi translated">调整图像大小</li><li id="2347" class="jq jr hi ih b ii le im lf iq lg iu lh iy li jc ld jw jx jy bi translated">高/低比例图像</li><li id="808f" class="jq jr hi ih b ii le im lf iq lg iu lh iy li jc ld jw jx jy bi translated">旋转不同的角度</li><li id="135d" class="jq jr hi ih b ii le im lf iq lg iu lh iy li jc ld jw jx jy bi translated">水平和垂直翻转</li><li id="fb40" class="jq jr hi ih b ii le im lf iq lg iu lh iy li jc ld jw jx jy bi translated">图像裁剪</li><li id="01cb" class="jq jr hi ih b ii le im lf iq lg iu lh iy li jc ld jw jx jy bi translated">改变图像亮度</li><li id="577e" class="jq jr hi ih b ii le im lf iq lg iu lh iy li jc ld jw jx jy bi translated">使用过滤器</li></ol><h1 id="1e79" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">什么是skimage，我们为什么要使用它？</h1><p id="df0e" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq lj is it iu lk iw ix iy ll ja jb jc hb bi translated">Python中有多个库和框架可以让我们处理图像数据。那么我们为什么要使用skimage呢？这是一个公平的问题，所以在我们深入研究这篇文章之前，让我先回答一下。</p><blockquote class="lm ln lo"><p id="2cf5" class="if ig jp ih b ii ij ik il im in io ip lp ir is it lq iv iw ix lr iz ja jb jc hb bi translated">Scikit-image，或skimage，是一个为图像预处理而设计的开源Python包。</p></blockquote><p id="0ef0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你以前使用过sklearn，那么开始使用skimage将是小菜一碟。即使您对Python完全陌生，skimage也很容易学习和使用。</p><p id="5c4b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我真正喜欢skimage的是，它有一个结构良好的文档，列出了skimage中提供的所有模块、子模块和功能。下面是skimage包中所有子模块和函数的列表:<a class="ae jz" href="https://scikit-image.org/docs/stable/api/api.html" rel="noopener ugc nofollow" target="_blank"> API引用</a>。</p><h1 id="e666" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">1.使用skimage在Python中读取图像</h1><p id="8208" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq lj is it iu lk iw ix iy ll ja jb jc hb bi translated">让我们从基础开始。第一步是学习如何使用skimage在Python中导入图像。</p><p id="2acd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一幅图像是由多个称为像素的小方块组成的。我下面展示的图片就是一个很好的例子。你在这里看到的小方块是像素:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ls"><img src="../Images/f23744df660e498f8d6d8a4667fc9aea.png" data-original-src="https://miro.medium.com/v2/resize:fit:472/0*n63qyULgSJGshv2A"/></div></figure><p id="c596" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以看到，该图像沿垂直线有22个像素，水平方向有16个像素。因此，这个图像的大小应该是22 x 16。</p><p id="0e6f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我们使用scikit-image(或任何其他包)读取或加载图像时，我们看到图像以数字的形式存储。这些数字被称为像素值，它们代表图像中每个像素的亮度。</p><h1 id="481c" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">从skimage加载图像</h1><p id="9f84" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq lj is it iu lk iw ix iy ll ja jb jc hb bi translated">在scikit-image包中，<em class="jp">数据</em>模块中提供了几个样本图像。假设我们想要加载一个图像来执行一些实验。我们可以简单地加载包中提供的一个图像，而不是使用外部图像！</p><p id="385d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是实现这一点的Python代码:</p><pre class="je jf jg jh fd lt lu lv lw aw lx bi"><span id="0277" class="ly kb hi lu b fi lz ma l mb mc">from skimage.io import imread, imshow                       <br/>from skimage import data                                               image = data.astronaut()                       <br/>imshow(image)</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es md"><img src="../Images/bdc216c0b95edf6234ea33f5e31691c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:578/0*wxgB8ob4GWkfDttz"/></div></figure><p id="0f97" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意，我在这里使用了<em class="jp"> imshow </em>函数来查看笔记本中的图像。简单吧？</p><p id="b578" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您想从您的机器而不是软件包中提供的加载一个映像，该怎么办？我相信这是你最终想要做的。为此，我们可以使用<em class="jp"> skimage </em>中的<em class="jp"> imread </em>函数。</p><p id="8386" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以阅读两种格式的图像——彩色和灰度。我们将看到这两者的实际应用，并理解它们的不同之处。</p><h1 id="05b9" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">使用skimage从我们的系统中读取图像</h1><p id="b2d0" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq lj is it iu lk iw ix iy ll ja jb jc hb bi translated"><em class="jp"> imread </em>函数有一个参数“<em class="jp">as _ gray”</em>，用于指定图像是否必须转换为灰度图像。我们将从读取灰度格式的图像开始，将参数设置为true:</p><pre class="je jf jg jh fd lt lu lv lw aw lx bi"><span id="fde3" class="ly kb hi lu b fi lz ma l mb mc">from skimage.io import imread, imshow <br/>import matplotlib.pyplot as plt <br/>%matplotlib inline <br/>image_gray = imread(‘images.jpeg’, as_gray=True) imshow(image_gray)</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es me"><img src="../Images/67b472a338e3a53b8e58b4cb35a9fafc.png" data-original-src="https://miro.medium.com/v2/resize:fit:458/0*2qr5D7Yeq6WjNo-n"/></div></figure><p id="3db8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以使用<em class="jp"> imshow </em>功能轻松查看图像。但是图像真的是这样存储的吗？让我们检查一下变量<em class="jp"> image_gray </em>中的内容:</p><pre class="je jf jg jh fd lt lu lv lw aw lx bi"><span id="fb9a" class="ly kb hi lu b fi lz ma l mb mc">image_gray = imread(‘images.jpeg’, as_gray=True) print(image_gray.shape) <br/>print(image_gray)</span><span id="508e" class="ly kb hi lu b fi mf ma l mb mc">(258, 195)<br/>[[0.73586314 0.77115725 0.7907651  ... 0.11822745 0.11822745 0.11430588]<br/> [0.65743176 0.70056902 0.72017686 ... 0.11822745 0.11430588 0.11430588]<br/> [0.41401176 0.45714902 0.48067843 ... 0.11430588 0.11430588 0.11038431]<br/> ...<br/> [0.73491725 0.73491725 0.73491725 ... 0.42055725 0.42055725 0.42055725]<br/> [0.72594314 0.72986471 0.72986471 ... 0.41750667 0.41750667 0.41750667]<br/> [0.72594314 0.72986471 0.72986471 ... 0.41750667 0.41750667 0.41750667]]</span></pre><p id="d6a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">变量以数字矩阵的形式存储图像。如你所见，矩阵的形状是259 x 195。这些数字被称为像素值，它们表示图像中像素的强度。</p><p id="1200" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们将加载原始颜色格式的图像。为此，我们必须将参数<em class="jp">‘as _ gray’</em>设置为假:</p><pre class="je jf jg jh fd lt lu lv lw aw lx bi"><span id="2d45" class="ly kb hi lu b fi lz ma l mb mc">from skimage.io import imread, imshow                       <br/>import matplotlib.pyplot as plt                       <br/>%matplotlib inline                                               image_color = imread('images.jpeg', as_gray=False)                       print(image_color.shape)                       <br/>imshow(image_color)</span><span id="5935" class="ly kb hi lu b fi mf ma l mb mc">(258, 195, 3)</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es me"><img src="../Images/878391473a28a396569a0520654cc232.png" data-original-src="https://miro.medium.com/v2/resize:fit:458/0*78MEsva4Nk-8KOad"/></div></figure><p id="3cb0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不错！我们这里有同样的彩色图片。现在您可能想知道这两者之间有什么区别，应该使用哪种格式？好问题——让我们一个一个地回答。</p><p id="76f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你注意到这种情况下图像的形状了吗？它是(258，195，3)，而之前的形状是(258，195)。<strong class="ih hj">这里的三维表示图像中通道的数量。</strong>对于彩色图像，最流行的图像存储格式是RGB(红绿蓝)。</p><p id="8cbb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是我们应该使用哪种格式呢？与灰度图像相比，彩色图像具有更多的信息，但是图像的尺寸非常大。RGB的像素数量多了3倍。当我们受到低计算能力的限制时，这可能会带来相当大的挑战。</p><blockquote class="lm ln lo"><p id="5264" class="if ig jp ih b ii ij ik il im in io ip lp ir is it lq iv iw ix lr iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="hi">因此，灰度图像常被用来降低计算复杂度。</em> </strong> <em class="hi">所以如果你的数据集非常大，你可以选择灰度而不是彩色。</em></p></blockquote><h1 id="8304" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">2.更改图像格式</h1><p id="2438" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq lj is it iu lk iw ix iy ll ja jb jc hb bi translated">在上一节中，我们讨论了加载图像的两种重要格式——RGB和灰度。在这一节中，我们将学习如何将图像从一种格式转换成另一种格式。首先，我们将读取RGB格式的图像，并将其转换为灰度格式。我们这里要用的函数是<em class="jp">RGB 2 gray</em>—</p><pre class="je jf jg jh fd lt lu lv lw aw lx bi"><span id="8741" class="ly kb hi lu b fi lz ma l mb mc">from skimage.color import rgb2gray                       <br/>img = imread('images.jpeg')                       <br/>img_new = rgb2gray(img)                            <br/>                   <br/>plt.subplot(121), imshow(img)                       <br/>plt.title('RGB Format')                                                plt.subplot(122), imshow(img_new)                       plt.title('Grayscale Format')                                                plt.show()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mg"><img src="../Images/4f5d79624ab862ba5a36572e29584a5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/0*DPVNSLJtk-_hTeKV"/></div></figure><p id="8b77" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另外两种流行的格式是HSV ( <strong class="ih hj">色调、饱和度、值</strong>)和HSL ( <strong class="ih hj">色调、饱和度、亮度</strong>)，它们是RGB格式的替代表示。让我简单解释一下这些术语的含义。</p><ul class=""><li id="7bb2" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">色调是色轮上的度数，其中0代表红色，120代表绿色，240代表蓝色，360代表红色。</li><li id="7830" class="jq jr hi ih b ii le im lf iq lg iu lh iy li jc jv jw jx jy bi translated">饱和度表示该颜色的百分比，其中0表示白色，100表示全色。</li><li id="9aeb" class="jq jr hi ih b ii le im lf iq lg iu lh iy li jc jv jw jx jy bi translated">值表示颜色与不同数量的黑色或白色颜料的混合。</li><li id="877c" class="jq jr hi ih b ii le im lf iq lg iu lh iy li jc jv jw jx jy bi translated">明度是显示图像阴影的另一种方式，其中0表示黑色，1表示白色。</li></ul><p id="ff5c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下图会让你的理解更加清晰-</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mh"><img src="../Images/d621d7297b41f99dbf3c70260210e34c.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/0*GNPISmj_Pb2msOB2"/></div><figcaption class="mi mj et er es mk ml bd b be z dx translated">来源:维基百科</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mh"><img src="../Images/de0b52e3182a4d08588a41d84009d6ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/0*D37cLFLI_ZtAADYH"/></div><figcaption class="mi mj et er es mk ml bd b be z dx translated">来源:维基百科</figcaption></figure><p id="1568" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将图像转换为这些格式中的任何一种，都与我们将图像转换为灰度格式是一样的。我们可以用函数<em class="jp"> rgb2hsl </em>和<em class="jp"> rgb2hsv </em>分别转换成hsl和hsv格式。这里我演示了图像到HSV格式的转换。</p><pre class="je jf jg jh fd lt lu lv lw aw lx bi"><span id="9b26" class="ly kb hi lu b fi lz ma l mb mc">from skimage.color import rgb2hsv                       <br/>img = imread('images.jpeg')                       <br/>img_new = rgb2hsv(img)                                               </span><span id="ae9c" class="ly kb hi lu b fi mf ma l mb mc">plt.subplot(121), imshow(img)                       <br/>plt.title('RGB Format')                                                plt.subplot(122), imshow(img_new)                       plt.title('HSV Format')                                                plt.show()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mg"><img src="../Images/d62a770848da8d36465d92df35c49e87.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/0*Cy68FrSL2qcsMoFg"/></div></figure><h1 id="d6e2" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">3.使用浏览调整图像大小</h1><p id="204f" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq lj is it iu lk iw ix iy ll ja jb jc hb bi translated">计算机视觉面临的最大挑战之一是，我们需要大量数据来训练我们的模型。我们收集的数据通常来自不同的来源，这可能会导致图像大小的变化。在从影像中提取特征或使用这些特征进行数据扩充时，这可能是一个问题。</p><p id="fa75" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">理想情况下，当我们构建模型时，图像的大小应该是相同的。如果我们使用的是<a class="ae jz" href="https://www.analyticsvidhya.com/blog/2018/07/top-10-pretrained-models-get-started-deep-learning-part-1-computer-vision/?utm_source=blog&amp;utm_medium=8-powerful-tricks-for-working-image-data-skimage-python" rel="noopener ugc nofollow" target="_blank">预训练模型</a>，重要的是要调整输入数据的大小，并将其标准化为与网络最初训练时相同的格式。这就是为什么调整图像大小是一个重要的图像预处理步骤。</p><p id="91aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，我们将使用skimage中的<em class="jp"> resize </em>函数。该函数的输入将是我们想要更新的图像和新图像所需的尺寸:</p><pre class="je jf jg jh fd lt lu lv lw aw lx bi"><span id="b276" class="ly kb hi lu b fi lz ma l mb mc">from skimage.transform import resize                       <br/>img = imread('images.jpeg')                       </span><span id="0345" class="ly kb hi lu b fi mf ma l mb mc">#resize image                      <br/>img_resized = resize(img, (300, 300))                                               </span><span id="79be" class="ly kb hi lu b fi mf ma l mb mc">#plot images                       <br/>plt.subplot(121), imshow(img)                       plt.title('Original Image')                       plt.subplot(122), imshow(img_resized)                       plt.title('Resized Image')</span><span id="d698" class="ly kb hi lu b fi mf ma l mb mc">plt.show()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mm"><img src="../Images/c42803bf8e496680994c64bed0acf620.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/0*SwosQbu7GOVPYYJO"/></div></figure><h1 id="d933" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">4.使用skimage重新缩放(放大/缩小)图像</h1><p id="8263" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq lj is it iu lk iw ix iy ll ja jb jc hb bi translated">重新缩放图像是另一种常见的计算机视觉技术。这意味着按特定因子缩放图像。例如，将每个图像的尺寸缩小一半(缩小)或增加两倍(放大)。</p><p id="6102" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可能会说我们可以简单地使用resize函数来完成这个任务，这有什么区别呢？</p><p id="5e53" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果所有图像的原始尺寸都相同，比如说(300，300)，我们可以直接使用<em class="jp">调整</em>功能，并指定所需的尺寸(150，150)。<strong class="ih hj">但是如果图像的大小不同(如下图所示)，则不能使用调整大小功能。</strong>这是因为每个图像的“一半”会有所不同。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mn"><img src="../Images/f7da6101c1af5143863ae06c8f6aa9a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/0*LlUwrfFAHTGUr-Pa"/></div></figure><p id="b636" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是你在计算机视觉之旅中会遇到很多的用例。</p><p id="e6f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以在这里，我们可以使用<em class="jp"> rescale </em>函数并指定缩放因子。基于图像的原始大小，所有图像都将按此因子进行缩放。这里有一个例子:</p><pre class="je jf jg jh fd lt lu lv lw aw lx bi"><span id="06bf" class="ly kb hi lu b fi lz ma l mb mc">from skimage.transform import rescale                       <br/>img = imread('images.jpeg')                       <br/>img_rescaled = rescale(img, scale=(0.5, 0.5))                                                                       </span><span id="4e48" class="ly kb hi lu b fi mf ma l mb mc">plt.subplot(121), imshow(img)                       plt.title('Original Image')                                               plt.subplot(122), imshow(img_rescaled)                       plt.title('Rescaled Image')<br/>plt.show()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mh"><img src="../Images/291547b1a200d53c21d2cbedc6c0253e.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/0*55JJYgj5tGbNbgKx"/></div></figure><h1 id="cade" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">5.使用浏览将图像旋转不同的角度</h1><p id="c6ec" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq lj is it iu lk iw ix iy ll ja jb jc hb bi translated">到目前为止，我们已经看到了图像的大小调整和缩放。让我们把注意力转移到如何改变图像的方向上来。但是在我们深入研究之前，我们应该首先讨论为什么我们需要改变图像方向。</p><p id="1b7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">考虑下面的图片。第一个图像稍微倾斜(这可能是由于相机的方向)。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mh"><img src="../Images/939a94b477e78c7d9854687bb8a4b0aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/0*l65fQQI8dm79Ts0P"/></div></figure><p id="5a64" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了解决这个方向问题，我们需要将图像旋转一定的角度。我们可以使用skimage的<em class="jp">旋转</em>功能，并指定图像需要旋转的角度:</p><pre class="je jf jg jh fd lt lu lv lw aw lx bi"><span id="e230" class="ly kb hi lu b fi lz ma l mb mc">from skimage.transform import rotate                       <br/>image = imread('tilt_image.png')                                               image_rotated = rotate(image, angle=45) <br/>imshow(image_rotated)</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mo"><img src="../Images/a5db3f3e3801421dc325c4ed039e5c6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:546/0*px3fyWkp1lOF9CbN"/></div></figure><p id="5cc8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这看起来棒极了！方向问题都解决了。但是如果你仔细看，照片的边角被裁剪了。这是因为，在旋转过程中，图像的大小保持不变，导致拐角周围的区域被裁剪。</p><p id="2b86" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这种情况下，我们不会丢失任何重要信息，但情况可能并不总是如此。该障碍由<em class="jp">旋转</em>功能中的<em class="jp">调整</em>参数处理(默认情况下，该参数值为假):</p><pre class="je jf jg jh fd lt lu lv lw aw lx bi"><span id="a558" class="ly kb hi lu b fi lz ma l mb mc">from skimage.transform import rotate                       <br/>image = imread('tilt_image.png')                                               image_rotated = rotate(image, angle=45, resize=True)imshow(image_rotated)</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es md"><img src="../Images/25c30eb31226e55cba1470767e2c5f9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:578/0*SHl_qblpXXGvqmT_"/></div></figure><p id="533e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们也可以使用旋转概念来扩充数据。对于那些不熟悉这个术语的人来说，<strong class="ih hj">数据扩充是一种使用可用数据生成更多样本来训练模型的技术。</strong></p><p id="c687" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设您正在构建一个<a class="ae jz" href="https://www.analyticsvidhya.com/blog/2019/01/build-image-classification-model-10-minutes/?utm_source=blog&amp;utm_medium=8-powerful-tricks-for-working-image-data-skimage-python" rel="noopener ugc nofollow" target="_blank">图像分类模型</a>来识别猫和狗的图像。看看下面显示的示例图像。左边的图像将被分类为“狗”,而右边的图像将被分类为“猫”:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mh"><img src="../Images/c1171ecc19238b7b70cbc60e2471ca53.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/0*G1mU4l9JN55R5UhR"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mh"><img src="../Images/b3e330d523986496ccbc10663ac278f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/0*VgIEi0Az-HhLbwp5"/></div></figure><p id="618f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们在这里改变了什么？我们简单地将图像旋转了180度，生成了新的图像。想想看，只需针对现有数据中的每个图像添加一个新图像，就可以使训练数据的大小翻倍！</p><h1 id="1876" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">6.水平和垂直翻转图像</h1><p id="0923" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq lj is it iu lk iw ix iy ll ja jb jc hb bi translated">我们可以水平和垂直翻转图像。这将创建一个沿水平/垂直轴的镜像。我们可以将这种技术用于图像预处理和图像增强。</p><p id="7d65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然在skimage中没有直接的函数，但是我们可以使用NumPy来执行这个任务。</p><blockquote class="lm ln lo"><p id="b275" class="if ig jp ih b ii ij ik il im in io ip lp ir is it lq iv iw ix lr iz ja jb jc hb bi translated">NumPy提供函数<strong class="ih hj"> flipud </strong>和<strong class="ih hj"> fliplr </strong>，分别用于在水平轴和垂直轴上翻转图像。</p></blockquote><p id="bd4f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该函数的内部工作非常简单。对于水平翻转，行保持不变，而列中的条目被保留。让我们以同样的猫/狗为例，对其使用翻转功能:</p><pre class="je jf jg jh fd lt lu lv lw aw lx bi"><span id="7b09" class="ly kb hi lu b fi lz ma l mb mc">from numpy import fliplr, flipud                       <br/>dog = imread('Puppy.jpg')                       <br/>cat = imread('whiskers.jpg')                                               </span><span id="57c8" class="ly kb hi lu b fi mf ma l mb mc">dog_flip = fliplr(dog)                       <br/>cat_flip = fliplr(cat)                                               </span><span id="50b0" class="ly kb hi lu b fi mf ma l mb mc">plt.subplot(141), imshow(dog)                       plt.subplot(142), imshow(dog_flip)                       plt.subplot(143), imshow(cat)                       plt.subplot(144), imshow(cat_flip)<br/>plt.show()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mp"><img src="../Images/50323f428db16b1540f94b0f4215b8c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JC6xgY-oeNZQBtxN"/></div></div></figure><p id="bcef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">看起来不错！</p><h1 id="15ba" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">7.裁剪图像</h1><p id="d135" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq lj is it iu lk iw ix iy ll ja jb jc hb bi translated">你一定无数次使用过手机的裁剪功能。我经常这么做！</p><p id="dc3c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您也可以使用skimage在Python笔记本中裁剪图像。我们裁剪图像以去除图像中不想要的部分，或者聚焦于图像的特定部分。</p><p id="a33a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设我们有一场篮球赛的下图(左图)。在目前的形式下，图像的形状是1067 x 1600。现在，我想删除图像的所有4个方面的100个像素。这意味着我们从图像的顶部、底部、左侧和右侧移除100个像素，从而聚焦于中心的物体:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mq"><img src="../Images/782d70d3b4636d7ce1f1208370a87f5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pr5zFsokc87UOfcA"/></div></div></figure><p id="e091" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有两种方法可以实现这一点:</p><ul class=""><li id="84b0" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">首先，<strong class="ih hj">简单地指定你想要的新图像形状</strong>。对于本例，它将是图像[100:967，100:1500]。这对于单个图像来说很好。如果我们有多个图像呢？我们将不得不提到每一个图像的新图像形状(不理想)。</li><li id="07dc" class="jq jr hi ih b ii le im lf iq lg iu lh iy li jc jv jw jx jy bi translated">另一种方式可以是<strong class="ih hj">使用当前图像</strong> <strong class="ih hj">形状</strong>计算裁剪的图像尺寸，这可以使用命令<em class="jp"> image.shape </em>来确定。因此，新图像的高度将是[<em class="jp">100:img . shape[0]-100]</em>，宽度将是[<em class="jp">100:img . shape[1]-100]。</em></li></ul><p id="734a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，让我们使用第二种方法裁剪上面的图像:</p><pre class="je jf jg jh fd lt lu lv lw aw lx bi"><span id="4e10" class="ly kb hi lu b fi lz ma l mb mc">image = imread('warriors.jpg')                                               # selecting part of the image only                        <br/>cropped = image[100:(img.shape[0]-100),100:(img.shape[1]-100)]  <br/>                                             <br/>plt.subplot(121), imshow(image)                       plt.title('Original Image')                       plt.subplot(122),imshow(cropped)                       plt.title('Cropped Image')<br/>plt.show()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mn"><img src="../Images/ce27fd88d239e082d13ab6c511ab1d04.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/0*N57Q8yLGREYpTgcF"/></div></figure><h1 id="4186" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">8.使用浏览改变图像亮度</h1><p id="bfe9" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq lj is it iu lk iw ix iy ll ja jb jc hb bi translated">你多久会摆弄一次在光线不好的情况下拍摄的照片的亮度？尽管最近相机的功能有所进步，弱光成像仍然是一个令人头痛的问题。斯金奇会帮我们解决的。</p><blockquote class="lm ln lo"><p id="28ea" class="if ig jp ih b ii ij ik il im in io ip lp ir is it lq iv iw ix lr iz ja jb jc hb bi translated">不同亮度的图像可以用来使我们的计算机视觉模型对光照条件的变化具有鲁棒性。</p></blockquote><p id="e988" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这对于户外照明系统非常重要，例如交通信号上的闭路电视摄像机。</p><p id="72d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以使用skimage中的<em class="jp"> adjust_gamma </em>功能改变图像的亮度，该功能使用了一种叫做<strong class="ih hj"> gamma correlation的方法。</strong>对于任何给定的图像，像素值首先在0-1之间归一化，然后乘以指定的伽马值。产生的像素值被缩放回0-255的范围。</p><p id="b708" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于大于1的gamma，输出图像将比输入图像暗。而对于小于1的伽马，输出图像将比输入图像更亮。</p><pre class="je jf jg jh fd lt lu lv lw aw lx bi"><span id="7314" class="ly kb hi lu b fi lz ma l mb mc">from skimage import exposure                                               #adjusting brightness                       <br/>image = imread('images.jpeg')                       <br/>image_bright = exposure.adjust_gamma(image, gamma=0.5,gain=1)                       image_dark = exposure.adjust_gamma(image, gamma=1.5,gain=1)                                               </span><span id="4f68" class="ly kb hi lu b fi mf ma l mb mc"># plotting images                       <br/>plt.subplot(131), imshow(image)                       plt.title('Original Image')                                               plt.subplot(132),imshow(image_bright)                       plt.title('Bright Image')                                               plt.subplot(133),imshow(image_dark)                       plt.title('Dark Image')<br/>plt.show()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mp"><img src="../Images/3ff1f4cd9be25b78cc7aea838cd6db7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PAkj1sr2oO9Ytwmc"/></div></div></figure><h1 id="dcf6" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">9.在浏览中使用过滤器</h1><p id="891e" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq lj is it iu lk iw ix iy ll ja jb jc hb bi translated">我们可以使用滤镜来修改或增强图像的特征。如果你曾经在社交媒体平台上摆弄过图片，你会对滤镜非常熟悉。</p><p id="e8be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以出于各种目的使用过滤器，例如平滑和锐化图像、去除噪声、突出图像中的特征和边缘等。</p><p id="017a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我们对图像应用滤镜时，每个像素值都会被使用周围像素值生成的新值所替换。最简单的滤波器是<em class="jp">中值滤波器，</em>用相邻像素的中值替换像素值。</p><pre class="je jf jg jh fd lt lu lv lw aw lx bi"><span id="044f" class="ly kb hi lu b fi lz ma l mb mc">from skimage.filters import median                                               image = imread('images.jpeg', as_gray=True)                       image_median = median(image)                                               </span><span id="d1c7" class="ly kb hi lu b fi mf ma l mb mc"># plotting images                       <br/>plt.subplot(121), imshow(image)                       plt.title('Original Image')                                               plt.subplot(122),imshow(image_median)                       plt.title('Smooth Image')<br/>plt.show()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mp"><img src="../Images/dffc7bc659d2c7793cc48fc70072e42b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-fhNQm1zJMGwQkbV"/></div></div></figure><p id="0602" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一个流行的过滤器是索贝尔过滤器。当我们想要突出图像的边缘时，我们使用这个。如果你想详细了解滤镜的工作原理，可以参考这篇文章。</p><ul class=""><li id="cebf" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated"><a class="ae jz" href="https://www.analyticsvidhya.com/blog/2019/08/3-techniques-extract-features-from-image-data-machine-learning-python/" rel="noopener ugc nofollow" target="_blank"> 3种使用Python从图像数据中提取特征的初学者友好技术</a></li></ul><pre class="je jf jg jh fd lt lu lv lw aw lx bi"><span id="6a26" class="ly kb hi lu b fi lz ma l mb mc">from skimage.filters import sobel_h                                               image = imread('images.jpeg', as_gray=True)                       image_sobelh = sobel_h(image)                                               </span><span id="3e99" class="ly kb hi lu b fi mf ma l mb mc"># plotting images                       <br/>plt.subplot(121), imshow(image)                       plt.title('Original Image')                                               plt.subplot(122),imshow(image_sobelh, cmap = True)                       plt.title('Horizontal Edge')<br/>plt.show()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mr"><img src="../Images/3e30710d52afb589cf5577eaae9fdebb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pCI9oyL4XmpqWWOp"/></div></div></figure><h1 id="ef7e" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">结束注释</h1><p id="2e89" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq lj is it iu lk iw ix iy ll ja jb jc hb bi translated">恭喜你迈出了计算机视觉的第一步！起初，这可能看起来是一个令人畏惧的领域，但如果你有一个结构化的思维模式，并对机器学习算法的工作方式有很好的理解，你将很快学会处理图像和视频数据的细微差别。</p><p id="0765" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还可以使用skimage做其他事情，比如从图像中提取边缘，或者给图像添加噪声，等等。我想让你们先从这两个开始，用Python来尝试一下。你就是这样学习新概念的！</p><p id="b3e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我在文章开头提到的，你应该看看我们关于计算机视觉的综合课程:</p><ul class=""><li id="08f0" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated"><a class="ae jz" href="https://courses.analyticsvidhya.com/courses/computer-vision-using-deep-learning-version2?utm_source=blog&amp;utm_medium=8-powerful-tricks-for-working-image-data-skimage-python" rel="noopener ugc nofollow" target="_blank">使用深度学习的计算机视觉</a></li></ul><p id="47e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我期待听到您对本文的想法和反馈。请在下面的评论区与我联系！</p></div><div class="ab cl ms mt gp mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hb hc hd he hf"><p id="a5a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jp">原载于2019年9月16日</em><a class="ae jz" href="https://www.analyticsvidhya.com/blog/2019/09/9-powerful-tricks-for-working-image-data-skimage-python/" rel="noopener ugc nofollow" target="_blank"><em class="jp">【www.analyticsvidhya.com】</em></a><em class="jp">。</em></p></div></div>    
</body>
</html>