<html>
<head>
<title>What is gRPC? A Brief Introduction with JAVA</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">gRPC是什么？JAVA简介</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/what-is-grpc-a-brief-introduction-with-java-1e22f91a1271?source=collection_archive---------2-----------------------#2020-01-22">https://medium.com/analytics-vidhya/what-is-grpc-a-brief-introduction-with-java-1e22f91a1271?source=collection_archive---------2-----------------------#2020-01-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="d69b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“gRPC是一个现代的开源高性能RPC框架，可以在任何环境中运行。它可以通过对负载平衡、跟踪、运行状况检查和身份验证的可插拔支持，高效地连接数据中心内和跨数据中心的服务。它也适用于分布式计算的最后一英里，将设备、移动应用程序和浏览器连接到后端服务。”[1]</p><p id="35e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">云计算原生计算基金会是gRPC及其现有生态系统项目(【https://github.com/grpc】和<a class="ae jd" href="https://github.com/grpc-ecosystem" rel="noopener ugc nofollow" target="_blank"/>)的新家</p><p id="45e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">与Rest、SOAP等有一些比较。在本教程中，我不会做比较。但是你可以找到其中的一些<a class="ae jd" href="https://www.mertech.com/blog/know-your-api-protocols" rel="noopener ugc nofollow" target="_blank"> 1 </a>、<a class="ae jd" href="https://doc.akka.io/docs/akka-grpc/current/whygrpc.html" rel="noopener ugc nofollow" target="_blank"> 2 </a>、<a class="ae jd" href="https://www.yonego.com/nl/why-milliseconds-matter/#gref" rel="noopener ugc nofollow" target="_blank"> 3 </a>。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/9fa417a3c90a549b223243748ec49b24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6ufkIOzURh0WBg_q9jrSgQ.png"/></div></div></figure><p id="fc87" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">教程的大纲:</p><p id="3495" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1-)使用协议缓冲区id1在. proto文件中定义服务</p><p id="e8ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2-)生成服务器</p><p id="598d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3)使用协议缓冲编译器的客户端存根代码。</p><p id="5499" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 1-)用原型文件定义服务</strong></p><p id="97f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">默认情况下，gRPC使用协议缓冲区，这是Google用于序列化结构化数据的成熟开源机制。</p><p id="7d1b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“协议缓冲区是一种灵活、高效、自动化的序列化结构化数据的机制——比如XML，但更小、更快、更简单。一旦定义了数据的结构化方式，就可以使用专门生成的源代码，使用各种语言轻松地将结构化数据写入各种数据流或从中读取。您甚至可以更新您的数据结构，而不会破坏针对“旧”格式编译的已部署程序。[2]</p><p id="0627" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">！重要！:</strong>gRPC站点上有一个Java的基础教程[5]。但是文档并不能完全覆盖整个过程，尤其是你是一个新手。这里有一些假设，假设你对这个概念非常熟悉。我将提到理解概念和如何解决问题的额外步骤。</p><p id="a937" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">版本3的样本原型文件。[4]</p><pre class="jf jg jh ji fd jq jr js jt aw ju bi"><span id="ba74" class="jv jw hi jr b fi jx jy l jz ka">syntax = "proto3";</span><span id="30d7" class="jv jw hi jr b fi kb jy l jz ka">package tutorial;</span><span id="ff51" class="jv jw hi jr b fi kb jy l jz ka">import "google/protobuf/timestamp.proto";<br/><br/>option java_multiple_files = true;<br/>option java_package = "com.example.tutorial";<br/>option java_outer_classname = "AddressGuideProtos";<br/>service AddressGuide {<br/>    rpc GetAddressBook(Person) returns (AddressBook) {}<br/>}<br/>message Person {<br/>  string name = 1;<br/>  int32 id = 2;  // Unique ID number for this person.<br/>  string email = 3;<br/>enum PhoneType {<br/>    MOBILE = 0;<br/>    HOME = 1;<br/>    WORK = 2;<br/>  }<br/>message PhoneNumber {<br/>    string number = 1;<br/>    PhoneType type = 2;<br/>  }<br/>repeated PhoneNumber phones = 4;<br/>google.protobuf.Timestamp last_updated = 5;<br/>}<br/>// Our address book file is just one of these.<br/>message AddressBook {<br/>  repeated Person people = 1;<br/>}</span></pre><p id="4cd8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个原型文件将被编译器用来生成源代码。在进入编译器阶段之前，让我们描述一些选项。</p><blockquote class="kc kd ke"><p id="0081" class="if ig kf ih b ii ij ik il im in io ip kg ir is it kh iv iw ix ki iz ja jb jc hb bi translated">option Java _ multiple _ files = true；</p></blockquote><p id="b19e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在不同的文件中创建对象。</p><blockquote class="kc kd ke"><p id="e463" class="if ig kf ih b ii ij ik il im in io ip kg ir is it kh iv iw ix ki iz ja jb jc hb bi translated">option Java _ package = " com . example . tutorial "；</p></blockquote><p id="0795" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">设置Java包名。</p><ul class=""><li id="81b2" class="kj kk hi ih b ii ij im in iq kl iu km iy kn jc ko kp kq kr bi translated"><strong class="ih hj">下载协议缓冲区并设置编译器</strong></li></ul><div class="ks kt ez fb ku kv"><a href="https://github.com/protocolbuffers/protobuf/releases" rel="noopener  ugc nofollow" target="_blank"><div class="kw ab dw"><div class="kx ab ky cl cj kz"><h2 class="bd hj fi z dy la ea eb lb ed ef hh bi translated">protocolbuffers/protobuf</h2><div class="lc l"><h3 class="bd b fi z dy la ea eb lb ed ef dx translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="ld l"><p class="bd b fp z dy la ea eb lb ed ef dx translated">github.com</p></div></div><div class="le l"><div class="lf l lg lh li le lj jo kv"/></div></div></a></div><p id="a757" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下载最新文件。您可以下载特定于编程语言的文件或包含全部支持语言的所有文件。我用了所有版本。</p><p id="108b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">支持的语言:C++，Java，Go，C#，Python，Objective-C，JavaScript，Ruby，Php，Dart</p><p id="b155" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Unix安装(Github repo自述文件中的Windows安装):</p><pre class="jf jg jh ji fd jq jr js jt aw ju bi"><span id="aab4" class="jv jw hi jr b fi jx jy l jz ka">./configure<br/>make<br/>make check<br/>sudo make install<br/>sudo ldconfig</span></pre><p id="ab7d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以在Github repo找到生成资源的示例命令。</p><pre class="jf jg jh ji fd jq jr js jt aw ju bi"><span id="18f4" class="jv jw hi jr b fi jx jy l jz ka">protoc --java_out=${OUTPUT_DIR} path/to/your/proto/file</span></pre><p id="227c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我前面引用的Java文档中有一个表达式如下。</p><blockquote class="kc kd ke"><p id="ee76" class="if ig kf ih b ii ij ik il im in io ip kg ir is it kh iv iw ix ki iz ja jb jc hb bi translated">“以下类是从我们的服务定义中生成的:</p><p id="8839" class="if ig kf ih b ii ij ik il im in io ip kg ir is it kh iv iw ix ki iz ja jb jc hb bi translated"><code class="du lk ll lm jr b">Feature.java</code>、<code class="du lk ll lm jr b">Point.java</code>、<code class="du lk ll lm jr b">Rectangle.java</code>以及其他包含所有协议缓冲区代码以填充、序列化和检索我们的请求和响应消息类型的代码。</p><p id="a4e5" class="if ig kf ih b ii ij ik il im in io ip kg ir is it kh iv iw ix ki iz ja jb jc hb bi translated"><code class="du lk ll lm jr b">RouteGuideGrpc.java</code>其中包含(以及一些其他有用的代码):</p><p id="69aa" class="if ig kf ih b ii ij ik il im in io ip kg ir is it kh iv iw ix ki iz ja jb jc hb bi translated">一个用于<code class="du lk ll lm jr b">RouteGuide</code>服务器实现<code class="du lk ll lm jr b">RouteGuideGrpc.RouteGuideImplBase</code>的基类，具有<code class="du lk ll lm jr b">RouteGuide</code>服务中定义的所有方法。</p><p id="184a" class="if ig kf ih b ii ij ik il im in io ip kg ir is it kh iv iw ix ki iz ja jb jc hb bi translated"><em class="hi">存根</em>类，客户端可以使用它们与<code class="du lk ll lm jr b">RouteGuide</code>服务器对话。"</p></blockquote><p id="26d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">！！！</strong>文档使用了一个不同的例子:<code class="du lk ll lm jr b"><em class="kf">RouteGuide</em></code>。并表示应该生成<code class="du lk ll lm jr b"><em class="kf">RouteGuideGrpc</em></code>。上述命令在任何情况下都不会产生<code class="du lk ll lm jr b"><em class="kf">RouteGuideGrpc</em></code>。此外，也不会生成AddressGuideGrpc。但是官方文件说<strong class="ih hj">服务器应该实现生成的基类(</strong> <code class="du lk ll lm jr b"><em class="kf">RouteGuideImplBase</em></code> <strong class="ih hj">)，这个基类位于Grpc文件</strong>里面。关于你的原型文件，应该有一个包含所有方法定义的基类。文档中没有任何关于该文件如何生成的信息。你很容易在这一步停滞不前。经过一番研究的结果是:</p><ul class=""><li id="6090" class="kj kk hi ih b ii ij im in iq kl iu km iy kn jc ko kp kq kr bi translated">你需要使用<strong class="ih hj">协议插件</strong>来生成这个重要的文件。</li></ul><div class="ks kt ez fb ku kv"><a href="https://stackoverflow.com/questions/31029675/protoc-not-generating-service-stub-files/31031346#31031346" rel="noopener  ugc nofollow" target="_blank"><div class="kw ab dw"><div class="kx ab ky cl cj kz"><h2 class="bd hj fi z dy la ea eb lb ed ef hh bi translated">协议不生成服务存根文件</h2><div class="lc l"><h3 class="bd b fi z dy la ea eb lb ed ef dx translated">感谢贡献一个堆栈溢出的答案！请务必回答问题。提供详细信息并分享…</h3></div><div class="ld l"><p class="bd b fp z dy la ea eb lb ed ef dx translated">stackoverflow.com</p></div></div><div class="le l"><div class="ln l lg lh li le lj jo kv"/></div></div></a></div><p id="aaf4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">描述在哪里以及如何下载的插件报告:</p><div class="ks kt ez fb ku kv"><a href="https://github.com/grpc/grpc-java/tree/master/compiler" rel="noopener  ugc nofollow" target="_blank"><div class="kw ab dw"><div class="kx ab ky cl cj kz"><h2 class="bd hj fi z dy la ea eb lb ed ef hh bi translated">grpc/grpc-java</h2><div class="lc l"><h3 class="bd b fi z dy la ea eb lb ed ef dx translated">这将从. proto文件的服务定义中生成Java接口。它与Protobuf一起工作…</h3></div><div class="ld l"><p class="bd b fp z dy la ea eb lb ed ef dx translated">github.com</p></div></div><div class="le l"><div class="lo l lg lh li le lj jo kv"/></div></div></a></div><p id="7e81" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以我生成所有源代码的最后一个命令如下:</p><pre class="jf jg jh ji fd jq jr js jt aw ju bi"><span id="c006" class="jv jw hi jr b fi jx jy l jz ka">protoc -plugin=protoc-gen-grpc-java=/PATH/protoc-gen-grpc-java-1.26.0-osx-x86_64.exe SOURCE_DIST -java_out=DEST_DIR -I=DEST_DIR    -grpc-java_out=DEST_DIR</span></pre><blockquote class="kc kd ke"><p id="87f4" class="if ig kf ih b ii ij ik il im in io ip kg ir is it kh iv iw ix ki iz ja jb jc hb bi translated">-plugin = protoco-gen-grpc-Java</p></blockquote><p id="3e7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">生成XXImplBase类。</p><p id="e5a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">PS:你需要给macos上的可执行插件权限。</p><p id="6948" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://stackoverflow.com/questions/55023435/grpc-out-protoc-gen-grpc-plugin-failed-with-status-code-1-on-osx-java" rel="noopener ugc nofollow" target="_blank">https://stack overflow . com/questions/55023435/grpc-out-protocol-gen-grpc-plugin-failed-with-status-code-1-on-OS x-Java</a></p><p id="f13d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">源已生成。模特班和AddressGuideGrpc.java都准备好了。下一步是创建一个maven项目。将源代码复制到项目中。并添加以下依赖项。</p><pre class="jf jg jh ji fd jq jr js jt aw ju bi"><span id="d3de" class="jv jw hi jr b fi jx jy l jz ka">&lt;dependency&gt;<br/>    &lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;<br/>    &lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;<br/>    &lt;version&gt;3.11.0&lt;/version&gt;<br/>&lt;/dependency&gt;<br/>&lt;dependency&gt;<br/>    &lt;groupId&gt;io.grpc&lt;/groupId&gt;<br/>    &lt;artifactId&gt;grpc-stub&lt;/artifactId&gt;<br/>    &lt;version&gt;1.26.0&lt;/version&gt;<br/>&lt;/dependency&gt;<br/>&lt;dependency&gt;<br/>    &lt;groupId&gt;io.grpc&lt;/groupId&gt;<br/>    &lt;artifactId&gt;grpc-protobuf&lt;/artifactId&gt;<br/>    &lt;version&gt;1.26.0&lt;/version&gt;<br/>&lt;/dependency&gt;</span></pre><p id="dd46" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完整代码的Github链接:</p><div class="ks kt ez fb ku kv"><a href="https://github.com/yunuskilicdev/grpcdemo" rel="noopener  ugc nofollow" target="_blank"><div class="kw ab dw"><div class="kx ab ky cl cj kz"><h2 class="bd hj fi z dy la ea eb lb ed ef hh bi translated">yunuskilidev/grpcdemo</h2><div class="lc l"><h3 class="bd b fi z dy la ea eb lb ed ef dx translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="ld l"><p class="bd b fp z dy la ea eb lb ed ef dx translated">github.com</p></div></div><div class="le l"><div class="lp l lg lh li le lj jo kv"/></div></div></a></div><p id="eadf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 2-) gRPC服务器</strong></p><pre class="jf jg jh ji fd jq jr js jt aw ju bi"><span id="49e1" class="jv jw hi jr b fi jx jy l jz ka">package com.example.tutorial;<br/><br/>import io.grpc.Server;<br/>import io.grpc.ServerBuilder;<br/>import io.grpc.stub.StreamObserver;<br/><br/>import java.io.IOException;<br/>import java.util.ArrayList;<br/>import java.util.Collection;<br/>import java.util.concurrent.TimeUnit;<br/>import java.util.logging.Logger;<br/><br/>public class GrpcServer {<br/>   private static final Logger <em class="kf">logger </em>= Logger.<em class="kf">getLogger</em>(GrpcServer.class.getName());<br/>   <br/>   private final int port;<br/>   private final Server server;<br/>   <br/>   public GrpcServer(int port) {<br/>      this(ServerBuilder.<em class="kf">forPort</em>(port), port);<br/>   }<br/>   <br/>   public GrpcServer(ServerBuilder&lt;?&gt; serverBuilder, int port) {<br/>      this.port = port;<br/>      ArrayList&lt;AddressBook&gt; addressBooks = new ArrayList();<br/>      server = serverBuilder.addService(new AddressGuideService(addressBooks))<br/>                   .build();<br/>   }<br/>   <br/>   public static void main(String[] args) throws IOException, InterruptedException {<br/>      GrpcServer server = new GrpcServer(8980);<br/>      server.start();<br/>      server.blockUntilShutdown();<br/>   }<br/>   <br/>   private void blockUntilShutdown() throws InterruptedException {<br/>      if (server != null) {<br/>         server.awaitTermination();<br/>      }<br/>   }<br/>   <br/>   private void start() throws IOException {<br/>      server.start();<br/>      <em class="kf">logger</em>.info("Server started, listening on " + port);<br/>      Runtime.<em class="kf">getRuntime</em>().addShutdownHook(new Thread() {<br/>         @Override<br/>         public void run() {<br/>            // Use stderr here since the logger may have been reset by its JVM shutdown hook.<br/>            System.<em class="kf">err</em>.println("*** shutting down gRPC server since JVM is shutting down");<br/>            try {<br/>               GrpcServer.this.stop();<br/>            } catch (InterruptedException e) {<br/>               e.printStackTrace(System.<em class="kf">err</em>);<br/>            }<br/>            System.<em class="kf">err</em>.println("*** server shut down");<br/>         }<br/>      });<br/>   }<br/>   <br/>   private void stop() throws InterruptedException {<br/>      if (server != null) {<br/>         server.shutdown().awaitTermination(30, TimeUnit.<em class="kf">SECONDS</em>);<br/>      }<br/>   }<br/>   <br/>   private static class AddressGuideService extends AddressGuideGrpc.AddressGuideImplBase {<br/>      private final Collection&lt;AddressBook&gt; addressbookCollection;<br/>      <br/>      public AddressGuideService(Collection&lt;AddressBook&gt; addressBookCollection) {<br/>         this.addressbookCollection = addressBookCollection;<br/>      }<br/>      <br/>      @Override<br/>      public void getAddressBook(Person request, StreamObserver&lt;AddressBook&gt; responseObserver) {<br/>         responseObserver.onNext(getAddressBook());<br/>         responseObserver.onCompleted();<br/>      }<br/>      <br/>      private AddressBook getAddressBook() {<br/>         return AddressBook.<em class="kf">newBuilder</em>().addPeople(Person.<em class="kf">newBuilder</em>().build()).build();<br/>      }<br/>   }<br/>}</span></pre><blockquote class="kc kd ke"><p id="c22f" class="if ig kf ih b ii ij ik il im in io ip kg ir is it kh iv iw ix ki iz ja jb jc hb bi translated">AddressGuideService扩展了AddressGuideGrpc。AddressGuideImplBase</p></blockquote><p id="6f11" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我前面提到的，我们需要扩展ImplBase类，它是从我们的proto生成的。我们需要覆盖服务。在我们的例子中，我基本上返回了一个空对象。</p><p id="3079" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">启动、停止和阻塞关闭部分与gRPC文件相同。我们的服务器将监听8980端口。</p><p id="c44f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 3-) gRPC客户端</strong></p><pre class="jf jg jh ji fd jq jr js jt aw ju bi"><span id="f0e9" class="jv jw hi jr b fi jx jy l jz ka">package com.example.tutorial;<br/><br/>import io.grpc.ManagedChannel;<br/>import io.grpc.ManagedChannelBuilder;<br/><br/>import java.util.concurrent.TimeUnit;<br/>import java.util.logging.Logger;<br/><br/>public class GrpcClient {<br/>   <br/>   private static final Logger <em class="kf">logger </em>= Logger.<em class="kf">getLogger</em>(GrpcClient.class.getName());<br/>   <br/>   private final ManagedChannel channel;<br/>   private final AddressGuideGrpc.AddressGuideBlockingStub blockingStub;<br/>   private final AddressGuideGrpc.AddressGuideStub asyncStub;<br/>   <br/>   public GrpcClient(String host, int port) {<br/>      this(ManagedChannelBuilder.<em class="kf">forAddress</em>(host, port).usePlaintext());<br/>   }<br/>   <br/>   public GrpcClient(ManagedChannelBuilder&lt;?&gt; channelBuilder) {<br/>      channel = channelBuilder.build();<br/>      blockingStub = AddressGuideGrpc.<em class="kf">newBlockingStub</em>(channel);<br/>      asyncStub = AddressGuideGrpc.<em class="kf">newStub</em>(channel);<br/>   }<br/>   <br/>   public static void main(String[] args) throws InterruptedException {<br/>      GrpcClient grpcClient = null;<br/>      try{<br/>         grpcClient = new GrpcClient("127.0.0.1", 8980);<br/>         AddressBook addressBook = grpcClient.getAddressBook(Person.<em class="kf">newBuilder</em>().build());;<br/>      }catch (Exception e){<br/>      <br/>      }finally {<br/>         grpcClient.shutdown();<br/>      }<br/>   }<br/>   <br/>   public void shutdown() throws InterruptedException {<br/>      channel.shutdown().awaitTermination(5, TimeUnit.<em class="kf">SECONDS</em>);<br/>   }<br/>   <br/>   public AddressBook getAddressBook(Person person) {<br/>      return blockingStub.getAddressBook(person);<br/>   }<br/>}</span></pre><p id="faec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">启动gRPC服务器后，运行客户机并查看预期的结果。</p><p id="b941" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">PS:建议关机后等待终止。</p><p id="9651" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">全部完成</p><p id="4a15" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">谢谢:)</p><p id="67ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">引用:</p><p id="ffc8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1-)<a class="ae jd" href="https://grpc.io/" rel="noopener ugc nofollow" target="_blank">https://grpc.io/</a></p><p id="0998" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2-)<a class="ae jd" href="https://developers.google.com/protocol-buffers/docs/overview" rel="noopener ugc nofollow" target="_blank">https://developers.google.com/protocol-buffers/docs/overvie</a>w</p><p id="6e69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3-)<a class="ae jd" href="https://cloud.google.com/apis/design/proto3" rel="noopener ugc nofollow" target="_blank">https://cloud.google.com/apis/design/proto3</a></p><p id="6041" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4-)<a class="ae jd" href="https://github.com/protocolbuffers/protobuf/blob/master/examples/addressbook.proto" rel="noopener ugc nofollow" target="_blank">https://github . com/protocol buffers/proto buf/blob/master/examples/address book . proto</a></p><p id="7645" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5-)<a class="ae jd" href="https://grpc.io/docs/tutorials/basic/java/" rel="noopener ugc nofollow" target="_blank">https://grpc.io/docs/tutorials/basic/java/</a></p></div></div>    
</body>
</html>