<html>
<head>
<title>Demystifying H2O.ai | Productionizing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">揭秘H2O.ai |生产化</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/demystifying-h2o-ai-productionizing-2d4596b1a895?source=collection_archive---------3-----------------------#2019-03-24">https://medium.com/analytics-vidhya/demystifying-h2o-ai-productionizing-2d4596b1a895?source=collection_archive---------3-----------------------#2019-03-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="ab fe cl ij"><img src="../Images/3315f5d23189c2a50aa6e642a63b24e6.png" data-original-src="https://miro.medium.com/v2/format:webp/1*vG03fma-Ee7OJLHJs4F3WA.png"/></div></figure><p id="058e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在“揭秘H2O”系列的前几篇文章中，我介绍了H2O的概述，如何在python中使用H2O，以及如何为使用H2O的Flow接口的非程序员使用H2O。</p><p id="4192" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这篇文章是为人类揭开H2O.ai神秘面纱系列文章的一部分:)</p><p id="89f5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><a class="ae jk" rel="noopener" href="/@rehan_ahmad/demystifying-h2o-ai-an-overview-debc08850e20">第1部分:揭开H2O.ai的神秘面纱|概述</a></p><p id="69f1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><a class="ae jk" rel="noopener" href="/@rehan_ahmad/demystifying-h2o-ai-using-python-a85986e918d7">第2部分:使用Python揭开H2O.ai的神秘面纱</a></p><p id="6afe" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><a class="ae jk" rel="noopener" href="/@rehan_ahmad/demystifying-h2o-ai-using-h2o-flow-c580f64bee82">第三部分:揭开H2O.ai |使用H2O流的神秘面纱</a></p><p id="81be" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">第4部分:揭开H2O.ai |产品化的神秘面纱</p><p id="e9ce" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在在这篇文章中，让我们看看如何生产我们从H2O得到的模型的例子。这篇文章的目标是开发一个简单的基于H2O的预测模型，将它转换成一个普通的旧Java对象(POJO)，将它与其他Java包一起编译，并将编译后的类文件打包成一个可部署的JAR文件，这样它就可以很容易地部署到任何基于Java的应用服务器上。该模型将接受CSV文件形式的输入数据集，并返回CSV格式的预测输出。</p><p id="6777" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这个例子中，我使用的是H2O流程仪表板示例中的“GBM_Airlines_Classification”流程。如果你不知道如何使用H2O的心流，请浏览这个系列的前一篇文章。</p><figure class="jm jn jo jp fd ii er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es jl"><img src="../Images/96e62b444b7dc6892c02efc8ca0d99de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*81yxeQxLPTsI_7DldqELeA.png"/></div></div></figure><p id="c885" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">按照流程运行每个单元，直到到达要获取模型的最后一个单元。</p><p id="d8fd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">步骤1:将POJO对象下载到本地系统(下载文件夹)。</p><figure class="jm jn jo jp fd ii er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es ju"><img src="../Images/31924880e8919dd34ecdfb8f8f38cc1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YYyShReFVaGaSYrnJ7wsyQ.png"/></div></div></figure><p id="3e35" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">第二步:在<em class="jv">新的</em>终端窗口中下载模型。请注意，H2O必须仍在终端窗口#1中运行:</p><pre class="jm jn jo jp fd jw jx jy jz aw ka bi"><span id="669b" class="kb kc hi jx b fi kd ke l kf kg">$ mkdir experiment<br/>$ cd experiment<br/>$ mv ~/Downloads/gbm_pojo_test.java .<br/>$ curl http://localhost:54321/3/h2o-genmodel.jar &gt; h2o-genmodel.jar</span></pre><p id="0c0c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">第三步:在终端窗口#2中创建一个名为main.java(<code class="du kh ki kj jx b">vim main.java</code>)的新文件，包含以下内容:</p><pre class="jm jn jo jp fd jw jx jy jz aw ka bi"><span id="79d0" class="kb kc hi jx b fi kd ke l kf kg"><strong class="jx hj">import</strong> java.io.<strong class="jx hj">*</strong>;<br/><strong class="jx hj">import</strong> hex.genmodel.easy.RowData;<br/><strong class="jx hj">import</strong> hex.genmodel.easy.EasyPredictModelWrapper;<br/><strong class="jx hj">import</strong> hex.genmodel.easy.prediction.<strong class="jx hj">*</strong>;<br/><br/>public <strong class="jx hj">class</strong> <strong class="jx hj">main</strong> {<br/>  private static String modelClassName <strong class="jx hj">=</strong> "gbm_pojo_test";<br/><br/>  public static void main(String[] args) throws <strong class="jx hj">Exception</strong> {<br/>    hex<strong class="jx hj">.</strong>genmodel<strong class="jx hj">.</strong>GenModel rawModel;<br/>    rawModel <strong class="jx hj">=</strong> (hex<strong class="jx hj">.</strong>genmodel<strong class="jx hj">.</strong>GenModel) Class<strong class="jx hj">.</strong>forName(modelClassName)<strong class="jx hj">.</strong>newInstance();<br/>    EasyPredictModelWrapper model <strong class="jx hj">=</strong> new EasyPredictModelWrapper(rawModel);<br/><br/>    RowData row <strong class="jx hj">=</strong> new RowData();<br/>    row<strong class="jx hj">.</strong>put("Year", "1987");<br/>    row<strong class="jx hj">.</strong>put("Month", "10");<br/>    row<strong class="jx hj">.</strong>put("DayofMonth", "14");<br/>    row<strong class="jx hj">.</strong>put("DayOfWeek", "3");<br/>    row<strong class="jx hj">.</strong>put("CRSDepTime", "730");<br/>    row<strong class="jx hj">.</strong>put("UniqueCarrier", "PS");<br/>    row<strong class="jx hj">.</strong>put("Origin", "SAN");<br/>    row<strong class="jx hj">.</strong>put("Dest", "SFO");<br/><br/>    BinomialModelPrediction p <strong class="jx hj">=</strong> model<strong class="jx hj">.</strong>predictBinomial(row);<br/>    System<strong class="jx hj">.</strong>out<strong class="jx hj">.</strong>println("Label (aka prediction) is flight departure delayed: " <strong class="jx hj">+</strong> p<strong class="jx hj">.</strong>label);<br/>    System<strong class="jx hj">.</strong>out<strong class="jx hj">.</strong>print("Class probabilities: ");<br/>    <strong class="jx hj">for</strong> (int i <strong class="jx hj">=</strong> 0; i <strong class="jx hj">&lt;</strong> p<strong class="jx hj">.</strong>classProbabilities<strong class="jx hj">.</strong>length; i<strong class="jx hj">++</strong>) {<br/>      <strong class="jx hj">if</strong> (i <strong class="jx hj">&gt;</strong> 0) {<br/>        System<strong class="jx hj">.</strong>out<strong class="jx hj">.</strong>print(",");<br/>      }<br/>      System<strong class="jx hj">.</strong>out<strong class="jx hj">.</strong>print(p<strong class="jx hj">.</strong>classProbabilities[i]);<br/>    }<br/>    System<strong class="jx hj">.</strong>out<strong class="jx hj">.</strong>println("");<br/>  }<br/>}</span></pre><p id="5dd3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">步骤4:在终端窗口2中编译POJO。</p><pre class="jm jn jo jp fd jw jx jy jz aw ka bi"><span id="f900" class="kb kc hi jx b fi kd ke l kf kg">$ javac -cp h2o-genmodel.jar -J-Xmx2g -J-XX:MaxPermSize=128m gbm_pojo_test.java main.java</span></pre><p id="e8ff" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">步骤5:在终端窗口2中运行POJO。</p><pre class="jm jn jo jp fd jw jx jy jz aw ka bi"><span id="9eb5" class="kb kc hi jx b fi kd ke l kf kg">For Linux and OS X users: <br/>$ java -cp .:h2o-genmodel.jar main</span><span id="aba8" class="kb kc hi jx b fi kk ke l kf kg">For Windows users: <br/>$ java -cp .;h2o-genmodel.jar main</span><span id="2828" class="kb kc hi jx b fi kk ke l kf kg">--------------------------------------------------------------------<br/>Output:<br/>Label (aka prediction) <strong class="jx hj">is</strong> flight departure delayed: YES<br/>Class probabilities: 0.4319916897116479,0.5680083102883521</span></pre><p id="cb93" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这个帖子是在生产中使用POJO文件的方法之一。把它想象成一个java对象，适用于任何Java对象的所有细微差别也适用于这个对象。</p><p id="3324" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">希望这些关于H2O的系列能给你足够的信息和清晰的画面，让你开始。</p><p id="9a04" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">H2O似乎是任何人的技术堆栈中的一个强大工具，尤其是在没有GPU的情况下处理大量数据时。此外，这将是一个很酷的技术，会让你从你的同行中脱颖而出。</p><blockquote class="kl km kn"><p id="980f" class="im in jv io b ip iq ir is it iu iv iw ko iy iz ja kp jc jd je kq jg jh ji jj hb bi translated">关于我</p></blockquote><p id="5f4d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我是<a class="ae jk" href="https://wavelabs.ai/" rel="noopener ugc nofollow" target="_blank"> Wavelabs.ai </a>的资深机器学习专家。我们Wavelabs帮助您利用人工智能(AI)来彻底改变用户体验并降低成本。我们使用人工智能独特地增强您的产品，以达到您的全部市场潜力。我们试图将尖端研究引入您的应用中。</p><p id="3bd0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们擅长与H2O平台合作，为您提供前所未有的快速、可扩展的机器学习体验。</p><p id="1ae8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">欢迎访问<a class="ae jk" href="https://wavelabs.ai/" rel="noopener ugc nofollow" target="_blank"> Wavelabs.ai </a>了解更多信息。</p></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><p id="96e0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">保持好奇！</p><p id="af87" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">你可以在<a class="ae jk" href="https://www.linkedin.com/in/rehan-a-18675296" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上联系我。</p></div></div>    
</body>
</html>