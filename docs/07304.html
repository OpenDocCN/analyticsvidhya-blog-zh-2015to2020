<html>
<head>
<title>Getting started with React Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React挂钩入门</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/getting-started-with-react-hooks-a21cfb09dc5d?source=collection_archive---------17-----------------------#2020-06-20">https://medium.com/analytics-vidhya/getting-started-with-react-hooks-a21cfb09dc5d?source=collection_archive---------17-----------------------#2020-06-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="96e4" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">如何使用useState()、useEffect()和useContext()</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/63fb93e2d41fb6a608b7ccbaf966b388.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*40Onpelhaj1Rmv1N"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">Joshua Aragon 在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="2ca0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">钩子是特殊的函数，它允许我们在不写类的情况下做各种事情。在钩子发挥作用之前，我们只能在类组件内部使用状态和生命周期方法。但是有了React钩子，现在我们可以用功能组件来做几乎所有的事情，从呈现UI到以一种非常简洁的方式处理状态和逻辑。</p><p id="5013" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们还应该记住，不要在循环、条件或嵌套函数中使用钩子。钩子应该用在功能组件的顶层。</p><p id="0c26" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这篇博文中，我将指导你如何使用3个最常用的React钩子。</p><p id="a43c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们开始吧。</p><h1 id="a144" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">1.使用状态()</h1><p id="6887" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">钩子允许你在你的功能组件中添加和操作状态。为了在组件中使用它，您需要导入它。</p><pre class="iy iz ja jb fd ll lk lm ln aw lo bi"><span id="ea8b" class="lp kl hi lk b fi lq lr l ls lt">import {useState} from 'react'</span></pre><p id="4b05" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后使用数组析构，我们可以简单地编写如下代码。</p><pre class="iy iz ja jb fd ll lk lm ln aw lo bi"><span id="ea67" class="lp kl hi lk b fi lq lr l ls lt">const [state, setState] = useState(initialState)</span></pre><p id="2d08" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您可以将初始状态传递给<code class="du lh li lj lk b">useState()</code>，它会返回保存当前状态值的状态变量和一个处理该状态值的setState函数。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lu lv l"/></div></figure><h1 id="2f1b" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">2.useEffect()</h1><p id="5a87" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated"><code class="du lh li lj lk b">useEffect()</code> hook让我们处理生命周期方法中的逻辑。这意味着无论什么时候影响到你的组件，钩子都会被调用。这些影响在React hooks文档中被称为副作用。</p><p id="cb1f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">首先，您需要导入如下内容。</p><pre class="iy iz ja jb fd ll lk lm ln aw lo bi"><span id="861b" class="lp kl hi lk b fi lq lr l ls lt">import {useEffect} from 'react'</span></pre><p id="8f30" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">对于<code class="du lh li lj lk b">useEffect()</code>我们应该传递一个函数，我们称它为效果。我们可以提供一个数组作为第二个参数。但是如果我们不向<code class="du lh li lj lk b">useEffect()</code>传递一个数组，组件将会重复重新加载。</p><pre class="iy iz ja jb fd ll lk lm ln aw lo bi"><span id="6677" class="lp kl hi lk b fi lq lr l ls lt">useEffect(() =&gt; {<br/>    console.log("Function is being called repeatedly.");<br/>})</span></pre><p id="2488" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">当您将一个空数组作为第二个参数传递时，arrow函数将只在第一次呈现时被调用。</p><pre class="iy iz ja jb fd ll lk lm ln aw lo bi"><span id="2add" class="lp kl hi lk b fi lq lr l ls lt">useEffect(() =&gt; {<br/>    console.log("Function has been called only once.");<br/>},[])</span></pre><p id="7355" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">当我们为第二个参数传递一个数组时，<code class="du lh li lj lk b">useEffect()</code>检查数组值是否已经被改变。所以只有当值不同时，才会调用arrow函数。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lu lv l"/></div></figure><h1 id="4e80" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">3.useContext()</h1><p id="4a56" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated"><code class="du lh li lj lk b">useContext()</code> hook提供了在功能组件中轻松访问上下文的方法。</p><p id="9c2f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><code class="du lh li lj lk b">useContext()</code> hook与上下文API协同工作。上下文API用于React中的状态管理。它被设计成在我们必须处理需要在我们的应用程序中全局使用的数据时使用，例如主题和首选语言。通过使用上下文API，我们可以在组件间共享数据时避免钻取。</p><p id="adb4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">可以使用<code class="du lh li lj lk b">React.createContext</code>创建上下文。</p><pre class="iy iz ja jb fd ll lk lm ln aw lo bi"><span id="69fc" class="lp kl hi lk b fi lq lr l ls lt">const MyContext = React.createContext(defaultValue)</span></pre><p id="755c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">提供者组件用于允许消费组件订阅上下文中的更改。消费组件应该由提供者组件包装。</p><pre class="iy iz ja jb fd ll lk lm ln aw lo bi"><span id="3e1d" class="lp kl hi lk b fi lq lr l ls lt">&lt;MyContext.Provider value = {anyValue}&gt;&lt;/MyContext.Provider&gt;</span></pre><p id="5625" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后在消费组件中使用<code class="du lh li lj lk b">useContext()</code>。<code class="du lh li lj lk b">useContext()</code>可以导入如下。</p><pre class="iy iz ja jb fd ll lk lm ln aw lo bi"><span id="9d12" class="lp kl hi lk b fi lq lr l ls lt">import {useContext} from 'react'</span></pre><p id="9ad7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><code class="du lh li lj lk b">useContext()</code>接受一个上下文对象并返回该对象的上下文值。所以作为参数，将上下文对象传递给<code class="du lh li lj lk b">useContext()</code>，然后我们可以使用组件中的值。</p><pre class="iy iz ja jb fd ll lk lm ln aw lo bi"><span id="6c5e" class="lp kl hi lk b fi lq lr l ls lt">const value = useContext(MyContext)</span></pre><p id="e875" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在让我们试着用一个简单的例子使用<code class="du lh li lj lk b">useContext()</code>来演示如何将颜色主题应用到应用程序中。首先，让我们创建上下文文件。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lu lv l"/></div></figure><p id="d474" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后，由于我们希望为整个应用程序添加颜色主题，我们应该在应用程序组件中使用上下文提供程序。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lu lv l"/></div></figure><p id="bf4c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这里我们可以通过提供主题作为<code class="du lh li lj lk b">ThemeContext.Provider</code>的值来改变主题。如果想要深色主题，可以应用<code class="du lh li lj lk b">value={themes.dark}</code>。</p><p id="f88e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">最后，我们可以在组件中使用<code class="du lh li lj lk b">useContext()</code>来消费上下文。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lu lv l"/></div></figure><p id="2d88" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我希望你能很好地理解如何在React中使用<code class="du lh li lj lk b">useState()</code>、<code class="du lh li lj lk b">useEffect()</code>和<code class="du lh li lj lk b">useContext()</code>钩子。</p><p id="c401" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">编码快乐！</p></div></div>    
</body>
</html>