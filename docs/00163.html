<html>
<head>
<title>ARIMA for Energy consumption data: Part II</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">能源消费数据的ARIMA:第二部分</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/arima-for-energy-consumption-data-part-ii-ac779b40586e?source=collection_archive---------1-----------------------#2018-10-27">https://medium.com/analytics-vidhya/arima-for-energy-consumption-data-part-ii-ac779b40586e?source=collection_archive---------1-----------------------#2018-10-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="bdda" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">来自上一篇文章，<a class="ae jd" rel="noopener" href="/@chantrapornchai/arima-for-energy-data-i-a7b466590af4">https://medium . com/@ chantrapornchai/ARIMA-for-energy-data-I-a7b 466590 af4</a>。我们分析平稳信号并分解信号。</p><p id="a72d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，让我们考虑如何使用ARIMA来创建预测模型。尽量用对数差消除平稳，其中<em class="je"> ts </em>为数据。</p><pre class="jf jg jh ji fd jj jk jl jm aw jn bi"><span id="f7aa" class="jo jp hi jk b fi jq jr l js jt">ts_log = np.log(ts)<br/>ts_log_diff = ts_log — ts_log.shift()</span></pre><p id="0d05" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们放弃NAN值。</p><pre class="jf jg jh ji fd jj jk jl jm aw jn bi"><span id="0450" class="jo jp hi jk b fi jq jr l js jt">ts_log_diff.dropna(inplace=True)</span></pre><p id="f035" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">读取CRAC3.out.csv，并绘制ts_log_diff的acf、pacf</p><figure class="jf jg jh ji fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es ju"><img src="../Images/2473ebb8543e152e56af258ed5d7de47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UkPzc4XAoMIKK52CVrhITw.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">图1</figcaption></figure><p id="20cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用ARIMA，有主要参数(p，d，q)</p><ul class=""><li id="193d" class="kg kh hi ih b ii ij im in iq ki iu kj iy kk jc kl km kn ko bi translated"><strong class="ih hj"> p </strong>是自回归项的个数，</li><li id="74de" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated"><strong class="ih hj"> d </strong>是平稳性所需的非季节性差异的数量，以及</li><li id="1137" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated"><strong class="ih hj"> q </strong>是预测方程中滞后预测误差的数量。</li></ul><p id="c40f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通常d是y的dth差，我们用d=1。p是AR(自回归)项的数目。q是噪声项。p由ACF决定。我们查看值为(尖峰)正值并衰减直至稳定的滞后数。q由PACF决定。尖峰被认为也是衰减的。</p><p id="491e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(<a class="ae jd" href="http://people.duke.edu/~rnau/Notes_on_nonseasonal_ARIMA_models--Robert_Nau.pdf" rel="noopener ugc nofollow" target="_blank">http://people . duke . edu/~ rnau/Notes _ on _ non seasonal _ ARIMA _ models-Robert _ nau . pdf</a>)</p><p id="462a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在此图中，我们分别考虑acf和pacf的截止值为0.8和0.2。让我们考虑p=2，d=1，q=2。</p><pre class="jf jg jh ji fd jj jk jl jm aw jn bi"><span id="7210" class="jo jp hi jk b fi jq jr l js jt">ARIMA(train_log, order=(p,d,q))</span></pre><p id="b90a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们从图2中的残差图得到RSS。对于p=4，d=4，我们得到如图3所示。</p><figure class="jf jg jh ji fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es ku"><img src="../Images/f685caf6aa94c5ffd130ac949abd82b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ABqbfpsYPqp0TcyRr8aXlg.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">图2</figcaption></figure><figure class="jf jg jh ji fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es ku"><img src="../Images/dcde47c812b04c6e92bc6c4b16b75315.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tGYF2WiR2LTOsacbYKaU2w.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">图3</figcaption></figure><p id="3f95" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们计算图3 (4，1，4)的RMSE。训练数据的RMSE = 19.5294(图4)，测试数据的RMSE=2738.1534(图5)。图6结合了训练和测试数据。</p><figure class="jf jg jh ji fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es kv"><img src="../Images/d3d95cdc568c7a43b7954849e4e12df1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hUQtoEPoIXzHws0vAEYWUw.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">图4</figcaption></figure><figure class="jf jg jh ji fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es kv"><img src="../Images/36aae43044c9f2ada33b28e2bc61af71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RdL-8tAuWUoBGTiDfHJvbw.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">图5</figcaption></figure><figure class="jf jg jh ji fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es kw"><img src="../Images/d1a05b3bbd7b3628d44e1a218f4ff71d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xODHfpkKoIL0MAT-PtT2_w.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">图6 (p，d，q)=(4，1，4)</figcaption></figure><p id="2af1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果p=2，d=1，q=2，对于测试数据，我们得到RMSE = 54.4374(训练数据)和RMSE =2729.8434，稍好于(4，1，4)。</p><figure class="jf jg jh ji fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es kw"><img src="../Images/3a79c578779836d1e0bd6f727dc309f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rWIyHaSkh-abRsPyiL1A9A.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">图7: (p，d，q) =(2，1，2)</figcaption></figure><p id="ca19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此处显示了ARIMA的代码。</p><figure class="jf jg jh ji fd jv"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="1178" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们尝试使用auto-arima来寻找最佳参数。</p><p id="032b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" rel="noopener" href="/@chantrapornchai/energy-consumption-prediction-with-auto-arima-66e530a3f673">https://medium . com/@ chantrapornchai/energy-consumption-prediction-with-auto-ARIMA-66e 530 a3 f 673</a></p></div></div>    
</body>
</html>