<html>
<head>
<title>Azure Functions &amp; Event Hub</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AzureåŠŸèƒ½å’Œæ´»åŠ¨ä¸­å¿ƒ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/analytics-vidhya/azure-functions-event-hub-2603e8804f73?source=collection_archive---------1-----------------------#2020-04-20">https://medium.com/analytics-vidhya/azure-functions-event-hub-2603e8804f73?source=collection_archive---------1-----------------------#2020-04-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/a9ff34fda279ef2385ce39a1a060fa55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PrCwQ5zJtUo-MSIzIioZzA.png"/></div></div></figure></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><p id="5d5f" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">åœ¨æˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘è§£é‡Šäº†ä»€ä¹ˆæ˜¯Azure FunctionåŠå…¶ç»„ä»¶ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºä»€ä¹ˆæ˜¯äº‹ä»¶ä¸­å¿ƒï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨Azureå‡½æ•°å¤„ç†æ¥è‡ªäº‹ä»¶ä¸­å¿ƒçš„äº‹ä»¶ã€‚ä»£ç å°†åœ¨Pythonä¸­ã€‚</p><p id="94c4" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">è¦æŸ¥çœ‹æˆ‘ä¹‹å‰å…³äºAzureå‡½æ•°çš„æ–‡ç« ï¼Œè¯·ç‚¹å‡»ä¸‹é¢çš„é“¾æ¥:</p><div class="jv jw ez fb jx jy"><a rel="noopener follow" target="_blank" href="/@maheshwari.mohit/microsoft-azure-functions-e1d8acd246a1"><div class="jz ab dw"><div class="ka ab kb cl cj kc"><h2 class="bd hj fi z dy kd ea eb ke ed ef hh bi translated">å¾®è½¯Azureå‡½æ•°</h2><div class="kf l"><h3 class="bd b fi z dy kd ea eb ke ed ef dx translated">ä»€ä¹ˆæ˜¯Azureå‡½æ•°ï¼Ÿ</h3></div><div class="kg l"><p class="bd b fp z dy kd ea eb ke ed ef dx translated">medium.com</p></div></div><div class="kh l"><div class="ki l kj kk kl kh km io jy"/></div></div></a></div></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><blockquote class="kn ko kp"><p id="0a8f" class="ix iy kq iz b ja jb jc jd je jf jg jh kr jj jk jl ks jn jo jp kt jr js jt ju hb bi translated"><strong class="iz hj">ä»€ä¹ˆæ˜¯æ´»åŠ¨ä¸­å¿ƒï¼Ÿ</strong></p></blockquote><p id="730a" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">Azure Event Hubæ˜¯ä¸€ä¸ªå¤§æ•°æ®æµå¹³å°&amp;äº‹ä»¶æ‘„å–ç³»ç»Ÿã€‚å®ƒåŸºäºå‘å¸ƒ-è®¢é˜…æ¨¡å‹ã€‚ç±»ä¼¼é˜¿å¸•å¥‡å¡å¤«å¡ã€‚Event Hubæä¾›ä½å»¶è¿Ÿçš„åˆ†å¸ƒå¼æµå¤„ç†å¹³å°ï¼Œå¹¶ä¸Azureå†…å¤–çš„æ•°æ®å’Œåˆ†ææœåŠ¡æ— ç¼é›†æˆã€‚</p><blockquote class="kn ko kp"><p id="1ece" class="ix iy kq iz b ja jb jc jd je jf jg jh kr jj jk jl ks jn jo jp kt jr js jt ju hb bi translated"><strong class="iz hj">å…³é”®æœ¯è¯­&amp;æ´»åŠ¨ä¸­å¿ƒçš„ç»„æˆéƒ¨åˆ†ã€‚</strong></p></blockquote><ol class=""><li id="0947" class="ku kv hi iz b ja jb je jf ji kw jm kx jq ky ju kz la lb lc bi translated"><strong class="iz hj"> <em class="kq">äº‹ä»¶ä¸­å¿ƒåç§°ç©ºé—´â†’ </em> </strong>è¿™äº›æ˜¯åŒ…å«æˆ–å­˜å‚¨äº‹ä»¶ä¸­å¿ƒçš„å®¹å™¨ã€‚ä¹Ÿç§°ä¸ºé˜¿å¸•å¥‡å¡å¤«å¡å¼çš„è¯é¢˜ã€‚å•ä¸ªäº‹ä»¶ä¸­å¿ƒå‘½åç©ºé—´å¯ä»¥å­˜å‚¨å¤šä¸ªäº‹ä»¶ä¸­å¿ƒã€‚</li><li id="45d3" class="ku kv hi iz b ja ld je le ji lf jm lg jq lh ju kz la lb lc bi translated"><strong class="iz hj"> <em class="kq"> Event Hub â†’ </em> </strong>è¿™äº›æ˜¯è®°å½•å‘å¸ƒçš„å­˜å‚¨ã€‚å®ƒç±»ä¼¼äºå¡å¤«å¡ä¸­çš„ä¸»é¢˜ã€‚å®ƒç”±æˆ‘ä»¬å¯ä»¥åœ¨Azure Portalä¸Šåˆ›å»ºäº‹ä»¶ä¸­å¿ƒæ—¶å®šä¹‰çš„åˆ†åŒºç»„æˆã€‚</li><li id="d24f" class="ku kv hi iz b ja ld je le ji lf jm lg jq lh ju kz la lb lc bi translated"><strong class="iz hj"> <em class="kq">äº‹ä»¶æ•°æ®â†’ </em> </strong>å®ƒåŒ…å«äº‹ä»¶çš„ä¸»ä½“ï¼Œæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æµã€‚äº‹ä»¶ä»¥äºŒè¿›åˆ¶å½¢å¼å­˜å‚¨åœ¨åˆ†åŒºä¸­ã€‚</li><li id="8abd" class="ku kv hi iz b ja ld je le ji lf jm lg jq lh ju kz la lb lc bi translated"><strong class="iz hj"> <em class="kq">å‘å¸ƒè€…â†’ </em> </strong>ä»»ä½•å‘äº‹ä»¶ä¸­å¿ƒå‘é€/å‘å¸ƒæ•°æ®/äº‹ä»¶çš„å®ä½“ã€‚Publisherå¯ä»¥ä½¿ç”¨ä¸¤ç§ç±»å‹çš„åè®®æ¥å‘é€/å‘å¸ƒæ•°æ®ï¼Œå³HTTPå’ŒAMQPã€‚å¯¹äºå°‘é‡æ•°æ®ï¼Œä½¿ç”¨HTTPï¼Œå¯¹äºå¤§é‡æ•°æ®ï¼Œä½¿ç”¨AMQPã€‚</li><li id="f9e2" class="ku kv hi iz b ja ld je le ji lf jm lg jq lh ju kz la lb lc bi translated"><strong class="iz hj"> <em class="kq">åˆ†åŒºâ†’ </em> </strong>åˆ†åŒºå°±åƒäº‹ä»¶ä¸­å¿ƒçš„ä¸€ä¸ªå¤§å—ï¼Œå‘å¸ƒè€…å°†åœ¨è¿™é‡Œå‘å¸ƒäº‹ä»¶ã€‚åœ¨Event Hubsä¸­ï¼Œå³ä½¿æ¶ˆè´¹è€…å·²ç»è¯»å–äº†æ•°æ®ï¼Œåˆ†åŒºä¹Ÿä¼šä¿ç•™æ•°æ®ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜ç»´æŠ¤ä¸€ä¸ªå¯è‡ªå®šä¹‰çš„ä¿ç•™æœŸï¼Œå¹¶ä¸”ä¸å¯èƒ½æ‰‹åŠ¨åˆ é™¤äº‹ä»¶ã€‚</li><li id="33ed" class="ku kv hi iz b ja ld je le ji lf jm lg jq lh ju kz la lb lc bi translated"><strong class="iz hj"> <em class="kq">æ¶ˆè´¹ç¾¤ä½“â†’ </em> </strong>æ¶ˆè´¹ç¾¤ä½“å°±åƒæ˜¯ä¸€ä¸ªäº‹ä»¶çš„è§‚ç‚¹æ¢çº½ã€‚å•ä¸ªæ¶ˆè´¹è€…ç¾¤ä½“å¯ä»¥ç”±ä¸åŒçš„æ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œæ¯ä¸ªæ¶ˆè´¹è€…éƒ½æœ‰å•ç‹¬çš„äº‹ä»¶è§†å›¾ï¼Œå¹¶ä¸”å¯ä»¥ç›¸åº”åœ°ä»¥ä»–ä»¬è‡ªå·±çš„é€Ÿåº¦å’Œåç§»é‡æ¶ˆè´¹ã€‚ä¸€ä¸ªæ´»åŠ¨ä¸­å¿ƒå¯ä»¥æœ‰å¤šä¸ªæ¶ˆè´¹è€…ç¾¤ä½“ã€‚</li><li id="efcb" class="ku kv hi iz b ja ld je le ji lf jm lg jq lh ju kz la lb lc bi translated"><strong class="iz hj"> <em class="kq">æ•è·æ•°æ®â†’ </em> </strong>åˆ›å»ºæ´»åŠ¨ä¸­å¿ƒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¯ç”¨æ•è·æ•°æ®é€‰é¡¹ã€‚å¦‚æœæˆ‘ä»¬å¸Œæœ›åœ¨ä»¥åçš„æŸä¸ªæ—¶é—´ç‚¹ï¼Œç”šè‡³åœ¨ä¿ç•™æœŸç»“æŸåï¼Œåœ¨äº‹ä»¶ä¸­å¿ƒä¿ç•™ç”Ÿäº§è€…å‘é€çš„äº‹ä»¶ï¼Œè¿™ä¸ªé€‰é¡¹æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚</li></ol></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><p id="3f3e" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">åœ¨æœ¬å¸–ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•æŸ¥çœ‹ä»£ç å’Œéƒ¨ç½²azureå‡½æ•°ï¼Œåªè¦äº‹ä»¶ä¸­å¿ƒçš„ç”Ÿäº§è€…å‘å¸ƒä»»ä½•äº‹ä»¶ï¼Œå°±ä¼šè§¦å‘è¯¥å‡½æ•°ã€‚ç„¶åï¼Œå°†ä½¿ç”¨å‡½æ•°ä¸­çš„è¾“å‡ºç»‘å®šæˆ–å®é™…ä»£ç å°†è¯¥äº‹ä»¶æ•°æ®å­˜å‚¨åˆ°blobå­˜å‚¨ä¸­ã€‚</p><p id="6a73" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated"><strong class="iz hj">å…ˆå†³æ¡ä»¶â†’ </strong></p><ul class=""><li id="c9a3" class="ku kv hi iz b ja jb je jf ji kw jm kx jq ky ju li la lb lc bi translated">AzureåŠŸèƒ½æ ¸å¿ƒå·¥å…·</li><li id="aedf" class="ku kv hi iz b ja ld je le ji lf jm lg jq lh ju li la lb lc bi translated">Azure CLI</li><li id="8b6f" class="ku kv hi iz b ja ld je le ji lf jm lg jq lh ju li la lb lc bi translated">è®¡ç®—æœºç¼–ç¨‹è¯­è¨€</li><li id="9f15" class="ku kv hi iz b ja ld je le ji lf jm lg jq lh ju li la lb lc bi translated">ä¸€ä¸ªå‡½æ•°åº”ç”¨ç¨‹åº[åœ¨æœ¬åœ°ç³»ç»Ÿä¸Š][æŸ¥çœ‹æˆ‘ä»¥å‰çš„ä¸€ç¯‡å…³äºå¦‚ä½•åˆ›å»ºå‡½æ•°åº”ç”¨ç¨‹åºçš„æ–‡ç« ]</li></ul><blockquote class="kn ko kp"><p id="fe1c" class="ix iy kq iz b ja jb jc jd je jf jg jh kr jj jk jl ks jn jo jp kt jr js jt ju hb bi translated">éµå¾ªä»¥ä¸‹æ­¥éª¤â†’</p></blockquote><ol class=""><li id="2bad" class="ku kv hi iz b ja jb je jf ji kw jm kx jq ky ju kz la lb lc bi translated"><strong class="iz hj">æ‰“å¼€æ‚¨åœ¨æœ¬åœ°ç³»ç»Ÿåˆ›å»ºçš„åŠŸèƒ½appã€‚</strong></li><li id="7361" class="ku kv hi iz b ja ld je le ji lf jm lg jq lh ju kz la lb lc bi translated"><strong class="iz hj">æ‰“å¼€local.settings.jsonæ–‡ä»¶</strong></li></ol><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="2b35" class="ls lt hi lo b fi lu lv l lw lx">{</span><span id="d73f" class="ls lt hi lo b fi ly lv l lw lx">"IsEncrypted": false,</span><span id="879c" class="ls lt hi lo b fi ly lv l lw lx">"Values": {</span><span id="afbf" class="ls lt hi lo b fi ly lv l lw lx">"FUNCTIONS_WORKER_RUNTIME": "python",</span><span id="ea2b" class="ls lt hi lo b fi ly lv l lw lx"><strong class="lo hj">"AzureWebJobsStorage"</strong>: <strong class="lo hj">[Paste the Storage account connection string which is linked with your Azure function that you have Created on Azure Portal]</strong>,</span><span id="5cbe" class="ls lt hi lo b fi ly lv l lw lx">"FUNCTIONS_EXTENSION_VERSION": "~2",</span><span id="a169" class="ls lt hi lo b fi ly lv l lw lx"><strong class="lo hj">"receiverConnectionString":</strong> <strong class="lo hj">[Paste the Endpoint Connection String of the EventHubNamespace here in double quotes and remove these brackets.],</strong></span><span id="a703" class="ls lt hi lo b fi ly lv l lw lx"><strong class="lo hj">"MyStorageConnectionString": [Paste the Endpoint Connection String of the blob storage account here in double quotes and remove these brackets.]</strong></span><span id="4adf" class="ls lt hi lo b fi ly lv l lw lx">},</span><span id="09b1" class="ls lt hi lo b fi ly lv l lw lx">"ConnectionStrings": {}</span><span id="d829" class="ls lt hi lo b fi ly lv l lw lx">}</span></pre><p id="39af" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">3.<strong class="iz hj">æ‰“å¼€function.jsonæ–‡ä»¶ã€‚</strong></p><p id="76e9" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å°†ç¼–å†™ä»£ç å°†azureå‡½æ•°ä¸äº‹ä»¶ä¸­å¿ƒç»‘å®šï¼Œè¿™æ ·å®ƒå°†åœ¨ç”Ÿæˆå™¨å‘å¸ƒä»»ä½•æ–°äº‹ä»¶æ—¶è‡ªåŠ¨è¿è¡Œï¼Œå¹¶å°†ä¸ºblobå­˜å‚¨æŒ‡å®šè¾“å‡ºç»‘å®šã€‚</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="1574" class="ls lt hi lo b fi lu lv l lw lx">{</span><span id="1509" class="ls lt hi lo b fi ly lv l lw lx">"scriptFile": "__init__.py",</span><span id="4009" class="ls lt hi lo b fi ly lv l lw lx">"bindings": [{</span><span id="703f" class="ls lt hi lo b fi ly lv l lw lx"><strong class="lo hj">"type": "eventHubTrigger"</strong>,</span><span id="8419" class="ls lt hi lo b fi ly lv l lw lx">"name": "events",</span><span id="a750" class="ls lt hi lo b fi ly lv l lw lx">"direction": "in",</span><span id="4cd2" class="ls lt hi lo b fi ly lv l lw lx"><strong class="lo hj">"eventHubName"</strong>: <strong class="lo hj">[Enter the name of your event hub in double quotes and remove these brackets.]</strong>,</span><span id="be59" class="ls lt hi lo b fi ly lv l lw lx"><strong class="lo hj">"connection":</strong> <strong class="lo hj">"receiverConnectionString"</strong>,</span><span id="cfbc" class="ls lt hi lo b fi ly lv l lw lx">"cardinality": "many",</span><span id="a66c" class="ls lt hi lo b fi ly lv l lw lx">"consumerGroup": "$Default",</span><span id="13a7" class="ls lt hi lo b fi ly lv l lw lx">"dataType": "binary"</span><span id="0d04" class="ls lt hi lo b fi ly lv l lw lx">},<br/>{<br/><strong class="lo hj">"name": "outputblob"</strong>,       <br/>"type": "blob",       <br/><strong class="lo hj">"path": [Enter the path of the folder where you want to store the data in double quotes and remove these brackets.]</strong>,       <br/><strong class="lo hj">"connection": "MyStorageConnectionString"</strong>,       <br/>"direction": "out"</span><span id="29ce" class="ls lt hi lo b fi ly lv l lw lx">}]</span><span id="86f6" class="ls lt hi lo b fi ly lv l lw lx">}</span></pre><ul class=""><li id="2124" class="ku kv hi iz b ja jb je jf ji kw jm kx jq ky ju li la lb lc bi translated">åœ¨ä¸Šé¢çš„ä»£ç ä¸­,<code class="du lz ma mb lo b">"type":"eventHubTrigger"</code>æŒ‡å®šäº†azureå‡½æ•°åœ¨äº‹ä»¶ä¸­å¿ƒçš„è§¦å‘å™¨ã€‚</li><li id="6e1f" class="ku kv hi iz b ja ld je le ji lf jm lg jq lh ju li la lb lc bi translated"><code class="du lz ma mb lo b">"eventHubName":"Value"</code>æŒ‡å®šäº‹ä»¶å°†è¢«æ¥æ”¶åˆ°å“ªä¸ªäº‹ä»¶ä¸­å¿ƒï¼Œä»¥ä¾¿azureå‡½æ•°å°†è¢«è§¦å‘ã€‚</li><li id="ecff" class="ku kv hi iz b ja ld je le ji lf jm lg jq lh ju li la lb lc bi translated">ç¡®ä¿local.setting.jsonæ–‡ä»¶ä¸­å­˜åœ¨â€œè¿æ¥â€çš„å€¼ï¼Œå³<code class="du lz ma mb lo b">"connection":"receiverConnectionString"</code>ã€‚å¦‚æœæ‚¨å‘ä¸Šæ»šåŠ¨å¹¶æ£€æŸ¥local.setting.jsonçš„ä»£ç ï¼Œæ‚¨ä¼šçœ‹åˆ°<em class="kq">â€œreceiver connection stringâ€é”®å‡ºç°åœ¨å…¶ä¸­ã€‚</em></li><li id="cc02" class="ku kv hi iz b ja ld je le ji lf jm lg jq lh ju li la lb lc bi translated"><code class="du lz ma mb lo b">"name":"outputblob"</code>æ˜¯blobå­˜å‚¨çš„è¾“å‡ºç»‘å®šçš„åç§°ï¼Œå°†åœ¨ä»£ç ä¸­ä½¿ç”¨å®ƒæ¥å¼•ç”¨è¾“å‡ºblobã€‚æ‚¨å¯ä»¥ç»™å‡ºä»»ä½•åç§°ï¼Œåªè¦ç¡®ä¿åœ¨ä»£ç ä¸­ä½¿ç”¨ç›¸åŒçš„åç§°å³å¯ï¼Œä¾‹å¦‚__init__ã€‚pyæ–‡ä»¶ã€‚</li><li id="b732" class="ku kv hi iz b ja ld je le ji lf jm lg jq lh ju li la lb lc bi translated"><code class="du lz ma mb lo b">"path":"Value"</code>è¿™å°†æ˜¯ä½ æƒ³è¦å­˜å‚¨ç”±å‡½æ•°å¤„ç†çš„è¾“å‡ºæ•°æ®çš„æ–‡ä»¶å¤¹æˆ–ç›®å½•çš„è·¯å¾„ã€‚</li><li id="10eb" class="ku kv hi iz b ja ld je le ji lf jm lg jq lh ju li la lb lc bi translated">ç¡®ä¿local.setting.jsonæ–‡ä»¶ä¸­å­˜åœ¨â€œconnectionâ€çš„å€¼ï¼Œå³<code class="du lz ma mb lo b">"connection":"MyStorageConnectionString"</code>ã€‚å¦‚æœæ‚¨å‘ä¸Šæ»šåŠ¨å¹¶æ£€æŸ¥local.setting.jsonçš„ä»£ç ï¼Œæ‚¨ä¼šçœ‹åˆ°<em class="kq">â€œMyStorageConnectionStringâ€é”®å‡ºç°åœ¨å…¶ä¸­ã€‚</em></li></ul><p id="bcd3" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">4.<strong class="iz hj">æ‰“å¼€__Init__ã€‚pyæ–‡ä»¶</strong></p><p id="01c4" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">ä»¥ä¸‹ä»£ç å°†åœ¨ç”Ÿäº§è€…å‘å¸ƒä»»ä½•æ–°äº‹ä»¶åç«‹å³è§¦å‘ï¼Œå¹¶ä½¿ç”¨è¾“å‡ºblobç»‘å®šå˜é‡<em class="kq">â€œoutput blobâ€</em>å°†äº‹ä»¶æ•°æ®æ”¾å…¥è¾“å‡ºblobä¸­</p><blockquote class="kn ko kp"><p id="7b25" class="ix iy kq iz b ja jb jc jd je jf jg jh kr jj jk jl ks jn jo jp kt jr js jt ju hb bi translated"><strong class="iz hj">æ³¨æ„â†’ </strong>è¿™é‡Œæˆ‘è€ƒè™‘çš„æ˜¯ï¼Œç”Ÿäº§è€…å‘å¸ƒåˆ°äº‹ä»¶ä¸­å¿ƒçš„äº‹ä»¶æ˜¯jsonæ ¼å¼çš„ã€‚</p></blockquote><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="e9f2" class="ls lt hi lo b fi lu lv l lw lx">import logging <br/>import azure.functions as func   </span><span id="842a" class="ls lt hi lo b fi ly lv l lw lx">def main(events: List[func.EventHubEvent],outputblob: func.Out[func.InputStream]):   <br/>  <br/>    for event in events:<br/>        event_data = event.get_body()</span><span id="621c" class="ls lt hi lo b fi ly lv l lw lx">        logging.info(event_data)</span><span id="870d" class="ls lt hi lo b fi ly lv l lw lx">        my_json = event_data.decode('utf8').replace("'", '"')</span><span id="e0ed" class="ls lt hi lo b fi ly lv l lw lx">        event_data_json = json.loads(my_json)<br/>      <br/>        outputblob.set(event_data_json)</span></pre><blockquote class="kn ko kp"><p id="8180" class="ix iy kq iz b ja jb jc jd je jf jg jh kr jj jk jl ks jn jo jp kt jr js jt ju hb bi translated"><strong class="iz hj">æ³¨æ„â†’ </strong>ä¸Šé¢ä»£ç çš„é—®é¢˜æ˜¯è¾“å‡ºçš„blobä¸<em class="hi"> function.json </em>æ–‡ä»¶ä¸­æåˆ°çš„ç‰¹å®šè·¯å¾„ç›¸å…³è”ã€‚æ‰€ä»¥æ¯æ¬¡è¿™ä¸ªå‡½æ•°è§¦å‘æ—¶ï¼Œæ•°æ®éƒ½ä¼šè¢«é‡å†™åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚æ­¤å¤–ï¼Œéå¸¸å°‘çš„å®šåˆ¶æ˜¯å¯èƒ½çš„ã€‚å¦‚æœä½ éœ€è¦æ›´å¤šçš„å®šåˆ¶æ–¹å¼ï¼Œç„¶åæ£€æŸ¥ç¬¬5æ­¥ã€‚</p></blockquote><p id="9c94" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">5.<strong class="iz hj">ä»__init__ä¸­åˆ é™¤ä¹‹å‰çš„ä»£ç ã€‚å¤åˆ¶æ–‡ä»¶å¹¶ç²˜è´´ä¸‹é¢çš„ä»£ç ã€‚</strong></p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="fcd0" class="ls lt hi lo b fi lu lv l lw lx">import logging<br/>import azure.functions as func<br/>from azure.storage.blob import BlobServiceClient<br/>import uuid</span><span id="961e" class="ls lt hi lo b fi ly lv l lw lx">def main(events: List[func.EventHubEvent]):<br/>   <br/>    blob_service_client =BloBlobServiceClient.from_connection_string<br/>       (conn_str=<strong class="lo hj"><em class="kq">[Enter the Endpoint connection string for the blob storage account in double quotes and remove these brackets.]</em></strong>)</span><span id="0b37" class="ls lt hi lo b fi ly lv l lw lx">    try:<br/>        container_client = blob_service_client.getContainer_client("myContainer")</span><span id="7bf5" class="ls lt hi lo b fi ly lv l lw lx">    except:<br/>        container_client = blob_service_client.create_container("myContainer")</span><span id="313d" class="ls lt hi lo b fi ly lv l lw lx">    for event in events:<br/>        event_data = event.get_body()<br/>        logging.info(event_data)<br/>        my_json = event_data.decode('utf8').replace("'", '"')<br/>        event_data_json = json.loads(my_json)    <br/>    <br/>        container_client.upload_blob(name= uuid.uuid4(), data=event_data_json)<br/></span></pre><p id="4c3c" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">6.<strong class="iz hj">ä¿å­˜æ‰€æœ‰æ–‡ä»¶ã€‚</strong></p><p id="fdc8" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">7.<strong class="iz hj">è¿è¡Œå‘½ä»¤</strong> <code class="du lz ma mb lo b"><strong class="iz hj">func start</strong></code> <strong class="iz hj">å¹¶äº«å—ğŸ™‚ã€‚</strong></p></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><blockquote class="kn ko kp"><p id="f744" class="ix iy kq iz b ja jb jc jd je jf jg jh kr jj jk jl ks jn jo jp kt jr js jt ju hb bi translated"><strong class="iz hj">æ„Ÿè°¢æ‚¨é˜…è¯»æœ¬æ•™ç¨‹ã€‚æˆ‘å¸Œæœ›ä½ å–œæ¬¢å¹¶ç†è§£äº†ä»€ä¹ˆæ˜¯event hubï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä½œä¸ºazureåŠŸèƒ½çš„è§¦å‘å™¨ã€‚</strong></p></blockquote></div></div>    
</body>
</html>