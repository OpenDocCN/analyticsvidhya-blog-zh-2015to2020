<html>
<head>
<title>Jupyter Lab on Raspberry PI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于树莓派的Jupyter实验室</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/jupyter-lab-on-raspberry-pi-22876591b227?source=collection_archive---------2-----------------------#2020-08-31">https://medium.com/analytics-vidhya/jupyter-lab-on-raspberry-pi-22876591b227?source=collection_archive---------2-----------------------#2020-08-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/7a972b874cf8e7bdb09f0d042016c3a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cRk2JDsRudWWn6tpW5UiqA.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">照片由<a class="ae iu" href="https://unsplash.com/@harrisonbroadbent?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">哈里森·布罗德本特</a>在<a class="ae iu" href="https://unsplash.com/s/photos/raspberry-pi?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="749c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi jt translated">upyter笔记本电脑和jupyter实验室是许多数据科学项目的首选工作台。对于物联网项目，总是无法连接到Raspberry PI桌面来访问笔记本。我们可以使用SSH通过控制台访问Raspberry PI，但是对于一些应用程序，尤其是计算机视觉，我们仍然需要一些图形用户界面。在本文中，我希望分享一些我发现的在raspberry PI上运行Jupyterlab并从远程机器访问它的技术。</p><h1 id="bdee" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">安装Jupyter实验室</h1><p id="88d5" class="pw-post-body-paragraph iv iw hi ix b iy la ja jb jc lb je jf jg lc ji jj jk ld jm jn jo le jq jr js hb bi translated">使用SSH连接到您的Raspberry PI。安装所有依赖项。稍后我们将使用pip3安装jupyter lab。</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="4567" class="lo kd hi lk b fi lp lq l lr ls">$ sudo apt-get update<br/>$ sudo apt-get install python3-pip<br/>$ sudo pip3 install setuptools<br/>$ sudo apt install libffi-dev<br/>$ sudo pip3 install cffi</span></pre><p id="83ca" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用pip3安装jupyter。如果您正在使用virtualenv，那么请遵循jupyter文档<a class="ae iu" href="https://jupyterlab.readthedocs.io/en/stable/getting_started/installation.html" rel="noopener ugc nofollow" target="_blank">中的说明。</a></p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="f245" class="lo kd hi lk b fi lp lq l lr ls">$ pip3 install jupyterlab</span></pre><p id="304f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为您的笔记本创建一个目录，并启动jupyter lab(可选)</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="e2be" class="lo kd hi lk b fi lp lq l lr ls">$ mkdir notebooks<br/>$ jupyter lab --notebook-dir=~/notebooks</span></pre><p id="6a47" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">或者，您也可以从下面的任何目录启动jupyterlab。</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="087e" class="lo kd hi lk b fi lp lq l lr ls">$ jupyter lab</span></pre><p id="bfc9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这应该会启动jupyterlab运行在树莓pi上的<a class="ae iu" href="https://localhost:8888" rel="noopener ugc nofollow" target="_blank"> https://localhost:8888 </a>上，但是它不能从您的本地机器访问。此外，一旦关闭SSH会话，jupyterlab实例将被终止。</p><p id="dc1e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了解决这个问题，我们需要启动jupyterlab作为一项服务。</p><h1 id="e291" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">将Jupyter实验室设置为服务</h1><p id="6b14" class="pw-post-body-paragraph iv iw hi ix b iy la ja jb jc lb je jf jg lc ji jj jk ld jm jn jo le jq jr js hb bi translated">运行以下命令找到您的jupyter lab二进制文件:</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="5670" class="lo kd hi lk b fi lp lq l lr ls">$ which jupyter-lab<br/>/home/pi/.local/bin/jupyter-lab</span></pre><p id="3e4b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">创建文件<code class="du lt lu lv lk b">/etc/systemd/system/jupyter.service</code></p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="7fd5" class="lo kd hi lk b fi lp lq l lr ls">$ sudo nano /etc/systemd/system/jupyter.service</span></pre><p id="5671" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">内容如下。如果jupyter-lab二进制文件的路径与您的系统不同，请确保替换掉由<code class="du lt lu lv lk b">which jupyter-lab</code>命令返回的路径。</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="c43f" class="lo kd hi lk b fi lp lq l lr ls">[Unit]<br/>Description=Jupyter Lab</span><span id="aad3" class="lo kd hi lk b fi lw lq l lr ls">[Service]<br/>Type=simple<br/>PIDFile=/run/jupyter.pid<br/>ExecStart=/bin/bash -c "<strong class="lk hj">/home/pi/.local/bin/jupyter-lab</strong> --ip="0.0.0.0" --no-browser --notebook-dir=/home/pi/notebooks"<br/>User=pi<br/>Group=pi<br/>WorkingDirectory=/home/pi/notebooks<br/>Restart=always<br/>RestartSec=10</span><span id="1255" class="lo kd hi lk b fi lw lq l lr ls">[Install]<br/>WantedBy=multi-user.target</span></pre><p id="7a8d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">启用该服务，以便在raspberry pi启动时启动它</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="0b01" class="lo kd hi lk b fi lp lq l lr ls">$ sudo systemctl enable jupyter.service<br/>$ sudo systemctl daemon-reload</span></pre><p id="621b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">启动服务:</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="d570" class="lo kd hi lk b fi lp lq l lr ls">$ sudo systemctl start jupyter.service</span></pre><p id="31a6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您也可以使用命令停止该服务:</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="eed4" class="lo kd hi lk b fi lp lq l lr ls">$ sudo systemctl stop jupyter.service</span></pre><p id="97b3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">重新启动raspberry pi，并通过检查服务状态来确保服务正在运行</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="ddd4" class="lo kd hi lk b fi lp lq l lr ls">$ sudo systemctl status jupyter.service</span><span id="1205" class="lo kd hi lk b fi lw lq l lr ls">jupyter.service - Jupyter Notebook<br/>   Loaded: loaded (/etc/systemd/system/jupyter.service; enabled; vendor preset: enabled)<br/>   Active: active (running) since Sun 2020-08-30 16:12:27 PDT; 2s ago<br/> Main PID: 4864 (jupyter-lab)<br/>    Tasks: 1 (limit: 4915)<br/>   CGroup: /system.slice/jupyter.service<br/>           └─4864 /usr/bin/python3 /usr/local/bin/jupyter-lab --ip=0.0.0.0 --no-browser --notebook-dir=/home/pi/notebooks</span></pre><p id="805b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">该服务应该已经启动并运行，现在你可以通过访问<code class="du lt lu lv lk b">http://&lt;rpi ip address&gt;:8888</code>从你的本地机器上访问它</p><figure class="lf lg lh li fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/1bb7ec45a930b8239659558c05171922.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C5s1_fkt6D0t8yk2nfgP2g.png"/></div></div></figure><p id="612f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然而，这也可以从互联网上的任何地方访问(取决于您的路由器设置，防火墙等)。我们可以使用以下三种方法之一来保护它</p><ol class=""><li id="6d19" class="ly lz hi ix b iy iz jc jd jg ma jk mb jo mc js md me mf mg bi translated">添加密码(简单)</li><li id="b5b5" class="ly lz hi ix b iy mh jc mi jg mj jk mk jo ml js md me mf mg bi translated">使用SSL进行加密通信(推荐)</li><li id="5b5c" class="ly lz hi ix b iy mh jc mi jg mj jk mk jo ml js md me mf mg bi translated">SSH端口转发(推荐)</li></ol><h1 id="acb2" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">添加密码</h1><p id="eb2f" class="pw-post-body-paragraph iv iw hi ix b iy la ja jb jc lb je jf jg lc ji jj jk ld jm jn jo le jq jr js hb bi translated">查看您是否有笔记本配置文件<code class="du lt lu lv lk b">jupyter_notebook_config.py</code>。该文件的默认位置是您的主目录中的Jupyter文件夹:</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="bf86" class="lo kd hi lk b fi lp lq l lr ls">/home/pi/.jupyter/jupyter_notebook_config.py</span></pre><p id="b5af" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您还没有Jupyter文件夹，或者如果您的Jupyter文件夹不包含笔记本配置文件，请运行以下命令:</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="ff8f" class="lo kd hi lk b fi lp lq l lr ls">$ jupyter notebook --generate-config<br/>Writing default config to: /home/pi/.jupyter/jupyter_notebook_config.py</span><span id="aef2" class="lo kd hi lk b fi lw lq l lr ls">$ jupyter notebook password<br/>Enter password:  ****<br/>Verify password: ****<br/>[NotebookPasswordApp] Wrote hashed password to /Users/you/.jupyter/jupyter_notebook_config.json</span></pre><p id="3dd0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这可用于重置丢失的密码；或者如果您认为您的凭据已经泄露，并希望更改您的密码。服务器重新启动后，更改密码将使所有登录的会话无效。</p><h1 id="d35a" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">使用SSL进行加密通信</h1><p id="4a6a" class="pw-post-body-paragraph iv iw hi ix b iy la ja jb jc lb je jf jg lc ji jj jk ld jm jn jo le jq jr js hb bi translated">如果你需要使用SSL来保证安全，你可以按照这里的说明<a class="ae iu" href="https://jupyter-notebook.readthedocs.io/en/stable/public_server.html#using-ssl-for-encrypted-communication" rel="noopener ugc nofollow" target="_blank">操作</a></p><h1 id="30fe" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">SSH端口转发(隧道)</h1><blockquote class="mm mn mo"><p id="3147" class="iv iw mp ix b iy iz ja jb jc jd je jf mq jh ji jj mr jl jm jn ms jp jq jr js hb bi translated">这是最安全的方法，但是只要您想要访问jupyterlab，您就需要在本地终端中保持会话活动。如果你喜欢这种方法，那么确保你更新了<code class="du lt lu lv lk b">/etc/systemd/system/jupyter.service</code>并通过移除<code class="du lt lu lv lk b">--ip="0.0.0.0"</code>替换了如下的<code class="du lt lu lv lk b">ExecStart</code></p></blockquote><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="17c3" class="lo kd hi lk b fi lp lq l lr ls">&lt;file:/etc/systemd/system/jupyter.service<!-- -->&gt;<br/>...<br/>ExecStart=/bin/bash -c "/usr/local/bin/jupyter-lab --no-browser --notebook-dir=/home/pi/notebooks"<br/>...</span></pre><p id="dae4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">更新文件后。停止服务，重新加载配置，然后再次启动服务。</p><p id="e498" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在您的raspberry pi上，使用<code class="du lt lu lv lk b">ifconfig</code>或<code class="du lt lu lv lk b">hostname -I</code>命令检索raspberry pi的IP地址</p><p id="cbb1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ssh到raspberry pi，SSH端口转发如下:</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="5de2" class="lo kd hi lk b fi lp lq l lr ls">ssh -L 8888:localhost:8888 pi@192.168.xx.xx</span></pre><p id="f49a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，您可以通过访问<code class="du lt lu lv lk b"><a class="ae iu" href="http://localhost:8888" rel="noopener ugc nofollow" target="_blank">http://localhost:8888</a></code>从本地计算机访问运行在raspberry pi上的jupyterlab</p><figure class="lf lg lh li fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mt"><img src="../Images/35adb3b00b4cfb0e354ffef33952d2f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J4c0l4jOVGd4Q8OLh5vrVA.png"/></div></div></figure></div></div>    
</body>
</html>