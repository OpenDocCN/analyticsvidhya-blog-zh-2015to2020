<html>
<head>
<title>Mapping sun glare (dazzling sun while driving)using Google Street View</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用谷歌街景绘制阳光眩光(驾驶时耀眼的阳光)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/mapping-sun-glare-dazzling-sun-while-driving-using-google-street-view-81c69f1e8238?source=collection_archive---------8-----------------------#2019-09-15">https://medium.com/analytics-vidhya/mapping-sun-glare-dazzling-sun-while-driving-using-google-street-view-81c69f1e8238?source=collection_archive---------8-----------------------#2019-09-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="a72f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">试想一下，每当你在日出时间从西向东行驶或在日落时间从东向西行驶时，你是否会感到刺眼的阳光遮住了你的眼睛，使驾驶变得超级困难？我猜很多人都想知道耀眼的太阳在何时何地出现。当我在波士顿与自由互助保险公司开会时，我有了预测太阳眩光发生的想法。然后我考虑如何预测它。我已经在城市应用程序中使用谷歌街景图像很多年了，我以前的项目Treepedia是一个很好的项目。然后我意识到谷歌街景可能是预测和绘制太阳眩光发生的完美数据集，因为谷歌街景图像与司机的视角相似，这些图像实际上是由汽车收集的。这里是向你展示如何使用谷歌街景和深度学习来预测和绘制太阳眩光的教程。</p><p id="f7e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第一步。数据准备</strong></p><p id="9598" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了收集谷歌街景图像，我们需要首先沿着街道生成样本点。街道地图可以从市政府或TIGER(<a class="ae jd" href="https://www.census.gov/geographies/mapping-files/time-series/geo/tiger-line-file.html" rel="noopener ugc nofollow" target="_blank">https://www . census . gov/geographies/mapping-files/time-series/geo/TIGER-line-file . html</a>)网站上找到。我们可以将每个街道分割成40米的距离，以便创建样本站点。我已经为<a class="ae jd" href="http://senseable.mit.edu/treepedia" rel="noopener ugc nofollow" target="_blank"> Treepedia </a>项目开发了一个<a class="ae jd" href="https://github.com/mittrees/Treepedia_Public/blob/master/Treepedia/createPoints.py" rel="noopener ugc nofollow" target="_blank">代码</a>来创建以前的样本网站。我们可以重用这些代码来创建街道上的示例站点。<strong class="ih hj">图1 </strong> (a)显示了沿马萨诸塞州剑桥街道生成的样本地点。基于这些创建的样本站点的坐标，我们可以使用谷歌街景元数据应用编程接口(API)进一步收集GSV全景的元数据(<strong class="ih hj">图1 </strong> (b))。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/86301d4ce150fa219d2f98ad3fe11b35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7XY5UCgsxMFw1bDhkS7y0A.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated"><strong class="bd ju">图1。</strong>剑桥GSV全景采集的工作流程，(a)创建的样本站点，(b)GSV全景的元数据，(c)使用谷歌地图API采集的一个样本站点的GSV全景。</figcaption></figure><p id="1ef3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第二步。使用PSPNet进行图像分割</strong></p><p id="f647" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">街道级图像中的不同物体会对耀眼的阳光产生不同的影响。例如，天空不会阻挡阳光，而建筑物和树木会阻挡阳光。因此，我们需要从街道级图像中识别不同的对象，以便预测太阳眩光的发生。人工智能的最新进展使得从GSV全景图中准确识别街道上的障碍物成为可能。在这项研究中，我们使用金字塔场景解析网络(PSPNet)，这是一个在ADE20K数据集上训练的深度卷积神经网络，来分割GSV全景图。Github上有很多实现的PSPNet资源库。我建议用MIT CSAIL维护的代码(<a class="ae jd" href="https://github.com/CSAILVision/semantic-segmentation-pytorch" rel="noopener ugc nofollow" target="_blank"> link </a>)。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jv"><img src="../Images/9452e96a42a36c89398eaa47dc549cdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F76orhDCJ0PQoMm8W6AcLA.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated"><strong class="bd ju">图二。</strong>使用金字塔场景解析卷积神经网络(PSPNet)对GSV全景图进行图像分割的结果。</figcaption></figure><p id="f10d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第三步。太阳眩光预测</strong></p><p id="30da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们准备好了一切。然后，我们可以通过在分段的谷歌街景图像上叠加太阳路径来预测太阳眩光。我们可以使用开源python模块- <a class="ae jd" href="https://pysolar.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> Pysolar </a>来计算任何给定时间和位置的太阳位置。下图是太阳位置和驱动器的几何模型。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jw"><img src="../Images/e9aeaadf699ea4129462093f6c19b404.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TuMDlbRZQzYzEDB_tcmdHw.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated"><strong class="bd ju">图3。</strong>太阳位置和车道上车辆位置的几何模型</figcaption></figure><p id="d31c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">太阳位置和车辆的几何模型可以使用街道级图像来建模。下图显示了太阳位置在谷歌街景图像上的叠加。如果太阳的位置在非天空像素上，那么我们可以说太阳被遮挡了。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jx"><img src="../Images/160c05ed3db895eaa34e96880bb875d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WZj4B8BF3U_Twe9LbqZ2LQ.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated"><strong class="bd ju">图4。</strong>7月15日、8月15日、9月15日和10月15日的太阳路径，位于研究区域三个地点的圆柱形谷歌街景全景图(a)和分段圆柱形全景图(b)上。</figcaption></figure><p id="c7f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通常情况下，太阳眩光发生在太阳处于驾驶员的视野范围内，同时太阳没有被遮挡。如果我们假设驾驶员的水平和垂直视角是50度。因此，如果出现太阳眩光，必须满足三个规则，(1)。相对水平角小于25度，(2)太阳和驾驶员之间的相对垂直角小于25度，(3)阳光没有被障碍物阻挡，这意味着太阳位置被投影在天空像素上。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jy"><img src="../Images/d4e1906992b69291658b9eeaba18d043.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J8VgyxZ4on0DH57hgS4XmA.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated"><strong class="bd ju">图5。</strong>将某一时刻的太阳位置投影到柱面GSV全景图上的几何模型。</figcaption></figure><p id="5b84" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">基于生成的谷歌街景图像分割结果和太阳位置模型，我们可以很容易地使用这三个规则来预测太阳眩光图。我已经使用超过30万张谷歌街景图像生成了整个佛罗里达州的太阳眩光发生地图。这里有一个视频展示了佛罗里达州高速公路上的太阳眩光地图。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="jz ka l"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">佛罗里达州的太阳眩光地图</figcaption></figure><p id="5abd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">日落时分，我用iPhone在马萨诸塞州剑桥的微软大楼周围拍照，并验证了结果。在这里你可以看到谷歌街景图像上预测的太阳位置和我拍摄的日落照片的对比。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kb"><img src="../Images/b65c908485e64b77075f8a87244ad0f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XbeDEU8oifg33RmjYTZjgA.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated"><strong class="bd ju">图6。</strong>GSV全景图上预测的太阳路径与2018年7月5日三个不同时间点在同一地点拍摄的三张照片的对比，(a)GSV全景图上7月5日的太阳路径，(b)同一地点不同时间拍摄的三张照片，7月5日的太阳路径在分段的GSV全景图上的叠加，黑色部分代表遮挡像素，白色部分代表天空像素。</figcaption></figure><p id="65b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">验证结果表明，该方法能够准确估计出太阳眩光被遮挡的时间点，误差小于3 min，进一步证明了基于GSV全景图的方法能够以较高的精度估计出太阳光的遮挡情况。</p><p id="2dc2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">参考</strong></p><p id="6c06" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(2019年)李，谢，蔡，黄碧云，邱，赵，赵等。使用谷歌街景预测和测绘太阳眩光发生的新方法。<em class="kc">交通研究C部分:新兴技术</em>，<em class="kc"> 106 </em>，132–144。</p></div></div>    
</body>
</html>