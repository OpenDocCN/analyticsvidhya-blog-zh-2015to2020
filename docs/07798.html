<html>
<head>
<title>All you need to know about RxJS Subjects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于RxJS主题你需要知道的</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/all-you-need-to-know-about-rxjs-subjects-bf90dfb3c1ac?source=collection_archive---------6-----------------------#2020-07-08">https://medium.com/analytics-vidhya/all-you-need-to-know-about-rxjs-subjects-bf90dfb3c1ac?source=collection_archive---------6-----------------------#2020-07-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/997091274d1f0782634138f82f9ac95e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DLB6EHQOLmO-KTaZlMrjMA.jpeg"/></div></div></figure><p id="444d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">主体是一种特殊类型的可观察对象，它在观察者之间共享一条执行路径。</p><p id="dc73" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">把这想象成一个人在满是人的房间里对着麦克风说话。他们的信息(主题)被同时传送给许多人(观察者)。这是多角色扮演的基础。典型的单播可观察性相当于一对一的对话。</p><p id="2de5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">默认情况下，可观察对象是单播的，这实质上意味着发出值的源可观察对象只能被一个订阅者订阅，这不是很有用，因为对于实时UI应用程序，我们希望通过同时订阅值来在不同的地方显示相同的值。主题通过启用多播解决了这个问题。</p><p id="09d8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">每当一个主题被一个新的观察者订阅时，该观察者就在该主题的注册表中注册，这样，每当它发出下一个值时，就会从该主题接收新的值。如果一个订阅者订阅了一个主题，它不会影响有多少其他订阅者连接到同一个主题。它类似于本地的addEventListener()方法，该方法不知道有多少事件侦听器正在侦听单个DOM元素上触发的同一事件。</p><p id="9bb7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">主语是宾语有<strong class="is hj">下一个(v) </strong>、<strong class="is hj">错误(e) </strong>和<strong class="is hj">完成()</strong>的方法。调用next()方法来设置Subject的下一个值，在发生错误时调用error()，而complete()方法用于通知源没有更多的值要发送给观察者。</p><p id="5109" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面列出了4种类型的主题。</p><p id="ee43" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">1 .主题</p><p id="141b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2 .行为主体</p><p id="6175" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3 .重播主题</p><p id="42cf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">4 .异步主题</p><p id="ff48" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">主题的上述变体都属于可观察类型，除了它们发出的数据之外，非常相似。</p><p id="c1ee" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下一节将给出一个非常简单的例子。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="5ea3" class="jx jy hi jt b fi jz ka l kb kc">const subject = new Subject&lt;number&gt;();</span><span id="507f" class="jx jy hi jt b fi kd ka l kb kc">subject.subscribe({</span><span id="5ca2" class="jx jy hi jt b fi kd ka l kb kc">next: (val) =&gt; console.log( `observerA: ${ v } ` )</span><span id="81e6" class="jx jy hi jt b fi kd ka l kb kc">});</span><span id="d38d" class="jx jy hi jt b fi kd ka l kb kc">subject.subscribe({</span><span id="8f1d" class="jx jy hi jt b fi kd ka l kb kc">next: (val) =&gt; console.log( `observerB: ${ v } ` )</span><span id="73fb" class="jx jy hi jt b fi kd ka l kb kc">});</span><span id="cdd9" class="jx jy hi jt b fi kd ka l kb kc">const observable = from([ 1 , 2 , 3 ]);</span><span id="6688" class="jx jy hi jt b fi kd ka l kb kc">observable.subscribe(subject);</span></pre><p id="5faa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上述代码片段的输出将是</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="6251" class="jx jy hi jt b fi jz ka l kb kc">// observerA: 1</span><span id="baf8" class="jx jy hi jt b fi kd ka l kb kc">// observerB: 1</span><span id="b201" class="jx jy hi jt b fi kd ka l kb kc">// observerA: 2</span><span id="59cf" class="jx jy hi jt b fi kd ka l kb kc">// observerB: 2</span><span id="bb9b" class="jx jy hi jt b fi kd ka l kb kc">// observerA: 3</span><span id="09e2" class="jx jy hi jt b fi kd ka l kb kc">// observerB: 3</span></pre><p id="d7b9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在上面的代码片段中，我们在第一行实例化了一个新主题。然后我们通过两个订阅者两次订阅主题。在subscription函数中，我们使用了next()方法来设置subject的下一个值，并简单地将其打印到开发人员的控制台。</p><p id="fe1a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在随后的几行中，我们用from操作符创建了一个可观察对象，它一个接一个地发出值。那么我们同意上面的观察。</p><p id="7bea" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在输出中，我们可以看到，对于从可观察对象发出的每个值，两个订阅者分别接收值，并按顺序打印发出的值。</p><p id="ef48" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> *** </strong>如果不调用next()方法，Subject不返回值。</p><p id="1002" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是一个非常简单的主题如何工作的概述。</p><p id="f9b1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">考特西:<a class="ae ke" href="http://code2stepup.com/" rel="noopener ugc nofollow" target="_blank">http://code2stepup.com/</a></p><p id="9f51" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">萨特雅普里雅·米什拉是http://code2stepup.com/的创始人。他是一名软件顾问、企业培训师和作家。</p></div></div>    
</body>
</html>