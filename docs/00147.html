<html>
<head>
<title>ARIMA for Energy consumption data: Part I</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">能源消费数据的ARIMA:第一部分</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/arima-for-energy-data-i-a7b466590af4?source=collection_archive---------0-----------------------#2018-10-15">https://medium.com/analytics-vidhya/arima-for-energy-data-i-a7b466590af4?source=collection_archive---------0-----------------------#2018-10-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f035" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了选择预测模型，我们将时间序列分解为系统和非系统的部分(<a class="ae jd" href="https://machinelearningmastery.com/decompose-time-series-data-trend-seasonality/" rel="noopener ugc nofollow" target="_blank">https://machine learning mastery . com/decompose-time-series-data-trend-seasonity/</a>)</p><p id="edce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">系统成分是递归的，一致的，我们可以构建模型进行预测。非系统成分是噪声。</p><p id="5bc4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通常，信号的分量可以分为:</p><ul class=""><li id="370f" class="je jf hi ih b ii ij im in iq jg iu jh iy ji jc jj jk jl jm bi translated"><strong class="ih hj">等级</strong>:系列中的平均值。</li><li id="15a7" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated"><strong class="ih hj">趋势</strong>:序列中增加或减少的值。</li><li id="262d" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated"><strong class="ih hj">季节性</strong>:序列中重复的短期周期。</li><li id="0c42" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated"><strong class="ih hj">噪声</strong>:系列中的随机变化。</li></ul><p id="264a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有两种方法来组合这些成分:加法和乘法。加法模型通过以下方式构建整个信号</p><p id="952d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">y(t) =水平+趋势+季节性+噪音</p><p id="6388" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">加性模型是线性模型，其中随时间的变化是常数。</p><p id="8e5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于乘法模型，随时间的变化是二次或指数的。这些变化不是恒定的。整个信号由。</p><pre class="js jt ju jv fd jw jx jy jz aw ka bi"><span id="c842" class="kb kc hi jx b fi kd ke l kf kg">y(t) = Level * Trend * Seasonality * Noise</span></pre><p id="5f08" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Python中，我们可以通过以下方式分解信号:</p><pre class="js jt ju jv fd jw jx jy jz aw ka bi"><span id="199f" class="kb kc hi jx b fi kd ke l kf kg">result = seasonal_decompose(series, model='multiplicative')</span><span id="6b30" class="kb kc hi jx b fi kh ke l kf kg">trend = decomposition.trend<br/>seasonal = decomposition.seasonal<br/>residual = decomposition.residual</span></pre></div><div class="ab cl ki kj gp kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="hb hc hd he hf"><p id="7e75" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们用数据集做了简单回归的尝试(<a class="ae jd" rel="noopener" href="/@chantrapornchai/finding-autoregression-with-energy-data-d752d367d1c5">https://medium . com/@ chantrapornchai/finding-auto regression-with-energy-data-d752d 367 D1 C5</a>)。</p></div><div class="ab cl ki kj gp kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="hb hc hd he hf"><p id="405d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，我们将尝试用ARIMA来拟合模型。ARIMA是自回归综合移动平均线。有趣的是，该模型受季节性数据的欢迎。我们发现这个关于ARIMA的教程非常简洁。但是，我们也尝试从来源中读取:<a class="ae jd" href="https://machinelearningmastery.com/arima-for-time-series-forecasting-with-python/" rel="noopener ugc nofollow" target="_blank">https://machine learning mastery . com/ARIMA-for-time-series-forecasting-with-python/</a>、<a class="ae jd" href="https://machinelearningmastery.com/moving-average-smoothing-for-time-series-forecasting-python/" rel="noopener ugc nofollow" target="_blank">https://machine learning mastery . com/moving-average-smoothing-for-time-series-forecasting-python/</a>或<a class="ae jd" href="https://www.analyticsvidhya.com/blog/2016/02/time-series-forecasting-codes-python/" rel="noopener ugc nofollow" target="_blank">https://www . analyticsvidhya . com/blog/2016/02/time-series-forecasting-codes-python/</a></p><p id="9838" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于我们对这些<em class="kp">stat model</em>非常陌生，我们尝试从教程中了解。ARIMA包含两个部分:AR和MA。AR是自回归项，MA是噪声项。要应用ARIMA，我们需要确保数据是<em class="kp">稳定的。</em>即它有一个不变的<em class="kp">移动平均线</em>。找出答案最简单的方法是计算给定区间的移动平均线。或者一个针对平稳的统计测试叫做<em class="kp"> Dickey-Fuller。</em></p><p id="8a3b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，让我们试着在KU能源数据(在带标题的csv时间序列下)加载来自<a class="ae jd" href="http://datascience.ku.ac.th/16-2/" rel="noopener ugc nofollow" target="_blank">http://datascience.ku.ac.th/16-2/</a>的消耗电力能源的CSV文件。数据具有趋势性和非平稳性。我们使用<em class="kp"> Dickey-Fuller执行静态测试。</em>代码从<a class="ae jd" href="https://www.analyticsvidhya.com/blog/2016/02/time-series-forecasting-codes-python/" rel="noopener ugc nofollow" target="_blank"> analyticsvidhya </a>，函数<em class="kp"> test_stationary(..)、</em>使用<em class="kp"> statmodels、</em>的功能<em class="kp"> adfuller </em>，并使用代码1第48行的测量AIC。请注意，还有许多其他测量方法，如BIC。</p><p id="2dd9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">读取数据后，我们进行静态测试。结果表明，检验统计值远小于临界值(5%)。</p><p id="3c94" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">计算滚动平均值和std，我们得到图1。结果表明，这些数据具有趋势性。然后，我们使用差异来消除趋势。我们显示了对数图，并计算了对数偏移差，以消除如图2所示的趋势。</p><pre class="js jt ju jv fd jw jx jy jz aw ka bi"><span id="0526" class="kb kc hi jx b fi kd ke l kf kg">Results of Dickey-Fuller Test:<br/>Test Statistic                     0.091927<br/>p-value                            0.965506<br/>#Lags Used                        55.000000<br/>Number of Observations Used    72911.000000<br/>Critical Value (5%)               -2.861580<br/>Critical Value (1%)               -3.430440<br/>Critical Value (10%)              -2.566791</span></pre><figure class="js jt ju jv fd kr er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es kq"><img src="../Images/4c8d332860bd45147544223f53c5fdb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ik2q5a6wLkH2UFT9e-mlKA.png"/></div></div><figcaption class="ky kz et er es la lb bd b be z dx translated">图1</figcaption></figure><figure class="js jt ju jv fd kr er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es lc"><img src="../Images/8a6425e519f5eb2d4d28c1f14e2f2c75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8S9np1dweBBMYxT0mHIDmw.png"/></div></div><figcaption class="ky kz et er es la lb bd b be z dx translated">图2</figcaption></figure><p id="9990" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">新图表显示滚动平均值和标准差没有趋势。</p><figure class="js jt ju jv fd kr er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es ld"><img src="../Images/9ecacd7d2e52ccac46f03adf8f55da2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o-2PLqQFt_icYjepDQm9tg.png"/></div></div><figcaption class="ky kz et er es la lb bd b be z dx translated">图3</figcaption></figure><p id="7ca3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们计算了<em class="kp"> Dicker-Fuller检验</em>，显示检验统计值远小于临界值(5%)。</p><pre class="js jt ju jv fd jw jx jy jz aw ka bi"><span id="4abc" class="kb kc hi jx b fi kd ke l kf kg">Results of Dickey-Fuller Test:<br/>Test Statistic                -1.054249e+01<br/>p-value                        8.578270e-19<br/>#Lags Used                     6.300000e+01<br/>Number of Observations Used    7.290200e+04<br/>Critical Value (5%)           -2.861580e+00<br/>Critical Value (1%)           -3.430440e+00<br/>Critical Value (10%)          -2.566791e+00<br/>dtype: float64</span></pre><figure class="js jt ju jv fd kr er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es le"><img src="../Images/436cca170db565af3596bd16e06d08e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XFLlKXMZRyjJRDV6hdb-UQ.png"/></div></div><figcaption class="ky kz et er es la lb bd b be z dx translated">图4</figcaption></figure><pre class="js jt ju jv fd jw jx jy jz aw ka bi"><span id="f6f9" class="kb kc hi jx b fi kd ke l kf kg"><br/>Results of Dickey-Fuller Test:<br/>Test Statistic                -1.536391e+01<br/>p-value                        3.582070e-28<br/>#Lags Used                     6.200000e+01<br/>Number of Observations Used    7.146400e+04<br/>Critical Value (5%)           -2.861580e+00<br/>Critical Value (1%)           -3.430442e+00<br/>Critical Value (10%)          -2.566792e+00</span></pre><p id="1298" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们展示如何使用seasonal_decompose提取趋势和季节分量，它返回三个分量:<br/>包括ts_log在内的三个分量的图如图4所示。</p><p id="a6e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们测试一下迪基-富勒的残留物。这样好多了。然后，我们可以保存季节性因素来创建ARIMA模型。</p><p id="6632" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完整的代码是:</p><figure class="js jt ju jv fd kr"><div class="bz dy l di"><div class="lf lg l"/></div><figcaption class="ky kz et er es la lb bd b be z dx translated">代码1:分解</figcaption></figure><p id="6717" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上述方法使用<em class="kp">分解</em>得到三个分量。趋势和季节组件也可用于创建模型。在预测之后，需要基于加法或乘法模型加回到原始信号。</p><p id="ec09" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一种使数据稳定的方法是使用数据点之间的<em class="kp">对数差</em>。这种方式更容易将信号合成回原始值，我们将在下一篇文章中展示。</p><p id="f110" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" rel="noopener" href="/@chantrapornchai/arima-for-energy-consumption-data-part-ii-ac779b40586e">https://medium . com/@ chantrapornchai/ARIMA-for-energy-consumption-data-part-ii-AC 779 b 40586 e</a></p></div></div>    
</body>
</html>