<html>
<head>
<title>Getting started with unit testing in Python(part One)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python单元测试入门(第一部分)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/getting-started-with-unit-testing-in-python-b1d8a215e01f?source=collection_archive---------16-----------------------#2019-12-28">https://medium.com/analytics-vidhya/getting-started-with-unit-testing-in-python-b1d8a215e01f?source=collection_archive---------16-----------------------#2019-12-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/14f78f1d289c74ffc789f6789550b546.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VW1HjzjIxV4BkSye"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae iu" href="https://unsplash.com/@helloquence?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Helloquence </a>拍摄的照片</figcaption></figure><p id="c7cc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你可能在招聘广告中看到过，你必须擅长测试代码，尤其是执行测试驱动的开发。在本文中，我们不打算深入探讨TDD，但是我们首先要回答这个问题，为什么我要对我的代码写一个测试？答案很简单，假设你想测试一个函数是否返回一封电子邮件，你可以假设它是一个类属性，你可以选择打印结果并检查电子邮件是否如你所愿，提交，推送并在发生火灾时离开大楼😀但是如果另一个人，让我们称她为琼，在这个代码库上，做了一个改变，打破了你的函数的逻辑，但是它做了她被要求做的事情，那该怎么办？她可能会继续前进，并在客户投诉后意识到有东西坏了。这是一个单元测试非常重要的基本例子，从技术上来说，当Joan引入打破你的逻辑的变化时，你写的测试就会失败，这将迫使她重新思考她的变化或提供她认为应该引入变化的具体原因，进行测试并编写代码以确保这种新行为被采用。在本文中，我们将介绍单元测试的基础知识，然后在下一篇文章中介绍一些高级概念，比如模仿。</p><p id="073a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将从创建一个简单的文件开始，该文件有四个函数，一个用于两个数相加，一个用于相除，另一个用于相减，最后两个数相乘，如下所示。</p><figure class="jt ju jv jw fd ij"><div class="bz dy l di"><div class="jx jy l"/></div></figure><p id="b476" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将编写非常基本的单元测试，以确保上述函数按照预期的方式运行。要开始为上面的代码编写测试，我们首先必须导入<strong class="ix hj"> <em class="jz"> unittest，</em> </strong>这基本上是一个模块，提供了一组丰富的工具来构建和运行测试。然后我们将编写<strong class="ix hj">测试用例</strong>，unittest提供了一个名为<strong class="ix hj"> TestCase </strong>的类，您可以从它继承来编写测试用例。然后我们有<strong class="ix hj">测试套件，</strong>你可以把它想象成测试用例的集合。一旦我们的代码在下面工作，这将变得更加清晰。看看下面的要点，我们会给出解释，但首先，请注意以下几点:</p><p id="2167" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">1.你的测试文件应该以<strong class="ix hj"> test_ &lt; some_name &gt;开头。py，</strong>这将是Python能够识别测试文件的唯一方式。<br/> 2。任何测试都应该以函数声明开始，然后是test_ &lt; name_of_test &gt;即<strong class="ix hj">def test _ check _ employee _ number。</strong></p><figure class="jt ju jv jw fd ij"><div class="bz dy l di"><div class="jx jy l"/></div></figure><p id="b767" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在上面的代码中，我们导入了unittest，然后我们创建了从unittest继承的TestClass。我们之前说过的TestCase附带了一套用于构建和运行单元测试的丰富工具，然后我们创建第一个测试套件，测试add函数，在测试套件中，我们创建了三个测试用例，我们调用add函数并断言一个值，在这种情况下，断言是检查严格相等性，我们检查调用<strong class="ix hj"> <em class="jz"> calculator.add(19，5) </em> </strong> <em class="jz">的返回是否会返回</em> <strong class="ix hj"> <em class="jz"> 24。</em> </strong>如果返回24，测试用例将通过，否则测试将失败，您将看到一个断言异常，如24！= 20，其中将20作为预期值传递。在最后一个单元测试中，我们正在检查当调用函数时，是否出现了ValueError异常，其中0是输入参数之一。您可以查看文档以获得可以在测试中使用的断言检查列表。</p><p id="8f9a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是一个简单的单元测试的基本例子，现在让我们介绍一些很棒的东西，让我们从创建一个学生类开始，在那里我们可以获得学生的电子邮件，给家长发送文本，甚至获得全名。我们如何测试呢？看看下面的例子，我们有一个学生类做上面的事情，返回一个名字，一封电子邮件和一条我们要发送给家长的消息。</p><figure class="jt ju jv jw fd ij"><div class="bz dy l di"><div class="jx jy l"/></div></figure><p id="fb8a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我们开始测试之前，你可以想象一下，如果我们有许多其他的功能，比如，这是Django中的一个认证类，其中我们覆盖了Django提供的默认用户，我们可以设置我们自己的JWT认证系统，甚至设置用户角色，(Django很棒，🔥🔥🔥，认证可能是棘手的，将写一篇文章介绍如何在Django中开始复杂应用程序的认证…..让我们继续，我只是爱姜戈😜).我们不需要每次都创建用户，比如让他登录并尝试访问某个端点来测试学生是否可以更新分数。Unittest为您提供了帮助，我们有以下方法来帮助设置复杂的测试。</p><ol class=""><li id="3eec" class="ka kb hi ix b iy iz jc jd jg kc jk kd jo ke js kf kg kh ki bi translated">一个<strong class="ix hj"> setUp </strong>方法，这个方法在每次测试用例运行时运行，你可以用它来设置一些你想要的行为，比如创建类实例。</li><li id="b21c" class="ka kb hi ix b iy kj jc kk jg kl jk km jo kn js kf kg kh ki bi translated">一个<strong class="ix hj">拆卸</strong>方法，这基本上是每次运行测试时运行的，比如每次测试之后。</li><li id="deb4" class="ka kb hi ix b iy kj jc kk jg kl jk km jo kn js kf kg kh ki bi translated">一个在测试用例中只运行一次的<strong class="ix hj"> setUpClass </strong>方法，你可以在这里做你想应用到测试用例中的基本东西。</li><li id="3122" class="ka kb hi ix b iy kj jc kk jg kl jk km jo kn js kf kg kh ki bi translated">一个<strong class="ix hj"> tearDownClass，</strong>它也在一个测试用例/一个测试用例中的所有测试完成后运行。</li></ol><p id="0436" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面是这些方法的一个实例，其余的基本上只是我们的单元测试，例如测试是否已经构造了正确的电子邮件地址和消息来发送给父母。</p><figure class="jt ju jv jw fd ij"><div class="bz dy l di"><div class="jx jy l"/></div></figure><p id="3ac9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">伙计们，这标志着本文的暂停，我将很快做第二部分，解释如何使用unittest的模拟库测试对第三方API如Google Auth或脸书的调用。请继续关注我，获取最新消息。下面是我们将在厨房里的这篇综合文章中涉及的内容的截图。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ko"><img src="../Images/c48c8de03c2d867df16bf515824e9fc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lIBpEpjGiiJuodBbgPDMyg.png"/></div></div></figure></div></div>    
</body>
</html>