<html>
<head>
<title>What are AutoML Function and How to setup Auto ML using the Kaggle dataset and Cloning Python notebook from Github</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是AutoML函数，以及如何使用Kaggle数据集和从Github克隆Python笔记本来设置Auto ML</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/what-are-automl-function-and-how-to-setup-auto-ml-using-the-dataset-of-kaggle-and-cloning-python-72ee4c512d3d?source=collection_archive---------13-----------------------#2020-02-17">https://medium.com/analytics-vidhya/what-are-automl-function-and-how-to-setup-auto-ml-using-the-dataset-of-kaggle-and-cloning-python-72ee4c512d3d?source=collection_archive---------13-----------------------#2020-02-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2121" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">AutoML Vision帮助ML专业知识有限的开发人员训练高质量的图像识别模型。将图像上传到AutoML UI后，您可以训练一个模型，该模型将立即在GCP上可用，用于通过一个易于使用的REST API生成预测。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/e13f0c11e63e4cef9c022470eb82e965.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*pUpswFgY8-esvr06DTc2xQ.png"/></div></figure><h1 id="d642" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">1:在GCP上启用AutoML云视觉</h1><p id="2c80" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">(1).去云控制台:【https://cloud.google.com/ T2】</p><p id="c569" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(2).设置自动视觉</p><p id="09d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">AutoML Vision为训练图像分类模型并在其上生成预测的所有步骤提供了一个接口。首先启用云AutoML API。</p><p id="22e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从<strong class="ih hj">导航菜单</strong>中选择<strong class="ih hj">API&amp;服务</strong>T21<strong class="ih hj">库</strong>。</p><p id="e311" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在搜索栏中输入“Cloud AutoML”。点击<strong class="ih hj"> Cloud AutoML API </strong>结果，然后点击<strong class="ih hj">启用</strong>。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kp"><img src="../Images/8ddbfa30649bfc76a329b456ce684d98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*ku4fryONIpfewjxFLCq3Sg.png"/></div></figure><p id="8e22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">系统会提示您指定一个Google Cloud项目。点击项目ID字段，从下拉菜单中选择您的项目ID，然后点击<strong class="ih hj">继续</strong>:</p><p id="3c91" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(3).选择自动视觉下的图像分类。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kp"><img src="../Images/9286d2a2590eb3aa790f401476f672be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*enzANReR1sea8QHQaq_w3g.png"/></div></figure><p id="7b13" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(4).设置项目API、权限和云存储桶，以存储用于建模和其他资产的图像文件。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kp"><img src="../Images/ba3367e0e18532cd879c954ee118affc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*AQPFiBNqEVnBRFNiXdksqg.png"/></div></figure><p id="c4b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(5).询问时，从下拉列表中选择您的GCP帐单项目。现在我们准备创建一个数据集，用于在AutoML上构建定制分类模型。在将原始数据集从Kaggle下载到云存储并准备好用于AutoML建模的数据后，我们将返回这里。</p><p id="e677" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这种情况下，您可以看到自动创建的存储桶。</p><h1 id="5ca6" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">2:将数据集下载到谷歌云存储</h1><p id="0c05" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">(1).激活<strong class="ih hj">云外壳</strong>(红色圆圈中)以启动临时VM实例来存放从Kaggle下载的数据集，将其解压缩并上传到存储桶。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kq"><img src="../Images/8e14b65e876ffe4a05dbcc94f25c3e14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/1*tkb_BU5mjW1ZwpSLZRZKUA.png"/></div></figure><p id="e573" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(2).安装Kaggle命令行界面。这个工具将允许我们从Kaggle下载数据集。运行以下代码:</p><blockquote class="kr ks kt"><p id="17d8" class="if ig ku ih b ii ij ik il im in io ip kv ir is it kw iv iw ix kx iz ja jb jc hb bi translated">sudo pip安装卡格尔</p></blockquote><p id="097e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3).下载Kaggle API令牌密钥，使Kaggle CLI能够针对Kaggle进行身份验证/授权，以下载所需的数据集。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kp"><img src="../Images/e3f7ca2220402ab545e1d2e1b4335725.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*S795x0l9MZn3EDSMyK-4xg.png"/></div></figure><p id="5971" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">登录您的Kaggle帐户。</p><p id="95e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">转到:<a class="ae ko" href="https://www.kaggle.com/[KAGGLE_USER_NAME]/account" rel="noopener ugc nofollow" target="_blank">https://www . ka ggle . com/[ka ggle _ USER _ NAME]/account</a></p><p id="308c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击:创建新的API令牌。</p><p id="dec9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建API令牌</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kp"><img src="../Images/ab27f9597c558adc69a633eefeb13ac2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*U8UNi_F0W-ki2EELmFMRdw.png"/></div></figure><p id="ddd0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将令牌下载到您的本地机器，并将其上传到云shell。</p><p id="7a5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将上传的<code class="du ky kz la lb b">.json</code>键移动到目录<code class="du ky kz la lb b">.kaggle</code>中。使用下面的代码:</p><pre class="je jf jg jh fd lc lb ld le aw lf bi"><span id="805d" class="lg jm hi lb b fi lh li l lj lk">mv kaggle.json .kaggle/kaggle.json</span></pre><p id="33db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(4).从Kaggle下载数据集到Google云存储。</p><pre class="je jf jg jh fd lc lb ld le aw lf bi"><span id="5596" class="lg jm hi lb b fi lh li l lj lk">kaggle datasets download {Write Your Dataset }</span></pre><p id="0779" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(5).解压缩下载的数据集</p><blockquote class="kr ks kt"><p id="f87b" class="if ig ku ih b ii ij ik il im in io ip kv ir is it kw iv iw ix kx iz ja jb jc hb bi translated">解压缩dataset.zip</p></blockquote><p id="f3d8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(6).将数据集从临时云外壳实例移动到创建的云存储桶。在此插入您的存储桶名称。</p><blockquote class="kr ks kt"><p id="7e2e" class="if ig ku ih b ii ij ik il im in io ip kv ir is it kw iv iw ix kx iz ja jb jc hb bi translated">gsutil -m cp -r数据集gs:// <strong class="ih hj">桶名</strong></p></blockquote><h1 id="9dca" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">3:为建模准备数据集</h1><p id="c9d3" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">(1).在谷歌云AI平台上推出Jupyter笔记本。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ll"><img src="../Images/159375e01f84644b6d6b2690bb97a7fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:532/format:webp/1*17MaxnxWEuXQ0NZUaddvYg.png"/></div></figure><p id="a013" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(2).创建新的笔记本实例。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lm"><img src="../Images/8723ea115faef10283fa933f6912ae51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1348/format:webp/1*xQU6TC5yTE43JLA1gNxyMQ.png"/></div></figure><p id="6948" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(3).选择实例名称并创建。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ln"><img src="../Images/38432f4953f2e151e7e96f7621e44f16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*XV61wtPcomoK22gsn5cu1w.png"/></div></figure><p id="9f85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(4).打开JupyterLab</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lm"><img src="../Images/712ba9198a51b7ed8fd8e79011f8db53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1348/format:webp/1*-MHVVGQHOEX7sTRIapdEDg.png"/></div></figure><p id="b1aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5).在使用AutoML Cloud Vision构建自定义图像识别模型之前，必须以特定格式准备数据集:</p><p id="a949" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.对于训练，支持JPEG、PNG、WEBP、GIF、BMP、TIFF和ICO图像格式，每个图像的最大大小为30mb。</p><p id="e8bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.为了便于推断，JPEG、PNG和GIF图像格式受支持，每张图像的最大大小为1.5mb。</p><p id="f785" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.最好将每个图像类别放入图像文件夹内的包含子文件夹中。例如，<br/>(图像目录)&gt;(图像类别1-子目录)——(图像类别n-子目录)</p><p id="16f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.接下来，创建一个指向图像路径及其相应标签的CSV。AutoML使用CSV文件指向训练图像及其标签的位置。CSV文件放在包含图像文件的同一个GCS存储桶中。使用配置AutoML Vision时自动创建的存储桶。在我们的例子中，这个bucket被命名为gs:// <strong class="ih hj"> bucketname </strong>。</p><p id="54cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(<strong class="ih hj"> 1) </strong>并输入Github URL{link}</p><p id="df96" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用预处理代码克隆repo。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es lo"><img src="../Images/82a14caca588b337ba0cef95b336bda3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*FVU3qsDhy4EiBdDEN9o5AQ.png"/></div></div></figure><p id="54e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(7).运行笔记本<code class="du ky kz la lb b">preprocessing.ipynb</code>中的所有单元格，创建包含图像路径和标签的CSV文件，并将该文件上传到云存储。务必更改<code class="du ky kz la lb b">bucket_name</code>的参数。</p><h1 id="9939" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">4:使用云自动视觉建模</h1><p id="3d2f" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">(1).从AutoML Vision仪表板中单击“新建数据集”</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es lt"><img src="../Images/3c5d49f5aea47f6643acb5bd17bf7ec1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nq_yLNzTAL-O5saoAmH5RQ.png"/></div></div></figure><p id="dfda" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(2).填写数据集名称，并从AutoML创建的云存储桶中选择CSV文件。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lu"><img src="../Images/16758c382f41b84c4fd608ad3e6336c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/1*5v17tyhnv6TBIsOrffHmgg.png"/></div></figure><p id="389a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(3).现在，如果您看到错误消息“找到重复的文件”,您可以退出。据我所知，从文件名来看，情况并非如此。</p><p id="d11b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">云自动处理的图像</p><p id="4de2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(4).点击<strong class="ih hj"> Train </strong>，如上图红色所示，启动Cloud AutoML建模。</p><p id="bc62" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">开始自动训练</p><p id="6cae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(5).选择模型的托管方式和培训预算。</p><p id="5bf5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">选择训练参数</p><p id="9f4e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(6).模型训练完成后，单击“评估”查看模型的性能指标。</p><p id="982c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">评估模型性能</p><p id="5976" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(7).评估性能指标(精确度、召回率和混淆矩阵)。</p><p id="f68f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(8).测试模型</p><h1 id="7170" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">5:结论</h1><p id="64ce" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">本文提供了一个通过利用Google云平台AutoML vision为定制用例设计强大的Vision模型的演练。</p><p id="662e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">AutoMl如何处理影像数据集概述</p><h2 id="229b" class="lg jm hi bd jn lv lw lx jr ly lz ma jv iq mb mc jz iu md me kd iy mf mg kh mh bi translated">参考资料:</h2><p id="e072" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated"><a class="ae ko" href="https://cloud.google.com/automl/?utm_source=google&amp;utm_medium=cpc&amp;utm_campaign=japac-IN-all-en-dr-bkws-all-super-trial-e-dr-1008074&amp;utm_content=text-ad-crcloudmatrixver01ctr-none-DEV_c-CRE_414665936593-ADGP_Hybrid+%7C+AW+SEM+%7C+BKWS+~+T1+%7C+EXA+%7C+ML+%7C+1:1+%7C+IN+%7C+en+%7C+Automl+%7C+automl-KWID_43700030970546659-kwd-408553802611&amp;userloc_1007788&amp;utm_term=KW_automl&amp;ds_rl=1264446&amp;gclid=EAIaIQobChMI1KLQ6dbY5wIVRaSWCh0LEQccEAAYASAAEgLMUPD_BwE" rel="noopener ugc nofollow" target="_blank">https://cloud.google.com/automl?utm_source=google &amp;utm_medium=cpc &amp;utm_campaign=japac-IN-all-en-dr-bkws-all-super-trial-e-dr-1008074 &amp;utm_content=text-ad-crcloudmatrixver01ctr-none-DEV_c-CRE_414665936593-ADGP_Hybrid+%7C+AW+SEM+%7C+BKWS+~%T1+%7C+EXA+%7C+ML+%1+%7C+IN+%7C+en+%7C+Automl+%7C+autl-KWID_43730970546659-kw-408553802611 &amp;</a></p></div></div>    
</body>
</html>