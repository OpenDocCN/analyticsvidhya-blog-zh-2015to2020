<html>
<head>
<title>Python Tips — Pandas Concat &amp; Append</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 提示-熊猫连接和追加</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/a-tip-a-day-python-tip-5-pandas-concat-append-dev-skrol-18e4950cc8cc?source=collection_archive---------0-----------------------#2020-10-19">https://medium.com/analytics-vidhya/a-tip-a-day-python-tip-5-pandas-concat-append-dev-skrol-18e4950cc8cc?source=collection_archive---------0-----------------------#2020-10-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="1054" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我们将学习 Concat &amp; Append 以及这两个函数之间的比较。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/5847972f75c81ad15847b3fe6effab80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NLnoAF5uOSBC2Y7IuzfM_Q.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">串联与附加—按作者排列的图像</figcaption></figure><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="4045" class="jy jz hi ju b fi ka kb l kc kd">import pandas as pd</span></pre><p id="0ea3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们拿两个水果的数据框。</p><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="374c" class="jy jz hi ju b fi ka kb l kc kd">fruit = { 'orange' : [3,2,0,1], 'apple' : [0,3,7,2], 'grapes' : [7,14,6,15] } <br/>df1 = pd.DataFrame(fruit) <br/>df1</span></pre><p id="0cae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ke"><img src="../Images/ad07342009fb163196bda2a8dd6b84d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:472/format:webp/1*pvV8sVENXXfD16tAl5AMOg.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="a543" class="jy jz hi ju b fi ka kb l kc kd">fruit = { 'grapes' : [13,12,10,2,55,98], 'mango' : [10,13,17,2,9,76], 'banana' : [20,23,27,4,0,9], 'pear' : [21,24,28,51,22,25], 'pineapple' : [30,33,38,30,36,31] } <br/>df2 = pd.DataFrame(fruit) <br/>df2</span></pre><p id="7f68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kf"><img src="../Images/010d90daa3f7ad460a77696b7a92eacd.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/1*Z5eEhj-AeRS5ht8cjyrLxA.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="682b" class="jy jz hi ju b fi ka kb l kc kd">df2 = df2.drop(df2.index[2]) <br/>df2</span></pre><p id="3a9a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kg"><img src="../Images/4b252359bfc1d27535e04a0cb3a52094.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*fZXAOa4CI_N8StKq4enB-w.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><h1 id="fd3f" class="kh jz hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">串联</h1><p id="abd9" class="pw-post-body-paragraph if ig hi ih b ii le ik il im lf io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">Concat 函数将主参数“objs”作为一组对象。</p><p id="29b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一个关键的论点是轴。</p><p id="bdd0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果两个数据帧都包含具有相同索引的行，则将保留这两个行，而不对索引进行任何更改或重置。</p><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="6be6" class="jy jz hi ju b fi ka kb l kc kd">pd.concat((df1, df2), axis = 0)</span></pre><p id="1cc3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lj"><img src="../Images/b5d67e5dd0919a5d91fcb049474389ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/1*rxpIsCq0pVFStaQWDs8gPg.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><p id="18a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果 axis = 1，则按列连接。如果没有相同索引的可用数据，则将填充 NaN。</p><p id="052d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，第二数据帧 df2 不包含索引为 2 的记录。因此，在串联之后，df2 的记录对于索引 2 的记录将具有 NaN，因为 df1 具有索引 2 的记录。</p><p id="68c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果两个数据帧包含相同的列，则两个列都将被保留，而列名没有任何变化。</p><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="e56d" class="jy jz hi ju b fi ka kb l kc kd">pd.concat((df1, df2), axis = 1)</span></pre><p id="0226" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lk"><img src="../Images/4a5a9d1389dd62ed8f0b7d2c4a721440.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*U91KvfrxWSu56bEY4aVazA.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><h1 id="c66c" class="kh jz hi bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">附加</h1><p id="7557" class="pw-post-body-paragraph if ig hi ih b ii le ik il im lf io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">Append 是 concat 的特例，它将第二个数据帧的记录连接在第一个数据帧的末尾。</p><p id="6e5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Append 没有轴参数。</p><p id="fa5e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Append 的语法不同于 Concat。Append 将调用数据帧视为主对象，并将作为参数传递给函数的数据帧中的行添加到该数据帧中。</p><p id="cfa0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果任何数据帧包含调用数据帧中不存在的新列，则它将被添加为新列</p><blockquote class="ll lm ln"><p id="ff54" class="if ig lo ih b ii ij ik il im in io ip lp ir is it lq iv iw ix lr iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="hi">语法:</em></strong><em class="hi">data frame . append(other，ignore_index=False，verify_integrity=False，sort=False) </em></p></blockquote><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="776c" class="jy jz hi ju b fi ka kb l kc kd">df1</span></pre><p id="574c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ls"><img src="../Images/986b890bb72af0faf6cd38c828a84219.png" data-original-src="https://miro.medium.com/v2/resize:fit:480/format:webp/1*2vrTjzd0xzzrx1_uC08zIg.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="84a0" class="jy jz hi ju b fi ka kb l kc kd">df2</span></pre><p id="ef72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lt"><img src="../Images/0b01c7a1899f3422a305e417cb9a3ba4.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*szPz13Iu9hD574Kd3Mhd6A.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="9bed" class="jy jz hi ju b fi ka kb l kc kd">df1.append(df2)</span></pre><p id="1bb0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lu"><img src="../Images/d728a0dad6bb57bfacf38036a20983ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*JcelI8UGRUxDX3GtuD0ehA.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure></div><div class="ab cl lv lw gp lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="hb hc hd he hf"><h1 id="027c" class="kh jz hi bd ki kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld bi translated">性能:pandas concat 和 append 哪个更快？</h1><p id="c660" class="pw-post-body-paragraph if ig hi ih b ii le ik il im lf io ip iq lg is it iu lh iw ix iy li ja jb jc hb bi translated">嗯，两者几乎一样快。</p><p id="58b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，根据数据的不同，可能会有细微的变化。</p><ol class=""><li id="f42c" class="mh mi hi ih b ii ij im in iq mj iu mk iy ml jc mm mn mo mp bi translated">Append 函数将第二数据帧的行逐个迭代地添加到第一数据帧。Concat 函数将执行单个操作来完成作业，这使得它比 append()更快。</li><li id="5e67" class="mh mi hi ih b ii mq im mr iq ms iu mt iy mu jc mm mn mo mp bi translated">由于追加将一个接一个地添加行，如果数据帧非常小，那么追加操作是好的，因为对于第二个数据帧中的行数，只进行几次追加。</li><li id="696f" class="mh mi hi ih b ii mq im mr iq ms iu mt iy mu jc mm mn mo mp bi translated">Append 函数将创建一个新的结果数据帧，而不是修改现有的数据帧。由于这种缓冲和创建过程，Append 操作的性能不如 concat()函数。但是，如果追加操作的次数很少，Append()就很好。如果需要多个追加操作，最好使用 concat()。</li></ol><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="ffb3" class="jy jz hi ju b fi ka kb l kc kd">%%time<br/>df = pd.DataFrame(columns=['A'])<br/>for i in range(30):<br/>    df = df.append({'A': i*2}, ignore_index=True)</span></pre><p id="6651" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">墙壁时间:51.4 毫秒</p><pre class="je jf jg jh fd jt ju jv jw aw jx bi"><span id="ac04" class="jy jz hi ju b fi ka kb l kc kd">%%time<br/>df = pd.concat([pd.DataFrame([i*2], columns=['A']) for i in range(30)], ignore_index=True)</span></pre><p id="4fd2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">墙壁时间:9.93 毫秒</p></div><div class="ab cl lv lw gp lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="hb hc hd he hf"><p id="1b4e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些是 Concat &amp; Append 函数的主要区别。</p><p id="f516" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将看到 Python 中的一个新技巧。谢谢大家！👍</p><p id="0413" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">喜欢支持？只要点击拍手图标❤️.</p><p id="9936" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">编程快乐！🎈</p></div><div class="ab cl lv lw gp lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="hb hc hd he hf"><p id="bcc3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="lo">原载于 2020 年 10 月 19 日</em><a class="ae mv" href="https://devskrol.com/index.php/2020/10/20/a-tip-a-day-python-tip-5-pandas-concat-append/" rel="noopener ugc nofollow" target="_blank"><em class="lo">【https://devskrol.com】</em></a><em class="lo">。</em></p></div></div>    
</body>
</html>