<html>
<head>
<title>Introduction to Docker Compose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Docker 撰写简介</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-use-docker-compose-a58cd56cec80?source=collection_archive---------9-----------------------#2020-10-01">https://medium.com/analytics-vidhya/how-to-use-docker-compose-a58cd56cec80?source=collection_archive---------9-----------------------#2020-10-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/17535f002dee5785d65cb96662074732.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VIwQLui-mwcZBdWWBeLpRw.png"/></div></div></figure><div class=""/><p id="e4bd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Docker 是一个令人惊叹的集装箱化解决方案，它可以帮助您无缝地运输您的代码，而不管它在什么环境下运行。Docker 提供了在松散隔离的环境(称为容器)中打包和运行应用程序的能力。</p><p id="170f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">交付 Docker 容器的支柱是<strong class="is hu"> docker-compose </strong>。作为开发人员，您可以使用 docker-compose 命令来设计和运行多容器 docker 应用程序。</p><p id="640a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用 docker-compose 包括 2 个步骤，</p><ol class=""><li id="d409" class="jo jp ht is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">创建一个<strong class="is hu"> docker-compose.yml </strong>文件，定义构成你的应用的服务</li><li id="e3a4" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">运行<strong class="is hu"> docker-compose up </strong>来创建并启动你的应用</li></ol><p id="4c4b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">在开始</strong>之前，你必须在你的机器上安装<a class="ae kc" href="https://docs.docker.com/get-docker/" rel="noopener ugc nofollow" target="_blank">对接器</a>和<a class="ae kc" href="https://docs.docker.com/compose/install/" rel="noopener ugc nofollow" target="_blank">对接器组合</a>。</p></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><p id="491e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu"> docker-compose </strong>获取一个. yml 文件并执行其中存储的“配方”。默认情况下，它会在当前目录中查找一个<strong class="is hu"> docker-compose.yml </strong>文件。典型的<strong class="is hu"> docker-compose.yml </strong>文件如下所示:</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="186b" class="kt ku ht kp b fi kv kw l kx ky">version: '3'</span><span id="604a" class="kt ku ht kp b fi kz kw l kx ky">services:<br/>  sql-server:<br/>    image: mcr.microsoft.com/mssql/server<br/>    restart: always<br/>    environment:<br/>      ACCEPT_EULA: y<br/>      SA_PASSWORD: &lt;your_password&gt;<br/>  adminer:<br/>    image: adminer<br/>    restart: always<br/>    ports:<br/>      - 8080:8080</span></pre><p id="3793" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里，我们有 2 个容器运行在我们的应用程序中，即 SQL Server 和 Adminer。</p><p id="757d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">的。上面的 yml 文件创建了一个运行 Microsoft SQL Server 的 Docker 容器。“图像”指定 Docker 需要为容器下载什么图像。您可以在<a class="ae kc" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker Hub </a>找到所有 Docker 图片的完整列表。</p><p id="80ee" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">应用程序中的容器可以通过名称相互访问。从上面看。yml 文件，你可以使用<strong class="is hu"> sql-server:1433 </strong>来访问 SQL Server。</p><p id="d543" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Docker hub 映像附带了某些环境变量，您可以根据自己的需求进行配置，例如上面的。yml 文件，我们已经配置了一个服务帐户密码。浏览 Docker 映像的文档，了解它为您提供了哪些配置选项。</p><p id="7d27" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">docker 编写文件的主要部分，</p><figure class="kk kl km kn fd hk"><div class="bz dy l di"><div class="la lb l"/></div><figcaption class="lc ld et er es le lf bd b be z dx translated">docker-compose 文件中最常用部分的描述</figcaption></figure><p id="ac7b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">容器级选项，</p><figure class="kk kl km kn fd hk"><div class="bz dy l di"><div class="la lb l"/></div><figcaption class="lc ld et er es le lf bd b be z dx translated">docker-compose 中容器可用的配置选项</figcaption></figure></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><p id="feda" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一些常用的 docker-compose 命令，</p><p id="8e77" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">创建&amp;开始容器</strong></p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="ccf2" class="kt ku ht kp b fi kv kw l kx ky">docker-compose up</span></pre><p id="46ed" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">列出集装箱</strong></p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="bb1d" class="kt ku ht kp b fi kv kw l kx ky">docker-compose ps</span></pre><p id="aa76" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">删除已停止的集装箱</strong></p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="ac24" class="kt ku ht kp b fi kv kw l kx ky">docker-compose rm</span></pre><p id="b48d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">指定一个. yml 文件</strong></p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="0113" class="kt ku ht kp b fi kv kw l kx ky">docker-compose -f docker-compose.yml</span></pre><p id="06a8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">docker-compose 可用选项的完整列表</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="a9b0" class="kt ku ht kp b fi kv kw l kx ky">Define and run multi-container applications with Docker.<br/><br/>Usage:<br/>  docker-compose [-f &lt;arg&gt;...] [options] [COMMAND] [ARGS...]<br/>  docker-compose -h|--help<br/><br/>Options:<br/>  -f, --file FILE             Specify an alternate compose file<br/>                              (default: docker-compose.yml)<br/>  -p, --project-name NAME     Specify an alternate project name<br/>                              (default: directory name)<br/>  --verbose                   Show more output<br/>  --log-level LEVEL           Set log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)<br/>  --no-ansi                   Do not print ANSI control characters<br/>  -v, --version               Print version and exit<br/>  -H, --host HOST             Daemon socket to connect to<br/><br/>  --tls                       Use TLS; implied by --tlsverify<br/>  --tlscacert CA_PATH         Trust certs signed only by this CA<br/>  --tlscert CLIENT_CERT_PATH  Path to TLS certificate file<br/>  --tlskey TLS_KEY_PATH       Path to TLS key file<br/>  --tlsverify                 Use TLS and verify the remote<br/>  --skip-hostname-check       Don't check the daemon's hostname against the<br/>                              name specified in the client certificate<br/>  --project-directory PATH    Specify an alternate working directory<br/>                              (default: the path of the Compose file)<br/>  --compatibility             If set, Compose will attempt to convert deploy<br/>                              keys in v3 files to their non-Swarm equivalent<br/><br/>Commands:<br/>  build              Build or rebuild services<br/>  bundle             Generate a Docker bundle from the Compose file<br/>  config             Validate and view the Compose file<br/>  create             Create services<br/>  down               Stop and remove containers, networks, images, and volumes<br/>  events             Receive real time events from containers<br/>  exec               Execute a command in a running container<br/>  help               Get help on a command<br/>  images             List images<br/>  kill               Kill containers<br/>  logs               View output from containers<br/>  pause              Pause services<br/>  port               Print the public port for a port binding<br/>  ps                 List containers<br/>  pull               Pull service images<br/>  push               Push service images<br/>  restart            Restart services<br/>  rm                 Remove stopped containers<br/>  run                Run a one-off command<br/>  scale              Set number of containers for a service<br/>  start              Start services<br/>  stop               Stop services<br/>  top                Display the running processes<br/>  unpause            Unpause services<br/>  up                 Create and start containers<br/>  version            Show the Docker-Compose version information</span></pre><p id="9a73" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对 docker-compose 的介绍到此结束</p></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><p id="6a89" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可能也喜欢，</p><div class="hh hi ez fb hj lg"><a rel="noopener follow" target="_blank" href="/analytics-vidhya/setup-elasticsearch-kibana-via-docker-ce21cf6f5312"><div class="lh ab dw"><div class="li ab lj cl cj lk"><h2 class="bd hu fi z dy ll ea eb lm ed ef hs bi translated">通过 Docker 设置 Elasticsearch &amp; Kibana</h2><div class="ln l"><h3 class="bd b fi z dy ll ea eb lm ed ef dx translated">首先，你必须在你的机器上安装 Docker 和 Docker compose。如果你没有它…</h3></div><div class="lo l"><p class="bd b fp z dy ll ea eb lm ed ef dx translated">medium.com</p></div></div><div class="lp l"><div class="lq l lr ls lt lp lu hp lg"/></div></div></a></div></div></div>    
</body>
</html>