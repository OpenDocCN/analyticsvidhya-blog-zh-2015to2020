# 理解 Python 中的 reduce

> 原文：<https://medium.com/analytics-vidhya/understanding-reduce-in-python-7641af074211?source=collection_archive---------10----------------------->

在这篇文章中，我们试图通过收集一些很酷的用例来理解`reduce`函数。

# 介绍

Python 已经成为数据科学和 ML 事实上的语言。人们蜂拥而至，通常来自不同的背景。

函数式编程是人们容易感到困惑的盲点之一。`map`、`apply`、`reduce`、`lambda`、`filter` …🤯

事实上，在 Python 2.x 中，`reduce`是内置函数之一。这在 Python 3 中有所改变，因为( [PEP 3100](https://www.python.org/dev/peps/pep-3100/) ):

> reduce():放入 functools，一个循环在大多数时候更具可读性

这位作者不太同意这种观点，认为它太固执己见了。众所周知，Python 的创始人 Guido 不喜欢函数式编程(例如这里的)

使用 reducer 函数通常比 for 循环更好的原因是 for 循环的本质:作为一个**方法** *，*阅读其他人的代码可能会令人沮丧和/或乏味。一个正确记录的 reducer 倾向于更短，更优雅地抽象核心功能——IMO。

# 那么，`reduce`到底是什么？

想想加法运算符+。

这是一个二元运算符，接受两个 int，然后产生第三个 int，即另外两个的和`s = x + y`。

现在，假设我们有两个整数，而不是两个整数。我们可能仍然需要将它们加在一起。

基本上有两种方法可以做到这一点:

这里的解决方案 1 是( [PEP 3100](https://www.python.org/dev/peps/pep-3100/) )建议我们在没有类似`sum`*的功能可用时使用*！**

## *那 reduce 在哪里？*

*Reduce 是`sum`真正在做的事情:*

> *将二元运算推广到任意数量的项。简而言之:从+到∑。*

*一方面，`sum`是内置函数，在 c 中进行了超优化。*

*另一方面， `my_sum`适用于所有支持二进制加法的类型，比如字符串或列表！*

# *为什么要“减少”？*

*在这一点上，你可能想知道为什么 reduce 被称为 reduce。答案是我们有效地将整个集合缩减为一个元素。*

*这也有点类似于字典的定义:*

> *减少| rəˈd(y)o͞os |动词*【带宾语】*使数量变小或变少*

*有些二元运算符内置了它们的**缩减器**:*

*   *+有`sum`*
*   *`and`有`all`*
*   *`or`有`any`*
*   *`min` / `max`是内置函数，既充当+ **又充当**它们的减速器。也就是说，你可以将它们都用作`min(x, y, z)`或`min([x, y, z])`*

*许多人不知道:*

*   *设置联合*
*   *设置交叉点*
*   *数字产品(𝚷我的列表)*
*   *功能组成*

*让我们把这些拼出来！*

## *设置并集和交集*

*如何定义集合并运算符？对于交集运算符，只需用&*

## *产品(𝚷)*

*对于产品来说，这是完全相同的想法。*

*副作用可能包括定义另一个(非常低效的)阶乘函数！*

## *功能组成*

*这个是最棘手的。我们定义了一些实值函数，并将它们组合在一起。在这个例子中，加 1，乘以 10，然后平方。*

*最后，将它们组合在一起会产生一个函数，我们可以将它用于我们自己的输入:*

*这与您可能在 Scikit-Learn 或 PowerBI 中找到的**转换管道**是同一类型的！*

# *引擎盖下到底发生了什么？*

*让我们仔细看看产品示例:*

*正如我们所看到的，在像`product_operator`这样的缩减函数中，`x`始终是缩减过程的当前状态，也就是累加器，而`y`是要缩减的新值！*

# *奖励——制作“蟒蛇艺术”*

*我们可以很容易地用一个缩小器让一条蛇在一个正方形的画布上移动。*

*这将利用可选的第三个参数`reduce`，它使用了一个不属于我们正在减少的集合的开始元素。*

*这可用于将`reduce`扩展到不同数据类型的二进制运算。在下面的例子中，左边的操作数是一个元组(canvas，cursor ),右边的操作符是一个在画布中移动光标的函数。*

*玩得开心！*

*![](img/7db71664a923a2a3fd174e3af578d1d5.png)*

*上面脚本的输出！在我们的命令下，蛇在画布上移动！*

*如果我们使用一条随机行走的蛇，用类似于`random.choices(list("LRUD"), k=10000)`的东西替换上面的固定字符串，我们可能会得到:*

*![](img/36580fc57c37bbd2a4d016704ac7898a.png)*

*蛇还是烟？*

*蛇或烟的代码？*