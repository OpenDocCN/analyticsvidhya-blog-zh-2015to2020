<html>
<head>
<title>Fetch data from Kaggle with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python从Kaggle获取数据</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/fetch-data-from-kaggle-with-python-9154a4c610e3?source=collection_archive---------1-----------------------#2020-05-04">https://medium.com/analytics-vidhya/fetch-data-from-kaggle-with-python-9154a4c610e3?source=collection_archive---------1-----------------------#2020-05-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="3a39" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">关于如何用代码连接Kaggle的简短有用的信息。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/acf5d36d8d30d43582b45cb4d9f9c855.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2ldevl6YlePch3l_"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">安德鲁·庞斯在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="31e3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如今，基于世界局势，大多数分析都多少涉及到新冠肺炎研究。或许，每一个对疫情传播和“行为”稍有兴趣的公司都要求数据分析师获取数据并进行分析。由于新冠肺炎是每天都有更新的数据，当你可以在笔记本上有关于代码的<strong class="jq hj">【所有在一个地方】</strong>时，它就方便了。</p><p id="fdcf" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我向您展示如何通过Python代码与Kaggle页面进行交互。</p><p id="b263" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这篇文章很简单，但是很有用。T9】</p><h2 id="e529" class="kl km hi bd kn ko kp kq kr ks kt ku kv jx kw kx ky kb kz la lb kf lc ld le lf bi translated">将涵盖的主题:</h2><p id="6b8a" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">1.用API连接到Kaggle</p><p id="da07" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">2.与竞赛互动</p><p id="fcb6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">3.与数据集交互</p><p id="bd4a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">开始编码吧！</p></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><h1 id="0208" class="ls km hi bd kn lt lu lv kr lw lx ly kv io lz ip ky ir ma is lb iu mb iv le mc bi translated">用API连接到Kaggle</h1><p id="c3a6" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">首先，如果你想与Kaggle互动，你必须注册并拥有一个帐户。有了帐户，您就可以参加竞赛，查看其他笔记本、编码，还可以下载数据集用于您的分析和其他转换。</p><p id="6e5b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在我们探索更多之前，为了访问Kaggle API，我们需要安装它:</p><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="1b21" class="kl km hi me b fi mi mj l mk ml">!pip install kaggle</span></pre><p id="0cb9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您也可以在命令提示符下使用以下命令来完成此操作:</p><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="d7a9" class="kl km hi me b fi mi mj l mk ml">pip install kaggle</span></pre><p id="0219" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在，我们需要创建API凭证——这非常简单。在您的Kaggle帐户上，在API下，选择“创建新的API令牌”，然后<strong class="jq hj"> kaggle.json </strong>将被下载到您的计算机上。</p><p id="d528" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">转到目录—“C:\ Users \<username>”。kaggle\" —并将下载的JSON文件粘贴到这里。</username></p><p id="f5bd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">使用以下代码，您可以连接到Kaggle:</p><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="02a5" class="kl km hi me b fi mi mj l mk ml">from kaggle.api.kaggle_api_extended import KaggleApi<br/>api = KaggleApi()<br/>api.authenticate()</span></pre><p id="ed33" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">你已经准备好探索卡格尔的世界了。</p></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><h1 id="804c" class="ls km hi bd kn lt lu lv kr lw lx ly kv io lz ip ky ir ma is lb iu mb iv le mc bi translated">与竞赛互动</h1><h2 id="0c83" class="kl km hi bd kn ko kp kq kr ks kt ku kv jx kw kx ky kb kz la lb kf lc ld le lf bi translated">列出正在进行的竞赛:</h2><p id="7362" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">只需一行代码，您就可以列出所有想要的匹配项，并且可以在搜索时输入非常酷的东西。</p><p id="c917" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">参数<strong class="jq hj"> category=' ' </strong>使<strong class="jq hj"> </strong>您能够选择您要寻找的比赛类型，请记住可用选项有:</p><blockquote class="mm mn mo"><p id="4d6c" class="jo jp kk jq b jr js ij jt ju jv im jw mp jy jz ka mq kc kd ke mr kg kh ki kj hb bi translated">所有'，'特色'，'研究'，'招聘'，'入门'，'大师'，'游乐场'</p></blockquote><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="f25b" class="kl km hi me b fi mi mj l mk ml">api.competitions_list(category='gettingStarted')</span></pre><p id="0fe2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果我们将<strong class="jq hj">类别</strong>设置为‘getting started ’,那么我们会得到以下列表:</p><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="377a" class="kl km hi me b fi mi mj l mk ml">[digit-recognizer,<br/> titanic,<br/> house-prices-advanced-regression-techniques,<br/> connectx,<br/> nlp-getting-started,<br/> facial-keypoints-detection,<br/> street-view-getting-started-with-julia,<br/> word2vec-nlp-tutorial,<br/> data-science-london-scikit-learn,<br/> just-the-basics-the-after-party,<br/> just-the-basics-strata-2013]</span></pre><p id="b1ce" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">但是，如果我们已经在Kaggle网站上搜索了比赛，并且我们想要输入一个特定的比赛，该怎么办呢？</p><p id="2f00" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后，我们使用<strong class="jq hj">搜索</strong>参数来列出名称中包含搜索词的特定竞争或多个竞争:</p><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="b5fa" class="kl km hi me b fi mi mj l mk ml">api.competitions_list(search='titanic')</span></pre><p id="0ae4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们看看如果我们输入搜索“NLP”会出现什么:</p><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="184c" class="kl km hi me b fi mi mj l mk ml">api.competitions_list(search='nlp')</span></pre><p id="5660" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">输出:</p><p id="356e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">[NLP-入门，<br/> google-quest-challenge，<br/>jigsaw-unintended-bias-in-toxity-class ification，<br/>gender-代词-resolution，<br/> word2vec-nlp-tutorial，<br/>data-science-for-good-city-of-los-Angeles]</p><p id="4fa6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们可以将输出保存到一个列表中，并选择想要的比赛进行探索:</p><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="c68a" class="kl km hi me b fi mi mj l mk ml">nlp_list=api.competitions_list(search='nlp')</span></pre><p id="de80" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">选择谷歌-探索-挑战:</p><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="af82" class="kl km hi me b fi mi mj l mk ml">nlp_list[1]</span></pre><h2 id="bc2c" class="kl km hi bd kn ko kp kq kr ks kt ku kv jx kw kx ky kb kz la lb kf lc ld le lf bi translated">从所选竞争中获取数据:</h2><p id="9bd3" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">为了进一步探索，我将使用泰坦尼克号比赛作为一个例子。</p><p id="6656" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在下载数据之前，我们可以列出所选竞争中可用的所有数据集:</p><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="6ec2" class="kl km hi me b fi mi mj l mk ml">api.competition_list_files('titanic')</span></pre><p id="f72b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">输出:[train.csv，test.csv，gender_submission.csv]</p><p id="4397" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">下载与代码竞争的数据集:</p><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="0419" class="kl km hi me b fi mi mj l mk ml">api.competition_download_files('titanic')</span></pre><p id="6914" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">你可以看到下载的文件是一个zip文件。只需几行代码，我们就可以将其解压缩到所需的目录中:</p><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="f12f" class="kl km hi me b fi mi mj l mk ml">from zipfile import ZipFile<br/>zf = ZipFile('titanic.zip')<br/>zf.extractall('data\') #save files in selected folder<br/>zf.close()</span></pre><p id="abce" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在我的例子中，我选择将数据集保存在数据文件夹中。您可以通过键入正确的文件夹名称而不是数据来选择您的文件夹。如果您想要提取笔记本所在的当前文件夹中的数据集，只需擦除目录，如下所示:</p><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="a01c" class="kl km hi me b fi mi mj l mk ml">zf.extractall()<br/>zf.close()</span></pre><p id="c239" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">最后，我们导出了数据集以供进一步分析。</p><h2 id="89b2" class="kl km hi bd kn ko kp kq kr ks kt ku kv jx kw kx ky kb kz la lb kf lc ld le lf bi translated">服从竞争</h2><p id="205b" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">每场比赛的结果都由参赛者提交的文件进行评估。也可以直接从Python提交您的产品:</p><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="f9b1" class="kl km hi me b fi mi mj l mk ml">api.competition_submit(</span><span id="7609" class="kl km hi me b fi ms mj l mk ml">#name of saved results<br/>'gender_submission.csv','API Submission',</span><span id="81a1" class="kl km hi me b fi ms mj l mk ml">#name of competition<br/>'titanic')</span></pre><p id="09bb" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这就是关于Kaggle比赛的全部内容。我希望你喜欢它，但等一下还有更多！</p></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><h1 id="d09b" class="ls km hi bd kn lt lu lv kr lw lx ly kv io lz ip ky ir ma is lb iu mb iv le mc bi translated">与数据集交互</h1><p id="a7e4" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">你仍然可以下载和使用数据而不用参加比赛。有时，我们只是想分析一个令人兴奋的数据集，或者获得对特定问题/任务的更多见解。</p><p id="696f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">通过代码进行交互很方便，因为所有的事情都在同一个笔记本<strong class="jq hj">中完成</strong>。不需要在边上下载数据集，然后将它们导入到想要的目录。</p><p id="d09d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">说到这里，我们开始吧！</p><p id="fc59" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果要下载指定Kaggle数据下的所有文件，请使用:</p><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="1edf" class="kl km hi me b fi mi mj l mk ml">#downloading datasets for COVID-19 data<br/>api.dataset_download_files('imdevskp/corona-virus-report')</span></pre><p id="d067" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">括号内的路径</strong>为—用户名(of _ person _ who _ published _ dataset)/姓名(of_the_Kaggle_dataset)。</p><p id="72af" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你现在感到困惑，我能理解。Kaggle数据集可以包含多个数据集，如果我们定义了“唯一”路径，那么所有可用的数据集都将从Kaggle数据集下载。</p><p id="977a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们还可以<strong class="jq hj">指定</strong>要下载哪些数据集，具体如下:</p><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="8291" class="kl km hi me b fi mi mj l mk ml">api.dataset_download_file('imdevskp/corona-virus-report','covid_19_clean_complete.csv')</span></pre><p id="b479" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">添加所需数据集的名称将会阻止代码下载所有可用的数据集，但只有一个<strong class="jq hj">被选中</strong>。</p><p id="58d6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">同样，在这两种情况下我们都需要解压缩它，我们按照上面解释的那样做。小小的重复不会伤害任何人，所以我们开始吧:</p><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="0c4b" class="kl km hi me b fi mi mj l mk ml">zf = ZipFile('covid_19_clean_complete.csv.zip')<br/>#extracted data is saved in the same directory as notebook<br/>zf.extractall() <br/>zf.close()</span></pre><p id="cdd0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在，有了<strong class="jq hj">熊猫</strong>，你可以轻松地加载数据集并开始使用它们。</p><pre class="iy iz ja jb fd md me mf mg aw mh bi"><span id="1c00" class="kl km hi me b fi mi mj l mk ml">import pandas as pd<br/>data=pd.read_csv('covid_19_clean_complete.csv')</span></pre></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><h1 id="35ac" class="ls km hi bd kn lt lu lv kr lw lx ly kv io lz ip ky ir ma is lb iu mb iv le mc bi translated">结论</h1><p id="d111" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">你可以看到这并不复杂，但可以节省你很多时间，特别是当每天下载一个更新的数据集。</p><p id="a564" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我知道你是用这种方式还是仅仅通过Kaggle网站下载？</p><p id="22c6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">老实说，根据使用所选数据集的情况和频率，我两种方式都用。</p><p id="dc31" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我希望你学到了一些东西，并喜欢阅读它。</p><p id="b73c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">注意安全。再见。</p><p id="bb99" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">你可以找到更多关于https://github.com/Kaggle/kaggle-api的信息。</p></div></div>    
</body>
</html>