<html>
<head>
<title>Creating a Predictive Model for Home Prices that Anyone Can Use</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建一个任何人都可以使用的房价预测模型</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/creating-a-predictive-model-for-home-prices-that-anyone-can-use-73749d6b1e40?source=collection_archive---------26-----------------------#2020-06-24">https://medium.com/analytics-vidhya/creating-a-predictive-model-for-home-prices-that-anyone-can-use-73749d6b1e40?source=collection_archive---------26-----------------------#2020-06-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/a3f7882f2280b00dca0d1982148cede7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5A7ezCTE5LI8_sNs"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">ярослав·алексеенко在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="56b8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我和我的团队的任务是为华盛顿西雅图地区，更确切地说是金县的房屋销售价格创建一个预测模型。我个人想做更深入的研究，分析房屋条件、房屋建造年份和邮政编码是如何影响房价的。我建立了一个多元线性回归模型，并创建了一个专门针对这三个特征的房价预测模型。我知道有很多方法可以构建预测模型，有些方法比其他方法更复杂，但我发现这种方法非常简单，而且它还可以让您创建一个用户友好的界面，任何人都可以通过插入不同的特征值来使用。</p><p id="5c88" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们先来谈谈什么是线性回归。线性回归是一种建模技术，用于估计两个(或多个)变量之间关系的强度和方向。您将使用因变量(也称为目标变量)和自变量(也称为特征或预测变量)。线性回归仅使用一个自变量和一个因变量来确定两者之间的相关性，而多元线性回归使用多个自变量和一个因变量。回归是一种参数技术，这意味着它使用从数据中学习的参数，并且它也被认为是机器学习的初始概念。进行线性回归模型时必须做出的一些假设是，数据必须具备:</p><ol class=""><li id="09ba" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">线性</li><li id="af29" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">多重共线性</li><li id="7ebc" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">常态</li><li id="6ac5" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">同方差性</li></ol><p id="5601" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦所有的假设都做出并得到满足，那么你就可以继续你的预测建模了。</p><p id="e645" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我们进入实际建模之前，我想简单介绍一下线性回归。接下来，我还想向你们简要展示一些围绕这个数据集创建的可视化效果。</p></div><div class="ab cl kh ki gp kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hb hc hd he hf"><p id="5012" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我清理完我的数据集并准备好进行分析之后，我创建了一些视觉效果来查看条件、房屋建造年份和邮政编码是如何影响房价的，然后才开始回归建模。</p><p id="3871" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我创建了一个非常酷的华盛顿西雅图地区的地理地图，使用Plotly和Mapbox比较价格和他们的家庭条件评级！我对此感到非常兴奋，第一次创建它时有点棘手，因为创建和导入一个地图框令牌有一个学习曲线，但在你创建一个之后，它实际上非常容易。我将会发另一个帖子来说明如何制作这个地图，因为我在任何地方都找不到一个清晰的步骤，而且花了我将近一周的时间才弄明白！</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ko"><img src="../Images/9b7f03f262986ba8880434c4edf4727d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r22y830dm7Xxx3_AJc1_8g.png"/></div></div></figure><p id="3b3a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来，我创建了一个散点图，以查看年份、条件和价格之间的相互关系。这幅图向我们展示了1900年至1980年间的房屋拥有最高的条件评级，它们也很好地保持了它们的价值。我想知道为什么，所以我做了一些关于西雅图房价的外部研究，在金县有一个房屋短缺。由于该县的发展速度如此之快，房主们保持了他们的财产。西雅图是美国生活成本第五高的城市，每1060人缺少1套住房，房价正在飙升。</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div class="er es kt"><img src="../Images/cb82bcf5d07a247d4fd53eb0a681b11a.png" data-original-src="https://miro.medium.com/v2/resize:fit:854/format:webp/1*KVUljTk6ueqRR8C6w1HqvQ.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">价格范围指数转换为20万美元到100万美元</figcaption></figure><p id="4043" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我还想知道是否有一个特定的邮政编码，有最高评级条件的房屋相比价格。条件最好的两个邮政编码是98125和98101。这些地区位于西雅图市中心的海滨物业，但更具体地说，派克市场。</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div class="er es ku"><img src="../Images/b47dc81e0da353e95b040a0e775cfc2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:852/format:webp/1*safNjC4rYJFuQNbF7bzdKw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">价格范围指数转换为20万美元到100万美元</figcaption></figure><p id="889d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我完成可视化之后，我还对我的数据进行了一些建模。我想写这篇关于预测模型的文章，但是如果你对这个过程感兴趣，请查看我在github上的全部笔记。</p></div><div class="ab cl kh ki gp kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hb hc hd he hf"><p id="a2ad" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦我的建模完成，我就开始创建我的房价预测模型。我的第一步是求解线性回归模型，并使用reg.fit来训练我的模型。线性回归模型的传统方程是:</p><p id="0442" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi">𝑦̂ =𝛽̂ 0+𝛽̂ 1𝑥1+𝛽̂ 2𝑥2+…+𝛽̂ 𝑛𝑥𝑛</p><p id="a6b8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但是我决定用下面的公式将这个等式写得更简单一点，用于我的模型:</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div class="er es kv"><img src="../Images/92ee1192957a350d910e4d300a07d37e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/1*twFpRETWhnFNZHefe9NBCA.png"/></div></figure><p id="944c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来，我为我的模型的房价和特征条件的特定等式插入变量，建造年份和邮政编码写为:</p><p id="3562" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">价格= m1 *条件+ m2 *邮政编码+m3 * yr _ build+b</p><p id="ae23" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这将是我的模型的蓝图，现在是时候将它添加到python中了。</p><pre class="kp kq kr ks fd kw kx ky kz aw la bi"><span id="135d" class="lb lc hi kx b fi ld le l lf lg">import numpy as np<br/>import pandas as pd<br/>from sklearn import linear_model</span><span id="f4f9" class="lb lc hi kx b fi lh le l lf lg">reg=linear_model.LinearRegression()<br/>reg.fit(housing_df_out[['condition', 'zipcode', 'yr_built']],housing_df_out.price)</span></pre><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es li"><img src="../Images/e8d67495c86de4df4a4b02633a9a7b9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lO63JqIHAIoyaMLcZjG4qQ.png"/></div></div></figure><p id="9c19" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦我们解决了我们的线性回归线，我们接下来找到m1，m2，m3值的系数。</p><pre class="kp kq kr ks fd kw kx ky kz aw la bi"><span id="17ff" class="lb lc hi kx b fi ld le l lf lg">reg.coef_</span></pre><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lj"><img src="../Images/c11a21d08707abed1e1ad16a18af90a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1RoR5jPddQBy_kRAcGZZdQ.png"/></div></div></figure><p id="61e8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下一步将求解b的截距值。</p><pre class="kp kq kr ks fd kw kx ky kz aw la bi"><span id="c626" class="lb lc hi kx b fi ld le l lf lg">reg.intercept_</span></pre><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/10cacec5429193ef599efcda8adb20e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7ZK4336XcyK3R_3Op8cdTw.png"/></div></div></figure><p id="7226" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦你解决了方程中的所有变量，你就可以插入条件、邮政编码和建造年份的值来得到预测的房价。现在，您可以自由地从数据集中切换出您喜欢的特征，并且可以使用您想要的任何值来求解您的预测价格。请记住，无论您将要素添加到reg.fit模型中的顺序是什么，您也需要为这些要素的值排序。所以，对于我的模型，我按照['condition '，' zipcode '，' yr _ build ']的顺序列出了我的特性。这意味着我还必须以相同的顺序插入我的值，以使模型正确工作。下面我举两个例子:</p><p id="f133" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">该预测值求解了1995年建造的3级条件、邮政编码为98003的房屋价格为436，008美元。</p><pre class="kp kq kr ks fd kw kx ky kz aw la bi"><span id="f300" class="lb lc hi kx b fi ld le l lf lg">reg.predict([[3,98003,1995]])</span></pre><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/d7b8eccea01f5cfb3f5d60f5b6df1ec9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7i2kUgRbcLnhcqoNKxbmEw.png"/></div></div></figure><p id="ba1b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这一预测值求解出一套房子的价格为498，653美元，条件为5级，邮编为98101，建于1986年。</p><pre class="kp kq kr ks fd kw kx ky kz aw la bi"><span id="aadf" class="lb lc hi kx b fi ld le l lf lg">reg.predict([[5,98101,1986]])</span></pre><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/7fb10c8629444ce710070b9ea30445ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VgkSAyU6i5V2zUYYse3l0g.png"/></div></div></figure><p id="e719" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我认为这非常酷，一旦设置正确，你可以插入不同的值来求解你的预测值。这对于非技术用户来说也是非常友好的。此时此刻。他们正在输入数字并得到一个结果。它不需要复杂的代码就能工作。</p><p id="aa6b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我从创建这个预测模型中获得了很多乐趣！我喜欢创造尽可能简单高效的东西，这绝对是我的拿手好戏。试试这个，让我知道它是否对你有用！</p></div></div>    
</body>
</html>