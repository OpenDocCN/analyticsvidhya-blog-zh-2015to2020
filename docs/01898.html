<html>
<head>
<title>Web Scraping — Amazon Customer Reviews</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">网络抓取——亚马逊客户评论</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/web-scraping-amazon-reviews-a36bdb38b257?source=collection_archive---------0-----------------------#2019-11-20">https://medium.com/analytics-vidhya/web-scraping-amazon-reviews-a36bdb38b257?source=collection_archive---------0-----------------------#2019-11-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/f82879fdd5e3a8d66596964eef546c28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kr-TlPT8c7_ZR4iC9QILWg.png"/></div></div></figure><p id="0abb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们在网上搜索很多东西。这些信息很容易获得，但不容易保存，因此我们可以在以后将其用于任何其他目的。</p><p id="ff0d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一种方法是手动复制数据，并将其保存在桌面上。然而，这是一项非常耗时的工作。在这种情况下，网络抓取很方便。</p><p id="5bab" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">什么是网页抓取？</strong></p><p id="66e0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">网络抓取是一种技术，用于从网站上提取大量数据，并将其存储在您的计算机中。这些数据可以在以后用于分析。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jo"><img src="../Images/f984cf2755afe3af2153c4d9a9c62698.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*Tuw7lC7sTSHU0LjM28ZJaw.jpeg"/></div></figure><p id="06ab" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这篇博客中，我将向你展示如何使用python从亚马逊网站上抓取特定产品的评论。</p><p id="7c59" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第一步，检查网站是否允许刮痧。这可以通过在网站链接后添加<strong class="is hj"> robots.txt </strong>来查看。</p><p id="fa7e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">【https://www.amazon.in/robots.txt】T5<a class="ae jt" href="https://www.amazon.in/robots.txt" rel="noopener ugc nofollow" target="_blank">T6</a></p><p id="5a94" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一个URL可以分成五个部分——<strong class="is hj">协议、域、路径、查询字符串&amp;片段。</strong>但是我们将主要关注3个部分——域、路径&amp;查询字符串。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es ju"><img src="../Images/e4264742371b9366b11b598527c1d334.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*_i_WWTFNBY8knerkiIOFaw.jpeg"/></div></figure><p id="890d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤:</strong></p><ol class=""><li id="60f4" class="jv jw hi is b it iu ix iy jb jx jf jy jj jz jn ka kb kc kd bi translated">获取要废弃的页面的URL。</li><li id="db5c" class="jv jw hi is b it ke ix kf jb kg jf kh jj ki jn ka kb kc kd bi translated">检查页面的元素并确定所需的标签。</li><li id="9605" class="jv jw hi is b it ke ix kf jb kg jf kh jj ki jn ka kb kc kd bi translated">访问URL。</li><li id="6a79" class="jv jw hi is b it ke ix kf jb kg jf kh jj ki jn ka kb kc kd bi translated">从所需的标记中获取元素。</li></ol><p id="c8fc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们现在就开始编码吧！！</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es kj"><img src="../Images/75e41bf3d942126208de7209db4df8f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:524/format:webp/1*3_1fVCh_D_9FuoAvEIMzcA.jpeg"/></div></figure><p id="e6a7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们从导入上述两个库开始。<strong class="is hj">库<em class="kk">请求</em>库</strong>用于从网页中获取内容。我们向URL发送请求，然后得到响应。响应将包含一个状态代码以及网页内容。<strong class="is hj"><em class="kk"/></strong>将页面内容转换成合适的格式。</p><p id="d7b6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">标题和cookie</strong></p><p id="4a70" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通常，python请求不需要头和cookies。但是在某些情况下，当我们请求页面内容时，我们会得到一个状态代码403或503。这意味着我们无法访问网页内容。在这种情况下，我们向requests.get()函数的参数添加头和cookies。</p><p id="7902" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要找到你的邮件头和cookies，去亚马逊网站搜索特定的产品。然后右击任意元素，选择<strong class="is hj">检查</strong>(或使用快捷键Ctrl+Shift+I)。在“网络”选项卡中，我们可以找到标题和cookies。</p><p id="a606" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">永远不要和任何人分享你的饼干。T29】</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kl"><img src="../Images/6bf8a343518fd4537f23d86adb063ca6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c-Y9Gh9lCgBmqlH_1bnJEA.jpeg"/></div></div></figure><p id="9f7b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一个函数用于获取所需查询的页面内容和状态代码。需要状态代码200才能继续该过程。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="2bcc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">刮削产品名称和ASIN编号</strong></p><p id="021d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">亚马逊的每件商品都有唯一的识别号。这个编号叫做<strong class="is hj"><em class="kk">ASIN——亚马逊标准识别号</em> </strong>。使用ASIN号码，我们可以直接访问每一个产品。</p><p id="c3d5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上述函数可用于提取产品名称和ASIN编号。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="c862" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">findall()函数用于查找参数中提到的所需范围、属性和值的所有html标记。标签的这些参数对于所有产品页面中的所有产品名称和asin都是相同的。我们只是将内容中的数据部分添加到一个新的列表中。使用这个列表，我们可以访问单独的数据——如数字，从而访问它们各自的页面。</p><p id="cf0a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">刮客户评论链接</strong></p><p id="e6ef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">客户评论将出现在产品的每一页。但这些只是少数。我们想要产品的所有顾客评论。所以，我们不得不刮掉<strong class="is hj"><em class="kk">‘查看所有顾客评论’</em></strong>这个环节。</p><p id="e194" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了做到这一点，我们首先定义一个函数，该函数将使用一个ASIN编号转到每个产品的页面。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="8af6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们做和ASIN数字一样的事情。我们使用相应的html标签提取每个产品的所有“查看所有客户评论”链接，并将<strong class="is hj"> href </strong>部分添加到新列表中。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="3ea8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">取消所有客户评论</strong></p><p id="99c9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们已经获得了每个产品的所有链接。使用这些链接，我们可以收集每个产品的所有评论。因此，我们定义了一个函数(类似于前面的函数),它将提取所有产品的所有评论。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="59e4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们使用上面的函数提取所有的客户评论，并将其存储在一个列表中。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="77b6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以通过添加' &amp;page=2或3或4 .. '来访问任意页数的产品详细信息搜索查询，并重复从废弃ASIN号码开始的步骤。</p><p id="4166" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">在CSV文件中保存评论</strong></p><p id="952f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们现在已经废弃了所有的评论，现在我们必须将它保存在一个文件中，以便执行进一步的分析。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="07e9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将评论列表转换成字典。然后导入<strong class="is hj"> pandas </strong>库，用它把字典转换成数据框。然后使用to_csv()函数将它转换成csv文件并存储在我们的计算机中。</p><p id="e493" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">取消亚马逊产品评论的完整代码可从以下网址获得:</p><p id="00ab" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jt" href="https://github.com/vaisakhnambiar/Web-scraping" rel="noopener ugc nofollow" target="_blank"><strong class="is hj"><em class="kk">https://github.com/vaisakhnambiar/Web-scraping</em></strong>T21】</a></p></div></div>    
</body>
</html>