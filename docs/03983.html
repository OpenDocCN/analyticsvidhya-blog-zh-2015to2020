<html>
<head>
<title>How to bypass reCaptcha V2 with Selenium?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何绕过硒reCaptcha V2？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-easily-bypass-recaptchav2-with-selenium-7f7a9a44fa9e?source=collection_archive---------0-----------------------#2020-02-29">https://medium.com/analytics-vidhya/how-to-easily-bypass-recaptchav2-with-selenium-7f7a9a44fa9e?source=collection_archive---------0-----------------------#2020-02-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex if ig ih ii"><div class="bz dy l di"><div class="ij ik l"/></div></figure><p id="a0be" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated"><em class="jj">(更新日期:5月23日。直到本教程中使用的工具的版本改变，一些方法不工作，所以我尝试用一个新的工作代码来更新这个解决方案。</em></p><p id="b042" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">它在<a class="ae jk" href="https://github.com/teal33t/captcha_bypass" rel="noopener ugc nofollow" target="_blank"> Github </a>上，你可以阅读代码，了解它是如何工作的。</p></div><div class="ab cl jl jm gp jn" role="separator"><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq"/></div><div class="hb hc hd he hf"><p id="2c69" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">在本教程中，我将描述如何绕过re-captcha v2(带挑战和互动评分)，用<a class="ae jk" href="http://sync.me" rel="noopener ugc nofollow" target="_blank"> Sync.me </a>网站测试以收集电话号码。</p><p id="b7fd" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">我们将使用Python (unittest)、Selenium和<a class="ae jk" href="https://github.com/dessant/buster" rel="noopener ugc nofollow" target="_blank"> Buster Captcha Solver </a>。</p><p id="94f3" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">首先，很高兴知道Google reCaptcha V3根据与网站的交互对每个请求进行评分。每个请求的分数在0到1之间，0代表机器人，1代表非常可能的交互。</p><p id="7590" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">在本教程中，我们将设置一个Selenium bot来完成V2挑战和评分，然后从Sync.me的电话号码中收集人们的姓名</p><p id="4cdf" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">Python unittest是一个运行测试的工具；事实上，Selenium是一个为应用程序编写测试的标准工具，这里我们有一个简单的框架来运行测试，还有<code class="du js jt ju jv b">tearDown</code>用于在bot完成后自动关闭它，这是我们的默认框架:</p><figure class="jw jx jy jz fd ii"><div class="bz dy l di"><div class="ka ik l"/></div></figure><p id="b120" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">使用unittest的主要结果是因为它的断言方法，您可以轻松地一步一步跟踪您的bot。</p><p id="2de6" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">好了，现在我们要用硒了，先导入我们需要的东西:</p><figure class="jw jx jy jz fd ii"><div class="bz dy l di"><div class="ka ik l"/></div></figure><p id="6dde" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">我更喜欢的网络驱动是Gecko，你需要在你的系统上安装Gecko。正如您所知，对于每个web驱动程序，您都应该设置它的配置文件和功能，因此我们需要创建一个设置方法，如下所示:</p><figure class="jw jx jy jz fd ii"><div class="bz dy l di"><div class="ka ik l"/></div></figure><p id="a681" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated"><code class="du js jt ju jv b"><a class="ae jk" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.setUp" rel="noopener ugc nofollow" target="_blank">setUp()</a></code>和<code class="du js jt ju jv b"><a class="ae jk" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.tearDown" rel="noopener ugc nofollow" target="_blank">tearDown()</a></code>方法允许你定义在unittest的每个测试方法之前和之后执行的指令。</p><p id="1c52" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">现在我们来看看其他方法，<code class="du js jt ju jv b">setUpOptions</code>:</p><figure class="jw jx jy jz fd ii"><div class="bz dy l di"><div class="ka ik l"/></div></figure><p id="e15d" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">无头浏览意味着你不想运行带有图形用户界面的浏览器。</p><p id="15a4" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">正如我所说，这是一个简单的验证码求解器，你不需要知道验证码求解算法，所以第三方帮助我们，巴斯特！</p><p id="13d3" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">Buster是一个使用音频识别的验证码求解器，您可以将它用作您的web浏览器扩展，请看:</p><div class="kb kc ez fb kd ke"><a href="https://github.com/dessant/buster" rel="noopener  ugc nofollow" target="_blank"><div class="kf ab dw"><div class="kg ab kh cl cj ki"><h2 class="bd hj fi z dy kj ea eb kk ed ef hh bi translated">dessant/buster</h2><div class="kl l"><h3 class="bd b fi z dy kj ea eb kk ed ef dx translated">巴斯特的持续发展得益于令人敬畏的支持者的支持。如果你想加入…</h3></div><div class="km l"><p class="bd b fp z dy kj ea eb kk ed ef dx translated">github.com</p></div></div><div class="kn l"><div class="ko l kp kq kr kn ks kt ke"/></div></div></a></div><p id="279a" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">现在，让我们为使用buster的gecko设置一个配置文件，这意味着您的浏览器将在其初始化时加载扩展。</p><figure class="jw jx jy jz fd ii"><div class="bz dy l di"><div class="ka ik l"/></div></figure><p id="e3dd" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">然后，在我们的下一步，我们需要启用<a class="ae jk" href="https://firefox-source-docs.mozilla.org/testing/marionette/Intro.html" rel="noopener ugc nofollow" target="_blank">木偶</a>。</p><figure class="jw jx jy jz fd ii"><div class="bz dy l di"><div class="ka ik l"/></div></figure><p id="804b" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">但是什么是木偶呢？Mozilla对此有何评价？</p><blockquote class="ku kv kw"><p id="2bce" class="il im jj in b io ip iq ir is it iu iv kx ix iy iz ky jb jc jd kz jf jg jh ji hb bi translated">牵线木偶是Mozilla的Gecko引擎的自动化驱动程序。它可以远程控制Gecko平台的UI或内部JavaScript，比如Firefox。它可以控制chrome(即菜单和功能)或内容(在浏览上下文中加载的网页)，提供高级别的控制和复制用户操作的能力。除了在浏览器上执行操作，Marionette还可以读取DOM的属性。</p><p id="10d6" class="il im jj in b io ip iq ir is it iu iv kx ix iy iz ky jb jc jd kz jf jg jh ji hb bi translated">牵线木偶是Firefox附带的新驱动程序。这个驱动程序有自己的协议，与Selenium/WebDriver协议不直接兼容。</p><p id="6ab8" class="il im jj in b io ip iq ir is it iu iv kx ix iy iz ky jb jc jd kz jf jg jh ji hb bi translated"><strong class="in hj"> Gecko驱动程序</strong>(以前称为wires)是实现Selenium/WebDriver协议的应用服务器。它翻译Selenium命令并将它们转发给<strong class="in hj">木偶驱动程序。</strong></p><p id="9c7c" class="il im jj in b io ip iq ir is it iu iv kx ix iy iz ky jb jc jd kz jf jg jh ji hb bi translated"><a class="ae jk" href="https://stackoverflow.com/questions/43272919/difference-between-webdriver-firefox-marionette-webdriver-gecko-driver" rel="noopener ugc nofollow" target="_blank">https://stack overflow . com/questions/43272919/difference-between-web driver-Firefox-marionette-web driver-gecko-driver</a></p><p id="7af0" class="il im jj in b io ip iq ir is it iu iv kx ix iy iz ky jb jc jd kz jf jg jh ji hb bi translated">如需了解更多信息，请访问它的文档，<a class="ae jk" href="https://firefox-source-docs.mozilla.org/testing/marionette/Intro.html" rel="noopener ugc nofollow" target="_blank">https://Firefox-source-docs . Mozilla . org/testing/marionette/intro . html</a></p></blockquote><p id="63e2" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">如果您想要设置代理，您需要为驱动程序启用它的功能，所以让我们这样做:</p><figure class="jw jx jy jz fd ii"><div class="bz dy l di"><div class="ka ik l"/></div></figure><p id="d140" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">我们准备好了，让我们进入主要功能:</p><figure class="jw jx jy jz fd ii"><div class="bz dy l di"><div class="ka ik l"/></div></figure><p id="2aca" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">在我们的代码上调用<code class="du js jt ju jv b"><a class="ae jk" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.setUp" rel="noopener ugc nofollow" target="_blank">unittest.main()</a></code>之后，<code class="du js jt ju jv b">test_run</code>方法是主函数。<code class="du js jt ju jv b">driver.get</code>将尝试加载<a class="ae jk" href="https://sync.me" rel="noopener ugc nofollow" target="_blank"> https://sync.me </a>。</p><p id="604c" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">现在，让我们找到电话的输入:</p><figure class="jw jx jy jz fd ii er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es la"><img src="../Images/a82abf7b82c11bffb44e6381382681a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HBCq2LNl1G6-rWXj3IdHYQ.png"/></div></div></figure><p id="ad6e" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">我们可以使用XML或CSS选择器来定位电话号码输入，下面是<a class="ae jk" href="https://selenium-python.readthedocs.io/locating-elements.html" rel="noopener ugc nofollow" target="_blank"> Selenium locator的方法</a>:</p><blockquote class="ku kv kw"><p id="7f68" class="il im jj in b io ip iq ir is it iu iv kx ix iy iz ky jb jc jd kz jf jg jh ji hb bi translated">按标识查找元素</p><p id="c2aa" class="il im jj in b io ip iq ir is it iu iv kx ix iy iz ky jb jc jd kz jf jg jh ji hb bi translated">按名称查找元素</p><p id="4226" class="il im jj in b io ip iq ir is it iu iv kx ix iy iz ky jb jc jd kz jf jg jh ji hb bi translated">通过xpath查找元素</p><p id="3480" class="il im jj in b io ip iq ir is it iu iv kx ix iy iz ky jb jc jd kz jf jg jh ji hb bi translated">通过链接文本查找元素</p><p id="22a3" class="il im jj in b io ip iq ir is it iu iv kx ix iy iz ky jb jc jd kz jf jg jh ji hb bi translated">查找元素部分链接文本</p><p id="b066" class="il im jj in b io ip iq ir is it iu iv kx ix iy iz ky jb jc jd kz jf jg jh ji hb bi translated">按标签名查找元素</p><p id="23d1" class="il im jj in b io ip iq ir is it iu iv kx ix iy iz ky jb jc jd kz jf jg jh ji hb bi translated">按类名查找元素</p><p id="0b27" class="il im jj in b io ip iq ir is it iu iv kx ix iy iz ky jb jc jd kz jf jg jh ji hb bi translated">通过css选择器查找元素</p><p id="2809" class="il im jj in b io ip iq ir is it iu iv kx ix iy iz ky jb jc jd kz jf jg jh ji hb bi translated">按名称查找元素</p><p id="b9a5" class="il im jj in b io ip iq ir is it iu iv kx ix iy iz ky jb jc jd kz jf jg jh ji hb bi translated">通过xpath查找元素</p><p id="2dea" class="il im jj in b io ip iq ir is it iu iv kx ix iy iz ky jb jc jd kz jf jg jh ji hb bi translated">通过链接文本查找元素</p><p id="abb4" class="il im jj in b io ip iq ir is it iu iv kx ix iy iz ky jb jc jd kz jf jg jh ji hb bi translated">查找元素部分链接文本</p><p id="1415" class="il im jj in b io ip iq ir is it iu iv kx ix iy iz ky jb jc jd kz jf jg jh ji hb bi translated">按标签名查找元素</p><p id="58e5" class="il im jj in b io ip iq ir is it iu iv kx ix iy iz ky jb jc jd kz jf jg jh ji hb bi translated">按类名查找元素</p><p id="0b50" class="il im jj in b io ip iq ir is it iu iv kx ix iy iz ky jb jc jd kz jf jg jh ji hb bi translated">通过css选择器查找元素</p></blockquote><p id="cbb7" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">我使用Xpath检查输入并向其发送数字:</p><figure class="jw jx jy jz fd ii"><div class="bz dy l di"><div class="ka ik l"/></div></figure><p id="9379" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">等待随机秒提供一些有效的互动，并告诉应用程序等待提交定位器20秒超时，并点击它:</p><figure class="jw jx jy jz fd ii"><div class="bz dy l di"><div class="ka ik l"/></div></figure><p id="27a6" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">提交后，我们将在结果页面上看到reCaptcha:</p><figure class="jw jx jy jz fd ii er es paragraph-image"><div class="er es lg"><img src="../Images/95518c99eae371bb526b2623b1afbd5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1370/format:webp/1*euVYjmpHRZ928hU1WwiLAg.png"/></div></figure><p id="63c3" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">在点击复选框之前，让我们模拟类似人类的鼠标交互，以便与页面进行更有效的交互，对于这个问题，我们使用<a class="ae jk" href="https://en.wikipedia.org/wiki/B-spline" rel="noopener ugc nofollow" target="_blank"> B样条</a>函数生成向量，并用它来执行鼠标移动。</p><blockquote class="ku kv kw"><p id="b1e7" class="il im jj in b io ip iq ir is it iu iv kx ix iy iz ky jb jc jd kz jf jg jh ji hb bi translated">B-spline是一个关于给定的<a class="ae jk" href="https://en.wikipedia.org/wiki/Degree_of_a_polynomial" rel="noopener ugc nofollow" target="_blank">次</a>、<a class="ae jk" href="https://en.wikipedia.org/wiki/Smooth_function" rel="noopener ugc nofollow" target="_blank">光滑度</a>和<a class="ae jk" href="https://en.wikipedia.org/wiki/Domain_(mathematics)" rel="noopener ugc nofollow" target="_blank">域</a>划分具有最小<a class="ae jk" href="https://en.wikipedia.org/wiki/Support_(mathematics)" rel="noopener ugc nofollow" target="_blank">支持度</a>的函数。</p></blockquote><figure class="jw jx jy jz fd ii"><div class="bz dy l di"><div class="ka ik l"/></div></figure><p id="6b0d" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">所以，因为验证码是在一个新的框架上打开的，我们需要告诉驱动程序和开关，然后找到<code class="du js jt ju jv b">recaptcha-anchor</code>可以为我们提供一个位置，开始我们的类人鼠标运动:</p><figure class="jw jx jy jz fd ii"><div class="bz dy l di"><div class="ka ik l"/></div></figure><p id="b60f" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">下一步是点击复选框，等待并再次做类似人类的鼠标移动。</p><figure class="jw jx jy jz fd ii"><div class="bz dy l di"><div class="ka ik l"/></div></figure><p id="ef58" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">在这一步，您将看到需要解决的挑战，因为我们正在使用Buster，您可以看到音频验证码求解器的按钮:</p><figure class="jw jx jy jz fd ii er es paragraph-image"><div class="er es lh"><img src="../Images/4c8d42bf246aa7bda3f1edef1b49b4a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*lKHI76RkZfmVlNPysYXK5Q.png"/></div></figure><p id="c00f" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">是的，就是它，如果我们找到锚就能找到它的ID。</p><figure class="jw jx jy jz fd ii er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es li"><img src="../Images/f0f157429cca462599ef3191affa958f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MBkSXi48k4116ZVbXEWoGQ.png"/></div></div></figure><p id="6820" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">但是为了得到更多的分数，首先我们需要点击音频按钮:</p><figure class="jw jx jy jz fd ii"><div class="bz dy l di"><div class="ka ik l"/></div></figure><p id="074d" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">并赶上新帧:</p><figure class="jw jx jy jz fd ii er es paragraph-image"><div class="er es lj"><img src="../Images/d915495a504ad3dd75f5ea53b7b1d228.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*CFlhLcZVKcTwiEIQmt9Ayg.png"/></div></figure><p id="561b" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">在新框架上，只需点击解算器按钮，就像这样:</p><figure class="jw jx jy jz fd ii"><div class="bz dy l di"><div class="ka ik l"/></div></figure><p id="0386" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">并返回到主框架:</p><figure class="jw jx jy jz fd ii"><div class="bz dy l di"><div class="ka ik l"/></div></figure><p id="81f3" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">是的，你的机器人绕过了验证码。</p><p id="2bdd" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">了解有关以下内容的更多信息:</p><div class="kb kc ez fb kd ke"><a href="https://github.com/teal33t/captcha_bypass" rel="noopener  ugc nofollow" target="_blank"><div class="kf ab dw"><div class="kg ab kh cl cj ki"><h2 class="bd hj fi z dy kj ea eb kk ed ef hh bi translated">teal 33t/验证码_bypass</h2><div class="kl l"><h3 class="bd b fi z dy kj ea eb kk ed ef dx translated">谷歌验证码旁路，使用Selenium，Geckodriver和Buster - teal33t/captcha_bypass</h3></div><div class="km l"><p class="bd b fp z dy kj ea eb kk ed ef dx translated">github.com</p></div></div><div class="kn l"><div class="lk l kp kq kr kn ks kt ke"/></div></div></a></div></div></div>    
</body>
</html>