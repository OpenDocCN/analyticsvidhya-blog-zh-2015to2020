<html>
<head>
<title>Basic Steps to Build a CRUD App with Ruby on Rails</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Ruby on Rails构建CRUD应用程序的基本步骤</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/basic-steps-to-build-a-crud-app-with-ruby-on-rails-c92557b0feb2?source=collection_archive---------11-----------------------#2019-12-31">https://medium.com/analytics-vidhya/basic-steps-to-build-a-crud-app-with-ruby-on-rails-c92557b0feb2?source=collection_archive---------11-----------------------#2019-12-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="cca1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我使用Ruby on Rails构建了一个CRUD(创建、读取、更新、销毁)web应用程序，并在下面列出了简单的步骤。在这个项目中，遵循基本的MVC(模型-视图-控制器)模式，为患有肾脏疾病的儿童的母亲创建了一个博客。登录后，用户可以列出与他们选择的主题或疾病相关的所有帖子。用户将能够添加、编辑和删除他们提交的帖子。与帖子类似，用户也可以创建和删除与帖子相关的评论。</p><ol class=""><li id="a1a9" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">首先，您需要打开您喜欢的终端并执行下面的<strong class="ih hj">来为您的新项目初始化Rails目录</strong>:</li></ol><pre class="jm jn jo jp fd jq jr js jt aw ju bi"><span id="1f58" class="jv jw hi jr b fi jx jy l jz ka">$ rails new Bowmoms-Capsule</span></pre><p id="098c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.<strong class="ih hj">使用Rails命令“generator”</strong>来创建模型、控制器和迁移。我的应用程序总共有5个不同的模型，这里我只使用了“post”模型进行演示:</p><p id="9723" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du kb kc kd jr b">$ rails generate resource Post title body user_id:integer topic_id:integer disease_id:integer</code></p><p id="891d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除非另有说明，否则Rails默认使用string作为数据类型，这就是为什么我不需要显式地编写title和body的数据类型。<code class="du kb kc kd jr b">resource</code> generator通过创建我们的应用程序启动所需的所有文件，为我们节省了大量时间。</p><p id="e5a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.<strong class="ih hj">在模型和<strong class="ih hj">之间添加关联</strong>构建您的验证</strong>:</p><figure class="jm jn jo jp fd kf er es paragraph-image"><div class="er es ke"><img src="../Images/8fcc07ffe5daaf9f0860ffdba917dc3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*kw2s4Cppz8C96IMVaTaACQ.png"/></div><figcaption class="ki kj et er es kk kl bd b be z dx translated">我加入了一个验证来确保文章标题不会重复。</figcaption></figure><p id="838e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.<strong class="ih hj">运行数据库迁移</strong>并检查您的模式:</p><pre class="jm jn jo jp fd jq jr js jt aw ju bi"><span id="a568" class="jv jw hi jr b fi jx jy l jz ka">$ rails db:migrate</span></pre><figure class="jm jn jo jp fd kf er es paragraph-image"><div class="er es km"><img src="../Images/3e42bd498835eeb9fbbc0ade8890a59d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*pvtN1FM_UEPB6v3Ou_yfwg.png"/></div><figcaption class="ki kj et er es kk kl bd b be z dx translated">ActiveRecord迁移用于创建表。</figcaption></figure><p id="c27c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.<strong class="ih hj">播种数据库</strong> : Faker gem用于为我的3个模型(包括post模型)生成随机数据。我使用create方法来填充其他两个模型的种子数据。</p><pre class="jm jn jo jp fd jq jr js jt aw ju bi"><span id="090b" class="jv jw hi jr b fi jx jy l jz ka">$ rails db:seed</span></pre><figure class="jm jn jo jp fd kf er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es kn"><img src="../Images/6f21d5aad781e63c2a5ad5136b41f937.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a-c5n5vHr1IqfRX7_fIU1A.png"/></div></div></figure><p id="d39e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行<code class="du kb kc kd jr b">$ rails console</code>，这允许我们在控制台中测试我们的代码，以确认您想要的一切都已添加到您的数据库中。</p><p id="499c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6.<strong class="ih hj">构建您的路线:</strong>在<em class="ks">配置</em>文件夹中的<em class="ks"> routes.rb </em>文件中设置路线。我的app默认地址是<code class="du kb kc kd jr b">diseases#index</code>，是疾病列表页面。运行<code class="du kb kc kd jr b">$ rails routes</code>来查看你的应用程序被配置到的所有路由。</p><figure class="jm jn jo jp fd kf er es paragraph-image"><div class="er es km"><img src="../Images/59043ae46aa1424bdd1b9bd08c9ed269.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*TFMZElvw1mq0SdsOi4r7NQ.png"/></div><figcaption class="ki kj et er es kk kl bd b be z dx translated">请注意，添加了自定义路线。</figcaption></figure><p id="a2b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在是时候处理我们的<strong class="ih hj"> CRUD </strong>函数了:</p><p id="7c44" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">7.控制器:控制器将我们的模型和视图联系在一起。它管理用户、模型和视图之间的数据流；它接受用户的请求，修改模型，并最终呈现视图。</p><figure class="jm jn jo jp fd kf er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es kt"><img src="../Images/493a24b6d133cc7376a5fa44d7dbffc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yXXsXmza01ebQE7RauNnfw.png"/></div></div><figcaption class="ki kj et er es kk kl bd b be z dx translated">我的应用程序使用post模型的所有7条RESTful路径。</figcaption></figure><p id="9950" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当创建操作成功时，一篇文章的新实例将被保存到我们的数据库中。如果验证失败，控制器会重新呈现<code class="du kb kc kd jr b">:new</code>页面，并给用户另一次提交帖子的机会。另外，请注意，每个用户都有一个记录的会话。</p><p id="39c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">8.<strong class="ih hj">视图</strong>:单击表单上的按钮后，Rails向用户显示结果以及相关的视图页面。</p><figure class="jm jn jo jp fd kf er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es ku"><img src="../Images/fef73d995f16a2918caf7f8677d2f78e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s9llTL7t1QWC4E1oVKBY1A.png"/></div></div><figcaption class="ki kj et er es kk kl bd b be z dx translated">视图使用<strong class="bd kv"> link_to </strong>助手创建一个带有所提供路径的超链接。</figcaption></figure><p id="550d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du kb kc kd jr b">$ rails server</code>允许我们从浏览器访问我们的应用。运行<code class="du kb kc kd jr b">$ rails server</code>并导航到<code class="du kb kc kd jr b"><a class="ae kw" href="http://localhost:3000/posts" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/posts</a></code>，看看你的页面看起来如何:</p><figure class="jm jn jo jp fd kf er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es kx"><img src="../Images/d8e5732f0e1cd47bd5ee801c5be49579.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RzmEDsRywKvLN4mdQKd8LQ.png"/></div></div></figure><p id="6cab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们需要一个简单的形式来添加一个新的职位到我们的数据库。<code class="du kb kc kd jr b">collection_select </code>下拉按钮用于选择帖子实例的关联疾病和主题。</p><figure class="jm jn jo jp fd kf er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es ky"><img src="../Images/0ad630c148fb63e30f0ee30f826c1e35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WkVi1x_PHLYt1ectJha4eA.png"/></div></div><figcaption class="ki kj et er es kk kl bd b be z dx translated"><strong class="bd kv"> form_for </strong> form helper用于方便使用用户输入创建新帖子。</figcaption></figure><p id="87dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">再次启动服务器并导航至<code class="du kb kc kd jr b"><a class="ae kw" href="http://localhost:3000/posts/new" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/posts/new</a></code>查看表单:</p><figure class="jm jn jo jp fd kf er es paragraph-image"><div class="er es kz"><img src="../Images/18b82e3cf411324c2792627accf3fc01.png" data-original-src="https://miro.medium.com/v2/resize:fit:806/format:webp/1*XFE1uACjhCVYzwnV47AMiw.png"/></div><figcaption class="ki kj et er es kk kl bd b be z dx translated">添加了“回到文章”和“回到疾病”按钮来在页面之间导航。</figcaption></figure><p id="b358" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们已经完成了一个运行在Rails上的全功能CRUD应用程序！最后；确保你最好的朋友在你工作的时候调试和提交。这个项目帮助我理解了整个过程中的CRUD和RESTful操作，我希望它对你有用。</p></div></div>    
</body>
</html>