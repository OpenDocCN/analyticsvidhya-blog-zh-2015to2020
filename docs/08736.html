<html>
<head>
<title>Automatically Find Optimal Threshold Point in ROC Curve using ROCit package in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用R中的ROCit包自动寻找ROC曲线中的最佳阈值点</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/automatically-find-optimal-threshold-point-in-roc-curve-using-rocit-package-in-r-8955c36c855e?source=collection_archive---------3-----------------------#2020-08-11">https://medium.com/analytics-vidhya/automatically-find-optimal-threshold-point-in-roc-curve-using-rocit-package-in-r-8955c36c855e?source=collection_archive---------3-----------------------#2020-08-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="808d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" rel="noopener" href="/analytics-vidhya/roc-curve-classification-metrics-why-metrics-cant-replace-your-common-sense-e82d71c12eb3">第一部分在这里</a></p><p id="6459" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">用ROCit包解释带R的二元分类器</strong></p><p id="2a20" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">灵敏度(或召回率或真阳性率)、假阳性率、特异性、精确度(或阳性预测值)、阴性预测值、误分类率、准确度、F分数-这些是用于评估二元分类器在某个阈值下的性能的流行度量。这些指标是在特定阈值下计算的。受试者工作特征(ROC)曲线是评估二元分类器整体诊断能力的常用工具。与依赖于某个阈值不同，ROC曲线下面积(也称为AUC)是关于二元分类器在分类任务中总体表现如何的汇总统计。ROCit软件包提供了灵活性，可以轻松评估阈值范围的指标。此外，ROC曲线以及AUC可以使用不同的方法获得，如经验法、双正态法和非参数法。ROCit包含了多种构建ROC曲线和AUC置信区间的方法。ROCit还提供构建经验收益表的选项，这是直接营销的便捷工具。该软件包提供了常用的可视化选项，如ROC曲线，KS图，升降机图。除了内置的默认图形设置，还可以通过提供必要的值作为函数参数来进行手动调整。ROCit是一个强大的工具，提供了一系列的东西，但它非常容易使用。</p><p id="a2e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">二元分类器的性能度量</strong></p><p id="3da4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">二元分类器的各种性能度量是可用的，它们是截止特定的。可以通过measure参数调用以下指标:</p><ul class=""><li id="2a21" class="je jf hi ih b ii ij im in iq jg iu jh iy ji jc jj jk jl jm bi translated">ACC:分类的整体准确性。</li><li id="c445" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">MIS:误分类率。</li><li id="90f5" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">SENS:敏感。</li><li id="a786" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">规格:特异性。</li><li id="ef8d" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">PREC:精确。</li><li id="5ea0" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">REC:召回。与敏感度相同。</li><li id="c3c6" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">PPV:阳性预测值。</li><li id="22dd" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">NPV:阳性预测值。</li><li id="7747" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">TPR:真阳性率。</li><li id="5d32" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">FPR:假阳性率。</li><li id="19d2" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">TNR:真实负利率。</li><li id="9689" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">假阴性率。</li><li id="a8bf" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">阳性诊断似然比。</li><li id="09a3" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">阴性诊断似然比。</li><li id="d378" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">FSCR:分数为F。</li></ul><p id="cbdb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> ROC曲线估计</strong></p><p id="0f97" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">rocit是ROCit包的主要功能。利用诊断分数和每个观察值的类别，它在方便的截止值计算真阳性率(灵敏度)和假阳性率(1-特异性),以构建ROC曲线。该函数返回“rocit”对象，该对象可以作为其他S3方法的参数传递。</p><p id="ec34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">糖尿病数据包含来自1046名受试者中的403名受试者的信息，这些受试者在一项研究中接受了采访，以了解弗吉尼亚州中部非洲裔美国人肥胖、糖尿病和其他心血管危险因素的患病率。根据洪约翰博士的说法，二型糖尿病(成人发病的糖尿病)与肥胖关系最密切。腰臀比可能是糖尿病和心脏病的预测指标。糖尿病II型还与高血压有关——它们可能都是“X综合征”的一部分。这403名受试者接受了糖尿病筛查。糖化血红蛋白&gt; 7.0通常被视为糖尿病的阳性诊断。</p><p id="f10e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在数据中，dtest变量表示glyhb是否大于7。</p><pre class="js jt ju jv fd jw jx jy jz aw ka bi"><span id="7b75" class="kb kc hi jx b fi kd ke l kf kg">data("Diabetes")</span><span id="c0ee" class="kb kc hi jx b fi kh ke l kf kg"><em class="ki">## first, fit a logistic model</em></span><span id="6132" class="kb kc hi jx b fi kh ke l kf kg">logistic.model &lt;- glm(as.factor(dtest)~</span><span id="5a68" class="kb kc hi jx b fi kh ke l kf kg">chol+age+bmi,</span><span id="411b" class="kb kc hi jx b fi kh ke l kf kg">data = Diabetes,</span><span id="b312" class="kb kc hi jx b fi kh ke l kf kg">family = "binomial")</span><span id="b02c" class="kb kc hi jx b fi kh ke l kf kg"><em class="ki">## make the score and class</em></span><span id="d8bc" class="kb kc hi jx b fi kh ke l kf kg">class &lt;- logistic.model$y</span><span id="a8f5" class="kb kc hi jx b fi kh ke l kf kg"><em class="ki"># score = log odds</em></span><span id="b4e2" class="kb kc hi jx b fi kh ke l kf kg">score &lt;- logit(logistic.model$fitted.values)</span><span id="5133" class="kb kc hi jx b fi kh ke l kf kg"><em class="ki">## rocit object</em></span><span id="c447" class="kb kc hi jx b fi kh ke l kf kg">rocit_emp &lt;- rocit(score = score,</span><span id="edf5" class="kb kc hi jx b fi kh ke l kf kg">class = class,</span><span id="0878" class="kb kc hi jx b fi kh ke l kf kg">method = "emp")</span><span id="56d6" class="kb kc hi jx b fi kh ke l kf kg">rocit_bin &lt;- rocit(score = score,</span><span id="4b3e" class="kb kc hi jx b fi kh ke l kf kg">class = class,</span><span id="0c58" class="kb kc hi jx b fi kh ke l kf kg">method = "bin")</span><span id="942f" class="kb kc hi jx b fi kh ke l kf kg">rocit_non &lt;- rocit(score = score,</span><span id="0d2f" class="kb kc hi jx b fi kh ke l kf kg">class = class,</span><span id="9233" class="kb kc hi jx b fi kh ke l kf kg">method = "non")</span><span id="5692" class="kb kc hi jx b fi kh ke l kf kg">summary(rocit_emp)</span><span id="e700" class="kb kc hi jx b fi kh ke l kf kg">summary(rocit_bin)</span><span id="0487" class="kb kc hi jx b fi kh ke l kf kg">summary(rocit_non)</span><span id="56a2" class="kb kc hi jx b fi kh ke l kf kg"><em class="ki">## Plot ROC curve</em></span><span id="4009" class="kb kc hi jx b fi kh ke l kf kg">plot(rocit_emp, col = c(1,"gray50"),</span><span id="262a" class="kb kc hi jx b fi kh ke l kf kg">legend = <strong class="jx hj">FALSE</strong>, YIndex = <strong class="jx hj">FALSE</strong>)<br/></span></pre><p id="91ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上述程序将为“糖尿病”数据集创建逻辑回归模型，所创建的rocit对象将为我们提供FPR和TPR之间的图表，并使用尤登指数得出最佳临界值，如下所示</p><figure class="js jt ju jv fd kk er es paragraph-image"><div class="er es kj"><img src="../Images/4219eccbb2503dce76c9c5f34e522731.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*GUgi08t3oWIZTO7F0uabGQ.png"/></div></figure><p id="3823" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ki">参考文献:</em> </strong></p><p id="2623" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ki"> 1。</em><a class="ae jd" href="https://MedicalBiostatistics.com" rel="noopener ugc nofollow" target="_blank"><em class="ki">https://MedicalBiostatistics.com</em></a></p><p id="8438" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ki"> 2。</em><a class="ae jd" href="https://rdrr.io/cran/ROCit/f/vignettes/my-vignette.Rmd" rel="noopener ugc nofollow" target="_blank"><em class="ki">https://rdrr.io/cran/ROCit/f/vignettes/my-vignette.Rmd</em></a></p></div></div>    
</body>
</html>