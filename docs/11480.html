<html>
<head>
<title>SUDOKU SOLVING STRATEGY USING INTEGER PROGRAMMING</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于整数规划的数独求解策略</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/sudoku-problem-solving-strategy-using-integer-programming-347a847235a5?source=collection_archive---------6-----------------------#2020-12-05">https://medium.com/analytics-vidhya/sudoku-problem-solving-strategy-using-integer-programming-347a847235a5?source=collection_archive---------6-----------------------#2020-12-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="ab fe cl ij"><img src="../Images/1987dc7c24c14842ea7c01a19415e887.png" data-original-src="https://miro.medium.com/v2/format:webp/1*4efV8QHLozvvCQ_lBQX8sw.png"/></div></figure><p id="a276" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们考虑在本文中得到上述数独问题的解决方案。</p><h1 id="14ee" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">导入包</h1><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="04c3" class="kr jl hi kn b fi ks kt l ku kv">from gurobipy import *</span></pre><h1 id="891f" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">设置输入网格</h1><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="b8eb" class="kr jl hi kn b fi ks kt l ku kv">Grid = [<br/>[0,0,0, 1,0,0, 0,0,0],<br/>[0,2,4, 0,5,0, 0,0,0],<br/>[0,0,0, 0,8,0, 3,7,5],<br/><br/>[9,0,0, 0,0,0, 4,0,0],<br/>[0,7,0, 0,0,0, 0,3,0],<br/>[0,0,2, 0,0,0, 0,0,8],<br/><br/>[1,5,8, 0,9,0, 0,0,0],<br/>[0,0,0, 0,6,0, 9,1,0],<br/>[0,0,0, 0,0,3, 0,0,0]]<br/><br/>#N represents the Big Square comprised of 9 smaller squares<br/>N = range(9)<br/><br/>#K represents the numbers 1-9<br/>K = range(1,10)</span></pre><h1 id="82c5" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">设定模型</h1><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="1907" class="kr jl hi kn b fi ks kt l ku kv">m = Model()</span></pre><h1 id="9e9d" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">定义变量</h1><figure class="ki kj kk kl fd ii er es paragraph-image"><div class="ab fe cl ij"><img src="../Images/4075b993c8261370a05273fbc2749b58.png" data-original-src="https://miro.medium.com/v2/format:webp/1*YF1kYG6ECC-K0K1WLOJjCg.png"/></div></figure><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="1439" class="kr jl hi kn b fi ks kt l ku kv">X = {(i,j,k): m.addVar(vtype=GRB.BINARY) for i in N for j in N for k in K}</span></pre><h1 id="688e" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">定义约束</h1><p id="480c" class="pw-post-body-paragraph im in hi io b ip kw ir is it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj hb bi translated">约束1:</p><p id="f7fc" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">I，j，k在网格中是预先指定的</p><figure class="ki kj kk kl fd ii er es paragraph-image"><div class="ab fe cl ij"><img src="../Images/a3ace56efbf925efc2f29671b8babae8.png" data-original-src="https://miro.medium.com/v2/format:webp/1*kqa8cER7cpIJWhzT30BRBA.png"/></div></figure><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="c927" class="kr jl hi kn b fi ks kt l ku kv">PreAssign = {<br/>    (i,j): m.addConstr(X[i,j,Grid[i][j]]==1)<br/>    for i in N for j in N if Grid[i][j]&gt;0}</span></pre><p id="3c34" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">约束2:</p><p id="81ec" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">每个单元格中只有一个数字</p><figure class="ki kj kk kl fd ii er es paragraph-image"><div class="ab fe cl ij"><img src="../Images/06995eccec70919f081f6d8e9c40381b.png" data-original-src="https://miro.medium.com/v2/format:webp/1*aZPC3DA1jDI_wByyrR2nOg.png"/></div></figure><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="49ff" class="kr jl hi kn b fi ks kt l ku kv">OnePerSquare = {<br/>    (i,j): m.addConstr(quicksum(X[i,j,k] for k in K)==1)<br/>    for i in N for j in N}</span></pre><p id="918d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">约束3:</p><p id="bc4d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">每一行都必须有1-9的数字</p><figure class="ki kj kk kl fd ii er es paragraph-image"><div class="ab fe cl ij"><img src="../Images/87ad34eddad7e702c3b9fdf215fd2b81.png" data-original-src="https://miro.medium.com/v2/format:webp/1*l8hY53A89a22YvDJyywWvw.png"/></div></figure><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="9a9d" class="kr jl hi kn b fi ks kt l ku kv">EachValueInRow = {<br/>    (i,k): m.addConstr(quicksum(X[i,j,k] for j in N)==1)<br/>    for i in N for k in K}</span></pre><p id="1747" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">约束4:</p><p id="d582" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">每一列都必须有数字1-9</p><figure class="ki kj kk kl fd ii er es paragraph-image"><div class="ab fe cl ij"><img src="../Images/27dc8b7c4f92b3c2dcc40db81a87c583.png" data-original-src="https://miro.medium.com/v2/format:webp/1*RkY1J6E7RCvhNh8HQjHBgQ.png"/></div></figure><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="6e13" class="kr jl hi kn b fi ks kt l ku kv">EachValueInCol = {<br/>    (j,k): m.addConstr(quicksum(X[i,j,k] for i in N)==1)<br/>    for j in N for k in K}</span></pre><figure class="ki kj kk kl fd ii er es paragraph-image"><div class="ab fe cl ij"><img src="../Images/15b0a35f96b7d211a46a231ae5d35ffd.png" data-original-src="https://miro.medium.com/v2/format:webp/1*kK5Z3JbAzsIg_HOBsBIs7A.png"/></div></figure><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="0935" class="kr jl hi kn b fi ks kt l ku kv">EachValueInSubSquares = {<br/>    (ii,jj,k): m.addConstr(quicksum(X[i,j,k] <br/>                        for i in range(3*ii,3*ii+3)<br/>                        for j in range(3*jj,3*jj+3))==1)<br/>    for ii in range(3) for jj in range(3) for k in K}</span></pre><h1 id="4820" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">优化结果</h1><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="4880" class="kr jl hi kn b fi ks kt l ku kv">m.optimize()<br/>print('---+---+---')<br/>for i in N:<br/>    if i==3 or i==6:<br/>        print('---+---+---')<br/>    for j in N:<br/>        if j==3 or j==6:<br/>            print('|', end='')<br/>        for k in K:<br/>            if X[i,j,k].x &gt; 0.9:<br/>                print(k,sep='',end='')<br/>    print('')<br/>print('---+---+---')</span><span id="d043" class="kr jl hi kn b fi lb kt l ku kv">Gurobi Optimizer version 9.0.1 build v9.0.1rc0 (win64)<br/>Optimize a model with 346 rows, 729 columns and 2938 nonzeros<br/>Model fingerprint: 0x125478e4<br/>Variable types: 0 continuous, 729 integer (729 binary)<br/>Coefficient statistics:<br/>  Matrix range     [1e+00, 1e+00]<br/>  Objective range  [0e+00, 0e+00]<br/>  Bounds range     [1e+00, 1e+00]<br/>  RHS range        [1e+00, 1e+00]<br/>Presolve removed 346 rows and 729 columns<br/>Presolve time: 0.04s<br/>Presolve: All rows and columns removed<br/><br/>Explored 0 nodes (0 simplex iterations) in 0.06 seconds<br/>Thread count was 1 (of 8 available processors)<br/><br/>Solution count 1: 0 <br/><br/>Optimal solution found (tolerance 1.00e-04)<br/>Best objective 0.000000000000e+00, best bound 0.000000000000e+00, gap 0.0000%<br/>---+---+---<br/>385|176|249<br/>724|359|861<br/>691|482|375<br/>---+---+---<br/>913|827|456<br/>876|945|132<br/>542|631|798<br/>---+---+---<br/>158|794|623<br/>237|568|914<br/>469|213|587<br/>---+---+---</span></pre><p id="15d6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">基本上，上面输出的这个谜题的数独解如下:</p><figure class="ki kj kk kl fd ii er es paragraph-image"><div class="ab fe cl ij"><img src="../Images/c92a81185152d59209a4076543053430.png" data-original-src="https://miro.medium.com/v2/format:webp/1*KeTlE5DC-AG3TMFqAB-RWg.png"/></div></figure><p id="1786" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">*该算法可以解决任何数独难题，只需在网格中输入预先分配的值。</p></div></div>    
</body>
</html>