<html>
<head>
<title>Comments in Code: How To Avoid Clutter and Make Your Code More Readable</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">代码中的注释:如何避免混乱并使代码更具可读性</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/comments-in-code-how-to-avoid-clutter-and-make-your-code-more-readable-9b3ebffba319?source=collection_archive---------16-----------------------#2020-05-21">https://medium.com/analytics-vidhya/comments-in-code-how-to-avoid-clutter-and-make-your-code-more-readable-9b3ebffba319?source=collection_archive---------16-----------------------#2020-05-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/208366c8763a9afaf28f1f0b7d974df3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*itapqsKD0wjK1w1y"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">马库斯·斯皮斯克在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="e0bc" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">代码中的注释</h1><p id="7fbd" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">代码中的注释可能是一个有点争议的话题。</p><p id="6aea" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">有些人认为每行代码都应该有一个注释，而其他人认为注释表明没有编写出适当的自文档化的代码。</p><p id="7b95" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">像这个世界上的大多数事情一样，这是一个有些微妙的话题，答案在中间。</p><h1 id="aa6e" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">为什么我们要用代码写注释？</h1><p id="9acb" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">简单地说，</p><blockquote class="kw"><p id="9d4c" class="kx ky hi bd kz la lb lc ld le lf kq dx translated"><em class="lg">注释应该让一段代码更容易理解，或者提供一些本来就不明显的信息。</em></p></blockquote><p id="b258" class="pw-post-body-paragraph jt ju hi jv b jw lh jy jz ka li kc kd ke lj kg kh ki lk kk kl km ll ko kp kq hb bi translated">这看起来很简单，甚至是显而易见的，但是有很多方法注释经常被误用，这使得代码更难理解，增加了不必要的复杂性。</p><p id="e21e" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">让我们看看一些简单的指导方针，我们可以用它们来决定什么时候使用注释是合适的，以及我们可以用什么策略来使代码更容易阅读。</p><h1 id="e370" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">如何使用注释的指南</h1><h1 id="8453" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">注释应该描述代码“为什么”做某事，而不是“做什么”</h1><p id="8566" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">很容易陷入写一行代码来描述一段代码做什么的陷阱；然而，这可能不是最好的方法。</p><p id="bcf1" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">任何时候你写评论，你都是在告诉查看代码的开发人员，“你应该阅读这篇文章来了解这段代码。”这意味着作为一名开发人员，我现在将不得不阅读两行而不是一行来理解一个代码块做什么。</p><p id="ff2b" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">一个更好的选择可能是使用更明确命名的变量、函数甚至类。我敢说，试着让你的代码…自我记录？</p><p id="555e" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">仍然有很好的理由留下注释，但是那些通常解释为什么代码做某事而不是它做什么。</p><p id="c8e4" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">例如，也许解释一个奇怪的设计决策的推理是有用的？或者任何修改代码的人在修改之前都需要知道一些事情？或者留下一个应该传入函数的字符串的例子可能有用？有很多理由留下评论。</p><p id="93a8" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">让我们看一个简单的例子来说明这一点。</p><p id="6b7c" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated"><strong class="jv hj">例子#1:冗长的</strong></p><figure class="lm ln lo lp fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="ab29" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">那有点拗口！</p><p id="aaf0" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">在上面的例子中，所有的注释都很好地描述了代码在做什么，但是现在问问你自己，这些注释真的让代码更容易理解了吗？</p><p id="8a10" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">因为每一行代码上面都有一个注释描述它的作用，如果你想阅读这段代码，你也需要通读所有的注释。</p><p id="8891" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">几乎可以肯定的是，与没有任何注释的情况相比，通读和理解这段代码需要花费更长的时间！</p><p id="6ea1" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">好吧，我们再试一次。</p><p id="cdf4" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated"><strong class="jv hj">例2:简洁</strong></p><figure class="lm ln lo lp fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="93cd" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">好了，现在我们已经去掉了一大堆注释，取而代之的是给变量起一个更清晰的名字。</p><p id="bc74" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">这段代码做了什么现在已经很明显了，我们的代码足够短，你可以在几秒钟内轻松地通读它的代码。</p><p id="0cd0" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">老实说，这看起来很不错。如果我在调试问题时看到这段代码，我会毫不犹豫地去看它。但我仍然认为我们可以做得更好。</p><p id="4d8e" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">好的，让我们再试一次…</p><p id="bf19" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated"><strong class="jv hj">例3:清洁</strong></p><figure class="lm ln lo lp fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="4f4c" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">好了，现在我们有进展了！</p><p id="8228" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">我们在这里做了什么？嗯，我们将所有计算“一分钟内的秒数”的逻辑移到了它自己的函数中。</p><p id="688c" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">这意味着任何浏览这段代码的开发人员不再需要关心如何计算一天中的秒数！如果我试图调试一个与一天中出错的时间无关的问题，我可以不加思索地浏览那个函数调用。</p><p id="4fb9" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">另外，我也很清楚这段代码是干什么的。我正在获取一天中的秒数，并将其记录到控制台中。</p><p id="7515" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">我不需要注释来告诉我这两行代码是做什么的，因为这些函数的名字非常清楚，并且计算一天中秒数的复杂性被移到了一个函数中。</p><p id="7a25" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">如果出于某种原因，我想知道计算是如何进行的，我可以很容易地去查看函数定义。然而，大多数时候，我可能并不关心这个值是如何计算的。</p><p id="c853" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">但是剩下的那个评论呢？好吧，老实说，这段代码有点傻……<strong class="jv hj">为什么我们首先要把那个值记录到控制台？这段代码需要保留还是可以删除？</strong></p><p id="f84a" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated"><strong class="jv hj">剩下的一个内容回答了那个问题！作为一名开发人员，我现在知道为什么那些看似无用的代码会在那里了。这是一个例子！所以我可能应该把它留在那里，这样其他人可以从这个例子中学习，而不是删除它。</strong></p><h1 id="089d" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">不要将旧的遗留代码注释掉</h1><p id="c4b9" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">这个很简单。</p><blockquote class="kw"><p id="5531" class="kx ky hi bd kz la lb lc ld le lf kq dx translated">如果一段代码不再有用或过时，删除它。</p></blockquote><p id="3c14" class="pw-post-body-paragraph jt ju hi jv b jw lh jy jz ka li kc kd ke lj kg kh ki lk kk kl km ll ko kp kq hb bi translated">现在您可能会问自己，“如果我又需要那个代码怎么办！?"</p><p id="25ef" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">好消息！您的开发团队和几乎世界上所有的开发团队都使用<strong class="jv hj">版本控制</strong>！我们不必担心删除旧代码，因为如果我们需要那些代码，我们可以及时返回并找到它。</p><p id="185b" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">当您将旧的注释掉时，它周围的代码很快就会过时，因为变量名会改变，应用程序的结构也会修改。很快这段旧代码不仅没有被使用，甚至不再工作了！</p><p id="1863" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">在你意识到之前，如果你把旧的注释掉的代码放在你的类和函数周围，那将会是一片不可读的混乱。</p><p id="2ccd" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">帮你自己和其他人一个忙，删除旧代码。不要评论出来。</p><p id="5ff5" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">不要这样做。</p><figure class="lm ln lo lp fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="1561" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">现在，您可能会想，有时让旧函数仍然可供参考是很有用的。谁知道呢，也许你是对的。规则总有例外。</p><p id="ff3d" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">但这仅仅是一个非常罕见的例外<strong class="jv hj">。99%的时候你不应该把旧代码注释掉。如果你真的觉得自己属于那0.1%的情况，一定要留下描述性的注释，说明为什么代码应该被注释掉，这样下一个阅读代码的开发人员就知道他们不应该当场删除它。</strong></p><p id="42f0" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">把它想象成在办公室冰箱的食物上写上你的名字和日期。没有日期，你不知道它已经存在多久了，它可能会腐烂…就像你的旧注释掉的代码一样。</p><h1 id="08a5" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">想想你的评论会如何老化</h1><blockquote class="kw"><p id="11e8" class="kx ky hi bd kz la lb lc ld le lf kq dx translated">你的代码在一天、一周或一年后会是什么样子？</p></blockquote><p id="e991" class="pw-post-body-paragraph jt ju hi jv b jw lh jy jz ka li kc kd ke lj kg kh ki lk kk kl km ll ko kp kq hb bi translated">我们来看几个例子。</p><p id="8c2e" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated"><strong class="jv hj">例1:“新”代码</strong></p><figure class="lm ln lo lp fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="5bc8" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">这个注释描述的函数在提交后就不再是新的了。</p><p id="56b4" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">此外，函数的名字应该足够清楚，这样你就不需要在第一时间使用这个注释</p><p id="ba4b" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated"><strong class="jv hj">例2:我们讨论过这个</strong></p><figure class="lm ln lo lp fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="b739" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">坦白地说，(对不起，我控制不住自己)我不知道弗兰克是谁，谁知道5年后他是否还会在这里工作。不仅除了你没人知道这次谈话的内容，我保证一个月后你也不会记得这次谈话的内容。</p><p id="9429" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">考虑描述对话的结果，而不是说有对话。这样，开发人员就不会意外地将代码更改回对话之前的状态。</p><p id="0afc" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated"><strong class="jv hj">例3:版本控制2.0 </strong></p><figure class="lm ln lo lp fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="12ad" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">同样，我们有版本控制。</p><p id="07b7" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">如果我想看看是谁写了这个不可读的老鼠窝的一个类，我可以一查文件的历史。这不仅会告诉我谁在什么时间做了更改，还会告诉我那天还做了什么更改，如果幸运的话，还会有一条解释更改的简明提交消息。</p><h1 id="2314" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">结论</h1><p id="d9b5" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">评论可能非常有用，但很容易做过头。</p><p id="8ac2" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">我希望读完这篇文章后，下次在代码中留下注释时，你可以三思而行。</p><p id="a61d" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">谢谢你们所有人的阅读，我很想听到你们的…评论…在下面！</p></div></div>    
</body>
</html>