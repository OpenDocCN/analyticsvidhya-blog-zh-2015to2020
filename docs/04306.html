<html>
<head>
<title>The easiest way to deploy a deep learning web app</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">部署深度学习web应用的最简单方法</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/the-easiest-way-to-deploy-a-deep-learning-web-app-21ddc9b8d5e3?source=collection_archive---------23-----------------------#2020-03-13">https://medium.com/analytics-vidhya/the-easiest-way-to-deploy-a-deep-learning-web-app-21ddc9b8d5e3?source=collection_archive---------23-----------------------#2020-03-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="ee4a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">包含深度学习模型的jupyter笔记本可以在<a class="ae jd" href="https://github.com/abhhii/GuitarClassification" rel="noopener ugc nofollow" target="_blank">https://github.com/abhhii/GuitarClassification</a>买到。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/3430a8ecf5434a8cbb9d948a9d9fa0f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HU_QFWbeYFmqiJ86SodpAw.png"/></div></div></figure><h1 id="1003" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated"><strong class="ak">简介</strong></h1><p id="7ec8" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">所以你刚刚开始学习深度学习，终于做出了你的第一个很酷的模型。现在你想把它展示给你的朋友，这样他们就可以自己尝试了。但是，当你第一次想到与全世界分享你的酷项目时，Jupyter笔记本并不是你所想的那样。世界上任何人都可以访问的web app似乎是更可行的选择。但是你不想花时间做web开发。解决办法:这个帖子。</p><h1 id="dd41" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated"><strong class="ak">我们的目标</strong></h1><p id="dbec" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">在这篇文章中，我将描述将深度学习模型部署为web应用程序的最简单的方法，无需任何实际编码，也不会花费您任何钱。最终的结果会是我做的这个应用程序:</p><p id="1060" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://whats-that-guitar.onrender.com/" rel="noopener ugc nofollow" target="_blank">https://whats-that-guitar.onrender.com/</a></p><h1 id="8c19" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated"><strong class="ak">将模型投入生产</strong></h1><p id="c756" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">我用fastai库开发了我的深度学习模型。Fastai库基于脸书的PyTorch框架。我的深度学习模型接受吉他的图像，并将其分类为声学、电子、拱顶、共鸣器或双颈吉他中的一种。</p><p id="9978" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我使用Resnet34对五种类型的吉他图像进行训练。cnn_learner对象被命名为“learn”。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kt"><img src="../Images/bb9c775855ec0845b6ec2311b2cbb74a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Awjauwmz_FMKu73ZGBOU0A.png"/></div></div></figure><p id="bf27" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在训练模型和调整参数以获得最佳结果之后，是将模型投入生产的时候了。首先我们必须导出训练好的模型，这可以通过使用fastai库提供的<em class="ku"> export() </em>函数来完成。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kv"><img src="../Images/2f5e779096b24af7d43261fb475fd618.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B5dOIUXG-rizJCTGEKMV8g.png"/></div></div></figure><p id="c967" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将在我们工作的目录中创建一个名为“export.pkl”的文件，该文件包含部署我们的模型所需的所有内容(模型、权重以及一些元数据，如使用的类或转换/规范化)。</p><h1 id="7e24" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">使用渲染部署</h1><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kw"><img src="../Images/6e890f0b8700938367d383024232ac5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*nfCs4_xWg_zUjxfGPSEq5Q.png"/></div></figure><p id="809a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Render是一个统一的平台，通过免费SSL、全球CDN、专用网络和Git自动部署来构建和运行您的所有应用和网站。对于我们的使用，我们可以轻松地在render上免费部署一个web应用程序。我们将使用<a class="ae jd" href="https://github.com/render-examples/fastai-v3" rel="noopener ugc nofollow" target="_blank"> starter repo </a>，它已经部署了fastai深度学习课程中教授的模型。</p><h2 id="c98c" class="kx jr hi bd js ky kz la jw lb lc ld ka iq le lf ke iu lg lh ki iy li lj km lk bi translated"><strong class="ak">一次设置</strong></h2><p id="4ae4" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">将已启动的回购从GitHub转入你的GitHub账户。点击此链接找到回购:<a class="ae jd" href="https://github.com/render-examples/fastai-v3" rel="noopener ugc nofollow" target="_blank">https://github.com/render-examples/fastai-v3</a></p><p id="b9f6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建渲染帐户。<a class="ae jd" href="https://dashboard.render.com/register?i=fastai-v3" rel="noopener ugc nofollow" target="_blank">注册</a>一个渲染账号。不需要信用卡。</p><h2 id="748f" class="kx jr hi bd js ky kz la jw lb lc ld ka iq le lf ke iu lg lh ki iy li lj km lk bi translated"><strong class="ak">项目前期设置</strong></h2><p id="c37f" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">步骤1:上传您的训练模型文件</p><p id="8350" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将我们使用<em class="ku"> learn.export() </em>创建的训练模型文件上传到google drive或Dropbox等云服务。现在复制文件的下载链接。<strong class="ih hj">注意:</strong>下载链接通常不同于google drive提供的共享链接。你可以使用类似<a class="ae jd" href="https://syncwithtech.blogspot.com/p/direct-download-link-generator.html" rel="noopener ugc nofollow" target="_blank">这些</a>的服务，通过进入共享链接来获得下载链接。</p><p id="dcee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第二步:为你的模型定制应用程序</p><p id="afb4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">编辑<em class="ku"> app </em>目录下的<em class="ku"> server.py </em>文件，用上面创建的链接更新<em class="ku"> export_file_directory </em>。还要用您的分类模型的类更新classes变量。更新<em class="ku"> app/view </em>目录中的<em class="ku">index.html</em>文件，以更改出现在您的应用主页上的文本。</p><p id="fb34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第三步:在GitHub上提交和推送您的更改</p><p id="3961" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">提交回购后，您就可以开始部署了。</p><h2 id="7ee6" class="kx jr hi bd js ky kz la jw lb lc ld ka iq le lf ke iu lg lh ki iy li lj km lk bi translated">部署</h2><p id="dd70" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">步骤1: <strong class="ih hj">在render上创建一个新的web服务</strong>，并使用我们刚刚分叉的repo。您需要提供render权限来访问您的存储库。</p><p id="dffd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤2:在部署屏幕上，<strong class="ih hj">为您的服务选择一个名称</strong>，并使用Docker作为环境。将使用服务名创建一个不可更改的url。</p><p id="3062" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第三步:点击<strong class="ih hj">保存Web服务。你完成了！！该服务将开始构建，并在几分钟后在您的控制面板中显示的url上线。</strong></p><h2 id="d3fb" class="kx jr hi bd js ky kz la jw lb lc ld ka iq le lf ke iu lg lh ki iy li lj km lk bi translated">测试</h2><p id="0fe8" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">转到您的应用程序url来测试部署。一个url的例子看起来像:<a class="ae jd" href="https://whats-that-guitar.onrender.com/" rel="noopener ugc nofollow" target="_blank"><em class="ku">https://whats-that-guitar.onrender.com/</em></a></p><p id="51f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“那把吉他是什么”是我的服务名。在进一步测试应用程序时，您还可以查看服务日志。</p><h1 id="6c8b" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">包裹</h1><p id="319d" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">这个部署不能处理大量的请求，比如每秒1000个请求(毕竟它是免费的..)但是把自己的作品展示给世界上任何一个人都足够了。我相信render对于那些想要部署深度学习模型而不想花太多时间构建web应用程序的人来说是一项出色的服务。</p><p id="8bb2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">欢迎对我的吉他应用程序提出建议。</p><p id="0aba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<a class="ae jd" href="https://github.com/abhhii" rel="noopener ugc nofollow" target="_blank">https://github.com/abhhii</a>探索我的其他项目。</p><p id="9eeb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">和平☮！</p></div></div>    
</body>
</html>