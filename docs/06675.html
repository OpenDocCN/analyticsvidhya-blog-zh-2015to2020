<html>
<head>
<title>Install OpenLDAP with phpLDAPAdmin on ubuntu</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在ubuntu上用phpLDAPAdmin安装OpenLDAP</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/install-openldap-with-phpldapadmin-on-ubuntu-9e56e57f741e?source=collection_archive---------1-----------------------#2020-05-30">https://medium.com/analytics-vidhya/install-openldap-with-phpldapadmin-on-ubuntu-9e56e57f741e?source=collection_archive---------1-----------------------#2020-05-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="dfbf" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">在ubuntu 18.04上安装openLDAP</h2><div class=""/><div class=""><h2 id="b2ca" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">在ubuntu 18.04上使用phpldapadmin UI配置开放ldap</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/fd30347555ea3054e600c0b058883a73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wFzEkR9bRIvatR1b"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">迪伦·诺尔特在<a class="ae jw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><blockquote class="jx jy jz"><p id="7352" class="ka kb kc kd b ke kf is kg kh ki iv kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">OpenLDAP是一个开源的快速目录服务器，为网络客户端提供目录服务。客户端应用程序使用<strong class="kd hs">轻量级目录访问协议(LDAP) </strong>连接到OpenLDAP服务器，以访问存储在该服务器上的组织信息。如果有适当的访问权限，客户端可以搜索目录，修改和操作目录中的记录</p></blockquote><p id="ea8f" class="pw-post-body-paragraph ka kb hi kd b ke kf is kg kh ki iv kj kx kl km kn ky kp kq kr kz kt ku kv kw hb bi translated"><strong class="kd hs">注:这篇文章也发表在我的个人博客上。(</strong><a class="ae jw" href="https://dineshkumarkb.com/tech/install-openldap-with-phpldapadmin-on-ubuntu/" rel="noopener ugc nofollow" target="_blank"><strong class="kd hs">https://dineshkumarkb . com/tech/install-OpenLDAP-with-phpldapadmin-on-Ubuntu/</strong></a><strong class="kd hs">)</strong></p><h2 id="0d93" class="la lb hi bd lc ld le lf lg lh li lj lk kx ll lm ln ky lo lp lq kz lr ls lt ho bi translated">步骤1 —安装slapd —独立LDAP守护程序</h2><pre class="jh ji jj jk fd lu lv lw lx aw ly bi"><span id="0933" class="la lb hi lv b fi lz ma l mb mc">$sudo apt-get update<br/>$sudo apt-get install slapd ldap-utils</span></pre><p id="1006" class="pw-post-body-paragraph ka kb hi kd b ke kf is kg kh ki iv kj kx kl km kn ky kp kq kr kz kt ku kv kw hb bi translated">在安装过程中，系统会提示您输入管理员密码。请输入一个并记住相同的内容。然后slapd会自动安装。</p><h2 id="d37b" class="la lb hi bd lc ld le lf lg lh li lj lk kx ll lm ln ky lo lp lq kz lr ls lt ho bi translated">步骤2 —验证slapd状态</h2><pre class="jh ji jj jk fd lu lv lw lx aw ly bi"><span id="2ec5" class="la lb hi lv b fi lz ma l mb mc">systemctl status slapd</span></pre><h2 id="b99e" class="la lb hi bd lc ld le lf lg lh li lj lk kx ll lm ln ky lo lp lq kz lr ls lt ho bi translated">步骤3 —安装后配置openLDAP服务器</h2><pre class="jh ji jj jk fd lu lv lw lx aw ly bi"><span id="43f5" class="la lb hi lv b fi lz ma l mb mc">sudo dpkg-reconfigure slapd</span></pre><p id="6e21" class="pw-post-body-paragraph ka kb hi kd b ke kf is kg kh ki iv kj kx kl km kn ky kp kq kr kz kt ku kv kw hb bi translated">会提示一系列问题。请选择下面提供的选项</p><p id="df7c" class="pw-post-body-paragraph ka kb hi kd b ke kf is kg kh ki iv kj kx kl km kn ky kp kq kr kz kt ku kv kw hb bi translated">1.省略openLDAP配置？<strong class="kd hs">否</strong></p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es md"><img src="../Images/2c25c24eb76ab142d750d6c75b91b31d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h8cRHA14O3psdVZMkj0j_w.png"/></div></div></figure><p id="f7d6" class="pw-post-body-paragraph ka kb hi kd b ke kf is kg kh ki iv kj kx kl km kn ky kp kq kr kz kt ku kv kw hb bi translated">2.DNS域名。输入域名。该域名将用于为您的openLDAP服务器创建根dn(可分辨名称)。例如testldap.com。您的dn将是dc=testldap，dc=com。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es me"><img src="../Images/621ae84fada03d27a41e79c403f2aeb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y1RQJJ2DC-WrE9vpat2B4A.png"/></div></div></figure><p id="9739" class="pw-post-body-paragraph ka kb hi kd b ke kf is kg kh ki iv kj kx kl km kn ky kp kq kr kz kt ku kv kw hb bi translated">3.组织名称:输入您的组织名称</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mf"><img src="../Images/511d866df7be29ad6934ab0ea6c9dd3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lL2OV3gz30O9IUGDynt3EQ.png"/></div></div></figure><p id="f17d" class="pw-post-body-paragraph ka kb hi kd b ke kf is kg kh ki iv kj kx kl km kn ky kp kq kr kz kt ku kv kw hb bi translated">4.管理员密码。设置与第1步相同的管理员密码。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mg"><img src="../Images/c285a953649b31d9678d8a026028b77a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/format:webp/1*nUd-95EJ0-ISOHt8xGMKCw.png"/></div></figure><p id="768c" class="pw-post-body-paragraph ka kb hi kd b ke kf is kg kh ki iv kj kx kl km kn ky kp kq kr kz kt ku kv kw hb bi translated">5.数据库:BDB已被否决。MDB的读/写能力相对更快。所以我们选择MDB</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mh"><img src="../Images/dcfa040b924329df101c297fcf46a91e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CDnpUnzFIZbKNJPGo9wJzQ.png"/></div></div></figure><p id="2a6e" class="pw-post-body-paragraph ka kb hi kd b ke kf is kg kh ki iv kj kx kl km kn ky kp kq kr kz kt ku kv kw hb bi translated">6.是否要在清除期间删除数据库？<strong class="kd hs">否</strong></p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mi"><img src="../Images/9ef8aaef3d548cf619ad0e5c6b9cb2ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*kdmqn5fX7iLDU99lls57pQ.png"/></div></figure><p id="6847" class="pw-post-body-paragraph ka kb hi kd b ke kf is kg kh ki iv kj kx kl km kn ky kp kq kr kz kt ku kv kw hb bi translated">7.移动旧数据库？<strong class="kd hs">是</strong></p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mh"><img src="../Images/d7b48dbf4b9dc3c89deaeff0035891e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UTa1x7JWQzSVdeba3KpR4Q.png"/></div></div></figure><p id="0226" class="pw-post-body-paragraph ka kb hi kd b ke kf is kg kh ki iv kj kx kl km kn ky kp kq kr kz kt ku kv kw hb bi translated">现在，您的openLDAP已经配置好，可以使用了。</p><pre class="jh ji jj jk fd lu lv lw lx aw ly bi"><span id="5ace" class="la lb hi lv b fi lz ma l mb mc">Output:</span><span id="3f46" class="la lb hi lv b fi mj ma l mb mc">Backing up /etc/ldap/slapd.d in /var/backups/slapd-2.4.45+dfsg-1ubuntu1.5... done.<br/>  Moving old database directory to /var/backups:<br/>  - directory unknown... done.<br/>  Creating initial configuration... done.<br/>  Creating LDAP directory... done.</span></pre><h2 id="14a9" class="la lb hi bd lc ld le lf lg lh li lj lk kx ll lm ln ky lo lp lq kz lr ls lt ho bi translated">步骤4 —配置LDAP客户端</h2><pre class="jh ji jj jk fd lu lv lw lx aw ly bi"><span id="0ec4" class="la lb hi lv b fi lz ma l mb mc">sudo nano /etc/ldap/ldap.conf</span></pre><p id="ee74" class="pw-post-body-paragraph ka kb hi kd b ke kf is kg kh ki iv kj kx kl km kn ky kp kq kr kz kt ku kv kw hb bi translated">指定我们配置的openLDAP服务器的基本dn和URI</p><pre class="jh ji jj jk fd lu lv lw lx aw ly bi"><span id="7824" class="la lb hi lv b fi lz ma l mb mc">BASE     dc=testldap,dc=com<br/>URI      ldap://localhost</span></pre><h2 id="f6d4" class="la lb hi bd lc ld le lf lg lh li lj lk kx ll lm ln ky lo lp lq kz lr ls lt ho bi translated">步骤5 —测试服务器</h2><pre class="jh ji jj jk fd lu lv lw lx aw ly bi"><span id="c790" class="la lb hi lv b fi lz ma l mb mc">ldapsearch -x</span></pre><p id="adc6" class="pw-post-body-paragraph ka kb hi kd b ke kf is kg kh ki iv kj kx kl km kn ky kp kq kr kz kt ku kv kw hb bi translated">输出:</p><pre class="jh ji jj jk fd lu lv lw lx aw ly bi"><span id="5202" class="la lb hi lv b fi lz ma l mb mc">ldapsearch -x<br/># extended LDIF<br/>#<br/># LDAPv3<br/># base &lt;dc=testldap,dc=com&gt; (default) with scope subtree<br/># filter: (objectclass=*)<br/># requesting: ALL<br/>#</span><span id="4348" class="la lb hi lv b fi mj ma l mb mc"># testldap.com<br/>dn: dc=testldap,dc=com<br/>objectClass: top<br/>objectClass: dcObject<br/>objectClass: organization<br/>o: TestLdap<br/>dc: testldap</span><span id="4930" class="la lb hi lv b fi mj ma l mb mc"># admin, testldap.com<br/>dn: cn=admin,dc=testldap,dc=com<br/>objectClass: simpleSecurityObject<br/>objectClass: organizationalRole<br/>cn: admin<br/>description: LDAP administrator</span><span id="347d" class="la lb hi lv b fi mj ma l mb mc"># search result<br/>search: 2<br/>result: 0 Success</span><span id="e9f9" class="la lb hi lv b fi mj ma l mb mc"># numResponses: 12<br/># numEntries: 11</span></pre><h2 id="0291" class="la lb hi bd lc ld le lf lg lh li lj lk kx ll lm ln ky lo lp lq kz lr ls lt ho bi translated">步骤6 —安装phpldapadmin</h2><pre class="jh ji jj jk fd lu lv lw lx aw ly bi"><span id="96ce" class="la lb hi lv b fi lz ma l mb mc">sudo apt install phpldapadmin</span></pre><h2 id="f7d7" class="la lb hi bd lc ld le lf lg lh li lj lk kx ll lm ln ky lo lp lq kz lr ls lt ho bi translated">配置phpldapadmin</h2><pre class="jh ji jj jk fd lu lv lw lx aw ly bi"><span id="eb6e" class="la lb hi lv b fi lz ma l mb mc">sudo nano /etc/phpldapadmin/config.php</span></pre><h2 id="11e0" class="la lb hi bd lc ld le lf lg lh li lj lk kx ll lm ln ky lo lp lq kz lr ls lt ho bi translated">相应地设置您的时区。</h2><pre class="jh ji jj jk fd lu lv lw lx aw ly bi"><span id="150b" class="la lb hi lv b fi lz ma l mb mc">#  $config-&gt;custom-&gt;appearance['timezone'] = 'Asia/Kolkata';</span></pre><h2 id="d918" class="la lb hi bd lc ld le lf lg lh li lj lk kx ll lm ln ky lo lp lq kz lr ls lt ho bi translated">设置服务器名称，提供您的ip地址，并将隐藏模板警告设置为真。</h2><pre class="jh ji jj jk fd lu lv lw lx aw ly bi"><span id="024b" class="la lb hi lv b fi lz ma l mb mc">$servers-&gt;setValue('server','name','TestLdap LDAP Server');<br/>$servers-&gt;setValue('server','host','192.168.1.3');<br/>$config-&gt;custom-&gt;appearance['hide_template_warning'] = true;</span></pre><p id="8cdb" class="pw-post-body-paragraph ka kb hi kd b ke kf is kg kh ki iv kj kx kl km kn ky kp kq kr kz kt ku kv kw hb bi translated">默认情况下，启用匿名登录。要禁用它，您需要删除注释字符(两个斜杠)并将true改为false。保存并关闭文件。</p><pre class="jh ji jj jk fd lu lv lw lx aw ly bi"><span id="5a21" class="la lb hi lv b fi lz ma l mb mc">$servers-&gt;setValue('login','anon_bind',false);</span></pre><h2 id="a932" class="la lb hi bd lc ld le lf lg lh li lj lk kx ll lm ln ky lo lp lq kz lr ls lt ho bi translated">登录到您的phpldapadmin UI。Ex 192.168.1.3:389</h2><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mk"><img src="../Images/43afe70a854ba222a4abdda69182b6f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jzuqL_uEm6MPhxxhADZ32w.png"/></div></div></figure><p id="1507" class="pw-post-body-paragraph ka kb hi kd b ke kf is kg kh ki iv kj kx kl km kn ky kp kq kr kz kt ku kv kw hb bi translated">参考资料:</p><p id="5e5b" class="pw-post-body-paragraph ka kb hi kd b ke kf is kg kh ki iv kj kx kl km kn ky kp kq kr kz kt ku kv kw hb bi translated"><a class="ae jw" href="https://www.openldap.org/" rel="noopener ugc nofollow" target="_blank">https://www.openldap.org/</a></p></div></div>    
</body>
</html>