<html>
<head>
<title>How to Migrate Your Projects to Colab</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将您的项目迁移到Colab</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-migrate-your-projects-to-colab-2c8a5769c802?source=collection_archive---------10-----------------------#2020-09-20">https://medium.com/analytics-vidhya/how-to-migrate-your-projects-to-colab-2c8a5769c802?source=collection_archive---------10-----------------------#2020-09-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="815b" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">也就是如何充分利用平台，黑掉它。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/555a19e062d60309e69bb76df7761a43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RIzNp-TiXtc4-OpvCiU8-w.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">布莱克·康纳利在<a class="ae jn" href="https://unsplash.com/s/photos/macbook-coding?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="1c1f" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">介绍</h1><p id="353f" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">Google Colab(co laboratory的缩写)是一个由Google托管的数据科学在线平台。它由一个运行在云中的在线笔记本组成，不使用本地机器上的任何资源。</p><p id="2e70" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">许多数据科学学生和专业人士喜欢这种解决方案，因为它将便利性、便携性和计算能力集于一身。你不需要安装软件包和使用虚拟环境。它给你带来了零努力的便携性，这是一个很大的好处，如果你必须经常切换计算机(例如，家庭和办公室)。它允许你将繁重的计算迁移到云中，让你可怜的笔记本电脑免于崩溃。最后，您可以避免在本地下载巨大的数据集。</p><p id="d21e" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">然而，这种环境将你限制在单个笔记本电脑的环境中，衍生出了所有的问题(如这里的<a class="ae jn" href="https://www.youtube.com/watch?v=7jiPeIFXb6U" rel="noopener ugc nofollow" target="_blank">和这里的</a><a class="ae jn" href="https://www.sicara.ai/blog/2019-02-25-why-jupyter-not-my-ideal-notebook" rel="noopener ugc nofollow" target="_blank">所解释的)。在我使用Colab期间，我收集了一些日常使用的技巧，帮助我充分利用这个平台。你可以在网上找到它们，但据我所知，这是第一次尝试把它们放在一篇文章里。</a></p><h1 id="014a" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">技巧1:导入Google Drive</h1><p id="adab" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">Google可以让你从Colab上读写GDrive上的文件。如<a class="ae jn" href="https://colab.research.google.com/notebooks/io.ipynb#scrollTo=RWSJpsyKqHjH" rel="noopener ugc nofollow" target="_blank">官方文档</a>中所述，您需要运行以下单元:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lh li l"/></div></figure><p id="de5d" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">一次性链接将出现在输出像元中。点击它，您将被重定向到一个界面，允许您授予临时驱动器访问您的笔记本电脑。复制过程末尾的代码，并将其粘贴到笔记本中。</p><p id="11c7" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">正如我们将看到，驱动器可以用来存放文件、数据集和包含您想要重用的代码的模块，因此它可以成为您日常工作中使用的一个很好的工具。然而，来自驱动器的文件I/O慢得令人痛苦<strong class="ki hj"/>，尤其是当您试图访问大量小文件时，这表明两者之间的接口在文件访问方面有很大的开销。这意味着你不希望<em class="lj">在硬盘上存放你的大数据集，即使你有足够的空间来存放它们。</em></p><p id="e11a" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">你能做什么呢？有三种解决方法。</p><ol class=""><li id="d17f" class="lk ll hi ki b kj lc km ld kp lm kt ln kx lo lb lp lq lr ls bi translated">仍然将它们托管在GDrive上，但是进行了压缩。访问单个文件将减少开销，并且压缩将减小文件大小。然后，您可以从命令行解压缩它。</li><li id="c2eb" class="lk ll hi ki b kj lt km lu kp lv kt lw kx lx lb lp lq lr ls bi translated">如果您正在使用一个流行的数据集，如MNIST，许多Python包可以为您下载并阅读它</li><li id="9476" class="lk ll hi ki b kj lt km lu kp lv kt lw kx lx lb lp lq lr ls bi translated">直接从命令行下载</li></ol><p id="ce60" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">如果可能的话，第二个选项是最方便的。然而，许多数据集并没有打包在Python包中，所以我们需要探索第三种解决方案。</p><h1 id="2141" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">技巧2:从笔记本下载文件</h1><p id="edad" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">Jupyter笔记本允许您通过在命令行前添加感叹号<code class="du ly lz ma mb b">!</code>来执行shell命令。例如，如果您想查看当前工作目录的内容，您可以简单地编写<code class="du ly lz ma mb b">!ls</code>。</p><p id="2a9c" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">这使您有机会使用<code class="du ly lz ma mb b">curl</code>从命令行下载文件:</p><pre class="iy iz ja jb fd mc mb md me aw mf bi"><span id="2e38" class="mg jp hi mb b fi mh mi l mj mk">!curl -O <a class="ae jn" href="http://your.link/here" rel="noopener ugc nofollow" target="_blank">http://your.link/here</a></span></pre><p id="f185" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">这行代码将把数据保存在您当前的工作目录中(Colab上默认为<code class="du ly lz ma mb b">/content</code>)。运行你的内核的计算机的网络速度非常快，所以即使是大的数据集也能在几秒钟内下载完毕。</p><p id="ff10" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">现在，您的笔记本中已经有了主要材料，很可能在您可以使用它们之前需要对它们进行解压缩。有各种各样的存档格式，对于每一种格式，都有一个合适的命令可以用来解压文件。比如说。如果数据集是压缩的，您可以键入:</p><pre class="iy iz ja jb fd mc mb md me aw mf bi"><span id="21a0" class="mg jp hi mb b fi mh mi l mj mk">!unzip -q -d destination_path archive_to_unzip.zip</span></pre><h1 id="a655" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">技巧3:从驱动器导入模块</h1><p id="a40b" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">如果您有一些想要在笔记本中使用的自定义模块，您可以将它们上传到驱动器上，稍后再导入。让我们看看怎么做。</p><p id="cb35" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">在你可以导入它们之前，你必须告诉Python要查看。首先，创建一个<code class="du ly lz ma mb b">Project</code>文件夹，我们将把我们的<code class="du ly lz ma mb b">.py</code>文件放在那里。然后，您需要执行:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lh li l"/></div></figure><p id="1dee" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">在执行上面的单元后，您的模块将正确无误地导入:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lh li l"/></div></figure><p id="85ae" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">为什么这是必要的？当您编写<code class="du ly lz ma mb b">import foo</code>时，Python会在名为<code class="du ly lz ma mb b">sys.path</code>的预定义位置列表中查找名为<code class="du ly lz ma mb b">foo</code>的模块。通过插入我们模块的位置作为第一个条目，我们可以确保找到<code class="du ly lz ma mb b">foo</code>和<code class="du ly lz ma mb b">bar</code>。</p><p id="fa08" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">注意，这个技巧是一种变通方法，会让许多Python专家感到不安。在您的个人计算机或生产服务器上滥用这种方法，如果您有同名的不同模块，可能会导致混乱的导入路径和不可预知的后果。然而，在笔记本电脑的实验和临时环境中，这可能是可以接受的。</p><p id="0589" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">如果你想了解更多信息，看看<em class="lj">学习Python，第五版</em>作者<em class="lj">马克·卢茨</em>，第22章第<em class="lj">节模块搜索路径</em>。</p><h1 id="d709" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">如果这还不够呢</h1><p id="c91b" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">Colab对服务的一致性或可用性不做任何保证。此外，如果你连续运行一个内核太长时间，你将被关闭。因此，这个平台不是为专业或大量使用而设计的。</p><p id="9be4" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">如果你需要更多的电力，或者如果你希望给你的云机器附加一个永久的存储，你最好看看谷歌云、AWS或微软Azure上的可用选项。</p><h1 id="9da2" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">结论</h1><p id="c141" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">Colab是一个强大的工具，如果使用正确，可以节省您的笔记本电脑和时间。这些技巧允许你充分利用平台，克服在线笔记本环境的一些限制。</p><p id="be43" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">如果你知道一些我没有提到的技巧，请在评论中分享。</p></div></div>    
</body>
</html>