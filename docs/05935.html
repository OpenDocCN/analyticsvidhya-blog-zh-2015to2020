<html>
<head>
<title>Pandas tricks I wish I knew as a beginner</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我希望我作为一个初学者知道的熊猫技巧</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/pandas-tricks-i-wish-i-knew-as-a-beginner-a9291c6883a6?source=collection_archive---------13-----------------------#2020-05-06">https://medium.com/analytics-vidhya/pandas-tricks-i-wish-i-knew-as-a-beginner-a9291c6883a6?source=collection_archive---------13-----------------------#2020-05-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/6145cc6a6c019ab6676ba71a01a12e4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fUO28EIHi1bkZPhjZ451tQ.jpeg"/></div></div><figcaption class="iy iz et er es ja jb bd b be z dx translated">资料来源:edureka.co</figcaption></figure><p id="b166" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">Python是一种容易学习的语言，主要是因为它的代码可读性和语法简单性。尽管掌握一项技能需要时间和练习，不管它有多简单。其中一个技能是<a class="ae ka" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank">熊猫</a> python包。数据科学领域的几乎每个人，无论是初学者还是专业人士，都会在数据操作步骤的某个地方陷入困境，难怪数据科学家的大部分时间都花在数据清理和格式化上。</p><p id="64a5" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">在这篇文章中，我们将会看到一些真正有用和有效的熊猫技巧，它们将会为你节省大量的时间。这些建议是基于我的个人经验，并提供了熊猫文档链接。让我们开始吧。</p><h1 id="7456" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated"><strong class="ak"> 1。圆点符号</strong></h1><p id="d9e0" class="pw-post-body-paragraph jc jd hi je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hb bi translated">在pandas中，最常见的切片方法是使用:</p><pre class="in io ip iq fd le lf lg lh aw li bi"><span id="8df4" class="lj kc hi lf b fi lk ll l lm ln">sliced_column = df['column1'] #Returns a pandas series</span></pre><p id="6506" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">使用方括号和引号的要求使得这个简单的任务有点乏味，谢天谢地，有一个替代的方法来完成这个任务，而且简单得多:</p><pre class="in io ip iq fd le lf lg lh aw li bi"><span id="a17c" class="lj kc hi lf b fi lk ll l lm ln">sliced_column = df.column1 #Returns the same pandas series as above</span></pre><p id="544f" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">从['col']到的简单更改。col不仅节省了时间，还使代码更加简洁。虽然如果列名包含空格或除下划线(_)之外的任何其他特殊字符，就不能使用这个技巧，但是您总是可以重命名您的列:)</p><h1 id="2ca2" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">2.更换变得容易</h1><p id="3e31" class="pw-post-body-paragraph jc jd hi je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hb bi translated">在许多情况下，您可能需要根据特定条件将数据帧中的值替换为另一个值，例如，如果值低于特定阈值，则替换为0，如果值高于阈值，则替换为1。</p><p id="cc68" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">传统的做法是:</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es lo"><img src="../Images/fa992baff496c23cf35464f3261ef6c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lrB9F33BC_soF64FBh1jsQ.png"/></div></div></figure><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es lp"><img src="../Images/71e0207aee04992d3c9c2ed725e84ff9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-qHDOwi21e5kdDoEbf4I-A.png"/></div></div><figcaption class="iy iz et er es ja jb bd b be z dx translated">使用loc进行索引</figcaption></figure><p id="5881" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">更简单的方法:</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es lq"><img src="../Images/d9ce11511e045609e70eafdde5f5688e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wj2RgrKXzH-Q8k3VjvFinQ.png"/></div></div></figure><p id="27f4" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><a class="ae ka" href="https://numpy.org/doc/1.18/reference/generated/numpy.where.html" rel="noopener ugc nofollow" target="_blank"> np.where() </a>返回一个numpy数组，符号<strong class="je hj"> np.where(cond，a，b) </strong>本身就很有语义，告诉读者当cond为真时用<em class="lr"> a </em>替换否则用<em class="lr"> b替换。</em>这里的问题是不能忽略else部分，这意味着即使条件为假也不能保留现有值。</p><h1 id="33e1" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">3.applymap()或apply()</h1><p id="cf53" class="pw-post-body-paragraph jc jd hi je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hb bi translated">先说一下<a class="ae ka" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.applymap.html" rel="noopener ugc nofollow" target="_blank"> applymap() </a>，applymap()函数执行元素式转换，并不是为复杂函数设计的。我们所说的按元素转换是指applymap()将把基本转换应用于数据帧中的每一个元素。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es ls"><img src="../Images/5b08c2a657024627659c488e595dad8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hx-oty1lv06TsgT4IMYc_A.png"/></div></div></figure><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es lt"><img src="../Images/236f95202a4c448abf1d2ae468c6f879.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9mUbOxxKVzb7fYYwwhM31Q.png"/></div></div></figure><p id="0650" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">当要转换整个数据帧时，使用applymap()将减少代码量(与apply()相比)。</p><p id="79ba" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">现在让我们来看看<a class="ae ka" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.apply.html" rel="noopener ugc nofollow" target="_blank"> apply()，</a>apply()函数可以对数据帧执行更复杂的操作，方法是将数据逐行或逐列传递给一个函数，然后该函数处理数据并返回结果。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es lu"><img src="../Images/a753f9eac89a74a7d32b6b973dacaf68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hdKGAcIi4f9cIpaUH1_43g.png"/></div></div></figure><p id="12c3" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">更详细的比较包括map():</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es lv"><img src="../Images/a38f28e3b671f60f559f560b1e0cca42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s7u535nUTKqQCv1FAPBfMg.png"/></div></div><figcaption class="iy iz et er es ja jb bd b be z dx translated">资料来源:stackoverflow/cs95</figcaption></figure><h1 id="757d" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">4.组合数据帧</h1><p id="c7cc" class="pw-post-body-paragraph jc jd hi je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hb bi translated">Pandas提供了4种不同的方法来组合数据帧，即:</p><ul class=""><li id="c689" class="lw lx hi je b jf jg jj jk jn ly jr lz jv ma jz mb mc md me bi translated"><a class="ae ka" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.join.html" rel="noopener ugc nofollow" target="_blank">加入</a></li><li id="f775" class="lw lx hi je b jf mf jj mg jn mh jr mi jv mj jz mb mc md me bi translated"><a class="ae ka" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.merge.html" rel="noopener ugc nofollow" target="_blank">合并</a></li><li id="3017" class="lw lx hi je b jf mf jj mg jn mh jr mi jv mj jz mb mc md me bi translated"><a class="ae ka" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.append.html" rel="noopener ugc nofollow" target="_blank">追加</a></li><li id="ead4" class="lw lx hi je b jf mf jj mg jn mh jr mi jv mj jz mb mc md me bi translated"><a class="ae ka" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.concat.html" rel="noopener ugc nofollow" target="_blank">串联</a></li></ul><p id="cc82" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">其中有多少是真正需要的？只需将其中两个连接并合并！作为一个初学者，我总是不知道在合并两个数据帧时应该使用什么技术，下面是解决方法。</p><p id="c559" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">当要沿行或列轴追加另一个数据帧时，使用concat，因此我们可以说concat()替代append()，而对于在键上联接两个数据帧，使用merge()而不是join()。Merge充当sql连接，因此可以是inner、outer、left和right。</p><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es mk"><img src="../Images/eed2af9f137a777dc44463721123c723.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*XGCWP2p2py314mC66hKTpA.png"/></div><figcaption class="iy iz et er es ja jb bd b be z dx translated">资料来源:dofactory.com</figcaption></figure><p id="4cae" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">以下是concat:</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es ml"><img src="../Images/5e87f5b80cdafb86ecb5bfa29e13c3c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cl5b6zFLyZJd2QywqqsBPw.png"/></div></div></figure><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mm"><img src="../Images/f1507fddc403badae7710f4bb5d0e7dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*05JoPN-APdtL7ZnOaxPBxQ.png"/></div></div></figure><p id="7f26" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">合并:</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mn"><img src="../Images/9a598caf0d95b9f76ae38bd74be06a06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VtnZqlTMGW2h3cgYu5jPYA.png"/></div></div></figure><p id="2fd0" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">如何:指定执行内|外|左|右的联接类型</p><p id="dc46" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">开:指定用于合并的键</p><p id="c56a" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">Merge有许多更有用的参数，例如left_on和right_on，以防两个数据帧中的键名不同，或者使用后缀来重命名公共列名，以便区分列的源。</p><h1 id="135c" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">5.生成日期范围</h1><p id="c593" class="pw-post-body-paragraph jc jd hi je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hb bi translated">Pandas <a class="ae ka" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.date_range.html" rel="noopener ugc nofollow" target="_blank"> date_range() </a>将简化提升到另一个层次，让我们先来看看如何使用datetime包生成开始日期和结束日期之间的日期列表:</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mo"><img src="../Images/b1174f3f372191cdc219854582947cef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mRhOj3TE1Ba9ysMxTR5eMw.png"/></div></div></figure><p id="6103" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">现在，仅仅得到一系列日期就已经做了大量的工作，让我们看看熊猫如何处理这个问题:</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mp"><img src="../Images/bcbd132e2c01d8cadab3aa5fb4e172fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7NsArkAwKGyiDPwYXbmYHw.png"/></div></div></figure><p id="4144" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">很明显pandas在这里赢了，我发现当我需要X轴上的日期时，这种技术在执行数据可视化时很有用。</p><p id="bab3" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><strong class="je hj">出发前:</strong></p><p id="e904" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">所以这是熊猫的一些最有用的工具，我希望我作为一个初学者知道，并节省了我相当多的时间。我强烈建议您通读每个函数的文档，以便对它有完整的了解。谢谢你来看我，并且一直读到最后。祝您愉快:)</p></div></div>    
</body>
</html>