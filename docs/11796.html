<html>
<head>
<title>Value At Risk With Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python的风险价值</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/value-at-risk-with-python-4e3409e1c23d?source=collection_archive---------3-----------------------#2020-12-19">https://medium.com/analytics-vidhya/value-at-risk-with-python-4e3409e1c23d?source=collection_archive---------3-----------------------#2020-12-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="78b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">无论你是一名有抱负的日内交易者、金融市场专业人士，还是刚刚涉足金融领域的数据科学家，你都可能遇到过风险价值的概念，通常被称为VaR。</p><p id="4804" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它能变得多糟糕？</p><p id="025c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不管你投资的目标是什么，与之相关的风险总是你最关心的问题。VaR是衡量风险大小的方法之一。</p><p id="6958" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">风险值衡量的是给定投资中的糟糕程度。给定投资的1%风险值告诉你你可以预期的1%最坏结果。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/81092c12ae6de0e9c83e82b05df10570.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/format:webp/1*ziv6fQofx0xh20X4CYUOhA.png"/></div></figure><p id="808d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们想象一下，你正在考虑投资XPTO股票，在你的研究中，你偶然发现一份报告说这只股票的1% VaR是5%。这是什么意思？我的意思是，在所有可能的回报中，最差的1%是-5%的回报。</p><blockquote class="jl jm jn"><p id="b0eb" class="if ig jo ih b ii ij ik il im in io ip jp ir is it jq iv iw ix jr iz ja jb jc hb bi translated"><strong class="ih hj">你怎么知道所有可能的结果？</strong>不能。没有人确切知道资产的价格在未来会如何变化，这就是为什么没有确定的方法来计算它。相反，VaR有多种类型。</p></blockquote><h2 id="c12f" class="js jt hi bd ju jv jw jx jy jz ka kb kc iq kd ke kf iu kg kh ki iy kj kk kl km bi translated">历史VaR</h2><p id="d92c" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">尽管过去并不代表未来的表现，但这仍然是一个需要牢记的深刻的负面迹象。</p><p id="35a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">历史风险值包括从历史样本中计算出第n个最坏的结果。下面你可以看到用Python计算它的一种可能的方法:</p><pre class="je jf jg jh fd ks kt ku kv aw kw bi"><span id="ac60" class="js jt hi kt b fi kx ky l kz la">def var_historic(r, level=1):<br/>    """<br/>    Takes in a series of returns (r), and the percentage level<br/>(level)<br/>    Returns the historic Value at Risk at a specified level<br/>    i.e. returns the number such that "level" percent of the returns<br/>    fall below that number, and the (100-level) percent are above<br/>    """<br/>    if isinstance(r, pd.DataFrame):<br/>        return r.aggregate(var_historic, level=level)<br/>    elif isinstance(r, pd.Series):<br/>        return -np.percentile(r, level)<br/>    else:<br/>        raise TypeError("Expected r to be a Series or DataFrame")</span></pre><h2 id="c097" class="js jt hi bd ju jv jw jx jy jz ka kb kc iq kd ke kf iu kg kh ki iy kj kk kl km bi translated"><strong class="ak">参数和半参数VaR </strong></h2><p id="56ea" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">另一种计算VaR的方法是假设一组可能的结果表现为正态(高斯)分布。</p><p id="6361" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正态分布不一定是描述收益的最佳方式。然而，这是描绘概念的一个非常好的方式，并且它是我们阐述更复杂和更现实的场景的一个好的起点。</p><p id="5d74" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">参数方法的主要缺点是现实世界的回报通常具有“厚尾”(高峰值)分布。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lb"><img src="../Images/43566b6387482acebfbde03c33b65f44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tjgMEXMLizt-48DLr1Gwrw.png"/></div></div></figure><p id="3005" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了说明这一点的重要性，假设您使用参数方法计算1%的VAR，结果是6%。然后，你看真实的历史数据，你会发现-6%的回报率比1%的时候更常见:这是厚尾的迹象。</p><p id="439c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是参数和半参数VaR的一些代码:</p><pre class="je jf jg jh fd ks kt ku kv aw kw bi"><span id="61e9" class="js jt hi kt b fi kx ky l kz la">from scipy.stats import norm<br/>def var_gaussian(r, level=5, modified=False):<br/>    """<br/>    Returns the Parametric Gauuian VaR of a Series or DataFrame<br/>    If "modified" is True, then the modified VaR is returned,<br/>    using the Cornish-Fisher modification<br/>    """<br/>    # compute the Z score assuming it was Gaussian<br/>    z = norm.ppf(level/100)<br/>    if modified:<br/>        # modify the Z score based on observed skewness and kurtosis<br/>        s = skewness(r)<br/>        k = kurtosis(r)<br/>        z = (z +<br/>                (z**2 - 1)*s/6 +<br/>                (z**3 -3*z)*(k-3)/24 -<br/>                (2*z**3 - 5*z)*(s**2)/36<br/>            )<br/>    return -(r.mean() + z*r.std(ddof=0))</span></pre><p id="996b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，计算VaR的另一种方法是模拟可能的随机结果，并将其用作计算的分布。这是一个非常有趣的话题，我将在未来的<a class="ae lg" href="https://felipeczar.medium.com/var-with-monte-carlo-de20500b1640" rel="noopener">帖子</a>中讨论。</p><p id="3dca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jo">如果你有兴趣了解更多关于这个话题的知识，我强烈推荐肯尼斯·阿博特关于VaR模型的</em> <a class="ae lg" href="https://www.youtube.com/watch?v=92WaNz9mPeY" rel="noopener ugc nofollow" target="_blank"> <em class="jo">讲座</em> </a> <em class="jo">，可以在麻省理工学院的YouTube频道上免费获得。</em></p></div></div>    
</body>
</html>