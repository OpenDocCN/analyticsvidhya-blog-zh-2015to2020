<html>
<head>
<title>Journey of Apache Kafka &amp; Zookeeper Administrator ( Part 5 )</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">阿帕奇卡夫卡与动物园管理员之旅(五)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/journey-of-apache-kafka-zookeeper-administrator-part-5-c8bce2b2dd7d?source=collection_archive---------6-----------------------#2020-08-24">https://medium.com/analytics-vidhya/journey-of-apache-kafka-zookeeper-administrator-part-5-c8bce2b2dd7d?source=collection_archive---------6-----------------------#2020-08-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/61a138729f01945f8295569727d96383.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*_WffR_OaT6Gy1BuE7R-_Xg.jpeg"/></div></figure><p id="da21" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">【2019 年 6 月(续 6 月下旬)</p><p id="ea08" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">今天，我们需要谈谈另一个运营方面，一旦你安装了 Apache Kafka，如何管理 Apache Kafka 的主题和其他基本内容，这就是我了解<a class="ae jk" href="https://github.com/yahoo/CMAK" rel="noopener ugc nofollow" target="_blank">雅虎 Kafka 经理</a>(又名<a class="ae jk" href="https://github.com/yahoo/CMAK" rel="noopener ugc nofollow" target="_blank"> CMAK </a>)的地方。</p><p id="e804" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我想感谢#yahoo 提供了一个非常棒的工具。</p><p id="c60f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">先说说这个工具为什么这么棒。</strong></p><p id="244e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">它支持多个集群，可以非常容易地完成许多操作，如主题创建、主题配置更新、代理概述、实时代理统计(消息数/分区数/活动分区数),并且只需几次点击就可以完成<strong class="io hj">超级重要的任务</strong>又名<strong class="io hj">分区重新分配</strong>。</p><p id="7cc0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这是非常容易安装，甚至更容易板载其他管理员谁刚刚启动 Kafka。</p><p id="2632" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我尝试了另一个很好的工具，叫做<a class="ae jk" href="https://github.com/HomeAdvisor/Kafdrop" rel="noopener ugc nofollow" target="_blank"> Kafdrop </a>。这真的很棒，因为如果你需要的话，你可以实时看到来自任何主题的消息，这在<strong class="io hj"> CMAK </strong>中仍然缺乏。不管怎样，我决定和 CMAK 一起前进，而不是 Kafdrop，它有点成熟，有一个可以长期支持它的社区。</p></div><div class="ab cl jl jm gp jn" role="separator"><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq"/></div><div class="hb hc hd he hf"><p id="86f4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">如何手动安装 CMAK？</strong></p><p id="f823" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我建议你自己构建这个工具，下载最新版本:<a class="ae jk" href="https://github.com/yahoo/CMAK/releases/" rel="noopener ugc nofollow" target="_blank">github.com/yahoo/CMAK/releases</a>。</p><p id="2109" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">步骤 1: </strong> <br/>安装 Open Java 11，使用简单的命令或者按照 GitHub 库中的步骤进行编译。</p><pre class="js jt ju jv fd jw jx jy jz aw ka bi"><span id="0050" class="kb kc hi jx b fi kd ke l kf kg">./sbt clean dist</span></pre><p id="faf5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">上面的命令将生成一个包含 cmak.xx.zip 的 zip 文件，其中包含启动 cmak 的所有库+二进制文件。</p><p id="0379" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">第二步:<br/> </strong>把上面的 zip 复制到 cmak 服务器，解压到你给定的分区/位置。更新<strong class="io hj">应用程序。确认</strong>包括</p><ul class=""><li id="8cf2" class="kh ki hi io b ip iq it iu ix kj jb kk jf kl jj km kn ko kp bi translated">用户名和密码等基本身份验证信息。</li><li id="14ef" class="kh ki hi io b ip kq it kr ix ks jb kt jf ku jj km kn ko kp bi translated"><code class="du kv kw kx jx b">cmak.zkhosts="10.0.0.1:2181,10.0.0.2:2181,10.0.0.3:2181"</code></li></ul><p id="11c1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">第三步:<br/> </strong>创建一个 SystemD 文件，这样就可以将其作为服务启动。</p><pre class="js jt ju jv fd jw jx jy jz aw ka bi"><span id="b73e" class="kb kc hi jx b fi kd ke l kf kg">[Unit]<br/>Description=Apache Kafka Manager ( CMAK )<br/>After=syslog.target network.target</span><span id="d024" class="kb kc hi jx b fi ky ke l kf kg">[Service]<br/>Type=simple<br/>User={{ kafkaUser }}<br/>Group={{ kafkaGroup }}<br/>ExecStart={{ kafkaManagerInstallDir }}/kafka-manager/bin/cmak</span><span id="a24d" class="kb kc hi jx b fi ky ke l kf kg">[Install]<br/>WantedBy=multi-user.target</span></pre><p id="f468" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">第 4 步:<br/> </strong>用下面的命令启动服务</p><pre class="js jt ju jv fd jw jx jy jz aw ka bi"><span id="41aa" class="kb kc hi jx b fi kd ke l kf kg"><strong class="jx hj">service kafka-manager start</strong></span></pre><p id="76e8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如何用 Ansible 安装 CMAK？</p><p id="7e8d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><a class="ae jk" href="https://github.com/116davinder/kafka-cluster-ansible/blob/master/clusterKafkaManager.yml" rel="noopener ugc nofollow" target="_blank">116 dav inder/Kafka-cluster-ansi ble/clusterKafkaManager</a>:<br/>本剧本将按照上述步骤安装 Kafka Manager aka CMAK。现在我们几乎在任何地方都在使用 ansible，这是配置管理的完美范例。</p><p id="fee3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我再次遵循相同的文件夹结构，这是指向使用符号链接又名软链接的最新版本。</p><pre class="js jt ju jv fd jw jx jy jz aw ka bi"><span id="5973" class="kb kc hi jx b fi kd ke l kf kg">davinderpal@Davinder:~$ tree -L 1 kafka-manager/<br/>kafka-manager/<br/>├── cmak-3.0.0.4<br/>├── cmak-3.0.0.5<br/>└── kafka-manager -&gt; cmak-3.0.0.5</span><span id="d441" class="kb kc hi jx b fi ky ke l kf kg">3 directories, 0 files</span></pre><p id="6748" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">注意* <br/> </strong>我使用的是基本认证，因为只有 DevOps 团队需要访问这个 UI，而且基本认证远比实现 LDAP 简单，但是如果需要，您也可以使用 LDAP。</p><p id="c337" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">接下来的步骤</strong></p><p id="5092" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">一旦通过 Ansible 或手动完成安装，我们需要将集群添加到 CMAK，以便它可以开始监控/管理它们。</p><p id="b998" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">使用您的凭据在端口 9000 上登录 CMAK GUI。</p><p id="afa6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">单击“添加集群”,然后单击“添加集群”,只需填写关于集群的详细信息</p><ul class=""><li id="a638" class="kh ki hi io b ip iq it iu ix kj jb kk jf kl jj km kn ko kp bi translated">集群名称</li><li id="daf3" class="kh ki hi io b ip kq it kr ix ks jb kt jf ku jj km kn ko kp bi translated">给定 Kafka 集群的 zookeeper 节点</li><li id="ffa8" class="kh ki hi io b ip kq it kr ix ks jb kt jf ku jj km kn ko kp bi translated">其他参数，如 CMAK 线程+ JMX 设置+ JMX 认证，如果实施</li></ul><p id="8470" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">一旦您提交表单，它将显示您的集群中的集群链接，如下所示。</p><figure class="js jt ju jv fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es kz"><img src="../Images/116d93b6a1dc019c2db295433e2a0b13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kebysCUAymlfZYxboYi0wQ.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">CMAK 多集群视图</figcaption></figure><p id="44e9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果还需要什么，请阅读 https://github.com/yahoo/CMAK 的 CMAK 文档。</p><p id="8459" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">以上是我当时的要求。</p></div><div class="ab cl jl jm gp jn" role="separator"><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq"/></div><div class="hb hc hd he hf"><p id="b07e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">旅程将在下一个话题继续<strong class="io hj">阿帕奇卡夫卡镜制造商 V1。</strong></p></div></div>    
</body>
</html>