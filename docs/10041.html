<html>
<head>
<title>Installing and using ESLint on your existing JavaScript code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在现有的JavaScript代码上安装和使用ESLint</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/installing-and-using-eslint-on-your-existing-javascript-code-8ee1f6c45821?source=collection_archive---------12-----------------------#2020-10-01">https://medium.com/analytics-vidhya/installing-and-using-eslint-on-your-existing-javascript-code-8ee1f6c45821?source=collection_archive---------12-----------------------#2020-10-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="e543" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">为什么是林挺？🤔</h1><p id="1e9f" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">Javascript是一种很棒的语言，但是，由于它很灵活，所以有可能会写出糟糕的代码，让自己陷入困境。Javascript是一种动态语言，它是松散类型的，这意味着有很多可能出错，所以ESLint非常有用，因为<em class="kb"> </em> <strong class="jf hj"> <em class="kb">它分析你的代码而不执行它</em> </strong> <em class="kb">。</em> <br/> ESLint是一个<em class="kb">代码质量工具</em>，它的工作是扫描你的项目文件并指出潜在的问题。问题可以是不严重的，如格式化，也可以是严重的，如试图引用不存在的函数。<br/>现在，ESLint在这个领域并不孤单，还有其他工具，如<strong class="jf hj"> JSHint </strong>和<strong class="jf hj"> JSLint </strong>。所有这些工具都试图解决同一个问题，但是最近几年，社区已经开始转向ESLint。这是因为ESLint在跟上ES6和ES7的最新功能方面做得更好，而其他工具没有那么好的集成，所以社区已经开始远离它们。</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div class="er es kc"><img src="../Images/fc7e697404319a68914ca98eb3a876fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*_P8PTZSgTIylRRg_eKzoHQ.png"/></div></figure><h1 id="d293" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">安装和设置🎯</h1><p id="5e60" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">有两种方法可以安装ESLint<strong class="jf hj"> <em class="kb">全局地或在你的特定项目中</em> </strong>。在全球范围内安装更容易，但在ESLint的官方网页上，他们建议不要在全球范围内安装，而应该在每个项目中本地安装，主要原因是这样更容易与其他开发人员就单个项目进行协作，并且有不同的规则(规则是应用于代码的样式约定)。ESLint是一个包，我们用NPM安装它。</p><p id="0277" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated">对于本教程，我使用我的<em class="kb">现有的</em>项目<a class="ae kp" href="https://github.com/withshubh/FlashPoo-Chat" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj">存储库</strong> </a>作为示例存储库。主分支将拥有原始代码，我将使用“<a class="ae kp" href="https://github.com/withshubh/FlashPoo-Chat.git" rel="noopener ugc nofollow" target="_blank"> linted </a>”分支来安装并使用ESLint lint代码。我假设您的系统上已经安装了<em class="kb"> git </em>和<em class="kb">节点</em>。我已经在我的系统上克隆了存储库，并将分支切换到“linted”。</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es kq"><img src="../Images/80c112bc8c9aa49d0a93230505249178.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rk3So5rgbotxe8V86g2ddA.png"/></div></div></figure><p id="bee4" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated">让我们安装ESlint并将其保存为开发人员依赖项。我们使用ESLint作为开发者依赖，因为你的项目的代码不依赖于ESLint，相反，当你开发你的项目时，你想使用它，当你发布项目时，它不需要ESLint。</p><pre class="kd ke kf kg fd kv kw kx ky aw kz bi"><span id="6c09" class="la ig hi kw b fi lb lc l ld le">npm install eslint --save-dev </span></pre><p id="a947" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated">安装完成后，打开<strong class="jf hj"> package.json </strong>文件，您会在“<strong class="jf hj"> devDependencies </strong>”下看到ESLint的更新条目。</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es lf"><img src="../Images/c6e3deb7d770fca792baf81d7c7e5eb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G_A73g4Mq4Mq_IOdWPZ6nQ.png"/></div></div></figure><p id="35fe" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated">现在，有趣的部分来了，在我们真正开始使用ESLint来查找和修复林挺错误之前，先设置ESLint。我们将通过设置一个配置文件来实现这一点。该过程将逐步通过一系列的问题或偏好，最后，它将创建一个名为<strong class="jf hj"> .eslintrc.{js，yml，json}的配置文件。</strong></p><p id="7707" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated">由于我们已经在注册表中托管了ESLint，我们将使用<code class="du lg lh li kw b">npx</code>(推荐给使用NPM版本<code class="du lg lh li kw b">5.2.0</code>或更高版本的用户)或者您可以使用<code class="du lg lh li kw b">./node_modules/.bin/eslint</code> <br/>来初始化配置，运行:</p><pre class="kd ke kf kg fd kv kw kx ky aw kz bi"><span id="b3c3" class="la ig hi kw b fi lb lc l ld le">npx eslint --init</span><span id="d173" class="la ig hi kw b fi lj lc l ld le">Or</span><span id="9d10" class="la ig hi kw b fi lj lc l ld le">./node_modules/.bin/eslint --init</span></pre><p id="5f22" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated">ESlint CLI向导将会出现并询问我们如何配置它。你可以根据自己的喜好选择不同的选项。我想用ESLint来<strong class="jf hj">检查语法，发现问题，强制代码风格。</strong></p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es lk"><img src="../Images/b3c76bd6076b521c7fc7cf9369a29751.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MxG52iz7hahwlFIgYUDMmg.png"/></div></div></figure><p id="d766" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated">我已经在我的项目中使用了javascript模块，所以我将选择第一个选项。(如果您的项目安装了babel，那么您肯定需要选择这个选项。如果你正在做一个项目，比如React、Vue、Angular e.t.c，它们都使用babel，所以你需要选择这个选项。)</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es ll"><img src="../Images/4c871fb4df393ed854d5ae898ee69c8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VWc-Xwm8F3CcyS_GRSq-Gw.png"/></div></div></figure><p id="353d" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated">我还没有在我的项目中使用过这些框架，所以我不会选择任何一个。</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es lm"><img src="../Images/bdac4f4d5b194669da22ff999ae60407.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zlcBQLzY0Egv0NM5L2G1gQ.png"/></div></div></figure><p id="f792" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated">我没有在我的项目中使用TypeScript，所以我将选择No！</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es ln"><img src="../Images/41abc4e953beb58e821fcf3945f469ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rddp4M2636iDL3ExvE32mw.png"/></div></div></figure><p id="f212" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated">我的项目是基于节点的，所以我将选择第二个选项。</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es lo"><img src="../Images/55709a1814c6542584db7a72bc31efaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hBVmvTxCvogOh7nDYWSyjQ.png"/></div></div></figure><p id="da2b" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated">现在，我们将看到定义项目代码风格的选项。我将选择<strong class="jf hj">第一个选项</strong>，它将列出由Airbnb和Google等热门公司创建的风格。选择<strong class="jf hj">第二个选项</strong>将引导您回答一系列问题，这些问题将定义您自己的定制风格定义。或者您可以选择<strong class="jf hj">最后一个选项</strong>来检查另一个项目中的javascript文件，并在您的项目中采用相同的规则。</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es lp"><img src="../Images/e5e01be3ada1593093734800f0a478f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BhvlJIXh1GBYxy4oyCCoww.png"/></div></div></figure><p id="b9c0" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated">我会选择Airbnb风格指南，这是流行的风格指南之一。</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es lq"><img src="../Images/083e353bcc1c56d39175fa747b6dded3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1A88j94olM46at5G3f1wgQ.png"/></div></div></figure><p id="24f7" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated">最后一步是选择您想要的<strong class="jf hj">格式。eslintrc </strong>文件。我选择了javascript格式。</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es lp"><img src="../Images/d19c600b9753f597b0d472832998ee73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V_vmokeFnkkEw2QFPefifg.png"/></div></div></figure><p id="c934" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated">选择你想要的文件格式后，向导会询问你是否要安装Airbnb依赖关系？简单地说，点击“Yes”，然后ESlint将启动并安装所有必要的依赖项，并生成一个<code class="du lg lh li kw b">.eslintrc.js</code>配置文件。</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es lr"><img src="../Images/9a78766849edf611ded4bc454d53dec5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JQ9sRglEgmVwwksUczrjtw.png"/></div></div></figure><p id="4206" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated">我们已经完成了ESLint的安装和配置文件的设置。</p><h1 id="6cfd" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">运行ESLint</h1><h2 id="2613" class="la ig hi bd ih ls lt lu il lv lw lx ip jo ly lz it js ma mb ix jw mc md jb me bi translated">a.检查语法和发现问题</h2><p id="cce6" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">您可以检查单个文件或目录中所有文件的语法和错误。<br/>要检查上<strong class="jf hj">单个文件，</strong>只需运行:</p><pre class="kd ke kf kg fd kv kw kx ky aw kz bi"><span id="856e" class="la ig hi kw b fi lb lc l ld le">npx eslint filename.js </span></pre><p id="b3f0" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated">为了检查一个目录中的多个文件您需要指定一个类似<code class="du lg lh li kw b">public/**/*.js</code>的模式，然后ESLint将在公共目录以及子目录中的所有文件中查找错误，命令将是:</p><pre class="kd ke kf kg fd kv kw kx ky aw kz bi"><span id="f468" class="la ig hi kw b fi lb lc l ld le">npx eslint public/**/*.js</span></pre><p id="7138" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated">下面的屏幕截图显示了当我使用以下命令对单个文件运行ESLint时，它抛出的林挺错误和警告列表:</p><pre class="kd ke kf kg fd kv kw kx ky aw kz bi"><span id="079b" class="la ig hi kw b fi lb lc l ld le">npx eslint server.js</span></pre><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es mf"><img src="../Images/9f5645ab966b19f1631bb26a4112855b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h7yiyJqJfh81hgt-WQpa4Q.png"/></div></div></figure><h2 id="2d02" class="la ig hi bd ih ls lt lu il lv lw lx ip jo ly lz it js ma mb ix jw mc md jb me bi translated">b.解决问题和加强风格</h2><p id="d5c7" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们使用ESLint来查找代码中的错误和警告，现在我们想使用ESLint来修复这些错误，但在此之前，下面的截图显示了我在使用ESLint修复错误之前的代码外观。</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es mg"><img src="../Images/8081391462b4743938d9f25796bd0e6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o2FHLandduERHGa-KlVvAQ.png"/></div></div><figcaption class="mh mi et er es mj mk bd b be z dx translated">糟糕的造型！</figcaption></figure><p id="07ce" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated">让我们运行命令<strong class="jf hj">修复错误，并使用ESLint执行Airbnb风格指南</strong>:</p><pre class="kd ke kf kg fd kv kw kx ky aw kz bi"><span id="0e61" class="la ig hi kw b fi lb lc l ld le">npx eslint server.js --fix</span></pre><p id="4834" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated">酷！ESLint <strong class="jf hj">修复了82个错误</strong>，但我们仍然有1个警告，这是因为它被认为是避免在<code class="du lg lh li kw b">console</code>上使用方法的最佳实践。此类消息被认为是用于调试目的，因此不适合发送给客户端。</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es ml"><img src="../Images/af078f30b07e9e58c660712bdf40f978.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D7-M8cixbhi0PH0Th3CXbA.png"/></div></div></figure><p id="a9b9" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated">因此，要修复这个警告，我们必须改变ESLint配置文件<code class="du lg lh li kw b">.eslintrc.js</code>中的规则。我将在我的ESlint配置文件中添加一个新规则<code class="du lg lh li kw b">'no-console': 0,</code>，它将允许所有的控制台语句，并且不会抛出警告。将这条规则添加到我们的配置文件将允许在整个项目中使用控制台语句，并且不会抛出任何错误。如果您明确希望允许一个控制台语句，那么您可以在当前行添加注释:<br/>:</p><pre class="kd ke kf kg fd kv kw kx ky aw kz bi"><span id="d655" class="la ig hi kw b fi lb lc l ld le">console.log(someThing); /* eslint-disable-line no-console */</span></pre><p id="8e89" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated">…或者上一行:</p><pre class="kd ke kf kg fd kv kw kx ky aw kz bi"><span id="c662" class="la ig hi kw b fi lb lc l ld le">/* eslint-disable-next-line no-console */<br/>console.log(someThing);</span></pre><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es mm"><img src="../Images/620c0ce3f843427394d4fc88161b7d73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WN3LjTPmMBM4GtgclmTaTA.png"/></div></div></figure><p id="69b8" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated">将这条规则添加到我们的配置文件后，我们将再次运行ESLint来检查警告/错误，瞧！！没有错误和警告！🤩</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es mn"><img src="../Images/3377f4dfb8988330c32f954c70145d86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hyh06vdaxQgz0egXCyOFcg.png"/></div></div></figure><p id="4b59" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated">代码看起来比使用ESLint之前干净多了。</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es mo"><img src="../Images/6094dc214e0561e4ce907fdcd7d29ecf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p5g00JbnMZxYll-QllfZJQ.png"/></div></div></figure><h2 id="9e4e" class="la ig hi bd ih ls lt lu il lv lw lx ip jo ly lz it js ma mb ix jw mc md jb me bi translated"><strong class="ak">在您的项目中设置ESLINT规则</strong></h2><p id="1c16" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在项目中为ESLint定义规则，以通知ESLINT您要添加或删除的规则类型。您可以在配置文件的rules部分修改/设置您的规则。你可以定义尽可能多的规则，你可以在他们的官方文档<a class="ae kp" href="https://eslint.org/docs/rules/" rel="noopener ugc nofollow" target="_blank"> ESLINT规则文档</a>上阅读更多关于ESLINT规则的内容。</p><p id="228a" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated"><strong class="jf hj">奖励:</strong>您可以将ESLint链接到您的javascript项目编译器:</p><ul class=""><li id="f9a9" class="mp mq hi jf b jg kk jk kl jo mr js ms jw mt ka mu mv mw mx bi translated">转到您的<code class="du lg lh li kw b">package.json</code>文件，在文件的脚本段中，添加以下内容</li></ul><pre class="kd ke kf kg fd kv kw kx ky aw kz bi"><span id="62b7" class="la ig hi kw b fi lb lc l ld le">script:{<br/>    "lint":"eslint"<br/>}</span></pre><p id="f286" class="pw-post-body-paragraph jd je hi jf b jg kk ji jj jk kl jm jn jo km jq jr js kn ju jv jw ko jy jz ka hb bi translated"><strong class="jf hj">注:</strong><em class="kb">“lint”只是一个普通的词，你可以用任何你觉得舒服的词</em></p><ul class=""><li id="5d3b" class="mp mq hi jf b jg kk jk kl jo mr js ms jw mt ka mu mv mw mx bi translated">在根项目中，您可以使用</li></ul><pre class="kd ke kf kg fd kv kw kx ky aw kz bi"><span id="bc25" class="la ig hi kw b fi lb lc l ld le">npm run lint</span></pre><blockquote class="my mz na"><p id="b288" class="jd je kb jf b jg kk ji jj jk kl jm jn nb km jq jr nc kn ju jv nd ko jy jz ka hb bi translated">ESLINT有助于提高生产率，根据标准编写代码，并在代码库违反风格指南规则时标记错误。通过这篇文章，你应该能够将ESLINT集成到你的Javascript项目中。</p></blockquote></div></div>    
</body>
</html>