<html>
<head>
<title>Spark Parallelism Deep Dive-I(Reading)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">火花并行性深潜-I(阅读)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/spark-parallelism-deep-dive-i-reading-8d63e22f3bce?source=collection_archive---------5-----------------------#2020-02-15">https://medium.com/analytics-vidhya/spark-parallelism-deep-dive-i-reading-8d63e22f3bce?source=collection_archive---------5-----------------------#2020-02-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/19128234837f7816e1e468b8437352ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*D6c6GxgvQJ6cHfg5"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">Jez Timms 在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="c29b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是我在火花深潜系列中的一个故事。</p><p id="09bf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">【https://medium.com/@somanathsankaran T4】</p><p id="d00c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Spark是一个分布式并行处理框架，它的并行性是由分区定义的。让我们详细讨论一下spark的分区。</p><p id="6ef2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">spark中有3种类型的并行。</p><ol class=""><li id="e4a5" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">阅读中的平行</li><li id="0210" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">洗牌中的平行</li><li id="9cef" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">写作中的平行</li></ol><p id="28e0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这个博客是关于在阅读时数据是如何分区的</p><p id="415c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">并行读取:</strong></p><p id="b53f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">spark中的并行性取决于正在读取的源。</p><ol class=""><li id="46e4" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">平面文件格式</li><li id="f600" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">蜂巢餐桌</li></ol><p id="b038" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">平面文件格式</strong>:</p><p id="084f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于read csv、json等平面文件格式，分区数量基于以下属性。</p><p id="0cc9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">spark . SQL . files . maxpartitionbytes = 134217728(默认值)</strong></p><p id="2340" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">例如，如果我们读取一个简单的csv文件，我们将得到1个分区，如下所示</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es kh"><img src="../Images/46bb199e86411b6fa964ac51a613edb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/1*GfL9Hkvf4IkG64fBBqM2Cw.png"/></div></figure><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es km"><img src="../Images/603f8d921a17a656391600adffd21189.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*qEWfgAqV27_VNvVfOaGqiQ.png"/></div></div></figure><p id="467d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我已经更改了下面的属性，现在我们再次读取同一个文件，我们将得到分区的数量</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es kn"><img src="../Images/ba944aadf943b75490d1100e046a1311.png" data-original-src="https://miro.medium.com/v2/resize:fit:1104/format:webp/1*huPobjFwDJhmbDJJVavMuA.png"/></div></figure><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es ko"><img src="../Images/a7c1a1b7ada5beb40487453e13157935.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*KjMowHvd41WYi8xw11YiUA.png"/></div></figure><p id="6f6a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">配置单元表:</strong></p><p id="38d1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在配置单元表的情况下，分区的数量取决于相同的属性，为了演示相同的情况，我将读取一个配置单元表，其默认值为<strong class="ix hj"> 134217728字节</strong></p><p id="26ac" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">默认分区数量</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es kp"><img src="../Images/f505ea9aed760055db53bbdbb886aeb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1062/format:webp/1*vYumzVfJQ9b3D85clqdKJw.png"/></div></figure><p id="e3cc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">更改后的分区数量</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es kq"><img src="../Images/1fe5ce03b6110dc5fcba9e6a6bf12108.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*QE5-dnLg1RLmBjWxN6ZAdA.png"/></div></figure><p id="7434" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">结论:</strong></p><p id="98ad" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此得出结论，spark默认分区不再基于hadoop配置，从spark 2.2开始，上述属性将决定读取时的分区数量。因此，利用这个属性来提高读取性能</p><p id="3ae7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下一篇博客将是关于洗牌时的分区</p><p id="55e9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">今天就到这里吧！！:)</p><p id="baea" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Github链接:<a class="ae iu" href="https://github.com/SomanathSankaran/spark_medium/tree/master/spark_csv" rel="noopener ugc nofollow" target="_blank">https://github . com/SomanathSankaran/spark _ medium/tree/master/spark _ CSV</a></p><p id="27aa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> <em class="kr">请给我发spark中我必须涉及的话题，并给我改进写作的建议:)</em> </strong></p><p id="09f7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">学习，也让别人学习！！</strong></p></div></div>    
</body>
</html>