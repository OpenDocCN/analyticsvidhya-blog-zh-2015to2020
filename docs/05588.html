<html>
<head>
<title>Generate an interactive choropleth India map using Corona Virus(COVID-19) pandemic data with Bokeh</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用带有散景的冠状病毒(新冠肺炎)疫情数据生成交互式choropleth印度地图</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/generate-an-interactive-choropleth-india-map-using-corona-virus-covid-19-pandemic-data-with-bokeh-5623e974e585?source=collection_archive---------16-----------------------#2020-04-26">https://medium.com/analytics-vidhya/generate-an-interactive-choropleth-india-map-using-corona-virus-covid-19-pandemic-data-with-bokeh-5623e974e585?source=collection_archive---------16-----------------------#2020-04-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="084a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文中的12个简单步骤可以帮助你使用疫情(印度)和新冠肺炎(印度)的冠状病毒数据，以一种简化详细的方式制作一个交互式的Choropleth地图。确保您已经阅读了上一篇关于<a class="ae jd" rel="noopener" href="/@princenihith/generate-a-static-choropleth-india-map-using-corona-virus-pandemic-data-19e9cbf5a07d"> <strong class="ih hj"> <em class="je">静态Choropleth地图</em> </strong> </a>的文章</p><h2 id="ff3c" class="jf jg hi bd jh ji jj jk jl jm jn jo jp iq jq jr js iu jt ju jv iy jw jx jy jz bi translated">散景</h2><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es ka"><img src="../Images/2a14a87e8f4b458913ac5b859f612d31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*cDYyOb2SkOu3Y1CDXKcplw.png"/></div></figure><p id="a793" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它是当今互联网浏览器的直观感知库。它给出了灵活设计的精致、简短的开发，并承载了庞大或滔滔不绝的数据集上的精英智能。散景可以帮助任何想要快速有效地制作智能绘图、仪表盘和信息应用程序的人。</p><p id="7e6e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">互动Choropleth地图的12个简单步骤:</strong></p><p id="1ef9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤1 : </strong>导入代码所需的所有库</p><blockquote class="ki kj kk"><p id="1af5" class="if ig je ih b ii ij ik il im in io ip kl ir is it km iv iw ix kn iz ja jb jc hb bi translated"># Import libraries<br/>Import pandas as PD<br/>Import numpy as NP<br/>Import geo pandas as GPD<br/>Import JSON</p><p id="de72" class="if ig je ih b ii ij ik il im in io ip kl ir is it km iv iw ix kn iz ja jb jc hb bi translated">从bokeh.io导入显示<br/>从bokeh.plotting导入图形<br/>从bokeh.models导入GeoJSONDataSource，LinearColorMapper，ColorBar</p></blockquote><p id="fdbf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤2 </strong>:使用<strong class="ih hj"> pandas dataframe </strong>读取excel数据</p><blockquote class="ki kj kk"><p id="6b7c" class="if ig je ih b ii ij ik il im in io ip kl ir is it km iv iw ix kn iz ja jb jc hb bi translated">data _ df _ India = PD . read _ excel(r ' data _ ecxel . xlsx '，dtype = object)<br/>data _ df _ India . rename(columns = { ' Total Confirmed Cases ':' Cases '，' Name of State/ UT':'st_nm'}，in place = True)<br/>data _ df _ India . head()</p></blockquote><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es ko"><img src="../Images/703470a0d024008e79a3ae07b4cd9155.png" data-original-src="https://miro.medium.com/v2/resize:fit:810/format:webp/1*n9pmFHZk-Lin7HvxXT7MIw.png"/></div></figure><p id="8a4a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了方便起见，使用pandas dataframe读取excel数据并重命名列。</p><p id="4851" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤3 : </strong>使用<strong class="ih hj"> Geopandas </strong>库读取<strong class="ih hj">形状文件</strong></p><blockquote class="ki kj kk"><p id="9234" class="if ig je ih b ii ij ik il im in io ip kl ir is it km iv iw ix kn iz ja jb jc hb bi translated">FP = r ' India-polygon . shp '<br/>SF _ India = GPD . read _ file(FP)<br/>SF _ India . head()</p></blockquote><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es kp"><img src="../Images/6c2d5120e09703ff8a5734560be60a4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1178/format:webp/1*Fxu9pm4ANkRstP5PEZf1Ag.png"/></div></figure><p id="7f72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤4 : </strong>合并<strong class="ih hj">公共列</strong>上的数据文件和形状文件</p><blockquote class="ki kj kk"><p id="88ae" class="if ig je ih b ii ij ik il im in io ip kl ir is it km iv iw ix kn iz ja jb jc hb bi translated">merged = SF _ India . merge(data _ df _ India，on = 'st_nm '，how = 'left') <br/> merged.head()</p></blockquote><p id="644f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是常见的栏目<strong class="ih hj"> <em class="je"> st_nm </em> </strong></p><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es kq"><img src="../Images/27431efe079cc0d7cf58c20a2b579cc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*ChYKX-sB_4YkXOO2DC41cQ.png"/></div></figure><p id="a379" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第五步</strong>:将数据读入JSON并转换成GEOJSON格式</p><blockquote class="ki kj kk"><p id="a5bd" class="if ig je ih b ii ij ik il im in io ip kl ir is it km iv iw ix kn iz ja jb jc hb bi translated">#读取数据到JSON<br/>merged _ JSON = JSON . loads(merged . to _ JSON())</p><p id="ed6e" class="if ig je ih b ii ij ik il im in io ip kl ir is it km iv iw ix kn iz ja jb jc hb bi translated"># Convert to str like object<br/>JSON _ data = JSON . dumps(merged _ JSON)<br/>geosource = GeoJSONDataSource(geojson = JSON _ data)</p></blockquote><p id="97f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤6 : </strong>配置调色板</p><p id="9ff1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://docs.bokeh.org/en/latest/docs/reference/palettes.html#bokeh-palettes" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> <em class="je">调色板</em></strong></a><strong class="ih hj"><em class="je">——</em></strong><em class="je">在散景的上下文中，调色板是一个简单的(十六进制)RGB颜色字符串的普通Python列表。</em></p><p id="69b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="je">例如</em> <code class="du kr ks kt ku b"><em class="je">Blues8</em></code> <em class="je">调色板看起来像是被定义为:</em></p><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es kv"><img src="../Images/ed47621ae0214df0573a3a3a57babff9.png" data-original-src="https://miro.medium.com/v2/resize:fit:328/format:webp/1*o330-uIJl6lswu1TOiRK3Q.png"/></div></figure><blockquote class="ki kj kk"><p id="d3ea" class="if ig je ih b ii ij ik il im in io ip kl ir is it km iv iw ix kn iz ja jb jc hb bi translated">palette = brewer[' YlGnBu '][8]<br/>#颠倒颜色顺序，使深蓝色为最高肥胖度。调色板=调色板[::-1]</p></blockquote><p id="c6a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤7 : </strong>实例化<a class="ae jd" href="https://docs.bokeh.org/en/latest/docs/reference/models/mappers.html?highlight=linearcolormapper#bokeh.models.mappers.LinearColorMapper" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">颜色映射器</strong> </a>和刻度标签</p><blockquote class="ki kj kk"><p id="b256" class="if ig je ih b ii ij ik il im in io ip kl ir is it km iv iw ix kn iz ja jb jc hb bi translated">color _ mapper = LinearColorMapper(palette = palette，low=merged['Cases']。min()，high =合并['Cases']。max()，nan _ color = ' # d9d 9 ')<br/>#为颜色条定义自定义刻度标签。<br/>tick _ labels = { ' 5000 ':'&gt;5000 ' }</p></blockquote><p id="2941" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">根据合并数据帧中的列“案例”,我们有低值和高值。我们在列合并中将Nan的颜色值指定为' # d9d9d9 '。</p><p id="f719" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤8: </strong>添加<strong class="ih hj">悬停工具</strong>使地图更具互动性</p><p id="f760" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://docs.bokeh.org/en/latest/docs/user_guide/tools.html#hovertool" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">悬停工具</strong> </a> <strong class="ih hj"> </strong> —悬停工具是一种被动的检查工具。它通常一直处于打开状态，但可以在与工具栏相关联的检查器菜单中进行配置。</p><blockquote class="ki kj kk"><p id="cd09" class="if ig je ih b ii ij ik il im in io ip kl ir is it km iv iw ix kn iz ja jb jc hb bi translated">#添加悬停工具<br/> hover = HoverTool(工具提示= [ ('Country '，'<a class="ae jd" href="http://twitter.com/st_nm" rel="noopener ugc nofollow" target="_blank"> @st_nm </a>')，(' Cases '，'<a class="ae jd" href="http://twitter.com/Cases" rel="noopener ugc nofollow" target="_blank"> @Cases </a> ')])</p></blockquote><p id="05e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们添加了用于州名的列<em class="je"> st_nm和用于确诊病例的列Cases，以显示特定指定州的数据。</em></p><p id="1bad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第九步:</strong>添加<a class="ae jd" href="https://docs.bokeh.org/en/latest/docs/reference/models/annotations.html?highlight=colorbar#bokeh.models.annotations.ColorBar" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">彩条</strong> </a>贴图</p><blockquote class="ki kj kk"><p id="5bf8" class="if ig je ih b ii ij ik il im in io ip kl ir is it km iv iw ix kn iz ja jb jc hb bi translated">#创建颜色栏。<br/>color _ bar = color bar(color _ mapper = color _ mapper，label_standoff=8，width = 500，height = 20，<br/> border_line_color=None，location = (0，0)，orientation = 'horizontal '，major _ label _ overrides = tick _ labels)</p></blockquote><p id="2d84" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤-10 : </strong>现在创建<a class="ae jd" href="https://docs.bokeh.org/en/latest/docs/reference/plotting.html?highlight=figure#bokeh.plotting.figure.figure" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">图</strong>对象T47】</a></p><blockquote class="ki kj kk"><p id="9fa8" class="if ig je ih b ii ij ik il im in io ip kl ir is it km iv iw ix kn iz ja jb jc hb bi translated">p = figure(title = '新冠肺炎案件数'，plot_height = 600，plot_width = 950，toolbar_location = None，tools =[hover])<br/>p . xgrid . grid _ line _ color = None<br/>p . ygrid . grid _ line _ color = None</p></blockquote><p id="c4f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤-11: </strong>给图添加<a class="ae jd" href="https://docs.bokeh.org/en/latest/docs/reference/plotting.html?highlight=patches#bokeh.plotting.figure.Figure.patches" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">补丁</strong> </a></p><blockquote class="ki kj kk"><p id="a443" class="if ig je ih b ii ij ik il im in io ip kl ir is it km iv iw ix kn iz ja jb jc hb bi translated">#向图形添加补丁渲染器。<br/> p.patches('xs '，' ys '，source = geosource，fill_color = {'field' :'Cases '，' transform' : color_mapper}，line_color = 'black '，line_width = 0.25，fill _ alpha = 1)<br/># Specify layout<br/>p . add _ layout(color _ bar，' right ')</p></blockquote><p id="b11d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> Step-12: </strong>使用<a class="ae jd" href="https://docs.bokeh.org/en/latest/docs/reference/io.html?highlight=show#bokeh.io.show" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">显示</strong> </a> <strong class="ih hj"> </strong>方法显示地块</p><blockquote class="ki kj kk"><p id="afdd" class="if ig je ih b ii ij ik il im in io ip kl ir is it km iv iw ix kn iz ja jb jc hb bi translated">显示(p)</p></blockquote><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es kw"><img src="../Images/12d0396a482c384e3cca091bb34ce172.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mCqjgPkdrhNP7MFujszEaA.png"/></div></div></figure><h1 id="051a" class="lb jg hi bd jh lc ld le jl lf lg lh jp li lj lk js ll lm ln jv lo lp lq jy lr bi translated">Github链接:</h1><p id="c849" class="pw-post-body-paragraph if ig hi ih b ii ls ik il im lt io ip iq lu is it iu lv iw ix iy lw ja jb jc hb bi translated">您可以在 这里获得代码和文件<a class="ae jd" href="https://github.com/Princenihith/choropleth-map-using-bokeh" rel="noopener ugc nofollow" target="_blank"> <em class="je"/></a></p></div></div>    
</body>
</html>