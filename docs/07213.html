<html>
<head>
<title>Forecasting Bitcoin Prices using Prophet in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Prophet in R预测比特币价格</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/forecasting-bitcoin-prices-using-prophet-in-r-858e10cfb942?source=collection_archive---------7-----------------------#2020-06-17">https://medium.com/analytics-vidhya/forecasting-bitcoin-prices-using-prophet-in-r-858e10cfb942?source=collection_archive---------7-----------------------#2020-06-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/eaede6703d296ac876f571297d495168.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c712mB3MJnNELwQvtKEdCg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">使用Prophet进行动态预测</figcaption></figure></div><div class="ab cl iu iv gp iw" role="separator"><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz"/></div><div class="hb hc hd he hf"><p id="c7de" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">预测可能是相当令人生畏的，特别是考虑到能够识别预测策略所需的知识，这可能涉及带有严格数学基础的沉重概念。幸运的是，脸书聪明的开发者开发了一个简单的预测库，叫做Prophet，它让预测新手看起来也像专家。我想先说一下，先知模型并不完美，在大多数情况下也不能被认为是最好的。它通常用于带有相当多季节性、趋势和漂移的模型。这就是商业销售数据的情况，其中与常规季度或工作日相比，在假日季度或周末可能会看到更高的值。</p><p id="d233" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">首先，我们需要<strong class="jd hj">在r中安装prophet库</strong>，这涉及到使用<em class="jz"> install.packages() </em>命令。</p><pre class="ka kb kc kd fd ke kf kg kh aw ki bi"><span id="19ed" class="kj kk hi kf b fi kl km l kn ko">install.packages('prophet')</span></pre><p id="949c" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">然后<strong class="jd hj">使用<em class="jz">库()</em>命令调用</strong>这个包。</p><pre class="ka kb kc kd fd ke kf kg kh aw ki bi"><span id="3283" class="kj kk hi kf b fi kl km l kn ko">library(prophet)<br/>library(tidyverse)</span></pre><p id="6c0e" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">对于这个例子，我们将使用可以在雅虎财经获得的<em class="jz">每日比特币调整收盘值</em>。可以在这里找到数据集的链接，它位于名为Prophet Forecasting with Prophet的文件夹中</p><p id="e9a0" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated"><a class="ae kp" href="https://drive.google.com/drive/folders/11mAXh0trxjuf1y_yh-AJXgxulHQwcBEn" rel="noopener ugc nofollow" target="_blank">https://drive . Google . com/drive/folders/11 max h0 trxjuf 1y _ yh-AJXgxulHQwcBEn</a></p><pre class="ka kb kc kd fd ke kf kg kh aw ki bi"><span id="0d63" class="kj kk hi kf b fi kl km l kn ko">bitcoin &lt;- read.csv(file.choose())<br/>head(bitcoin)<br/>tail(bitcoin)</span></pre><p id="1dcf" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">我们使用<em class="jz"> read.csv() </em>命令导入数据集。<em class="jz"> file.choose() </em>命令打开对话框，您可以选择数据集。我们创建了一个名为比特币的对象来存储数据集。<em class="jz"> head() </em>命令显示前几行，而<em class="jz"> tail() </em>命令显示最后几行。注意，ds列包含日期，y列包含比特币收盘价。按照惯例，prophet将ds列读取为日期，将y列读取为序列。因此，您可能需要重命名列以符合这一约定。此外，您可能需要将日期设置为<em class="jz"> YYYY-mm-dd </em>格式，因为这是prophet识别的格式。</p><pre class="ka kb kc kd fd ke kf kg kh aw ki bi"><span id="c21f" class="kj kk hi kf b fi kl km l kn ko">Model1 &lt;- prophet(bitcoin)<br/>Future1 &lt;- make_future_dataframe(Model1, periods = 31)</span></pre><p id="cc13" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">我们现在将<strong class="jd hj">构建模型</strong>。我们使用<em class="jz"> prophet() </em>命令来创建一个动态预测模型。我们将这个模型存储为一个名为Model1的对象。之后，我们将使用<em class="jz">make _ future _ data frame()</em>命令向样本添加31个周期。这将在下一步中用未来预测值填充。</p><pre class="ka kb kc kd fd ke kf kg kh aw ki bi"><span id="7d31" class="kj kk hi kf b fi kl km l kn ko">Forecast1 &lt;- predict(Model1, Future1)<br/>tail(Forecast1[c('ds','yhat','yhat_lower','yhat_upper')])</span></pre><p id="cdee" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">我们将使用<em class="jz"> predict() </em>来<strong class="jd hj">预测</strong>预测值，并创建一个对象预测1来存储这些值。<em class="jz"> tail </em>命令将列出最后几个预测观测值，其中包含日期(ds)、预测值(that)和估计值置信区间的详细信息。</p><pre class="ka kb kc kd fd ke kf kg kh aw ki bi"><span id="9e42" class="kj kk hi kf b fi kl km l kn ko">dyplot.prophet(Model1, Forecast1)</span></pre><p id="85c2" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">我们使用<em class="jz"> dyplot.prophet() </em>命令来<strong class="jd hj">绘制预测图</strong>，这为我们提供了本文开头的数字。我们还可以使用绘图区底部的滑块来调整跨度。</p><figure class="ka kb kc kd fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/aa8a8c3cf0fb279c04564f5dceda88ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VV0fsIEmdlG33JmjjkWJDQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">预测值</figcaption></figure><p id="7f14" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">正如我们所见，下个月比特币价格似乎有上升趋势。您可以通过悬停在该区域或打印r中的值来查看具体值。我们还可以使用<em class="jz">prophet _ plot _ components()</em>命令来查看某些季节性或一周中的某一天的影响。</p><pre class="ka kb kc kd fd ke kf kg kh aw ki bi"><span id="03d7" class="kj kk hi kf b fi kl km l kn ko">prophet_plot_components(Model1, Forecast1)</span></pre><figure class="ka kb kc kd fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kq"><img src="../Images/d37ead7a17c1c6846acb6ac267d0c06a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tKY_fQhtlG024g19z2yW1A.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">分解预测序列</figcaption></figure><p id="8efd" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">我希望您能够看到使用prophet函数进行预测是多么容易，并且非常适合生成需要简单分析的快速报告。为了更好的实践，我制作了一个视频，详细介绍了下面的所有命令。</p><figure class="ka kb kc kd fd ij"><div class="bz dy l di"><div class="kr ks l"/></div></figure></div></div>    
</body>
</html>