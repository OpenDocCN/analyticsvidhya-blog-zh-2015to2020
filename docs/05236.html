<html>
<head>
<title>How to Automatically Create a List of Media for PR Campaign</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何为公关活动自动创建媒体列表</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-automatically-create-a-list-of-media-for-pr-campaign-941af7baac89?source=collection_archive---------29-----------------------#2020-04-14">https://medium.com/analytics-vidhya/how-to-automatically-create-a-list-of-media-for-pr-campaign-941af7baac89?source=collection_archive---------29-----------------------#2020-04-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="81d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你不知道你的目标听觉阅读的是哪种媒体，该怎么办？</p><p id="d62b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你想在法国开展公关活动，但你住在美国。你不知道背景，也不知道你的目标受众在法国实际阅读了什么。</p><p id="3eb6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这篇文章将帮助你解决这个问题。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/2ee9f36f6a1d99ade28b1ed099cc741d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C72VXPhoyqcc4zV8ftNIEQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">法国媒体的一个小图表</figcaption></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h1 id="9cc5" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">介绍</h1><p id="5d77" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">几个月前，当我因为我的<a class="ae ld" href="http://reface.tech" rel="noopener ugc nofollow" target="_blank">创业</a>而开始与媒体沟通时，我面临着同样的问题。这就是为什么我需要一份高科技媒体的清单。</p><p id="f6cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">我想要一个包含这些列的表格:</strong></p><ol class=""><li id="0c8f" class="le lf hi ih b ii ij im in iq lg iu lh iy li jc lj lk ll lm bi translated">媒体名称</li><li id="82ef" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">链接到网站</li><li id="22ac" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">它的优先级(或“适合我的目的”)</li><li id="8dbd" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">Alexa率，因为我应该知道这个网站是否受欢迎</li></ol><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ls"><img src="../Images/55568d1fa7ce88206c6b6d184b99eac8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nro7OekGcYQ_Fcfma3onlA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">这种表格的一个例子</figcaption></figure><p id="12e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以防你不知道:Alexa(我指的是https://www.alexa.com/siteinfo的<a class="ae ld" href="https://www.alexa.com/siteinfo" rel="noopener ugc nofollow" target="_blank"/>)是亚马逊的网站分析工具。</p><p id="5f4c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我发现Alexa有一个名为“相似网站”的特殊标签，它为你提供了5个与你请求的网站重叠的网站的信息。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lt"><img src="../Images/f23b9572c1650b27c561b8129361e2da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*4z0d_HJaQPCJ_hX2DwJ4RQ.png"/></div></figure><p id="419a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">所以我的计划是:</strong></p><ol class=""><li id="9159" class="le lf hi ih b ii ij im in iq lg iu lh iy li jc lj lk ll lm bi translated">插入我在Alexa分析工具中发现的所有网站</li><li id="c4b9" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">从Alexa获得所有类似的网站。</li><li id="3469" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">过滤它们(如果一个网站不符合我的要求，就阻止它)</li><li id="d5bc" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">在Alexa分析工具中插入所有过滤的网站</li><li id="2e26" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">(再一次迭代)</li></ol><p id="5b01" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我开始用手做，但是不真实。</p><p id="1be7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">一些问题:</strong></p><ol class=""><li id="ffd9" class="le lf hi ih b ii ij im in iq lg iu lh iy li jc lj lk ll lm bi translated">很难记住你是否已经浏览过这个网站。所以你需要在某个地方存储信息，这需要时间。</li></ol><p id="33b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.您还应该存储有关“被阻止”网站的信息。</p><p id="9108" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.您的浏览器中有太多标签。你的电脑开始运行缓慢，这很烦人。任务开始需要更多的时间来解决。</p><p id="a119" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">结论:</strong>这个过程耗费大量时间。但是可以自动化！</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h1 id="1b96" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">伙计们，该做快速数学了</h1><p id="e33a" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">媒体之间的连接可以由图来表示，其中顶点是媒体。如果两个媒体(即顶点)是连接的(即它们之间存在边)，那么在Alexa中可以说它们是相似的。</p><p id="a49c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">举个例子:</strong></p><p id="44b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在法国，有这样一种媒体叫做《巴黎人》。事实上，这是一个日常新闻，但这并不重要。</p><p id="ac3c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Alexa为我们提供了类似的网站:</p><ol class=""><li id="6590" class="le lf hi ih b ii ij im in iq lg iu lh iy li jc lj lk ll lm bi translated"><a class="ae ld" href="https://www.alexa.com/siteinfo/linternaute.fr" rel="noopener ugc nofollow" target="_blank"> linternaute.fr </a></li><li id="a4d4" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated"><a class="ae ld" href="http://larousse.fr" rel="noopener ugc nofollow" target="_blank"> larousse.fr </a></li><li id="d5e0" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated"/><li id="fe8f" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated"><a class="ae ld" href="https://www.alexa.com/siteinfo/cnrtl.fr" rel="noopener ugc nofollow" target="_blank"> cnrtl.fr </a></li><li id="2105" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated"><a class="ae ld" href="https://www.alexa.com/siteinfo/lefigaro.fr" rel="noopener ugc nofollow" target="_blank"> lefigaro.fr </a></li></ol><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lu"><img src="../Images/ff380a204b63197403b3ad6a9eb8c404.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LXETKw7YTbl0UbZPm-A_LQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">《巴黎人报》与其他媒体的关系图</figcaption></figure><p id="fc7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还应该知道，这些媒体中的每一个都会给我们带来大约5种其他的联系。此外，该网站可以连接到我们已经在图表中看到的一些网站。</p><p id="b611" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，现在让我们获取关于<a class="ae ld" href="http://lemonde.fr" rel="noopener ugc nofollow" target="_blank"> lemonde.fr </a>的信息。</p><p id="7421" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">哪些站点是相对于它的？</strong></p><ol class=""><li id="7083" class="le lf hi ih b ii ij im in iq lg iu lh iy li jc lj lk ll lm bi translated"><a class="ae ld" href="https://www.alexa.com/siteinfo/leparisien.fr" rel="noopener ugc nofollow" target="_blank"> leparisien.fr </a></li><li id="46f6" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated"><a class="ae ld" href="https://www.alexa.com/siteinfo/lefigaro.fr" rel="noopener ugc nofollow" target="_blank"> lefigaro.fr </a></li><li id="fa2b" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated"><a class="ae ld" href="https://www.alexa.com/siteinfo/linternaute.fr" rel="noopener ugc nofollow" target="_blank"> linternaute.fr </a></li><li id="a792" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated"><a class="ae ld" href="https://www.alexa.com/siteinfo/francetvinfo.fr" rel="noopener ugc nofollow" target="_blank"> francetvinfo.fr </a></li><li id="1b79" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated"><a class="ae ld" href="https://www.alexa.com/siteinfo/ouest-france.fr" rel="noopener ugc nofollow" target="_blank">法国西部</a></li></ol><p id="834d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我们所见，<a class="ae ld" href="https://www.alexa.com/siteinfo/linternaute.fr" rel="noopener ugc nofollow" target="_blank"> linternaute.fr </a>、<a class="ae ld" href="https://www.alexa.com/siteinfo/lefigaro.fr" rel="noopener ugc nofollow" target="_blank"> lefigaro.fr </a>和<a class="ae ld" href="https://www.alexa.com/siteinfo/leparisien.fr" rel="noopener ugc nofollow" target="_blank"> leparisien.fr </a>已经出现在我们的图表中。但是最后两个资源不在那里。</p><p id="d528" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们重新画一下我们的插图:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lu"><img src="../Images/46e4f90be8ce2a67e7fdfc3c4c0e1d10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iRmhTSgQQg3aFFYoVNpmlQ.png"/></div></div></figure><p id="d142" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是如果<a class="ae ld" href="http://lemonde.fr" rel="noopener ugc nofollow" target="_blank"> lemonde.fr </a>不符合我们的要求呢？</p><p id="0310" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们应该把它排除在我们的图表之外。因此，它将排除类似的网站，因为我们现在不能去那里。但这并不是说这些资源将被完全排除，因为在未来(当我们更深入时)可能会存在与某些资源的相似性，并且它们之间的边界将被画出。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lu"><img src="../Images/cb5d77fbb4a113257b852a40dbd95097.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hXKpoVwp1s0Bd-tMdJVdmw.png"/></div></div></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h1 id="9bcf" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">自动化计划</h1><p id="7e0b" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">今天我们将在Python上写作。但是我们应该写什么呢？</p><ol class=""><li id="7d3e" class="le lf hi ih b ii ij im in iq lg iu lh iy li jc lj lk ll lm bi translated">一个模块，与Alexa互动，并获得有关类似网站和Alexa率的信息。</li><li id="92ad" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">一个模块，处理新的网址，保存更改，如果你已经查看了资源或阻止它。它实际上触发了Alexa交互模块来扫描新的资源。</li><li id="7376" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">在某处添加获得的数据的模块。我将把它添加到概念中，因为我非常喜欢它，但是你可以自己制作一个(例如，用于在CSV中存储数据)。</li></ol><p id="eb0a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们了解一下我们应该在这里使用的仪器。</p><h2 id="1a0f" class="lv kb hi bd kc lw lx ly kg lz ma mb kk iq mc md ko iu me mf ks iy mg mh kw mi bi translated">Alexa交互模块</h2><p id="7a9c" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">我的第一个想法是使用<code class="du mj mk ml mm b">requests</code>库获取页面内容。但是，对我们来说不幸的是，Alexa网站不发送所有需要的HTML代码信息。加载到浏览器后，它开始发出请求以接收数据。为了得到它，你必须以某种方式“坐下来等待”,直到它将加载所有内容。</p><p id="7dba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">出于我们的目的，我们将使用名为<code class="du mj mk ml mm b">Google Chome driver</code>的东西。</p><p id="0ba8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以在这里下载:<a class="ae ld" href="https://chromedriver.chromium.org/downloads" rel="noopener ugc nofollow" target="_blank">https://chromedriver.chromium.org/downloads</a></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mn"><img src="../Images/e2479f66e35beba0d7ef4b4a1babc204.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9q_lZckUhRN_4PW9LRK4Tw.png"/></div></div></figure><p id="a29c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">实际上，它允许我们通过Python与真正的浏览器进行交流，打开新的站点，发出请求，获取站点代码等等。</p><p id="ed81" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于与Chrome驱动程序的通信，我们使用<code class="du mj mk ml mm b">selenium</code>。这是一个用于浏览器自动化的库。我们使用<code class="du mj mk ml mm b">beautifulsoup</code>解析HTML，因为它实际上是一个众所周知的it工具。</p><h2 id="3b0a" class="lv kb hi bd kc lw lx ly kg lz ma mb kk iq mc md ko iu me mf ks iy mg mh kw mi bi translated">Url交互模块</h2><p id="d34d" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">显然，我们有三个URL数组:</p><ol class=""><li id="7cdd" class="le lf hi ih b ii ij im in iq lg iu lh iy li jc lj lk ll lm bi translated">要查看的新URL</li><li id="3b2d" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">已查看的URL</li><li id="9b47" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">禁止的URL</li></ol><p id="2e8f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们需要将它们保存到我们的文件系统，并在启动时加载，以便能够关闭脚本并进入睡眠状态，而不用担心我们会丢失所有的进度。</p><h2 id="9d33" class="lv kb hi bd kc lw lx ly kg lz ma mb kk iq mc md ko iu me mf ks iy mg mh kw mi bi translated">概念交互模块</h2><p id="1031" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">正如你可能知道的，概念没有一个公共API。但是有人逆转了它，并用Python实现了一个完全有效的实现:</p><p id="38a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它位于这里:<a class="ae ld" href="https://github.com/jamalex/notion-py" rel="noopener ugc nofollow" target="_blank">https://github.com/jamalex/notion-py</a></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mo"><img src="../Images/1dfd3789f361aef3bf375ced035927c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uvvb54oxHtpphU4CYny72g.png"/></div></div></figure><p id="d279" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们准备实施一切。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h1 id="81b4" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">编写代码</h1><p id="8793" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">正如我们已经说过的，让我们写一些代码。</p><p id="b412" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们有一些常数:</p><ol class=""><li id="147a" class="le lf hi ih b ii ij im in iq lg iu lh iy li jc lj lk ll lm bi translated">概念的象征，因为我们想与它互动</li><li id="b3d2" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">Chrome驱动程序的路径</li><li id="ae08" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">Alexa网址(即<a class="ae ld" href="http://alexa.com/siteinfo" rel="noopener ugc nofollow" target="_blank">alexa.com/siteinfo</a>)</li><li id="66a8" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">链接到概念表，每个对应一个国家。在我们的例子中，我们列出了一个法国媒体的列表，但是你可能也想要一个英国时尚媒体的列表。</li></ol><p id="2564" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以我们的<code class="du mj mk ml mm b">constants.py</code>文件看起来如下:</p><p id="b285" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">好问题是:</strong></p><blockquote class="mp mq mr"><p id="9ec1" class="if ig ms ih b ii ij ik il im in io ip mt ir is it mu iv iw ix mv iz ja jb jc hb bi translated">我们如何得到这个概念令牌？</p></blockquote><p id="6ab4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">答案:</strong></p><ul class=""><li id="fca5" class="le lf hi ih b ii ij im in iq lg iu lh iy li jc mw lk ll lm bi translated">转到<a class="ae ld" href="http://notion.so" rel="noopener ugc nofollow" target="_blank">inconce . so</a></li><li id="c3fe" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc mw lk ll lm bi translated">按Ctrl + Shift + J</li><li id="9d29" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc mw lk ll lm bi translated">转到应用程序-&gt; cookie</li><li id="6a1d" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc mw lk ll lm bi translated">将token_v2字段复制到那里</li></ul><p id="f2e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">我们的文件结构如下:</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mx"><img src="../Images/c77a4ebf37a428b8c9460dee937e2785.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*ScgTAMg_E8vbV0A1BCjpfQ.png"/></div></figure><h2 id="52f9" class="lv kb hi bd kc lw lx ly kg lz ma mb kk iq mc md ko iu me mf ks iy mg mh kw mi bi translated">书写Chrome交互器</h2><p id="d39f" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated"><strong class="ih hj">这里发生了什么:</strong></p><ol class=""><li id="de12" class="le lf hi ih b ii ij im in iq lg iu lh iy li jc lj lk ll lm bi translated">我们要求<code class="du mj mk ml mm b">selenium</code>打开我们的<code class="du mj mk ml mm b">final_url</code>。它是<a class="ae ld" href="http://alexa.com/siteinfo/" rel="noopener ugc nofollow" target="_blank">alexa.com/siteinfo/</a>+网址。</li><li id="c8be" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">我们等待3秒钟，直到所有东西都装载完毕。</li><li id="d114" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">我们从浏览器获取HTML并开始解析它。</li><li id="5936" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">如果我们在浏览器中打开站点的代码，我们会看到Alexa rate属于类别<code class="du mj mk ml mm b">big</code>和<code class="du mj mk ml mm b">data</code>，所以我们用适当的选择器来获取它。</li><li id="087b" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">然后，我们删除所有格式，并将其重新解析为整数。</li><li id="1ee7" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">然后我们得到“相似的网站”。实际上，它们属于<code class="du mj mk ml mm b">truncations</code>类，我们用适当的选择器得到它</li><li id="ece9" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">我们将所需的信息添加到概念中。正如你所看到的，我们在开始时已经初始化了概念。</li><li id="a81a" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">我们返回<code class="du mj mk ml mm b">truncations</code>。如你所知，Chrome interactor是从URL interactor调用的。所以我们把它退回去</li></ol><h2 id="5041" class="lv kb hi bd kc lw lx ly kg lz ma mb kk iq mc md ko iu me mf ks iy mg mh kw mi bi translated">写作观念互动者</h2><p id="90e1" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated"><strong class="ih hj">这里发生了什么:</strong></p><ol class=""><li id="3ac8" class="le lf hi ih b ii ij im in iq lg iu lh iy li jc lj lk ll lm bi translated">我们初始化URL处理程序和一个与概念通信的东西。我们还加载已经添加到概念中的URL，因为我们不想第二次添加它。我们得到一个表格内容。</li><li id="4b04" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">当调用<code class="du mj mk ml mm b">add_row</code>时，我们检查URL是否不在概念中。如果没有，那么我们在那里添加它。</li><li id="fab3" class="le lf hi ih b ii ln im lo iq lp iu lq iy lr jc lj lk ll lm bi translated">如果它已被添加到概念，那么我们更新其Alexa率</li></ol><h2 id="0437" class="lv kb hi bd kc lw lx ly kg lz ma mb kk iq mc md ko iu me mf ks iy mg mh kw mi bi translated">正在编写URL交互器</h2><p id="6255" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">伙计们，这是故事中最复杂的部分。所以我会分部分给你代码。</p><p id="8d7b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，我们初始化代表<code class="du mj mk ml mm b">banned_urls</code>(我们不会查看的)、<code class="du mj mk ml mm b">viewed_urls</code>(我们已经查看过的)和<code class="du mj mk ml mm b">new_urls</code>(现在正在工作)的数组。我们还初始化了Chrome处理程序。</p><p id="a1c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们检查URL是否被禁止、查看，它是否是新的，我们是否可以打开它:</p><p id="15a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于<code class="du mj mk ml mm b">is_found</code>的注意:我们不能只检查URL是否在数组中，因为在数组中可能有，例如，<a class="ae ld" href="https://leparisien.fr," rel="noopener ugc nofollow" target="_blank">https://leparisien.fr/high-tech,</a>并且我们从截断中得到<a class="ae ld" href="http://leparisien.fr" rel="noopener ugc nofollow" target="_blank"> leparisien.fr </a>。</p><p id="e4d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们实现功能，禁止，查看，添加到新的等等。</p><p id="7e88" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意</strong>:在<code class="du mj mk ml mm b">add</code>中，我们的脚本询问我们是否应该写一个新的URL。如果答案是否定的，那么它将禁止它。</p><p id="fe2a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们编写将数据加载并保存到文件中的函数。</p><p id="459e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<code class="du mj mk ml mm b">load</code>中，我们检查是否已经创建了一个文件。如果没有，那么我们用<code class="du mj mk ml mm b">save_empty</code>创建它。在<code class="du mj mk ml mm b">save</code>中，我们将数组转储为JSON数组。</p><p id="0d47" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们编写处理截断和启动Chrome interactor的函数。</p><h2 id="2217" class="lv kb hi bd kc lw lx ly kg lz ma mb kk iq mc md ko iu me mf ks iy mg mh kw mi bi translated">写入主文件</h2><p id="d965" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">现在是最容易的部分。</p><p id="7c8b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们要求用户插入一种语言(即一个国家)。然后所有的交互器被初始化，过程开始。</p><p id="77f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">今天到此为止。谢谢你读这篇文章，我很高兴能帮到别人我的想法:——)</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h1 id="f36b" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">资源</h1><h2 id="cec2" class="lv kb hi bd kc lw lx ly kg lz ma mb kk iq mc md ko iu me mf ks iy mg mh kw mi bi translated">您可以在GitHub上找到这篇文章的所有代码:</h2><p id="58a6" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated"><a class="ae ld" href="https://github.com/mixeden/MediaCrawler" rel="noopener ugc nofollow" target="_blank">https://github.com/mixeden/MediaCrawler</a></p><h2 id="c458" class="lv kb hi bd kc lw lx ly kg lz ma mb kk iq mc md ko iu me mf ks iy mg mh kw mi bi translated">以下是项目中使用的库的链接:</h2><p id="8ec4" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">Chrome驱动:【https://chromedriver.chromium.org/downloads<br/>美汤:<a class="ae ld" href="https://pypi.org/project/beautifulsoup4/" rel="noopener ugc nofollow" target="_blank">https://pypi.org/project/beautifulsoup4/</a><br/>意念-py:<a class="ae ld" href="https://github.com/jamalex/notion-py" rel="noopener ugc nofollow" target="_blank">https://github.com/jamalex/notion-py</a><br/>硒:<a class="ae ld" href="https://www.selenium.dev/" rel="noopener ugc nofollow" target="_blank">https://www.selenium.dev/</a></p></div></div>    
</body>
</html>