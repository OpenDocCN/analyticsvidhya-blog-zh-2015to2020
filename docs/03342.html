<html>
<head>
<title>Coding on the Remote Server via pyCharm</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过pyCharm在远程服务器上编码</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/connecting-remote-server-via-pycharm-53414d0da93f?source=collection_archive---------1-----------------------#2020-01-27">https://medium.com/analytics-vidhya/connecting-remote-server-via-pycharm-53414d0da93f?source=collection_archive---------1-----------------------#2020-01-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/47b6c53bc0227c58d664950b0180a87d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gfht6VC686d7H4b1iCCq1w.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">约翰·穆切特在<a class="ae iu" href="https://unsplash.com/s/photos/barcelona?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="fc0e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">作为数据爱好者，我们经常需要在远程服务器上运行代码，因为我们需要计算能力和足够的内存。据我所知，人们在远程服务器上用来编码的最流行的工具是Jupyter lab和notebook。虽然Jupyter很令人满意，但pyCharm professional也有它的优点。<br/>以下是pyCharm Professional的一些方面促使我写这篇文章。</p><ul class=""><li id="2615" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">不用说，我喜欢JetBrains的产品，多年来我对他们非常熟悉。</li><li id="f615" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">PyCharm不仅仅是一个笔记本，它还提供了一个完整的IDE，其中包含了使编码更容易、更舒适的工具。</li><li id="60eb" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">如果你正在开发一个实际的项目，而不仅仅是做一些分析，你必须马上测试你的代码，为此调试工具是至关重要的。虽然Jupyter接受调试机制，如PDB，但在PyCharm中调试感觉更可靠。</li><li id="cae4" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">我刚才提到的所有工具也出现在pyCharm社区中，但是pyCharm Professional的特别之处在于它支持Jupyter笔记本。</li><li id="e4c1" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">通过Jupyter的远程连接不会在您的本地机器上留下任何物理线索，这意味着，如果服务器出现故障，您可能会丢失您的数据和代码，如果您没有备份它们的话。尽管如此，pyCharm Professional可以将远程目录与本地机器上的目录同步。所以你不必担心服务器运行不良。</li></ul><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kh"><img src="../Images/329931a63f1844bf42005b202d854752.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lWfqd0rHNsbouzzaqrGvbA.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">凯西·霍纳在<a class="ae iu" href="https://unsplash.com/s/photos/train?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="84be" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你注意到了，我们继续吧。</p></div><div class="ab cl kn ko gp kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hb hc hd he hf"><h1 id="a8d4" class="ku kv hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">设置PyCharm连接的方法</h1><ul class=""><li id="6991" class="jt ju hi ix b iy ls jc lt jg lu jk lv jo lw js jy jz ka kb bi translated">打开PyCharm <strong class="ix hj">文件</strong> &gt; <strong class="ix hj">设置</strong> &gt; <strong class="ix hj">构建、执行、部署</strong></li><li id="d2d0" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">在右侧选项卡中，选择<strong class="ix hj"> <em class="km">部署</em> </strong></li><li id="a479" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">点击最左侧出现的<strong class="ix hj"> + </strong>。</li><li id="51b4" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">我们现在定义一个新的连接，一个SFTP连接应该可以，所以选择<strong class="ix hj"> <em class="km"> SFTP </em> </strong></li><li id="fd61" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">输入<strong class="ix hj">主机</strong>信息，这是远程机器的IP地址，如xx.xx.xx.xx</li><li id="4231" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">将端口加注为22</li><li id="0cde" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">输入用户名，是<em class="km">ssh</em><strong class="ix hj">T5】用户名 </strong> <em class="km"> @xx.xx.xx.xx </em>(当你尝试通过终端连接时记住这个命令)</li><li id="4ff0" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">如果使用密码访问服务器，选择<strong class="ix hj"> <em class="km">认证</em> </strong>作为<strong class="ix hj"> <em class="km">密码</em> </strong>。在密码部分输入您的<strong class="ix hj"> <em class="km">密码</em> </strong>。</li><li id="31b3" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">如果您使用PEM访问，请选择适当的选项并映射您的PEM路径。</li><li id="c8a6" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">现在<em class="km">测试连接</em>，如果成功，就可以开始了。</li><li id="dbd6" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">现在我们将指定根路径，这里有一些根映射的提示:</li></ul><p id="62b1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这个阶段要小心，因为我们构建的所有映射都将建立在root之上。这是至关重要的，因为pyCharm是关于同步 <strong class="ix hj"> <em class="km">右</em> </strong> <em class="km">文件夹的。</em></p><p id="0ccf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="km"> &gt;如果你的解释器驻留在项目之外的一个文件夹中(这是正确的方法)，你可能想把这个文件夹，也就是</em> <strong class="ix hj"> <em class="km">父</em> </strong> <em class="km">映射到你的项目和解释器。下面是一个带有实际项目结构的样例根。</em></p><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es lx"><img src="../Images/24efd2aa1faa755fb328f9f3c1bed31e.png" data-original-src="https://miro.medium.com/v2/resize:fit:722/format:webp/1*K8T8LwshLD0j7GzpCDuFwg.png"/></div></figure><ul class=""><li id="88df" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">所以映射适合自己的根路径。</li><li id="4157" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">将<strong class="ix hj"> web服务器</strong>的网址填写为<a class="ae iu" href="http://xx.xx.xx/" rel="noopener ugc nofollow" target="_blank"> http://xx.xx.xx </a></li></ul><h2 id="699b" class="ly kv hi bd kw lz ma mb la mc md me le jg mf mg li jk mh mi lm jo mj mk lq ml bi translated">设置映射</h2><p id="6070" class="pw-post-body-paragraph iv iw hi ix b iy ls ja jb jc lt je jf jg mm ji jj jk mn jm jn jo mo jq jr js hb bi translated">不要关闭最近的窗口，我们将继续操作。</p><ul class=""><li id="903f" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">打开下一个选项卡<strong class="ix hj">映射</strong></li><li id="59b9" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">填充部署路径。部署路径是remote中项目的根文件夹，它是上面项目根的相对路径。</li><li id="b65c" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">本地路径是绝对路径，它是本地计算机中的目录，这是您将与远程路径同步的位置。</li><li id="6337" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">我们将增加一个映射，它是解释器。我们将把本地解释器的路径映射到远程。我个人的建议是每次都用virtualenvs。关于virtuelanvs的更多信息，你可以阅读我的博客文章。所以你唯一要做的就是将本地路径(<code class="du mp mq mr ms b">C:\\Users\imauser\someplace\envs|env-of-the-project</code>)映射到远程解释器(<code class="du mp mq mr ms b">\envs\env-of-the-project-on-remote</code>)。回想一下，本地路径是绝对路径，远程路径是相对路径。</li></ul><blockquote class="mt mu mv"><p id="b983" class="iv iw km ix b iy iz ja jb jc jd je jf mw jh ji jj mx jl jm jn my jp jq jr js hb bi translated"><em class="hi">映射解释器将使包管理变得更加容易，<br/>因此您不必通过ssh连接服务器并在那里安装包，您可以简单地使用pyCharm的包管理接口来这样做。</em></p></blockquote></div><div class="ab cl kn ko gp kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hb hc hd he hf"><h1 id="fa1e" class="ku kv hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">你在皮查姆之后的生活</h1><ul class=""><li id="6bd7" class="jt ju hi ix b iy ls jc lt jg lu jk lv jo lw js jy jz ka kb bi translated">因此，现在您可以轻松地在remote上使用pyCharm，就像在本地机器上编码一样。</li><li id="1ecd" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">每次您在文件中进行更改并保存(Ctrl+s)时，pyCharm会自动将您的本地更改上传到遥控器。</li><li id="9786" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">如果您认为自动上传功能不正常，您可以使用<strong class="ix hj">工具</strong> &gt; <strong class="ix hj">部署</strong>部分中的<strong class="ix hj"> <em class="km">部署</em> </strong>实用程序。</li><li id="40bf" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">如果你想在remote上看看你的项目里面有什么，你可以使用<strong class="ix hj">工具</strong> &gt; <strong class="ix hj">部署</strong> &gt; <strong class="ix hj">浏览Remote Hos </strong> t，就像一个文件浏览器一样舒适。</li><li id="675c" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">此外，您可以通过在左侧的<strong class="ix hj"> <em class="km">项目浏览器</em> </strong>和右侧的<strong class="ix hj"> <em class="km">浏览远程主机工具箱</em> </strong>之间拖动文件来下载/上传文件。</li></ul><p id="8109" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这很容易。</p></div><div class="ab cl kn ko gp kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hb hc hd he hf"><h1 id="1652" class="ku kv hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">如何通过pyCharm远程运行Jupyter笔记本</h1><p id="4570" class="pw-post-body-paragraph iv iw hi ix b iy ls ja jb jc lt je jf jg mm ji jj jk mn jm jn jo mo jq jr js hb bi translated">这个标题对我来说是梦想成真。如果你正在进行一次性分析，并且你急着处理数据，笔记本是很好的选择。它们也非常适合为你的项目制作原型。对于前面提到的所有东西，Jupyter接受你混乱的代码，并且不会批评它所有的逻辑错误、打字错误等等。但是当涉及到基于你的原型从零开始实现一个项目时，事情可能会变得很糟糕，事实证明pyCharm责备你的方式毕竟是必需的。Jupyter lab和notebook都没有为您提供pyCharm能够呈现和编辑的指导。用他们的py文件真的很尴尬。从web浏览器复制+粘贴到pyCharm会让人不舒服，而且Jupyter不允许您在依赖项之间跳转，这使您无法高效地构建项目。虽然我觉得我雄心勃勃地试图说服你使用pyCharm，但我相信那些遭受同样问题的人会有同感。</p><p id="735b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">那么，让我们把手弄脏吧。</p></div><div class="ab cl kn ko gp kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hb hc hd he hf"><h1 id="a706" class="ku kv hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">通过pyCharm运行Jupyter笔记本的方法</h1><p id="92ed" class="pw-post-body-paragraph iv iw hi ix b iy ls ja jb jc lt je jf jg mm ji jj jk mn jm jn jo mo jq jr js hb bi translated">最初的几个步骤将与您尝试使用Jupyter进行远程连接时完全相同。</p><ul class=""><li id="e0fc" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">连接到远程服务器，如果给你用户名、密码和IP地址，你可以使用ssh。</li><li id="d0e0" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated"><code class="du mp mq mr ms b">$ ssh username@xx.xx.xx.xx</code></li><li id="4bfd" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">激活你的虚拟环境。对于python-virtualenv，您可以使用:</li><li id="d016" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated"><code class="du mp mq mr ms b">$ source ~/envs/env-myenv/bin/activate</code></li><li id="b5b5" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">有关环境的更多信息，请参考我的<a class="ae iu" rel="noopener" href="/@pinareceaktan/what-is-this-virtual-environments-in-python-and-why-anyone-ever-needs-them-7e3e682f9d2">博客文章</a>。</li><li id="2ef4" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">Cd放入项目的工作目录。</li><li id="051b" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated"><code class="du mp mq mr ms b">$ cd ~/repos/my_project</code></li><li id="1d8d" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">启用jupyter连接</li><li id="ec49" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated"><code class="du mp mq mr ms b">$ jupyter lab --no-browser --port=8890</code></li></ul><p id="aa1e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以使用任何有效的端口。我就是喜欢8890。</p><ul class=""><li id="0086" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">建立连接后，复制连接令牌和URL。类似于下面的例子:<br/> <code class="du mp mq mr ms b">http://127.0.0.1:8890/?token=lalalalalalallalalalalallalalalalalallalalalalal</code></li><li id="b69d" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">打开一个额外的终端窗口，从您的本地机器只需输入</li><li id="518a" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated"><code class="du mp mq mr ms b">$ ssh -N -f -L localhost:8888:localhost:8890 username@xx.xx.xx.xx</code></li><li id="0fa4" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">打开pyCharm并创建一个。ipynb文件或只是打开一个现有的。</li><li id="8c98" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">从ipynb文件的顶部标签打开<code class="du mp mq mr ms b">Configure Jupyter Server</code>。</li><li id="8e9d" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">我们现在将创建一个已配置的服务器，因为远程服务器是已配置的服务器，而本地服务器是被管理的服务器。</li></ul><blockquote class="mt mu mv"><p id="b219" class="iv iw km ix b iy iz ja jb jc jd je jf mw jh ji jj mx jl jm jn my jp jq jr js hb bi translated">为了在pyCharm-Jupyter工具中使用本地解释器，您可以使用托管服务器并选择您的本地解释器。<br/>但是请注意，使用本地解释器并不能提供速度或者<br/>无论你首先使用远程机器<br/>的原因是什么。</p></blockquote><ul class=""><li id="349f" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">用刚刚复制的令牌路径填充<code class="du mp mq mr ms b">configured server</code>。但是这次写下远程机器的IP，而不是127.0.0.1。正如:<br/> <code class="du mp mq mr ms b">http://xx.xx.xx.xx:8890/?token=lalalalalalallalalalalallalalalalalallalalalalal</code></li><li id="9141" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">点击<strong class="ix hj">应用</strong>并退出。</li><li id="7cdd" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">现在，单击blob图标启动服务器。</li></ul><blockquote class="mt mu mv"><p id="19f9" class="iv iw km ix b iy iz ja jb jc jd je jf mw jh ji jj mx jl jm jn my jp jq jr js hb bi translated">pyCharm-Jupyter中的大多数快捷方式与Jupyter笔记本中的相同。<br/>例如，为了运行一个单元格你可以使用(shift+enter)。</p><p id="22b9" class="iv iw km ix b iy iz ja jb jc jd je jf mw jh ji jj mx jl jm jn my jp jq jr js hb bi translated">关于快捷方式的更多信息，请使用工具箱或访问pyCharm官方文档。</p></blockquote></div></div>    
</body>
</html>