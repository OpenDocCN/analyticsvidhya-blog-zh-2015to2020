<html>
<head>
<title>How to Create a Fully Functional E-commerce Website with Django</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Django创建一个功能齐全的电子商务网站</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-create-fully-functional-e-commerce-website-with-django-c95b46973b0?source=collection_archive---------1-----------------------#2020-02-11">https://medium.com/analytics-vidhya/how-to-create-fully-functional-e-commerce-website-with-django-c95b46973b0?source=collection_archive---------1-----------------------#2020-02-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="7483" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">第2步，共5步:订购</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/6fc134ba6f76d6e1138bdb2fe3143e57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nnmReMTx0I47i2-kzdG0Lw.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated"><a class="ae jn" href="https://www.shuup.com/wp-content/uploads/2017/12/python-plus-django-1.jpg" rel="noopener ugc nofollow" target="_blank">https://www . shuup . com/WP-content/uploads/2017/12/python-plus-django-1 . jpg</a></figcaption></figure><h1 id="2b2c" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">先决条件</h1><ul class=""><li id="5ea4" class="kg kh hi ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">Django最新版本</li><li id="12f9" class="kg kh hi ki b kj ky kl kz kn la kp lb kr lc kt ku kv kw kx bi translated">Anaconda(可选)创建虚拟环境</li><li id="d7b9" class="kg kh hi ki b kj ky kl kz kn la kp lb kr lc kt ku kv kw kx bi translated">Visual Studio代码(可选)广告代码编辑器</li></ul><p id="ee34" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">在开始本教程之前，不要忘记激活您的虚拟环境，以及我们在上一个教程中创建的项目。如果你没有，你可以在这里下载:</p><div class="ls lt ez fb lu lv"><a href="https://github.com/Andika7/DjangoEcommerce/tree/dd22c575aaad4c859b02bc098de93a5264d3dcc8" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab dw"><div class="lx ab ly cl cj lz"><h2 class="bd hj fi z dy ma ea eb mb ed ef hh bi translated">安集卡7/DjangoEcommerce</h2><div class="mc l"><h3 class="bd b fi z dy ma ea eb mb ed ef dx translated">在GitHub上创建一个帐户，为Andika7/DjangoEcommerce的发展做出贡献。</h3></div><div class="md l"><p class="bd b fp z dy ma ea eb mb ed ef dx translated">github.com</p></div></div><div class="me l"><div class="mf l mg mh mi me mj jh lv"/></div></div></a></div><h1 id="8c0e" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">A.在模型中创建数据库</h1><p id="13bf" class="pw-post-body-paragraph ld le hi ki b kj kk ij lg kl km im li kn mk lk ll kp ml ln lo kr mm lq lr kt hb bi translated">在我们开始点菜之前。首先要做的是创建一个存储订单数据的数据库</p><p id="8d33" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">首先，我们将制作3个数据表，即:<br/> - <strong class="ki hj">条目</strong>将存储产品数据<br/> - <strong class="ki hj">订单条目</strong>将存储您想要订购的产品数据<br/> - <strong class="ki hj">订单</strong>将存储订单信息</p><p id="62a0" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">为了在Django框架中创建一个数据库，我们将使用核心目录中的<strong class="ki hj"> <em class="mn"> models.py </em> </strong>文件，用您的代码编辑器打开该文件并继续本教程。</p><ol class=""><li id="6bc1" class="kg kh hi ki b kj lf kl lh kn mo kp mp kr mq kt mr kv kw kx bi translated">导入</li></ol><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="8f0c" class="mx jp hi mt b fi my mz l na nb">from django.conf import settings<br/>from django.db import models<br/>from django.shortcuts import reverse</span></pre><p id="e8f5" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">2.添加项目模型</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nc nd l"/></div></figure><p id="0067" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">在项目模型中，您会看到有3个额外的功能，这些功能包括:</p><ul class=""><li id="af2d" class="kg kh hi ki b kj lf kl lh kn mo kp mp kr mq kt ku kv kw kx bi translated"><strong class="ki hj"> get_absolute_url </strong>将从产品返回url</li><li id="a9e0" class="kg kh hi ki b kj ky kl kz kn la kp lb kr lc kt ku kv kw kx bi translated"><strong class="ki hj"> get_add_to_cart_url </strong>将返回url到我们将创建的views.py文件中的函数add item to cart</li><li id="45b5" class="kg kh hi ki b kj ky kl kz kn la kp lb kr lc kt ku kv kw kx bi translated"><strong class="ki hj">get _ remove _ from _ cart _ url</strong>将返回URL，以便在我们将要创建的views.py文件中执行从购物车中删除商品的功能</li></ul><p id="0e4a" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">3.添加订单项模型</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nc nd l"/></div></figure><p id="fe8b" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">OrderItem存储您想要订购的产品的数据以及产品的数量</p><p id="8803" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">4.添加订单模型</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nc nd l"/></div></figure><p id="92d9" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated"><strong class="ki hj">订单</strong>模型将存储所下订单的详细信息，但在本教程的这一部分，我们不会显示完整的订单信息，我们将在下一部分添加另一个字段。</p><p id="2cba" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">5.向管理员注册数据库</p><p id="b3aa" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">使用代码编辑器打开core/admin.py文件，并填入以下代码:</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="d8ee" class="mx jp hi mt b fi my mz l na nb">from django.contrib import admin<br/>from .models import Item, OrderItem, Order </span><span id="d1ce" class="mx jp hi mt b fi ne mz l na nb">admin.site.register(Item)<br/>admin.site.register(OrderItem)<br/>admin.site.register(Order)</span></pre><p id="e297" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">这将在管理页面上注册您的数据库。你可以稍后在管理页面查看</p><p id="01f6" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">6 .迁移模型数据库</p><p id="b27a" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">使用以下命令迁移您的模型数据库:</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="9eef" class="mx jp hi mt b fi my mz l na nb">$ python manage.py migrate<br/>$ python manage.py makemigrations</span></pre><p id="70d8" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">完整的models.py代码可以在以下链接中看到:</p><div class="ls lt ez fb lu lv"><a href="https://github.com/Andika7/DjangoEcommerce/blob/88aecdce1341d871acdfb4b19add1b497170c634/core/models.py" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab dw"><div class="lx ab ly cl cj lz"><h2 class="bd hj fi z dy ma ea eb mb ed ef hh bi translated">安集卡7/DjangoEcommerce</h2><div class="mc l"><h3 class="bd b fi z dy ma ea eb mb ed ef dx translated">在GitHub上创建一个帐户，为Andika7/DjangoEcommerce的发展做出贡献。</h3></div><div class="md l"><p class="bd b fp z dy ma ea eb mb ed ef dx translated">github.com</p></div></div><div class="me l"><div class="nf l mg mh mi me mj jh lv"/></div></div></a></div><h1 id="6c2f" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">B.管理视图</h1><p id="148f" class="pw-post-body-paragraph ld le hi ki b kj kk ij lg kl km im li kn mk lk ll kp ml ln lo kr mm lq lr kt hb bi translated">我们已经创建了一个数据库，现在轮到我们来管理和管理我们的视图。我们将创建两个视图，即<strong class="ki hj"> HomeView </strong>和<strong class="ki hj"> ProductView </strong>以及两个函数，即<strong class="ki hj"> add_to_cart() </strong>和<strong class="ki hj"> remove_from_cart() </strong>。要继续，请打开core/views.py并继续以下教程</p><ol class=""><li id="dd7f" class="kg kh hi ki b kj lf kl lh kn mo kp mp kr mq kt mr kv kw kx bi translated">导入</li></ol><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="c867" class="mx jp hi mt b fi my mz l na nb">from django.contrib import messages                       <br/>from django.shortcuts import render, get_object_or_404, redirect                      <br/>from django.views.generic import ListView, DetailView                      <br/>from django.utils import timezone                       <br/>from .models import (                           <br/>    Item,<br/>    Order,<br/>    OrderItem<br/>)</span></pre><p id="8d7b" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">将我们之前创建的所有模型类导入views.py</p><p id="a775" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">2.添加主页视图</p><p id="f390" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">在前一篇教程文章中，我们创建了一个home函数来显示一个视图。删除home函数并将其更改为Class View this:</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="7189" class="mx jp hi mt b fi my mz l na nb">class HomeView(ListView):<br/>    model = Item<br/>    template_name = "home.html</span></pre><p id="e095" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">我们使用项目模型作为家庭模型，home.html作为模板视图。home.html可以在模板目录中找到</p><p id="eb90" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">3.添加产品视图</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="48a1" class="mx jp hi mt b fi my mz l na nb">class ProductView(DetailView):<br/>    model = Item<br/>    template_name = "product.html"</span></pre><p id="55df" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">我们使用项目模型作为家庭模型，product.html作为模板视图。product.html可以在模板目录中找到</p><p id="1f95" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">4.<strong class="ki hj">添加购物车()</strong>函数</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nc nd l"/></div></figure><p id="04e1" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">此功能将把您的产品添加到orderItem数据库，并将详细订单添加到Order数据库</p><p id="0811" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">5.<strong class="ki hj"> remove_from_cart() </strong>函数</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nc nd l"/></div></figure><p id="59e5" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">此功能将从OrderItem数据库中删除您的所有产品，并从订单数据库中删除详细订单</p><p id="9585" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">6.更新您的模板目录</p><p id="a64b" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">在模板目录中，我们做了一些修改。因此，请从以下链接更新您的模板目录:</p><div class="ls lt ez fb lu lv"><a href="https://github.com/Andika7/DjangoEcommerce/tree/88aecdce1341d871acdfb4b19add1b497170c634/templates" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab dw"><div class="lx ab ly cl cj lz"><h2 class="bd hj fi z dy ma ea eb mb ed ef hh bi translated">安集卡7/DjangoEcommerce</h2><div class="mc l"><h3 class="bd b fi z dy ma ea eb mb ed ef dx translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="md l"><p class="bd b fp z dy ma ea eb mb ed ef dx translated">github.com</p></div></div><div class="me l"><div class="ng l mg mh mi me mj jh lv"/></div></div></a></div><h1 id="6f75" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">C.管理URL</h1><p id="9f9c" class="pw-post-body-paragraph ld le hi ki b kj kk ij lg kl km im li kn mk lk ll kp ml ln lo kr mm lq lr kt hb bi translated">视图完成后，url将被管理，视图将在浏览器中显示。打开您的core/urls.py文件，并用下面的代码填充:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nc nd l"/></div></figure><p id="f17a" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">导入所有视图类和函数，并为每个视图添加url。</p><h1 id="3a60" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">D.演示应用程序</h1><ol class=""><li id="abb9" class="kg kh hi ki b kj kk kl km kn ko kp kq kr ks kt mr kv kw kx bi translated">使用以下命令运行您的服务器:</li></ol><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="401b" class="mx jp hi mt b fi my mz l na nb">$ python manage.py runserver</span></pre><p id="cc15" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">2.打开<a class="ae jn" href="http://127.0.0.1:8000/" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:8000/ </a>选择一个产品，如果没有产品可以在管理页面添加</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nh"><img src="../Images/c8e55eb153ac3ab0f9e513777e045fd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pwGEbrNO_dAk_r982GGt4w.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">项目数据库</figcaption></figure><p id="2d9e" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">3.单击产品页面中的添加到购物车按钮，您将看到产品将添加到您的订单项和订单数据库中</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nh"><img src="../Images/306ee3600c05b1383adc8343e35011f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ENGkN_tAQRTAnNOReKUGAg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">订单数据库</figcaption></figure><p id="dd2e" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">4.单击“从购物车中删除”按钮删除您当前的订单。它将从数据库order和order item中删除订单项</p><p id="6194" class="pw-post-body-paragraph ld le hi ki b kj lf ij lg kl lh im li kn lj lk ll kp lm ln lo kr lp lq lr kt hb bi translated">为此，已经实现了创建订单的功能</p><h1 id="b90d" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">完成源代码这一部分:</h1><div class="ls lt ez fb lu lv"><a href="https://github.com/Andika7/DjangoEcommerce/tree/88aecdce1341d871acdfb4b19add1b497170c634" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab dw"><div class="lx ab ly cl cj lz"><h2 class="bd hj fi z dy ma ea eb mb ed ef hh bi translated">安集卡7/DjangoEcommerce</h2><div class="mc l"><h3 class="bd b fi z dy ma ea eb mb ed ef dx translated">在GitHub上创建一个帐户，为Andika7/DjangoEcommerce的发展做出贡献。</h3></div><div class="md l"><p class="bd b fp z dy ma ea eb mb ed ef dx translated">github.com</p></div></div><div class="me l"><div class="ni l mg mh mi me mj jh lv"/></div></div></a></div><h1 id="cb32" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">进行下一部分！</h1><p id="f2b6" class="pw-post-body-paragraph ld le hi ki b kj kk ij lg kl km im li kn mk lk ll kp ml ln lo kr mm lq lr kt hb bi translated">我希望本教程的第二部分对你有所帮助。在下一节课中，我们将在购物车中进行订单汇总。</p></div></div>    
</body>
</html>