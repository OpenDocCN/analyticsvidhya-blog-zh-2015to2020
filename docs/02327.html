<html>
<head>
<title>Making sense of Stream Data with AWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用AWS理解流数据</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/making-sense-of-stream-data-with-aws-954de8d542d?source=collection_archive---------12-----------------------#2019-12-11">https://medium.com/analytics-vidhya/making-sense-of-stream-data-with-aws-954de8d542d?source=collection_archive---------12-----------------------#2019-12-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/9a32a23fd07a1b83848df366301e1452.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*xeZhvqsXvI2krEYut4uI3A.jpeg"/></div></figure><p id="83a1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这篇文章是<a class="ae jk" rel="noopener" href="/@ankushkhanna1988/making-sense-of-stream-data-b74c1252a8f5">在本地理解</a>的数据流的延续。</p><p id="40f9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这篇博客中，我将向你展示如何使用胶水和Quicksights用Kafka一步一步地构建分析仪表板。</p></div><div class="ab cl jl jm gp jn" role="separator"><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq"/></div><div class="hb hc hd he hf"><h1 id="8538" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">自动警报系统</h1><p id="31d8" class="pw-post-body-paragraph im in hi io b ip kq ir is it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj hb bi translated"><a class="ae jk" href="https://aws.amazon.com/what-is-aws/" rel="noopener ugc nofollow" target="_blank">亚马逊网络服务</a>是亚马逊提供多种服务的云平台。如果您没有AWS帐户，您可以在这里<a class="ae jk" href="https://aws.amazon.com/free/" rel="noopener ugc nofollow" target="_blank">创建一个。我正在使用AWS </a>的所有<a class="ae jk" href="https://aws.amazon.com/free/?all-free-tier.sort-by=item.additionalFields.SortRank&amp;all-free-tier.sort-order=asc" rel="noopener ugc nofollow" target="_blank">自由层特性。</a></p><p id="73f9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">要关注这个博客，你需要AWS访问权限和一个密钥。请查看以下<a class="ae jk" href="https://aws.amazon.com/blogs/security/wheres-my-secret-access-key/" rel="noopener ugc nofollow" target="_blank">步骤</a>了解如何获得一个。</p></div><div class="ab cl jl jm gp jn" role="separator"><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq"/></div><div class="hb hc hd he hf"><h1 id="4c84" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">体系结构</h1><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es kv"><img src="../Images/4a35e5885d2e7f458547d51e84e0c56e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bbo96AJ0Xy64zoYm0UEVSw.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">体系结构</figcaption></figure><p id="177b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我将使用来自我个人<a class="ae jk" href="https://www.google.com/maps/timeline?pb" rel="noopener ugc nofollow" target="_blank"> google timeline </a>的数据，你可以在这里查看代码<a class="ae jk" href="https://github.com/AnkushKhanna/kafka-google-timeline" rel="noopener ugc nofollow" target="_blank">关于如何将google timeline数据(通过kml文件)发布到Kafka。</a></p></div><div class="ab cl jl jm gp jn" role="separator"><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq"/></div><div class="hb hc hd he hf"><h1 id="71b6" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">卡夫卡</h1><h2 id="2c90" class="li jt hi bd ju lj lk ll jy lm ln lo kc ix lp lq kg jb lr ls kk jf lt lu ko lv bi translated">在本地运行Kafka</h2><p id="aed3" class="pw-post-body-paragraph im in hi io b ip kq ir is it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj hb bi translated">您可以使用<a class="ae jk" href="https://www.confluent.io/download/plans/" rel="noopener ugc nofollow" target="_blank">汇合平台</a>在本地运行Kafka。下载tar文件后，您可以解压缩它，并遵循以下命令:</p><pre class="kw kx ky kz fd lw lx ly lz aw ma bi"><span id="238f" class="li jt hi lx b fi mb mc l md me">&gt; export AWS_ACCESS_KEY=*********<br/>&gt; export AWS_SECRET_KEY=*********<br/>&gt; cd confluent-5.2.1/bin<br/>&gt; ./confluent start<br/>This CLI is intended for development only, not for production<br/><a class="ae jk" href="https://docs.confluent.io/current/cli/index.html" rel="noopener ugc nofollow" target="_blank">https://docs.confluent.io/current/cli/index.html</a></span><span id="6482" class="li jt hi lx b fi mf mc l md me">Starting zookeeper<br/>zookeeper is [UP]<br/>Starting kafka<br/>kafka is [UP]<br/>Starting schema-registry<br/>schema-registry is [UP]<br/>Starting kafka-rest<br/>kafka-rest is [UP]<br/>Starting connect<br/>connect is [UP]<br/>Starting ksql-server<br/>ksql-server is [UP]<br/>Starting control-center<br/>control-center is [UP]</span></pre><p id="28d4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">请导出上面生成的<strong class="io hj"> AWS_ACCESS_KEY </strong>和<strong class="io hj"> AWS_SECRET_KEY </strong>。</p></div><div class="ab cl jl jm gp jn" role="separator"><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq"/></div><div class="hb hc hd he hf"><h1 id="b5f9" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">卡夫卡连接</h1><p id="d31a" class="pw-post-body-paragraph im in hi io b ip kq ir is it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj hb bi translated">Kafka connect允许我们从Kafka提取数据或向Kafka推送数据。有很多Kafka接口可供选择，你可以在https://www.confluent.io/hub/<a class="ae jk" href="https://www.confluent.io/hub/" rel="noopener ugc nofollow" target="_blank">找到。在本教程中，我们将使用S3接收器连接器将Kafka流数据推送到S3。</a></p><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es mg"><img src="../Images/23bbc87aa6a6e9443221109c7076550d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ht5AixOb2JTH5a5ZepQLfQ.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated"><a class="ae jk" href="https://www.confluent.io/" rel="noopener ugc nofollow" target="_blank">https://www.confluent.io/</a></figcaption></figure><h2 id="eff2" class="li jt hi bd ju lj lk ll jy lm ln lo kc ix lp lq kg jb lr ls kk jf lt lu ko lv bi translated">卡夫卡连接S3</h2><p id="13a3" class="pw-post-body-paragraph im in hi io b ip kq ir is it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj hb bi translated">我们将使用<code class="du mh mi mj lx b">io.confluent.connect.s3.S3SinkConnector</code>。使用下面的命令，我们可以通过向我们的Kafka connect集群发送http POST请求来运行Kafka到S3连接器:</p><pre class="kw kx ky kz fd lw lx ly lz aw ma bi"><span id="91c3" class="li jt hi lx b fi mb mc l md me">curl -X POST <a class="ae jk" href="http://localhost:8083/connectors" rel="noopener ugc nofollow" target="_blank">http://localhost:8083/connectors</a> -H "Content-Type: application/json" -d '<br/>{<br/>  "name": "google_timeline_connector_s3",<br/>  "config": {<br/>    "connector.class": "io.confluent.connect.s3.S3SinkConnector",<br/>    "tasks.max": "1",<br/>    "topics": "google_history_trip_s3",<br/>    "s3.region": "eu-central-1",<br/>    "s3.bucket.name": "kafkaoffload",<br/>    "s3.part.size": "26214400",<br/>    "flush.size": "100",<br/>    "enhanced.avro.schema.support": "true",<br/>    "partition.duration.ms": "60000",<br/>    "locale": "UTC",<br/>    "timezone": "UTC",<br/>    "storage.class": "io.confluent.connect.s3.storage.S3Storage",<br/>    "schema.generator.class": "io.confluent.connect.storage.hive.schema.DefaultSchemaGenerator",<br/>    "partitioner.class": "io.confluent.connect.storage.partitioner.TimeBasedPartitioner",<br/>    "partition.field.name":"start_time",<br/>    "schema.compatibility": "FULL_TRANSITIVE",<br/>    "timestamp.extractor": "RecordField",<br/>    "timestamp.field": "start_time",<br/>    "path.format": "YYYY-MM-dd",<br/>    "rotate.schedule.interval.ms": "60000",<br/>    "format.class": "io.confluent.connect.s3.format.avro.AvroFormat",<br/>    "value.converter": "io.confluent.connect.avro.AvroConverter",<br/>    "value.converter.schema.registry.url": "http://localhost:8081",<br/>    "key.converter": "io.confluent.connect.avro.AvroConverter",<br/>    "key.converter.schema.registry.url": "http://localhost:8081"<br/>  }<br/>}'</span></pre><p id="df8d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">重要属性:</p><ul class=""><li id="2e2e" class="mk ml hi io b ip iq it iu ix mm jb mn jf mo jj mp mq mr ms bi translated"><code class="du mh mi mj lx b">s3.bucket.name</code> : <code class="du mh mi mj lx b">kafkaoffload</code>，我的S3桶名(在AWS web控制台创建一个S3桶)</li><li id="dd76" class="mk ml hi io b ip mt it mu ix mv jb mw jf mx jj mp mq mr ms bi translated"><code class="du mh mi mj lx b">partitioner.class</code> : <code class="du mh mi mj lx b">TimeBasedPartitioner</code>，根据日期时间对数据进行分区</li><li id="4dfb" class="mk ml hi io b ip mt it mu ix mv jb mw jf mx jj mp mq mr ms bi translated"><code class="du mh mi mj lx b">timestamp.extractor</code> : <code class="du mh mi mj lx b">RecordField</code>，使用记录值内的一个字段</li><li id="dec5" class="mk ml hi io b ip mt it mu ix mv jb mw jf mx jj mp mq mr ms bi translated"><code class="du mh mi mj lx b">timestamp.field</code> : <code class="du mh mi mj lx b">start_time</code>，使用start_time字段对数据进行分区</li></ul><p id="6823" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果您的用例或数据不同，请修改以上字段。你可以点击查看完整配置<a class="ae jk" href="https://docs.confluent.io/current/connect/kafka-connect-s3/configuration_options.html" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="ebcb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这应该会启动Kafka connect worker将数据卸载到s3。您可以使用<code class="du mh mi mj lx b"><a class="ae jk" href="http://localhost:8083/connectors/google_timeline_connector_s3/status" rel="noopener ugc nofollow" target="_blank">http://localhost:8083/connectors/google_timeline_connector_s3/status</a></code>检查连接器的状态</p></div><div class="ab cl jl jm gp jn" role="separator"><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq"/></div><div class="hb hc hd he hf"><h1 id="e08b" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">AWS胶水</h1><p id="522a" class="pw-post-body-paragraph im in hi io b ip kq ir is it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj hb bi translated">AWS Glue是一个完全托管的提取、转换和加载(ETL)服务，使客户能够更轻松地准备和加载他们的数据进行分析。它可以从S3抓取数据，并创建表格，将相关元数据存储在Glue数据目录中。一旦编目，您的数据立即可以搜索和查询。</p><h2 id="04e5" class="li jt hi bd ju lj lk ll jy lm ln lo kc ix lp lq kg jb lr ls kk jf lt lu ko lv bi translated">创建爬虫</h2><p id="ec85" class="pw-post-body-paragraph im in hi io b ip kq ir is it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj hb bi translated">使用AWS web控制台，搜索<code class="du mh mi mj lx b">AWS Glue</code></p><ul class=""><li id="8825" class="mk ml hi io b ip iq it iu ix mm jb mn jf mo jj mp mq mr ms bi translated">点击<code class="du mh mi mj lx b">Add crawler</code>可以添加爬虫</li></ul><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es my"><img src="../Images/cc1e0fdc286f7557b7252911c98f678f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pD6JnXHVVa9yTnNDnDC1HQ.png"/></div></div></figure><ul class=""><li id="fa36" class="mk ml hi io b ip iq it iu ix mm jb mn jf mo jj mp mq mr ms bi translated">指定S3路径</li></ul><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es mz"><img src="../Images/18f2f3ca6fc06920ff75ef42ab43456a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*73drdswdPI-OiwD46J1J4w.png"/></div></div></figure><ul class=""><li id="e57e" class="mk ml hi io b ip iq it iu ix mm jb mn jf mo jj mp mq mr ms bi translated">创建IAM角色</li></ul><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es na"><img src="../Images/f6d12dc8ee05118ff26574ea2a6697fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WGoDHMjc2hz0grMN9eq_5g.png"/></div></div></figure><ul class=""><li id="0858" class="mk ml hi io b ip iq it iu ix mm jb mn jf mo jj mp mq mr ms bi translated">添加数据库名称</li></ul><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es na"><img src="../Images/7b79ffee9a9373d5e3c325e44d81d9dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*klnMWzEzBqdxJkEBD2YNOQ.png"/></div></div></figure><ul class=""><li id="b0b4" class="mk ml hi io b ip iq it iu ix mm jb mn jf mo jj mp mq mr ms bi translated">一旦创建了爬虫，我们就可以使用<code class="du mh mi mj lx b">Run crawler</code>来运行爬虫</li></ul><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es na"><img src="../Images/63310cf2642ba329ad14d442ba1949df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E6g2hPk_qjS2VxPyfPLRUQ.png"/></div></div></figure><p id="edb5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这将开始在S3铲斗上爬行。可能需要几分钟来索引数据。</p><p id="34c5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您还可以安排crawler以特定的时间间隔运行。</p><h2 id="fdcb" class="li jt hi bd ju lj lk ll jy lm ln lo kc ix lp lq kg jb lr ls kk jf lt lu ko lv bi translated">粘合桌子</h2><ul class=""><li id="e6ce" class="mk ml hi io b ip kq it kr ix nb jb nc jf nd jj mp mq mr ms bi translated">一旦爬虫完成，你可以在AWS GLUE <code class="du mh mi mj lx b">Tables</code>部分看到一个表格</li></ul><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es mz"><img src="../Images/6485597cd1bd49d86977ede1bddad511.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7uXtOCP4ZwlDZMNiJVXvZQ.png"/></div></div></figure><ul class=""><li id="d2f4" class="mk ml hi io b ip iq it iu ix mm jb mn jf mo jj mp mq mr ms bi translated">如果需要，您可以编辑模式，如下所示</li></ul><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es na"><img src="../Images/0f74e4e9eb5fc926159fb83e9f7519e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AwrMnz4N2LxY3EGYKA800Q.png"/></div></div></figure><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es na"><img src="../Images/3e5b7e123fdd79cb3deabc0709b2cd7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nh5U30-9IjjJm03SD6lE4A.png"/></div></div></figure></div><div class="ab cl jl jm gp jn" role="separator"><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq"/></div><div class="hb hc hd he hf"><h1 id="3b2c" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">AWS QuickSight</h1><p id="ac08" class="pw-post-body-paragraph im in hi io b ip kq ir is it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj hb bi translated">完成AWS Glue后，您可以使用AWS QuickSight来深入了解您的数据。</p><h2 id="cfd9" class="li jt hi bd ju lj lk ll jy lm ln lo kc ix lp lq kg jb lr ls kk jf lt lu ko lv bi translated">设置</h2><p id="ffb0" class="pw-post-body-paragraph im in hi io b ip kq ir is it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj hb bi translated">转到AWS web控制台上的QuickSight</p><ul class=""><li id="4371" class="mk ml hi io b ip iq it iu ix mm jb mn jf mo jj mp mq mr ms bi translated">装满<code class="du mh mi mj lx b">Create your QuickSight account</code></li></ul><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es na"><img src="../Images/84794182ccbf7881ed779c5d4d52e1bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dSqJn4r_X0gNKbW1-1fIRw.png"/></div></div></figure><ul class=""><li id="efcd" class="mk ml hi io b ip iq it iu ix mm jb mn jf mo jj mp mq mr ms bi translated">创建一个雅典娜<code class="du mh mi mj lx b">Data Set</code></li></ul><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es ne"><img src="../Images/60822770f57a2e71164f60e7a724b696.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*shTAin3YEhR4DaTJ31iiPg.png"/></div></div></figure><ul class=""><li id="8fe7" class="mk ml hi io b ip iq it iu ix mm jb mn jf mo jj mp mq mr ms bi translated">选择粘合台</li></ul><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es nf"><img src="../Images/fd97262e3304cc5045c102f7c757fb15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SvrDIsLn8jbsrqCAStnF7w.png"/></div></div></figure><h2 id="edc0" class="li jt hi bd ju lj lk ll jy lm ln lo kc ix lp lq kg jb lr ls kk jf lt lu ko lv bi translated">分析</h2><ul class=""><li id="482b" class="mk ml hi io b ip kq it kr ix nb jb nc jf nd jj mp mq mr ms bi translated">您可以检查名称的分布</li></ul><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es ng"><img src="../Images/b06e2216b9f49026749d78b54afbc6a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YfHadYbaOztla8jgINPprQ.png"/></div></div></figure><ul class=""><li id="23d9" class="mk ml hi io b ip iq it iu ix mm jb mn jf mo jj mp mq mr ms bi translated">你可以过滤掉不同的值，在这个例子中我已经过滤掉了<code class="du mh mi mj lx b">Driving</code>和<code class="du mh mi mj lx b">Walking</code></li></ul><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es na"><img src="../Images/d24e527ada7749477dd19a9fd3548a71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FGQUpXvTE7-BLgz2YoR7TA.png"/></div></div></figure><ul class=""><li id="66ed" class="mk ml hi io b ip iq it iu ix mm jb mn jf mo jj mp mq mr ms bi translated">您可以在图形上绘制<code class="du mh mi mj lx b">latitude</code>和<code class="du mh mi mj lx b">longitude</code></li></ul><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es na"><img src="../Images/fced790882921bc0b90a4cc100ccf068.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NOqgr7gmekQscdIxXb2Wlw.png"/></div></div></figure><ul class=""><li id="78e6" class="mk ml hi io b ip iq it iu ix mm jb mn jf mo jj mp mq mr ms bi translated">基于<code class="du mh mi mj lx b">partition_0</code>过滤掉</li></ul><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es ne"><img src="../Images/c6147acfb6b7a65b7baf63d462b5e14b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gu1SXc9ukj0FxZnUO7ZZBQ.png"/></div></div></figure></div><div class="ab cl jl jm gp jn" role="separator"><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq"/></div><div class="hb hc hd he hf"><h1 id="70f0" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">分区的作用</h1><p id="119e" class="pw-post-body-paragraph im in hi io b ip kq ir is it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj hb bi translated">当使用Athena或QuickSight读取S3时，分区过滤起着至关重要的作用。</p><p id="ae8e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果使用分区键进行过滤，则数据只能从相关文件夹中读取。否则，这是对s3存储桶的完整扫描，既慢又昂贵。</p></div><div class="ab cl jl jm gp jn" role="separator"><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq"/></div><div class="hb hc hd he hf"><h1 id="251b" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">基于列的文件格式</h1><p id="0b85" class="pw-post-body-paragraph im in hi io b ip kq ir is it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj hb bi translated">列存储文件格式优于基于行的文件格式。基本思想是，它不是将一行中的所有值存储在一起，而是将一列中的所有值存储在一起。这有助于加快每列查询的过滤速度，更适合压缩，更适合分析任务。</p><p id="8a88" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">目前，我们已经输出了Avro格式的数据。如果您希望加快查询速度，您可能会对使用<a class="ae jk" href="https://parquet.apache.org/" rel="noopener ugc nofollow" target="_blank"> parquet </a>作为文件格式感兴趣。你可以在这里跟随parquet kafka connect更新<a class="ae jk" href="https://github.com/confluentinc/kafka-connect-storage-cloud/pull/241" rel="noopener ugc nofollow" target="_blank">或者也可以使用Glue ETL将Avro文件转换成parquet。</a></p></div></div>    
</body>
</html>