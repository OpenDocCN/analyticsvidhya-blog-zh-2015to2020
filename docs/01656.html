<html>
<head>
<title>Using Statsmodels’ SARIMAX to Model Housing Data Pulled from Zillow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Statsmodels的SARIMAX对来自Zillow的房屋数据进行建模</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/using-statsmodels-sarimax-to-model-housing-data-pulled-from-zillow-c0cce905aaed?source=collection_archive---------11-----------------------#2019-11-06">https://medium.com/analytics-vidhya/using-statsmodels-sarimax-to-model-housing-data-pulled-from-zillow-c0cce905aaed?source=collection_archive---------11-----------------------#2019-11-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6e44" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">时间序列是一系列按时间顺序排列的数据点。以下时间序列数据来自邮政编码94621。如果你熟悉湾区，你可能会注意到这个邮政编码是在加利福尼亚州奥克兰。此时间序列包含从2013年7月到2018年4月94621中的房地产每月平均销售价格。</p><p id="9f20" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们来看看这段时间的数据:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/ec362b27be1da49755409f9327fd2467.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4mvlPLshIMjZ2Hwo3bsmkg.png"/></div></div></figure><p id="1512" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如你所看到的，房屋销售的平均价格已经翻了一倍多，大约140%的投资回报率。如果你不熟悉这个术语，ROI的公式是[(现价)——(原价)] /(原价)。你可以从视觉上对94621的未来价格得出许多结论和一些预测。另一种方法是使用Statsmodels的SARIMAX，即带有外生回归元的季节性自回归综合移动平均模型。</p><p id="ca22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你熟悉时间序列建模，你会发现我们的曲线基本上没有季节性。我将只输入p、d和q的值。要了解更多关于SARIMA模型的信息，请试试这个<a class="ae jp" href="https://machinelearningmastery.com/sarima-for-time-series-forecasting-in-python/" rel="noopener ugc nofollow" target="_blank">博客</a>。</p><pre class="je jf jg jh fd jq jr js jt aw ju bi"><span id="ada8" class="jv jw hi jr b fi jx jy l jz ka">ARIMA_MODEL = sm.tsa.statespace.SARIMAX(ts,<br/>                                        order=best_order,<br/>                                        enforce_stationarity=False,<br/>                                        enforce_invertibility=False)<br/> output = ARIMA_MODEL.fit()<br/> output.plot_diagnostics(figsize=(14,18))<br/> plt.gcf().autofmt_xdate()<br/> plt.show()</span></pre><p id="046c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">SARIMAX的两个主要组成部分是你放入的时间序列(ts)和(p，d，q)的顺序。在这个例子中，经过一些测试后，我发现(1，0，2)工作得足够好了(请随意询问我是如何获得这些值的)。诊断图如下所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kb"><img src="../Images/1400d291f3a40e79e4eb212bcdd447ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sFg9lz5LbY2mG5PwrZIAXw.png"/></div></div></figure><p id="c3e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这四个表格可以帮助您确定您的SARIMAX模型是否能够实际产生有意义的信息。所有的诊断图都有标题，您可以对每个图进行更多的研究，以查看它们到底显示了什么。但要知道，在这种情况下，他们通过了SARIMAX模型的所有假设。</p><pre class="je jf jg jh fd jq jr js jt aw ju bi"><span id="6919" class="jv jw hi jr b fi jx jy l jz ka">prediction = output.get_forecast(steps=60)<br/>pred_conf = prediction.conf_int()<br/> <br/>ax = df.plot(label=’observed’, figsize=(20, 15))<br/>prediction.predicted_mean.plot(ax=ax, label=’Forecast’)<br/>ax.fill_between(pred_conf.index,<br/>pred_conf.iloc[:, 0],<br/>pred_conf.iloc[:, 1], color=’k’, alpha=.25)<br/>ax.set_xlabel(‘Date’)<br/>ax.set_ylabel(‘Values’)</span><span id="6894" class="jv jw hi jr b fi kc jy l jz ka">plt.legend()<br/>plt.show()</span></pre><p id="209f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，每个人真正想从时间序列模型中得到的是——预测。上面的代码采用经过训练的模型，用它来预测未来五年，然后绘制这些信息:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kd"><img src="../Images/955d6fa5459c6d464bffc4de69668775.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fzuu3bmj8ltHjnqMX_3aQA.png"/></div></div></figure><p id="bafe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">黄线表示尚未看到的数据的预测值。线周围的灰色区域是不确定的圆锥体。正如你所看到的，这个模型预测未来五年这个地区的房价将会快速上涨。</p><p id="5243" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ARIMA或萨里玛建模只是时间序列的冰山一角，可以很快变得复杂得多。谁不想能够预测未来呢？</p><p id="dd6e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢你阅读这篇博文。如果您有任何问题或顾虑，请给我发消息。</p></div></div>    
</body>
</html>