<html>
<head>
<title>Python automate — get robinhood portfolio data and create data visualization for better insights</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python automate 获取 robinhood 产品组合数据并创建数据可视化以获得更好的见解</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/robinhood-my-stocks-tory-history-data-visualization-474e019d5e16?source=collection_archive---------6-----------------------#2020-10-07">https://medium.com/analytics-vidhya/robinhood-my-stocks-tory-history-data-visualization-474e019d5e16?source=collection_archive---------6-----------------------#2020-10-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/581158ffe7f36ebefa4f31e67dd5a526.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_m9j-BfK5rMNECdzzFiJqA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图像—我的罗宾汉仪表板</figcaption></figure></div><div class="ab cl iu iv gp iw" role="separator"><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz"/></div><div class="hb hc hd he hf"><h1 id="31e5" class="jb jc hi bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy bi translated">背景</h1><p id="3705" class="pw-post-body-paragraph jz ka hi kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">在 Covid 的情况下，我开始阅读多篇关于年轻一代开始做交易的文章，他们去的地方是使用一个简单的和<strong class="kb hj">佣金</strong> - <strong class="kb hj">免费</strong>应用程序— <a class="ae kx" href="https://robinhood.com/" rel="noopener ugc nofollow" target="_blank"> #Robinhood </a>所以我开始对股票市场和应用程序表现出兴趣，出于好奇注册并开始尝试只是为了得到一个想法，很快我意识到我只能看到一段时间内个股的表现，但<em class="ky">我无法分析或可视化我的股票历史</em>。因此，我开始探索和保存我的信息，这样我就可以看到我的股票趋势，以及我在某一天的股票历史表现。</p><h1 id="3e3c" class="jb jc hi bd jd je kz jg jh ji la jk jl jm lb jo jp jq lc js jt ju ld jw jx jy bi translated">使用:</h1><p id="0849" class="pw-post-body-paragraph jz ka hi kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">以下是#python 模块，主要用于从 robinhood 中提取数据，并将数据保存到数据库中，并使用这些数据可视化。</p><figure class="le lf lg lh fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><figure class="le lf lg lh fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><p id="4863" class="pw-post-body-paragraph jz ka hi kb b kc lk ke kf kg ll ki kj kk lm km kn ko ln kq kr ks lo ku kv kw hb bi translated">我将数据保存在 AWS RDS ( MySQL 数据库)中，但可以使用任何其他数据库甚至 sqlite3 本地数据库轻松保存。</p></div><div class="ab cl iu iv gp iw" role="separator"><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz"/></div><div class="hb hc hd he hf"><h1 id="1052" class="jb jc hi bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy bi translated">使用 API 提取/保存数据</h1><p id="435a" class="pw-post-body-paragraph jz ka hi kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">使用 robin_stocks 模块，我们可以连接到官方的 robinhood APIs，并在验证您的帐户后，我们可以提取数据。</p><p id="cf01" class="pw-post-body-paragraph jz ka hi kb b kc lk ke kf kg ll ki kj kk lm km kn ko ln kq kr ks lo ku kv kw hb bi translated">出于安全目的，robinhood 通过使用电子邮件/短信强制执行另一个级别的身份验证，它将在上述时间后过期。就我个人使用而言，我将它设置为 5 天，并且在我使用我的个人笔记本电脑时会每周重置一次。</p><figure class="le lf lg lh fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><p id="9a04" class="pw-post-body-paragraph jz ka hi kb b kc lk ke kf kg ll ki kj kk lm km kn ko ln kq kr ks lo ku kv kw hb bi translated">我们可以从与股票实际价格相关的 API 中提取大量信息，以及您的账户特定的交易信息。现在，我只是保存我需要跟踪我的股票的主要信息。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/0805a6b9343beeb9f63450ddf4da8a94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yc4hgEReAAW7vodiBPENWA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">使用 API 提取的样本数据和信息</figcaption></figure></div><div class="ab cl iu iv gp iw" role="separator"><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz"/></div><div class="hb hc hd he hf"><h1 id="3179" class="jb jc hi bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy bi translated">数据可视化/洞察</h1><p id="5f09" class="pw-post-body-paragraph jz ka hi kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">现在是实际的部分，我们使用提取的数据来了解我们的投资组合和股票是如何变魔术的。我知道有时它不会给你你所期望的东西，也就是你所拥有的每只股票都会给你回报。</p><figure class="le lf lg lh fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><h2 id="a605" class="lq jc hi bd jd lr ls lt jh lu lv lw jl kk lx ly jp ko lz ma jt ks mb mc jx md bi translated">股票 id 的时间与实际股票价格</h2><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/e3e9c099cc2e15413467a29681cdd3d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jrt2yNT3twgcmlC9CCinew.png"/></div></div></figure><p id="edb4" class="pw-post-body-paragraph jz ka hi kb b kc lk ke kf kg ll ki kj kk lm km kn ko ln kq kr ks lo ku kv kw hb bi translated">这只是一个基本的数据图表，我们可以使用任何股票信息网站来查看投资组合中的股票表现。在这里，我们从投资组合中取出所有股票，并观察一段时间内的价格变化。</p><figure class="le lf lg lh fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><p id="e98b" class="pw-post-body-paragraph jz ka hi kb b kc lk ke kf kg ll ki kj kk lm km kn ko ln kq kr ks lo ku kv kw hb bi translated">我们已经使用<strong class="kb hj"> plotly.express </strong>轻松创建所有股票的线图，并且<strong class="kb hj"> <em class="ky">我们可以轻松地与图形交互，放大到单个日期/股票，以获得更多信息</em> </strong>。</p><h2 id="0f09" class="lq jc hi bd jd lr ls lt jh lu lv lw jl kk lx ly jp ko lz ma jt ks mb mc jx md bi translated">时间与计数(个股/总量)</h2><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/643c0977c25e82f9e9c68e9fe41b55d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kcMpgjbwGKDDL3eppG_tYA.png"/></div></div></figure><p id="258e" class="pw-post-body-paragraph jz ka hi kb b kc lk ke kf kg ll ki kj kk lm km kn ko ln kq kr ks lo ku kv kw hb bi translated">生成此图是为了显示我们在一段时间内投资组合中每只股票的股票数量，因为我们通常倾向于买卖股票来平衡投资组合和损失。</p><figure class="le lf lg lh fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><p id="ab4e" class="pw-post-body-paragraph jz ka hi kb b kc lk ke kf kg ll ki kj kk lm km kn ko ln kq kr ks lo ku kv kw hb bi translated">对于这个柱状图，首先我们提取了数据，并根据单个交易日进行了计算，然后使用柱状图来显示在给定的某一天我们有多少只股票。</p><h2 id="f7e6" class="lq jc hi bd jd lr ls lt jh lu lv lw jl kk lx ly jp ko lz ma jt ks mb mc jx md bi translated">时间与权益(个股/总量)</h2><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/6cc789ec7aaccefebf0d49b47a74917c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O2Vvl4O7djsEe0OoyhCcYg.png"/></div></div></figure><p id="4c3e" class="pw-post-body-paragraph jz ka hi kb b kc lk ke kf kg ll ki kj kk lm km kn ko ln kq kr ks lo ku kv kw hb bi translated">这个数字会显示你在某一天在某一个股票级别上的投资金额。</p><figure class="le lf lg lh fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><p id="adb8" class="pw-post-body-paragraph jz ka hi kb b kc lk ke kf kg ll ki kj kk lm km kn ko ln kq kr ks lo ku kv kw hb bi translated">对于权益，我们也用条形图来显示每只股票对总权益的贡献。</p><h2 id="8ba8" class="lq jc hi bd jd lr ls lt jh lu lv lw jl kk lx ly jp ko lz ma jt ks mb mc jx md bi translated">时间与权益变化(个股)</h2><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/8403b7fe97779854f20d552249d29279.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yl6Uhi1MpdHncUIM-WMG7w.png"/></div></div></figure><p id="58b0" class="pw-post-body-paragraph jz ka hi kb b kc lk ke kf kg ll ki kj kk lm km kn ko ln kq kr ks lo ku kv kw hb bi translated">在这个图中，我们从投资组合中捕捉到了每只股票在一天中的表现，比如这只股票当天的盈亏情况。</p><p id="4345" class="pw-post-body-paragraph jz ka hi kb b kc lk ke kf kg ll ki kj kk lm km kn ko ln kq kr ks lo ku kv kw hb bi translated">这将让你很好地了解哪一天你的股票通过结合所有的平均买入和卖出获得了更高的利润。</p><figure class="le lf lg lh fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><h2 id="8a49" class="lq jc hi bd jd lr ls lt jh lu lv lw jl kk lx ly jp ko lz ma jt ks mb mc jx md bi translated">股票的时间与实际和平均买入价格</h2><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mf"><img src="../Images/765ccd9c59a043a8fd712a7275d37b5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GTHJAamBxClRjo-1UNf5wg.png"/></div></div></figure><p id="e440" class="pw-post-body-paragraph jz ka hi kb b kc lk ke kf kg ll ki kj kk lm km kn ko ln kq kr ks lo ku kv kw hb bi translated">在所有的数字中，我相信这将提供更多关于每只股票的信息，实际股票在一段时间内的表现，以及该股票当天的平均价格。</p><p id="9d79" class="pw-post-body-paragraph jz ka hi kb b kc lk ke kf kg ll ki kj kk lm km kn ko ln kq kr ks lo ku kv kw hb bi translated">我使用了面积图来显示个别股票的实际价格变化，而这条线将显示投资组合中该股票的平均价格。</p><p id="b72c" class="pw-post-body-paragraph jz ka hi kb b kc lk ke kf kg ll ki kj kk lm km kn ko ln kq kr ks lo ku kv kw hb bi translated">有了这个，我们可以看看我们的投资组合在股票的实际市场上表现如何。</p></div><div class="ab cl iu iv gp iw" role="separator"><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz"/></div><div class="hb hc hd he hf"><h1 id="1948" class="jb jc hi bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy bi translated">使用 Dash 应用程序将所有数字合并到仪表板中</h1><p id="4405" class="pw-post-body-paragraph jz ka hi kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">现在是时候将所有的数字合并到一个完整的仪表板中了，这样我们就可以一次在一个地方查看数据。</p><p id="a671" class="pw-post-body-paragraph jz ka hi kb b kc lk ke kf kg ll ki kj kk lm km kn ko ln kq kr ks lo ku kv kw hb bi translated">对于实际价格和平均买价数字，我们使用 dash dependencies Input &amp; Output 从下拉列表中选择一只股票，并为所选股票创建实际和平均买价数字。</p><figure class="le lf lg lh fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure></div><div class="ab cl iu iv gp iw" role="separator"><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz"/></div><div class="hb hc hd he hf"><h1 id="8448" class="jb jc hi bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy bi translated">下一步是什么？？</h1><p id="3030" class="pw-post-body-paragraph jz ka hi kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">首先，随着数据的日益增加，这段代码可以得到显著改进，以获得更好的性能，我们可以使用过滤器进行限制，并利用捕获的数据创建更多见解。</p><p id="70ba" class="pw-post-body-paragraph jz ka hi kb b kc lk ke kf kg ll ki kj kk lm km kn ko ln kq kr ks lo ku kv kw hb bi translated">我只从 Robinhood 获取了股票信息。我们在应用程序中有其他投资方式，如期权，我们可以产生对股票期权的见解。</p><p id="1daa" class="pw-post-body-paragraph jz ka hi kb b kc lk ke kf kg ll ki kj kk lm km kn ko ln kq kr ks lo ku kv kw hb bi translated">我这样做只是为了个人使用，但是如果有人需要源代码，我很乐意分享。还没有更新 Git 中的代码，因为它需要一些最后的润色和代码清理！！！</p><blockquote class="mg"><p id="a5c3" class="mh mi hi bd mj mk ml mm mn mo mp kw dx translated"><em class="mq">附注:这里使用的数据已经过外推，以显示更好的可视化效果</em></p></blockquote></div><div class="ab cl iu iv gp iw" role="separator"><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz"/></div><div class="hb hc hd he hf"><p id="de93" class="pw-post-body-paragraph jz ka hi kb b kc lk ke kf kg ll ki kj kk lm km kn ko ln kq kr ks lo ku kv kw hb bi translated">我会暂时结束，你可以通过<a class="ae kx" href="https://www.linkedin.com/in/sandeep-gandra/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>联系我</p></div></div>    
</body>
</html>