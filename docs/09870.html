<html>
<head>
<title>CSV Data Importer Neo4j-Bigbang</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CSV数据导入程序Neo4j-Bigbang</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/csv-data-importer-neo4j-bigbang-3a144056fbe2?source=collection_archive---------13-----------------------#2020-09-23">https://medium.com/analytics-vidhya/csv-data-importer-neo4j-bigbang-3a144056fbe2?source=collection_archive---------13-----------------------#2020-09-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/db255998f572e47a40ae46c4652483c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t21Cwc3pxW0k2ReHgOmGCA.jpeg"/></div></div></figure><h1 id="d3fb" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">Neo4j-Bigbang是什么？</h1><p id="2581" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">Neo4j-Bigbang是一个python包，允许您以最简单的方式将CSV数据导入Neo4j数据库。这提供了两个命令<code class="du km kn ko kp b">bigbang-node</code>和<code class="du km kn ko kp b">bigbang-rel</code>，它们将产生所有的魔法。</p><p id="b8c4" class="pw-post-body-paragraph jo jp hi jq b jr kq jt ju jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl hb bi translated"><a class="ae kv" href="https://pypi.org/project/neo4j-bigbang/" rel="noopener ugc nofollow" target="_blank">PyPI上的Neo4j-big bang</a></p></div><div class="ab cl kw kx gp ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="hb hc hd he hf"><figure class="ld le lf lg fd ij"><div class="bz dy l di"><div class="lh li l"/></div></figure><h1 id="8dae" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">处理CSV时可能会遇到的困难</h1><p id="a9c9" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">你试过把CSV数据导入Neo4j数据库吗？如果是的话，你可能会成为Neo4j的官方<code class="du km kn ko kp b"><a class="ae kv" href="https://neo4j.com/developer/desktop-csv-import/" rel="noopener ugc nofollow" target="_blank">Import CSV tutorial</a></code>。你应该意识到这需要你</p><ul class=""><li id="cea6" class="lj lk hi jq b jr kq jv kr jz ll kd lm kh ln kl lo lp lq lr bi translated">采取许多步骤</li><li id="5b88" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">学习Neo4j特殊术语</li><li id="62d2" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">编写密码脚本</li><li id="6d98" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">准备RDB喜欢格式良好的CSV数据</li></ul><p id="69fa" class="pw-post-body-paragraph jo jp hi jq b jr kq jt ju jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl hb bi translated">在这种情况下，您需要手动操作应该如何处理数据。您可能需要非常小心地对每个数据做出决策。</p><h1 id="5667" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">Neo4j-Bigbang为您做了什么</h1><ul class=""><li id="9c3f" class="lj lk hi jq b jr js jv jw jz lx kd ly kh lz kl lo lp lq lr bi translated">通过自动类型检测导入节点、标签和属性。</li><li id="e15a" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">使用单个CSV文件一次创建关系和节点。</li><li id="2e25" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">避免两次插入同一个节点。</li><li id="2690" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">避免两次创建相同的关系。</li><li id="b037" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">更新现有节点和关系的标签和属性。</li><li id="3217" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">如果需要，可以多次强制插入同一个节点。</li></ul><p id="8eef" class="pw-post-body-paragraph jo jp hi jq b jr kq jt ju jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl hb bi translated">您不必预先定义模式，只需在CSV中设置属性。根本不需要写Cypher脚本。</p><p id="760d" class="pw-post-body-paragraph jo jp hi jq b jr kq jt ju jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl hb bi translated">你所需要做的就是，准备好你的CSV文件并运行bigbang！</p><h1 id="6449" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">设置Neo4j-Bigbang</h1><p id="af77" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在解释任何事情之前，我们先试穿一下，看看怎么样。</p><h2 id="5d68" class="ma ir hi bd is mb mc md iw me mf mg ja jz mh mi je kd mj mk ji kh ml mm jm mn bi translated">准备环境</h2><pre class="ld le lf lg fd mo kp mp mq aw mr bi"><span id="8084" class="ma ir hi kp b fi ms mt l mu mv">$ mkdir your-dir<br/>$ cd your-dir<br/>$ python -m venv venv<br/>$ source venv/bin/activate<br/>$ export NEO4J_URI=bolt://{hostname}:7687 NEO4J_USER={username} NEO4J_PASSWORD={password}</span></pre><h2 id="7d5c" class="ma ir hi bd is mb mc md iw me mf mg ja jz mh mi je kd mj mk ji kh ml mm jm mn bi translated">安装neo4j-bigbang</h2><pre class="ld le lf lg fd mo kp mp mq aw mr bi"><span id="522f" class="ma ir hi kp b fi ms mt l mu mv">$ pip install neo4j-bigbang</span></pre><h1 id="ca17" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">运行命令，创建关系</h1><p id="bf48" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在这个例子中，我选择了最简单的方法来展示如何创建您的图形，所以这次我将使用<code class="du km kn ko kp b">bigbang-rel</code>命令。</p><h2 id="2299" class="ma ir hi bd is mb mc md iw me mf mg ja jz mh mi je kd mj mk ji kh ml mm jm mn bi translated">在<code class="du km kn ko kp b">importing</code>目录下准备CSV数据</h2><pre class="ld le lf lg fd mo kp mp mq aw mr bi"><span id="47ef" class="ma ir hi kp b fi ms mt l mu mv">$ mkdir importing<br/>$ vim importing/relationships.csv</span></pre><h2 id="91dc" class="ma ir hi bd is mb mc md iw me mf mg ja jz mh mi je kd mj mk ji kh ml mm jm mn bi translated">CSV关系示例</h2><pre class="ld le lf lg fd mo kp mp mq aw mr bi"><span id="e096" class="ma ir hi kp b fi ms mt l mu mv">type,target_fields_in,target_values_in,target_labels_in,target_fields_out,target_values_out,target_labels_out,position<br/>APPEAR_IN,name,Mouse,Character|Person,name,The Matrix,Movie,ally<br/>APPEAR_IN,name,Neo,Character|Person,name,The Matrix,Movie,protagonist<br/>APPEAR_IN,name,Morpheus,Character|Person,name,The Matrix,Movie,ally<br/>APPEAR_IN,name,Dozer,Character|Person,name,The Matrix,Movie,ally<br/>APPEAR_IN,name,Trinity,Character|Person,name,The Matrix,Movie,ally<br/>APPEAR_IN,name,Oracle,Character|ComputerProgram,name,The Matrix,Movie,prophet<br/>APPEAR_IN,name,Architect,Character|ComputerProgram,name,The Matrix,Movie,enemy<br/>APPEAR_IN,name,Deus Ex Machina,Character|HardwareInterface,name,The Matrix,Movie,enemy<br/>APPEAR_IN,name,Agent Smith,Character|ComputerProgram,name,The Matrix,Movie,enemy<br/>APPEAR_IN,name,Machine City,City,name,The Matrix,Movie,place<br/>APPEAR_IN,name,The Matrix,VirtualRealityWorld,name,The Matrix,Movie,virtual world<br/>IS_CREW_OF,name,Mouse,Character|Person,name,Nebuchadnezzar,Vehicle|Battleship,<br/>IS_CREW_OF,name,Neo,Character|Person,name,Nebuchadnezzar,Vehicle|Battleship,<br/>IS_CREW_OF,name,Morpheus,Character|Person,name,Nebuchadnezzar,Vehicle|Battleship,captain<br/>IS_CREW_OF,name,Dozer,Character|Person,name,Nebuchadnezzar,Vehicle|Battleship,pilot<br/>IS_CREW_OF,name,Trinity,Character|Person,name,Nebuchadnezzar,Vehicle|Battleship,<br/>HELP,name,Mouse,Character|Person,name,Neo,Character|Person,<br/>HELP,name,Morpheus,Character|Person,name,Neo,Character|Person,believes Neo is the One<br/>HELP,name,Trinity,Character|Person,name,Neo,Character|Person,girl friend<br/>HELP,name,Oracle,Character|ComputerProgram,name,Neo,Character|Person,adviser<br/>GAVE_CHOISE,name,Architect,Character|ComputerProgram,name,Neo,Character|Person,<br/>CHALLENGED,name,Agent Smith,Character|ComputerProgram,name,Neo,Character|Person,<br/>ASKED_HELP,name,Neo,Character|Person,name,Deus Ex Machina,Character|HardwareInterface,<br/>KILLED,name,Agent Smith,Character|ComputerProgram,name,Oracle,Character|ComputerProgram,<br/>WORK_TOGETHER_WITH,name,Morpheus,Character|Person,name,Trinity,Character|Person,<br/>DESIGNED,name,Architect,Character|ComputerProgram,name,The Matrix,VirtualRealityWorld,<br/>WAS_BORN_IN,name,Neo,Character|Person,name,The Matrix,VirtualRealityWorld,<br/>IS_INTERFACE_OF,name,Deus Ex Machina,Character|HardwareInterface,name,Machine City,City,<br/>TRY_TO_DESTROY,name,Agent Smith,Character|ComputerProgram,name,Machine City,City,<br/>TRY_TO_DESTROY,name,Agent Smith,Character|ComputerProgram,name,The Matrix,VirtualRealityWorld,<br/>DELETED,name,Deus Ex Machina,Character|HardwareInterface,name,Agent Smith,Character|ComputerProgram,</span></pre><p id="b4c2" class="pw-post-body-paragraph jo jp hi jq b jr kq jt ju jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl hb bi translated">该CSV文件是为<code class="du km kn ko kp b">bigbang-rel</code>命令指定的。</p><h2 id="07ed" class="ma ir hi bd is mb mc md iw me mf mg ja jz mh mi je kd mj mk ji kh ml mm jm mn bi translated">运行以生成图形</h2><pre class="ld le lf lg fd mo kp mp mq aw mr bi"><span id="c7dc" class="ma ir hi kp b fi ms mt l mu mv">$ bigbang-rel -c</span></pre><p id="6350" class="pw-post-body-paragraph jo jp hi jq b jr kq jt ju jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl hb bi translated">就是这样！这将为您创建一个图表。现在你知道Neo4j-Bigbang有多简单了吧。</p><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mw"><img src="../Images/597a49c94d7a59c33524cd9a16b33bd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KeHQgKM3E64fh6BzBEtAEg.png"/></div></div></figure><h1 id="8120" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">关系CSV要求</h1><p id="eecd" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">当您创建<code class="du km kn ko kp b">relationships.csv</code>时，它必须至少有<code class="du km kn ko kp b">bigbang-rel</code>命令要求的下列字段。</p><ul class=""><li id="5932" class="lj lk hi jq b jr kq jv kr jz ll kd lm kh ln kl lo lp lq lr bi translated">类型:关系的类型</li><li id="5829" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">target_fields_in:第一个节点的目标属性</li><li id="021e" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">target_values_in:第一个节点上的目标属性值</li><li id="bccc" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">第二个节点上的目标属性</li><li id="aa84" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">target_values_out:第二个节点上的目标属性值</li></ul><p id="b1a8" class="pw-post-body-paragraph jo jp hi jq b jr kq jt ju jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl hb bi translated">您还可以选择定义</p><ul class=""><li id="065b" class="lj lk hi jq b jr kq jv kr jz ll kd lm kh ln kl lo lp lq lr bi translated">目标_标签_输入</li><li id="2b59" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">目标_标签_输出</li></ul><p id="1ad4" class="pw-post-body-paragraph jo jp hi jq b jr kq jt ju jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl hb bi translated">您定义的其他所有内容都将成为关系的属性。</p><h2 id="d4e8" class="ma ir hi bd is mb mc md iw me mf mg ja jz mh mi je kd mj mk ji kh ml mm jm mn bi translated">例子</h2><p id="c977" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">如果你想在…之间建立关系</p><pre class="ld le lf lg fd mo kp mp mq aw mr bi"><span id="838e" class="ma ir hi kp b fi ms mt l mu mv">Node: Person {<br/>   name: 'Mike'<br/>}</span></pre><p id="bda8" class="pw-post-body-paragraph jo jp hi jq b jr kq jt ju jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl hb bi translated">和</p><pre class="ld le lf lg fd mo kp mp mq aw mr bi"><span id="082f" class="ma ir hi kp b fi ms mt l mu mv">Node: Person {<br/>    name: 'Anna'<br/>}</span></pre><p id="d9a1" class="pw-post-body-paragraph jo jp hi jq b jr kq jt ju jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl hb bi translated">然后，您可以像这样设置CSV值</p><pre class="ld le lf lg fd mo kp mp mq aw mr bi"><span id="1ac1" class="ma ir hi kp b fi ms mt l mu mv">target_fields_in =&gt; name<br/>target_values_in =&gt; Mike<br/>target_labels_in =&gt; Person</span><span id="fffc" class="ma ir hi kp b fi mx mt l mu mv">target_fields_out =&gt; name<br/>target_values_out =&gt; Anna<br/>target_labels_out =&gt; Person</span></pre><h1 id="8411" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">运行命令，导入节点</h1><p id="dc45" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">还可以使用<code class="du km kn ko kp b">bigbang-node</code>只导入没有关系的节点。这将集中于操纵节点。您可以使用<code class="du km kn ko kp b">bigbang-rel</code>命令粗略地创建关系和节点，稍后您可以在这些节点上设置详细的属性，反之亦然。</p><h2 id="1631" class="ma ir hi bd is mb mc md iw me mf mg ja jz mh mi je kd mj mk ji kh ml mm jm mn bi translated">在<code class="du km kn ko kp b">importing</code>目录下准备CSV数据</h2><pre class="ld le lf lg fd mo kp mp mq aw mr bi"><span id="3986" class="ma ir hi kp b fi ms mt l mu mv">$ mkdir importing<br/>$ vim importing/nodes.csv</span></pre><h2 id="c224" class="ma ir hi bd is mb mc md iw me mf mg ja jz mh mi je kd mj mk ji kh ml mm jm mn bi translated">CSV节点示例</h2><pre class="ld le lf lg fd mo kp mp mq aw mr bi"><span id="a7b3" class="ma ir hi kp b fi ms mt l mu mv">name,description,labels<br/>Nebuchadnezzar,Nebuchadnezzar is a fictional hovership captained by Morpheus in the The Matrix franchise.,Vehicle|Battleship<br/>Oracle,"She is a prophet in the Matrix. She looks like a person, but is a computer program created for some perposes.",Character|ComputerProgram<br/>Agent Smith,Agent Smith is a fictional character and the main antagonist of The Matrix trilogy.,Character|ComputerProgram<br/>Switch,Switch was a member of the crew of the Nebuchadnezzar.,Character|Person</span></pre><p id="281f" class="pw-post-body-paragraph jo jp hi jq b jr kq jt ju jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl hb bi translated">该CSV文件是为<code class="du km kn ko kp b">bigbang-node</code>命令指定的。</p><h2 id="b6d0" class="ma ir hi bd is mb mc md iw me mf mg ja jz mh mi je kd mj mk ji kh ml mm jm mn bi translated">运行以生成节点</h2><pre class="ld le lf lg fd mo kp mp mq aw mr bi"><span id="2082" class="ma ir hi kp b fi ms mt l mu mv">$ bigbang-node</span></pre><p id="9972" class="pw-post-body-paragraph jo jp hi jq b jr kq jt ju jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl hb bi translated">如果您注意到了，这将只创建一个节点。这是因为，图中已经有了其他节点。但是如果你想用新的属性更新那些节点，在这种情况下描述被添加，那么你应该把<code class="du km kn ko kp b">-u</code>选项放在那里。</p><pre class="ld le lf lg fd mo kp mp mq aw mr bi"><span id="8bf1" class="ma ir hi kp b fi ms mt l mu mv">$ bigbang-node -u</span></pre><p id="970a" class="pw-post-body-paragraph jo jp hi jq b jr kq jt ju jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl hb bi translated">那么所有的节点都将被更新。</p><p id="c2a4" class="pw-post-body-paragraph jo jp hi jq b jr kq jt ju jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl hb bi translated">Neo4j-Bigbang有更多的选择和灵活性。</p><ul class=""><li id="23ed" class="lj lk hi jq b jr kq jv kr jz ll kd lm kh ln kl lo lp lq lr bi translated">您可以在现有节点之间创建关系，也可以一次创建。</li><li id="733e" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">您可以更新现有关系的属性</li><li id="565e" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">创建关系时，可以选择节点选取属性和标签</li><li id="420d" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">您可以选择导入CSV文件名。</li><li id="8cfc" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">如果您想在关系CSV中设置所有相同的类型，您可以将您的CSV文件名设置为关系类型</li><li id="58a7" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">如果您想在节点CSV中设置所有相同的标签，您可以将您的CSV文件名设置为节点标签</li><li id="dce3" class="lj lk hi jq b jr ls jv lt jz lu kd lv kh lw kl lo lp lq lr bi translated">您可以选择创建新节点、更新节点或跳过节点。</li></ul><p id="53bb" class="pw-post-body-paragraph jo jp hi jq b jr kq jt ju jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl hb bi translated">希望这将有助于您顺利开始Neo4j之旅。</p></div></div>    
</body>
</html>