<html>
<head>
<title>Didn’t understand Heap? Let’s implement and know.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">没看懂堆？让我们来执行和了解。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/didnt-understand-heap-lets-implement-and-know-eeb80395198?source=collection_archive---------18-----------------------#2020-09-16">https://medium.com/analytics-vidhya/didnt-understand-heap-lets-implement-and-know-eeb80395198?source=collection_archive---------18-----------------------#2020-09-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="873a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">优先排队的一个例子，优先考虑紧急业务。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/372a22ebf00d443b7f824959b50473de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IcZBAdoVJNlzLP6mfBo6qg.jpeg"/></div></div></figure><h1 id="52fd" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">堆数据结构</strong></h1><p id="ec12" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">二叉堆是一种基于<em class="ks">树的数据结构</em>拥有一棵完整的“二叉树”。</p><blockquote class="kt ku kv"><p id="1850" class="if ig ks ih b ii ij ik il im in io ip kw ir is it kx iv iw ix ky iz ja jb jc hb bi translated">堆可以分为两类，<strong class="ih hj">最小堆</strong>和<strong class="ih hj">最大堆</strong></p></blockquote><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kz"><img src="../Images/1d4304a933320293af2fe92efece21ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*geISo4yT4ZSF4S4IsIGqpQ.png"/></div><figcaption class="la lb et er es lc ld bd b be z dx translated"><strong class="bd jr">最小堆</strong>:左子和右子都必须大于父堆，因此最小堆在顶部，而在<strong class="bd jr">最大堆中:</strong>父堆大于两个子堆，因此最大堆在顶部</figcaption></figure><h1 id="1e3c" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">堆的用例，优先级队列。</strong></h1><p id="edb7" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">当不断添加和删除数据时，堆是有用的。假设我们有一个元素列表，我们需要一次画出最高的元素，但是与此同时，有一个元素的实时添加正在进行。让我们用下面的例子来理解它。</p><p id="f2ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">呼叫中心案例</strong></p><p id="c806" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在某个地方有一个呼叫中心，雇佣了六个电话参与者，电话如潮水般涌来，有些电话是关于基本问题的，有些是关于真正的商业问题的。自动化系统将如何识别并优先处理这些问题？这里，使用优先级队列是一个可行的选择，因此<strong class="ih hj">堆数据结构</strong>成为一个完美的候选对象。为了更好的理解，请看下图。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es le"><img src="../Images/d1247f73a206707275743bfce8c73132.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*9YfS4RBgR8gN-WZ4ybjqjg.png"/></div><figcaption class="la lb et er es lc ld bd b be z dx translated">来电将根据其重要性进行优先排序</figcaption></figure><p id="803d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以自己创建堆，但是 Python 有一个名为"<strong class="ih hj"> heapq" </strong>的内置库，为了保持代码简短，我们使用它<strong class="ih hj">。</strong>如果你还想给自己代码堆，可以从“geeksforgeeks.org”上的文章列表中找到适合自己的代码→ <a class="ae lf" href="https://www.geeksforgeeks.org/medium/heap/2/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">点击这里</strong> </a> <strong class="ih hj">。</strong></p><p id="d761" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以让我们来看看编码部分，了解它的本质。</p><h1 id="05cd" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">启动</strong></h1><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="360d" class="ll jq hi lh b fi lm ln l lo lp">#Importing Libraries<br/>import heapq<br/>import time<br/>import random<br/>import schedule</span><span id="dadf" class="ll jq hi lh b fi lq ln l lo lp"># Adding some calls into the list of tuples<br/># Priority(1 to 5), ‘Caller name’)<br/>call_queue = [<br/> (3, ‘c1’),<br/> (1, ‘c4’),<br/> (4, ‘c3’),<br/> (5, ‘c2’),<br/> (2, ‘c5’),<br/> ]</span><span id="eb7d" class="ll jq hi lh b fi lq ln l lo lp"># heapify function makes a heap of the given list<br/>heapq.heapify(call_queue)</span></pre><h1 id="6a90" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">添加功能</strong></h1><p id="0eaf" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated"><strong class="ih hj">随机呼叫添加:</strong>因为我们正在创建一个示例，所以我将通过调度在队列中添加额外的随机呼叫。</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="bc1f" class="ll jq hi lh b fi lm ln l lo lp">def add_call():</span><span id="1a60" class="ll jq hi lh b fi lq ln l lo lp">    # With some Random Priorities and Random users<br/>    call_tuple = (<br/>              random.randint(1,5), <br/>              random.choice(['c13','c15','c17','c18','c11','c14',]))<br/>              <br/>    print('New Incoming call in queue, Caller: ',call_tuple[1],<br/>          '| Priority :',call_tuple[0])<br/>    <br/>    heapq.heappush(call_queue,call_tuple)</span></pre><p id="f731" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">弹出“下一个优先级”调用</strong></p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="fc7f" class="ll jq hi lh b fi lm ln l lo lp">def call_manager(): <br/>if len(call_queue)==0:<br/>     return<br/> else:<br/>     popped = heapq.heappop(call_queue)<br/>     print(‘Call Started for: ‘,popped[1],’ Priority: ‘,popped[0])</span></pre><h1 id="023e" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">安排作业并运行时间表</strong></h1><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="cbf2" class="ll jq hi lh b fi lm ln l lo lp"># Scheduling Sample Calls<br/>schedule.every(3).seconds.do(call_manager)<br/>schedule.every(10).seconds.do(add_call)</span><span id="9505" class="ll jq hi lh b fi lq ln l lo lp"># Running the Schedule<br/>while True:<br/>    schedule.run_pending() <br/>    time.sleep(1)</span></pre><p id="ede4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">输出:</strong>让我们看看终端发生了什么</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lr"><img src="../Images/7c7cc4d3b604ffc41a81df6d836d4fa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/1*vwqQcNhbrxHEPyb3eAO0Ug.png"/></div><figcaption class="la lb et er es lc ld bd b be z dx translated">每当添加一个“高优先级呼叫”时，它将获得“第一优先级”</figcaption></figure><p id="c74c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是一个基于最小堆的优先级队列的例子。可以有其他用途，如从不断追加新元素的列表中查找最小值、最大值或中值，查找具有最大活动 Covid 情况的时间段。寻找人口最少或最多的一天。</p><p id="303e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在 Heap 的下一篇博客中，我将为上述呼叫中心案例创建一个例子，很可能是一个应用程序。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ls"><img src="../Images/f12d0bbce4e00f4bf61c0b9851972586.png" data-original-src="https://miro.medium.com/v2/resize:fit:360/format:webp/1*nrsXFKYGdPBWKdaA0zyl8Q.jpeg"/></div></figure><blockquote class="kt ku kv"><p id="8892" class="if ig ks ih b ii ij ik il im in io ip kw ir is it kx iv iw ix ky iz ja jb jc hb bi translated">希望你喜欢这篇文章。</p><p id="b482" class="if ig ks ih b ii ij ik il im in io ip kw ir is it kx iv iw ix ky iz ja jb jc hb bi translated"><strong class="ih hj">请喜欢并跟随。</strong></p><p id="a489" class="if ig ks ih b ii ij ik il im in io ip kw ir is it kx iv iw ix ky iz ja jb jc hb bi translated">再见！！！！！过得愉快</p></blockquote></div></div>    
</body>
</html>