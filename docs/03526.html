<html>
<head>
<title>Scrape and Store Tweets using Python 3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python 3抓取和存储推文</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/scape-and-save-tweet-using-python-3-5a186777c388?source=collection_archive---------5-----------------------#2020-02-06">https://medium.com/analytics-vidhya/scape-and-save-tweet-using-python-3-5a186777c388?source=collection_archive---------5-----------------------#2020-02-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/bb21156788148b1e375863cdb83f76d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wGHXXWtpTaaOXGaa"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">凯利·西克玛在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="084f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi jt translated"><span class="l ju jv jw bm jx jy jz ka kb di"> W </span>当我们想要使用tweet数据进行一些文本分析时，我们必须从Twitter API获取数据，并将其保存在数据库或文件中。在之前的教程中，我已经写了如何使用Tweepy和Python抓取数据，以及如何在MySQL中存储数据。如果你没有读过这两篇教程，请继续读下去</p><p id="1cf9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://chatbotslife.com/crawl-twitter-data-using-30-lines-of-python-code-e3fece99450e" rel="noopener ugc nofollow" target="_blank">使用30行Python代码抓取Twitter数据</a></p><p id="1345" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://chatbotslife.com/connecting-mysql-to-python-ceef881a19ef" rel="noopener ugc nofollow" target="_blank">将MySQL连接到Python </a></p><p id="d554" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">基于上面的教程，我们可以使用Python 3抓取tweet数据并将其保存在数据库中。</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><p id="49b9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先当然要准备好数据库(MySQL)来后期保存数据。我创建了一个名为social_media的新数据库，并创建了一个名为tweet的表来存储数据。下面是创建该表的SQL。</p><pre class="kj kk kl km fd kn ko kp kq aw kr bi"><span id="86e2" class="ks kt hi ko b fi ku kv l kw kx">CREATE TABLE `tweet` (<br/>  `id` int(11) NOT NULL,<br/>  `search_val` varchar(60) NOT NULL,<br/>  `created_at` text,<br/>  `tweet_id` text,<br/>  `text` text,<br/>  `source` text,<br/>  `in_reply_to_status_id` text,<br/>  `in_reply_to_user_id` text,<br/>  `in_reply_to_screen_name` text,<br/>  `user_name` text,<br/>  `user_screen_name` text,<br/>  `user_location` text,<br/>  `user_url` text,<br/>  `user_description` text,<br/>  `user_verified` tinyint(1) DEFAULT NULL,<br/>  `user_followers_count` int(11) DEFAULT NULL,<br/>  `user_friends_count` int(11) DEFAULT NULL,<br/>  `user_listed_count` int(11) DEFAULT NULL,<br/>  `user_favourites_count` int(11) DEFAULT NULL,<br/>  `user_created_at` text,<br/>  `user_id` varchar(50) DEFAULT NULL,<br/>  `user_profile_image_url_https` text,<br/>  `coordinates_lat` text,<br/>  `coordinates_lon` text,<br/>  `place_country` text,<br/>  `place_country_code` text,<br/>  `place_full_name` text,<br/>  `place_id` varchar(50) DEFAULT NULL,<br/>  `place_type` varchar(30) DEFAULT NULL,<br/>  `quoted_status_id` varchar(50) DEFAULT NULL,<br/>  `quoted_status` text,<br/>  `retweeted_status` text,<br/>  `quote_count` int(11) DEFAULT NULL,<br/>  `reply_count` int(11) DEFAULT NULL,<br/>  `retweet_count` int(11) DEFAULT NULL,<br/>  `favorite_count` int(11) DEFAULT NULL,<br/>  `retweeted` tinyint(1) DEFAULT NULL,<br/>  `entities` text,<br/>  `lang` varchar(30) DEFAULT NULL,<br/>  `feeds_link` text,<br/>  `feeds_video` text,<br/>  `feeds_image` text,<br/>  `created_date` datetime DEFAULT CURRENT_TIMESTAMP<br/>) ENGINE=InnoDB DEFAULT CHARSET=latin1;</span></pre><p id="b3bf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可以从Twitter API中检索到如此多的数据，但我没有全部保存下来。我试图尽可能地容纳来自Twitter搜索API的数据，这些数据可能对文本分析或任何事情都有用。</p><p id="7e49" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">完成数据库设置后，现在我们可以编写Python 3代码来抓取和保存tweets。</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><figure class="kj kk kl km fd ij"><div class="bz dy l di"><div class="ky kz l"/></div></figure><p id="6bfb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">觉得迷茫？我希望不会。这看起来有点混乱，因为我试图将所有有用的数据存储在变量中(第37–103行)，创建包含这些变量的Python元组，然后将它追加到val列表中。</p><p id="2631" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">SQL命令写在第151–161行，注意我们的SQL语法中列的顺序与元组中变量的顺序相同。</p><p id="f89f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">不要忘记根据您的需要更改twitter API和数据库凭证，保存Python 3代码并运行它。</p><figure class="kj kk kl km fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es la"><img src="../Images/c9903e96a34cba703a1cd4b77e13833c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2kEGaMZd5ds997AdhJhPpQ.png"/></div></div></figure><p id="5145" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它将打印我们从API获得的tweet的每个id和文本。现在你可以很容易地抓取twitter数据，如果你想改变搜索关键词，可以改变第11行的标签。</p><blockquote class="lb lc ld"><p id="cb57" class="iv iw le ix b iy iz ja jb jc jd je jf lf jh ji jj lg jl jm jn lh jp jq jr js hb bi translated">注意:免费的Twitter搜索API只返回过去7天的推文。</p></blockquote><p id="5a2d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这些都是我送的，谢谢</p></div></div>    
</body>
</html>