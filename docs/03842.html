<html>
<head>
<title>Docker, Tensorflow, GUI, matplotlib</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Docker，Tensorflow，GUI，matplotlib</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/docker-tensorflow-gui-matplotlib-6cdd327d4a0f?source=collection_archive---------4-----------------------#2020-02-22">https://medium.com/analytics-vidhya/docker-tensorflow-gui-matplotlib-6cdd327d4a0f?source=collection_archive---------4-----------------------#2020-02-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/5eca2f46beac4e6e84577e0bcf7b22fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xzIPlgz0sNRP2DlZ0tElbg.png"/></div></div></figure><p id="5531" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在之前的文章中，我们讨论了在dockerized容器上使用tensorflow。有了它，我们可以在张量流环境下工作。但是，我们如何实现结果的可视化呢？将数据复制到本地计算机并单独查看？我们可以做到..但是，有没有更好的办法呢？是的。我们可以为docker提供GUI功能，并显示docker本身的内容。</p><p id="df66" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先使docker能够使用显示器。我们将通过如下的“xhost”命令来完成</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="87aa" class="jy jz hi ju b fi ka kb l kc kd">xhost +</span></pre><p id="a6be" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，我们需要运行带有显示设置的docker。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="f353" class="jy jz hi ju b fi ka kb l kc kd">docker run -it --gpus=all --name &lt;name&gt; -v &lt;algo folder&gt;:/algo -v &lt;data folder&gt;:/data --net=host --env="DISPLAY" --volume="$HOME/.Xauthority:/root/.Xauthority:rw" tensorflow/tensorflow:1.15.2-gpu-py3 /bin/bash</span></pre><p id="c205" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在docker容器中，安装python3-tk。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="d156" class="jy jz hi ju b fi ka kb l kc kd">apt install -y python3-tk</span></pre><p id="887c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用pip安装matplotlib</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="2b64" class="jy jz hi ju b fi ka kb l kc kd">pip install matplotlib</span></pre><p id="a25b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了便于在python中编辑，我们可以使用ipython。安装ipython可以按如下方式完成</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="b312" class="jy jz hi ju b fi ka kb l kc kd">pip install ipython</span></pre><p id="9960" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以下代码摘自<a class="ae jo" href="https://matplotlib.org/gallery/lines_bars_and_markers/bar_stacked.html#sphx-glr-gallery-lines-bars-and-markers-bar-stacked-py" rel="noopener ugc nofollow" target="_blank"> matplotlib </a>网站。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="f80c" class="jy jz hi ju b fi ka kb l kc kd"><strong class="ju hj">import</strong> <strong class="ju hj">numpy</strong> <strong class="ju hj">as</strong> <strong class="ju hj">np</strong><br/><strong class="ju hj">import</strong> <strong class="ju hj">matplotlib.pyplot</strong> <strong class="ju hj">as</strong> <strong class="ju hj">plt</strong><br/><br/><br/><a class="ae jo" href="https://docs.python.org/3/library/functions.html#int" rel="noopener ugc nofollow" target="_blank">N</a> = 5<br/><a class="ae jo" href="https://docs.python.org/3/library/stdtypes.html#tuple" rel="noopener ugc nofollow" target="_blank">menMeans</a> = (20, 35, 30, 35, 27)<br/><a class="ae jo" href="https://docs.python.org/3/library/stdtypes.html#tuple" rel="noopener ugc nofollow" target="_blank">womenMeans</a> = (25, 32, 34, 20, 25)<br/><a class="ae jo" href="https://docs.python.org/3/library/stdtypes.html#tuple" rel="noopener ugc nofollow" target="_blank">menStd</a> = (2, 3, 4, 1, 2)<br/><a class="ae jo" href="https://docs.python.org/3/library/stdtypes.html#tuple" rel="noopener ugc nofollow" target="_blank">womenStd</a> = (3, 5, 2, 3, 3)<br/><a class="ae jo" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" rel="noopener ugc nofollow" target="_blank">ind</a> = <a class="ae jo" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.arange.html#numpy.arange" rel="noopener ugc nofollow" target="_blank">np.arange</a>(<a class="ae jo" href="https://docs.python.org/3/library/functions.html#int" rel="noopener ugc nofollow" target="_blank">N</a>)    <em class="ke"># the x locations for the groups</em><br/><a class="ae jo" href="https://docs.python.org/3/library/functions.html#float" rel="noopener ugc nofollow" target="_blank">width</a> = 0.35       <em class="ke"># the width of the bars: can also be len(x) sequence</em><br/><br/><a class="ae jo" href="https://matplotlib.org/api/container_api.html#matplotlib.container.BarContainer" rel="noopener ugc nofollow" target="_blank">p1</a> = <a class="ae jo" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.bar.html#matplotlib.pyplot.bar" rel="noopener ugc nofollow" target="_blank">plt.bar</a>(<a class="ae jo" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" rel="noopener ugc nofollow" target="_blank">ind</a>, <a class="ae jo" href="https://docs.python.org/3/library/stdtypes.html#tuple" rel="noopener ugc nofollow" target="_blank">menMeans</a>, <a class="ae jo" href="https://docs.python.org/3/library/functions.html#float" rel="noopener ugc nofollow" target="_blank">width</a>, yerr=<a class="ae jo" href="https://docs.python.org/3/library/stdtypes.html#tuple" rel="noopener ugc nofollow" target="_blank">menStd</a>)<br/><a class="ae jo" href="https://matplotlib.org/api/container_api.html#matplotlib.container.BarContainer" rel="noopener ugc nofollow" target="_blank">p2</a> = <a class="ae jo" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.bar.html#matplotlib.pyplot.bar" rel="noopener ugc nofollow" target="_blank">plt.bar</a>(<a class="ae jo" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" rel="noopener ugc nofollow" target="_blank">ind</a>, <a class="ae jo" href="https://docs.python.org/3/library/stdtypes.html#tuple" rel="noopener ugc nofollow" target="_blank">womenMeans</a>, <a class="ae jo" href="https://docs.python.org/3/library/functions.html#float" rel="noopener ugc nofollow" target="_blank">width</a>,<br/>             bottom=<a class="ae jo" href="https://docs.python.org/3/library/stdtypes.html#tuple" rel="noopener ugc nofollow" target="_blank">menMeans</a>, yerr=<a class="ae jo" href="https://docs.python.org/3/library/stdtypes.html#tuple" rel="noopener ugc nofollow" target="_blank">womenStd</a>)<br/><br/><a class="ae jo" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.ylabel.html#matplotlib.pyplot.ylabel" rel="noopener ugc nofollow" target="_blank">plt.ylabel</a>('Scores')<br/><a class="ae jo" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.title.html#matplotlib.pyplot.title" rel="noopener ugc nofollow" target="_blank">plt.title</a>('Scores by group and gender')<br/><a class="ae jo" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.xticks.html#matplotlib.pyplot.xticks" rel="noopener ugc nofollow" target="_blank">plt.xticks</a>(<a class="ae jo" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" rel="noopener ugc nofollow" target="_blank">ind</a>, ('G1', 'G2', 'G3', 'G4', 'G5'))<br/><a class="ae jo" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.yticks.html#matplotlib.pyplot.yticks" rel="noopener ugc nofollow" target="_blank">plt.yticks</a>(<a class="ae jo" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.arange.html#numpy.arange" rel="noopener ugc nofollow" target="_blank">np.arange</a>(0, 81, 10))<br/><a class="ae jo" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.legend.html#matplotlib.pyplot.legend" rel="noopener ugc nofollow" target="_blank">plt.legend</a>((<a class="ae jo" href="https://matplotlib.org/api/container_api.html#matplotlib.container.BarContainer" rel="noopener ugc nofollow" target="_blank">p1</a>[0], <a class="ae jo" href="https://matplotlib.org/api/container_api.html#matplotlib.container.BarContainer" rel="noopener ugc nofollow" target="_blank">p2</a>[0]), ('Men', 'Women'))<br/><br/><a class="ae jo" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.show.html#matplotlib.pyplot.show" rel="noopener ugc nofollow" target="_blank">plt.show</a>()</span></pre><p id="b2ea" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">复制上面的代码，粘贴到ipython环境中运行。您将能够在您的主机上看到显示。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es kf"><img src="../Images/40314e37b28f8fa13a25f1afc5ed11b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*zpzFt8Z5d8kuGpQul4XKpg.png"/></div></figure></div></div>    
</body>
</html>