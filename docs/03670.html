<html>
<head>
<title>How to Create a Fully Functional E-commerce Website with Django</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Django创建一个功能齐全的电子商务网站</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-create-a-fully-functional-e-commerce-website-with-django-d4b998bac01?source=collection_archive---------4-----------------------#2020-02-13">https://medium.com/analytics-vidhya/how-to-create-a-fully-functional-e-commerce-website-with-django-d4b998bac01?source=collection_archive---------4-----------------------#2020-02-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="1339" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第5步，共5步:使用Stripe进行支付处理</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/6fc134ba6f76d6e1138bdb2fe3143e57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nnmReMTx0I47i2-kzdG0Lw.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated"><a class="ae jt" href="https://www.shuup.com/wp-content/uploads/2017/12/python-plus-django-1.jpg" rel="noopener ugc nofollow" target="_blank">https://www . shuup . com/WP-content/uploads/2017/12/python-plus-django-1 . jpg</a></figcaption></figure><p id="1d24" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在教程的这一部分，我们将使用stripe处理支付。</p><h1 id="7a82" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">什么是条纹？</h1><p id="e8f7" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated"><strong class="ih hj"> Stripe </strong>是一款支付处理器，这意味着它支持从客户银行(发卡银行)向商户银行(收单银行)进行电子转账，以支付用信用卡购买的商品或服务。有关条带的完整信息可在以下链接中查看:</p><div class="kx ky ez fb kz la"><a href="https://stripe.com/" rel="noopener  ugc nofollow" target="_blank"><div class="lb ab dw"><div class="lc ab ld cl cj le"><h2 class="bd hj fi z dy lf ea eb lg ed ef hh bi translated">互联网业务的在线支付处理- Stripe</h2><div class="lh l"><h3 class="bd b fi z dy lf ea eb lg ed ef dx translated">互联网业务的在线支付处理。Stripe是一套支付API，支持在线商务…</h3></div><div class="li l"><p class="bd b fp z dy lf ea eb lg ed ef dx translated">stripe.com</p></div></div><div class="lj l"><div class="lk l ll lm ln lj lo jn la"/></div></div></a></div><h1 id="5d14" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">先决条件</h1><ul class=""><li id="f01b" class="lp lq hi ih b ii ks im kt iq lr iu ls iy lt jc lu lv lw lx bi translated">Django最新版本</li><li id="51b0" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">Anaconda(可选)创建虚拟环境</li><li id="0a80" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">作为代码编辑器的Visual Studio代码(可选)</li><li id="fb5c" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">种类</li></ul><p id="720c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在开始本教程之前，不要忘记激活您的虚拟环境，以及我们在上一个教程中创建的项目。如果您没有在此下载它:</p><div class="kx ky ez fb kz la"><a href="https://github.com/Andika7/DjangoEcommerce/tree/bd146d530d8bec8a5dea3960d3291fe9b60d2bfe" rel="noopener  ugc nofollow" target="_blank"><div class="lb ab dw"><div class="lc ab ld cl cj le"><h2 class="bd hj fi z dy lf ea eb lg ed ef hh bi translated">安集卡7/DjangoEcommerce</h2><div class="lh l"><h3 class="bd b fi z dy lf ea eb lg ed ef dx translated">在GitHub上创建一个帐户，为Andika7/DjangoEcommerce的发展做出贡献。</h3></div><div class="li l"><p class="bd b fp z dy lf ea eb lg ed ef dx translated">github.com</p></div></div><div class="lj l"><div class="md l ll lm ln lj lo jn la"/></div></div></a></div><h1 id="276c" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">安装条纹</h1><p id="a948" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">要安装条带，您可以使用以下命令:</p><pre class="je jf jg jh fd me mf mg mh aw mi bi"><span id="6840" class="mj jv hi mf b fi mk ml l mm mn">$ pip install stripe</span></pre><p id="3d9b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在sripe正在安装到您设备中。在本教程中，我们将使用stripe API来处理支付。通过使用以下链接，可以在Stripe API文档中看到如何使用Stripe API:</p><div class="kx ky ez fb kz la"><a href="https://stripe.com/docs/api/charges/create?lang=python" rel="noopener  ugc nofollow" target="_blank"><div class="lb ab dw"><div class="lc ab ld cl cj le"><h2 class="bd hj fi z dy lf ea eb lg ed ef hh bi translated">条带API参考-创建收费- Python</h2><div class="lh l"><h3 class="bd b fi z dy lf ea eb lg ed ef dx translated">Stripe API的完整参考文档。包括我们的Python的代表性代码片段和示例…</h3></div><div class="li l"><p class="bd b fp z dy lf ea eb lg ed ef dx translated">stripe.com</p></div></div></div></a></div><p id="b8bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">确保你使用python语言</p><h1 id="1ffd" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">模型</h1><p id="edd9" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">打开您的models.py文件，我们将使用stripe创建一个支付模型类来保存支付信息:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="mo mp l"/></div></figure><p id="2447" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该模型将存储与使用stripe的支付相关的信息，如stripe的ID、支付者、支付金额和支付时间</p><p id="d830" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建支付模型后，不要忘记使用以下命令迁移您的模型数据库:</p><pre class="je jf jg jh fd me mf mg mh aw mi bi"><span id="b723" class="mj jv hi mf b fi mk ml l mm mn">$ python manage.py migrate<br/>$ python manage.py makemigrations</span></pre><p id="f8b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完整的models.py代码可以在以下链接中看到:</p><div class="kx ky ez fb kz la"><a href="https://github.com/Andika7/DjangoEcommerce/blob/master/core/models.py" rel="noopener  ugc nofollow" target="_blank"><div class="lb ab dw"><div class="lc ab ld cl cj le"><h2 class="bd hj fi z dy lf ea eb lg ed ef hh bi translated">安集卡7/DjangoEcommerce</h2><div class="lh l"><h3 class="bd b fi z dy lf ea eb lg ed ef dx translated">在GitHub上创建一个帐户，为Andika7/DjangoEcommerce的发展做出贡献。</h3></div><div class="li l"><p class="bd b fp z dy lf ea eb lg ed ef dx translated">github.com</p></div></div><div class="lj l"><div class="mq l ll lm ln lj lo jn la"/></div></div></a></div><h1 id="19dc" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">视图</h1><p id="f9a9" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">在视图中，使用下面的代码替换我们之前创建的CheckoutView类:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="mo mp l"/></div></figure><p id="82d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果选择了stripe选项，这一次Checkout视图类将重定向到payment using stripe</p><p id="ba41" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后在下面的链接中找到payment.html模板，并把它放在模板目录中</p><div class="kx ky ez fb kz la"><a href="https://github.com/Andika7/DjangoEcommerce/tree/master/templates" rel="noopener  ugc nofollow" target="_blank"><div class="lb ab dw"><div class="lc ab ld cl cj le"><h2 class="bd hj fi z dy lf ea eb lg ed ef hh bi translated">安集卡7/DjangoEcommerce</h2><div class="lh l"><h3 class="bd b fi z dy lf ea eb lg ed ef dx translated">在GitHub上创建一个帐户，为Andika7/DjangoEcommerce的发展做出贡献。</h3></div><div class="li l"><p class="bd b fp z dy lf ea eb lg ed ef dx translated">github.com</p></div></div><div class="lj l"><div class="mr l ll lm ln lj lo jn la"/></div></div></a></div><blockquote class="ms mt mu"><p id="786a" class="if ig mv ih b ii ij ik il im in io ip mw ir is it mx iv iw ix my iz ja jb jc hb bi translated">建议:用链接中的文件替换模板目录中的所有文件</p></blockquote><p id="5e20" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">之后，我们将创建一个带条纹的PaymentView类。对于以下教程:</p><ol class=""><li id="063d" class="lp lq hi ih b ii ij im in iq mz iu na iy nb jc nc lv lw lx bi translated">导入</li></ol><pre class="je jf jg jh fd me mf mg mh aw mi bi"><span id="92a3" class="mj jv hi mf b fi mk ml l mm mn">...<br/>from .models import (<br/>   ...,<br/>   Payment <br/>)</span><span id="1544" class="mj jv hi mf b fi nd ml l mm mn">import stripe<br/>stripe.api_key = settings.STRIPE_KEY</span></pre><p id="5ea5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在import列中，导入我们之前制作的支付模型，不要忘记导入stripe，因为我们将在这里使用它</p><p id="6997" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.设置</p><p id="453d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">打开项目名称目录中的settings.py文件，并将该行代码添加到您的底线中:</p><pre class="je jf jg jh fd me mf mg mh aw mi bi"><span id="7dc1" class="mj jv hi mf b fi mk ml l mm mn">STRIPE_KEY = '&lt;your_api_key_here&gt;'</span></pre><p id="4703" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将您条带API密码输入constanta变量</p><p id="d0ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.创建付款视图</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="mo mp l"/></div></figure><p id="db79" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">付款视图的主要部分是try部分，而错误处理可以在以下文档中看到:</p><div class="kx ky ez fb kz la"><a href="https://stripe.com/docs/api/errors/handling?lang=python" rel="noopener  ugc nofollow" target="_blank"><div class="lb ab dw"><div class="lc ab ld cl cj le"><h2 class="bd hj fi z dy lf ea eb lg ed ef hh bi translated">条带API参考-处理错误- Python</h2><div class="lh l"><h3 class="bd b fi z dy lf ea eb lg ed ef dx translated">Stripe API的完整参考文档。包括我们的Python的代表性代码片段和示例…</h3></div><div class="li l"><p class="bd b fp z dy lf ea eb lg ed ef dx translated">stripe.com</p></div></div></div></a></div><p id="bad1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> post </strong>函数将使用我们之前制作的支付模型的条带来存储支付信息</p><p id="bc4c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完整的<strong class="ih hj"> views.py </strong>代码可以在下面的链接中看到:</p><div class="kx ky ez fb kz la"><a href="https://github.com/Andika7/DjangoEcommerce/blob/master/core/views.py" rel="noopener  ugc nofollow" target="_blank"><div class="lb ab dw"><div class="lc ab ld cl cj le"><h2 class="bd hj fi z dy lf ea eb lg ed ef hh bi translated">安集卡7/DjangoEcommerce</h2><div class="lh l"><h3 class="bd b fi z dy lf ea eb lg ed ef dx translated">在GitHub上创建一个帐户，为Andika7/DjangoEcommerce的发展做出贡献。</h3></div><div class="li l"><p class="bd b fp z dy lf ea eb lg ed ef dx translated">github.com</p></div></div><div class="lj l"><div class="ne l ll lm ln lj lo jn la"/></div></div></a></div><h1 id="4ab0" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">资源定位符</h1><p id="7820" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">像往常一样，在视图准备好使用之后，现在我们将创建用于执行该功能的url地址</p><p id="e29a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在导入中添加PaymentView</p><pre class="je jf jg jh fd me mf mg mh aw mi bi"><span id="a265" class="mj jv hi mf b fi mk ml l mm mn">from .views import (<br/>   ...,<br/>   PaymentView<br/>)</span></pre><p id="6010" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">向PaymentView类中的视图添加路径url</p><pre class="je jf jg jh fd me mf mg mh aw mi bi"><span id="a6c6" class="mj jv hi mf b fi mk ml l mm mn">urlpatterns = [<br/>   ...,<br/>   path('payment/&lt;payment_option&gt;/',<br/>         PaymentView.as_view(), name='payment')<br/>]</span></pre><p id="9542" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在你可以使用stripe支付，你可以查看模板目录中的payment.html<strong class="ih hj">文件</strong>来了解我如何在stripe支付表单上调用<strong class="ih hj">并发布</strong></p><h1 id="f335" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">完成源代码这一部分:</h1><div class="kx ky ez fb kz la"><a href="https://github.com/Andika7/DjangoEcommerce" rel="noopener  ugc nofollow" target="_blank"><div class="lb ab dw"><div class="lc ab ld cl cj le"><h2 class="bd hj fi z dy lf ea eb lg ed ef hh bi translated">安集卡7/DjangoEcommerce</h2><div class="lh l"><h3 class="bd b fi z dy lf ea eb lg ed ef dx translated">在GitHub上创建一个帐户，为Andika7/DjangoEcommerce的发展做出贡献。</h3></div><div class="li l"><p class="bd b fp z dy lf ea eb lg ed ef dx translated">github.com</p></div></div><div class="lj l"><div class="nf l ll lm ln lj lo jn la"/></div></div></a></div><h1 id="deb3" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">结束语</h1><p id="2f14" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">谢谢你把这个教程看完。有了这个教程“<em class="mv">如何用Django </em>创建一个功能齐全的电子商务网站”就完成了。非常感谢阅读这篇文章的人</p></div></div>    
</body>
</html>