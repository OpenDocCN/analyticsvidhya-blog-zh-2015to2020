<html>
<head>
<title>“Hot’n’Pop Song Machine”: end-to-end Machine Learning classificator project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">“热门歌曲机器”:端到端机器学习分类器项目</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/hotn-pop-song-machine-end-to-end-machine-learning-classificator-project-8193538f4d76?source=collection_archive---------17-----------------------#2020-09-28">https://medium.com/analytics-vidhya/hotn-pop-song-machine-end-to-end-machine-learning-classificator-project-8193538f4d76?source=collection_archive---------17-----------------------#2020-09-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/ded7a86a47c7266821086919a2d0adae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AwZQqc5apOOBMQZ8.jpeg"/></div></div></figure><p id="e85b" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">在这篇文章中，我描述了从概念到部署的<strong class="ja hj">“Hot ' n ' pop Song Machine”</strong>项目，这是我创建的一个机器学习歌曲流行预测器，它使用了Streamlit应用程序框架和Heroku上的web主机。希望能对其他数据科学爱好者有用。</p><p id="8042" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">完整的“Hot'n'Pop Song Machine”项目的Github库可以在<a class="ae jw" href="https://github.com/daniel-isidro/hot_n_pop_song_machine" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="89f0" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">你可以在这里玩“热门流行歌曲机器”网络应用程序<a class="ae jw" href="https://hot-n-pop-song-machine.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">的<strong class="ja hj">现场演示</strong>。</a></p><h1 id="3b6c" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">目录</h1><p id="2795" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated">简介<br/>方法论<br/>需求<br/>执行指南<br/>数据采集<br/>数据准备<br/>原始数据描述<br/>数据探索<br/>建模<br/>汇总<br/>前端<br/>结论<br/>引用<br/>关于我</p><h1 id="0cc2" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">介绍</h1><p id="eb23" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated">当我发现自2010年以来存在的<a class="ae jw" href="http://millionsongdataset.com/" rel="noopener ugc nofollow" target="_blank">百万首歌曲数据集</a>时，我开始了这个项目的想法，这是一个免费提供的一百万首当代流行音乐歌曲的音频特征和元数据的集合。因为音乐是我的激情之一，所以将我的第一个数据科学项目建立在这个主题上似乎是合适的。数据集的核心由Echo Nest公司提供。它的创造者打算让它为消费者和开发者执行音乐识别、推荐、播放列表创建、音频指纹识别和分析。2014年，Echo Nest <a class="ae jw" href="https://en.wikipedia.org/wiki/The_Echo_Nest" rel="noopener ugc nofollow" target="_blank">被<a class="ae jw" href="https://github.com/daniel-isidro/hot_n_pop_song_machine/blob/master/www.spotify.com" rel="noopener ugc nofollow" target="_blank"> Spotify </a>收购</a>，Spotify将歌曲信息整合到他们的系统中。现在，这些音频功能和元数据可以通过免费的Spotify Web API获得。最后，我选择使用这个API，而不是这个项目的百万首歌曲数据集，这要感谢它的灵活性和我练习使用API的意愿。</p><p id="5c40" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">音乐信息检索是从音乐中检索信息的交叉学科。MIR是一个小型但不断发展的研究领域，有许多实际应用。参与MIR的人可能具有音乐学、心理声学、心理学、学术音乐研究、信号处理、信息学、机器学习、光学音乐识别、计算智能或这些学科的某种结合的背景。MIR应用包括:</p><ul class=""><li id="ecd7" class="la lb hi ja b jb jc jf jg jj lc jn ld jr le jv lf lg lh li bi translated">推荐系统</li><li id="349a" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">轨道分离和乐器识别</li><li id="ac7a" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">自动音乐转录</li><li id="da48" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">自动分类</li><li id="a0c4" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">音乐一代</li></ul><p id="3b84" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">根据国际唱片业联合会(IFPI)的数据，2019年全年，全球唱片市场的总收入增长了8.2 %，达到202亿美元。流媒体首次占到全球录制音乐收入的一半以上(56.1 %)。流媒体的增长超过了实体收入-5.3 %的下降，低于2018年的水平。</p><p id="5f66" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">能够预测哪些歌曲具有流行和流动所需的特征是音乐行业的一项资产，因为它可以在制作和规划营销活动时对音乐公司产生影响。这甚至对艺术家也是有益的，因为他们可以专注于音乐公司以后可以推广的歌曲，或者可以在公众中变得更受欢迎的歌曲。</p><p id="831d" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">关于MRI韵文的最新论文，涉及音频信号处理、音乐发现、音乐情感识别、复调音乐转录，使用深度学习工具。最近关于MRI的论文(2019)可以在<a class="ae jw" href="http://www.ismir.net/conferences/ismir2019.html" rel="noopener ugc nofollow" target="_blank">国际音乐信息检索学会网站</a>上找到。</p><h1 id="12ea" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">方法学</h1><h2 id="e513" class="lo jy hi bd jz lp lq lr kd ls lt lu kh jj lv lw kl jn lx ly kp jr lz ma kt mb bi translated">机器学习技术</h2><p id="fbd8" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated"><strong class="ja hj">分类</strong></p><p id="5e41" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">在这个项目中，我们将使用监督学习分类方法，从逻辑回归方法开始，因为它是最简单的分类模型。随着我们的进展，我们将使用其他非线性分类器，如决策树和支持向量机。</p><p id="0896" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">合奏学习</strong></p><p id="8e7e" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">我们将应用集成学习来组合简单模型，以创建比简单模型具有更好结果的新模型。在这方面，我们将尝试随机森林和梯度增强树。我们还将通过管道应用特性预处理(缩放、一键编码)。</p><p id="a448" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">降维</strong></p><p id="0233" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">我们将评估使用降维从数据集中移除最不重要的信息(有时是冗余列)。我们将使用递归特征消除(RFE)和主成分分析(PCA)方法。</p><h2 id="ca11" class="lo jy hi bd jz lp lq lr kd ls lt lu kh jj lv lw kl jn lx ly kp jr lz ma kt mb bi translated">统计方法</h2><p id="ab45" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated"><strong class="ja hj">预测分析</strong></p><p id="4f30" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">包括各种技术，如数据挖掘、数据建模等。</p><p id="f33f" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">探索性数据分析(EDA) </strong></p><p id="475c" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">对数据进行第一次观察，并尝试对其进行一些感觉或理解。</p><h1 id="0dbb" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">要求</h1><p id="c5a5" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated">我们将使用Python 3.7.7或更高版本的Anaconda虚拟环境和以下库/包:</p><h2 id="5399" class="lo jy hi bd jz lp lq lr kd ls lt lu kh jj lv lw kl jn lx ly kp jr lz ma kt mb bi translated">Anaconda Python包</h2><ul class=""><li id="6015" class="la lb hi ja b jb kv jf kw jj mc jn md jr me jv lf lg lh li bi translated">beautifulsoup4</li><li id="2e6e" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">jsonschema</li><li id="c20d" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">matplotlib</li><li id="dfa9" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">numpy</li><li id="d9d4" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">熊猫</li><li id="61d9" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">要求</li><li id="7316" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">scipy</li><li id="23b6" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">海生的</li><li id="ff1c" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">sci kit-学习</li><li id="23ce" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">斯波特比</li><li id="371e" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">xgboost</li></ul><p id="189b" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">为了避免将来的兼容性问题，下面是所使用的密钥库的版本:</p><pre class="in io ip iq fd mf mg mh mi aw mj bi"><span id="aa3f" class="lo jy hi mg b fi mk ml l mm mn">jsonschema==3.2.0<br/>numpy==1.18.1<br/>pandas==1.0.3<br/>scikit-learn==0.22.1<br/>spotipy==2.12.0<br/>xgboost==0.90</span></pre><h2 id="fb82" class="lo jy hi bd jz lp lq lr kd ls lt lu kh jj lv lw kl jn lx ly kp jr lz ma kt mb bi translated">Spotify帐户</h2><p id="4bbe" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated">您需要一个Spotify帐户(免费或付费)才能使用他们的web API，然后将您的项目注册为应用程序。为此，请遵循<a class="ae jw" href="https://developer.spotify.com/documentation/general/guides/app-settings/" rel="noopener ugc nofollow" target="_blank">“Spotify开发者指南”</a>中的说明:</p><ol class=""><li id="1ac0" class="la lb hi ja b jb jc jf jg jj lc jn ld jr le jv mo lg lh li bi translated">在<a class="ae jw" href="https://developer.spotify.com/dashboard/" rel="noopener ugc nofollow" target="_blank">的仪表盘</a>上，点击创建客户端ID。</li><li id="8efc" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv mo lg lh li bi translated">输入应用程序名称和应用程序描述，然后单击创建。您的应用程序已注册，应用程序视图将打开。</li><li id="f9dc" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv mo lg lh li bi translated">在应用程序视图中，单击编辑设置以查看和更新应用程序设置。</li></ol><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mp"><img src="../Images/bd4e3c945c90738b67dcde88fdc2350b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5Un4dwKBSuIj9kJh.png"/></div></div></figure><p id="abdc" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">注意:找到你的客户ID和客户机密；您在身份验证阶段需要它们。</p><ul class=""><li id="1cf6" class="la lb hi ja b jb jc jf jg jj lc jn ld jr le jv lf lg lh li bi translated">客户端ID是您的应用程序的唯一标识符。</li><li id="9a29" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">客户端机密是您在Spotify帐户和Web API服务的安全呼叫中传递的密钥。始终安全地存储客户端密钥；千万不要公开透露！如果您怀疑密钥已经泄露，请通过单击“编辑设置”视图上的链接立即重新生成密钥。</li></ul><h2 id="9f12" class="lo jy hi bd jz lp lq lr kd ls lt lu kh jj lv lw kl jn lx ly kp jr lz ma kt mb bi translated">settings.env文件</h2><p id="1915" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated">为了不将您的Spotify客户端ID和客户端机密令牌上传到Github，您可以创建一个. env文本文件并将其放入您的本地Github存储库中。在项目的根文件夹中创建一个. gitignore文件，以便。env文件不会上传到远程存储库。的内容。env文本文件应该如下所示:</p><pre class="in io ip iq fd mf mg mh mi aw mj bi"><span id="b38b" class="lo jy hi mg b fi mk ml l mm mn">{<br/>    "SPOTIPY_CLIENT_ID": "754b47a409f902c6kfnfk89964bf9f91",<br/>    "SPOTIPY_CLIENT_SECRET": "6v9657a368e14d7vdnff8c647fc5c552"<br/>  }</span></pre><h1 id="e0af" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">执行指南</h1><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/602b45f39ea4bb15d8595f72f81e35af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XSoVxJ4l1Dh-6yI0.png"/></div></div></figure><p id="931e" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">要复制项目，请按指定顺序执行以下Jupyter笔记本。</p><p id="1c41" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><a class="ae jw" href="https://github.com/daniel-isidro/hot_n_pop_song_machine/blob/master/web_scraping/ultimate_music_database_web_scraping.ipynb" rel="noopener ugc nofollow" target="_blank"> 1。网页抓取</a></p><p id="a067" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">从终极音乐数据库网站获得1962年至2020年美国每周公告牌100首热门歌曲和艺术家名字。</p><p id="e2b3" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><a class="ae jw" href="https://github.com/daniel-isidro/hot_n_pop_song_machine/blob/master/spotify_api/get_audio_features_hit_songs.ipynb" rel="noopener ugc nofollow" target="_blank"> 2。从热门歌曲中获取音频特征</a></p><p id="6db2" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">从Spotify web API获取2000年至2020年的热门歌曲的音频功能，Spotify web API的响应包含JSON格式的音频功能对象。</p><p id="8d47" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><a class="ae jw" href="https://github.com/daniel-isidro/hot_n_pop_song_machine/blob/master/spotify_api/get_audio_features_not_hit_songs.ipynb" rel="noopener ugc nofollow" target="_blank"> 3。从随机非热门歌曲中获取音频特征</a></p><p id="25aa" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">随机生成10，000首2000年至2020年的热门歌曲，并从Spotify web API获取其音频功能。</p><p id="07c6" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><a class="ae jw" href="https://github.com/daniel-isidro/hot_n_pop_song_machine/blob/master/data_prep/data_prep.ipynb" rel="noopener ugc nofollow" target="_blank"> 4。数据准备</a></p><p id="59e9" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">合并两个数据集，热门歌曲和非热门歌曲。</p><p id="2788" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><a class="ae jw" href="https://github.com/daniel-isidro/hot_n_pop_song_machine/blob/master/data_exploration/feature_selection_and_data_visualization.ipynb" rel="noopener ugc nofollow" target="_blank"> 5。数据探索</a></p><p id="c36b" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">数据可视化和特征选择。</p><p id="7876" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><a class="ae jw" href="https://github.com/daniel-isidro/hot_n_pop_song_machine/blob/master/modeling/modeling.ipynb" rel="noopener ugc nofollow" target="_blank"> 6。ML型号选择</a></p><p id="7b74" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">使用平衡数据集的机器学习模型分析和度量评估。结果是一个腌模型。</p><p id="f7ca" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><a class="ae jw" href="https://github.com/daniel-isidro/hot_n_pop_song_machine/blob/master/modeling/model_predict.ipynb" rel="noopener ugc nofollow" target="_blank"> 7。预测</a></p><p id="1aeb" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">使用腌渍模型对新歌进行预测。</p><h2 id="0ccb" class="lo jy hi bd jz lp lq lr kd ls lt lu kh jj lv lw kl jn lx ly kp jr lz ma kt mb bi translated">完善模型</h2><p id="769c" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated">如果您还想复制项目的第二部分，我们将使用不平衡的数据集进行探索，获取更多未命中歌曲的样本，并重新训练模型以尝试改进指标，请按照指定的顺序执行以下Jupyter笔记本。</p><p id="926b" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><a class="ae jw" href="https://github.com/daniel-isidro/hot_n_pop_song_machine/blob/master/spotify_api/get_audio_features_more_not_hit_songs.ipynb" rel="noopener ugc nofollow" target="_blank"> 8。获得更多随机未命中的歌曲</a></p><p id="aef1" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">随机生成20，000多首2000年至2020年间未受欢迎的歌曲，总数达到30，000首，并从Spotify web API获取其音频功能。</p><p id="130e" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><a class="ae jw" href="https://github.com/daniel-isidro/hot_n_pop_song_machine/blob/master/data_prep/data_prep_expanded_dataset.ipynb" rel="noopener ugc nofollow" target="_blank"> 9。数据准备(不平衡数据集)</a></p><p id="1c9d" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">合并两个数据集，热门歌曲和非热门歌曲。现在导致不平衡的数据集，aprox。3:1非热门歌曲对热门歌曲。</p><p id="721a" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><a class="ae jw" href="https://github.com/daniel-isidro/hot_n_pop_song_machine/blob/master/data_exploration/feature_selection_and_data_visualization_expanded_dataset.ipynb" rel="noopener ugc nofollow" target="_blank"> 10。数据探索(不平衡数据集)</a></p><p id="456b" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">机器学习模型分析和指标评估，现在具有扩展的不平衡数据集。</p><p id="2b46" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><a class="ae jw" href="https://github.com/daniel-isidro/hot_n_pop_song_machine/blob/master/modeling/modeling_expanded_dataset.ipynb" rel="noopener ugc nofollow" target="_blank"> 11。ML模型选择(不平衡数据集)</a></p><p id="7d34" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">机器学习模型分析和度量评估。结果是第二个酸洗模型。</p><p id="339d" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><a class="ae jw" href="https://github.com/daniel-isidro/hot_n_pop_song_machine/blob/master/modeling/model_predict_expanded_dataset.ipynb" rel="noopener ugc nofollow" target="_blank"> 12。预测(不平衡数据集)</a></p><p id="5d88" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">使用第二酸洗模型对新歌进行预测。</p><h1 id="a888" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">数据采集</h1><h2 id="6722" class="lo jy hi bd jz lp lq lr kd ls lt lu kh jj lv lw kl jn lx ly kp jr lz ma kt mb bi translated">网页抓取</h2><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mq"><img src="../Images/b16d8c2bc614134416ebbd1408daabaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gpBCTcjv8RKmgMLB.png"/></div></div></figure><p id="0fcb" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">为了获得从1962年到2020年美国所有的Billboard 100周热门歌曲和艺术家的名字，我们在<a class="ae jw" href="http://umdmusic.com/default.asp?Lang=English&amp;Chart=D" rel="noopener ugc nofollow" target="_blank">终极音乐数据库</a>网站上进行网络搜集。我们抓取这个网站，而不是Billboard.com的官方<a class="ae jw" href="https://www.billboard.com/" rel="noopener ugc nofollow" target="_blank"/>，因为它包含相同的数据，而且格式更方便(很少的广告，没有Javascript，没有跟踪代码)。</p><p id="7cdc" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">我们使用<a class="ae jw" href="https://www.crummy.com/software/BeautifulSoup/" rel="noopener ugc nofollow" target="_blank"> BeautifulSoup4 </a>作为我们抓取网页的Python库工具。</p><p id="73b2" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">结果是一个包含三列的数据框:年份、艺术家和标题。然后，我们将数据帧保存到CSV文件中。</p><p id="2ace" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">我们在网站上做几次擦边球，覆盖短短一二十年，避免被网站踢。</p><p id="f7f7" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">最后，我们将所有数据帧合并成一个最终的CSV文件，其中包含从1962年到2020年6月下旬的所有热门标题。</p><h2 id="4c27" class="lo jy hi bd jz lp lq lr kd ls lt lu kh jj lv lw kl jn lx ly kp jr lz ma kt mb bi translated">Spotify Web API</h2><p id="3ae6" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated"><strong class="ja hj">热门歌曲</strong></p><p id="2087" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">现在，我们采用上一步得到的数据框，删除所有早于2000年的歌曲(因为随着时间的推移，人们的偏好会发生变化，所以较老的热门歌曲可能无法预测未来的热门歌曲)，删除重复项，并用正则表达式清理艺术家和标题名称(以获得更好的搜索结果)。</p><p id="13a9" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">然后我们使用<a class="ae jw" href="https://spotipy.readthedocs.io/" rel="noopener ugc nofollow" target="_blank"> spotipy </a> Python库调用Spotify Web API，获取那些热门歌曲的音频特征。</p><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es mr"><img src="../Images/2d1d6693d03f6ed01eab6f58977941bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/0*qTwZJdLGUG7_HV_N.png"/></div></figure><p id="ce6f" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">最后，我们添加一个列success，所有行的值都是1.0，它将在项目的建模阶段为我们服务。</p><p id="45d7" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">生成的数据帧大约有8，000个条目。我们将结果存储到一个CSV文件中。</p><p id="04b8" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">非热门歌曲</strong></p><p id="d129" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">由于机器学习模型通常在平衡数据集上表现更好，我们需要获得Spotify目录中存在的其他8000首未热门歌曲。</p><p id="761b" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">因此，我们创建了一个生成大约10，000首伪随机歌曲的函数，以平衡命中/未命中歌曲数据集。</p><p id="921f" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">我们指定这些随机歌曲的年份范围与为热门歌曲选择的相同:从2000年到2020年。</p><p id="929f" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">我们将结果放在一个数据框中，然后删除重复和空值，并添加一个列success，所有行的值都为0.0，这将在项目的建模阶段为我们服务。</p><p id="7c22" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">生成的数据帧大约有9，500个条目。我们将结果存储到一个CSV文件中。</p><h1 id="751b" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">数据准备</h1><p id="e2f9" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated">在这一部分中，我们将两个数据集(热门歌曲和非热门歌曲)合并到一个数据帧中，移除重复和空值，并移除超出的非热门歌曲，从而获得平衡的数据集(与<em class="ms"> success==0.0 </em>相比，<em class="ms"> success==1.0 </em>的行数相同)。</p><p id="d610" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">结果是一个包含大约15，700个条目的数据帧。我们将结果存储到一个CSV文件中。</p><h1 id="5b6a" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">原始数据描述</h1><h2 id="7b83" class="lo jy hi bd jz lp lq lr kd ls lt lu kh jj lv lw kl jn lx ly kp jr lz ma kt mb bi translated">音频功能</h2><p id="951f" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated">为了对我们将要使用的功能有一个大致的了解，让我们看看Spotify Web API在搜索歌曲时返回的“音频功能”JSON对象。来自<a class="ae jw" href="https://developer.spotify.com/documentation/web-api/reference/tracks/get-audio-features/" rel="noopener ugc nofollow" target="_blank"> Spotify Web API参考指南</a>:</p><p id="e22d" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">持续时间_毫秒</strong></p><p id="caa0" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><em class="ms"> int </em></p><p id="d3c1" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">以毫秒为单位的音轨持续时间。</p><p id="5874" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">键</strong></p><p id="a4fd" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><em class="ms"> int </em></p><p id="de8b" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">轨道的估计总体基调。整数映射到使用标准<a class="ae jw" href="https://en.wikipedia.org/wiki/Pitch_class" rel="noopener ugc nofollow" target="_blank">音高分类符号</a>的音高。例如，0 = C，1 = C♯/D♭，2 = D，等等。如果没有检测到密钥，则值为-1。</p><p id="7d80" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">模式</strong></p><p id="8863" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><em class="ms"> int </em></p><p id="20bb" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">调式表示音轨的调式(大调或小调)，音阶的类型，其旋律内容来源于此。大调用1表示，小调用0表示。</p><p id="0054" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">时间_签名</strong></p><p id="e0f1" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><em class="ms"> int </em></p><p id="5d9a" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">轨道的估计总拍号。拍号(拍子)是一种符号约定，用于指定每个小节(或小节)中有多少拍。</p><p id="b8fb" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">声音</strong></p><p id="8c96" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><em class="ms">浮动</em></p><p id="a56e" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">从0.0到1.0的音轨是否声学的置信度度量。1.0表示音轨是声学的高置信度。该特性的值分布如下所示:</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mt"><img src="../Images/8a6623625f6cbdca79539518bcb52e9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HoIREOYfmPYCHV94.png"/></div></div></figure><p id="63d9" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">跳舞能力</strong></p><p id="5ca3" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><em class="ms">浮动</em></p><p id="3cce" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">可跳舞性描述了基于音乐元素(包括速度、节奏稳定性、节拍强度和整体规律性)的组合，一首曲目适合跳舞的程度。值0.0最不适合跳舞，1.0最适合跳舞。该特性的值分布如下所示:</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mt"><img src="../Images/54f0ccd212b7030afff70650c62b1298.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NHVrJJOnwIDPPcWo.png"/></div></div></figure><p id="f264" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">能量</strong></p><p id="7769" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><em class="ms">浮动</em></p><p id="7624" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">能量是一种从0.0到1.0的度量，代表强度和活动的感知度量。通常，高能轨道感觉起来很快，很响，很嘈杂。例如，死亡金属具有高能量，而巴赫前奏曲在音阶上得分较低。对该属性有贡献的感知特征包括动态范围、感知响度、音色、开始速率和一般熵。该特性的值分布如下所示:</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mt"><img src="../Images/12eff8487124bc0904e906413cdbffff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7FSJC8dkCc1UQNhw.png"/></div></div></figure><p id="f4af" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">仪器性</strong></p><p id="c1b7" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><em class="ms">浮动</em></p><p id="79fd" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">预测轨道是否不包含人声。“Ooh”和“aah”在这种情况下被视为乐器。Rap或口语词轨道明显是“有声的”。乐器度值越接近1.0，轨道不包含人声内容的可能性就越大。高于0.5的值旨在表示乐器轨道，但随着该值接近1.0，置信度会更高。该特性的值分布如下所示:</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mt"><img src="../Images/f0788bdcd0784818aba027ed5d468e6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VvOXLJs3DgPrft2Z.png"/></div></div></figure><p id="0047" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">活性</strong></p><p id="87a4" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><em class="ms">浮动</em></p><p id="b461" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">检测录像中是否有观众。较高的活跃度值表示音轨被现场执行的概率增加。高于0.8的值表示该轨迹很有可能是实时的。该特性的值分布如下所示:</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mt"><img src="../Images/6c00c089d0399833e5982cf097355a6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yMCIxrXQ-moLsLLe.png"/></div></div></figure><p id="e109" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">响度</strong></p><p id="c100" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><em class="ms">浮动</em></p><p id="733f" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">轨道的整体响度，以分贝(dB)为单位。响度值是整个轨道的平均值，可用于比较轨道的相对响度。响度是声音的质量，是与体力(振幅)相关的主要心理因素。值的典型范围在-60和0 db之间。该特性的值分布如下所示:</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mt"><img src="../Images/f8975aeaddad465061aca64e26a908f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YHI_SPGQxr2iHX4l.png"/></div></div></figure><p id="5a1d" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">语速</strong></p><p id="50dc" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><em class="ms">浮动</em></p><p id="d68e" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">语音检测音轨中是否存在语音单词。越是类似语音的录音(例如脱口秀、有声读物、诗歌)，属性值就越接近1.0。高于0.66的值描述可能完全由口语单词组成的轨道。介于0.33和0.66之间的值描述可能包含音乐和语音的轨道，可以是分段的，也可以是分层的，包括说唱音乐。低于0.33的值很可能代表音乐和其他非语音类轨道。该特性的值分布如下所示:</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mt"><img src="../Images/0ebdb71c792eeeaa9f203fbe944c8ebd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*snRtp1OwU5Z7HOaB.png"/></div></div></figure><p id="322f" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">化合价</strong></p><p id="a447" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><em class="ms">浮动</em></p><p id="7ddf" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">从0.0到1.0的测量值，描述轨道所传达的音乐积极性。高价曲目听起来更积极(例如，快乐、愉快、欣快)，而低价曲目听起来更消极(例如，悲伤、沮丧、愤怒)。该特性的值分布如下所示:</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mt"><img src="../Images/26f2ae20bdf9dcdc0ef199f1758c0bad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1_HqD1u109F1ZyZc.png"/></div></div></figure><p id="c0c9" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">速度</strong></p><p id="0b4e" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><em class="ms">浮动</em></p><p id="c895" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">轨道的总体估计速度，以每分钟节拍数(BPM)为单位。在音乐术语中，速度是给定作品的速度或节奏，直接来源于平均节拍持续时间。该特性的值分布如下所示:</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mt"><img src="../Images/71ca60936291fa3eb1935c81db0fdd75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sQVNz3IeXcejydlO.png"/></div></div></figure><p id="6460" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> id </strong></p><p id="f4ef" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><em class="ms">弦</em></p><p id="a0a7" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">该曲目的Spotify ID。</p><p id="1df2" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> uri </strong></p><p id="5f36" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><em class="ms">字符串</em></p><p id="3c50" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">音乐的Spotify URI。</p><p id="686e" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> track_href </strong></p><p id="d410" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><em class="ms">弦</em></p><p id="bdf8" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">指向Web API端点的链接，提供了跟踪的完整详细信息。</p><p id="8985" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">分析_网址</strong></p><p id="d0e6" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><em class="ms">字符串</em></p><p id="29a0" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">一个HTTP URL来访问这个音轨的完整音频分析。访问此数据需要访问令牌。</p><p id="2b92" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">类型</strong></p><p id="a3fa" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><em class="ms">字符串</em></p><p id="7248" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">对象类型:“音频特征”</p><h2 id="584d" class="lo jy hi bd jz lp lq lr kd ls lt lu kh jj lv lw kl jn lx ly kp jr lz ma kt mb bi translated">统计说明</h2><p id="0be6" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated"><strong class="ja hj"> 1。先看</strong></p><p id="7482" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">我们来看一下运行上面的执行指南中的步骤1到4后得到的原始数据。这是数据集的第一个条目。</p><pre class="in io ip iq fd mf mg mh mi aw mj bi"><span id="d81c" class="lo jy hi mg b fi mk ml l mm mn">data.head()</span></pre><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mu"><img src="../Images/fa4e598e78265762a1bd9b7da9ae5dcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*k3nAQDqs8DhdCueF.png"/></div></div></figure><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mv"><img src="../Images/8a3245c67f8d7f2cad78191935c0be18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HcOW85vzA1KKfQYT.png"/></div></div></figure><p id="cf71" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> 2。数据的尺寸</strong></p><pre class="in io ip iq fd mf mg mh mi aw mj bi"><span id="bc71" class="lo jy hi mg b fi mk ml l mm mn">data.shape</span><span id="dcff" class="lo jy hi mg b fi mw ml l mm mn">15714 rows × 19 columns</span></pre><p id="1d96" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> 3。数据类型</strong></p><pre class="in io ip iq fd mf mg mh mi aw mj bi"><span id="5bd3" class="lo jy hi mg b fi mk ml l mm mn">data.dtypes</span><span id="f8ac" class="lo jy hi mg b fi mw ml l mm mn">danceability        float64<br/>energy              float64<br/>key                 float64<br/>loudness            float64<br/>mode                float64<br/>speechiness         float64<br/>acousticness        float64<br/>instrumentalness    float64<br/>liveness            float64<br/>valence             float64<br/>tempo               float64<br/>type                 object<br/>id                   object<br/>uri                  object<br/>track_href           object<br/>analysis_url         object<br/>duration_ms         float64<br/>time_signature      float64<br/>success             float64<br/>dtype: object</span></pre><p id="118d" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">显然我们有14个数字特征和5个分类特征。但是后面我们会看到<code class="du mx my mz mg b">key</code>、<code class="du mx my mz mg b">mode</code>、<code class="du mx my mz mg b">time_signature</code>和<code class="du mx my mz mg b">success</code>也是范畴。</p><p id="97b9" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> 4。阶级分布</strong></p><p id="af07" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">我们正在设计一个平衡的数据集。</p><pre class="in io ip iq fd mf mg mh mi aw mj bi"><span id="7929" class="lo jy hi mg b fi mk ml l mm mn">df[df['success']==1.0].shape<br/>(7857, 19)</span><span id="3f84" class="lo jy hi mg b fi mw ml l mm mn">df[df['success']==0.0].shape<br/>(7857, 19)</span></pre><p id="46ae" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> 5。数据汇总</strong></p><pre class="in io ip iq fd mf mg mh mi aw mj bi"><span id="13b2" class="lo jy hi mg b fi mk ml l mm mn">df.describe()</span></pre><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es na"><img src="../Images/33d2ba3200e78ab50a13481ceb3b860f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WzJVqNE2t2QZFDwg.png"/></div></div></figure><p id="ebbe" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> 6。相关性</strong></p><pre class="in io ip iq fd mf mg mh mi aw mj bi"><span id="8714" class="lo jy hi mg b fi mk ml l mm mn">data.corr(method='pearson')</span></pre><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es nb"><img src="../Images/a3e933bc604522da4502077ee21fb8c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AHwwgC0KPQtzUheG.png"/></div></div></figure><p id="3319" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> 7。偏斜度</strong></p><p id="0315" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">偏斜指的是假设为高斯分布(正态或钟形曲线)，在一个方向或另一个方向上移动或挤压。歪斜结果显示正(右)或负(左)歪斜。越接近零的值显示出越少的偏斜。</p><pre class="in io ip iq fd mf mg mh mi aw mj bi"><span id="05f0" class="lo jy hi mg b fi mk ml l mm mn">data.skew()</span><span id="d371" class="lo jy hi mg b fi mw ml l mm mn">danceability       -0.757<br/>energy             -0.296<br/>key                 0.019<br/>loudness           -1.215<br/>mode               -0.699<br/>speechiness         1.310<br/>acousticness        0.645<br/>instrumentalness    2.301<br/>liveness            1.978<br/>valence             0.021<br/>tempo               0.134<br/>duration_ms         8.900<br/>time_signature     -2.628<br/>success             0.000<br/>dtype: float64</span></pre><h1 id="5528" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">数据探索</h1><h2 id="fc88" class="lo jy hi bd jz lp lq lr kd ls lt lu kh jj lv lw kl jn lx ly kp jr lz ma kt mb bi translated">数据可视化</h2><p id="7e9f" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated">目标计数图</p><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es nc"><img src="../Images/0116fa5aa5a2e1fc7a4b54354e684ffd.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/format:webp/0*4IQ_SzthmrpzgrRR.png"/></div></figure><p id="b0d8" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">箱线图</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es nd"><img src="../Images/a71acec187cdda74f1ab362c91a1fb97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xX-mDqGLj1AK1WjJ.png"/></div></div></figure><p id="ffd9" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">单变量分析:数值变量</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es ne"><img src="../Images/dd9ee14fd0080fe43a3dfd56e9ee0c67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BCR79Ilvq7K-5Yry.png"/></div></div></figure><p id="0c04" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">单变量分析:分类变量</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es nf"><img src="../Images/e8eb207186346b449fb5137becf375fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rj4b3vgIQ55YOtMg.png"/></div></div></figure><p id="030e" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">多元分析:两个数值变量</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es ng"><img src="../Images/8ebe30a7ad27773a7c382164119f43d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ivTMFnp6Xvv5YqDD.png"/></div></div></figure><p id="ce2f" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">多元分析:两个分类变量</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es nh"><img src="../Images/7ea6d8ddae906cf567dd4ac0261fd16c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Ai1NCOn_Xj2cGqiM.png"/></div></div></figure><p id="eebe" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">相关热图</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es ni"><img src="../Images/2d43dea877ea4cbec6b423b51312e3f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5wXBPg-1dAm5OS-V.png"/></div></div></figure><p id="39b4" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">感兴趣的笔记:</p><ul class=""><li id="1975" class="la lb hi ja b jb jc jf jg jj lc jn ld jr le jv lf lg lh li bi translated">我们正在使用一个平衡的数据集(通过设计)。</li><li id="2ee1" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">在非热门歌曲的duration_ms特征中有许多异常值。</li><li id="9573" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">热门歌曲比非热门歌曲具有更高的可跳性、能量和响度。</li><li id="5c52" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">热门歌曲的语音性、听觉性、器乐性和生动性都不如非热门歌曲。</li><li id="fe6d" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">热门歌曲的基调、调式、效价和节奏与非热门歌曲相似。</li><li id="a228" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">大多数热门歌曲在特征语音性、工具性、持续时间和时间特征上差异很小。</li><li id="e34b" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">歌曲或多或少平均分布在所有键中。</li><li id="d73e" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">三分之二的歌曲是大调模式。</li><li id="fa86" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">大多数歌曲都是4拍(4/4)拍号。</li><li id="c015" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">能量和响度具有相当强的相关性(0.8)。</li><li id="c6c2" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">能量和声音有中度负相关(-0.7)。</li></ul><h2 id="351c" class="lo jy hi bd jz lp lq lr kd ls lt lu kh jj lv lw kl jn lx ly kp jr lz ma kt mb bi translated">特征选择</h2><p id="fa17" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated">我们将分析我们是否需要在建模步骤中使用所有的特性，或者我们应该删除一些特性。我们将使用scikit-learn中的随机树分类器作为基础模型。</p><p id="f51a" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> 1。特征选择和随机森林分类</strong></p><p id="edfd" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">使用随机树分类器，70/30训练/测试分割，10个估计器，我们得到0.905的准确度。</p><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es nj"><img src="../Images/d606fd52e35c5eb55a5264043e3bec42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/0*XiD1fScSjLpbd_dw.png"/></div></figure><pre class="in io ip iq fd mf mg mh mi aw mj bi"><span id="270a" class="lo jy hi mg b fi mk ml l mm mn">Accuracy is:  0.905408271474019</span></pre><p id="d327" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> 2。单变量特征选择和随机森林分类</strong></p><p id="cec1" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">我们使用模块<code class="du mx my mz mg b">SelectKBest</code>和<code class="du mx my mz mg b">f_classif</code>找出5个得分最高的特征。</p><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es nk"><img src="../Images/adc5d3b40f9779e7882d0412c67ff188.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/0*QnCnQYO32Xh0ihPh.png"/></div></figure><p id="01ca" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> 3。使用随机森林的递归特征消除(RFE)</strong></p><pre class="in io ip iq fd mf mg mh mi aw mj bi"><span id="0688" class="lo jy hi mg b fi mk ml l mm mn">Chosen best 5 feature by rfe:<br/>Index(['energy', 'loudness', 'speechiness', 'acousticness', 'duration_ms'], dtype='object')</span></pre><p id="4b06" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">然后，我们只使用这5个特征重新训练随机森林模型。</p><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es nj"><img src="../Images/0f40602b4c70112db95cc2434a4e5a90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/0*S2wPaWK4CgQ7QJVX.png"/></div></figure><pre class="in io ip iq fd mf mg mh mi aw mj bi"><span id="8704" class="lo jy hi mg b fi mk ml l mm mn">Accuracy is:  0.8835630965005302</span></pre><p id="f1a6" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">只有这5个选择的特征，精度下降到0.884。</p><p id="4b60" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> 4。使用交叉验证和随机森林分类的递归特征消除</strong></p><p id="2cb2" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">现在使用来自<code class="du mx my mz mg b">sklearn.feature_selection</code>的模块<code class="du mx my mz mg b">RFECV</code>,我们不仅会找到最佳特性，还会找到我们需要多少特性才能达到最佳精度。</p><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es nl"><img src="../Images/df282837540bb41f32c7685a6d39920a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1234/format:webp/0*2NRoIL5VJb8lrPAt.png"/></div></figure><pre class="in io ip iq fd mf mg mh mi aw mj bi"><span id="56e9" class="lo jy hi mg b fi mk ml l mm mn">Optimal number of features : 13<br/>Best features : Index(['danceability', 'energy', 'key', 'loudness', 'mode',<br/>   'speechiness', 'acousticness', 'instrumentalness', 'liveness', 'valence',<br/>   'tempo', 'duration_ms', 'time_signature'], dtype='object')</span></pre><p id="f83d" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">看来我们应该使用我们所有可用的功能。</p><p id="a0dd" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> 5。基于树的特征选择和随机森林分类</strong></p><p id="9f9d" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">如果我们的目的实际上不是找到好的准确性，而是学习如何进行特征选择和理解数据，那么我们可以使用另一种特征选择方法。</p><p id="676a" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">在随机森林分类方法中，有一个<code class="du mx my mz mg b">feature_importances_</code>属性，即特征重要性(越高，特征越重要)。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es nm"><img src="../Images/a5357b88a68badffb0257d4935bf3563.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kZNuWmdjtlZBB_Vj.png"/></div></div></figure><p id="e5b1" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">特征抽出</p><p id="66e9" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">我们将使用主成分分析(PCA)进行特征提取。在进行主成分分析之前，我们需要对数据进行归一化处理，以提高主成分分析的性能。</p><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es nn"><img src="../Images/248f8e22ad9a6cf02f50895e25bdac55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/format:webp/0*akq7woowuCUKhBiZ.png"/></div></figure><p id="7c95" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">根据方差比，可以选择5个分量(0-4)作为最显著的分量。但是稍后我们会验证在这个项目中删除一些特性是不值得的，因为这个项目没有那么多特性，并且可能会失去预测能力。</p><h1 id="72ee" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">建模</h1><p id="08d7" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated">我们将使用几种ML分类器算法，主要来自<code class="du mx my mz mg b">scikit-learn</code>:</p><ul class=""><li id="4322" class="la lb hi ja b jb jc jf jg jj lc jn ld jr le jv lf lg lh li bi translated">逻辑回归</li><li id="c369" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">k-最近邻</li><li id="aaa8" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">支持向量列</li><li id="8d4e" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">决策图表</li><li id="25c5" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">随机森林</li></ul><p id="a2d3" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">另外:</p><ul class=""><li id="b338" class="la lb hi ja b jb jc jf jg jj lc jn ld jr le jv lf lg lh li bi translated">XGBoost</li></ul><p id="50ad" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">我们将使用管道在一次传递中对列和ML训练执行几次转换。我们将用标准化(对于数字列)和一键编码(对于分类列)来转换列。</p><p id="082e" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">我们将使用逻辑回归作为基础模型。</p><p id="cf0e" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">为了标准化，我们将使用<code class="du mx my mz mg b">RobustScaler()</code>(它比其他转换对异常值更健壮)，除了当使用涉及树的算法(通常对异常值免疫)时，我们将使用<code class="du mx my mz mg b">StandardScaler()</code>。</p><p id="efaf" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">对于列编码，我们将主要使用<code class="du mx my mz mg b">OneHotEncoder()</code>，测试移除第一个带标签的列(以避免共线性)是否会改进指标。出于好奇，我们也将测试<code class="du mx my mz mg b">OrdinalEncoder()</code>。</p><p id="db32" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">在模型分析中，<code class="du mx my mz mg b">GridSearchCV</code>被合并到流水线中，将非常有助于我们找到最佳的算法参数。</p><h2 id="ad54" class="lo jy hi bd jz lp lq lr kd ls lt lu kh jj lv lw kl jn lx ly kp jr lz ma kt mb bi translated">韵律学</h2><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es no"><img src="../Images/f34dd1341c7484c58423db3e39c56dca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gGE2-y3JIrT1u8rn.png"/></div></div></figure><ul class=""><li id="f070" class="la lb hi ja b jb jc jf jg jj lc jn ld jr le jv lf lg lh li bi translated">我们确实突出了重要性评分，其中<code class="du mx my mz mg b">loudness</code>具有40 %的显著性，并且由于<code class="du mx my mz mg b">energy</code>与<code class="du mx my mz mg b">loudness</code> (0.8)具有相当强的相关性，我们尝试改进度量标准，重新训练我们选择的模型(XGBoost，离群值已移除)，将<code class="du mx my mz mg b">energy</code>排除在外。但是指标越来越差，模型失去了预测能力。</li><li id="79cd" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">移除训练集中的650多个异常值似乎确实有助于改进一些指标。大多数离群值来自随机的非热门歌曲。去除异常值，这些异常值是有效的度量，并且不是来自错误，会稍微降低否定的精确度，但是会提高否定的召回率。它还提高了阳性准确率，并且没有改变阳性召回率。</li></ul><p id="ed03" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">在移除异常值之前增强指标:</p><pre class="in io ip iq fd mf mg mh mi aw mj bi"><span id="0f0f" class="lo jy hi mg b fi mk ml l mm mn">precision    recall  f1-score   support</span><span id="02ad" class="lo jy hi mg b fi mw ml l mm mn">     0.0        0.94      0.87      0.90      1543<br/>     1.0        0.88      0.95      0.91      1600</span><span id="5a24" class="lo jy hi mg b fi mw ml l mm mn">accuracy                            0.91      3143<br/>macro avg       0.91      0.91      0.91      3143<br/>weighted avg    0.91      0.91      0.91      3143</span></pre><p id="3fc7" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">移除异常值后的XGBoost指标:</p><pre class="in io ip iq fd mf mg mh mi aw mj bi"><span id="c2e6" class="lo jy hi mg b fi mk ml l mm mn">precision    recall  f1-score   support</span><span id="c56b" class="lo jy hi mg b fi mw ml l mm mn">     0.0        0.95      0.85      0.90      1561<br/>     1.0        0.87      0.95      0.91      1582</span><span id="ad5e" class="lo jy hi mg b fi mw ml l mm mn">accuracy                            0.90      3143<br/>macro avg       0.91      0.90      0.90      3143<br/>weighted avg    0.91      0.90      0.90      3143</span></pre><p id="a281" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">移除异常值后的箱线图</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es nd"><img src="../Images/fa6af526cf124449fa9450d9a3e4b380.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SIZuGbdyAPaD_iOi.png"/></div></div></figure><h2 id="e797" class="lo jy hi bd jz lp lq lr kd ls lt lu kh jj lv lw kl jn lx ly kp jr lz ma kt mb bi translated">过度拟合</h2><p id="2735" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated">在检查过度拟合时，我们需要获得每个折叠结果的训练集和测试集之间的精确度差异。如果我们的模型给我们的训练精度很高，但是测试精度很低，那么我们的模型就是过度拟合了。如果我们的模型没有给出很好的训练精度，我们可以说我们的模型是不适合的。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es np"><img src="../Images/7bbd32cc0951dbc299b6b771650b6241.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*oFSXlvC78NkpL_1T.png"/></div></div></figure><p id="04a5" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">要检查GridSearchCV找到的模型是否过拟合，可以使用<code class="du mx my mz mg b">GridSearchCV</code>的<code class="du mx my mz mg b">cv_results</code>属性。<code class="du mx my mz mg b">cv_results</code>是包含细节的字典(如<code class="du mx my mz mg b">mean_test_score</code>、<code class="du mx my mz mg b">mean_score_time</code>等)。)对于参数网格中给定的参数的每个组合。并获得训练分数相关值(如<code class="du mx my mz mg b">mean_train_score</code>、<code class="du mx my mz mg b">std_train_score</code>等)。)，我们必须传递默认为假的<code class="du mx my mz mg b">return_train_score = True</code>。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es nq"><img src="../Images/d89548342453aff6db1a78e5d7ceb98b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WeLFjiw_fpcRfad7.png"/></div></div></figure><p id="ae60" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">然后，比较训练和测试精度平均值，我们可以确保我们的模型是否过度拟合。我们可以在图表上看到，我们的模型都没有呈现高度过度拟合。交叉验证技术对此有所帮助。</p><h2 id="66b6" class="lo jy hi bd jz lp lq lr kd ls lt lu kh jj lv lw kl jn lx ly kp jr lz ma kt mb bi translated">完善模型</h2><p id="5743" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated">我们试图通过用20，000多首未命中的歌曲扩展原始数据集来改进第一个模型(执行指南中的笔记本8至12)。我们用这个不平衡的数据集重新运行所有步骤，以获得新的第二个预测模型。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es nr"><img src="../Images/97b0f41c0b225847a22e9462426f47b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dvkalkaPXtFmBZ1n.png"/></div></div></figure><p id="767b" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">这一次，原则上，随机森林模型比平衡数据集模型获得了更好的指标。</p><p id="8feb" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">第一个模型—具有平衡数据集的XGBoost指标:</strong></p><pre class="in io ip iq fd mf mg mh mi aw mj bi"><span id="ba4c" class="lo jy hi mg b fi mk ml l mm mn">AUC - Test Set: 95.35%<br/>Logloss: 3.37<br/>accuracy score: 0.902</span><span id="a5d1" class="lo jy hi mg b fi mw ml l mm mn">                precision    recall  f1-score   support</span><span id="7b62" class="lo jy hi mg b fi mw ml l mm mn">         0.0        0.95      0.85      0.90      1561<br/>         1.0        0.87      0.95      0.91      1582</span><span id="550a" class="lo jy hi mg b fi mw ml l mm mn">    accuracy                            0.90      3143<br/>   macro avg        0.91      0.90      0.90      3143<br/>weighted avg        0.91      0.90      0.90      3143</span></pre><p id="36db" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj">第二个模型—带有不平衡数据集的随机森林指标:</strong></p><pre class="in io ip iq fd mf mg mh mi aw mj bi"><span id="1f99" class="lo jy hi mg b fi mk ml l mm mn">AUC - Test Set: 96.13%<br/>Logloss: 3.23<br/>accuracy score: 0.906</span><span id="c9a2" class="lo jy hi mg b fi mw ml l mm mn">               precision    recall  f1-score   support</span><span id="72d9" class="lo jy hi mg b fi mw ml l mm mn">         0.0       0.95      0.93      0.94      5151<br/>         1.0       0.78      0.83      0.80      1557</span><span id="1055" class="lo jy hi mg b fi mw ml l mm mn">    accuracy                           0.91      6708<br/>   macro avg       0.86      0.88      0.87      6708<br/>weighted avg       0.91      0.91      0.91      6708</span></pre><p id="2da7" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">我们发现这个新模型在预测否定时比第一个模型(使用平衡数据集)表现得更好，这意味着预测否定时更精确，召回更少(否定f1得分从0.90上升到0.94)。但与此同时，新模型失去了很多对积极因素的预测能力(积极因素f1值从0.91降至0.80)。</p><p id="52cd" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">由于随机森林模型对异常值更稳健，我们在这种情况下没有删除它们。</p><h2 id="0d23" class="lo jy hi bd jz lp lq lr kd ls lt lu kh jj lv lw kl jn lx ly kp jr lz ma kt mb bi translated">成本和乐观/悲观指标</h2><p id="e21c" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated">如果我们为一家音乐公司工作，并且未能预测到一首不畅销歌曲的成本很高，我们将使用第二种模型(RF)。有了它，公司可能不会把推广预算分配给一首不流行的歌曲。这对于艺术家来说也是有用的，他们将丢弃不受欢迎的歌曲以发送给营销机构进行推广。</p><p id="063b" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">如果我们为一家音乐公司工作，与其他公司竞争可能成功的歌曲的版权，并且不预测一首热门歌曲的成本很高，或者为一位计划将具有热门歌曲特征的歌曲发送给音乐公司进行出版的艺术家工作，那么我们会选择第一种模式(XGB)。</p><p id="0cc4" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">此外，我们可以只使用一个模型，还可以根据业务需求微调预测阈值(现在中性地设置为50 %)，因此，例如，只有概率超过90 %的积极因素可以被视为热门。</p><h1 id="466a" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">摘要</h1><p id="b804" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated">经过前面的分析，我们选择了XGBoost模型作为最终的预测模型，该模型具有以下特征:</p><ul class=""><li id="702f" class="la lb hi ja b jb jc jf jg jj lc jn ld jr le jv lf lg lh li bi translated">移除异常值</li><li id="2868" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">标准缩放器()</li><li id="ad0f" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">OneHotEncoder()，删除第一列</li><li id="89c6" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv lf lg lh li bi translated">使用所有功能</li></ul><p id="190a" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">它在所有指标上都表现得相当好，没有表现出太多的过度拟合，并且在正面和负面之间给出了更一致的预测结果。</p><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es ns"><img src="../Images/c275c1a2637f526193ddf7f0a69078e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/0*F2Gbzcpne-sA6lGC.png"/></div></figure><pre class="in io ip iq fd mf mg mh mi aw mj bi"><span id="6a41" class="lo jy hi mg b fi mk ml l mm mn">AUC - Test Set: 95.91%<br/>Logloss: 3.31<br/>best params:  {'classifier__colsample_bytree': 0.8, 'classifier__gamma': 1,<br/>   'classifier__learning_rate': 0.01, 'classifier__max_depth': 5,<br/>   'classifier__n_estimators': 1000, 'classifier__subsample': 0.8}<br/>best score: 0.901<br/>accuracy score: 0.904</span><span id="34fc" class="lo jy hi mg b fi mw ml l mm mn">               precision    recall  f1-score   support</span><span id="3042" class="lo jy hi mg b fi mw ml l mm mn">         0.0       0.93      0.87      0.90      1550<br/>         1.0       0.88      0.94      0.91      1593</span><span id="5026" class="lo jy hi mg b fi mw ml l mm mn">    accuracy                           0.90      3143<br/>   macro avg       0.91      0.90      0.90      3143<br/>weighted avg       0.91      0.90      0.90      3143</span></pre><p id="bb3f" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">最后，我们提取了这个XGBoost模型，并将其用于前端web应用程序的Python脚本。</p><h1 id="03a4" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">前端</h1><p id="a633" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated">该项目前端web应用的Github存储库使用了Streamlit应用框架和Heroku上的web托管，可以在这里找到<a class="ae jw" href="https://github.com/daniel-isidro/heroku_hot_n_pop" rel="noopener ugc nofollow" target="_blank"/>。</p><h2 id="569a" class="lo jy hi bd jz lp lq lr kd ls lt lu kh jj lv lw kl jn lx ly kp jr lz ma kt mb bi translated"><strong class="ak">流线型</strong></h2><p id="2424" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated">Streamlit的开源应用程序框架是一种创建web应用程序的简单方法，全部用Python编写，免费。你可以在<a class="ae jw" href="https://www.streamlit.io/" rel="noopener ugc nofollow" target="_blank"> https://www.streamlit.io </a>找到更多信息。</p><p id="7bc8" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">对于安装Streamlit，根据源文档:</p><ol class=""><li id="7368" class="la lb hi ja b jb jc jf jg jj lc jn ld jr le jv mo lg lh li bi translated">确保您安装了Python 3.6或更高版本。</li><li id="c3c5" class="la lb hi ja b jb lj jf lk jj ll jn lm jr ln jv mo lg lh li bi translated">使用PIP安装Streamlit:</li></ol><pre class="in io ip iq fd mf mg mh mi aw mj bi"><span id="8743" class="lo jy hi mg b fi mk ml l mm mn">$ pip install -q streamlit==0.65.2</span></pre><p id="d0dd" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">3.运行hello world应用程序:</p><pre class="in io ip iq fd mf mg mh mi aw mj bi"><span id="e221" class="lo jy hi mg b fi mk ml l mm mn">$ streamlit hello</span></pre><p id="87f4" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">4.完成了。在接下来的几秒钟内，示例应用程序将在默认浏览器的新标签中打开。</p><h2 id="9af6" class="lo jy hi bd jz lp lq lr kd ls lt lu kh jj lv lw kl jn lx ly kp jr lz ma kt mb bi translated">Heroku部署</h2><p id="11df" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated">Heroku是一个平台即服务(PaaS ),可以用来在云中完全运行应用程序。要部署您的应用程序，您首先需要在<a class="ae jw" href="https://signup.heroku.com/dc" rel="noopener ugc nofollow" target="_blank"> Heroku </a>上创建一个免费帐户。</p><p id="0f2f" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">注册后，在Heroku仪表板中，您可以使用Github存储库作为Heroku上的部署方法。你必须将你的Heroku应用连接到你选择的Github库，然后打开“自动部署”。这样，每次在Github存储库上更新文件时，都会自动触发带有这些更改的Heroku重新部署。</p><p id="fe36" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">您需要在Github存储库中拥有这些文件:</p><p id="7f38" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> hotnpop.py </strong></p><p id="726c" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">web应用程序的Python代码。</p><p id="a420" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> requirements.txt </strong></p><p id="76b3" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">requirements.txt文件一起列出了应用程序依赖项。当部署一个应用程序时，Heroku读取这个文件，并使用pip install -r命令安装适当的Python依赖项。要在本地做到这一点，您可以运行以下命令:</p><pre class="in io ip iq fd mf mg mh mi aw mj bi"><span id="c3b5" class="lo jy hi mg b fi mk ml l mm mn">pip install -r requirements.txt</span></pre><p id="19f3" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">注意:必须正确安装Postgres，以便此步骤正常工作。</p><p id="a60f" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> setup.sh </strong></p><p id="f3a8" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">使用此文件，将创建一个包含config.toml文件的Streamlit文件夹。</p><p id="7bce" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> Procfile </strong></p><p id="d879" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">应用程序根目录中的文本文件，用于显式声明启动应用程序时应该执行的命令。</p><p id="8b39" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> model.pkl </strong></p><p id="11ba" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">腌ML模型。</p><p id="b951" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><strong class="ja hj"> hnp_logo.jpg </strong></p><p id="8a70" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">网页上的顶部图像。</p><h2 id="125d" class="lo jy hi bd jz lp lq lr kd ls lt lu kh jj lv lw kl jn lx ly kp jr lz ma kt mb bi translated"><strong class="ak">配置变量</strong></h2><p id="80d7" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated">为了在web应用程序中使用您的秘密Spotify web API凭据，您必须在Heroku仪表板的设置区域中设置两个配置变量SPOTIPY_CLIENT_ID和SPOTIPY_CLIENT_SECRET。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es nt"><img src="../Images/7dc2871f19d54e750cbcd71fb2222974.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*upH2YmKohXAKLFVK.png"/></div></div></figure><p id="8ef9" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">它们将充当Python环境变量。请输入不带引号的关键字和值。</p><h2 id="9d13" class="lo jy hi bd jz lp lq lr kd ls lt lu kh jj lv lw kl jn lx ly kp jr lz ma kt mb bi translated"><strong class="ak">网址</strong></h2><p id="9bf6" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated">Heroku将为你的网络应用创建一个免费的子域，比如<a class="ae jw" href="http://webapp.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">http://webapp.herokuapp.com</a>，但是你也可以在Heroku仪表盘中指定一个自定义域。</p><p id="e533" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">就是这样！</p><h2 id="80f7" class="lo jy hi bd jz lp lq lr kd ls lt lu kh jj lv lw kl jn lx ly kp jr lz ma kt mb bi translated">用户手册</h2><p id="b122" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated">你可以在这里玩web app <a class="ae jw" href="https://hot-n-pop-song-machine.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">的<strong class="ja hj">现场演示</strong>。您只需在文本框中输入歌曲名称(如juice)，或艺术家姓名后接歌曲名称(如harry styles西瓜糖)，然后按回车键。</a></p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es nu"><img src="../Images/10b6c0ad9652c5a489fbd60eca124b54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KkGd1Z23Qtv3J2Mn.png"/></div></div></figure><p id="fb86" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">然后你就得到这首歌如果今天发行的话，它火爆流行的概率，下面你可以播放这首歌的音频样本，看到相应专辑的封面(注:部分曲目由于版权原因，不包含音频样本)。</p><h1 id="7b25" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">结论</h1><p id="8149" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated">虽然准确预测哪些歌曲将出现在未来的热门歌曲列表中可能很困难，因为它涉及许多与歌曲本身无关的因素(推广预算、艺术家的可发现性、外部经济因素)，但我们在这个项目的最终模型中获得的相当好的指标表明，<strong class="ja hj">预测</strong>一首新歌是否具有<strong class="ja hj">音频特征</strong>以潜在地获得成功是一项可以通过机器学习完成的任务。</p><p id="b536" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">根据业务需求，可以应用不同的乐观和悲观模型。</p><p id="2df1" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">网络抓取、API和ML模型是对任何行业进行研究的基本工具(在这种情况下是音乐行业)。</p><p id="b766" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">做出关键决策(剔除异常值、RFE、成本矩阵……)需要<strong class="ja hj"> </strong>领域知识。</p><p id="10dc" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">创建交互式应用程序作为部署ML模型的一种方式，对于最终用户来说，可能是一种有趣而简单的方式来获得任何数据科学项目的内部知识。</p><h1 id="6bc9" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">参考</h1><p id="60b6" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated"><a class="ae jw" href="https://www.ifpi.org/ifpi-issues-annual-global-music-report/" rel="noopener ugc nofollow" target="_blank">IFPI——2019年度全球音乐报告</a></p><p id="9b4f" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><a class="ae jw" href="https://developer.spotify.com/documentation/web-api/reference/tracks/get-audio-features/" rel="noopener ugc nofollow" target="_blank">面向开发者的Spotify获取音轨的音频功能</a></p><p id="214c" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><a class="ae jw" href="https://machinelearningmastery.com/understand-machine-learning-data-descriptive-statistics-python/" rel="noopener ugc nofollow" target="_blank">机器学习精通——用Python中的描述性统计来理解你的机器学习数据</a></p><p id="4b6b" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><a class="ae jw" href="https://scikit-learn.org/stable/index.html" rel="noopener ugc nofollow" target="_blank">scikit-learn——Python中的机器学习</a></p><p id="437d" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><a class="ae jw" href="https://www.kdnuggets.com/2020/05/model-evaluation-metrics-machine-learning.html" rel="noopener ugc nofollow" target="_blank">模型评估指标</a></p><h1 id="2cbd" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">关于我</h1><p id="2fce" class="pw-post-body-paragraph iy iz hi ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hb bi translated">在<a class="ae jw" href="https://www.linkedin.com/in/daniel-isidro/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>更了解我。</p></div></div>    
</body>
</html>