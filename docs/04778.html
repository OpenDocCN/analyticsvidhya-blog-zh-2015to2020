<html>
<head>
<title>Creating Interactive Dashboard for COVID-19 data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为新冠肺炎数据创建交互式仪表板</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/creating-interactive-dashboard-for-covid-19-data-ad8dc8fd0495?source=collection_archive---------13-----------------------#2020-03-31">https://medium.com/analytics-vidhya/creating-interactive-dashboard-for-covid-19-data-ad8dc8fd0495?source=collection_archive---------13-----------------------#2020-03-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><p id="1585" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了更好地理解数据，我们需要更好的可视化。仪表板动态报告来自数据的见解。</p><p id="4f08" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在本帖中，我们将使用python库Dash构建一个反应式仪表盘。</p><h1 id="5b38" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">关于Dash</h1><p id="cf99" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">Dash是一个开源python库，用于创建交互式绘图和基于web的应用程序。Dash便于围绕我们的数据分析代码构建良好的GUI。在使用dash构建的web应用程序中，从标题标签到复杂情节的每个元素都是可定制的。</p><blockquote class="kn ko kp"><p id="1c42" class="im in kq io b ip iq ir is it iu iv iw kr iy iz ja ks jc jd je kt jg jh ji jj hb bi translated">我们不需要非常好的开发技能来使用Dash构建web应用程序。</p></blockquote><p id="142a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">回调使得dash web应用变得被动。Callback是一个简单的反应式装饰器，用于为我们的代码提供输入更改。通过输入的这种变化，我们可以过滤数据、修改图表等等。</p><p id="4c88" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们可以包含各种可以用plotly.graph_objs制作的图。</p><p id="0bd8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">React是构建UI的强大javascript库。Flask是基于WSGI的web应用框架。Dash利用flask和react创建基于web的应用程序。</p><p id="ce24" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们不需要为我们的应用程序编写任何HTML代码。我们可以使用dash_html_components中的div、img、h1、h2、table等python类。</p><p id="2d6a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了让用户输入，我们可以使用dash_core_components中的下拉菜单、滑块、日期选择器和清单类。</p><blockquote class="kn ko kp"><p id="36c8" class="im in kq io b ip iq ir is it iu iv iw kr iy iz ja ks jc jd je kt jg jh ji jj hb bi translated">选择Dash的原因之一是它的web应用程序可以并发使用，即多个用户可以同时进行多个会话。</p></blockquote><h1 id="0520" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">文章中的章节</h1><p id="c4eb" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">我们将工作流程分为三个部分。他们是</p><ol class=""><li id="6117" class="ku kv hi io b ip iq it iu ix kw jb kx jf ky jj kz la lb lc bi translated">理解数据。</li><li id="6cb9" class="ku kv hi io b ip ld it le ix lf jb lg jf lh jj kz la lb lc bi translated">实施思路和测试。</li><li id="a9be" class="ku kv hi io b ip ld it le ix lf jb lg jf lh jj kz la lb lc bi translated">正在部署web应用程序。</li></ol><h1 id="de39" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">1.理解数据</h1><blockquote class="kn ko kp"><p id="aa2c" class="im in kq io b ip iq ir is it iu iv iw kr iy iz ja ks jc jd je kt jg jh ji jj hb bi translated">理解数据对于从数据中得出更好的见解和做出更好的图是非常重要的。</p></blockquote><p id="0340" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">世界卫生组织将新冠肺炎列为疫情。有许多来源提供新冠肺炎的数据。我们正在使用来自<a class="ae li" href="https://www.kaggle.com" rel="noopener ugc nofollow" target="_blank"> kaggle的数据构建我们的仪表板。</a></p><p id="2d19" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">任何新冠肺炎数据集都有四个重要特征。它们是时间戳、确诊病例数、报告的死亡人数和康复人数。</p><p id="ae54" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这些数据也是从世界各地收集的。因此，国家和州也将在观想中扮演重要角色。</p><p id="193a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们的仪表板必须解释随着时间的推移在全球以及特定国家收到的案件率。也是从一月开始到现在，这个新冠肺炎是如何周游世界的。</p><p id="7360" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了更好地理解上述所有特征并满足我们的要求，我们需要绘制以下图表:</p><p id="c209" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">a.时间戳与病例数(确诊、死亡和痊愈)的散点图/线图/条形图。</p><p id="7cc2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">b.一个国家内时间标记与病例数(确诊、死亡和痊愈)的状态散点图/线图/条形图。</p><p id="0a36" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">c.世界地图上渐进月明智的信息阴谋。</p><p id="3876" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们将从一个国家收集数据并进行分析。在这篇文章中，我们使用了印度的数据。我们将绘制以下图表</p><p id="cc66" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">a.国内各州与病例数(确诊、死亡和康复)的散点图/线图/条形图。</p><p id="99db" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">b.在世界地图上绘制信息。</p><h1 id="5728" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">2.实施思路和测试</h1><p id="8b29" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">在这一节中，我们将为上一节中确定的所有情节编写代码。</p><p id="bd80" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们需要以下包来继续</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="fa5a" class="ls jl hi lo b fi lt lu l lv lw">import dash<br/>import dash_table<br/>import dash_core_components as dcc<br/>import dash_html_components as html<br/>import plotly.graph_objects as go<br/>from dash.dependencies import Input, Output<br/>import pandas as pd</span></pre><p id="f3de" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">加载数据并进行所有必要的预处理。预处理包括清理数据、从现有要素创建新要素以及准备好数据以进行处理。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="fecc" class="ls jl hi lo b fi lt lu l lv lw">ind_df['Total cases'] = ind_df['Total Confirmed cases (Indian National)'] + ind_df['Total Confirmed cases ( Foreign National )']</span><span id="46db" class="ls jl hi lo b fi lx lu l lv lw">ind_df['Active cases'] = ind_df['Total cases'] - (ind_df['Cured/Discharged/Migrated'] + ind_df['Deaths'])</span><span id="93c6" class="ls jl hi lo b fi lx lu l lv lw">countries = allData['Country/Region'].unique()</span></pre><p id="fd87" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">默认情况下，选项卡上的标题是“破折号”。我们可以用下面的代码把它改成我们自己的标题。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="1c3d" class="ls jl hi lo b fi lt lu l lv lw">app = dash.Dash(__name__, external_stylesheets=external_stylesheets)<br/>app.title='Coronavirus'</span></pre><p id="1e9d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">编写任何web应用程序的关键部分是创建布局。部件的顺序和样式在这一部分决定。我们将为每个组件提供一个唯一的id，以便更好地访问。我们的布局如下</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="9ef6" class="ls jl hi lo b fi lt lu l lv lw">app.layout = html.Div(<br/>    style={ 'font-family':"Courier New, monospace" },<br/>    children=[<br/>    html.H1('Dashboard of  Coronavirus (COVID-19)',style={'color'<br/>             :'#a8a222'}),<br/>    html.Div(className="row", children=[<br/>        html.Div(className="four columns", children=[<br/>            html.H5('Country',style={'color': '#296665'}),<br/>            dcc.Dropdown(<br/>                id='country',<br/>                options=[{'label':c, 'value':c} for c in countries],<br/>                value='Italy'<br/>            )<br/>        ]),<br/>        html.Div(className="four columns", children=[<br/>            html.H5('State / Province',style={'color': '#296665'}),<br/>            dcc.Dropdown(<br/>                id='state'<br/>            )<br/>        ]),<br/>        html.Div(className="four columns", children=[<br/>            html.H5('Selected Metrics',style={'color': '#296665'}),<br/>            dcc.Checklist(<br/>                id='metrics',<br/>                options=[{'label':m, 'value':m} for m <br/>                         in ['Confirmed', 'Deaths', 'Recovered']],<br/>                value=['Confirmed', 'Deaths']<br/>            )<br/>        ])<br/>    ]),<br/>    dcc.Graph(<br/>        id="plot_new_metrics",<br/>        config={ 'displayModeBar': False }<br/>    ),<br/>    html.H3('State wise plot',style={'color':'#a8a222'}),</span><span id="e626" class="ls jl hi lo b fi lx lu l lv lw">    dcc.Graph(<br/>        id="plot_new_states",<br/>        config={ 'displayModeBar': False }<br/>    ),<br/>    html.H3('Coronavirus (COVID-19) in India',<br/>    style{'color':'#a8a222'}),</span><span id="0cf6" class="ls jl hi lo b fi lx lu l lv lw">    dcc.Graph(id = 'plot_india'),<br/>    html.H3('Coronavirus (COVID-19) representation in <br/>    World  map',style={'color':'#a8a222'}),</span><span id="b439" class="ls jl hi lo b fi lx lu l lv lw">    dcc.Graph(id = 'countryMap'),<br/>    dcc.Slider(<br/>        id='my-slider',<br/>            min=0,<br/>            max=10,<br/>            step=None,<br/>            marks={<br/>            0: 'Jan ',<br/>            5: 'Feb',<br/>            10: 'March',<br/>            },<br/>            value=5<br/>            )<br/>    ,<br/>    dcc.Graph(id='indiamap'),<br/>    html.Div(id='slider-output-container'),<br/>    html.H3('State wise chart of Coronavirus (COVID-19) <br/>             in India',style={'color':'#a8a222'}),<br/>    html.Div(id='output-data-upload')</span><span id="8a16" class="ls jl hi lo b fi lx lu l lv lw">])</span></pre><p id="5b06" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">代码的大部分是不言自明的。但是我们会在制作情节之前检查一次代码。Div、H1和H3是替换html标签的dash_html_components的类。我们可以通过将它作为参数传递来给每个组件添加样式。</p><p id="0de9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">下拉菜单、检查表、滑块和图表是<a class="ae li" href="https://dash.plotly.com/dash-core-components" rel="noopener ugc nofollow" target="_blank"> dash_core组件</a>的类别。我们包括一个用于选择国家的下拉列表、一个用于选择州的下拉列表和一个用于选择指标的清单。我们给每个组件一个唯一的id，以便从代码的其他部分访问它们。在上一节中，有足够的关于回调的解释。因此，我们将开始编写代码。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="6962" class="ls jl hi lo b fi lt lu l lv lw">@app.callback(<br/>    Output('plot_new_metrics', 'figure'),<br/>    [Input('country', 'value'), Input('state', 'value')<br/>    ,Input('metrics', 'value')]<br/>             )<br/>def update_plot_new_metrics(country, state, metrics):<br/>    data = reactive_data(country, state)<br/>    return barchart(data, metrics,yaxisTitle="cumulaive Cases ")</span></pre><p id="5813" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">reactive_data支持我创建的函数，用于更新与国家对应的州下拉列表。</p><figure class="lj lk ll lm fd lz er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es ly"><img src="../Images/341da8f51a0bbac08a12117a0753a25e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EhWAwfVvC8lDHxLwDUQucQ.jpeg"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx translated">控制流程</figcaption></figure><p id="1147" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">以上是从布局到回调生成输出图的控制流程。输出图如下所示</p><figure class="lj lk ll lm fd lz er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es mk"><img src="../Images/d044e47b456cb62496b2466d5719630b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gy_tEfF2vkhOoBh8v0OkBQ.png"/></div></div></figure><p id="7cf7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">同样，我们也可以编写代码来制作状态散点图。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="f1cb" class="ls jl hi lo b fi lt lu l lv lw">@app.callback(<br/>    Output('plot_new_states', 'figure'),<br/>    [Input('country', 'value'), Input('state', 'value')<br/>                               , Input('metrics', 'value')])<br/>def update_plot_new_states(country, state, metrics):<br/>    data = reactive_data(country, state)<br/>    return barchartstate(data, metrics, yaxisTitle="cumulaive <br/>                         Cases")</span></pre><p id="f29b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们在第一部分中决定的第三个图是“世界地图上信息的渐进月智能图”。</p><p id="673a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为此，我们需要用户输入月份。这次我们将使用dash_core_components中的滑块。根据输入更新地图的支持功能是</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="c9dc" class="ls jl hi lo b fi lt lu l lv lw">def makeScatterMap(value):<br/>    if(value==0):<br/>        allData1=allData[allData['dateStr'].isin(da1)]<br/>    elif(value==5):<br/>        allData1=allData[allData['dateStr'].isin(da2)]<br/>    else:<br/>        allData1=allData[allData['dateStr'].isin(da3)]<br/>    allData1['Country'] = allData1['Country/Region']<br/>    world_data = pd.merge(world_coordinates,allData1,on='Country')<br/>    world_data['Confirmed']=world_data['Confirmed'].astype(str)<br/>    world_data['Deaths']=world_data['Deaths'].astype(str)<br/>    scl = [0,"rgb(150,0,0)"],[0.125,"rgb(100, 0, 0)"],<br/>           [0.25,"rgb(0, 25, 0)"],\<br/>         [0.375,"rgb(0, 152, 0)"],[0.5,"rgb(44, 255, 0)"]<br/>               ,[0.625,"rgb(151, 0, 0)"],\<br/>         [0.75,"rgb(255, 234, 0)"],[0.875,"rgb(255, 111, 0)"]<br/>                ,[1,"rgb(255, 0, 0)"]<br/>    data = [<br/>    go1.Scattergeo(<br/>            lat = world_data['latitude'],<br/>            lon=world_data['longitude'],<br/>            text=world_data['Country']+'\n'+'Confirmed : '<br/>                +(world_data['Confirmed'])+'\n'+<br/>                'Deaths : '+(world_data['Deaths']),<br/>             marker=dict(<br/>               color=(world_data['Recovered']%100)*0.01,<br/>                      size=7,opacity=0.7)<br/>                         )</span><span id="3b24" class="ls jl hi lo b fi lx lu l lv lw">             ]<br/>    fig=go1.Figure(data=data)<br/>    fig.update_layout(title='World map',height=700)<br/>    return fig</span></pre><p id="f78c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">根据用户的输入，我们将过滤数据，并使用来自<a class="ae li" href="https://plotly.com/python-api-reference/generated/plotly.graph_objects.Figure.html" rel="noopener ugc nofollow" target="_blank"> graph_objects </a>的散点图在世界地图上绘制信息。</p><p id="1362" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">该图的回叫和相应功能为</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="9d37" class="ls jl hi lo b fi lt lu l lv lw">@app.callback(<br/>    Output('countryMap', 'figure'),<br/>    [Input('my-slider', 'value')]<br/>              )<br/>def update_plot_world_metrics(value):<br/>    return makeScatterMap(value)</span></pre><p id="cb35" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，我们将在本节的第二部分分析来自印度的数据。</p><p id="fe76" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">首先，我们将制作一个简单的柱状图，就像我们在第一部分所做的那样</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="d21d" class="ls jl hi lo b fi lt lu l lv lw">@app.callback(<br/>    Output('plot_india', 'figure'),<br/>    [Input('metrics', 'value')]<br/>               )<br/>def update_plot_india_metrics(country, state, metrics):<br/>    return barchartindia()</span></pre><p id="86f6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">条形图印度功能代码是</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="052d" class="ls jl hi lo b fi lt lu l lv lw">def barchartindia():</span><span id="54d8" class="ls jl hi lo b fi lx lu l lv lw">  ds=ind_df.sort_values('Active cases',ascending=True)<br/>  ds=ds[['Active cases','Name of State / UT']]<br/>  figure = go.Figure(data=[<br/>  go.Bar(y=ds['Active cases'], x = ds['Name of State / UT'])])<br/>  figure.update_layout(<br/>              barmode='group', legend=dict(x=.05, y=0.95, font<br/>        =  {'size':15}, bgcolor='rgba(240,200,240,0.5)'),<br/>              plot_bgcolor='#FFFFFF', font=tickFont) \<br/>          .update_xaxes(<br/>              title="", tickangle=-90, type='category'<br/>             ,showgrid=True, gridcolor='#DDDDD0',<br/>              tickfont=tickFont, ticktext=ds['Name of State / UT']<br/>              ,tickvals=ds['Name of State / UT']) \<br/>          .update_yaxes(<br/>              title="active cases", showgrid=True, <br/>                gridcolor='#DDDDDD')</span><span id="ca75" class="ls jl hi lo b fi lx lu l lv lw">  return figure</span></pre><p id="b2fe" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们制定的计划是</p><figure class="lj lk ll lm fd lz er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es ml"><img src="../Images/62da4a71df372a9bc4cffa3032cbe62e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EN24w2PVT9lq6V4pY235Hw.png"/></div></div></figure><p id="0995" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们现在将在世界地图上标出同样的信息。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="1d21" class="ls jl hi lo b fi lt lu l lv lw">@app.callback(<br/>    Output('indiamap', 'figure'),<br/>    [Input('my-slider', 'value')]<br/>             )<br/>def update_plot_indiamap_metrics(value):<br/>    return makeScatterMapindia(value)</span></pre><figure class="lj lk ll lm fd lz er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es mm"><img src="../Images/aa688173dcb49f862aa23933ac0d8127.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RuI8Hov_uTSMqsDuXjsbYg.png"/></div></div></figure><p id="b015" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">以上是在世界地图上绘制印度信息的回调控制流程。</p><p id="837d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">最后，我们将在我们的web应用程序中显示部分数据帧，如<a class="ae li" href="https://dash.plotly.com/datatable" rel="noopener ugc nofollow" target="_blank"> dash table </a>。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="a32a" class="ls jl hi lo b fi lt lu l lv lw">def update_output(contents, filename,k):<br/>  max_value = ind_df['Deaths'].max()<br/>  new_d = ind_df[['Name of State <br/>      / UT','Cured/Discharged/Migrated','Deaths','Total <br/>        cases','Active cases']]<br/>  return html.Div([<br/>  dash_table.DataTable(<br/>   id='table',<br/>   columns=[{"name": i, "id": i} for i in new_d.columns],<br/>   data=new_d.to_dict("rows"),<br/>   style_data={<br/>   'border':'1px solid black',<br/>   'font-size':'1.2em'<br/>   },<br/>   style_data_conditional=[<br/>   {<br/>   'if': {<br/>   'column_id':'Deaths',<br/>   'filter_query':'{Deaths} &gt; 0'<br/>   },<br/>   'backgroundColor':'red'<br/>   },<br/>   {<br/>   'if': {<br/>   'column_id':'Active cases',<br/>   'filter_query':'{Active cases} &gt; 10'<br/>   },<br/>   'backgroundColor':'orange'<br/>   },],<br/>   style_cell={'width': '300px',<br/>   'height': '60px',<br/>   'textAlign': 'left',<br/>   'border' : '1px solid grey'},<br/>   style_table={<br/>   'height':'600px',<br/>   'width':'900px',<br/>   'margin-left':'200px',<br/>   'margin right':'40 px'<br/>   })<br/>  ])</span></pre><p id="2fa0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">DashTable类用于显示使用上述函数的部分数据帧。</p><p id="3f8e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，在本节的最后一部分，我们将在部署之前测试我们的web应用程序。</p><p id="1503" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">遵循以下简单步骤:</p><ol class=""><li id="7432" class="ku kv hi io b ip iq it iu ix kw jb kx jf ky jj kz la lb lc bi translated">打开终端并运行“python app.py”。</li><li id="7b9b" class="ku kv hi io b ip ld it le ix lf jb lg jf lh jj kz la lb lc bi translated">启动浏览器并进入<a class="ae li" href="http://127.0.0.1:8050/" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:8050/ </a></li><li id="9975" class="ku kv hi io b ip ld it le ix lf jb lg jf lh jj kz la lb lc bi translated">我们将在那里看到我们的web应用程序。如果代码中有任何错误，将会在右上角显示详细的追溯信息，如下所示</li></ol><figure class="lj lk ll lm fd lz er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es mn"><img src="../Images/c9d610c33e223a57fa64297694a11db7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wBVkhb-QlX4AG80wqj5d1g.png"/></div></div></figure><p id="7e14" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">4.开始修复它们，以便与您的应用程序进行交互。</p><p id="acc8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这一部分的一个常见错误是“关键错误”。若要修复此错误，请检查部分代码，并使用从命令“dataframe.columns”获得的列表交叉检查列名。</p><h1 id="e3d3" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">3.部署Web应用程序</h1><p id="eec5" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">这是文章的最后一部分。大多数开发者更喜欢<a class="ae li" href="https://dashboard.heroku.com/apps" rel="noopener ugc nofollow" target="_blank"> heroku </a>或<a class="ae li" href="https://aws.amazon.com" rel="noopener ugc nofollow" target="_blank">弹性豆茎</a>。</p><p id="bdfc" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">首先，我们将介绍部署到heroku的步骤。dash部署到heroku 的官方文档非常清晰明了。以下步骤摘自该文档。</p><ol class=""><li id="8f80" class="ku kv hi io b ip iq it iu ix kw jb kx jf ky jj kz la lb lc bi translated">为您的项目创建新文件夹。</li></ol><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="308d" class="ls jl hi lo b fi lt lu l lv lw">$ mkdir dash_app<br/>$ cd dash_app</span></pre><p id="db75" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">2.用git初始化这个项目文件夹并激活虚拟环境。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="647e" class="ls jl hi lo b fi lt lu l lv lw">$ git init        <br/>$ virtualenv env<br/>$ source env/bin/activate </span></pre><p id="9c80" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">3.Virtualenv创建一个新的python实例。所以我们需要重新安装依赖项。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="e498" class="ls jl hi lo b fi lt lu l lv lw">$ pip install dash <br/>$ pip install plotly</span></pre><p id="1daf" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">4.我们需要另一个名为gunicorn的依赖项。</p><figure class="lj lk ll lm fd lz er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es mo"><img src="../Images/b1ad918e62ce7879f589ea4548e8debb.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/1*aE0Ojnq0sekLKRdjt677sQ.png"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx translated">摘自<a class="ae li" href="https://chrisvoncsefalvay.com/2019/08/28/deploying-dash-on-amazon-ecs/" rel="noopener ugc nofollow" target="_blank">来源</a></figcaption></figure><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="1f31" class="ls jl hi lo b fi lt lu l lv lw">$ pip install gunicorn</span></pre><p id="1cab" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">5.现在将上面创建的app.py粘贴到项目文件夹中。还要在项目文件夹中添加<a class="ae li" href="https://devcenter.heroku.com/articles/procfile" rel="noopener ugc nofollow" target="_blank"> Procfile </a>和requirements.txt。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="f7df" class="ls jl hi lo b fi lt lu l lv lw">#Procfile<br/>web: gunicorn app:server </span></pre><p id="0be5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">(确保Procfile中的P是大写)</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="72e4" class="ls jl hi lo b fi lt lu l lv lw">$ pip freeze &gt; requirements.txt</span></pre><p id="fc63" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">6.现在通过初始化heroku并将其添加到git来部署文件。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="77f9" class="ls jl hi lo b fi lt lu l lv lw">$ heroku create my-app #Corona-app is name of Corona app<br/>$ git add . <br/>$ git commit -m 'Version 1 of  app ' <br/>$ git push heroku master </span></pre><p id="fbc6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">7.您可以使用以下代码片段重新部署应用程序</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="7853" class="ls jl hi lo b fi lt lu l lv lw">$ git status # view the changes <br/>$ git add .  <br/>$ git commit -m 'a description of the changes' <br/>$ git push heroku master</span></pre><p id="c124" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您可以从heroku的dashboard启动应用程序或访问https:// <app-name> .herokuapp.com/</app-name></p><p id="e225" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">搞定了！！！</p><p id="2144" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">还有一些人喜欢将应用程序部署到aws。您可以按照这里提到的<a class="ae li" href="https://www.phillipsj.net/posts/deploying-dash-to-elastic-beanstalk/" rel="noopener ugc nofollow" target="_blank">步骤进行操作。</a></p><h1 id="85b3" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">结论</h1><p id="9b88" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">阅读完本文后，我们可以为任何数据集创建自己的仪表板并部署它。上述文章的完整代码可以在这里<a class="ae li" href="https://github.com/maheshsai252/dash-corona" rel="noopener ugc nofollow" target="_blank">获得。</a></p><p id="1358" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">感谢阅读:)</p><h2 id="a7c5" class="ls jl hi bd jm mp mq mr jq ms mt mu ju ix mv mw jy jb mx my kc jf mz na kg nb bi translated">参考</h2><p id="8d19" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">我从以下文章中获得了一些见解</p><div class="nc nd ez fb ne nf"><a rel="noopener follow" target="_blank" href="/plotly/introducing-dash-5ecf7191b503"><div class="ng ab dw"><div class="nh ab ni cl cj nj"><h2 class="bd hj fi z dy nk ea eb nl ed ef hh bi translated">🌟引入破折号🌟</h2><div class="nm l"><h3 class="bd b fi z dy nk ea eb nl ed ef dx translated">用纯Python创建反应式Web应用程序</h3></div><div class="nn l"><p class="bd b fp z dy nk ea eb nl ed ef dx translated">medium.com</p></div></div><div class="no l"><div class="np l nq nr ns no nt me nf"/></div></div></a></div><div class="nc nd ez fb ne nf"><a href="https://towardsdatascience.com/how-to-build-a-complex-reporting-dashboard-using-dash-and-plotl-4f4257c18a7f" rel="noopener follow" target="_blank"><div class="ng ab dw"><div class="nh ab ni cl cj nj"><h2 class="bd hj fi z dy nk ea eb nl ed ef hh bi translated">如何使用Dash和Plotly构建报告仪表板</h2><div class="nm l"><h3 class="bd b fi z dy nk ea eb nl ed ef dx translated">在这篇博文中，我将提供如何使用Dash(一种Python语言)构建报告仪表板的分步指南…</h3></div><div class="nn l"><p class="bd b fp z dy nk ea eb nl ed ef dx translated">towardsdatascience.com</p></div></div><div class="no l"><div class="nu l nq nr ns no nt me nf"/></div></div></a></div></div></div>    
</body>
</html>