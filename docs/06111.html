<html>
<head>
<title>Elasticsearch — the basics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">弹性搜索—基础知识</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/elasticsearch-d8fdbc830e51?source=collection_archive---------37-----------------------#2020-05-11">https://medium.com/analytics-vidhya/elasticsearch-d8fdbc830e51?source=collection_archive---------37-----------------------#2020-05-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f299" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大家好，我希望你们都做得很好，在这篇文章中，我们将和我以及我的同事<a class="jd je ge" href="https://medium.com/u/e8fd96c21209?source=post_page-----d8fdbc830e51--------------------------------" rel="noopener" target="_blank"> Youssef Amzil </a>谈谈Elasticsearch的基础知识，什么是Elasticsearch，以及如何使用它，享受它。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jf"><img src="../Images/f965de6003b7513eee5d8c38ce29f4cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cjPPsb24lPt4-SIt.png"/></div></div></figure></div><div class="ab cl jr js gp jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="hb hc hd he hf"><h2 id="37f1" class="jy jz hi bd ka kb kc kd ke kf kg kh ki iq kj kk kl iu km kn ko iy kp kq kr ks bi translated"><strong class="ak">什么是弹性搜索</strong>？</h2><p id="cc08" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">Elasticsearch是一个实时分布式开源搜索和分析引擎，它是用java开发的，被世界上许多大公司使用，如stack-overflow、Slack、GitHub等等。</p><p id="aa95" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们知道了什么是Elasticsearch，让我们看看Elasticsearch的主要特点和优势。</p><h2 id="bacc" class="jy jz hi bd ka kb kc kd ke kf kg kh ki iq kj kk kl iu km kn ko iy kp kq kr ks bi translated">弹性搜索功能</h2><ul class=""><li id="774d" class="ky kz hi ih b ii kt im ku iq la iu lb iy lc jc ld le lf lg bi translated">Elasticsearch是一个开源软件，在Apache 2.0许可下发布。</li><li id="0ee6" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">Elasticsearch可扩展至数Pb的结构化和非结构化数据。</li><li id="bbfd" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">Elasticsearch可以作为类似MongoDB和RavenDB的文档库的替代。</li><li id="9835" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">Elasticsearch使用反规范化来提高搜索性能。</li></ul><h2 id="4da5" class="jy jz hi bd ka kb kc kd ke kf kg kh ki iq kj kk kl iu km kn ko iy kp kq kr ks bi translated">弹性搜索优势</h2><ul class=""><li id="59de" class="ky kz hi ih b ii kt im ku iq la iu lb iy lc jc ld le lf lg bi translated">Elasticsearch是用Java编写的，这使得它可以跨平台(即兼容所有平台)</li><li id="da4f" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">Elasticsearch是实时的，换句话说，一秒钟后添加的文档就可以在这个引擎中搜索到了</li><li id="7e5c" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">Elasticsearch是分布式的，这使得它很容易在任何大型组织中扩展和集成。</li><li id="1ae7" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">Elasticsearch使用JSON对象作为响应，这使得用大量不同的编程语言调用Elasticsearch服务器成为可能。</li></ul><p id="86c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们深入研究Elasticsearch的用法之前，我们需要了解一些关键概念。</p><h2 id="8e74" class="jy jz hi bd ka kb kc kd ke kf kg kh ki iq kj kk kl iu km kn ko iy kp kq kr ks bi translated">术语</h2><p id="bdfc" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated"><strong class="ih hj"> <em class="lm">集群</em> </strong>是一个节点的集合，一个集群默认的名称是Elasticsearch，当搜索的时候我们在集群中搜索。</p><p id="3c64" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="lm">节点</em> </strong>节点是运行在服务器上的Elasticsearch的一个实例，它响应发送到集群的请求，它依赖于物理硬件的能力(RAM、CPU、存储……)。我们认为节点是存储数据的单元。</p><p id="390e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="lm">索引</em> </strong>文档集合，无论是否符合<strong class="ih hj"><em class="lm"/></strong>类型，一个簇中的索引数量不受限制，搜索时使用索引名称。</p><p id="0d9a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="lm">类型</em> </strong>是文档的一种表示，它类似于OOP中的类概念，每种类型都有一个映射。</p><p id="aaaa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="lm">映射</em> </strong>:描述类型的字段及其类型{字符串日期或整数等。}映射既可以明确指定，也可以在文档被索引时自动生成，这就是我们所说的“动态映射”。</p><p id="0bbe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="lm"> Documents </em> </strong>是存储在JSON对象中的索引信息的基本单位，它包含的字段是键值对，值可以是各种类型之一:字符串、日期、对象……文档就像OOP范例中的对象。</p><p id="3b46" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，我们还可以谈论两个概念<strong class="ih hj"> <em class="lm">分片</em> </strong>或<strong class="ih hj"> <em class="lm">分片</em> </strong>和<strong class="ih hj"> <em class="lm">副本</em> </strong>。</p><p id="81d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="lm"> Shard </em> </strong>是一个索引片段，它可以比索引本身大得多，因为它独立于索引，所以可以存储在另一个节点上，我们可以在创建索引时指定碎片数。碎片允许跨碎片分布操作，这有助于提高性能。</p><p id="a69a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="lm">副本</em> </strong>:是一个分片的副本，以增加其可用性，以防包含该分片的节点出现故障，然后我们使用存储在不同节点的副本。默认情况下，每个碎片都有一个副本。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es ln"><img src="../Images/4dbffb508fb72d5f259c8bc01346178b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zYd0goQT-IKDx39MxAdWMw.png"/></div></div></figure></div><div class="ab cl jr js gp jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="hb hc hd he hf"><p id="8b12" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们使用这个<a class="ae lo" href="https://www.elastic.co/downloads/elasticsearch" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">链接</strong> </a> <strong class="ih hj">下载并安装Elasticsearch。</strong></p><p id="3f52" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下载文件后，您可以使用下面的命令运行它，但是首先检查您是否设置了JAVA_HOME变量。</p><p id="5076" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Linux上</p><pre class="jg jh ji jj fd lp lq lr ls aw lt bi"><span id="5e56" class="jy jz hi lq b fi lu lv l lw lx">$ cd elasticsearch-2.1.0/bin</span><span id="ac7e" class="jy jz hi lq b fi ly lv l lw lx">$ elasticsearch</span></pre><p id="3a1e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Windows上</p><pre class="jg jh ji jj fd lp lq lr ls aw lt bi"><span id="e6bc" class="jy jz hi lq b fi lu lv l lw lx">&gt; cd elasticsearch-7.6.2\bin</span><span id="f408" class="jy jz hi lq b fi ly lv l lw lx">&gt; .\elasticsearch.bat</span></pre><p id="a5da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">或者只需执行bin文件夹中的elasticsearch.bat文件。</p><p id="3184" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行实例后，Elasticsearch web界面的默认端口是9200，或者您可以通过更改存储在bin目录下的elasticsearch.yml文件中的HTTP.port属性来更改它。然后转到<a class="ae lo" href="http://localhost:9200" rel="noopener ugc nofollow" target="_blank"> http://localhost:9200 </a>来检查实例是否正确运行，您应该会得到如下消息:</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div class="er es lz"><img src="../Images/faded67d59a579f3af5106c708e9b719.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*Q8PDxq3LFg_HHDCskqGapQ.png"/></div><figcaption class="ma mb et er es mc md bd b be z dx translated"><a class="ae lo" href="http://localhost:9200/" rel="noopener ugc nofollow" target="_blank"> http://localhost:9200/ </a></figcaption></figure><p id="8709" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们创建我们的第一个索引，在此之前，我们需要一个API客户端，如postman或失眠症患者，向Elasticsearch服务器发出请求，或者我们可以使用curl命令。</p><p id="93d8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要获得关于我们刚刚创建的集群的更多详细信息，我们可以使用以下请求:</p><pre class="jg jh ji jj fd lp lq lr ls aw lt bi"><span id="d9d0" class="jy jz hi lq b fi lu lv l lw lx"><strong class="lq hj">GET</strong> localhost:9200/_cat/health?v</span></pre><p id="c697" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将在不同的信息中显示集群的当前状态，如节点和碎片的数量等。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es me"><img src="../Images/644067e359d128be6e683c568909789e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d2Df7nRJsIwcvK0TzCuMrA.png"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx translated">关于我们星团的细节。</figcaption></figure><p id="9b6f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们使用PUT HTTP request创建一个名为students的索引。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mf"><img src="../Images/e4e674987eee53528cfb1f646e1362a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JYd2nJHcLkgtLn_q"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx translated">创建“学生”索引。</figcaption></figure><p id="5c21" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">太棒了。！我们的索引“学生”已成功创建。现在，让我们向“学生”索引添加一些文档。</p><pre class="jg jh ji jj fd lp lq lr ls aw lt bi"><span id="cba8" class="jy jz hi lq b fi lu lv l lw lx"><strong class="lq hj">POST </strong>: localhost:9200/{index_name}/_doc/{document_id}</span></pre><p id="d5ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如您在请求-响应中看到的，我们拥有关于文档的所有信息。</p><pre class="jg jh ji jj fd lp lq lr ls aw lt bi"><span id="56f3" class="jy jz hi lq b fi lu lv l lw lx">localhost:9200/students/_doc/1<br/>{<br/> "name":"Youssef",<br/> "street":"street 1",<br/> "city":"Agadir",<br/> "age":22<br/>}</span></pre><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mg"><img src="../Images/4a963fd5d4e42f3696bc9636fc5121e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*83SqTFcve7tqkA1S"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx translated">将第一个学生添加到索引中。</figcaption></figure><p id="9c83" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们实际上可以在不指定id的情况下添加文档，id会自动生成。</p><pre class="jg jh ji jj fd lp lq lr ls aw lt bi"><span id="d568" class="jy jz hi lq b fi lu lv l lw lx"><strong class="lq hj">POST : </strong>localhost:9200/students/_doc<br/>{<br/> "name":"Ayoub Babakhouya",<br/> "street":"street 36",<br/> "city":"Berrechid",<br/> "age":21<br/>}</span></pre><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mg"><img src="../Images/62d874fb7c2171df637a4726b64a8424.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mipsiDL6kh20gdBN"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx translated">为“学生”索引创建另一个文档。</figcaption></figure><blockquote class="mh"><p id="3488" class="mi mj hi bd mk ml mm mn mo mp mq jc dx translated">我们可以使用PUT HTTP请求，但唯一的区别是，如果文档已经存在于索引中，引擎将更新它的值，如果它不存在，它将创建它。</p></blockquote><p id="c18c" class="pw-post-body-paragraph if ig hi ih b ii mr ik il im ms io ip iq mt is it iu mu iw ix iy mv ja jb jc hb bi translated">Elasticsearch还提供版本控制功能。我们可以使用版本查询参数来指定特定文档的版本。</p><pre class="jg jh ji jj fd lp lq lr ls aw lt bi"><span id="26ee" class="jy jz hi lq b fi lu lv l lw lx"><strong class="lq hj">POST </strong>:localhost:9200/students/_doc/2?version=3&amp;version_type=external<br/>{<br/> "name":"Ayoub Babakhouya",<br/> "street":"street 36",<br/> "city":"Berrechid",<br/> "age":21<br/>}</span></pre><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es me"><img src="../Images/c7ea6f0c12cc1e6ee454a392fdd82ef5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8gcsmmrRRLGX1wi8AFF07A.png"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx translated">使用版本参数指定某个版本。</figcaption></figure><p id="daa8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们谈谈内部版本控制和外部版本控制之间的区别，内部版本控制是默认版本，从1开始，每次更新时递增，包括删除，当文档的版本控制存储在外部系统(如第三方版本控制系统)中时，使用外部版本控制。要启用此功能，我们需要将version_type设置为external。在这里，Elasticsearch将存储外部系统指定的版本号，并且不会自动递增。</p><h1 id="4c81" class="mw jz hi bd ka mx my mz ke na nb nc ki nd ne nf kl ng nh ni ko nj nk nl kr nm bi translated">操作</h1><p id="27ac" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">要通过Id获取文档，我们可以使用GET HTTP request。</p><pre class="jg jh ji jj fd lp lq lr ls aw lt bi"><span id="a261" class="jy jz hi lq b fi lu lv l lw lx"><strong class="lq hj">GET : </strong>localhost:9200/students/_doc/2</span></pre><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es nn"><img src="../Images/ed357d21893615503baecfbc7c883b63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ndmk_HtFu67Bwe7C"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx translated">获取特定文档。</figcaption></figure><p id="f1f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要删除一个文档，我们应该使用HTTP delete请求并传递文档的id。</p><pre class="jg jh ji jj fd lp lq lr ls aw lt bi"><span id="0622" class="jy jz hi lq b fi lu lv l lw lx"><strong class="lq hj">DELETE</strong> : localhost:9200/students/</span></pre><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es no"><img src="../Images/0831bc3157ab475eadd0b95efa843b80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kT7sXReQEc4qSWKO"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx translated">删除文档。</figcaption></figure><blockquote class="np nq nr"><p id="e22e" class="if ig lm ih b ii ij ik il im in io ip ns ir is it nt iv iw ix nu iz ja jb jc hb bi translated">可以指定文档的版本来删除该特定版本。</p></blockquote><p id="9830" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们想更新一个文档怎么办？</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es nv"><img src="../Images/be1e675680069e5f52b8bf33ecd458e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RZjk2yqq6ZfN7PlC"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx translated">更新文档。</figcaption></figure><pre class="jg jh ji jj fd lp lq lr ls aw lt bi"><span id="af91" class="jy jz hi lq b fi lu lv l lw lx"><strong class="lq hj">POST</strong> : localhost:9200/students/_update/1<br/>{<br/> <br/>  "script" : {<br/>   "source" : "ctx._source.name = params.sname",<br/>   "lang" : "painless",<br/>   "params" :{<br/>    "sname" :"Youssef v1"<br/>   }<br/>  }<br/> <br/>}</span></pre><p id="5743" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要更新一个文档，我们需要使用Get HTTP请求，指定文档的id。正如您所看到的，主体有点混乱，脚本对象用于执行该操作，版本控制用于确保在获取和重新索引期间没有发生更新。“params”是一个包含文档新值的对象。</p><p id="288c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，既然我们创建了一个索引并应用了所有的CRUD操作，让我们开始在索引中搜索。</p><h1 id="cb11" class="mw jz hi bd ka mx my mz ke na nb nc ki nd ne nf kl ng nh ni ko nj nk nl kr nm bi translated">搜索</h1><p id="1e7f" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">为了进行搜索，我们使用以下请求:</p><pre class="jg jh ji jj fd lp lq lr ls aw lt bi"><span id="1ed1" class="jy jz hi lq b fi lu lv l lw lx"><strong class="lq hj">GET</strong> : localhost:9200/students/_search<br/>{<br/>  "query": { "match": {"city":"Agadir"} },<br/>   "sort": [<br/>    { "age": "asc" }<br/>  ]<br/>}</span></pre><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mg"><img src="../Images/91323bd01bdd56b3400b390312bac932.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1f3VsYijFn0bZQQQ"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx translated">搜索索引</figcaption></figure><p id="e110" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">query属性允许我们向Elasticsearch提出特定的问题。在本例中，我们使用match搜索某个术语或值，我们还使用match_phrase搜索确切的值，sort用于升序或降序排序。</p><p id="34a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结果是一个JSON对象，包含关于搜索操作的细节，例如“take”表示搜索花费了多少时间，“timed_out”表示搜索请求是否超时，而“_shards”表示搜索操作检查的碎片数量。</p><p id="d75b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了从索引数据中获取更多信息，我们可以使用bool属性，它允许使用“必须”和“必须”not和“应该”来组合多个标准，这意味着它是可取的</p><pre class="jg jh ji jj fd lp lq lr ls aw lt bi"><span id="b81b" class="jy jz hi lq b fi lu lv l lw lx"><strong class="lq hj">GET</strong> : localhost:9200/students/_search<br/>{<br/>    "query": {<br/>        "bool": {<br/>            "must": [<br/>                {<br/>                    "match": {<br/>                        "age": 21<br/>                    }<br/>                }<br/>            ],<br/>            "must_not": [<br/>                {<br/>                    "match_phrase": {<br/>                        "street": "street 39"<br/>                    }<br/>                }<br/>            ]<br/>        }<br/>    }<br/>}</span></pre><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mg"><img src="../Images/20ee2f231938d583be6fc8829d3b0f02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JUUSElfS1_qe1s8t"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx translated">更复杂的搜索查询</figcaption></figure><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es nw"><img src="../Images/bfa160e0846f5af3a1b6f6ccfabd7837.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qeyGtE_J4wx0VpW8.jpeg"/></div></div></figure><blockquote class="mh"><p id="8ad9" class="mi mj hi bd mk ml mm mn mo mp mq jc dx translated">敬请期待优素福·阿姆兹尔将出版的第二部分！</p></blockquote><h1 id="58d8" class="mw jz hi bd ka mx my mz ke na nb nc ki nd nx nf kl ng ny ni ko nj nz nl kr nm bi translated">参考资料:</h1><ul class=""><li id="a4f4" class="ky kz hi ih b ii kt im ku iq la iu lb iy lc jc ld le lf lg bi translated"><a class="ae lo" href="https://codingexplained.com/coding/elasticsearch/terminology" rel="noopener ugc nofollow" target="_blank">术语</a></li><li id="d3fb" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">使用 Docker 的 Elasticsearch (T1)</li><li id="3ec3" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><a class="ae lo" href="https://www.tutorialspoint.com/elasticsearch" rel="noopener ugc nofollow" target="_blank"> Elastricsearch 教程(T3)</a></li><li id="c6b5" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">Elasticsearch 词汇表 (T5)</li></ul></div></div>    
</body>
</html>