<html>
<head>
<title>Building a plotting library for Ruby</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为Ruby构建绘图库</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/building-a-plotting-library-for-ruby-9672bc4af98d?source=collection_archive---------16-----------------------#2019-11-24">https://medium.com/analytics-vidhya/building-a-plotting-library-for-ruby-9672bc4af98d?source=collection_archive---------16-----------------------#2019-11-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/af70a277f4e80210a3349422c3794134.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9qRA4JjR4XbYdNAuw7E7Cg.jpeg"/></div></div></figure><p id="a88c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">嗨，读者们，</p><p id="8aa4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在Sciruby，我们遇到了为ruby设计下一个Matplotlib的雄心勃勃的任务，因此我们检查了相当多不同的绘图库，并认为如果我们可以将所有这些库中的想法汇集起来，那么我们就可以做出真正令人惊叹的东西(<a class="ae jo" href="https://github.com/SciRuby/rubyplot" rel="noopener ugc nofollow" target="_blank"> Rubyplot </a>)。</p><blockquote class="jp"><p id="a099" class="jq jr hi bd js jt ju jv jw jx jy jn dx translated">初步计划</p></blockquote><p id="5840" class="pw-post-body-paragraph iq ir hi is b it jz iv iw ix ka iz ja jb kb jd je jf kc jh ji jj kd jl jm jn hb bi translated">最初我们想出了一个采纳Matplotlib想法的详细计划。我为谷歌代码之夏项目做了一个提议，并和我在Sciruby的导师们分享了这个提议。我们讨论了各种想法，最终我开始着手这个项目。</p><figure class="ke kf kg kh fd ij"><div class="bz dy l di"><div class="ki kj l"/></div></figure><p id="12cc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的第一个也是主要的问题是…</p><blockquote class="jp"><p id="bac5" class="jq jr hi bd js jt ju jv jw jx jy jn dx translated">我们怎么画？</p></blockquote><p id="9e6f" class="pw-post-body-paragraph iq ir hi is b it jz iv iw ix ka iz ja jb kb jd je jf kc jh ji jj kd jl jm jn hb bi translated">你看，在Ruby和python中有许多用于进行小型可视化的库，但是制作一个完整的绘图库是一个完全不同层次的任务。我们需要一些真正灵活的东西来使所有事情变得快速。所以经过一番激烈的讨论后，我们最终决定使用两个不同的可视化库，并最终将它们合并在一起。</p><h1 id="6467" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">Image Magick和GR框架</h1><div class="ke kf kg kh fd ab cb"><figure class="li ij lj lk ll lm ln paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><img src="../Images/ba0eacb0bb9f2abd88bbfc4bc290d84a.png" data-original-src="https://miro.medium.com/v2/resize:fit:722/format:webp/1*m_CD6MOW9pOOG-d7v_Fhvw.png"/></div></figure><figure class="li ij lo lk ll lm ln paragraph-image"><img src="../Images/a6f2969cd22ead33e8e5580ad1636665.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*8Kq3Q0wIeZRsirMYkmdAaQ.png"/></figure></div><p id="5b69" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们决定独立构建两个不同的ruby库，但是在它们的代码中有许多相似之处。最终，当项目完成时，我们将把它们合并成一个单一的库，并让用户选择使用其中一个库作为构建地块的后端。好了，关于设计的讨论到此为止。</p><blockquote class="lp lq lr"><p id="2f72" class="iq ir ls is b it iu iv iw ix iy iz ja lt jc jd je lu jg jh ji lv jk jl jm jn hb bi translated">L <!-- -->让我们从Gr图开始做一些真实的东西</p></blockquote><p id="59a1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Gr plot 正在为ruby绘制库，它使用Gr框架<a class="ae jo" href="http://gr-framework.org/tutorials/index.html" rel="noopener ugc nofollow" target="_blank">作为后端。</a></p><figure class="ke kf kg kh fd ij"><div class="bz dy l di"><div class="lw kj l"/></div></figure><figure class="ke kf kg kh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/4515a55436af1f47144f80d87db0f05f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zVCAAghwEuujnFR92k5hYQ.png"/></div></div></figure><p id="e025" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你看一下代码，很容易注意到你不仅可以画出线条曲线，还可以很容易地指定线条宽度和线条颜色等等</p><pre class="ke kf kg kh fd ly lz ma mb aw mc bi"><span id="664b" class="md kl hi lz b fi me mf l mg mh">g.line! @x1, @y1, line_width: 4, line_color: :green</span></pre><p id="73ff" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">不仅如此，我们还有许多定制功能</p><pre class="ke kf kg kh fd ly lz ma mb aw mc bi"><span id="c606" class="md kl hi lz b fi me mf l mg mh">def line!(x_coordinates, y_coordinates, line_width: :default,<br/> line_color: :default, line_type: :default,<br/> marker_size: :default, marker_color: :default,<br/> marker_type: :default)</span></pre><p id="b2b9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">用GRPlot还可以画出很多其他的图。</p><ul class=""><li id="a0e3" class="mi mj hi is b it iu ix iy jb mk jf ml jj mm jn mn mo mp mq bi translated">分散</li><li id="6a83" class="mi mj hi is b it mr ix ms jb mt jf mu jj mv jn mn mo mp mq bi translated">线条</li><li id="aca6" class="mi mj hi is b it mr ix ms jb mt jf mu jj mv jn mn mo mp mq bi translated">酒吧</li><li id="2b21" class="mi mj hi is b it mr ix ms jb mt jf mu jj mv jn mn mo mp mq bi translated">堆叠条形图</li><li id="fe34" class="mi mj hi is b it mr ix ms jb mt jf mu jj mv jn mn mo mp mq bi translated">坎德尔斯蒂克</li></ul><div class="ke kf kg kh fd ab cb"><figure class="li ij mw lk ll lm ln paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><img src="../Images/00fd6c41508728a9b011fd74dc36851d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*M2XUydHDT-SvvvwuIB9IjA.png"/></div></figure><figure class="li ij mx lk ll lm ln paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><img src="../Images/d065db72ae098b41c550aebc97220090.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/1*dIC7RRYzsawTjvdMuyM3Ug.png"/></div></figure></div><div class="ab cb"><figure class="li ij my lk ll lm ln paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><img src="../Images/89978079134da1833c72784876e78667.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*9qua100EUEVjennGUmZ3yw.png"/></div></figure><figure class="li ij mz lk ll lm ln paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><img src="../Images/d0037cd1980612efe334d3fba6dbd7dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1042/format:webp/1*OGxwl-ZSO6M0kfVKLTb0dw.png"/></div><figcaption class="na nb et er es nc nd bd b be z dx ne di nf ng translated">条形图、烛台图、折线图、堆积条形图</figcaption></figure></div><blockquote class="jp"><p id="75a3" class="jq jr hi bd js jt nh ni nj nk nl jn dx translated">现在让我们继续魔法情节</p></blockquote><p id="9d13" class="pw-post-body-paragraph iq ir hi is b it jz iv iw ix ka iz ja jb kb jd je jf kc jh ji jj kd jl jm jn hb bi translated">Magick plot是一个绘图库，使用<a class="ae jo" href="https://rmagick.github.io/" rel="noopener ugc nofollow" target="_blank"> RMagick </a>作为后端，以各种硬拷贝格式生成高质量的数字。</p><figure class="ke kf kg kh fd ij"><div class="bz dy l di"><div class="lw kj l"/></div></figure><figure class="ke kf kg kh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nm"><img src="../Images/69331a8205b7664fe32c26e20a6a5861.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VBRNIy0BWrmy0Ctu5MGkWw.png"/></div></div></figure><p id="7d46" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上面注释的代码是不言自明和简单明了的。请注意，许多可用的自定义选项使您更容易处理地块。您可以在绘图中轻松定义标签颜色/绘图大小(以像素为单位)等。</p><p id="2ed5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Magickplot也是一个非常酷的库，有许多类似于GRPlot的特性，但是两个库的内部实现完全不同。我们相信，根据不同的用例，用户会发现其中一个比另一个更有用。</p><p id="93b3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，我们的下一个目标是将它们合并在一起，并为用户提供一个简单的API来轻松地从GR图切换到Magick图…..</p><p id="1a4a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们举一个例子</p><figure class="ke kf kg kh fd ij"><div class="bz dy l di"><div class="lw kj l"/></div></figure><div class="ke kf kg kh fd ab cb"><figure class="li ij nn lk ll lm ln paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><img src="../Images/a48c7f376cb514dfc7b6c01664857b4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*EsmpbNRLnUe_yX4KErzP-g.png"/></div></figure><figure class="li ij no lk ll lm ln paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><img src="../Images/d872f1aeafc9cb6b432dcefe5c1c476e.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/1*vm3N3echpRO6x9ahdqgXCg.png"/></div><figcaption class="na nb et er es nc nd bd b be z dx np di nq ng translated">在Magick图和GR图中绘制的心脏曲线</figcaption></figure></div><p id="5e5b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请注意，在将这两个不同的库组合在一起后，使用它们实际上没有什么不同</p><pre class="ke kf kg kh fd ly lz ma mb aw mc bi"><span id="65d7" class="md kl hi lz b fi me mf l mg mh">g = Rubyplot::Figure.new(backend: :magick)                       g.scatter! @x1, @y1, marker_color: :pink, label: :heart                       g.save('scatter.png')                                               </span><span id="b7ab" class="md kl hi lz b fi nr mf l mg mh">g2 = Rubyplot::Figure.new(backend: :GR)                       g2.text_font = :bookman_light_italic                       g2.scatter! @x1, @y1, marker_color: :red                       g2.save('scatter2.png')</span></pre><p id="a985" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上面的代码示例强调了如何灵活地使用figure类来使用两个不同的后端。</p><p id="7f4c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">致谢</strong></p><p id="e42d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">感谢我在西鲁比的所有导师，即Sameer Deshmukh，Pjotr Prins，Prasun Anand和John Woods。</p><p id="63fd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">特别感谢Pranav Garg-&gt; GR-Ruby的首席开发人员和Sciruby的学生</p><h1 id="758e" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">功能请求</h1><p id="3574" class="pw-post-body-paragraph iq ir hi is b it ns iv iw ix nt iz ja jb nu jd je jf nv jh ji jj nw jl jm jn hb bi translated">我的最终目标是让这个项目类似于Ruby的<a class="ae jo" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"> matplotlib </a>等价物，具有大量令人惊叹的定制特性。我希望你觉得这很有趣和有用。请从<a class="ae jo" href="https://github.com/SciRuby/rubyplot" rel="noopener ugc nofollow" target="_blank"> github </a>中随意尝试一下。欢迎任何建议和推荐。</p></div></div>    
</body>
</html>