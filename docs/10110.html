<html>
<head>
<title>What are QQ Plots?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是QQ剧情？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/what-are-qq-plots-4beb00670d81?source=collection_archive---------12-----------------------#2020-10-05">https://medium.com/analytics-vidhya/what-are-qq-plots-4beb00670d81?source=collection_archive---------12-----------------------#2020-10-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6bd6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设给你一个随机变量X，只有很少的观察值或样本，然后问你以下两个问题中的一个:</p><p id="1d63" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">随机变量X是否正态分布？</strong></p><p id="c33f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还是？</p><p id="c206" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">给定的随机变量X属于哪个分布族？</strong></p><p id="745e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这就是QQ剧情进入画面，帮助我们回答上述问题的地方。</p><p id="c196" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">尽管有更多的统计测试可用，包括<strong class="ih hj"> KS测试，AD(安德森-达林)测试</strong>等；但是QQ图是回答这些问题的最简单的图形方法之一。</p><blockquote class="jd je jf"><p id="17db" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated">在统计学中，Q–Q(分位数-分位数)图是一种概率图，是一种通过绘制两个概率分布的分位数来比较它们的图形方法—维基百科</p></blockquote><p id="44dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">QQ图主要有两个应用，分别是对任意随机变量提出的上述两个问题。</p><p id="7e66" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在问题来了，为什么正态分布被专门作为一个单独的问题或作为QQ图的一个基本应用？</p><h1 id="b07b" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">为什么是正态分布？</h1><p id="fa38" class="pw-post-body-paragraph if ig hi ih b ii ki ik il im kj io ip iq kk is it iu kl iw ix iy km ja jb jc hb bi translated">QQ图可用于检查随机变量所属的任何类型的分布，无论是指数分布、帕累托分布、均匀分布等。正态分布之所以如此特殊，是因为它是自然环境中最常见的分布之一。此外，经验法则(通常称为68–95–99.7法则)告诉我们位于平均值的第一、第二和第三标准偏差范围内的确切数据量，这使得日常工作更加高效。</p><blockquote class="jd je jf"><p id="55a7" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated">“在统计学中，68–95–99.7规则，也称为经验规则，是一种速记法，用于记住在正态分布中位于平均值附近的带内的值的百分比，该正态分布的宽度分别为两个、四个和六个标准偏差；更准确地说，68.27%、95.45%和99.73%的数值分别位于平均值的一个、两个和三个标准偏差内。”-维基百科</p></blockquote><h1 id="f864" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">绘制QQ的步骤(理论上)</h1><ul class=""><li id="8289" class="kn ko hi ih b ii ki im kj iq kp iu kq iy kr jc ks kt ku kv bi translated">给定一个随机变量X，有500个观察值/样本。对所有这些样本进行排序，并计算它们的百分位数。</li></ul><p id="43d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">百分位</strong>是总值的百分比等于或低于该值的度量。例如，第75个百分位数是这样一个值，低于该值可以找到75%的观察值。</p><p id="59fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">四分位数</strong>将a(a的一部分)数据分成四组，每组包含大约相等数量的观察值:Q1、Q2、Q3和Q4。这四个四分位数分别是第25、50、75和100个百分点。</p><ul class=""><li id="c035" class="kn ko hi ih b ii ij im in iq kw iu kx iy ky jc ks kt ku kv bi translated">接下来，我们将考虑具有高斯分布的随机变量Y。让我们取1000个与上述相同和相似的样本，对它们进行排序，并找出它们的百分位数。这些百分位数被称为理论分位数。</li></ul><p id="d4ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以把Y取为任何一种分布，并遵循上面提到的相同过程。</p><ul class=""><li id="d715" class="kn ko hi ih b ii ij im in iq kw iu kx iy ky jc ks kt ku kv bi translated">之后，我们将在Y轴上绘制随机变量X的百分位数，在X轴上绘制Y的百分位数，从而形成分位数-分位数图。</li></ul><p id="6040" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">图上的每个点对应于Y的一个百分位数和随机变量x的相同百分位数。</p><p id="ef8a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jg">结论:</em> </strong> <em class="jg">如果所有这些点大致位于一条直线上那么X和Y随机变量可以说具有相似的分布或者更精确地说X将具有高斯分布。</em></p><h1 id="0c25" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">让我们实际地看看这个！</h1><p id="63ad" class="pw-post-body-paragraph if ig hi ih b ii ki ik il im kj io ip iq kk is it iu kl iw ix iy km ja jb jc hb bi translated"><em class="jg">在本例中，我们将验证随机变量X是否具有高斯分布。</em></p><p id="7cd6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，X是具有平均值(loc) 20、标准偏差(标度)5并且具有100个观察值的随机变量。</p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="85c1" class="li jl hi le b fi lj lk l ll lm"><strong class="le hj">import numpy as np</strong></span><span id="b7a8" class="li jl hi le b fi ln lk l ll lm"><strong class="le hj"># generating 100 sanples from N(10,5)<br/>X = np.random.normal(loc = 10, scale = 5, size=100)</strong></span></pre><p id="948d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过与标准正态变量N(0，1)比较绘制QQ图，并使用pylab库绘制图形。</p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="62a3" class="li jl hi le b fi lj lk l ll lm"><strong class="le hj">import pylab <br/>import scipy.stats as stats</strong></span><span id="390d" class="li jl hi le b fi ln lk l ll lm"><strong class="le hj">stats.probplot(X, dist="norm", plot=pylab)<br/>pylab.show()</strong></span></pre><figure class="kz la lb lc fd lp er es paragraph-image"><div class="er es lo"><img src="../Images/598f6f328745a2d0c8fb8db3fcff498d.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/0*zLYLO1xzoTc5CiES"/></div></figure><p id="3691" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jg">虽然X轴和Y轴上随机变量的均值和标准差不同；但是由于它们来自相同的分布族，即高斯分布，因此大部分所有点都位于45度线上。</em></p><p id="24e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们看看，如果随机变量x中的观察次数增加，会发生什么。</p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="6552" class="li jl hi le b fi lj lk l ll lm"><strong class="le hj"># generate 1000 sanples from N(10,5)<br/>X = np.random.normal(loc =10, scale = 5, size=1000) </strong></span><span id="c6db" class="li jl hi le b fi ln lk l ll lm"><strong class="le hj">stats.probplot(X, dist="norm", plot=pylab)<br/>pylab.show()</strong></span></pre><figure class="kz la lb lc fd lp er es paragraph-image"><div class="er es ls"><img src="../Images/018fefedd5b224798b78614c5aa9c1c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:776/0*kn8eNBxt6BgeQW1k"/></div></figure><p id="81ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jg">与之前的图相比，现在我们看到更多的点落在红线上。</em></p><p id="2e56" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们看看如果我们减少观察/样本的数量会发生什么。</p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="1142" class="li jl hi le b fi lj lk l ll lm"><strong class="le hj"># generate 50 sanples from N(10,5)<br/>X = np.random.normal(loc=10, scale=5, size=50) </strong></span><span id="ffd2" class="li jl hi le b fi ln lk l ll lm"><strong class="le hj">stats.probplot(X, dist="norm", plot=pylab)<br/>pylab.show()</strong></span></pre><figure class="kz la lb lc fd lp er es paragraph-image"><div class="er es lo"><img src="../Images/73e4fa33d6a6c94056beeb9e604f0344.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/0*vI6eT8Z7AbF1xFrd"/></div></figure><p id="b77d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jg">与第一幅图相比，红线上出现了更多的点偏差。</em></p><p id="140a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，策划QQ阴谋，但与5000样本！</p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="9f08" class="li jl hi le b fi lj lk l ll lm"><strong class="le hj"># generate 50000 sanples from N(10,5)<br/>X = np.random.normal(loc=10, scale=5, size=50000) </strong></span><span id="accd" class="li jl hi le b fi ln lk l ll lm"><strong class="le hj">stats.probplot(X, dist="norm", plot=pylab)<br/>pylab.show()</strong></span></pre><figure class="kz la lb lc fd lp er es paragraph-image"><div class="er es lt"><img src="../Images/558939a514b0dec96762963bb5354e20.png" data-original-src="https://miro.medium.com/v2/resize:fit:788/0*e45B0bB6MnY2Khfk"/></div></figure><p id="7207" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jg">我们看到，随着样本数量的增加，越来越多的点靠近直线。</em></p><h1 id="b559" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">QQ情节的局限性</h1><p id="da2a" class="pw-post-body-paragraph if ig hi ih b ii ki ik il im kj io ip iq kk is it iu kl iw ix iy km ja jb jc hb bi translated">QQ图的主要局限性之一是，随着观察值或样本数量的减少，解释该图变得更加困难。</p><h1 id="b441" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">另一个例子</h1><p id="b802" class="pw-post-body-paragraph if ig hi ih b ii ki ik il im kj io ip iq kk is it iu kl iw ix iy km ja jb jc hb bi translated">这里，我们从均匀分布中生成100个样本，并绘制一个相对于Y的QQ图，这是一个高斯分布。</p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="8303" class="li jl hi le b fi lj lk l ll lm"><strong class="le hj"># generate 100 sanples from uniform distr<br/>X = np.random.uniform(low=-1, high=1, size=100) <br/></strong></span><span id="710b" class="li jl hi le b fi ln lk l ll lm"><strong class="le hj">#plotting measurements against gaussian distr<br/>stats.probplot(X, dist="norm", plot=pylab)<br/>pylab.show()</strong></span></pre><figure class="kz la lb lc fd lp er es paragraph-image"><div class="er es lu"><img src="../Images/0d50756457fdfe2cc999903e7d433910.png" data-original-src="https://miro.medium.com/v2/resize:fit:794/0*jqaqKrY2Sl4qIqwk"/></div></figure><p id="511f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jg">由于两个轴(X轴:高斯轴和Y轴:均匀轴)上的分布不同，因此这些点不在直线上，因此它们远离直线移动，并且在图形的最末端，这些点发散最大。</em></p><p id="6c6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，如果我们想看到图中的显著差异，那么我们必须使用更多数量的样本。</p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="8749" class="li jl hi le b fi lj lk l ll lm"><strong class="le hj"># generate 5000 sanples from uniform distr<br/>X = np.random.uniform(low=-1, high=1, size=5000) <br/></strong></span><span id="9503" class="li jl hi le b fi ln lk l ll lm"><strong class="le hj">#plotting measurements against gaussian distr<br/>stats.probplot(X, dist="norm", plot=pylab)<br/>pylab.show()</strong></span></pre><figure class="kz la lb lc fd lp er es paragraph-image"><div class="er es ls"><img src="../Images/45ec418c595d21591eb47367c7ece26e.png" data-original-src="https://miro.medium.com/v2/resize:fit:776/0*zLYYycyRID-MbPLd"/></div></figure><h1 id="645f" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">结论</h1><p id="aa8f" class="pw-post-body-paragraph if ig hi ih b ii ki ik il im kj io ip iq kk is it iu kl iw ix iy km ja jb jc hb bi translated">因此，如果大部分点位于直线上，那么我们可以得出结论，X轴和y轴上的两个分布来自同一个族，如果它们不是，那么随机变量X属于与我们比较的分布不同的分布。</p></div></div>    
</body>
</html>