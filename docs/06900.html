<html>
<head>
<title>CNN Model that auto increases its accuracy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">自动增加其准确性的CNN模型</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/cnn-model-that-auto-increases-its-accuracy-9571ec0bf926?source=collection_archive---------11-----------------------#2020-06-06">https://medium.com/analytics-vidhya/cnn-model-that-auto-increases-its-accuracy-9571ec0bf926?source=collection_archive---------11-----------------------#2020-06-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><blockquote class="if ig ih"><p id="80e1" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><strong class="il hj">创建一个机器学习模型，需要一次又一次地设置环境，对模型进行修改，编译模型，训练模型。因此，由于大量的人工工作，大多数机器学习项目都没有实现。</strong></p></blockquote><p id="b4c5" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">所以，我努力寻找解决这个问题的方法。</p><p id="5a29" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">问题陈述:1。使用dockerfile创建安装了Python3和Keras或numpy的容器映像</p><p id="bb32" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">2.当我们启动这个图像时，它应该会自动开始训练容器中的模型。</p><p id="121e" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">3.使用Jenkins中的构建管道插件创建job1、job2、job3、job4和job5的作业链</p><p id="259a" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">4.Job1:部分开发者向Github推送回购时自动拉取Github回购。</p><p id="b2f0" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">5.Job2:通过查看代码或程序文件，Jenkins应该自动启动相应的机器学习软件安装解释器安装映像容器，以部署代码并开始训练(例如，如果代码使用cnn，则Jenkins应该启动已经安装了CNN处理所需的所有软件的容器)。</p><p id="8477" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">6.工作3:训练你的模型并预测准确性或度量。</p><p id="344f" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">7.Job4:如果度量准确度低于99%，那么调整机器学习模型架构。</p><p id="4896" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">8.Job5:重新训练模型或通知正在创建最佳模型。</p><p id="ffa3" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">9.为monitor : If容器创建一个额外的job job6，其中应用程序正在运行。由于任何原因失败，则该作业应该从最后一个训练模型离开的地方自动再次启动容器。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es jk"><img src="../Images/bfd4c124d28b38332ae1ae698cce82f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KbuFnXsM0umpKocaBt2lWw.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">方法论流程图</figcaption></figure><p id="e19c" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">解决方案:我在系统中创建了一个本地存储库，包含文件accuracy_check.txt、checking.py、maincode.py、script.sh、variable.txt和一个README.md文件。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es ka"><img src="../Images/bed550870fa7123998a22e9c2bb5e423.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*1j5hWHGyAuSQ_64fD51Y5g.png"/></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">本地知识库</figcaption></figure><p id="2c3e" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">在hooks中制作了一个提交后文件，以便能够将提交的文件自动推送到github，并在jenkins中自动运行作业guthub_pull，以提取github代码并将其复制到我的RHEL 8系统中的文件夹/home/isha/mlops/project中。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es kb"><img src="../Images/93ad80e9436e4b835aa754dc1b9c3ec4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/1*h82HagTr87s7VLF-JXZI_Q.png"/></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">提交后文件。git/hooks/</figcaption></figure><p id="dab1" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">一旦我的本地存储库中的文件上传到github job<em class="ik">github _ pull</em>auto builds中。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es kc"><img src="../Images/6783960897c98c942b4574e79878ea3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DMiOUwhptdOenapAdiCjWw.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">詹金斯的github_pull作业</figcaption></figure><p id="ccb3" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">这个作业github_pull是远程触发的。该作业将所有文件从var/lib/Jenkins/workspace/github _ pull文件夹复制到/home/isha/mlops/project文件夹。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es kd"><img src="../Images/ebd0cd417d1c60a109f087c6eb4ac2d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EEtUT81_YLiOi_bEneTQDw.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">github _拉作业</figcaption></figure><p id="7f43" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">现在，一旦作业github_pull成功构建，就会自动触发作业model_train。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es ke"><img src="../Images/a863eb032ced02240fb09b8d0dedd5b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RTM8OR7Jq9ZisOuN7WnSQQ.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">github_pull中的后期构建</figcaption></figure><p id="b5b9" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">Job model_train运行script.sh文件，并在成功构建后运行job accuracy_compare。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es ke"><img src="../Images/141bb1fddd8063a17d2b9275af148fae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xF7qGL7vjrY0fk99SSl6eg.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">模型_火车</figcaption></figure><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es kf"><img src="../Images/9762276974ebfc7eaed1fa8082bd29b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CKA9yS0Y2sZv32Jm_5Vyug.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">自动触发作业准确性_比较</figcaption></figure><p id="5bb0" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">script.sh文件首先检查maincode.py中的代码是否是CNN代码。(为此，它首先运行checking.py文件)</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es kg"><img src="../Images/4ac737374675c12cfc6e0b83ac8a4d3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1258/format:webp/1*DkQNMfYOUrcGjL6yrojCNg.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">script.sh文件</figcaption></figure><p id="eeca" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">checking.py文件首先以读取模式打开maincode.py，并检查其中是否有类似“keras”或“tenserflow”的术语。这是因为这些词的存在确保了CNN的代码。如果找到这些术语，那么它在输出中打印CNN。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es kh"><img src="../Images/23f3065b79e40d63787db64023977e72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C1H9Rr4iZ91XIGpffz6U_Q.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">正在检查. py</figcaption></figure><p id="ed08" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">如果代码是CNN，则script.sh文件使用mlopsimage:v1运行一个容器cnn_os，并将home/isha/mlops/project文件夹挂载到容器中的/mlops文件夹。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es ki"><img src="../Images/937673b6fb0f18cbbd56922ef5c71df0.png" data-original-src="https://miro.medium.com/v2/resize:fit:922/format:webp/1*Mj9mewl5WOan9PCZtFy_JA.png"/></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">图像文件:v1</figcaption></figure><p id="45f1" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">运行容器后的script.sh文件会删除accuracy_check.txt和variable.txt文件，并在容器中运行python代码maincode.py。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es kj"><img src="../Images/e63edbe8cc357438f57c247f85d659b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*PIaULHvFuKIEzUtvNck9AQ.png"/></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">制作了多种功能</figcaption></figure><p id="2968" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">maincode.py有三个函数来提高模型的准确性。由于N=1，最初将使用函数make_model1()。N的值存储在文件variable.txt中</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es kk"><img src="../Images/82b6d2fb46dd3b5f3c6d24b05acb434b.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*6-_xTI3U8UwBT5ZZ3DTpkQ.png"/></div></figure><p id="fee5" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">一旦模型被训练，模型的精度值被存储在变量‘a’中。然后生成一个文件accuracy_check.txt，并将“a”的值复制到其中。</p><p id="fede" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">成功建立模型_训练作业后，触发精度_比较作业。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es kl"><img src="../Images/d21021174c58180ac4870121f9dc4cfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*a5ji2Cw3JTWUKZWkmzsMdQ.png"/></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">模型_列车的控制台输出</figcaption></figure><p id="26eb" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">初步达到的准确率为98.53%。作业accuracy_compare首先读取存储在文件accuracy_check.txt中的精度值，然后将其存储在变量read_accuracy中，然后与99%的final_accuracy进行比较。如果达到的准确度小于99，则触发作业准确度提高，否则使用远程触发器运行作业成功通知程序。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es km"><img src="../Images/ed23f891a5363aca74c1de4f08e15f03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j3Xb9HchhQR6Tq18zCxXew.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">作业<em class="kn">精度_比较</em></figcaption></figure><p id="599e" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">作业accuracy_improve读取存储在variable.txt中的N值，并将maincode.py中的N值增加1，以便这次运行maincode.py中的下一个函数。现在，容器cnn_os再次被删除，一个同名的新容器启动。删除具有旧精度值的accuracy_check.txt文件和具有旧N值的variable.txt文件，并再次运行maincode.py。maincode.py的再次运行会再次生成这两个文件，并在其中复制一个新值。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es ko"><img src="../Images/c0f8ae95cd7786c71a121ae69b79ad56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NxLQ3ersjg6CA1XHZ07IuA.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">工作准确度_提高</figcaption></figure><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es kp"><img src="../Images/4f71f9bbdbc7eaf60ebc7773955fccf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dXLTHSPUadrQ9qKuWeo8WA.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">N值增加到重新训练模型</figcaption></figure><p id="309f" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">再次比较精确度，并通过重新训练模型来提高精确度，一旦精确度达到99%,就会触发作业成功通知程序，向开发人员发送成功邮件。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es kq"><img src="../Images/0630e2ed3d8227b51fc2c11ab934386d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eV1YOEfrooLjO8L9PVbtBg.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">准确率达到99%以上</figcaption></figure><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es kr"><img src="../Images/7d0586cb86a8763a55d8ada6851a62eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1062/format:webp/1*cnvoHQsmEQlkn-cZE8E-ww.png"/></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">发送给开发人员的成功邮件</figcaption></figure><p id="d5e4" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">这项任务让我了解了如何通过改变模型的卷积层数或采用不同类型的池(平均或最大)来改进cnn模型。如需完整代码，请访问我的github资源库:</p><p id="6eeb" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">https://github.com/ishajain140/model_accuracy<a class="ae ks" href="https://github.com/ishajain140/model_accuracy" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>