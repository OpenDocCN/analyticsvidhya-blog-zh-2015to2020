<html>
<head>
<title>How to handle Missing values?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何处理缺失值？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-handle-missing-values-cbd03fb79ef8?source=collection_archive---------12-----------------------#2020-03-29">https://medium.com/analytics-vidhya/how-to-handle-missing-values-cbd03fb79ef8?source=collection_archive---------12-----------------------#2020-03-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/da6d764764d6b76fe454feb127e02ae4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*Q2gBp2rmUloFcg5UpMmmtg.jpeg"/></div></figure><p id="d55c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在我们开始处理缺失值之前..让我们来了解一下为什么我们会有缺失值。<br/> 1。没有信息的时候。<br/> 2。数据存在，但未被记录。<br/> 3。将手动数据传输到数据库时。<br/> 4。忘记放置值。<br/> 5。主动将少数值设为空。</p></div><div class="ab cl jk jl gp jm" role="separator"><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp"/></div><div class="hb hc hd he hf"><ul class=""><li id="f33e" class="jr js hi io b ip iq it iu ix jt jb ju jf jv jj jw jx jy jz bi translated">创建一个数据帧，让我们检查熊猫数据帧中丢失的值是什么样子的。</li></ul><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es ka"><img src="../Images/0eb83307da18690e2ce5e02016ac7d77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9BcupTWmyn0SMFKjnmw4Nw.png"/></div></div><figcaption class="kj kk et er es kl km bd b be z dx translated">缺少的值被视为“NaN ”,而不是数字。</figcaption></figure></div><div class="ab cl jk jl gp jm" role="separator"><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp"/></div><div class="hb hc hd he hf"><blockquote class="kn ko kp"><p id="d1b6" class="im in kq io b ip iq ir is it iu iv iw kr iy iz ja ks jc jd je kt jg jh ji jj hb bi translated">如何检查数据是否有缺失值，并找出有多少缺失值？</p></blockquote><pre class="kb kc kd ke fd ku kv kw kx aw ky bi"><span id="b222" class="kz la hi kv b fi lb lc l ld le">import numpy as np<br/>import pandas as pd<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns</span><span id="100a" class="kz la hi kv b fi lf lc l ld le"># load titanic dataset from kaggle.<br/>df = pd.read_csv('titanic_train.csv')</span><span id="c205" class="kz la hi kv b fi lf lc l ld le"># check number of missing values in each column.<br/>df.isna().sum()</span></pre><figure class="kb kc kd ke fd ij er es paragraph-image"><div class="er es lg"><img src="../Images/4d5463bd2540551b9538e5657df1b308.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*0fP2iFzdXVpzYNysyrPz7A.png"/></div></figure><p id="61be" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">PassengerId没有缺失值，而Age、Cabin和apolled有缺失值。</p><blockquote class="kn ko kp"><p id="fb1e" class="im in kq io b ip iq ir is it iu iv iw kr iy iz ja ks jc jd je kt jg jh ji jj hb bi translated"><strong class="io hj">现在，我们来看看如何处理。</strong></p><p id="79f6" class="im in kq io b ip iq ir is it iu iv iw kr iy iz ja ks jc jd je kt jg jh ji jj hb bi translated">*删除行或列。<br/> *用均值、中值或众数填充缺失值。<br/> *将缺失的列作为目标并创建一个模型。将缺失的行作为测试数据集并预测值。</p></blockquote><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es lh"><img src="../Images/3007196f4786e69bd77d288bd460936c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_K-N3NBbKR9YKl5So86Bvg.jpeg"/></div></div></figure><h2 id="bcf2" class="kz la hi bd li lj lk ll lm ln lo lp lq ix lr ls lt jb lu lv lw jf lx ly lz ma bi translated"><strong class="ak"> 1。Drop records </strong>:您可以从dataframe中删除整个记录。</h2><pre class="kb kc kd ke fd ku kv kw kx aw ky bi"><span id="b41f" class="kz la hi kv b fi lb lc l ld le">import pandas as pd <br/>import numpy as np</span><span id="cce9" class="kz la hi kv b fi lf lc l ld le">dict = {'First Score':[100, 90, np.nan, 95], 'Second Score': [30, 45, 56, np.nan], 'Third Score':[np.nan, 40, 80, 98]} <br/># creating a dataframe from list <br/>df = pd.DataFrame(dict)</span><span id="e0b2" class="kz la hi kv b fi lf lc l ld le"># drop the entire record using dropna()<br/># axis 0: rows<br/># axis 1: column<br/>df = df.dropna(axis=0, how='any')<br/>df</span></pre><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es mb"><img src="../Images/d273d65ad99101430087310a525b4a7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v54ejG9Qfp2AWb5CkI6l1g.png"/></div></div></figure><p id="b8b0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">包含空值的记录将被删除。</p><p id="ad80" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">删除列</strong>:删除缺少更多值的列。</p><pre class="kb kc kd ke fd ku kv kw kx aw ky bi"><span id="b344" class="kz la hi kv b fi lb lc l ld le">df.drop(['Score4'],axis=1,inplace=True)</span></pre><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es mc"><img src="../Images/03cc244dd432e64896aaf1ee21d793df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vhTJN-yvq8xmEPCyQUvxpw.png"/></div></div></figure><p id="5776" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">列<strong class="io hj"> <em class="kq"> Score4 </em> </strong>有更多的空值。所以，放下专栏。当列中缺失值超过80%到95%时，删除该列。</p><h2 id="88cb" class="kz la hi bd li lj lk ll lm ln lo lp lq ix lr ls lt jb lu lv lw jf lx ly lz ma bi translated">2.<strong class="ak">使用fillna()填充缺少的值</strong>，替换()。</h2><h2 id="c483" class="kz la hi bd li lj lk ll lm ln lo lp lq ix lr ls lt jb lu lv lw jf lx ly lz ma bi translated">对于分类列，取最常见的值并填充缺失的值。</h2><pre class="kb kc kd ke fd ku kv kw kx aw ky bi"><span id="6637" class="kz la hi kv b fi lb lc l ld le">df['Score5'].value_counts()</span><span id="da47" class="kz la hi kv b fi lf lc l ld le">OUT:<br/>Male      3<br/>Female    1<br/>Name: Score5, dtype: int64</span><span id="aad2" class="kz la hi kv b fi lf lc l ld le">#fill missing value with maximum repeated values.<br/>df.fillna("Male",inplace=True)</span></pre><p id="1527" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">或者，尝试使用<em class="kq"> sklearn.preprocessing. </em>中的估算方法</p><p id="96a4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">估算者:</p><pre class="kb kc kd ke fd ku kv kw kx aw ky bi"><span id="be67" class="kz la hi kv b fi lb lc l ld le">from sklearn.preprocessing import Imputer <br/>imputer = Imputer(missing_values = "NaN",<br/>                  strategy = "mean",<br/>                  axis = 0) <br/># strategy = mean or median or mode<br/># axis = 0 or 1<br/>imputer = imputer.fit(df) <br/>df = imputer.fit_transform(df)<br/>df<br/></span><span id="2474" class="kz la hi kv b fi lf lc l ld le">array([[100.        ,  30.        ,  72.66666667],<br/>       [ 90.        ,  45.        ,  40.        ],<br/>       [ 95.        ,  56.        ,  80.        ],<br/>       [ 95.        ,  43.66666667,  98.        ]])</span></pre><p id="f45a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">估算器用<strong class="io hj">平均值</strong>或<strong class="io hj">中值</strong>或<strong class="io hj">模式</strong>替换NaN值。</p><h1 id="d756" class="md la hi bd li me mf mg lm mh mi mj lq mk ml mm lt mn mo mp lw mq mr ms lz mt bi translated">结论:</h1><ol class=""><li id="4baf" class="jr js hi io b ip mu it mv ix mw jb mx jf my jj mz jx jy jz bi translated">如果目标列中缺少值，通过<strong class="io hj"> <em class="kq"> dropna </em> </strong>删除记录。</li><li id="2274" class="jr js hi io b ip na it nb ix nc jb nd jf ne jj mz jx jy jz bi translated">如果一列中有70 %以上的值缺失，则通过<strong class="io hj"> <em class="kq">删除记录，通过</em> </strong>删除记录。</li><li id="57d9" class="jr js hi io b ip na it nb ix nc jb nd jf ne jj mz jx jy jz bi translated">使用<strong class="io hj"> <em class="kq"> fillna </em> </strong>填补缺失。</li><li id="62a3" class="jr js hi io b ip na it nb ix nc jb nd jf ne jj mz jx jy jz bi translated">fillna:取<em class="kq">的平均值</em>为<em class="kq">的整数</em>列。</li><li id="8a84" class="jr js hi io b ip na it nb ix nc jb nd jf ne jj mz jx jy jz bi translated">fillna:对<em class="kq">分类</em>栏采取<em class="kq">模式</em>。</li></ol></div></div>    
</body>
</html>