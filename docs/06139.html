<html>
<head>
<title>Day 12: Listen to your data with a few lines of code and this simple function</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">第12天:用几行代码和这个简单的函数来听你的数据</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/day-12-listen-to-your-data-with-a-few-lines-of-code-and-this-simple-function-4b55ffe4015?source=collection_archive---------23-----------------------#2020-05-12">https://medium.com/analytics-vidhya/day-12-listen-to-your-data-with-a-few-lines-of-code-and-this-simple-function-4b55ffe4015?source=collection_archive---------23-----------------------#2020-05-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9305" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当您对新的分析或故障排除结果进行头脑风暴时，能够看到汇总数字中的基础数据会非常有帮助。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/f2225259937d8f632104edb6a78eaa17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZsEmHkAasy0XH3bKCPC02w.png"/></div></div></figure><p id="835e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在处理时间序列数据的许多观察值时，我们经常用一些参数来概括每个观察值:均值、中值、曲线下面积(AUC)、最大值、最小值等。这些汇总变量可以帮助我们洞察数据中的关系，但有时我们希望看到生成它们的潜在时间序列。</p><p id="82d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">基于第10天和第11天的帖子，我们将编写动态更新函数的修改版本来实现这个目标！</p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="188d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们今天的随机数据有点有趣，因为我们使用泊松随机数生成器来添加一些不常见的“尖峰”。</p><pre class="je jf jg jh fd jw jx jy jz aw ka bi"><span id="6853" class="kb kc hi jx b fi kd ke l kf kg">rng(5)<br/>spiking_data = rand(20,200) + poissrnd(1,20,200);</span></pre><p id="ca27" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种类型的时间序列数据通常使用热图(快速)显示，如下所示。您可以看到值的范围从0到大约7，不同的时间序列(1到20)将在不同的时间达到一个或多个最大值。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kh"><img src="../Images/56838de3fd2b6f2e702da687f7b3cdd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*q5jUdnh150-7Csdw6rDELA.png"/></div></figure><p id="7856" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以使用下面的代码创建一个非常简单的散点图，显示时间序列中每一行的最小值和最大值。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ki"><img src="../Images/bf2de5a8e976f127a5629ee45cecbc9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/1*gLRUVbNdPDyaCTXdrF0b_A.png"/></div></figure><pre class="je jf jg jh fd jw jx jy jz aw ka bi"><span id="9fef" class="kb kc hi jx b fi kd ke l kf kg">min_values = min( spiking_data, [], 2);<br/>max_values = max( spiking_data, [], 2);<br/><br/>fig = figure('color','w');<br/><br/>scatter( min_values, max_values );<br/>xlabel('Min value'); ylabel('Max value');</span></pre><p id="b632" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个图表还没有什么特别令人兴奋的地方。但是我们需要做的就是在下面放下三行:</p><ol class=""><li id="255a" class="kj kk hi ih b ii ij im in iq kl iu km iy kn jc ko kp kq kr bi translated">打开数据光标模式</li><li id="8c7f" class="kj kk hi ih b ii ks im kt iq ku iu kv iy kw jc ko kp kq kr bi translated">将数据光标对象附加到我们的图形上</li><li id="0c1c" class="kj kk hi ih b ii ks im kt iq ku iu kv iy kw jc ko kp kq kr bi translated">指定我们的更新功能</li></ol><p id="c606" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在绘图命令下添加以下代码块:</p><pre class="je jf jg jh fd jw jx jy jz aw ka bi"><span id="0f90" class="kb kc hi jx b fi kd ke l kf kg">datacursormode on<br/>dcm_obj = datacursormode(fig);<br/>set(dcm_obj,'UpdateFcn',{@myupdatefcn3, spiking_data})</span></pre><blockquote class="kx ky kz"><p id="f8df" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">请注意，<em class="hi"> 'UpdateFcn' </em>属性接收由@ flag指定的函数和变量<strong class="ih hj"> spiking_data </strong>，该变量包含生成我们的汇总数字的数据！</p></blockquote><p id="bd19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们的下一个任务是创建<em class="la"> myupdatefcn3.m </em>作为一个单独的文件。这是一个非常非常简单的函数，每当你点击一个数据点时就会被调用。下面是:</p><pre class="je jf jg jh fd jw jx jy jz aw ka bi"><span id="aa43" class="kb kc hi jx b fi kd ke l kf kg">function txt = myupdatefcn3(~,event_obj,inputdata)</span><span id="e0de" class="kb kc hi jx b fi le ke l kf kg">% Get the data that generated the point you clicked on %<br/>dataIdx = get(event_obj,'DataIndex');<br/>theData = inputdata(dataIdx,:);</span><span id="36e0" class="kb kc hi jx b fi le ke l kf kg">% Plot it! %<br/>figure('color','w'); plot( inputdata(dataIdx,:) );</span><span id="fc52" class="kb kc hi jx b fi le ke l kf kg">% Return a text label for your original figure %<br/>txt = sprintf('Idx = %i, Min = %1.2f,Max = %1.2f', dataIdx, min(theData), max(theData) );<br/><br/>end</span></pre><p id="97cb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在返回并运行上面的代码。单击其中一个数据点，它的基本时间序列应该会显示出来供您检查。尽情享受吧！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lf"><img src="../Images/78525a1daf61fee9564d16bae15f76f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ohJyrTloiUMKUIZS0fLuyg.png"/></div></div></figure></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="0c50" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想做一个整洁、多彩的版本(就像我在横幅中做的那样，这里有一个代码要点可以帮你实现)。</p><p id="0814" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里是动态更新函数的代码，你会看到它和上面帖子里的代码没有太大区别！</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lg lh l"/></div></figure><p id="d4ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">保存代码，然后运行它来生成数据和图形。然后就点击！</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lg lh l"/></div></figure></div></div>    
</body>
</html>