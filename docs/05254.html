<html>
<head>
<title>Feature Extraction Using Factor Analysis in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">R中基于因子分析的特征提取</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/feature-extraction-using-factor-analysis-in-r-86fa4f01a43c?source=collection_archive---------9-----------------------#2020-04-15">https://medium.com/analytics-vidhya/feature-extraction-using-factor-analysis-in-r-86fa4f01a43c?source=collection_archive---------9-----------------------#2020-04-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/c4e116cb54b014a3d82c7708ce7ee442.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*muHpybfy4FMfg34X"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">比尔·牛津在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="fc5c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">什么是特征提取？</strong>通过从现有要素创建新要素来减少数据集中要素数量的过程。新的缩减子集能够概括包含在原始特征集中的大部分信息。</p><p id="4de3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">特征提取有两种方法:因子分析和主成分分析。在这篇文章中，我首先谈谈因素分析。</p><p id="a909" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了消除大量变量之间的相关性，我们使用<strong class="ix hj">因子分析</strong>来寻找代表其相关因子的根因子。在我们简化数据的同时，我们也希望保留尽可能多的信息。这里，我用“品牌评级”数据(由Christopher N. Chapman，Elea McDonnell Feit，Springer的<em class="jt">“R for Marketing Research and Analytics”提供)</em>作为例子。</p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="9b67" class="kd ke hi jz b fi kf kg l kh ki">rating &lt;- read.csv("http://goo.gl/IQl8nc")<br/>dim(rating)<br/>head(rating)</span></pre><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kj"><img src="../Images/113623418d636dc2f8277c84c105d15d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_L-DdJ_zLB0w_WEwZONhvg.png"/></div></div></figure><p id="bb06" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">该数据有1000行和10列。每行代表消费者在不同方面(第1至9列)对某品牌(第10列)的评分。</p><p id="b18c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了使数据更加一致并具有相似的标度，我们首先使用标度函数来标准化评级。</p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="e19f" class="kd ke hi jz b fi kf kg l kh ki">rating.sc &lt;- rating<br/>rating.sc[,1:9] &lt;- scale(rating[,1:9])<br/>head(rating.sc)<br/>summary(rating.sc)</span></pre><p id="cc6a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，我们做统计检验，看每个自变量之间的相关性。这将为我们提供一个相关矩阵和一个p值表。</p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="aab5" class="kd ke hi jz b fi kf kg l kh ki">library(psych)<br/>corr.test(as.matrix(rating.sc[,1:9]))</span></pre><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kk"><img src="../Images/61d316befa5b84f3965226636d7b3cf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HYTltAQsbCQ3rUE-_TnG1A.png"/></div></div></figure><p id="b2dc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从相关矩阵中，我们可以看到有些值大于0.5(或者有些将使用0.6作为索引)，这意味着这里存在共线性问题。</p><h1 id="b031" class="kl ke hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">根本因素</h1><p id="78e1" class="pw-post-body-paragraph iv iw hi ix b iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo lm jq jr js hb bi translated">假设有一些相似的变量，接下来，我们要用scree检验和特征值检验来估计因子的个数。先看结果吧。</p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="e415" class="kd ke hi jz b fi kf kg l kh ki">library(nFactors)<br/>nScree(rating.sc[,1:9]) <br/>eigen(cor(rating.sc[,1:9]))</span></pre><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/5f14fcdf0466eb2ccd4b0fb5f70a1fb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A3yNJkj3jCECr7iDm6Gyvg.png"/></div></div></figure><p id="8254" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> Scree test </strong>包含四个测量指标:光学坐标(oc)、加速因子(af)、平行分析(parallel)和凯泽法则(kaiser)。这些值表示可以选择多少因子，但是，有时它们并不相同(就像结果显示的那样)。然后，我们可以采取模式(在这种情况下，3个因素)或检查特征值。</p><p id="90d1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">特征值测试</strong>是另一种确定因子个数的方法。通常我们保留特征值为&gt; 1的因子(或者有的会采用&gt; 2)。因此，这里有三个因素。</p><h1 id="ea3f" class="kl ke hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">因子<strong class="ak">旋转</strong></h1><p id="50f4" class="pw-post-body-paragraph iv iw hi ix b iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo lm jq jr js hb bi translated">知道要使用的因子数后，我们将它(因子= 3)应用于因子分析。我们可以尝试三种旋转类型:varimax、斜角、无。</p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="17a1" class="kd ke hi jz b fi kf kg l kh ki">library(GPArotation)<br/>factanal(rating.sc[,2:6], factors=3, rotation=”varimax”) <br/>factanal(rating.sc[,2:6], factors=3, rotation=”oblimin”)<br/>factanal(rating.sc[,2:6], factors=3, rotation=”none”)</span></pre><p id="b982" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> 1。</strong><strong class="ix hj">【Varimax(默认)】</strong>:一种正交旋转方法，可以最小化高负载变量的数量。它导致不相关的因素。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/7569ecb6f2b55496eb1d7f8410392dd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HYOTouUdNnD0IKxPgb6k2Q.png"/></div></div></figure><p id="8cda" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> 2。倾斜</strong>:轴不保持直角，允许因子之间的关联(有时可以简化因子模式矩阵)。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/feca55838222ae369a3b1a381e47d1ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HgRv8Yjwc8z7OdjamUKysA.png"/></div></div></figure><p id="87c3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> 3。无</strong>:无旋转的因子分析。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/42d2d5757d4286ed0967c8cbf575e785.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uZMEHEU7b_Btv320wdlEpw.png"/></div></div></figure><p id="1825" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在上面的图片中，我把因素1的属性用蓝色阴影，因素2的用绿色，因素3的用粉红色。我们可以看到，在这种情况下，无论是否调整旋转，因素属性和%累积加载的顺序都略有不同。(总体模式相似)</p><p id="fd66" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面，我采用rotation="varimax "和scores = "Bartlett "进行下面的分析解释。</p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="c6e5" class="kd ke hi jz b fi kf kg l kh ki">factor_res = factanal(rating.sc[,1:9], factors=3, scores=”Bartlett”)</span></pre><h1 id="77a5" class="kl ke hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">因素负荷</h1><p id="29a7" class="pw-post-body-paragraph iv iw hi ix b iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo lm jq jr js hb bi translated">因子加载显示了决定每个因子如何影响每个属性的权重。这些载荷(取其绝对值)有助于将属性分配给因子，并确定最能描述因子的名称。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/6c4b93cf9520aef7ef1da8ad9c2b9b87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4k4z0WxZhRkbPIvQ-Iuo0w.png"/></div></div></figure><p id="bb17" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">通过解释加载矩阵，我们知道属性“廉价”和“价值”对因素1的贡献很大，因此“领先”对因素2的贡献也很大，而“最新”对因素2的贡献也很大。因此，我们可以得出结论，这些变量是根本因素。此外，累积负载表明，57%的数据可以用因子1、2和3来解释。换句话说，在这种情况下，当将9个因素减少到3个因素时，有43%的信息损失。</p><h1 id="1ba3" class="kl ke hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">因子得分</h1><p id="aa1e" class="pw-post-body-paragraph iv iw hi ix b iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo lm jq jr js hb bi translated">接下来，让我们获得因素得分，并在每个因素上为每个人添加匹配的品牌名称。</p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="2269" class="kd ke hi jz b fi kf kg l kh ki">brand.scores &lt;- data.frame(factor_res$scores) <br/>brand.scores$brand &lt;- rating.sc$brand<br/>head(brand.scores)</span></pre><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lq"><img src="../Images/411d5e6cba2b7c33abc99dd8c7e6665a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xt4HKA81nkcb8jLRE_H5Yw.png"/></div></div></figure><p id="39f4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后，我们计算各品牌每个因素的平均值，并做一些描述性分析。</p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="f232" class="kd ke hi jz b fi kf kg l kh ki">(brand.mean &lt;- aggregate(brand.scores[,1:3], list(brand.scores[,4]), mean))</span></pre><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/6ddd66af1698f5d53bad13442c857b8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*--IA9EzE2dI10ilIZxqN8Q.png"/></div></div></figure><p id="7afa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可以发现，品牌f和g表现出很强的性价比(因素1)，而它们被定位为不太新的品牌(因素3)。此外，品牌b和c被视为领先品牌(因素2)。</p></div><div class="ab cl ls lt gp lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="hb hc hd he hf"><h1 id="295b" class="kl ke hi bd km kn lz kp kq kr ma kt ku kv mb kx ky kz mc lb lc ld md lf lg lh bi translated">关于我</h1><p id="b909" class="pw-post-body-paragraph iv iw hi ix b iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo lm jq jr js hb bi translated">嗨，我是Kelly，一名具有新闻和传播背景的商业分析研究生，喜欢分享探索数据和有趣发现的生活。如果您有任何问题，请随时通过<a class="ae iu" href="mailto:kelly.szutu@gmail.com" rel="noopener ugc nofollow" target="_blank">k<em class="jt">elly.szutu@gmail.com</em>T11】联系我</a></p></div></div>    
</body>
</html>