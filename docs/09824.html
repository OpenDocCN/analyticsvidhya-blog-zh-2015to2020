<html>
<head>
<title>Finding Identical Images without sophisticated Deep Learning Algos?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在没有复杂的深度学习算法的情况下找到相同的图像？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/finding-identical-images-in-a-directory-without-sophisticated-deep-learning-algos-5da67702059c?source=collection_archive---------22-----------------------#2020-09-21">https://medium.com/analytics-vidhya/finding-identical-images-in-a-directory-without-sophisticated-deep-learning-algos-5da67702059c?source=collection_archive---------22-----------------------#2020-09-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0c33" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我知道这很不重要，但在大多数情况下这是可行的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/44b124121c45b0101255fcec961a9e1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*bz44tk9uf0Fdup39t-zrYw.jpeg"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">这样更容易搞清楚。什么事？</figcaption></figure></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><h1 id="62ab" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">当谈到图像时，唯一冲击我们大脑的概念是深度学习。因此，在这篇博客中，我将分享一种复杂的算法，不像深度学习那样方便和强大。</h1><p id="0188" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">在编写一个关于计算机视觉的程序时，我遇到了一个关于图像复制的问题。后来我谷歌了一下，发现大部分文章都是在机器学习和深度学习概念的基础上定义的。</p><p id="ec4f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有没有想过，计算机是如何存储图像的？毕竟，电脑只是一块焊接在集成电路上的硅片。嗯，很简单。如你所知，图像是一系列像素合并在一个边界区域，在数学术语中称为“矩阵”。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es kz"><img src="../Images/557f88136530dc89d67be9c82626ee80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dnJPq4mDN8fcjPdmmQv6xQ.jpeg"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">不是这个。</figcaption></figure><p id="8b2f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是这些微小的像素是什么呢？计算机是如何理解这些像素的？是的，像素只是数字。</p><p id="2f4f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">不知所措？</strong>你没看错。像素通常被表示为整数，其范围取决于它们的通道的不同值。</p><p id="454f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">这些渠道是什么？</strong>这些通道是颜色编码，用于表示不同的颜色组。例如，一幅图像(如下图所示)表示为m×n×c矩阵，其中，<strong class="ih hj"> m </strong>代表<strong class="ih hj">行，n </strong>代表<strong class="ih hj">列</strong>，c<strong class="ih hj">代表<strong class="ih hj">矩阵</strong>的<strong class="ih hj">高度</strong>。(在这种情况下，“高度”被视为“通道”)。</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es le"><img src="../Images/38c52b0a72e5a704ea2ed04c60bed7aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jsPHpueq_PAPRH5KVA2VMw.png"/></div></div></figure><p id="6bed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的例子是一个RGB图像。每个通道对应其各自的颜色。为了调整，第<strong class="ih hj">个</strong>通道对应于<strong class="ih hj">红色的值。</strong>同样，<strong class="ih hj">第一</strong>通道代表<strong class="ih hj">绿色</strong>和<strong class="ih hj">第二</strong>蓝色的数值。</p><p id="9155" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，矩阵形式的这些颜色值被用于在不可理解的机器中表示图像数据。</p><h1 id="4dd7" class="jw jx hi bd jy jz lf kb kc kd lg kf kg kh lh kj kk kl li kn ko kp lj kr ks kt bi translated">但是，我如何找到相似或重复的图像？</h1><p id="6221" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">是的，的确令人兴奋！如前所述，图像通常被表示为它们各自通道中的一系列整数。因此，我们将评估整数/像素值，以找到图像之间的相似性。</p><p id="3499" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先要了解一个统计学概念，这个概念大家非常熟悉，经常用在各种数学统计问题中。其定义为“<strong class="ih hj">意为</strong>”。</p><p id="cbc8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是你可能想知道，在处理图像时，<strong class="ih hj">的意思是</strong>？是吗？你可能会在这篇文章的最后回答你自己！。</p><p id="d41b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">平均值</strong>被定义为观察中术语的总和除以术语的总数。它由以下等式给出:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lk"><img src="../Images/f28539024a8b3235a6251d0615505c66.png" data-original-src="https://miro.medium.com/v2/resize:fit:562/format:webp/1*PBWMtgzN6C9AePOugAC-mg.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">均值方程</figcaption></figure><p id="72e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这种情况下，我们将使用一个重要的等式，通常称为<strong class="ih hj">均方误差</strong>或缩写为<strong class="ih hj"> MSE。</strong>它衡量的是观测值的<strong class="ih hj">误差平方和</strong>或者准确地说，它被定义为估计值和实际值之间的<strong class="ih hj">平均平方差。</strong>这里，估计值和实际值是两个图像。它的方程式如下所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ll"><img src="../Images/fa04ffc0c812c72d1e54b73cb2981ba5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/format:webp/1*sku4Q3Neo1OhCkuRgBpkTA.jpeg"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">均方误差</figcaption></figure><h1 id="59f4" class="jw jx hi bd jy jz lf kb kc kd lg kf kg kh lh kj kk kl li kn ko kp lj kr ks kt bi translated"><strong class="ak">但是，我怎么编码呢？</strong></h1><p id="8941" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">为了演示这一点，我们将使用<strong class="ih hj"> Python，</strong>因为它有许多内置的库来执行统计和数学问题。</p><p id="fb34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所需的库:</p><ol class=""><li id="e738" class="lm ln hi ih b ii ij im in iq lo iu lp iy lq jc lr ls lt lu bi translated">NumPy</li><li id="720d" class="lm ln hi ih b ii lv im lw iq lx iu ly iy lz jc lr ls lt lu bi translated">OpenCV</li><li id="59c1" class="lm ln hi ih b ii lv im lw iq lx iu ly iy lz jc lr ls lt lu bi translated">Matplotlib</li></ol><p id="ec89" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，<strong class="ih hj"> NumPy </strong>是一个广泛使用的库，在计算大数据时非常高效。NumPy数组是一个数值网格，由一组非负整数索引。</p><p id="e327" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">OpenCV 是一个用C++编写的库，主要针对计算机视觉领域。但是，计算机视觉的概念将不会被涵盖，而是它将被用来处理图像。</p><h1 id="4b92" class="jw jx hi bd jy jz lf kb kc kd lg kf kg kh lh kj kk kl li kn ko kp lj kr ks kt bi translated">我们开始吧。</h1><p id="204d" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">首先，导入以下库，</p><pre class="je jf jg jh fd ma mb mc md aw me bi"><span id="8ed5" class="mf jx hi mb b fi mg mh l mi mj">import cv2</span><span id="58da" class="mf jx hi mb b fi mk mh l mi mj">import numpy as np</span></pre><p id="098c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">NumPy简称为<strong class="ih hj"> np。</strong></p><p id="2f36" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用<strong class="ih hj"> CV2 </strong>对象加载图像。它是这样写的:</p><pre class="je jf jg jh fd ma mb mc md aw me bi"><span id="a7ec" class="mf jx hi mb b fi mg mh l mi mj">image1 = cv2.imread(r"&lt;path&gt;")</span><span id="c82a" class="mf jx hi mb b fi mk mh l mi mj">image2 = cv2.imread(r"&lt;path&gt;")</span></pre><p id="3d89" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">设<strong class="ih hj">图像1 </strong>和<strong class="ih hj">图像2 </strong>为<strong class="ih hj"> CV2 </strong>的两个对象进行评估。cv2的两个对象都是矩阵形式，其中包含以数组形式的值列表捕获的图像，可以通过打印来查看。</p><pre class="je jf jg jh fd ma mb mc md aw me bi"><span id="440b" class="mf jx hi mb b fi mg mh l mi mj">print(image1)<br/>print(image1.shape)#returns image dimensions(mxnxc)</span></pre><blockquote class="ml mm mn"><p id="0fc2" class="if ig mo ih b ii ij ik il im in io ip mp ir is it mq iv iw ix mr iz ja jb jc hb bi translated"><strong class="ih hj">注意:</strong>“r”后面是path，因为它表示为字符串。“r”可以用来克服路径冲突，使阅读图像更容易。</p></blockquote><p id="692e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">装载操作已完成。接下来，需要将图像转换成<strong class="ih hj">灰度模式。</strong>这样做是为了方便评估图像，因为在灰度中，图像的大小保持为<strong class="ih hj"> m x n x 1，</strong>即<strong class="ih hj">三通道(RGB) </strong>集成到一个通道(黑色)。</p><p id="851c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面的代码将3层Mat转换为1层。</p><pre class="je jf jg jh fd ma mb mc md aw me bi"><span id="87cb" class="mf jx hi mb b fi mg mh l mi mj">image1_gray = cv2.cvtColor(image1,cv2.COLOR_BGR2GRAY)<br/>image2_gray = cv2.cvtColor(image2,cv2.COLOR_BGR2GRAY)</span></pre><p id="0ee9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一个任务是调整图像的大小，使两个图像匹配尺寸。这是强制性的，因为不对称尺寸的简化可能导致数值误差，在任何情况下都必须避免。</p><pre class="je jf jg jh fd ma mb mc md aw me bi"><span id="dc6f" class="mf jx hi mb b fi mg mh l mi mj">image1_gray_resized = cv2.resize(image1_gray,(224,224))<br/>image2_gray_resized = cv2.resize(image2_gray,(224,224))</span></pre><p id="024f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">唷…..那是一个艰难的过程。</p><p id="c367" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，是时候处理图像并到达岸边了。</p><p id="7b8b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还记得最初导入的一个名为NumPy的库吗？它将用于预处理输入到numpy数组的图像。为此，</p><pre class="je jf jg jh fd ma mb mc md aw me bi"><span id="40cb" class="mf jx hi mb b fi mg mh l mi mj">image1_gray_resized_np = np.asarray(image1_gray_resized)<br/>image2_gray_resized_np = np.asarray(image2_gray_resized)</span></pre><p id="5f7b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面的对象是一种类型的<strong class="ih hj"> NumPy，</strong>因此<strong class="ih hj"> </strong>它的预处理会超级快。</p><p id="a545" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，为了计算图像之间的<strong class="ih hj"> MSE </strong>，以上面给出的等式的形式编写代码。因此，代码是</p><pre class="je jf jg jh fd ma mb mc md aw me bi"><span id="8cd7" class="mf jx hi mb b fi mg mh l mi mj">mse = np.square(image1_gray_resized_np - image2_gray_resized_np).mean()</span></pre><p id="4d65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，<strong class="ih hj"> np </strong>是<strong class="ih hj"> NumPy的别名，np.square() </strong>是NumPy的对象，它计算传递的实例的平方，<strong class="ih hj"> mean() </strong>是计算结果NumPy数组的平均值的对象。</p><p id="b51b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">打印出计算出的值，你会发现它对应的MSE。</p><pre class="je jf jg jh fd ma mb mc md aw me bi"><span id="e568" class="mf jx hi mb b fi mg mh l mi mj">print(mse)</span></pre><p id="2f13" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">太棒了。！，<strong class="ih hj">计算MSE </strong>。发现数字是用小数表示的。</p><p id="e3e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好的，让我们设定一个阈值，低于该阈值的图像被认为是<strong class="ih hj">重复</strong>或<strong class="ih hj">相同。</strong></p><blockquote class="ml mm mn"><p id="367d" class="if ig mo ih b ii ij ik il im in io ip mp ir is it mq iv iw ix mr iz ja jb jc hb bi translated">在各种观察中，我发现如果一幅图像MSE低于100.00，就可以说它是相似的</p></blockquote><p id="08b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">考虑一下，门槛是100。因此，如果图像的MSE低于100，则认为它是重复的或相似的。</p><p id="be9f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">哇！！，那太好了，希望你已经得到了使用<strong class="ih hj"> Mean </strong>寻找相同图像的答案。</p><h1 id="5e98" class="jw jx hi bd jy jz lf kb kc kd lg kf kg kh lh kj kk kl li kn ko kp lj kr ks kt bi translated">恭喜你！</h1><p id="cf7c" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">现在你知道如何使用一个简单的数学方程来识别相同的图像。这种算法的缺点是对变换后的图像分类不正确，也就是说，如果图像旋转、模糊等。</p><p id="771e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，这篇文章是与深度学习相对照而写的。我在从事一个关于计算机视觉的项目时发现这很有趣，在这个项目中，独特的图像在执行过程中被同时保存。网上的大多数文章都是基于复杂的深度学习和机器学习概念。但是DL模型可能是无关紧要的，可能会降低我的代码的效率。</p><h2 id="37bc" class="mf jx hi bd jy ms mt mu kc mv mw mx kg iq my mz kk iu na nb ko iy nc nd ks ne bi translated">为了在更短的时间内过滤很多图片，在我的GitHub Repo中找到它</h2><p id="21d8" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated"><a class="ae nf" href="https://github.com/mohammedhashim790/idetical-images" rel="noopener ugc nofollow" target="_blank">https://github.com/mohammedhashim790/idetical-images</a></p><h1 id="db0a" class="jw jx hi bd jy jz lf kb kc kd lg kf kg kh lh kj kk kl li kn ko kp lj kr ks kt bi translated">继续你的旅程</h1><p id="625a" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">如果你是一个有抱负的程序员，打算给世界带来奇迹，那么不要止步于此，超越限制，到达星星，如果你在代码中有严重的错误，也不要失去希望。向后倾斜，思考，再思考，瞧！你已经得到它了。</p><p id="aa8f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">编码快乐！</p></div></div>    
</body>
</html>