<html>
<head>
<title>The Mystery of Missing data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">丢失数据之谜</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/the-mystery-of-missing-data-d80e4c118031?source=collection_archive---------18-----------------------#2020-03-26">https://medium.com/analytics-vidhya/the-mystery-of-missing-data-d80e4c118031?source=collection_archive---------18-----------------------#2020-03-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0092" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">这不是模型的问题，而是我们提供了什么(数据)。秘密就在里面。</em></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/6676445d528f11248ef1d16e24a046cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*xU1nY7sCPSoPsyLh"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">缺失数据</figcaption></figure><p id="16da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在现实世界中，我们遇到的数据并不像我们预期的那样美好。它将包含一些丢失的值。因此，在进行任何分析之前，我们需要删除这些丢失的值(实际上不是通过删除这些条目来删除，而是实际处理它们，删除这些条目可能是我们想要选择的最后一个选项)。</p><p id="8b70" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">处理缺失数据的方法有很多，但在此之前，我们需要识别缺失数据，在此之前，我们需要知道什么是缺失数据。所以我们的第一个问题是:</p><h1 id="de31" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated"><strong class="ak">什么是缺失数据，为什么我们会关心它？</strong></h1><p id="2560" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">在捕获数据时，有时可能会发生数据未被捕获的情况。现在，这可能是由于损坏的数据、从源提取数据时的失败或任何其他故障而发生的。这可能导致数据缺失，称为<strong class="ih hj">缺失数据。</strong></p><p id="342d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">人们常说，数据越漂亮，模型就越精确(这里的漂亮是指好的数据)。因此，如果我们提供给模型的数据不完整，那么模型将无法捕捉数据的全部关键，因此我们的模型将是差的。因此，我们关心我们给模型的数据。</p><h1 id="78ea" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">我们如何识别缺失的值？</h1><p id="9d39" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">有多种方法可以识别缺失值:</p><ul class=""><li id="21a4" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated"><strong class="ih hj"> <em class="jd">使用df.isnull()或df . ISNA()</em></strong><em class="jd">——这两种方法会给出相同的结果。</em></li></ul><p id="d365" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将使用巨大的数据集来演示例子。</p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="70c7" class="lh jr hi ld b fi li lj l lk ll">train = pd.read_csv('data/train.csv')<br/>train.head()</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es lm"><img src="../Images/c5766c19c97e5c92eca0b2777932a211.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1reiWc5t6nSqxhjSqsD1WQ.png"/></div></div></figure><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="903b" class="lh jr hi ld b fi li lj l lk ll">train.isnull().sum()</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lr"><img src="../Images/41826d25553c5f6b303ee0d0e23e0596.png" data-original-src="https://miro.medium.com/v2/resize:fit:596/format:webp/1*I1G4KqTJq48J3xrc3BTpog.png"/></div></figure><p id="378c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以我们可以看到年龄，客舱和登船栏有缺失值。</p><ul class=""><li id="52ac" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated"><strong class="ih hj"> <em class="jd">使用缺失无库:</em> </strong></li></ul><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="2705" class="lh jr hi ld b fi li lj l lk ll"># Use pip install missingno to install this library<br/>import missingno as msno</span><span id="5f70" class="lh jr hi ld b fi ls lj l lk ll">msno.matrix(train)</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es lt"><img src="../Images/82890737dbe6e732a5603c81e6735e16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_px_1H2XqqN08t0oieX8-A.png"/></div></div></figure><p id="ee74" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在该图中，白线表示缺失值。</p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="8c08" class="lh jr hi ld b fi li lj l lk ll">msno.bar(train)</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es lu"><img src="../Images/7a98bfd8c8cdba819953cce07b05daee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hnz0FHk8qWyUg5G4SkUv3Q.png"/></div></div></figure><p id="65e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上图显示了一个双轴图，左边显示了从0到1的比例，右边显示了行号。年龄列的值为0.8，即80%不为空，891个值中有741个值。客舱列有20%的值，即80%为空值，891个值中有204个值。</p><h1 id="9eb3" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated"><strong class="ak">如何处理这些缺失值？</strong></h1><p id="f5ad" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">有不同的技术来处理缺失值:</p><ol class=""><li id="3926" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc lv kz la lb bi translated"><strong class="ih hj">插补:</strong></li></ol><p id="f495" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">估算值有不同的方法:</p><ul class=""><li id="bf80" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated"><strong class="ih hj"> <em class="jd">传统的df.fillna()方法。</em>T25】</strong></li></ul><p id="6534" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这种情况下，我们用一些值(通常是平均值、中值或众数)替换缺失值。</p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="6258" class="lh jr hi ld b fi li lj l lk ll">train.Age.fillna(value= train.Age.mean())</span></pre><p id="eb77" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将通过平均值替换年龄列中缺少的值，类似地，我们可以用众数和中位数替换。</p><p id="7d45" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们也可以使用插值来填充缺失的值。</p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="e805" class="lh jr hi ld b fi li lj l lk ll">train.Age.fillna(method= 'ffill')</span></pre><p id="964c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du lw lx ly ld b">'ffill'</code>代表“向前填充”并将上一个有效观察向前传播到下一个有效观察。另一个选择是<code class="du lw lx ly ld b">'bfill'</code>，它以同样的方式工作，但方向相反。</p><ul class=""><li id="98ad" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated"><strong class="ih hj"> <em class="jd">使用简单估算器。</em>T3】</strong></li></ul><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="7856" class="lh jr hi ld b fi li lj l lk ll">from sklearn.impute import SimpleImputer<br/>  <br/># Using SimpleImputerfunction to replace NaN <br/># values with mean of that parameter value <br/>imp=SimpleImputer(missing_values=np.NaN, strategy="mean" )<br/>train['Age']=imp.fit_transform(train[["Age"]]).ravel()</span></pre><p id="3125" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，您可以自由选择任何策略，即均值、中值等。</p><p id="01d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 2。创建独特的类别:</strong></p><p id="046c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们也可以创建一个单独的类别。例如，对于客舱栏，我们可以创建一个新类别“未知”。我们正在为缺失值创建一个单独的类。我们可以乘坐<em class="jd">列车。Cabin.fillna('unknown') </em>创建这个单独的类别。</p><p id="3770" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 3。预测缺失值:</strong></p><p id="ece3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以使用机器学习算法来预测丢失的值。例如，在我们的例子中，我们可以使用线性回归来预测“年龄”。我们可以尝试不同的算法，并检查哪种算法的精确度最高。</p><p id="0a19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 4。删除整列:</strong></p><p id="1aca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们遇到一个场景，其中大多数值为空(大多数的定义因人而异)，例如，如果一个列有超过75%的值为空，那么保留该列就没有意义。在这种情况下，我们应该删除列。</p><p id="48c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">总而言之，</p><p id="3593" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将遇到的大多数数据集都有缺失值，使用智能的方法来处理这些缺失值将会产生一个准确而健壮的模型。拥有良好的领域知识也有助于我们决定如何处理这些缺失的价值。</p><p id="fe9b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">欢迎在下面留下你的评论或问题，或者你可以在Linkedin上找到我。</p></div></div>    
</body>
</html>