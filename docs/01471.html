<html>
<head>
<title>Creating a database using superhero “Python”</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用超级英雄“Python”创建数据库</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/creating-a-database-using-superhero-python-fe44ad68674b?source=collection_archive---------5-----------------------#2019-10-24">https://medium.com/analytics-vidhya/creating-a-database-using-superhero-python-fe44ad68674b?source=collection_archive---------5-----------------------#2019-10-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6aaa" class="pw-post-body-paragraph ig ih hi ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hb bi je translated"><span class="l jf jg jh bm ji jj jk jl jm di">在</span> <em class="jn">这篇文章中，我们将学习如何通过构建简单的登录和注册功能，使用python sqlite3模块创建“SQLite数据库”。你为这次旅程做好准备了吗，</em> <strong class="ii hj"> <em class="jn">如果是的话</em> </strong> <em class="jn">让我们马上开始吧。</em></p><figure class="jp jq jr js fd jt er es paragraph-image"><div class="er es jo"><img src="../Images/8841f6ef2476ce63f3b700f03c2b7c0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:708/format:webp/1*V8ddnduSjAUDfMiObTWLng.jpeg"/></div><figcaption class="jw jx et er es jy jz bd b be z dx translated"><strong class="bd ka">来源</strong>:<a class="ae kb" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRznWuHOypfEWq2A2-1I-2CIRwldPbkRn0POnWYkB3mZM327FYm&amp;s" rel="noopener ugc nofollow" target="_blank">https://encrypted-tbn0.gstatic.com/images?q = tbn:and 9 gcrznwuhoypfewq 2 a 2-1I-2 cirwldpbkrn 0 ponwykb 3m zm 327 fym&amp;s</a></figcaption></figure><blockquote class="kc kd ke"><p id="da60" class="ig ih jn ii b ij ik il im in io ip iq kf is it iu kg iw ix iy kh ja jb jc jd hb bi translated"><strong class="ii hj">提示1 </strong> <em class="hi"> : </em>当你想用编码来创造一些东西时，⚠️从不直接跳到代码中</p><p id="6086" class="ig ih jn ii b ij ik il im in io ip iq kf is it iu kg iw ix iy kh ja jb jc jd hb bi translated"><strong class="ii hj">第一步:<em class="hi">思考并写出</em> </strong>，你想做什么以及如何去做</p></blockquote><figure class="jp jq jr js fd jt er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es ki"><img src="../Images/0ec62cd2a56d7681fef3d2d163bb9ac8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C2d0V2tZMOKy8M9BoIbu9g.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">这是我在写代码之前创建的布局</figcaption></figure><blockquote class="kc kd ke"><p id="7345" class="ig ih jn ii b ij ik il im in io ip iq kf is it iu kg iw ix iy kh ja jb jc jd hb bi translated"><strong class="ii hj"> <em class="hi">创建用户类</em> </strong></p></blockquote><figure class="jp jq jr js fd jt er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kn"><img src="../Images/1c1bf8ab884bbceda055f1f6bfe8d320.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ksEj07gCCh8SyAUWfhUoZQ.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">用户类别的代码</figcaption></figure><blockquote class="kc kd ke"><p id="721f" class="ig ih jn ii b ij ik il im in io ip iq kf is it iu kg iw ix iy kh ja jb jc jd hb bi translated"><strong class="ii hj"> <em class="hi">类的描述</em> </strong></p></blockquote><p id="934e" class="pw-post-body-paragraph ig ih hi ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hb bi translated"><strong class="ii hj"><em class="jn">validate email</em></strong>会检查邮件地址是否以'结尾。'并在其中包含' @ '。如果没有，它将引发一个错误</p><p id="e2b6" class="pw-post-body-paragraph ig ih hi ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hb bi translated"><strong class="ii hj"> <em class="jn"> getData </em> </strong>将返回一个对象的电子邮件和密码，该对象稍后将在<strong class="ii hj"> <em class="jn">注册</em> </strong>过程中用于在数据库中创建一行。</p><p id="fbcb" class="pw-post-body-paragraph ig ih hi ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hb bi translated">待办事宜一号完成，<strong class="ii hj"> <em class="jn">万岁………… </em> </strong></p><p id="05f0" class="pw-post-body-paragraph ig ih hi ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hb bi je translated"><span class="l jf jg jh bm ji jj jk jl jm di">C</span>T48】创建数据库</p><p id="444d" class="pw-post-body-paragraph ig ih hi ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hb bi translated"><strong class="ii hj"><em class="jn">python sqlite3模块简介</em> </strong></p><p id="0e90" class="pw-post-body-paragraph ig ih hi ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hb bi translated">python sqlite3模块有两个重要的实体，它们是数据库和游标</p><blockquote class="kc kd ke"><p id="2fc6" class="ig ih jn ii b ij ik il im in io ip iq kf is it iu kg iw ix iy kh ja jb jc jd hb bi translated"><strong class="ii hj"> <em class="hi">数据库</em> </strong>:有两种，一种是二级存储，另一种是内存。内存数据只会在程序运行前存在。您应该在数据库的测试阶段使用它。第二个是持久存储，即使在节目结束和停止后也将被存储。</p></blockquote><p id="98e2" class="pw-post-body-paragraph ig ih hi ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hb bi translated">#给出创建数据库的片段</p><blockquote class="kc kd ke"><p id="6794" class="ig ih jn ii b ij ik il im in io ip iq kf is it iu kg iw ix iy kh ja jb jc jd hb bi translated"><strong class="ii hj"> <em class="hi">光标</em> </strong>:该界面允许我们对数据库进行插入、删除、新建等操作。每个数据库都有自己的游标。例如，如果您有database1.db、database2.db，那么两者都有自己的游标。拥有全局游标没有意义</p></blockquote><p id="06e2" class="pw-post-body-paragraph ig ih hi ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hb bi translated">#给出光标对象的代码片段</p><blockquote class="kc kd ke"><p id="b348" class="ig ih jn ii b ij ik il im in io ip iq kf is it iu kg iw ix iy kh ja jb jc jd hb bi translated"><strong class="ii hj"> <em class="hi">创建数据库类</em> </strong></p></blockquote><figure class="jp jq jr js fd jt er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es ko"><img src="../Images/23f204bc55d04a089d5c439b45919a4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XKUntoDJmvmQtroF0gZAFg.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">创建数据库类的代码。</figcaption></figure><blockquote class="kc kd ke"><p id="6293" class="ig ih jn ii b ij ik il im in io ip iq kf is it iu kg iw ix iy kh ja jb jc jd hb bi translated"><strong class="ii hj"> <em class="hi">类的描述</em> </strong></p><p id="b300" class="ig ih jn ii b ij ik il im in io ip iq kf is it iu kg iw ix iy kh ja jb jc jd hb bi translated"><strong class="ii hj"> <em class="hi"> createDataBase </em> </strong>:将创建一个内存类型或二级存储类型的数据库。如果存在同名的数据库，则不会创建新的数据库。但是这种行为对于在数据库中创建表是不同的。属性“c”只是对数据库的游标对象的引用。</p><p id="04e1" class="ig ih jn ii b ij ik il im in io ip iq kf is it iu kg iw ix iy kh ja jb jc jd hb bi translated"><strong class="ii hj"> <em class="hi"> createTable </em> </strong>:将创建一个用户表。将它放在try except块中的原因是，如果表已经存在，sqlite3将抛出一个错误。为了避免这种行为，我们将把它放在try except block中。创建表格的sqlite命令是<strong class="ii hj">(【创建表格</strong><em class="hi">your _ TABLE _ name</em><strong class="ii hj">(<em class="hi"/></strong><em class="hi">column _ name</em><strong class="ii hj"><em class="hi"/></strong><em class="hi">column _ type</em><strong class="ii hj">)</strong>。<em class="hi"> sqlite3 </em>提供了四种数据类型，分别是<strong class="ii hj"> int、real、text、blob。</strong></p><p id="6667" class="ig ih jn ii b ij ik il im in io ip iq kf is it iu kg iw ix iy kh ja jb jc jd hb bi translated"><strong class="ii hj"> <em class="hi"> insertUser </em> </strong>:将用户插入到数据库中，创建它的命令是(<strong class="ii hj">INSERT INTO</strong><em class="hi">your _ table _ name</em><strong class="ii hj">VALUES</strong>(？, ?)、<em class="hi">tuple _ to _ fill _ the _ columns</em>)。警告，千万不要使用python字符串格式化技术向数据库中插入一行，因为这会导致sqlite注入，还有用<strong class="ii hj">？</strong> (DB-API)，将由一个元组的元素填充，该元组将由<strong class="ii hj"> User.getData()给出。</strong></p><p id="cf90" class="ig ih jn ii b ij ik il im in io ip iq kf is it iu kg iw ix iy kh ja jb jc jd hb bi translated"><strong class="ii hj"> <em class="hi"> getUser </em> </strong>:将从匹配给定电子邮件的表中获取用户。它只会给我们对象，但我们需要价值。因此，我们使用游标的fectch方法。有3个方法，一个是<strong class="ii hj"> fetchone </strong>它将只使用元组中的行，如果它在那里的话。<strong class="ii hj">fetchmany(number _ of _ rows)</strong>将从匹配的查询集中返回最大行数。<strong class="ii hj"> fetchall() </strong>将返回所有匹配的行</p><p id="b2fc" class="ig ih jn ii b ij ik il im in io ip iq kf is it iu kg iw ix iy kh ja jb jc jd hb bi translated"><strong class="ii hj"> deleteUser </strong>:将删除一个用户，并向其提供电子邮件。从sqlite中删除一行的模板是("<strong class="ii hj"><em class="hi">DELETE FROM</em></strong>table _ name<strong class="ii hj"><em class="hi">WHERE</em></strong>column _ name =？"，(value，))如果给定的电子邮件中没有行，这将显示一个错误。</p></blockquote><h2 id="621f" class="kp kq hi bd ka kr ks kt ku kv kw kx ky ir kz la lb iv lc ld le iz lf lg lh li bi translated">⚠️ (3)是<strong class="ak">不是元组</strong> (3，)是元组，因为如果只有一个元素，元组期望第一个元素 后有<strong class="ak"> <em class="if">逗号。</em></strong></h2><blockquote class="kc kd ke"><p id="7b5c" class="ig ih jn ii b ij ik il im in io ip iq kf is it iu kg iw ix iy kh ja jb jc jd hb bi translated"><strong class="ii hj"> deleteUser </strong>:将删除一个用户，并向其提供电子邮件。从sqlite中删除一行的模板是("<strong class="ii hj"><em class="hi">DELETE FROM</em></strong>table _ name<strong class="ii hj"><em class="hi">其中</em> </strong> column_name=？"，(value，))如果给定的电子邮件中没有行，这将显示一个错误。</p></blockquote><h2 id="7351" class="kp kq hi bd ka kr ks kt ku kv kw kx ky ir kz la lb iv lc ld le iz lf lg lh li bi translated"><strong class="ak"> <em class="if">创建登录和注册功能</em> </strong></h2><figure class="jp jq jr js fd jt er es paragraph-image"><div class="er es lj"><img src="../Images/1b17deff8fb4485c0c39aaaa5050691c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*1_njmTaWqfTOaf1gML4-1g.png"/></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">登录和注册功能代码</figcaption></figure><figure class="jp jq jr js fd jt er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es lk"><img src="../Images/519ce8cc7a8d68dfabee9d83a0099a1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lMTvZ_cv-XnRPaSWak1ejg.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">认证方法代码</figcaption></figure><p id="4732" class="pw-post-body-paragraph ig ih hi ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hb bi translated">认证功能将根据用户输入调用<strong class="ii hj">登录/注册</strong>功能。<strong class="ii hj">登录</strong>功能将调用<strong class="ii hj"> getUser </strong>用实际密码确认输入的密码。<strong class="ii hj">注册</strong>功能会用password_2检查输入的密码进行确认。然后用输入的数据调用<strong class="ii hj"> insertUser </strong>方法</p><h2 id="e37e" class="kp kq hi bd ka kr ks kt ku kv kw kx ky ir kz la lb iv lc ld le iz lf lg lh li bi translated">巨大的一步，将所有的东西结合在一起</h2><figure class="jp jq jr js fd jt er es paragraph-image"><div class="er es ll"><img src="../Images/aec0e4ded30ea466a27ad6cb7b049639.png" data-original-src="https://miro.medium.com/v2/resize:fit:584/format:webp/1*21gAa_awyzmzRdXtGGT8BQ.png"/></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">所有代码中神奇的部分</figcaption></figure><p id="23d4" class="pw-post-body-paragraph ig ih hi ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hb bi translated">如果你不喜欢这篇文章，写下你不喜欢的原因。建议总是受欢迎的。谢谢你的时间…</p></div></div>    
</body>
</html>