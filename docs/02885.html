<html>
<head>
<title>Friction-less Bot Detection with Google’s reCAPTCHA v3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌reCAPTCHA v3的无摩擦机器人检测</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/friction-less-bot-detection-with-googles-recaptcha-v3-a1885cd64beb?source=collection_archive---------10-----------------------#2020-01-06">https://medium.com/analytics-vidhya/friction-less-bot-detection-with-googles-recaptcha-v3-a1885cd64beb?source=collection_archive---------10-----------------------#2020-01-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="bed9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在进入解决方案之前，让我们先了解一下互联网机器人的基础知识，这样我们才能决定哪个解决方案是最好的，为什么。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><h1 id="ea64" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated"><strong class="ak">什么是互联网机器人？</strong></h1><p id="016b" class="pw-post-body-paragraph if ig hi ih b ii ki ik il im kj io ip iq kk is it iu kl iw ix iy km ja jb jc hb bi translated">互联网机器人基本上是在网站上执行自动化任务的计算机程序。这些任务可以是从网站上抓取信息，也可以是通过大量点击向网站发送垃圾信息，从而使真正的观众无法访问网站。</p><p id="7e78" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">例子:</strong>搜索引擎使用爬虫来浏览网站进行索引。另一个例子是通过从其他网站获取信息来比较产品或不同产品价格的网站。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><h1 id="f22e" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated"><strong class="ak">网络机器人有什么影响？</strong></h1><p id="951e" class="pw-post-body-paragraph if ig hi ih b ii ki ik il im kj io ip iq kk is it iu kl iw ix iy km ja jb jc hb bi translated">大约一半的互联网流量由Bot活动组成。通过“<a class="ae kn" href="https://www.statista.com/statistics/670782/bot-traffic-share/" rel="noopener ugc nofollow" target="_blank"> statista </a>”查看这一趋势。</p><figure class="kp kq kr ks fd kt er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es ko"><img src="../Images/6f01795d5245bc20f51ce7e0e17cf029.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LgzwiRyooEVyIxUeilvBuA.png"/></div></div><figcaption class="la lb et er es lc ld bd b be z dx translated">2012年至2016年bot流量占总在线流量的百分比</figcaption></figure><p id="dba5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就像我最关心的事情(胆固醇)一样，机器人也有好坏之分。</p><p id="c837" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">好家伙</strong></p><p id="5408" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通常，声誉好的公司会大规模部署“好的机器人”。这些机器人尊重由网站管理员创建的规则，以规范他们的爬行活动和索引率。这些规则被定义在网站的<a class="ae kn" href="https://www.techinasia.com/talk/robotstxt-secure-website-content" rel="noopener ugc nofollow" target="_blank"> robots.txt </a>文件中，以供爬虫查看。我们还可以阻止特定的爬虫来阻止索引网站。比如在中国不专注的商家可以屏蔽百度的爬虫。</p><p id="3386" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其他一些常见的机器人还包括社交网络机器人、网站监控机器人、反向链接检查机器人(如<a class="ae kn" href="https://www.semrush.com/bot/" rel="noopener ugc nofollow" target="_blank"> SEMRushBot </a>)、聚合机器人(如<a class="ae kn" href="https://www.feedly.com/fetcher.html" rel="noopener ugc nofollow" target="_blank"> Feedly </a>)等等。</p><p id="7196" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">坏男孩</strong></p><p id="10aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">坏机器人还被用于许多原因，如窃取内容、抓取评论和新闻标题、提交表格、评论帖子等。</p><p id="dbe8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其中最有害的目的之一就是DDOS攻击。当对网站的大量点击使其服务饱和时，就实现了分布式拒绝服务攻击。这可能会导致服务的暂时中止，托管服务的巨额费用，糟糕的搜索引擎优化和坏名声。</p><p id="9cff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从分析的角度来看，这些恶意访问的数据被存储起来，并被谷歌分析，Adobe分析等看到。尽管Google Analytics确实提供了<a class="ae kn" href="https://support.google.com/analytics/answer/1010249?hl=en" rel="noopener ugc nofollow" target="_blank">僵尸过滤功能</a>来从视图中过滤掉“僵尸流量”，但它仍然会留下相当数量的流量。</p><p id="361b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们应该有一个解决方案，防止我们基于不正确的数据做出决策。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><h1 id="034a" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated"><strong class="ak">利用reCaptcha v3 </strong></h1><p id="1790" class="pw-post-body-paragraph if ig hi ih b ii ki ik il im kj io ip iq kk is it iu kl iw ix iy km ja jb jc hb bi translated">“验证码”是区分人类和机器人的图灵测试。这对于人类来说很容易解决，但对于“机器人”和其他恶意软件来说却很难解决。</p><p id="d284" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">说起图灵:</strong></p><figure class="kp kq kr ks fd kt er es paragraph-image"><div class="er es le"><img src="../Images/7266681e7137d513eefb25a02f929a6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*rbIBbqQ6R7gmFLot"/></div><figcaption class="la lb et er es lc ld bd b be z dx translated">你有没有注意到这个家伙总是扮演一个聪明人</figcaption></figure><p id="aa7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不久前，谷歌推出了其著名的reCaptcha服务的第三版。它继承了第一个版本，其中使用了混乱的文本，第二个版本要求用户在一些图像中识别某些物体。</p><p id="db8a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最新的一个帮助我们区分人类和机器人的行为，而不需要实际要求用户进行测试。与过去版本相比，这是一个巨大的改进，在过去的版本中，reCaptcha测试会给用户流量带来严重的问题。相比之下，早期版本如《蝙蝠侠与罗宾》(1997)，第三版为诺兰的《蝙蝠侠三部曲》。</p><p id="8b44" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它是如何工作的？</p><p id="3417" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当用户在网站上输入时，会生成一个范围从0(最有可能是机器人)到1(最有可能是人类)的分数。随着时间的推移，reCaptcha了解到网站上的用户通常是如何行动的，从而帮助其背后的机器学习算法生成更准确的风险分数。</p><p id="9d27" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个分数可以存储在变量(自定义维度/eVars)中，以过滤掉Google或Adobe套件中的bot流量。</p><p id="851c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除此之外，在恶意机器人/用户的登录或其他高安全性事件期间，他们可以被定向到双因素身份验证或其他保证措施。</p><p id="45d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是一个两步过程:</p><ol class=""><li id="4265" class="lf lg hi ih b ii ij im in iq lh iu li iy lj jc lk ll lm ln bi translated"><strong class="ih hj">令牌创建</strong></li><li id="d5d1" class="lf lg hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated"><strong class="ih hj">计分</strong></li></ol><p id="c9a7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">令牌创建:</strong></p><p id="1554" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个库和代码片段嵌入在站点代码中。这段代码创建一个用户响应令牌，并将其发送到后端。代码创建可以由我们选择的事件触发，无论是表单提交、登录还是页面查看。</p><p id="bf93" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是加密形式的用户响应令牌的快照:</p><figure class="kp kq kr ks fd kt er es paragraph-image"><div class="er es lt"><img src="../Images/1883fe9a92c53e77cbc360531bc9d3ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/1*L4mtmYrHOA4M1-XM8UccXQ.png"/></div><figcaption class="la lb et er es lc ld bd b be z dx translated">用户响应令牌</figcaption></figure><p id="91e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">评分</strong></p><p id="bcc2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一步生成的响应通过后端的API调用发送给Google。然后，reCaptcha的自适应风险分析引擎发送一个响应，从中可以提取分数。</p><figure class="kp kq kr ks fd kt er es paragraph-image"><div class="er es lu"><img src="../Images/a8cc881978d48138b08e8d84f4e50a3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:696/format:webp/1*OuLeKNB0b9iPsKcHS4LPcQ.png"/></div><figcaption class="la lb et er es lc ld bd b be z dx translated">来自reCaptcha的适应性风险分析引擎的响应</figcaption></figure><p id="f980" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我写了一个基于Python的程序，打开我的投资组合页面，从中抓取一些信息。以下是人类与网站互动和机器人互动的案例结果:</p><figure class="kp kq kr ks fd kt er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es lv"><img src="../Images/3158be6b1f7e45de01f79420964e2603.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-9xlnHss09TLpvKdM9uiug.png"/></div></div><figcaption class="la lb et er es lc ld bd b be z dx translated">测试案例</figcaption></figure></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><h1 id="47d6" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated"><strong class="ak">结束游戏:</strong></h1><p id="1177" class="pw-post-body-paragraph if ig hi ih b ii ki ik il im kj io ip iq kk is it iu kl iw ix iy km ja jb jc hb bi translated">谷歌没有确切透露它如何创建一个行为档案来防止骗子模仿人类行为。<a class="ae kn" href="https://arxiv.org/pdf/1903.01003.pdf" rel="noopener ugc nofollow" target="_blank">根据多伦多大学研究reCaptcha的两名安全研究人员</a>的说法，分数很大程度上取决于你的浏览器是否安装了谷歌cookie。另一位消息人士称，reCaptcha的API收集并发送软件和硬件信息，包括应用程序和设备数据，以供谷歌分析。</p><p id="a002" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">谷歌从未解决任何潜在的隐私问题。我们可以将reCaptcha v3视为一种确保安全、无摩擦的在线体验的方式。</p><figure class="kp kq kr ks fd kt er es paragraph-image"><div class="er es lw"><img src="../Images/6cd69ab76407a4c791c927acf7a29586.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/0*Lz9nHNMOuKZ3z6wj"/></div><figcaption class="la lb et er es lc ld bd b be z dx translated">来源:登记册</figcaption></figure></div></div>    
</body>
</html>