<html>
<head>
<title>Dummy Variable -A Real Trap</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">虚拟变量——真正的陷阱</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/dummy-variable-a-real-trap-5b8aebaa4526?source=collection_archive---------24-----------------------#2020-07-05">https://medium.com/analytics-vidhya/dummy-variable-a-real-trap-5b8aebaa4526?source=collection_archive---------24-----------------------#2020-07-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/23b22420604f6327e64c66df25c35f8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6qmMrmnBx6nLp8JC"/></div></div><figcaption class="iy iz et er es ja jb bd b be z dx translated">迈克尔·波德格在<a class="ae jc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><blockquote class="jd"><p id="3cd8" class="je jf hi bd jg jh ji jj jk jl jm jn dx translated">“陷阱只有在你不知道的情况下才是陷阱。如果你知道，这是一个挑战。<strong class="ak"><em class="jo"/>T7】</strong></p></blockquote><p id="930c" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl jn hb bi translated"><strong class="jr hj">什么是哑变量？</strong></p><p id="71e5" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">一般来说，在<strong class="jr hj">回归</strong>分析中，解释变量(<strong class="jr hj">自变量</strong>)本质上被假设为<strong class="jr hj">数量</strong>(数值)<strong class="jr hj"> </strong>。例如，年龄、经验、薪水等变量本质上是定量的，可以用尺度来衡量。</p><p id="a23d" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">在许多情况下，变量本质上是<strong class="jr hj">定性的</strong>(分类的)。例如<strong class="jr hj">季节</strong>(夏季、冬季、春季等)<strong class="jr hj">教育</strong>(高中、学士、硕士等)<strong class="jr hj">性别</strong>(男/女)。这些变量无法用尺度来衡量。这些类型的分类变量被称为<strong class="jr hj">虚拟</strong>变量。</p><blockquote class="jd"><p id="0975" class="je jf hi bd jg jh kr ks kt ku kv jn dx translated">虚拟变量(也称为指标变量)是一个数字变量，代表分类数据，如性别、种族、政治派别等。</p></blockquote><p id="fc19" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl jn hb bi translated"><strong class="jr hj">数学解释:- </strong></p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/e51c7108ea9698142c717ecd3f176065.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wBxpGMAFHPMYKNaM"/></div></div><figcaption class="iy iz et er es ja jb bd b be z dx translated"><a class="ae jc" href="https://unsplash.com/@jeshoots?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">JESHOOTS.COM</a>在<a class="ae jc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="5389" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">让我们看一个例子来说明虚拟变量陷阱:-</p><h1 id="a11b" class="kw kx hi bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">案例1:</h1><p id="854b" class="pw-post-body-paragraph jp jq hi jr b js lu ju jv jw lv jy jz ka lw kc kd ke lx kg kh ki ly kk kl jn hb bi translated"><strong class="jr hj">(分类数据的数量=2 ) </strong> :-让我们取一个集合，其中一个数据可以取两个分类值，例如(男性或女性)。</p><p id="ac38" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">让</p><p id="30c1" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">D1 =代表男性。</p><p id="1cf8" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">D2=代表女性。</p><p id="393c" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">D1和D2(Dummy Vriables)是相互依赖的，如果D1是“真的”，那么D2是“假的”，反之亦然。这些变量本质上是<a class="ae jc" href="https://ebrary.net/1025/economics/measuring_degree_multicollinearity" rel="noopener ugc nofollow" target="_blank">多重共线性</a>(稍后解释)的(高度相关的)，这意味着:-</p><p id="8689" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">D1+D2 = 1 …………( 1)</p><p id="a702" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">D2 = 1-D1..……………….(2)</p><p id="a282" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">我们的线性回归方程，其中y是“因变量”:</p><p id="3a17" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">Y = b0 +b1 *D1 + b2 *D2 ……………….(3)</p><p id="74ab" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">将D2的值从(2)代入(3)，我们得到:-</p><p id="eb03" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">y = b0 + b1*D1 + b2*(1-D1)</p><p id="2385" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">y = b0 + b1*D1 + b2 — b2*D1</p><p id="da37" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">y =(b0+b2) + (b1 — b2)D1</p><p id="8cfa" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">y = B0 *+B1 * D1………………(4)</p><p id="3304" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">其中，b0* = b0+b2 &amp; b1* = b1-b2</p><p id="ebd5" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">可以看出，冗余虚拟变量D2的信息进入常数b0。</p><p id="805f" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">因此，我们不需要像在(3)中那样为每个类别声明一个虚拟变量来避免虚拟变量陷阱。</p><blockquote class="jd"><p id="4080" class="je jf hi bd jg jh kr ks kt ku kv jn dx translated"><strong class="ak">虚拟变量陷阱</strong>是独立<strong class="ak">变量</strong>为<strong class="ak">多重共线</strong>的场景——两个或更多<strong class="ak">变量</strong>高度相关的场景；简单地说，一个<strong class="ak">变量</strong>可以从其他变量中预测出来。</p></blockquote><p id="200c" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl jn hb bi translated">为了避免伪变量陷阱，我们总是声明比分类值(n)少一个伪变量(n-1)。</p><p id="3e18" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated"><strong class="jr hj">虚拟变量的数量=分类值的数量-1。</strong></p><p id="7aef" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated"><strong class="jr hj">在上面的例子中，我们有两个分类值(男性/女性)。所以我们在(4)中只能有一个虚拟变量。因此，新等式应该类似于</strong></p><p id="5d9e" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">y= b0 +b1*D1</p><h1 id="cd55" class="kw kx hi bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">案例二:</h1><p id="4aa7" class="pw-post-body-paragraph jp jq hi jr b js lu ju jv jw lv jy jz ka lw kc kd ke lx kg kh ki ly kk kl jn hb bi translated"><strong class="jr hj">(分类数据的数量&gt; 2 ) </strong> :-考虑具有2个以上值的数据集。例如速度(慢、中或快)。按照上面的规则，我们只需要声明2个虚拟变量，因为分类值计数是3。但是首先我们将在我们的等式中声明3个变量</p><p id="f048" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">假设变量是</p><p id="98b5" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">D1=慢速</p><p id="2376" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">D2 =中速</p><p id="9aeb" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">D3 =快速</p><p id="9ed3" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">由于变量本质上是多重共线性的，以下等式成立</p><p id="43c7" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">D1+D2+D3=1</p><p id="5e60" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">运筹学</p><p id="b807" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">D3=[1-(D1+D2) ]…………(5)</p><p id="336b" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">我们的线性回归方程:-</p><p id="5d8d" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">y= b0+b1*D1+b2*D2+b3*D3……(6)</p><p id="316d" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">y = B0+B1 * D1+B2 * D2+B3 *[1-(D1+D2)]</p><p id="cb7c" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">y =(B0+B3)+D1(B1-B3)+D2(B2-B3)………(7)</p><p id="4787" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">可以看出，冗余虚拟变量D3的信息进入常数b0，并且简化的方程将是:-</p><p id="16c8" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">y= b0+b1*D1+b2*D2</p><h1 id="9418" class="kw kx hi bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">多重共线性</h1><p id="2c5d" class="pw-post-body-paragraph jp jq hi jr b js lu ju jv jw lv jy jz ka lw kc kd ke lx kg kh ki ly kk kl jn hb bi translated">当数据集中的两个或多个独立变量(也称为要素)相互关联时，就会出现多重共线性。有几种方法可以用来测量双变量情况下的相关程度和方向，而多重共线性通常使用<a class="ae jc" href="https://ebrary.net/1025/economics/measuring_degree_multicollinearity" rel="noopener ugc nofollow" target="_blank">方差膨胀因子</a>来测量。简而言之，当独立变量彼此线性相关时，数据集中就存在多重共线性。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es lz"><img src="../Images/3ffb5c8a7533e8209a6ba3f92edbe14f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/0*XA5wQ7g8xOrl_WzN.png"/></div></div></figure><p id="74f8" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">图一。完美多重共线性(x_i和其他独立变量之间的完美线性相关)</p><p id="f8fa" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">如图1所示的情况。被称为完美多重共线性。同样，我们也有不完全多重共线性的情况，其中一个或多个高度线性的关系可能是我们所关心的。</p><p id="c98a" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated"><strong class="jr hj">如何在Python中处理虚拟变量:- </strong></p><p id="a645" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">考虑以下包含“国家”作为分类值的数据集:-</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es ma"><img src="../Images/5a2fcbd16449aec18f3b8f0dab0d14d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:582/format:webp/1*Rzxk_XFoxiQZthBNDxvyBQ.png"/></div></div></figure><p id="a822" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">在机器学习回归模型中，如果将分类值转换为数值(二进制向量)值，预测将会做得很好。这可以在python中使用<strong class="jr hj"> LabelEncoder() </strong>和<strong class="jr hj"> OneHotEncoder() </strong>来实现。上述分类集和虚拟变量的分类数据编码技术将变成:</p><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es mb"><img src="../Images/4f687737a9ff4defb1924cde96aa8d39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*hKRTx5CWJabVhKQL6zr7sg.png"/></div></figure><p id="6ac9" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">国家一栏将按如下方式划分:</p><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es mc"><img src="../Images/f0a44d2e0b1b4c2feaa52d0605418298.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/1*oFV1ruqBehTSPSiFvMjbEA.png"/></div></figure><p id="7cc7" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">现在为了逃离虚拟变量陷阱，我们应该考虑<strong class="jr hj">删除一列</strong> — N — 1个虚拟变量。(参考上面的数学证明)。在上面的虚拟变量表中，我们应该考虑删除任何一列。最后，表格如下所示:</p><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es md"><img src="../Images/6565caf2f5b344a7fd19039486b8cef5.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*akil_Xy524yshBVQvb77Ag.png"/></div></figure><blockquote class="jd"><p id="db00" class="je jf hi bd jg jh ji jj jk jl jm jn dx translated">！！我们可以删除虚拟变量的任何一列。</p></blockquote><p id="0d9b" class="pw-post-body-paragraph jp jq hi jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl jn hb bi translated"><strong class="jr hj">使用虚拟变量时要记住的事情</strong></p><p id="bede" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">1.虚拟变量仅代表分类值，它们没有任何数量意义。</p><p id="daf7" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">2.它们在本质上是多重共线性的(参见上文的多重共线性)(高度相关)。</p><p id="6c8d" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated"><strong class="jr hj">结论</strong></p><p id="5f5d" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">所以明智的做法是:</p><blockquote class="me mf mg"><p id="dc77" class="jp jq mh jr b js km ju jv jw kn jy jz mi ko kc kd mj kp kg kh mk kq kk kl jn hb bi translated">代表单个属性变量所需的虚拟变量的数量等于该变量中级别(类别)的数量减一。"</p></blockquote><p id="f545" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">我希望这篇文章能够全面描述多重共线性和虚拟变量陷阱。这篇文章完全基于我的个人经验，事实来自可靠的来源(在每个这样的概念旁边已经提到了链接)。所以，如果你在文章中发现任何不一致的地方，请在下面评论。您的反馈将有助于我更好地写作和描述。期待收到你的来信。</p><p id="ba57" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">谢谢</p><p id="befa" class="pw-post-body-paragraph jp jq hi jr b js km ju jv jw kn jy jz ka ko kc kd ke kp kg kh ki kq kk kl jn hb bi translated">舒巴姆·班萨尔</p></div></div>    
</body>
</html>