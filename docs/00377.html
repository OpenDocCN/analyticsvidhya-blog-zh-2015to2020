<html>
<head>
<title>Testing Models with Django using Faker and Factory Boy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Faker和工厂男孩测试Django的模型</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/factoryboy-usage-cd0398fd11d2?source=collection_archive---------0-----------------------#2019-05-13">https://medium.com/analytics-vidhya/factoryboy-usage-cd0398fd11d2?source=collection_archive---------0-----------------------#2019-05-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/7b7a34e913b56ea4bb5918d38d7d79d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DvC1FhqEzOYSCLOzFXF0gQ.jpeg"/></div></div></figure><p id="b5ef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> factory_boy </strong>库(模仿Rails中的Factory Girl)为测试生成数据。在Django中，测试数据被称为fixtures，从代码文件中加载。</p><p id="0aae" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以安装这个库:</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="2843" class="jx jy hi jt b fi jz ka l kb kc">$ pipenv install factory_boy</span></pre><p id="c798" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，我将在我的应用程序中创建一个这样的结构:</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="2ca7" class="jx jy hi jt b fi jz ka l kb kc">$ core/<br/>  ----tests/<br/>  ---------/__init__.py<br/>  ---------factories/<br/>  ------------------/__init__.py<br/>  ------------------/company.py<br/>  ---------/test_models/<br/>  --------------------/__init__.py<br/>  --------------------/test_company.py</span></pre><p id="1f8d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">工厂文件夹</strong>包含将在测试阶段创建公司对象的工厂公司。而<strong class="is hj"> test_company.py </strong>文件包含<strong class="is hj">公司</strong>的测试代码。</p></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><h1 id="f889" class="kk jy hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">使用工厂</h1><ul class=""><li id="3a8e" class="lh li hi is b it lj ix lk jb ll jf lm jj ln jn lo lp lq lr bi translated">通过ORM创建一个对象。</li><li id="f01b" class="lh li hi is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr bi translated">使用<strong class="is hj">元类</strong>来告诉你的工厂使用哪个模型。</li></ul><p id="3945" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将在`<strong class="is hj">core/factors/company . py</strong>中创建公司工厂:</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="9d0e" class="jx jy hi jt b fi jz ka l kb kc">import factory</span><span id="9ebb" class="jx jy hi jt b fi lx ka l kb kc">class CompanyFactory(factory.DjangoModelFactory):<br/>    """<br/>       | id  | name      |<br/>       |:----|:----------|<br/>       |  1  | X Company |<br/>    """</span><span id="4ac7" class="jx jy hi jt b fi lx ka l kb kc">    class Meta:<br/>        model = 'core.Company'<br/>        django_get_or_create = ('name',)</span><span id="24d7" class="jx jy hi jt b fi lx ka l kb kc">    name = 'company name'</span></pre><p id="6b48" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">工厂的Meta设置了<strong class="is hj"> django_get_or_create </strong>，这意味着工厂将调用django内置的`<strong class="is hj">company . objects . get _ or _ create</strong>方法。</p><p id="1c9f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，只要调用`<strong class="is hj"> CompanyFactory.build() </strong>`就会生成一个填充的<strong class="is hj"> company </strong>实例:</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="9c9d" class="jx jy hi jt b fi jz ka l kb kc"># Build a Company instance and override company<br/>&gt;&gt;&gt; company_obj = CompanyFactory.build(name='X Company')<br/>&gt;&gt;&gt; company_obj.name<br/>    "X Company"</span></pre><p id="f228" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，在你的数据库中创建并拥有一家公司就像写下`<strong class="is hj">company factory . create()</strong>一样简单:</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="f959" class="jx jy hi jt b fi jz ka l kb kc"># Returns a saved Company instance<br/>&gt;&gt;&gt; company = Company.create(name='X Company')</span><span id="34ae" class="jx jy hi jt b fi lx ka l kb kc"># or</span><span id="9090" class="jx jy hi jt b fi lx ka l kb kc"># Same as CompanyFactory.create()<br/>&gt;&gt;&gt; company = CompanyFactory(name='X Company')</span></pre><p id="9c1f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以在测试中访问该对象:</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="6ef9" class="jx jy hi jt b fi jz ka l kb kc">from test_factories import CompanyFactory<br/>company = CompanyFactory()</span></pre><p id="262d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用工厂时，可以在中传递不同的值:</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="dbf5" class="jx jy hi jt b fi jz ka l kb kc">company = CompanyFactory(name='Y Company')</span></pre><p id="c91b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们公司实例的名称将是`<strong class="is hj"> Y Company </strong>`,而不是`<strong class="is hj"> company name </strong>`。</p><p id="fafe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们想创造更多的物体:</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="4ff5" class="jx jy hi jt b fi jz ka l kb kc">&gt;&gt;&gt; companies = Company.create_batch(3, name=factory.Sequence(lambda n: 'Name {0}'.format(n)))</span><span id="03b8" class="jx jy hi jt b fi lx ka l kb kc">&gt;&gt;&gt; len(companies)<br/>    3</span><span id="c83e" class="jx jy hi jt b fi lx ka l kb kc">&gt;&gt;&gt; [company.name for company in companies]<br/>    ["Name 1", "Name 2", "Name 3"]</span></pre><p id="29f2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">工厂是用于为特定模型生成数据的类。这些被称为测试。</p><p id="179a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是我们更新的“<strong class="is hj">main/tests/test _ models/company . py</strong>”:</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="23a2" class="jx jy hi jt b fi jz ka l kb kc">from django.test import TestCase</span><span id="fee9" class="jx jy hi jt b fi lx ka l kb kc">from ..factories import CompanyFactory</span><span id="77a2" class="jx jy hi jt b fi lx ka l kb kc">class CompanyModelsTestCase(TestCase):<br/>    <a class="ae ly" href="http://twitter.com/classmethod" rel="noopener ugc nofollow" target="_blank">@classmethod</a><br/>    def setUpTestData(cls):<br/>        cls.Company = CompanyFactory._meta.model</span><span id="b911" class="jx jy hi jt b fi lx ka l kb kc">    def test_crud_company(self):        <br/>        # create<br/>        company = CompanyFactory(name='X Company')</span><span id="ad98" class="jx jy hi jt b fi lx ka l kb kc">        # read<br/>        self.assertEqual(company.name, 'X Company')<br/>        self.assertEqual(company.pk, company.id)<br/>        self.assertQuerysetEqual(<br/>            self.Company.objects.all(),                 <br/>            ['&lt;Company: X Company&gt;']<br/>        )</span><span id="edf5" class="jx jy hi jt b fi lx ka l kb kc">        # update<br/>        company.name = 'Y Company'<br/>        company.save()<br/>        self.assertQuerysetEqual(<br/>            self.Company.objects.all(),  <br/>            ['&lt;Company: Y Company&gt;']<br/>        )</span></pre></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><h1 id="c5a7" class="kk jy hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">工厂男孩的特征:</h1><ul class=""><li id="f419" class="lh li hi is b it lj ix lk jb ll jf lm jj ln jn lo lp lq lr bi translated">使用一个使用lambda函数的`<strong class="is hj"> Sequence </strong>`对象来动态创建唯一的字段值。比如说；</li></ul><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="4c3a" class="jx jy hi jt b fi jz ka l kb kc">name = factory.Sequence(lambda n: ‘company_%d’ % n)`</span></pre><ul class=""><li id="c45a" class="lh li hi is b it iu ix iy jb lz jf ma jj mb jn lo lp lq lr bi translated">使用“<strong class="is hj"> LazyAttribute </strong>”对象返回已定义字段的值。比如说；</li></ul><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="0701" class="jx jy hi jt b fi jz ka l kb kc">slug = factory.LazyAttribute(lambda o: o.name)</span></pre><ul class=""><li id="b184" class="lh li hi is b it iu ix iy jb lz jf ma jj mb jn lo lp lq lr bi translated">子工厂</li><li id="9f55" class="lh li hi is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr bi translated">多对多关系</li></ul><h2 id="6e26" class="jx jy hi bd kl mc md me kp mf mg mh kt jb mi mj kx jf mk ml lb jj mm mn lf mo bi translated">顺序</h2><p id="13d1" class="pw-post-body-paragraph iq ir hi is b it lj iv iw ix lk iz ja jb mp jd je jf mq jh ji jj mr jl jm jn hb bi translated">如果你想创建一个给定对象的多个实例和唯一属性，<br/>你可以添加<strong class="is hj">工厂。顺序</strong>。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="4e30" class="jx jy hi jt b fi jz ka l kb kc">import factory</span><span id="8cab" class="jx jy hi jt b fi lx ka l kb kc">class CompanyFactory(factory.DjangoModelFactory):<br/>    """<br/>       | id  | name      |<br/>       |:----|:----------|<br/>       |  1  | X Company |<br/>    """</span><span id="8c3c" class="jx jy hi jt b fi lx ka l kb kc">    class Meta:<br/>        model = 'core.Company'<br/>        django_get_or_create = ('name',)</span><span id="10e8" class="jx jy hi jt b fi lx ka l kb kc">    name = factory.Sequence(lambda n: 'Company %d' % n)</span></pre><p id="1d29" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当这个工厂被调用时，每次创建一个唯一的公司，<strong class="is hj"> n </strong>自动增加。</p><h2 id="ff44" class="jx jy hi bd kl mc md me kp mf mg mh kt jb mi mj kx jf mk ml lb jj mm mn lf mo bi translated">惰性属性</h2><p id="6472" class="pw-post-body-paragraph iq ir hi is b it lj iv iw ix lk iz ja jb mp jd je jf mq jh ji jj mr jl jm jn hb bi translated">`<strong class="is hj"> o </strong>`是工厂内正在构建的实例。<br/>你可以使用字符串格式，加上一些属性。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="823e" class="jx jy hi jt b fi jz ka l kb kc">import factory</span><span id="7ac0" class="jx jy hi jt b fi lx ka l kb kc">class CompanyFactory(factory.DjangoModelFactory):<br/>    """<br/>       | id  | name      |<br/>       |:----|:----------|<br/>       |  1  | X Company |<br/>    """</span><span id="882a" class="jx jy hi jt b fi lx ka l kb kc">    class Meta:<br/>        model = 'core.Company'<br/>        django_get_or_create = ('name',)</span><span id="8268" class="jx jy hi jt b fi lx ka l kb kc">    name = factory.Sequence(lambda n: 'Company %d' % n)<br/>    slug = factory.LazyAttribute(lambda o: o.name)</span></pre><h2 id="fe2d" class="jx jy hi bd kl mc md me kp mf mg mh kt jb mi mj kx jf mk ml lb jj mm mn lf mo bi translated">子工厂</h2><p id="f219" class="pw-post-body-paragraph iq ir hi is b it lj iv iw ix lk iz ja jb mp jd je jf mq jh ji jj mr jl jm jn hb bi translated">我需要在Django应用程序中定义一个测试工厂。模型之间是一对多的关系，例如<strong class="is hj">公司</strong>有很多<strong class="is hj">签约</strong> <strong class="is hj">公司</strong>。工厂男孩允许你在你的工厂里使用分工厂。<strong class="is hj">子工厂</strong>用于FK字段。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="89df" class="jx jy hi jt b fi jz ka l kb kc">import factory</span><span id="09af" class="jx jy hi jt b fi lx ka l kb kc">class CompanyFactory(factory.DjangoModelFactory):<br/>    """<br/>       | id  | name      |<br/>       |:----|:----------|<br/>       |  1  | X Company |<br/>    """</span><span id="f07d" class="jx jy hi jt b fi lx ka l kb kc">    class Meta:<br/>        model = 'core.Company'<br/>        django_get_or_create = ('name',)</span><span id="0ec2" class="jx jy hi jt b fi lx ka l kb kc">    name = factory.Sequence(lambda n: 'Company %d' % n)<br/>    slug = factory.LazyAttribute(lambda o: o.name)</span><span id="ad28" class="jx jy hi jt b fi lx ka l kb kc">class ContractedCompanyFactory(factory.DjangoModelFactory):<br/>    """<br/>        | id  | start_date      | end_date      | company |<br/>        |:----|:--------------------------------|:--------|<br/>        |  1  | 2019-05-13      | 2020-05-13     | 1      |<br/>    """</span><span id="52be" class="jx jy hi jt b fi lx ka l kb kc">    class Meta:<br/>        model = 'core.ContractedCompany'</span><span id="431b" class="jx jy hi jt b fi lx ka l kb kc">    start_date = parse_date('2019-05-13')<br/>    end_date = parse_date('2020-05-13')<br/>    company = factory.SubFactory(CompanyFactory)</span></pre><p id="fc91" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我将在我的测试中创建一个签约公司:</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="c09c" class="jx jy hi jt b fi jz ka l kb kc">contracted_company = ContractedCompanyFactory()</span></pre><h2 id="4053" class="jx jy hi bd kl mc md me kp mf mg mh kt jb mi mj kx jf mk ml lb jj mm mn lf mo bi translated">多对多关系</h2><p id="f6f8" class="pw-post-body-paragraph iq ir hi is b it lj iv iw ix lk iz ja jb mp jd je jf mq jh ji jj mr jl jm jn hb bi translated">我们为此功能使用的基础构建模块是<code class="du ms mt mu jt b">post_generation</code>:</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="3e14" class="jx jy hi jt b fi jz ka l kb kc">class CompanyFactory(factory.DjangoModelFactory):<br/>    """<br/>       | id  | name      |<br/>       |:----|:----------|<br/>       |  1  | X Company |<br/>    """</span><span id="3482" class="jx jy hi jt b fi lx ka l kb kc">    class Meta:<br/>        model = 'core.Company'<br/>        django_get_or_create = ('name',)</span><span id="deb9" class="jx jy hi jt b fi lx ka l kb kc">    name = factory.Sequence(lambda n: 'Company %d' % n)<br/>    slug = factory.LazyAttribute(lambda o: o.name)</span><span id="4ef9" class="jx jy hi jt b fi lx ka l kb kc">    @factory.post_generation<br/>    def phones(self, create, extracted):<br/>        if not create:<br/>            return<br/>        if extracted:<br/>            for phone in extracted:<br/>                self.phones.add(phone)</span><span id="3760" class="jx jy hi jt b fi lx ka l kb kc">    <a class="ae ly" href="http://twitter.com/factory" rel="noopener ugc nofollow" target="_blank">@</a>factory.post_generation<br/>    def emails(self, create, extracted):<br/>        if not create:<br/>            return<br/>        if extracted:<br/>            for email in extracted:<br/>                self.emails.add(email)</span><span id="af7d" class="jx jy hi jt b fi lx ka l kb kc">    <a class="ae ly" href="http://twitter.com/factory" rel="noopener ugc nofollow" target="_blank">@</a>factory.post_generation<br/>    def addresses(self, create, extracted):<br/>        if not create:<br/>            return<br/>        if extracted:<br/>            for address in extracted:<br/>                self.addresses.add(address)</span></pre><p id="6e09" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">呼叫<code class="du ms mt mu jt b">CompanyFactory()</code>或<code class="du ms mt mu jt b">CompanyFactory.build()</code>时，会创建<strong class="is hj">无</strong>无<strong class="is hj">电话</strong>或<strong class="is hj">无</strong>无<strong class="is hj">电子邮件</strong>或<strong class="is hj">无</strong>无<strong class="is hj">地址</strong>绑定。但是当<code class="du ms mt mu jt b">CompanyFactory.create(phones=(phone1, phone2, phone3), .....)</code>被调用时，<code class="du ms mt mu jt b">phones</code>声明会将传入的电话添加到公司的电话集中。</p></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><h1 id="2f4f" class="kk jy hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">例子:假货和工厂</h1><ul class=""><li id="72d4" class="lh li hi is b it lj ix lk jb ll jf lm jj ln jn lo lp lq lr bi translated"><strong class="is hj">骗子</strong>:生成假数据</li><li id="6f67" class="lh li hi is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr bi translated">制造我们模型的工厂</li></ul><p id="cb89" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在我们的<code class="du ms mt mu jt b">Django</code>应用中，我们有MTV(模型模板视图)结构。首先，我们必须为测试创建模型。如果您想要生成随机字符串或者生成我们模型的唯一实例，我们需要使用它们。</p><h1 id="2334" class="kk jy hi bd kl km mv ko kp kq mw ks kt ku mx kw kx ky my la lb lc mz le lf lg bi translated">启动Django项目</h1><p id="0675" class="pw-post-body-paragraph iq ir hi is b it lj iv iw ix lk iz ja jb mp jd je jf mq jh ji jj mr jl jm jn hb bi translated">我们已经创建了一个简单的<code class="du ms mt mu jt b">Django</code>应用程序。查看我们的<code class="du ms mt mu jt b">models.py</code>文件:</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="43c9" class="jx jy hi jt b fi jz ka l kb kc"><strong class="jt hj">from</strong> django.contrib.auth <strong class="jt hj">import</strong> get_user_model<br/><strong class="jt hj">from</strong> django.db <strong class="jt hj">import</strong> models</span><span id="a905" class="jx jy hi jt b fi lx ka l kb kc">User <strong class="jt hj">=</strong> get_user_model()<br/></span><span id="0c50" class="jx jy hi jt b fi lx ka l kb kc"><strong class="jt hj">class</strong> <strong class="jt hj">NewsContent</strong>(models<strong class="jt hj">.</strong>Model):<br/>    headline <strong class="jt hj">=</strong> models<strong class="jt hj">.</strong>CharField(max_length<strong class="jt hj">=</strong>255)<br/>    body <strong class="jt hj">=</strong> models<strong class="jt hj">.</strong>TextField()<br/>    author <strong class="jt hj">=</strong> models<strong class="jt hj">.</strong>ForeignKey(<br/>        to<strong class="jt hj">=</strong>User,<br/>        on_delete<strong class="jt hj">=</strong>models<strong class="jt hj">.</strong>CASCADE,<br/>        related_name<strong class="jt hj">=</strong>'contents_by_author'<br/>    )</span><span id="66b4" class="jx jy hi jt b fi lx ka l kb kc">    <strong class="jt hj">def</strong> <strong class="jt hj">__str__</strong>(self):<br/>        <strong class="jt hj">return</strong> self<strong class="jt hj">.</strong>headline</span></pre><h1 id="e923" class="kk jy hi bd kl km mv ko kp kq mw ks kt ku mx kw kx ky my la lb lc mz le lf lg bi translated">功能</h1><p id="c95a" class="pw-post-body-paragraph iq ir hi is b it lj iv iw ix lk iz ja jb mp jd je jf mq jh ji jj mr jl jm jn hb bi translated">现在，我们的系统中有了一些自定义逻辑。没错！是时候添加一些测试了。查看我们的<strong class="is hj"> views.py </strong>文件:</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="addc" class="jx jy hi jt b fi jz ka l kb kc"><strong class="jt hj">from</strong> django.http <strong class="jt hj">import</strong> HttpResponseNotAllowed<br/><strong class="jt hj">from</strong> django.shortcuts <strong class="jt hj">import</strong> render<br/><br/><strong class="jt hj">from</strong> .models <strong class="jt hj">import</strong> NewsContent<br/><br/><br/><strong class="jt hj">def</strong> <strong class="jt hj">news_content_list</strong>(request, author_id):<br/>    <strong class="jt hj">if</strong> request<strong class="jt hj">.</strong>method <strong class="jt hj">==</strong> 'GET':<br/>        object_list <strong class="jt hj">=</strong> NewsContent<strong class="jt hj">.</strong>objects<strong class="jt hj">.</strong>filter(<br/>            author__id<strong class="jt hj">=</strong>author_id<br/>        )<br/>        <strong class="jt hj">return</strong> render(request, 'news_content_list.html', locals())<br/>    <strong class="jt hj">return</strong> HttpResponseNotAllowed(['GET'])</span></pre><p id="d962" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">查看我们的<strong class="is hj"> news_content_list.html </strong>文件:</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="6852" class="jx jy hi jt b fi jz ka l kb kc">{% for news_content in object_list %}<br/>   <!-- -->&lt;ul&gt;<br/>        &lt;li&gt;<br/>            {{ news_content.headline }}, {{ news_content.author }}<br/>        &lt;/li&gt;<br/>        &lt;li&gt;{{ news_content.body }}&lt;/li&gt;<br/>    &lt;/ul&gt;<br/>{% endfor %}</span></pre><h1 id="96ea" class="kk jy hi bd kl km mv ko kp kq mw ks kt ku mx kw kx ky my la lb lc mz le lf lg bi translated">计划我们的测试</h1><p id="6a71" class="pw-post-body-paragraph iq ir hi is b it lj iv iw ix lk iz ja jb mp jd je jf mq jh ji jj mr jl jm jn hb bi translated">让我们添加第一个测试。如果我们有一个作者的5个新闻内容，我们必须确保视图将它们全部列出。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="d837" class="jx jy hi jt b fi jz ka l kb kc"><em class="na"># in tests/test_views.py</em><br/><strong class="jt hj">from</strong> django.contrib.auth <strong class="jt hj">import</strong> get_user_model<br/><strong class="jt hj">from</strong> django.test <strong class="jt hj">import</strong> TestCase<br/><strong class="jt hj">from</strong> django.urls <strong class="jt hj">import</strong> reverse<br/><br/><strong class="jt hj">from</strong> .models <strong class="jt hj">import</strong> NewsContent<br/><br/>User <strong class="jt hj">=</strong> get_user_model()<br/><br/><br/><strong class="jt hj">class</strong> <strong class="jt hj">NewsContentListViewTests</strong>(TestCase):<br/>    <strong class="jt hj">def</strong> <strong class="jt hj">setUp</strong>(self):<br/>        self<strong class="jt hj">.</strong>author <strong class="jt hj">=</strong> User<strong class="jt hj">.</strong>objects<strong class="jt hj">.</strong>create_user(<br/>            'john', 'lennon@thebeatles.com'<br/>        )<br/>        self<strong class="jt hj">.</strong>news_content <strong class="jt hj">=</strong> NewsContent<strong class="jt hj">.</strong>objects<strong class="jt hj">.</strong>create(<br/>            headline<strong class="jt hj">=</strong>'Real Madrid frustrated by Athletic',<br/>            body<strong class="jt hj">=</strong>'Real Madrid hit the woodwork three times',<br/>            author<strong class="jt hj">=</strong>self<strong class="jt hj">.</strong>author<br/>        )<br/>        self.url <strong class="jt hj">=</strong> reverse(<br/>            'news:news_content_list', <br/>             args<strong class="jt hj">=</strong>(self<strong class="jt hj">.</strong>author<strong class="jt hj">.</strong>id,)<br/>        )<br/><br/>    <strong class="jt hj">def</strong> <strong class="jt hj">test_with_several_news_content_by_one_user</strong>(self):<br/>        news1 <strong class="jt hj">=</strong> NewsContent<strong class="jt hj">.</strong>objects<strong class="jt hj">.</strong>create(<br/>            headline<strong class="jt hj">=</strong>'Test Title 1',<br/>            body<strong class="jt hj">=</strong>'Test Body 1',<br/>            author<strong class="jt hj">=</strong>self<strong class="jt hj">.</strong>author<br/>        )<br/>        news2 <strong class="jt hj">=</strong> NewsContent<strong class="jt hj">.</strong>objects<strong class="jt hj">.</strong>create(<br/>            headline<strong class="jt hj">=</strong>'Test Title 2',<br/>            body<strong class="jt hj">=</strong>'Test Body 2',<br/>            author<strong class="jt hj">=</strong>self<strong class="jt hj">.</strong>author<br/>        )<br/>        news3 <strong class="jt hj">=</strong> NewsContent<strong class="jt hj">.</strong>objects<strong class="jt hj">.</strong>create(<br/>            headline<strong class="jt hj">=</strong>'Test Title 3',<br/>            body<strong class="jt hj">=</strong>'Test Body 3',<br/>            author<strong class="jt hj">=</strong>self<strong class="jt hj">.</strong>author<br/>        )<br/>        news4 <strong class="jt hj">=</strong> NewsContent<strong class="jt hj">.</strong>objects<strong class="jt hj">.</strong>create(<br/>            headline<strong class="jt hj">=</strong>'Test Title 4',<br/>            body<strong class="jt hj">=</strong>'Test Body 4',<br/>            author<strong class="jt hj">=</strong>self<strong class="jt hj">.</strong>author<br/>        )<br/>        news5 <strong class="jt hj">=</strong> NewsContent<strong class="jt hj">.</strong>objects<strong class="jt hj">.</strong>create(<br/>            headline<strong class="jt hj">=</strong>'Test Title 5',<br/>            body<strong class="jt hj">=</strong>'Test Body 5',<br/>            author<strong class="jt hj">=</strong>self<strong class="jt hj">.</strong>author<br/>        ) <br/><br/>        response <strong class="jt hj">=</strong> self<strong class="jt hj">.</strong>client<strong class="jt hj">.</strong>get(self<strong class="jt hj">.</strong>url)<br/><br/>        self<strong class="jt hj">.</strong>assertEqual(200, response<strong class="jt hj">.</strong>status_code)<br/>        self<strong class="jt hj">.</strong>assertContains(response, news1<strong class="jt hj">.</strong>headline)<br/>        self<strong class="jt hj">.</strong>assertContains(response, news2<strong class="jt hj">.</strong>headline)<br/>        self<strong class="jt hj">.</strong>assertContains(response, news3<strong class="jt hj">.</strong>headline)<br/>        self<strong class="jt hj">.</strong>assertContains(response, news4<strong class="jt hj">.</strong>headline)<br/>        self<strong class="jt hj">.</strong>assertContains(response, news5<strong class="jt hj">.</strong>headline)</span></pre><h1 id="6ba5" class="kk jy hi bd kl km mv ko kp kq mw ks kt ku mx kw kx ky my la lb lc mz le lf lg bi translated">让我们开始重构</h1><p id="c657" class="pw-post-body-paragraph iq ir hi is b it lj iv iw ix lk iz ja jb mp jd je jf mq jh ji jj mr jl jm jn hb bi translated">首先，为什么使用<strong class="is hj"> faker </strong>那是一个<strong class="is hj"> Python </strong>包，为你生成假数据。我们的测试是如何将<strong class="is hj">变成</strong>的:</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="04e7" class="jx jy hi jt b fi jz ka l kb kc"><em class="na"># in tests/test_views.py</em><br/><strong class="jt hj">from</strong> django.contrib.auth <strong class="jt hj">import</strong> get_user_model<br/><strong class="jt hj">from</strong> django.test <strong class="jt hj">import</strong> TestCase<br/><strong class="jt hj">from</strong> django.urls <strong class="jt hj">import</strong> reverse<br/><strong class="jt hj">from</strong> faker <strong class="jt hj">import</strong> Factory<br/><br/><strong class="jt hj">from</strong> .models <strong class="jt hj">import</strong> NewsContent<br/><br/>User <strong class="jt hj">=</strong> get_user_model()<br/><br/><br/>faker <strong class="jt hj">=</strong> Factory<strong class="jt hj">.</strong>create()<br/><br/><br/><strong class="jt hj">class</strong> <strong class="jt hj">NewsContentListViewTests</strong>(TestCase):<br/>    <strong class="jt hj">def</strong> <strong class="jt hj">setUp</strong>(self):<br/>        self<strong class="jt hj">.</strong>author <strong class="jt hj">=</strong> User<strong class="jt hj">.</strong>objects<strong class="jt hj">.</strong>create_user(<br/>                          faker<strong class="jt hj">.</strong>name(), <br/>                          faker<strong class="jt hj">.</strong>email()<br/>                      )<br/>        self<strong class="jt hj">.</strong>news_content <strong class="jt hj">=</strong> NewsContent<strong class="jt hj">.</strong>objects<strong class="jt hj">.</strong>create(<br/>            headline<strong class="jt hj">=</strong>faker<strong class="jt hj">.</strong>word(),<br/>            body<strong class="jt hj">=</strong>faker<strong class="jt hj">.</strong>text(),<br/>            author<strong class="jt hj">=</strong>self<strong class="jt hj">.</strong>author<br/>        )<br/>        self.url <strong class="jt hj">=</strong> reverse(<br/>            'news:news_content_list', <br/>             args<strong class="jt hj">=</strong>(self<strong class="jt hj">.</strong>author<strong class="jt hj">.</strong>id,)<br/>        )<br/><br/>    <strong class="jt hj">def</strong> <strong class="jt hj">test_with_several_news_content_by_one_user</strong>(self):<br/>        news1 <strong class="jt hj">=</strong> NewsContent<strong class="jt hj">.</strong>objects<strong class="jt hj">.</strong>create(<br/>            headline<strong class="jt hj">=</strong>faker<strong class="jt hj">.</strong>word(),<br/>            body<strong class="jt hj">=</strong>faker<strong class="jt hj">.</strong>text(),<br/>            author<strong class="jt hj">=</strong>self<strong class="jt hj">.</strong>author<br/>        )<br/>        news2 <strong class="jt hj">=</strong> NewsContent<strong class="jt hj">.</strong>objects<strong class="jt hj">.</strong>create(<br/>            headline<strong class="jt hj">=</strong>faker<strong class="jt hj">.</strong>word(), <br/>            body<strong class="jt hj">=</strong>faker<strong class="jt hj">.</strong>text(), <br/>            author<strong class="jt hj">=</strong>self<strong class="jt hj">.</strong>author<br/>        )<br/>        news3 <strong class="jt hj">=</strong> NewsContent<strong class="jt hj">.</strong>objects<strong class="jt hj">.</strong>create(<br/>            headline<strong class="jt hj">=</strong>faker<strong class="jt hj">.</strong>word(), <br/>            body<strong class="jt hj">=</strong>faker<strong class="jt hj">.</strong>text(), <br/>            author<strong class="jt hj">=</strong>self<strong class="jt hj">.</strong>author<br/>        )<br/>        news4 <strong class="jt hj">=</strong> NewsContent<strong class="jt hj">.</strong>objects<strong class="jt hj">.</strong>create(<br/>            headline<strong class="jt hj">=</strong>faker<strong class="jt hj">.</strong>word(), <br/>            body<strong class="jt hj">=</strong>faker<strong class="jt hj">.</strong>text(), <br/>            author<strong class="jt hj">=</strong>self<strong class="jt hj">.</strong>author<br/>        )<br/>        news5 <strong class="jt hj">=</strong> NewsContent<strong class="jt hj">.</strong>objects<strong class="jt hj">.</strong>create(<br/>            headline<strong class="jt hj">=</strong>faker<strong class="jt hj">.</strong>word(), <br/>            body<strong class="jt hj">=</strong>faker<strong class="jt hj">.</strong>text(), <br/>            author<strong class="jt hj">=</strong>self<strong class="jt hj">.</strong>author<br/>        )<br/><br/>        response <strong class="jt hj">=</strong> self<strong class="jt hj">.</strong>client<strong class="jt hj">.</strong>get(self<strong class="jt hj">.</strong>url)<br/><br/>        self<strong class="jt hj">.</strong>assertEqual(200, response<strong class="jt hj">.</strong>status_code)<br/>        self<strong class="jt hj">.</strong>assertContains(response, news1<strong class="jt hj">.</strong>headline)<br/>        self<strong class="jt hj">.</strong>assertContains(response, news2<strong class="jt hj">.</strong>headline)<br/>        self<strong class="jt hj">.</strong>assertContains(response, news3<strong class="jt hj">.</strong>headline)<br/>        self<strong class="jt hj">.</strong>assertContains(response, news4<strong class="jt hj">.</strong>headline)<br/>        self<strong class="jt hj">.</strong>assertContains(response, news5<strong class="jt hj">.</strong>headline)</span></pre><p id="79fd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">想了解更多关于faker的有用方法，可以访问<a class="ae ly" href="https://faker.readthedocs.io/en/master/providers.html" rel="noopener ugc nofollow" target="_blank"> it </a>。我们有和以前一样的测试功能。Faker正在随机地<strong class="is hj">生成值</strong>。现在创建一些工厂。工厂是Python类，像Django模型一样写入数据库。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="c9cc" class="jx jy hi jt b fi jz ka l kb kc">Model<strong class="jt hj">.</strong>objects<strong class="jt hj">.</strong>create()</span><span id="d96b" class="jx jy hi jt b fi lx ka l kb kc"><strong class="jt hj">or</strong></span><span id="1f70" class="jx jy hi jt b fi lx ka l kb kc">ModelFactory()</span></pre><p id="4c23" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们为我们的模型创建工厂:</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="ca7f" class="jx jy hi jt b fi jz ka l kb kc"><strong class="jt hj">import</strong> factory<br/><strong class="jt hj">from</strong> django.contrib.auth <strong class="jt hj">import</strong> get_user_model<br/><strong class="jt hj">from</strong> faker <strong class="jt hj">import</strong> Factory</span><span id="41ae" class="jx jy hi jt b fi lx ka l kb kc"><strong class="jt hj">from</strong> my_news.news.models <strong class="jt hj">import</strong> NewsContent</span><span id="920d" class="jx jy hi jt b fi lx ka l kb kc">User <strong class="jt hj">=</strong> get_user_model()</span><span id="442d" class="jx jy hi jt b fi lx ka l kb kc">faker <strong class="jt hj">=</strong> Factory<strong class="jt hj">.</strong>create()<br/></span><span id="7824" class="jx jy hi jt b fi lx ka l kb kc"><strong class="jt hj">class</strong> <strong class="jt hj">UserFactory</strong>(factory<strong class="jt hj">.</strong>DjangoModelFactory):<br/>    <strong class="jt hj">class</strong> <strong class="jt hj">Meta</strong>:<br/>        model <strong class="jt hj">=</strong> User</span><span id="8b94" class="jx jy hi jt b fi lx ka l kb kc">    name <strong class="jt hj">=</strong> faker<strong class="jt hj">.</strong>name()<br/>    email <strong class="jt hj">=</strong> faker<strong class="jt hj">.</strong>email()<br/></span><span id="23f3" class="jx jy hi jt b fi lx ka l kb kc"><strong class="jt hj">class</strong> <strong class="jt hj">NewsContentFactory</strong>(factory<strong class="jt hj">.</strong>DjangoModelFactory):<br/>    <strong class="jt hj">class</strong> <strong class="jt hj">Meta</strong>:<br/>        model <strong class="jt hj">=</strong> NewsContent</span><span id="255a" class="jx jy hi jt b fi lx ka l kb kc">    headline <strong class="jt hj">=</strong> faker<strong class="jt hj">.</strong>word()<br/>    body <strong class="jt hj">=</strong> faker<strong class="jt hj">.</strong>text()<br/>    author <strong class="jt hj">=</strong> factory<strong class="jt hj">.</strong>SubFactory(UserFactory)</span></pre><ul class=""><li id="6292" class="lh li hi is b it iu ix iy jb lz jf ma jj mb jn lo lp lq lr bi translated"><strong class="is hj">类元</strong>:定义你工厂的型号</li><li id="4eda" class="lh li hi is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr bi translated"><strong class="is hj"> faker </strong>:生成随机值</li><li id="8094" class="lh li hi is b it ls ix lt jb lu jf lv jj lw jn lo lp lq lr bi translated"><code class="du ms mt mu jt b">factory.SubFactory(NewsContentFactory) == models.ForeignKey(NewsContent)</code></li></ul><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="eea9" class="jx jy hi jt b fi jz ka l kb kc"><em class="na"># in tests/test_views.py</em><br/><strong class="jt hj">from</strong> django.contrib.auth <strong class="jt hj">import</strong> get_user_model<br/><strong class="jt hj">from</strong> django.test <strong class="jt hj">import</strong> TestCase<br/><strong class="jt hj">from</strong> django.urls <strong class="jt hj">import</strong> reverse<br/><strong class="jt hj">from</strong> faker <strong class="jt hj">import</strong> Factory<br/><br/><strong class="jt hj">from</strong> .factories <strong class="jt hj">import</strong> NewsContentFactory, UserFactory<br/><strong class="jt hj">from</strong> .models <strong class="jt hj">import</strong> NewsContent<br/><br/>User <strong class="jt hj">=</strong> get_user_model()<br/><br/><br/>faker <strong class="jt hj">=</strong> Factory<strong class="jt hj">.</strong>create()<br/><br/><br/><strong class="jt hj">class</strong> <strong class="jt hj">NewsContentListViewTests</strong>(TestCase):<br/>    <strong class="jt hj">def</strong> <strong class="jt hj">setUp</strong>(self):<br/>        self<strong class="jt hj">.</strong>author <strong class="jt hj">=</strong> UserFactory()<br/>        self<strong class="jt hj">.</strong>news_content <strong class="jt hj">=</strong> NewsContentFactory(author<strong class="jt hj">=</strong>self<strong class="jt hj">.</strong>author)<br/>        self.url <strong class="jt hj">=</strong> reverse(<br/>            'news:news_content_list', <br/>             args<strong class="jt hj">=</strong>(self<strong class="jt hj">.</strong>author<strong class="jt hj">.</strong>id,)<br/>        )<br/><br/>    <strong class="jt hj">def</strong> <strong class="jt hj">test_with_several_news_content_by_one_user</strong>(self):<br/>        news1 <strong class="jt hj">=</strong> NewsContentFactory(author<strong class="jt hj">=</strong>self<strong class="jt hj">.</strong>author)<br/>        news2 <strong class="jt hj">=</strong> NewsContentFactory(author<strong class="jt hj">=</strong>self<strong class="jt hj">.</strong>author)<br/>        news3 <strong class="jt hj">=</strong> NewsContentFactory(author<strong class="jt hj">=</strong>self<strong class="jt hj">.</strong>author)<br/>        news4 <strong class="jt hj">=</strong> NewsContentFactory(author<strong class="jt hj">=</strong>self<strong class="jt hj">.</strong>author)<br/>        news5 <strong class="jt hj">=</strong> NewsContentFactory(author<strong class="jt hj">=</strong>self<strong class="jt hj">.</strong>author)<br/><br/>        response <strong class="jt hj">=</strong> self<strong class="jt hj">.</strong>client<strong class="jt hj">.</strong>get(self<strong class="jt hj">.</strong>url)<br/><br/>        self<strong class="jt hj">.</strong>assertEqual(200, response<strong class="jt hj">.</strong>status_code)<br/>        self<strong class="jt hj">.</strong>assertContains(response, news1<strong class="jt hj">.</strong>headline)<br/>        self<strong class="jt hj">.</strong>assertContains(response, news2<strong class="jt hj">.</strong>headline)<br/>        self<strong class="jt hj">.</strong>assertContains(response, news3<strong class="jt hj">.</strong>headline)<br/>        self<strong class="jt hj">.</strong>assertContains(response, news4<strong class="jt hj">.</strong>headline)<br/>        self<strong class="jt hj">.</strong>assertContains(response, news5<strong class="jt hj">.</strong>headline)</span></pre><h1 id="9014" class="kk jy hi bd kl km mv ko kp kq mw ks kt ku mx kw kx ky my la lb lc mz le lf lg bi translated">干(不要重复自己)——工厂</h1><p id="32f6" class="pw-post-body-paragraph iq ir hi is b it lj iv iw ix lk iz ja jb mp jd je jf mq jh ji jj mr jl jm jn hb bi translated">工厂的行为就像来自ORM的对象。</p><ul class=""><li id="9527" class="lh li hi is b it iu ix iy jb lz jf ma jj mb jn lo lp lq lr bi translated"><strong class="is hj">创建批处理</strong>:创建一批对象，无需重复我们的代码。</li></ul><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="e04c" class="jx jy hi jt b fi jz ka l kb kc"><em class="na"># in tests/test_views.py</em><br/><strong class="jt hj">from</strong> django.contrib.auth <strong class="jt hj">import</strong> get_user_model<br/><strong class="jt hj">from</strong> django.test <strong class="jt hj">import</strong> TestCase<br/><strong class="jt hj">from</strong> django.urls <strong class="jt hj">import</strong> reverse<br/><strong class="jt hj">from</strong> faker <strong class="jt hj">import</strong> Factory<br/><br/><strong class="jt hj">from</strong> .factories <strong class="jt hj">import</strong> NewsContentFactory, UserFactory<br/><strong class="jt hj">from</strong> .models <strong class="jt hj">import</strong> NewsContent<br/><br/>User <strong class="jt hj">=</strong> get_user_model()<br/><br/><br/>faker <strong class="jt hj">=</strong> Factory<strong class="jt hj">.</strong>create()<br/><br/><br/><strong class="jt hj">class</strong> <strong class="jt hj">NewsContentListViewTests</strong>(TestCase):<br/>    <strong class="jt hj">def</strong> <strong class="jt hj">setUp</strong>(self):<br/>        self<strong class="jt hj">.</strong>author <strong class="jt hj">=</strong> UserFactory()<br/>        self<strong class="jt hj">.</strong>news_content <strong class="jt hj">=</strong> NewsContentFactory(author<strong class="jt hj">=</strong>self<strong class="jt hj">.</strong>author)<br/>        self.url <strong class="jt hj">=</strong> reverse(<br/>            'news:news_content_list', <br/>             args<strong class="jt hj">=</strong>(self<strong class="jt hj">.</strong>author<strong class="jt hj">.</strong>id,)<br/>        )<br/><br/>    <strong class="jt hj">def</strong> <strong class="jt hj">test_with_several_news_content_by_one_user</strong>(self):<br/>        news_contents <strong class="jt hj">=</strong> NewsContentFactory<strong class="jt hj">.</strong>create_batch(<br/>                             5, <br/>                             author<strong class="jt hj">=</strong>self<strong class="jt hj">.</strong>author<br/>                        )<br/><br/>        response <strong class="jt hj">=</strong> self<strong class="jt hj">.</strong>client<strong class="jt hj">.</strong>get(self<strong class="jt hj">.</strong>url)<br/>        self<strong class="jt hj">.</strong>assertEqual(200, response<strong class="jt hj">.</strong>status_code)<br/>        <strong class="jt hj">for</strong> news_content <strong class="jt hj">in</strong> news_contents:<br/>            self<strong class="jt hj">.</strong>assertContains(response, news_content<strong class="jt hj">.</strong>headline)</span></pre><h1 id="0029" class="kk jy hi bd kl km mv ko kp kq mw ks kt ku mx kw kx ky my la lb lc mz le lf lg bi translated">结论</h1><p id="5d30" class="pw-post-body-paragraph iq ir hi is b it lj iv iw ix lk iz ja jb mp jd je jf mq jh ji jj mr jl jm jn hb bi translated">在本文中，我们学习了如何使用faker和工厂。它们对模型测试很有帮助。如果你想看更多关于`<strong class="is hj"> factory_boy </strong>的信息，可以访问<a class="ae ly" href="https://factoryboy.readthedocs.io/en/latest/index.html" rel="noopener ugc nofollow" target="_blank">这个</a>。</p></div></div>    
</body>
</html>