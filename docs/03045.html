<html>
<head>
<title>Decomposition in Time Series Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">时间序列数据的分解</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/decomposition-in-time-series-data-b20764946d63?source=collection_archive---------4-----------------------#2020-01-14">https://medium.com/analytics-vidhya/decomposition-in-time-series-data-b20764946d63?source=collection_archive---------4-----------------------#2020-01-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="1ab4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">时间序列数据的分解</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/4e8e9874e3488204f87cdcb52edadbf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qtxNHnLqImvzgw7I"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">由<a class="ae jt" href="https://unsplash.com/@srd844?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">斯蒂芬·道森</a>在<a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="5358" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">分解是一项统计任务，将时间序列数据分解成几个部分，或从序列数据中提取季节性、趋势性。这些组件定义如下:</p><ul class=""><li id="1402" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated">级别:系列中的平均值。</li><li id="baf7" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">趋势:系列中增加或减少的值。</li><li id="ca0e" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">季节性:系列中重复的短期周期。</li><li id="7c56" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">噪声:序列中的随机变化。</li></ul><p id="cb78" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">时间序列数据是这些成分的组合。所有系列都有电平和噪声。趋势和季节性组件是可选的。</p><p id="3405" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在时间序列数据中，这些组成部分要么相加，要么相乘。</p><p id="0f3c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">添加型号:</strong></p><p id="695f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可加模型是指数据的方差在时间序列的不同值上保持不变的模型。系统成分是预测因子个体效应的算术和。</p><p id="b293" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">加法模型是线性的，这里的趋势线是一条直线，季节性具有相同的频率和幅度(分别是周期的高度和宽度)。</p><p id="628f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">𝒴(𝑡)=𝑆t +𝑇 t + Rt</p><p id="b2ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其中𝑆t =季节性成分，</p><p id="17eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">𝑇t =趋势周期成分和</p><p id="d4fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Rt =剩余部分</p><p id="b1a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">乘法模型:</strong></p><p id="d49d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">乘法模型是这样一种模型，随着数据的增加，季节性模式或方差也会增加。这里，趋势和季节分量相乘，然后加到误差分量上。</p><p id="e433" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">乘法模型是非线性的，例如二次或指数，趋势是曲线，季节性随着时间的推移具有增加或减少的频率和幅度。</p><p id="1324" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">𝒴(𝑡)=𝑆t x 𝑇t x Rt</p><p id="c33f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">经典分解</strong></p><p id="22de" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">分解用于时间序列分析。其结果可用于根据问题通知预测模型。它向我们简要介绍了模型复杂性方面的预测问题，以及如何最好地捕捉模型中的这些组件。</p><p id="16b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">时间序列数据可以具有乘法或加法成分。可以是先上升后下降趋势，或者可以是具有重复季节性成分的非重复周期。</p><p id="9864" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">分解有助于我们更好地分析数据和探索解决问题的不同方法。</p><p id="6665" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Python提供了statsmodels库，可以帮助将一系列数据分解成组件。使用的函数是seasonal_decompose()。该功能要求将模型指定为“加法”或“乘法”。</p><p id="c2e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该函数的输出是存储在数组中的趋势和季节序列。残差是从数据中去除趋势和季节成分后的值。此外，原始的观察数据被存储。</p><p id="69e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">添加剂分解</strong></p><p id="8fbf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们使用函数seasonal_decompose()来看看加法分解是如何工作的。</p><p id="8121" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们用一些随机噪声生成1到100之间的数字。这一系列包括线性增长的趋势。应用加法分解后获得的结果是:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ki"><img src="../Images/f85f65ae1837e004cbb5029953dbbc5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fGMbfDicTvTwDbmfqoAUwQ.png"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kj"><img src="../Images/ba72f92c323e77a94f90965613803c60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rb7WZ3LwJzy5a5mZeb19kw.png"/></div></div></figure><p id="fa36" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从绘制的图表中我们可以看到，整个系列被视为系列，没有季节性。</p><p id="aeb4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我们所见，也没有残差，这意味着分解无法将我们添加到序列中的噪声与线性趋势分开。它使用经典或简单的方法进行分解。</p><p id="6ef8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为简单分解是一种简单的方法，所以有更高级的分解可用，例如使用黄土(STL)分解的季节和趋势分解。</p><p id="0e31" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">乘法分解</strong></p><p id="9488" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们使用函数seasonal _ decompose()来看看乘法分解是如何工作的。</p><p id="a521" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们用一些随机噪声生成1到100之间的时间平方。应用乘法分解后获得的结果是:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kk"><img src="../Images/f5e1649a0792e1709bc1bed5a79de586.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*omgYXwaAvEsPGahP-A7Wug.png"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kl"><img src="../Images/1fb7d7508dd41e1dd2b5f960ff261839.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wAS-IUJ8fj6h63wde7NaFw.png"/></div></div></figure><p id="c68e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从图表中我们可以看出，趋势线是二次曲线。指数变化可以通过数据转换转化为线性变化。</p><p id="50b7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们来看看数据转换后图表是如何变化的:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es km"><img src="../Images/45b059654b4e192388e363de869cbc38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pobAGmHH-IgM3OJnEYGj-w.png"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kn"><img src="../Images/e2405fcb8bf80347fe1a8c041b896678.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gfVzwBIfsm-DtkXzLXwUOQ.png"/></div></div></figure><p id="c319" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从上图可以看出，通过对数据进行平方根运算，图形是如何从二次型变为线性型的。</p><p id="2362" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">时间序列数据集的分解</p><p id="c30b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ko">数据集描述:</em></p><p id="d9b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据集:航空乘客数据集</p><p id="37d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">行数X列数= 144 X 2</p><p id="ac8f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">列:月份、乘客数量</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kp"><img src="../Images/5758ea7bc3bdec42119fab0040bf2023.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*yCP6iwgGEmw4pcSaOEsOXg.png"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kq"><img src="../Images/edc18edb081c1a0d96d2cfe7b82a780b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*H8PnbhBQhhRyjBTpV7130A.png"/></div></figure><p id="01df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以看到图表也有季节性和趋势性。分解它可以让我们清楚地了解这个系列中的所有组件。</p><p id="e2f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们使用乘法分解，看看结果图。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kr"><img src="../Images/be3504204afdb325bef6003b2025ac5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*40pLALYbkWHGLJuQ0-9_Xw.png"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ks"><img src="../Images/9377b6aee45437b9cfe20eb59bbd29bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*ROeUm9M4iddS92GY_Zr1iA.png"/></div></div></figure><p id="a17e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从图中我们可以清楚地看到，即使残差在早些年和晚些年表现出很高的方差，但该序列的趋势和季节性也有一定的模式。</p><p id="0a83" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">席位分解</strong></p><p id="ebd1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里的“SEATS”代表“ARIMA时间序列中的季节性抽取”。这里的系列数据要么是季度的，要么是月度的。</p><p id="71b8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">座位优势</strong></p><ul class=""><li id="bdc8" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated">基于模型的</li><li id="ee2e" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">平滑趋势估计</li><li id="7c53" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">允许在终点进行估计</li><li id="ab74" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">允许改变季节性</li><li id="d3bf" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">为经济数据开发</li></ul><p id="757d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> STL分解</strong></p><p id="9018" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里“STL”代表“使用黄土的季节和趋势分解”。它是用于分解的更健壮和通用的方法。黄土是一种估计非线性关系的方法。</p><p id="659c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">STL的优势</strong></p><ul class=""><li id="0568" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated">可以应对任何类型的季节性</li><li id="1390" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">季节性成分允许随时间变化，变化率由用户控制。</li><li id="853d" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">趋势周期的平滑度也由用户控制。</li><li id="17fb" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">对非交易日或日历调整的异常值稳健。</li><li id="d06d" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">只有添加剂。</li><li id="c4c1" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">取对数得到乘法分解。</li><li id="7a84" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">使用Box-Cox变换获得其他分解。</li></ul><p id="f0fe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">分解预测</strong></p><p id="919e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们分别预测季节性成分和季节性调整成分(趋势和残差),以预测分解后的序列数据。</p><p id="22fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设季节性成分随时间变化非常缓慢或不变，因此可以采用估计成分的去年数据进行预测。</p><p id="56f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">简而言之，我们用简单的方法计算季节性因素。</p><p id="513e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">任何非季节性预测方法，如带漂移模型的随机游走或霍尔特方法或非季节性ARIMA方法，都可以用于预测季节性调整成分。</p><p id="902d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">总结</strong></p><p id="1cd4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从上面，我们了解到:</p><ul class=""><li id="64b6" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated">为什么时间序列数据的分解很重要。</li><li id="a152" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">分解时间序列数据的各种方法。</li><li id="85f3" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">如何通过分解来预测时间序列数据？</li></ul><p id="c0aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">*在班加罗尔Praxis商学院从事学术工作。</p></div></div>    
</body>
</html>