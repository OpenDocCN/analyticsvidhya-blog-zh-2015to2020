<html>
<head>
<title>Unboxing Facebook’s TransCoder- an AI translator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">拆箱脸书的代码转换器-一个人工智能翻译</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/unboxing-facebooks-transcoder-an-ai-translator-2d0a13bb0296?source=collection_archive---------30-----------------------#2020-06-13">https://medium.com/analytics-vidhya/unboxing-facebooks-transcoder-an-ai-translator-2d0a13bb0296?source=collection_archive---------30-----------------------#2020-06-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><p id="9640" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">将源代码从一种高级语言转换成另一种高级语言的源到源翻译器(也称为转换编译器)并不是一种全新的技术。这些转换编译器用于将代码库从弃用的语言(如python 2)转换为现代语言。</p><p id="8f3f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">转换编译器建立在手写规则的基础上，这些规则应用于源代码的抽象语法树。构建代码转换器需要对源语言和目标语言有很好的理解，并且需要不断地手工修改规则。这很费时间。此外，一些公司为这种翻译花费了巨额资金。</p><blockquote class="jk jl jm"><p id="21d8" class="im in jn io b ip iq ir is it iu iv iw jo iy iz ja jp jc jd je jq jg jh ji jj hb bi translated">自然语言处理以其“注意”机制获得了广泛的关注。</p></blockquote><p id="a445" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">神经机器翻译是将一种语言的文本转换成另一种语言。将NMT应用于编程语言是代码转换器的根本思想。</p><p id="9177" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了更好地理解代码转换器，我们将从将代码从一种编程语言转换成另一种编程语言所涉及的主要挑战开始。</p><h1 id="47b5" class="jr js hi bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">挑战</h1><h2 id="3c64" class="kp js hi bd jt kq kr ks jx kt ku kv kb ix kw kx kf jb ky kz kj jf la lb kn lc bi translated">类型系统</h2><p id="9ddf" class="pw-post-body-paragraph im in hi io b ip ld ir is it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj hb bi translated">将python这样的动态类型语言转换成java这样的静态类型语言是一项具有挑战性的任务</p><p id="332e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">例如python中的“my=3”应该转换成“int my=3”。</p><h2 id="2257" class="kp js hi bd jt kq kr ks jx kt ku kv kb ix kw kx kf jb ky kz kj jf la lb kn lc bi translated">Python的问题</h2><p id="1869" class="pw-post-body-paragraph im in hi io b ip ld ir is it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj hb bi translated">缩进错误是python程序员常见的错误之一。这也让我们的代码转换器头疼。这是因为缩进在像Java这样的语言中没有意义。</p><h2 id="03de" class="kp js hi bd jt kq kr ks jx kt ku kv kb ix kw kx kf jb ky kz kj jf la lb kn lc bi translated">有意义嵌入空间</h2><p id="cd84" class="pw-post-body-paragraph im in hi io b ip ld ir is it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj hb bi translated">在嵌入空间中，源语言和目标语言关键字的编码应该更接近。</p><h2 id="8965" class="kp js hi bd jt kq kr ks jx kt ku kv kb ix kw kx kf jb ky kz kj jf la lb kn lc bi translated">抗噪声能力强</h2><p id="c200" class="pw-post-body-paragraph im in hi io b ip ld ir is it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj hb bi translated">输出不应该是一些抛出错误的垃圾。</p><h1 id="8969" class="jr js hi bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">代码转换器模型</h1><p id="4cbd" class="pw-post-body-paragraph im in hi io b ip ld ir is it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj hb bi translated">代码转换器的架构类似于带有编码器和解码器的变压器。</p><p id="1e0c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">无监督机器翻译的三个原则是</p><h2 id="664a" class="kp js hi bd jt kq kr ks jx kt ku kv kb ix kw kx kf jb ky kz kj jf la lb kn lc bi translated">交叉编程语言模型预训练</h2><p id="c9c7" class="pw-post-body-paragraph im in hi io b ip ld ir is it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj hb bi translated">该原理通过在潜在表示中更紧密地映射相似的单词，使得嵌入空间有意义，而不管语言如何。</p><p id="f804" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在NLP翻译中，数字和城市名称在每种语言中都很常见。类似地，编程语言也有某些共同的关键字，比如for while try等..重要的是将它们映射得更近。我们通过使用屏蔽语言建模来做到这一点，我们屏蔽一些随机标记，并训练我们的代码转换器根据上下文来预测它们。</p><figure class="lj lk ll lm fd ln er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es li"><img src="../Images/b666a7c47de209c6c41e296157b4b4a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Meqo0fwa7GxrTlUmtP9PRw.png"/></div></div></figure><p id="ce33" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们用不同语言执行上述步骤，以创建高质量的跨语言序列表示。</p><figure class="lj lk ll lm fd ln er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es lu"><img src="../Images/96eca8f8ea69ff0ef764e03383958287.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_kYrylv86uYMqV63QGd_QA.png"/></div></div></figure><h2 id="67b5" class="kp js hi bd jt kq kr ks jx kt ku kv kb ix kw kx kf jb ky kz kj jf la lb kn lc bi translated">去噪自动编码</h2><p id="5f39" class="pw-post-body-paragraph im in hi io b ip ld ir is it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj hb bi translated">我们的代码转换器是根据上述原则用预训练的XLM模型初始化的。但是我们的代码转换器现在没有用。为了实现这一点，我们训练该模型以去噪自动编码(DAE)为目标来编码和解码序列。模型被训练成在给定该序列的损坏版本(即，混洗和屏蔽输入记号)的情况下预测记号序列。</p><p id="de42" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">作为解码器的输入给出的第一个符号是指示输出编程语言的特殊标记。</p><figure class="lj lk ll lm fd ln er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es lv"><img src="../Images/305adf8b961b5e3d448f8e4b7369bcc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_t1IZiWJbqWRS385ev52ww.png"/></div></div></figure><p id="f14f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">解码器总是生成一些有意义内容，而不管噪声如何。这对我们下一步至关重要。</p><h2 id="3f2b" class="kp js hi bd jt kq kr ks jx kt ku kv kb ix kw kx kf jb ky kz kj jf la lb kn lc bi translated">回译</h2><p id="ed0f" class="pw-post-body-paragraph im in hi io b ip ld ir is it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj hb bi translated">我们代码转换器现在可以进行翻译了，但是结果可能没有意义。为了训练我们模型的核心目的，我们使用反向翻译。</p><p id="6e79" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">源-目标模型与并行训练的反向目标-源模型耦合。</p><p id="86af" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">目标-源模型用于将目标序列翻译成源语言，产生对应于真实目标序列的噪声源序列。然后以弱监督的方式训练源-目标模型，以从由目标-源模型生成的噪声源序列中重建目标序列，反之亦然。</p><figure class="lj lk ll lm fd ln er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es li"><img src="../Images/4e1382c372fdedb46d6f844bac28cfee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8sBlUkwnuW2lyvHL9y95-Q.png"/></div></div></figure><p id="3a6f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">训练继续进行，直到达到收敛。</p><figure class="lj lk ll lm fd ln er es paragraph-image"><div class="er es lw"><img src="../Images/8e647a153edfdda2ab1f072657e42cc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/format:webp/1*ux1zGMUApK3wtQOKaFWS9A.png"/></div></figure><p id="c9aa" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">有了这些原则，我们可以克服除压痕问题之外的所有挑战。这由预处理来处理。</p><h2 id="3b6c" class="kp js hi bd jt kq kr ks jx kt ku kv kb ix kw kx kf jb ky kz kj jf la lb kn lc bi translated">预处理</h2><p id="dafd" class="pw-post-body-paragraph im in hi io b ip ld ir is it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj hb bi translated">我们在NLP任务的预处理中使用标记化。类似地，不同编程语言的不同记号赋予器解决了缩进和与特定语言相关的问题。</p><h2 id="1ad7" class="kp js hi bd jt kq kr ks jx kt ku kv kb ix kw kx kf jb ky kz kj jf la lb kn lc bi translated">最后的想法</h2><p id="b434" class="pw-post-body-paragraph im in hi io b ip ld ir is it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj hb bi translated">这个代码转换器被训练来单独翻译功能。这可以扩展到复杂的类和对象。代码转换器的结果是:</p><figure class="lj lk ll lm fd ln er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es lx"><img src="../Images/bd8891f992e7ea4390783574780b8169.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t0b9i9JJUPm4g1T0xBB2ww.png"/></div></div></figure><h2 id="a059" class="kp js hi bd jt kq kr ks jx kt ku kv kb ix kw kx kf jb ky kz kj jf la lb kn lc bi translated">参考</h2><p id="1d99" class="pw-post-body-paragraph im in hi io b ip ld ir is it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj hb bi translated"><a class="ae ly" href="https://arxiv.org/abs/2006.03511" rel="noopener ugc nofollow" target="_blank">https://arxiv.org/abs/2006.03511</a></p></div></div>    
</body>
</html>