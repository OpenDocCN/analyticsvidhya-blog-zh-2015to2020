<html>
<head>
<title>Pytest for Absolute Beginners</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">绝对初学者的Pytest</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/pytest-for-absolute-beginners-4a166324b350?source=collection_archive---------9-----------------------#2020-10-06">https://medium.com/analytics-vidhya/pytest-for-absolute-beginners-4a166324b350?source=collection_archive---------9-----------------------#2020-10-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="ade6" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">初学者的基本提示和技巧</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/3ceddbb4d2462c710694f9fa5d776ac8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hW9YiJfmUE4bScvFAVSmpg.png"/></div></div></figure><p id="8109" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi kf translated"><span class="l kg kh ki bm kj kk kl km kn di"> P </span> ython是一种动态类型的语言，用于软件开发和其他领域，如数据分析、研究科学等，在过去几年中，这种语言的使用一直在增加，因此，正确、有效和高效地对这些领域中使用的软件进行测试以确保它们产生正确的预期结果的需求非常突出。来了<strong class="jl hj">“pytest”</strong></p><p id="5d2f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">什么是pytest: </strong></p><p id="ef28" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">Pytest是一个框架，它使得构建简单且可伸缩的测试变得容易。</p><p id="e2ad" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">为什么选择pytest </strong></p><ul class=""><li id="1162" class="ko kp hi jl b jm jn jp jq js kq jw kr ka ks ke kt ku kv kw bi translated">不需要锅炉代码</li><li id="820a" class="ko kp hi jl b jm kx jp ky js kz jw la ka lb ke kt ku kv kw bi translated">复杂测试变得易于编写</li><li id="2b7e" class="ko kp hi jl b jm kx jp ky js kz jw la ka lb ke kt ku kv kw bi translated">测试很容易阅读</li><li id="35d1" class="ko kp hi jl b jm kx jp ky js kz jw la ka lb ke kt ku kv kw bi translated">你可以在几秒钟内开始</li><li id="247a" class="ko kp hi jl b jm kx jp ky js kz jw la ka lb ke kt ku kv kw bi translated">与使用self.assertEqual等东西的Unittest不同，您使用assert来使测试失败</li><li id="ee7f" class="ko kp hi jl b jm kx jp ky js kz jw la ka lb ke kt ku kv kw bi translated">它可以用于运行为Unittest编写测试</li></ul><p id="40e3" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> Pytest安装</strong></p><p id="f9f6" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在命令行上运行以下命令</p><blockquote class="lc ld le"><p id="ea0d" class="jj jk lf jl b jm jn ij jo jp jq im jr lg jt ju jv lh jx jy jz li kb kc kd ke hb bi translated">pip安装pytest</p></blockquote><p id="cfbf" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">py Test中进行测试的条件</strong></p><p id="afa4" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">为了在pytest中进行测试，需要满足以下条件:</p><ul class=""><li id="5f1f" class="ko kp hi jl b jm jn jp jq js kq jw kr ka ks ke kt ku kv kw bi translated">该文件必须以test_ <something>开头或以<something> _test结尾</something></something></li><li id="2f06" class="ko kp hi jl b jm kx jp ky js kz jw la ka lb ke kt ku kv kw bi translated">测试类应该命名为Test <something/></li></ul><p id="3bc8" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">Pytest入门</strong></p><p id="e794" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">让我们在一个名为<strong class="jl hj"><em class="lf">test _ medium . py</em></strong>的文件中创建一个简单的测试函数</p><pre class="iy iz ja jb fd lj lk ll lm aw ln bi"><span id="c117" class="lo lp hi lk b fi lq lr l ls lt"><strong class="lk hj">def</strong> func(x):<br/>    <strong class="lk hj">return</strong> x + 1<br/><br/><br/><strong class="lk hj">def</strong> test_correct():<br/>    <strong class="lk hj">assert</strong> func(4) == 5</span><span id="76c5" class="lo lp hi lk b fi lu lr l ls lt"><strong class="lk hj">def </strong>test_false_answer():<br/>    <strong class="lk hj">assert </strong>func (3) == 8</span></pre><p id="94f8" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">接下来:</p><p id="2291" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们跑</p><blockquote class="lc ld le"><p id="3b05" class="jj jk lf jl b jm jn ij jo jp jq im jr lg jt ju jv lh jx jy jz li kb kc kd ke hb bi translated">pytest当前工作目录中的test_sample.py</p></blockquote><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lv"><img src="../Images/5365b833b576ddffeede46d9a3830d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1188/format:webp/1*FiYU-uXpochy4aL0qbrqUg.png"/></div><figcaption class="lw lx et er es ly lz bd b be z dx translated">我们的产量</figcaption></figure><p id="25e5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">py test输出的解释</strong></p><p id="8522" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">从上面的输出中，我们可以看到一个测试失败了，另一个通过了。与其他测试框架相比，pytest的魅力就在于它非常容易阅读和理解</p><h1 id="c8ee" class="ma lp hi bd mb mc md me mf mg mh mi mj io mk ip ml ir mm is mn iu mo iv mp mq bi translated">关于预期异常的断言</h1><p id="0775" class="pw-post-body-paragraph jj jk hi jl b jm mr ij jo jp ms im jr js mt ju jv jw mu jy jz ka mv kc kd ke hb bi translated">为了编写关于引发异常的断言，您可以使用<code class="du mw mx my lk b">pytest.raises</code>作为上下文管理器。举个例子，</p><pre class="iy iz ja jb fd lj lk ll lm aw ln bi"><span id="1c9d" class="lo lp hi lk b fi lq lr l ls lt"><strong class="lk hj">import pytest </strong></span><span id="877b" class="lo lp hi lk b fi lu lr l ls lt"><strong class="lk hj">def</strong> test_zero_division():<br/>    <strong class="lk hj">with</strong> pytest.raises(ZeroDivisionError):<br/>        1 / 0</span></pre><blockquote class="lc ld le"><p id="4191" class="jj jk lf jl b jm jn ij jo jp jq im jr lg jt ju jv lh jx jy jz li kb kc kd ke hb bi translated">输出</p></blockquote><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mz"><img src="../Images/86cb0392dfdd97f2c391e6d6104e0126.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UwB4cJNg6-jY6MZTV_Ozsg.png"/></div></div><figcaption class="lw lx et er es ly lz bd b be z dx translated">通过断言测试</figcaption></figure><p id="36c0" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">断言输出解释</strong></p><p id="d694" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">从上面的输出，我们可以通过测试。</p><blockquote class="lc ld le"><p id="fcfe" class="jj jk lf jl b jm jn ij jo jp jq im jr lg jt ju jv lh jx jy jz li kb kc kd ke hb bi translated">名词（noun的缩写）乙:</p></blockquote><p id="bc48" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">绿点(。)表示我们只运行了一个测试函数</p><p id="d26e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">测试功能的可能结果</strong></p><p id="bf2a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">通过了(。):测试运行成功</p><p id="aa05" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">失败(F):测试不成功</p><p id="4fec" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">跳过:测试被跳过</p><p id="a067" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">xfail (x):测试本不应该通过、运行和失败</p><p id="d512" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">XPASS (X):测试不应该通过、运行和通过</p><p id="ff2b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">错误(E):异常发生在fixture或hook函数的测试函数之外</p><p id="0a56" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">如何运行单个测试</strong></p><p id="e78b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">默认情况下，pytest在当前工作目录中查找test，然后通过查找必要的测试文件在子目录中查找。</p><p id="4df7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">为了运行单个测试，我们指定文件目录并添加一个“::test_name”</p><p id="b02d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">使用选项</strong></p><p id="2903" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">要查看pytest中所有可用选项的列表，请在命令行上运行以下命令</p><blockquote class="lc ld le"><p id="b07c" class="jj jk lf jl b jm jn ij jo jp jq im jr lg jt ju jv lh jx jy jz li kb kc kd ke hb bi translated">pytest —救命</p></blockquote><p id="c3e2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们将讨论一些常用的方法，</p><p id="90ef" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><em class="lf"> - v，-verbose </em>:这个选项报告了比没有这个选项时更多的测试信息</p><p id="88c2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><em class="lf"> - q，-quiet</em>:这是verbose的反义词</p><p id="49c1" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">— <em class="lf">版本:</em>此<em class="lf"> </em>选项显示pytest的版本</p><p id="0ec5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><em class="lf"> - h </em>:向您展示如何使用pytest</p><p id="1bee" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><em class="lf"> - l，-showlocals </em>:显示局部变量及其值，并对失败的测试进行回溯</p><p id="9575" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><em class="lf"> - lf，-last-failed </em>:这为我们提供了一种方便的方式来编写失败的测试</p><p id="cbef" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><em class="lf"> - ff，-failed-first </em>:与-if一样运行上次通过的其余测试</p><p id="1b32" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">结论</strong></p><p id="e53d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">以上仅仅是使用<em class="lf"> pytest </em>进行测试的冰山一角，但是我相信这些为任何初学者开始使用<em class="lf"> pytest框架提供了基本的诀窍。</em>在期待我的中级教程时，请务必查看下面的参考资料以获取更多信息，因为我将涵盖更高级和有点复杂的主题<em class="lf">。</em></p><p id="df68" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">同时在主要时间，一定要留个赞，鼓掌，分享，关注，评论。</p><blockquote class="lc ld le"><p id="1126" class="jj jk lf jl b jm jn ij jo jp jq im jr lg jt ju jv lh jx jy jz li kb kc kd ke hb bi translated"><strong class="jl hj">暂且不提</strong></p></blockquote><p id="d5f5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">也可以看看我之前的建书店教程<em class="lf"> </em> <a class="ae na" rel="noopener" href="/@ntsendifor/build-a-bookstore-web-app-api-with-python-flask-70db13f1ed9a"> <em class="lf">带flask的web app API with】</em></a></p><p id="c5d2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">参考资料/演职员表</strong></p><div class="nb nc ez fb nd ne"><a href="https://docs.pytest.org/en/stable/contents.html" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab dw"><div class="ng ab nh cl cj ni"><h2 class="bd hj fi z dy nj ea eb nk ed ef hh bi translated">完整的pytest文档</h2><div class="nl l"><h3 class="bd b fi z dy nj ea eb nk ed ef dx translated">测试中断言的编写和报告</h3></div><div class="nm l"><p class="bd b fp z dy nj ea eb nk ed ef dx translated">docs.pytest.org</p></div></div></div></a></div><p id="b061" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">凯瑟琳·德沃夏克用Pytest进行Python测试</p></div></div>    
</body>
</html>