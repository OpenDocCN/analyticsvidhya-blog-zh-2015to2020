<html>
<head>
<title>What does the “yield” do in Python?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 中的“yield”是做什么的？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/what-does-the-yield-do-in-python-44dfaf978906?source=collection_archive---------8-----------------------#2020-12-18">https://medium.com/analytics-vidhya/what-does-the-yield-do-in-python-44dfaf978906?source=collection_archive---------8-----------------------#2020-12-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/07f70367ca456c4741b8e312261a74ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4olmMxGJ0gx5X1g7.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated"><a class="ae iu" href="https://www.forbes.com/sites/robisbitts2/2018/08/13/its-all-about-yield/?sh=5938e0fd7393" rel="noopener ugc nofollow" target="_blank">https://www . Forbes . com/sites/robis bitts 2/2018/08/13/its-all-about-yield/？sh=5938e0fd7393 </a></figcaption></figure><p id="a7c1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> yield </strong>是<strong class="ix hj"> Python </strong>中的一个关键字，用于从一个函数返回而不破坏其局部变量的状态，当调用该函数时，执行从最后一个<strong class="ix hj"> yield </strong>语句开始。任何包含<strong class="ix hj"> yield </strong>关键字的函数都被称为生成器</p><p id="9116" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要理解<code class="du jt ju jv jw b">yield</code>是做什么的，你必须理解<em class="jx">发生器</em>是什么。在你理解生成器之前，你必须理解<em class="jx"> iterables </em>。</p><h1 id="1915" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">可重复的</h1><p id="33da" class="pw-post-body-paragraph iv iw hi ix b iy kw ja jb jc kx je jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated">当您创建列表时，您可以逐个读取它的项目。<strong class="ix hj">逐个读取它的条目称为迭代:</strong></p><pre class="lb lc ld le fd lf jw lg lh aw li bi"><span id="9d58" class="lj jz hi jw b fi lk ll l lm ln">&gt;&gt;&gt; list = [1, 2, 3]</span><span id="b2da" class="lj jz hi jw b fi lo ll l lm ln">&gt;&gt;&gt; for i in list:<br/>...    print(i)</span><span id="4b16" class="lj jz hi jw b fi lo ll l lm ln">=========================Output===================</span><span id="2d23" class="lj jz hi jw b fi lo ll l lm ln">1<br/>2<br/>3</span></pre><p id="46b7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du jt ju jv jw b">list</code>是一个<em class="jx">可迭代</em>。当你使用列表理解时，你创建了一个列表，因此一个 iterable:</p><pre class="lb lc ld le fd lf jw lg lh aw li bi"><span id="406f" class="lj jz hi jw b fi lk ll l lm ln">&gt;&gt;&gt; list = [x*x for x in range(3)]<br/>&gt;&gt;&gt; for i in list:<br/>...    print(i)</span><span id="9d5c" class="lj jz hi jw b fi lo ll l lm ln">=========================Output===================</span><span id="6739" class="lj jz hi jw b fi lo ll l lm ln">0<br/>1<br/>4</span></pre><p id="f6dc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一切可以用<code class="du jt ju jv jw b">for... in...</code>的东西都是可重复的；<code class="du jt ju jv jw b">lists</code>、<code class="du jt ju jv jw b">strings</code>，文件...</p><p id="7398" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这些 iterables 很方便，因为你可以随心所欲地读取它们，但是你把所有的值都存储在内存中，当你有很多值时，这并不总是你想要的。</p><h1 id="fd26" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">发电机</h1><p id="637c" class="pw-post-body-paragraph iv iw hi ix b iy kw ja jb jc kx je jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated">生成器是迭代器，一种只能迭代一次的迭代器。发生器不会将所有值存储在存储器中，<strong class="ix hj">它们会动态生成值</strong>:</p><pre class="lb lc ld le fd lf jw lg lh aw li bi"><span id="9cad" class="lj jz hi jw b fi lk ll l lm ln">&gt;&gt;&gt; mygenerator = (x*x for x in range(3))<br/>&gt;&gt;&gt; for i in mygenerator:<br/>...    print(i)</span><span id="5113" class="lj jz hi jw b fi lo ll l lm ln">=========================Output===================</span><span id="f45b" class="lj jz hi jw b fi lo ll l lm ln">0<br/>1<br/>4</span></pre><p id="298b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">除了你用<code class="du jt ju jv jw b">()</code>代替<code class="du jt ju jv jw b">[]</code>之外，都是一样的。但是，你<strong class="ix hj">不能</strong>执行第二次<code class="du jt ju jv jw b">for i in mygenerator</code>，因为生成器只能使用一次:它们计算 0，然后忘记它，计算 1，最后一个接一个地计算 4。</p><h1 id="2f8f" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">产量</h1><p id="bfb3" class="pw-post-body-paragraph iv iw hi ix b iy kw ja jb jc kx je jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated"><code class="du jt ju jv jw b">yield</code>是一个关键字，用法和<code class="du jt ju jv jw b">return</code>、<strong class="ix hj">一样，只是函数会返回一个生成器</strong>。</p><pre class="lb lc ld le fd lf jw lg lh aw li bi"><span id="44ab" class="lj jz hi jw b fi lk ll l lm ln">&gt;&gt;&gt; def createGenerator():<br/>...    list = range(3)<br/>...    for i in list:<br/>...        yield i*i<br/>...<br/>&gt;&gt;&gt; mygenerator = createGenerator() # create a generator<br/>&gt;&gt;&gt; print(mygenerator) # mygenerator is an object!</span><span id="a615" class="lj jz hi jw b fi lo ll l lm ln">=========================Output===================</span><span id="db36" class="lj jz hi jw b fi lo ll l lm ln">&lt;generator object createGenerator at 0xb7555c34&gt;</span><span id="f759" class="lj jz hi jw b fi lo ll l lm ln"><br/>&gt;&gt;&gt; for i in mygenerator:<br/>...     print(i)</span><span id="3912" class="lj jz hi jw b fi lo ll l lm ln">=========================Output===================</span><span id="d0e8" class="lj jz hi jw b fi lo ll l lm ln">0<br/>1<br/>4</span></pre><p id="4269" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是一个没用的例子，但是当你知道你的函数将返回一大堆你只需要读一次的值时，这是很方便的。</p><p id="3ba1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要掌握<code class="du jt ju jv jw b">yield</code>，你必须明白<strong class="ix hj">在调用函数时，你在函数体中写的代码是不运行的。</strong>这个函数只返回生成器对象，这有点棘手:-)</p><p id="b212" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，您的代码将从每次<code class="du jt ju jv jw b">for</code>使用生成器时停止的地方继续运行。</p><p id="7dbe" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在最难的部分是:</p><p id="a216" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">第一次<code class="du jt ju jv jw b">for</code>调用从你的函数创建的生成器对象时，它将从头开始运行你的函数中的代码，直到它到达<code class="du jt ju jv jw b">yield</code>，然后它将返回循环的第一个值。然后，每个后续调用将运行您在函数中编写的循环的另一个迭代，并返回下一个值。这将继续，直到发生器被认为是空的，这发生在函数运行时没有点击<code class="du jt ju jv jw b">yield</code>。这可能是因为循环已经结束，或者因为您不再满足某个<code class="du jt ju jv jw b">"if/else"</code>。</p></div><div class="ab cl lp lq gp lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="hb hc hd he hf"><h1 id="a6d5" class="jy jz hi bd ka kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv bi translated">理解迭代的内在机制</h1><p id="1ccc" class="pw-post-body-paragraph iv iw hi ix b iy kw ja jb jc kx je jf jg ky ji jj jk kz jm jn jo la jq jr js hb bi translated">迭代是一个包含可迭代程序(实现了<code class="du jt ju jv jw b">__iter__()</code>方法)和迭代器(实现了<code class="du jt ju jv jw b">__next__()</code>方法)的过程。Iterables 是任何你可以从中获得迭代器的对象。迭代器是让你在可迭代对象上迭代的对象。</p></div></div>    
</body>
</html>