<html>
<head>
<title>Inverting an Image using NumPy’s Broadcasting method</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用NumPy的广播方法反转图像</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/inverting-an-image-using-numpys-broadcasting-method-1f5beb7f9fa5?source=collection_archive---------1-----------------------#2020-12-15">https://medium.com/analytics-vidhya/inverting-an-image-using-numpys-broadcasting-method-1f5beb7f9fa5?source=collection_archive---------1-----------------------#2020-12-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/f17fa38848e9c053757d1bc0b13506b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rE_suhdZqJZmiJ5W"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">Jr Korpa 在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="7a57" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文中，我们将学习如何使用NumPy反转图像。为了得到一些要点，我们有两个值<strong class="ix hj"> 0 </strong>和<strong class="ix hj"> 1 </strong>。这里<strong class="ix hj"> 0 </strong>代表<strong class="ix hj">黑色</strong>而<strong class="ix hj"> 1 </strong>代表<strong class="ix hj">白色</strong>。当我们对这些值进行反演时，我们得到:</p><ul class=""><li id="a11c" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">0 →反转→ 1</li><li id="1cef" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">1 →反转→ 0</li></ul><p id="686c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">以上只有当我们两个值时才起作用。<strong class="ix hj"> 0 </strong>为<strong class="ix hj">低</strong>和<strong class="ix hj"> 1 </strong>为<strong class="ix hj">高</strong>。如果我们将同样的情况与像素值仅为1和0的二进制图像联系起来，则反转将会发生。用文字来说，我们可以说从<strong class="ix hj">白</strong>黑<strong class="ix hj">到<strong class="ix hj">黑</strong>白<strong class="ix hj">白</strong>。</strong></p><h2 id="baaf" class="kh ki hi bd kj kk kl km kn ko kp kq kr jg ks kt ku jk kv kw kx jo ky kz la lb bi translated">广播</h2><p id="ab16" class="pw-post-body-paragraph iv iw hi ix b iy lc ja jb jc ld je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">不像列表，如果我们想给列表的值加一个数。我们遍历每个元素并添加数字。然而，在NumPy中，我们不需要遍历每个元素并添加。相反，我们可以将数组列表视为单个元素，并添加数字。NumPy会自动将该数字添加到数组列表的所有元素中。这种技术被称为广播。</p><p id="6392" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">广播技术适用于矩阵和阵列。与普通循环相比，它的速度非常快。</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="7495" class="kh ki hi lm b fi lq lr l ls lt">&gt;&gt;&gt; import numpy as np<br/>&gt;&gt;&gt; M = np.array([1, 2, 3, 4, 5, 6])<br/>&gt;&gt;&gt; M = 3 + M<br/>&gt;&gt;&gt; M<br/>array([4, 5, 6, 7, 8, 9])<br/>&gt;&gt;&gt;</span></pre><p id="d952" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们看看随机矩阵的演示。</p><h2 id="467e" class="kh ki hi bd kj kk kl km kn ko kp kq kr jg ks kt ku jk kv kw kx jo ky kz la lb bi translated">白色—黑色</h2><p id="1bb0" class="pw-post-body-paragraph iv iw hi ix b iy lc ja jb jc ld je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">下面可以看到<strong class="ix hj">黑白</strong>矩阵和图像的简单演示。</p><ul class=""><li id="9e76" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">1显示为<strong class="ix hj">白色</strong></li><li id="9df0" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">0显示为<strong class="ix hj">黑色</strong></li></ul><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="6828" class="kh ki hi lm b fi lq lr l ls lt">&gt;&gt;&gt; import numpy as np<br/>&gt;&gt;&gt; image_b = np.array([<br/>... [1,0,1],<br/>... [1,1,0],<br/>... [0,1,1]])<br/>&gt;&gt;&gt; image_b<br/>array([[1, 0, 1],<br/>       [1, 1, 0],<br/>       [0, 1, 1]])<br/>&gt;&gt;&gt;</span></pre><p id="7232" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果我们形象化上面的矩阵，我们可以看到类似下面的东西。</p><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es lu"><img src="../Images/c3bc2343906c679aa76168505a79b04e.png" data-original-src="https://miro.medium.com/v2/resize:fit:542/format:webp/1*jpe1UBbGWp8jmB3JAAoKcA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><h2 id="c53e" class="kh ki hi bd kj kk kl km kn ko kp kq kr jg ks kt ku jk kv kw kx jo ky kz la lb bi translated">黑色-白色</h2><p id="d8e3" class="pw-post-body-paragraph iv iw hi ix b iy lc ja jb jc ld je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">下面可以看到<strong class="ix hj">黑白</strong>矩阵和图像的简单演示。</p><ul class=""><li id="baea" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">1变为0 → <strong class="ix hj">黑色</strong></li><li id="3757" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">0变为1 → <strong class="ix hj">白色</strong></li></ul><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="b652" class="kh ki hi lm b fi lq lr l ls lt">&gt;&gt;&gt; # Broadcasting<br/>&gt;&gt;&gt; image_i = 1 - image_b<br/>&gt;&gt;&gt; # image_i = ~ image_b<br/>&gt;&gt;&gt; image_i<br/>array([[0, 1, 0],<br/>       [0, 0, 1],<br/>       [1, 0, 0]])<br/>&gt;&gt;&gt;</span></pre><p id="89fd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果我们形象化上面的矩阵，我们可以看到类似下面的东西。</p><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es lu"><img src="../Images/1123b3c1ad28f496e7193dc65c58e4fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:542/format:webp/1*8CiWSNcAXJuVaMoCBzGvYg.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><p id="de1f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要将一个矩阵转换成一个逆矩阵，我们也可以使用操作'<strong class="ix hj"> ~ </strong>'。它以同样的方式工作。</p><blockquote class="lv lw lx"><p id="6972" class="iv iw ly ix b iy iz ja jb jc jd je jf lz jh ji jj ma jl jm jn mb jp jq jr js hb bi translated">如果你想知道具体如何将图像转换成二进制，你可以参考我的文章，在那里我解释了彩色和灰度图像的程序。</p></blockquote><p id="4355" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">由于图像已经被二值化，所以上述实现是可行的。如果我们想把这个应用于一个彩色的非二值化的图像呢？情况会有所不同。让我们看看我们能为这些做些什么。</p></div><div class="ab cl mc md gp me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hb hc hd he hf"><h1 id="b9fe" class="mj ki hi bd kj mk ml mm kn mn mo mp kr mq mr ms ku mt mu mv kx mw mx my la mz bi translated">编码时间到了</h1><p id="d1e0" class="pw-post-body-paragraph iv iw hi ix b iy lc ja jb jc ld je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">我们主要使用的软件包有:</p><ul class=""><li id="3a7d" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">NumPy</li><li id="1fec" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">Matplotlib</li><li id="acce" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">OpenCV</li></ul><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es na"><img src="../Images/18305c130ac5255d7e7a39a385ec518d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Nm7Ec_i9OjDnCPM59Nkdg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><h2 id="1a73" class="kh ki hi bd kj kk kl km kn ko kp kq kr jg ks kt ku jk kv kw kx jo ky kz la lb bi translated">导入包</h2><figure class="lh li lj lk fd ij"><div class="bz dy l di"><div class="nb nc l"/></div></figure><h2 id="f32a" class="kh ki hi bd kj kk kl km kn ko kp kq kr jg ks kt ku jk kv kw kx jo ky kz la lb bi translated">阅读图像</h2><figure class="lh li lj lk fd ij"><div class="bz dy l di"><div class="nb nc l"/></div></figure><p id="80a2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">上述函数读取灰度或RGB图像，并返回图像矩阵。</p><h2 id="e58c" class="kh ki hi bd kj kk kl km kn ko kp kq kr jg ks kt ku jk kv kw kx jo ky kz la lb bi translated">用库实现代码</h2><p id="381c" class="pw-post-body-paragraph iv iw hi ix b iy lc ja jb jc ld je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">对于使用<strong class="ix hj"> <em class="ly"> cv2 </em> </strong>库反转图像，我们可以使用库中可用的方法<strong class="ix hj"> <em class="ly"> bitwise_not() </em> </strong>。我们可以将图像矩阵作为参数传递给方法。</p><figure class="lh li lj lk fd ij"><div class="bz dy l di"><div class="nb nc l"/></div></figure><p id="5f54" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">上面的函数返回传递的原始图像的反转图像。绘制时可以看到同样的情况。</p><p id="b9ae" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们测试一下上面的函数—</p><figure class="lh li lj lk fd ij"><div class="bz dy l di"><div class="nb nc l"/></div></figure><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es nd"><img src="../Images/7a25a88c41342e8435bcb356b11b957d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1144/format:webp/1*UTZqxBzPOJv4ynaN8vnr9w.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><figure class="lh li lj lk fd ij"><div class="bz dy l di"><div class="nb nc l"/></div></figure><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es nd"><img src="../Images/32838780295832fd9d01347d04357135.png" data-original-src="https://miro.medium.com/v2/resize:fit:1144/format:webp/1*kndadTTQfn1bmCGiDvvtHA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><p id="1647" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们已经获得了彩色和灰度图像的反转图像。</p><h2 id="2873" class="kh ki hi bd kj kk kl km kn ko kp kq kr jg ks kt ku jk kv kw kx jo ky kz la lb bi translated">从头开始代码实现</h2><p id="8c9d" class="pw-post-body-paragraph iv iw hi ix b iy lc ja jb jc ld je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">为了反转图像，我们必须应用使用NumPy的广播技术。我们必须从<strong class="ix hj"> 255 </strong>中减去每个像素值。是因为一幅图像中最高的像素值或颜色值是<strong class="ix hj"> 255 </strong>。无论哪种方式，我们都可以对图像应用'<strong class="ix hj"> ~ </strong>'(求反)操作。</p><figure class="lh li lj lk fd ij"><div class="bz dy l di"><div class="nb nc l"/></div></figure><p id="6e33" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们测试一下上面的函数—</p><figure class="lh li lj lk fd ij"><div class="bz dy l di"><div class="nb nc l"/></div></figure><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es nd"><img src="../Images/7a25a88c41342e8435bcb356b11b957d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1144/format:webp/1*UTZqxBzPOJv4ynaN8vnr9w.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><figure class="lh li lj lk fd ij"><div class="bz dy l di"><div class="nb nc l"/></div></figure><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es nd"><img src="../Images/32838780295832fd9d01347d04357135.png" data-original-src="https://miro.medium.com/v2/resize:fit:1144/format:webp/1*kndadTTQfn1bmCGiDvvtHA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><p id="be26" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">就是这个！我们已经成功地编写了将图像转换成反转图像的代码。结果类似于库代码的结果。</p><p id="af69" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们看看当应用于二值化图像时会产生什么结果。我已经给出了没有代码的结果(这是显而易见的)。</p><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es nd"><img src="../Images/196cfd2d7b0a7e6f369b0d65dfc8b61c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1144/format:webp/1*KFKnlYPueJqTKLGdlJ9oiw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><p id="777e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">反转图像与二值化图像正好相反。因此，这就结束了本文的议程。</p><p id="0c83" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你一定要看看我在个人资料中关于同一主题的其他文章。</p></div><div class="ab cl mc md gp me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hb hc hd he hf"><p id="921f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你喜欢，你可以在这里给我买咖啡。</p><figure class="lh li lj lk fd ij er es paragraph-image"><a href="https://www.buymeacoffee.com/msameeruddin"><div class="er es ne"><img src="../Images/6d60b235fcc46a4bd696b90e886419ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:340/format:webp/1*Dpw8-hNGI2fDmosV4E8DVQ.png"/></div></a></figure></div></div>    
</body>
</html>