<html>
<head>
<title>Learning Pandas via COVID Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过COVID分析了解熊猫</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/learning-pandas-via-covid-analysis-79228efb5413?source=collection_archive---------13-----------------------#2020-03-28">https://medium.com/analytics-vidhya/learning-pandas-via-covid-analysis-79228efb5413?source=collection_archive---------13-----------------------#2020-03-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="da2d" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">数据工程、科学和分析的又一指南</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/79818d1e76d4f6aecfe6d8bdf02e1c49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cS-JP-NULAKPDQ-b"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae jn" href="https://unsplash.com/@scienceinhd?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">科学高清</a>拍摄的照片</figcaption></figure><p id="5639" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">即使是人为的，项目在有目标的情况下也能更好地运作。“<strong class="jq hj">我想绘制艾滋病感染率和增长率图，并与标准普尔500指数进行比较。让我们开始吧！</strong></p><p id="3baf" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">成为一名(黑客)数据科学家或拥有公开的新冠肺炎和纽约证券交易所数据集+ Python熊猫的Quant真的很容易。</p><p id="4dc7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">(完整的笔记本在<a class="ae jn" href="https://github.com/dougfoo/machineLearning/blob/master/covid/COVID-Pandas-Intro.ipynb" rel="noopener ugc nofollow" target="_blank">我的github </a> [0]中可用)，我已经采取了更容易查看的屏幕帽，但很难复制粘贴！)</p><h1 id="67d0" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated"><strong class="ak">第一步:安装Python </strong></h1><p id="d06f" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">下载Python和Jupyter笔记本附带的Anaconda 。会假设你能搞清楚这部分。</p><h1 id="b42f" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">步骤2:提取数据集</h1><p id="bfd7" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">约翰·霍普斯金[1]是被广泛引用且相对稳定的全球数据。<em class="lh">有时会有缺失数据，在这种情况下，他们会复制最后一个值——除了每日变化分析之外，其他都没问题。</em></p><p id="59de" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">USAfacts [2]是一个较新的逐县汇总。<em class="lh">也有一些数据缺口，但区域层面的细分非常有用。</em></p><p id="8f75" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">标准普尔500指数价格可以在Yahoooooo [3]上找到。</p><p id="41b0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们将在Jupyter笔记本中使用所有三个数据集——一个基于web的Python运行时/编辑器。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es li"><img src="../Images/3dd63207b9e7617778ede6c90a6c2ddf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HzmVfdrLX9EvOKTf9K3TJQ.png"/></div></div></figure><p id="2ed1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><em class="lh"> pd.read_csv(path) </em>是一个灵活的csv函数，用于本地文件或web URIs。它返回一个解析过的<strong class="jq hj">data frame</strong><em class="lh">(DFC)</em>—Panda的内存表结构。</p><p id="d172" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">一旦加载<em class="lh"> dfc.head(3) </em>打印表格的前3行—整个表格<em class="lh"> (dfc.shape) </em>为1564行* 69列。</p><h1 id="bbdb" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">第三步:基本切片和切块</h1><p id="aa04" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">Pandas DataFrames允许您按行、列或两者进行切片/查看，以显示或创建已加载CSV文件的子集。按位置切片很容易— <em class="lh"> dfc.iloc[rowstart:end，colstart:end] </em>返回一个子集。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lj"><img src="../Images/1f8edffc5549ab847289b66728e45b56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ORPaTiBQCcVNICUH6Nzrcg.png"/></div></div></figure><p id="8d69" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">使用<em class="lh"> dfc.loc[start:end，start，end]按行名(索引)或列名切片。</em>如果你只是想要一个特定的列，你也可以使用快捷键<em class="lh"> dfc['ColName']或</em>。将display()环绕在您想要输出的任何内容周围。</p><h1 id="0c0b" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">步骤4:过滤、排序和连接</h1><p id="4e5d" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">过滤有点不太直观，让我们解释一下下面的每一行:</p><ul class=""><li id="c72f" class="lk ll hi jq b jr js ju jv jx lm kb ln kf lo kj lp lq lr ls bi translated">创建类似于<em class="lh">filter = DFC[' State ']= ' NY '</em>的过滤表达式</li><li id="1bf3" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">传入DataFrame: <em class="lh"> dfc[filter] </em>以返回子集</li><li id="c5b7" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">使用列片，将前5列和后10列合并到一个新的DataFrame中，使用:<em class="lh">PD . concat([DFS数组]) </em></li><li id="466f" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">使用相同的过滤技术过滤最后一列(2020年3月23日)计数&gt; 500的地方+使用<em class="lh"> df.sort_values() </em>方法排序。</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ly"><img src="../Images/efb6f6f137cf37de28278195cea874c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oX2uXlZE0qu9rhJsWkzWoA.png"/></div></div></figure><p id="5d33" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">信不信由你，上面的教程大部分都是你入门需要知道的！下一步是一些真正有趣的情节。</p></div><div class="ab cl lz ma gp mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="hb hc hd he hf"><h1 id="a794" class="kk kl hi bd km kn mg kp kq kr mh kt ku io mi ip kw ir mj is ky iu mk iv la lb bi translated">步骤5:用Pandas和Matplotlib (pyplot)绘图</h1><p id="f0f7" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">熊猫最棒的一点是它很好的整合了基本的绘图。这就像打电话给<em class="lh">一样简单。在任一数据帧</em>上绘制()。</p><p id="ebaf" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们可以用group by 'State '、sum()构建一个按美国各州排名靠前的视图，并像以前一样应用其他切片和排序:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ml"><img src="../Images/f9103dc0df60b5b9c090f7218673ca27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BFxjKIofbs9e19JFRrbBhg.png"/></div></div></figure><p id="4e38" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们知道纽约的病例数很突出—让我们确认一下。右边是log(e)归一化，使异常值更具可比性。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mm"><img src="../Images/089545ca4903d857631639132b7238b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b6E81fBjub6gMYE9F36VYg.png"/></div></div></figure><p id="a511" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们可以用USAfacts数据集很容易地挖掘纽约的各个县。只需将groupby更改为“县名”并重新运行:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mn"><img src="../Images/67122b38439b7c9dc241c1dfc840d443.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iCzV_nNO0XNRCWnP8GcUtw.png"/></div></div></figure><p id="2bd8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">纽约市真的很痛苦..</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mo"><img src="../Images/9b3de6410a2c04e01fe413f6252fd9b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ow0YaopsiTStQmgMkVBETA.png"/></div></div></figure><h1 id="df27" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">第六步。使用约翰·霍普斯金数据进行全局分析</h1><p id="0e9a" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">我们将切换到另一个数据集进行全局分析。约翰·霍普斯金有一个很好的时间序列数据集。我还添加了《标准普尔500时报》,这样我们就可以将一些事情叠加在一起。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mp"><img src="../Images/1270a48f6d287969b2839c1e8fe19e07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ymCPSE4M5zv0eYVJH72ozQ.png"/></div></div></figure><p id="dc79" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">使用前面介绍的基础知识:read_csv、切片、排序、分组+这个"<strong class="jq hj"> <em class="lh"> pd.merge </em> </strong>"方法—我们创建一个新的合并的S &amp; P 500 + COVID数据集。一旦我们有了这种时间序列格式，我们就可以很容易地绘制它:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mq"><img src="../Images/8c9cd1197c5cf8bae2e0ee960d805f8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e5u8YKvSsqMcEoAI38d8Dw.png"/></div></div></figure><p id="ff8e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">好吧，不简单——但是输出非常好。它用左边的横条和y轴覆盖了标准普尔500价格。右侧是以y轴表示的前10个国家的线形图。全局聚合是红色虚线，第二个基准轴位于最右侧。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mr"><img src="../Images/12431e05c76ed0f32ba4f72d7e2e882b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XMrK--5v-3M2IS2uFYADhA.png"/></div></div></figure><p id="f91f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">看起来很严重。我不做预测，但很明显，这个事情正在快速发展(阿尔比埃特与S&amp;P500没多大关系)。看看一些新兴市场..截至3月27日，有10个国家的增长速度超过了我们…</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ms"><img src="../Images/e8b9d855c50dc2ade5075f7f41cfb9e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Q159XlaDHvuDhFBV9y5jg.png"/></div></div></figure><p id="04e5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">另一个比较3个国家增长率的很酷的图表非常容易制作:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mt"><img src="../Images/3d88a21b54bcd8138036c68491f685fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H52TJqTudleZe69v79_D-w.png"/></div></div></figure><h1 id="4d6f" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">第七步。结束游戏</h1><p id="e8f9" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">结束前的最后一件事(本文的结束不是人类的结束)——你也可以很容易地“地理地图”(代码和各种方法见笔记本):</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mu"><img src="../Images/e598c2dfabb0e5802f276a793cd87c83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UYAPtwY6DC0y4tronF9v3g.png"/></div></div></figure><p id="d9e3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在就到此为止——祝大家好运！在外面注意安全…</p><h1 id="1644" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">参考资料:</h1><ul class=""><li id="db81" class="lk ll hi jq b jr lc ju ld jx mv kb mw kf mx kj lp lq lr ls bi translated">[0] — <strong class="jq hj">本文代码/笔记本</strong>，在<a class="ae jn" href="https://github.com/dougfoo/machineLearning/blob/master/covid/COVID-Pandas-Intro.ipynb" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上</li><li id="1f4a" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">[1]— <strong class="jq hj">约翰·霍普斯金日报</strong>，上<a class="ae jn" href="https://github.com/CSSEGISandData/COVID-19.git" rel="noopener ugc nofollow" target="_blank"> GitHub </a></li><li id="e7e8" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">[2] — <strong class="jq hj">美国事实</strong>美国地区数据，关于<a class="ae jn" href="https://usafacts.org/visualizations/coronavirus-covid-19-spread-map/" rel="noopener ugc nofollow" target="_blank">USAfacts.org</a></li><li id="3eff" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">[3] — <strong class="jq hj"> S &amp; P 500 </strong>数据，<a class="ae jn" href="https://finance.yahoo.com/quote/%5EGSPC/history?p=%5EGSPC" rel="noopener ugc nofollow" target="_blank">雅虎财经</a></li><li id="9f75" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">[4] —强烈推荐<strong class="jq hj">熊猫10分钟教程</strong>，<a class="ae jn" href="https://pandas.pydata.org/pandas-docs/stable/getting_started/10min.html" rel="noopener ugc nofollow" target="_blank">pydata.org</a></li><li id="f31f" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">[5] — <strong class="jq hj">布莱斯的</strong>网站，我从那里窃取想法，<a class="ae jn" href="https://ro-z.net/assets/covid19quickanalysis.html" rel="noopener ugc nofollow" target="_blank">ro-z.net</a></li><li id="6b6c" class="lk ll hi jq b jr lt ju lu jx lv kb lw kf lx kj lp lq lr ls bi translated">[6] —半实时<strong class="jq hj">全球跟踪器</strong>，<a class="ae jn" href="https://www.worldometers.info/coronavirus/" rel="noopener ugc nofollow" target="_blank">世界计数器</a></li></ul></div></div>    
</body>
</html>