<html>
<head>
<title>Explore REST APIs without Coding</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">无需编码即可探索REST APIs</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/explore-rest-apis-without-coding-abc9a94ec879?source=collection_archive---------14-----------------------#2020-05-12">https://medium.com/analytics-vidhya/explore-rest-apis-without-coding-abc9a94ec879?source=collection_archive---------14-----------------------#2020-05-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/3dd11d2ff755d32568901ecc9fd83bd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_KrHMtoOMpoFCNR_SOV3XA.jpeg"/></div></div></figure><div class=""/><p id="60ee" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">数据科学家面临的最大挑战之一是大量数据格式不方便。REST APIs就是这样一种格式。在大型企业中，由于几个原因，这些尤其成问题。通常大量的参考数据只能通过REST API访问，这意味着要访问这些数据，用户需要学习足够的Python或R来访问这些数据。但是如果你不想编码呢？</p><p id="dff2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我见过的处理这种情况的典型方法是在Splunk或Elasticsearch等分析系统中创建参考数据的副本。这种方法的问题是多方面的。首先，是建立数据流的工程工作(耗费时间和金钱)。最重要的是，您现在有了重复的存储成本，而且您现在维护着同一信息的多个版本。</p><p id="b5bc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我看到的另一种方式是每个API所有者为他们的API提供一个图形界面，这很好，但问题是现在数据是烟囱式的，不能与其他数据结合，这完全违背了它的目的。一定有更好的方法…</p><p id="b190" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">看看下面的视频教程，看看一个演示！</p><figure class="jo jp jq jr fd hk"><div class="bz dy l di"><div class="js jt l"/></div></figure><h1 id="7d51" class="ju jv ht bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">更简单的方法</h1><p id="b40c" class="pw-post-body-paragraph iq ir ht is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">如果您可以直接从API中查询数据，而不必提取数据、编写代码或做任何其他事情，那会怎么样？事实证明，有了最新版本的Apache Drill，你完全可以做到这一点！Drill now使您能够查询REST APIs，就像它们是本地数据库表一样。</p><h1 id="efcc" class="ju jv ht bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">你是怎么做到的？</h1><p id="efc2" class="pw-post-body-paragraph iq ir ht is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">您需要做的第一件事是获得一些关于您要查询的API的信息。具体来说，您需要知道:</p><ul class=""><li id="328a" class="kx ky ht is b it iu ix iy jb kz jf la jj lb jn lc ld le lf bi translated">数据的URL路径，以及需要传递给API的任何其他参数</li><li id="373e" class="kx ky ht is b it lg ix lh jb li jf lj jj lk jn lc ld le lf bi translated">API如何处理认证</li><li id="7c93" class="kx ky ht is b it lg ix lh jb li jf lj jj lk jn lc ld le lf bi translated">任何连接信息，如代理</li></ul><p id="d61f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦有了这些信息，就可以配置Drill来连接到您的API。</p><h1 id="5073" class="ju jv ht bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">创建连接</h1><p id="e317" class="pw-post-body-paragraph iq ir ht is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">首先，您需要创建一个新的<em class="ll">存储插件</em>来连接API。点击屏幕顶部的<strong class="is hu">存储</strong>，然后点击左上角的<strong class="is hu">创建</strong>按钮。</p><figure class="jo jp jq jr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lm"><img src="../Images/9a05478676acbf50e0a8c6f58bdddddc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*g6JTVpqct5p-17jL.png"/></div></div></figure><p id="8ac1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，您将看到一个带有空白窗口的弹出窗口。</p><figure class="jo jp jq jr fd hk er es paragraph-image"><div class="er es ln"><img src="../Images/62ea90db5b1af40c0668bb09c9857ff9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/0*eNA0M4T0kLVTHSur.png"/></div></figure><p id="cd40" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以在这里输入API的配置细节。在存储名称区域，给它起一个名字，比如<strong class="is hu"> <em class="ll"> api </em> </strong>，或者<strong class="is hu"> <em class="ll"> http </em> </strong>之类的，这样你就知道你在查询什么样的数据了。该名称仅供参考，对查询执行没有影响，但它是您将在查询中使用的名称。</p><p id="d8e8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面的代码片段显示了Drill中所有可用的全局配置选项。其中大多数应该是不言自明的。(<a class="ae lo" href="https://github.com/apache/drill/tree/master/contrib/storage-http" rel="noopener ugc nofollow" target="_blank">这里有完整的文档</a>)唯一必须设置的是<strong class="is hu">类型</strong> <em class="ll"> </em>，它们应该设置为“http”和<strong class="is hu">启用</strong>设置，它们应该设置为“true”。</p><pre class="jo jp jq jr fd lp lq lr ls aw lt bi"><span id="c533" class="lu jv ht lq b fi lv lw l lx ly">{</span><span id="5aed" class="lu jv ht lq b fi lz lw l lx ly">"type": "http",</span><span id="1860" class="lu jv ht lq b fi lz lw l lx ly">"cacheResults": <strong class="lq hu">false</strong>,</span><span id="4826" class="lu jv ht lq b fi lz lw l lx ly">"connections": {},</span><span id="ce48" class="lu jv ht lq b fi lz lw l lx ly">"timeout": 0,</span><span id="d60d" class="lu jv ht lq b fi lz lw l lx ly">"proxyHost": <strong class="lq hu">null</strong>,</span><span id="7dbd" class="lu jv ht lq b fi lz lw l lx ly">"proxyPort": 0,</span><span id="0b70" class="lu jv ht lq b fi lz lw l lx ly">"proxyType": <strong class="lq hu">null</strong>,</span><span id="c379" class="lu jv ht lq b fi lz lw l lx ly">"proxyUsername": <strong class="lq hu">null</strong>,</span><span id="7a82" class="lu jv ht lq b fi lz lw l lx ly">"proxyPassword": <strong class="lq hu">null</strong>,</span><span id="74df" class="lu jv ht lq b fi lz lw l lx ly">"enabled": <strong class="lq hu">true</strong></span><span id="fd69" class="lu jv ht lq b fi lz lw l lx ly">}</span></pre><p id="5fba" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在API存储插件中，Drill允许您定义多个连接。例如，假设您有一个天气API和一个股票价格API。您可以为它们中的每一个定义单独的连接，这样当您执行查询时，您就可以分别查询每一个，如下所示:</p><pre class="jo jp jq jr fd lp lq lr ls aw lt bi"><span id="d0b0" class="lu jv ht lq b fi lv lw l lx ly"><strong class="lq hu">SELECT</strong> <!-- -->*</span><span id="4170" class="lu jv ht lq b fi lz lw l lx ly"><strong class="lq hu">FROM</strong> <!-- -->api.stock.`AAPL`</span><span id="0f50" class="lu jv ht lq b fi lz lw l lx ly">-- or</span><span id="0003" class="lu jv ht lq b fi lz lw l lx ly"><strong class="lq hu">SELECT</strong> <!-- -->*</span><span id="e27d" class="lu jv ht lq b fi lz lw l lx ly"><strong class="lq hu">FROM</strong> <!-- -->api.weather.`baltimore`</span></pre><h1 id="ce06" class="ju jv ht bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">配置连接</h1><p id="c824" class="pw-post-body-paragraph iq ir ht is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">接下来，您必须建立实际的连接。要使用教程中显示的COVID跟踪API示例，只需将下面的代码片段剪切并粘贴到<strong class="is hu">连接</strong>旁边的花括号中。</p><pre class="jo jp jq jr fd lp lq lr ls aw lt bi"><span id="963b" class="lu jv ht lq b fi lv lw l lx ly">"covid": {</span><span id="9628" class="lu jv ht lq b fi lz lw l lx ly">"url": "<a class="ae lo" href="https://covidtracking.com/api/v1/" rel="noopener ugc nofollow" target="_blank">https://covidtracking.com/api/v1/</a>",</span><span id="f628" class="lu jv ht lq b fi lz lw l lx ly">"method": "GET",</span><span id="a4cb" class="lu jv ht lq b fi lz lw l lx ly">"headers": <strong class="lq hu">null</strong>,</span><span id="4749" class="lu jv ht lq b fi lz lw l lx ly">"authType": "none",</span><span id="0c02" class="lu jv ht lq b fi lz lw l lx ly">"userName": <strong class="lq hu">null</strong>,</span><span id="f638" class="lu jv ht lq b fi lz lw l lx ly">"password": <strong class="lq hu">null</strong>,</span><span id="a98a" class="lu jv ht lq b fi lz lw l lx ly">"postBody": <strong class="lq hu">null</strong>,</span><span id="fe35" class="lu jv ht lq b fi lz lw l lx ly">"params": <strong class="lq hu">null</strong>,</span><span id="cdf3" class="lu jv ht lq b fi lz lw l lx ly">"dataPath": <strong class="lq hu">null</strong>,</span><span id="ecda" class="lu jv ht lq b fi lz lw l lx ly">"requireTail": <strong class="lq hu">true</strong></span><span id="3dcd" class="lu jv ht lq b fi lz lw l lx ly">}</span></pre><p id="3155" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如您所见，这些参数中的大部分可以留空。关键参数是URL参数，它显然是正在讨论的API的URL。</p><p id="7e3a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">演示中使用的完整配置如下所示:</p><pre class="jo jp jq jr fd lp lq lr ls aw lt bi"><span id="d138" class="lu jv ht lq b fi lv lw l lx ly">{</span><span id="a9b6" class="lu jv ht lq b fi lz lw l lx ly">"type": "http",</span><span id="6890" class="lu jv ht lq b fi lz lw l lx ly">"cacheResults": <strong class="lq hu">false</strong>,</span><span id="795a" class="lu jv ht lq b fi lz lw l lx ly">"connections": {</span><span id="2016" class="lu jv ht lq b fi lz lw l lx ly">"covid": {</span><span id="2579" class="lu jv ht lq b fi lz lw l lx ly">"url": "<a class="ae lo" href="https://covidtracking.com/api/v1/" rel="noopener ugc nofollow" target="_blank">https://covidtracking.com/api/v1/</a>",</span><span id="1078" class="lu jv ht lq b fi lz lw l lx ly">"method": "GET",</span><span id="1ec6" class="lu jv ht lq b fi lz lw l lx ly">"headers": <strong class="lq hu">null</strong>,</span><span id="8e71" class="lu jv ht lq b fi lz lw l lx ly">"authType": "none",</span><span id="fc95" class="lu jv ht lq b fi lz lw l lx ly">"userName": <strong class="lq hu">null</strong>,</span><span id="efec" class="lu jv ht lq b fi lz lw l lx ly">"password": <strong class="lq hu">null</strong>,</span><span id="ac7a" class="lu jv ht lq b fi lz lw l lx ly">"postBody": <strong class="lq hu">null</strong>,</span><span id="33e6" class="lu jv ht lq b fi lz lw l lx ly">"params": <strong class="lq hu">null</strong>,</span><span id="eb10" class="lu jv ht lq b fi lz lw l lx ly">"dataPath": <strong class="lq hu">null</strong>,</span><span id="11a7" class="lu jv ht lq b fi lz lw l lx ly">"requireTail": <strong class="lq hu">true</strong></span><span id="ee7b" class="lu jv ht lq b fi lz lw l lx ly">}</span><span id="027f" class="lu jv ht lq b fi lz lw l lx ly">},</span><span id="73c1" class="lu jv ht lq b fi lz lw l lx ly">"timeout": 0,</span><span id="9f0a" class="lu jv ht lq b fi lz lw l lx ly">"proxyHost": <strong class="lq hu">null</strong>,</span><span id="bd17" class="lu jv ht lq b fi lz lw l lx ly">"proxyPort": 0,</span><span id="8d39" class="lu jv ht lq b fi lz lw l lx ly">"proxyType": "direct",</span><span id="2603" class="lu jv ht lq b fi lz lw l lx ly">"proxyUsername": <strong class="lq hu">null</strong>,</span><span id="4abd" class="lu jv ht lq b fi lz lw l lx ly">"proxyPassword": <strong class="lq hu">null</strong>,</span><span id="f431" class="lu jv ht lq b fi lz lw l lx ly">"enabled": <strong class="lq hu">true</strong></span><span id="18e8" class="lu jv ht lq b fi lz lw l lx ly">}</span></pre><p id="316b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">连接配置中的其他选项使您能够连接到需要身份验证的API，以及启用各种优化，但是现在，我们可以将它们保留为空。你当然可以在上面链接的文档中读到它们。</p><h1 id="7a4e" class="ju jv ht bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">查询API</h1><p id="d550" class="pw-post-body-paragraph iq ir ht is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">现在您已经完成了配置设置，可以开始查询了。查询API和查询常规数据库表之间的唯一区别是FROM子句。在下面的例子中，您可以看到我用来查询COVID tracker API的基本查询。在这种情况下，FROM子句由用点分隔的三部分组成:</p><ol class=""><li id="3229" class="kx ky ht is b it iu ix iy jb kz jf la jj lb jn ma ld le lf bi translated">存储插件，在我们的例子中应该是api或者其他你称之为插件的东西</li><li id="14f3" class="kx ky ht is b it lg ix lh jb li jf lj jj lk jn ma ld le lf bi translated">连接名称。这是您在配置中指定的实际API连接的名称。</li><li id="d197" class="kx ky ht is b it lg ix lh jb li jf lj jj lk jn ma ld le lf bi translated">最后一个组件是任何表，或者您需要传递给API以获取数据的其他URL参数。COVID站点实际上有几个API，因此您可以为每个API创建单独的连接，或者将它包含在FROM子句中，如下所示。结果是这个文本被附加到URL，因此检索到的完整URL是:<a class="ae lo" href="https://covidtracking.com/api/v1/states/daily.json." rel="noopener ugc nofollow" target="_blank">https://covidtracking.com/api/v1/states/daily.json.</a></li></ol><pre class="jo jp jq jr fd lp lq lr ls aw lt bi"><span id="1941" class="lu jv ht lq b fi lv lw l lx ly"><strong class="lq hu">SELECT</strong> <!-- -->*</span><span id="20b7" class="lu jv ht lq b fi lz lw l lx ly"><strong class="lq hu">FROM</strong> <!-- -->api.covid.`states/daily.json`</span></pre><p id="22b5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦你完成了，你就可以执行查询，你应该得到结果！我已经用简单的API(如COVID tracker)和非常复杂的API(如JIRA)对此进行了测试，它在所有这些情况下都工作得很好。</p><h1 id="81e2" class="ju jv ht bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">结论</h1><p id="410b" class="pw-post-body-paragraph iq ir ht is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hb bi translated">总之，这个简短的教程演示了如何使用Drill从REST API中查询数据。当您将其与可视化工具(如Superset)结合使用时，您可以快速构建交互式仪表板。正如你从教程中看到的，这花了我大约15分钟的时间。我没有工程支持，只有钻机和超集的工作安装。如果你有任何问题，请在下面的评论中发表，或者发邮件给我。</p></div></div>    
</body>
</html>