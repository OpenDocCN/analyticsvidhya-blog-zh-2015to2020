<html>
<head>
<title/>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1/>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/apples-vision-framework-to-recognise-vehicle-number-plates-c6778e4529fb?source=collection_archive---------6-----------------------#2020-04-02">https://medium.com/analytics-vidhya/apples-vision-framework-to-recognise-vehicle-number-plates-c6778e4529fb?source=collection_archive---------6-----------------------#2020-04-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><p id="0279" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">苹果公司的视觉框架识别车辆牌照</p><p id="3626" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">这是一篇关于使用视觉框架通过iOS应用程序检测图像上的文本的短文。我使用<a class="ae if" rel="noopener" href="/@santoshreddyvuppala/how-i-built-a-number-plate-detector-using-just-firebasemlvision-framework-d066b3971262"> FirebaseML视觉框架</a>构建了一个类似的应用程序。使用Firebase框架的缺点是，您必须安装外部FirebaseML Vision依赖项，但是使用Apple的Vision框架，您可以准备好一切来使用SDK。我个人发现苹果的Vision框架结果优于FirebaseMLVision框架。</p><p id="3de7" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">这里是我的<a class="ae if" href="https://github.com/santoshvuppala/numberPlateRecUsingVision.git" rel="noopener ugc nofollow" target="_blank"> Github repo </a>的链接，你可以在这里找到这个项目的源代码。</p><p id="5022" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">我把帖子分成以下几个:<br/> 1。在Xcode <br/> 2中设置项目。关于愿景框架的一句话<br/> 3。使用视觉框架检测图像中的文本</p><p id="846a" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated"><strong class="hj ig">在Xcode中设置项目</strong></p><p id="57b7" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">打开Xcode，点击create new project，在iOS下一个屏幕选择Single View App，点击next。</p><figure class="ii ij ik il fd im er es paragraph-image"><div role="button" tabindex="0" class="in io di ip bf iq"><div class="er es ih"><img src="../Images/c201d84e74d5cc944ebee712dbe0d309.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JD2sAHAMOqUmWUyiEsTylw.png"/></div></div><figcaption class="it iu et er es iv iw bd b be z dx translated">在Xcode中创建新的单视图应用程序项目</figcaption></figure><p id="d5a3" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">为您的新项目选择选项，您可以不选中核心数据、UI和单元测试复选框。我使用故事板作为用户界面，你也可以使用SwiftUI，更多关于它的<a class="ae if" href="https://developer.apple.com/xcode/swiftui/" rel="noopener ugc nofollow" target="_blank">这里</a>。单击“下一步”,然后在本地计算机上保存项目以开始工作。</p><figure class="ii ij ik il fd im er es paragraph-image"><div role="button" tabindex="0" class="in io di ip bf iq"><div class="er es ix"><img src="../Images/821199848a7e233e356b0ee6944c3d9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yp7h7r8jWVLPxJgQKCbgLA.png"/></div></div></figure><p id="6909" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">您的项目工作区应该如下所示</p><figure class="ii ij ik il fd im er es paragraph-image"><div role="button" tabindex="0" class="in io di ip bf iq"><div class="er es iy"><img src="../Images/96d953781460da2189ef40b5ab28869e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B3U77Sfy5sPVu6o6kq2_lg.png"/></div></div></figure><p id="2813" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">现在，让我们向视图控制器添加一些用户界面元素。我已经添加了一个“拍照”功能，可以从照片库中加载图像(在我的例子中，因为我使用的是模拟器)，或者如果你在真实的iOS设备上运行该应用程序，可以从相机中加载图像。一个UIImageView来加载图像并在视图控制器上显示它，还有几个标签来显示图像中已识别的文本。(请注意，用户界面是基本的，你可以玩不同的风格，使应用程序看起来有趣。你可以在这里访问完整的源代码<a class="ae if" href="https://github.com/santoshvuppala/numberPlateRecUsingVision.git" rel="noopener ugc nofollow" target="_blank"/></p><figure class="ii ij ik il fd im er es paragraph-image"><div role="button" tabindex="0" class="in io di ip bf iq"><div class="er es iz"><img src="../Images/1c653d079919ed12e218f20210bf787e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_TfBXJlIkp-UNBjf6oPhtA.png"/></div></div></figure><p id="a4df" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated"><strong class="hj ig">关于愿景框架的一句话</strong></p><p id="8714" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">视觉框架应用计算机视觉算法对输入图像和视频执行各种任务。</p><p id="856b" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">框架可以处理的任务列表如下:</p><ol class=""><li id="e1ed" class="ja jb hi hj b hk hl ho hp hs jc hw jd ia je ie jf jg jh ji bi translated">人脸检测</li><li id="5601" class="ja jb hi hj b hk jj ho jk hs jl hw jm ia jn ie jf jg jh ji bi translated">地标检测</li><li id="ac6d" class="ja jb hi hj b hk jj ho jk hs jl hw jm ia jn ie jf jg jh ji bi translated">文本检测</li><li id="8c19" class="ja jb hi hj b hk jj ho jk hs jl hw jm ia jn ie jf jg jh ji bi translated">条形码识别</li><li id="9bff" class="ja jb hi hj b hk jj ho jk hs jl hw jm ia jn ie jf jg jh ji bi translated">光栅重合</li><li id="db16" class="ja jb hi hj b hk jj ho jk hs jl hw jm ia jn ie jf jg jh ji bi translated">常规特征跟踪</li><li id="c875" class="ja jb hi hj b hk jj ho jk hs jl hw jm ia jn ie jf jg jh ji bi translated">动物检测</li><li id="f118" class="ja jb hi hj b hk jj ho jk hs jl hw jm ia jn ie jf jg jh ji bi translated">目标检测</li><li id="121e" class="ja jb hi hj b hk jj ho jk hs jl hw jm ia jn ie jf jg jh ji bi translated">文本识别(我们对这个项目感兴趣)</li></ol><p id="b0ba" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">Vision还允许使用自定义CoreML模型来完成分类或对象检测等任务。</p><p id="2528" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">执行视觉任务基本上有3个主要步骤:</p><ol class=""><li id="0e95" class="ja jb hi hj b hk hl ho hp hs jc hw jd ia je ie jf jg jh ji bi translated">创建请求<br/>使用VNRequest及其派生类来提出请求。例如，为了检测图像中的文本，我们使用VNRecognizeTextRequest</li><li id="ea49" class="ja jb hi hj b hk jj ho jk hs jl hw jm ia jn ie jf jg jh ji bi translated">方法创建一个处理程序来处理一个或多个请求。在我们的例子中，对它执行()方法<br/> VNImageRequestHandler</li><li id="91d2" class="ja jb hi hj b hk jj ho jk hs jl hw jm ia jn ie jf jg jh ji bi translated">分析结果<br/>使用VNObesrvation及其派生类来处理正在执行的请求的结果。<br/>在我们的例子中，VNRecognizedTextObservation</li></ol><p id="a02d" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated"><a class="ae if" href="https://developer.apple.com/documentation/vision" rel="noopener ugc nofollow" target="_blank">这个</a>是一个很好的阅读框架的来源</p><p id="30bc" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated"><strong class="hj ig">使用视觉框架检测图像中的文本</strong></p><p id="3993" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">要开始使用框架，请将Vision框架导入到项目中。<br/>初始化并设置UIImagePickerController，以拾取或捕捉我们需要运行文本识别的图像，并准备好拾取图像完成时要处理的委托方法。</p><figure class="ii ij ik il fd im er es paragraph-image"><div role="button" tabindex="0" class="in io di ip bf iq"><div class="er es jo"><img src="../Images/9a3911e9f98a70299cc15083e3c175fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L8hg49VC38_u3VMj6JCpug.png"/></div></div></figure><p id="2d03" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">使用UIImagePickerController委托方法处理图像的使用。如果您想要将iOS设备的摄像头用作图像源，请将sourceTypes设置为。camera而不是. photoLibrary。不要忘记将委托设置为这个类，并包括UIImagePickerControllerDelegate和UINavigationControllerDelegate。didFinishPickingMediaWithInfo委托方法是我们处理捕获图像和执行文本识别视觉任务的地方。在这个方法中，使用UIImagePickerController的InfoKey来获取originalImage(因为我们已经在上面将allowsEditing设置为false)。</p><figure class="ii ij ik il fd im er es paragraph-image"><div role="button" tabindex="0" class="in io di ip bf iq"><div class="er es jo"><img src="../Images/2d94c70459725fdc3a1b0080530b27d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TLiswRGtpRu0YHDn6maCug.png"/></div></div></figure><p id="87ed" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">textRecognition方法用于识别图像中的文本。第一步是创建一个带有完成处理程序的VNRecognizeTextRequest，该处理程序将在成功执行该请求时被调用。可以设置附加属性来微调请求，recognitionLevel接受两种选择“准确”和“快速”，recognitionLanguages接受一个您需要检测文本的语言列表，usesLanguageCorrection是一个布尔值，表示您是否需要自动更正，最后您还可以添加一个自定义单词列表作为您的请求的参考。然后创建一个请求处理程序VNImageRequestHandler。对请求运行perform()以获得结果。</p><figure class="ii ij ik il fd im er es paragraph-image"><div role="button" tabindex="0" class="in io di ip bf iq"><div class="er es jp"><img src="../Images/df6dd17b093cf4ce93dc9715b402089e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zhGhwkLQQxdmksVmq8o96Q.png"/></div></div></figure><p id="6f70" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">请求的results属性包含观察，在我们的例子中是一个VNRecognizedTextObservation。因为可以检测到不止一个文本斑点，所以我们需要循环所有的观察。observations有一个boundingBox属性，该属性是一个CGRect，其中包含有关限制检测到的文本的矩形大小的信息。要显示边界框，您需要首先在bounding box上应用CGAffineTransform，将其缩放到正确的格式。</p><p id="196e" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">为了从图像中识别车牌，我使用了一个正则表达式模式来匹配印度的车牌格式，你可以在这里使用你选择的模式。</p><figure class="ii ij ik il fd im er es paragraph-image"><div role="button" tabindex="0" class="in io di ip bf iq"><div class="er es jq"><img src="../Images/b6fd54384f0a861c86f5ab4fb65a4a21.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*EK7_rfIgK4KUE7mao4RowA.png"/></div></div></figure><p id="b65c" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">下面是代码的结果。<br/>(注意:这是一个示例应用程序，探索文本识别如何使用Vision框架工作，我在一些地方使用了显式展开，错误处理不符合要求，请忽略这些)</p><p id="9f7e" class="pw-post-body-paragraph hg hh hi hj b hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie hb bi translated">如果你想尝试使用FirebaseMLVisoin的同一个车牌识别应用程序，请遵循<a class="ae if" rel="noopener" href="/@santoshreddyvuppala/how-i-built-a-number-plate-detector-using-just-firebasemlvision-framework-d066b3971262">这个</a>。</p></div></div>    
</body>
</html>