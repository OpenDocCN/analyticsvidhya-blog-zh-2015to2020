<html>
<head>
<title>Extracting Twitter Data Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python提取Twitter数据</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/extracting-twitter-data-using-python-9627f1d3b77a?source=collection_archive---------15-----------------------#2020-07-21">https://medium.com/analytics-vidhya/extracting-twitter-data-using-python-9627f1d3b77a?source=collection_archive---------15-----------------------#2020-07-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/7f3b7de7cca9452da1d9616b98d3d97b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vCyoBxUR_qOsKxl6AjIuPg.jpeg"/></div></div></figure><p id="7d07" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">文本分析，也称为文本挖掘，是一种从文本数据中提取价值、可操作信息和见解的途径和方法。它使用NLP和信息检索技术将非结构化数据转换为结构化形式，以便进一步用于分析，从这些数据中得出对最终用户有帮助的模式和见解。</p><p id="b829" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它的一些应用有:<br/>社交媒体分析<br/>欺诈检测<br/>垃圾邮件过滤</p><p id="f589" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Twitter是一个我们可以找到不同主题的大量数据的地方。这些数据可用于发现与特定关键词/标签相关的趋势，衡量品牌情感或收集关于新产品和服务的反馈。</p><p id="d271" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本帖中，我们将借助Python从twitter中提取数据</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jo"><img src="../Images/6b8bdf572530b2549ac6a6ae37cb897c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*COrmxmT8Uti3LF5SKmkrMg.png"/></div></figure><p id="f05e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">入门</strong></p><p id="444b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要开始，您需要做以下事情:</p><ol class=""><li id="f9a0" class="jt ju hi is b it iu ix iy jb jv jf jw jj jx jn jy jz ka kb bi translated">使用您的Twitter帐户，您将需要申请开发人员访问权限，然后创建一个应用程序，该应用程序将生成用于从Python访问Twitter的API凭证。</li><li id="170f" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated">如果您还没有Twitter帐户，请创建一个。</li><li id="fad7" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated">在<a class="ae kh" href="https://apps.twitter.com/" rel="noopener ugc nofollow" target="_blank">https://apps.twitter.com/</a>登录或创建一个Twitter账户。</li><li id="78f7" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated">创建新应用程序(右上角的按钮)</li><li id="dfbb" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated">用唯一的<strong class="is hj">名称、网站名称(如果没有，请使用占位符网站)和项目描述填写应用程序创建页面。接受条款和条件并进入下一页。</strong></li><li id="5a6f" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated">项目创建完成后，单击“密钥和访问令牌”选项卡。您现在应该能够看到您的<strong class="is hj">消费者密钥</strong>、<strong class="is hj">消费者密钥</strong>、<strong class="is hj">访问令牌密钥</strong>和<strong class="is hj">访问令牌密钥</strong>。</li><li id="853b" class="jt ju hi is b it kc ix kd jb ke jf kf jj kg jn jy jz ka kb bi translated">我们需要所有这些凭证，所以请确保打开此选项卡。</li></ol></div><div class="ab cl ki kj gp kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="hb hc hd he hf"><h2 id="4581" class="kp kq hi bd kr ks kt ku kv kw kx ky kz jb la lb lc jf ld le lf jj lg lh li lj bi translated"><strong class="ak">导入库</strong></h2><pre class="jp jq jr js fd lk ll lm ln aw lo bi"><span id="57e3" class="kp kq hi ll b fi lp lq l lr ls">from twython import Twython</span><span id="507e" class="kp kq hi ll b fi lt lq l lr ls">from textblob import TextBlob</span><span id="4a27" class="kp kq hi ll b fi lt lq l lr ls">import pandas as pd</span></pre><p id="56a8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">复制粘贴应用程序提供的凭证，并将其保存在以下变量中</p><pre class="jp jq jr js fd lk ll lm ln aw lo bi"><span id="3e43" class="kp kq hi ll b fi lp lq l lr ls">consumer_key = “wXXXXXXXXXXXXXXXXXXXXXXX1”</span><span id="382d" class="kp kq hi ll b fi lt lq l lr ls">consumer_secret = “qXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXh”</span><span id="efe0" class="kp kq hi ll b fi lt lq l lr ls">access_token = “9XXXXXXXX-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXi”</span><span id="0826" class="kp kq hi ll b fi lt lq l lr ls">access_token_secret = “kXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXT”</span></pre><p id="a69f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在是时候使用我们上面定义的凭证来创建我们的Twython实例了</p><pre class="jp jq jr js fd lk ll lm ln aw lo bi"><span id="41b2" class="kp kq hi ll b fi lp lq l lr ls">twitter = Twython(ConsumerKey, ConsumerSecret, AccessToken, AccessSecret)</span></pre><h2 id="ed61" class="kp kq hi bd kr ks kt ku kv kw kx ky kz jb la lb lc jf ld le lf jj lg lh li lj bi translated">主页时间线</h2><p id="7f30" class="pw-post-body-paragraph iq ir hi is b it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn hb bi translated">这将返回认证用户和您关注的用户发布的最新Tweets的集合</p><pre class="jp jq jr js fd lk ll lm ln aw lo bi"><span id="7205" class="kp kq hi ll b fi lp lq l lr ls">home_timeline = twitter.get_home_timeline()<br/>print(home_timeline)</span></pre><h2 id="11c4" class="kp kq hi bd kr ks kt ku kv kw kx ky kz jb la lb lc jf ld le lf jj lg lh li lj bi translated">用户时间线</h2><p id="213f" class="pw-post-body-paragraph iq ir hi is b it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn hb bi translated">这将返回你最近发布的推文的集合</p><pre class="jp jq jr js fd lk ll lm ln aw lo bi"><span id="f739" class="kp kq hi ll b fi lp lq l lr ls">my_timeline = twitter.get_user_timeline()</span></pre><p id="2366" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面的代码将只打印你的推文文本</p><pre class="jp jq jr js fd lk ll lm ln aw lo bi"><span id="5538" class="kp kq hi ll b fi lp lq l lr ls">for tweet in my_timeline:</span><span id="236c" class="kp kq hi ll b fi lt lq l lr ls">    print(tweet['text'])</span></pre><h2 id="8f1b" class="kp kq hi bd kr ks kt ku kv kw kx ky kz jb la lb lc jf ld le lf jj lg lh li lj bi translated">将推文转换成数据帧</h2><p id="b272" class="pw-post-body-paragraph iq ir hi is b it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn hb bi translated">这将把我们的推文文本转换成数据帧，然后我们可以使用它进行分析</p><pre class="jp jq jr js fd lk ll lm ln aw lo bi"><span id="2ef4" class="kp kq hi ll b fi lp lq l lr ls">home_df = pd.DataFrame(home_timeline)<br/>home_df.to_excel('Home_timeline.xlsx', index=False)</span><span id="0bc3" class="kp kq hi ll b fi lt lq l lr ls">print(home_df[['id','text']])</span></pre><h2 id="c4e8" class="kp kq hi bd kr ks kt ku kv kw kx ky kz jb la lb lc jf ld le lf jj lg lh li lj bi translated">搜索推文</h2><p id="1e73" class="pw-post-body-paragraph iq ir hi is b it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn hb bi translated">这将显示所有基于标签的推文，并返回所有使用这些关键词的推文</p><pre class="jp jq jr js fd lk ll lm ln aw lo bi"><span id="d7e6" class="kp kq hi ll b fi lp lq l lr ls">search = twitter.search(q="#covid #pakistan", count=10, tweet_mode="extended") <br/>#supply whatever keyword data you want in variable q<br/>#count represent number of tweets we want</span></pre><h2 id="bae2" class="kp kq hi bd kr ks kt ku kv kw kx ky kz jb la lb lc jf ld le lf jj lg lh li lj bi translated">按用户名发布推文</h2><p id="3554" class="pw-post-body-paragraph iq ir hi is b it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn hb bi translated">这将显示您在screen_name参数中输入的用户的所有tweets</p><pre class="jp jq jr js fd lk ll lm ln aw lo bi"><span id="cfb1" class="kp kq hi ll b fi lp lq l lr ls">twitter.show_user(screen_name="ImranKhanPTI")</span></pre><p id="4c5d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们将转换指定用户名发布的所有推文，并将其保存在数据框中</p><pre class="jp jq jr js fd lk ll lm ln aw lo bi"><span id="cc44" class="kp kq hi ll b fi lp lq l lr ls">user_timeline = twitter.get_user_timeline(screen_name="ImranKhanPTI",count=10, tweet_mode=’extended’)</span><span id="e82b" class="kp kq hi ll b fi lt lq l lr ls">usr_timeline = pd.DataFrame(user_timeline)<br/>usr_timeline.to_excel('MyTimelineData.xlsx', index=False)</span><span id="2bb6" class="kp kq hi ll b fi lt lq l lr ls">print(usr_timeline['full_text'])</span></pre><blockquote class="lz ma mb"><p id="6e06" class="iq ir mc is b it iu iv iw ix iy iz ja md jc jd je me jg jh ji mf jk jl jm jn hb bi translated"><em class="hi">确保使用“全文”,因为这个键包含整个tweet文本。</em></p></blockquote><p id="aae9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将tweets数据及其在twitter上发布的日期保存到一个列表中</p><pre class="jp jq jr js fd lk ll lm ln aw lo bi"><span id="c895" class="kp kq hi ll b fi lp lq l lr ls">alltweets = []</span><span id="2bee" class="kp kq hi ll b fi lt lq l lr ls">for status in user_timeline:</span><span id="eda8" class="kp kq hi ll b fi lt lq l lr ls">    newtweet = (status['full_text'], status['created_at'])</span><span id="cd4d" class="kp kq hi ll b fi lt lq l lr ls">    alltweets.append(newtweet)</span><span id="7564" class="kp kq hi ll b fi lt lq l lr ls">print(alltweets)</span></pre><p id="31db" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">使用TextBlob库将推文转换成另一种语言</strong></p><pre class="jp jq jr js fd lk ll lm ln aw lo bi"><span id="8ca2" class="kp kq hi ll b fi lp lq l lr ls">for i, tweet in enumerate(alltweets):</span><span id="5db1" class="kp kq hi ll b fi lt lq l lr ls">    (txt, time_date) = tweet</span><span id="d029" class="kp kq hi ll b fi lt lq l lr ls">    twt_blob = TextBlob(txt)</span><span id="47f0" class="kp kq hi ll b fi lt lq l lr ls">    lang = twt_blob.detect_language()</span><span id="0afc" class="kp kq hi ll b fi lt lq l lr ls">     print("\n — — ", str(i), " ", lang, " ", time_date, " —-")</span><span id="e722" class="kp kq hi ll b fi lt lq l lr ls">     if (lang == ‘ur’):</span><span id="a442" class="kp kq hi ll b fi lt lq l lr ls">        print(txt)</span><span id="2d19" class="kp kq hi ll b fi lt lq l lr ls">        print(twt_blob.translate(to=’en’))</span></pre><h1 id="b715" class="mg kq hi bd kr mh mi mj kv mk ml mm kz mn mo mp lc mq mr ms lf mt mu mv li mw bi translated">结论</h1><p id="1cf3" class="pw-post-body-paragraph iq ir hi is b it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn hb bi translated">Twitter的API在数据挖掘应用中非常有用，可以提供对公众意见的大量洞察。我鼓励你阅读更多关于<a class="ae kh" href="https://twython.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> Twython </a>和其他相关的图书馆，例如<a class="ae kh" href="http://docs.tweepy.org/en/v3.5.0/api.html" rel="noopener ugc nofollow" target="_blank"> Tweepy </a></p><p id="c807" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这篇文章中，我们介绍了访问twitter数据并将其保存在电子表格中的基础知识，以及如何使用其他有用的功能从Twitter中获得更多见解。</p><blockquote class="lz ma mb"><p id="6287" class="iq ir mc is b it iu iv iw ix iy iz ja md jc jd je me jg jh ji mf jk jl jm jn hb bi translated"><em class="hi">在我的博客和YouTube频道查看更多文章<br/></em><strong class="is hj"><em class="hi">http://uzairadamjee.com/blog<br/></em></strong><a class="ae kh" href="https://www.youtube.com/channel/UCCxSpt0KMn17sMn8bQxWZXA" rel="noopener ugc nofollow" target="_blank"><strong class="is hj"><em class="hi">https://www.youtube.com/channel/UCCxSpt0KMn17sMn8bQxWZXA</em></strong></a></p></blockquote><p id="f2dd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的教程到此结束。感谢您的阅读:)</p></div></div>    
</body>
</html>