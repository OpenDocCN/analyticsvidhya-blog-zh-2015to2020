<html>
<head>
<title>Feature Engineering — How to find Feature importance scores (Growth Hack)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">特征工程——如何找到特征重要性分数(增长黑客)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/feature-engineering-how-to-find-feature-importance-score-of-all-features-and-then-build-model-a8508a3edb33?source=collection_archive---------11-----------------------#2019-11-19">https://medium.com/analytics-vidhya/feature-engineering-how-to-find-feature-importance-score-of-all-features-and-then-build-model-a8508a3edb33?source=collection_archive---------11-----------------------#2019-11-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="2190" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">或者特征imp。IrisDataset上的分数</h2></div><p id="2b1b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">特征工程是一个非常容易被误解的术语，当我第一次开始制作模型时，我也对它感到困惑，并认为这意味着在决定构建哪些特征和跳过哪些特征时的一种方法或一系列实践或工具。</p><figure class="jt ju jv jw fd jx"><div class="bz dy l di"><div class="jy jz l"/></div><figcaption class="ka kb et er es kc kd bd b be z dx translated">迷茫？</figcaption></figure><p id="89d7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但随着我更多地围绕它工作，并开始处理真实世界的数据点，我意识到决定选择什么特征，然后对它们进行特征工程是一个“根据数据集决定”的问题，而不仅仅是缩放特征集或在其上运行一些功能。</p><p id="def4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有时，您将两个特征组合起来，使新特征(如每户的房间数和每邻居的房间数)成为每邻居的房间数，有时，您从另一个特征中减去一个特征，而其他时候，您只从30个特征中选择最好的8个，因为其他22个特征对您的决策影响不到0.01%。</p><p id="b25c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有人称之为艺术多于科学，我认为他们是对的。</p><figure class="jt ju jv jw fd jx"><div class="bz dy l di"><div class="ke jz l"/></div></figure><p id="3f0f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">特征工程是一个多样化的大得多的主题，但是有一个小而简洁的技巧是我在处理一些模型时发现的，并且发现它对我试图构建的模型非常有用。</p><h1 id="aaba" class="kf kg hi bd kh ki kj kk kl km kn ko kp io kq ip kr ir ks is kt iu ku iv kv kw bi translated">这是我的诀窍</h1><p id="9ce4" class="pw-post-body-paragraph ix iy hi iz b ja kx ij jc jd ky im jf jg kz ji jj jk la jm jn jo lb jq jr js hb bi translated">每当我在分类器上运行模型并训练我的分类器时，我通常更喜欢将随机森林作为首选分类器，不仅因为它是透明的，可以向我显示机器是如何破坏我的模型的。(见下文)</p><div class="lc ld ez fb le lf"><a rel="noopener follow" target="_blank" href="/@madanflies/decisiontree-classifier-working-on-moons-dataset-using-gridsearchcv-to-find-best-hyperparameters-ede24a06b489"><div class="lg ab dw"><div class="lh ab li cl cj lj"><h2 class="bd hj fi z dy lk ea eb ll ed ef hh bi translated">决策树分类器—使用GridSearchCV处理Moons数据集，以找到最佳超参数</h2><div class="lm l"><h3 class="bd b fi z dy lk ea eb ll ed ef dx translated">决策树是一种很好的分类方法，不像随机森林，它们是透明的或白盒…</h3></div><div class="ln l"><p class="bd b fp z dy lk ea eb ll ed ef dx translated">medium.com</p></div></div><div class="lo l"><div class="lp l lq lr ls lo lt lu lf"/></div></div></a></div><p id="d6a0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">还因为我可以检查整个模型的特征重要性分数，我可以选择几个模型，然后计算它们的重要性分数，以找到机器实际挖掘的内容。</p><p id="5af5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">例如，如果我正在对住房数据集进行要素重要性评分，我的分数将为</p><pre class="jt ju jv jw fd lv lw lx ly aw lz bi"><span id="2fde" class="ma kg hi lw b fi mb mc l md me">Rooms (unit) 0.09805484876235299<br/>Neighbourhood (km) 0.021686162123673226<br/>Median income ($) 0.44874930874833113<br/>Garden area (cm) 0.43150968036564236</span></pre><p id="a813" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这代表了</p><pre class="jt ju jv jw fd lv lw lx ly aw lz bi"><span id="dffc" class="ma kg hi lw b fi mb mc l md me">Rooms 9.8%<br/>Neighbourhood 2.1%<br/>Median income 44.8%<br/>Garden area (cm) 43.1%</span></pre><p id="49f1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这说明中值收入和花园面积是最重要的特征，而邻域是最弱的特征类。</p><h2 id="ec79" class="ma kg hi bd kh mf mg mh kl mi mj mk kp jg ml mm kr jk mn mo kt jo mp mq kv mr bi translated">我是怎么做到的？</h2><p id="6b65" class="pw-post-body-paragraph ix iy hi iz b ja kx ij jc jd ky im jf jg kz ji jj jk la jm jn jo lb jq jr js hb bi translated">让我展示给你看。</p><p id="7082" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在你训练了你的随机森林分类器或回归器之后</p><pre class="jt ju jv jw fd lv lw lx ly aw lz bi"><span id="a412" class="ma kg hi lw b fi mb mc l md me">rnd_clf = RandomForestClassifier(n_estimators=500, n_jobs=-1)</span></pre><p id="5a26" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你已经在这方面训练了你的数据</p><pre class="jt ju jv jw fd lv lw lx ly aw lz bi"><span id="ec71" class="ma kg hi lw b fi mb mc l md me">rnd_clf.fit(X_train,y_train)</span></pre><p id="0ec3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以运行feature_importances_ like</p><pre class="jt ju jv jw fd lv lw lx ly aw lz bi"><span id="0882" class="ma kg hi lw b fi mb mc l md me">for score in rnd_clf.feature_importances_: <br/>     print score</span></pre><p id="63a0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于Iris数据集，使用上述函数得到的特征重要性分数为</p><pre class="jt ju jv jw fd lv lw lx ly aw lz bi"><span id="4c50" class="ma kg hi lw b fi mb mc l md me">sepal length (cm) 0.09805484876235299<br/>sepal width (cm) 0.021686162123673226<br/>petal length (cm) 0.44874930874833113<br/>petal width (cm) 0.43150968036564236</span></pre><p id="186c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您想自己运行代码，只需将以下代码复制粘贴到您的笔记本中-</p><pre class="jt ju jv jw fd lv lw lx ly aw lz bi"><span id="4d43" class="ma kg hi lw b fi mb mc l md me">from sklearn.datasets import load_iris<br/>from sklearn.ensemble import RandomForestClassifier</span><span id="2318" class="ma kg hi lw b fi ms mc l md me">iris = load_iris()<br/>rnd_clf = RandomForestClassifier(n_estimators=500, n_jobs=-1)</span><span id="d369" class="ma kg hi lw b fi ms mc l md me">X=iris[‘data’]<br/>y=iris[‘target’]<br/>rnd_clf.fit(X,y)</span><span id="c365" class="ma kg hi lw b fi ms mc l md me">Feature_score=zip(iris[“feature_names”], rnd_clf.feature_importances_)</span><span id="f237" class="ma kg hi lw b fi ms mc l md me">for name, score in Feature_score:<br/> print(name, score)</span></pre><p id="24c4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">瞧，你有一个所有特征分数的列表。</p><blockquote class="mt mu mv"><p id="4e62" class="ix iy mw iz b ja jb ij jc jd je im jf mx jh ji jj my jl jm jn mz jp jq jr js hb bi translated">诀窍在于，低百分比特性没有价值，不值得花时间进行清理、缩放和标准化，因此，您可以将它们组合在一起，形成一个新特性，然后再次找到特性重要性分数，或者您可以完全忽略它们。</p></blockquote><p id="ed95" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦您有较少的功能需要处理，您就可以获得更好的模型分数，并且总体上构建更具可伸缩性的模型。</p><p id="f6ab" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以对影像以及MNIST或类似数据集进行同样的操作。</p><p id="6926" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你正在寻找一本特性工程指南，我强烈推荐Aurelion Geron，因为与整个主题相比，这篇文章只是品酒。</p><p id="dcfa" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">希望这个技巧能帮助你更快地做出更高可信度的模型。</p><p id="9014" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">鳍。</p></div></div>    
</body>
</html>