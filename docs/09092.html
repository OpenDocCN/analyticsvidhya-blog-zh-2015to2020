<html>
<head>
<title>PayPal Subscription in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React中的PayPal订阅</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/paypal-subscription-in-react-1121c39b26be?source=collection_archive---------4-----------------------#2020-08-25">https://medium.com/analytics-vidhya/paypal-subscription-in-react-1121c39b26be?source=collection_archive---------4-----------------------#2020-08-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="a3e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">集成贝宝订阅反应使用反应-贝宝-按钮-v2。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/893d2f710f7a54cb123df69d66b06ac3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0EjWRL1oQcZmNY4cDdj3iQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">PayPal标志</figcaption></figure><p id="40c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这篇文章主要讲述如何将React门户整合到PayPal支付中。这将是一个循序渐进的指南，以整合贝宝订阅反应。下面我用过PayPal的沙盒账户。为此，您可以使用您的Live Business帐户。我会建议使用PayPal沙盒帐户进行测试，然后将密钥升级到PayPal帐户密钥。沙盒账户是PayPal的免费账户，用于模拟现场交易。如果你不知道它，不要担心，我会告诉你如何创建它的一步一步的过程。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jt"><img src="../Images/556987a048f06af157c747c13b531250.png" data-original-src="https://miro.medium.com/v2/resize:fit:716/format:webp/1*fRFRnEBZ00TU1Lagv254kQ.png"/></div></figure><p id="0753" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们开始吧…</p><h1 id="6d5a" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated"><strong class="ak">创建沙盒帐户:</strong></h1><p id="c404" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated"><strong class="ih hj">如果你已经有了，你可以跳过这一步。</strong></p><p id="9c2f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面我将阐明你如何获得你的工作沙盒的公司和个人帐户。</p><p id="abe3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一步:登录https://developer.paypal.com/<a class="ae kx" href="https://developer.paypal.com/" rel="noopener ugc nofollow" target="_blank"/></p><p id="13e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第二步:导航到沙盒-&gt;账户-&gt;创建账户(<a class="ae kx" href="https://developer.paypal.com/developer/accounts/" rel="noopener ugc nofollow" target="_blank">https://developer.paypal.com/developer/accounts/</a>)</p><p id="7ad7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您的工作沙盒的公司和个人帐户。第二步:导航到沙盒-&gt;帐户-&gt;创建帐户(<a class="ae kx" href="https://developer.paypal.com/developer/accounts/" rel="noopener ugc nofollow" target="_blank">https://developer.paypal.com/developer/accounts/</a>)</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ky"><img src="../Images/11cffa1ef12bfa90a318ab7ab38e1a8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QPksWVvy8dU6DnF3UdNAFg.png"/></div></div></figure><p id="05ef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单击创建帐户创建沙盒帐户。</p><p id="4251" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第三步:选择公司账户和国家/地区。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kz"><img src="../Images/04943efc46c6e580a8e15f674b622bd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZJ7s0kVqQb1yNU1HShq3-w.png"/></div></div></figure><p id="d6a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您的企业帐户已创建。</p><p id="2a65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第四步:创建帐户后，点击…--&gt;查看/编辑帐户，查看/修改帐户密码并查看其他帐户详细信息。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es la"><img src="../Images/90cd040be8a97576c74dc1520c33bd87.png" data-original-src="https://miro.medium.com/v2/resize:fit:342/format:webp/1*ohpP48dSpV0nNFQge0B84Q.png"/></div></figure><p id="eed5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">按照相同的步骤创建一个可用于模拟交易的个人账户。</p><p id="b91f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第五步:一旦创建了商业帐户，导航到我的应用和凭证(<a class="ae kx" href="https://developer.paypal.com/developer/applications/" rel="noopener ugc nofollow" target="_blank">https://developer.paypal.com/developer/applications/</a>)来生成应用，并获取其客户端ID和密钥。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lb"><img src="../Images/1f5bcd3b1d34dd7e9ee69c00f5d936eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*424II9bW7w5xTM8KoriFWw.png"/></div></div></figure><p id="b429" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第6步:给出应用程序的名称，并选择以前创建的商业帐户。保存其客户端ID和密钥以供将来参考</p></div><div class="ab cl lc ld gp le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="hb hc hd he hf"><h1 id="9b36" class="ju jv hi bd jw jx lj jz ka kb lk kd ke kf ll kh ki kj lm kl km kn ln kp kq kr bi translated"><strong class="ak">设置认购计划</strong></h1><h2 id="a3cf" class="lo jv hi bd jw lp lq lr ka ls lt lu ke iq lv lw ki iu lx ly km iy lz ma kq mb bi translated"><strong class="ak">如果您已经拥有订阅产品的计划id，您可以跳过此步骤。</strong></h2><p id="8176" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated"><strong class="ih hj">第一步:创建产品:</strong></p><p id="3cc8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们必须从PayPal仪表板创建产品。使用上面创建的商业帐户凭证登录到<a class="ae kx" href="https://www.sandbox.paypal.com/" rel="noopener ugc nofollow" target="_blank">https://www.sandbox.paypal.com/</a>。</p><p id="0aee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">导航至<strong class="ih hj">支付&amp;获得支付- &gt;订阅- &gt;订阅计划- &gt;创建计划。</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mc"><img src="../Images/d0449c130bb902ef5c2634c298802b34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D21dp0H2-ucPE6mUO8j6Hg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">管理订阅登录页面</figcaption></figure><p id="fb65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您有任何现有的产品，它会列在那里(例如银)。您可以单击“创建订阅产品”,然后按照步骤创建您想让用户订阅的产品。填写特定于产品的详细信息。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es md"><img src="../Images/3d79bfb16c243ff8ed15b5427177448c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oGHObaBXuuOxel9wOBHd8A.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">产品说明</figcaption></figure><p id="498a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以输入您的产品名称、产品描述、产品ID、产品类型、行业类别。产品页面URL是您的客户在网站上找到您的订购产品的地方。接下来是产品图片网址。在这里，产品名称和产品类别仅是必需的。其余所有字段都是可选的。创建产品后，你必须选择产品并创建一个计划。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es me"><img src="../Images/1af58087ca3d619e3ca088ad409fd1db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1370/format:webp/1*tHtYxOUxqBqBjRwQB26l7A.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">选择产品</figcaption></figure><p id="3d1d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">选择您想要提供的产品，然后单击“下一步”创建计划。</p><p id="a632" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第二步:创建计划:</strong></p><p id="b4f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建产品后，您需要创建一个计划，该计划将指定交易发生的持续时间，该款项将自动从客户的PayPal帐户中扣除。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mf"><img src="../Images/8238d5367b78069142a3a482acb64999.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CQusiLIlTKm1v-RwRvpNBg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">订阅计划类型</figcaption></figure><p id="670f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你必须选择你想提供什么样的方案(固定价格/数量价格)。固定定价是指您的价格是固定的，在下一个计费周期开始时，将从客户的帐户中扣除固定金额。数量定价是根据所购买产品的数量来计算价格。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mg"><img src="../Images/c7515682919eacc5ddbb3ca2953118e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1390/format:webp/1*murpBabV_tBt1FCZ1upmsg.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">计划描述</figcaption></figure><p id="aeda" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您必须给出计划名称(每月、每季度、每年等等)。另外，给出计划描述。这将使客户了解一旦订阅，这笔钱将从他们的帐户中扣除的持续时间。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mh"><img src="../Images/0be358e4107cff79691d7f4db4debb7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GTnZxSigGGoq3MjGbDeHUg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">计划详情</figcaption></figure><p id="32ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，指定产品的价格和计费周期。在这里，您可以配置扣除价格的持续时间、计税、错过的计费周期等。同样，这是一个总的商业决策，交易将如何发生。指定所有详细信息后，单击下一步。</p><p id="7747" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第三步:查看并保存</strong></p><p id="dd65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您的产品和计划创建完毕。下一步是启动您的计划并在代码中实现它。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mi"><img src="../Images/ab7a4967d7effee415590256d233f034.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*noLmXd6MlqY_DvaT8cQRRg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">计划审核页面</figcaption></figure><p id="2c8f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以查看您的产品和创建的计划。一旦一切正常，你就可以开始你的计划了。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mj"><img src="../Images/f63e1aa82686297f46cef39ea8171df4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DpXYs4FRWoREVlH_zdQYjQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">设计按钮的样式</figcaption></figure><p id="d668" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一步是造型，你希望贝宝按钮出现在你的网站上。选择所需的按钮类型和颜色，并复制代码。复制的代码将如下所示:</p><pre class="je jf jg jh fd mk ml mm mn aw mo bi"><span id="8043" class="lo jv hi ml b fi mp mq l mr ms">&lt;div id="paypal-button-container"&gt;&lt;/div&gt;<br/>&lt;script src="<a class="ae kx" href="https://www.paypal.com/sdk/js?client-id=AZcj9OpqA33vw9X8ojxvNlautgwQTFAp1-dro9XoGlySYebZu7brLVzWj861WPP6KGJQSLAY61MUm78x&amp;vault=true" rel="noopener ugc nofollow" target="_blank">https://www.paypal.com/sdk/js?client-id=&lt;client-id&gt;&amp;vault=true</a>" data-sdk-integration-source="button-factory"&gt;&lt;/script&gt;<br/>&lt;script&gt;<br/>  paypal.Buttons({<br/>      style: {<br/>          shape: 'rect',<br/>          color: 'blue',<br/>          layout: 'horizontal',<br/>          label: 'subscribe',<br/>          tagline: true<br/>      },<br/>      createSubscription: function(data, actions) {<br/>        return actions.subscription.create({<br/>          'plan_id': '&lt;Plan-id&gt;'<br/>        });<br/>      },<br/>      onApprove: function(data, actions) {<br/>        alert(data.subscriptionID);<br/>      }<br/>  }).render('#paypal-button-container');<br/>&lt;/script&gt;</span></pre><p id="d267" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是一个. js代码。你可以直接把它放在你的普通JS项目中并执行它。它会运行良好。但是，我将向您展示如何修改这段代码并将其集成到react项目中。获取计划id并保存以备后用。</p></div><div class="ab cl lc ld gp le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="hb hc hd he hf"><p id="1576" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">设置React代码库</strong></p><p id="fa86" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">设置react项目。你可以拿https://github.com/Richabhu/react-paypal-subscription的代码给你参考。</p><p id="c86f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们开始吧...</p><p id="28e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装所需的依赖项:</p><pre class="je jf jg jh fd mk ml mm mn aw mo bi"><span id="5f7c" class="lo jv hi ml b fi mp mq l mr ms">npx create-react-app subscription-paypal<br/>cd subscription-paypal<br/>npm install react-paypal-button-v2 --save</span></pre><p id="6975" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，一旦设置就绪，检查代码是否正在运行。</p><pre class="je jf jg jh fd mk ml mm mn aw mo bi"><span id="0417" class="lo jv hi ml b fi mp mq l mr ms">npm start</span></pre><p id="2836" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">去浏览器查一下<a class="ae kx" href="http://localhost:3000." rel="noopener ugc nofollow" target="_blank"> http://localhost:3000。</a>您应该会看到react应用程序正在运行。</p><p id="9a5c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，用下面的代码替换src/App.js:</p><pre class="je jf jg jh fd mk ml mm mn aw mo bi"><span id="94bb" class="lo jv hi ml b fi mp mq l mr ms">import React from 'react';<br/>import logo from './logo.svg';<br/>import './App.css';<br/>import PayPalBtn from './components/PayPalBtn'</span><span id="29a5" class="lo jv hi ml b fi mt mq l mr ms">const paypalSubscribe = (data, actions) =&gt; {<br/>return actions.subscription.create({<br/>'plan_id': "&lt;plan-id&gt;",<br/>});<br/>};</span><span id="fc01" class="lo jv hi ml b fi mt mq l mr ms">const paypalOnError = (err) =&gt; {<br/>console.log("Error")<br/>}</span><span id="0c49" class="lo jv hi ml b fi mt mq l mr ms">const paypalOnApprove = (data, detail) =&gt; {<br/>// call the backend api to store transaction details<br/>console.log("Payapl approved")<br/>console.log(data.subscriptionID)<br/>};</span><span id="a71e" class="lo jv hi ml b fi mt mq l mr ms">function App() {<br/>return (<br/>&lt;div className="App"&gt;<br/>&lt;PayPalBtn<br/>amount = "&lt;amount&gt;"<br/>currency = "USD"<br/>createSubscription={paypalSubscribe}<br/>onApprove={paypalOnApprove}<br/>catchError={paypalOnError}<br/>onError={paypalOnError}<br/>onCancel={paypalOnError}<br/>/&gt;<br/>&lt;/div&gt;<br/>);<br/>}</span><span id="8de0" class="lo jv hi ml b fi mt mq l mr ms">export default App;</span></pre><p id="d8d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将<plan-id>替换为实际计划id，将<amount>替换为实际金额。</amount></plan-id></p><p id="adc2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">让我们试着理解这里发生了什么:</strong></p><p id="3e93" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在执行react应用程序时，src/App.js的内容将显示在网站上。</p><pre class="je jf jg jh fd mk ml mm mn aw mo bi"><span id="5069" class="lo jv hi ml b fi mp mq l mr ms">&lt;PayPalBtn<br/>amount = "&lt;amount&gt;"<br/>currency = "USD"<br/>createSubscription={paypalSubscribe}<br/>onApprove={paypalOnApprove}<br/>catchError={paypalOnError}<br/>onError={paypalOnError}<br/>onCancel={paypalOnError}<br/>/&gt;</span></pre><p id="8b6f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">PayPalBtn是我们将在后期放入的一个组件。该组件将在仪表板上显示按钮图标。订阅的实际创建将由createSubscription事件处理程序处理。卖方批准付款后，将调用onApprove事件处理程序。如果客户自己在交易中途取消订阅，将由onCancel事件处理程序处理。事务期间的错误由catchError和onError事件处理程序处理。</p><pre class="je jf jg jh fd mk ml mm mn aw mo bi"><span id="92d2" class="lo jv hi ml b fi mp mq l mr ms">const paypalSubscribe = (data, actions) =&gt; {<br/>return actions.subscription.create({<br/>'plan_id': "&lt;plan-id&gt;",<br/>});<br/>};</span></pre><p id="b508" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">paypalSubscribe将向PayPal创建一个与客户对应的实际订阅请求。</p><pre class="je jf jg jh fd mk ml mm mn aw mo bi"><span id="39e6" class="lo jv hi ml b fi mp mq l mr ms">const paypalOnApprove = (data, detail) =&gt; {<br/>// call the backend api to store transaction details<br/>console.log("Payapl approved")<br/>console.log(data.subscriptionID)<br/>};</span></pre><p id="44a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">卖方批准付款后，将调用paypalOnApprove函数。在这里，可以向后端API发出请求，将详细信息存储在数据库中。</p><p id="94f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们创建react组件，它将在仪表板上实际显示PayPal按钮。创建src/components/PayPalBtn.js。项目结构如下:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mu"><img src="../Images/52009dfbec3c1ca99c11f98de2a1275d.png" data-original-src="https://miro.medium.com/v2/resize:fit:604/format:webp/1*KhbyYjNT7nLyvhu1pQ4wBg.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">项目结构</figcaption></figure><p id="cf79" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们创建实际的PayPal按钮来显示在仪表板上。</p><pre class="je jf jg jh fd mk ml mm mn aw mo bi"><span id="3d81" class="lo jv hi ml b fi mp mq l mr ms">import { PayPalButton } from "react-paypal-button-v2";<br/>import React from 'react';</span><span id="f2e4" class="lo jv hi ml b fi mt mq l mr ms">export function PayPalBtn(props) {<br/>const { amount, currency, createSubscription, onApprove, catchError,onError, onCancel} = props;<br/>const paypalKey = "&lt;paypal-client-id&gt;"</span><span id="8620" class="lo jv hi ml b fi mt mq l mr ms">return (<br/>&lt;PayPalButton<br/>amount={amount}<br/>currency={currency}<br/>createSubscription={(data, details) =&gt; createSubscription(data, details)}<br/>onApprove={(data, details) =&gt; onApprove(data, details)}<br/>onError={(err) =&gt; onError(err)}<br/>catchError={(err) =&gt; catchError(err)}<br/>onCancel={(err) =&gt; onCancel(err)}<br/>options={{<br/>clientId: paypalKey,<br/>vault:true<br/>}}<br/>style={{<br/>shape: 'rect',<br/>color: 'blue',<br/>layout: 'horizontal',<br/>label: 'subscribe',<br/>}}<br/>/&gt;<br/>);<br/>}</span><span id="97e7" class="lo jv hi ml b fi mt mq l mr ms">export default PayPalBtn;</span></pre><p id="deef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在仪表板上输入<paypal-client-id>进入。您可以从仪表板复制的源代码中复制样式，并将其粘贴到这里以获得相同的按钮。</paypal-client-id></p><p id="8956" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完成设置后，运行以下命令来运行应用程序。</p><pre class="je jf jg jh fd mk ml mm mn aw mo bi"><span id="201d" class="lo jv hi ml b fi mp mq l mr ms">npm start</span></pre><p id="cba7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该应用程序将在<a class="ae kx" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000/ </a>上运行</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mv"><img src="../Images/3f902a803977d5dbb9465e13bba7123d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FLNrcsWzitWNBYcHUX32_Q.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">登录页面</figcaption></figure><p id="8ddf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击PayPal订阅按钮，PayPal登录页面打开。输入详细信息并订阅产品。付款将从你的账户中扣除。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mw"><img src="../Images/78bcf917964e0226acfe32cf27e6f10a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UThc2mUknarXmrKpVh2zcg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">点击按钮后的PayPal登录页面</figcaption></figure><p id="434d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:如果您使用它进行测试，请在沙箱中创建一个个人帐户，并从该帐户登录以查看交易。</p><p id="5a21" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要将其集成到您现有的代码库中，请创建一个单独的组件，并将src /App.js代码放在该组件中，并在您想要集成的位置调用该组件。</p></div></div>    
</body>
</html>