<html>
<head>
<title>Exception Handling</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">异常处理</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/exception-handling-3bfdec867bc0?source=collection_archive---------20-----------------------#2020-10-08">https://medium.com/analytics-vidhya/exception-handling-3bfdec867bc0?source=collection_archive---------20-----------------------#2020-10-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/f7cb6e965a6af023b2f32dab7cb75ea0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*umZT1rJPwQ_TvVACRlq9Cw.png"/></div></div></figure><div class=""/><p id="64fd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">错误有时是由于没有遵循正确的语言语法，有时是由于其他原因，有时也是用户为了处理错误而产生的。错误处理增加了代码的健壮性，防止了可能导致程序以不受控制的方式退出的潜在故障。</p><p id="c527" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">由于没有遵循语言的正确语法而导致的错误被称为语法错误或解析错误。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es jo"><img src="../Images/88605a2f91c16bd2e2e776496a64e138.png" data-original-src="https://miro.medium.com/v2/resize:fit:434/format:webp/1*1kl-NYL8d6SxQ3WIRWPHYQ.png"/></div></figure><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="765a" class="jy jz ht ju b fi ka kb l kc kd"><strong class="ju hu">if</strong> a&lt;3</span><span id="c42b" class="jy jz ht ju b fi ke kb l kc kd"><strong class="ju hu">SyntaxError:</strong> invalid syntax</span></pre><p id="9283" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">错误也可能发生在运行时，这些被称为异常。例如，当我们想打开某个不存在的文件时(FileNotFoundError)，用零除一个数时(ZeroDivisionError)，等等。由于运行时发生错误，python 创建了一个异常对象。如果处理不当，它会持久化对该错误的回溯，以及一些关于错误发生原因的详细描述。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="7806" class="jy jz ht ju b fi ka kb l kc kd"><strong class="ju hu">dir</strong>(__builtins__)</span></pre><h1 id="1e9d" class="kf jz ht bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">尝试，除了和最后</h1><p id="e1bd" class="pw-post-body-paragraph iq ir ht is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hb bi translated">Python 有如此多的内置异常，当程序出错时会输出一个错误。当这些错误发生时，它会导致程序停止并把它传递给调用进程，直到它被处理，否则我们的程序将崩溃。</p><p id="a7a8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">例如，如果函数 school_info 调用函数 teacher_info，后者调用另一个函数 student_info，并且函数 student_info 中出现异常，如果它没有在 student_info 中处理，那么它将传递给 teacher_info，然后传递给 school_info。如果从来没有处理一个错误信息是分裂出来的，我们的程序来了一个突然意外停止。</p><h1 id="3ae8" class="kf jz ht bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">在 Python 中捕获异常</h1><p id="60e9" class="pw-post-body-paragraph iq ir ht is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hb bi translated">异常可以通过 try except 和 finally block 来处理，这些关键操作会引发保存在 try 子句中的异常，处理异常的代码写在 except 子句中。让我们看一个例子:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="0177" class="jy jz ht ju b fi ka kb l kc kd"><strong class="ju hu">import</strong> sys <br/><strong class="ju hu">list</strong>=['boy', 'cat',0 ,14.3]<br/><strong class="ju hu">for</strong> entry <strong class="ju hu">in</strong> <strong class="ju hu">list</strong>:<br/>    <br/>    <strong class="ju hu">try</strong>:<br/>        <strong class="ju hu">print</strong>("the entry is:" , entry)<br/>        r=1/int(entry)<br/>    except:<br/>        <strong class="ju hu">print</strong>("Hey a " , sys.exc_info() [0],"exception occured")<br/>        <strong class="ju hu">print</strong>("next entry please!!!")<br/>        <strong class="ju hu">print</strong>("***********************************************************************************")<br/><strong class="ju hu">print</strong>("the recipocal of the entry is ",r)</span><span id="ca5e" class="jy jz ht ju b fi ke kb l kc kd"><strong class="ju hu">out</strong>[]: the entry <strong class="ju hu">is</strong>: boy</span><span id="b503" class="jy jz ht ju b fi ke kb l kc kd">Hey a  &lt;<strong class="ju hu">class</strong> '<strong class="ju hu">ValueError</strong>'&gt; <strong class="ju hu">exception</strong> <strong class="ju hu">occured</strong><br/><strong class="ju hu">next</strong> <strong class="ju hu">entry</strong> <strong class="ju hu">please</strong>!!!<br/>***********************************************************************************<br/><strong class="ju hu">the</strong> <strong class="ju hu">entry</strong> <strong class="ju hu">is</strong>: <strong class="ju hu">cat</strong><br/><strong class="ju hu">Hey</strong> <strong class="ju hu">a</strong>  &lt;<strong class="ju hu">class</strong> '<strong class="ju hu">ValueError</strong>'&gt; <strong class="ju hu">exception</strong> <strong class="ju hu">occured</strong><br/><strong class="ju hu">next</strong> <strong class="ju hu">entry</strong> <strong class="ju hu">please</strong>!!!<br/>***********************************************************************************<br/><strong class="ju hu">the</strong> <strong class="ju hu">entry</strong> <strong class="ju hu">is</strong>: 0<br/><strong class="ju hu">Hey</strong> <strong class="ju hu">a</strong>  &lt;<strong class="ju hu">class</strong> '<strong class="ju hu">ZeroDivisionError</strong>'&gt; <strong class="ju hu">exception</strong> <strong class="ju hu">occured</strong><br/><strong class="ju hu">next</strong> <strong class="ju hu">entry</strong> <strong class="ju hu">please</strong>!!!<br/>***********************************************************************************<br/><strong class="ju hu">the</strong> <strong class="ju hu">entry</strong> <strong class="ju hu">is</strong>: 14.3<br/><strong class="ju hu">the</strong> <strong class="ju hu">recipocal</strong> <strong class="ju hu">of</strong> <strong class="ju hu">the</strong> <strong class="ju hu">entry</strong> <strong class="ju hu">is</strong>  0.07142857142857142</span></pre><h1 id="1bd9" class="kf jz ht bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">捕捉特殊异常</h1><p id="44fc" class="pw-post-body-paragraph iq ir ht is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hb bi translated">在上面提到的例子中，我们没有提到 except 子句中的任何异常，这不是一个很好的编码实践，因为它将捕获所有的异常并以相同的方式处理它们，所以我们可以指定 except 子句将捕获哪个异常。Try 可以有多个 except 子句来对它们进行不同的处理，但是在出现异常的情况下，只会执行一个子句。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="1bc5" class="jy jz ht ju b fi ka kb l kc kd"><strong class="ju hu">import</strong> sys <br/>list=['boy', 'cat',0 ,14.3]<br/><strong class="ju hu">for</strong> entry <strong class="ju hu">in</strong> list:<br/>    <br/>    <strong class="ju hu">try</strong>:<br/>        print("the entry is:" , entry)<br/>        r=1/int(entry)<br/>    <strong class="ju hu">except</strong>(ValueError):<br/>        print("Hey a ValueError exception occured")<br/>    <strong class="ju hu">except</strong>(ZeroDivisionError):<br/>        print("Hey a ZeroDivisionError exception occured")<br/>    <strong class="ju hu">except</strong>:<br/>        print("some error occur")<br/>print("the recipocal of the entry is ",r)</span><span id="b3db" class="jy jz ht ju b fi ke kb l kc kd">out[]: the entry <strong class="ju hu">is</strong>: boy</span><span id="b0f9" class="jy jz ht ju b fi ke kb l kc kd">Hey a ValueError exception occured<br/>the entry <strong class="ju hu">is</strong>: cat<br/>Hey a ValueError exception occured<br/>the entry <strong class="ju hu">is</strong>: 0<br/>Hey a ZeroDivisionError exception occured<br/>the entry <strong class="ju hu">is</strong>: 14.3<br/>the recipocal of the entry <strong class="ju hu">is</strong>  0.07142857142857142</span></pre><h1 id="b3ad" class="kf jz ht bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">引发异常</h1><p id="9b6c" class="pw-post-body-paragraph iq ir ht is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hb bi translated">在 python 编程中，当运行时出现相应的错误时，会引发异常，但是我们可以使用关键字 raise 强制引发异常。我们也可以有选择地将值传递给异常，以阐明异常发生的原因。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="1f19" class="jy jz ht ju b fi ka kb l kc kd"><strong class="ju hu">raise</strong> KeyboardIntrrupt</span><span id="63b8" class="jy jz ht ju b fi ke kb l kc kd">raise MemoryError</span></pre><p id="8a01" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">引发异常的示例如下:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="b7dc" class="jy jz ht ju b fi ka kb l kc kd"><strong class="ju hu">try</strong>:<br/>    num=<strong class="ju hu">int</strong>(input("enter a positive integer"))<br/>    <br/>    <strong class="ju hu">if</strong> num&lt;=0 :<br/>        <strong class="ju hu">raise</strong> ValueError("error:entered a negative number")<br/><strong class="ju hu">except</strong> ValueError <strong class="ju hu">as</strong> e:<br/>    <strong class="ju hu">print</strong>(e)</span><span id="8418" class="jy jz ht ju b fi ke kb l kc kd">out[]:enter a positive <strong class="ju hu">integer</strong>-10</span><span id="5ab3" class="jy jz ht ju b fi ke kb l kc kd">error:entered a negative number</span></pre><h1 id="97c8" class="kf jz ht bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">尝试…最终</h1><p id="5c3e" class="pw-post-body-paragraph iq ir ht is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hb bi translated">try 可以有可选的 finally 子句。无论发生什么情况，都会执行该命令，并且基本上是为了释放外部资源而生成的。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="d1a5" class="jy jz ht ju b fi ka kb l kc kd"><strong class="ju hu">try</strong>:<br/>    f=<strong class="ju hu">open</strong>("sample.txt",'w')<br/><strong class="ju hu">finally</strong>:<br/>    f.close()</span></pre><p id="21f1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi">*********************************************************************************************</p><blockquote class="lh li lj"><p id="88b2" class="iq ir lk is b it iu iv iw ix iy iz ja ll jc jd je lm jg jh ji ln jk jl jm jn hb bi translated">感谢您阅读文章！</p></blockquote></div></div>    
</body>
</html>