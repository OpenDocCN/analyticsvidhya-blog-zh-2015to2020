<html>
<head>
<title>Track Corona-virus In Your Country with an automated email using Python.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python自动发送电子邮件，跟踪您所在国家的冠状病毒。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/track-corona-virus-in-your-country-with-an-automated-email-using-python-1793e1abe0db?source=collection_archive---------11-----------------------#2020-03-18">https://medium.com/analytics-vidhya/track-corona-virus-in-your-country-with-an-automated-email-using-python-1793e1abe0db?source=collection_archive---------11-----------------------#2020-03-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/11d7e2e2eef74cd56b4f623563c1d1c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OI-b9_bahPN2W-nuhEKRKw.jpeg"/></div></div></figure><p id="a8cc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">冠状病毒(CoV) </strong>是一个大的病毒家族，可引起从普通感冒到更严重疾病的疾病，如中东呼吸综合征(MERS-CoV)和严重急性呼吸综合征(SARS-CoV)。</p><p id="7287" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">由新型冠状病毒引起的新冠肺炎病的潜伏期为2至14天。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jo"><img src="../Images/4db20823f7687578f5fa7ec3b18b62e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WvMIuOmzozZTxt4cOXZP4A.png"/></div></div></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="3af5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi ka translated"><span class="l kb kc kd bm ke kf kg kh ki di">在</span> <em class="kj">这篇文章中，我们将追踪某个特定国家的</em> <strong class="is hj"> <em class="kj">冠状病毒</em> </strong> <em class="kj">，还将使用Python接收我们收件箱中的所有详细数字。</em></p><p id="9bab" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们一步一步地深入这个有趣的教程。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="7d15" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第一步。在Python中安装Selenium</strong></p><p id="97c7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Selenium是一个开源的基于网络的自动化工具。<strong class="is hj">它</strong>可以向不同的浏览器发送标准的<strong class="is hj"> Python </strong>命令，尽管它们的浏览器设计有所不同，我们将使用它从下面的网站获取数据。</p><div class="kk kl ez fb km kn"><a href="https://www.worldometers.info/coronavirus" rel="noopener  ugc nofollow" target="_blank"><div class="ko ab dw"><div class="kp ab kq cl cj kr"><h2 class="bd hj fi z dy ks ea eb kt ed ef hh bi translated">冠状病毒病例:</h2><div class="ku l"><h3 class="bd b fi z dy ks ea eb kt ed ef dx translated">实时统计和冠状病毒新闻，跟踪确诊病例、康复患者和死亡人数，按…</h3></div><div class="kv l"><p class="bd b fp z dy ks ea eb kt ed ef dx translated">www.worldometers.info</p></div></div><div class="kw l"><div class="kx l ky kz la kw lb io kn"/></div></div></a></div><p id="9679" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要安装Selenium，请在安装标准python后，在命令提示符下键入以下内容。</p><pre class="jp jq jr js fd lc ld le lf aw lg bi"><span id="7066" class="lh li hi ld b fi lj lk l ll lm">pip install Selenium</span></pre><p id="c121" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤二。为Chrome下载Chrome驱动程序</strong></p><p id="638e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">除了上述步骤，请下载Chromedriver.exe，这将是打开Chrome浏览器所必需的。</p><p id="b23e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请根据您自己的Chrome浏览器版本从以下位置下载相同的版本，同时注意32位版本支持32位和64位机器。</p><div class="kk kl ez fb km kn"><a href="https://chromedriver.chromium.org/downloads" rel="noopener  ugc nofollow" target="_blank"><div class="ko ab dw"><div class="kp ab kq cl cj kr"><h2 class="bd hj fi z dy ks ea eb kt ed ef hh bi translated">下载—Chrome driver—Chrome的网络驱动程序</h2><div class="ku l"><h3 class="bd b fi z dy ks ea eb kt ed ef dx translated">Chrome的网络驱动</h3></div><div class="kv l"><p class="bd b fp z dy ks ea eb kt ed ef dx translated">Chromechromedriver.chromium.org的web驱动程序</p></div></div></div></a></div><p id="7a2c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">完成后，请打开你的Jupyter笔记本，将你的chromedriver.exe文件放在运行Jupyter笔记本的同一个目录下。</p><p id="ccf6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以在任何Jupyter单元格中使用下面的命令来标识我们当前的工作目录。最终的目录结构应该与给定图像中所示的相同，我们可以忽略checkpoints文件夹。</p><pre class="jp jq jr js fd lc ld le lf aw lg bi"><span id="a411" class="lh li hi ld b fi lj lk l ll lm">## Returns current working directory<br/>pwd()</span></pre><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es ln"><img src="../Images/6d93748eb13a68068e4b5b66756491b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/format:webp/1*a30a2wpXJdan5ogVvReU2A.png"/></div></figure><p id="f9b3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第三步。使用Selenium打开Chrome浏览器。</strong></p><pre class="jp jq jr js fd lc ld le lf aw lg bi"><span id="b52f" class="lh li hi ld b fi lj lk l ll lm">from selenium import webdriver</span><span id="068c" class="lh li hi ld b fi lo lk l ll lm">driver = webdriver.Chrome(executable_path=”chromedriver.exe”)<br/>driver.maximize_window()</span><span id="cd67" class="lh li hi ld b fi lo lk l ll lm">## for waiting the WebElements to load till 30 seconds<br/>driver.implicitly_wait(30)</span><span id="e48d" class="lh li hi ld b fi lo lk l ll lm">driver.get(“<a class="ae lp" href="https://www.worldometers.info/coronavirus/#countries" rel="noopener ugc nofollow" target="_blank">https://www.worldometers.info/coronavirus/#countries</a>")</span></pre><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lq"><img src="../Images/9aeafab18771b646dbe431812b89d792.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ymg0Gp-jng9gkLX5lI3gKQ.png"/></div></div></figure><p id="f51d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上述步骤应该会打开Chrome浏览器，并导航到上述网页。</p><p id="c6f9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第四步。在网上搜索与您所在国家相对应的数据</strong></p><p id="0ba5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将在这里获取国家"<strong class="is hj"><em class="kj"/></strong>"的数据，您可以修改自己国家的代码。</p><pre class="jp jq jr js fd lc ld le lf aw lg bi"><span id="6422" class="lh li hi ld b fi lj lk l ll lm">country_data=driver.find_elements_by_xpath(“(//*[text()=’ India ‘])[1]/ancestor::tr/td”)</span></pre><p id="f045" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这里，我使用XPath查找与国家标签为<strong class="is hj">印度</strong>的行相对应的所有数据，如果您是XPath新手，下面的教程将会很有帮助。</p><div class="kk kl ez fb km kn"><a href="https://www.w3schools.com/xml/xpath_intro.asp" rel="noopener  ugc nofollow" target="_blank"><div class="ko ab dw"><div class="kp ab kq cl cj kr"><h2 class="bd hj fi z dy ks ea eb kt ed ef hh bi translated">XPath教程</h2><div class="ku l"><h3 class="bd b fi z dy ks ea eb kt ed ef dx translated">XPath是XSLT标准中的一个主要元素。XPath可以用来浏览XML中的元素和属性…</h3></div><div class="kv l"><p class="bd b fp z dy ks ea eb kt ed ef dx translated">www.w3schools.com</p></div></div><div class="kw l"><div class="lr l ky kz la kw lb io kn"/></div></div></a></div><p id="62df" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以在下图中验证我们的Xpath是如何从给定的表中突出显示国家"<strong class="is hj">印度</strong>"的所有行数据的。<br/> <strong class="is hj">我们将行“India”的所有对应元素存储到一个变量country_data </strong>中，这是Python中的list类型。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ls"><img src="../Images/e3b6076d16cdc924a28805704582a5f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wkhclS_w5G_RIGViz7djtg.png"/></div></div></figure><p id="e427" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第五步。解析country_data列表并为电子邮件功能生成新的应用程序密码。</strong></p><p id="7777" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里country_data列表包含对应于每一列的值，因此我们将每个值的信息分离如下。</p><pre class="jp jq jr js fd lc ld le lf aw lg bi"><span id="3570" class="lh li hi ld b fi lj lk l ll lm">country_name=country_data[0].text<br/>total_cases=country_data[1].text<br/>new_cases=country_data[2].text<br/>total_deaths=country_data[3].text<br/>new_deaths=country_data[4].text<br/>total_recovered=country_data[5].text<br/>active_cases=country_data[6].text<br/>serious_critical=country_data[7].text<br/>Tot_cases_1M_pop=country_data[8].text</span></pre><p id="9839" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，让我们使用以下步骤生成应用程序密码，以便使用Python的SMTP库发送电子邮件。</p><p id="a528" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">生成Gmail应用程序密码的步骤</strong></p><ul class=""><li id="dad7" class="lt lu hi is b it iu ix iy jb lv jf lw jj lx jn ly lz ma mb bi translated">进入你的谷歌账户。</li><li id="f57c" class="lt lu hi is b it mc ix md jb me jf mf jj mg jn ly lz ma mb bi translated">在左侧导航面板中，选择安全性。</li><li id="7c16" class="lt lu hi is b it mc ix md jb me jf mf jj mg jn ly lz ma mb bi translated">在“登录到<strong class="is hj"> Google </strong>面板上，选择<strong class="is hj">应用密码</strong>。…</li><li id="10cb" class="lt lu hi is b it mc ix md jb me jf mf jj mg jn ly lz ma mb bi translated">在底部，选择选择<strong class="is hj">应用</strong>并选择您正在使用的<strong class="is hj">应用</strong>。</li><li id="5f28" class="lt lu hi is b it mc ix md jb me jf mf jj mg jn ly lz ma mb bi translated">选取“选择设备”,然后选取您正在使用的设备。</li><li id="93c5" class="lt lu hi is b it mc ix md jb me jf mf jj mg jn ly lz ma mb bi translated">选择生成并保存密码。</li></ul><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mh"><img src="../Images/216ff8014e965ddc998c3587461ff84c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MNIbC2kMUJ7XoluY1umUQQ.png"/></div></div></figure><p id="0a82" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第六步。使用谷歌的SMTP服务器实现电子邮件功能</strong></p><p id="585d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，是时候使用步骤5中的所有参数构造我们的电子邮件函数，并在换行格式化后在电子邮件正文中使用它们。</p><pre class="jp jq jr js fd lc ld le lf aw lg bi"><span id="3f74" class="lh li hi ld b fi lj lk l ll lm">def send_mail(country_name,total_cases,new_cases,total_death,new_deaths,total_recovered,active_cases,serious_critical,Tot_cases_1M_pop):<br/> server=smtplib.SMTP(‘smtp.gmail.com’,587)<br/> server.ehlo()<br/> server.starttls()<br/> server.ehlo()<br/> server.login(‘<a class="ae lp" href="mailto:soumyansh@gmail.com" rel="noopener ugc nofollow" target="_blank">U</a>ser's Email address’,’Generated Password’)<br/> subject = ‘Coronavirus stats in your country today!’<br/> body = ‘Today in ‘ + country_name + ‘\<br/> \nThere is new data on coronavirus:\<br/> \nTotal cases: ‘ + total_cases +’\<br/> \nNew cases: ‘ + new_cases + ‘\<br/> \nTotal deaths: ‘ + total_deaths + ‘\<br/> \nNew deaths: ‘ + new_deaths + ‘\<br/> \nActive cases: ‘ + active_cases + ‘\<br/> \nTotal recovered: ‘ + total_recovered + ‘\<br/> \nSerious, critical cases: ‘ + serious_critical + ‘\<br/> \nCheck the link: <a class="ae lp" href="https://www.worldometers.info/coronavirus/'" rel="noopener ugc nofollow" target="_blank">https://www.worldometers.info/coronavirus/’</a><br/> msg = f”Subject: {subject}\n\n{body}"<br/> server.sendmail(<br/> ‘Coronavirus’,<br/> ‘<a class="ae lp" href="mailto:soumyansh@gmail.com" rel="noopener ugc nofollow" target="_blank">U</a>ser's Email address’,<br/> msg<br/> )<br/> print(‘Hey Email has been sent!’)<br/> server.quit()</span></pre><p id="4bcf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在上面的函数中，我们使用所有预定义的统计数据，在<strong class="is hj">生成的应用程序密码的帮助下，向我们指定的收件箱地址发送电子邮件。</strong></p><p id="af2a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤7。调用该函数并验证收件箱中的邮件</strong></p><pre class="jp jq jr js fd lc ld le lf aw lg bi"><span id="2c67" class="lh li hi ld b fi lj lk l ll lm">send_mail(country_name,total_cases,new_cases,total_death,new_deaths,total_recovered,<br/> active_cases,serious_critical,Tot_cases_1M_pop)</span></pre><p id="4daf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">祝贺</strong>在您的收件箱中收到合并邮件。</p><p id="2277" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您甚至可以通过创建一个windows批处理文件并将其作为一项服务，或者使用Windows任务计划程序运行它，来计划每天运行该脚本，而无需任何手动干预。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mi"><img src="../Images/3306f7593860ce62d427c04f140101d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JYR8rjVQbXIaxYl5HHtPMw.png"/></div></div></figure><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es mj"><img src="../Images/bde5e33bebb2c7262a213a49fcf78d43.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*BOgozt9vTN9Prz9-ubywPw.jpeg"/></div></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="bd9e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="kj">感谢您读到这里。在这篇文章中，我们学习了如何使用Selenium和Python在网络上搜索冠状病毒的详细信息，以及如何向收件人发送电子邮件。</em> </strong></p><p id="79e9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我希望这个教程对你有用。我很好奇你是怎么想的，所以给我一些建议吧。你也可以直接通过<a class="ae lp" href="mailto:soumyansh@gmail.com" rel="noopener ugc nofollow" target="_blank">邮箱</a>与我取得联系，或者在<a class="ae lp" href="https://www.linkedin.com/in/soumyansh/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上与我联系。</p></div></div>    
</body>
</html>