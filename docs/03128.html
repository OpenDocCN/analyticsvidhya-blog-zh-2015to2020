<html>
<head>
<title>Restoring Text From A PDF Image</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从PDF图像恢复文本</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/restoring-text-from-a-pdf-image-f0fd4841a287?source=collection_archive---------7-----------------------#2020-01-17">https://medium.com/analytics-vidhya/restoring-text-from-a-pdf-image-f0fd4841a287?source=collection_archive---------7-----------------------#2020-01-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="3320" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">蟒蛇之道…</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/9247bc3845a62bc3a377841d63b3accd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QzAiG6MV7mcpsK8z7Lh8rQ.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">科林·尼克森在www.freeimages.com拍摄的照片</figcaption></figure><p id="64af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您是否曾经将文档扫描成pdf格式的图像，然后意识到您实际上需要能够编辑该文档？Adobe内置了光学字符识别(OCR)软件，如果您有adobe professional，该软件可以轻松解决任何问题。如果你没有这个闲心但有几分钟，那就继续读下去吧。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="61c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您需要的是…</p><ol class=""><li id="3008" class="ka kb hi ih b ii ij im in iq kc iu kd iy ke jc kf kg kh ki bi translated">Python3</li><li id="bb2b" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated">宇宙魔方OCR: sudo apt-get安装宇宙魔方OCR</li><li id="0ac1" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated">这些python库:wand、Pillow、pyocr、PySimpleGUI</li></ol><p id="7469" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">设置您的虚拟环境，导入您选择的python版本，安装库并运行代码:</p><pre class="je jf jg jh fd ko kp kq kr aw ks bi"><span id="73ac" class="kt ku hi kp b fi kv kw l kx ky">import PySimpleGUI as sg<br/>from wand.image import Image<br/>from PIL import Image as PI<br/>import pyocr<br/>import pyocr.builders<br/>import io</span><span id="122f" class="kt ku hi kp b fi kz kw l kx ky">sg.theme('DarkAmber')</span><span id="8c2d" class="kt ku hi kp b fi kz kw l kx ky">tool = pyocr.get_available_tools()[0]<br/>lang = tool.get_available_languages()[1] # Sets language to English</span><span id="161a" class="kt ku hi kp b fi kz kw l kx ky"># Set GUI layout</span><span id="2fa9" class="kt ku hi kp b fi kz kw l kx ky">layout = [ [sg.Text("Chose PDF:")], <br/>   [sg.FileBrowse(key='user_file_conv'), sg.Text('', size=(32,1)),],<br/>   [sg.Text("Name Your File:"), sg.InputText(key='user_file_save')],<br/>   [sg.Button('Convert'),sg.Cancel()]<br/>   ]</span><span id="c23a" class="kt ku hi kp b fi kz kw l kx ky">window = sg.Window('PDF_Converter', layout)</span><span id="c146" class="kt ku hi kp b fi kz kw l kx ky">def produce_text(cmd_input):<br/> <br/> req_image = []<br/> final_text = []<br/> <br/> image_pdf = Image(filename=cmd_input, resolution=300)<br/> image_jpeg = image_pdf.convert('jpeg')</span><span id="6d00" class="kt ku hi kp b fi kz kw l kx ky">for img in image_jpeg.sequence:<br/>  img_page = Image(image=img)<br/>  req_image.append(img_page.make_blob('jpeg'))</span><span id="03e1" class="kt ku hi kp b fi kz kw l kx ky">for img in req_image:<br/>  txt = tool.image_to_string(<br/>   PI.open(io.BytesIO(img)),<br/>   lang=lang,<br/>   builder=pyocr.builders.TextBuilder()<br/>   )<br/>  final_text.append(txt)</span><span id="2f24" class="kt ku hi kp b fi kz kw l kx ky">with open('{}.txt'.format(values['user_file_save']),'+w') as file:<br/>  for txt in final_text:<br/>   file.write(txt)</span><span id="eaf4" class="kt ku hi kp b fi kz kw l kx ky"># ---------Event Loop-------------------------------</span><span id="3d0b" class="kt ku hi kp b fi kz kw l kx ky">while True:</span><span id="c0b3" class="kt ku hi kp b fi kz kw l kx ky">event, values = window.read()<br/> if event in (None, 'Cancel'):<br/>  break<br/> if event == 'Convert':<br/>  produce_text(cmd_input=values['user_file_conv'])</span><span id="94ae" class="kt ku hi kp b fi kz kw l kx ky">window.close()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es la"><img src="../Images/2bbc450e503e26b15add36e096a6a239.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/1*uhpzh9d9mIFMEQee7AgXwQ.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">生成的PDF_Converter GUI</figcaption></figure><p id="709f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你不喜欢“深琥珀色”,那就随意更换吧。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="b690" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可能遇到的一个问题是/etc/ImageMagick-6/policy.xml文件的权限。如果程序无法读取pdf，请在超级用户中编辑文件，并将pdf权限从“无”更改为“读取”。保存文件，你就可以开始了。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="b183" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们测试一下。以下是一个不可编辑的pdf图像示例:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lb"><img src="../Images/2b6ce9c1fcdb08900fa979796f370fa6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Empx3webPDWvo9tjgRfcaw.png"/></div></div></figure><p id="1d12" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是通过我们的pdf_OCR运行后的输出:</p><pre class="je jf jg jh fd ko kp kq kr aw ks bi"><span id="55bd" class="kt ku hi kp b fi kv kw l kx ky">IDRH<br/>Non-text-searchable PDF</span><span id="794d" class="kt ku hi kp b fi kz kw l kx ky">This is an example of a non-text-searchable PDF. Because it was created from an image rather than a text document, it cannot be rendered as plain text by the PDF reader. Thus, attempting to select the text on the page as though it were a text document or website will not work, regardless of how neatly it 1s organized.</span></pre><p id="e3f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该计划的伟大之处在于，它将阅读和转换文本从其他图像以及pdf图像。这是我从一些垃圾邮件里拿的一张菜单照片。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lc"><img src="../Images/3d092c2941ba2670cccd277908814b3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MBYUkeeoOGUhMuyJZSOCAQ.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">垃圾邮件图片存储为。使用jpeg文件交换格式存储的编码图像文件扩展名</figcaption></figure><p id="8eba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是通过程序运行图像后的结果文本。</p><pre class="je jf jg jh fd ko kp kq kr aw ks bi"><span id="bbf9" class="kt ku hi kp b fi kv kw l kx ky">MENU</span><span id="a577" class="kt ku hi kp b fi kz kw l kx ky">First Course<br/>Shrimp Gumbo | Pappadeaux Salad</span><span id="f68c" class="kt ku hi kp b fi kz kw l kx ky">Second Course<br/>Filet Mignon<br/>Salmon Alexander<br/>Big Bay Platter<br/>Giant Shrimp &amp; Creamy Grits</span><span id="76cb" class="kt ku hi kp b fi kz kw l kx ky">Third Course</span><span id="7149" class="kt ku hi kp b fi kz kw l kx ky">Vanilla Cheesecake<br/>With fresh strawberries</span><span id="2d83" class="kt ku hi kp b fi kz kw l kx ky">Turtle Fudge Brownie<br/>With pecans, chocolate and caramel sauce</span></pre><p id="1ad4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个程序不能很好地处理手写笔记，但也许这是另一个时间的项目。</p></div></div>    
</body>
</html>