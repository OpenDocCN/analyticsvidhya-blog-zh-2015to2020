<html>
<head>
<title>How to Manage Translations of an Android Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何管理Android应用程序的翻译</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-manage-translations-of-an-android-application-387a87c93a93?source=collection_archive---------23-----------------------#2020-06-23">https://medium.com/analytics-vidhya/how-to-manage-translations-of-an-android-application-387a87c93a93?source=collection_archive---------23-----------------------#2020-06-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="4bfc" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">向导</h2><div class=""/><p id="5a1a" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">以及如何在翻译任务适当分配的情况下做到这一点</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es jm"><img src="../Images/2dfc557d366490ef6bd12e5f7d3df3d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p7QA4TV8ZO4mFDRpiWhzOA.png"/></div></div></figure><p id="26ee" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">很长一段时间以来，我一直想知道是否存在一种工具，可以在云中的一个表中管理我的网站的翻译。</p><p id="b5c2" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs">在一个表中管理语言的一些额外好处:</strong></p><ol class=""><li id="c0e4" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl kd ke kf kg bi translated">更快地管理，因为您看到了缺少的翻译</li><li id="7c99" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">您可以将链接复制到表格，并将其发送给翻译人员</li></ol><p id="61b4" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">但是React i18n的原生解决方案不允许这样做。</p><p id="30c6" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">现在让我自我介绍一下。</p><p id="9d98" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">我是创业公司<a class="ae km" href="http://reface.tech" rel="noopener ugc nofollow" target="_blank">的创始人，该公司现在发起了一场全球性的公关活动。这就是为什么我真的需要一个工具来快速管理翻译。</a></p><p id="4da3" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs">所以我决定写几个剧本:</strong></p><ol class=""><li id="e72f" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl kd ke kf kg bi translated">首先将所有的翻译上传到观念</li><li id="66f5" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">第二步是将一种语言翻译成所需的一组语言(对于译者来说，检查速度更快，而不是从起始点开始翻译)</li><li id="bca7" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">第三步将下载所有内容并将<code class="du kn ko kp kq b">string.xml</code>文件添加到相应的文件夹中</li></ol></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><h1 id="24a5" class="ky kz hi bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">工具</h1><p id="6d8e" class="pw-post-body-paragraph io ip hi iq b ir lw it iu iv lx ix iy iz ly jb jc jd lz jf jg jh ma jj jk jl hb bi translated">我们的脚本将用Python编写。</p><ul class=""><li id="a895" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl mb ke kf kg bi translated">对于概念集成，我们将使用概念API 的<a class="ae km" href="https://github.com/jamalex/notion-py" rel="noopener ugc nofollow" target="_blank">非官方包装器(因为目前概念没有公共包装器)。</a></li></ul><p id="26b4" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs">该库的数据以XML格式存储</strong></p><h1 id="b571" class="ky kz hi bd la lb mc ld le lf md lh li lj me ll lm ln mf lp lq lr mg lt lu lv bi translated">第一步。创建表格</h1><p id="60a3" class="pw-post-body-paragraph io ip hi iq b ir lw it iu iv lx ix iy iz ly jb jc jd lz jf jg jh ma jj jk jl hb bi translated">该表应该有这样的列:</p><ul class=""><li id="fc4f" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl mb ke kf kg bi translated"><strong class="iq hs"> key </strong>是访问字符串资源的东西</li><li id="76d8" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl mb ke kf kg bi translated">语言专栏根据你希望React站点翻译的语言来命名。如果你想把你的网站翻译成意大利语<strong class="iq hs">和俄语</strong>和俄语<strong class="iq hs">这两个栏目分别是<strong class="iq hs"> it </strong>和<strong class="iq hs"> ru </strong>。</strong></li></ul><p id="fbb5" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs">下面是我的例子:</strong></p><figure class="jn jo jp jq fd jr er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es mh"><img src="../Images/0e80f07c3eeabe70bee26b6700548f19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NSLXSb3uALj68IbHZFkTKA.png"/></div></div></figure></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><h1 id="6dd8" class="ky kz hi bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">第二步。概念授权</h1><p id="8f83" class="pw-post-body-paragraph io ip hi iq b ir lw it iu iv lx ix iy iz ly jb jc jd lz jf jg jh ma jj jk jl hb bi translated">我们需要一个叫做<code class="du kn ko kp kq b">token</code>的特殊东西来调用概念API。</p><p id="da55" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs">得到它:</strong></p><ol class=""><li id="f250" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl kd ke kf kg bi translated">转到概念</li><li id="bb34" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">使用我们酷的Ctrl + Shift + J，打开控制台</li><li id="15ca" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">进入应用程序—cookie，复制<code class="du kn ko kp kq b">token_v2</code></li></ol></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><h1 id="c9c5" class="ky kz hi bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">第三步。一些常数</h1><p id="d26b" class="pw-post-body-paragraph io ip hi iq b ir lw it iu iv lx ix iy iz ly jb jc jd lz jf jg jh ma jj jk jl hb bi translated">我们开始写Python代码。让我们先写一个文件，其中包含一些工作所需的常数。</p><figure class="jn jo jp jq fd jr"><div class="bz dy l di"><div class="mi mj l"/></div></figure><ul class=""><li id="b12c" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl mb ke kf kg bi translated"><code class="du kn ko kp kq b">TRANSLATIONS</code>是您希望网站翻译的语言列表</li><li id="e377" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl mb ke kf kg bi translated"><code class="du kn ko kp kq b">TOKEN</code>是你的观念令牌</li><li id="0a43" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl mb ke kf kg bi translated"><code class="du kn ko kp kq b">ANDROID</code>是存储翻译的表的链接</li><li id="29cf" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl mb ke kf kg bi translated"><code class="du kn ko kp kq b">ANDROID_BASE_LANGUAGE</code>是将被添加到值文件夹的语言(不带<code class="du kn ko kp kq b">values-*language_name*</code>)</li><li id="6191" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl mb ke kf kg bi translated"><code class="du kn ko kp kq b">ANDROID_FILES</code>是对应语言的文件列表</li></ul></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><h1 id="7c47" class="ky kz hi bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">第四步。将翻译上传到概念的脚本</h1><p id="a5a5" class="pw-post-body-paragraph io ip hi iq b ir lw it iu iv lx ix iy iz ly jb jc jd lz jf jg jh ma jj jk jl hb bi translated"><strong class="iq hs">简要算法:</strong></p><ol class=""><li id="55e7" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl kd ke kf kg bi translated">首先，我们加载基本XML</li><li id="fb7a" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">然后任务是迭代通过它的<code class="du kn ko kp kq b">strings</code></li><li id="3f5d" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">对于每个<code class="du kn ko kp kq b">string</code>，我们得到它的<code class="du kn ko kp kq b">value</code>和<code class="du kn ko kp kq b">name</code></li><li id="c6c7" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">对于每个条目，我们应该在概念表中找到(或添加)一个相应的行，并相应地将它的<code class="du kn ko kp kq b">value</code>设置为<code class="du kn ko kp kq b">language</code></li></ol><p id="ea57" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">现在我们应该写一些代码。让我们从一个为特定的<code class="du kn ko kp kq b">key</code>返回一个<code class="du kn ko kp kq b">row</code>的函数开始。</p><figure class="jn jo jp jq fd jr"><div class="bz dy l di"><div class="mi mj l"/></div></figure><ul class=""><li id="6ee2" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl mb ke kf kg bi translated"><code class="du kn ko kp kq b">current_rows</code>是概念表的行。我们应该在每一步都让它们支持<code class="du kn ko kp kq b">JSON</code>文件中的副本。</li><li id="0801" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl mb ke kf kg bi translated"><code class="du kn ko kp kq b">database</code>是概念表的表示</li><li id="6708" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl mb ke kf kg bi translated">如果我们没有找到符合<code class="du kn ko kp kq b">key</code>的行，那么我们添加它</li></ul><p id="2aa1" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs">现在是时候写整个脚本了:</strong></p><figure class="jn jo jp jq fd jr"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="4536" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs">这里的新东西:</strong></p><ul class=""><li id="9c79" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl mb ke kf kg bi translated"><code class="du kn ko kp kq b">client</code>和<code class="du kn ko kp kq b">database</code>初始化</li><li id="785f" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl mb ke kf kg bi translated">遍历<code class="du kn ko kp kq b">translations</code></li><li id="bc11" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl mb ke kf kg bi translated">给<code class="du kn ko kp kq b">row</code>赋值</li></ul></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><h1 id="f0bd" class="ky kz hi bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">第五步。内容翻译的脚本</h1><p id="2248" class="pw-post-body-paragraph io ip hi iq b ir lw it iu iv lx ix iy iz ly jb jc jd lz jf jg jh ma jj jk jl hb bi translated">它很小，所以我不会把它分成多个代码块。</p><figure class="jn jo jp jq fd jr"><div class="bz dy l di"><div class="mi mj l"/></div></figure><ol class=""><li id="6670" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl kd ke kf kg bi translated">我们初始化一个<code class="du kn ko kp kq b">translator</code>，它将与谷歌翻译交互</li><li id="b088" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">我们问自己关于目标语言和初始化的问题。通常是英语，因为谷歌翻译擅长从英语翻译成其他语言。</li><li id="37c1" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">我们初始化概念<code class="du kn ko kp kq b">database</code>，得到<code class="du kn ko kp kq b">current_rows</code></li><li id="5f8c" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">然后我们遍历所有行，获取<code class="du kn ko kp kq b">base_text</code>并检查目标语言值是否未设置。如果它被设置，那么它已经被翻译，我们应该跳过它。</li></ol></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><h1 id="f7dd" class="ky kz hi bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">第六步。从概念下载翻译的脚本</h1><p id="fe28" class="pw-post-body-paragraph io ip hi iq b ir lw it iu iv lx ix iy iz ly jb jc jd lz jf jg jh ma jj jk jl hb bi translated"><strong class="iq hs">这里我们要做的是:</strong></p><ol class=""><li id="11f9" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl kd ke kf kg bi translated">遍历所有<code class="du kn ko kp kq b">translations</code></li><li id="7823" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">为每个文件创建一个结构为<code class="du kn ko kp kq b">strings.xml</code>的文件</li><li id="4cb1" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">我们将概念列中的内容添加到相应的文件中</li><li id="1eb6" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">我们将所有内容保存到相应命名的目录中(<code class="du kn ko kp kq b">values-fr</code>、<code class="du kn ko kp kq b">values-it</code>等)</li></ol><p id="f647" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs">现在让我们把它写出来:</strong></p><figure class="jn jo jp jq fd jr"><div class="bz dy l di"><div class="mi mj l"/></div></figure><ol class=""><li id="0972" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl kd ke kf kg bi translated">我们初始化概念<code class="du kn ko kp kq b">database</code>，得到<code class="du kn ko kp kq b">current_rows</code></li><li id="7efd" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">我们遍历<code class="du kn ko kp kq b">translations</code>，为每个元素创建strings.xml结构</li><li id="7e8a" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">然后我们遍历该列中的所有行，将内容添加到<code class="du kn ko kp kq b">strings.xml</code>文件的结构中</li><li id="8dfa" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">在遍历完所有这些翻译之后，我们编写内容</li></ol></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><h1 id="9c08" class="ky kz hi bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">参考</h1><h2 id="81a6" class="mk kz hi bd la ml mm mn le mo mp mq li iz mr ms lm jd mt mu lq jh mv mw lu ho bi translated">以下是这个项目的GitHub repo:</h2><div class="mx my ez fb mz na"><a href="https://github.com/mixeden/Android-Translation" rel="noopener  ugc nofollow" target="_blank"><div class="nb ab dw"><div class="nc ab nd cl cj ne"><h2 class="bd hs fi z dy nf ea eb ng ed ef hr bi translated">mixe den/Android-翻译</h2><div class="nh l"><h3 class="bd b fi z dy nf ea eb ng ed ef dx translated">在GitHub上创建一个帐户，为mixeden/Android翻译开发做出贡献。</h3></div><div class="ni l"><p class="bd b fp z dy nf ea eb ng ed ef dx translated">github.com</p></div></div><div class="nj l"><div class="nk l nl nm nn nj no jw na"/></div></div></a></div><h2 id="3da2" class="mk kz hi bd la ml mm mn le mo mp mq li iz mr ms lm jd mt mu lq jh mv mw lu ho bi translated">以下是我们使用的库:</h2><ol class=""><li id="5e68" class="jy jz hi iq b ir lw iv lx iz np jd nq jh nr jl kd ke kf kg bi translated">观念库:<a class="ae km" href="https://github.com/jamalex/notion-py" rel="noopener ugc nofollow" target="_blank">https://github.com/jamalex/notion-py</a></li><li id="bdaf" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">反应-本地化:<a class="ae km" href="https://www.npmjs.com/package/react-localization" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/react-localization</a></li><li id="b021" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">谷歌运输:<a class="ae km" href="https://pypi.org/project/googletrans/" rel="noopener ugc nofollow" target="_blank">https://pypi.org/project/googletrans/</a></li></ol></div></div>    
</body>
</html>