<html>
<head>
<title>Containerization in Practice</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实践中的集装箱化</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/containerization-in-practice-47516a0f283a?source=collection_archive---------20-----------------------#2020-02-22">https://medium.com/analytics-vidhya/containerization-in-practice-47516a0f283a?source=collection_archive---------20-----------------------#2020-02-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="0820" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">第二部分:数据科学项目如何受益于Docker？</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/61a8672fce91593f398e43ad7710a010.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wf73ghSwbbFO6iTAMWA1cA.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">照片来自<a class="ae jn" href="https://www.pexels.com/@cottonbro" rel="noopener ugc nofollow" target="_blank">https://www.pexels.com/@cottonbro</a></figcaption></figure><p id="489e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这篇文章建议您如何在数据科学项目的不同阶段受益于Docker，从研究到部署，再到生产中的数据和应用程序监控。特别是，我讨论了将Docker技术应用于</p><ul class=""><li id="99a2" class="kk kl hi jq b jr js ju jv jx km kb kn kf ko kj kp kq kr ks bi translated">检查现有解决方案</li><li id="5e5a" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">准备开发环境</li><li id="1905" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">创建测试环境(包括测试数据库)</li><li id="dc5d" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">监控您的数据和应用</li><li id="7759" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">部署您的项目</li><li id="82cc" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">共享您的项目</li></ul><h1 id="fa97" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated">检查现有解决方案</h1><p id="9461" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">一个新的数据科学项目通常从考察领域和测试现有解决方案对所述问题的可行性开始。有了Docker，研究成果可以很容易地共享，并应用于其他问题和数据。</p><p id="57b6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">机器学习工具和算法有大量现成的docker图像。为了验证这一说法，我查阅了<a class="ae jn" rel="noopener" href="/@Mybridge"> Mybridge </a>在这篇<a class="ae jn" href="https://medium.mybridge.co/amazing-machine-learning-open-source-tools-projects-of-the-year-v-2019-95d772e4e985" rel="noopener ugc nofollow" target="_blank">文章</a>中公布的2018年最受欢迎的开源ML项目的文档。事实上，32个项目中有13个(40%)有docker文件或docker图像可用。注意，我从这两个类别中排除了作为包可用的项目。</p><p id="48bb" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">也就是说，<a class="ae jn" href="https://github.com/facebookresearch/Detectron?utm_source=mybridge&amp;utm_medium=blog&amp;utm_campaign=read_more" rel="noopener ugc nofollow" target="_blank"> Mask R-CNN </a>、<a class="ae jn" href="https://github.com/google/deepvariant?utm_source=mybridge&amp;utm_medium=blog&amp;utm_campaign=read_more" rel="noopener ugc nofollow" target="_blank"> Deepvariant </a>、<a class="ae jn" href="https://github.com/facebookresearch/Densepose?utm_source=mybridge&amp;utm_medium=blog&amp;utm_campaign=read_more" rel="noopener ugc nofollow" target="_blank"> DensePose </a>等算法，只差几个命令。这些工具的应用就像(1)在你的机器上安装<a class="ae jn" href="https://www.docker.com/products/docker-desktop" rel="noopener ugc nofollow" target="_blank"> Docker桌面</a>,( 2)构建或提取Docker映像，以及(3)运行容器一样简单。确切的命令及其参数由工具作者提供。此外，您可以使用docker engine API的库将它集成到您的项目中，这些库可用于许多编程语言(例如用于<a class="ae jn" href="https://docker-py.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> Python </a>、<a class="ae jn" href="https://github.com/spotify/docker-client" rel="noopener ugc nofollow" target="_blank"> Java </a>或<a class="ae jn" href="https://www.nuget.org/packages/Docker.DotNet/" rel="noopener ugc nofollow" target="_blank">)。网</a>)。</p><h1 id="0d1d" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated">准备开发环境</h1><p id="c165" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">通常，您可以使用依赖管理工具(如<a class="ae jn" href="https://docs.conda.io/en/latest/miniconda.html" rel="noopener ugc nofollow" target="_blank"> Miniconda </a>)为您的项目创建甚至访问一个环境。在这种情况下，仔细跟踪依赖关系就足够了。当您的项目需要多个运行时的组合(比如同时使用Python和Java)或者当您的管道的不同阶段依赖于不兼容的依赖项时，使用Docker设置一个开发环境可能会有所帮助。</p><p id="7926" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">但是，即使在这种情况下，也要考虑使用例如虚拟环境独立地开发组件，并利用您最喜欢的IDE和它的所有优势。并且仅出于测试和部署的目的，考虑使用Docker。一般来说，使用Docker来建立一个开发环境会降低速度，使调试(和一般的开发)更加复杂，需要额外的管理，等等。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lv"><img src="../Images/a75e0bbbdb416ebf5b88be156fa568a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g5_W4n_Cn3EAkWv-ctSRnw.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">图片来自<a class="ae jn" href="https://www.pexels.com/@cottonbro" rel="noopener ugc nofollow" target="_blank">https://www.pexels.com/@cottonbro</a></figcaption></figure><h1 id="869a" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated">创建测试环境</h1><p id="e076" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">考虑使用Docker为您的项目创建一个测试环境和/或测试数据库。</p><h2 id="da4e" class="lw kz hi bd la lx ly lz le ma mb mc li jx md me lk kb mf mg lm kf mh mi lo mj bi translated"><strong class="ak">测试数据库</strong></h2><p id="5de0" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">通常，解决方案的输入数据存储在其他地方的数据库中。使用Docker，您可以轻松地模拟生产数据库，用测试数据填充它，并将其作为独立的服务器运行。这将允许您测试完整的管道，包括读取/写入数据库。Docker hub上公开了PostgreSQL、MySQL、MongoDB、Redis和许多其他数据库的官方图片。</p><p id="57ed" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">需要考虑两个方面:</p><ul class=""><li id="4a20" class="kk kl hi jq b jr js ju jv jx km kb kn kf ko kj kp kq kr ks bi translated">根据最佳实践的建议，您可以在每次测试时填充数据库，或者在创建时填充一次，例如从之前准备的CSV中填充。无论如何，请记住，当数据库容器停止时，数据库以及您的数据将会消失(在这里阅读更多关于数据持久性的内容<a class="ae jn" href="https://docs.docker.com/storage/" rel="noopener ugc nofollow" target="_blank"/>)。</li><li id="2ff8" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">请记住，目标是创建一个尽可能类似于生产的环境。因此，使用与生产环境中数据库迁移相同的工具来创建测试数据库模式。</li></ul><h2 id="0ab8" class="lw kz hi bd la lx ly lz le ma mb mc li jx md me lk kb mf mg lm kf mh mi lo mj bi translated"><strong class="ak">测试环境</strong></h2><p id="981b" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">在docker容器中执行测试有几个好处:</p><ul class=""><li id="06a5" class="kk kl hi jq b jr js ju jv jx km kb kn kf ko kj kp kq kr ks bi translated">它使您的测试管道可移植且易于应用。例如，您可以在您的本地机器上创建、修改和运行测试，并且仅仅使用修改过的命令，作为CI/CD管道的一部分。</li><li id="c5a2" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">它可以让你模仿一个几乎和作品一样的环境。</li><li id="a5c3" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">此外，它允许你在多种不同的环境下进行测试(例如Ubuntu和Windows)。</li></ul><p id="77fd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">一个docker映像(或多个映像)将会像您定义开发/生产环境一样被定义(即使用相同的配置、相同的需求文件等)。).当执行时，容器将运行一个脚本来启动测试。</p><p id="3cb8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">有几个方面需要考虑:</p><ul class=""><li id="57f5" class="kk kl hi jq b jr js ju jv jx km kb kn kf ko kj kp kq kr ks bi translated">在run命令中，也就是在启动容器时，对项目和测试项目的源代码进行批量处理会更方便。这样，您就不必在每个项目或测试源更新之后构建新的映像。</li><li id="949b" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">确保您的管道区分测试/开发/生产，并处理适当的数据源(例如之前创建的数据库容器)和其他特定于环境的配置。</li></ul><h1 id="51ea" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated">监控您的数据和应用</h1><p id="36f5" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">Docker hub包含各种软件的官方图片，可能对您的ML项目有所帮助。例如，<a class="ae jn" href="https://grafana.com/" rel="noopener ugc nofollow" target="_blank"> Grafana </a>和<a class="ae jn" href="https://www.elastic.co/kibana" rel="noopener ugc nofollow" target="_blank"> Kibana </a>等工具的图像可用于检查和可视化数据或/和应用程序的状态。</p><p id="8e99" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">有了Docker，这些应用程序可以在几秒钟内在你的本地机器或其他地方启动。使用这些工具，您可以更好地了解数据和日志。您可以毫不费力地创建可视化，列出异常值，跟踪时间和异常，访问系统或数据状态等等。对于数据科学家来说，这可能是一个巨大的好处，因为他们的首要任务是确保系统的输入和输出得到很好的理解和控制。</p><h1 id="af2e" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated">部署您的项目</h1><p id="2d09" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">Docker极大地简化了应用程序的部署。即使您的开发环境在容器之外(正如我们前面讨论的那样，这种情况很常见)，将您的应用程序容器化以进行部署也是值得的。</p><p id="e1ce" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">开发机器上的容器在测试、试运行、生产或任何其他环境中的工作方式完全相同。在任何服务器上启动应用程序时，不需要进一步安装(docker引擎除外)。此外，许多云提供商实施了多种选项来极其轻松地部署和管理容器化的应用程序。</p><h1 id="5db9" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated">共享您的项目</h1><p id="0659" class="pw-post-body-paragraph jo jp hi jq b jr lq ij jt ju lr im jw jx ls jz ka kb lt kd ke kf lu kh ki kj hb bi translated">与您在项目开始时处理现有解决方案的方式一样，您可以与社区分享您的发现。将应用程序打包到容器中后，您可以将docker映像发布到公共存储库中(如Docker hub)，或者提供一个原始的Docker文件，允许用户自己构建一个包含源代码的映像。这样，任何安装了Docker的人都可以在几分钟内测试甚至集成你的工具。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/e66177621699b4fc0a6429148d604550.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nrJG-YQgvVl9M9llG9UCUQ.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">照片来自<a class="ae jn" href="https://www.pexels.com/@cottonbro" rel="noopener ugc nofollow" target="_blank">https://www.pexels.com/@cottonbro</a></figcaption></figure></div><div class="ab cl mk ml gp mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hb hc hd he hf"><p id="aa3d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">总之，Docker是一个非常强大的工具，数据科学项目在许多情况下和各个阶段都可以从中受益。如果应用得当，它不仅能提高开发人员的效率，还能带来更值得信赖的数据科学方法。</p><p id="7f17" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在下一篇文章中，让我们看看如何将这样一个项目部署到AWS，同时选择最合适的服务提供者来支持容器化应用程序。</p></div><div class="ab cl mk ml gp mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hb hc hd he hf"><p id="06be" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">几个有用的链接:</p><ul class=""><li id="1b5d" class="kk kl hi jq b jr js ju jv jx km kb kn kf ko kj kp kq kr ks bi translated">通过Docker 的全面实用<a class="ae jn" href="https://docker-curriculum.com/" rel="noopener ugc nofollow" target="_blank">介绍(从设置您的计算机到将应用程序部署到云)让您的双手变脏。</a></li><li id="3771" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">如果你想玩Docker，但还不准备在你的机器上安装它，试试官方的<a class="ae jn" href="https://labs.play-with-docker.com/" rel="noopener ugc nofollow" target="_blank">基于浏览器的Docker游乐场</a>或<a class="ae jn" href="https://www.katacoda.com/courses/docker" rel="noopener ugc nofollow" target="_blank">kata coda的免费Docker迷你课程</a>。</li><li id="e205" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">在Grafana游乐场玩Grafana功能，并检查在Docker容器中运行它<a class="ae jn" href="https://grafana.com/docs/grafana/latest/installation/docker/" rel="noopener ugc nofollow" target="_blank">有多容易。</a></li></ul></div></div>    
</body>
</html>