<html>
<head>
<title>How to use Python to build an image display app in Jupyter Notebook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Jupyter笔记本中使用Python构建图像显示app</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-use-python-to-build-an-image-display-app-in-jupyter-notebook-337c4fd3775f?source=collection_archive---------7-----------------------#2019-12-23">https://medium.com/analytics-vidhya/how-to-use-python-to-build-an-image-display-app-in-jupyter-notebook-337c4fd3775f?source=collection_archive---------7-----------------------#2019-12-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="43d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用python widgets库动态显示Jupyter笔记本中URL的图像</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><figure class="jk jl jm jn fd jo"><div class="bz dy l di"><div class="jp jq l"/></div><figcaption class="jr js et er es jt ju bd b be z dx translated">图像显示应用程序</figcaption></figure><p id="5ad1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你有没有想过如何在jupyter笔记本上显示图片，使用一个动态的小工具应用程序？这个方法将教你使用widgets库显示给定了图片url的HTML图片。</p><p id="094e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于本教程，我们将创建一个简单的应用程序，根据您的选择过滤足球或篮球图像的数据帧，并在模块中显示体育图像。它获取url，将其转换为HTML，并将其提供给小部件。</p><h2 id="79fe" class="jv jw hi bd jx jy jz ka kb kc kd ke kf iq kg kh ki iu kj kk kl iy km kn ko kp bi translated">导入包:</h2><pre class="jk jl jm jn fd kq kr ks kt aw ku bi"><span id="8dd7" class="jv jw hi kr b fi kv kw l kx ky">from IPython.display import display, HTML<br/>from ipywidgets import interact, interactive, fixed, interact_manual<br/>import ipywidgets as widgets<br/>from ipywidgets import *<br/>import pandas as pd<br/>pd.set_option('display.max_colwidth', -1)<br/>import warnings<br/>warnings.filterwarnings('ignore')<br/>import string</span></pre><p id="675b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">*重要注意事项:使用<em class="kz">PD . set _ option(' display . max _ col width '，-1) </em>确保pandas不会切断长url的URL。</p><h2 id="3dd8" class="jv jw hi bd jx jy jz ka kb kc kd ke kf iq kg kh ki iu kj kk kl iy km kn ko kp bi translated">读入数据帧</h2><p id="35cc" class="pw-post-body-paragraph if ig hi ih b ii la ik il im lb io ip iq lc is it iu ld iw ix iy le ja jb jc hb bi translated">dataframe应该是某种标识列和图像url。在这种情况下，我使用足球和篮球图像。在一列中，我有图片url，在另一列中，我有运动名称。</p><pre class="jk jl jm jn fd kq kr ks kt aw ku bi"><span id="8367" class="jv jw hi kr b fi kv kw l kx ky"># read in dataframe<br/>sports_df = pd.read_csv('~/downloads/sports.csv')<br/>sports_df.head()</span></pre><figure class="jk jl jm jn fd jo er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es lf"><img src="../Images/6326d0899406765dbd3ac1f9f54be1ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LXSrzVW7lR46AMxhWuTlPg.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">sports_df数据帧</figcaption></figure><h2 id="c17a" class="jv jw hi bd jx jy jz ka kb kc kd ke kf iq kg kh ki iu kj kk kl iy km kn ko kp bi translated">转换图像url的函数:</h2><p id="f2fc" class="pw-post-body-paragraph if ig hi ih b ii la ik il im lb io ip iq lc is it iu ld iw ix iy le ja jb jc hb bi translated">创建一个函数，将图像url转换为HTML库需要的格式:</p><pre class="jk jl jm jn fd kq kr ks kt aw ku bi"><span id="c245" class="jv jw hi kr b fi kv kw l kx ky">def path_to_image_html(path):<br/>    '''<br/>     This function essentially convert the image url to <br/>     '&lt;img src="'+ path + '"/&gt;' format. And one can put any<br/>     formatting adjustments to control the height, aspect ratio, size etc.<br/>     within as in the below example. <br/>    '''</span><span id="5daa" class="jv jw hi kr b fi lm kw l kx ky">    return '&lt;img src="'+ path + '" style=max-height:124px;"/&gt;'</span></pre><h2 id="1905" class="jv jw hi bd jx jy jz ka kb kc kd ke kf iq kg kh ki iu kj kk kl iy km kn ko kp bi translated">在HTML中显示图像的函数</h2><p id="4d52" class="pw-post-body-paragraph if ig hi ih b ii la ik il im lb io ip iq lc is it iu ld iw ix iy le ja jb jc hb bi translated">创建一个将图像文本转换为HTML图像的函数:</p><pre class="jk jl jm jn fd kq kr ks kt aw ku bi"><span id="9879" class="jv jw hi kr b fi kv kw l kx ky">def show_im():<br/>    CSS = """<br/>    .output {<br/>        flex-direction: row;<br/>    }<br/>    """</span><span id="e0eb" class="jv jw hi kr b fi lm kw l kx ky">    HTML('&lt;style&gt;{}&lt;/style&gt;'.format(CSS))</span></pre><h2 id="064d" class="jv jw hi bd jx jy jz ka kb kc kd ke kf iq kg kh ki iu kj kk kl iy km kn ko kp bi translated">处理数据帧和显示图像的功能</h2><p id="2bdf" class="pw-post-body-paragraph if ig hi ih b ii la ik il im lb io ip iq lc is it iu ld iw ix iy le ja jb jc hb bi translated">创建一个函数来操作数据帧和显示图像，并将其输入到小部件包中:</p><pre class="jk jl jm jn fd kq kr ks kt aw ku bi"><span id="997f" class="jv jw hi kr b fi kv kw l kx ky">def image_viewer(grid_length, grid_width, sport):<br/>    <br/>    images_df = sports_df[sports_df['sport'] == sport]  # filter by sport input<br/>    image_grid = images_df['image_url']<br/>    image_grid_size = grid_length + grid_width<br/>    image_grid = image_grid.iloc[0:image_grid_size] # size of grid <br/>    image_grid = image_grid.as_matrix() #turn into matrix for reshaping<br/>    image_grid = image_grid.reshape(grid_length, grid_width) <br/>    image_grid = pd.DataFrame(image_grid)<br/>    image_grid.columns =    list(string.ascii_lowercase[:len(image_grid.columns)])</span><span id="e72d" class="jv jw hi kr b fi lm kw l kx ky">    image_grid_html = HTML(image_grid.to_html(escape=False ,formatters=dict(a=path_to_image_html, <br/>                                                        b=path_to_image_html)))</span><span id="1efc" class="jv jw hi kr b fi lm kw l kx ky">    display(image_grid_html)<br/>    show_im()</span></pre><h2 id="ce1b" class="jv jw hi bd jx jy jz ka kb kc kd ke kf iq kg kh ki iu kj kk kl iy km kn ko kp bi translated">使用小部件显示图像</h2><p id="2080" class="pw-post-body-paragraph if ig hi ih b ii la ik il im lb io ip iq lc is it iu ld iw ix iy le ja jb jc hb bi translated">最后，将数据帧、网格参数和sport过滤器传递到widgets包中。</p><pre class="jk jl jm jn fd kq kr ks kt aw ku bi"><span id="78f3" class="jv jw hi kr b fi kv kw l kx ky">sport_list = ['soccer', 'basketball']  # list of sports</span><span id="885f" class="jv jw hi kr b fi lm kw l kx ky">#define widgets<br/>display_widget = widgets.Dropdown(options=sport_list)</span><span id="1aea" class="jv jw hi kr b fi lm kw l kx ky">#create tabs<br/>tab_nest = widgets.Tab()<br/>tab_nest.set_title(0, 'Sports Images')</span><span id="6326" class="jv jw hi kr b fi lm kw l kx ky">#interact function in isolation<br/>f1 = interactive(image_viewer, grid_length=2, grid_width=2, sport=display_widget);</span><span id="5b89" class="jv jw hi kr b fi lm kw l kx ky">tab_nest.children = [VBox(children = f1.children)]<br/>display(tab_nest)</span></pre><p id="7ee3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最终结果是一个模块，您可以在其中选择运动，该运动的图像显示在一个动态小部件中:</p><figure class="jk jl jm jn fd jo er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es ln"><img src="../Images/5c708ff06c4374837189e45a70d2d571.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M9xpuJEUtfWOIQ8zXz8g3A.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">使用widget应用程序显示图像</figcaption></figure><p id="9c79" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Gif版本:</p><figure class="jk jl jm jn fd jo"><div class="bz dy l di"><div class="jp jq l"/></div></figure><p id="d694" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完整代码和输入数据请看我的<a class="ae lo" href="https://github.com/spencernelsonucla/image_display_app" rel="noopener ugc nofollow" target="_blank"> github </a>。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="7e23" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">斯潘塞毕业于加州大学洛杉矶分校，是洛杉矶一家电子商务公司的数据科学家。我的一些爱好是高保真音响、健康生活和数据科学。在<a class="ae lo" href="https://www.linkedin.com/in/spencernelsonucla/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上和我联系，写的时候提到这个故事。</p></div></div>    
</body>
</html>