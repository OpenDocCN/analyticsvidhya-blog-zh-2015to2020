<html>
<head>
<title>Building RGB Color Classifier: Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建 RGB 颜色分类器:第 2 部分</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/building-rgb-color-classifier-part-2-8c49a57f6b91?source=collection_archive---------15-----------------------#2020-09-21">https://medium.com/analytics-vidhya/building-rgb-color-classifier-part-2-8c49a57f6b91?source=collection_archive---------15-----------------------#2020-09-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="4167" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated"><a class="ae ix" href="#171e" rel="noopener ugc nofollow">使用 Streamlit </a>创建 Web 应用<a class="ae ix" href="#7272" rel="noopener ugc nofollow">使用 Heroku </a>部署</h2></div><figure class="iz ja jb jc fd jd er es paragraph-image"><div role="button" tabindex="0" class="je jf di jg bf jh"><div class="er es iy"><img src="../Images/3ae6c48bc3732882a5037bf9e561a34b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RVNs_T5maqSbscb-zhJk2Q.png"/></div></div><figcaption class="jk jl et er es jm jn bd b be z dx translated"><a class="ae ix" href="https://rgb-color-classifier.herokuapp.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="bd jo"> RGB 颜色分类器</strong> </a> <strong class="bd jo"> </strong>(图片由作者提供)</figcaption></figure><p id="c7b0" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated">在<a class="ae ix" rel="noopener" href="/@ajinkyashailendrachavan/building-rgb-color-classifier-part-1-af58e3bcfef7">第一部分</a>中，我们学习了数据集创建、预处理、构建人工神经网络模型及其性能评估。<br/>在这一部分，我们将学习使用 Streamlit 为我们的 ANN 模型创建一个 Web 应用程序，并使用 Heroku 部署它。</p><h1 id="3e29" class="kl km hi bd jo kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">正在设置…</h1><p id="82fd" class="pw-post-body-paragraph jp jq hi jr b js lc ij ju jv ld im jx jy le ka kb kc lf ke kf kg lg ki kj kk hb bi translated">我们必须首先在<strong class="jr hj"> Anaconda 提示符</strong>中设置我们的<strong class="jr hj">虚拟环境</strong>，在这里我们将运行我们的 python 代码并安装所需的依赖项。你可以从这个<a class="ae ix" href="https://docs.conda.io/projects/conda/en/latest/user-guide/install/index.html" rel="noopener ugc nofollow" target="_blank">链接</a>安装 Anaconda，并使用这里给出的<a class="ae ix" href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html#creating-an-environment-with-commands" rel="noopener ugc nofollow" target="_blank">指南创建一个虚拟环境。虚拟环境是维护 python 项目依赖性的一个非常重要的工具。您可以通过在您的虚拟环境的工作目录中复制给定的</a><a class="ae ix" href="https://gist.github.com/AjinkyaChavan9/bf3a9f822b6d7492455b5675e03361ad" rel="noopener ugc nofollow" target="_blank"><em class="lh">requirements . txt</em></a>文件，并在<em class="lh"> Anaconda 提示符</em> : <code class="du li lj lk ll b">pip install -r requirements.txt</code> <br/>中运行以下命令来安装我们的项目所需的所有依赖项</p><figure class="iz ja jb jc fd jd"><div class="bz dy l di"><div class="lm ln l"/></div></figure><figure class="iz ja jb jc fd jd er es paragraph-image"><div role="button" tabindex="0" class="je jf di jg bf jh"><div class="er es lo"><img src="../Images/3e39e0c7a9e2fe089bb3a74b5345bb8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*187lUNEFpZSua31v2QhC4g.png"/></div></div><figcaption class="jk jl et er es jm jn bd b be z dx translated"><strong class="bd jo"> Anaconda 提示命令</strong>(图片由作者提供)</figcaption></figure></div><div class="ab cl lp lq gp lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="hb hc hd he hf"><h1 id="e8df" class="kl km hi bd jo kn lw kp kq kr lx kt ku io ly ip kw ir lz is ky iu ma iv la lb bi translated">分类功能</h1><p id="ce42" class="pw-post-body-paragraph jp jq hi jr b js lc ij ju jv ld im jx jy le ka kb kc lf ke kf kg lg ki kj kk hb bi translated">在开始使用 Web 应用程序之前，我们必须首先创建一个分类函数，用于预测从第 1 部分的训练模型(<a class="ae ix" href="https://github.com/AjinkyaChavan9/RGB-Color-Classifier-with-Deep-Learning-using-Keras-and-Tensorflow/blob/master/RGB_Color_Classifier_app/colormodel_trained_90.h5" rel="noopener ugc nofollow" target="_blank"><em class="lh">Color model _ Trained _ 90 . H5</em></a>’)输出的颜色标签。<br/>预测颜色等级的代码如下⏬</p><figure class="iz ja jb jc fd jd"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="f795" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated">注意:确保训练模型(<a class="ae ix" href="https://github.com/AjinkyaChavan9/RGB-Color-Classifier-with-Deep-Learning-using-Keras-and-Tensorflow/blob/master/RGB_Color_Classifier_app/colormodel_trained_90.h5" rel="noopener ugc nofollow" target="_blank"><em class="lh">color model _ trained _ 90 . H5</em></a>)和<em class="lh"> color_classifier.py </em>文件存在于您的虚拟环境的同一个工作目录中。</p><p id="6e01" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated">给定的<em class="lh"> predict_color </em>函数返回表示 RGB 输入的预测颜色的字符串。它基本上从我们的模型为给定的 RGB 输入预测的所有颜色类置信度值中选择具有最高置信度值的颜色类。此处给出了更详细的解释<a class="ae ix" rel="noopener" href="/analytics-vidhya/building-rgb-color-classifier-part-1-af58e3bcfef7#6656">。</a></p></div><div class="ab cl lp lq gp lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="hb hc hd he hf"><h1 id="171e" class="kl km hi bd jo kn lw kp kq kr lx kt ku io ly ip kw ir lz is ky iu ma iv la lb bi translated">使用 Streamlit 创建 Web 应用程序</h1><figure class="iz ja jb jc fd jd er es paragraph-image"><div role="button" tabindex="0" class="je jf di jg bf jh"><div class="er es mb"><img src="../Images/1ce91196cbed6917161acafc819e87bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*njd7leqKQ9uZ22V5wA3jng.png"/></div></div><figcaption class="jk jl et er es jm jn bd b be z dx translated">Streamlit 徽标(<a class="ae ix" href="https://www.streamlit.io/brand" rel="noopener ugc nofollow" target="_blank">来源</a>)</figcaption></figure><p id="4c85" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated">让我们通过使用令人惊叹的<a class="ae ix" href="https://www.streamlit.io/" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>框架，开始用纯 Python 创建一个 Web 应用程序。下面给出了我们的 web 应用程序的代码⏬</p><figure class="iz ja jb jc fd jd"><div class="bz dy l di"><div class="lm ln l"/></div></figure><ul class=""><li id="ea6c" class="mc md hi jr b js jt jv jw jy me kc mf kg mg kk mh mi mj mk bi translated">我们使用<a class="ae ix" href="https://docs.streamlit.io/en/stable/api.html#add-widgets-to-sidebar" rel="noopener ugc nofollow" target="_blank"> streamlit.sidebar </a>创建了一个侧边栏，其中我们添加了关于的<em class="lh">和用于显示关于我们应用的<em class="lh">信息</em>的<em class="lh">贡献</em>部分。</em></li><li id="3f4f" class="mc md hi jr b js ml jv mm jy mn kc mo kg mp kk mh mi mj mk bi translated"><strong class="jr hj"> RGB 颜色分类器</strong>的<em class="lh">动画彩虹标题</em>是使用 HTML &amp; CSS 创建的，并使用<code class="du li lj lk ll b">st.markdown(Title_html, unsafe_allow_html=True)</code>渲染，其中<code class="du li lj lk ll b">Title_html</code>是一个字符串，包含彩虹渐变文本动画的 HTML CSS 代码，我在这里找到了<a class="ae ix" href="https://youtu.be/Hvrl93x-P3s" rel="noopener ugc nofollow" target="_blank"/>。你也可以给一个简单的<a class="ae ix" href="https://docs.streamlit.io/en/stable/api.html#streamlit.title" rel="noopener ugc nofollow" target="_blank">标题标题</a>由<code class="du li lj lk ll b">st.title(“RGB Color Classifier”)</code></li><li id="e1c9" class="mc md hi jr b js ml jv mm jy mn kc mo kg mp kk mh mi mj mk bi translated">我们通过<a class="ae ix" href="https://docs.streamlit.io/en/stable/api.html#streamlit.slider" rel="noopener ugc nofollow" target="_blank"> st.slider </a>分别为红色、绿色和蓝色值创建了三个输入滑块。输入滑块的完整 RGB 值范围从 0 到 255 分别由<em class="lh">最小值</em> &amp; <em class="lh">最大值</em>参数设置。</li><li id="e215" class="mc md hi jr b js ml jv mm jy mn kc mo kg mp kk mh mi mj mk bi translated">从滑块选择的 RGB 输入由<a class="ae ix" href="https://docs.streamlit.io/en/stable/api.html#streamlit.write" rel="noopener ugc nofollow" target="_blank"> st.write </a>显示</li><li id="56b0" class="mc md hi jr b js ml jv mm jy mn kc mo kg mp kk mh mi mj mk bi translated"><em class="lh"> display_image( ) </em>函数用于显示用户从滑块输入的 RGB 颜色。该功能利用枕头库。</li><li id="ee20" class="mc md hi jr b js ml jv mm jy mn kc mo kg mp kk mh mi mj mk bi translated"><em class="lh">预测</em> <em class="lh">按钮</em>是使用<code class="du li lj lk ll b">st.button(“Predict”)</code>创建的，它返回一个布尔值，表示按钮是否被点击。</li><li id="921b" class="mc md hi jr b js ml jv mm jy mn kc mo kg mp kk mh mi mj mk bi translated">点击预测按钮调用<em class="lh"> predict_color( ) </em>函数，将红色、绿色和蓝色滑块值作为<em class="lh">参数</em>传递给它。该函数然后返回一个包含预测颜色标签的<em class="lh">字符串</em>，该预测颜色标签存储在<em class="lh">结果</em>变量中。</li><li id="f6c0" class="mc md hi jr b js ml jv mm jy mn kc mo kg mp kk mh mi mj mk bi translated">然后由<code class="du li lj lk ll b">st.success(‘The Color is {}!’.format(result))</code>将预测的颜色结果打印为<a class="ae ix" href="https://docs.streamlit.io/en/stable/api.html#streamlit.success" rel="noopener ugc nofollow" target="_blank">成功</a>消息</li></ul><p id="f793" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated">因此，我们创建了<em class="lh"> RGB_web_app.py </em>文件。为了在浏览器中运行 Web 应用程序，在 Anaconda 提示符下键入以下命令:<code class="du li lj lk ll b">streamlit run <em class="lh">RGB_web_app</em>.py<br/></code>注意:确保<em class="lh"> RGB_web_app.py </em>、<em class="lh"> color_classifier.py </em>文件和训练模型(<a class="ae ix" href="https://github.com/AjinkyaChavan9/RGB-Color-Classifier-with-Deep-Learning-using-Keras-and-Tensorflow/blob/master/RGB_Color_Classifier_app/colormodel_trained_90.h5" rel="noopener ugc nofollow" target="_blank"><em class="lh">color model _ trained _ 90 . H5</em></a>)位于虚拟环境的同一个工作目录中，并且还必须安装所需的依赖项以便无错误执行。</p></div><div class="ab cl lp lq gp lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="hb hc hd he hf"><h1 id="7272" class="kl km hi bd jo kn lw kp kq kr lx kt ku io ly ip kw ir lz is ky iu ma iv la lb bi translated">使用 Heroku 部署</h1><p id="e24c" class="pw-post-body-paragraph jp jq hi jr b js lc ij ju jv ld im jx jy le ka kb kc lf ke kf kg lg ki kj kk hb bi translated">Heroku 是一个很棒的平台，它负责在云上部署我们的应用程序。我们所要做的就是定义一个<em class="lh"> Procfile，setup.sh </em>文件以及我们之前创建的 web app 文件和<em class="lh"> requirements.txt </em>文件。您必须拥有 Heroku 帐户才能部署您的应用。下面给出的是<em class="lh"> setup.sh </em>和<em class="lh"> Procfile。</em></p><figure class="iz ja jb jc fd jd"><div class="bz dy l di"><div class="lm ln l"/></div></figure><figure class="iz ja jb jc fd jd"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="7d3b" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated"><em class="lh"> setup.sh </em>是一个 shell 脚本，它创建目录 streamlit 并设置<em class="lh"> config.toml </em>文件<br/> <em class="lh"> Procfile </em>是一个文本文件(没有任何文件扩展名)，包含启动我们的应用程序的命令。它执行<em class="lh"> setup.sh </em>脚本并运行我们的应用程序。</p><p id="7ddb" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated">我们现在已经准备好了部署所需的基本文件。现在，我们必须安装<em class="lh"> Heroku CLI </em>，它使用<em class="lh"> git </em>将我们的文件推送到 Heroku。这里有一个<a class="ae ix" href="https://devcenter.heroku.com/articles/getting-started-with-python#set-up" rel="noopener ugc nofollow" target="_blank">链接</a>，用于在您各自的操作系统上安装该链接。安装后，您可以从操作系统命令行界面(CLI)运行 Heroku 命令。</p><p id="d8f9" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated">首先，我们从<a class="ae ix" href="https://dashboard.heroku.com/new-app" rel="noopener ugc nofollow" target="_blank"> Heroku 仪表板</a>创建一个名为<em class="lh">RGB-color-classifier-demo</em>的新应用。</p><figure class="iz ja jb jc fd jd er es paragraph-image"><div class="er es mq"><img src="../Images/da921039865ace6775fc51800fbf49b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*hasX7PG3_w-hQRo9NbtK0w.png"/></div></figure><p id="586f" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated">创建应用程序后，还会显示部署所需的 Heroku Git 命令⏬</p><figure class="iz ja jb jc fd jd er es paragraph-image"><div class="er es mq"><img src="../Images/aec0e6041095e2570ef07bb968375612.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*YXYr_esnhtXXc68M5tXjFA.png"/></div><figcaption class="jk jl et er es jm jn bd b be z dx translated">Heroku 命令</figcaption></figure><ul class=""><li id="e650" class="mc md hi jr b js jt jv jw jy me kc mf kg mg kk mh mi mj mk bi translated">我们使用<code class="du li lj lk ll b">heroku login</code>登录 Heroku</li><li id="55b2" class="mc md hi jr b js ml jv mm jy mn kc mo kg mp kk mh mi mj mk bi translated">将目录更改为我们的工作目录，其中包含 Web App 文件:<em class="lh"> Procfile </em>、<em class="lh"> setup.sh </em>、<em class="lh"> requirements.txt </em>、<em class="lh"> RGB_web_app.py </em>、<em class="lh"> color_classifier.py </em>、<em class="lh">color model _ trained _ 90 . H5</em></li><li id="b849" class="mc md hi jr b js ml jv mm jy mn kc mo kg mp kk mh mi mj mk bi translated">使用<code class="du li lj lk ll b">git init</code>将当前目录初始化为 Git 存储库</li><li id="ad60" class="mc md hi jr b js ml jv mm jy mn kc mo kg mp kk mh mi mj mk bi translated">为了给 Heroku 上的应用 repo 设置 Git remote，我们使用了<code class="du li lj lk ll b">heroku git:remote -a rgb-color-classifier-demo</code></li><li id="27b2" class="mc md hi jr b js ml jv mm jy mn kc mo kg mp kk mh mi mj mk bi translated">然后我们使用<code class="du li lj lk ll b">git add .</code>将所有文件添加到 git remote</li><li id="10b3" class="mc md hi jr b js ml jv mm jy mn kc mo kg mp kk mh mi mj mk bi translated">我们用<code class="du li lj lk ll b">git commit -am “first commit”</code>提交我们的变更</li><li id="9823" class="mc md hi jr b js ml jv mm jy mn kc mo kg mp kk mh mi mj mk bi translated">最后，为了部署我们的应用程序，我们使用<code class="du li lj lk ll b">git push heroku master</code></li></ul><figure class="iz ja jb jc fd jd er es paragraph-image"><div role="button" tabindex="0" class="je jf di jg bf jh"><div class="er es lo"><img src="../Images/c5b138de5c58491a5cc0b893e800985b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fh6hP38cvvO7zE0aqwThJg.png"/></div></div></figure><figure class="iz ja jb jc fd jd er es paragraph-image"><div role="button" tabindex="0" class="je jf di jg bf jh"><div class="er es mr"><img src="../Images/1de8faae0a29383474a0d7aa4afb2c50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hv_SsyDI9p2lYgErtpBotg.png"/></div></div></figure><p id="e0ee" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated">因此，我们的 RGB 颜色分类器 Web 应用程序最终部署在 Heroku 上！！</p><figure class="iz ja jb jc fd jd er es paragraph-image"><div role="button" tabindex="0" class="je jf di jg bf jh"><div class="er es ms"><img src="../Images/5b25fd6c96bd5bcfcf451cbff43c8f75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cfBIW8Xi5hFDBrdS16JGpA.png"/></div></div><figcaption class="jk jl et er es jm jn bd b be z dx translated">Web 应用预览(图片由作者提供)</figcaption></figure><blockquote class="mt"><p id="35f7" class="mu mv hi bd mw mx my mz na nb nc kk dx translated">我想引用亨利·福特的一句名言来结束我的演讲:“质量意味着在没人注意的时候把事情做好”</p></blockquote></div><div class="ab cl lp lq gp lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="hb hc hd he hf"><h1 id="b4fc" class="kl km hi bd jo kn lw kp kq kr lx kt ku io ly ip kw ir lz is ky iu ma iv la lb bi translated">感谢您的阅读。希望你喜欢这个故事！</h1><p id="91f2" class="pw-post-body-paragraph jp jq hi jr b js lc ij ju jv ld im jx jy le ka kb kc lf ke kf kg lg ki kj kk hb bi translated">我对写博客有点陌生。如果您发现任何错误或有任何建议，欢迎您这样做😃</p><p id="1095" class="pw-post-body-paragraph jp jq hi jr b js jt ij ju jv jw im jx jy jz ka kb kc kd ke kf kg kh ki kj kk hb bi translated">在那之前保持微笑，快乐学习😊</p><h2 id="f875" class="nd km hi bd jo ne nf ng kq nh ni nj ku jy nk nl kw kc nm nn ky kg no np la nq bi translated">阿金基亚·查万</h2></div></div>    
</body>
</html>