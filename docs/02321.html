<html>
<head>
<title>Knowledge Graph Creation: Part I</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">知识图创建:第一部分</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/knowledge-graph-creation-part-i-27c7c13c2560?source=collection_archive---------6-----------------------#2019-12-11">https://medium.com/analytics-vidhya/knowledge-graph-creation-part-i-27c7c13c2560?source=collection_archive---------6-----------------------#2019-12-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="5c57" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">如何构造知识图？</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/46539202a71bb26be330e9326f326111.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T8hiD03AB1k-0OhuZvqIwA.png"/></div></div></figure><p id="b6cf" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在之前的<a class="ae kf" rel="noopener" href="/analytics-vidhya/knowledge-graphs-an-overview-2d0d250dd3b9?source=friends_link&amp;sk=f15177c03a3f889b829523f4f0f4e7a5">故事</a>中，我们对知识图做了一个温和的介绍，并获得了一些关于它们的直觉。这篇文章将由两部分组成:在第一部分，我们将做一些自然语言处理，并使用spaCy从非结构化数据中提取信息，在第二部分，我们将使用这些信息构建我们的知识图。</p><h2 id="462d" class="kg kh hi bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la bi translated">带有空间的自然语言处理</h2><p id="a42f" class="pw-post-body-paragraph jj jk hi jl b jm lb ij jo jp lc im jr js ld ju jv jw le jy jz ka lf kc kd ke hb bi translated"><strong class="jl hj">自然语言处理(NLP) </strong>是人工智能的一个子领域，它试图将计算机和人类语言联系起来。<a class="ae kf" href="https://spacy.io/usage/spacy-101" rel="noopener ugc nofollow" target="_blank"> <strong class="jl hj"> spaCy </strong> </a>是Python中NLP的免费开源库。它有很多内置功能。因为从非结构化中处理和获得一些见解是很重要的，而spaCy通常用于此目的。</p><blockquote class="lg lh li"><p id="5098" class="jj jk lj jl b jm jn ij jo jp jq im jr lk jt ju jv ll jx jy jz lm kb kc kd ke hb bi translated">装置</p></blockquote><p id="94c8" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">人们可以使用Python包管理器<strong class="jl hj"> pip </strong>轻松安装spaCy。</p><pre class="iy iz ja jb fd ln lo lp lq aw lr bi"><span id="97d0" class="kg kh hi lo b fi ls lt l lu lv">$ pip install spacy</span></pre><blockquote class="lg lh li"><p id="9d56" class="jj jk lj jl b jm jn ij jo jp jq im jr lk jt ju jv ll jx jy jz lm kb kc kd ke hb bi translated">下载模型和数据</p></blockquote><p id="e943" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">spaCy中有各种不同类型的模型，让我们下载并加载其中一个。我们将把模型存储在一个<strong class="jl hj"> nlp </strong>对象中，该对象是一个由<em class="lj"> en_core_web_sm加载的语言模型实例。</em></p><pre class="iy iz ja jb fd ln lo lp lq aw lr bi"><span id="e905" class="kg kh hi lo b fi ls lt l lu lv">$ python -m spacy download en_core_web_sm</span><span id="a8cc" class="kg kh hi lo b fi lw lt l lu lv">&gt;&gt;&gt; import spacy<br/>&gt;&gt;&gt; nlp = spacy.load('en_core_web_sm')</span></pre><blockquote class="lg lh li"><p id="048c" class="jj jk lj jl b jm jn ij jo jp jq im jr lk jt ju jv ll jx jy jz lm kb kc kd ke hb bi translated">使用空间</p></blockquote><p id="ab52" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">让我们使用spaCy读取一个文本并存储在一个<strong class="jl hj"> doc </strong>对象中，该对象是一个用于访问语言注释的容器。</p><pre class="iy iz ja jb fd ln lo lp lq aw lr bi"><span id="9f3c" class="kg kh hi lo b fi ls lt l lu lv">&gt;&gt;&gt; doc = nlp("This story is about Natural Language Processing using spaCy and creating knowledge base.")</span></pre><blockquote class="lg lh li"><p id="25bd" class="jj jk lj jl b jm jn ij jo jp jq im jr lk jt ju jv ll jx jy jz lm kb kc kd ke hb bi translated">标记化</p></blockquote><p id="9253" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">标记化是一个允许我们识别文本中基本单位的过程。让我们提取给定文档的基本单元，即令牌:</p><pre class="iy iz ja jb fd ln lo lp lq aw lr bi"><span id="54f4" class="kg kh hi lo b fi ls lt l lu lv">&gt;&gt;&gt; print ([token.text for token in doc])<br/>['This', 'story', 'is', 'about', 'Natural', 'Language', 'Processing', 'using', 'spaCy', 'and', 'creating', 'knowledge', 'base', '.']</span></pre><blockquote class="lg lh li"><p id="bb7f" class="jj jk lj jl b jm jn ij jo jp jq im jr lk jt ju jv ll jx jy jz lm kb kc kd ke hb bi translated">实体提取</p></blockquote><p id="2350" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们还可以进行进一步的分析，比如获取句子的句法结构。<strong class="jl hj">词类</strong>或<strong class="jl hj">词性</strong>是一个语法角色，解释一个特定的单词在句子中是如何使用的。有八种词性:</p><ol class=""><li id="7af2" class="lx ly hi jl b jm jn jp jq js lz jw ma ka mb ke mc md me mf bi translated">名词</li><li id="dc2e" class="lx ly hi jl b jm mg jp mh js mi jw mj ka mk ke mc md me mf bi translated">代词</li><li id="958b" class="lx ly hi jl b jm mg jp mh js mi jw mj ka mk ke mc md me mf bi translated">形容词</li><li id="f03e" class="lx ly hi jl b jm mg jp mh js mi jw mj ka mk ke mc md me mf bi translated">动词</li><li id="8aed" class="lx ly hi jl b jm mg jp mh js mi jw mj ka mk ke mc md me mf bi translated">副词</li><li id="f0dd" class="lx ly hi jl b jm mg jp mh js mi jw mj ka mk ke mc md me mf bi translated">介词</li><li id="e381" class="lx ly hi jl b jm mg jp mh js mi jw mj ka mk ke mc md me mf bi translated">结合</li><li id="b9db" class="lx ly hi jl b jm mg jp mh js mi jw mj ka mk ke mc md me mf bi translated">感叹词</li></ol><p id="58f7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">为了从文本中提取实体，让我们获取POS标签。</p><pre class="iy iz ja jb fd ln lo lp lq aw lr bi"><span id="3fb5" class="kg kh hi lo b fi ls lt l lu lv">&gt;&gt;&gt;for token in doc: <br/>...   print(token.text, "--&gt;", token.pos_)</span><span id="70b3" class="kg kh hi lo b fi lw lt l lu lv">This --&gt; DET<br/>story --&gt; NOUN<br/>is --&gt; AUX<br/>about --&gt; ADP<br/>Natural --&gt; PROPN<br/>Language --&gt; PROPN<br/>Processing --&gt; PROPN<br/>using --&gt; VERB<br/>spaCy --&gt; NOUN<br/>and --&gt; CCONJ<br/>creating --&gt; VERB<br/>knowledge --&gt; NOUN<br/>base --&gt; NOUN<br/>. --&gt; PUNCT</span></pre><blockquote class="lg lh li"><p id="ffe8" class="jj jk lj jl b jm jn ij jo jp jq im jr lk jt ju jv ll jx jy jz lm kb kc kd ke hb bi translated">关系抽取</p></blockquote><p id="2413" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">对于各种情况，仅使用POS标签是不够的，还需要进一步的分析，如依赖解析。依存句法分析是提取句子的依存句法来表示其语法结构的过程。现在，让我们提取实体之间的依赖关系:</p><pre class="iy iz ja jb fd ln lo lp lq aw lr bi"><span id="5374" class="kg kh hi lo b fi ls lt l lu lv">&gt;&gt;&gt;for token in doc: <br/>...    print(token.text, "--&gt;",token.dep_)</span><span id="b71d" class="kg kh hi lo b fi lw lt l lu lv">This --&gt; det<br/>story --&gt; nsubj<br/>is --&gt; ROOT<br/>about --&gt; prep<br/>Natural --&gt; compound<br/>Language --&gt; compound<br/>Processing --&gt; pobj<br/>using --&gt; advcl<br/>spaCy --&gt; dobj<br/>and --&gt; cc<br/>creating --&gt; conj<br/>knowledge --&gt; compound<br/>base --&gt; dobj<br/>. --&gt; punct</span></pre><blockquote class="lg lh li"><p id="3fda" class="jj jk lj jl b jm jn ij jo jp jq im jr lk jt ju jv ll jx jy jz lm kb kc kd ke hb bi translated">形象化</p></blockquote><p id="ed25" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">使用spaCy的内置可视化工具<strong class="jl hj"> displaCy </strong>也可以实现可视化。让我们看看给定文本的位置标签:</p><pre class="iy iz ja jb fd ln lo lp lq aw lr bi"><span id="46af" class="kg kh hi lo b fi ls lt l lu lv">&gt;&gt;&gt;from spacy import displacy</span><span id="531b" class="kg kh hi lo b fi lw lt l lu lv">&gt;&gt;&gt;about_interest_text = ('Let\'s create knowledge graph with ...spaCy.')<br/>&gt;&gt;&gt;about_interest_doc = nlp(about_interest_text)<br/>&gt;&gt;&gt;displacy.serve(about_interest_doc, style='dep')</span></pre><p id="cf1f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">您可以通过在浏览器中打开<code class="du ml mm mn lo b">http://127.0.0.1:5000</code>来查看可视化效果:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mo"><img src="../Images/b287536762318e063df320a848adfdef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eXh2LYiUSIzOCC33tvjYmg.png"/></div></div></figure><blockquote class="lg lh li"><p id="3ca8" class="jj jk lj jl b jm jn ij jo jp jq im jr lk jt ju jv ll jx jy jz lm kb kc kd ke hb bi translated">句子分割</p></blockquote><p id="4f5d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">通常，文本由几个句子组成，句子检测是将文本划分成有语言意义的单元的重要特征。让我们摘录课文中关于阿达·洛芙莱斯的句子:</p><pre class="iy iz ja jb fd ln lo lp lq aw lr bi"><span id="3d0c" class="kg kh hi lo b fi ls lt l lu lv">&gt;&gt;&gt;text_ada = ('Ada Lovelace was an English mathematician and' <br/>            ' writer, chiefly known for her work on'<br/>            ' mechanical general-purpose computer, the'<br/>            ' Analytical Engine. She was the first to'<br/>            ' recognise that the machine had applications'<br/>            ' beyond pure calculation, and published the'<br/>            ' first algorithm intended to be carried out' <br/>            ' by such a machine. As a result, she is'<br/>            ' sometimes regarded as the first to recognise'<br/>            ' the full potential of a computing machine and'<br/>            ' one of the first computer programmers.')<br/>&gt;&gt;&gt;doc_ada = nlp(text_ada)<br/>&gt;&gt;&gt;sentences = list(doc_ada.sents)<br/>&gt;&gt;&gt;print('Number of sentences: ' + str(len(sentences)))</span><span id="ea43" class="kg kh hi lo b fi lw lt l lu lv">&gt;&gt;&gt;for sentence in sentences:<br/>...    print ('-' + str(sentence))</span><span id="8a3a" class="kg kh hi lo b fi lw lt l lu lv">Number of sentences: 3<br/>-Ada Lovelace was an English mathematician and writer, chiefly known for her work on mechanical general-purpose computer, the Analytical Engine.<br/>-She was the first to recognise that the machine had applications beyond pure calculation, and published the first algorithm intended to be carried out by such a machine.<br/>-As a result, she is sometimes regarded as the first to recognise the full potential of a computing machine and one of the first computer programmers.</span></pre><p id="a706" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">从上面的例子可以看出，spaCy使用句号(<code class="du ml mm mn lo b">.</code>)作为句子分隔符，能够正确地识别英语中的句子。</p><h2 id="0201" class="kg kh hi bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la bi translated">总而言之…</h2><p id="7823" class="pw-post-body-paragraph jj jk hi jl b jm lb ij jo jp lc im jr js ld ju jv jw le jy jz ka lf kc kd ke hb bi translated">现在，我们知道如何执行一些基本的自然语言处理任务，如标记化和句子分割。此外，我们有足够的知识如何获得实体和实体之间的关系。我们将在这个故事的第二部分使用这些知识，这样，每个实体将被表示为节点，这些实体之间的关系将是我们的知识图中的边。让我们看看如何！敬请期待！</p></div></div>    
</body>
</html>