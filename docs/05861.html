<html>
<head>
<title>Day 1: Making MATLAB “fun”</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">第一天:让MATLAB变得“有趣”</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/day-1-making-matlab-fun-ad850eaffbde?source=collection_archive---------8-----------------------#2020-05-04">https://medium.com/analytics-vidhya/day-1-making-matlab-fun-ad850eaffbde?source=collection_archive---------8-----------------------#2020-05-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/79537b6ce4110e95f9886351b75bfe5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gSSexNkX__Sbi50bTnkVlw.png"/></div></div></figure><p id="31dc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在MATLAB中，让你的代码与众不同的最重要的工具之一是“有趣”的操作家族:<em class="jo"> arrayfun </em>、<em class="jo"> structfun </em>、<em class="jo"> cellfun </em>、<em class="jo"> rowfun </em>等等。</p><p id="e0ca" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面是一个最简单的例子:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="60db" class="jy jz hi ju b fi ka kb l kc kd">output = arrayfun( @(x) x+1, [1:10] )</span></pre><p id="c46c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">试着猜测输出将包含什么，然后进入MATLAB，自己尝试一下。</p></div><div class="ab cl ke kf gp kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hb hc hd he hf"><p id="c344" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我遇到过精通MATLAB的研究生，他们仍然觉得MATLAB中“有趣”的操作令人困惑、神秘，一点也不有趣。出现这种情况有几个原因:</p><ul class=""><li id="bdca" class="kl km hi is b it iu ix iy jb kn jf ko jj kp jn kq kr ks kt bi translated"><strong class="is hj">“有趣”操作的输入之一是函数</strong>，而不仅仅是数字或数组。这种把函数当做输入的思维方式对于基础用户来说并不常见。</li><li id="8d2d" class="kl km hi is b it ku ix kv jb kw jf kx jj ky jn kq kr ks kt bi translated">他们经常使用匿名函数。匿名函数存在于函数或命令行中，对于主要使用函数的“开箱即用”实现的用户来说，它们通常是陌生的(例如。m文件)。</li></ul><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="e554" class="jy jz hi ju b fi ka kb l kc kd">myfxn = @(x) x+1 % An anonymous function</span></pre><ul class=""><li id="b0b6" class="kl km hi is b it iu ix iy jb kn jf ko jj kp jn kq kr ks kt bi translated"><strong class="is hj">大多数人学的第一个“好玩”的操作是<em class="jo">cell fun</em>T15】。这种“有趣”的操作很容易也是最困难的，因为单元格在访问其内容方面已经不简单了，并且值单元格、单元格数组和单元格字符串之间的差异可能会令人混淆。</strong></li><li id="f8a5" class="kl km hi is b it ku ix kv jb kw jf kx jj ky jn kq kr ks kt bi translated">与此相关，“有趣”的操作需要了解MATLAB中的变量类型。您不能将单元格数组输入到<em class="jo"> cellfun </em>中，但是您可以输入一个多维单元格并对单元格中的每个元素进行操作。同样，您不能将数组输入到在表上工作的<em class="jo"> rowfun </em>中。</li></ul></div><div class="ab cl ke kf gp kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hb hc hd he hf"><p id="f944" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面我将提出几个任务，并展示一个“有趣”的操作是如何简化它们的。</p><h2 id="127c" class="jy jz hi bd kz la lb lc ld le lf lg lh jb li lj lk jf ll lm ln jj lo lp lq lr bi translated">从细胞中获取特定元素。</h2><p id="0569" class="pw-post-body-paragraph iq ir hi is b it ls iv iw ix lt iz ja jb lu jd je jf lv jh ji jj lw jl jm jn hb bi translated">假设您在单元格数组中有数据，如下所示:</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/5723fec80396fcab92b59baf5a462da7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KCCB6_mTyRO5AAoNKDiIFA.png"/></div></div><figcaption class="ly lz et er es ma mb bd b be z dx translated">要在MATLAB中生成此内容，请使用:mydata = arrayfun( @(x) rand(1，x)，[50，51，52，53，52，50]，' UniformOutput '，false)</figcaption></figure><p id="1987" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">出于某种原因，您希望从每个数组中获取第一个元素，您可以通过对循环使用<em class="jo">来实现，如下所示:</em></p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="3ac7" class="jy jz hi ju b fi ka kb l kc kd">out = []<br/>for i = 1:numel( mydata)<br/>    out(i) = mydata{i}( 1 )<br/>end</span></pre><p id="b3fe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面是同样的事情，只不过用的是<em class="jo"> cellfun </em>:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="25b5" class="jy jz hi ju b fi ka kb l kc kd">out = cellfun( @(x) x(1), mydata )</span></pre><p id="1887" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">提示:</strong>任何你想要的函数都可以放入匿名函数位置。所以你也可以用这个来得到每个单元格的长度。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="1b20" class="jy jz hi ju b fi ka kb l kc kd">output = cellfun( @(x) numel(x), mydata )</span></pre><h2 id="2f73" class="jy jz hi bd kz la lb lc ld le lf lg lh jb li lj lk jf ll lm ln jj lo lp lq lr bi translated">从多个变量中提取信息。</h2><p id="3b6a" class="pw-post-body-paragraph iq ir hi is b it ls iv iw ix lt iz ja jb lu jd je jf lv jh ji jj lw jl jm jn hb bi translated">假设您有一个矩阵，其中包含时间序列数据的五个观察值。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mc"><img src="../Images/6245c6fa16080beaf54ea4998db51184.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wZ8n7VP30MP3F3lzbUyqMQ.png"/></div></div></figure><p id="433d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">另外，您有一个数组，其中包含您对五个观察值中的每一个都感兴趣的时间点(每行包含一个观察值)。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es md"><img src="../Images/3412fc18c6975416f6eb519ec417d896.png" data-original-src="https://miro.medium.com/v2/resize:fit:310/format:webp/1*OLjz896GihZuA6BL1rtHUw.png"/></div></figure><p id="9c3a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">假设您想要获得每个观察在相关时间点的值。换句话说，第1行的第2个时间点(1.000)，第2行的第6个时间点(3.000)，依此类推。这些时间点可以是测试对象输入响应或按下按钮的时间。有一种方法可以做到:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="1312" class="jy jz hi ju b fi ka kb l kc kd">out = []<br/>N = size( mydata, 1 )</span><span id="695a" class="jy jz hi ju b fi me kb l kc kd">for i = 1:size( mydata, 1 )<br/>out(i) = mydata( i, timepoints( i ) )<br/>end</span></pre><p id="4c18" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面是使用arrayfun的方法。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="070b" class="jy jz hi ju b fi ka kb l kc kd">N = size( mydata, 1 )<br/>out = arrayfun( @(x) mydata( x, timepoints(x) ), [1:N] )</span></pre><h1 id="9295" class="mf jz hi bd kz mg mh mi ld mj mk ml lh mm mn mo lk mp mq mr ln ms mt mu lq mv bi translated">让你的数字标题“有趣”</h1><p id="39e8" class="pw-post-body-paragraph iq ir hi is b it ls iv iw ix lt iz ja jb lu jd je jf lv jh ji jj lw jl jm jn hb bi translated">使用有趣的操作，您可以轻松完成的事情之一是以文本字符串的形式快速返回数据摘要。这些可以用作你的图的标题，文件名，或者带有元数据的标签。要做到这一点，你必须了解附加在<em class="jo">数组</em>末尾的相当神秘的标志<strong class="is hj">‘统一输出’</strong>。到目前为止，我们一直使用fun函数来返回数组，但是有许多变量不是数组，例如，字符串的单元格。当你创建一个简单数组之外的任何东西时，你必须在你的<em class="jo"> arrayfun </em>的末尾附加‘uniform output’，false。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="9ae5" class="jy jz hi ju b fi ka kb l kc kd">% Setting up the data %<br/>mydata = rand(10,100);<br/>grps = [ repmat('GrpA',5,1);repmat('GrpB',5,1)];<br/>subjects = [1:10];</span><span id="645e" class="jy jz hi ju b fi me kb l kc kd">% The arrayfun %<br/>titles = arrayfun( @(x) sprintf('%s (mean=%1.2f) (%i/10)',...<br/>           grps(x,:),mean(mydata(x,:)),subjects(x)), [1:10],...<br/>                                 'UniformOutput',false)'</span></pre><p id="f479" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这表示您有10个受试者，每个受试者有100个观察值，存储在<strong class="is hj"> mydata </strong>的行中。<em class="jo"> arrayfun </em>命令将遍历数组[1:10]并提取:</p><p id="a73d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">grps(1，:[a string] <br/> mean(mydata(x，:)【a double】<br/>subjects(x)【整数】</p><p id="e938" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些值将被放入一个字符串中，由命令<strong class="is hj"> sprintf </strong>格式化【如果您不熟悉这个命令，您可能想阅读它的帮助！—以后我会写一篇关于它的帖子】。</p><p id="0e6b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最终输出是:</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es mw"><img src="../Images/0e2cbdc8712d32f71902d2640f20f2db.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*rma2HgHSxFmxiQWWL-HSyg.png"/></div></figure><p id="3675" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这种类型的输出可用于标记您的数字或创建更有意义的文件名。</p><p id="0ccf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用这些技巧使您的数据可视化更加健壮。继续第二天。</p></div><div class="ab cl ke kf gp kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hb hc hd he hf"><blockquote class="my mz na"><p id="faa3" class="iq ir jo is b it iu iv iw ix iy iz ja nb jc jd je nc jg jh ji nd jk jl jm jn hb bi translated">这个故事是我的系列的一部分，题为“30天的MATLAB技巧，我希望我已经知道做神经科学研究生院”。关注我这里的<a class="ne nf ge" href="https://medium.com/u/71417ba6ebf5?source=post_page-----ad850eaffbde--------------------------------" rel="noopener" target="_blank"> Neurojojo </a>或在<a class="ae mx" href="https://twitter.com/neurojojo" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上的更多提示。</p></blockquote></div></div>    
</body>
</html>