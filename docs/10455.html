<html>
<head>
<title>Kafka and Nifi integration</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">卡夫卡与尼菲的融合</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/kafka-and-nifi-integration-d0431b540f37?source=collection_archive---------10-----------------------#2020-10-19">https://medium.com/analytics-vidhya/kafka-and-nifi-integration-d0431b540f37?source=collection_archive---------10-----------------------#2020-10-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="6130" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用 Docker，Kafka，Nifi 和 Python</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/e1d09838608a0ae97fa824d22fb1e612.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1KH2ZJ2QoCj_oMvVDkjvpw.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated"><a class="ae jn" href="https://justcodeit.io/wp-content/uploads/2018/05/ingestion_datos_Apache_nifi_Apache_Kafka.jpg" rel="noopener ugc nofollow" target="_blank">图像信用</a></figcaption></figure><p id="8efa" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这篇文章给出了一个简单的 Kafka 和 Nifi 集成的例子，让你马上开始。只需上传模板，按“开始”，你就可以了。</p><h1 id="78e7" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">尼菲</h1><p id="b1a6" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi lh translated"><span class="l li lj lk bm ll lm ln lo lp di"> A </span> pache NiFi 是一款开源软件，用于自动化和处理不同系统之间的数据流。这是一个处理和分发数据的强大而可靠的系统。此外，所提供的网络用户界面可以轻松创建、监控和控制数据流。</p><p id="ce7f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Nifi 的设计概念类似于基于流的编程范例。这种范式将应用程序表示为通过预定义的连接传输信息的“黑盒”进程网络。</p><p id="5bfe" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Nifi 的一些用例是供应链优化、质量控制和欺诈检测。</p></div><div class="ab cl lq lr gp ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="hb hc hd he hf"><p id="62b3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">先决条件:<br/> </strong>本项目使用 Docker 和 docker-compose。查看<a class="ae jn" href="https://docs.docker.com/compose/install/" rel="noopener ugc nofollow" target="_blank">此链接</a>了解如何为您的操作系统安装它们。</p><p id="65c4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">克隆我的 git 回购:</strong></p><pre class="iy iz ja jb fd lx ly lz ma aw mb bi"><span id="e32c" class="mc kl hi ly b fi md me l mf mg">git clone <a class="ae jn" href="https://github.com/Wesley-Bos/kafka_nifi_integration_example.git" rel="noopener ugc nofollow" target="_blank">https://github.com/Wesley-Bos/spark3.0-examples.git</a></span></pre><div class="mh mi ez fb mj mk"><a href="https://github.com/Wesley-Bos" rel="noopener  ugc nofollow" target="_blank"><div class="ml ab dw"><div class="mm ab mn cl cj mo"><h2 class="bd hj fi z dy mp ea eb mq ed ef hh bi translated">Wesley-Bos —概述</h2><div class="mr l"><h3 class="bd b fi z dy mp ea eb mq ed ef dx translated">我的兴趣在于大数据领域。我喜欢将世界视为一个大数据问题，其中蕴含着…</h3></div><div class="ms l"><p class="bd b fp z dy mp ea eb mq ed ef dx translated">github.com</p></div></div><div class="mt l"><div class="mu l mv mw mx mt my jh mk"/></div></div></a></div><p id="91de" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> <em class="mz">注意:</em> </strong> <em class="mz">根据您的 pip 和 Python 版本，命令会稍有不同:</em></p><ul class=""><li id="d024" class="na nb hi jq b jr js ju jv jx nc kb nd kf ne kj nf ng nh ni bi translated"><em class="mz"> pip 变成 pip3 </em></li><li id="17dc" class="na nb hi jq b jr nj ju nk jx nl kb nm kf nn kj nf ng nh ni bi translated"><em class="mz"> python 成为 python3 </em></li></ul><p id="af5b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在我们开始之前，创建一个新的环境。我使用 Anaconda 来完成这项工作，但是也可以随意使用您喜欢的任何工具。通过执行以下命令激活环境并安装所需的库:</p><pre class="iy iz ja jb fd lx ly lz ma aw mb bi"><span id="a634" class="mc kl hi ly b fi md me l mf mg">pip install -r requirements.txt</span></pre><p id="7842" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><em class="mz">务必在您打开的每个</em> <strong class="jq hj"> <em class="mz">新</em> </strong> <em class="mz">终端中激活正确的环境！</em></p><h1 id="de45" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">设置 Nifi</h1><p id="3ace" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">这个项目的故事是这样的:卡夫卡摄取了一个数据流。然后，这些信息被输入到 Nifi 中，并根据其内容被分配到三个类别中的一个。这些类别是:</p><ul class=""><li id="214e" class="na nb hi jq b jr js ju jv jx nc kb nd kf ne kj nf ng nh ni bi translated">包含“PXL”的邮件。</li><li id="9b1f" class="na nb hi jq b jr nj ju nk jx nl kb nm kf nn kj nf ng nh ni bi translated">包含“UCLL”的邮件。</li><li id="9ba4" class="na nb hi jq b jr nj ju nk jx nl kb nm kf nn kj nf ng nh ni bi translated">所有不符合上述情况的信息。</li></ul><p id="9b18" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">由于我不想让你对配置感到厌烦，我创建了一个你只需要导入的模板，简单吧？对于那些想了解配置的人，请查看 Github 库。</p><p id="ac5c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">模板看起来是这样的:</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es no"><img src="../Images/05f3d68db84f7241feb7866fec8ed9da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SHj0AyHmOn8IsbfdIb8Jsw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">截图模板</figcaption></figure><h2 id="8066" class="mc kl hi bd km np nq nr kq ns nt nu ku jx nv nw kw kb nx ny ky kf nz oa la ob bi translated">好了，我们开始吧。</h2><ol class=""><li id="f93e" class="na nb hi jq b jr lc ju ld jx oc kb od kf oe kj of ng nh ni bi translated">执行<strong class="jq hj"> build_project.sh </strong>脚本来构建 docker 容器。<br/> <em class="mz">这个可能需要一段时间，尤其是倪飞。</em></li><li id="f82c" class="na nb hi jq b jr nj ju nk jx nl kb nm kf nn kj of ng nh ni bi translated">访问 Nifi 的 web UI<a class="ae jn" href="http://localhost:8080/nifi/" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/Nifi/</a></li><li id="30ea" class="na nb hi jq b jr nj ju nk jx nl kb nm kf nn kj of ng nh ni bi translated">您可能需要重新加载页面，直到看到下图。</li></ol><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es og"><img src="../Images/1ded61d2e96ec5dbe289da0c5afb1eee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tqjq93MhcxFpMTe8_7NkMA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">截图 Nifi 的 Web Ui</figcaption></figure><p id="04ec" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在屏幕的顶部，有处理器、模板等组件。在屏幕的左侧，有一个导航和操作视图。</p><ol class=""><li id="b0ca" class="na nb hi jq b jr js ju jv jx nc kb nd kf ne kj of ng nh ni bi translated">在<strong class="jq hj">下<em class="mz">操作</em>下</strong>选择【上传模板】，上传库中找到的模板。</li><li id="16bc" class="na nb hi jq b jr nj ju nk jx nl kb nm kf nn kj of ng nh ni bi translated">现在从顶部选择模板组件，并将其拖到工作区中。选择您刚刚上传的模板。</li><li id="86dc" class="na nb hi jq b jr nj ju nk jx nl kb nm kf nn kj of ng nh ni bi translated">通过按 Ctrl+a 选择全部，然后按 Start。</li></ol><p id="998d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这就是尼菲的一切。</p><h1 id="ba10" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">卡夫卡</h1><p id="3913" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">如果你不熟悉卡夫卡，你可以看看我之前的帖子。它简要解释了卡夫卡是什么，并列举了一些例子。</p><div class="mh mi ez fb mj mk"><a rel="noopener follow" target="_blank" href="/@wesleybos99/your-first-data-pipeline-with-kafka-8ed9728e37b0"><div class="ml ab dw"><div class="mm ab mn cl cj mo"><h2 class="bd hj fi z dy mp ea eb mq ed ef hh bi translated">你与卡夫卡的第一条数据管道</h2><div class="mr l"><h3 class="bd b fi z dy mp ea eb mq ed ef dx translated">使用 Docker、Kafka、Python 和 Postgres</h3></div><div class="ms l"><p class="bd b fp z dy mp ea eb mq ed ef dx translated">medium.com</p></div></div><div class="mt l"><div class="oh l mv mw mx mt my jh mk"/></div></div></a></div><p id="5c66" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在卡夫卡文件夹里，有一个生产者，有三个消费者。只有生产者的 Python 脚本需要执行这个项目的工作。要查看每个类别的主题数据，请执行相应的脚本。</p><pre class="iy iz ja jb fd lx ly lz ma aw mb bi"><span id="cd2c" class="mc kl hi ly b fi md me l mf mg">python producer.py</span><span id="5a3b" class="mc kl hi ly b fi oi me l mf mg">python consumer_pxl.py</span><span id="a40a" class="mc kl hi ly b fi oi me l mf mg">python consumer_ucll.py</span><span id="27c5" class="mc kl hi ly b fi oi me l mf mg">pyhton consumer_unmatched.py</span></pre><p id="e8da" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> <em class="mz">注意:</em> </strong> <em class="mz">目前，Nifi 向 Kafka 发布消息的格式存在问题，但对于这个示例来说，这不是问题。</em></p><h1 id="0811" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">结论:</h1><p id="78e3" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">使用 Nifi 提供的 UI，您可以毫不费力地在 Kafka 和 Nifi 之间建立数据流。只需添加一些处理器，连接它们，您就可以开始工作了。那么，你还在等什么？</p><p id="c87c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">一如既往的感谢你一直读到最后！非常感谢任何关于我可以在哪里以及如何改进的反馈。请随时给我发消息。</p><h2 id="f73b" class="mc kl hi bd km np nq nr kq ns nt nu ku jx nv nw kw kb nx ny ky kf nz oa la ob bi translated">参考资料:</h2><p id="4739" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated"><a class="ae jn" href="https://en.wikipedia.org/wiki/Flow-based_programming" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Flow-based_programming</a></p><div class="mh mi ez fb mj mk"><a href="https://nifi.apache.org/docs.html" rel="noopener  ugc nofollow" target="_blank"><div class="ml ab dw"><div class="mm ab mn cl cj mo"><h2 class="bd hj fi z dy mp ea eb mq ed ef hh bi translated">Apache NiFi 文档</h2><div class="mr l"><h3 class="bd b fi z dy mp ea eb mq ed ef dx translated">版权所有 2018 Apache Software Foundation，根据 Apache 许可证 2.0 版获得许可。阿帕奇人，阿帕奇人…</h3></div><div class="ms l"><p class="bd b fp z dy mp ea eb mq ed ef dx translated">nifi.apache.org</p></div></div></div></a></div><div class="mh mi ez fb mj mk"><a href="https://www.guru99.com/apache-nifi-tutorial.html" rel="noopener  ugc nofollow" target="_blank"><div class="ml ab dw"><div class="mm ab mn cl cj mo"><h2 class="bd hj fi z dy mp ea eb mq ed ef hh bi translated">Apache NiFi 教程:什么是架构和安装</h2><div class="mr l"><h3 class="bd b fi z dy mp ea eb mq ed ef dx translated">Apache NiFi 是一个开源软件，用于自动化和管理系统之间的数据流。这是一个强大的…</h3></div><div class="ms l"><p class="bd b fp z dy mp ea eb mq ed ef dx translated">www.guru99.com</p></div></div><div class="mt l"><div class="oj l mv mw mx mt my jh mk"/></div></div></a></div></div></div>    
</body>
</html>