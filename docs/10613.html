<html>
<head>
<title>Build a Twitter Bot with Node.js and the Pokémon API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Node.js和神奇宝贝API构建一个Twitter Bot</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/build-a-twitter-bot-with-node-js-and-the-pok%C3%A9mon-api-963edf7ce2a8?source=collection_archive---------16-----------------------#2020-10-26">https://medium.com/analytics-vidhya/build-a-twitter-bot-with-node-js-and-the-pok%C3%A9mon-api-963edf7ce2a8?source=collection_archive---------16-----------------------#2020-10-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/2026e1eb39795fabc70bcea7ed2bf96e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TpUWt7RpXjl2jHAWNZjf0A.jpeg"/></div></div></figure><p id="905f" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">本文的目标是向您展示如何计划、开发和部署Twitter bot。如果您继续下去，最终您将拥有一个已部署的Twitter bot，但这可以用作与Twitter API交互和了解Heroku的通用模板。我们将制作的机器人将每小时在推特上发布一次口袋妖怪精灵的图像，并配有描述它的标题。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es jw"><img src="../Images/93fac428392c8b39c58544a7b3ece462.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vwpmnApQX67VkQ0WObAceQ.jpeg"/></div></div></figure><p id="0bbd" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">Twitter bot将使用一些技术，但主要是使用Twitter API、Pokémon API、Node、JavaScript ES6 Promises和Heroku。到本文结束时，您将拥有一个类似这样的部署好的Twitter机器人:<a class="ae jx" href="https://twitter.com/Pokemon_Sprites" rel="noopener ugc nofollow" target="_blank">https://twitter.com/Pokemon_Sprites</a>。</p><p id="6fe6" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">编程一个Twitter机器人的过程相当简单，一旦你知道如何制作一个，你可以让他们做的事情是无限的。从档案里发照片？记录股票市场的财务变化？转推# SpaghettiWestern西部电影的图片？所有这些都可以通过Twitter API和技术诀窍或好奇心来实现。</p></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><h1 id="e0aa" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">从Twitter API开始</h1><p id="77fe" class="pw-post-body-paragraph iy iz hi ja b jb kw jd je jf kx jh ji jj ky jl jm jn kz jp jq jr la jt ju jv hb bi translated">对于我们的Twitter机器人，我们需要两样东西:</p><ol class=""><li id="64ab" class="lb lc hi ja b jb jc jf jg jj ld jn le jr lf jv lg lh li lj bi translated">一个新的推特账户。</li><li id="388c" class="lb lc hi ja b jb lk jf ll jj lm jn ln jr lo jv lg lh li lj bi translated">一个拥有API密钥和读/写权限的Twitter开发人员帐户。</li></ol><h2 id="f7be" class="lp jz hi bd ka lq lr ls ke lt lu lv ki jj lw lx km jn ly lz kq jr ma mb ku mc bi translated">报名</h2><p id="2a31" class="pw-post-body-paragraph iy iz hi ja b jb kw jd je jf kx jh ji jj ky jl jm jn kz jp jq jr la jt ju jv hb bi translated">首先，我们将创建一个Twitter帐户或登录到您已经拥有的Twitter帐户(机器人将在帐户的时间轴上发布推文，因此最好创建一个新帐户)。要创建一个新账户，请点击Twitter链接:【https://twitter.com/i/flow/signup<a class="ae jx" href="https://twitter.com/i/flow/signup" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="dbdb" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">如果你注册时只有一个电话号码，<em class="md">你必须给你的账户添加一个电子邮件。</em>我们将需要这个链接到一个开发者账户。创建帐户后，我们准备开始设置我们的开发者帐户。</p><h2 id="8dd7" class="lp jz hi bd ka lq lr ls ke lt lu lv ki jj lw lx km jn ly lz kq jr ma mb ku mc bi translated">Twitter开发者门户</h2><p id="ad0c" class="pw-post-body-paragraph iy iz hi ja b jb kw jd je jf kx jh ji jj ky jl jm jn kz jp jq jr la jt ju jv hb bi translated">在这里，我们可以申请我们的开发者帐户:</p><p id="0f34" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><a class="ae jx" href="https://developer.twitter.com/en/apply/user.html" rel="noopener ugc nofollow" target="_blank">https://developer.twitter.com/en/apply/user.html</a></p><p id="cf26" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">在接下来的几个步骤中，我们有几个选择，但文档对此做了很好的解释。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es me"><img src="../Images/37fbbafbde1215b16d71e984b0def7bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZLh5AxsxzUlPrNrI-Ge7Iw.png"/></div></div></figure><ol class=""><li id="8d16" class="lb lc hi ja b jb jc jf jg jj ld jn le jr lf jv lg lh li lj bi translated">我们想在业余爱好者类别下申请制作一个Twitter机器人，一旦选中，单击“下一步”。</li><li id="ff5f" class="lb lc hi ja b jb lk jf ll jj lm jn ln jr lo jv lg lh li lj bi translated">填写您的国家和您的机器人的名称，然后单击“下一步”。</li><li id="4f2c" class="lb lc hi ja b jb lk jf ll jj lm jn ln jr lo jv lg lh li lj bi translated">描述你打算用Twitter开发者账户做什么——用神奇宝贝API做一个Twitter机器人。对所有选项选择“否”，然后单击“下一步”。</li><li id="110b" class="lb lc hi ja b jb lk jf ll jj lm jn ln jr lo jv lg lh li lj bi translated">检查你的信息，并确认它看起来不错。</li><li id="df83" class="lb lc hi ja b jb lk jf ll jj lm jn ln jr lo jv lg lh li lj bi translated">接受服务条款。(我们快到了！)</li><li id="c165" class="lb lc hi ja b jb lk jf ll jj lm jn ln jr lo jv lg lh li lj bi translated">点击Twitter发送给您的电子邮件中的确认信息。</li><li id="d10f" class="lb lc hi ja b jb lk jf ll jj lm jn ln jr lo jv lg lh li lj bi translated">给你的新机器人命名！</li><li id="c7a7" class="lb lc hi ja b jb lk jf ll jj lm jn ln jr lo jv lg lh li lj bi translated">跳到仪表板-我们将需要更改设置并重新生成密钥。</li></ol><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mf"><img src="../Images/123cd444fabd44ccc00108c31c7249ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FEi-pA9ml1_b5JTTxwCbzg.png"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx translated">点击“应用程序设置”查看设置</figcaption></figure><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mk"><img src="../Images/afb8089f53ffc3e2820aff5e1c8f2853.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VnRFA3vXPR9dxQeEFRDYdg.png"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx translated">常规设置视图</figcaption></figure><p id="8e1b" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">9.在“设置”页面上，在“应用程序权限”标题下，将权限编辑为“读写”。</p><p id="6aa8" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">10.现在滚动到顶部和change tab窗格，查看您的API密钥和令牌。</p><p id="e555" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">11.我们需要4样东西:API密钥、API密钥秘密、访问令牌密钥和访问令牌秘密。</p><p id="b2b2" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">12.重新生成并写下它们，或者复制并粘贴到某个安全的地方以备后用。</p><p id="c546" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">13.机器人时间到了！</p></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><h1 id="c1d3" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">规划我们的计划</h1><p id="7745" class="pw-post-body-paragraph iy iz hi ja b jb kw jd je jf kx jh ji jj ky jl jm jn kz jp jq jr la jt ju jv hb bi translated">文章的这一部分将关注Twitter机器人的实际编程。但是，它确实假设了一些事情:对终端或命令行的基本理解，JavaScript基础知识，以及对使用API和JSON的一般了解或理解。然而，我们不会对这些话题中的任何一个进行深入探讨，如果一次只看一部分，这里没有什么是特别难理解的。</p><p id="cd9f" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">在我们开始实际编写代码之前，重要的是我们要考虑我们要达到的目标，这个项目的MVP(最小可行产品)是什么？不要太花哨——一个每小时发一次精灵的推特，并配有简单说明的机器人。我们知道我们需要使用神奇宝贝<a class="ae jx" href="https://pokeapi.co/" rel="noopener ugc nofollow" target="_blank"> API </a>来获取这些信息，所以让我们从这里开始。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es ml"><img src="../Images/6512d61a400441741b492c271c314f5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j91IJbtS30UKEKHzdCHUGA.jpeg"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx translated">我们的机器人将发布的推文示例</figcaption></figure><h2 id="9d14" class="lp jz hi bd ka lq lr ls ke lt lu lv ki jj lw lx km jn ly lz kq jr ma mb ku mc bi translated">神奇宝贝API</h2><p id="d717" class="pw-post-body-paragraph iy iz hi ja b jb kw jd je jf kx jh ji jj ky jl jm jn kz jp jq jr la jt ju jv hb bi translated">Pokémon API是使用API和JSON的最友好和最容易的入口之一。这是一个<a class="ae jx" href="https://developer.mozilla.org/en-US/docs/Glossary/REST" rel="noopener ugc nofollow" target="_blank"> RESTful </a> API，具有易于理解的探索数据的路径。一些端点返回表示Pokemon的对象的分页数组，我们可以探索其细节，但我们感兴趣的是单个Pokemon的端点，它将具有完整的细节。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mm"><img src="../Images/76fa57c01125edf589de070a1ecfceae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YCPAMFp9EHzkzmBzE5GeBw.png"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx translated">妙蛙种子精灵宝可梦的第一个精灵宝可梦的终点</figcaption></figure><p id="b362" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">当我们对数据库进行API调用以获取Pokemon的详细信息时，我们将使用上图中“提交”按钮列出的这些端点路由。查看口袋妖怪1号妙蛙种子的信息，我们可以看到许多不同类型的数据。我们有键/值对来访问返回的JSON中我们想要使用的数据。我们可以通过导航数组和对象来找到我们需要的东西，从而缩小取值范围。<a class="ae jx" href="https://pokeapi.co/api/v2/pokemon/1" rel="noopener ugc nofollow" target="_blank">查看妙蛙种子的原始JSON。</a></p><p id="0f19" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">对于API端点，最重要的是我们可以通过口袋妖怪的名字<em class="md">或者他们的ID </em>来访问它。沿着ID的路线，我们可以使用普通的JavaScript功能创建一个随机数来附加到该路线，因此我们的Tweet每小时都会被随机化。</p><pre class="in io ip iq fd mn mo mp mq aw mr bi"><span id="7f3e" class="lp jz hi mo b fi ms mt l mu mv"><a class="ae jx" href="https://pokeapi.co/api/v2/pokemon/811" rel="noopener ugc nofollow" target="_blank">https://pokeapi.co/api/v2/pokemon/<strong class="mo hj">811</strong></a></span><span id="0dc3" class="lp jz hi mo b fi mw mt l mu mv">Here '811' represents the unique endpoint for a Pokemon. We can append numbers onto this to randomize the Pokemon encountered.</span></pre><p id="dc6c" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">了解API的端点和数据的形状有助于我们在开始编写代码将所有这些信息整合在一起时做出重要的设计决策。例如，我们可以使用以口袋妖怪的名字结尾的路线来创建搜索功能！了解了所有这些，是时候开始编程了。</p></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><h1 id="db24" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">编写我们的程序</h1><h2 id="6bd2" class="lp jz hi bd ka lq lr ls ke lt lu lv ki jj lw lx km jn ly lz kq jr ma mb ku mc bi translated">在终点站</h2><p id="95cf" class="pw-post-body-paragraph iy iz hi ja b jb kw jd je jf kx jh ji jj ky jl jm jn kz jp jq jr la jt ju jv hb bi translated">为了开始，我们将需要打开一个终端或命令行，并导航到我们想要开始我们的项目的任何地方。在那里，我们将创建一个新的文件夹和一些文件。从命令行输入:</p><pre class="in io ip iq fd mn mo mp mq aw mr bi"><span id="a5d0" class="lp jz hi mo b fi ms mt l mu mv">mkdir pokemon-bot &amp;&amp; cd pokemon-bot</span></pre><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es mx"><img src="../Images/3e8f53d2cd09410869c26ae0fd7f947f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*knEY3TJqrVDvHAc_Hj0BXw.png"/></div></div></figure><p id="6501" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">这将创建一个名为“口袋妖怪机器人”的目录，并从命令行进入。现在运行:</p><pre class="in io ip iq fd mn mo mp mq aw mr bi"><span id="9361" class="lp jz hi mo b fi ms mt l mu mv">npm init -y</span></pre><p id="0fa2" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">这将为您的应用程序初始化一个节点包。</p><p id="f279" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">在我们离开航站楼之前，我们还需要一些东西:</p><pre class="in io ip iq fd mn mo mp mq aw mr bi"><span id="8de9" class="lp jz hi mo b fi ms mt l mu mv">npm i twitter node-fetch</span></pre><p id="9428" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">这将安装两个包，我们需要使用我们的机器人<a class="ae jx" href="https://www.npmjs.com/package/twitter" rel="noopener ugc nofollow" target="_blank"> twitter </a>和<a class="ae jx" href="https://www.npmjs.com/package/node-fetch" rel="noopener ugc nofollow" target="_blank">节点获取</a>。这些允许我们在Node/JavaScript环境中使用Twitter API并向Pokémon API发出获取请求。</p><p id="e917" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">最后，我们需要三个文件:</p><pre class="in io ip iq fd mn mo mp mq aw mr bi"><span id="17a5" class="lp jz hi mo b fi ms mt l mu mv">touch Procfile .gitignore bot.js</span></pre><p id="f4e6" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">同样，我们需要初始化我们的项目:</p><pre class="in io ip iq fd mn mo mp mq aw mr bi"><span id="2b5a" class="lp jz hi mo b fi ms mt l mu mv">git init</span></pre><p id="3912" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">“Touch”创建文件，所以我们用它来为Heroku创建一个<a class="ae jx" href="https://devcenter.heroku.com/articles/procfile" rel="noopener ugc nofollow" target="_blank"><strong class="ja hj">proc file</strong></a><strong class="ja hj"/>(这将类似于我们如何在本地运行我们的bot)，一个<strong class="ja hj"> gitignore </strong>以便我们不会将不需要的东西推送到Github，以及<strong class="ja hj"> bot.js </strong>，将运行我们的程序的实际JavaScript文件。运行‘Git init’将初始化我们的存储库，以便与<a class="ae jx" href="https://git-scm.com/book/en/v2/Getting-Started-What-is-Git%3F" rel="noopener ugc nofollow" target="_blank"> Git的版本控制</a>软件一起使用。现在我们可以输入“代码”或者“原子”在我们选择的编辑器中打开我们的项目(或者打开您的编辑器，然后打开“pokemon-bot”文件夹)。</p></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><h2 id="c6f5" class="lp jz hi bd ka lq lr ls ke lt lu lv ki jj lw lx km jn ly lz kq jr ma mb ku mc bi translated">在我们的编辑器中</h2><ol class=""><li id="adf2" class="lb lc hi ja b jb kw jf kx jj my jn mz jr na jv lg lh li lj bi translated">在我们的<strong class="ja hj">里。gitignore </strong>我们需要添加的文件:</li></ol><pre class="in io ip iq fd mn mo mp mq aw mr bi"><span id="c8b7" class="lp jz hi mo b fi ms mt l mu mv">node_modules <br/>image.png</span></pre><p id="b840" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">当提交到Github时，这将忽略我们的node_modules和我们将要创建的映像。</p><p id="3c77" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">2.在我们的<strong class="ja hj"> Procfile </strong>中，我们将添加:</p><pre class="in io ip iq fd mn mo mp mq aw mr bi"><span id="c6ec" class="lp jz hi mo b fi ms mt l mu mv">worker: node bot.js</span></pre><p id="3b84" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">一旦部署到Heroku，这就是运行我们的<strong class="ja hj"> bot.js </strong>文件所需的全部内容。此时，我们可以编写机器人的功能。</p><p id="bd09" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">在我们的<strong class="ja hj"> bot.js </strong>文件中，为了测试一切正常，添加:</p><pre class="in io ip iq fd mn mo mp mq aw mr bi"><span id="1380" class="lp jz hi mo b fi ms mt l mu mv">console.log(‘Hello, world’);</span></pre><p id="69b6" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">在终端运行中:</p><pre class="in io ip iq fd mn mo mp mq aw mr bi"><span id="5906" class="lp jz hi mo b fi ms mt l mu mv">node bot.js</span></pre><p id="712b" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">你应该看到终端上印着“Hello，world”。如果是这样，继续删除控制台语句——这只是为了测试我们的文件是否链接在一起。</p><p id="5756" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">3.在我们的<strong class="ja hj"> bot.js </strong>文件中，我们有要添加的导入和精灵宝可梦API需要的两个变量:</p><pre class="in io ip iq fd mn mo mp mq aw mr bi"><span id="1b31" class="lp jz hi mo b fi ms mt l mu mv">const Twitter = require(‘twitter’);</span><span id="808b" class="lp jz hi mo b fi mw mt l mu mv">const fs = require(‘fs’);</span><span id="ea5a" class="lp jz hi mo b fi mw mt l mu mv">const fetch = require(‘node-fetch’);</span><span id="2516" class="lp jz hi mo b fi mw mt l mu mv">const request = require(‘request’);</span><span id="3fbe" class="lp jz hi mo b fi mw mt l mu mv">const baseURL = “https://pokeapi.co/api/v2/pokemon/";</span><span id="1869" class="lp jz hi mo b fi mw mt l mu mv">const pokemonCountURL = “https://pokeapi.co/api/v2/pokemon-species/?limit=0";</span></pre><p id="56c0" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">' Twitter '允许我们使用他们的API，' fs '允许我们使用<a class="ae jx" href="https://developer.mozilla.org/en-US/docs/Web/API/FileSystem" rel="noopener ugc nofollow" target="_blank">文件系统</a>，而' fetch '和' request '将在我们的API调用中使用。“baseURL”和“pokemonCountURL”也将用于在我们构建唯一的URL端点来访问Pokemon数据时与Pokémon API进行通信。</p><p id="6f42" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">4.接下来，我们将使用之前保存的API键声明我们的config对象，并将其传递给Twitter API的一个新实例。这个实例化的变量‘pokemon bot’就是我们用来发布图片和推文的东西。</p><pre class="in io ip iq fd mn mo mp mq aw mr bi"><span id="02f3" class="lp jz hi mo b fi ms mt l mu mv">const config = {</span><span id="98ae" class="lp jz hi mo b fi mw mt l mu mv">     consumer_key: ‘123YourKey’,</span><span id="9b15" class="lp jz hi mo b fi mw mt l mu mv">     consumer_secret: ‘456YourOtherKey’,</span><span id="35f4" class="lp jz hi mo b fi mw mt l mu mv">     access_token_key: ‘123AnotherKey’,</span><span id="a349" class="lp jz hi mo b fi mw mt l mu mv">     access_token_secret: ‘456TheLastOne’</span><span id="b053" class="lp jz hi mo b fi mw mt l mu mv">};</span><span id="7772" class="lp jz hi mo b fi mw mt l mu mv">const PokemonBot = new Twitter(config);</span></pre><p id="5048" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">此时，你的<strong class="ja hj"> bot.js </strong>文件应该看起来像这样，并包含<em class="md">你的</em> API键。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es nb"><img src="../Images/c74e6d7c8742baa8d48d6dc52151ee64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PJrxfLxb3kBr6XfB8llQyg.png"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx translated">您的配置将在“TEST”所在的每个位置有唯一的值</figcaption></figure><h2 id="1304" class="lp jz hi bd ka lq lr ls ke lt lu lv ki jj lw lx km jn ly lz kq jr ma mb ku mc bi translated">服务和助手功能</h2><p id="ed55" class="pw-post-body-paragraph iy iz hi ja b jb kw jd je jf kx jh ji jj ky jl jm jn kz jp jq jr la jt ju jv hb bi translated">现在我们可以编写四个助手/服务函数，我们将使用它们来1)获取Pokédex计数，2)在Pokédex计数范围内创建一个随机数，3)获取Pokemon的详细信息，以及4)根据Pokemon精灵的URL下载一个图像。</p><ol class=""><li id="17bb" class="lb lc hi ja b jb jc jf jg jj ld jn le jr lf jv lg lh li lj bi translated">getPokemonCount()</li></ol><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es nc"><img src="../Images/8c6bf750b2f67b323f9b262c1b843c06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*vwWFe30rbY6j_B3kMU4-ZQ.png"/></div><figcaption class="mg mh et er es mi mj bd b be z dx translated">ES6承诺😊</figcaption></figure><p id="5bb9" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">这是一个相对通用的函数，我们将使用它来获得Pokédex的当前计数(它总是在增长，因此我们的bot将以这种方式面向未来)。它接受Pokémon API的“URL”端点，并发回一个响应，我们将其转换为JSON并作为“数据”返回。我们将使用该JSON来获取Pokédex的当前计数，并使用该计数创建一个新的随机数。这个数字将是传入Pokémon API的RESTful端点的ID，它将返回给定Pokemon的详细信息。</p><p id="8de1" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">这个函数和其他几个函数将利用<a class="ae jx" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="noopener ugc nofollow" target="_blank"> JavaScript承诺</a>。当我们一起运行我们的代码时，它需要异步运行<a class="ae jx" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" rel="noopener ugc nofollow" target="_blank"/>，这样我们就可以等待一个调用的结果，以便进行另一个调用——例如，在我们的第二个API调用中，我们将无法访问详细的Pokemon URL，所以我们需要首先获得我们的计数来构造我们的链接。</p><p id="b4b3" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">2.randomNumberWithinRange()</p><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es nd"><img src="../Images/878d7fd609203d697a9e4262b0dfa7b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*6qt1VBSodLQXjBcM6clGNw.png"/></div></figure><p id="6cf1" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">另一个一般化的函数，利用普通的Math.random()获得Pokédex计数范围内的随机数。</p><p id="2e2c" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">3.getPokemonDetails()</p><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es ne"><img src="../Images/f8c195aa650c0205d32677d37a0d98b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/1*oxWixPObxMSmscuZpp8bLw.png"/></div></figure><p id="4db3" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">类似于getPokemonCount()，getPokemonDetails()将返回一个承诺并接受一个“url”——该URL将是我们用“baseURL”变量和randomNumberWithinRange()的结果创建的。</p><p id="431f" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">4.downloadImage()</p><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es nf"><img src="../Images/4c51b3751a284a8192407e5abccc8bf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/format:webp/1*v7-RWOTwXj0lpeDpcaRoAg.png"/></div><figcaption class="mg mh et er es mi mj bd b be z dx translated"><a class="ae jx" href="https://developer.mozilla.org/en-US/docs/Web/API/Streams_API/Using_writable_streams" rel="noopener ugc nofollow" target="_blank">https://developer . Mozilla . org/en-US/docs/Web/API/Streams _ API/Using _ writable _ Streams</a></figcaption></figure><p id="1292" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">该函数将接受uri(特定资源的标识符，我们图像的URL)、文件名和回调函数。结合承诺，这将从URI请求资源，通过文件系统将其写入文件，并在传递给它的回调函数中解析承诺。</p><p id="4744" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">将所有这些函数组合在一起将产生我们的机器人需要发送tweet的所有数据——pokédex计数、代表Pokemon的新随机ID、Pokemon的详细信息以及下载的精灵。</p><p id="bbe0" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">最后，我们需要编写逻辑来将我们所有的元素alchemize在一起，并发布一条tweet。</p></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><h2 id="f79c" class="lp jz hi bd ka lq lr ls ke lt lu lv ki jj lw lx km jn ly lz kq jr ma mb ku mc bi translated">构建我们机器人的大脑</h2><p id="438d" class="pw-post-body-paragraph iy iz hi ja b jb kw jd je jf kx jh ji jj ky jl jm jn kz jp jq jr la jt ju jv hb bi translated">首先，我们需要声明一个异步箭头函数:</p><pre class="in io ip iq fd mn mo mp mq aw mr bi"><span id="95c5" class="lp jz hi mo b fi ms mt l mu mv">const encounterAndTweetPokemon = async () =&gt; {</span><span id="1274" class="lp jz hi mo b fi mw mt l mu mv">};</span></pre><p id="d514" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">我们将需要我们的功能是异步的，以便利用承诺的待定性质。</p><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es ng"><img src="../Images/0324dc44f4334537c50941ed0181915b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/1*BryGLMJ3pG3J4fFOiZ91Uw.png"/></div><figcaption class="mg mh et er es mi mj bd b be z dx translated">我们稍后将在函数体中更新“标题”</figcaption></figure><p id="3aae" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">我们的首要任务是声明“caption”以便以后使用，并运行我们的第一个API服务函数“getPokemonCount()”。我们将传入之前定义的pokemonCountURL，并用'将一个新的承诺链接到它上面。然后(回应)’。这将从API调用返回解析后的数据，有了这些数据，我们可以使用带“response.count”的点符号来访问计数值。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es nh"><img src="../Images/8af6bbf622c54d3b9e486dc0a4c6b328.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BvfJi5vMiYVQxoRxOCLGGw.png"/></div></div></figure><p id="15fc" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">现在我们将添加另一个。then()'，这次使用的是我们从getPokemonCount()承诺返回的pokedexCount。有了这个值，我们可以向getPokemonDetails传递一个<a class="ae jx" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals" rel="noopener ugc nofollow" target="_blank">模板文本</a>，它将baseURL和我们的helper函数的结果与pokedexCount结合起来。</p><pre class="in io ip iq fd mn mo mp mq aw mr bi"><span id="977c" class="lp jz hi mo b fi ms mt l mu mv">getPokemonDetails(`${baseURL}${randomNumberWithinRange(1, pokedexCount)}`)</span></pre><p id="5075" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">这将最终看起来像:【https://pokeapi.co/api/v2/pokemon/549<a class="ae jx" href="https://pokeapi.co/api/v2/pokemon/549" rel="noopener ugc nofollow" target="_blank"/>并成为传递给函数的URL。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es ni"><img src="../Images/0a8bb58f05b32e27c76e4e5f43068186.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fQFh9Rw1jofl5IzxYudyOQ.png"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx translated">让我们看看数据吧！</figcaption></figure><p id="aca4" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">在这里面。然后(口袋妖怪)‘我们有一个随机口袋妖怪的JSON！我们可以导航到那个口袋妖怪的对象属性，以获得它的编号、名称、类型和口袋妖怪前视图的URI等值。例如，Pokemon可以有多种类型，因此要访问第一种类型，我们将声明:</p><pre class="in io ip iq fd mn mo mp mq aw mr bi"><span id="241c" class="lp jz hi mo b fi ms mt l mu mv">const type = pokemon.types[0].type.name;</span></pre><p id="0070" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">这将访问类型数组中的第一个对象，在第一个类型对象中，我们访问属性“name”。我们可以使用这个变量“type”和我们声明的其他变量，将一个模板文本赋给上面作用域中声明的标题变量。这将是我们简单而有效的推文标题。</p><pre class="in io ip iq fd mn mo mp mq aw mr bi"><span id="dbb0" class="lp jz hi mo b fi ms mt l mu mv">(no. 658) — greninja — water</span></pre><p id="f578" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">最后，我们返回另一个下载Pokemon图像的承诺——我们传递我们的photoURL、文件名和解析承诺的回调函数。此时，我们的函数从Pokédex中获得一个随机的Pokemon，创建关于它的标题，并下载它的图像！我们肯定会到达那里。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es nj"><img src="../Images/66141755b8787ef4d9a6184a10e809e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zBCpn8dp1WD16Lw2U2xTeg.png"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx translated"><a class="ae jx" href="https://nodejs.org/api/fs.html" rel="noopener ugc nofollow" target="_blank">https://nodejs.org/api/fs.html</a>—关于文件系统的更多信息</figcaption></figure><p id="bcf1" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">我们可以使用文件系统来读取我们在downloadImage函数中创建的文件。数据接受引用项目目录的“__dirname ”,并帮助我们创建图像文件的路径。现在，我们通过上传存储在变量数据中的图像来与Twitter API进行交互。我们<a class="ae jx" href="https://developer.twitter.com/en/docs/twitter-api/v1/media/upload-media/api-reference/post-media-upload" rel="noopener ugc nofollow" target="_blank">使用‘媒体/上传’参数和我们的媒体对象‘数据’发布到Twitter </a>。</p><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es nk"><img src="../Images/5c1d41961ed7cc18f947f7c182c0b9e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1386/format:webp/1*rrArMXnhpVYlNJlb5Arpvw.png"/></div></figure><p id="5f36" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">最后，我们可以返回媒体并将其发布出去。从我们最后的承诺返回“媒体”,我们为我们的Heroku日志记录了一个成功的更新。我们声明“status”，这是一个包含我们的标题和惟一的媒体ID的对象，我们在返回的承诺中上传我们的图像。现在需要做的就是将该状态对象添加到PokemonBot中，该pokemon bot已经在我们的函数解析时积累了数据。简单地说，我们只需记录tweet并捕捉任何发生的错误——一旦我们部署完毕，这一切都是为了Heroku。要运行我们的函数，我们必须在第98行用' encounterAndTweetPokemon()'调用它。此时，我们可以在终端中运行“node bot.js ”,我们应该可以在终端中看到控制台日志以及时间线上的tweet！</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es nl"><img src="../Images/aad38d600a277731b111fbc931799ed2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HkwwwuS4vy5m8_3rLrZeEQ.png"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx translated">最后，我们的机器人的大脑。</figcaption></figure><p id="c9b6" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">如果一切正常，我们可以准备将我们的机器人部署到Heroku，这样它将在设定的时间自动运行。</p><p id="d993" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated"><a class="ae jx" href="https://github.com/sanchito59/Pokemon_Twitter_Bot/blob/master/bot.js" rel="noopener ugc nofollow" target="_blank">代码参考</a></p></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><h1 id="6880" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">准备部署</h1><p id="6e97" class="pw-post-body-paragraph iy iz hi ja b jb kw jd je jf kx jh ji jj ky jl jm jn kz jp jq jr la jt ju jv hb bi translated">我们将从编辑Twitter配置对象开始，这样如果我们有Github repo，我们的变量就不会公开可见。Heroku很聪明，可以通过我们将要改变的一些设置来读取这些值。</p><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es nm"><img src="../Images/2d9f4e44f929e6063d301bab67898315.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*s2LcYEB0-OAbpkz7QqcVsQ.png"/></div><figcaption class="mg mh et er es mi mj bd b be z dx translated">您永远不希望公开暴露您的API凭证</figcaption></figure><p id="109a" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">这就是我们的代码——现在我们可以准备部署到Heroku并在线托管我们的bot了。</p><h1 id="a88c" class="jy jz hi bd ka kb nn kd ke kf no kh ki kj np kl km kn nq kp kq kr nr kt ku kv bi translated">设置和部署</h1><ol class=""><li id="9f8f" class="lb lc hi ja b jb kw jf kx jj my jn mz jr na jv lg lh li lj bi translated"><a class="ae jx" href="https://id.heroku.com/login" rel="noopener ugc nofollow" target="_blank">创建一个Heroku帐户或登录</a></li><li id="12ce" class="lb lc hi ja b jb lk jf ll jj lm jn ln jr lo jv lg lh li lj bi translated"><a class="ae jx" href="https://devcenter.heroku.com/articles/heroku-cli#download-and-install" rel="noopener ugc nofollow" target="_blank">下载并安装Heroku CLI </a></li><li id="9007" class="lb lc hi ja b jb lk jf ll jj lm jn ln jr lo jv lg lh li lj bi translated">在终端中，使用Heroku帐户和CLI设置，运行:</li></ol><pre class="in io ip iq fd mn mo mp mq aw mr bi"><span id="ef21" class="lp jz hi mo b fi ms mt l mu mv">heroku create</span></pre><p id="02ce" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">这将创建一个新的Heroku存储库，当我们在线部署我们的应用程序时，我们会将它推送到这个存储库。Heroku对你的存储库和应用程序名称进行随机化，所以为了方便起见，如果你愿意，你可以选择运行以下代码:</p><pre class="in io ip iq fd mn mo mp mq aw mr bi"><span id="b8d0" class="lp jz hi mo b fi ms mt l mu mv">heroku apps:rename newname</span></pre><p id="7299" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">“新名字”是“口袋妖怪机器人5000”或任何你喜欢的名字。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es ns"><img src="../Images/f467fb9cd5a4d92fc20fa2aa2c43ae25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*54d3jfwUndHFdVQb3mT8zQ.png"/></div></div></figure><p id="5bb1" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">初始化我们的存储库后，我们可以一次运行一个命令:</p><pre class="in io ip iq fd mn mo mp mq aw mr bi"><span id="2a07" class="lp jz hi mo b fi ms mt l mu mv">git add .</span><span id="5a50" class="lp jz hi mo b fi mw mt l mu mv">git commit -m “prepare files to deploy to heroku”</span><span id="a6d8" class="lp jz hi mo b fi mw mt l mu mv">git push heroku master</span></pre><p id="0180" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">这将添加我们所有的文件，不包括<strong class="ja hj">中的文件。gitignore </strong>，用我们指定的消息在我们的Git历史中“提交”，并将代码推送到Heroku。如果一切顺利，我们应该会在仪表板中看到我们的应用程序！</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es nt"><img src="../Images/0e42c11b3502c6e7d2265b7cb5a54d62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jBnxcbAmdHPESs2W8M4TvA.png"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx translated">您的应用程序将如下所示列出</figcaption></figure><p id="157c" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">点击我们的应用程序会将我们带到另一个特定于我们的应用程序的仪表板；在这里，我们将添加Heroku Scheduler插件，并设置我们的API键供Heroku读取。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es nu"><img src="../Images/7d664d1c63c70a1661739f7095574622.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CoT2bHYCiVet1cNYZl_41g.png"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx translated">“配置附加组件”是我们的目标</figcaption></figure><p id="a73e" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">一旦我们进入附加组件页面，我们将搜索Heroku调度程序，添加它(免费)，然后单击附加组件来设置我们的<a class="ae jx" href="https://www.heroku.com/dynos" rel="noopener ugc nofollow" target="_blank"> Dyno </a>作业。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es nv"><img src="../Images/5670bd555dad5318352a3404604d3b85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QGvxGXwHJw_ffbvDkCMB8g.png"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx translated">每月550小时的免费动态时间已经足够了</figcaption></figure><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es nw"><img src="../Images/65600c298d99d808a1add01acabe3003.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J7hgQSLHCyXgYGAnkqj9yg.png"/></div></div></figure><p id="30a1" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">我们的任务非常简单——我们可以选择它何时运行以及任务做什么。Heroku调度程序将使用一个内置命令行来运行“node bot.js ”,它将运行我们之前创建的Procfile worker。</p><p id="fa20" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">从应用程序的仪表板，我们想进入设置和编辑应用程序的环境变量。要设置它们:</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es nx"><img src="../Images/82e39dd83ba761c14997f64f1944e77f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iyBVWQjFqNgVoA5gWMuucw.png"/></div></div></figure><p id="8fe4" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">我们的键都设置好了，我们的任务也安排好了，我们可以期待我们的机器人自己发微博了。Heroku Scheduler加载项将显示任务下次运行的时间。随着一切的设置，我们的Twitter机器人是好的！建好了！</p><p id="a750" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">如果您有任何问题或建议，请发表评论！</p><p id="405a" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">代号:【https://github.com/sanchito59/Pokemon_Twitter_Bot T4】</p><p id="b34f" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">机器人:<a class="ae jx" href="https://twitter.com/Pokemon_Sprites" rel="noopener ugc nofollow" target="_blank">https://twitter.com/Pokemon_Sprites</a></p><p id="a3f5" class="pw-post-body-paragraph iy iz hi ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hb bi translated">其他机器人:<a class="ae jx" href="https://twitter.com/i/lists/1316210473084219393" rel="noopener ugc nofollow" target="_blank">https://twitter.com/i/lists/1316210473084219393</a></p><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es ny"><img src="../Images/7131b57fd9a3e86cef4f1b03b02d6e28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*SgZdPnqsdjerrqkv65u68w.gif"/></div></figure></div></div>    
</body>
</html>