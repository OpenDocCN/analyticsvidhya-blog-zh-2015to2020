<html>
<head>
<title>BIO / IOB Tagged Text to Original Text</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">生物/ IOB标记文本到原始文本</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/bio-tagged-text-to-original-text-99b05da6664?source=collection_archive---------0-----------------------#2019-12-19">https://medium.com/analytics-vidhya/bio-tagged-text-to-original-text-99b05da6664?source=collection_archive---------0-----------------------#2019-12-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/4a7a62dfa586ce81e0a1a11da73f3a1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ziPuUA05W1Qe4jLNyzFN5Q.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">来源:https://stocksnap.io/photo/NLBN1GQQET</figcaption></figure><p id="428c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这篇文章中，我们将看到如何将<strong class="ix hj">简历</strong>标签文本转换为原始文本。<strong class="ix hj"> BIO / IOB </strong>格式(简称<strong class="ix hj"> inside，outside，beginning】)是计算语言学(例如命名实体识别)。标签前的<strong class="ix hj"> B- </strong>前缀表示标签是块的开始，标签前的<strong class="ix hj"> I- </strong>前缀表示标签在块内。<strong class="ix hj"> B- </strong>标签仅在一个标签后面跟一个相同类型的标签，且两者之间没有O标记时使用。一个<strong class="ix hj"> O </strong>标签表示一个令牌不属于任何实体/块。</strong></p><p id="fb00" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下图显示了生物标记句子的样子:</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es jt"><img src="../Images/1f1ce1b5f2c1acb423a33180324bfa19.png" data-original-src="https://miro.medium.com/v2/resize:fit:490/format:webp/1*ugT0LItVKrmjk5ceLm_vNw.png"/></div></figure><p id="9ff0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最新的最先进的NLP技术称为<strong class="ix hj">来自变压器的双向编码器表示(BERT) </strong>使用生物标记信息进行训练。并且从BERT返回的输出/预测被生物标记。所以现在我们应该把它转换回原来的文本，在这篇文章中我们将看到如何做到这一点。</p><p id="eb78" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">属国</p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="1af0" class="kd ke hi jz b fi kf kg l kh ki">nltk</span></pre><p id="e8f6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先让我们导入依赖项:</p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="4d52" class="kd ke hi jz b fi kf kg l kh ki">from nltk import pos_tag<br/>from nltk.tree import Tree<br/>from nltk.chunk import conlltags2tree</span></pre><p id="0e3c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们创建变量来存储句子和标签。</p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="f498" class="kd ke hi jz b fi kf kg l kh ki">tokens = ['In', 'Beirut', ',', 'a', 'string', 'of', 'officials',<br/>          'voiced', 'their', 'anger', ',', 'while', 'at',<br/>          'the', 'United', 'Nations', 'summit', 'in', 'New', <br/>          'York', ',', 'Prime', 'Minister', 'Fouad', 'Siniora',<br/>          'said', 'the', 'Lebanese', 'people', 'are', 'resolute',<br/>          'in', 'preventing', 'such', 'attempts', 'from',<br/>          'destroying', 'their', 'spirit', '.']<br/>tags = ['O', 'B-geo', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', <br/>        'O', 'O', 'O', 'O', 'B-org', 'I-org', 'O', 'O', 'B-geo', <br/>        'I-geo', 'O', 'B-per', 'O', 'B-per', 'I-per', 'O', 'O', <br/>        'B-gpe', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', <br/>        'O', 'O', 'O']</span></pre><p id="4c19" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，我们需要用补充信息标记每个标记，比如它的词性。</p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="c2e2" class="kd ke hi jz b fi kf kg l kh ki">pos_tags = [pos for token, pos in pos_tag(tokens)]</span></pre><p id="6476" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后我们将BIO / IOB标签转换为tree</p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="6528" class="kd ke hi jz b fi kf kg l kh ki">conlltags = [(token, pos, tg) for token, pos, tg in zip(tokens, pos_tags, tags)]<br/>ne_tree = conlltags2tree(conlltags)</span></pre><p id="17d8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后，我们解析该树以获得原始文本</p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="ad8d" class="kd ke hi jz b fi kf kg l kh ki">original_text = []<br/>for subtree in ne_tree:<br/>    # skipping 'O' tags<br/>    if type(subtree) == Tree:<br/>        original_label = subtree.label()<br/>        original_string = " ".join([token for token, pos in subtree.leaves()])<br/>        original_text.append((original_string, original_label))<br/>print(original_text)</span></pre><p id="9777" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">输出</p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="f459" class="kd ke hi jz b fi kf kg l kh ki">[('Beirut', 'geo'),<br/> ('United Nations', 'org'),<br/> ('New York', 'geo'),<br/> ('Prime', 'per'),<br/> ('Fouad Siniora', 'per'),<br/> ('Lebanese', 'gpe')]</span></pre><p id="bf3a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">整个代码如下:</p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="d045" class="kd ke hi jz b fi kf kg l kh ki">from nltk import pos_tag<br/>from nltk.tree import Tree<br/>from nltk.chunk import conlltags2tree</span><span id="5413" class="kd ke hi jz b fi kj kg l kh ki">tokens = ['In', 'Beirut', ',', 'a', 'string', 'of', 'officials',<br/>          'voiced', 'their', 'anger', ',', 'while', 'at',<br/>          'the', 'United', 'Nations', 'summit', 'in', 'New', <br/>          'York', ',', 'Prime', 'Minister', 'Fouad', 'Siniora',<br/>          'said', 'the', 'Lebanese', 'people', 'are', 'resolute',<br/>          'in', 'preventing', 'such', 'attempts', 'from',<br/>          'destroying', 'their', 'spirit', '.']<br/>tags = ['O', 'B-geo', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', <br/>        'O', 'O', 'O', 'O', 'B-org', 'I-org', 'O', 'O', 'B-geo', <br/>        'I-geo', 'O', 'B-per', 'O', 'B-per', 'I-per', 'O', 'O', <br/>        'B-gpe', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', <br/>        'O', 'O', 'O']</span><span id="17be" class="kd ke hi jz b fi kj kg l kh ki"># tag each token with pos<br/>pos_tags = [pos for token, pos in pos_tag(tokens)]<br/># convert the BIO / IOB tags to tree<br/>conlltags = [(token, pos, tg) for token, pos, tg in zip(tokens, pos_tags, tags)]<br/>ne_tree = conlltags2tree(conlltags)</span><span id="c277" class="kd ke hi jz b fi kj kg l kh ki"># parse the tree to get our original text<br/>original_text = []<br/>for subtree in ne_tree:<br/>    # checking for 'O' tags<br/>    if type(subtree) == Tree:<br/>        original_label = subtree.label()<br/>        original_string = " ".join([token for token, pos in                      subtree.leaves()])<br/>        original_text.append((original_string, original_label))<br/>print(original_text)</span></pre><p id="deea" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这样，我们可以将BIO / IOB标签转换为原始文本。</p><p id="87dd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你可以在这里找到回购<a class="ae iu" href="https://github.com/jerilkuriakose/BIO-IOB-tags-to-original-text" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="2426" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">编码快乐！！！</p></div></div>    
</body>
</html>