<html>
<head>
<title>Real-Time Object Detection with TensorFlow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于张量流的实时目标检测</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/real-time-object-detection-with-tensorflow-64e2677521ce?source=collection_archive---------22-----------------------#2020-05-03">https://medium.com/analytics-vidhya/real-time-object-detection-with-tensorflow-64e2677521ce?source=collection_archive---------22-----------------------#2020-05-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/6d9d4cec9f9b33603249c5047c49b3f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t_OH_8VfHmRJBDWhEQyloA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">我在洛杉矶拍了这张照片</figcaption></figure><p id="c5f7" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是一个时间来尝试对象检测作为实时与API！</p><p id="d445" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在本文中，我将介绍使用TensorFlow对象检测API进行实时检测。</p><p id="bc06" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">当时，我试着用这篇文章来做这件事</p></div><div class="ab cl js jt gp ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="hb hc hd he hf"><div class="jz ka kb kc fd kd"><a href="https://towardsdatascience.com/live-object-detection-26cd50cceffd" rel="noopener follow" target="_blank"><div class="ke ab dw"><div class="kf ab kg cl cj kh"><h2 class="bd hj fi z dy ki ea eb kj ed ef hh bi translated">活体检测</h2><div class="kk l"><h3 class="bd b fi z dy ki ea eb kj ed ef dx translated">使用Tensorflow对象检测API进行活体对象检测</h3></div><div class="kl l"><p class="bd b fp z dy ki ea eb kj ed ef dx translated">towardsdatascience.com</p></div></div><div class="km l"><div class="kn l ko kp kq km kr io kd"/></div></div></a></div></div><div class="ab cl js jt gp ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="hb hc hd he hf"><p id="1321" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">但不知何故，它不起作用，我发现我需要关注TensorFlow 2.0，这是最近的一个重大更新。所以我要解决这个问题，并在这里分享！</p><h1 id="14e4" class="ks kt hi bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">物体检测教程</h1><p id="7dd2" class="pw-post-body-paragraph iu iv hi iw b ix lq iz ja jb lr jd je jf ls jh ji jj lt jl jm jn lu jp jq jr hb bi translated">我们将参考Github 上的<a class="ae lv" href="https://github.com/tensorflow/models" rel="noopener ugc nofollow" target="_blank"> TensorFlow对象检测API库，如果您不克隆该库，请克隆为</a></p><pre class="jz ka kb kc fd lw lx ly lz aw ma bi"><span id="469e" class="mb kt hi lx b fi mc md l me mf">git clone <a class="ae lv" href="https://github.com/tensorflow/models.git" rel="noopener ugc nofollow" target="_blank">https://github.com/tensorflow/models.git</a></span></pre><p id="f125" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">然后我们将使用“object _ detection _ tutorial . ipynb ”,其中位于/models/research/object _ detection中。然后，您只需在本地机器上运行Jupyter notebook。</p><p id="e413" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">此外，您可以使用测试图像和您自己的图像来检测图片中的对象。例如，我只是分享我在西雅图拍摄的测试图像。</p><figure class="jz ka kb kc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mg"><img src="../Images/7873bc110a94c6f679919981a93a0797.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QZXww3Zh9kxgCK1O_pcAIg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">检测到三个物体(顺便说一下，那个饭盒相当不错)</figcaption></figure><h1 id="4673" class="ks kt hi bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">编辑推理代码</h1><p id="42b6" class="pw-post-body-paragraph iu iv hi iw b ix lq iz ja jb lr jd je jf ls jh ji jj lt jl jm jn lu jp jq jr hb bi translated">接下来，我们需要编辑笔记本，以便能够实时检测。为了做到这一点，让我们看看笔记本，看看倒数第六个单元格。</p><pre class="jz ka kb kc fd lw lx ly lz aw ma bi"><span id="a310" class="mb kt hi lx b fi mc md l me mf"><strong class="lx hj">def</strong> show_inference(model, image_path):<br/>  <em class="mh"># the array based representation of the image will be used later in order to prepare the</em><br/>  <em class="mh"># result image with boxes and labels on it.</em><br/>  image_np = np.array(Image.open(image_path))<br/>  <em class="mh"># Actual detection.</em><br/>  output_dict = run_inference_for_single_image(model, image_np)<br/>  <em class="mh"># Visualization of the results of a detection.</em><br/>  vis_util.visualize_boxes_and_labels_on_image_array(<br/>      image_np,<br/>      output_dict['detection_boxes'],<br/>      output_dict['detection_classes'],<br/>      output_dict['detection_scores'],<br/>      category_index,<br/>      instance_masks=output_dict.get('detection_masks_reframed', <strong class="lx hj">None</strong>),<br/>      use_normalized_coordinates=<strong class="lx hj">True</strong>,<br/>      line_thickness=8)<br/><br/>  display(Image.fromarray(image_np))</span></pre><p id="0f91" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">该单元具有“显示_推断”功能，它只能逐个检测对象。所以我们要用Opencv修改一些部分。</p><p id="4e84" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">为此，这是修改后的代码(确保您需要安装OpenCV包)</p><pre class="jz ka kb kc fd lw lx ly lz aw ma bi"><span id="643b" class="mb kt hi lx b fi mc md l me mf">import cv2<br/>cap = cv2.VideoCapture(0)</span><span id="99c7" class="mb kt hi lx b fi mi md l me mf">def run_inference(model, cap):<br/>    while True:<br/>        ret, image_np = cap.read()<br/>        # Actual detection.<br/>        output_dict = run_inference_for_single_image(model, image_np)<br/>        # Visualization of the results of a detection.<br/>        vis_util.visualize_boxes_and_labels_on_image_array(<br/>            image_np,<br/>            output_dict['detection_boxes'],<br/>            output_dict['detection_classes'],<br/>            output_dict['detection_scores'],<br/>            category_index,<br/>            instance_masks=output_dict.get('detection_masks_reframed', None),<br/>            use_normalized_coordinates=True,<br/>            line_thickness=8)<br/>        cv2.imshow('object_detection', cv2.resize(image_np, (800, 600)))<br/>        if cv2.waitKey(25) &amp; 0xFF == ord('q'):<br/>            cap.release()<br/>            cv2.destroyAllWindows()<br/>            break</span></pre><p id="b1dc" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">最后，调用这个命令。</p><pre class="jz ka kb kc fd lw lx ly lz aw ma bi"><span id="31c1" class="mb kt hi lx b fi mc md l me mf">run_inference(detection_model, cap)</span></pre><p id="22d6" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">那我希望你能做实时物体检测。正如你在下面看到的，它将是这样的。</p><figure class="jz ka kb kc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mj"><img src="../Images/284d1152a67dcc0fcf8e7bb90fdd07b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_zcP0yfu8X7-sWtt4ON7ng.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">我的机器上的实时对象检测</figcaption></figure><p id="f12f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">此外，您也可以在本教程笔记本上使用它进行分段。只需按照笔记本上的说明下载一个分段模型，然后使用此命令而不是show_inference</p><pre class="jz ka kb kc fd lw lx ly lz aw ma bi"><span id="638f" class="mb kt hi lx b fi mc md l me mf">run_inference(masking_model, cap)</span></pre><h1 id="d1b3" class="ks kt hi bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">结论</h1><p id="56ed" class="pw-post-body-paragraph iu iv hi iw b ix lq iz ja jb lr jd je jf ls jh ji jj lt jl jm jn lu jp jq jr hb bi translated">如果你喜欢这篇文章，请你亲自尝试一下！对象检测API对于我们尝试演示以及制作自己的检测模型非常有用。在未来，我将使用这个API尝试我自己的检测模型，并张贴在这里！</p><h1 id="a4f0" class="ks kt hi bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">参考</h1><div class="mk ml ez fb mm kd"><a href="https://towardsdatascience.com/live-object-detection-26cd50cceffd" rel="noopener follow" target="_blank"><div class="ke ab dw"><div class="kf ab kg cl cj kh"><h2 class="bd hj fi z dy ki ea eb kj ed ef hh bi translated">活体检测</h2><div class="kk l"><h3 class="bd b fi z dy ki ea eb kj ed ef dx translated">使用Tensorflow对象检测API进行活体对象检测</h3></div><div class="kl l"><p class="bd b fp z dy ki ea eb kj ed ef dx translated">towardsdatascience.com</p></div></div><div class="km l"><div class="kn l ko kp kq km kr io kd"/></div></div></a></div><div class="mk ml ez fb mm kd"><a href="https://github.com/tensorflow/models" rel="noopener  ugc nofollow" target="_blank"><div class="ke ab dw"><div class="kf ab kg cl cj kh"><h2 class="bd hj fi z dy ki ea eb kj ed ef hh bi translated">张量流/模型</h2><div class="kk l"><h3 class="bd b fi z dy ki ea eb kj ed ef dx translated">TensorFlow模型花园是一个存储库，包含许多最新(SOTA)的不同实现…</h3></div><div class="kl l"><p class="bd b fp z dy ki ea eb kj ed ef dx translated">github.com</p></div></div><div class="km l"><div class="mn l ko kp kq km kr io kd"/></div></div></a></div><p id="d1ba" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">并请关注我的推特<a class="ae lv" href="https://twitter.com/Kohei_Dozono" rel="noopener ugc nofollow" target="_blank"> @Kohei_Dozono </a>！！！</p></div></div>    
</body>
</html>