<html>
<head>
<title>Analysing and Visualising Tweets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">分析和可视化推文</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/analysing-and-visualising-tweets-d3690abfc5fe?source=collection_archive---------23-----------------------#2020-08-15">https://medium.com/analytics-vidhya/analysing-and-visualising-tweets-d3690abfc5fe?source=collection_archive---------23-----------------------#2020-08-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/5df5e44b19dfccc8ecbd4576711adac2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KSfaJtfQ6BZ9nRSgPwqA_A.png"/></div></div></figure><p id="58e2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这篇文章中，我们将学习如何使用Kibana，Docker基于搜索关键字来分析和可视化推文。这些数据可以进一步用于人工智能和人工智能任务，以预测不同领域的事件和检测某些事件，如分析抑郁症和癌症推文，人工智能可以将其用于医疗保健行业。</p><p id="58a1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">先决条件</strong></p><blockquote class="jo jp jq"><p id="269a" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated">Docker安装在您的机器上。你可以按照Docker的官方文档在你的机器上安装它。</p><p id="e9f1" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated">Twitter用户的访问令牌:用户可以通过访问Twitter的开发者面板来获得他们自己的访问令牌，在那里他们的帐户可以获得访问令牌。<br/>这由4个值组成，分别是:<br/> <em class="hi">消费者密钥、消费者秘密、oauth令牌和oauth令牌秘密</em></p></blockquote><p id="93c7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">简介</strong></p><blockquote class="jo jp jq"><p id="309e" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated"><strong class="is hj"> Kibana: </strong> Kibana是一个开源前端应用程序，位于Elastic堆栈之上，为Elasticsearch中索引的数据提供搜索和数据可视化功能。Kibana有许多用于数据探索、可视化、监控和管理的特性。Kibana和EL stack可用于查找异常和异常值，根据趋势进行预测，并通过弹性机器学习识别数据中的感兴趣区域。</p><p id="cb72" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated"><strong class="is hj"> Docker: </strong> Docker是一个工具，旨在通过使用容器来简化应用程序的创建、部署和运行。容器允许开发人员将应用程序与它需要的所有部分打包在一起，比如库和其他依赖项，并作为一个包进行部署。</p></blockquote><p id="6b66" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">如何实现</strong></p><p id="55eb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤1:运行ELK的docker映像<br/> </strong>确保您有ELK的Docker映像，如果没有，您可以运行以下命令来获取该映像</p><ul class=""><li id="91ca" class="jv jw hi is b it iu ix iy jb jx jf jy jj jz jn ka kb kc kd bi translated"><strong class="is hj"> <em class="jr">码头工人拉塞布/麋鹿</em> </strong></li></ul><p id="616e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这里，我使用sebp/elk图像，这是由整个elk堆栈组成的单一图像。一旦你用这个图像运行容器，在此之前我们需要增加mmap计数，因为Elasticsearch默认使用mmapfs目录来存储它的索引。mmap计数的默认操作系统限制可能太低，这可能导致内存不足异常。</p><p id="842e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在Linux上，您可以通过以root用户身份运行以下命令来增加限制:</p><ul class=""><li id="486b" class="jv jw hi is b it iu ix iy jb jx jf jy jj jz jn ka kb kc kd bi translated"><strong class="is hj"><em class="jr">sysctl-w VM . max _ map _ count = 262144</em></strong></li></ul><p id="2ec5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">默认情况下，Elasticsearch使用一个<code class="du ke kf kg kh b"><a class="ae ki" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index-modules-store.html#mmapfs" rel="noopener ugc nofollow" target="_blank">mmapfs</a></code>目录来存储其索引。mmap计数的默认操作系统限制可能太低，这可能导致内存不足异常。</p><p id="8975" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在Linux上，您可以通过以<code class="du ke kf kg kh b">root</code>的身份运行以下命令来增加限制:</p><ul class=""><li id="86fd" class="jv jw hi is b it iu ix iy jb jx jf jy jj jz jn ka kb kc kd bi translated"><strong class="is hj"><em class="jr">docker run-p 5601:5601-p 9200:9200-p 9300:9300-p 5044:5044-it sebp/elk</em></strong></li></ul><p id="db9c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦容器开始运行，复制可以通过使用命令"<strong class="is hj"><em class="jr">【docker PS "</em></strong>获得的容器id，然后使用这个命令ssh到容器中</p><blockquote class="jo jp jq"><p id="03b9" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated">##通过您复制的容器标识删除“容器标识”</p></blockquote><p id="d562" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"><em class="jr">docker exec-u 0-it ' container _ id '/bin/bash</em></strong></p><p id="51f3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第二步:修改配置文件</strong></p><p id="ef76" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦你通过ssh进入你的容器，转到<strong class="is hj"> ' /etc/logstash/conf.d' </strong>目录，你会在那里看到下面的文件</p><figure class="kk kl km kn fd ij er es paragraph-image"><div class="er es kj"><img src="../Images/c31e55cb6adc05f81ab36271608b56b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/1*hDaFEwgmJCY0lwHRYPp6BQ.png"/></div></figure><p id="f0fc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里我们必须修改输入和输出文件。</p><p id="5a8d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于<strong class="is hj"> 02-beats-input.conf，</strong>我们将对其进行修改，使其接受来自twitter api的输入，而不是向其传递任何文件。修改后的文件如下所示</p><p id="c6be" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> 02-beats-input.conf </strong></p><blockquote class="jo jp jq"><p id="de6c" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated"><strong class="is hj">输入{<br/>Twitter {<br/>consumer _ key =&gt;“* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *<br/>oauth _ token =&gt;“* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *<br/>oauth _ token _ secret =&gt;“* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *”<br/>关键词= &gt;【抑郁】【电晕】【电晕】</strong></p></blockquote><p id="58e0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">用你想要搜索的关键词替换关键词，用你为你的帐户得到的访问令牌替换访问令牌。</p><p id="899a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于<strong class="is hj"> 30-output.conf，</strong>我们将对其进行修改，以索引模式<strong class="is hj">‘tweets-</strong>’输出数据到elasticsearch，后面跟日期。</p><p id="8568" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> 30-output.conf </strong></p><blockquote class="jo jp jq"><p id="bede" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated"><strong class="is hj">output {<br/>elastic search {<br/>hosts =&gt;[" localhost "]<br/>manage _ template =&gt;false<br/>index =&gt;" tweets-% {+YYYY。MM.dd}" <br/> } <br/> } </strong></p></blockquote><p id="062b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第三步:重启容器</strong></p><p id="66b4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦我们更改了配置文件，我们需要重启容器以使更改生效。使用命令<strong class="is hj">‘docker restart container _ id’</strong>重启容器。</p><p id="14a5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">第四步:启动基巴纳:</strong></p><p id="e1f4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦Kibana准备就绪，在你的浏览器上启动<strong class="is hj">‘localhost:5601’</strong>，如果一切正常，kibana仪表板就会出现。</p><p id="96fe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在Kibana Dashboard中，在堆栈管理下创建一个索引模式</p><figure class="kk kl km kn fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ko"><img src="../Images/9cd730a53aca0c8e74564a7b4c76ee5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KWuHDXVyjsASB4MdXpU-rw.png"/></div></div></figure><figure class="kk kl km kn fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kp"><img src="../Images/6d355a3d7e8b9f5724d894b75e766395.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8PmhVCOQlaIlvv8Ww_erXQ.png"/></div></div></figure><p id="9173" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建索引模式后，您可以转到discover面板，可以根据字段、时间和其他事实过滤数据，并可以下载csv格式的数据以供进一步分析。Kibana为您提供了您想要使用的不同可视化技术。</p><figure class="kk kl km kn fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kq"><img src="../Images/8047b50463ba3198c04ed511416692df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lgoao1-pzhyofREfwDqnyQ.png"/></div></div></figure><p id="3055" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通过这种方式，您可以分析大量tweets数据，这些数据可以进一步用于ML模型，并可以使用不同的过滤器和时区在Kibana dashboard中以图形、峰值、图表的形式可视化。</p></div></div>    
</body>
</html>