<html>
<head>
<title>Audio Data Processing — Feature Extraction — Essential Science &amp; Concepts behind them — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">音频数据处理—特征提取—背后的基本科学和概念—第二部分</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/audio-data-processing-feature-extraction-essential-science-concepts-behind-them-part-2-9c738e6a7f99?source=collection_archive---------8-----------------------#2020-04-17">https://medium.com/analytics-vidhya/audio-data-processing-feature-extraction-essential-science-concepts-behind-them-part-2-9c738e6a7f99?source=collection_archive---------8-----------------------#2020-04-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/c13114dac36faf6a7feb98eb7df22a51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*x1vymn2ZmvkrLRg-.jpg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">音频处理—第2部分，src — <a class="ae iu" href="https://pro.harman.com/insights/enterprise/education/types-of-audio-processing-a-primer/" rel="noopener ugc nofollow" target="_blank">链接</a></figcaption></figure><p id="ae11" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">注意:本系列的第1部分详细解释了这些概念，可在<a class="ae iu" rel="noopener" href="/analytics-vidhya/audio-data-processing-feature-extraction-science-concepts-behind-them-be97fbd587d8">这里</a>找到。</p><p id="2002" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在之前的<a class="ae iu" rel="noopener" href="/analytics-vidhya/audio-data-processing-feature-extraction-science-concepts-behind-them-be97fbd587d8">部分</a>，我们已经详细了解了与音频数据处理相关的各种理论概念。在这篇文章中，我们将直接进入处理方面，看看如何从音频文件中提取特征。</p><p id="5c0e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们直接开始加载音频文件，为此我们将使用著名的“librosa”库。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es jt"><img src="../Images/57b3b1d2041d90dad3c11f3fd5291a9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:922/format:webp/1*OKg1-Fw5_W-DIC0jEoDcDw.png"/></div></figure><p id="b167" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如您所见，我们已经导入了库并加载了音频文件。加载时，load函数返回2个值——x和sr。</p><p id="c485" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里，“x”对应于音频中捕获的样本数，“sr”对应于采样率(每秒采样的振幅数)。</p><p id="30c7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们看看“x”和“sr”的值。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jy"><img src="../Images/ebec053fa6e5c92299f89ce0142a9026.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q1Q7uY8RvTn3MSxjI6rJ7A.png"/></div></div></figure><p id="1829" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">音频文件中的样本数是3104256，采样率是22050。</p><p id="f3f9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们找出音频文件的持续时间:</p><blockquote class="jz ka kb"><p id="e138" class="iv iw kc ix b iy iz ja jb jc jd je jf kd jh ji jj ke jl jm jn kf jp jq jr js hb bi translated"><em class="hi">音频持续时间=样本数/采样率= 3104256/22050 = 140.78秒</em></p></blockquote><p id="901a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">根据我们的计算，音频文件持续时间应该是140秒。让我们核实一下。是的，它是140秒(2分20秒，如下所示)。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es kg"><img src="../Images/50d300ac62f1b436cbaa546c7ca8e0fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*Pd5TJw7UWMzYE7EMSTzVxQ.png"/></div></figure><p id="734e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，让我们绘制音频文件的波形图，这是振幅与时间的关系图。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es kh"><img src="../Images/0bc9407733e981abcfb6aa263ccb71f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*gGOeXzP7QI-eCUuUMjCHwQ.png"/></div></figure><p id="ffc4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">看起来不错，但在我们之前的文章中，我们已经研究过音频信号是三维的，还有一个重要的维度叫做频率。</p><p id="5620" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如何从这个图中提取不同波信号的频率？你们还记得我们在上一篇文章中详细讨论的快速傅立叶变换(FFT)吗？。</p><p id="5d7f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们应用FFT并提取频率相关信息。Librosa有一个强大的api来应用FFT，只需几行代码就能提取频率，如下所示:</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es ki"><img src="../Images/982015113e4d8ff35a6aa26a8c76cdb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*Q4UJOl6Q7WeleIW0vap3Gw.png"/></div></figure><p id="085f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">等等！！！我们将“x”值(音频文件中的总帧数)传递给librosa的“stft”函数，它提供了一些2D矩阵作为具有某些维度的输出。发生了什么事？！？！</p><p id="bf2c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是它变得有点颠簸的地方。让我解释一下这里发生了什么。</p><p id="ea20" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">正如您所观察到的，这是一个140秒的音频剪辑，我们无法一次将整个音频传递给FFT函数。这对于计算来说太多了。因此，我们需要将音频剪辑分割成不同的恒定帧长的窗口，并对它们进行累积处理。我们称这个长度为“窗口长度”。</p><p id="813c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因为它是一个音频文件，并且为了在处理时保持连续性，我们让来自后续窗口的一些帧彼此重叠，并且每个窗口处理的帧的实际唯一计数被称为“跳跃长度”。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es kj"><img src="../Images/64f3757b4acc4f0eca9ec52b5fb291d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*aaRRPpqd2Ya8CZS-b8sDSA.png"/></div></figure><p id="8506" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如此处所示，每个窗口都包含“跳跃长度”+“重叠窗口”的帧数。</p><p id="86be" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们回到我们的数据和计算。我们有一个持续时间为140秒和3104256帧的音频文件。一旦我们将它馈送到FFT，其中“hop_length”为512,“n _ FFT”为4096，我们就获得了(2049，6064)维的结果。</p><p id="7c08" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里，“2049”对应于(1 + n_fft/2)的值，即(1 + (4096/2))。</p><p id="cc15" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">类似地，在结果中,“6064”对应于(“总帧数”/“hop _ length”四舍五入到最接近的2的幂)，在我们的例子中是(3104256/512=6063)。</p><p id="784b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">梅尔频率倒谱系数(MFCC) </strong></p><p id="fa9e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">那些处理音频处理的人可能会遇到MFCC系数，但它们是什么呢？在到达那里之前，我们需要了解什么是‘梅尔标度’。</p><p id="4ae9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如你所知，人类的听觉范围只有20Hz-20KHz之间。对于大多数音频处理应用来说，不在这个范围内的任何声波都不是关键的。因此，相对于其他声波而言，属于这个范围的声波需要特别考虑。此外，与识别“10100 Hz”和“10200 Hz”之间的差异相比，人类听到“100 Hz”和“200Hz”声波之间的差异的感知要高得多，尽管Hz值的差异是相同的。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es kk"><img src="../Images/b64e473c8f63f239316701e5fd01f04f.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/format:webp/1*bNYBSO1uRlQcp9i3DIoJeA.png"/></div></figure><p id="f653" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，mel标度是一种非线性变换标度，它将音频的频率范围变换到不同的值范围，其差异对于最终用户来说听起来是相同的，与值无关。</p><p id="1831" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">考虑到这一点，用mel比例变换处理我们的音频会更有意义，我们可以用下面的代码将我们的音频转换成“mfcc”系数:</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es kl"><img src="../Images/c5ff046ba4916cc6ff320b9c4637b821.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*H0PhL4V7A8nTMRUKk_jPFA.png"/></div></figure><p id="67b8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里输出的维数是(20，6064)。值6064已经用值‘hop _ length’以相同的方式计算，而20行对应于与音频文件的频率范围相对应的各种系数范围。</p><p id="83aa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你可以在这里找到描述上述解释<a class="ae iu" href="https://github.com/VVasanth/MachineLearning/blob/master/AudioDataProcessing/AudioProcessing_Part2.ipynb" rel="noopener ugc nofollow" target="_blank">的代码。</a></p><p id="14b5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">关于音频处理的2部分系列到此结束。</p><p id="eb7f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请随时评论您的疑问，祝您学习愉快！！</p><p id="daa5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">参考资料:</p><div class="km kn ez fb ko kp"><a href="https://musicinformationretrieval.com/mfcc.html" rel="noopener  ugc nofollow" target="_blank"><div class="kq ab dw"><div class="kr ab ks cl cj kt"><h2 class="bd hj fi z dy ku ea eb kv ed ef hh bi translated">mfcc</h2><div class="kw l"><h3 class="bd b fi z dy ku ea eb kv ed ef dx translated">信号的mel倒谱系数(MFCCs)是一个很小的特征集(通常大约10-20 ),它…</h3></div><div class="kx l"><p class="bd b fp z dy ku ea eb kv ed ef dx translated">musicinformationretrieval.com</p></div></div></div></a></div><div class="km kn ez fb ko kp"><a rel="noopener follow" target="_blank" href="/prathena/the-dummys-guide-to-mfcc-aceab2450fd"><div class="kq ab dw"><div class="kr ab ks cl cj kt"><h2 class="bd hj fi z dy ku ea eb kv ed ef hh bi translated">MFCC虚拟指南</h2><div class="kw l"><h3 class="bd b fi z dy ku ea eb kv ed ef dx translated">免责声明1:这篇文章只是一个MFCC功能的介绍，是为那些需要一个简单和…</h3></div><div class="kx l"><p class="bd b fp z dy ku ea eb kv ed ef dx translated">medium.com</p></div></div><div class="ky l"><div class="kz l la lb lc ky ld io kp"/></div></div></a></div></div></div>    
</body>
</html>