<html>
<head>
<title>Download images agiler using “Multithreading” from Unsplash in Python.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python中的“多线程”从Unsplash下载images agiler。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-download-images-faster-using-multithreading-in-python-a31110468770?source=collection_archive---------7-----------------------#2020-02-12">https://medium.com/analytics-vidhya/how-to-download-images-faster-using-multithreading-in-python-a31110468770?source=collection_archive---------7-----------------------#2020-02-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="7a1c" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">快速入门教程</h2><div class=""/><div class=""><h2 id="47a3" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">指南:从Unsplash下载图片的最快方法。</h2></div><p id="23c7" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">传统上，我们通过点击每个文件来下载文件，但是如果我们需要越来越多的文件呢？我们可能期望编程可以帮助我们。在这篇文章中，从上一个关于"<a class="ae kc" rel="noopener" href="/@hanniballiang/how-to-start-multithreading-in-python-in-just-5-minutes-fe1f28d7aa56">多线程</a>的主题中延伸出这个想法，并使用实际的实例来给你带来更多关于何时使用它的直觉。从“图像”开始会更容易，因为它是我们每天面对的最常见的文件。</p></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><h1 id="073d" class="kk kl hi bd km kn ko kp kq kr ks kt ku ix kv iy kw ja kx jb ky jd kz je la lb bi translated">概念简介</h1><p id="0936" class="pw-post-body-paragraph jg jh hi ji b jj lc is jl jm ld iv jo jp le jr js jt lf jv jw jx lg jz ka kb hb bi translated">让我们把从Unsplash下载图像作为我们今天的任务，这个想法可以扩展到所有类型的文件下载，并在下一段中研究细节。以下是步骤。</p><ol class=""><li id="b965" class="lh li hi ji b jj jk jm jn jp lj jt lk jx ll kb lm ln lo lp bi translated">从网页上抓取图片网址。</li><li id="7c51" class="lh li hi ji b jj lq jm lr jp ls jt lt jx lu kb lm ln lo lp bi translated">用多线程通过URL下载。</li><li id="8057" class="lh li hi ji b jj lq jm lr jp ls jt lt jx lu kb lm ln lo lp bi translated">使用和不使用多线程。</li></ol><p id="4155" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">如果你之前不知道<strong class="ji hs">多线程在python </strong>中是怎么用的，推荐你看一下<a class="ae kc" rel="noopener" href="/@hanniballiang/how-to-start-multithreading-in-python-in-just-5-minutes-fe1f28d7aa56#c4c2-98d0c9a84364">我之前的文章</a>。</p><figure class="lw lx ly lz fd ma er es paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="er es lv"><img src="../Images/8dadd31416be4bf9c8af407bd3301b69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tSmQMNLqxklzeSs6m5263w.jpeg"/></div></div><figcaption class="mh mi et er es mj mk bd b be z dx translated">Unsplash是致力于分享开源图片的最好的图片网站。</figcaption></figure></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><h1 id="eab8" class="kk kl hi bd km kn ko kp kq kr ks kt ku ix kv iy kw ja kx jb ky jd kz je la lb bi translated">抓取图像URL</h1><p id="8dd8" class="pw-post-body-paragraph jg jh hi ji b jj lc is jl jm ld iv jo jp le jr js jt lf jv jw jx lg jz ka kb hb bi translated">URL是一个网址，您可以在浏览器的地址栏中找到它。每当你下载一个图像，你通过URL抓取一个网络资源，并把它添加到我们的计算机上。</p><p id="db36" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">为了获取这些URL，我们使用chrome extension的一个工具来简化它。在浏览器上搜索“<a class="ae kc" href="https://www.google.com/search?q=Image+Link+Grabber&amp;rlz=1C5CHFA_enTW867TW870&amp;oq=Image+Link+Grabber&amp;aqs=chrome..69i57j0j69i60l2.284j0j7&amp;sourceid=chrome&amp;ie=UTF-8" rel="noopener ugc nofollow" target="_blank">图片链接抓取器</a>”，点击第一个结果，你将进入如下页面。</p><figure class="lw lx ly lz fd ma er es paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="er es ml"><img src="../Images/dd4fa19002bfa6ebf5683203366154ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*85pSkodyJPVDUx5rkgEh1w.png"/></div></div></figure><p id="a75f" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">在你添加到Chrome之后，现在让我们进入一个类似<a class="ae kc" href="https://unsplash.com/collections/566331/earth-tones" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>的图片网站，点击浏览器右上角的橙色按钮。</p><figure class="lw lx ly lz fd ma er es paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="er es mm"><img src="../Images/572417d2c3caea5e2056768809019fe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4B-wJfJ-BZaRdfkPnpM7mw.png"/></div></div><figcaption class="mh mi et er es mj mk bd b be z dx translated"><a class="ae kc" href="https://unsplash.com/collections/566331/earth-tones" rel="noopener ugc nofollow" target="_blank">https://unsplash.com/collections/566331/earth-tones</a></figcaption></figure><figure class="lw lx ly lz fd ma er es paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="er es mn"><img src="../Images/eff98ba4e56a5bd59f794644666c4af6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EI0EdHqp5i60-ouwRimd3A.png"/></div></div></figure><p id="f806" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">单击底部的复制按钮复制这些URL，然后继续下一部分。</p><h1 id="3549" class="kk kl hi bd km kn mo kp kq kr mp kt ku ix mq iy kw ja mr jb ky jd ms je la lb bi translated">多线程下载</h1><p id="3bb7" class="pw-post-body-paragraph jg jh hi ji b jj lc is jl jm ld iv jo jp le jr js jt lf jv jw jx lg jz ka kb hb bi translated">创建一个名为“url_list.txt”的文本文件并粘贴你得到的所有url，在同一个文件夹中创建另一个python文件。我们将通过python遍历每个URL。</p><p id="02d8" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">在这段代码中，我们打开名为“url_list.txt”的文件，其中包含url，并循环遍历每一行以创建一个列表。接下来，把每个元素放在函数里面在线下载，然后我们可以在同一个文件夹里面找到这些图片。提到<code class="du mt mu mv mw b">time.perf_counter()</code>是用于计算下载过程的持续时间。</p><figure class="lw lx ly lz fd ma"><div class="bz dy l di"><div class="mx my l"/></div></figure><pre class="lw lx ly lz fd mz mw na nb aw nc bi"><span id="a642" class="nd kl hi mw b fi ne nf l ng nh">#The output should be<br/>Finished in 65.83849721899999 seconds</span></pre><p id="d679" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">如果您运行代码，您会注意到完成任务需要相当长的时间，这似乎是不明智的。幸运的是，应用多线程是可能的，而且太容易想象了。</p><p id="a98a" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">每当调用该函数时，就去创建线程，然后代码就会变成这种形式。</p><figure class="lw lx ly lz fd ma"><div class="bz dy l di"><div class="mx my l"/></div></figure><pre class="lw lx ly lz fd mz mw na nb aw nc bi"><span id="7853" class="nd kl hi mw b fi ne nf l ng nh">#The output should be<br/>Finished in 2.5736677319999997 seconds</span></pre><p id="7a1a" class="pw-post-body-paragraph jg jh hi ji b jj jk is jl jm jn iv jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">输出是可预期的，但令人震惊。试着把这种方法运用到其他案例中，希望这能帮你得到一些思路。</p></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><h1 id="075e" class="kk kl hi bd km kn ko kp kq kr ks kt ku ix kv iy kw ja kx jb ky jd kz je la lb bi translated">应用</h1><p id="a098" class="pw-post-body-paragraph jg jh hi ji b jj lc is jl jm ld iv jo jp le jr js jt lf jv jw jx lg jz ka kb hb bi translated">在很多情况下，我们随时随地下载文件。</p><ul class=""><li id="1cd8" class="lh li hi ji b jj jk jm jn jp lj jt lk jx ll kb ni ln lo lp bi translated">机器学习开发人员:你可能需要从网络上获取数据，以创建数据集来训练模型。</li><li id="daa2" class="lh li hi ji b jj lq jm lr jp ls jt lt jx lu kb ni ln lo lp bi translated">电影剪辑师:你可能会经常从音频网站上收集素材。</li><li id="3b43" class="lh li hi ji b jj lq jm lr jp ls jt lt jx lu kb ni ln lo lp bi translated">艺术家:做研究的时候你可能需要很多照片。</li></ul></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><h1 id="b719" class="kk kl hi bd km kn ko kp kq kr ks kt ku ix kv iy kw ja kx jb ky jd kz je la lb bi translated">资源</h1><p id="d8b9" class="pw-post-body-paragraph jg jh hi ji b jj lc is jl jm ld iv jo jp le jr js jt lf jv jw jx lg jz ka kb hb bi translated">这种方式并不局限于抓取网址，但我认为使用Chrome扩展可能是我所知道的最简单的一种。以下是不同的方法，获得相同的网址，但更复杂的新手:</p><ul class=""><li id="2b14" class="lh li hi ji b jj jk jm jn jp lj jt lk jx ll kb ni ln lo lp bi translated"><a class="ae kc" href="https://algorithmia.com/blog/fast-way-scrape-image-urls-webpages" rel="noopener ugc nofollow" target="_blank"> Algorithmia </a></li><li id="9975" class="lh li hi ji b jj lq jm lr jp ls jt lt jx lu kb ni ln lo lp bi translated"><a class="ae kc" href="https://hackersandslackers.com/scraping-urls-with-beautifulsoup/" rel="noopener ugc nofollow" target="_blank">美丽的风景</a></li></ul></div></div>    
</body>
</html>