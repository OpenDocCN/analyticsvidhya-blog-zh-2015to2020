<html>
<head>
<title>Natural Language Processing Journey of Hugh Lofting’s Doctor Dolittle</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">休·洛夫汀的《怪医杜立德》的自然语言处理之旅</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/a-natural-language-processing-journey-of-hugh-loftings-doctor-dolittle-18e63375bdb4?source=collection_archive---------16-----------------------#2019-12-20">https://medium.com/analytics-vidhya/a-natural-language-processing-journey-of-hugh-loftings-doctor-dolittle-18e63375bdb4?source=collection_archive---------16-----------------------#2019-12-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="6c37" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用网络抓取、NLTK、wordcloud和情感分析的教程</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ix"><img src="../Images/de1ab86bd4163469bc6be7f108f66cad.png" data-original-src="https://miro.medium.com/v2/resize:fit:438/format:webp/1*hfpurmHN0UsftVnT-pTDMw.jpeg"/></div><figcaption class="jf jg et er es jh ji bd b be z dx translated">图片来源于<a class="ae jj" href="https://simple.wikipedia.org/wiki/The_Story_of_Doctor_Dolittle" rel="noopener ugc nofollow" target="_blank">维基百科</a></figcaption></figure><p id="f174" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">这是来自<a class="ae jj" href="https://datadolittle.com/" rel="noopener ugc nofollow" target="_blank"> Data Dolittle </a>的第一篇文章，这是一家数据分析公司，旨在帮助其他数据科学家和企业从他们的数据中获取洞察力。有什么比使用Hugh Lofting的Doctor Dolittle的自然语言处理(NLP)教程更好的开始方式呢？为了讲述NLP的故事，我们将使用python 3.7、nltk、requests、string、PIL(可选)、wordcloud(可选)和bs4。整个工作流程可以在<a class="ae jj" href="https://github.com/Datadolittle/drdolittlenlp" rel="noopener ugc nofollow" target="_blank"><strong class="jm hj">Data Dolittle GitHub</strong></a>中找到。现在让我们开始:</p><h2 id="e248" class="kg kh hi bd ki kj kk kl km kn ko kp kq jt kr ks kt jx ku kv kw kb kx ky kz la bi translated">目标:</h2><p id="10b4" class="pw-post-body-paragraph jk jl hi jm b jn lb ij jp jq lc im js jt ld jv jw jx le jz ka kb lf kd ke kf hb bi translated">很久以前，在第一次世界大战的战壕里有一个士兵。战争的恐怖沉重地压在他的肩上。日复一日，他在危险的环境中遭受最残酷的对待。是他的小女儿打破了艰苦的阵地战，给了他继续战斗的理由。与士兵的女儿短暂而不频繁的交流让士兵渴望以更有意义的方式参与进来。士兵想为他的女儿创造一个世界，一个比他生活的现实更好的世界。这个士兵创造了一个独一无二的英雄，一个所有传统上沉默的动物的英雄。这位士兵的名字叫休·洛夫汀，在创造杜立德医生的过程中，休创造了一个世界，为他的女儿和全世界无数其他儿童提供希望。杜立德医生为作者和目标观众提供了一个逃避的机会。休构想了一个完美的田园小镇Puddleby-on-the-Marsh作为开场设定，带领主角踏上前往遥远国度的奇幻之旅，同时与引人入胜的角色进行独特的互动。正是这些性格，让我们的好医生与众不同。</p><p id="64ee" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">你看，杜立德医生被他信任的翻译波里尼西亚教授动物语言的秘密。波利尼西亚是一种既能说人话又能说动物话的鹦鹉。医生新获得的技能导致他为了保护全球的动物而疏远人类。这种远离人性的关注可能是对休在战壕中的人类经历的回应。在这里我们探索休想象世界的细节，探索使用的语言，章节的情绪，每种动物出现的频率，并尝试将史料与章节匹配，以搜索战壕中隐藏的信息。跟随我们一起踏上杜立德医生的世界！</p><h2 id="1dc2" class="kg kh hi bd ki kj kk kl km kn ko kp kq jt kr ks kt jx ku kv kw kb kx ky kz la bi translated">正文:</h2><p id="a734" class="pw-post-body-paragraph jk jl hi jm b jn lb ij jp jq lc im js jt ld jv jw jx le jz ka kb lf kd ke kf hb bi translated">我们从课文开始我们的故事。我们的旅程得益于古登堡计划提供的在线历史文献。这些高贵的知识管理者记录了涉及我们的好医生的出版物。为了检索文本，我们可以选择三个路径中的一个。首先，我们的英雄可以从认证的图书销售商那里购买pdf格式的图书。第二，我们的英雄可以直接从古腾堡计划下载文本，并将它们放在名为“数据”的文件夹中。最后，我们的英雄可以选择参与网络抓取。这是一个最困难的任务，但你作为我们的英雄肯定能完成！主人公可以通过遵循下面的命令图来执行网络搜集:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lg lh l"/></div></figure><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lg lh l"/></div></figure><p id="6deb" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">遵循这三条路径中的一条，我们的英雄应该会创建一个名为“data”的文件夹，将这本书存储为文本文件。</p><h2 id="e621" class="kg kh hi bd ki kj kk kl km kn ko kp kq jt kr ks kt jx ku kv kw kb kx ky kz la bi translated">语言</h2><p id="fadd" class="pw-post-body-paragraph jk jl hi jm b jn lb ij jp jq lc im js jt ld jv jw jx le jz ka kb lf kd ke kf hb bi translated">休的故事面向年轻观众，因此我们可以期待更简单的语言和更简单的词汇。让我们使用下面的代码在文本中搜索不带连字符的最长单词:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lg lh l"/></div></figure><p id="b9b4" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">最长的一个单词是cutterigsloop，是猪Gub-Gub的发音错误。文中最长的一个实词是爷爷们。使用Flesch-Kincaid等级级别计算文本的可读性:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lg lh l"/></div></figure><p id="228b" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">《怪医杜立德》的Flesch_Kincaid等级水平是:7.37。啊，我们发现了课文中最可怕的单词和难度。现在，我们应该看看还有多少其他独特的词伴随着这些怪物。这项任务并不像看起来那么简单，因为你看，有许多相同和不同的单词，使得计算每个独特的单词很困难。我这么说是什么意思？当然，我们的英雄理解单词hard和hard的意思非常相似，因为它们都描述了任务的难度或材料的强度，但简单的计数会考虑这两个不同的单词。为了改变文本，使相似的单词可以被识别，我们使用了一个叫做词汇化的过程。</p><p id="f9e7" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">在考虑了相似的单词后，我们的英雄必须去掉那些常用但意义不大的单词。停用词是对诸如<strong class="jm hj">、</strong>、<strong class="jm hj">、</strong>、<strong class="jm hj">、</strong>等词的称呼。刷掉频繁停用词的灰尘，我们剩下的是独特文本的黄金。下面的代码删除了停用词，并帮助我们的英雄完成文本中有多少独特的词。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lg lh l"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es li"><img src="../Images/521fc3371c58fa36e5ffa45cb9cd01b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*or1VrHXowhjjOjw9-I_WJQ.png"/></div><figcaption class="jf jg et er es jh ji bd b be z dx translated">《怪医杜立德》中丰富的前25个单词</figcaption></figure><p id="4f57" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">唯一单词的数量是2131。当我们绘制最频繁出现的单词时，我们看到分布遵循Zipf定律，这意味着最丰富的单词经常出现。这位好医生在故事里说了很多。像<strong class="jm hj"> chee </strong>这样的词是什么，为什么它们出现得如此频繁？它们是动物名称的一部分。让我们将动物名称转换成动物种类，以获得分布的另一个视图。动物物种应该在分布中下移，因为在像Chee Chee这样的名字中，Chee这个词被重复计算了两次。《杜立德故事》中的动物名字取自<a class="ae jj" href="https://en.wikipedia.org/wiki/List_of_Doctor_Dolittle_characters" rel="noopener ugc nofollow" target="_blank">维基百科</a>。</p><h2 id="479a" class="kg kh hi bd ki kj kk kl km kn ko kp kq jt kr ks kt jx ku kv kw kb kx ky kz la bi translated">动物们</h2><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lg lh l"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es li"><img src="../Images/35dc18b0ff8341f807587c7a2306eda7.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*AQXH11-HUBeI5i6B1CP_Kw.png"/></div><figcaption class="jf jg et er es jh ji bd b be z dx translated">《怪医杜立德》中前25种动物的丰富程度</figcaption></figure><p id="07a0" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">杜立德医生与68种不同的动物互动。在故事中，医生确实和很多小动物有过互动。哪些动物在每一章中都扮演了凝视的角色？为了形象化这一点，我们将把文本分成章节，找到最丰富的动物，然后使用蒙版和wordcloud包创建一个动物形状的wordcloud。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lg lh l"/></div></figure><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lg lh l"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lj"><img src="../Images/018b2b08b1d6dcb21ee495a4c9236ce4.png" data-original-src="https://miro.medium.com/v2/resize:fit:874/format:webp/1*d3Q81G68-3o9IZlYlEGMOA.png"/></div><figcaption class="jf jg et er es jh ji bd b be z dx translated">单词cloud来自第21章，动物的形状在那一章中最为丰富。你能在wordcloud里找到duck这个词吗？</figcaption></figure><p id="6f4a" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">我们已经了解了很多关于医生朋友的事情。让我们跨章节探讨一下故事的感悟吧！</p><h2 id="fb18" class="kg kh hi bd ki kj kk kl km kn ko kp kq jt kr ks kt jx ku kv kw kb kx ky kz la bi translated">情绪</h2><p id="7921" class="pw-post-body-paragraph jk jl hi jm b jn lb ij jp jq lc im js jt ld jv jw jx le jz ka kb lf kd ke kf hb bi translated">我们将用<a class="ae jj" href="http://datameetsmedia.com/vader-sentiment-analysis-explained/" rel="noopener ugc nofollow" target="_blank"> VADER </a>来探究每一章的感悟。值越接近1意味着情绪越积极，而值越接近-1意味着情绪越消极。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lg lh l"/></div></figure><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lg lh l"/></div></figure><pre class="iy iz ja jb fd lk ll lm ln aw lo bi"><span id="b099" class="kg kh hi ll b fi lp lq l lr ls">Sentiment of Chapter 1: 0.0296<br/>Sentiment of Chapter 2: 0.828<br/>Sentiment of Chapter 3: -0.962<br/>Sentiment of Chapter 4: 0.982<br/>Sentiment of Chapter 5: 0.989<br/>Sentiment of Chapter 6: -0.953<br/>Sentiment of Chapter 7: 0.99<br/>Sentiment of Chapter 8: -0.924<br/>Sentiment of Chapter 9: 0.987<br/>Sentiment of Chapter 10: 0.999<br/>Sentiment of Chapter 11: -0.996<br/>Sentiment of Chapter 12: 0.998<br/>Sentiment of Chapter 13: 0.957<br/>Sentiment of Chapter 14: 0.989<br/>Sentiment of Chapter 15: -0.987<br/>Sentiment of Chapter 16: 0.983<br/>Sentiment of Chapter 17: -0.0294<br/>Sentiment of Chapter 18: 0.981<br/>Sentiment of Chapter 19: -0.946<br/>Sentiment of Chapter 20: 1<br/>Sentiment of Chapter 21: 0.99</span></pre><p id="c509" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">为了了解Hugh Lofting是否在文本中隐藏了与战争有关的信息，我们在故事中搜索了这一时期常见的战争术语列表。在名为war_Terms.txt的文件中编译了一个War单词列表。在文本中搜索该列表，并打印包含感兴趣的单词的任何句子以理解上下文。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lg lh l"/></div></figure><p id="d756" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">故事中使用的战争术语数量:5。这五个词是火、氯、芥末、烟和死亡。使用循环提取包含战争词汇的句子，休·洛夫廷似乎没有暗示任何战争的恐怖。总的来说，这个故事的平均VADER情绪是0.329，或者大部分是积极的。在21个章节中，几乎三分之二的章节有着压倒性的积极情绪。这和其他儿童小说相比如何？试试彼得潘，把文本变成网页碎片，变成http://www.gutenberg.org/files/16/16-0.txt的文本。**提示* *网页抓取代码块使用杜立德医生故事的结构来删除多余的信息。你会如何改变它来和彼得潘一起工作？</p><p id="c20c" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated"><a class="ae jj" href="https://gist.github.com/glickmac/1592f8a038678cc00412f40a8565fa99" rel="noopener ugc nofollow" target="_blank">回答这里</a></p><h2 id="2ad9" class="kg kh hi bd ki kj kk kl km kn ko kp kq jt kr ks kt jx ku kv kw kb kx ky kz la bi translated">回顾</h2><p id="302c" class="pw-post-body-paragraph jk jl hi jm b jn lb ij jp jq lc im js jt ld jv jw jx le jz ka kb lf kd ke kf hb bi translated">我们进行了网络抓取来捕捉怪医杜立德。我们已经使用NLTK分析了文本。我们的冒险让我们详细描述了故事中独特单词的数量，最长的单词，以及文本的可读性。我们发现了这位好医生与多少动物互动，以及每章中最常提到的动物。我们探究了每一章的情感，发现休·洛夫汀善于将他的战争经历与他的幻想故事分开。整个工作流程可以在<a class="ae jj" href="https://github.com/Datadolittle/drdolittlenlp" rel="noopener ugc nofollow" target="_blank"><strong class="jm hj">Data Dolittle GitHub</strong></a>中找到。我的个人LinkedIn位于https://www.linkedin.com/in/codyglickman/<a class="ae jj" href="https://www.linkedin.com/in/codyglickman/" rel="noopener ugc nofollow" target="_blank"/>。</p></div></div>    
</body>
</html>