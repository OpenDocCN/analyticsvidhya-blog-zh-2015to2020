<html>
<head>
<title>Averaging Time</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">平均时间</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/averaging-time-1e03ff946839?source=collection_archive---------15-----------------------#2020-06-01">https://medium.com/analytics-vidhya/averaging-time-1e03ff946839?source=collection_archive---------15-----------------------#2020-06-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f38c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你管理着一个繁忙的市中心酒吧。为了帮助安排人员，您想知道晚上什么时候最忙。您决定计算进行交易的平均时间。</p><p id="646f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你认为这很容易。你在晚上10点关掉了客厅的灯，因为你通常在9点到11点之间退休。这应该没什么不同。</p><p id="9a92" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从概念上来说，它不是，但是我们熟悉的平均方法将会误导我们！要知道为什么，再想想你客厅的灯，想象一下下面的就寝时间:周一、周二、周三:晚上9点。周四:晚上10点。周五、周六:凌晨1点。周日:晚上8点。</p><p id="38e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，让我们平均计算3天21:00小时、1天22:00小时、2天1:00小时和1天20:00小时。我们在7天内总共有107个小时，或者说平均刚过15:00小时，或者说下午3点。不管是好是坏，你都不会在下午3点睡觉！</p><p id="7e23" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的平均值被凌晨1点的就寝时间“搞糊涂了”——这些时间应该被视为非常接近你晚上11点的就寝时间，但计算结果却将其视为一个非常不同的时间点。</p><p id="a4f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">那么，我们该如何纠正这种困惑呢？</em></p><p id="0d8c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">我们应该用一些三角学来计算一个<em class="jd">圆形平均值</em>。为了做到这一点，我们将每个小时映射到24小时时钟的表面。让我们从时钟圆周上的远东点开始午夜(小时= 0)，在这里3点钟将位于正常时钟上(这个点通常代表三角学中一个周期的开始)。然后我们逆时针方向描绘，6am映射到圆上的北方点；正午到遥远的西方；下午6点到最南端。</strong></p><p id="ae35" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">圆上的每个点都有相应的弧度度量</strong>(数学上相当于度):午夜是0和2π弧度(0和360度)；6am是π/2弧度(90度)；正午是π弧度(180度)；而6pm是3π/2弧度(270度)。现在，每个小时都可以用弧度来表示。</p><p id="c631" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了应用这些弧度测量值的平均值，我们首先以极坐标形式表示每个测量值，其中弧度由θ给出:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/146d15bf46fb368fdc42735c7cc902c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:210/format:webp/1*bHVbTtW3wiL7QgEKvQslBA.png"/></div></figure><p id="da5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在θ= 0°时，我们得到1(圆上的远东点)。感谢欧拉恒等式(下图)，在θ = π时，我们得到-1(圆上的快西点)。最后，在θ = π/2时，我们得到I(位于复平面上的远北极点圆)，在θ = 3π/2时，我们得到-i(远南极点)。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es jm"><img src="../Images/6a931237c2ea79557d3a89accd9780c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:622/format:webp/1*KBP4ZxVlq7TDi9Jrs6tPMA.png"/></div></figure><p id="0b51" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们有一个从极坐标形式到复平面的映射，其中x轴是实数项，y轴是虚数项。具体来说，欧拉公式将极坐标形式的每个点分解为复平面上的实分量和虚分量。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es jn"><img src="../Images/3db5514e425b372aa32b0159835d2f0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*iWvn4mVrZ2_rSuhWYzeEgA.png"/></div></figure><p id="46c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">现在，为了对这些点求平均值，我们可以利用三角原理，取所有实部(cos项)的平均值和所有虚部(sin项)的平均值。</strong></p><p id="e753" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了说明这一点，让我们回到最初的问题:<em class="jd">晚上什么时候你的酒吧最忙？</em></p><p id="c5c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你决定使用你的酒吧的交易数据，因为它丰富而精确。您收集了上个月所有顾客交易的时间戳——收集了5000次观察。为了帮助可视化活动的分布，您在上面描述的24小时时钟上绘制事务，其中每条蓝线表示一条事务记录:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es jo"><img src="../Images/699ecad4522c3ff051709be1b4d904c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6spjAcxpslEbrndz4at5Mg.png"/></div></div></figure><p id="5f5f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">看起来你的业务高峰是在晚上10点到午夜之间，一旦业务在最初几个小时后升温，在接近凌晨1:30最后一个电话之前安静下来。</p><p id="a5f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如上所述，上面的每条线都带有弧度。使用上面的方法，我们将把弧度转换成具有实部和虚部的坐标。例如，您在晚上10点(22:00)的交易记录相当于5.236弧度。所以这个时间戳的实部是<em class="jd"> cos(5.236) = 0.500 </em>而你的虚部是<em class="jd"> sin(5.236) = -0.866 </em></p><p id="a139" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个逻辑适用于你的5000笔交易。<strong class="ih hj">然后，对5000个实部和5000个虚部进行平均，得到一个代表平均时间戳的复数。</strong></p><p id="145d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你得到一个平均实数(读:x轴)分量<strong class="ih hj"> 0.856 </strong>和一个平均虚数(读:y轴)分量<strong class="ih hj"> -0.326 </strong>。我们可以通过在原点和这些坐标之间画一条线，在我们的24小时制时钟上绘制出来。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es jt"><img src="../Images/d060d9ebb19fba6b2fe43727130101a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*seuRHI2KCujfXpIu3pg08A.png"/></div></div></figure><p id="9773" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以，你的酒吧活动的平均时间看起来大约在晚上9点到午夜之间，或者大约晚上10:30(22:30)。</p><p id="3fac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">到底是什么？</em></p><p id="0193" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在给定的一对坐标(任何平面，实数或复数)内，每个x分量可以映射到两个唯一的弧度。例如，在上午6点和下午6点，x = 0。类似地，每个y分量可以映射到两个唯一的弧度。例如，在午夜和中午，y = 0。<strong class="ih hj">然而,( x，y)配对只能映射到一个唯一的弧度。</strong></p><p id="7347" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以使用正切函数的反函数——<em class="jd">反正切</em>进行映射。一个角的正切值等于它的对边和邻边的长度之比(回想一下SOHCAHTOA！).使用上面的时钟圆，我们得到:对于每个角度，θ，<em class="jd"> tan(θ) = y / x </em>。所以，求解θ: <em class="jd"> θ = arctan( y / x ) </em>。</p><p id="93c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的x值为0.856，y值为-0.326，这样我们的弧度为-0.364。这指示我们从午夜原点顺时针追踪0.364弧度<em class="jd">，如果我们走远路，到达<strong class="ih hj"> 5.919弧度</strong>，或者逆时针<em class="jd">。</em></em></p><p id="f7da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的最后一步是“取消”我们为创建24小时制而执行的小时→弧度转换。Recall 00:00被映射到0弧度；06:00到π/2弧度；12:00到π弧度；和18:00到3π/2弧度。一般给出的映射为:弧度，<em class="jd"> θ = 2π *(小时/ 24) </em>。因此，5.919弧度相当于<strong class="ih hj"> 22.6小时，或大约晚上10:36(22:36)</strong>，这正是我们在时钟上观察到的！</p><p id="8654" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是等等，还有呢！再次查看第二个时钟，显示蓝色粗体线指向晚上10:36。注意它没有完全到达圆形边缘。</p><p id="a356" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">你平均时间的长度—<em class="jd">模数— </em>表明了这些点的一致性。</strong>你的平均交易数据的向量长度是<strong class="ih hj"> 0.92 </strong>。相等时间戳的集合将给出单位圆上的平均分布，因此将具有1的向量长度。完美分布的时间戳(例如，凌晨4点、中午和晚上8点)的集合将给出原点的平均位置，因此向量长度为0。<strong class="ih hj">向量长度越长，一天内时间戳越集中！</strong></p><p id="b10e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以通过这个练习，你不仅可以测量顾客从你的酒吧购买的平均时间，还可以测量他们购买的时间分布。</p><p id="dfba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢阅读！请随意在我的Github页面上用Python探索这个分析。</p></div></div>    
</body>
</html>