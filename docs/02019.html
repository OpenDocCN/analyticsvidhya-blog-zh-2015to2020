<html>
<head>
<title>Getting Started With R — 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">R-1入门</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/getting-started-with-r-1-4273a71fb885?source=collection_archive---------12-----------------------#2019-11-26">https://medium.com/analytics-vidhya/getting-started-with-r-1-4273a71fb885?source=collection_archive---------12-----------------------#2019-11-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><blockquote class="if ig ih"><p id="424c" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">本系列面向希望快速了解R基础知识的R初学者。它涵盖了R的基础知识，包括数据类型、控制结构、循环、函数和高级数据结构。</p><p id="3c28" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">如果您已经熟悉这些主题，并且正在使用r寻找统计和机器学习中所有重要主题的全面介绍，请从以下系列开始，其中讨论了与数据科学相关的所有必要主题。</p><p id="bf54" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><a class="ae jh" rel="noopener" href="/@viveksrinivasan/many-ways-of-reading-data-into-r-1-52b02825cb27">将数据读入R — 1的多种方式</a></p><p id="e0a4" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">这些内容的灵感来自于我在IIM-B时代介绍的几本书。</p><p id="0ead" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><em class="hi">人人有责——贾里德·p·兰德</em></p><p id="e6c1" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><em class="hi">与R — Nina Zumel合作的实用数据科学&amp;约翰·芒特</em></p><p id="4885" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><em class="hi">文中讨论的所有代码块都以R markdown的形式出现在</em> Github链接<em class="hi">中。</em></p><p id="b8a1" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">希望有帮助，让我们开始吧！！！！！！！</p></blockquote><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es ji"><img src="../Images/9349874383110c06eb6f09e13a40ed48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LzXxRM6gcB8bOsrLIdobzg.png"/></div></div></figure><p id="95a2" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi jx translated">R是一个强大的工具，用于各种计算、数据操作和科学计算。在开始R中可能的复杂操作之前，我们必须从基础开始。像大多数语言一样，R有它自己的数学能力、变量、函数和数据类型。</p><h2 id="3910" class="kg kh hi bd ki kj kk kl km kn ko kp kq ju kr ks kt jv ku kv kw jw kx ky kz la bi translated">基础数学</h2><p id="533c" class="pw-post-body-paragraph ii ij hi il b im lb io ip iq lc is it ju ld iw ix jv le ja jb jw lf je jf jg hb bi translated">作为一种统计编程语言，R当然可以用来做基础数学，这就是我们要开始的地方。我们从“你好，世界！”基础数学:1 + 1。在控制台中，应该输入代码的地方有一个右尖括号(&gt;)。让我们直接尝试一点复杂的操作作为例子。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="52e3" class="kg kh hi lh b fi ll lm l ln lo">(4 * 6) + 5</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lp"><img src="../Images/a7eda6721acc550d966193a261560e7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ngDTuEeDqt2COkZYQSjTDQ.png"/></div></div></figure><p id="3d84" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">这些遵循基本的操作顺序:括号，指数，乘法，除法，加法和减法(PEMDAS)。这意味着括号内的操作优先于其他操作。优先级列表上的下一个是指数运算。之后，执行乘法和除法，接着是加法和减法。</p><p id="c4a5" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">到目前为止，我们已经在每个操作符之间放置了空格，例如*和/。这不是必需的，但作为一种良好的编码实践，我们鼓励这样做。</p><h2 id="5493" class="kg kh hi bd ki kj kk kl km kn ko kp kq ju kr ks kt jv ku kv kw jw kx ky kz la bi translated">变量</h2><p id="8358" class="pw-post-body-paragraph ii ij hi il b im lb io ip iq lc is it ju ld iw ix jv le ja jb jw lf je jf jg hb bi translated">变量是任何编程语言不可或缺的一部分，R提供了很大的灵活性。与C++等静态类型语言不同，R不需要声明变量类型。变量可以采用任何可用的数据类型。它还可以保存任何R对象，如函数、分析结果或绘图。单个变量可以在某一时刻保存一个数字，然后保存一个字符，然后再保存一个数字。</p><p id="9d05" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">给变量赋值有很多种方法，同样，这不依赖于被赋值的值的类型。有效的赋值操作符是<code class="du lq lr ls lh b">&lt;- </code>和<code class="du lq lr ls lh b">=</code>，首选第一个。例如，让我们将2保存到变量<code class="du lq lr ls lh b">x</code>，将5保存到变量<code class="du lq lr ls lh b">y</code>。箭头操作符也可以指向另一个方向。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="7b98" class="kg kh hi lh b fi ll lm l ln lo">x &lt;- 2<br/>y = 5<br/>3 -&gt; z</span></pre><p id="3f9a" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">赋值操作可以连续地用于同时给多个变量赋值。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="d6fb" class="kg kh hi lh b fi ll lm l ln lo">a &lt;- b &lt;- 7</span></pre><p id="60e1" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">一种更费力但有时也是必要的分配变量的方法是使用<code class="du lq lr ls lh b">assign </code>函数。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="4a26" class="kg kh hi lh b fi ll lm l ln lo">assign(“j”, 4)</span></pre><p id="a1a6" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">变量名可以包含字母数字字符以及句点<code class="du lq lr ls lh b"> (.)</code>和下划线<code class="du lq lr ls lh b">(_)</code>的任意组合。但是，它们不能以数字或下划线开头。</p><p id="dd5e" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">在R社区中，最常见的赋值形式是左箭头<code class="du lq lr ls lh b">(&lt;-)</code>，它起初似乎很难使用，但最终变成了第二天性。这似乎很有意义，因为变量在某种程度上指向它的值。对于来自像SQL这样的语言的人来说，还有一个特别好的好处，在SQL中，单个等号<code class="du lq lr ls lh b">(=) </code>测试相等性。</p><p id="7582" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">通常认为最好的做法是对变量使用实际的名称，通常是名词，而不是单个字母。这为阅读代码的人提供了更多的信息。这在本书中随处可见。</p><p id="ef99" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">出于各种原因，可能需要删除某个变量。使用remove或其快捷方式rm很容易做到这一点。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="7120" class="kg kh hi lh b fi ll lm l ln lo">rm(j)</span></pre><p id="f011" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">这释放了内存，使得<code class="du lq lr ls lh b">R</code>可以存储更多的对象，尽管它不一定为操作系统释放内存。为了保证这一点，使用<code class="du lq lr ls lh b">gc</code>，它执行垃圾收集，将未使用的内存释放给操作系统。<code class="du lq lr ls lh b">R</code>自动定期进行垃圾收集，因此该功能不是必需的。</p><h2 id="cfa0" class="kg kh hi bd ki kj kk kl km kn ko kp kq ju kr ks kt jv ku kv kw jw kx ky kz la bi translated">数据类型</h2><p id="010f" class="pw-post-body-paragraph ii ij hi il b im lb io ip iq lc is it ju ld iw ix jv le ja jb jw lf je jf jg hb bi translated">R中有许多数据类型存储各种类型的数据。最有可能使用的四种主要数据类型是<code class="du lq lr ls lh b">numeric</code>、<code class="du lq lr ls lh b">character </code>(字符串)、<code class="du lq lr ls lh b">Date/POSIXct</code>(基于时间)和<code class="du lq lr ls lh b">logical </code>(真/假)。变量中包含的数据类型用类函数检查</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="8978" class="kg kh hi lh b fi ll lm l ln lo">class(x)</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lt"><img src="../Images/418a202c78973c6c262e2e8777b193e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i5kySvdvjq9GoKAWc4vvtw.png"/></div></div></figure><h2 id="91b5" class="kg kh hi bd ki kj kk kl km kn ko kp kq ju kr ks kt jv ku kv kw jw kx ky kz la bi translated">数字数据</h2><p id="dc8a" class="pw-post-body-paragraph ii ij hi il b im lb io ip iq lc is it ju ld iw ix jv le ja jb jw lf je jf jg hb bi translated">不出所料，R擅长运行数字，所以数字数据是R中最常见的类型，最常用的数字数据是<code class="du lq lr ls lh b">numeric</code>。这类似于其他语言中的<code class="du lq lr ls lh b">float </code>或<code class="du lq lr ls lh b">double </code>。它处理整数和小数，正的和负的，当然还有零。存储在变量中的数值被自动假定为数字。使用函数<code class="du lq lr ls lh b">is.numeric</code>测试变量是否为数字。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="e1dc" class="kg kh hi lh b fi ll lm l ln lo">is.numeric(x)</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lu"><img src="../Images/01ca9d831b8dfb0a5877a07ba9e848a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7ToigtNLdkGOhnuJd2m39Q.png"/></div></div></figure><p id="374c" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">另一个重要的，虽然不常用，类型是<code class="du lq lr ls lh b">integer</code>。顾名思义，这仅适用于整数，不包括小数。要将一个整数设置到一个变量中，有必要给该值添加一个<code class="du lq lr ls lh b">L</code>。与检查数字一样，使用<code class="du lq lr ls lh b">is.integer</code>功能。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="024e" class="kg kh hi lh b fi ll lm l ln lo">i &lt;- 5L<br/>is.integer(i)</span></pre><p id="c95a" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">请注意，即使I是一个整数，它也将通过数字检查。<code class="du lq lr ls lh b">R</code>在需要时很好地将<code class="du lq lr ls lh b">integers </code>提升为<code class="du lq lr ls lh b">numeric </code>。当一个整数乘以一个数字时，这一点很明显，但重要的是，当一个<code class="du lq lr ls lh b">integer </code>除以另一个<code class="du lq lr ls lh b">integer</code>得到一个十进制数时，这一点很有用。</p><h2 id="360d" class="kg kh hi bd ki kj kk kl km kn ko kp kq ju kr ks kt jv ku kv kw jw kx ky kz la bi translated">字符数据</h2><p id="0e88" class="pw-post-body-paragraph ii ij hi il b im lb io ip iq lc is it ju ld iw ix jv le ja jb jw lf je jf jg hb bi translated">尽管字符(字符串)数据类型不是明确的数学类型，但它在统计分析中非常常见，必须小心处理。<code class="du lq lr ls lh b">R</code>有两种处理字符数据的主要方式:<code class="du lq lr ls lh b">character </code>和<code class="du lq lr ls lh b">factor</code>。虽然它们表面上看起来很相似，但处理起来却大不相同。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="2a04" class="kg kh hi lh b fi ll lm l ln lo">x &lt;- "data"<br/>y &lt;-  factor("data")</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lv"><img src="../Images/b671a2c2e6fd25054f820b6136d11552.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F0KS_0lWFGfCj0hxgzFLiw.png"/></div></div></figure><p id="4d1c" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">请注意，<code class="du lq lr ls lh b">x</code>包含用引号括起来的单词“data ”,而<code class="du lq lr ls lh b">y</code>包含不带引号的单词“data”以及关于<code class="du lq lr ls lh b">y</code>的<code class="du lq lr ls lh b">levels </code>的第二行信息。在讨论<code class="du lq lr ls lh b">Vectors</code>的时候我们会看到更多。</p><p id="2421" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">字符区分大小写，所以“数据”不同于“数据”或“数据”。要找到<code class="du lq lr ls lh b">character </code>(或<code class="du lq lr ls lh b">numeric</code>)的长度，使用<code class="du lq lr ls lh b">nchar</code>功能。但这不适用于如下所示的因子数据。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="f6db" class="kg kh hi lh b fi ll lm l ln lo">nchar(x)<br/>nchar(y)</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lw"><img src="../Images/5fb3c1d50610b6b2406f71e6415d5adb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zAv4O0YW4bEmlqHlQ5rewg.png"/></div></div></figure><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lx"><img src="../Images/b17b3a6900f2006fc8e0b77c8b50fc1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BmrYrYBOcVCOA8Nvymqr4w.png"/></div></div></figure><h2 id="223a" class="kg kh hi bd ki kj kk kl km kn ko kp kq ju kr ks kt jv ku kv kw jw kx ky kz la bi translated">日期类型</h2><p id="f92f" class="pw-post-body-paragraph ii ij hi il b im lb io ip iq lc is it ju ld iw ix jv le ja jb jw lf je jf jg hb bi translated">在任何语言中处理日期和时间都是困难的，更复杂的是<code class="du lq lr ls lh b">R </code>有许多不同类型的日期。最有用的是<code class="du lq lr ls lh b">Date </code>和<code class="du lq lr ls lh b">POSIXct</code>。<code class="du lq lr ls lh b">Date </code>只存储日期，而<code class="du lq lr ls lh b">POSIXct </code>存储日期和时间。这两个对象实际上都表示为自1970年1月1日以来的天数(日期)或秒数<code class="du lq lr ls lh b">(POSIXct)</code>。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="709f" class="kg kh hi lh b fi ll lm l ln lo">date1 &lt;- as.Date("2012-06-28")<br/>date1</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es ly"><img src="../Images/37fe342a8701aa5604462c3ee0c0ad2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wugf_aPmxMRlI_m_Jd1uzQ.png"/></div></div></figure><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="c8b4" class="kg kh hi lh b fi ll lm l ln lo">date2 &lt;- as.POSIXct("2012-06-28 17:42")<br/>date2</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lz"><img src="../Images/913e3509512a2ce70c5c1cf97ab31406.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iW-KBb3bAmTRCLDvUL2UIQ.png"/></div></div></figure><p id="64e2" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">使用<code class="du lq lr ls lh b">lubridate </code>和<code class="du lq lr ls lh b">chron </code>包可以更容易地操作日期和时间对象。使用像<code class="du lq lr ls lh b">as.numeric</code>或<code class="du lq lr ls lh b">as.Date</code>这样的函数不仅改变了对象的格式，而且实际上改变了底层类型。</p><h2 id="0ae5" class="kg kh hi bd ki kj kk kl km kn ko kp kq ju kr ks kt jv ku kv kw jw kx ky kz la bi translated">逻辑式</h2><p id="d884" class="pw-post-body-paragraph ii ij hi il b im lb io ip iq lc is it ju ld iw ix jv le ja jb jw lf je jf jg hb bi translated"><code class="du lq lr ls lh b">Logicals </code>是一种表示数据的方式，可以是<code class="du lq lr ls lh b">TRUE </code>或<code class="du lq lr ls lh b">FALSE</code>。数值上，<code class="du lq lr ls lh b">TRUE </code>与1相同，<code class="du lq lr ls lh b">FALSE </code>与0相同。所以<code class="du lq lr ls lh b">TRUE ∗ 5 </code>等于5，而<code class="du lq lr ls lh b">FALSE * 5</code>等于0。</p><p id="8440" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">类似于其他类型，逻辑有自己的测试，使用<code class="du lq lr ls lh b">is.logical</code>功能。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="a66a" class="kg kh hi lh b fi ll lm l ln lo">k &lt;- TRUE<br/>class(k)<br/>is.logical(k)</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es ma"><img src="../Images/849de4d4c25705e1ee1381730f4ff735.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h_Q6ANfhTAzAdjxhgDFPiQ.png"/></div></div></figure><p id="6fab" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">r提供了<code class="du lq lr ls lh b">T</code>和<code class="du lq lr ls lh b">F</code>分别作为<code class="du lq lr ls lh b">TRUE </code>和<code class="du lq lr ls lh b">FALSE</code>的快捷方式，但是最好不要使用它们，因为它们只是存储值<code class="du lq lr ls lh b">TRUE </code>和<code class="du lq lr ls lh b">FALSE </code>的变量，并且可以被覆盖，这可能会导致很多麻烦。比较两个数字或字符可以得到逻辑结果。</p><h2 id="79f5" class="kg kh hi bd ki kj kk kl km kn ko kp kq ju kr ks kt jv ku kv kw jw kx ky kz la bi translated">向量</h2><p id="d77a" class="pw-post-body-paragraph ii ij hi il b im lb io ip iq lc is it ju ld iw ix jv le ja jb jw lf je jf jg hb bi translated">一个<code class="du lq lr ls lh b">vector </code>是所有相同类型的元素的集合。例如，<code class="du lq lr ls lh b">c(1, 3, 2, 1, 5)</code>是一个由数字1、3、2、1、5依次组成的向量。类似地，<code class="du lq lr ls lh b">c(“R”, “Excel”, “SAS”, “Excel”)</code>是字符元素“R”、“Excel”、“SAS”和“Excel”的向量。向量不能是混合类型。</p><p id="9e89" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">在R中扮演一个关键的、有用的角色。R中的向量不仅仅是简单的容器，它的特殊之处在于它是一种语言。这意味着运算会自动应用到向量的每个元素，而不需要遍历向量。这是一个强大的概念，对于来自其他语言的人来说可能是陌生的，但这是r最伟大的事情之一。</p><p id="e4a3" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated"><code class="du lq lr ls lh b">Vectors </code>没有维度，意味着没有列向量或行向量这样的东西。这些矢量不像数学矢量，在数学矢量中，<code class="du lq lr ls lh b">row </code>和<code class="du lq lr ls lh b">column </code>方向是不同的。</p><p id="65af" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">创建向量最常见的方法是使用<code class="du lq lr ls lh b">c</code>。<code class="du lq lr ls lh b">“c”</code>代表组合，因为多个元素被组合成一个向量。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="72b4" class="kg kh hi lh b fi ll lm l ln lo">x &lt;- c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)</span></pre><p id="ded2" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">现在我们有了前十个数字的向量，我们可能希望每个元素都乘以3。在R中，这是一个简单的操作，仅使用乘法运算符<code class="du lq lr ls lh b">(*)</code>。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="1d6a" class="kg kh hi lh b fi ll lm l ln lo">x*3</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es mb"><img src="../Images/1878e6ac6054c3f8dab917f821f0160b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zegJXU77mJPrjt3hNIUQcQ.png"/></div></div></figure><p id="fd39" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">不需要循环。<code class="du lq lr ls lh b">Addition</code>、<code class="du lq lr ls lh b">subtraction </code>、<code class="du lq lr ls lh b">division </code>一样简单。这也适用于任何数量的操作。</p><p id="7e13" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">前面我们使用c函数创建了一个前十个数字的向量，它创建了一个向量。一个快捷方式是<code class="du lq lr ls lh b">: </code>操作符，它在两个方向上生成一系列连续的数字。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="65f1" class="kg kh hi lh b fi ll lm l ln lo">c(1:10)</span></pre><p id="7ccd" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated"><code class="du lq lr ls lh b">Vector </code>操作可以进一步扩展。假设我们有两个长度相等的向量。每个相应的元素可以一起操作。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="7ab9" class="kg kh hi lh b fi ll lm l ln lo">x &lt;- 1:10<br/>y &lt;- -5:4</span><span id="7452" class="kg kh hi lh b fi mc lm l ln lo">## Add them<br/>x+y</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es md"><img src="../Images/11fdad246fdf71e6b5e8584d1fe106b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ainGeG7PYtOGZS1MSQ9CpA.png"/></div></div></figure><p id="ed2c" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">当对两个长度不等的<code class="du lq lr ls lh b">vectors </code>进行操作时，事情变得稍微复杂一些。较短的向量被回收，也就是说，它的元素按顺序重复，直到它们与较长向量的每个元素都匹配。如果较长的一个不是较短的一个的倍数，则给出警告。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="6751" class="kg kh hi lh b fi ll lm l ln lo">x + c(1, 2)<br/>x + c(1, 2, 3)</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es me"><img src="../Images/0c1d6278e5ecf22ced29d9cf23d00eff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9fgMxOTmaHAr5jY6bnoKbA.png"/></div></div></figure><p id="5d6e" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">比较也适用于向量。这里的结果是一个相同长度的向量，每个元素包含TRUE或FALSE。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="acc8" class="kg kh hi lh b fi ll lm l ln lo">x &lt;= 5</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es mf"><img src="../Images/71f8218a8f13e307d7075d8aac6a6f13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PysKxCx2sO7XiVXtyzBuAQ.png"/></div></div></figure><p id="6c59" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">要测试所有结果元素是否都是<code class="du lq lr ls lh b">TRUE</code>，使用<code class="du lq lr ls lh b">all </code>函数。类似地，<code class="du lq lr ls lh b">any </code>函数检查是否有任何元素是<code class="du lq lr ls lh b">TRUE</code>。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="26b7" class="kg kh hi lh b fi ll lm l ln lo">x &lt;- 10:1<br/>y &lt;- -4:5</span><span id="1e19" class="kg kh hi lh b fi mc lm l ln lo">## Checking any and all<br/>any(x &lt; y)<br/>all(x &lt; y)</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es mg"><img src="../Images/775d9fe0a85fc9db5369d29fbd979cd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5vAFBOkEY1Qx7k9lv1AgeA.png"/></div></div></figure><p id="c4f3" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">使用方括号<code class="du lq lr ls lh b">([ ])</code>访问<code class="du lq lr ls lh b">vector </code>的单个元素。通过键入<code class="du lq lr ls lh b">x[1]</code>检索x的第一个元素，通过<code class="du lq lr ls lh b">x[1:2]</code>检索前两个元素，通过<code class="du lq lr ls lh b">x[c(1, 4)]</code>检索不连续的元素。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="3493" class="kg kh hi lh b fi ll lm l ln lo">x[c(1, 4)]</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es mh"><img src="../Images/a5473bf32e843d2a19901a017596100b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*txhPe-qvD7Oy5zlDzD6nRQ.png"/></div></div></figure><p id="c4c9" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">这适用于所有类型的向量，无论它们是<code class="du lq lr ls lh b">numeric</code>、<code class="du lq lr ls lh b">logical</code>、<code class="du lq lr ls lh b">character </code>等等。可以在创建过程中给一个向量命名，也可以在创建之后给它命名。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="30e1" class="kg kh hi lh b fi ll lm l ln lo">c(One="a", Two="y", Last="r")</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es mi"><img src="../Images/9785a5b618eb2044ab1d7d03d113c949.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jc85k3JNuIT0JCJxOQ1ZdA.png"/></div></div></figure><h2 id="5074" class="kg kh hi bd ki kj kk kl km kn ko kp kq ju kr ks kt jv ku kv kw jw kx ky kz la bi translated">因素向量</h2><p id="aff2" class="pw-post-body-paragraph ii ij hi il b im lb io ip iq lc is it ju ld iw ix jv le ja jb jw lf je jf jg hb bi translated">是R中的一个重要概念，尤其是在构建模型时。让我们创建一个简单的文本数据向量，它有一些重复。我们将从之前创建的向量<code class="du lq lr ls lh b">q</code>开始，并向它添加一些元素。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="d3a7" class="kg kh hi lh b fi ll lm l ln lo">q2 &lt;- c("Hockey", "Lacrosse", "Hockey", "Water Polo", "Hockey", "Lacrosse")<br/>q2Factor &lt;- as.factor(q2)<br/>q2Factor</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es mj"><img src="../Images/6f339905cb36ce990012d1cdb7373765.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5-cUOUt5fcz-0tZGpZGhHQ.png"/></div></div></figure><p id="58ee" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">注意，在打印出<code class="du lq lr ls lh b">q2Factor</code>的每个元素后，R还打印出<code class="du lq lr ls lh b">q2Factor</code>的等级。因子的级别是该因子变量的唯一值。从技术上讲，R给一个因子的每个唯一值一个唯一的整数，将它与字符表示联系起来。这可以从<code class="du lq lr ls lh b">as.numeric</code>中看出。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="91b6" class="kg kh hi lh b fi ll lm l ln lo">as.numeric(q2Factor)</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es mk"><img src="../Images/2681858fb03d31f166790217686348c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T4KU4XBpfqY9L2evUzRUgQ.png"/></div></div></figure><p id="6e0d" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">在普通的<code class="du lq lr ls lh b">factors </code>中，<code class="du lq lr ls lh b">levels </code>的顺序并不重要，一个等级与另一个等级没有区别。然而，有时理解一个因素的顺序是很重要的，例如在对教育水平进行编码时。将<code class="du lq lr ls lh b">ordered </code>参数设置为<code class="du lq lr ls lh b">TRUE </code>会创建一个有序因子，其顺序在levels参数中给出。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="e104" class="kg kh hi lh b fi ll lm l ln lo">factor(x=c("High School", "College", "Masters", "Doctorate"),     levels=c("High School", "College", "Masters", "Doctorate"),       ordered=TRUE)</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es ml"><img src="../Images/46e3a87e8a8b8e179e08c48a483105b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ffvbZIVfN-GRRMVPaUff-Q.png"/></div></div></figure><p id="3441" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated"><code class="du lq lr ls lh b">Factors </code>可以极大地减少变量的大小，因为它们只存储唯一的值，但是如果使用不当，它们会引起麻烦。</p><h2 id="7ef7" class="kg kh hi bd ki kj kk kl km kn ko kp kq ju kr ks kt jv ku kv kw jw kx ky kz la bi translated">缺失数据— NA vs NULL</h2><p id="4b6f" class="pw-post-body-paragraph ii ij hi il b im lb io ip iq lc is it ju ld iw ix jv le ja jb jw lf je jf jg hb bi translated">缺失数据在统计和计算中都起着至关重要的作用，R有两种类型的缺失数据，<code class="du lq lr ls lh b">NA </code>和<code class="du lq lr ls lh b">NULL</code>。虽然他们很相似，但他们的行为不同，这种差异需要引起注意。</p><p id="61ad" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">我们经常会因为各种原因而丢失数据。统计程序使用各种技术来表示缺失数据，例如一个<code class="du lq lr ls lh b">dash</code>、<code class="du lq lr ls lh b">period </code>甚至数字<code class="du lq lr ls lh b">99</code>。r使用<code class="du lq lr ls lh b">NA</code>。<code class="du lq lr ls lh b">NA </code>通常会被看作只是矢量的另一个元素。<code class="du lq lr ls lh b">is.na</code>测试<code class="du lq lr ls lh b">missingness</code>向量的每个元素。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="3f8f" class="kg kh hi lh b fi ll lm l ln lo">z &lt;- c(1, 2, NA, 8, 3, NA, 3)<br/>is.na(z)</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es mm"><img src="../Images/1aaa2990c1b62704ad477b09ba92bf2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GsVSp09r0_F3FmSQpyqNag.png"/></div></div></figure><p id="08ca" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">简单地通过键入字母<code class="du lq lr ls lh b">“N”</code>和<code class="du lq lr ls lh b">“A”</code>来输入<code class="du lq lr ls lh b">NA </code>，就像它们是普通文本一样。这适用于任何类型的向量。</p><p id="f4fe" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">处理缺失数据是统计分析的一个重要部分。根据领域和偏好，有许多技术。一个流行的技术是<code class="du lq lr ls lh b">multiple imputation</code>，在<code class="du lq lr ls lh b">Chapter 25 of Andrew Gelman and Jennifer Hill’s book Data Analysis Using Regression and Multilevel/Hierarchical Models,</code>中有详细的讨论，并且在<code class="du lq lr ls lh b">mi</code>、<code class="du lq lr ls lh b">mice </code>和<code class="du lq lr ls lh b">Amelia </code>包中实现。</p><p id="d8f7" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated"><code class="du lq lr ls lh b">NULL </code>是什么都没有。不完全是<code class="du lq lr ls lh b">missingness</code>，是<code class="du lq lr ls lh b">nothingness</code>。函数有时可以返回<code class="du lq lr ls lh b">NULL </code>，它们的参数可以是<code class="du lq lr ls lh b">NULL</code>。<code class="du lq lr ls lh b">NA </code>和<code class="du lq lr ls lh b">NULL </code>的一个重要区别是NULL是<code class="du lq lr ls lh b">atomical </code>并且不能存在于<code class="du lq lr ls lh b">vector</code>中。如果在<code class="du lq lr ls lh b">vector</code>中使用，它就会消失。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="30b6" class="kg kh hi lh b fi ll lm l ln lo">z &lt;- c(1, NULL,3)<br/>length(z)<br/>z</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lu"><img src="../Images/d3ba99adefbacb9d07c4115659023d1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oikiB4dv5DjhZDxkLeo6uQ.png"/></div></div></figure><p id="120a" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">即使它被输入到向量<code class="du lq lr ls lh b">z</code>中，它也没有被存储在<code class="du lq lr ls lh b">z</code>中。实际上，<code class="du lq lr ls lh b">z </code>只有两个元素长。对<code class="du lq lr ls lh b">NULL </code>值的测试是<code class="du lq lr ls lh b"> is.null</code>。由于<code class="du lq lr ls lh b">NULL </code>不能作为矢量的一部分，<code class="du lq lr ls lh b">is.null</code>不进行矢量化。</p><h2 id="f05e" class="kg kh hi bd ki kj kk kl km kn ko kp kq ju kr ks kt jv ku kv kw jw kx ky kz la bi translated">管道</h2><p id="d8d6" class="pw-post-body-paragraph ii ij hi il b im lb io ip iq lc is it ju ld iw ix jv le ja jb jw lf je jf jg hb bi translated">在R中调用函数的一个新范例是<code class="du lq lr ls lh b">pipe</code>。<code class="du lq lr ls lh b">magrittr </code>包中的管道通过获取管道左侧的值或对象并将其插入管道右侧的函数的第一个参数来工作。一个简单的例子是使用管道将<code class="du lq lr ls lh b">x </code>输入到<code class="du lq lr ls lh b">mean </code>函数。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="0714" class="kg kh hi lh b fi ll lm l ln lo">library(magrittr)<br/>x &lt;- 1:10<br/>x %&gt;% mean</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es mn"><img src="../Images/70780e0cf8a285876941c12a7e999de0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mWTdlBXO7Iewkyf6MrT5qA.png"/></div></div></figure><p id="882f" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">当在管道中把一系列函数调用连接在一起时最有用。给定一个包含数字和<code class="du lq lr ls lh b">NAs</code>的向量<code class="du lq lr ls lh b">z</code>，我们想知道有多少个<code class="du lq lr ls lh b">NAs</code>。传统上，这是通过嵌套函数来完成的。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="d461" class="kg kh hi lh b fi ll lm l ln lo">z &lt;- c(1, 2, NA, 8, 3, NA, 3) <br/>sum(is.na(z))</span><span id="8da3" class="kg kh hi lh b fi mc lm l ln lo">## Using Pipes<br/>z %&gt;% is.na %&gt;% sum</span></pre><p id="2540" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated"><code class="du lq lr ls lh b">Pipes </code>以从左到右的方式更自然地阅读，使代码更容易理解。使用管道比嵌套函数调用慢得可以忽略不计，尽管正如<code class="du lq lr ls lh b">Hadley Wickham</code>指出的那样，<code class="du lq lr ls lh b">pipes </code>不会成为代码中的主要瓶颈。</p><p id="795e" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">当将一个对象通过管道传递到一个函数中并且不设置任何附加参数时，不需要括号。但是，如果使用了额外的参数，那么它们应该被命名并包含在函数调用后的括号内。不使用第一个参数，因为管道已经将左边的对象插入到第一个参数中。</p><pre class="jj jk jl jm fd lg lh li lj aw lk bi"><span id="81dc" class="kg kh hi lh b fi ll lm l ln lo">z %&gt;% mean(na.rm=TRUE)</span></pre><p id="8192" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">数据有很多种类型，R能够很好地处理它们。除了基本的计算，R还可以处理<code class="du lq lr ls lh b">numeric</code>、<code class="du lq lr ls lh b">character </code>和基于时间的数据。使用R的一个更好的地方是<code class="du lq lr ls lh b">vectorization</code>，尽管这需要一种不同的编程思维方式。这允许同时对向量中的多个元素进行操作，从而产生更快、更数学化的代码。在下一篇文章中，我们将讨论r。</p><blockquote class="if ig ih"><p id="5280" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><a class="ae jh" rel="noopener" href="/@viveksrinivasan/advanced-data-structures-in-r-2-635cbbedbc8c">R—2中的高级数据结构</a></p><p id="5c66" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">一定要通过评论和分享文章来分享你的想法和支持。</p></blockquote></div></div>    
</body>
</html>