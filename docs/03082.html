<html>
<head>
<title>Profiling Songs on Spotify Using Cluster Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用聚类分析分析Spotify上的歌曲</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/profiling-songs-on-spotify-using-cluster-analysis-185535598ebd?source=collection_archive---------8-----------------------#2020-01-15">https://medium.com/analytics-vidhya/profiling-songs-on-spotify-using-cluster-analysis-185535598ebd?source=collection_archive---------8-----------------------#2020-01-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9776" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://newsroom.spotify.com/2019-12-03/the-top-songs-artists-playlists-and-podcasts-of-2019-and-the-last-decade/" rel="noopener ugc nofollow" target="_blank">十年十大流媒体艺人</a></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/85f27c99efe6b085a8f6d64489152284.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*5FA1u0eYaLUQHzIew8MYuQ.jpeg"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated"><a class="ae jd" href="https://www.google.com/imgres?imgurl=http%3A%2F%2Fwww.letrascanciones.org%2Fwp-content%2Fuploads%2F2017%2F02%2FListening-to-Music-650x363.jpeg&amp;imgrefurl=http%3A%2F%2Fwww.letrascanciones.org%2F4-reasons-listening-music-helpful-healthful%2F&amp;docid=F6HrX2Mnz79RZM&amp;tbnid=FOAYKOR5z2Qm1M%3A&amp;vet=10ahUKEwipjqn214TnAhUDneAKHXWhCMoQMwiPASgLMAs..i&amp;w=650&amp;h=363&amp;bih=903&amp;biw=998&amp;q=listening%20to%20music&amp;ved=0ahUKEwipjqn214TnAhUDneAKHXWhCMoQMwiPASgLMAs&amp;iact=mrc&amp;uact=8" rel="noopener ugc nofollow" target="_blank">来源</a></figcaption></figure><p id="8bb1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">众所周知，音乐是我们的通用语言。无论你是在门廊上放松，还是出去慢跑，音乐都可以让我们的心情为任何类型的任务做好准备。</p><p id="8ff4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然有许多不同类型的情绪或冒险的播放列表，但我感兴趣的是哪些元素可以用来将这些歌曲归类到不同的情绪中。在阅读了<a class="ae jd" href="https://towardsdatascience.com/profiling-my-favorite-songs-on-spotify-through-clustering-33fee591783d" rel="noopener" target="_blank"> John Kohs的</a>文章后，我受到启发，在我的项目中使用了一个无监督模型。使用Spotify API，我能够从最近选择的十年前10名流媒体艺术家(德雷克、阿姆、威肯、艾德·希兰、波斯特马龙、Sia、碧昂斯、蕾哈娜、泰勒斯威夫特和爱莉安娜·格兰德)中提取歌曲，并根据他们的音频特征将他们的歌曲进行分组。</p><p id="6e65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">让我们开始吧！</strong></p><h1 id="3715" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated"><strong class="ak">提取数据程序:</strong></h1><p id="29c7" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated"><strong class="ih hj">设置Spotify API </strong></p><ul class=""><li id="01ef" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated"><a class="ae jd" href="https://developer.spotify.com/" rel="noopener ugc nofollow" target="_blank">https://developer.spotify.com/</a></li><li id="5dc3" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">登录/注册</li><li id="95ff" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">转到仪表板-&gt;创建客户端ID -&gt;创建应用程序</li></ul><p id="315a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">使用Python从播放列表中提取曲目</strong></p><ul class=""><li id="5b3f" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">导入库</li></ul><pre class="jf jg jh ji fd lh li lj lk aw ll bi"><span id="2385" class="lm jr hi li b fi ln lo l lp lq"><strong class="li hj">import</strong> <strong class="li hj">spotipy</strong><br/><strong class="li hj">from</strong> <strong class="li hj">spotipy.oauth2</strong> <strong class="li hj">import</strong> SpotifyClientCredentials<br/><strong class="li hj">import</strong> <strong class="li hj">pandas</strong> <strong class="li hj">as</strong> <strong class="li hj">pd</strong><br/><strong class="li hj">import</strong> <strong class="li hj">time</strong></span></pre><ul class=""><li id="fbe1" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">输入凭证:客户端id和客户端秘密</li></ul><pre class="jf jg jh ji fd lh li lj lk aw ll bi"><span id="2e93" class="lm jr hi li b fi ln lo l lp lq">spotify_client_id = ''<br/>spotify_client_secret  = ''<br/>client_credentials_manager = SpotifyClientCredentials(client_id=spotify_client_id, client_secret=spotify_client_secret)<br/>sp = spotipy.Spotify(client_credentials_manager=client_credentials_manager)</span></pre><ul class=""><li id="728b" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">从播放列表中检索每个曲目</li></ul><pre class="jf jg jh ji fd lh li lj lk aw ll bi"><span id="1693" class="lm jr hi li b fi ln lo l lp lq"><strong class="li hj">def</strong> getPlaylistTrackIDs(user, playlist_id):<br/>        ids = []<br/>        playlist = sp.user_playlist(user, playlist_id)<br/>        <strong class="li hj">for</strong> item <strong class="li hj">in</strong> playlist['tracks']['items']:<br/>            track = item['track']<br/>            ids.append(track['id'])<br/>        <strong class="li hj">return</strong> ids<br/>ids = getPlaylistTrackIDs('playlist name', 'playlist id')</span></pre><ul class=""><li id="a13c" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">检索每个音轨的附加信息和特征</li></ul><pre class="jf jg jh ji fd lh li lj lk aw ll bi"><span id="f24c" class="lm jr hi li b fi ln lo l lp lq"><strong class="li hj">def</strong> getTrackFeatures(id):<br/>    meta = sp.track(id)<br/>    features = sp.audio_features(id)<br/>    name = meta['name']<br/>    album = meta['album']['name']<br/>    artist = meta['album']['artists'][0]['name']<br/>    release_date = meta['album']['release_date']<br/>    length = meta['duration_ms']<br/>    popularity = meta['popularity']<br/>    acousticness = features[0]['acousticness']<br/>    danceability = features[0]['danceability']<br/>    energy = features[0]['energy']<br/>    instrumentalness = features[0]['instrumentalness']<br/>    liveness = features[0]['liveness']<br/>    loudness = features[0]['loudness']<br/>    speechiness = features[0]['speechiness']<br/>    tempo = features[0]['tempo']<br/>    time_signature = features[0]['time_signature']<br/>    track = [name, album, artist, release_date, length, popularity, danceability, acousticness, danceability, energy, instrumentalness, liveness, loudness, speechiness, tempo, time_signature]<br/>    <strong class="li hj">return</strong> track</span></pre><ul class=""><li id="5555" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">将轨迹导入数据集</li></ul><pre class="jf jg jh ji fd lh li lj lk aw ll bi"><span id="84d7" class="lm jr hi li b fi ln lo l lp lq"><em class="lr"># loop over track ids to create dataset</em><br/>tracks = []<br/><strong class="li hj">for</strong> i <strong class="li hj">in</strong> range(0, len(ids)):<br/>    time.sleep(.5)<br/>    track = getTrackFeatures(ids[i])<br/>    tracks.append(track)<br/><br/>df = pd.DataFrame(tracks, columns = ['name', 'album', 'artist', 'release_date', 'length', 'popularity', 'danceability', 'acousticness', 'danceability', 'energy', 'instrumentalness', 'liveness', 'loudness', 'speechiness', 'tempo', 'time_signature'])<br/>df.to_csv("artist1.csv", sep = ',')</span></pre><ul class=""><li id="0bc4" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">以下是数据集的示例:</li></ul><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="er es ls"><img src="../Images/b01e4f6223a90445969148c938c508a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9AjUb2DqBPWr2OoZyYSD1g.png"/></div></div></figure><p id="363f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://developer.spotify.com/documentation/web-api/reference/tracks/get-audio-features/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">音频功能描述</strong> </a> <strong class="ih hj"> : </strong></p><ul class=""><li id="165b" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">声音:一种置信度，从0.0到1.0，表示音轨是否是声音的。1.0表示音轨是声学的高置信度。</li><li id="35b9" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">可跳舞性:可跳舞性描述了一个曲目在音乐元素组合的基础上适合跳舞的程度，包括速度、节奏稳定性、节拍强度和整体规律性。</li><li id="060d" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">乐器:预测音轨是否不包含人声。</li><li id="256e" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">能量:从0.0到1.0的度量，代表强度和活动的感知度量。通常，高能轨道感觉起来很快，很响，很嘈杂。例如，死亡金属具有高能量，而巴赫前奏曲在音阶上得分较低。</li><li id="1171" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">语音:检测音轨中是否存在语音。越是类似语音的录音(例如脱口秀、有声读物、诗歌)，属性值就越接近1.0。高于0.66的值描述可能完全由口语单词组成的轨道。</li></ul><p id="de89" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">音频特征的分布:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="er es lx"><img src="../Images/8644dfe99251b917efce1aa8ae331914.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7CLooeXrRIINa0cb90W5rw.png"/></div></div></figure><p id="f6ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每首歌也属于哪一类？</p><p id="82ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">挑战:执行<a class="ae jd" href="https://www.analyticsvidhya.com/blog/2019/08/comprehensive-guide-k-means-clustering/" rel="noopener ugc nofollow" target="_blank"> K-means聚类</a>分析，根据歌曲共享的音频特征对歌曲进行分类。目标是使同一聚类中的点彼此非常接近。</p><p id="9be3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">程序:</p><ul class=""><li id="5718" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">集群/类别的数量= 5</li><li id="3262" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">肘方法:确定使用多少个集群的替代技术</li></ul><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="er es ly"><img src="../Images/87bc11f26bac94007243efb9b7fbe908.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_n2DGEcS5rOBUYMwy-idfg.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">4个集群</figcaption></figure><ul class=""><li id="abb2" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">可视化我们的集群</li></ul><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="er es lz"><img src="../Images/d9695b99b4cec2987a4bb99830c2e774.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F7vrW3touKdgzsI1v4UeiQ.png"/></div></div></figure><ul class=""><li id="64ff" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">使用t分布随机邻居嵌入(t-SNE)来可视化聚类。</li></ul><div class="jf jg jh ji fd ab cb"><figure class="ma jj mb mc md me mf paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><img src="../Images/d4460e83571c451c262aebcdc3f7a99f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1042/format:webp/1*bsvKFywC4z2HeFL0X5FOuA.png"/></div></figure><figure class="ma jj mg mc md me mf paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><img src="../Images/cf167b064b6865161c5a1014b4006718.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*7XLGdqnMcEyCZp-ucWBIZg.png"/></div></figure></div><ul class=""><li id="4b8f" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">每个集群的分布</li></ul><div class="jf jg jh ji fd ab cb"><figure class="ma jj mh mc md me mf paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><img src="../Images/0c100561e4bfa51b16ce1cced7aee405.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7mdgcQzffQWhvI0a2f7rTA.png"/></div></figure><figure class="ma jj mi mc md me mf paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><img src="../Images/b84a3ea9f8c191ffac6d82ba9b0f96a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:602/format:webp/1*dSE0m71ILRJeK4g6Srkv4g.png"/></div></figure></div><p id="2be3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">标记集群</strong></p><ul class=""><li id="9d4e" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated"><a class="ae jd" href="https://open.spotify.com/playlist/6eUTFqDbpQkO51ilsKkVg8?si=SYI_0zLvQ_WJcsEWSWkbOQ" rel="noopener ugc nofollow" target="_blank">十年十大流媒体艺人播放列表</a></li><li id="3076" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">集群1: <a class="ae jd" href="https://open.spotify.com/playlist/0iFXC0s8nqMKvBGXCsLpR5?si=0zVyAD7dR_qpxayB8iUdVA" rel="noopener ugc nofollow" target="_blank">公路旅行播放列表</a>:高度可舞性、活力和语速(抒情)</li><li id="9f56" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">第二组:<a class="ae jd" href="https://open.spotify.com/playlist/472Rwu3iNXCN41yUTi9efG?si=8qgr-5H2SS6NHQ-RXfLWrw" rel="noopener ugc nofollow" target="_blank">放松时间</a>:听觉、舞蹈和能量都很高</li><li id="21c5" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">第三组:<a class="ae jd" href="https://open.spotify.com/playlist/3Uq0IGWpDSO5YLtYEvDVk2?si=0tBUPOWmTOSkZS10Bcpd8Q" rel="noopener ugc nofollow" target="_blank">让我们狂欢吧</a>:跳舞和活力都很高</li><li id="8ade" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">集群4: <a class="ae jd" href="https://open.spotify.com/playlist/170hEWj2iCX8PdCSUXlez3?si=Gg0jy78sTAeNhZxI2VMBaw" rel="noopener ugc nofollow" target="_blank">能量加速器</a>:能量最高</li><li id="abcf" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">第五组:<a class="ae jd" href="https://open.spotify.com/playlist/0bLwx8AshIUjm0ysyk7MRo?si=FU4CkgxrR8eUnF0ysjJLgw" rel="noopener ugc nofollow" target="_blank">早安</a>:唤醒你并让你有动力的好歌(高度的乐器感和活力)</li></ul><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="er es mj"><img src="../Images/adfd6fb484d0e5df7bda13980f35d8ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CGTIjACwTs5bWB5NlbtvAg.png"/></div></div></figure><p id="b755" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">结论:</strong></p><p id="4b16" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://github.com/drucilal/Spotify2019-Dashboard" rel="noopener ugc nofollow" target="_blank">源代码</a>；<a class="ae jd" href="https://public.tableau.com/profile/drucila#!/vizhome/TopStreamedArtistsoftheDecadePlaylist_Inworks/playlist" rel="noopener ugc nofollow" target="_blank">画面仪表盘</a></p><p id="38da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用Spotify API，我们提取了必要的数据来执行我们的分析，根据音乐共享的功能对它们进行分类。进行聚类分析。之后，我们可视化了每个集群中歌曲的分布和数量，并根据它们最流行的音频特征创建了标签。我们能够深入了解如何将这些歌曲分成不同类型的情绪和任务。</p></div></div>    
</body>
</html>