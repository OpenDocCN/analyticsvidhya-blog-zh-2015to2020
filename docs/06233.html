<html>
<head>
<title>Open Source Showcase: Diagrams</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">开源展示:图表</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/open-source-showcase-diagrams-8cc5a5edb656?source=collection_archive---------16-----------------------#2020-05-15">https://medium.com/analytics-vidhya/open-source-showcase-diagrams-8cc5a5edb656?source=collection_archive---------16-----------------------#2020-05-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="ed8c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以编程方式构建解决方案架构图！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/cb6e69a1b4cf1fc917e8afc1982798db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XKyuwCav5YBzN4K1"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">斯文·米克在<a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="1310" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">TL；速度三角形定位法(dead reckoning)</h1><ul class=""><li id="b634" class="ks kt hi ih b ii ku im kv iq kw iu kx iy ky jc kz la lb lc bi translated">解决方案架构图非常有用，是软件工程的重要组成部分。然而，画它们很糟糕。</li><li id="75ff" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated"><a class="ae jt" href="https://github.com/mingrammer/diagrams" rel="noopener ugc nofollow" target="_blank"> Diagrams </a>提供了一个Python SDK来编程声明和编译这些解决方案架构图。</li><li id="4fdf" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">与AWS、GCP、Azure和其他一些开源工具和技术一起工作。</li></ul><h1 id="8ce5" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">介绍</h1><p id="9871" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">每个软件工程师项目的一个重要部分是<a class="ae jt" href="https://en.wikipedia.org/wiki/Solution_architecture" rel="noopener ugc nofollow" target="_blank">解决方案架构</a> (SA)图。它们不仅是代码的高效、简洁和抽象的表示，也是与非技术观众交流技术概念的一种简单方式。几乎我着手的每个项目都是从设计和绘制解决方案架构图开始的。</p><p id="fa03" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如你可能在我的其他文章中看到的，我是敏捷开发运动的忠实拥护者。我相信与瀑布过程相比，它总体上提供了更好的解决方案。这些SA图经常成为真正敏捷的阻碍因素。体系结构中的基本变化——开发过程中该点的潜在微小变化——使图表变得无用，迫使工程师或项目经理手动进行这些变化以保持文档的相关性。插入或替换体系结构的某些部分可能会对精心安排的图表产生连锁的不利影响，这意味着必须重新安排大部分内容，以便为新组件腾出空间。</p><p id="8006" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以看到老派的编制解决方案架构图的方式完全跟不上我们目前在行业中看到的软件的快速变化。一些敏捷极端主义者宣称，无文档化运动是行业的正确方向，但是如果“把婴儿和洗澡水一起倒掉”,失去一个与团队成员和非技术利益相关者交流我们的解决方案的非常有价值的工具，那将是一种耻辱。这就引出了一个问题:</p><p id="1bfc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您能在一个解决方案架构图中获得所有的灵活性、可重用性和源代码的抽象，那不是很好吗？T13】</p><p id="636f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">幸运的是，已经有人提出并解决了这个问题！</p><p id="3917" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">介绍开源软件包D <a class="ae jt" href="https://github.com/mingrammer/diagrams" rel="noopener ugc nofollow" target="_blank">图</a>。通过图表，您可以使用Python SDK以编程方式定义您的解决方案架构。它与所有AWS、Azure和GCP服务以及一些其他流行的开源工具(如RabbitMQ、Terraform、Airflow等)一起开箱即用。)来构建您的图表。漂亮的API让脚本看起来像伪代码，这些图表可以编译成你喜欢的格式:<code class="du lm ln lo lp b">.png</code>、<code class="du lm ln lo lp b">.jpg</code>、<code class="du lm ln lo lp b">.svg</code>或<code class="du lm ln lo lp b">.pdf</code>。</p><h1 id="438c" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">源代码示例</h1><p id="aa5d" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">图表文档中提供的例子做得很好，很容易理解。与其重新发明轮子，我复制了下面的例子。</p><h2 id="6cbc" class="lq jv hi bd jw lr ls lt ka lu lv lw ke iq lx ly ki iu lz ma km iy mb mc kq md bi translated">示例# 1—AWS上的简单后端Web服务器</h2><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="me mf l"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">单个负载平衡器后面的一组AWS工作线程的简单示意图。</figcaption></figure><p id="be3d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行此代码时，将生成下图。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mg"><img src="../Images/6e0b6e0f3d2e05da206246a6259ebe1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LOl2NwE3-TaAcxIt.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">原始代码和图像可以在这里找到<a class="ae jt" href="https://diagrams.mingrammer.com/docs/getting-started/examples#grouped-workers-on-aws" rel="noopener ugc nofollow" target="_blank">。</a></figcaption></figure><h2 id="2d34" class="lq jv hi bd jw lr ls lt ka lu lv lw ke iq lx ly ki iu lz ma km iy mb mc kq md bi translated">示例AWS中的事件处理架构</h2><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="2132" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这段代码生成的结果图如下所示。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mh"><img src="../Images/46d179cdf9d3b10187eada40109ad566.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3bANM7XVsA-HiXvF.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">查看原文<a class="ae jt" href="https://diagrams.mingrammer.com/docs/getting-started/examples#event-processing-on-aws" rel="noopener ugc nofollow" target="_blank">此处</a>。</figcaption></figure><h2 id="1e7c" class="lq jv hi bd jw lr ls lt ka lu lv lw ke iq lx ly ki iu lz ma km iy mb mc kq md bi translated">示例3——GCP的信息收集系统</h2><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="da55" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">生成的图表如下所示。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mi"><img src="../Images/8689d1990fa7afe04b8d381e1da1769c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rU2tJto4Xo8QchTb.png"/></div></div></figure><h1 id="d996" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">强项</h1><h2 id="b371" class="lq jv hi bd jw lr ls lt ka lu lv lw ke iq lx ly ki iu lz ma km iy mb mc kq md bi translated">惊人的开发者体验</h2><p id="0e8a" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">仅从这些例子中，你几乎可以完全理解如何编译你自己的图。我想，即使是非技术项目经理也可以毫不费力地对这些源代码进行小的调整。这个惊人的API使得构建图看起来和感觉起来都像伪代码。</p><h2 id="84e0" class="lq jv hi bd jw lr ls lt ka lu lv lw ke iq lx ly ki iu lz ma km iy mb mc kq md bi translated">现成的图标</h2><p id="519a" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">我最初期望我需要为我的图下载、安装和引用所有的节点图标。当我发现这些都被打包在源代码中时，我感到非常惊喜！作者最初安装软件包中所有图标的努力对我这个新用户来说非常有用，帮助提供了一个更干净的API。</p><h2 id="7b44" class="lq jv hi bd jw lr ls lt ka lu lv lw ke iq lx ly ki iu lz ma km iy mb mc kq md bi translated">内聚API</h2><p id="9da0" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">该API似乎遵循一种良好的、逻辑的、结构化的和内聚的模式。不像其他一些流行的软件包，有时会有不直观和不一致的API怪癖(看着你<a class="ae jt" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank">熊猫</a>),图在整个软件包中是一致的，就像你如何完成事情一样。我认为这是因为有一位首席开发人员，他是最大的贡献者，贡献超过100倍。</p><h2 id="361f" class="lq jv hi bd jw lr ls lt ka lu lv lw ke iq lx ly ki iu lz ma km iy mb mc kq md bi translated">出色的文档</h2><p id="4258" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">这个包的学习曲线很小。这主要与作者写的令人惊叹的文档有关。不仅有上面显示的快速入门示例，而且它们还深入介绍了每个主题对象，并解释了如何执行您想要采取的常见操作。</p><h1 id="8bd2" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">弱点</h1><h2 id="6bcf" class="lq jv hi bd jw lr ls lt ka lu lv lw ke iq lx ly ki iu lz ma km iy mb mc kq md bi translated">有点难看</h2><p id="c3c1" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">看啊。在一天结束的时候，必须有人来看这些图表。开发人员会忽略图表的原始状态，并意识到它的意图和它所传达的信息。高管和商业利益相关者没有这么宽容。</p><h2 id="4c1a" class="lq jv hi bd jw lr ls lt ka lu lv lw ke iq lx ly ki iu lz ma km iy mb mc kq md bi translated">不擅长循环架构</h2><p id="f636" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">当我最初摆弄这个包时，我试图画出一些我以前为客户建立的解决方案。其中一个是“循环”ML系统，它从写入的同一个数据库中读取数据。我试图用图表来表达这一点，但效果并不理想。大多数系统都有某种形式的循环依赖和数据流。如果它想成为一个更主流的包，图表将需要找到一种方式来雄辩地表达这些。</p><h2 id="b562" class="lq jv hi bd jw lr ls lt ka lu lv lw ke iq lx ly ki iu lz ma km iy mb mc kq md bi translated">没有(本机)自定义节点</h2><p id="8708" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">图表目前没有任何方法来创建自定义节点/图标。您可以很容易地扩展源代码(由于其良好的设计)，但是没有本地方法来创建新的节点类型。</p><h2 id="f16f" class="lq jv hi bd jw lr ls lt ka lu lv lw ke iq lx ly ki iu lz ma km iy mb mc kq md bi translated">无IaC集成</h2><p id="ac5d" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">软件工程的一个基本原则就是不要重复自己(干)。我已经在我的项目中使用了基础设施即代码(IaC ),所以我希望能与我的Terraform源代码直接集成。这项功能目前还不可用，但Github上有一些引用它的请求，所以它可能很快就会出现。</p><h1 id="c0d3" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">潜在应用</h1><h2 id="5c12" class="lq jv hi bd jw lr ls lt ka lu lv lw ke iq lx ly ki iu lz ma km iy mb mc kq md bi translated">解决方案架构图的CI/CD</h2><p id="a175" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">您可以对您的图进行版本化、集成和部署，就像您对源代码所做的那样。想象一下，在你的组织中有一个集中的“知识中心”。项目的新手可以立即参考软件架构的当前状态，并且知道它是100%准确的。围绕这个功能建立一个框架和模板，你将永远不会再有一个未记录的软件项目。</p><h2 id="685f" class="lq jv hi bd jw lr ls lt ka lu lv lw ke iq lx ly ki iu lz ma km iy mb mc kq md bi translated">可组合架构</h2><p id="294d" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">向云计算的转变导致组织以分布式方式构建软件。假设您最好的后端工程师提出了一个所有web服务器都遵循的设计模式。也许它是一个特殊的Kubernetes集群，带有负载平衡器、日志服务、ML系统和RESTful API本身。这难道不是你投入到所有项目中的“烹饪大师”式的安排吗？</p><p id="a0da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">图可以促进可组合的设计模式。您的初级工程师可以使用主题块解决问题，使用最终编译的工件作为他们设计的蓝图。</p><h2 id="8dd3" class="lq jv hi bd jw lr ls lt ka lu lv lw ke iq lx ly ki iu lz ma km iy mb mc kq md bi translated">统一的文档外观</h2><p id="3bad" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">每个建筑师都有自己的“风格”。我知道我的是什么样的，它与我以前合作过的其他建筑师非常不同。强制使用编程的方式来构建图表，可以使最终的工件具有更加统一的外观，并有助于从您组织的项目中移除个人品牌。这是样式表的一个概念，你可以在你的图表上打上公司的商标，而不需要你的架构师知道或者担心。</p><h1 id="4725" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">结论</h1><p id="23df" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">解决方案架构图很难构建。它们不利于改变，它们耗费时间来构建，并且它们是一种真正的“艺术”。通过将问题转移到工程领域——您的团队在这方面有丰富的经验和熟练程度——这些问题变得容易解决。</p><p id="b85b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jt" href="https://github.com/mingrammer/diagrams" rel="noopener ugc nofollow" target="_blank"> Diagrams </a>已经做了很好的工作，使得创建图表的用户体验直观且易于使用。曾经需要我花一个小时来计划和绘制的SA图现在可以在5分钟内完成，而项目中的微小变化过去会让我花费几个小时，现在只需几秒钟就可以完成。</p><p id="4fb1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让图表变得漂亮和C-Suite就绪还有很长的路要走，但我看到了正在构建的东西的巨大潜力。</p></div><div class="ab cl mj mk gp ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="hb hc hd he hf"><p id="6c9a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢阅读我的文章。你怎么想呢?我们能走向编程图的未来吗？我们能做些什么来教一个电脑“美”？请给我留下你的想法！</p><p id="6be9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你喜欢这篇文章，不要忘记留下一些掌声或评论，因为它有助于其他人找到我的作品。如果你想要更多这样的文章，请在<a class="ae jt" rel="noopener" href="/@kale.miller96">媒体</a>上关注我。我谈论数据科学、软件工程师、区块链和金融科技。我也在<a class="ae jt" href="https://twitter.com/KaleLewisMiller" rel="noopener ugc nofollow" target="_blank">推特</a>和<a class="ae jt" href="https://www.linkedin.com/in/kalelewismiller/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上。再次感谢阅读！</p></div></div>    
</body>
</html>