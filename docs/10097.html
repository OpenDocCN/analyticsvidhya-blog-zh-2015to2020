<html>
<head>
<title>JavaScript Promises</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript承诺</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/javascript-promises-2bbd50c1ea4a?source=collection_archive---------21-----------------------#2020-10-04">https://medium.com/analytics-vidhya/javascript-promises-2bbd50c1ea4a?source=collection_archive---------21-----------------------#2020-10-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2cb1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在今天的博客中，我们将讨论JavaScript中的承诺。在所有这些爆炸和语法之前，我只想给你一些我们这篇文章主角的背景故事，让你关心承诺背后的逻辑，而不是无聊的语法。这篇文章将是一个角色驱动的博客，而不是一个情节驱动的博客。坐下来，拿起你的爆米花，享受博客。</p><p id="04be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">JavaScript中的承诺就像现实生活中的承诺一样。你承诺了一些事情，它有两个结果，要么完成了承诺，要么失败了。在Java脚本中，promise函数有两个参数，分别是resolve和reject。</p><p id="a544" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">承诺处于以下状态之一:</p><ul class=""><li id="6595" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><em class="jm">待定</em>:初始状态，既未履行也未拒绝。</li><li id="0696" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated"><em class="jm">完成</em>:表示操作成功完成。</li><li id="f74f" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated"><em class="jm">拒绝</em>:表示操作失败。</li></ul><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es js"><img src="../Images/de1af4b48302af2983453fcffcadaab0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0mBlni5vsYZE2wFzfVv8EA.png"/></div></div></figure><p id="53c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们看看创建承诺的实际语法。</p><pre class="jt ju jv jw fd ke kf kg kh aw ki bi"><span id="b597" class="kj kk hi kf b fi kl km l kn ko">var promise = new Promise( function(resolve, reject) {<br/>/* Promise content */<br/>})</span></pre><p id="bea7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以看出，promise构造函数有一个参数，这个参数是传递两个变量resolve和reject的函数。这段代码将返回两个可能的结果。如果承诺实现了，那么resolve方法将被触发。如果事情出错了，promise将会触发reject方法来允许我们处理这个错误。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es kp"><img src="../Images/6839f91f6bd7d5c8165748c4e5a0464e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ezdor8B1X04u-yZvGt7ojg.png"/></div></div></figure><p id="1d45" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">连锁承诺</strong></p><p id="d245" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">谈到JavaScript中的承诺，<code class="du kq kr ks kf b">.then()</code>和<code class="du kq kr ks kf b">.catch()</code>块是非常方便使用的方法。我们可以用<code class="du kq kr ks kf b">.then() </code>方法链接我们的承诺，并且只使用链末端的一个<code class="du kq kr ks kf b">.catch()</code>方法来处理在一个<code class="du kq kr ks kf b">then()</code>任务执行期间可能发生的所有异常。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es kt"><img src="../Images/27215a355e9b91129e952c7c2bc908d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NSVVE7nApee2HfnK.png"/></div></div></figure><p id="abcb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们把上面提到的所有东西放在一起。</p><p id="b3e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du kq kr ks kf b">fetch(‘https://ergast.com/api/f1/2004.json’)<br/>.then(res =&gt; res.json())<br/>.then(data =&gt; data.MRData)<br/>.then(element =&gt; {<br/>console.log(element);<br/>})<br/>.catch(error=&gt;{<br/>console.error(error);<br/>});</code></p><p id="1606" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个代码示例中，我们从由<a class="ae ku" href="https://ergast.com/api/f1/2004.json" rel="noopener ugc nofollow" target="_blank">ergast.com</a>提供的API中获取一个JSON数据，并用<code class="du kq kr ks kf b">then()</code>方法链接数据，为了处理可能的异常，我们传递了<code class="du kq kr ks kf b">then()</code>链的<code class="du kq kr ks kf b">catch()</code>块结尾。现在，我们有了非常简单易读的代码。</p><p id="0d0d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个帖子到此为止。希望你喜欢。</p><p id="a7e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">参考文献</strong></p><div class="kv kw ez fb kx ky"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="noopener  ugc nofollow" target="_blank"><div class="kz ab dw"><div class="la ab lb cl cj lc"><h2 class="bd hj fi z dy ld ea eb le ed ef hh bi translated">承诺</h2><div class="lf l"><h3 class="bd b fi z dy ld ea eb le ed ef dx translated">Promise对象表示异步操作的最终完成(或失败)及其结果…</h3></div><div class="lg l"><p class="bd b fp z dy ld ea eb le ed ef dx translated">developer.mozilla.org</p></div></div><div class="lh l"><div class="li l lj lk ll lh lm kc ky"/></div></div></a></div><div class="kv kw ez fb kx ky"><a href="https://bitsofco.de/javascript-promises-101/" rel="noopener  ugc nofollow" target="_blank"><div class="kz ab dw"><div class="la ab lb cl cj lc"><h2 class="bd hj fi z dy ld ea eb le ed ef hh bi translated">JavaScript承诺101</h2><div class="lf l"><h3 class="bd b fi z dy ld ea eb le ed ef dx translated">JavaScript Promise表示一个尚未完成的操作的结果，但在某个时候会…</h3></div><div class="lg l"><p class="bd b fp z dy ld ea eb le ed ef dx translated">比特索夫科</p></div></div><div class="lh l"><div class="ln l lj lk ll lh lm kc ky"/></div></div></a></div><div class="kv kw ez fb kx ky"><a href="https://www.freecodecamp.org/news/javascript-es6-promises-for-beginners-resolve-reject-and-chaining-explained/" rel="noopener  ugc nofollow" target="_blank"><div class="kz ab dw"><div class="la ab lb cl cj lc"><h2 class="bd hj fi z dy ld ea eb le ed ef hh bi translated">JavaScript Promise教程:JS和ES6中的解决、拒绝和链接</h2><div class="lf l"><h3 class="bd b fi z dy ld ea eb le ed ef dx translated">承诺是我们在JavaScript中处理异步操作的方式之一。许多人都在与…</h3></div><div class="lg l"><p class="bd b fp z dy ld ea eb le ed ef dx translated">www.freecodecamp.org</p></div></div><div class="lh l"><div class="lo l lj lk ll lh lm kc ky"/></div></div></a></div></div></div>    
</body>
</html>