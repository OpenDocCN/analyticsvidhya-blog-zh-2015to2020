<html>
<head>
<title>Big Data with R !!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">大数据带R！！</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/big-data-with-r-3cea0549cfba?source=collection_archive---------20-----------------------#2020-06-11">https://medium.com/analytics-vidhya/big-data-with-r-3cea0549cfba?source=collection_archive---------20-----------------------#2020-06-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0ad7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">时不时的，我们总会面对和听到R在大数据上的迟缓。这里我们谈论的是TB或Pb，这是R的最大限制之一，数据应该适合RAM。</p><p id="7424" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了避免这种情况，我们使用了内存不足的处理概念，即分块处理，而不是一次全部处理。我们使用两个不同的包，如下所示。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="ca8c" class="jm jn hi ji b fi jo jp l jq jr">#install.packages("ff")<br/>library(ff)</span><span id="5546" class="jm jn hi ji b fi js jp l jq jr">#install.packages("ffbase")<br/>library(ffbase)</span></pre><ol class=""><li id="5953" class="jt ju hi ih b ii ij im in iq jv iu jw iy jx jc jy jz ka kb bi translated">ff包基本上是将数据分块，并以编码的原始平面文件的形式存储在硬盘上，并且让您可以更快地访问这些函数。ff数据帧的数据结构还提供了到RAM中分区的数据集的映射。数据块如何工作的示例，假设一个2GB的文件，读取文件中的数据大约需要460秒，其中有1个515 KB大小的ff数据帧和28个50 MB的ff数据文件，因此为1.37GB</li><li id="db46" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">为了执行基本的合并，寻找重复和丢失的值，创建子集，等等，我们使用ffbase包。我们还可以直接用ff对象执行聚类、回归和分类。</li></ol><p id="05ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们为上述操作寻找一些R代码</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="3314" class="jm jn hi ji b fi jo jp l jq jr"># Uploading from flatfiles </span><span id="a860" class="jm jn hi ji b fi js jp l jq jr">system("mkdir ffdf")<br/>options(fftempdir = "./ffdf")</span><span id="cd7e" class="jm jn hi ji b fi js jp l jq jr">system.time(fli.ff &lt;- read.table.ffdf(file="flights.txt", sep=",", VERBOSE=TRUE, header=TRUE, colClasses=NA))</span><span id="404b" class="jm jn hi ji b fi js jp l jq jr">system.time(airln.ff &lt;- read.csv.ffdf(file="airline.csv", <br/>VERBOSE=TRUE, header=TRUE,colClasses=NA))</span><span id="0a73" class="jm jn hi ji b fi js jp l jq jr"># Merging the datasets</span><span id="6722" class="jm jn hi ji b fi js jp l jq jr">flights.data.ff = merge.ffdf(fli.ff, airln.ff, by="Airline_id")</span></pre><p id="9737" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">子集化</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="ab51" class="jm jn hi ji b fi jo jp l jq jr"># Subset</span><span id="538f" class="jm jn hi ji b fi js jp l jq jr">subset.ffdf(flights.data.ff, CANCELLED == 1, select = c(Flight_date, Airline_id, Ori_city,Ori_state, Dest_city, Dest_state, Cancellation))</span></pre><p id="d461" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">描述统计学</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="714a" class="jm jn hi ji b fi jo jp l jq jr"># Descriptive statistics</span><span id="a41d" class="jm jn hi ji b fi js jp l jq jr">mean(flights.data.ff$DISTANCE)<br/>quantile(flights.data.ff$DISTANCE)<br/>range(flights.data.ff$DISTANCE)</span></pre><p id="dae2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用biglm进行回归(数据集:加州大学欧文分校在<a class="ae kh" href="http://archive.ics.uci.edu/ml/index.html" rel="noopener ugc nofollow" target="_blank">http://archive.ics.uci.edu/ml/index.html</a>的慢性肾病数据集)</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="f6dc" class="jm jn hi ji b fi jo jp l jq jr"># Regression requires installation of biglm package</span><span id="81fd" class="jm jn hi ji b fi js jp l jq jr">library(ffbase)<br/>library(biglm)</span><span id="9825" class="jm jn hi ji b fi js jp l jq jr">model1 = bigglm.ffdf(class ~ age + bp + bgr + bu + rbcc + wbcc + hemo, data = ckd.ff, family=binomial(link = "logit"), na.action = na.exclude)</span><span id="2cfd" class="jm jn hi ji b fi js jp l jq jr">model1<br/>summary(model1)<br/>#Refining of the model can be done according to the significance level obtained in model1</span></pre><p id="c7a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">具有biglm和bigmemory的线性回归</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="98e0" class="jm jn hi ji b fi jo jp l jq jr"># Regression with big memory and biglm package</span><span id="66a3" class="jm jn hi ji b fi js jp l jq jr">library(biglm)</span><span id="7af6" class="jm jn hi ji b fi js jp l jq jr">ckd.mat = read.big.matrix("ckd.csv", header = TRUE, sep = ",", type = "double",backingfile = "ckd.bin", descriptorfile = "ckd.desc")</span><span id="4141" class="jm jn hi ji b fi js jp l jq jr">regression  = bigglm.big.matrix(class~ bgr + hemo + age, data = ckd.mat, fc = c("bgr", "hemo"))</span><span id="bf72" class="jm jn hi ji b fi js jp l jq jr">summary(regression)<br/></span></pre><p id="ddc4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，当你深入一点时，我们刚刚谈到了存储，但当我们需要处理或分析数据时，我们需要知道并行计算。解释这一点的最简单方式是youtube视频，并计算视频中随机颜色出现的时间，因此在这种情况下，并行计算开始发挥作用，mapper拆分输入，并进一步简化为键值对。</p><p id="6a02" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们使用H20作为r中并行和大数据的快速和可伸缩平台。</p><p id="b735" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望这篇文章对您在r中使用大数据有所帮助。感谢您阅读这篇文章。</p><p id="8b5a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“数据是新的科学，大数据掌握着答案”——帕特·基尔辛格</p><figure class="jd je jf jg fd kj er es paragraph-image"><div class="er es ki"><img src="../Images/44e4339e79493b8db0ea4074c17c6ba5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*niNMqbj7Je7zI7q2Yg7IMg.png"/></div><figcaption class="km kn et er es ko kp bd b be z dx translated">informationweek.com<a class="ae kh" href="https://www.informationweek.com/big-data/big-data-analytics/big-data-maturity-youre-not-as-mature-as-you-think/d/d-id/1331383" rel="noopener ugc nofollow" target="_blank">图片作者</a></figcaption></figure></div></div>    
</body>
</html>