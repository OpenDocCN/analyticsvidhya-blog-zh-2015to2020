<html>
<head>
<title>Inferencing Azure custom vision Object Detection in Raspberry Pi 4</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Raspberry Pi 4中推理Azure自定义视觉对象检测</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/inferencing-custom-vision-in-raspberry-pi-4-2088cbc299c?source=collection_archive---------27-----------------------#2019-11-11">https://medium.com/analytics-vidhya/inferencing-custom-vision-in-raspberry-pi-4-2088cbc299c?source=collection_archive---------27-----------------------#2019-11-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/473ec12aa81e78d6763629d1b844cf7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/0*FZUB_d5l9zCypx3U"/></div></figure><h1 id="c5fd" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">使用raspberry pi 4在没有docker容器的情况下推断工作场所安全模型</h1><p id="1852" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">当从custom vision导出模型时，可以选择使用tensorflow构建模型，并将其嵌入docker以用于各种操作系统，如Raspberry PI、linux和windows。为此，我们需要使用tensorflow下载选项或其他移动选项来重新训练模型。</p><p id="1483" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">要开始使用raspberry pi 4，首先通过安装操作系统让Raspberry PI 4进入工作状态。接下来是更新python3，请点击下面的链接<a class="ae kn" href="https://github.com/instabot-py/instabot.py/wiki/Installing-Python-3.7-on-Raspberry-Pi" rel="noopener ugc nofollow" target="_blank">https://github . com/insta bot-py/insta bot . py/wiki/Installing-Python-3.7-on-Raspberry-Pi</a></p><p id="afd7" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">安装python3后，请按照说明安装tensorflow。安装tensorflow之前，请更新操作系统。sudo apt-get升级</p><h1 id="98e7" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">张量流装置</h1><p id="ee46" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">在raspberry pi 4中打开一个终端，键入以下命令</p><pre class="ko kp kq kr fd ks kt ku kv aw kw bi"><span id="4b13" class="kx in hi kt b fi ky kz l la lb">sudo apt-get install libatlas-base-dev <br/>sudo pip3 install tensorflow</span></pre><p id="517e" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">测试tensoflow是否已安装。在Raspberry pi桌面的主菜单中进入编程，导航到Thonny python ide并选择它。单击“新建”并键入以下内容:将tensorflow导入为tf print(tf。<strong class="jm hj">版本</strong></p><p id="ad93" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">现在单击Run，tensorflow的版本应该显示在底部的Shell输出窗口中。</p><p id="8c97" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">更多详情请点击此链接:<a class="ae kn" href="https://magpi.raspberrypi.org/articles/tensorflow-ai-raspberry-pi" rel="noopener ugc nofollow" target="_blank">https://magpi . raspberry pi . org/articles/tensor flow-ai-raspberry-pi</a></p><p id="9b12" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">现在，Raspberry Pi已经准备好编写推理代码了。</p><p id="b778" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">转到链接:<a class="ae kn" href="https://github.com/balakreshnan/WorkplaceSafety/tree/master/TensorFlowModelsforotherplatform" rel="noopener ugc nofollow" target="_blank">https://github . com/balakreshnan/work place safety/tree/master/TensorFlowModelsforotherplatform</a>下载ARM的模型。<a class="ae kn" href="https://github.com/balakreshnan/WorkplaceSafety/blob/master/TensorFlowModelsforotherplatform/34f05b15e0be4bcfabbcc0a216183ec8.DockerFile.ARM.zip" rel="noopener ugc nofollow" target="_blank">https://github . com/balakreshnan/work place safety/blob/master/TensorFlowModelsforotherplatform/34 f 05 b 15 e 0 be 4 bcfabbcc 0a 216183 EC 8。DockerFile.ARM.zip </a></p><p id="c811" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">将文件下载到/home/pi/examples文件夹中。将文件解压缩到该文件夹中。现在创建一个名为ws (workplacesafety)的新文件夹。现在将所有解压后的内容复制到ws文件夹中。下载一些背心图片来测试推理模型。我从google.com下载的</p><p id="fef1" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">现在是时候创建推理文件了。创建名为detect.py的新python文件</p><pre class="ko kp kq kr fd ks kt ku kv aw kw bi"><span id="3f5d" class="kx in hi kt b fi ky kz l la lb">import json <br/>import os <br/>import io <br/># Imports for the REST API <br/>from flask import flask, request, jsonify <br/># Imports for image processing <br/>from PIL import Image <br/># imports for prediction <br/>from predict import initialize, predict_image, predict_url </span><span id="602e" class="kx in hi kt b fi lc kz l la lb">if __name__ == '__main__' <br/>    # load and initialize the mode <br/>    initialize() <br/>    image = Image.open("vest1.jpg") <br/>    # change the file name to what you downloaded. <br/>    result = predict_image(image) <br/>    Print() <br/>    i = 0 <br/>    for tag in result['predictions']: <br/>        print("ID: " + str(tag['tagId']) + " Object Detected: " + tag['tagName'] + " Confidence: " + '{0:f}.format(tag['probability'])) <br/>        print()</span></pre><p id="5738" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated">保存文件，运行并输出显示检测到的目标及其概率。</p></div><div class="ab cl ld le gp lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="hb hc hd he hf"><p id="168c" class="pw-post-body-paragraph jk jl hi jm b jn ki jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd km kf kg kh hb bi translated"><em class="lk">最初发表于</em><a class="ae kn" href="https://github.com/balakreshnan/WorkplaceSafety/blob/master/InferencinginRasperryPi4.md" rel="noopener ugc nofollow" target="_blank"><em class="lk">【https://github.com】</em></a><em class="lk">。</em></p></div></div>    
</body>
</html>