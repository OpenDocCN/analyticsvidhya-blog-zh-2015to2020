<html>
<head>
<title>UnboundLocalError in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的UnboundLocalError</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/unboundlocalerror-in-python-edfe9aaf49e4?source=collection_archive---------7-----------------------#2020-03-23">https://medium.com/analytics-vidhya/unboundlocalerror-in-python-edfe9aaf49e4?source=collection_archive---------7-----------------------#2020-03-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="47ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当几分钟前运行顺畅的代码由于一个愚蠢的错误而停滞不前，并因此显示一个在Python开发人员中很流行或相当常见的错误，名为"<em class="jd">unboundlocalrerror</em>"时，这是非常令人恼火的。</p><p id="88e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个故事，或者更确切地说是我写的一篇博客，描述了这个错误的本质，它是如何发生的，为什么会发生&amp;你应该如何解决来消除它。</p><p id="e52f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">该如何？</strong></p><p id="cbd1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">考虑下面的片段:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/69e8de3fc3f7c653888c1032f654065e.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/1*lbsT1GTyspgOTCiHOFsazA.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">光滑外壳</figcaption></figure><p id="0743" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上面截图的片段中，<strong class="ih hj"> num </strong>的值最初是4(在Python中被视为全局的，因为它是在方法之外声明的)。在名为<strong class="ih hj"> myFunc() </strong>的方法中，我们只是打印它的值。所以输出是:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es jq"><img src="../Images/bd7a9a306dc0a69d5b81173374f3794c.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/format:webp/1*c9mqXsbQxVKLcIh25Xfi-Q.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">平滑案例(结果)</figcaption></figure><p id="2378" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们来修改一下上面的光滑案例，让我们来面对问题。考虑下面的片段:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es jr"><img src="../Images/d5d37ef31c1ca03901395fbcd6823fb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:792/format:webp/1*WACu2dbGUPuCB1luUXx8ZA.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">有问题的案例</figcaption></figure><p id="53ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请注意，我们首先计划打印<strong class="ih hj"> num </strong>的值，然后将其值修改为<strong class="ih hj"> 8(第6行)。</strong>让我们像以前一样通过调用函数<strong class="ih hj"> myFunc() </strong>再次运行代码。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es js"><img src="../Images/9bd70a91c5de717d93617ce427faee16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1098/format:webp/1*3l4BgJUSYORH6Tlg0xuSZw.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">有问题的案例(结果)</figcaption></figure><p id="49c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">很容易看出，这个帖子的整个主题在上面的错误中可见，<strong class="ih hj"><em class="jd">unboundlocalrerror</em></strong>。让我们通过更有趣的“为什么”部分来理解其背后的原因…</p><p id="58ea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">为什么？</strong></p><p id="b3b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个错误是由作用域的一个小错误引起的。在python中，如果没有给函数中的所有变量赋值，那么它们就是全局变量。</p><p id="faac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这意味着如果一个变量只在函数外部被引用，那么它就是全局变量。然而，如果我们在函数中给一个变量赋值，除非明确声明是全局的，否则它的作用域就是局部的。</p><p id="0243" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在第一个例子中(平滑的情况)，我们没有给函数中的x变量赋值，只是引用它来打印。于是<strong class="ih hj"> x </strong>就是<strong class="ih hj">T23】全局T25】。</strong></p><p id="b61e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在第二个例子(有问题的情况)中，我们将值8赋给x，因此x的作用域是<strong class="ih hj"><em class="jd">local</em></strong>to function，我们试图在将任何值赋给<strong class="ih hj"> x </strong>之前打印它。</p><p id="be1e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">解决方案！:)</strong></p><p id="c26e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在函数内部修改关键字<strong class="ih hj"> global </strong>之前，您需要使用它，如下所示。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es jt"><img src="../Images/1da221d877347f2cf10ebd910d61a651.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/1*0i1XU5L4afy49Tg6iroSRg.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">又光滑了！</figcaption></figure><p id="2e90" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关注<strong class="ih hj">第5行</strong>，这里我们放置了关键字<strong class="ih hj"> <em class="jd"> global </em> </strong>来告诉Python解释器，在这之前对<strong class="ih hj"> num </strong>的值所做的任何改变，都反映了它的全局值。换句话说，每隔一次出现<strong class="ih hj"> num就改变它。仅此而已。完成了。</strong></p><p id="4450" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还有一种解决方法，即使用<strong class="ih hj"> <em class="jd">非本地</em> </strong>关键字，但这通常是不可取的。因此，我没有在这里讨论它。</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><blockquote class="kb kc kd"><p id="3cfd" class="if ig jd ih b ii ij ik il im in io ip ke ir is it kf iv iw ix kg iz ja jb jc hb bi translated">我希望这篇简单的业余帖子能让那些刚开始接触Python的人(比如我)和那些面临这个错误的人感兴趣。请继续关注许多与Python编程相关的帖子。我会努力成为媒体社区的积极分子。</p></blockquote><p id="dd71" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">感谢阅读！</strong></p><p id="3169" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">干杯！！</strong></p></div></div>    
</body>
</html>