<html>
<head>
<title>Integrate Azure ML Studio with PowerApps and Power Automate: Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Azure ML Studio与PowerApps和Power Automate集成:第1部分</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/integrate-azure-ml-studio-with-powerapps-and-power-automate-part-1-c201dbce2bc6?source=collection_archive---------8-----------------------#2020-07-09">https://medium.com/analytics-vidhya/integrate-azure-ml-studio-with-powerapps-and-power-automate-part-1-c201dbce2bc6?source=collection_archive---------8-----------------------#2020-07-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2a28" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是一个由两部分组成的系列，在第一部分中，我将带您了解使用Azure Machine Learning Studio创建预测模型的过程。然后在下一部分，我将使用Power Automate将机器学习Web服务与PowerApps集成。基本上，它是使用Azure ML studio、PowerApps和Power Automate的端到端机器学习模型部署。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/0a78a91a9722d433c20b5ec72c454fcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*q5-e0PMq-L-nl3OW"/></div></div></figure><h2 id="e5b0" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated"><strong class="ak">Azure机器学习工作室简介</strong></h2><p id="ccb8" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">Microsoft Azure Machine Learning Studio(classic)是一款协作式拖放工具，可用于构建、测试和部署数据预测分析解决方案。azure Machine Learning Studio(classic)将模型发布为web服务，可以很容易地被自定义应用程序或BI工具(如Excel)使用。Machine Learning Studio (classic)是数据科学、预测分析、云资源和您的数据交汇的地方。</p><p id="28fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在没有任何延迟，让我们开始建模。</p><p id="dde5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在更广泛的层面上，创建任何机器学习模型都有5个步骤:</p><ol class=""><li id="e840" class="kp kq hi ih b ii ij im in iq kr iu ks iy kt jc ku kv kw kx bi translated">数据采集</li><li id="2ee9" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">数据清理和预处理</li><li id="2889" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">训练数据模型</li><li id="f749" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">评分数据模型</li><li id="d68f" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">评估数据模型</li></ol><h2 id="e1ed" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated"><strong class="ak">设置环境</strong></h2><ol class=""><li id="157a" class="kp kq hi ih b ii kk im kl iq ld iu le iy lf jc ku kv kw kx bi translated">登录您的微软账户，前往https://studio.azureml.net<a class="ae lg" href="https://studio.azureml.net" rel="noopener ugc nofollow" target="_blank"/>。</li><li id="1171" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">如果你是新用户，然后注册使用免费的工作空间。</li><li id="24ca" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">创建一个新的实验，你就可以开始创建你的模型了。</li></ol><blockquote class="lh li lj"><p id="2c11" class="if ig lk ih b ii ij ik il im in io ip ll ir is it lm iv iw ix ln iz ja jb jc hb bi translated">我将以一个名为“<strong class="ih hj">成人人口普查收入二元分类数据集</strong>的样本数据集为例，来预测任何给定的成人年收入是高于还是低于5万美元。</p><p id="bc3f" class="if ig lk ih b ii ij ik il im in io ip ll ir is it lm iv iw ix ln iz ja jb jc hb bi translated">注意:Studio中的每一个组件都被称为拖放操作的方法。在添加每个方法后，你需要将它与前一个方法连接并运行它。</p></blockquote><h2 id="dbcf" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">数据采集</h2><ol class=""><li id="78cc" class="kp kq hi ih b ii kk im kl iq ld iu le iy lf jc ku kv kw kx bi translated">从导航菜单中选择保存的数据集。</li><li id="5f15" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">从样本中拖放“<strong class="ih hj">成人普查收入二元分类数据集</strong>”。</li></ol><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lo"><img src="../Images/4aafa53e9428f2b47cf82dc088cebaf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3yi6h9zeJmtQQYb-BqovDg.png"/></div></div></figure><p id="e59b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.右键单击数据集并选择visualize以检查数据集中的所有列和行。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lp"><img src="../Images/f610906ecefa5bce531339d2e4ab4581.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DkvlQ2QK25YD-vv8Zqzj-w.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx translated"><strong class="bd jr">成人人口普查收入数据集负责人</strong></figcaption></figure><h2 id="2ac3" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">数据清理</h2><ol class=""><li id="abc9" class="kp kq hi ih b ii kk im kl iq ld iu le iy lf jc ku kv kw kx bi translated">首先，我们需要检查丢失的值，如果有的话，用0替换它们。</li></ol><p id="aea2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.添加方法<strong class="ih hj">汇总数据</strong>，用dataseta连接，运行后可视化。它将显示数据集的统计摘要。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lu"><img src="../Images/5083d4bfe0c810d04ea98156b4ad85cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4SE3Y-VuTFbn35XGHb5q2g.png"/></div></div></figure><p id="cd6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.如我们所见，有许多缺失值，因此选择方法<strong class="ih hj">清除缺失数据</strong>并将其可视化。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lv"><img src="../Images/18e785c691f67992373798d4ad2f9e37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gcI_QvIHDUjpfBGYKA_K6Q.png"/></div></div></figure><p id="deaf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.现在拖动数据集中的<strong class="ih hj">选择列，只选择那些我们需要作为训练数据的特征。</strong></p><p id="f204" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.有许多分类列是字符串要素类型，它们需要转换为分类类型。选择<strong class="ih hj">编辑元数据</strong>方法，选择所有需要转换的列并运行。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lw"><img src="../Images/e1e5be635d1141a517d7b794e437ce5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L4lEukyEHLxcePj1ttWb7w.png"/></div></div></figure><p id="4aef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6.现在，如果我们将我们的数据集可视化，并特别针对特征，即收入，就会出现一个主要的阶级失衡问题。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lx"><img src="../Images/798531999973c6bf6df8d7b5371f0afb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eZR3zxoTgEHP8pBuI8BMNA.png"/></div></div></figure><blockquote class="lh li lj"><p id="e613" class="if ig lk ih b ii ij ik il im in io ip ll ir is it lm iv iw ix ln iz ja jb jc hb bi translated">阶级不平衡问题基本上意味着我们的产出标签不平衡。这可能导致机器学习算法基于输出的最大数量偏向特定的类，就像在我们的情况下≤50k，这将在评估我们的模型时显示不准确。我们可以通过对多数类进行欠采样(下采样)来解决这个问题。我们将使用<a class="ae lg" href="https://docs.microsoft.com/en-us/azure/machine-learning/studio-module-reference/smote" rel="noopener ugc nofollow" target="_blank"> SMOTE </a>模块来增加用于机器学习的数据集中代表性不足的案例的数量。SMOTE是增加罕见病例数的更好方法，而不是简单地复制现有病例。</p></blockquote><p id="bf86" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">7.选择SMOTE方法并运行它来对目标数据进行欠采样。</p><h2 id="937c" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">训练数据模型</h2><ol class=""><li id="52b5" class="kp kq hi ih b ii kk im kl iq ld iu le iy lf jc ku kv kw kx bi translated">在训练数据之前，有必要将数据分成训练集和测试集。我们使用<strong class="ih hj">分割数据</strong>模块，将其与SMOTE连接并运行。我们可以从属性中选择测试大小和随机种子。</li></ol><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ly"><img src="../Images/047e56eeeac444d59a290d367b06f771.png" data-original-src="https://miro.medium.com/v2/resize:fit:902/format:webp/1*pE6fcVe38WEN35cinRTDrQ.png"/></div><figcaption class="lq lr et er es ls lt bd b be z dx translated"><strong class="bd jr">拆分数据方法</strong></figcaption></figure><p id="be54" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.现在，我们将使用名为<strong class="ih hj">两类提升决策树的机器学习分类算法来训练我们的数据。</strong>在属性中选择创建教练模式下的参数范围，这将启用所有需要调整的超参数。</p><p id="074f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.从导航中选择<strong class="ih hj">调整模型超参数</strong>，连接其一个来自<strong class="ih hj">二级提升决策树</strong>的输入和另一个来自<strong class="ih hj">分裂数据的输入。</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lz"><img src="../Images/0e8c886eeb1bfa492ba1ea5818c500d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*cJtr0WU3xkzpXpwWoedZ0g.png"/></div></figure><p id="c0ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.现在改变它的属性如下。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ma"><img src="../Images/bc4756d17cc54e26320c66c59706bc48.png" data-original-src="https://miro.medium.com/v2/resize:fit:894/format:webp/1*9lVlUBRj34YzNpCo0HiaqQ.png"/></div><figcaption class="lq lr et er es ls lt bd b be z dx translated"><strong class="bd jr">调节模型超参数的属性</strong></figcaption></figure><h2 id="c9a3" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">评分数据模型</h2><p id="d13e" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">从导航中选择<strong class="ih hj">评分模型</strong>，连接T <strong class="ih hj"> une模型超参数</strong>的一个输入和<strong class="ih hj">分割数据</strong>的测试集的另一个输入。</p><h2 id="ad16" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">评估数据模型</h2><p id="bb5c" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">现在选择<strong class="ih hj">评估模型</strong>并从<strong class="ih hj">加入评分模型</strong>并运行。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mb"><img src="../Images/771cf04bdb358c37be2d7469adc1ee1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*p9jdaq4kVHKD4ozDR2DEpA.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx translated"><strong class="bd jr">成人普查收入预测模型</strong></figcaption></figure><h2 id="7c0b" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">让我们来看看我们的结果</h2><p id="6459" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">我将在<strong class="ih hj"> ROC曲线</strong>和<strong class="ih hj">精度的基础上比较两个模型，一个有下采样，一个没有下采样目标。</strong>这些是定义模型效率的分类指标。</p><blockquote class="lh li lj"><p id="dea5" class="if ig lk ih b ii ij ik il im in io ip ll ir is it lm iv iw ix ln iz ja jb jc hb bi translated"><strong class="ih hj">准确性</strong>是我们的模型预测正确的比例。它是正确预测数与预测总数的比率。在<strong class="ih hj">平衡数据集</strong>的情况下，准确性是完美的衡量标准，但在<strong class="ih hj">类别不平衡数据集</strong>的情况下，正负标签的数量存在显著差异，这本身并不能说明全部情况。<br/><strong class="ih hj">ROC曲线</strong> ( <strong class="ih hj">接收器操作特性曲线</strong>)是显示分类模型在所有分类阈值的性能的图表。</p></blockquote><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mc"><img src="../Images/e86aab22f96582df0cbd0adb5cbfbf49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QQQSl1ev1YBpApDlM7iChw.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx translated"><strong class="bd jr">模型A:具有下采样的模型(蓝色曲线)</strong></figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es md"><img src="../Images/dec7b0df271a8c332e4dd66fd22d87ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LM8_-KSzgJpWv4rNNjetxQ.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx translated"><strong class="bd jr">模型B:没有下采样的模型(红色曲线)</strong></figcaption></figure><ul class=""><li id="64a7" class="kp kq hi ih b ii ij im in iq kr iu ks iy kt jc me kv kw kx bi translated">在阈值为0.5时，模型A的精确度高于模型B。</li><li id="7eed" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc me kv kw kx bi translated">模型A的ROC曲线比模型b更正。</li></ul><p id="a23a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="lk">由此可以得出结论，模型A，即具有下采样的模型，创建了更准确和高效的模型。</em> </strong></p><h2 id="60c7" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">结论</h2><p id="0940" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">在这篇博客中，我们介绍了如何使用Azure ML Studio创建预测模型。在本系列的下一个部分中，我们将创建一个我们模型的web服务，并将其与Power Apps和Power Automate集成。</p><p id="c1aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢阅读！！！</p><h2 id="62a9" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">参考资料和进一步阅读:</h2><ul class=""><li id="6d2f" class="kp kq hi ih b ii kk im kl iq ld iu le iy lf jc me kv kw kx bi translated"><a class="ae lg" href="https://docs.microsoft.com/en-us/azure/machine-learning/studio/" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/azure/machine-learning/studio/</a></li><li id="990d" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc me kv kw kx bi translated"><a class="ae lg" href="https://developers.google.com/machine-learning/crash-course/classification/accuracy" rel="noopener ugc nofollow" target="_blank">https://developers . Google . com/machine-learning/crash-course/classification/accuracy</a></li><li id="fcbf" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc me kv kw kx bi translated"><a class="ae lg" href="https://developers.google.com/machine-learning/crash-course/classification/roc-and-auc" rel="noopener ugc nofollow" target="_blank">https://developers . Google . com/machine-learning/crash-course/classification/roc-and-AUC</a></li></ul></div></div>    
</body>
</html>