<html>
<head>
<title>Getting Started on Object Detection with OpenCV</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">OpenCV对象检测入门</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/getting-started-on-object-detection-with-opencv-5962a75876a6?source=collection_archive---------4-----------------------#2019-12-18">https://medium.com/analytics-vidhya/getting-started-on-object-detection-with-opencv-5962a75876a6?source=collection_archive---------4-----------------------#2019-12-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/7aebcbb965e201a2614f6b6087fc8b0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*7OufQOqANZKEcQhOz6VFHQ.jpeg"/></div></figure><p id="5f27" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">随着当前的技术趋势，计算机视觉已经成为技术领域中的重要实体，导致无限的计算机创新。从这个角度来思考计算机视觉:<strong class="io hj"> <em class="jk">作为人类，我们的眼睛是身体的重要部分，因此将视觉嵌入计算机/机器以使它们能够看见。</em> </strong></p><p id="963f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">注意:有很多框架和工具可以用来处理计算机视觉，比如<a class="ae jl" href="https://www.ibm.com/watson/services/visual-recognition/" rel="noopener ugc nofollow" target="_blank"> IBM视觉识别</a>、<a class="ae jl" href="https://azure.microsoft.com/en-gb/services/cognitive-services/computer-vision/" rel="noopener ugc nofollow" target="_blank">微软Azure </a>、<a class="ae jl" href="https://opencv.org/" rel="noopener ugc nofollow" target="_blank"> openCV </a>等等…</p><p id="381f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这篇文章中，我们将学习如何使用python中的openCV在流式视频中检测对象。</p><p id="9907" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">注意:你也可以使用我们将在另一篇文章中介绍的图像，因为现在我们将在视频流中识别物体，特别是人脸。活下去！！</p><p id="984c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">要求:</p><ol class=""><li id="069c" class="jm jn hi io b ip iq it iu ix jo jb jp jf jq jj jr js jt ju bi translated">Linux操作系统</li><li id="7f94" class="jm jn hi io b ip jv it jw ix jx jb jy jf jz jj jr js jt ju bi translated">Python3</li><li id="573a" class="jm jn hi io b ip jv it jw ix jx jb jy jf jz jj jr js jt ju bi translated">pip3</li><li id="e752" class="jm jn hi io b ip jv it jw ix jx jb jy jf jz jj jr js jt ju bi translated">opencv-python</li><li id="2497" class="jm jn hi io b ip jv it jw ix jx jb jy jf jz jj jr js jt ju bi translated">网络摄像头或照相机</li><li id="eb3c" class="jm jn hi io b ip jv it jw ix jx jb jy jf jz jj jr js jt ju bi translated">用于编写代码的IDE或编辑器</li></ol><h1 id="91a5" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated"><strong class="ak">安装openCV </strong></h1><p id="ea79" class="pw-post-body-paragraph im in hi io b ip ky ir is it kz iv iw ix la iz ja jb lb jd je jf lc jh ji jj hb bi translated">要在linux中安装openCV for python，请打开您的终端并键入下面的命令:</p><p id="ca94" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">注意:我从我的桌面目录工作</p><p id="334f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><code class="du ld le lf lg b"><strong class="io hj">pip3 install opencv-python</strong></code></p><figure class="li lj lk ll fd ij er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es lh"><img src="../Images/3daf3fc954e3e6a9cf6b5875b6c2374a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7zpsmq09SlHbqvrPEvnInA.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx translated">安装opencv python包</figcaption></figure><p id="0cac" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">很好，看，开始使用python openCV包是如此简单。现在让我们开始编码吧！！</p><h1 id="0b63" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated"><strong class="ak">编码开始</strong></h1><p id="38b5" class="pw-post-body-paragraph im in hi io b ip ky ir is it kz iv iw ix la iz ja jb lb jd je jf lc jh ji jj hb bi translated">打开你最喜欢的编辑器，粘贴下面的代码，然后我会解释每一行。</p><pre class="li lj lk ll fd lu lg lv lw aw lx bi"><span id="8d97" class="ly kb hi lg b fi lz ma l mb mc"><strong class="lg hj">import cv2</strong></span><span id="2721" class="ly kb hi lg b fi md ma l mb mc">#https://github.com/Itseez/opencv/blob/master/data/haarcascades/haarcascade_frontalface_default.xml</span><span id="1c24" class="ly kb hi lg b fi md ma l mb mc">#face haar cascade detection<br/><strong class="lg hj">face_cascade = cv2.CascadeClassifier(‘&lt;dir to the face.xml file&gt;/face.xml’)</strong></span><span id="e5d3" class="ly kb hi lg b fi md ma l mb mc"><strong class="lg hj">cap = cv2.VideoCapture(0)</strong></span><span id="585e" class="ly kb hi lg b fi md ma l mb mc"><strong class="lg hj">while(True):<br/>  </strong>#Capture frame-by-frame<br/>  <strong class="lg hj">ret, frame = cap.read()</strong></span><span id="e700" class="ly kb hi lg b fi md ma l mb mc">  #Our operations on the frame come here<br/>  <strong class="lg hj">gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)<br/>  <br/>  </strong>#faces multiscale detector<br/>  <strong class="lg hj">faces = face_cascade.detectMultiScale(gray, 1.3, 5)<br/>  <br/>  </strong>#loop throughout the faces detected and place a box around it<br/>  <strong class="lg hj">for (x,y,w,h) in faces:<br/>    gray = cv2.rectangle(frame,(x,y),(x+w,y+h),(255,0,0),2)<br/>    font = cv2.FONT_HERSHEY_SIMPLEX<br/>    cv2.putText(gray,’FACE’,(x, y-10), font, 0.5, (11,255,255), 2, cv2.LINE_AA)<br/>    roi_gray = gray[y:y+h, x:x+w]<br/>  <br/>  </strong>#Display the resulting frame<br/>  <strong class="lg hj">cv2.imshow(‘black and white’,gray)<br/>  if cv2.waitKey(1) &amp; 0xFF == ord(‘q’):<br/>    break</strong></span><span id="bf64" class="ly kb hi lg b fi md ma l mb mc"># When everything done, release the capture<br/><strong class="lg hj">cap.release()<br/>cv2.destroyAllWindows()</strong></span></pre><figure class="li lj lk ll fd ij er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es me"><img src="../Images/a1c7f148f71d1d18049276d509937883.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0oq6DLnWAxCa4b4w0jED-Q.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx translated">面部检测代码</figcaption></figure><p id="5b9e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们讨论代码…</p><p id="3d70" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">首先，我们在第一行导入openCV库。</p><p id="f923" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在openCV中，使用xml文件中的<a class="ae jl" href="http://www.willberger.org/cascade-haar-explained/" rel="noopener ugc nofollow" target="_blank"><strong class="io hj">Haar Cascade</strong></a><strong class="io hj"/>代码检测对象。让我解释一下。如果您以前使用过IBM视觉识别，您会理解注释的过程，其中我们有多个想要训练和创建模型的图像，对吗？</p><p id="7799" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在IBM视觉识别中，在标记过程中，我们通过在特定图像周围画出方框并标记它们来准备数据/图像。在测试和使用模型时，来自该过程的xml文件用于识别对象，因为它包含特定的细节，如宽度、高度，可能还有颜色以及所有这些元素。希望我们还在一起…呵呵呵</p><p id="bd7b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在openCV中。xml文件是使用分类器Haar Cascade生成的，因此。本例中用于人脸检测的xml保存在名为f <em class="jk"> ace_cascade </em>的变量中。</p><p id="fac3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这里有几个已经生成的xml文件<a class="ae jl" href="https://github.com/Itseez/opencv/blob/master/data/haarcascades/" rel="noopener ugc nofollow" target="_blank"/>。获取所需的xml文件，将其复制粘贴到文件中并保存。</p><p id="69d1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">然后，我们现在创建另一个名为<em class="jk"> cap </em>的变量，它将保存我们的网络摄像头捕捉到的视频流。<em class="jk">。videoCapture(0) </em>方法是openCV自带的，方法中指定的0表示我们将使用计算机上的默认网络摄像头。因此，如果您使用另一个外部摄像头，请将其更改为1。</p><p id="05b0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在<strong class="io hj"> while循环</strong>中，我们所说的是当有一个视频被捕获时，将视频存储在一个名为<em class="jk"> frame </em>的变量中，然后将视频转换成灰度视频(如果你不需要灰度帧，你也可以直接使用它)。然后，我们使用<em class="jk"> detectMultiScale() </em>方法，使用包含坐标的face.xml来检测人脸，该坐标是我们的Haar级联文件。</p><p id="16a7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在循环的<strong class="io hj">中，我们正在遍历所有检测到的面，并使用<em class="jk">绘制一个矩形。rectangle() </em>方法，并使用<em class="jk">追加一个名称。putText() </em>方法甚至在名字上加了一个<em class="jk">字体</em>！</strong></p><p id="7d8b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在openCV中，我们使用<em class="jk">显示结果。imshow() </em>方法然后我们指定字母q在我们想要的时候退出或者关闭窗口。</p><p id="4fb0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">最后，我们发布了网络摄像头。</p><h1 id="305b" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated"><strong class="ak">演示</strong></h1><p id="0c31" class="pw-post-body-paragraph im in hi io b ip ky ir is it kz iv iw ix la iz ja jb lb jd je jf lc jh ji jj hb bi translated">在python中运行该文件。打开终端并键入</p><p id="1135" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">T25】python 3&lt;文件名&gt;。pyT27】</strong></p><p id="0875" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了好玩，我把脸这个名字改成了我的名字..呵呵呵</p><figure class="li lj lk ll fd ij"><div class="bz dy l di"><div class="mf mg l"/></div></figure><p id="69ed" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">就这样，希望一切都很清楚，如果没有，不要犹豫，在评论区提问，并为更多的未来鼓掌，这只是一个开始</p><p id="9b3f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">谢谢你。你可以自由地加入我们创造惊人的东西，只要给我们发电子邮件在devligenceltd@gmail.com</p><p id="96a6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">作者:<a class="ae jl" href="https://collinsmunene.github.io/collinshillary.github.io/" rel="noopener ugc nofollow" target="_blank">柯林斯. h .穆尼内</a></p><p id="7003" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">首席执行官。<a class="ae jl" href="http://devligence.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="io hj">发展有限公司</strong> </a></p><p id="07f0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Youtube: <a class="ae jl" href="https://youtu.be/EePxzHUu3IM" rel="noopener ugc nofollow" target="_blank">人工智能项目</a></p></div></div>    
</body>
</html>