<html>
<head>
<title>Implementing Apache Submarine — a unified AI Platform</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实现阿帕奇潜艇——一个统一的人工智能平台</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/implementing-apache-submarine-a-unified-ai-platform-459c9edd541e?source=collection_archive---------14-----------------------#2020-04-07">https://medium.com/analytics-vidhya/implementing-apache-submarine-a-unified-ai-platform-459c9edd541e?source=collection_archive---------14-----------------------#2020-04-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="894b" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">概观</h1><p id="7fa9" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">Apachesub潜艇是Apache Hadoop中最新的机器学习框架子项目。它允许基础设施工程师/数据科学家运行深度学习框架，如Tensorflow、Pytorch等。在资源管理平台上，如本例中的YARN。</p><p id="551b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">Hadoop 2.x使YARN支持Docker容器。<strong class="jf hj">Apachesub潜艇</strong>引入YARN在Docker容器内调度和运行分布式深度学习框架。</p><p id="4856" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">为了使分布式深度学习/机器学习应用程序易于启动、管理和监控，Hadoop社区启动了潜水艇项目以及其他改进，如一流的GPU支持、Docker容器支持、容器DNS支持、调度改进等。</p><p id="8fed" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这些改进使分布式深度学习/机器学习应用程序在Apache Hadoop YARN上运行就像在本地运行一样简单，这可以让机器学习工程师专注于算法，而不是担心底层基础设施。通过升级到最新的Hadoop，用户现在可以在同一集群上运行其他ETL/流作业来运行深度学习工作负载。这可以轻松访问同一集群上的数据，并实现更好的资源利用率。</p><p id="a98d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">此概念验证假定已经设置了Hadoop集群，其中HDFS、YARN和其他相关服务已经配置并运行。此外，在实施PoC时，Submarine还在<strong class="jf hj">进行技术预览</strong>，因此，不建议<strong class="jf hj">将其用于生产级环境。</strong></p><h1 id="7181" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">警告和限制</h1><ul class=""><li id="ba77" class="kg kh hi jf b jg jh jk jl jo ki js kj jw kk ka kl km kn ko bi translated">本文档中包含的潜艇设置用于概念验证目的，并在技术预览中。</li><li id="868f" class="kg kh hi jf b jg kp jk kq jo kr js ks jw kt ka kl km kn ko bi translated">zeppelin 0 . 9 . 0-快照不是HDP Hadoop发行版的一部分。在通过Ambari部署整个集群之后，必须单独设置它。还要注意的是，在撰写本文档时，Zeppelin 0.9.0还没有正式发布。</li><li id="58ff" class="kg kh hi jf b jg kp jk kq jo kr js ks jw kt ka kl km kn ko bi translated">它仅通过纱线进行验证和测试。</li><li id="d408" class="kg kh hi jf b jg kp jk kq jo kr js ks jw kt ka kl km kn ko bi translated">用nvidia-docker v1测试。但是，submarine也支持nvidia-docker v2</li><li id="55db" class="kg kh hi jf b jg kp jk kq jo kr js ks jw kt ka kl km kn ko bi translated">Hadoop-yarn-sub潜艇-3.2.0.jar不是HDP 3.0/3.1的一部分。您需要从参考资料部分提到的apache镜像站点下载它。</li></ul><h1 id="264a" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">先决条件</h1><ul class=""><li id="22d4" class="kg kh hi jf b jg jh jk jl jo ki js kj jw kk ka kl km kn ko bi translated">必须正确设置所有与纱线服务相关的依赖项。</li><li id="bac4" class="kg kh hi jf b jg kp jk kq jo kr js ks jw kt ka kl km kn ko bi translated">如果计划使用GPU，则必须配置Docker相关的依赖项，如nvidia-driver、cuda和nvidia-docker。</li><li id="2c92" class="kg kh hi jf b jg kp jk kq jo kr js ks jw kt ka kl km kn ko bi translated">必须配置主机之间的容器通信。在本参考设计中，使用了<strong class="jf hj">印花棉布</strong>。没有它，分布在不同节点上容器就不能相互通信。例如，在一个主机中运行的PS(参数服务器)不与在另一个主机中运行的工作节点通信。</li><li id="4881" class="kg kh hi jf b jg kp jk kq jo kr js ks jw kt ka kl km kn ko bi translated">如果没有正确的YARN DNS注册配置，您就无法获得分布式AI/ML或通过YARN工作的潜水艇。主服务、工作服务和参数服务使用DNS相互通信。</li><li id="79bf" class="kg kh hi jf b jg kp jk kq jo kr js ks jw kt ka kl km kn ko bi translated">必须设置ETCD，它是分布式可靠的键值存储。设置Calico网络需要键值存储。ETCD的法定人数是三人。</li><li id="f8db" class="kg kh hi jf b jg kp jk kq jo kr js ks jw kt ka kl km kn ko bi translated">如果Docker私有注册表尚不存在，则必须进行设置。</li><li id="d92f" class="kg kh hi jf b jg kp jk kq jo kr js ks jw kt ka kl km kn ko bi translated">使用submarine-installer来安装依赖项，但是，它也可以手动设置。在该参考设计中，水下安装器将用于安装calico和etcd。</li><li id="a2c2" class="kg kh hi jf b jg kp jk kq jo kr js ks jw kt ka kl km kn ko bi translated">Docker GPU调度和隔离必须在YARN中为支持GPU的节点进行配置。还确保Docker使用cgroupfs cgroupdriver选项(如果启用了纱线cgroup支持)。</li></ul><h1 id="d594" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">海底建筑</h1><p id="247c" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">Hadoop社区发起了潜艇项目，以使分布式深度学习/机器学习应用易于启动、管理和监控。</p><p id="75b2" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">潜艇组件</strong></p><ol class=""><li id="cf1a" class="kg kh hi jf b jg kb jk kc jo ku js kv jw kw ka kx km kn ko bi translated">海底计算引擎→向YARN提交定制的深度学习</li><li id="e325" class="kg kh hi jf b jg kp jk kq jo kr js ks jw kt ka kx km kn ko bi translated">潜艇回声系统集成</li></ol><ul class=""><li id="2ab6" class="kg kh hi jf b jg kb jk kc jo ku js kv jw kw ka kl km kn ko bi translated">潜艇-齐柏林飞艇集成—允许数据科学家在齐柏林飞艇笔记本电脑内编码，并从齐柏林飞艇提交/管理培训工作。</li><li id="dfe6" class="kg kh hi jf b jg kp jk kq jo kr js ks jw kt ka kl km kn ko bi translated">海底阿兹卡班集成—允许数据科学家从Zeppelin笔记本电脑直接向阿兹卡班提交一组具有相关性的工作流任务。</li><li id="1130" class="kg kh hi jf b jg kp jk kq jo kr js ks jw kt ka kl km kn ko bi translated">潜水艇安装工——安装潜水艇及其附属部件。</li></ul><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es ky"><img src="../Images/c54a3df15da3235919a1d9d8456cb6f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zvu7flGP7qeDKyik"/></div></div></figure><h1 id="70f2" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">软件版本</h1><p id="98d9" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">以下是用于验证概念验证的软件版本</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es lk"><img src="../Images/55f62cc8a6d85eaeee7e069e9058136e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XJeQxDzjUTXe3wOG3LVmUA.png"/></div></div></figure><h1 id="5369" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">配置说明</h1><h2 id="1a4e" class="ll ig hi bd ih lm ln lo il lp lq lr ip jo ls lt it js lu lv ix jw lw lx jb ly bi translated">下载潜艇安装程序</h2><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="faf7" class="ll ig hi ma b fi me mf l mg mh"># git clone <a class="ae mi" href="https://github.com/hadoopsubmarine/submarine-installer.git" rel="noopener ugc nofollow" target="_blank">https://github.com/hadoopsubmarine/submarine-installer.git</a></span></pre><h2 id="d3a3" class="ll ig hi bd ih lm ln lo il lp lq lr ip jo ls lt it js lu lv ix jw lw lx jb ly bi translated">设置潜艇安装程序</h2><p id="a3f1" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">Submarine-installer可以直接从网络安装所有依赖项，如etcd、docker、nvidia-docker等。但是，在服务器没有连接到互联网的情况下，可以设置下载服务器。</p><p id="b8cc" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">通过在/subscriber-installer/install . conf中执行以下更改，设置submarine installer的下载服务器</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="1478" class="ll ig hi ma b fi me mf l mg mh">DOWNLOAD_SERVER_IP="10.16.1.58" <br/>DOWNLOAD_SERVER_PORT="19000" <br/>LOCAL_DNS_HOST="10.16.16" <br/>ETCD_HOSTS=(10.16.1.31 10.16.1.32 10.16.1.33)</span></pre><p id="3998" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><em class="mj">注意:设置ETCD至少需要三台服务器。在这种情况下，选择rhel1、rhel2和rhel3来设置ETCD。</em></p><p id="dbda" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><em class="mj">本文档在已经安装的HDP环境中设置潜艇。因此，不要安装任何其他东西，因为我们假设yarn、docker、nvidia-driver、cuda和nvidia-docker已经安装并正确配置。通过运行以下命令来验证它:</em></p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="8273" class="ll ig hi ma b fi me mf l mg mh"># nvidia-docker run --rm nvidia/cuda:9.2-base nvidia-smi</span></pre><p id="7d9d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">通过运行以下命令运行安装程序。</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="e1b9" class="ll ig hi ma b fi me mf l mg mh"># ./sibmarine-installer/install.sh</span></pre><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es mk"><img src="../Images/f1d5ffe8691cddd7a8309c25415cb671.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-wx2AMwH_9WWBbNT"/></div></div></figure><p id="90a5" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">输入“y”。将启动主菜单。输入“6”启动下载服务器，如图2所示。输入“y”启动下载http服务器</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es ml"><img src="../Images/a7cedcb4a4b64294723aa71b9fbe6c75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZN__TL5sLl2NKpuP"/></div></div></figure><p id="8358" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这将下载/subscribe-installer/downloads文件夹中的所有依赖项和包，并启动http服务器，该服务器将在/subscribe-installer/install . conf文件中指定的下载服务器IP和端口上可用。在所有服务器都配置好之前，不要关闭在此服务器上运行的潜艇安装程序。</p><p id="c577" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">当sub潜艇-installer/install.sh在其他服务器上执行并选择安装组件时，会自动从下载服务器下载并安装组件</p><h1 id="8a5c" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">安装组件</h1><p id="1f32" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在此参考设计中，我们将仅通过使用潜艇安装程序来安装ETCD和印花布网络。本文档在已经配置和部署的HDP环境中部署和设置sub潜艇，其中假设docker、nvidia-driver、nvidia-docker和yarn服务已经设置。已安装组件的任何水下特定配置将在后续章节中介绍。</p><h2 id="1136" class="ll ig hi bd ih lm ln lo il lp lq lr ip jo ls lt it js lu lv ix jw lw lx jb ly bi translated">安装ETCD</h2><p id="803e" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">etcd是一个可靠的分布式键值存储，用于存储分布式系统中最关键的数据、注册和发现容器中使用的服务。也可以使用zookeeper、Consul之类的替代产品，但是，在本参考设计中未对其进行测试。</p><p id="adcd" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">执行以下步骤来安装组件。</p><p id="c667" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">快跑。在rhel1、rhel2和rhel3中使用/subscribe-installer/install . sh来安装和设置ETCD，如图所示。键入2安装组件，然后键入1安装etcd并按enter键。</p><figure class="kz la lb lc fd ld er es paragraph-image"><div class="er es mm"><img src="../Images/12014014a93f25a1828c7b211395c05d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/0*Vh3cn_1i1EwfQErr"/></div></figure><p id="284a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><em class="mj">注意:Etcd必须安装在三台服务器上才能形成一个集群。这里，我们在rhel1、rhel2和rhel3中安装了etcd。</em></p><p id="3630" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">安装完成后，通过运行以下命令在所有三台服务器上启动etcd服务。</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="72a1" class="ll ig hi ma b fi me mf l mg mh"># systemctl start etcd.service <br/># systemctl status etcd. Service</span></pre><p id="597b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">通过运行以下命令验证etcd安装</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="b774" class="ll ig hi ma b fi me mf l mg mh"># etcdctl cluster-health</span></pre><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es mn"><img src="../Images/694274b1615b7f85813fc538b745014c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CRuBr-ijju4mNSep"/></div></div></figure><p id="0e8d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">验证集群成员身份</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="cbe1" class="ll ig hi ma b fi me mf l mg mh"># etcdctl member list</span></pre><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es ky"><img src="../Images/4c9dbd1b0ea44597e0fa426ca0f288d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8yU02AeTIjDPde45"/></div></div></figure><h2 id="1ca2" class="ll ig hi bd ih lm ln lo il lp lq lr ip jo ls lt it js lu lv ix jw lw lx jb ly bi translated">配置Docker</h2><p id="6bd1" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">modify/etc/docker/daemon . JSON文件。如果它不存在，请在所有节点中创建包含以下内容的文件。</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="2d38" class="ll ig hi ma b fi me mf l mg mh">{<br/>    "live-restore" : true,<br/>    "debug" : true,<br/>    "insecure-registries": ["${image_registry_ip}:5000"],<br/>    "cluster-store":"etcd://${etcd_host_ip1}:2379,${etcd_host_ip2}:2379,${etcd_host_ip3}:2379",<br/>    "cluster-advertise":"{localhost_ip}:2375",<br/>    "dns": ["${yarn_dns_registry_host_ip}", "${dns_host_ip}"],<br/>    "hosts": ["tcp://{localhost_ip}:2375", "unix:///var/run/docker.sock"]<br/>}</span></pre><p id="6830" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">根据您的环境替换daemon.json文件中的变量，如图所示，以供参考。</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="792c" class="ll ig hi ma b fi me mf l mg mh">[root@rhel4 submarine-installer]# cat /etc/docker/daemon.json<br/>{<br/>    "live-restore" : true,<br/>    "debug" : true,<br/>    "insecure-registries" : ["linuxjh.hdp3.cisco.com:5000"],<br/>    "cluster-store" : "etcd://10.16.1.31:2379,10.16.1.32:2379,10.16.1.33:2379",<br/>    "cluster-advertise" : "10.16.1.34:2375",<br/>    "hosts" : ["tcp://10.16.1.34:2375", "unix:///var/run/docker.sock"]</span><span id="b9ef" class="ll ig hi ma b fi mo mf l mg mh">}</span></pre><p id="1233" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">重新加载docker守护进程并重启docker服务。</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="efb8" class="ll ig hi ma b fi me mf l mg mh"># systemctl daemon-reload <br/># systemctl restart docker</span></pre><p id="b910" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">如先决条件中所述，如果启用了YARN cgroups支持，请确保Docker使用cgroupfs cgroupdriver选项。</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="91de" class="ll ig hi ma b fi me mf l mg mh"># vi /usr/lib/systemd/system/docker.service</span></pre><p id="d41a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">查找并修复cgroupdriver:</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="32a4" class="ll ig hi ma b fi me mf l mg mh">--exec-opt native.cgroupdriver=cgroupfs \</span></pre><h2 id="428c" class="ll ig hi bd ih lm ln lo il lp lq lr ip jo ls lt it js lu lv ix jw lw lx jb ly bi translated">安装印花棉布</h2><p id="4306" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">Calico创建并管理一个扁平的三层网络，每个容器都分配有一个可路由的IP。</p><p id="16d0" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">要在指定的服务器上安装Calico，请运行。/subscriber-installer/install . sh .输入“3”安装calico网络，按回车键，如图所示</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es mn"><img src="../Images/b7ca2c4bc9de31719ab382d11987b612.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vJLXszsYGhqJszXj"/></div></div></figure><p id="1694" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">启动calico节点服务。</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="eb7b" class="ll ig hi ma b fi me mf l mg mh"># systemctl start calico-node.service <br/># systemctl status calico-node.service</span></pre><p id="d0ac" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">通过运行以下命令验证calico网络。它将显示除本地主机之外的所有主机状态。</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="3bb8" class="ll ig hi ma b fi me mf l mg mh">[root@rhel17 ~]# calicoctl node status<br/>Calico process is running.</span><span id="8700" class="ll ig hi ma b fi mo mf l mg mh">IPv4 BGP status<br/>+--------------+-------------------+-------+------------+--------------------------------+<br/>| PEER ADDRESS |     PEER TYPE     | STATE |   SINCE    |              INFO              |<br/>+--------------+-------------------+-------+------------+--------------------------------+<br/>| 10.16.1.31   | node-to-node mesh | up    | 2019-08-27 | Established                    |<br/>| 10.16.1.40   | node-to-node mesh | up    | 2019-08-27 | Established                    |<br/>| 10.16.1.41   | node-to-node mesh | up    | 2019-08-27 | Established                    |<br/>| 10.16.1.43   | node-to-node mesh | up    | 2019-08-27 | Established                    |<br/>| 10.16.1.44   | node-to-node mesh | up    | 2019-08-27 | Established                    |<br/>| 10.16.1.34   | node-to-node mesh | up    | 2019-08-27 | Established                    |<br/>| 10.16.1.35   | node-to-node mesh | up    | 2019-08-27 | Established                    |<br/>| 10.16.1.36   | node-to-node mesh | up    | 2019-08-27 | Established                    |<br/>| 10.16.1.37   | node-to-node mesh | up    | 2019-08-27 | Established                    |<br/>| 10.16.1.38   | node-to-node mesh | up    | 2019-08-27 | Established                    |<br/>| 10.16.1.58   | node-to-node mesh | up    | 2019-08-28 | Established                    |<br/>+--------------+-------------------+-------+------------+--------------------------------+</span><span id="ef69" class="ll ig hi ma b fi mo mf l mg mh">IPv6 BGP status<br/>No IPv6 peers found.</span><span id="f00e" class="ll ig hi ma b fi mo mf l mg mh">[root@rhel17 ~]#</span></pre><p id="4d7c" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">测试印花布网络。Calico网络安装程序还包含在两个不同节点中提供两个docker容器并运行ping的脚本。如果另一个节点当前没有设置Calico，它可能会失败。设置好calico后，您可以遵循以下手动步骤。</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="184b" class="ll ig hi ma b fi me mf l mg mh"># docker network create --driver calico --ipam-driver calico-ipam calico-network <br/># docker network ls</span></pre><figure class="kz la lb lc fd ld er es paragraph-image"><div class="er es mp"><img src="../Images/014547bb1eab35f7b677b4bf49bc8cf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1162/0*xn2MUE2WJK_tJYSM"/></div></figure><p id="252b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在新网络的节点1中创建一个容器</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="759d" class="ll ig hi ma b fi me mf l mg mh"># docker run --net calico-network --name workload-A -tid busybox</span></pre><p id="3475" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在同一网络上的节点2中创建一个容器</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="97c6" class="ll ig hi ma b fi me mf l mg mh"># docker run --net calico-network --name workload-B -tid busybox</span></pre><p id="2341" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">从节点1容器Ping节点2容器</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="e79e" class="ll ig hi ma b fi me mf l mg mh"># docker exec workload-A ping workload-B</span></pre><figure class="kz la lb lc fd ld er es paragraph-image"><div class="er es mq"><img src="../Images/c455beea6c53defb40558051afcba7ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*YYA0NDWWViRP5tYQ"/></div></figure><h2 id="6dc0" class="ll ig hi bd ih lm ln lo il lp lq lr ip jo ls lt it js lu lv ix jw lw lx jb ly bi translated">印花布网络的纱线结构</h2><p id="f6a6" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">为YARN . node manager . runtime . Linux . docker . allowed-container-networks配置使用YARN中的calico驱动程序创建的docker网络</p><p id="cd4f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在Ambari中，单击YARNàCONFIGSàADVANCED，过滤允许的容器网络，并添加calico-network，如图所示。</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es mr"><img src="../Images/c741f929610e1b7b338248fe5be03f82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sj2-QPc-y1ngu1nJ"/></div></div></figure><p id="b789" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">单击保存并重新启动所有受影响的服务。</p><h2 id="97f2" class="ll ig hi bd ih lm ln lo il lp lq lr ip jo ls lt it js lu lv ix jw lw lx jb ly bi translated">验证nvidia-docker</h2><p id="f98d" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在这个参考设计中，使用了nvidia-docker v1。假设nvidia-driver、cuda和nvidia-docker已正确配置。在我们继续下一步之前，请执行以下步骤来验证环境是否已准备好运行支持GPU的分布式AI/ML。</p><p id="7988" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">执行以下测试:</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="ac5b" class="ll ig hi ma b fi me mf l mg mh">[root@rhel14 ~]# nvidia-smi <br/>[root@rhel14 ~]# nvidia-docker run --rm nvidia/cuda:9.2-base nvidia-smi</span><span id="3753" class="ll ig hi ma b fi mo mf l mg mh">[root@rhel14 ~]# nvidia-docker run -it tensorflow/tensorflow:1.9.0-gpu bash<br/>root@0b34d22fac56:/notebooks# python<br/>Python 2.7.12 (default, Dec  4 2017, 14:50:18)<br/>[GCC 5.4.0 20160609] on linux2<br/>Type "help", "copyright", "credits" or "license" for more information.<br/>&gt;&gt;&gt; import tensorflow as tf<br/>&gt;&gt;&gt; tf.test.is_gpu_available()<br/>2019-08-30 14:17:41.424470: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 AVX512F FMA<br/>2019-08-30 14:17:41.812712: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1392] Found device 0 with properties:<br/>name: Tesla V100-PCIE-16GB major: 7 minor: 0 memoryClockRate(GHz): 1.38<br/>pciBusID: 0000:5e:00.0<br/>totalMemory: 15.78GiB freeMemory: 15.37GiB<br/>2019-08-30 14:17:41.812760: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1471] Adding visible gpu devices: 0<br/>2019-08-30 14:17:42.291711: I tensorflow/core/common_runtime/gpu/gpu_device.cc:952] Device interconnect StreamExecutor with strength 1 edge matrix:<br/>2019-08-30 14:17:42.291763: I tensorflow/core/common_runtime/gpu/gpu_device.cc:958]      0<br/>2019-08-30 14:17:42.291775: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 0:   N<br/>2019-08-30 14:17:42.292189: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1084] Created TensorFlow device (/device:GPU:0 with 14879 MB memory) -&gt; physical GPU (device: 0, name: Tesla V100-PCIE-16GB, pci bus id: 0000:5e:00.0, compute capability: 7.0)<br/>True<br/>&gt;&gt;&gt;</span></pre><h2 id="288f" class="ll ig hi bd ih lm ln lo il lp lq lr ip jo ls lt it js lu lv ix jw lw lx jb ly bi translated">为潜艇创建码头工人图像</h2><p id="9448" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">创建以下docker文件。</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="ae41" class="ll ig hi ma b fi me mf l mg mh">[root@linuxjh dockerfile]# cat tf-1.8.0-gpu.Dockerfile<br/>FROM nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04</span><span id="823d" class="ll ig hi ma b fi mo mf l mg mh"># Pick up some TF dependencies<br/>RUN apt-get update &amp;&amp; apt-get install -y --allow-downgrades --no-install-recommends  --allow-change-held-packages \<br/>        build-essential \<br/>        cuda-command-line-tools-9-0 \<br/>        cuda-cublas-9-0 \<br/>        cuda-cufft-9-0 \<br/>        cuda-curand-9-0 \<br/>        cuda-cusolver-9-0 \<br/>        cuda-cusparse-9-0 \<br/>        curl \<br/>        libcudnn7=7.0.5.15-1+cuda9.0 \<br/>        libfreetype6-dev \<br/>        libpng12-dev \<br/>        libzmq3-dev \<br/>        pkg-config \<br/>        python \<br/>        python-dev \<br/>        rsync \<br/>        software-properties-common \<br/>        unzip \<br/>        &amp;&amp; \<br/>    apt-get clean &amp;&amp; \<br/>    rm -rf /var/lib/apt/lists/*</span><span id="ee3c" class="ll ig hi ma b fi mo mf l mg mh">RUN export DEBIAN_FRONTEND=noninteractive &amp;&amp; apt-get update &amp;&amp; apt-get install -yq krb5-user libpam-krb5 &amp;&amp; apt-get clean</span><span id="f3de" class="ll ig hi ma b fi mo mf l mg mh">RUN curl -O <a class="ae mi" href="https://bootstrap.pypa.io/get-pip.py" rel="noopener ugc nofollow" target="_blank">https://bootstrap.pypa.io/get-pip.py</a> &amp;&amp; \<br/>    python get-pip.py &amp;&amp; \<br/>    rm get-pip.py</span><span id="33ff" class="ll ig hi ma b fi mo mf l mg mh">RUN pip --no-cache-dir install \<br/>        Pillow \<br/>        h5py \<br/>        ipykernel \<br/>        jupyter \<br/>        matplotlib \<br/>        numpy \<br/>        pandas \<br/>        scipy \<br/>        sklearn \<br/>        &amp;&amp; \<br/>    python -m ipykernel.kernelspec</span><span id="fc85" class="ll ig hi ma b fi mo mf l mg mh"># Install TensorFlow GPU version.<br/>RUN pip --no-cache-dir install \<br/>    <a class="ae mi" href="http://storage.googleapis.com/tensorflow/linux/gpu/tensorflow_gpu-1.8.0-cp27-none-linux_x86_64.whl" rel="noopener ugc nofollow" target="_blank">http://storage.googleapis.com/tensorflow/linux/gpu/tensorflow_gpu-1.8.0-cp27-none-linux_x86_64.whl</a><br/>RUN apt-get update &amp;&amp; apt-get install git -y</span><span id="e3a0" class="ll ig hi ma b fi mo mf l mg mh">RUN apt-get update &amp;&amp; apt-get install -y openjdk-8-jdk wget<br/># Downloadhadoop-3.1.1.tar.gz<br/>RUN wget <a class="ae mi" href="http://mirrors.hust.edu.cn/apache/hadoop/common/hadoop-3.1.1/hadoop-3.1.1.tar.gz" rel="noopener ugc nofollow" target="_blank">http://mirrors.hust.edu.cn/apache/hadoop/common/hadoop-3.1.1/hadoop-3.1.1.tar.gz</a><br/>RUN tar zxf hadoop-3.1.1.tar.gz<br/>RUN mv hadoop-3.1.1 hadoop-3.1.0</span><span id="6f54" class="ll ig hi ma b fi mo mf l mg mh"># Download jdk which supports kerberos<br/>#RUN wget -qO jdk8.tar.gz 'http://${kerberos_jdk_url}/jdk-8u152-linux-x64.tar.gz'<br/>#RUN tar xzf jdk8.tar.gz -C /opt<br/>#RUN mv /opt/jdk* /opt/java<br/>#RUN rm jdk8.tar.gz<br/>#RUN update-alternatives --install /usr/bin/java java /opt/java/bin/java 100<br/>#RUN update-alternatives --install /usr/bin/javac javac /opt/java/bin/javac 100</span><span id="947f" class="ll ig hi ma b fi mo mf l mg mh">#ENV JAVA_HOME /opt/java<br/>#ENV PATH $PATH:$JAVA_HOME/bin<br/>[root@linuxjh dockerfile]#</span></pre><p id="3677" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">构建Docker映像</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="369a" class="ll ig hi ma b fi me mf l mg mh">[root@linuxjh dockerfile]# docker build -t tf-1.8.0-gpu . -f tf-1.8.0-gpu.Dockerfile</span></pre><p id="d936" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">标记图像并将其推送到私有docker注册表</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="c448" class="ll ig hi ma b fi me mf l mg mh"># docker tag tf-1.8.0-gpu linuxjh.hdp3.cisco.com:5000/tf-1.8.0-gpu:0.0.1<br/># docker push linuxjh.hdp3.cisco.com:5000/tf-1.8.0-gpu:0.0.1<br/># docker image ls</span></pre><h2 id="b1c2" class="ll ig hi bd ih lm ln lo il lp lq lr ip jo ls lt it js lu lv ix jw lw lx jb ly bi translated">驾驶潜艇</h2><p id="cac3" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">为了测试机器学习与潜艇Cifar-10张量流估计器的例子已经被利用。</p><p id="65cb" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在开始运行substantial独立作业或分布式作业之前，请执行以下步骤。</p><h2 id="b764" class="ll ig hi bd ih lm ln lo il lp lq lr ip jo ls lt it js lu lv ix jw lw lx jb ly bi translated">下载潜艇jar文件</h2><p id="12b0" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">从<a class="ae mi" href="https://www.apache.org/dyn/closer.cgi/hadoop/common/hadoop-3.2.0/hadoop-3.2.0.tar.gz" rel="noopener ugc nofollow" target="_blank">https://www . Apache . org/dyn/closer . CGI/Hadoop/common/Hadoop-3 . 2 . 0/Hadoop-3 . 2 . 0 . 0 . tar . gz</a>下载Hadoop-yarn-subscriber-3 . 2 . 0 . jar。它包含在hadoop 3.2镜像中。提取下载的文件，将Hadoop-yarn-subscriber-3 . 2 . 0 . jar复制到/usr/HDP/3 . 0 . 1 . 0–187/Hadoop-yarn/folder。Hadoop-yarn-sub潜艇-3.2.0.jar文件应该在所有NodeManager节点中复制。</p><h2 id="928f" class="ll ig hi bd ih lm ln lo il lp lq lr ip jo ls lt it js lu lv ix jw lw lx jb ly bi translated">准备测试数据</h2><p id="5d3a" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">CIFAR-10是用于图像识别的机器学习中的常见基准。以下示例基于CIFAR-10数据集。</p><p id="5349" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">通过运行以下命令下载tensorflow模型。</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="58be" class="ll ig hi ma b fi me mf l mg mh"># git clone <a class="ae mi" href="https://github.com/tensorflow/models/" rel="noopener ugc nofollow" target="_blank">https://github.com/tensorflow/models/</a></span></pre><p id="4bf8" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">转到模型/教程/图像/cifar10_estimator。使用以下命令生成数据:(需要安装Tensorflow)</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="985f" class="ll ig hi ma b fi me mf l mg mh"># python generate_cifar10_tfrecords.py --data-dir=cifar-10-data</span></pre><p id="5ac4" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">上传数据到HDFS</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="7910" class="ll ig hi ma b fi me mf l mg mh"># hds dfs -put cifar-10-data/ /tmp/cifar-10-data</span></pre><h2 id="3564" class="ll ig hi bd ih lm ln lo il lp lq lr ip jo ls lt it js lu lv ix jw lw lx jb ly bi translated">运行独立TensorFlow作业</h2><p id="d0a6" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">对独立tensorflow作业运行以下命令。对于单机，不需要指定参数服务器和工作线程数。下面的命令将为worker节点和tensorboard分别提供一个容器。但是，tensorboard是可选的，可以在下面的命令中省略</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="e2f2" class="ll ig hi ma b fi me mf l mg mh">[root@rhel4 ~]# cat standalone-tf.sh<br/>hdfs dfs -rm -r /tmp/cifar-10-jobdir<br/>yarn app -destroy standalone-tf-01<br/>yarn jar /usr/hdp/3.0.1.0-187/hadoop-yarn/hadoop-yarn-submarine-3.2.0.jar job run \<br/>--name standalone-tf-01 \<br/>--verbose \<br/>--docker_image linuxjh.hdp3.cisco.com:5000/tf-1.8.0-gpu:1.0  \<br/>--input_path hdfs://CiscoHDP/tmp/cifar-10-data \<br/>--checkpoint_path hdfs://CiscoHDP/tmp/cifar-10-jobdir \<br/>--env YARN_CONTAINER_RUNTIME_DOCKER_CONTAINER_NETWORK=calico-network \<br/>--env DOCKER_JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64/jre/ \<br/>--env DOCKER_HADOOP_HDFS_HOME=/hadoop-3.1.0 \<br/>--worker_resources memory=8G,vcores=2,gpu=1 \<br/>--worker_launch_cmd "cd /test/models/tutorials/image/cifar10_estimator &amp;&amp; python cifar10_main.py --data-dir=%input_path% --job-dir=%checkpoint_path% --train-steps=10000 --eval-batch-size=16 --train-batch-size=16 --num-gpus=1 --sync" \<br/>--ps_docker_image  linuxjh.hdp3.cisco.com:5000/tf-1.8.0-cpu-wt  \<br/>--tensorboard \<br/>--tensorboard_docker_image linuxjh.hdp3.cisco.com:5000/tf-1.8.0-cpu-wt</span><span id="0db3" class="ll ig hi ma b fi mo mf l mg mh">[root@rhel4 ~]#</span></pre><p id="1259" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">注意:<em class="mj">请注意，YARN服务不允许多个服务同名，所以请运行以下命令。#纱线申请-销毁&lt;服务-名称&gt; </em></p><h2 id="cbb3" class="ll ig hi bd ih lm ln lo il lp lq lr ip jo ls lt it js lu lv ix jw lw lx jb ly bi translated">运行分布式张量流作业</h2><p id="801c" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">下面是提交分布式张量流的命令。对于分布式tensorflow，工作线程数应大于1，并且还需要参数服务器。在本例中，我们提供了两个工作节点和一个参数服务器。每个工作节点将有8G内存、2个CPU和1个GPU。参数服务器请求2G RAM和2个CPU。根据您的环境和可用资源，可以请求更多的工作人员。</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="7929" class="ll ig hi ma b fi me mf l mg mh">[root@rhel4 ~]# cat distributed-tf.sh<br/>hdfs dfs -rm -r /tmp/cifar-10-jobdir<br/>yarn app -destroy dtf-job-01<br/>yarn jar /usr/hdp/3.0.1.0-187/hadoop-yarn/hadoop-yarn-submarine-3.2.0.jar job run \<br/>--name dtf-job-01 \<br/>--verbose \<br/>--docker_image linuxjh.hdp3.cisco.com:5000/tf-1.8.0-gpu:1.0  \<br/>--input_path hdfs://CiscoHDP/tmp/cifar-10-data \<br/>--checkpoint_path hdfs://CiscoHDP/tmp/cifar-10-jobdir \<br/>--env YARN_CONTAINER_RUNTIME_DOCKER_CONTAINER_NETWORK=calico-network \<br/>--env DOCKER_JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64/jre/ \<br/>--env DOCKER_HADOOP_HDFS_HOME=/hadoop-3.1.0 \<br/>--num_workers 2 \<br/>--worker_resources memory=8G,vcores=2,gpu=1 \<br/>--worker_launch_cmd "cd /test/models/tutorials/image/cifar10_estimator &amp;&amp; python cifar10_main.py --data-dir=%input_path% --job-dir=%checkpoint_path% --train-steps=10000 --eval-batch-size=16 --train-batch-size=16 --num-gpus=1 --sync" \<br/>--ps_docker_image  linuxjh.hdp3.cisco.com:5000/tf-1.8.0-cpu-wt  \<br/>--num_ps 1 \<br/>--ps_resources memory=2G,vcores=2  \<br/>--ps_launch_cmd "cd /test/models/tutorials/image/cifar10_estimator &amp;&amp; python cifar10_main.py --data-dir=%input_path% --job-dir=%checkpoint_path% --num-gpus=0" \<br/>--tensorboard \<br/>--tensorboard_docker_image linuxjh.hdp3.cisco.com:5000/tf-1.8.0-cpu-wt</span><span id="33f1" class="ll ig hi ma b fi mo mf l mg mh">[root@rhel4 ~]#</span></pre><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es ms"><img src="../Images/28c32d2f9b2bb4047ce12f5fde23109f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tAJZR-iv3Jm13QB1"/></div></div></figure><h2 id="aca7" class="ll ig hi bd ih lm ln lo il lp lq lr ip jo ls lt it js lu lv ix jw lw lx jb ly bi translated">验证分布式张量流作业</h2><p id="5860" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在上述步骤中使用YARN提交作业后，执行以下步骤来验证作业是否成功运行。</p><p id="4a6d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">启动YARN(节点管理器)GUI。单击服务。提交的作业将显示在应用程序和服务选项卡中，如下图所示。</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es mt"><img src="../Images/1c9af6795d26f42cb959a3ea2ddc62d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-K21eSE9jMLMbPjq"/></div></div></figure><p id="8d1a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">单击dtf-job-01查看此服务的详细信息。下图显示了该作业创建的组件。因为我们要求2名工人，1名PS和Tensorboard，这是可以核实的。</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es ky"><img src="../Images/40359e640f962fded8139f195af7e42e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Y0VmPYbsl_aznODD"/></div></div></figure><p id="d444" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">单击尝试列表，然后单击尝试ID。网格视图将显示启动的容器的详细信息、它们的状态以及它们被提供的节点。如果请求GPU资源，例如在这次运行中，YARN在GPU所在的节点中调度workers docker容器。作业成功完成后，资源会自动返回到群集。</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es mu"><img src="../Images/a3634dd1f15cef0da7644507ee0379fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fITDQ9K5rL05M6W8"/></div></div></figure><p id="c0d4" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><em class="mj">注意:如果任务请求的资源(如RAM、CPU和GPU)大于可用资源，任务将失败。验证YARN GUI中的集群资源，以确保高级资源(如GPU)没有被其他作业或用户占用。</em></p><p id="b2e6" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">单击“日志”列中的一个工作节点，验证作业是否正在运行。例如，单击rhel17日志，然后单击stderr.txt文件。如下图所示验证输出</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es ky"><img src="../Images/3533520d5156609cb1cc1beda3f131f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nMDFpV9M10v5X-ei"/></div></div></figure><p id="af0a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们还可以验证worker运行时所利用的资源。例如，如下图所示的rhel17服务器。</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es ky"><img src="../Images/0cf4bb71c705e0ff5276e1a0943f019e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NspyNSY6Oq6wIEpZ"/></div></div></figure><p id="0d38" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">点击YARN GUI中的“集群概述”也可以查看集群级资源。我们用2个工人和1个GPU启动了海底作业。下图中的群集概述显示了群集级别的资源利用率。</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es ky"><img src="../Images/5a48f486f9353f7c607a7271f77779f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kaDIrL1MpHpNwsg6"/></div></div></figure><p id="7d6f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">因为我们已经要求YARN为这项工作推出Tensorboard。在服务/应用程序选项卡中单击设置→Tensorboard即可启动Tensorboard。</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es ky"><img src="../Images/8e4ce00b50a2667ce1922d65bebee0b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HD3pp3nvDkIH2nke"/></div></div></figure><p id="04f5" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">Tensorboard可以如下图所示</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es mv"><img src="../Images/9cbaa642b350fe38134bcccf6e99bb92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aKRFYos0BPMLav4i"/></div></div></figure><p id="d14b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">ssh到其中一个配置了worker的节点，并运行nvidia-smi命令，如下所示。</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es mw"><img src="../Images/dd5169a371f3f77da69103bde8549d25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2v2luDEYyrhQRAFQ"/></div></div></figure><h1 id="633c" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">潜艇用齐柏林飞艇</h1><p id="d048" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">Zeppelin是一个基于网络的笔记本，支持交互式数据分析。可以用SQL，Scala，Python等。制作数据驱动、互动、协作的文档。</p><p id="64cb" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">Zeppelin有20多个解释器(例如Spark、Hive、Cassandra、Elasticsearch、Kylin、HBase等。)来收集数据、清理数据、特征提取等。在Hadoop中的数据之前完成机器学习模型训练。数据预处理过程。</p><p id="f21e" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">潜水艇解释器是新开发的解释器，支持机器学习工程师和数据科学家从Zeppelin笔记本进行开发，并直接向YARN job提交训练作业并从笔记本中获得结果。</p><h2 id="3708" class="ll ig hi bd ih lm ln lo il lp lq lr ip jo ls lt it js lu lv ix jw lw lx jb ly bi translated">齐柏林潜艇解释器属性</h2><p id="64a7" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">发射齐柏林飞艇。单击用户名，然后单击解释器下拉菜单，以配置潜艇解释器属性</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es mx"><img src="../Images/18f6ebda10c3aa711a2f1297e5b62192.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*W8bNtuDUHLtXvcu0"/></div></div></figure><p id="69e6" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在过滤器中键入submarine，然后单击Edit，根据您的环境配置submarine解释器。</p><p id="fe15" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在我们的实验室设置中设置了以下属性。</p><p id="389f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">DOCKER _ HADOOP _ HDFS _ HOME =/HADOOP-3 . 1 . 0</p><p id="4c3e" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">DOCKER _ JAVA _ HOME =/usr/lib/JVM/JAVA-8-open JDK-amd64/JRE/</p><p id="ff3f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">HADOOP _ YARN _潜艇_ JAR =/usr/HDP/3 . 0 . 1 . 0–187/HADOOP-YARN/HADOOP-YARN-sub潜艇-3.2.0.jar</p><p id="084e" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">解释器_启动_模式=本地</p><p id="8248" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">subscriber _ HADOOP _ CONF _ DIR =/etc/HADOOP/conf</p><p id="12d2" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">subscriber _ HADOOP _ HOME =/usr/HDP/3 . 0 . 1 . 0–187/HADOOP</p><p id="6068" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">docker . container . network = calico-网络</p><p id="4c82" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">subscriber . algorithm . HDFS . path = HDFS://CiscoHDP/user/root/algorithm</p><p id="ff2d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">subscriber . Hadoop . home =/usr/HDP/3 . 0 . 1 . 0–187/Hadoop</p><p id="7d7d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">TF . check point . path = HDFS://CiscoHDP/user/root/check point/cifar-10-jobdir</p><p id="3144" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">tf.parameter.services.cpu=2</p><p id="8268" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">TF . parameter . services . docker . image = linuxjh . hdp3 . Cisco . com:5000/TF-1 . 8 . 0-CPU-wt</p><p id="b2bd" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">tf.parameter.services.gpu=0</p><p id="6e7b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">TF . parameter . services . memory = 2G</p><p id="7ae3" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">tf.parameter.services.num=1</p><p id="a16f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">tf.tensorboard.enable=true</p><p id="429e" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">tf.worker.services.cpu=2</p><p id="d1a8" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">TF . worker . services . docker . image = linuxjh . hdp3 . Cisco . com:5000/TF-1 . 8 . 0-GPU:1.0</p><p id="d603" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">tf.worker.services.gpu=1</p><p id="a1c9" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">tf.worker.services.memory=4G</p><p id="76c9" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">tf.worker.services.num=2</p><p id="c107" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">yarn . web app . http . address =<a class="ae mi" href="http://rhel2.hdp3.cisco.com:8088/" rel="noopener ugc nofollow" target="_blank">http://rhel2.hdp3.cisco.com:8088</a></p><p id="8e46" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">zeppelin . subscriber . auth . type = simple</p><p id="0298" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">下图描述了如何设置潜艇解释器属性</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es mu"><img src="../Images/379b5b3725b1386d048967a562a9739a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aawKiS_vd70o1xW7"/></div></div></figure><h2 id="1b62" class="ll ig hi bd ih lm ln lo il lp lq lr ip jo ls lt it js lu lv ix jw lw lx jb ly bi translated">使用Zeppelin潜艇解释器运行分布式张量流</h2><p id="587d" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">执行以下步骤，使用Zeppelin subject解释器提交分布式张量流</p><p id="0648" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">点击记事本，选择<strong class="jf hj"> + </strong>新建便笺。将弹出创建新便笺窗口。指定注释名称，并从默认解释器下拉列表中选择sub潜艇，如下所示</p><figure class="kz la lb lc fd ld er es paragraph-image"><div class="er es my"><img src="../Images/1425ce744be4908218430eddc951a8b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1086/0*y2xMU12vXtNqxYxC"/></div></figure><p id="bcb3" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在注释中键入以下内容，并通过单击右侧的注释设置图标为注释添加标题</p><pre class="kz la lb lc fd lz ma mb mc aw md bi"><span id="ac92" class="ll ig hi ma b fi me mf l mg mh">%submarine<br/>dashboard</span></pre><p id="00c1" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">单击运行图标。从命令下拉列表中选择作业运行，并输入以下内容。</p><p id="44a6" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">关卡路径</strong></p><p id="8d0f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><em class="mj">sub潜艇为每个用户的笔记设置单独的检查点路径，用于Tensorflow训练。保存此注释历史的训练数据，用于训练模型数据的输出，Tensorboard使用此路径中的数据进行模型演示。用户不能修改它。例如:hdfs://CiscoHDP/…，检查点路径的环境变量名为%checkpoint_path%，您可以使用%checkpoint_path%代替PS Launch Cmd和Worker Launch Cmd中数据路径的输入值。</em></p><p id="3b6a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><em class="mj">您不能在作业运行中修改检查点路径，因为它来自潜艇解释器属性tf.checkpoint.path </em></p><p id="1112" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">输入路径</strong></p><p id="2d5a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><em class="mj">用户指定张量流算法的数据data目录。仅支持启用HDFS的目录。数据路径的环境变量名为%input_path%，您可以使用%input_path%来代替PS启动命令和Worker启动命令中数据路径的输入值。</em></p><p id="9c01" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><em class="mj">例如</em></p><p id="0402" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><em class="mj">HDFS://CiscoHDP/tmp/cifar-10-data</em></p><p id="0bbf" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj"> PS启动Cmd: </strong></p><p id="d84f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><em class="mj"> Tensorflow参数服务启动命令。</em></p><p id="dc3b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><em class="mj">CD/test/models/tutorials/image/CIFS ar 10 _ estimator&amp;&amp;python CIFS ar 10 _ main . py—data-dir = % input _ path %—job-dir = % check point _ path %—num-GPU = 0</em></p><p id="aafa" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">工人启动命令:</strong></p><p id="d7a6" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><em class="mj"> Tensorflow工作者服务启动命令。</em></p><p id="867f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><em class="mj">CD/test/models/tutorials/image/cifar 10 _ estimator&amp;&amp;python cifar 10 _ main . py—data-dir = % input _ path %—job-dir = % check point _ path %—train-steps = 30000—eval-batch-size = 16—train-batch-size = 16—num-GPU = 1—sync</em></p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es ky"><img src="../Images/08cefe8e5ce4226dfde4226c187ea714.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fqpTvH2RDNYKJEUh"/></div></div></figure><p id="9218" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">单击运行命令提交潜艇作业。齐柏林潜艇解释器自动将算法文件合并成段，提交给潜艇计算引擎执行。下图显示了潜艇执行日志。</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es ky"><img src="../Images/42893777d3187673e4394b75f5ced16e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*f8FdNw39DJlGoScY"/></div></div></figure><p id="f468" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">启动YARN GUI。单击Services选项卡，您会发现作业正在运行，如下所示</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es ky"><img src="../Images/50b7d3655e5730f8ad0fbded218268b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*S77mE3KvPGTMj17N"/></div></div></figure><p id="cbc3" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">单击anonymous-2ejmbseuu的服务名以查看详细视图，如下图所示。</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es ky"><img src="../Images/77396a8394824e7568e14157a0ae9685.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nhSNBOKTNjFasP77"/></div></div></figure><p id="bbe7" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">单击尝试列表。在下一个屏幕中单击appattempt。</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es mu"><img src="../Images/8c47d895bfb0664d1d16e4b491c731f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*11tKl79UAQISPeu2"/></div></div></figure><p id="8017" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">其余的应用程序尝试、日志、资源利用等可以在YARN GUI中进行探索，如本文前面所讨论的。</p><p id="368a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在命令下拉列表中单击TENSORBOARD RUN，然后单击Run Command，如下所示。</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es mz"><img src="../Images/0463d4a478071cf64af60caf7786d86c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kLNV1RYlo8H2s7PF"/></div></div></figure><p id="69d7" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">YARN GUI服务选项卡将显示新服务已启动，如下所示。</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es na"><img src="../Images/abd47d3a9439f0988fe473c6041ba767.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*egd27fqr8u3BIYF6"/></div></div></figure><p id="9425" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">点击服务(如匿名-tb)。将显示服务详细信息页面。点击设置→张量板，如下图所示，启动张量板</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es nb"><img src="../Images/5abf32389878aaf04f780cc70789bc12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KN9v1GQy7YRLVw-j"/></div></div></figure><p id="6d99" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">启动冲浪板</p><figure class="kz la lb lc fd ld er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es ky"><img src="../Images/aae5facffd2e4e5191a72e41c07bc9e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fHINCktEeG75loI8"/></div></div></figure><h1 id="5cfc" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">参考</h1></div><div class="ab cl nc nd gp ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="hb hc hd he hf"><p id="13c4" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><em class="mj">原载于2020年4月4日</em><a class="ae mi" href="https://community.cisco.com/t5/unified-computing-system-blogs/implementing-apache-submarine-on-cisco-data-intelligence/ba-p/4058851" rel="noopener ugc nofollow" target="_blank"><em class="mj">【https://community.cisco.com】</em></a><em class="mj">。</em></p></div></div>    
</body>
</html>