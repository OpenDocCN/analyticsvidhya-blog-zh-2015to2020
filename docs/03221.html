<html>
<head>
<title>MailChimp Email Campaign Creation using python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用python创建MailChimp电子邮件活动</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/mailchimp-email-campaign-creation-using-python-7d7825292039?source=collection_archive---------3-----------------------#2020-01-21">https://medium.com/analytics-vidhya/mailchimp-email-campaign-creation-using-python-7d7825292039?source=collection_archive---------3-----------------------#2020-01-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/421dab860eb3783d693f93a4065d102e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DRKNnzGizlDdFb-aS0HIDQ.png"/></div></div></figure><div class=""/><p id="c2c3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">电子邮件营销是与你的电子商务客户沟通的一种有效而强大的方式，因为全世界超过34%的人使用电子邮件。当我们思考自己的经历时，我们通常在分析了客户数据库后，每周都会收到一些来自不同类型的自动化电子商务网站的通用和个性化电子邮件。</p><p id="9642" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu"> <em class="jo">为什么电子邮件营销对你的业务如此重要？</em>T3】</strong></p><ul class=""><li id="ee96" class="jp jq ht is b it iu ix iy jb jr jf js jj jt jn ju jv jw jx bi translated"><em class="jo">它帮助你与你的观众和核心客户保持联系</em></li><li id="7ff3" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated"><em class="jo">你可以实时联系客户，因为大多数人在移动设备上打开电子邮件</em></li><li id="da49" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">与其他互联网信息相比，电子邮件给人的感觉更个性化、更吸引人</li><li id="4127" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated"><em class="jo">就其表现和结果而言，电子邮件营销是最容易衡量的在线营销类型之一</em></li><li id="d0a4" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated"><em class="jo">其实很实惠</em></li></ul><p id="be92" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">今天，我将介绍使用MailChimp API和Python创建通用电子邮件活动的步骤。如果我们想发送定制的电子邮件活动，MailChimp API也提供了该功能。</p><p id="3020" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因为响应的认证是这个过程的第一步，所以我们需要一个API密钥和用户名。现在我们将看到如何在MailChimp中生成<strong class="is hu"> API键</strong></p><p id="8c91" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">1.点按您的个人资料名称以展开“帐户”面板，然后选取“帐户设置”</p><p id="4312" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.点击附加菜单并选择<strong class="is hu"> API键</strong></p><p id="91c1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3.点击<strong class="is hu">创建密钥</strong>按钮，复制创建的密钥</p><p id="d47c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">请点击链接观看视频:</strong> <a class="ae kd" href="https://rb.gy/x52cle" rel="noopener ugc nofollow" target="_blank"> <strong class="is hu">如何使用Mailchimp </strong> </a>自动化电子邮件活动</p><p id="5d0b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">GitHub资源库:<a class="ae kd" href="https://github.com/sherangaG/mailChimp-email-creation-python" rel="noopener ugc nofollow" target="_blank">https://GitHub . com/sherangaG/mailChimp-email-creation-python</a></p><p id="bc87" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">导入以下库</em></p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="a192" class="kn ko ht kj b fi kp kq l kr ks">from mailchimp3 import MailChimp<br/>from string import Template<br/><br/>import newsletter_template # python script for html template</span></pre><p id="ac20" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">以下函数用于验证响应</em></p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="0f0a" class="kn ko ht kj b fi kp kq l kr ks">MC_API_KEY = "XXXXXXXXXXXXXXXXXXXXXXXXXXXX"<br/>MC_USER_NAME = "XXXXXXXXXXXXXXXX"<br/><br/>client = MailChimp(mc_api=MC_API_KEY, mc_user=MC_USER_NAME)</span></pre><p id="7fab" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们需要电子邮件列表，他们的名字，姓氏等。发送给电子邮件收件人。因此，我们需要创建名为<strong class="is hu">“audience”</strong>的变量来存储客户详细信息。</p><p id="3739" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">下面的功能用于创建观众</em></p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="b286" class="kn ko ht kj b fi kp kq l kr ks">def audience_creation_function(audience_creation_dictionary):<br/>        <br/>        audience_creation = ''<br/>        audience_creation_dictionary = audience_creation_dictionary<br/>        print(audience_creation_dictionary)<br/><br/>        audience_list = {<br/>            "name": audience_creation_dictionary['audience_name'],<br/>            "contact":<br/>            {<br/>                "company": audience_creation_dictionary['company'],<br/>                "address1": audience_creation_dictionary['address1'],<br/>                "city": audience_creation_dictionary['city'],<br/>                "state": audience_creation_dictionary['state'],<br/>                "zip": audience_creation_dictionary['zip_code'],<br/>                "country": audience_creation_dictionary['country']<br/>            },<br/>            "permission_reminder": audience_creation_dictionary['audience_name'],<br/>            "campaign_defaults":<br/>            {<br/>                "from_name": audience_creation_dictionary['from_name'],<br/>                "from_email": audience_creation_dictionary['from_email'],<br/>                "subject": "",<br/>                "language": audience_creation_dictionary['language']<br/>            },<br/>            "email_type_option": False<br/>        }<br/><br/>        try:<br/>            audience_creation = client.lists.create(data = audience_list)<br/>        except Exception as error:<br/>            print(error)<br/>            <br/>        return audience_creation</span></pre><p id="a47a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">定义了上面的函数后，我们可以通过调用下面的代码来创建受众。这里我们使用<strong class="is hu">受众_创作_词典</strong>，它包括<em class="jo">受众_姓名、公司、地址1、城市、州、邮政编码、国家、发件人_姓名、发件人_电子邮件</em>和<em class="jo">语言。</em></p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="3cc5" class="kn ko ht kj b fi kp kq l kr ks">audience_creation_dictionary = {<br/>    "audience_name" : "ENTER AUDIENCE NAME",<br/>    "company" : "ENTER COMPANY NAME",<br/>    "address1" : "ENTER ADDRESS",<br/>    "city" :  "ENTER CITY",<br/>    "state" : "ENTER STATE", # EX: Western Province<br/>    "zip_code" : "00300",<br/>    "country" : "ENTER COUNTRY", # EX: LK<br/>    "from_name" : "ENTER FROM NAME",<br/>    "from_email" : "ENTER FROM EMAIL",<br/>    "language" : "en"<br/>} <br/>      <br/>audience_creation = audience_creation_function(audience_creation_dictionary)</span></pre><p id="f817" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们已经创造了观众。但是里面没有联系人。我们需要向观众添加之前创建的联系人</p><p id="2c8e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">以下功能用于向受众添加联系人</em></p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="d332" class="kn ko ht kj b fi kp kq l kr ks">def add_members_to_audience_function(audience_id, mail_list, client=client):<br/>        <br/>        audience_id = audience_id<br/>        email_list = email_list<br/><br/>        if len(email_list)!=0:<br/>            for email_iteration in email_list:<br/>                try:<br/>                    data = {<br/>                        "status": "subscribed",<br/>                        "email_address": email_iteration<br/>                    }<br/><br/>                    client.lists.members.create(list_id=audience_id, data ​=data)<br/>                    print('{} has been successfully added to the {} audience'.format(email_iteration, audience_id))<br/><br/>                except Exception as error:<br/>                    print(error)<br/>        else: <br/>            print('Email list is empty')</span></pre><p id="993d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了给观众添加成员，我们需要给参数赋值，这些参数是<em class="jo">观众id </em>和<em class="jo">电子邮件列表</em></p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="da26" class="kn ko ht kj b fi kp kq l kr ks">audience_id = audience_creation['id']<br/><br/>email_list = ['ENTER EMAIL ADDRESS1',<br/>              'ENTER EMAIL ADDRESS2']<br/><br/>add_members_to_audience_function(audience_id=audience_creation['id'],email_list=email_list)</span></pre><p id="a549" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们已将成员添加到受众中，现在我们将创建电子邮件营销活动。</p><p id="5d43" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">以下功能用于创建活动。</em></p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="bd4e" class="kn ko ht kj b fi kp kq l kr ks">def campaign_creation_function(campaign_name, audience_id, from_name, reply_to, client=client):<br/>        <br/>        campaign_name = campaign_name<br/>        audience_id = audience_id<br/>        from_name = from_name<br/>        reply_to = reply_to<br/><br/>        data = {<br/>            "recipients" :<br/>            {<br/>                "list_id": audience_id<br/>            },<br/>            "settings":<br/>            {<br/>                "subject_line": campaign_name,<br/>                "from_name": from_name,<br/>                "reply_to": reply_to<br/>            },<br/>            "type": "regular"<br/>        }<br/><br/>        new_campaign = client.campaigns.create(data=data)<br/>        <br/>        return new_campaign</span></pre><p id="9cd9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">以下代码用于实现带有三个参数的campaign _ creation _ function】</em></p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="c4d3" class="kn ko ht kj b fi kp kq l kr ks">campaign_name = 'CAMPAIGN NAME'<br/>from_name = 'FROM NAME'<br/>reply_to = 'REPLY MAIL ADDRESS'</span><span id="9322" class="kn ko ht kj b fi kt kq l kr ks">campaign = campaign_creation_function(campaign_name=campaign_name,<br/>                                      audience_id=audience_creation['id'],<br/>                                      from_name=from_name,<br/>                                      reply_to=reply_to,<br/>                                      client=client)</span></pre><p id="70da" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">我已经使用html和CSS样式为新闻信函活动创建了简单的HTML模板，并嵌入到python脚本中(</em><a class="ae kd" href="https://github.com/sherangaG/mailChimp-email-creation-python/blob/master/newsletter_template.py" rel="noopener ugc nofollow" target="_blank"><em class="jo">newsletter _ template . py</em></a><em class="jo">)</em></p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="82a7" class="kn ko ht kj b fi kp kq l kr ks">def customized_template(html_code, campaign_id, client=client):<br/>        <br/>        html_code = html_code<br/>        campaign_id = campaign_id</span><span id="a7ad" class="kn ko ht kj b fi kt kq l kr ks">        string_template = Template(html_code).safe_substitute()<br/>        <br/>        try:<br/>            client.campaigns.content.update(<br/>                    campaign_id=campaign_id,<br/>                    data={'message': 'Campaign message', 'html': string_template}<br/>                    )<br/>        except Exception as error:<br/>            <br/>            print(error)</span></pre><p id="7063" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">下面的代码用于调用customized_template函数</em></p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="fba0" class="kn ko ht kj b fi kp kq l kr ks">html_code = newsletter_template.html_code           <br/>customized_template(html_code=html_code, campaign_id=campaign['id'])</span></pre><p id="6669" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">以下功能用于发送电子邮件</em></p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="b008" class="kn ko ht kj b fi kp kq l kr ks">def send_mail(campaign_id, client=client):      <br/>        try:<br/>            client.campaigns.actions.send(campaign_id = campaign_id)<br/>        except Exception as error:<br/>            print(error)</span></pre><p id="cc8b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">调用send_email函数</em></p><pre class="ke kf kg kh fd ki kj kk kl aw km bi"><span id="e0f0" class="kn ko ht kj b fi kp kq l kr ks">send_mail(campaign_id=campaign['id'])</span></pre><p id="3e23" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如我前面提到的，我们能够使用python和MailChimp API发送个性化的电子邮件活动。如果你在这方面需要任何帮助，请在下面评论</p><p id="538d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请点击链接浏览关于如何使用Mailchimp 自动化电子邮件活动的指南</p></div></div>    
</body>
</html>