<html>
<head>
<title>Covariance and Correlation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">协方差和相关性</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/covariance-and-correlation-797ce877dffe?source=collection_archive---------9-----------------------#2020-04-01">https://medium.com/analytics-vidhya/covariance-and-correlation-797ce877dffe?source=collection_archive---------9-----------------------#2020-04-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/634cf626a1c51186d359124aeda5f2da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*5tQIrS3kQ3OxqYjeUuGRTg.jpeg"/></div></figure><p id="adee" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在本文中，我们将从统计学的角度讨论协方差和相关性的概念，并在python中实现它们。</p><p id="9c00" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi jk translated">C  <strong class="io hj"> <em class="jt">方差是一个度量，它给出了两个随机变量之间的关系。此指标评估变量一起变化的程度。它只不过是两个变量之间方差的度量。</em> </strong></p><p id="1af6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在深入协方差之前，我们需要了解均值和方差</p><p id="dbee" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi jk translated"><span class="l jl jm jn bm jo jp jq jr js di"> M </span></p><p id="05f9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">考虑一个由6个值组成的随机变量X</p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="fe21" class="kd ke hi jz b fi kf kg l kh ki">X = [96, 85,  2, 29, 31, 74]</span></pre><p id="5186" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">所以根据定义</p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="f545" class="kd ke hi jz b fi kf kg l kh ki">mean = (sum of values of X)/(number of values of X) </span></pre><ul class=""><li id="37c0" class="kj kk hi io b ip iq it iu ix kl jb km jf kn jj ko kp kq kr bi translated"><strong class="io hj">表示</strong></li></ul><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="2adf" class="kd ke hi jz b fi kf kg l kh ki">def mean(x):<br/>    x = np.array(x)<br/>    return sum(x)/len(x)</span><span id="7deb" class="kd ke hi jz b fi ks kg l kh ki">mean = mean(X) = 52.83</span></pre><p id="f1ef" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> <em class="jt">注意:</em> </strong> <em class="jt">我使用了Numpy数组而不是list来使用广播，而不是使用list comprehensions来做同样的操作</em></p><p id="4b69" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi jk translated"><span class="l jl jm jn bm jo jp jq jr js di"> V </span> <strong class="io hj"> <em class="jt">方差无非是数据的离散性。这是一个度量标准，它给出了一个随机变量的数据点离它们的平均值有多远。</em>T25】</strong></p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es kt"><img src="../Images/16074d0b9dc748e6371ea56e5814af65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rtp5Wba7zUWZ99MTPaJD5g.jpeg"/></div></div><figcaption class="ky kz et er es la lb bd b be z dx translated">差异</figcaption></figure><ul class=""><li id="4f93" class="kj kk hi io b ip iq it iu ix kl jb km jf kn jj ko kp kq kr bi translated"><strong class="io hj">差异</strong></li></ul><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="9e87" class="kd ke hi jz b fi kf kg l kh ki">def variance(x):<br/>    x = np.array(x)<br/>    x = x - mean(x)<br/>    x = x**2<br/>    return sum(x)/len(x),2</span><span id="fa95" class="kd ke hi jz b fi ks kg l kh ki">X = [96, 85,  2, 29, 31, 74]</span><span id="c2fc" class="kd ke hi jz b fi ks kg l kh ki">variance = variance(X) = 1162.47</span></pre><blockquote class="lc ld le"><p id="2b5f" class="im in jt io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">每个随机变量都有它自己的方差，而且它永远不会是负的</p></blockquote><p id="a96b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">两个随机变量X和Y之间的协方差可以通过下式计算</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es li"><img src="../Images/7f141ce4d678fc52297434e499f38ab3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*1s3r-_EqRprk0ZyO-HLVNw.png"/></div><figcaption class="ky kz et er es la lb bd b be z dx translated">X和Y之间的协方差</figcaption></figure><blockquote class="lc ld le"><p id="8b89" class="im in jt io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated"><strong class="io hj">X对X的协方差不过是X的方差</strong></p></blockquote><p id="45c3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">协方差衡量两个随机变量(本例中为X和Y)相对于各自平均值的总变化。</p><p id="834a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">使用协方差，我们可以得到随机变量之间关系的方向，即变量是倾向于同向移动还是表现出相反的关系</p><p id="c855" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">与方差不同，协方差可以取正值或负值</p><blockquote class="lc ld le"><p id="63ac" class="im in jt io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated"><strong class="io hj">正协方差→说明两个随机变量趋向于同向运动。</strong></p><p id="416b" class="im in jt io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated"><strong class="io hj">负协方差→说明两个随机变量趋向于反向运动。</strong></p></blockquote><p id="fee2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们将使用样本协方差，它与总体协方差有点不同</p><blockquote class="lc ld le"><p id="1c71" class="im in jt io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated"><strong class="io hj">样本协方差测量两个随机变量样本之间关系的强度和方向，并推断出这两个随机变量的总体结果</strong></p></blockquote><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es lj"><img src="../Images/61bfed5f0b7236f32d23e3b05374a414.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*ctGMPbbKxKinS6g-HT2o9Q.png"/></div><figcaption class="ky kz et er es la lb bd b be z dx translated">样本协方差</figcaption></figure><blockquote class="lc ld le"><p id="c21b" class="im in jt io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated"><strong class="io hj">总体协方差衡量两个随机变量总体之间的关系。</strong></p></blockquote><p id="cc82" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">实际上，获取一个随机变量的所有总体值是不可行的，所以我们将使用样本协方差并通过使用它来推断我们得到的结果。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es lk"><img src="../Images/6f0c65511953cc44c8b3d553b6cff3f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/1*dR9hGdJH_-AwfjlPFoFwqQ.png"/></div><figcaption class="ky kz et er es la lb bd b be z dx translated">采样离散</figcaption></figure><ul class=""><li id="0bfd" class="kj kk hi io b ip iq it iu ix kl jb km jf kn jj ko kp kq kr bi translated"><strong class="io hj">样本差异</strong></li></ul><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="0f55" class="kd ke hi jz b fi kf kg l kh ki">def sample_variance(x):<br/>    x = np.array(x)<br/>    x = x - mean(x)<br/>    x = x**2<br/>    return sum(x)/(len(x) - 1)</span></pre><ul class=""><li id="464a" class="kj kk hi io b ip iq it iu ix kl jb km jf kn jj ko kp kq kr bi translated">为什么我们除以(n-1)而不是n？</li></ul><p id="8b24" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">当我们在计算样本方差时除以(n1)时，所有可能样本的样本方差的平均值等于总体方差。所以样本方差就是我们所说的总体方差的无偏估计。</p><p id="e28a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果在计算样本方差时除以n而不是(n-1 ),那么所有可能样本的平均值将不等于总体方差。</p><p id="2d12" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">除以n-1满足无偏性，但除以n则不满足。因此，在计算样本方差时，我们倾向于除以n-1。</p><ul class=""><li id="9ed3" class="kj kk hi io b ip iq it iu ix kl jb km jf kn jj ko kp kq kr bi translated"><strong class="io hj">考虑两个随机变量X和Y </strong></li></ul><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="4af6" class="kd ke hi jz b fi kf kg l kh ki">X = [16, 14, 19, 12, 19, 15]</span><span id="5285" class="kd ke hi jz b fi ks kg l kh ki">Y = [ 2,  1, 11,  1, 14, 18]</span></pre><ul class=""><li id="4471" class="kj kk hi io b ip iq it iu ix kl jb km jf kn jj ko kp kq kr bi translated"><strong class="io hj">X、Y和co的平均值</strong></li></ul><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="e6dc" class="kd ke hi jz b fi kf kg l kh ki">mean(X) = 15.83</span><span id="bcbb" class="kd ke hi jz b fi ks kg l kh ki">mean(Y) = 7.83</span></pre><ul class=""><li id="a1e2" class="kj kk hi io b ip iq it iu ix kl jb km jf kn jj ko kp kq kr bi translated"><strong class="io hj">X和Y之间的协方差</strong></li></ul><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="fd00" class="kd ke hi jz b fi kf kg l kh ki">def covariance(x,y):<br/>    x = np.array(x)<br/>    y = np.array(y)<br/>    x = x - mean(x)<br/>    y = y - mean(y)<br/>    temp = x * y<br/>    temp = temp/(len(x) - 1)<br/>    return sum(temp)</span><span id="39c4" class="kd ke hi jz b fi ks kg l kh ki">covariance = covariance(X,Y) = 11.77</span></pre><p id="0ba8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="jt">正协方差表示X和Y倾向于向同一方向移动。</em></p><blockquote class="lc ld le"><p id="1a96" class="im in jt io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated"><strong class="io hj">协方差衡量两个随机变量的总变差。使用协方差，我们只能获得关系的方向。然而，它并不表示两个随机变量之间关系的强度。相关性提供了关系的强度</strong></p></blockquote><p id="0b26" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi jk translated"><span class="l jl jm jn bm jo jp jq jr js di"> C </span> </p><p id="8441" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">相关性是协方差的扩展度量。</p><p id="2560" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">它总是在-1和1之间。</p><p id="745a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">相关性可以表示为</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es ll"><img src="../Images/ca881b439df9a6292891e13a1e11f894.png" data-original-src="https://miro.medium.com/v2/resize:fit:692/format:webp/1*JlmOjaHrm6u9rWja33e54w.png"/></div><figcaption class="ky kz et er es la lb bd b be z dx translated">X和Y之间的相关性</figcaption></figure><ul class=""><li id="b3be" class="kj kk hi io b ip iq it iu ix kl jb km jf kn jj ko kp kq kr bi translated"><strong class="io hj">X和Y的相关性</strong></li></ul><p id="46f3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了计算相关性，我们需要X的样本标准偏差和Y的样本标准偏差</p><p id="a1eb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi jk translated"><span class="l jl jm jn bm jo jp jq jr js di"> S </span> <strong class="io hj"> <em class="jt">安普标准差是样本方差的平方根</em> </strong></p><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="39dd" class="kd ke hi jz b fi kf kg l kh ki">X = [16, 14, 19, 12, 19, 15]</span><span id="6b90" class="kd ke hi jz b fi ks kg l kh ki">Y = [ 2,  1, 11,  1, 14, 18]</span></pre><ul class=""><li id="23c7" class="kj kk hi io b ip iq it iu ix kl jb km jf kn jj ko kp kq kr bi translated"><strong class="io hj">样本标准偏差</strong></li></ul><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="8be7" class="kd ke hi jz b fi kf kg l kh ki">def sample_std(x):<br/>    return sample_variance(x)**(0.5)</span></pre><ul class=""><li id="175b" class="kj kk hi io b ip iq it iu ix kl jb km jf kn jj ko kp kq kr bi translated"><strong class="io hj">X和Y之间的相关性</strong></li></ul><pre class="ju jv jw jx fd jy jz ka kb aw kc bi"><span id="9cbf" class="kd ke hi jz b fi kf kg l kh ki">def correlation(x,y):<br/>    cov = covariance(x,y)<br/>    return cov/(sample_std(x) * sample_std(y))</span><span id="bee9" class="kd ke hi jz b fi ks kg l kh ki">correlation(X,Y) = 0.565</span></pre><p id="c851" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">相关系数显示了X和y之间关系的强度。</p><p id="557d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> <em class="jt">一般假设是，相关系数大于0.7被认为是强相关。相关系数在0.5和0.7之间是中度相关，如果小于0.4，则认为是弱相关。</em> </strong></p><p id="f285" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">所以X和Y的相关性适中。</p></div></div>    
</body>
</html>