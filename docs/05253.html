<html>
<head>
<title>Groks in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的Groks</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/groks-in-python-b0ad4b6946c8?source=collection_archive---------8-----------------------#2020-04-15">https://medium.com/analytics-vidhya/groks-in-python-b0ad4b6946c8?source=collection_archive---------8-----------------------#2020-04-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div class="er es hg"><img src="../Images/581109ecb947414ab98f8992171cc72a.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*LUfoRoDJM9Q--YOy.jpg"/></div></figure><div class=""/><p id="cdd5" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在我之前的<a class="ae jk" href="https://techscouter.blogspot.com/2020/04/using-grok-for-information-extraction.html" rel="noopener ugc nofollow" target="_blank">博客</a>中，我写了关于使用GROKS和REGEX提取信息的文章。</p><p id="5df2" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果你还没有读过，我会鼓励你先浏览一下<a class="ae jk" href="https://techscouter.blogspot.com/2020/04/using-grok-for-information-extraction.html" rel="noopener ugc nofollow" target="_blank">这个</a>博客。</p><p id="b24c" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">任何工具的一个重要方面是在不同环境中使用它并自动执行任务的能力。</p><p id="fc8c" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这篇文章中，我们将会看到使用<a class="ae jk" href="https://github.com/garyelephant/pygrok" rel="noopener ugc nofollow" target="_blank"> pygrok </a>库在python中实现GROKs。</p><p id="a4ac" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">到目前为止，我们知道GROKs是一种可读性更强的正则表达式。</p><h1 id="28f3" class="jl jm hp bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">装置</h1><p id="dd40" class="pw-post-body-paragraph im in hp io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated">Pygrok是python中grok模式的一个实现，可以通过pip发行版获得</p><pre class="ko kp kq kr fd ks kt ku kv aw kw bi"><span id="6e8f" class="kx jm hp kt b fi ky kz l la lb">pip install pygrok</span></pre><h1 id="2ced" class="jl jm hp bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">使用</h1><p id="aa0d" class="pw-post-body-paragraph im in hp io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated">这个库对于使用预制的洞穴和我们自己定制的洞穴非常有用。</p><p id="e6da" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们从一个非常基本的例子开始:</p><h2 id="883f" class="kx jm hp bd jn lc ld le jr lf lg lh jv ix li lj jz jb lk ll kd jf lm ln kh lo bi translated">解析文本</h2><pre class="ko kp kq kr fd ks kt ku kv aw kw bi"><span id="f437" class="kx jm hp kt b fi ky kz l la lb"><em class="lp">#import the package<br/></em>from pygrok import Grok</span><span id="6da6" class="kx jm hp kt b fi lq kz l la lb"><em class="lp">#text to be processed<br/></em>text = 'gary is male, 25 years old and weighs 68.5 kilograms'</span><span id="5ca9" class="kx jm hp kt b fi lq kz l la lb"><em class="lp">#pattern which you want to match</em><br/>pattern = '%{WORD:name} is %{WORD:gender}, %{NUMBER:age} years old and weighs %{NUMBER:weight} kilograms'</span><span id="b719" class="kx jm hp kt b fi lq kz l la lb">#create a GROK object by giving the pattern<br/>grok = Grok(pattern)</span><span id="2050" class="kx jm hp kt b fi lq kz l la lb">#use match function to get all the parsed patterns<br/>print grok.match(text)</span></pre><p id="be5f" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">注意:这也将返回部分匹配模式，即忽略字符串开头和结尾的不匹配模式。</p><p id="ad98" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">所有可用的GROK模式列表可以在<a class="ae jk" href="https://github.com/garyelephant/pygrok/tree/master/pygrok/patterns" rel="noopener ugc nofollow" target="_blank">这里</a>看到</p><h2 id="e707" class="kx jm hp bd jn lc ld le jr lf lg lh jv ix li lj jz jb lk ll kd jf lm ln kh lo bi translated">使用自定义GROK模式</h2><pre class="ko kp kq kr fd ks kt ku kv aw kw bi"><span id="d04c" class="kx jm hp kt b fi ky kz l la lb"><em class="lp">#import the package<br/></em>from pygrok import Grok</span><span id="e098" class="kx jm hp kt b fi lq kz l la lb"><em class="lp">#text to be processed<br/></em>text = 'gary is male, 25 years old and weighs 68.5 kilograms'</span><span id="deba" class="kx jm hp kt b fi lq kz l la lb"><em class="lp">#pattern which you want to match</em><br/>pattern = '%{WORD:name} is %{WORD:gender}, %{NUMBER:age} years old and weighs %{NUMBER:weight} kilograms'</span><span id="018d" class="kx jm hp kt b fi lq kz l la lb">#create a GROK object by giving the pattern<br/>pat={"S3_REQUEST_LINE": "(?:%{WORD:verb} %{NOTSPACE:request}(?: HTTP/%{NUMBER:httpversion})?|%{DATA:rawrequest})"}<br/>grok = Grok(pattern,<strong class="kt hq">custom_patterns_dir=pattern_dir_path,custom_patterns=pat</strong>)</span><span id="ccf8" class="kx jm hp kt b fi lq kz l la lb">#use match function to get all the parsed patterns<br/>print grok.match(text)</span></pre><p id="4e29" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们可以使用<strong class="io hq"> custom_patterns_dir </strong>选项提供自定义模式目录，此处目录与此处可见的<a class="ae jk" href="https://github.com/garyelephant/pygrok/tree/master/pygrok/patterns" rel="noopener ugc nofollow" target="_blank">目录相同。</a></p><p id="ceec" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果您需要添加一些模式，那么您可以避免创建目录的开销，并将模式作为键值对在<strong class="io hq"> custom_patterns </strong>字段中传递。</p><p id="bc6a" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我觉得有一些功能可以添加到groks中，比如给出文件路径而不是目录路径，解析完整的文本或不返回任何内容，等等，我将尝试为这个项目做出贡献。</p><p id="11bb" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我希望这篇博客能在解析过程中帮助你。</p><p id="9cf8" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">快乐学习。</p><p id="6d88" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">更多博客请看我的博客<a class="ae jk" href="https://techscouter.blogspot.com/" rel="noopener ugc nofollow" target="_blank"/></p></div></div>    
</body>
</html>