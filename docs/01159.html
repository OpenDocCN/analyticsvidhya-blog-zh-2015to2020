<html>
<head>
<title>JupyterLab + Latex. Holy Duo</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JupyterLab +乳胶。神圣二人组</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/jupyterlab-latex-holy-duo-8c7f89d5a2a4?source=collection_archive---------4-----------------------#2019-10-05">https://medium.com/analytics-vidhya/jupyterlab-latex-holy-duo-8c7f89d5a2a4?source=collection_archive---------4-----------------------#2019-10-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/81c3e7470ada40ad1f1aefe9e4343f78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*65z8AU2t62vMGxqvFEcTog.jpeg"/></div></div></figure><p id="47cb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi jo translated">最近，我遇到了一个非常有趣的任务。基本上，我需要一些Jupyter笔记本，让他们好看的pdf格式。听起来很简单，对吧？嗯，这取决于你对结果是否满意。所以，让我们开始吧。顺便问一下，我有没有提到Jupyter笔记本也有汉字？</p></div><div class="ab cl jx jy gp jz" role="separator"><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc"/></div><div class="hb hc hd he hf"><p id="e5e2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，为了这篇文章，我创建了一个非常简单的Jupyter笔记本，它由一些降价单元格、一些填充空间的无意义文本和一些图表组成，这些都是我直接从Seaborn Gallery示例中获取的。</p><figure class="kf kg kh ki fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ke"><img src="../Images/618b4dfe95f1e456ada1b0d8933746e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OhBd6DmK3SvRMyZ962bcmA.png"/></div></div><figcaption class="kj kk et er es kl km bd b be z dx translated">非常普通的笔记本</figcaption></figure><p id="eab8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以，你们明白了，对吧？现在，让我们看看什么样的标准将笔记本导出为PDF</p><figure class="kf kg kh ki fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kn"><img src="../Images/72e53bbf72e558770c3daa50d0aa4eb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wroV8fgIDP1A7RmkERkAYA.png"/></div></div><figcaption class="kj kk et er es kl km bd b be z dx translated">第一页</figcaption></figure><figure class="kf kg kh ki fd ij er es paragraph-image"><div class="er es ko"><img src="../Images/d80c2c64ec0da02197f9bf906d9af92e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*RtFrkxpq52WbRB6w-qklOA.png"/></div><figcaption class="kj kk et er es kl km bd b be z dx translated">第二页</figcaption></figure><p id="17c8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我们要把这些东西展示给对代码不感兴趣的人，结果会很糟糕。那么，我们该如何改进呢？首先，当你要求使用<strong class="is hj"> nbconvert </strong>模块将笔记本导出为PDF格式时，Jupyter Lab引用了一些内置模板。乳胶模板，如果我没记错的话。所以，让我们打开我们在朱庇特实验室的终端。我们将呼叫指挥部:</p><pre class="kf kg kh ki fd kp kq kr ks aw kt bi"><span id="9521" class="ku kv hi kq b fi kw kx l ky kz">jupyter nbconvert — to=pdf Medium.ipynb</span></pre><figure class="kf kg kh ki fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es la"><img src="../Images/90e92811e4180dd32720c66ef9cdaa0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zXXPmfY0iqHvhMu1tvfrGA.png"/></div></div></figure><p id="2c95" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以，让我们检查结果。</p><figure class="kf kg kh ki fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kn"><img src="../Images/72e53bbf72e558770c3daa50d0aa4eb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wroV8fgIDP1A7RmkERkAYA.png"/></div></div><figcaption class="kj kk et er es kl km bd b be z dx translated">相同的结果</figcaption></figure><p id="1f72" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">他们是一样的。所以，我们已经达到了与标准出口方式相同的质量。让我们通过在代码中添加一些细节来改进它。</p><pre class="kf kg kh ki fd kp kq kr ks aw kt bi"><span id="c5e5" class="ku kv hi kq b fi kw kx l ky kz">jupyter nbconvert — to=pdf — TemplateExporter.exclude_input=True Medium.ipynb</span></pre><figure class="kf kg kh ki fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/3def9f4a9d2d8daad1d9c480cb4cf123.png" data-original-src="https://miro.medium.com/v2/resize:fit:1390/format:webp/1*Tas4AxxDPF0T92TzV6o4pA.png"/></div></figure><figure class="kf kg kh ki fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/5f03b35176f754b0583ca77a7f23bc9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*s0SiZXAFnym-0Ncj47smMA.png"/></div></figure><p id="9f72" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">那就，好多了！我们所有的投入都没有了，这很好。我对seaborn的输出线有点恼火。因此，要解决这个问题，我只需添加“；”在这条线的尽头。</p><figure class="kf kg kh ki fd ij er es paragraph-image"><div class="er es ld"><img src="../Images/ec00a1208ecb775bb70a3d75db585122.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*RnZlzp_9-EXrSdZk6uBc8w.png"/></div></figure><p id="d1f5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您遇到一些输出，比如模块的警告，您可以通过在第一个单元格中添加以下代码来简单地禁用它:</p><pre class="kf kg kh ki fd kp kq kr ks aw kt bi"><span id="824e" class="ku kv hi kq b fi kw kx l ky kz">import warnings<br/>warnings.filterwarnings('ignore')</span></pre><p id="bcab" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">好吧，我们继续。到目前为止，对于大多数用例来说，结果可能是可以的，但是我们会走得更远。现在让我们先把笔记本转换成LATEX格式，而不是pdf格式。</p><pre class="kf kg kh ki fd kp kq kr ks aw kt bi"><span id="4055" class="ku kv hi kq b fi kw kx l ky kz">jupyter nbconvert — to=latex — TemplateExporter.exclude_input=True Medium.ipynb</span></pre><p id="571f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">结果，我们可以看到，在我们的文件夹中出现了两个新对象。Medium.tex和Medium_files。</p><figure class="kf kg kh ki fd ij er es paragraph-image"><div class="er es le"><img src="../Images/7d4b5a01a52e47baf6b7122921cf2a71.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*qBPpXoZXtxR9JiwLoxFwug.png"/></div></figure><p id="6eea" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">介质文件是我们所有的图表，来自位于。png格式。因为，稍后当我们将Medium.tex转换为pdf时，图片将从该文件夹中取出。</p><p id="acf9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要将Medium.tex转换为pdf格式，我们将使用xelatex而不是pdflatex。为什么会这样，我稍后会解释。</p><pre class="kf kg kh ki fd kp kq kr ks aw kt bi"><span id="7ee2" class="ku kv hi kq b fi kw kx l ky kz">xelatex Medium.tex</span></pre><p id="986d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">运行后，我们可以看到，我们在文件夹中创建了更多的文件。</p><figure class="kf kg kh ki fd ij er es paragraph-image"><div class="er es lf"><img src="../Images/34dc751e1290c7114773ea92f3f24c30.png" data-original-src="https://miro.medium.com/v2/resize:fit:248/format:webp/1*cWplvNctoGlCdqGRZlmmTQ.png"/></div></figure><p id="12e8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">除了。LATEX使用所有其他文件来构建最终的pdf。我不会显示结果，它基本上和前面的一样，但我必须包括这一步才能继续。</p><p id="0e62" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当我们启动xelatex时，它使用的是第一部分中包含的信息。tex文件。这个信息是由一些标准的模板提供的，这个模板叫做“文章”，但是让我们来改变它。首先，我们可以搜索*。tplx文件，并将其中一个文件复制到latex_tmpl文件夹中。我把report.tplx放在里面，做了一些调整。</p><pre class="kf kg kh ki fd kp kq kr ks aw kt bi"><span id="2cfd" class="ku kv hi kq b fi kw kx l ky kz">((* block docclass *))<br/>\documentclass{report}<br/>\author{Kejid} % for the title page.<br/>\date{\today} % Use current date.<br/>\usepackage[verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in]{geometry}<br/>\usepackage{fancyhdr}<br/>\fancypagestyle{plain}{}<br/>\pagestyle{fancy}<br/>\renewcommand{\headrulewidth}{0pt}<br/>\lhead{Special for Medium}<br/>\rhead{Right Head}<br/>\rfoot{Right Foot}<br/>\cfoot{\thepage}<br/>\lfoot{Left Foot}<br/>((* endblock docclass *))</span></pre><p id="5283" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们让<strong class="is hj"> nbconvert </strong>使用我们的新模板。</p><pre class="kf kg kh ki fd kp kq kr ks aw kt bi"><span id="9eb8" class="ku kv hi kq b fi kw kx l ky kz">jupyter nbconvert --to=latex --template=./latex_tmpl/report.tplx --TemplateExporter.exclude_input=True Medium.ipynb<br/>xelatex Medium.tex<br/>xelatex Medium.tex</span></pre><p id="4ba6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们运行它两次，因为我们需要为我们的pdf建立适当的目录。</p><figure class="kf kg kh ki fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lg"><img src="../Images/3935598e668252e2293d0152fdaf6734.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yjwl73aWXivjPv66AUYl0w.png"/></div></div></figure><figure class="kf kg kh ki fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/7111fccd16df1690b1bc32ea05a4d89a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gsGncc5Mhvd4hfI0KTskJA.png"/></div></div></figure><figure class="kf kg kh ki fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es li"><img src="../Images/493a5e3db40a8bdc1a1a85fe3377c77a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C2fbJJtQAY_IAjq4FAzpkA.png"/></div></div></figure><p id="5f2e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，正如你所看到的，我们成功地创建了非常好的pdf报告，带有目录中的可点击链接。此外，我们可以修改页眉和页脚或只是让它空着。</p><p id="4c6f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">进行这种转换的最好方法是创建bash脚本，我们所有的命令都包括在内，它向用户询问变量并清除文件夹中不必要的文件。</p></div><div class="ab cl jx jy gp jz" role="separator"><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc"/></div><div class="hb hc hd he hf"><p id="cddb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">好了，现在是额外任务的时候了。我在中国生活了一段时间，遇到了无法翻译汉字的问题。基本上是为了解决这个问题，我更喜欢使用xelatex而不是pdflatex的主要原因是一些latex使用包。因此，要创建相同类型的报告，我们只需要在LATEX模板文件中包含一行代码。在documentclass后面加上:</p><pre class="kf kg kh ki fd kp kq kr ks aw kt bi"><span id="8330" class="ku kv hi kq b fi kw kx l ky kz">\documentclass{report}<br/>\usepackage{ctex}<br/>\author{Kejid} % for the title page</span></pre><p id="09f3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这就行了！</p></div></div>    
</body>
</html>