<html>
<head>
<title>Build your own conversational chatbot in minutes - Part one: RASA-NLU</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在几分钟内建立你自己的对话聊天机器人-第一部分:拉莎-NLU</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/build-your-own-conversational-chatbot-in-minutes-part-one-rasa-nlu-13df39601032?source=collection_archive---------6-----------------------#2020-02-25">https://medium.com/analytics-vidhya/build-your-own-conversational-chatbot-in-minutes-part-one-rasa-nlu-13df39601032?source=collection_archive---------6-----------------------#2020-02-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d0c9ba0609104b1b187eec49b9aba206.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xf_WKdnysNSxa2UIlPBcpg.jpeg"/></div></div></figure><p id="e2b3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">聊天机器人每天都在获得牵引力，它将触及生活几乎所有方面的日子不远了。如果你看到像IBM、脸书、谷歌、微软和亚马逊这样的公司都在广泛地研究它，并建立自己的框架。一些可用于构建聊天机器人的框架有Rasa stack、微软机器人框架、Google Dialogflow等。让我们看看Rasa相对于市场上其他框架的优势。</p><h1 id="1515" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">为什么是拉莎？</h1><p id="7c99" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">RASA stack是一个开源的人工智能工具,作为一个开源框架，它很容易定制。RASA NLU的主要优势在于，您可以访问整个python处理管道，并且可以使用复杂的定制逻辑来扩展它。事实上，客户不想分享他们的数据，大多数工具都在云平台<strong class="is hj">上。您可以在服务器或环境内部构建、部署或托管Rasa，并对其进行完全控制。</strong></p><h1 id="9fc4" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated"><strong class="ak">Rasa——聊天机器人解决方案</strong></h1><p id="6947" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">Rasa为您提供了一套在本地桌面上构建完整聊天机器人的工具。</p><p id="a108" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">他们的旗舰工具是:</p><ul class=""><li id="7fd3" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">rasa NLU——一种自然语言理解工具，接受用户输入，推断用户意图，提取可用实体。</li><li id="06ca" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">Rasa核心——一个对话管理解决方案，它试图建立一个概率模型，该模型根据之前的一组用户输入来决定要执行的一组操作。</li></ul><p id="fd38" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">构建聊天机器人时常用的一些关键字是:</p><ul class=""><li id="468d" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">意图<strong class="is hj"> </strong> —将其视为用户输入的目的或目标。如果一个用户说，“伦敦的天气如何”，那么他的意图将是找到“伦敦的天气”。</li><li id="57aa" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">实体—这是可以从用户输入中提取的有用信息。从前面的例子中，我们知道我们的目的是查找天气，但是是在哪个位置呢？如果我们提取“伦敦”作为一个实体，我们可以在“伦敦”上执行操作。</li><li id="77b8" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">动作——动作是由机器人执行的操作，或者询问更多细节以获得所有实体，或者与一些API集成，或者查询数据库以获得/保存一些信息。</li><li id="d049" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">故事——这些是用户和机器人之间的示例交互，根据捕获的意图和执行的动作来定义。如果你得到一个带有/不带有实体的用户输入，开发者可以告诉你该怎么做。从上面的例子来看，用户的意图是找到“伦敦的天气”，但没有提到是哪一天，因此缺少了一个实体。这将使机器人的下一个行动。</li></ul><p id="a5dd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们知道了一些基础知识，让我们开始一些实际的行动:)</p><p id="d191" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这篇文章中，我们将关注Rasa自然语言理解，包括意图分类和实体提取。</p><h1 id="3ef4" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated"><strong class="ak"> Rasa自然语言理解(NLU) </strong>:</h1><p id="b171" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">让我们看看下面的例子来建立一个机器人</p><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lf"><img src="../Images/4f50851b68c8495737de7e8f8e7bb48f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yjt8hCStIXvXOPVeeNDe7w.png"/></div></div></figure><p id="5201" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">用户输入查询“伦敦的天气如何”，Rasa NLU预测给定输入查询的意图“通知”(置信度94%)和实体“伦敦”(置信度98%)。Rasa核心用于使机器人能够响应用户输入。在这个例子中，机器人的下一个动作是提供“伦敦”的天气信息。因此，机器人回答“现在是晴天，10度”。</p><p id="7312" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">由于我们关注的是拉莎·NLU，我们将在本帖中讨论以下主题:</p><ul class=""><li id="7c8c" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">Rasa安装和设置</li><li id="9a26" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">Rasa-NLU教练机安装</li><li id="dde2" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">生成训练数据</li><li id="386f" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">Rasa配置文件</li><li id="abcc" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">培训rasa模型</li></ul><h2 id="a70f" class="lk jp hi bd jq ll lm ln ju lo lp lq jy jb lr ls kc jf lt lu kg jj lv lw kk lx bi translated">Rasa安装和设置:</h2><p id="6eaa" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">让我们首先进行环境设置，为此我们需要安装python。我正在使用conda来设置Python的虚拟环境，并强烈推荐创建一个，因为在一个地方安装所有的Rasa会很好。</p><pre class="lg lh li lj fd ly lz ma mb aw mc bi"><span id="7620" class="lk jp hi lz b fi md me l mf mg">conda create -n rasa-chatbot python=3.6</span><span id="bd93" class="lk jp hi lz b fi mh me l mf mg">conda activate rasa-chatbot</span></pre><p id="f20a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们安装rasa包:</p><pre class="lg lh li lj fd ly lz ma mb aw mc bi"><span id="b52e" class="lk jp hi lz b fi md me l mf mg">pip install rasa</span></pre><p id="23be" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将安装所有rasa依赖项，包括rasa-nlu和rasa-core。</p><pre class="lg lh li lj fd ly lz ma mb aw mc bi"><span id="df7c" class="lk jp hi lz b fi md me l mf mg">python -m spacy download en</span></pre><p id="07d9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="mi">由于我的聊天机器人的语言是英语，我将使用spacy </em>下载英语词汇</p><h2 id="b321" class="lk jp hi bd jq ll lm ln ju lo lp lq jy jb lr ls kc jf lt lu kg jj lv lw kk lx bi translated">Rasa-NLU教练机安装:</h2><p id="417d" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">Rasa-NLU-教练是一个用户界面，有助于产生训练数据的Rasa NLU模型。这是一个Javascript应用程序，我们需要节点和NPM。</p><p id="de66" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">安装https://nodejs.org/en/T7<a class="ae mj" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">的最新版本NodeJs和NPM</a></p><pre class="lg lh li lj fd ly lz ma mb aw mc bi"><span id="7c50" class="lk jp hi lz b fi md me l mf mg">npm i -g rasa-nlu-trainer</span></pre><p id="2eee" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="mi">上面的命令应该运行在终端你的项目目录下。这将安装rasa-nlu-trainer。</em></p><h2 id="38af" class="lk jp hi bd jq ll lm ln ju lo lp lq jy jb lr ls kc jf lt lu kg jj lv lw kk lx bi translated">生成训练数据:</h2><p id="9d83" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">包安装完成后，让我们创建一个项目目录。我把我的项目命名为rasa-chatbot。我们在其中创建数据目录和data.json文件。我们还应该创建配置文件' config_spacy.json '和python文件' nlu_model.py '</p><pre class="lg lh li lj fd ly lz ma mb aw mc bi"><span id="0529" class="lk jp hi lz b fi md me l mf mg">mkdir rasa-chatbot<br/>cd rasa-chatbot<br/>mkdir data<br/>echo 'config'&gt;config_spacy.json<br/>echo 'nlu_model'&gt;nlu_model.py<br/>cd data<br/>echo 'training_data'&gt;data.json</span></pre><p id="222b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有两种方法可以为模型创建训练数据:</p><ul class=""><li id="9d19" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">在data.json文件中创建json数据</li></ul><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="mk ml l"/></div></figure><ul class=""><li id="8d98" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">使用Rasa-NLU-Trainer UI创建json数据</li></ul><p id="20d5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您还可以使用拉莎-NLU-训练器用户界面来生成模型的训练数据。这个UI可以向您项目的客户公开，以添加新的培训示例，他们可以看到机器人没有工作。</p><pre class="lg lh li lj fd ly lz ma mb aw mc bi"><span id="1722" class="lk jp hi lz b fi md me l mf mg">cd data<br/>rasa-nlu-trainer</span></pre><p id="c4c1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">拉莎-NLU-教练用户界面可用于添加新的例子，可以指定的意图和实体可以在用户界面上突出。此用户界面在“data.json”文件中生成了训练数据。</p><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mm"><img src="../Images/c74868e42827da5e456a93738700274a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a02FRFV0phPzxa0hLVlnLA.png"/></div></div></figure><h2 id="ebe7" class="lk jp hi bd jq ll lm ln ju lo lp lq jy jb lr ls kc jf lt lu kg jj lv lw kk lx bi translated">Rasa配置文件</h2><p id="24c9" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">配置文件对于训练rasa模型非常重要。你可以在<a class="ae mj" href="https://rasa.com/docs/" rel="noopener ugc nofollow" target="_blank">文档</a>中了解更多信息</p><p id="baf6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将在配置文件中指定三件事:</p><ol class=""><li id="0296" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn mn kx ky kz bi translated">管道——它指定使用什么特征提取器来处理文本消息并提取必要的信息。Rasa在这里提供了更多关于管道<a class="ae mj" href="https://rasa.com/docs/rasa/nlu/choosing-a-pipeline/" rel="noopener ugc nofollow" target="_blank">的信息</a></li><li id="f746" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn mn kx ky kz bi translated">路径——我们指定要存储训练好的拉沙-NLU模型的路径</li><li id="9d27" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn mn kx ky kz bi translated">数据——我们指定存储训练数据的目录</li></ol><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="mk ml l"/></div></figure><h2 id="afe2" class="lk jp hi bd jq ll lm ln ju lo lp lq jy jb lr ls kc jf lt lu kg jj lv lw kk lx bi translated">培训Rasa模型</h2><p id="b3d5" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">现在我们有了足够的数据，让我们继续训练模型</p><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="mk ml l"/></div></figure><p id="8b3f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里，train_nlu()函数训练Rasa-NLU模型并将其存储在/models/nlu目录中，run_nlu()函数使用训练好的Rasa-NLU模型来预测意图并提取新用户查询的实体。输出如下所示:</p><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="mk ml l"/></div></figure><p id="aba3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">即使我们没有提供“此刻柏林的天气如何？”的例子机器人能够猜测意图并提取值为“berlin”的实体“location”。用大量数据训练模型总是好的，这样它就可以从中学习。</p><p id="5216" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们已经成功地完成了对机器人的训练，它能够理解自然语言，但我们仍然需要建立对话，以便机器人能够响应消息。</p><p id="370f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我将很快发布如何使用Rasa-core来构建对话，以便bot可以响应用户输入。</p><p id="303c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Rasa社区引入了<strong class="is hj"> RasaX </strong>，帮助你利用实时对话来改善你的助手。你可以在这里了解更多<a class="ae mj" href="https://rasa.com/docs/rasa-x/" rel="noopener ugc nofollow" target="_blank"/></p><p id="9d9c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我强烈建议通读每一节，并阅读Rasa文档以更好地理解它。以防你需要这里的代码是<a class="ae mj" href="https://github.com/Vaishnavikodai/rasa-chatbot" rel="noopener ugc nofollow" target="_blank"> Github库</a></p><p id="ead1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="mi">请分享您的想法、反馈、评论和澄清。</em></p><p id="1402" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="mi">感谢阅读！</em> ❤</p></div></div>    
</body>
</html>