<html>
<head>
<title>How to get your favourite artists’ music data from Spotify using the Python library Spotipy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Python库Spotipy从Spotify获取您喜爱的艺术家的音乐数据</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-get-your-favourite-artist-music-data-from-spotify-using-the-python-library-spotipy-d5c25065c91e?source=collection_archive---------5-----------------------#2020-04-23">https://medium.com/analytics-vidhya/how-to-get-your-favourite-artist-music-data-from-spotify-using-the-python-library-spotipy-d5c25065c91e?source=collection_archive---------5-----------------------#2020-04-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/2382ea22367a4c0f1f6c5591c76ad390.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MyKc5S3r-n8ER2kwZUHh7g.jpeg"/></div></div></figure><div class=""/><div class=""><h2 id="07a7" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh dx translated">图书馆的名字选得再好不过了</h2></div><p id="cec7" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">你有没有想过门乐队出了多少张专辑？或者想知道披头士乐队<em class="ke">、</em>的<em class="ke">乐队【塞根特胡椒孤独之心俱乐部】发行的确切日期？或者也许你只是一个数据音乐(或音乐数据)极客，想知道如何从Spotify API中检索音乐数据<strong class="jk hu">。</strong></em></p><p id="9f5c" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">不管是什么原因，在本文中，我将制作一个如何使用S <strong class="jk hu"> potipy </strong>的基础教程，这是Spotify Web API的轻量级Python库。特别是，我将解释你如何创建一个程序来<strong class="jk hu">检索关于一个艺术家，他们的专辑和他们的歌曲的数据，并把这些信息放入熊猫数据框，准备进行数据分析！</strong></p><h2 id="f0d4" class="kf kg ht bd kh ki kj kk kl km kn ko kp jr kq kr ks jv kt ku kv jz kw kx ky kz bi translated">1.Spotify API入门</h2><p id="4b8f" class="pw-post-body-paragraph ji jj ht jk b jl la iu jn jo lb ix jq jr lc jt ju jv ld jx jy jz le kb kc kd hb bi translated">对于那些不熟悉的人来说，API是应用程序编程接口的缩写，它是一种软件中介，允许两个应用程序相互交互。</p><p id="8964" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">Spotify API可以被视为用户应用程序和Spotify平台之间的‘桥梁’(如下图所示)。特别是，API提供了几个端点，直接从Spotify数据目录返回关于音乐艺术家、专辑和曲目的<a class="ae lf" href="https://developer.spotify.com/documentation/web-api/reference/object-model/" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu"> JSON元数据</strong> </a> <strong class="jk hu"> </strong>。要了解更多关于API和不同类型的端点的信息，我强烈推荐看一看API <a class="ae lf" href="https://developer.spotify.com/documentation/" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu">文档</strong> </a> <strong class="jk hu">。</strong></p><figure class="lh li lj lk fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lg"><img src="../Images/e77c08312ff84e632360458bde899028.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xt_TlsuG3FtSy22WPrqmNg.png"/></div></div><figcaption class="ll lm et er es ln lo bd b be z dx translated">图片来自Spotify API文档页面</figcaption></figure><p id="9da8" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">因此，为了从Spotify中提取音乐数据，首先你必须建立一个Spotify开发者账户，并创建一个应用程序。这里的 可以做<a class="ae lf" href="https://developer.spotify.com/dashboard/login" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu">是一个非常简单快捷的过程。</strong></a></p><h2 id="2cf8" class="kf kg ht bd kh ki kj kk kl km kn ko kp jr kq kr ks jv kt ku kv jz kw kx ky kz bi translated">2.身份验证设置和令牌</h2><p id="cd11" class="pw-post-body-paragraph ji jj ht jk b jl la iu jn jo lb ix jq jr lc jt ju jv ld jx jy jz le kb kc kd hb bi translated">一旦你设置了你的账户和应用程序，你就必须获得你的凭证才能连接到Spotify平台。特别是，你必须获得你的<strong class="jk hu">客户ID </strong>、你的<strong class="jk hu">客户秘密</strong>，以及你的<strong class="jk hu">用户名</strong>来请求允许你检索音乐数据的令牌。</p><figure class="lh li lj lk fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lp"><img src="../Images/86ae1705b88c10576652eaaa7f75a2e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h-rhmLGwhrLZi2AnT0WbXA.png"/></div></div></figure><p id="6dfe" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">前两个代码可以在你的应用仪表板中找到(见上图)，而你的用户名可以在你的<strong class="jk hu">个人资料链接</strong>的最后几个字符中找到(见下图，获取链接的简单方法)。</p><figure class="lh li lj lk fd hk er es paragraph-image"><div class="er es lq"><img src="../Images/2c1ef44c2a89cea902a76a51d8d45f16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/format:webp/1*shQfIT1rIRFyjyr4900MhQ.png"/></div></figure><p id="893e" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">幸运的是，Spotipy提供了一个实用方法<code class="du lr ls lt lu b">util.prompt_for_user_token</code>来简化这个过程，允许您将应用凭证作为参数直接传递给方法:</p><pre class="lh li lj lk fd lv lu lw lx aw ly bi"><span id="9a69" class="kf kg ht lu b fi lz ma l mb mc">util.prompt_for_user_token(username,<br/>                         scope,<br/>                         client_id='your-spotify-client-id',<br/>                         client_secret='your-spotify-client secret',<br/>                         redirect_uri='your-app-redirect-url')</span></pre><p id="b20f" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">另外两个参数是scope和redicrect_uri。Spotify要求前者确保使用第三方应用的用户只分享他们选择分享的信息。你可以在这里  <strong class="jk hu">了解更多关于scopes <a class="ae lf" href="https://developer.spotify.com/documentation/general/guides/scopes/" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu">。<em class="ke"> </em> </strong>前者相当于一个有效的URL，Spotify认证服务器会在成功登录后重定向到该URL。</a></strong></p><h2 id="eb56" class="kf kg ht bd kh ki kj kk kl km kn ko kp jr kq kr ks jv kt ku kv jz kw kx ky kz bi translated">3.提取音乐数据</h2><p id="6692" class="pw-post-body-paragraph ji jj ht jk b jl la iu jn jo lb ix jq jr lc jt ju jv ld jx jy jz le kb kc kd hb bi translated">一旦你有了令牌，你就准备好获取音乐数据了！我强烈建议您阅读Spotipy <a class="ae lf" href="https://spotipy.readthedocs.io/en/2.11.2/" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu">文档指南</strong> </a>，这样您就可以熟悉它的简单语法。此外，它还包含了如何使用不同端点请求数据的多个示例。</p><p id="be67" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">显然，在做任何事情之前，确保您已经安装了Spotipy包。通常，这可以使用pip轻松完成:</p><pre class="lh li lj lk fd lv lu lw lx aw ly bi"><span id="5fbb" class="kf kg ht lu b fi lz ma l mb mc">pip install spotipy</span></pre><p id="5110" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">从Ian Annase在他的<strong class="jk hu"> </strong> <a class="ae lf" href="https://www.youtube.com/watch?v=tmt5SdvTqUI" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu"> youtube教程中使用的代码中获得灵感，我编写了一个程序，它使用Spotify浏览器功能来搜索艺术家，并直接显示该艺术家的整个唱片目录，包括每张专辑的曲目。同时，音乐数据存储在三个独立的熊猫数据帧中，第一个包含关于搜索的艺术家的信息，第二个包含关于专辑的信息，第三个包含关于曲目的信息。我保留了项目的Spotify ids，以便在表格需要连接时更容易使用。</strong></a></p><p id="8e0a" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">下面你可以看到代码的主体:</p><figure class="lh li lj lk fd hk"><div class="bz dy l di"><div class="md me l"/></div></figure><p id="8e7b" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">举个例子，这是我搜索<a class="ae lf" href="https://en.wikipedia.org/wiki/Rosal%C3%ADa_(singer)" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu">罗萨莉娅</strong> </a> <strong class="jk hu">，</strong>当前拉丁乐坛最杰出的艺术家之一:</p><pre class="lh li lj lk fd lv lu lw lx aw ly bi"><span id="65b1" class="kf kg ht lu b fi lz ma l mb mc">Artist's name:  rosalia</span><span id="3fdb" class="kf kg ht lu b fi mf ma l mb mc">ROSALÍA</span><span id="1470" class="kf kg ht lu b fi mf ma l mb mc">ALBUM: El Mal Querer<br/>1: MALAMENTE - Cap.1: Augurio<br/>2: QUE NO SALGA LA LUNA - Cap.2: Boda<br/>3: PIENSO EN TU MIRÁ - Cap.3: Celos<br/>4: DE AQUÍ NO SALES - Cap.4: Disputa<br/>5: RENIEGO - Cap.5: Lamento<br/>6: PRESO - Cap.6: Clausura<br/>7: BAGDAD - Cap.7: Liturgia<br/>8: DI MI NOMBRE - Cap.8: Éxtasis<br/>9: NANA - Cap.9: Concepción<br/>10: MALDICIÓN - Cap.10: Cordura<br/>11: A NINGÚN HOMBRE - Cap.11: Poder<br/><br/>ALBUM: Los Ángeles<br/>12: Si Tú Supieras Compañero<br/>13: De Plata<br/>14: Nos Quedamos Solitos<br/>15: Catalina<br/>16: Día 14 De Abril<br/>17: Que Se Muere Que Se Muere<br/>18: Por Mi Puerta No Lo Pasen<br/>19: Te Venero<br/>20: Por Castigarme Tan Fuerte<br/>21: La Hija De Juan Simón<br/>22: El Redentor<br/>23: I See A Darkness<br/><br/>ALBUM: Dolerme<br/>24: Dolerme<br/><br/>ALBUM: Juro Que<br/>25: Juro Que<br/><br/>ALBUM: A Palé<br/>26: A Palé</span><span id="3157" class="kf kg ht lu b fi mf ma l mb mc">...</span></pre><p id="1549" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">该程序以while循环格式构建，因此您可以搜索各种艺术家，而无需重新运行该程序。一旦完成，您只需打破循环并检查数据库的内容。下面你可以找到我的搜索结果:</p><figure class="lh li lj lk fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mg"><img src="../Images/73f47107a2439943ae60cdd4a4e6b565.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F4tvJan1sfFM4BI28OKmfA.png"/></div></div></figure><h2 id="d0c3" class="kf kg ht bd kh ki kj kk kl km kn ko kp jr kq kr ks jv kt ku kv jz kw kx ky kz bi translated">4.结论</h2><p id="1969" class="pw-post-body-paragraph ji jj ht jk b jl la iu jn jo lb ix jq jr lc jt ju jv ld jx jy jz le kb kc kd hb bi translated">本教程旨在帮助您理解Spotify API以及如何使用Python库Spotipy从Spotify平台检索音乐数据。如果你对代码的细节感兴趣，可以看看我的<a class="ae lf" href="https://github.com/jcanalesluna/music_data_spotipy/blob/master/extract_data_spotify.ipynb" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu"> Github库</strong> </a>。希望对你有帮助！</p></div></div>    
</body>
</html>