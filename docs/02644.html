<html>
<head>
<title>How to select the appropriate correlation method?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何选择合适的相关方法？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-select-the-appropriate-correlation-method-560e750dacd8?source=collection_archive---------5-----------------------#2019-12-27">https://medium.com/analytics-vidhya/how-to-select-the-appropriate-correlation-method-560e750dacd8?source=collection_archive---------5-----------------------#2019-12-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="30a1" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">皮尔逊相关系数及其替代方法。</h1><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/e904ab077cf8c7d3884c8153c7b93fa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*c8pliUKrRDQu1NVL.jpg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">各种来源的回归笑话</figcaption></figure><p id="0b3c" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">当我在阅读一篇关于评估自动文本摘要模型与人工评估相比的性能的过程的科学论文时，基于相关性分析，我不断地问自己，哪种方法比其他方法更合适，例如，我应该何时使用Pearson而不是Spearman，Kendall而不是Pearson或Kendall而不是Spearman？在对这个问题做了大量研究后，没有直接的答案，这取决于数据。</p><p id="b044" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">我会试着模拟他们的实验，虽然简化了还有很多东西要理解和学习。我想测试自动评估分级系统和人工评估分级系统之间的关联强度。换句话说，自动文本评估足够好，所以它接近人工评估。如何设置实验来验证两个模拟变量中的统计关联？</p><p id="aee7" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">我有什么选择？我想到的第一个也是最熟悉的方法是使用皮尔逊积差相关系数(PPMCC)或皮尔逊相关系数，或简称为皮尔逊相关系数。它属于参数相关方法，并假设样本是从它所代表的总体中随机选取的，并且总体中数据的分布具有已知的基础分布。它是两个变量X和y之间线性相关性的度量。值介于-1和1之间，而值0仅仅意味着两个变量之间没有任何线性关系。但是我们不能假设他们是独立的！另一方面，如果变量X和Y是独立的，那么相关系数将是0。</p><p id="7e33" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">我的下一个选择是尝试一些等级相关方法。当数据不满足某些假设时，通常使用它们:大样本量、正态性、线性和同方差。因此，当需要在参数和非参数相关方法之间进行选择时，尝试根据这些数据属性进行回答:正态性、线性和同方差性。</p><p id="cf6d" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">因为没有假设值的分布，所以等级相关方法被称为无分布相关或非参数相关。我首先介绍的是使用最广泛的Spearman秩相关系数或Spearman的ρ (rho ),它评估两个连续或有序变量之间单调关系的强度和方向。在单调关系中，变量往往一起变化，但不一定以恒定的速率变化。斯皮尔曼相关系数是基于每个变量的排名值，而不是原始数据。值也位于-1和1之间，值0对应于不存在的或随机的关系。</p><p id="98b8" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">1938年，英国统计学家莫里斯·肯德尔通过使用等级之间的优先关系而不是等级本身，引入了一种不同的等级表示法。它通常被称为肯德尔τ(τ)系数。在等级相关法中，它与斯皮尔曼的属于同一类。肯德尔的τ通常比斯皮尔曼的ρ更可取，因为它是相应总体参数的更好估计，并且其标准误差是已知的。</p><p id="3e20" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">用散点图检查变量之间的关系总是一个好主意。考虑下面的例子，其中Pearson和Spearman系数都为零，尽管这些变量之间存在很强的关系，但它违反了线性或单调关系的假设。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kr"><img src="../Images/37b2d509a917c5702a2c314b56f78d3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:320/format:webp/0*QU9khln5Q5e5CeeU.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">皮尔逊和斯皮尔曼系数都为零</figcaption></figure><h1 id="de9a" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">我倾向于肯德尔的τ</h1><p id="4869" class="pw-post-body-paragraph jt ju hi jv b jw ks jy jz ka kt kc kd ke ku kg kh ki kv kk kl km kw ko kp kq hb bi translated">肯德尔τ值:通常比斯皮尔曼ρ相关值小。基于和谐对和不和谐对的计算。对错误不敏感。样本量越小，p值越准确。</p><p id="4796" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">Spearman的ρ:通常比Kendall的τ值大。基于偏差的计算。对数据中的错误和差异更加敏感。</p><p id="5240" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">两者的计算复杂度都是O(nlogn)。</p><h1 id="d4e2" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">我们如何表达这个测试的零假设？</h1><p id="c915" class="pw-post-body-paragraph jt ju hi jv b jw ks jy jz ka kt kc kd ke ku kg kh ki kv kk kl km kw ko kp kq hb bi translated">在假设检验中，相关性分析可用于检验关联的强度。无效假设是所研究的变量之间没有关联。因此，目的是调查潜在变量的可能联系。</p><p id="fe0a" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">让我们形成零假设</p><p id="c050" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">H0:自动文本摘要评分和人工评估评分之间没有相关性。</p><p id="f08f" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">另一个假设是</p><p id="9bfe" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">H1:自动文本摘要分级和人工评估分级是相关的。</p><h1 id="990f" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">模拟数据集</h1><p id="4482" class="pw-post-body-paragraph jt ju hi jv b jw ks jy jz ka kt kc kd ke ku kg kh ki kv kk kl km kw ko kp kq hb bi translated">实验数据集由8个模拟的人类评估者组成，他们提供他们的评分，该评分被平均到150个摘要的<em class="kx">响应性得分</em>和自动文本评估系统(1级)作为<em class="kx">自动得分</em>。</p><p id="c3c7" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">每个评估者的分数是从均匀分布中采样的，并且<em class="kx">自动得分</em>也是从均匀分布中以相等或更严格的间隔采样的。因此，通过添加一些额外的权重因子，automated_score的间隔取决于评估者<em class="kx">responsibility _ score(</em>平均分数)，从而允许在距离responsibility _ score预定义的距离处进行采样。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ky"><img src="../Images/f9de804f9cc9d582d3cf0f414fc69e07.png" data-original-src="https://miro.medium.com/v2/resize:fit:798/format:webp/1*B3b7xt-h16NSxvm_rjr2rw.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">反应性和自动评分分布的配对图</figcaption></figure><h1 id="3818" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">假设解析</h1><p id="66f5" class="pw-post-body-paragraph jt ju hi jv b jw ks jy jz ka kt kc kd ke ku kg kh ki kv kk kl km kw ko kp kq hb bi translated">在大多数情况下，这些相关方法的结果非常接近，并且总是会得出相同的结论，但是当出现差异时，解释较低值可能更安全。让我们来看一个快照——这很有趣，是上面例子中的相关性度量</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kz"><img src="../Images/fae8edd47d43d2c64cada20ad4a27d49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*dBhOkwBuXznVrTEAVv16Sw.png"/></div></figure><p id="ed17" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">我们能确定这两个分数之间是否存在相关性吗？嗯，也许吧，但是很难说。通过相关性本身，你可以确定两个变量一起变化的程度。现在让我们看看回归。相关性是我们回归所需要的一部分。但是我们还需要知道每个变量通过标准差分别变化了多少，以及我们应该在哪里画线，即截距。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es la"><img src="../Images/7614303d1fe3580cd8ee4ac45c159b18.png" data-original-src="https://miro.medium.com/v2/resize:fit:728/format:webp/1*PB_eV8yqPiyKMvp3FpwXTw.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">线性回归方程</figcaption></figure><p id="1d49" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">现在让我们试着拟合一条线性回归线。为了定量评估线性回归线有多好，我们可以计算R平方或R值。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lb"><img src="../Images/2bdabbf1201ab98ae6d67ae7812e65c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/1*odQO6tfKYxJ_KkbR9haAGw.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">线性回归的Python代码</figcaption></figure><p id="c042" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">R的值是0.0655，斜率b是-0.1649，截距a是1.0788，所以现在我们已经完全定义了一条线。R的值是一个好的值吗…或者仅仅比猜测好？嗯，也许吧。简单说明一下，当线性回归线中没有约束时(例如，不强制截距具有特定值)，R是皮尔逊相关系数的平方，适用于这种情况。</p><p id="674e" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">下图是上一次回归的残差图。残差图通常用于发现回归问题。这个数据集适合回归吗？<em class="kx">记住，我们已经提到了皮尔逊相关系数(属于参数相关方法)的先决条件，即正态性、线性和同方差性。</em>有问题数据集的一些属性包括:</p><ul class=""><li id="2d73" class="lc ld hi jv b jw jx ka kb ke le ki lf km lg kq lh li lj lk bi translated"><a class="ae ll" href="https://www.statisticshowto.datasciencecentral.com/heteroscedasticity-simple-definition-examples/" rel="noopener ugc nofollow" target="_blank">异方差</a>数据(离线距离变化很大的点)。</li><li id="6264" class="lc ld hi jv b jw lm ka ln ke lo ki lp km lq kq lh li lj lk bi translated">非线性相关的数据。</li><li id="c936" class="lc ld hi jv b jw lm ka ln ke lo ki lp km lq kq lh li lj lk bi translated">带有<a class="ae ll" href="https://www.statisticshowto.datasciencecentral.com/find-outliers/" rel="noopener ugc nofollow" target="_blank">异常值</a>的数据集。</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lr"><img src="../Images/b154a80986351bc14274b82c45fbc596.png" data-original-src="https://miro.medium.com/v2/resize:fit:870/format:webp/1*x9s2ooVQwLv4TA5gVpSMMA.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">残差图</figcaption></figure><p id="7643" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">似乎在相应的剩余图中存在违反同方差的情况。因此，我倾向于使用肯德尔的τ作为该数据中更可靠的相关方法。</p><h1 id="df98" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">我能更正式地解释异方差的存在吗？</h1><p id="07f8" class="pw-post-body-paragraph jt ju hi jv b jw ks jy jz ka kt kc kd ke ku kg kh ki kv kk kl km kw ko kp kq hb bi translated">异方差性可以通过使用残差与拟合值图、查看散点图(如果存在圆锥形，则存在异方差性)或使用Bruesch-Pagan、Cook-Weisberg检验或White general检验等统计检验进行检验。</p><p id="a038" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">同方差假设是线性回归的一个重要假设。如果违反了这个假设，那么标准误差将会有偏差。标准误差用于进行显著性检验，并计算置信区间。</p><p id="f082" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">我的视觉假设是正确的吗，即存在异方差？</p><p id="d66f" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">在这个例子中，我将使用Bruesch-Pagan统计测试</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ls lt l"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">布鲁士-帕甘统计测试的Python代码</figcaption></figure><p id="9d20" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">无效假设是</p><p id="27ff" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">H0:不存在异方差</p><p id="bcb5" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">另一个假设是</p><p id="be4c" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">H1:异方差存在</p><p id="ec48" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">运行测试并获得测试结果，我验证了异方差存在于99%的置信区间——测试是显著的，因此我们拒绝零假设。这个测试的p值是0.0003463。</p><p id="0adf" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">所以<em class="kx">肯德尔的τ</em>是最适合这个数据的相关方法。</p></div></div>    
</body>
</html>