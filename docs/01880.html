<html>
<head>
<title>How I built my first chatbot for Slack using Dialogflow and Node.js in Minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何在几分钟内使用Dialogflow和Node.js为Slack构建我的第一个聊天机器人</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-i-built-my-first-chatbot-for-slack-using-dialogflow-and-node-js-in-minutes-9ce7e5b81c8c?source=collection_archive---------7-----------------------#2019-11-19">https://medium.com/analytics-vidhya/how-i-built-my-first-chatbot-for-slack-using-dialogflow-and-node-js-in-minutes-9ce7e5b81c8c?source=collection_archive---------7-----------------------#2019-11-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="f7a5" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用Dialogflow创建聊天机器人的简单指南。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/945bafcdac597ab166d0d68539e5a446.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bOSw7BGD5LFntYJdw__w4A.jpeg"/></div></div></figure></div><div class="ab cl jj jk gp jl" role="separator"><span class="jm bw bk jn jo jp"/><span class="jm bw bk jn jo jp"/><span class="jm bw bk jn jo"/></div><div class="hb hc hd he hf"><p id="b471" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">构建您的第一个货币转换器聊天机器人，并部署在Slack。</p><h1 id="3b69" class="km kn hi bd ko kp kq kr ks kt ku kv kw io kx ip ky ir kz is la iu lb iv lc ld bi translated">介绍</h1><p id="0807" class="pw-post-body-paragraph jq jr hi js b jt le ij jv jw lf im jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">如果你来这里是因为你想创建你的第一个聊天机器人。或者可能是因为您已经构建了一个，您想用NLP改进您聊天机器人的响应。那你来对地方了。</p><p id="5826" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">聊天机器人是一种可以通过聊天界面与人类互动的计算机程序，旨在使用人工智能模拟人类。</p><p id="6d76" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在今天存在的数以千计的聊天机器人中，最著名的是Siri、Alexa、Cortana……事实上，机器人不仅有助于我们计划我们的一天和听音乐。它们越来越多地在广泛的行业中实施，并被公司引入市场和与客户沟通。他们甚至可以更进一步，建议你下一步要做什么。</p><p id="8948" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">简而言之，机器人可以负责以前消耗大量资源的数据收集、管理和例行分析。</p><p id="1b13" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在本文中，我将指导您如何在几分钟内使用Dialogflow构建您的第一个聊天机器人，并将其部署在Slack上。我将把这个机器人叫做CurrencyBot。</p><h1 id="e2de" class="km kn hi bd ko kp kq kr ks kt ku kv kw io kx ip ky ir kz is la iu lb iv lc ld bi translated">目录</h1><ol class=""><li id="6e8e" class="lj lk hi js b jt le jw lf jz ll kd lm kh ln kl lo lp lq lr bi translated">基于自然语言处理的聊天机器人平台比较</li><li id="b2a0" class="lj lk hi js b jt ls jw lt jz lu kd lv kh lw kl lo lp lq lr bi translated">基本的理解力</li><li id="c41f" class="lj lk hi js b jt ls jw lt jz lu kd lv kh lw kl lo lp lq lr bi translated">对话流集成</li><li id="756d" class="lj lk hi js b jt ls jw lt jz lu kd lv kh lw kl lo lp lq lr bi translated">构建了一个Webhook来使用Dialogflow上的fulfillement功能</li><li id="fc89" class="lj lk hi js b jt ls jw lt jz lu kd lv kh lw kl lo lp lq lr bi translated">使用Ngrok设置代理服务器</li><li id="98ce" class="lj lk hi js b jt ls jw lt jz lu kd lv kh lw kl lo lp lq lr bi translated">让我们的聊天机器人活起来(集成Slack上的机器人)</li></ol><h1 id="b75a" class="km kn hi bd ko kp kq kr ks kt ku kv kw io kx ip ky ir kz is la iu lb iv lc ld bi translated">基于自然语言处理的聊天机器人平台比较</h1><p id="7981" class="pw-post-body-paragraph jq jr hi js b jt le ij jv jw lf im jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">我们对聊天机器人及其重要性有了一个基本的了解。现在的问题是'<em class="lx">'我可以在哪里以及如何建立这些聊天机器人？'</em> <br/>市面上有几种平台可以用来构建聊天机器人。分别是Dialogflow，wit.ai，Rasa，Amazon Lex等等。<br/> <br/>以下部分讨论了其中的一些平台:</p><h2 id="8a87" class="ly kn hi bd ko lz ma mb ks mc md me kw jz mf mg ky kd mh mi la kh mj mk lc ml bi translated">1.对话流:</h2><p id="e5b8" class="pw-post-body-paragraph jq jr hi js b jt le ij jv jw lf im jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated"><a class="ae mm" href="https://dialogflow.com/" rel="noopener ugc nofollow" target="_blank"> Dialogflow </a>(曾被称为Api.ai)。2016年被谷歌收购。该平台通过谷歌助手和其他消息应用程序和设备与用户联系。</p><p id="9c6b" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated"><strong class="js hj">优点</strong></p><ul class=""><li id="ee32" class="lj lk hi js b jt ju jw jx jz mn kd mo kh mp kl mq lp lq lr bi translated">很有用:不用安装，马上上手。</li><li id="3b66" class="lj lk hi js b jt ls jw lt jz lu kd lv kh lw kl mq lp lq lr bi translated">这很简单:Dialogflow包含许多预构建的代理，激活它们轻而易举。</li><li id="5a1f" class="lj lk hi js b jt ls jw lt jz lu kd lv kh lw kl mq lp lq lr bi translated">它是集成的:你可以连接你喜欢的平台，如脸书，Twitter，Slack，Telegram等…只需点击一下。</li><li id="b84c" class="lj lk hi js b jt ls jw lt jz lu kd lv kh lw kl mq lp lq lr bi translated">多语言(它可以识别超过15种语言)。</li><li id="6477" class="lj lk hi js b jt ls jw lt jz lu kd lv kh lw kl mq lp lq lr bi translated">你会很高兴知道它是完全免费的。</li></ul><p id="7326" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated"><strong class="js hj">缺点</strong></p><ul class=""><li id="a076" class="lj lk hi js b jt ju jw jx jz mn kd mo kh mp kl mq lp lq lr bi translated">文档&amp;教程库不是很令人满意。</li><li id="4d56" class="lj lk hi js b jt ls jw lt jz lu kd lv kh lw kl mq lp lq lr bi translated">程序员无法对对话处理进行精确控制。</li></ul><h2 id="8349" class="ly kn hi bd ko lz ma mb ks mc md me kw jz mf mg ky kd mh mi la kh mj mk lc ml bi translated">2.<strong class="ak">T14】wit . ai:</strong></h2><p id="9327" class="pw-post-body-paragraph jq jr hi js b jt le ij jv jw lf im jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">Wit.ai(归脸书所有)的工作方式类似于Dialogflow:它也处理人类的语音模式，并从中过滤有用的数据，如意图和上下文。像Dialogflow一样，它提供了一个UI来帮助开发人员创建意图、实体和代理。</p><p id="4e0b" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated"><strong class="js hj">优势</strong></p><ul class=""><li id="f6b9" class="lj lk hi js b jt ju jw jx jz mn kd mo kh mp kl mq lp lq lr bi translated">很简单:快速入门教程对于入门来说非常实用。</li><li id="c2e7" class="lj lk hi js b jt ls jw lt jz lu kd lv kh lw kl mq lp lq lr bi translated">它是集成的:你将能够集成几个平台，像脸书，推特，Slack，电报等…</li><li id="0a27" class="lj lk hi js b jt ls jw lt jz lu kd lv kh lw kl mq lp lq lr bi translated">适应性强:你可以用Node.js、Python或Ruby来构建你的机器人。</li><li id="098e" class="lj lk hi js b jt ls jw lt jz lu kd lv kh lw kl mq lp lq lr bi translated">完全免费！</li></ul><p id="4d02" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated"><strong class="js hj">劣势</strong></p><ul class=""><li id="99d7" class="lj lk hi js b jt ju jw jx jz mn kd mo kh mp kl mq lp lq lr bi translated">没有可视化的开发环境，所以你必须熟悉代码。</li><li id="127a" class="lj lk hi js b jt ls jw lt jz lu kd lv kh lw kl mq lp lq lr bi translated">并不快。学习曲线似乎更陡峭，你需要投入时间来找出如何实现它。</li></ul><h2 id="d79a" class="ly kn hi bd ko lz ma mb ks mc md me kw jz mf mg ky kd mh mi la kh mj mk lc ml bi translated">3.RASA:</h2><p id="c283" class="pw-post-body-paragraph jq jr hi js b jt le ij jv jw lf im jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">Rasa是面向开发者和产品团队的开源机器学习工具。Rasa带有Rasa NLU和Rasa核心。NLU处理意图和实体，而核心处理对话和实现。</p><p id="a0e9" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated"><strong class="js hj">优势</strong></p><ul class=""><li id="205f" class="lj lk hi js b jt ju jw jx jz mn kd mo kh mp kl mq lp lq lr bi translated">开源，这意味着我们确切地知道在引擎盖下发生了什么，你可以定制你想要的东西。</li><li id="a0d1" class="lj lk hi js b jt ls jw lt jz lu kd lv kh lw kl mq lp lq lr bi translated">您可以将其托管在您的服务器上。</li><li id="58db" class="lj lk hi js b jt ls jw lt jz lu kd lv kh lw kl mq lp lq lr bi translated">可以作为简单的http服务器运行，也可以使用API从python中使用。</li></ul><p id="97d6" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated"><strong class="js hj">缺点</strong></p><ul class=""><li id="0c1f" class="lj lk hi js b jt ju jw jx jz mn kd mo kh mp kl mq lp lq lr bi translated">需要安装多个组件。</li><li id="16a3" class="lj lk hi js b jt ls jw lt jz lu kd lv kh lw kl mq lp lq lr bi translated">需要技术知识。</li><li id="9538" class="lj lk hi js b jt ls jw lt jz lu kd lv kh lw kl mq lp lq lr bi translated">学习曲线-安装、配置和培训阶段需要机器学习专业知识(至少是基础水平)。</li></ul><p id="c7ba" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">对于本文，我们选择使用<strong class="js hj"> Dialogflow </strong>,因为它为初级开发人员提供了开发机器人的良好用户体验，而无需成为该领域的专家。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mr"><img src="../Images/bd696c409eea8325d365eb01a7103e6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uzk89HtF3EIdHHN4pIZPsw.jpeg"/></div></div></figure><h1 id="0a37" class="km kn hi bd ko kp kq kr ks kt ku kv kw io kx ip ky ir kz is la iu lb iv lc ld bi translated">基本理解:</h1><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ms"><img src="../Images/0e4987f54b5c351be89a2aee15780800.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*pdsC75_8j8jhO0JVW8MhsA.png"/></div></figure><p id="aeb7" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated"><strong class="js hj">意图:</strong>一个<em class="lx">意图</em>就是用户的意图。例如，如果用户键入<em class="lx">“如何将400 dt转换为Eur？”</em>，用户的意图是检索货币转换器。意图有一个名称，通常是一个动词和一个名词，不使用空格，例如<em class="lx">“货币转换器】</em>。</p><p id="7b6f" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated"><strong class="js hj">实体:</strong>一个<em class="lx">实体</em>修改意图。例如，如果用户键入<em class="lx">“让我们重设货币”</em>，则实体为<em class="lx">“重设”、“更改货币”</em>。实体被赋予一个名称，如<em class="lx">“reset”</em>。</p><p id="b1fd" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">动作:我们的机器人会说或做的事情。</p><p id="e78f" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated"><strong class="js hj">完成:</strong>基本上是我们告诉机器人去做或执行的事情，一旦Dialogflow确定了正确的意图。对于我们的例子，我们只需要为这个目的启用启用webhook调用的切换。</p><h1 id="13ce" class="km kn hi bd ko kp kq kr ks kt ku kv kw io kx ip ky ir kz is la iu lb iv lc ld bi translated">对话流集成</h1><p id="aff9" class="pw-post-body-paragraph jq jr hi js b jt le ij jv jw lf im jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">首先，您将打开<a class="ae mm" href="https://dialogflow.com" rel="noopener ugc nofollow" target="_blank"> Dialogflow </a>网站，然后点击<em class="lx">“免费注册”</em>按钮。你将被带到一个注册页面，在这里你可以用你的Google帐户登录。</p><p id="ab57" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">所以，要开始，点击<em class="lx">【创建代理】</em>按钮。您可能需要再次授权Dialogflow以获得您的Google帐户的额外权限。这是正常的，所以点击<em class="lx">“授权”</em>。</p><p id="c298" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在下一个屏幕上，我们看到了我们代理的详细信息:</p><ul class=""><li id="3609" class="lj lk hi js b jt ju jw jx jz mn kd mo kh mp kl mq lp lq lr bi translated">代理名称:这是供您自己参考的，以便您可以在您的界面上区分代理。你可以选择任何你想要的名字。</li><li id="bd1b" class="lj lk hi js b jt ls jw lt jz lu kd lv kh lw kl mq lp lq lr bi translated">描述:一个可读的描述，这样你就可以记住代理是做什么的。这是可选的。</li><li id="9822" class="lj lk hi js b jt ls jw lt jz lu kd lv kh lw kl mq lp lq lr bi translated">语言:代理工作时使用的语言。在本教程中，我们将学习英语。</li><li id="14e9" class="lj lk hi js b jt ls jw lt jz lu kd lv kh lw kl mq lp lq lr bi translated">时区:您希望座席所在的时区。</li></ul><p id="352d" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">然后点击“创建”按钮。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mt"><img src="../Images/240245488d6a904288d50478624e6147.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*syz10M6avwoGzchkGlU16Q.jpeg"/></div></div></figure><p id="4d69" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated"><strong class="js hj">闲聊:</strong></p><p id="32e9" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">这是Dialogflow上的一个令人惊叹的功能，它使您的机器人能够立即就一系列常见问题(简单的问题，如<em class="lx">“你好吗？”</em>、<em class="lx">“你在干什么？”</em>、<em class="lx">“你叫什么名字？”</em>)</p><p id="2e90" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">我来演示一下:启用<strong class="js hj">闲聊</strong>点击“保存”。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mu"><img src="../Images/f77ffefee7f7df2ba71771874aee2086.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CydG-oAitRpsHCW4ppJWPQ.jpeg"/></div></div><figcaption class="mv mw et er es mx my bd b be z dx translated">在右边的测试面板中，我输入“你今天感觉怎么样？”机器人对此的反应。</figcaption></figure><p id="9f8d" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">所有这些回答都是<strong class="js hj">闲聊</strong>功能的结果，它内置于回答的训练集中。</p><p id="c444" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">现在，我<strong class="js hj">禁用</strong>这个功能是有原因的。我认为为特定领域或任务设计的机器人表现最好。因为闲聊很容易使谈话偏离方向，进入未知领域，而机器人将无法实现我们想要的。</p><h2 id="2121" class="ly kn hi bd ko lz ma mb ks mc md me kw jz mf mg ky kd mh mi la kh mj mk lc ml bi translated">创建一个意图</h2><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mz"><img src="../Images/f2757b85f8488b4467928651213ac390.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O83jGqSrTXfm72rc-teD1w.jpeg"/></div></div></figure><p id="92ed" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在我们新的CurrencyBot代理中，我们将创建一个意图。第一个意图是<em class="lx">“你好”</em>我们可以在“训练短语”中添加问候短语。以及“文本响应”中的响应。完成后，不要忘记点击<em class="lx">“保存”</em>，否则所有配置都会丢失。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es na"><img src="../Images/1843aa0ce895228fe8e0b3b26fa6b8e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qbw6YWO6CyunCtrqZpWlbw.jpeg"/></div></div></figure><p id="838d" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">然后，我们将创建这些意图:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nb"><img src="../Images/888f40ac7f244ce1bb20511f3bc7176b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pNGryAYwqruHrV5dWxLuWw.jpeg"/></div></div></figure><p id="29c4" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在创作过程中所有的意图都是相似的；不同之处在于<em class="lx">“货币转换器”</em>和<em class="lx">“上下文货币转换器”</em>的意图。我会向你详细说明不同之处。</p><ul class=""><li id="e3e3" class="lj lk hi js b jt ju jw jx jz mn kd mo kh mp kl mq lp lq lr bi translated"><strong class="js hj">“货币转换器”意图</strong>:</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/31baf473ce846ee6dcbc083dd23613fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Dtdd-bEBMnDPMlGKRb26w.jpeg"/></div></div><figcaption class="mv mw et er es mx my bd b be z dx translated">在输出上下文中添加“set currency ”+训练短语，如图所示</figcaption></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nd"><img src="../Images/4cbac6e9285d144e58e9d8fd0c12849c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PEFKOegLHnEer7FGPejAsQ.jpeg"/></div></div><figcaption class="mv mw et er es mx my bd b be z dx translated">在“操作和参数”中选中“必需”并更改参数名称+在“完成”中为此目的启用webhook调用</figcaption></figure><ul class=""><li id="ee9a" class="lj lk hi js b jt ju jw jx jz mn kd mo kh mp kl mq lp lq lr bi translated"><strong class="js hj">“带上下文的货币转换器”意图:</strong></li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ne"><img src="../Images/8a6fcb0e207c59b055c583b6fd10d05d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OsscIac0ipWx9prpVrCqQg.jpeg"/></div></div><figcaption class="mv mw et er es mx my bd b be z dx translated">在输入和输出上下文中添加setCurrency在“动作和参数”中需要检查+在“Fulfillement”中启用webhook。</figcaption></figure><h1 id="ee62" class="km kn hi bd ko kp kq kr ks kt ku kv kw io kx ip ky ir kz is la iu lb iv lc ld bi translated">构建了一个Webhook来使用Dialogflow上的fulfillement功能</h1><p id="8090" class="pw-post-body-paragraph jq jr hi js b jt le ij jv jw lf im jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">让我们创建一个带有一个webhook端点的简单web服务器。首先，我们需要知道webhook是一种应用程序向其他应用程序提供实时信息的方式。</p><p id="db2a" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">首先，您必须创建一个新目录，在那里您将存储您的整个项目。我们打算把它命名为“CurrencyBot”。</p><p id="94ae" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">当你创建了你的目录，进入你的终端，访问它并初始化你的Node.js应用程序(你应该首先在你的系统中安装<a class="ae mm" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>):</p><pre class="iy iz ja jb fd nf ng nh ni aw nj bi"><span id="c21f" class="ly kn hi ng b fi nk nl l nm nn">npm init</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es no"><img src="../Images/d8bb5bcea5ff9c6b7fdd5cb8114fb87c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n8WaNkomjAnJriLOsO4NHw.jpeg"/></div></div></figure><p id="a173" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">将<em class="lx"> package.json </em>文件改成这样:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es np"><img src="../Images/877b8020f766417f9d081233d1137e64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1082/format:webp/1*Nwg8VX35WQ1h_hrjz8o_RQ.jpeg"/></div></figure><p id="bbbb" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">然后创建webhook.js文件并键入以下命令:</p><pre class="iy iz ja jb fd nf ng nh ni aw nj bi"><span id="10e0" class="ly kn hi ng b fi nk nl l nm nn">&gt;npm install -g eslint</span><span id="2151" class="ly kn hi ng b fi nq nl l nm nn">&gt;npm i restify request --save --save-exact</span></pre><p id="e8be" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">你可以在这里 找到我的web hook . js<a class="ae mm" href="https://github.com/AmalM7/CurrencyBot" rel="noopener ugc nofollow" target="_blank">T5。</a></p><p id="2f36" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">如果您是第一次使用Node.js，请安装“nodemon ”,使用:</p><pre class="iy iz ja jb fd nf ng nh ni aw nj bi"><span id="e946" class="ly kn hi ng b fi nk nl l nm nn">npm install nodemon </span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nr"><img src="../Images/ab28f6aebbcd587248146cd568bda674.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vSg-0INPhUtXtQIbXDOPWg.jpeg"/></div></div></figure><p id="cbb6" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">之后，您可以通过以下方式运行它:</p><pre class="iy iz ja jb fd nf ng nh ni aw nj bi"><span id="f20f" class="ly kn hi ng b fi nk nl l nm nn">npx nodemon </span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ns"><img src="../Images/511f0f1bf4cb937b1d1ddb649fe5046b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*l0OGzZThNUHaYu7MbRn3gg.jpeg"/></div></figure><h1 id="c1c0" class="km kn hi bd ko kp kq kr ks kt ku kv kw io kx ip ky ir kz is la iu lb iv lc ld bi translated">使用ngrok设置代理服务器</h1><p id="ab23" class="pw-post-body-paragraph jq jr hi js b jt le ij jv jw lf im jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">Ngrok是一种多平台隧道、反向代理软件，可建立从公共端点(如互联网)到本地运行的网络服务的安全隧道，同时捕获所有流量以进行详细检查和重放。</p><p id="a539" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">你可以在这里<a class="ae mm" href="https://ngrok.com/" rel="noopener ugc nofollow" target="_blank">阅读更多关于它的信息</a>并安装它。</p><p id="ae3b" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">现在，您可以打开另一个终端并将其放在项目的目录中(同时您的本地服务器正在运行),然后键入以下命令:</p><pre class="iy iz ja jb fd nf ng nh ni aw nj bi"><span id="cb97" class="ly kn hi ng b fi nk nl l nm nn">ngrok http 3000</span></pre><p id="8166" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">它将向您显示一个带有几个URL的新屏幕，您需要的URL是最后一个以<strong class="js hj"> https </strong>开头的URL</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nt"><img src="../Images/00e3483bf6faea539eb076a31a18868f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K1_O2vEhkpZWr9LDVH0BiA.jpeg"/></div></div></figure><p id="dea8" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">复制此URL并将其粘贴到Fulfillment部分，如下所示:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nu"><img src="../Images/cd755bdc0c1417ed52c622370730c254.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z3hZqGTd2T1VBHzE-OytaA.jpeg"/></div></div></figure><blockquote class="nv nw nx"><p id="c7dc" class="jq jr lx js b jt ju ij jv jw jx im jy ny ka kb kc nz ke kf kg oa ki kj kk kl hb bi translated">注意:不要忘记点击<em class="hi">“保存”</em>按钮。</p></blockquote><p id="25fb" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在Dialogflow的右侧，您可以尝试您的机器人:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ob"><img src="../Images/fbb21b68f782466982490ddbbd4a4f13.png" data-original-src="https://miro.medium.com/v2/resize:fit:628/format:webp/1*32qLYw3fMpTXwcbV14UKEg.jpeg"/></div></div></figure><p id="921d" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">很好，一切正常！！！现在我们可以部署我们的聊天机器人了。</p><p id="40d0" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">对于这篇文章，我会选择Slack。</p><h1 id="8468" class="km kn hi bd ko kp kq kr ks kt ku kv kw io kx ip ky ir kz is la iu lb iv lc ld bi translated">让我们的聊天机器人活起来(集成Slack上的机器人)</h1><p id="5b68" class="pw-post-body-paragraph jq jr hi js b jt le ij jv jw lf im jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">我们将通过创建一个slack应用程序来创建一个slack集成。让我们来看看创建一个Slack应用程序的过程。首先要做的是进入<em class="lx">“集成”</em>并启用松弛集成。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es oc"><img src="../Images/3e523c04a97c08f842a72dff291db387.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7yivDqWHZ-PnBNLrn9IaSg.jpeg"/></div></div></figure><p id="aea8" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">下一步是创建一个呆滞账户，并转到<a class="ae mm" href="https://api.slack.com/" rel="noopener ugc nofollow" target="_blank"><strong class="js hj">https://api.slack.com/</strong></a>。选择一个现有的发展松弛的工作场所(如果你有的话)或者创建一个新的。</p><p id="120c" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">现在在你的<strong class="js hj">工作场所</strong>创建一个Slack应用程序，并给它命名。让我们把我们的应用程序叫做<strong class="js hj">current bot</strong>。</p><p id="d64f" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">这个过程在下面的gif中有详细的总结。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es od"><img src="../Images/5439df82adfe43b602faae2bb3538b42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*dQj0fSAwvRB3PWVeeBkSBg.gif"/></div></figure><p id="d6ff" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">而且成功了！！🎉🎉 👏 👏</p><p id="c054" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">现在你可以创建一个简单但非常有效的聊天机器人。</p><h1 id="8559" class="km kn hi bd ko kp kq kr ks kt ku kv kw io kx ip ky ir kz is la iu lb iv lc ld bi translated">结论</h1><p id="c863" class="pw-post-body-paragraph jq jr hi js b jt le ij jv jw lf im jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">这是一个创建你的第一个聊天机器人的循序渐进的教程。现在，您可以添加任意多的交互性。你可以让你的机器人与实体一起工作，进行API调用，语音识别等… <br/>欢迎在下面的评论区自由讨论并提供你的反馈。你将需要这个项目的代码是可用的<a class="ae mm" href="https://github.com/AmalM7/CurrencyBot" rel="noopener ugc nofollow" target="_blank"> <em class="lx">这里</em> </a>。</p><p id="9162" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated"><strong class="js hj"> <em class="lx">快乐阅读，快乐学习，快乐编码。</em> </strong></p></div></div>    
</body>
</html>