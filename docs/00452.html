<html>
<head>
<title>Basics of Data Search in Elasticsearch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">弹性搜索中的数据搜索基础</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/basics-of-data-search-in-elasticsearch-cda7fde50849?source=collection_archive---------1-----------------------#2019-06-24">https://medium.com/analytics-vidhya/basics-of-data-search-in-elasticsearch-cda7fde50849?source=collection_archive---------1-----------------------#2019-06-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="b928" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2018年8月4日上午7:02:21 | 5分钟</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/775112f0fa321c90aa2eb537d6f490ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sSwZ__x6aCLhOrqOWRo4zg.png"/></div></div></figure><p id="c4dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">随着我们迈向数字时代，将事物转变为物联网，数据量与日俱增。举一个简单的智能手表的例子，它测量步数、血压、心率等，并推送到服务器，从那里我们可以访问我们的健康相关指标。同样，有不同的智能设备不断发送存储在服务器上的常规数据。我们在服务器上倾倒大量的数据，这些数据可以帮助我们找到趋势，通过数据科学分析它们以解决一些严重的问题，或者应用机器学习算法来预测未来的趋势。</p><p id="c45e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，简单地说，我已经解释了数据的重要性，我们应该定期获取数据，从中获取有意义的信息。现在问题来了。搜索数据的最佳方式是什么？传统上，我们将数据存储在RDBMS系统中，并通过直接应用SQL查询来获取数据，但现在情况发生了变化，因为我们需要快速的搜索响应，我们没有时间通过查看加载图标的移动方向来等待搜索结果。我们面临的另一个问题是数据格式的不确定性，对于这些类型的数据，我们在RDBMS系统中遇到了瓶颈。</p><p id="d6f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在转到搜索部分，因为这个博客在这里向你介绍基本的Elasticsearch查询结构，这样一个新手就可以安装、索引和搜索Elasticsearch集群中的数据。如今，Elasticsearch主要用于其搜索功能和ELK堆栈，后者可以应用于任何应用程序集，以提高性能和监控功能。所以让我们开始这个过程，学习Elasticsearch中的基本搜索查询构造。</p><p id="4b8b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Elasticsearch中，我们基本上有两种类型的搜索API:“基于请求URI”和“基于请求正文”。在REST请求URI中，我们使用URL本身来传递搜索标准，例如:</p><pre class="jf jg jh ji fd jq jr js jt aw ju bi"><span id="4478" class="jv jw hi jr b fi jx jy l jz ka">GET /blogs/technical/_search?q=topic:kibana</span></pre><p id="8aba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在REST请求体中，我们使用来构造搜索块，并在Elasticsearch的查询块中编写搜索查询，如下所示:</p><p id="2ef3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，基于URI的搜索是一个非常基本的搜索，我们只想搜索一个关键字，而在请求正文中，我们可以构建复杂的查询。所以我们有了查询语言来处理基于请求体的搜索。在这篇博客中，我不打算深入细节，以保持简单，让每个人都可以理解正在发生的事情。</p><p id="f800" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">默认情况下，在Elasticsearch中文本字段上禁用Fielddata，因此我们需要启用它来构造查询。</p><pre class="jf jg jh ji fd jq jr js jt aw ju bi"><span id="f090" class="jv jw hi jr b fi jx jy l jz ka">PUT blogs/_mapping/technical?update_all_types<br/>{<br/> "properties": <br/>  {<br/>     "topic": <br/>     { <br/>       "type": "text",<br/>       "fielddata": true<br/>     }<br/>  }<br/>}</span></pre><p id="57d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们了解查询语言的基础，首先是match_all查询:</p><p id="07c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在match_all查询中，Elasticsearch返回所有文档。所以这个Elasticsearch查询基本上就像SQL“select * from technical”查询。</p><p id="6627" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">极限:</strong></p><p id="ba14" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们将在查询中设置偏移和限制来限制记录，如下所示:</p><p id="a54b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上面的查询中，我从第二个开始获取5个文档。同样，我们可以在任何Elasticsearch查询中设置偏移和限制。</p><p id="6092" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Elasticsearch中，我们可以按照我们的要求对文档进行分类，例如:</p><p id="5f44" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上面的表达式中，我们对字段主题应用了排序。</p><p id="50a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们限制SQL select查询中的列数，同样，我们也可以在Elasticsearch查询中这样做，比如:</p><pre class="jf jg jh ji fd jq jr js jt aw ju bi"><span id="c8fc" class="jv jw hi jr b fi jx jy l jz ka">GET /blogs/technical/_search<br/>{<br/>   "query": { "match_all": {} },<br/>   "_source": ["category"]<br/>}</span></pre><p id="9d4c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上面的查询中，我们将只在搜索结果中得到类别字段，而主题字段不会显示。</p><p id="9945" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以对字段名运行匹配查询，比如:</p><p id="668c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上面的查询中，我们可以传递文本来搜索主题字段。</p><p id="5ea0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇博客中，我解释了Elasticsearch查询构造的基础。在下一篇博客中，我将介绍过滤器、布尔查询、通配符查询等，然后解释聚合及其用法。</p><p id="02f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以在推特上关注我:<a class="ae jd" href="https://twitter.com/anubioinfo" rel="noopener ugc nofollow" target="_blank">https://twitter.com/anubioinfo</a></p><p id="2525" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">关于Elastic stack的其他博客:</strong><a class="ae jd" href="https://bqstack.com/b/detail/31/Introduction-to-Elasticsearch" rel="noopener ugc nofollow" target="_blank"><br/>Elastic Search简介</a> <br/> <a class="ae jd" href="http://bqstack.com/b/detail/52/Elasticsearch-Installation-and-Configuration-on-Ubuntu-14.04" rel="noopener ugc nofollow" target="_blank"> Elasticsearch在Ubuntu 14.04上的安装和配置</a> <br/> <a class="ae jd" href="http://bqstack.com/b/detail/1/Log-analysis-with-Elastic-stack" rel="noopener ugc nofollow" target="_blank">使用Elastic Stack的日志分析<br/></a><a class="ae jd" href="https://bqstack.com/b/detail/83/Elasticsearch-Rest-API" rel="noopener ugc nofollow" target="_blank">Elastic Search Rest API</a><br/><a class="ae jd" href="https://bqstack.com/b/detail/84/Basics-of-Data-Search-in-Elasticsearch" rel="noopener ugc nofollow" target="_blank">Elastic Search中数据搜索的基础知识</a><br/><a class="ae jd" href="https://bqstack.com/b/detail/83/Elasticsearch-Rest-API" rel="noopener ugc nofollow" target="_blank">Elastic Search Rest API</a><br/><a class="ae jd" href="https://bqstack.com/b/detail/87/Wildcard-and-Boolean-Search-in-Elasticsearch" rel="noopener ugc nofollow" target="_blank">Elastic Search</a>通配符和布尔搜索</p><p id="6604" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kb">如果你觉得这篇文章很有意思，那么你可以探索“</em> <a class="ae jd" href="https://www.amazon.com/Mastering-Kibana-6-x-Visualize-histograms/dp/1788831039/ref=olp_product_details?_encoding=UTF8&amp;me=" rel="noopener ugc nofollow" target="_blank"> <em class="kb">【掌握基巴纳6.0】</em></a><em class="kb">”、“</em> <a class="ae jd" href="https://www.amazon.com/Kibana-Quick-Start-Guide-Elasticsearch/dp/1789804035" rel="noopener ugc nofollow" target="_blank"> <em class="kb">基巴纳7快速入门指南</em> </a> <em class="kb">”、“</em> <a class="ae jd" href="https://www.amazon.com/Learning-Kibana-dashboards-visualization-capabilities-ebook/dp/B07V4SQR6T" rel="noopener ugc nofollow" target="_blank"> <em class="kb">学习基巴纳7 </em> </a> <em class="kb">”、“</em> <a class="ae jd" href="https://www.amazon.com/gp/product/1789803322?pf_rd_p=2d1ab404-3b11-4c97-b3db-48081e145e35" rel="noopener ugc nofollow" target="_blank"> <em class="kb"> Elasticsearch 7快速入门指南</em> </a> <em class="kb">”等书籍，了解更多</em></p><p id="92ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kb">原载于</em><a class="ae jd" href="https://bqstack.com/b/detail/84/Basics-of-Data-Search-in-Elasticsearch" rel="noopener ugc nofollow" target="_blank"><em class="kb">https://bqstack.com</em></a><em class="kb">。</em></p></div></div>    
</body>
</html>