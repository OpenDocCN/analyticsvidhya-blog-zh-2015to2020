<html>
<head>
<title>A deeper dive into Intents on Dialogflow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对Dialogflow意图的深入探究</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/a-deeper-dive-into-intents-on-dialogflow-1464f7fc725a?source=collection_archive---------5-----------------------#2019-08-24">https://medium.com/analytics-vidhya/a-deeper-dive-into-intents-on-dialogflow-1464f7fc725a?source=collection_archive---------5-----------------------#2019-08-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="660c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中:<a class="ae jd" rel="noopener" href="/@fouadromieh/build-a-chatbot-using-c-and-dialogflow-93b50be39d7c">使用C#和Dialogflow构建聊天机器人</a>我已经解释了如何在Dialogflow中设置意图，到目前为止，我们预计用户正在发送一条消息，并且传递的短语/文本具有我们需要的所有内容，但是我们没有深入研究训练意图或功能，这些是构建智能聊天机器人的核心功能，让我们在Dialogflow中探索更多的意图。</p><h1 id="3899" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">在聊天机器人的世界里，训练意图意味着什么？</h1><p id="4a76" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">真实世界的对话是不可察觉的，它因人而异，因文化而异，甚至同一个人每次都会用不同的方式表达他的意图。例如，检查以下表达相同意图的不同短语:</p><ol class=""><li id="413a" class="kh ki hi ih b ii ij im in iq kj iu kk iy kl jc km kn ko kp bi translated">给我订个房间</li><li id="b04c" class="kh ki hi ih b ii kq im kr iq ks iu kt iy ku jc km kn ko kp bi translated">我急需一个双人房间</li><li id="8351" class="kh ki hi ih b ii kq im kr iq ks iu kt iy ku jc km kn ko kp bi translated">我能预订一个能看到海景的房间住两个晚上吗？</li></ol><p id="4fa2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">聊天机器人不是一个能够快速适应对话变化的人，因此我们需要在一个意图下为他们提供不同的可能场景，这正是<a class="ae jd" href="https://cloud.google.com/dialogflow/docs/intents-training-phrases" rel="noopener ugc nofollow" target="_blank">训练短语</a>的作用。因为其目的是使聊天机器人能够通过创建额外的意图或者通过用额外的短语训练现有的意图来捕捉用户所有可能的意图。感谢NLP(自然语言处理)算法分析和处理自然/人类语言，并允许我们从文本中提取意图。</p><p id="7e8c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们来看看我们在为聊天机器人构建意图时可能会面临的一些场景。</p><h1 id="7871" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">收集拼图中缺失的部分</h1><p id="5036" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">会有这样的情况，最终用户没有以完全或清楚的方式表达他们的意图。例如，用户会说:“我可以预订吗？”如果你已经创建了一个意图，期望用户告诉你:多少个晚上，多少个人，你应该准备好回答用户一个问题，让他/她提供额外的信息。</p><p id="0f2b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">检查我们在<a class="ae jd" rel="noopener" href="/voice-tech-podcast/build-a-chatbot-using-c-and-dialogflow-93b50be39d7c">之前的示例</a>中创建的以下短语，同时注意注释文本，以便从短语中提取参数:</p><figure class="kw kx ky kz fd la er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es kv"><img src="../Images/7468edffa486ba91bc2d7d47a8dd01d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5AMW6bFgmRlPS0pL_-r3bw.png"/></div></div></figure><p id="d28f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为我们想从用户意图/消息中获得预订详细信息，所以我们猜测他/她将提供总人数和总住宿数，但是如果用户只是说:“我想通过您的酒店进行预订”，在这种情况下，聊天机器人将无法检测到用户的意图，回复将来自下图中的后备意图。</p><figure class="kw kx ky kz fd la er es paragraph-image"><div class="er es lh"><img src="../Images/2a280f2b72a726a0c65515988da0061d.png" data-original-src="https://miro.medium.com/v2/resize:fit:890/format:webp/1*iuJwgzd6fxVKcGldXs2HRQ.png"/></div></figure><p id="cdde" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们将短语“我想在您的酒店进行预订”添加到我们的培训短语列表中，并使用具有类似意图/含义的短语再试一次，如下所示:</p><figure class="kw kx ky kz fd la er es paragraph-image"><div class="er es li"><img src="../Images/cfd8563278a48cd0538fe5a705f15a67.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*ACUNM7f-EN5Wc6AMBcymRA.png"/></div></figure><p id="7fba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，意图被触发，它询问关于该意图可用的强制参数。查看下一节，了解如何进行配置。</p><h1 id="fa50" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">意图参数</h1><p id="bf49" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">一些意图将被设计为从用户消息中提取一些特定的值，然后将其传递给webhook或填充一个<em class="lj">上下文</em>。例如，如果一个用户想要预订酒店，他/她必须提供预订所需的信息:总人数、总住宿时间、观看偏好等。Dialogflow允许我们简单地通过检查参数的<em class="lj">必需的</em>字段来容易地配置这样的要求，并且如果用户传递的消息中缺少该信息，Dialogflow默认情况下将询问一个问题来请求该信息。正如您在下面看到的，我们将两个参数配置为强制参数:</p><figure class="kw kx ky kz fd la er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es lk"><img src="../Images/0ad73ef7cffc2bcd080280718378d10b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sf2WgVleiuqqVEnvjVCs7Q.png"/></div></div></figure><p id="6846" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，模拟器回答道:“总人数是多少？”当我们问“我可以预订吗？”</p><p id="7956" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如您所见，Dialogflow在回复中使用了参数名称，这不是用户友好的。要进行更改，请单击<em class="lj">提示</em>字段，并添加一个或多个客户回复，如下所示:</p><figure class="kw kx ky kz fd la er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es ll"><img src="../Images/dc26a0f2999313f57e3c13df2cf95a23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uG5_9s5_6oqBnPAVu52V9A.png"/></div></div></figure><p id="38d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">多个回复并不意味着用户将在一个回复中收到它们，而是Dialogflow会选择不同的聊天请求，这是为了让对话看起来更自然，当然，您可以通过仅使用一个提示来保持您的回复静态。</p><h1 id="cc5d" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">处理突发事件</h1><p id="7950" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">举个例子，如果你的聊天机器人只用于预订，如果用户输入:“我不打算预订房间，但你的酒店有职位空缺吗？”</p><p id="3322" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您有两种选择:</p><ol class=""><li id="d9a5" class="kh ki hi ih b ii ij im in iq kj iu kk iy kl jc km kn ko kp bi translated">创建一个新的意图来捕捉此类查询/消息，并通过职业页面的链接或任何其他消息来回复用户。</li><li id="1b69" class="kh ki hi ih b ii kq im kr iq ks iu kt iy ku jc km kn ko kp bi translated">不要创建意图，让这样的消息传递给回退意图处理程序。</li></ol><p id="efe6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我会建议第一条，因为通常默认的回退意图会像这样回答:“对不起，我不明白你在问什么。”尽管最终用户清楚意图/信息。这也不意味着为每一个可能的短语创造一个意图，这是很难实现的。我们将在文章的后面讨论这个问题。</p><p id="4b56" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您必须经常访问您的代理的<em class="lj">历史</em>和<em class="lj">培训</em>部分，因为它会为您突出显示已经传递到您的聊天机器人并且不匹配任何配置意图的短语。对你的意图进行额外的训练是很有价值的。</p><figure class="kw kx ky kz fd la er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es lm"><img src="../Images/ec77f260b38dad733a11ee487b368c69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*722vRpmIOvwopA_pyZBCng.png"/></div></div></figure><h1 id="7883" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">进口/出口意向</h1><p id="868e" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">随着你开发聊天机器人的时间的推移，你会注意到它们在某种程度上共享相似的功能，例如大多数聊天机器人共享回复用户问候的功能。在这种情况下，您不希望一次又一次地创建相同的意图，Dialogflow提供了导出意图并将其导入另一个代理的功能。让我们看看如何:</p><h2 id="c4b7" class="ln jf hi bd jg lo lp lq jk lr ls lt jo iq lu lv js iu lw lx jw iy ly lz ka ma bi translated">出口意向</h2><p id="bae9" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">将鼠标悬停在您要导出的目的项目上，并位于以下图标下方:</p><figure class="kw kx ky kz fd la er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es mb"><img src="../Images/5a0f116477c6e42aad380a2f53e3a070.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kb-VKBOmiJOLGW289yTOqQ.png"/></div></div></figure><p id="91fa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将下载一个用于导入的json文件。</p><h2 id="5e73" class="ln jf hi bd jg lo lp lq jk lr ls lt jo iq lu lv js iu lw lx jw iy ly lz ka ma bi translated">导入/上传</h2><p id="9454" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">从顶部菜单中单击3个点，然后选择上传意图，并按照步骤选择上一步中导出的json文件。</p><figure class="kw kx ky kz fd la er es paragraph-image"><div class="er es mc"><img src="../Images/36c7a6d3538f8bcaa42a102f2b21a7f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*ED3Mw5TNkRTkI6-zVND6DQ.png"/></div></figure><p id="6cd4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，这带来了另一个强大的功能，通过api动态上传意图。如何做超出了本文的范围，我将需要一个单独的文章。如果您有兴趣阅读更多关于该检查的信息，请点击。</p><h1 id="d619" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">意向反应</h1><p id="0197" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">意向响应可以有两种形式静态的或动态的，静态的可以直接从代理中返回，而动态的可能需要通过fulfillment webhook进行额外的调用，以从外部来源获取响应，我们已经在这篇<a class="ae jd" rel="noopener" href="/voice-tech-podcast/create-a-c-netcore-webhook-for-a-dialogflow-chatbot-e22d53c40d64">文章</a>中讨论了webhook场景。</p><h1 id="bca1" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">丰富的响应</h1><p id="e747" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">聊天机器人需要返回给用户的不仅仅是文本，有时还有其他类型的响应，例如:卡片、图像、快速等等</p><p id="1fe9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">丰富的响应主题细节超出了本文的范围，我将为它单独创建一个。但让我向您展示如何使用skype频道实现丰富的回复。</p><p id="ac57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您进入任何意向<em class="lj">回复</em>部分，选择skype选项卡并点击<em class="lj">添加回复</em>按钮，然后选择<em class="lj">卡</em>选项。在卡片字段中填入相关信息并保存意向。</p><figure class="kw kx ky kz fd la er es paragraph-image"><div class="er es md"><img src="../Images/27b40a7683e3d1db53ff4034c4be2bc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/format:webp/1*17N4NBmtpRHy7KQlWMZ7aQ.png"/></div></figure><p id="9f1a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们看看它在skype上的样子:</p><figure class="kw kx ky kz fd la er es paragraph-image"><div class="er es me"><img src="../Images/ee9aec97edcd1a8d8a2244999cd942d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1054/format:webp/1*axLADzSLpHs7MNwhA590Rg.png"/></div></figure><p id="6d51" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是一个令人惊叹的功能，为聊天机器人增加了许多可能性，当然这样的响应也可以在webhook调用中获得。</p></div></div>    
</body>
</html>