<html>
<head>
<title>How to create REST API using Django REST Framework — A Blog APP</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Django REST框架——一个博客应用程序创建REST API</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-create-rest-api-using-django-rest-framework-a-blog-app-15a175884979?source=collection_archive---------5-----------------------#2020-05-07">https://medium.com/analytics-vidhya/how-to-create-rest-api-using-django-rest-framework-a-blog-app-15a175884979?source=collection_archive---------5-----------------------#2020-05-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="51b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本教程中，我们将使用<a class="ae je" href="http://www.django-rest-framework.org/" rel="noopener ugc nofollow" target="_blank"> Django Rest框架</a>为具有CRUD(创建-读取-更新-删除)功能的<em class="jd">博客应用</em>构建API。</p><p id="cac8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有与<a class="ae je" href="https://www.djangoproject.com/" rel="noopener ugc nofollow" target="_blank">姜戈</a>合作的经验是有帮助的，但不是必须的。</p><p id="7e6a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完整的源代码可以在<a class="ae je" href="https://github.com/ayushgemini/django-blog-app" rel="noopener ugc nofollow" target="_blank"> Github </a>上找到。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div class="er es jf"><img src="../Images/559b4d326c19f13a7fde1194b7e7282a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/1*go4vEjAqgznYnJoksYJ_0A.png"/></div></figure><h1 id="7bca" class="jn jo hi bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">简易高碘酸染色法</h1><p id="17c0" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">现代web应用程序越来越多地被构建为单页面应用程序(SPAs ),它们具有不同的前端和后端。与Django本身的传统整体方法(以及Ruby on Rails等其他web框架)相反，spa需要一个后端API，然后可以根据需要由多个前端使用。当公司需要多个前端应用程序(移动网络、iOS、Android)在同一个数据库上运行时，这种方法非常有效。也可以说它更“适应未来”,因为前端可以更改为任何流行的JavaScript框架，但后端始终保持稳定。</p><p id="f21e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">缺点是为项目创建单独的前端/后端需要更多的时间和代码。</p><h1 id="d7c0" class="jn jo hi bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">RESTful APIs</h1><p id="6a2c" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">API(应用程序编程接口)为开发人员提供了与应用程序数据库交互的接口。API并不只是授予某人对数据库的完全访问权，而是为各种功能设置规则、权限和端点:登录、注销、阅读博客列表、个人博客详细信息等等。</p><p id="7ae0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">构建web API的传统方式是通过REST(表述性状态转移)，这是一种完善的网站间通信架构。由于计算机通过web进行通信，这意味着使用HTTP协议，该协议支持几种常见的“方法”(也称为“动词”)，如GET、PUT、POST和DELETE。</p><p id="20ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还有许多相关的访问代码，用于指示请求是成功的(200)、重定向的(301)、丢失的(404)还是更糟的(500)。</p><h1 id="147c" class="jn jo hi bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">JSON</h1><p id="50cc" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">值得注意的是，由于API正在与另一台计算机通信，因此共享的信息<strong class="ih hj">不是标准网页发送的信息</strong>。例如，当您的浏览器请求Google主页时，它发送HTTP请求并接收包含HTML、CSS、JavaScript、图像等的HTTP响应。</p><p id="a8e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">API是不同的。通常我们只对数据库中的数据感兴趣。这些数据通常被转换成JSON格式，以便有效地传输。该API还将有一系列定义良好的规则，用于前端客户端如何通过REST架构与它进行交互。为了注册一个新用户，前端框架需要访问一个API端点，例如“/api/register/”。这个API端点包含一个特定的URL路由和它自己的权限集。</p><h1 id="724b" class="jn jo hi bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">设置</h1><p id="b9ab" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">我们将从在Django中构建博客应用程序的模型开始本教程。然后我们可以添加Django Rest框架，将其转换成RESTful API。</p><p id="68ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，在您的计算机上为我们的代码创建一个新目录。我会把它放在桌面上一个名为“django-blog-app”的文件夹中，但是你可以把它放在任何地方。然后配置我们的项目。</p><pre class="jg jh ji jj fd kq kr ks kt aw ku bi"><span id="1163" class="kv jo hi kr b fi kw kx l ky kz">$ cd ~/Desktop<br/>$ mkdir blogapi &amp;&amp; cd blogapi<br/>$ pipenv install django==3.0<br/>$ pipenv shell<br/>(blogapi) $ django-admin startproject blog_project .<br/>(blogapi) $ cd blog_project<br/>(blogapi) $ python manage.py startapp posts</span></pre><p id="3629" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们使用<code class="du la lb lc kr b">Pipenv</code>来安装Django并激活一个本地环境。然后我们创建了一个名为<code class="du la lb lc kr b">blogapi</code>的新Django项目以及我们的第一个应用<code class="du la lb lc kr b">posts</code>。</p><p id="feda" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为我们已经添加了一个新的应用程序，所以我们需要告诉Django。所以请确保将<code class="du la lb lc kr b">posts</code>添加到<code class="du la lb lc kr b">settings.py</code>文件中的<code class="du la lb lc kr b">INSTALLED_APPS</code>列表中。</p><pre class="jg jh ji jj fd kq kr ks kt aw ku bi"><span id="7616" class="kv jo hi kr b fi kw kx l ky kz"><em class="jd"># blog_project/settings.py</em></span><span id="1219" class="kv jo hi kr b fi ld kx l ky kz">INSTALLED_APPS <strong class="kr hj">=</strong> [<br/>    'django.contrib.admin',<br/>    'django.contrib.auth',<br/>    'django.contrib.contenttypes',<br/>    'django.contrib.sessions',<br/>    'django.contrib.messages',<br/>    'django.contrib.staticfiles',</span><span id="5164" class="kv jo hi kr b fi ld kx l ky kz">'posts',<br/>]</span></pre><p id="6cd7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的数据库模型将会非常简单。让我们创建四个字段:标题、内容、创建时间和更新时间。</p><pre class="jg jh ji jj fd kq kr ks kt aw ku bi"><span id="60ad" class="kv jo hi kr b fi kw kx l ky kz"><em class="jd"># posts/models.py<br/></em>from django.db import models</span><span id="6355" class="kv jo hi kr b fi ld kx l ky kz"><strong class="kr hj">class</strong> <strong class="kr hj">Post</strong>(models<strong class="kr hj">.</strong>Model):<br/>    title <strong class="kr hj">=</strong> models<strong class="kr hj">.</strong>CharField(max_length<strong class="kr hj">=</strong>50)<br/>    content <strong class="kr hj">=</strong> models<strong class="kr hj">.</strong>TextField()<br/>    created_at <strong class="kr hj">=</strong> models<strong class="kr hj">.</strong>DateTimeField(auto_now_add<strong class="kr hj">=</strong>True)<br/>    updated_at <strong class="kr hj">=</strong> models<strong class="kr hj">.</strong>DateTimeField(auto_now<strong class="kr hj">=</strong>True)</span><span id="6c5a" class="kv jo hi kr b fi ld kx l ky kz"><strong class="kr hj">def</strong> <strong class="kr hj">__str__</strong>(self):<br/>        <strong class="kr hj">return</strong> self<strong class="kr hj">.</strong>title</span></pre><p id="0737" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意，我们还定义了模型的<code class="du la lb lc kr b">__str__</code>表示应该是什么，这是Django的最佳实践。</p><p id="592f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在更新我们的数据库，首先创建一个新的迁移文件，然后应用它。</p><pre class="jg jh ji jj fd kq kr ks kt aw ku bi"><span id="7453" class="kv jo hi kr b fi kw kx l ky kz">(blogapi) $ python manage.py makemigrations<br/>(blogapi) $ python manage.py migrate</span></pre><p id="2233" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">很好！我们想在Django出色的内置管理应用程序中查看我们的数据，所以让我们添加<code class="du la lb lc kr b">Post</code>到它，如下所示。</p><pre class="jg jh ji jj fd kq kr ks kt aw ku bi"><span id="adba" class="kv jo hi kr b fi kw kx l ky kz"><em class="jd"># posts/admin.py<br/></em>from django.contrib import admin<br/><strong class="kr hj">from</strong> <strong class="kr hj">.</strong> models import Post</span><span id="92c3" class="kv jo hi kr b fi ld kx l ky kz">admin<strong class="kr hj">.</strong>site<strong class="kr hj">.</strong>register(Post)</span></pre><p id="74b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后创建一个超级用户帐户，这样我们就可以登录。在下面键入命令并输入所有提示。</p><pre class="jg jh ji jj fd kq kr ks kt aw ku bi"><span id="9f6e" class="kv jo hi kr b fi kw kx l ky kz">(blogapi) $ python manage.py createsuperuser</span></pre><p id="de3d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们可以启动本地web服务器了。</p><pre class="jg jh ji jj fd kq kr ks kt aw ku bi"><span id="af9f" class="kv jo hi kr b fi kw kx l ky kz">(blogapi) $ python manage.py runserver</span></pre><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es le"><img src="../Images/c979a92832088c2a846e31267325707e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FAZraXFMcivw4RafHae2ow.png"/></div></div></figure><p id="88b8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击<code class="du la lb lc kr b">Posts</code>旁边的“+ Add”按钮，输入一些新内容。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es lj"><img src="../Images/bf2654d31dc934b6f1980dbfdb579b42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*htrbDkKYQAUfFkqA_din5Q.png"/></div></div></figure><p id="b2e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我已经创建了三个新的博客帖子，你可以在这里看到。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es lk"><img src="../Images/960971c93edc59f1c128993b06d1413f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eDhEbkRN8ZceRcru0rzS0Q.png"/></div></div></figure><p id="35cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">姜戈的部分已经结束了！因为我们正在创建一个API，所以我们不需要创建模板和视图。相反，是时候添加Django Rest框架来将我们的模型数据转换成API了。</p><h1 id="7697" class="jn jo hi bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">Django Rest框架</h1><p id="217f" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">DRF负责将我们的数据库模型转换成RESTful API。这个过程有两个主要步骤:首先，用一个<code class="du la lb lc kr b">serializer</code>将数据转换成JSON，这样就可以通过互联网发送，然后用一个<code class="du la lb lc kr b">View</code>定义发送什么数据。</p><p id="d8d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们看看它的实际效果。首先，用<code class="du la lb lc kr b">Control+c</code>停止本地服务器，用<code class="du la lb lc kr b">Pipenv</code>安装Django Rest框架。</p><pre class="jg jh ji jj fd kq kr ks kt aw ku bi"><span id="8e48" class="kv jo hi kr b fi kw kx l ky kz">(blogapi) $ pipenv install djangorestframework==3.10</span></pre><p id="41b7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后将它添加到我们的<code class="du la lb lc kr b">settings.py</code>文件的<code class="du la lb lc kr b">INSTALLED_APPS</code>部分。</p><pre class="jg jh ji jj fd kq kr ks kt aw ku bi"><span id="0fe0" class="kv jo hi kr b fi kw kx l ky kz"><em class="jd"># blog_project/settings.py<br/></em>INSTALLED_APPS <strong class="kr hj">=</strong> [<br/>    'django.contrib.admin',<br/>    'django.contrib.auth',<br/>    'django.contrib.contenttypes',<br/>    'django.contrib.sessions',<br/>    'django.contrib.messages',<br/>    'django.contrib.staticfiles',</span><span id="4297" class="kv jo hi kr b fi ld kx l ky kz">'rest_framework',</span><span id="c4bc" class="kv jo hi kr b fi ld kx l ky kz">'posts',<br/>]</span></pre><p id="3eaf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我喜欢在像<code class="du la lb lc kr b">rest_framework</code>这样的第三方应用和我的像<code class="du la lb lc kr b">posts</code>这样的应用之间加一个空格。</p><p id="d68d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在在我们的<code class="du la lb lc kr b">posts</code>应用中创建一个新的<code class="du la lb lc kr b">serializers.py</code>文件。</p><pre class="jg jh ji jj fd kq kr ks kt aw ku bi"><span id="f4c0" class="kv jo hi kr b fi kw kx l ky kz">(blogapi) $ touch posts/serializers.py</span></pre><p id="b80a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请记住，序列化程序用于将我们的数据转换成JSON格式。就是这样。这是它的样子。</p><pre class="jg jh ji jj fd kq kr ks kt aw ku bi"><span id="d372" class="kv jo hi kr b fi kw kx l ky kz"><em class="jd"># posts/serializers.py<br/></em>from rest_framework import serializers<br/>from . import models</span><span id="440b" class="kv jo hi kr b fi ld kx l ky kz"><strong class="kr hj">class</strong> <strong class="kr hj">PostSerializer</strong>(serializers<strong class="kr hj">.</strong>ModelSerializer):</span><span id="ffd7" class="kv jo hi kr b fi ld kx l ky kz"><strong class="kr hj">class</strong> <strong class="kr hj">Meta</strong>:<br/>        fields <strong class="kr hj">=</strong> ('id', 'title', 'content', 'created_at', 'updated_at',)<br/>        model <strong class="kr hj">=</strong> models<strong class="kr hj">.</strong>Post</span></pre><p id="892a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上面的两个文件中，我们从DRF进口了<code class="du la lb lc kr b">serializers</code>和我们的模型。接下来，我们创建一个序列化器类，并在其中创建一个<code class="du la lb lc kr b">Meta</code>类。<code class="du la lb lc kr b">fields</code>控制哪些数据库属性可用。在本例中，我们公开了所有字段，包括Django自动添加到所有数据库记录中的主键<code class="du la lb lc kr b">id</code>。</p><p id="9c19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们需要创建我们的视图。正如Django有基于类的通用视图一样，DRF也有我们可以使用的通用视图。让我们添加一个列出所有博客文章的视图和一个特定文章的详细视图。</p><p id="51b7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如下更新<code class="du la lb lc kr b">posts</code>中的<code class="du la lb lc kr b">views.py</code>文件。</p><pre class="jg jh ji jj fd kq kr ks kt aw ku bi"><span id="6890" class="kv jo hi kr b fi kw kx l ky kz"><em class="jd"># posts/views.py<br/></em>from rest_framework import generics</span><span id="4a86" class="kv jo hi kr b fi ld kx l ky kz">from .models import Post<br/>from .serializers import PostSerializer</span><span id="abfa" class="kv jo hi kr b fi ld kx l ky kz"><strong class="kr hj">class</strong> <strong class="kr hj">PostList</strong>(generics<strong class="kr hj">.</strong>ListAPIView):<br/>    queryset <strong class="kr hj">=</strong> Post<strong class="kr hj">.</strong>objects<strong class="kr hj">.</strong>all()<br/>    serializer_class <strong class="kr hj">=</strong> PostSerializer</span><span id="a7a5" class="kv jo hi kr b fi ld kx l ky kz"><strong class="kr hj">class</strong> <strong class="kr hj">PostDetail</strong>(generics<strong class="kr hj">.</strong>RetrieveAPIView):<br/>    queryset <strong class="kr hj">=</strong> Post<strong class="kr hj">.</strong>objects<strong class="kr hj">.</strong>all()<br/>    serializer_class <strong class="kr hj">=</strong> PostSerializer</span></pre><p id="526a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在顶部，我们从DRF导入<code class="du la lb lc kr b">generics</code>以及我们的模型和序列化程序文件。然后我们创建两个视图:<code class="du la lb lc kr b">PostList</code>和<code class="du la lb lc kr b">PostDetail</code>。两者都只是针对<code class="du la lb lc kr b">GET</code> s，而<code class="du la lb lc kr b">RetrieveAPIView</code>是针对一个模型的<strong class="ih hj">单实例</strong>。通用视图的完整列表在DRF网站上。</p><p id="a4f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后一部分是URL。我们需要创建URL路由——在API中称为<strong class="ih hj">端点</strong>——在那里数据是可用的。</p><p id="3be2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从项目级<code class="du la lb lc kr b">urls.py</code>文件开始。</p><pre class="jg jh ji jj fd kq kr ks kt aw ku bi"><span id="2a20" class="kv jo hi kr b fi kw kx l ky kz"><em class="jd"># blog_project/urls.py</em></span><span id="1a2c" class="kv jo hi kr b fi ld kx l ky kz">from django.contrib import admin<br/>from django.urls import include, path</span><span id="c7c1" class="kv jo hi kr b fi ld kx l ky kz">urlpatterns <strong class="kr hj">=</strong> [<br/>    path('admin/', admin<strong class="kr hj">.</strong>site<strong class="kr hj">.</strong>urls),<br/>    path('api/', include('posts.urls')),<br/>]</span></pre><p id="4947" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们已经将<code class="du la lb lc kr b">include</code>添加到第二行导入中，然后为我们的<code class="du la lb lc kr b">posts</code>应用程序创建了一个名为<code class="du la lb lc kr b">api/</code>的路径。</p><p id="2707" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，创建我们的<code class="du la lb lc kr b">posts</code>应用程序<code class="du la lb lc kr b">urls.py</code>文件。</p><pre class="jg jh ji jj fd kq kr ks kt aw ku bi"><span id="2826" class="kv jo hi kr b fi kw kx l ky kz">(blogapi) $ touch posts/urls.py</span></pre><p id="ad25" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后包含下面的代码。</p><pre class="jg jh ji jj fd kq kr ks kt aw ku bi"><span id="ded9" class="kv jo hi kr b fi kw kx l ky kz"><em class="jd"># posts/urls.py<br/></em>from django.urls import path</span><span id="7010" class="kv jo hi kr b fi ld kx l ky kz">from . import views</span><span id="7a7c" class="kv jo hi kr b fi ld kx l ky kz">urlpatterns <strong class="kr hj">=</strong> [<br/>    path('', views<strong class="kr hj">.</strong>PostList<strong class="kr hj">.</strong>as_view()),<br/>    path('&lt;int:pk&gt;/', views<strong class="kr hj">.</strong>PostDetail<strong class="kr hj">.</strong>as_view()),<br/>]</span></pre><p id="a99c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所有的博客路径都在<code class="du la lb lc kr b">api/</code>处，所以我们的<code class="du la lb lc kr b">PostList</code>有空字符串<code class="du la lb lc kr b">''</code>将在<code class="du la lb lc kr b">api/</code>处，<code class="du la lb lc kr b">postDetail</code>在<code class="du la lb lc kr b">api/#</code>处，其中<code class="du la lb lc kr b">#</code>代表条目的主键。例如，第一篇博文的主id为1，因此它将位于路由<code class="du la lb lc kr b">api/1</code>，第二篇博文位于<code class="du la lb lc kr b">api/2</code>，依此类推。</p><h1 id="b56d" class="jn jo hi bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">可浏览API</h1><p id="8e73" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">是时候看看我们的作品，看看DRF杀手的特写了。启动服务器。</p><pre class="jg jh ji jj fd kq kr ks kt aw ku bi"><span id="f3a1" class="kv jo hi kr b fi kw kx l ky kz">(blogapi) $ python manage.py runserver</span></pre><p id="69d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后去<a class="ae je" href="http://127.0.0.1:8000/api/" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/API/</a>。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es ll"><img src="../Images/f3f52dacd0d627f763e57b622a57dbf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lJun1htkG-mTTdIA6oFzZw.png"/></div></div></figure><p id="d3e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">看看这个。端点以JSON格式显示了我的三篇博客文章。它还在标题中显示只允许使用<code class="du la lb lc kr b">GET, HEAD, OPTIONS</code>。没有<code class="du la lb lc kr b">POST</code>数据。</p><p id="580f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在转到<a class="ae je" href="http://127.0.0.1:8000/api/1/" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/API/1/</a>，您将只看到第一个条目的数据。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es ll"><img src="../Images/7413634fe44a5ffd15999c69e81762f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gzogyW3ri-V2ifzZ2Zux3w.png"/></div></div></figure><h1 id="cc4e" class="jn jo hi bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">实施CRUD</h1><p id="8a96" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">我在文章开始时承诺，本教程将不仅涵盖读取/获取内容，而且涵盖完整的CRUD语法。看看DRF是如何轻松地将我们的API转换成支持CRUD的API的！</p><p id="7b5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">打开<code class="du la lb lc kr b">posts/views.py</code>文件，将<code class="du la lb lc kr b">class PostDetail(generics.RetrieveAPIView)</code>改为<code class="du la lb lc kr b">class PostDetail(generics.RetrieveUpdateDestroyAPIView)</code>。</p><pre class="jg jh ji jj fd kq kr ks kt aw ku bi"><span id="41b3" class="kv jo hi kr b fi kw kx l ky kz"><em class="jd"># posts/views.py<br/></em><strong class="kr hj">...</strong><br/><strong class="kr hj">class</strong> <strong class="kr hj">PostDetail</strong>(generics<strong class="kr hj">.</strong>RetrieveUpdateDestroyAPIView):<br/>    queryset <strong class="kr hj">=</strong> models<strong class="kr hj">.</strong>Post<strong class="kr hj">.</strong>objects<strong class="kr hj">.</strong>all()<br/>    serializer_class <strong class="kr hj">=</strong> serializers<strong class="kr hj">.</strong>PostSerializer</span></pre><p id="c423" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在刷新页面，您可以在我们的图形用户界面中看到更新。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es lj"><img src="../Images/3bdcf52bef2400fe0845aaa4c551958e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yhxICr9D7cVzcgeEqMqM9Q.png"/></div></div></figure><p id="2dc6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以使用“Delete”按钮删除内容，“Put”按钮更新内容，而“Get”按钮像以前一样检索内容。例如，导航到我们第二篇文章的URL端点:<a class="ae je" href="http://127.0.0.1:8000/api/3/" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/API/2/</a>。</p><p id="81b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后使用页面底部的图形界面来更新条目。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es lm"><img src="../Images/db56fe1c7ac3b7be3f0a592a69d81a97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iHIxvj1tjjLpPXTan2c6jA.png"/></div></div></figure><p id="659c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以在更改后获得它:</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es lk"><img src="../Images/84b193829485e7085a6ec2d8eb793fa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1sQRWDRSD3SP4aZxU2uIgg.png"/></div></div></figure><p id="6130" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">快乐编码。</p><p id="be22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一个故事再见。敬请期待！</p><p id="7af0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">可以在</strong><a class="ae je" href="https://www.linkedin.com/in/ayush-gemini/" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">LinkedIn</strong></a><strong class="ih hj">&amp;</strong><a class="ae je" href="https://github.com/ayushgemini" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">Github</strong></a><strong class="ih hj">上和我联系。</strong></p></div></div>    
</body>
</html>