<html>
<head>
<title>Let your customers find what they are looking for | Simple way to extract search query intent| Bigquery | Solr</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让您的客户找到他们正在寻找的东西|提取搜索查询意图的简单方法| Bigquery | Solr</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/simple-way-to-extract-search-query-intent-in-search-engine-bigquery-solr-c049fb5b4592?source=collection_archive---------19-----------------------#2020-05-17">https://medium.com/analytics-vidhya/simple-way-to-extract-search-query-intent-in-search-engine-bigquery-solr-c049fb5b4592?source=collection_archive---------19-----------------------#2020-05-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><p id="b6c1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">大多数现代搜索引擎，如<strong class="io hj"> solr </strong>和<strong class="io hj"> elastic search </strong>在运行搜索查询时使用<strong class="io hj"> TF-IDF </strong>之类的统计方法来计算相关性。这种方法的主要问题是它依赖于文档中的单词和标记，而这些单词和标记并不总是反映用户在查询中想要什么。<br/>在电子商务网站上尤其如此，因为文档不会有冗长的描述和文本分析方法，像<strong class="io hj"> BM25 </strong>和<strong class="io hj"> TF-IDF </strong>不会单独工作。<br/>例如，当您的文档中有以下文档时，有人可能会搜索<strong class="io hj"> <em class="jk"> iPhone </em> </strong>:</p><ul class=""><li id="5d14" class="jl jm hi io b ip iq it iu ix jn jb jo jf jp jj jq jr js jt bi translated">苹果<strong class="io hj"> iPhone </strong> 8 plus</li><li id="be4d" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj jq jr js jt bi translated"><strong class="io hj"> <em class="jk"> iPhone保护套</em></strong>8 plus/<strong class="io hj"><em class="jk">iPhone</em></strong><em class="jk"/>7 plus</li></ul><p id="4f9a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">有了这些文档，您的引擎将匹配<strong class="io hj">封面</strong>，因为它的词频是<strong class="io hj"> 2 </strong>，而不是<strong class="io hj">手机</strong>的<strong class="io hj"> 1 </strong>。但是，你的客户需求和商业逻辑通常意味着<strong class="io hj">他想要手机</strong>。<br/>这个问题通常可以通过<strong class="io hj">手动查询规则</strong>解决。然而手动发现查询规则<strong class="io hj">是一个困难的问题</strong>并且需要很多努力。幸运的是，我们可以利用<strong class="io hj">查询意图发现方法来生成自动查询规则</strong>。</p></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><h1 id="fd70" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">基本信息</h1><p id="4d7b" class="pw-post-body-paragraph im in hi io b ip kx ir is it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj hb bi translated">在我们继续之前，我们必须谈谈什么是查询规则，什么是查询意图。</p><p id="9a7b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">查询规则</strong>是当我们运行特定查询时<strong class="io hj">修改搜索引擎行为</strong>的规则。例如，我们可以制定一个规则，当客户搜索iPhone时，将提升手机类别。查询规则的问题在于，您需要一位业务专家来创建和跟踪这些规则。</p><p id="e1a8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">搜索查询意图</strong>是一个宽泛的术语，意思是<strong class="io hj">描述客户在网站上搜索某样东西时的意思的信息</strong>。我们可以将其描述为一组关于搜索查询的元数据。例如，对于iPhone查询，它可以是一组移动电话类别和苹果品牌。</p><p id="a46e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，如果我们可以发现查询意图，那么我们就可以<strong class="io hj">创建一个规则来增强意图属性</strong>。这里的问题是找到意图。<br/>通常人们使用机器学习技术来寻找查询意图。在本文中，我们将描述一个简单的没有ML的方法，它可以被用作意图发现的第一个版本。</p><h1 id="102e" class="jz ka hi bd kb kc lc ke kf kg ld ki kj kk le km kn ko lf kq kr ks lg ku kv kw bi translated"><strong class="ak">解决方案</strong></h1><p id="ebb7" class="pw-post-body-paragraph im in hi io b ip kx ir is it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj hb bi translated">为了回答用户在搜索<strong class="io hj"> iPhone </strong>时的意图，我们可以跟踪他点击时结束的<strong class="io hj">项目。我们可以使用谷歌分析来捕捉用户点击，然后使用它来发现如下意图:</strong></p><ol class=""><li id="1a94" class="jl jm hi io b ip iq it iu ix jn jb jo jf jp jj lh jr js jt bi translated">使用Google Analytics捕获用户的搜索查询和文档点击，并将其存储在Google Big query上。</li><li id="0d28" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj lh jr js jt bi translated">运行一个作业，该作业将定期运行查询以获取用户的搜索查询和用户已单击项目的属性，然后按这些属性进行分组，并统计每个属性的点击次数。</li><li id="9335" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj lh jr js jt bi translated">在你的搜索引擎上创建一个新的索引(solr或elastic search ),用它们的属性和计数来索引搜索查询。</li><li id="4bcd" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj lh jr js jt bi translated">当您得到一个新的查询时，只需通过对属性做一个方面并对计数求和来搜索您的索引。</li><li id="fc45" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj lh jr js jt bi translated">按数量对你的属性进行排序，得到最上面的几个。</li><li id="52db" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj lh jr js jt bi translated">现在，这组属性和它们的流行度计数将成为这个查询的目的。</li><li id="f706" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj lh jr js jt bi translated">向您的主搜索查询添加一个boost查询，根据您已经获得的属性字段进行boost。</li></ol><p id="eda0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了进一步说明这个想法，你可以查看下图。</p><figure class="lj lk ll lm fd ln er es paragraph-image"><div class="er es li"><img src="../Images/dfde9ccbea2781484cf027f2dad44923.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/format:webp/1*Mt6NpPVv7PoU9un5k1NwlQ.png"/></div></figure></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><h1 id="0955" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">进一步说明</h1><ul class=""><li id="edfe" class="jl jm hi io b ip kx it ky ix lq jb lr jf ls jj jq jr js jt bi translated">这不是意图发现的唯一用例，还有许多其他用例。因此，如果你有一个大网站，拥有意图发现系统是一个好主意。</li><li id="2846" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj jq jr js jt bi translated">尽管这是一个简单的方法，但无论如何最好还是拥有它，因为它可能是其他更复杂方法的基础。例如，收集的查询和属性数据可以用作机器学习意图发现解决方案的学习数据。</li><li id="4277" class="jl jm hi io b ip ju it jv ix jw jb jx jf jy jj jq jr js jt bi translated">这种方法的一个问题是很难找到新查询的意图，因为在意图索引上没有文档。然而，使用方面将有助于从类似的查询中收集意图。例如，如果您有来自男性时尚类别的男鞋的意向，并且阿迪达斯鞋有阿迪达斯品牌的意向，那么您可以发现阿迪达斯男鞋将来自具有阿迪达斯品牌的男性时尚类别，因为我们正在对指数做一个方面，并对属性的总体流行度计数进行求和。</li></ul><p id="e79d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">不幸的是，如果你有一个有偏见的指数，这并不总是有效的。例如，当我们在查询中使用阿迪达斯这个词时，你可能会有很多阿迪达斯品牌的女性时尚产品，使其比男性时尚产品更受欢迎。幸运的是，您可以通过在计算项目数时考虑IDF(逆文档频率)来解决这个问题。换句话说，如果某个属性值存在于许多搜索查询意图中，则通过对该属性值进行折扣。</p><p id="70fb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在本文中，我们讨论了如何以简单的方式获取查询意图。如果你喜欢它，请鼓掌，并关注我，获取更多的搜索和信息检索文章。</p></div></div>    
</body>
</html>