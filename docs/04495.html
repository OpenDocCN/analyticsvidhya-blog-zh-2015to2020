<html>
<head>
<title>AWS S3 with Java using Spring Boot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS S3与Java使用Spring Boot</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/aws-s3-with-java-using-spring-boot-7f6fcf734aec?source=collection_archive---------0-----------------------#2020-03-22">https://medium.com/analytics-vidhya/aws-s3-with-java-using-spring-boot-7f6fcf734aec?source=collection_archive---------0-----------------------#2020-03-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="68d9" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">一个功能教程，创建相册项目。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/af302379b48f41efa330d67628bdf18b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*meDufEEM20Q9HTWA-oPGoA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">Spring + AWS S3 +创客项目</figcaption></figure><p id="b1a6" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">今天，我将向您展示如何实现这一点，为此您需要:</p><ol class=""><li id="0316" class="kj kk hi jp b jq jr jt ju jw kl ka km ke kn ki ko kp kq kr bi translated">具有Spring框架的中级知识</li><li id="73ff" class="kj kk hi jp b jq ks jt kt jw ku ka kv ke kw ki ko kp kq kr bi translated">AWS帐户</li><li id="7315" class="kj kk hi jp b jq ks jt kt jw ku ka kv ke kw ki ko kp kq kr bi translated">Java 11+和Maven</li><li id="4ab4" class="kj kk hi jp b jq ks jt kt jw ku ka kv ke kw ki ko kp kq kr bi translated">MongoDB</li></ol><h2 id="5a95" class="kx ky hi bd kz la lb lc ld le lf lg lh jw li lj lk ka ll lm ln ke lo lp lq lr bi translated">我喜欢从后端开始</h2><p id="16bf" class="pw-post-body-paragraph jn jo hi jp b jq ls ij js jt lt im jv jw lu jy jz ka lv kc kd ke lw kg kh ki hb bi translated">更简单的做法是从后端开始，为此，我们需要在AWS S3上创建一个Bucket。桶是一个简单的抽象概念，我们知道“我的文件在哪里？”。</p><h2 id="6d43" class="kx ky hi bd kz la lb lc ld le lf lg lh jw li lj lk ka ll lm ln ke lo lp lq lr bi translated">准备AWS S3</h2><p id="8f46" class="pw-post-body-paragraph jn jo hi jp b jq ls ij js jt lt im jv jw lu jy jz ka lv kc kd ke lw kg kh ki hb bi translated">在您的AWS控制台中，转到存储会话并单击S3:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ly"><img src="../Images/4dd7077afdf2eded9a3cd361a0c275c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/format:webp/1*q5DhSw2hiMd4TFRpQbmY9g.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">AWS &gt;存储&gt; S3</figcaption></figure><p id="afd1" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">点击<strong class="jp hj">【创建桶】</strong>:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lz"><img src="../Images/11bc1836d353f601afa2277806064930.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xp2unzAEmtuWIzcy-wHsuQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">亚马逊S3 —桶屏幕</figcaption></figure><p id="8f44" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在，您需要告知关于您的存储桶的基本信息，以便您在以后维护时识别它(存储桶名称在所有亚马逊S3上是唯一的):</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ma"><img src="../Images/915f415df7fa2f011b6df976dd323bb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yNvDB2O0JHkaTltmlGhREw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">创建存储桶形式</figcaption></figure><p id="403c" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">好了，现在你在AWS S3上有一个bucket，现在我们需要创建一个<strong class="jp hj">【访问密钥】</strong>和<strong class="jp hj">【秘密密钥】</strong>来访问你在<strong class="jp hj"> AWS Java SDK上的bucket。</strong>返回AWS控制台，在<strong class="jp hj">安全、身份、&amp;合规组</strong>上搜索<strong class="jp hj">“IAM</strong>:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mb"><img src="../Images/949628c1e5c5e6af187315922e569875.png" data-original-src="https://miro.medium.com/v2/resize:fit:570/format:webp/1*_kQ9aUw_I3S8VkwXWS_2vg.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">AWS &gt;安全性、身份和合规性&gt; IAM</figcaption></figure><p id="874e" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">不要害怕这个面板，我们不需要在这里做任何改变，进入<strong class="jp hj">“用户”</strong>菜单，点击<strong class="jp hj">“添加用户”:</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mc"><img src="../Images/c8d1a4cfb40a760c2e8a39c5a2b59008.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Fq_ZpPr-I03ybsyih0TNg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">在AWS上创建用户</figcaption></figure><p id="fefa" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">遵循以下步骤:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es md"><img src="../Images/fcf2590006b4d1d52a21c2abcfbc7681.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G0RzNTsG9B7e8tYdQCyirA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">在AWS上创建用户—步骤1 —用户信息</figcaption></figure><p id="dfdc" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在，在第二步，您需要选择<strong class="jp hj">“Amazon S3 full access”</strong>，因为该用户将在您的存储桶中添加/删除图像。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es me"><img src="../Images/402c9c159d9fbc708ce4812c61370e49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lZ3HlNzfnnIuAoqzpeghgg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">在AWS上创建用户—步骤2 —权限</figcaption></figure><p id="9740" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">第3步，<strong class="jp hj">“添加标签”</strong>是可选的，所以，转到第4步，<strong class="jp hj">“审核”</strong>和<strong class="jp hj">“创建用户”。</strong></p><p id="f95a" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">好的，现在，在第5步，AWS向我们显示您的<strong class="jp hj">“访问密钥ID”</strong>和<strong class="jp hj">“秘密访问密钥”，复制并且不要忘记这一点！</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mf"><img src="../Images/abb90688507da1f75db887d716da4083.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nZtEVspdPHft7uHLltl0fA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">在AWS上创建用户—步骤5 —访问密钥和秘密密钥</figcaption></figure><h2 id="e700" class="kx ky hi bd kz la lb lc ld le lf lg lh jw li lj lk ka ll lm ln ke lo lp lq lr bi translated">创建Spring项目</h2><p id="b6bc" class="pw-post-body-paragraph jn jo hi jp b jq ls ij js jt lt im jv jw lu jy jz ka lv kc kd ke lw kg kh ki hb bi translated">考虑到你对Spring框架有中级的了解，转到<a class="ae mg" href="https://start.spring.io/" rel="noopener ugc nofollow" target="_blank"> Spring Initializr </a>并创建你的项目。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mh"><img src="../Images/860f29d79e243d943b73876f84ddfd84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xjVN5KjC8RplbA_n9GXiDg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">Spring Initializr —步骤1 —项目信息</figcaption></figure><p id="000a" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">有了这些依赖关系:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mi"><img src="../Images/5eb1d25a4ddf9a78f51db1e7a065f22e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aXF7iK1-t-hfDzLp6pyrdA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">Spring Initializr —步骤2—依赖性</figcaption></figure><p id="bbf4" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在，点击<strong class="jp hj">“生成”。</strong></p><p id="d51b" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">解压缩您的项目并在您最喜欢的IDE上打开，在我的例子中是IntelliJ。</p><p id="08f6" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">首先，我们需要在项目中导入<strong class="jp hj"> AWS Java SDK </strong>，转到您的<strong class="jp hj"> "pom.xml" </strong>并添加依赖项:</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="36da" class="kx ky hi mk b fi mo mp l mq mr">&lt;!-- Maker, to create the API more faster --&gt;<br/>&lt;dependency&gt;<br/>   &lt;groupId&gt;com.github.gustavovitor&lt;/groupId&gt;<br/>   &lt;artifactId&gt;maker-mongo&lt;/artifactId&gt;<br/>   &lt;version&gt;${maker-mongo.version}&lt;/version&gt;<br/>&lt;/dependency&gt;</span><span id="0684" class="kx ky hi mk b fi ms mp l mq mr">&lt;!-- Amazon S3 --&gt;<br/>&lt;dependency&gt;<br/>   &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;<br/>   &lt;artifactId&gt;aws-java-sdk&lt;/artifactId&gt;<br/>   &lt;version&gt;${amazon-sdk.version}&lt;/version&gt;<br/>&lt;/dependency&gt;<br/><br/>&lt;!-- Apache Commons for FileUtils and misc. --&gt;<br/>&lt;dependency&gt;<br/>   &lt;groupId&gt;commons-io&lt;/groupId&gt;<br/>   &lt;artifactId&gt;commons-io&lt;/artifactId&gt;<br/>   &lt;version&gt;${commons-io.version}&lt;/version&gt;<br/>&lt;/dependency&gt;</span></pre><p id="79bf" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">属性:</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="a9ed" class="kx ky hi mk b fi mo mp l mq mr">&lt;properties&gt;<br/>    &lt;java.version&gt;11&lt;/java.version&gt;<br/>    &lt;maker-mongo.version&gt;0.0.6&lt;/maker-mongo.version&gt;<br/>    &lt;amazon-sdk.version&gt;1.11.728&lt;/amazon-sdk.version&gt;<br/>    &lt;commons-io.version&gt;2.6&lt;/commons-io.version&gt;<br/>&lt;/properties&gt;</span></pre><p id="2c76" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">好的，基本上,<strong class="jp hj"> AWS Java SDK </strong>像API一样工作，你需要对AWS API进行一次调用，然后将你的文件发送到bucket。</p><p id="94f0" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在<strong class="jp hj"> application.properties </strong>上添加这些属性:</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="01ae" class="kx ky hi mk b fi mo mp l mq mr">amazon.s3.bucket-name=awesome-project-java-flutter<br/>amazon.s3.endpoint=https://awesome-project-java-flutter.s3-sa-east-1.amazonaws.com/<br/>amazon.s3.access-key=${ACCESS_KEY}<br/>amazon.s3.secret-key=${SECRET_KEY}</span></pre><p id="5af5" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">为了更安全，在你的机器中创建两个环境变量，<strong class="jp hj"> ACCESS_KEY </strong>和<strong class="jp hj"> SECRET_KEY </strong>，并用IAM信息填充它。</p><p id="935a" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在，创建一个AmazonClientService:</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="cca0" class="kx ky hi mk b fi mo mp l mq mr">package com.github.gustavovitor.photos.service.amazon;</span><span id="2b6d" class="kx ky hi mk b fi ms mp l mq mr">import com.amazonaws.auth.AWSStaticCredentialsProvider;<br/>import com.amazonaws.auth.BasicAWSCredentials;<br/>import com.amazonaws.regions.Regions;<br/>import com.amazonaws.services.s3.AmazonS3;<br/>import com.amazonaws.services.s3.AmazonS3ClientBuilder;<br/>import org.springframework.beans.factory.annotation.Value;<br/>import org.springframework.stereotype.Service;<br/><br/>import javax.annotation.PostConstruct;<br/><br/>@Service<br/>public class AmazonClientService {<br/><br/>    // AmazonS3 Client, in this object you have all AWS API calls about S3.<br/>    private AmazonS3 amazonS3;<br/><br/>    // Your bucket URL, this URL is https://{bucket-name}.s3-{region}.amazonaws.com/<br/>    // If you don't know if your URL is ok, send one file to your bucket using AWS and<br/>    // click on them, the file URL contains your bucket URL.<br/>    @Value("${amazon.s3.endpoint}")<br/>    private String url;<br/><br/>    // Your bucket name.<br/>    @Value("${amazon.s3.bucket-name}")<br/>    private String bucketName;<br/><br/>    // The IAM access key.<br/>    @Value("${amazon.s3.access-key}")<br/>    private String accessKey;<br/><br/>    // The IAM secret key.<br/>    @Value("${amazon.s3.secret-key}")<br/>    private String secretKey;<br/><br/>    // Getters for parents.<br/>    protected AmazonS3 getClient() {<br/>        return amazonS3;<br/>    }<br/><br/>    protected String getUrl() {<br/>        return url;<br/>    }<br/><br/>    protected String getBucketName() {<br/>        return bucketName;<br/>    }<br/><br/>    // This method are called after Spring starts AmazonClientService into your container.<br/>    @PostConstruct<br/>    private void init() {<br/><br/>        // Init your AmazonS3 credentials using BasicAWSCredentials.<br/>        BasicAWSCredentials credentials = new BasicAWSCredentials(accessKey, secretKey);<br/><br/>        // Start the client using AmazonS3ClientBuilder, here we goes to make a standard cliente, in the<br/>        // region SA_EAST_1, and the basic credentials.<br/>        this.amazonS3 = AmazonS3ClientBuilder.<em class="lx">standard</em>()<br/>                .withRegion(Regions.<em class="lx">SA_EAST_1</em>)<br/>                .withCredentials(new AWSStaticCredentialsProvider(credentials))<br/>                .build();<br/>    }<br/><br/>}</span></pre><p id="d410" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">好的，有了这个客户端，你可以扩展他们来使用在线客户端。</p><p id="f658" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在，我们需要保存关于AWS图像的基本信息，为此，我们创建一个简单的域/文档:</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="2257" class="kx ky hi mk b fi mo mp l mq mr">package com.github.gustavovitor.photos.domain.amazon;</span><span id="d16c" class="kx ky hi mk b fi ms mp l mq mr">import lombok.Data;<br/>import org.springframework.data.annotation.Id;<br/>import org.springframework.data.mongodb.core.mapping.Document;<br/><br/>import javax.validation.constraints.NotNull;<br/><br/>@Data<br/>@Document<br/>public class AmazonImage {<br/><br/>    @Id<br/>    private String amazonUserImageId;<br/><br/>    @NotNull<br/>    private String imageUrl;<br/><br/>}</span></pre><p id="7e47" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在Spring之后，为它创建一个存储库:</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="ac55" class="kx ky hi mk b fi mo mp l mq mr">package com.github.gustavovitor.photos.repository.amazon;<br/><br/>import com.github.gustavovitor.photos.domain.amazon.AmazonImage;<br/>import org.springframework.data.mongodb.repository.MongoRepository;<br/><br/>public interface AmazonImageRepository extends MongoRepository&lt;AmazonImage, String&gt; {<br/>}</span></pre><p id="ccd4" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">Spring为我们提供了一个特殊的表单数据，叫做<strong class="jp hj"> MultipartFile </strong>，但是你不能在你的bucket上上传这个类型，bucket需要一个<strong class="jp hj"> java.io.File </strong>来代替。因此，为了进行这种转换，我们需要创建一个Util类，如下所示:</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="a22c" class="kx ky hi mk b fi mo mp l mq mr">package com.github.gustavovitor.photos.util;<br/><br/>import org.springframework.web.multipart.MultipartFile;<br/><br/>import java.io.File;<br/>import java.io.FileOutputStream;<br/>import java.io.IOException;<br/>import java.util.Date;<br/>import java.util.Objects;<br/><br/>public class FileUtils {<br/><br/>    public static File convertMultipartToFile(MultipartFile file) throws IOException {<br/>        File convertedFile = new File(Objects.<em class="lx">requireNonNull</em>(file.getOriginalFilename()));<br/>        FileOutputStream fileOutputStream = new FileOutputStream(convertedFile);<br/>        fileOutputStream.write(file.getBytes());<br/>        fileOutputStream.close();<br/>        return convertedFile;<br/>    }<br/><br/>    public static String generateFileName(MultipartFile multipartFile) {<br/>        return new Date().getTime() + "-" + Objects.<em class="lx">requireNonNull</em>(multipartFile.getOriginalFilename()).replace(" ", "_");<br/>    }<br/><br/>}</span></pre><p id="90f6" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">太棒了，现在我们可以做一个服务来发送图像到bucket:</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="d8a9" class="kx ky hi mk b fi mo mp l mq mr">package com.github.gustavovitor.photos.service.amazon;<br/><br/>import com.amazonaws.services.s3.model.CannedAccessControlList;<br/>import com.amazonaws.services.s3.model.DeleteObjectRequest;<br/>import com.amazonaws.services.s3.model.PutObjectRequest;<br/>import com.github.gustavovitor.photos.domain.amazon.AmazonImage;<br/>import com.github.gustavovitor.photos.repository.amazon.AmazonImageRepository;<br/>import com.github.gustavovitor.photos.service.amazon.except.FileConversionException;<br/>import com.github.gustavovitor.photos.service.amazon.except.InvalidImageExtensionException;<br/>import com.github.gustavovitor.photos.service.amazon.util.AmazonClientService;<br/>import com.github.gustavovitor.photos.util.FileUtils;<br/>import com.github.gustavovitor.util.MessageUtil;<br/>import lombok.extern.log4j.Log4j2;<br/>import org.apache.commons.io.FilenameUtils;<br/>import org.springframework.beans.factory.annotation.Autowired;<br/>import org.springframework.stereotype.Service;<br/>import org.springframework.web.multipart.MultipartFile;<br/><br/>import java.io.File;<br/>import java.io.IOException;<br/>import java.util.ArrayList;<br/>import java.util.Arrays;<br/>import java.util.List;<br/><br/>@Log4j2<br/>@Service<br/>public class AmazonS3ImageService extends AmazonClientService {<br/><br/>    @Autowired<br/>    private AmazonImageRepository amazonImageRepository;<br/><br/>    // Upload a List of Images to AWS S3.<br/>    public List&lt;AmazonImage&gt; insertImages(List&lt;MultipartFile&gt; images) {<br/>        List&lt;AmazonImage&gt; amazonImages = new ArrayList&lt;&gt;();<br/>        images.forEach(image -&gt; amazonImages.add(uploadImageToAmazon(image)));<br/>        return amazonImages;<br/>    }<br/><br/>    // Upload image to AWS S3.<br/>    public AmazonImage uploadImageToAmazon(MultipartFile multipartFile) {<br/><br/>        // Valid extensions array, like jpeg/jpg and png.<br/>        List&lt;String&gt; validExtensions = Arrays.<em class="lx">asList</em>("jpeg", "jpg", "png");<br/><br/>        // Get extension of MultipartFile<br/>        String extension = FilenameUtils.<em class="lx">getExtension</em>(multipartFile.getOriginalFilename());<br/>        if (!validExtensions.contains(extension)) {<br/>            // If file have a invalid extension, call an Exception.<br/>            <em class="lx">log</em>.warn(MessageUtil.<em class="lx">getMessage</em>("invalid.image.extesion"));<br/>            throw new InvalidImageExtensionException(validExtensions);<br/>        } else {<br/><br/>            // Upload file to Amazon.<br/>            String url = uploadMultipartFile(multipartFile);<br/><br/>            // Save image information on MongoDB and return them.<br/>            AmazonImage amazonImage = new AmazonImage();<br/>            amazonImage.setImageUrl(url);<br/><br/>            return amazonImageRepository.insert(amazonImage);<br/>        }<br/><br/>    }<br/><br/>    public void removeImageFromAmazon(AmazonImage amazonImage) {<br/>        String fileName = amazonImage.getImageUrl().substring(amazonImage.getImageUrl().lastIndexOf("/") + 1);<br/>        getClient().deleteObject(new DeleteObjectRequest(getBucketName(), fileName));<br/>        amazonImageRepository.delete(amazonImage);<br/>    }<br/><br/>    // Make upload to Amazon.<br/>    private String uploadMultipartFile(MultipartFile multipartFile) {<br/>        String fileUrl;<br/><br/>        try {<br/>            // Get the file from MultipartFile.<br/>            File file = FileUtils.<em class="lx">convertMultipartToFile</em>(multipartFile);<br/><br/>            // Extract the file name.<br/>            String fileName = FileUtils.<em class="lx">generateFileName</em>(multipartFile);<br/><br/>            // Upload file.<br/>            uploadPublicFile(fileName, file);<br/><br/>            // Delete the file and get the File Url.<br/>            file.delete();<br/>            fileUrl = getUrl().concat(fileName);<br/>        } catch (IOException e) {<br/><br/>            // If IOException on conversion or any file manipulation, call exception.<br/>            <em class="lx">log</em>.warn(MessageUtil.<em class="lx">getMessage</em>("multipart.to.file.convert.except"), e);<br/>            throw new FileConversionException();<br/>        }<br/><br/>        return fileUrl;<br/>    }<br/><br/>    // Send image to AmazonS3, if have any problems here, the image fragments are removed from amazon.<br/>    // Font: https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/AmazonS3Client.html#putObject%28com.amazonaws.services.s3.model.PutObjectRequest%29<br/>    private void uploadPublicFile(String fileName, File file) {<br/>        getClient().putObject(new PutObjectRequest(getBucketName(), fileName, file)<br/>                .withCannedAcl(CannedAccessControlList.<em class="lx">PublicRead</em>));<br/>    }<br/><br/>}</span></pre><p id="68f5" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这是我现在的项目:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mt"><img src="../Images/12f5990b4df69e73ac490b8fd7d47275.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*4UK7W5RiRvA_e4rvDb8sPA.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">项目设计模式</figcaption></figure><p id="ee33" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">如果你读了AWS S3的这篇文章，这就是你需要知道的一切，在这之后，我将向你展示关于<a class="ae mg" href="https://github.com/gustavovitor/maker" rel="noopener ugc nofollow" target="_blank">创客项目</a>和Flutter(在另一篇文章中，这篇文章太长了)的代码。</p><h2 id="b97e" class="kx ky hi bd kz la lb lc ld le lf lg lh jw li lj lk ka ll lm ln ke lo lp lq lr bi translated">构建一个简单的相册API</h2><p id="6ac9" class="pw-post-body-paragraph jn jo hi jp b jq ls ij js jt lt im jv jw lu jy jz ka lv kc kd ke lw kg kh ki hb bi translated">这个API非常简单，我们需要一个API路径来上传照片，另一个路径来获取关于这些照片的信息，对吗？所以我想用<a class="ae mg" href="https://github.com/gustavovitor/maker" rel="noopener ugc nofollow" target="_blank">创客项目</a>来为我们做这件事。</p><p id="0c4e" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><a class="ae mg" href="https://github.com/gustavovitor/maker" rel="noopener ugc nofollow" target="_blank">创客项目</a>是利用Spring框架加快RestAPI开发时间的抽象，谁？</p><p id="2b16" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">每个被赦免的API都需要大量的CRUD(创建读取更新删除)操作，这些CRUD会耗费时间，对我来说时间太短了。想到这一点，我为我的个人项目创建了Maker，有了它，我可以在10分钟内构建一个CRUD API，并应用所有的业务规则。</p><p id="4e97" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">使用<a class="ae mg" href="https://github.com/gustavovitor/maker" rel="noopener ugc nofollow" target="_blank"> Maker Project </a>你可以把所有的时间都集中在商业规则上。</p><p id="664a" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">所以，让我们去创建相册实体:</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="d874" class="kx ky hi mk b fi mo mp l mq mr">package com.github.gustavovitor.photos.domain.album;<br/><br/>import com.github.gustavovitor.photos.domain.amazon.AmazonImage;<br/>import lombok.Data;<br/>import org.springframework.data.annotation.Id;<br/>import org.springframework.data.mongodb.core.mapping.Document;<br/><br/>import javax.validation.constraints.NotBlank;<br/>import javax.validation.constraints.NotNull;<br/>import javax.validation.constraints.Size;<br/>import java.util.List;<br/><br/>@Data<br/>@Document<br/>public class Album {<br/><br/>    @Id<br/>    private String albumId;<br/><br/>    @Size(max = 64)<br/>    @NotNull<br/>    @NotBlank<br/>    private String title;<br/><br/>    // A list of AmazonImage, for this simple project, the AmazonImage is one request<br/>    // and AlgumPhoto is another request.<br/>    private List&lt;AmazonImage&gt; images;<br/><br/>}</span></pre><p id="0d29" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">好了，现在我们需要为相册创建一个specification object(Maker需求):</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="4f40" class="kx ky hi mk b fi mo mp l mq mr">package com.github.gustavovitor.photos.repository.album.spec;<br/><br/>import com.github.gustavovitor.maker.repository.MongoSpecificationBase;<br/>import com.github.gustavovitor.photos.domain.album.Album;<br/>import com.github.gustavovitor.photos.domain.album.QAlbum;<br/>import com.querydsl.core.BooleanBuilder;<br/>import com.querydsl.core.types.Predicate;<br/><br/>import javax.management.ReflectionException;<br/><br/>import static java.util.Objects.<em class="lx">nonNull</em>;<br/><br/>public class AlbumSpecification extends MongoSpecificationBase&lt;Album&gt; {<br/>    public AlbumSpecification(Album object) throws ReflectionException {<br/>        super(object);<br/>    }<br/><br/>    @Override<br/>    public Predicate toPredicate() {<br/>        BooleanBuilder builder = new BooleanBuilder();<br/>        if (<em class="lx">nonNull</em>(getObject().getTitle())) {<br/>            builder.and(QAlbum.<em class="lx">album</em>.title.containsIgnoreCase(getObject().getTitle()));<br/>        }<br/>        return builder;<br/>    }<br/>}</span></pre><p id="7017" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj"> QAlbum.class </strong>在哪里？QAlbum是使用一个插件来生成的，在pom.xml中添加以下插件:</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="6ce6" class="kx ky hi mk b fi mo mp l mq mr">&lt;!-- Code Generation QueryDsl --&gt;<br/>&lt;plugin&gt;<br/>   &lt;groupId&gt;com.mysema.maven&lt;/groupId&gt;<br/>   &lt;artifactId&gt;apt-maven-plugin&lt;/artifactId&gt;<br/>   &lt;version&gt;1.1.3&lt;/version&gt;<br/>   &lt;dependencies&gt;<br/>      &lt;dependency&gt;<br/>         &lt;groupId&gt;com.querydsl&lt;/groupId&gt;<br/>         &lt;artifactId&gt;querydsl-apt&lt;/artifactId&gt;<br/>         &lt;version&gt;4.2.2&lt;/version&gt;<br/>      &lt;/dependency&gt;<br/>   &lt;/dependencies&gt;<br/>   &lt;executions&gt;<br/>      &lt;execution&gt;<br/>         &lt;phase&gt;generate-sources&lt;/phase&gt;<br/>         &lt;goals&gt;<br/>            &lt;goal&gt;process&lt;/goal&gt;<br/>         &lt;/goals&gt;<br/>         &lt;configuration&gt;<br/>            &lt;outputDirectory&gt;target/generated-sources/apt&lt;/outputDirectory&gt;<br/>            &lt;processor&gt;<br/>               org.springframework.data.mongodb.repository.support.MongoAnnotationProcessor<br/>            &lt;/processor&gt;<br/>            &lt;logOnlyOnError&gt;true&lt;/logOnlyOnError&gt;<br/>         &lt;/configuration&gt;<br/>      &lt;/execution&gt;<br/>   &lt;/executions&gt;<br/>&lt;/plugin&gt;</span></pre><p id="7bf3" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">之后，运行命令"<em class="lx">mvn clean install-DskipTests "</em>生成代码。</p><blockquote class="mu mv mw"><p id="3948" class="jn jo lx jp b jq jr ij js jt ju im jv mx jx jy jz my kb kc kd mz kf kg kh ki hb bi translated">注意:您需要在IDE中指定生成的源代码根目录，在我的例子中，使用IntelliJ，我需要右键单击/target/generated-sources并将目录标记为-&gt; Generated Sources Root。</p></blockquote><p id="d75c" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在，我们需要创建一个存储库:</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="dc6a" class="kx ky hi mk b fi mo mp l mq mr">package com.github.gustavovitor.photos.repository.album;<br/><br/>import com.github.gustavovitor.maker.repository.MongoRepositoryMaker;<br/>import com.github.gustavovitor.photos.domain.album.Album;<br/><br/>public interface AlbumRepository extends MongoRepositoryMaker&lt;Album, String&gt; {<br/>}</span></pre><blockquote class="mu mv mw"><p id="5941" class="jn jo lx jp b jq jr ij js jt ju im jv mx jx jy jz my kb kc kd mz kf kg kh ki hb bi translated">注意:扩展了MongoRepositoryMaker，使用Maker项目为我们做方法。</p></blockquote><p id="89f0" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">好，现在，创建一个服务:</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="254a" class="kx ky hi mk b fi mo mp l mq mr">package com.github.gustavovitor.photos.service.album;<br/><br/>import com.github.gustavovitor.maker.service.MongoServiceMaker;<br/>import com.github.gustavovitor.photos.domain.album.Album;<br/>import com.github.gustavovitor.photos.repository.album.AlbumRepository;<br/>import com.github.gustavovitor.photos.repository.album.spec.AlbumSpecification;<br/>import org.springframework.stereotype.Service;<br/><br/>@Service<br/>public class AlbumService extends MongoServiceMaker&lt;AlbumRepository, Album, String, Album, AlbumSpecification&gt; {<br/>    @Override<br/>    public void beforeInsert(Album object) {<br/>        // Business rules here.<br/>    }<br/><br/>    @Override<br/>    public void beforeUpdate(String objectId, Album object) {<br/>        // Business rules here.<br/>    }<br/><br/>    @Override<br/>    public void beforePatch(Album object) {<br/>        // Business rules here.<br/>    }<br/><br/>    @Override<br/>    public void beforeDelete(String objectId) {<br/>        // Business rules here.<br/>    }<br/>}</span></pre><p id="6136" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">Maker项目为我们做了很多方法，在MongoServiceMaker里面你可以看到这些方法。</p><p id="d2da" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">好了，现在，我们需要创建资源/端点:</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="5f1f" class="kx ky hi mk b fi mo mp l mq mr">package com.github.gustavovitor.photos.resource.album;<br/><br/>import com.github.gustavovitor.maker.resource.MongoResourceMaker;<br/>import com.github.gustavovitor.photos.domain.album.Album;<br/>import com.github.gustavovitor.photos.service.album.AlbumService;<br/>import org.springframework.web.bind.annotation.RequestMapping;<br/>import org.springframework.web.bind.annotation.RestController;<br/><br/>@RestController<br/>@RequestMapping("/album")<br/>public class AlbumResource extends MongoResourceMaker&lt;AlbumService, Album, String, Album&gt; {<br/><br/>}</span></pre><p id="f0e4" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">最后，亚马逊还有一个资源/端点:</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="e647" class="kx ky hi mk b fi mo mp l mq mr">package com.github.gustavovitor.photos.resource.amazon;<br/><br/>import com.github.gustavovitor.photos.domain.amazon.AmazonImage;<br/>import com.github.gustavovitor.photos.service.amazon.AmazonS3ImageService;<br/>import lombok.Getter;<br/>import org.springframework.beans.factory.annotation.Autowired;<br/>import org.springframework.http.ResponseEntity;<br/>import org.springframework.web.bind.annotation.PostMapping;<br/>import org.springframework.web.bind.annotation.RequestMapping;<br/>import org.springframework.web.bind.annotation.RequestPart;<br/>import org.springframework.web.bind.annotation.RestController;<br/>import org.springframework.web.multipart.MultipartFile;<br/><br/>import java.util.List;<br/><br/>@Getter<br/>@RestController<br/>@RequestMapping("/amazon")<br/>public class AmazonResource {<br/><br/>    @Autowired<br/>    private AmazonS3ImageService amazonS3ImageService;<br/><br/>    @PostMapping("/images")<br/>    public ResponseEntity&lt;List&lt;AmazonImage&gt;&gt; insertImages(@RequestPart(value = "images") List&lt;MultipartFile&gt; images) {<br/>        return ResponseEntity.<em class="lx">ok</em>(getAmazonS3ImageService().insertImages(images));<br/>    }<br/><br/>}</span></pre><h2 id="c1c2" class="kx ky hi bd kz la lb lc ld le lf lg lh jw li lj lk ka ll lm ln ke lo lp lq lr bi translated">我们去测试一下？</h2><p id="726e" class="pw-post-body-paragraph jn jo hi jp b jq ls ij js jt lt im jv jw lu jy jz ka lv kc kd ke lw kg kh ki hb bi translated">首先，在application.properties上配置MongoDB访问，如下所示:</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="a7bd" class="kx ky hi mk b fi mo mp l mq mr">spring.data.mongodb.host=172.17.0.2<br/>spring.data.mongodb.database=photo</span></pre><p id="f8a8" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">并启动您的Spring应用程序。</p><blockquote class="mu mv mw"><p id="4360" class="jn jo lx jp b jq jr ij js jt ju im jv mx jx jy jz my kb kc kd mz kf kg kh ki hb bi translated">注意:如果您得到有关SecurityAutoConfiguration的错误，请在SpringBootApplication中排除该类，这是因为Maker项目包含Spring安全依赖项。</p></blockquote><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="e2ca" class="kx ky hi mk b fi mo mp l mq mr">package com.github.gustavovitor.photos;<br/><br/>import org.springframework.boot.SpringApplication;<br/>import org.springframework.boot.autoconfigure.SpringBootApplication;<br/>import org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration;<br/><br/>@SpringBootApplication(exclude = SecurityAutoConfiguration.class)<br/>public class PhotosApplication {<br/><br/>   public static void main(String[] args) {<br/>      SpringApplication.<em class="lx">run</em>(PhotosApplication.class, args);<br/>   }<br/><br/>}</span></pre><p id="f607" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">首先跟我来测试一下AmazonResource，打开你的Postman或者另一个应用调用API，调用:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es na"><img src="../Images/168f08fdfa2395ec8243a17347afbd98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N-YB6EQmOcxSc-zn6DsoiA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">亚马逊资源响应。</figcaption></figure><p id="ad6f" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj">牛逼！</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es nb"><img src="../Images/4d0ff9e59207ffe4c65f335496ac479c.png" data-original-src="https://miro.medium.com/v2/resize:fit:716/1*Tdr4-3xvqZnBlAPW9iU_AA.gif"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">开心！开心！开心！</figcaption></figure><p id="88f5" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在就结账吧！</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/f0b9f4ab728501b8b2bde59e468977df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ygAKBXpY5rlSjnFjvl6ZtQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">我的天啊。</figcaption></figure><p id="4305" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">好吧，好吧，冷静点！现在，您需要获得请求的响应来发出相册请求:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nd"><img src="../Images/5655315e955ca0f435e66c0d2d610642.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xw4E4boK6JB9LJnNi8nUPg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">插入相册请求。</figcaption></figure><p id="eabe" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj">什么？！帖子？201创建？什么？</strong>耶！制造者为我们做这个，我们需要做这个CRUD的一切，制造者项目为我们做。</p><p id="bf70" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">您可以对您的API进行如下请求:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nd"><img src="../Images/38adf965b9ca5aaaa55f2c9d0720bc84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rZRGIDROW3Hn-nKAxUnKBQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">获取所有相册过滤请求。</figcaption></figure><p id="b243" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">关于<a class="ae mg" href="https://github.com/gustavovitor/maker" rel="noopener ugc nofollow" target="_blank"> Maker项目</a>的更多信息，请阅读GitHub上的文档！</p><p id="3c45" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj">看到了吗？使用Maker将图像发送到AWS S3既简单又快捷！</strong></p><p id="fc11" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">如果您对此有任何疑问，请在我的<a class="ae mg" href="https://www.linkedin.com/in/gustavo-m-369a3011b/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上发表评论或发送私信。</p><p id="f412" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj">将此API与一个Flutter项目集成，遵循另一个教训:</strong><a class="ae mg" rel="noopener" href="/analytics-vidhya/creating-an-album-photo-application-using-flutter-java-and-aws-s3-1d421c432b0d">https://medium . com/analytics-vid hya/creating-an-album-photo-application-using-Flutter-Java-and-AWS-S3-1d 421 c 432 b 0d</a></p><p id="3b3f" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这个API的代码:<a class="ae mg" href="https://github.com/gustavovitor/photo-album" rel="noopener ugc nofollow" target="_blank">https://github.com/gustavovitor/photo-album</a></p></div></div>    
</body>
</html>