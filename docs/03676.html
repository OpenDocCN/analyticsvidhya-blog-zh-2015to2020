<html>
<head>
<title>Bayesian Hierarchical Modelling of NBA 3 point shooting in 2018/19 season</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">2018/19赛季NBA三分球的贝叶斯分层建模</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/bayesian-hierarchical-modelling-of-nba-3-point-shooting-in-2018-19-season-f96ba77bcaab?source=collection_archive---------10-----------------------#2020-02-13">https://medium.com/analytics-vidhya/bayesian-hierarchical-modelling-of-nba-3-point-shooting-in-2018-19-season-f96ba77bcaab?source=collection_archive---------10-----------------------#2020-02-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/936426782a8800e00714984ff41cba58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AHMEZSHWlVm-nejB"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">照片由<a class="ae iu" href="https://unsplash.com/@jcgellidon?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> JC Gellidon </a>在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><p id="7d0e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">根据ESPN NBA网站2018-2019赛季的数据，我将尝试建立贝叶斯分层模型，以找出不同篮球位置的3分百分比。</p><p id="c3c7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ESPN数据集由球员统计数据和球员位置分配组成，如下所示:</p><ul class=""><li id="a2d0" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">控卫</li><li id="4ac2" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">SG:得分后卫</li><li id="7528" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">g:后卫(大概是给既能打PG又能打SG的球员)</li><li id="f6cc" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">小前锋</li><li id="c2f1" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">PF:大前锋</li><li id="7ad0" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">f:前锋(大概是为了既能打SF又能打PF的玩家)</li><li id="841a" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">列车员:中间</li></ul><p id="b050" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">三分投篮的每一个动作都是一个二分法动作:对于每一次尝试，球员要么命中，要么错过。这可以被视为伯努利分布，成功的概率由θ表示。因此，每个球员都有他自己的θ，在多次重复的3分尝试中，N次尝试中的3分投篮的集合变成了基于球员θ和他N次尝试次数的二项式分布</p><h1 id="7ce1" class="kh ki hi bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">简单建模</h1><p id="1e8a" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">考虑一下基本情况，每个球员都可以被视为一个拥有3分投篮技能的个体。正如任何典型的统计人口分布一样，有些球员拥有出色的3分投篮技术(因此他们拥有高θ)，而有些球员的3分投篮技术很差(因此θ很低)。</p><p id="1ac1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这可以用以下内容来表示:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es lk"><img src="../Images/8e9f1e1e87b1f0bf75297d1482693000.png" data-original-src="https://miro.medium.com/v2/resize:fit:384/format:webp/1*bwuKJxAewSdxSetEXBAHWA.png"/></div></figure><p id="e1a4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">其中Y是数据，θ是伯努利分布的参数。</p><p id="13d2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要快速总结贝叶斯规则，</p><ul class=""><li id="c9e4" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">给定数据y的θ参数的后验概率/可信度</li></ul><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es lp"><img src="../Images/df6c7f8da5d7044ed47d859fd9ea2fb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:110/0*JJSXY9CcQJjfhOn0"/></div></figure><ul class=""><li id="ca36" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">给定参数θ的数据的可能性:</li></ul><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es lp"><img src="../Images/c04edcfc326ec99e3b32943db943b53f.png" data-original-src="https://miro.medium.com/v2/resize:fit:110/0*D04Rs69Y5uBa3N5N"/></div></figure><ul class=""><li id="2349" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">没有数据D的参数的先验/可信度</li></ul><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es lq"><img src="../Images/82745e9a20326817446acf8ddab054b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:72/0*pjTG7CrJCZcPc5S0"/></div></figure><ul class=""><li id="e57d" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">边际可能性</li></ul><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es lr"><img src="../Images/686156c7634b928a204768ea0b82f381.png" data-original-src="https://miro.medium.com/v2/resize:fit:84/0*NcoxEZI6nsPiBMZf"/></div></figure><h1 id="1608" class="kh ki hi bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">简单/朴素贝叶斯分层(BH)建模</h1><p id="63a1" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">我们也可以有这样一个概念，所有玩家的技能都来自一个由ωω参数化的共同分布。这类似于说，我们可以从总体分布中生成所有NBA球员的θ。</p><p id="b9d4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">形式上，除了每个球员的3分投篮能力由θ表示之外，我们可以将另一个参数ωω集成到BH模型中，其中ω参数化了不同位置的技能集分布。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es ls"><img src="../Images/598a14140abb43ef987b3e5af72e7843.png" data-original-src="https://miro.medium.com/v2/resize:fit:470/0*Lztx_zr8IrFn5kxw"/></div></figure><p id="d187" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">假设θ以ω为条件，我们可以对θ和ω之间的条件关系进行马尔可夫分解。因此，分子可以表示如下:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es lt"><img src="../Images/8fc0b8ace59ffa66f6760534497b0db2.png" data-original-src="https://miro.medium.com/v2/resize:fit:610/0*nlh0tH_CPgOQ5O8f"/></div></figure><p id="e737" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，总的后验概率可以表示为:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es lu"><img src="../Images/eda191eebcd6c15bd57119f44ebcfdb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:504/0*Nmf7CuRlMFG164Bq"/></div></figure><p id="a752" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这种情况下，ω作为θ分布的先验信念。</p><h1 id="af6d" class="kh ki hi bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">NBA位置的贝叶斯分层模型</h1><p id="6fc7" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">不同的位置会有不同的技能组合，但在每个位置，球员往往有相似的技能组合。这为我们构建贝叶斯分层模型提供了前提。对于那些不熟悉它的人来说，我们将球员位置信息合并到一个层次结构中，这为生成单个球员的技能提供了一个良好的基础。这是基于一个普遍合理的假设，即不同位置的球员拥有更同质的技能。并且这种等级是由总体人口分布决定的，该总体人口分布代表了该特定赛季整个NBA联盟的投篮能力。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lv"><img src="../Images/85c7872564a01925ca374aafba63adac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*InGEcWwvkdFO-5uW.png"/></div></div></figure><p id="7e26" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了帮助促进这种思路，很自然地认为PGs比中锋有更好的3分投篮技术。因此，考虑一个ωω_ pg来参数化所有pg的θ_pg分布，同时考虑一个单独的ωω_ c来参数化所有中心的θ_c分布。不同位置ω的这种分割有助于为相关位置生成更精确的θ，因为组内属性没有被“交叉污染”或稀释。这可以通过下面的公式看出:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lw"><img src="../Images/d51977da6e47ee0e2c7d511ca1afb893.png" data-original-src="https://miro.medium.com/v2/resize:fit:618/0*_4-dOn03duxNxKcg"/></div></div></figure><h1 id="c337" class="kh ki hi bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">BH模型分布的选择</h1><p id="32c6" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">在我们继续之前，我们需要定义纳入BH建模的分布。对于本例，我们将利用以下分布:</p><ul class=""><li id="0887" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">伯努利分布(由θ参数化，限值为0和1)</li><li id="3e19" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">二项式分布(由θ和N参数化，限值为0和N，相同θ的N个独立伯努利试验系列)</li><li id="2386" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">贝塔分布(由A和B参数化，限值为0和1，注意模式ω和浓度κ)</li></ul><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es lx"><img src="../Images/20edac6a760b5e404868777e9624222d.png" data-original-src="https://miro.medium.com/v2/resize:fit:628/0*bkUhXKEef97tlLvH"/></div></figure><ul class=""><li id="8594" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">伽马分布(由形状S和速率R参数化，极限为0和无穷大)</li></ul><h1 id="c043" class="kh ki hi bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">JAGS BH模型图</h1><p id="46f2" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">为了创建分布的模型语法，我们需要将分布合并到最终的后验表示中，如下所示:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ly"><img src="../Images/4843ebd41dfae16157bf0ccc03713f01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RFduUG1YUeLUZo-X"/></div></div></figure><p id="670d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请注意，在最后的验后，我们已经包括了额外的参数，以充分代表分层分组。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/26a69feed43002d319c724e98d9d6e4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*StZ5r4jGOaqS12Y1.png"/></div></div></figure><p id="ef94" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如上面的BH图所示，我们可以从自下而上的方法进行分析(玩家个人技能来自基于位置的技能，而基于位置的技能来自假定的先验)。后验概率由以下分布表示:</p><ul class=""><li id="f39d" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">每个球员的三分球试投由一个伯努利分布表示，参数为θ</li></ul><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es lp"><img src="../Images/22017de80e05146273befba15e3b03d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:110/0*nWWlS5j2zWh2gu4n"/></div></figure><ul class=""><li id="3837" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">每个球员的一系列3分投篮是由θ和尝试次数n参数化的二项式分布。这在图中没有正式显示。</li><li id="f757" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">每个玩家的θ由Beta分布产生，由模式ω_player和浓度κ_player ( <em class="ma">用橙色虚线</em>表示)参数化</li></ul><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es mb"><img src="../Images/edebccb1c5c86289475fdf3a79ce6094.png" data-original-src="https://miro.medium.com/v2/resize:fit:290/0*0FZzLSDWGRfHRYTk"/></div></figure><ul class=""><li id="83fe" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">假设κ_player有条件地独立于任何其他参数，则它的先验被单独给出(<em class="ma">由紫色虚线</em>表示)。这个先验是伽马分布</li></ul><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/3e7b8bd7d71e0e2734758604ef0f8f74.png" data-original-src="https://miro.medium.com/v2/resize:fit:150/0*io4rR6VghiHq-i96"/></div></figure><p id="3f13" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请注意，由于此参数位于层次结构的职位分组级别，我们必须为每个分组创建尽可能多的先验。类似的类比是，对于N个位置，我们总共需要N个ω_pos/κ_pos参数，因此同样地，我们总共需要N个κ_player先验参数。</p><ul class=""><li id="5364" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">每个ω_player由每个玩家位置分组的Beta分布产生，如ω_pos和κ_pos所参数化的(<em class="ma">由粉色虚线</em>表示)</li></ul><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es md"><img src="../Images/61a19ee15498422df7b37c3f1019d147.png" data-original-src="https://miro.medium.com/v2/resize:fit:298/0*neJG35axOAKXq4TR"/></div></figure><ul class=""><li id="ad95" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">每个ω_pos也由先验分布定义，该先验分布是贝塔分布(由红色虚线表示的<em class="ma"/></li></ul><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es me"><img src="../Images/0662837b6b7e7ac76d214e3e47989b27.png" data-original-src="https://miro.medium.com/v2/resize:fit:116/0*n5XsPrEytGNvdGvb"/></div></figure><ul class=""><li id="98b2" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">每个κ_pos由先验分布定义，该先验分布是伽马分布(由深绿色虚线表示的<em class="ma"/></li></ul><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es mf"><img src="../Images/dc6b471d724cf22f9b28d8dccd3f3452.png" data-original-src="https://miro.medium.com/v2/resize:fit:114/0*ShyUVRhYK6RtKnLa"/></div></figure><ul class=""><li id="34b2" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">分母P(Y)代表Y的边际分布。这通常不在JAGS马尔可夫链蒙特卡罗(MCMC)模拟中考虑，因为分母是一个归一化因子，使用MCMC算法(Gibs采样)可以将其抵消。</li></ul><p id="a8dd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">还值得注意的是，先验知识通常被设定为模糊/不确定的，除非一个人已经定义了感兴趣的特定领域的知识。</p><h1 id="0f0f" class="kh ki hi bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">模拟结果</h1><p id="a76c" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">使用“进行贝叶斯数据分析”中的修改脚本在JAGS上运行MCMC模拟，我们得到了以下结果。用500步老化和100步间隔中的变薄来模拟具有独立初始点的3个MCMC链，以降低自相关。</p><h1 id="9735" class="kh ki hi bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">欧米茄的整体分销</h1><p id="0210" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">参数“ω0”表示总体先验β分布，从该分布中生成ω_ pos参数。</p><ul class=""><li id="51bb" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">右上图示出了4802的中等有效样本量(ESS)。根据经验，为了使高密度区间(HDI)分位数限制可信，至少应该在10，000左右，但是在3000以上，估计的平均值/分布模式仍然是可靠的。</li><li id="433e" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">左上图显示了对整个参数范围内3个MCMC链的探索，我们可以观察到这些链进行了充分的探索(请记住，omega来自极限0和1的Beta分布)。</li><li id="eaa6" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">左下方的图表描绘了Gelman图，这是一个诊断图，用于比较链间方差和每个链内方差。基本上，Gelman-Rubin测量了一个称为“尺度缩减因子”的值，该值表示几个链内的方差和几个链之间的方差之间是否存在显著差异。如果比例因子高于1.1，则表明某些MCMC链可能已经卡住，并且可能没有正确收敛。在我们的例子中，比例因子接近1.0，这表明链的收敛。</li><li id="718f" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">右下角的图表描述了每条链的密度图。因为所有的链都有相似的密度，所以我们可以推断出这些模拟相互印证。在参数值的尺度上，所述MCSE表示链中样本均值的估计SD。由于MCSE很小，在这种情况下，模拟估计的标准偏差是可以的。</li></ul><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es mg"><img src="../Images/c48f89c139a28ac9d91d469397130060.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/format:webp/0*8DYX5n2sXFYWVyH9.png"/></div></figure><h1 id="c1da" class="kh ki hi bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">基于位置的Omega分布</h1><p id="aebe" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">对于参数“omega[x]”，其中x是每个位置分组的索引，它表示从“omega 0”生成的位置分组参数。下面的图汇集了每个位置的omega的所有生成的概率分布，其中omega[1]代表中锋的beta分布模式，omega[7]代表得分后卫的beta分布模式。显示了每个分布的95%(默认)HDI，但不幸的是，对于某些位置，分布太窄，以至于叠加的文本相互“阻挡”(例如在omega[7] SG中看到的)。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mh"><img src="../Images/5cf13f0a312ad81ff361d80711c0b6c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_26WsdL1EoJBbIOl.png"/></div></div></figure><p id="7e15" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">正如所料，与后卫或得分后卫等后场角色相比，中锋和前锋等大个子角色的三分球命中率通常要差得多。这可以从分布的模式中看出。此外，与PGs/SGs相比，中锋和前锋的分布也有更大的差异。我们知道这是事实，当有像卡尔-安东尼·唐斯或凯文·乐福这样的球员拥有非凡的三分球能力时，而有像鲁迪·戈伯特或德安德鲁·乔丹这样的中锋却没有这种能力。</p><p id="4659" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有趣的是，大前锋的三分球命中率似乎很高。在检查数据时，帕斯卡尔·西亚卡姆和达尼罗·加里纳利等球员被包括在内。有些PFs的三分球命中率很低，但是那些投篮命中率低的PFs总的出手次数更少。这可以解释为什么这个位置的三分球命中率比预期的要高。</p><p id="ff8a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">另一个有趣的发现是，对于G位置，分布的模式实际上低于PFs，并且也具有更高的分布扩散。也许可以说，由于G位球员扮演双重角色(PG和SG)，他们的分组是具有混合技能的球员，而PFs倾向于折衷具有同质特殊3分投篮技能的球员。</p><h1 id="334b" class="kh ki hi bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">位置ω的差异</h1><p id="7aac" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">我们还可以确定不同位置的ω值的差异。</p><p id="6f7a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下图是中锋和PG位置的简单对比。左上角和右下角的图显示了每个位置的ω值的直方图分布，而右上角的图显示了模拟的差异。我们可以看到，对于(C — PG)，差值的众数是-0.084。然而，这不足以让我们得出存在重大差异的结论。为此，我们依赖直方图的HDI区间。读取该图告诉我们，直方图的99.7%位于0以下，而只有0.3%位于0以上。同样，95%人类发展指数上限为-0.0126。因此，我们可以得出这样的结论:C队和PGs队的三分球命中率有显著差异。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es mi"><img src="../Images/10b634ee4a11ef38b919f1169f47e31e.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/0*zVGZ8cT-Bj55NgBy.png"/></div></figure><p id="3d32" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可以对PF和G位置进行类似的比较。请注意，我们以前遇到过PFs有惊人的3分命中率，而Gs的命中率比PFs低。如右上图所示，关键值0位于位置omegas差异的95% HDI可信区间限值之间。因此，我们不能得出PFs和Gs的三分球命中率有差异的结论。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es mi"><img src="../Images/72f22d9d36f27b4224b24aee1437f70c.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/0*rxjaPf4bYqJd9143.png"/></div></figure><h1 id="b330" class="kh ki hi bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">单个玩家的θ比较</h1><p id="8385" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">我们也可以找出球员的具体表现。比较两个不同位置的精英球员(詹姆斯·哈登对卡尔安东尼唐斯)，我们现在观察到在所有的柱状图中有一个红色的十字。这个红叉代表原始的单个球员数据，不考虑位置的等级。比如我们看到对于卡尔-安东尼-唐斯来说，他的个人百分比是139/354 = 39.27%。他的θ直方图的模式显示为相对较低的38.8%。这是因为在BH模型中的位置信息导致了“缩水”,中锋的投篮命中率只有26.9%。</p><p id="3428" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这种缩水效应在詹姆斯·哈登并不明显，他的实际三分球命中率是374/1030 = 36.3%，相比之下位置模式值为36.6%。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es mi"><img src="../Images/7e8ea8145c38093b3b6d1bd78e883021.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/0*Jw_ggaz1Ow4qLZVW.png"/></div></figure><p id="9152" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">值得强调的是，术语“收缩”可能会被错误地解释。这并不总是意味着估计的价值减少了。事实上，这是双向的。对于那些个人模式低于位置/组模式值的人，这将增加他们估计的个人模式。反之亦然，对于那些具有高于位置/组模式值的单独模式。“收缩”的概念适用于向组值收缩。</p><p id="86e5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">斯蒂芬·库里和尤素夫·努尔基奇的比较可以进一步说明这一点。斯蒂芬·库里的投篮命中率为352/807 = 43.6%，远远高于35.7%的位置控卫模式。这使得他的预计投篮命中率达到41.8%。另一方面，尤素夫·努尔基奇29投0中，但根据位置信息(mode = 26.9%)，他的估计投篮命中率为6.18%。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es mi"><img src="../Images/f973112e19dc85e1eb5319815d8a4ae0.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/0*8FMc_UuJqolKn3Ad.png"/></div></figure><h1 id="a779" class="kh ki hi bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">摘要</h1><p id="4e3b" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">在这个分析中，我展示了用NBA位置信息对3分命中率进行贝叶斯分层建模的应用。我们还对MCMC仿真进行了一些诊断，以及如何验证仿真的可靠性。此外，我们还分析了每个位置和某些球员的投篮命中率。</p><p id="66e7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">随着分层模型的出现，出现了一个关键的概念“收缩”，当我们比较每个位置的球员以及位置信息如何影响他们估计的投篮命中率时，也说明了这一点。</p><p id="58c6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这种分析的很大一部分是基于John Kruschke的书<a class="ae iu" href="https://sites.google.com/site/doingbayesiandataanalysis/" rel="noopener ugc nofollow" target="_blank">做贝叶斯数据分析</a>。</p><p id="e581" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">关于Python scraper或R分析代码的更多细节，请查看项目<a class="ae iu" href="https://github.com/kfoofw/nba_espn/blob/master/3.analysis/threepoint_2018-19/Bayesian-Hierarchical-Modelling-of-3-point-shooting.md" rel="noopener ugc nofollow" target="_blank"> Github repo </a>。</p><p id="e7a6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下篇就来看看近十年来(2009/10至2018/19常规赛)中锋和大前锋的<a class="ae iu" rel="noopener" href="/@kfoofw/analysis-of-3-point-shooting-skills-of-big-men-positions-across-a-decade-75c7a5120dc4"> 3分投篮技术。</a></p></div></div>    
</body>
</html>