<html>
<head>
<title>High Volume Prediction at Hospital Clinics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">医院诊所的高容量预测</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/high-volume-prediction-at-hospital-clinics-90b95eb6c5ab?source=collection_archive---------1-----------------------#2019-05-20">https://medium.com/analytics-vidhya/high-volume-prediction-at-hospital-clinics-90b95eb6c5ab?source=collection_archive---------1-----------------------#2019-05-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/ac65cdc048d571b0f896d0301ed23f32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_-5b5YbXEYMyNnvUxJUEXQ.png"/></div></div></figure><div class=""/><p id="5dea" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最近，我的一个顾客想出了一个主意。他希望构建一个高级分析和人工智能解决方案，来测量和预测医院诊所的高负载。动机是减少诊所排队长度和患者总等待时间。诊所运营经理将能够通过采取数据驱动的决策，实时更好地分配和利用人力资源，及早做出响应，以防止或减少高负载情况。</p><p id="b011" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">[例如:系统可以通过在高负荷发生前两个小时从子科室#3调换两个护士、一个医生和一个秘书来提前建议加强子科室#2，并且这样实际上防止子科室#2的病人等待很长时间。]</p><p id="e517" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">难题/问题定义+潜在特征:</strong></p><p id="4625" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">许多医院诊所正在经历意想不到的沉重的病人负担。经常会出现这样的情况，病人要经历很长的等待时间，而一些工作人员却无所事事。<strong class="is hu"> <br/> </strong>在许多情况下，再分配发生得太晚了。经过几天在诊所内的调查，我们考虑并指出以下原因:</p><ol class=""><li id="7d21" class="jo jp ht is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated"><strong class="is hu">缺少医生</strong> —在许多情况下，意外地，医生被紧急呼叫到急诊室，这明显扰乱了预先计划的分配并引入了高容量瓶颈。</li><li id="d6c8" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hu">患者资料</strong> —年龄、既往诊断、入院史、母语:这些参数似乎强烈影响患者在诊所停留的总时间。</li><li id="cd31" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hu">“不请自来的患者”</strong> —这些患者占每天就诊总数的10%以上。这明显延长了“饥饿”时间并影响了一般临床的高负荷和排队延迟。</li><li id="b870" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hu">复杂流程— </strong>许多诊所包括非平凡站(例如，挂号= &gt;准备= &gt;咨询检查1 = &gt;医生检查= &gt;咨询检查2 = &gt;回诊医生= &gt;下次就诊挂号)。</li><li id="95a5" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hu">天气</strong>——可能导致患者和服务提供者延迟到达。</li><li id="d22a" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hu">公共交通</strong> —可能导致患者和服务提供者延迟到达。</li><li id="b357" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hu">各种服务商</strong>和昂贵的设备。(医生、护士、技术员、秘书)。</li></ol><p id="b5e3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">总之，我们得出结论，这些是主要的意外和不确定因素，这些因素使得预先规划流程和临时实时响应对诊所运营经理来说如此具有挑战性，我们认为我们可以开始并验证这些功能作为我们机器学习模型的候选。</p><p id="a4b6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">建议的解决方案:<br/> </strong>具有高容量预测(发生前60-120分钟)的实时可视化系统，具有高度重要测量值的高级分析跟踪。</p><p id="aac1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">高音量定义建议:<br/> </strong>我们不能——不能逃避它。我们必须弄清楚<strong class="is hu">高负荷</strong>是什么意思，那么让我们:</p><ul class=""><li id="eaed" class="jo jp ht is b it iu ix iy jb jq jf jr jj js jn kc ju jv jw bi translated">以分钟为单位决定我们的预测时间，并将其标记为<strong class="is hu"><em class="kd">pt =【60，90，120】</em></strong></li><li id="e782" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn kc ju jv jw bi translated">定义等待站并标记为<strong class="is hu"> <em class="kd"> st = [reg，ref1..3、</em>【医生总数】</strong></li><li id="0398" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn kc ju jv jw bi translated">等待列表中的最短停留时间为<strong class="is hu"> <em class="kd"> wt = [0…720] </em> </strong></li></ul><p id="3a41" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们可以将我们的预测结果标记为<strong class="is hu"> <em class="kd"> p(n，pt，st，wt) </em> </strong></p><p id="732a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">例如:p(n，120，' ref2 '，0)是从现在起120分钟后，预计等待至少0分钟的“参考-2”等待列表的预测等待患者数。(这意味着该时间点的所有等待患者)</p><p id="bde8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请注意:我们还没有定义“n ”,因为这个参数将是我们实时特征向量列表的一个组成部分，只有在数据探索和数据准备阶段之后才会被发现。</p><p id="6c39" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，如果以下至少有一项为真，我们将把该预测标记为高负载:</p><ul class=""><li id="fa19" class="jo jp ht is b it iu ix iy jb jq jf jr jj js jn kc ju jv jw bi translated">p(n，x1，x2，0])预测结果高于该小时的实际平均值加上三倍标准差(现在是+ x1)，以及函数(x2)。</li><li id="37d2" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn kc ju jv jw bi translated">p(n，x1，x2，60])的结果是超过25%的来自‘x1’的等待列表达到了至少60分钟的延迟。</li></ul><p id="ae96" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">概念验证:<br/> </strong>我们选择了一家我们检查过的诊所，然后采取了以下步骤:</p><ol class=""><li id="caf0" class="jo jp ht is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">高级架构和数据摄取。</li></ol><p id="5670" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.数据探索。</p><p id="c4f3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3.数据准备和特征工程。</p><p id="8301" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">4.<a class="ae ke" href="https://en.wikipedia.org/wiki/Automated_machine_learning" rel="noopener ugc nofollow" target="_blank"> AutoML </a> —回归模型选择&amp;训练。</p><p id="46ae" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">5.DeployML —回归模型部署。</p><p id="a226" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">6.可视化—实时流式数据集可视化，包括ML结果。</p><h1 id="8f80" class="kf kg ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">高级架构和数据接收:</h1><p id="e750" class="pw-post-body-paragraph iq ir ht is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">我们的客户在本地环境中托管了应用程序。第一步，我们希望将数据持续复制到他们的azure订阅中。</p><p id="328f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们建议将所有相关的数据源合并到DMZ环境中的专用sql服务器中，然后<a class="ae ke" href="https://docs.microsoft.com/en-us/azure/sql-database/replication-to-sql-database" rel="noopener ugc nofollow" target="_blank">将数据复制到</a><a class="ae ke" href="https://azure.microsoft.com/en-us/services/sql-database/" rel="noopener ugc nofollow" target="_blank"> azure sql </a>中。</p><p id="dda6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae ke" href="https://docs.microsoft.com/en-us/azure/data-factory/connector-sql-server" rel="noopener ugc nofollow" target="_blank">数据工厂</a>和<a class="ae ke" href="https://docs.microsoft.com/en-us/azure/sql-database/sql-database-sync-data" rel="noopener ugc nofollow" target="_blank"> SQL数据同步</a>可能是此同步作业的更好选择，因为它们提供托管服务。</p><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es li"><img src="../Images/79a86b83f7f2cfe8a38de025c2f713bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BPwfnFoFRpkCxQgKp2Gwmw.png"/></div></div></figure><p id="27ba" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第二步是(近)实时地将数据流式传输到可视化数据集。我们提供了循环逻辑应用程序来查询数据并将其传输到EventHub。</p><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ln"><img src="../Images/192e22fe45df258788a56ec1d8f07533.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*30O315HIxO7vnP_y6i29PA.png"/></div></div></figure><p id="4fa8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这一点上，我们创建了一个新的<a class="ae ke" href="https://azure.microsoft.com/en-us/services/stream-analytics/" rel="noopener ugc nofollow" target="_blank"> Azure Stream Analytics </a>服务来连接这些点，并为可视化平台提供从事件中心到流数据集的访问。你可以在这里找到更多关于<a class="ae ke" href="https://docs.microsoft.com/en-us/azure/stream-analytics/stream-analytics-power-bi-dashboard" rel="noopener ugc nofollow" target="_blank">的细节。</a></p><h1 id="bef7" class="kf kg ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">数据探索:</h1><p id="2f1d" class="pw-post-body-paragraph iq ir ht is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">我们将历史queueDB和DemographicsDB数据上传到azure blobs进行数据探索。我选择了<a class="ae ke" href="https://azure.microsoft.com/en-us/services/databricks/" rel="noopener ugc nofollow" target="_blank"> Azure Databricks </a>，在我看来，这是默认的托管平台，适合大数据探索和准备。</p><p id="2a66" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这一点上，我考虑过使用时序服务，比如<a class="ae ke" href="https://azure.microsoft.com/en-us/services/data-explorer/" rel="noopener ugc nofollow" target="_blank"> Kusto </a>，但是为了简单起见，我选择了Databricks。</p><p id="b700" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个平台的另一个主要优势是多语言编程支持。正如附件中的笔记片段所示，我用sql写了几个部分，用python写了一些其他部分，当然还有我喜欢的spark编程语言——Scala。<br/> <a class="ae ke" href="https://www.reddit.com/r/IAmA/comments/31bkue/im_matei_zaharia_creator_of_spark_and_cto_at/cq02nbk/" rel="noopener ugc nofollow" target="_blank">这里</a>是Matei Zaharia(Spark的创建者和Databricks的CTO)关于他为什么选择Scala而不是其他编程语言来创建Spark的回应。</p><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lo"><img src="../Images/e8e4579a685eb3405497a98d16b82746.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DQrDjHiWk_94HUbxqU9ZuQ.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">按星期几计划的访问</figcaption></figure><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lt"><img src="../Images/c5b9d91fa1ff8f9d9db54330602e5c63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hjy4Pb4kj_wLUU8jWDacRg.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">一周中各天的实际访问量(每小时汇总)</figcaption></figure><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lu"><img src="../Images/be2db2dfe09d4a21cecf0362fbde306a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jw-l2UkTfD8XBANDUyNC_g.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">按小时计算的实际访问量与一周中的某一天进行比较</figcaption></figure><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lv"><img src="../Images/9e7a30cb494716bdaf8bb58d5d433c40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ee49qUVyEI3GYKEe4QY7Og.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">诊所负荷热图</figcaption></figure><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lw"><img src="../Images/0e035af235784435d73b936bd67613fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y3leqbyFSzpc_hfub65T-g.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">按日期统计的总住院时间异常</figcaption></figure><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lx"><img src="../Images/00934efd4df1c3331a22b3abc5ab3df9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zMiEq8JHwWfoIa_hkJ5nqw.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">诊所工作时间内住院时间长</figcaption></figure><h1 id="3ff6" class="kf kg ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">数据准备和特征工程:</h1><p id="763b" class="pw-post-body-paragraph iq ir ht is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">现在我们已经消化并探索了这些数据。接下来我们可以做的是特征工程。</p><p id="4410" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">特征工程基本上是一种从现有数据中寻找特征或数据的技术。有几种方法可以做到这一点。更多的时候，这只是一个常识问题。</p><p id="eed5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这一阶段，我们考虑将每天(周日-周五)的工作时间划分为15分钟的时段，在每个时段中标记0或1，以表示患者正在等待。</p><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lx"><img src="../Images/8adcb682ecdce6ccd407b88327f94848.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f97dhwuGndETjZgDXxrF6Q.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">由患者元数据加入的实际检入-检出</figcaption></figure><p id="a5b2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下一件事是按日期列分组，并通过合计每个时段进行聚合。</p><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ly"><img src="../Images/c8627ac163fe2e2fcf91e56cfb9265ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hpqClU4F7zXGhU00A65VZA.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">数据分为15分钟时段</figcaption></figure><p id="210a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们想在每个桶中添加一个带有患者“人口统计”数据的向量，例如:性别、年龄、住院时间、以前的诊断、以前的入院天数等。</p><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lz"><img src="../Images/e2b2e4174a7a9820f30153c974a3312b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z0eDex7n5rdqaNEU1m1VCg.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">添加每个特征的向量</figcaption></figure><p id="8e24" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在再按日期分组，把所有这些向量加起来。</p><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ma"><img src="../Images/fd4aa0e32e7a20f05d17f0e64229fd45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W54_TgaPYDFrjcyCDC6n2w.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">按每个时段(列)的日期按所有向量分组</figcaption></figure><p id="47b4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这一点上，我想对bucket中的每个向量进行平面映射，这样每一列将被分成8列(向量中的每个单元格一列)。在分离之后，我们需要重新排列列来组织特征<em class="kd"> f1，..，fn </em>带有相关标签。</p><p id="d7b9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我划分了数据集，并用<a class="ae ke" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank"> pandas </a>重新排列它(从spark数据帧切换到Pandas数据帧相当容易，因为您只需要导入Pandas并调用df.toPandas())</p><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mb"><img src="../Images/62f8fe0ec1587c03ccdae31051cfc8de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BVGpY7nnZNKFn_YAg2NFog.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">要从spark数据帧转换到panda数据帧的toPandas()</figcaption></figure><h1 id="52cd" class="kf kg ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">模型培训和自动化:</h1><p id="5b65" class="pw-post-body-paragraph iq ir ht is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">因此，在将数据集适当地排列为特征和标签后，我们可以尝试执行几种经典的<a class="ae ke" href="https://en.wikipedia.org/wiki/Supervised_learning" rel="noopener ugc nofollow" target="_blank">监督学习</a>算法，并对这些回归技术的性能进行比较。</p><p id="5422" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了这个任务，我尝试了<a class="ae ke" href="https://azure.microsoft.com/en-us/blog/simplifying-ai-with-automated-ml-no-code-web-interface/" rel="noopener ugc nofollow" target="_blank"> Azure Automated ML UI </a>，它现在是Azure机器学习服务workspace的集成部分。你可以从总体上了解更多关于<a class="ae ke" href="https://en.wikipedia.org/wiki/Automated_machine_learning" rel="noopener ugc nofollow" target="_blank"> AutoML </a>流程的信息。</p><h2 id="38e6" class="mc kg ht bd kh md me mf kl mg mh mi kp jb mj mk kt jf ml mm kx jj mn mo lb mp bi translated">Azure自动化ML:</h2><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mq"><img src="../Images/58357b1f1550d2d982d54be7617d93a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aLSU_Z1DuR7Lu6SRq8JUew.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">自动机器学习性能范围</figcaption></figure><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mr"><img src="../Images/e0dc6d2a2223c09f92b3022a1556798f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3Pgy6zT3nohlgaXT4j82ZA.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">生成按绩效排序的回归模型列表</figcaption></figure><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ms"><img src="../Images/e851dddfeb642da3020d265eb06ea46d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LR6aGfZ2wEzLa-dpvZYPjA.png"/></div></div></figure><p id="97d0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我也尝试了<a class="ae ke" href="https://docs.rapidminer.com/latest/server/cloud/microsoft-azure.html" rel="noopener ugc nofollow" target="_blank">快速矿工</a>-<br/><strong class="is hu">快速矿工:</strong></p><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mt"><img src="../Images/2c45f52acf364c69df53d1c1fadfc552.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9geYNgBTzBExiKkKHARk9g.png"/></div></div></figure><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mu"><img src="../Images/1df589e02d2fc94a32f94464e3b32a63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PkcxRtRSczxy_Ihs5w7ppw.png"/></div></div></figure><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mv"><img src="../Images/b7e1cc31a49136ab0b7e98dcaf0933f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CFGwEgKjN-Qfgl8AGP1vSQ.png"/></div></div></figure><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mw"><img src="../Images/ac40ce728fce8ddf25ab63329daee86d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GX2nDIilKY_o3vonw2xSow.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">预测结果与实际结果</figcaption></figure><p id="1a04" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu"> Azure ML工作室:</strong></p><p id="8424" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这一步，我将准备好的数据集上传到azure ml studio，并毫不费力地创建并运行了实验。</p><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mx"><img src="../Images/74bffb798fcc86c82a84308f2bdead7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AnGxshqlBqwD9J89ZCpAuQ.png"/></div></div></figure><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es my"><img src="../Images/c8589a3c9e4cfe921da8add6e778c5c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kusgc-cxCewWcxUi9G-q3w.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">预测结果与现实结果(标签)</figcaption></figure><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mz"><img src="../Images/7ebc618b4897be822a1554db63fee82d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rt9Ifg-1LG4YdCxGxerijg.png"/></div></div></figure><h2 id="5939" class="mc kg ht bd kh md me mf kl mg mh mi kp jb mj mk kt jf ml mm kx jj mn mo lb mp bi translated">ML部署:</h2><p id="919d" class="pw-post-body-paragraph iq ir ht is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">部署部分是通过将预测的实验作为web服务部署在一个<a class="ae ke" href="https://docs.microsoft.com/en-us/azure/aks/" rel="noopener ugc nofollow" target="_blank"> AKS </a> (Azure Kubernetes服务)上。</p><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es na"><img src="../Images/ab3bbb4052c8e0eb0c31e8d6dd05f03b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LmO5BnxfJkt6G9VwP6rbWA.png"/></div></div></figure><p id="7433" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ML部署完成后，我们使用另一个LogicApp将在线数据和预测数据合并到一个sql视图中，然后将视图作为流数据集传输到前面提到的流中。<br/>(LogicApp =&gt;EventHub =&gt;Stream Analytics =&gt;power bi)</p><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nb"><img src="../Images/eaabcb179f80b7cef320f4ad8c726bbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oAPxJwcme0q97AfGBHKGNQ.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">60分钟和120分钟预测结果流</figcaption></figure><p id="7270" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">更糟糕的是，我们已经为客户构建了另一个视图，其中保存了所需参数的最后八个快照。每个15分钟时段的每一行。</p><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nc"><img src="../Images/abb0cd82b4b63e75270427851d7046f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2ZdNzeWLtN3lPMhX9SnOFg.png"/></div></div></figure><h1 id="9864" class="kf kg ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">实时仪表板— Power BI:</h1><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nd"><img src="../Images/8f5b54df92f11073bb7a0f6b7b471181.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G7FMBxSMzOKQPmeGajCLZQ.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">实时仪表板加上预测结果</figcaption></figure><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ne"><img src="../Images/889977799238ecffca655dbeca1a1c1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J179GXU-S16-AdUaNzg_aw.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">实时仪表板加上预测结果</figcaption></figure><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nf"><img src="../Images/3ae40506c1941bac81a5140b40ce306f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oF4UuBEVJSBMyFAS6H_M2Q.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">预测比较</figcaption></figure><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ng"><img src="../Images/7b44955142b8a6d685aaa494696f4dcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fElKzSd4suhcYh6f-vSxIw.png"/></div></div></figure><h2 id="d8d8" class="mc kg ht bd kh md me mf kl mg mh mi kp jb mj mk kt jf ml mm kx jj mn mo lb mp bi translated">后续步骤:</h2><p id="b986" class="pw-post-body-paragraph iq ir ht is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">展望未来，我们将整合来自<a class="ae ke" href="https://openweathermap.org/current" rel="noopener ugc nofollow" target="_blank">开放天气</a>和Moovit的API。这将通过天气和公共交通信息丰富我们的数据，这可能会提高模型的准确性。</p><p id="7ba4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">开放天气非常简单，每分钟您可以免费接听60个电话。</p><figure class="lj lk ll lm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nh"><img src="../Images/2bcf8abfacf2be73f232fb779a49e9d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2iDtb5dOtQ7qemwhQLy67w.png"/></div></div></figure><p id="f413" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">完整源代码:<br/> </strong>数据库笔记本源代码可以在这里找到。</p><p id="e3e3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我要感谢我的同事<a class="ae ke" href="https://il.linkedin.com/in/kfirgurari" rel="noopener ugc nofollow" target="_blank"> Kfir Gur Ari </a>帮助我完成PowerBI可视化部分，并感谢<strong class="is hu"/><a class="ae ke" href="https://www.linkedin.com/in/catalinesanu" rel="noopener ugc nofollow" target="_blank">catlin Esanu</a><strong class="is hu">、</strong><a class="ae ke" href="https://il.linkedin.com/in/guybe" rel="noopener ugc nofollow" target="_blank">Guy bertenal</a>、<strong class="is hu">、</strong>帮助我建造高层建筑并为我提供建议。</p><p id="b4f2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Avi Paz，<br/>云解决方案架构师-数据&amp;AI<br/>Avi.Paz@microsoft.com</p></div></div>    
</body>
</html>