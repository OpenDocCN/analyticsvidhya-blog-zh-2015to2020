<html>
<head>
<title>Pandas Tricks Part — 4</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熊猫的把戏第四部分</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/world-is-in-lockdown-but-our-panda-is-still-working-to-move-on-860023a666f?source=collection_archive---------33-----------------------#2020-06-02">https://medium.com/analytics-vidhya/world-is-in-lockdown-but-our-panda-is-still-working-to-move-on-860023a666f?source=collection_archive---------33-----------------------#2020-06-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/8829ab32ab703159540c3b43da42362d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mtFg9AO3ldidkwgw"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">在<a class="ae hv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae hv" href="https://unsplash.com/@kawshar?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Kawshar Ahmed </a>拍摄的照片</figcaption></figure><div class=""/><p id="19b4" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文中，我将继续使用python中的pandas进行数据分析和操作技巧。在我上一篇<a class="ae hv" rel="noopener" href="/analytics-vidhya/useful-pandas-tricks-part-3-9db0d534a05a">文章</a>中，我们讨论了数据类型及其转换，还讨论了通过行和列连接数据帧。这些分析和操作技术非常有用，在我处理数据并从中获得有价值的见解时，对我的职业生涯帮助很大。</p><p id="06a6" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">今天，我们将使用来自<a class="ae hv" href="https://www.imdb.com/" rel="noopener ugc nofollow" target="_blank"> IMDb </a>的电影数据帧，展示一些有用的熊猫把戏。这种技巧可以用在各种业务数据上。</p><p id="f915" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们先读出数据帧:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="c9b2" class="kc kd hy jy b fi ke kf l kg kh">movies = pd.read_csv('<a class="ae hv" href="http://bit.ly/imdbratings'" rel="noopener ugc nofollow" target="_blank">http://bit.ly/imdbratings'</a>)</span></pre><p id="eb8c" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，您可以使用命令<em class="ki"> movies.head() </em>浏览数据帧，如下所示:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="889c" class="kc kd hy jy b fi ke kf l kg kh">movies.head() </span></pre><figure class="jt ju jv jw fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kj"><img src="../Images/0c008c1e9fc7f0c3e5f1e1af061b971c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IC6YrItRyW37DUaPtyLMvw.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">电影数据集一瞥</figcaption></figure><p id="5dae" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您想检查整个数据集的长度或数据集中有多少行，您可以使用<em class="ki"> len() </em>命令，如下所示:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="81c1" class="kc kd hy jy b fi ke kf l kg kh">len(movies) ##To check the length of movies dataset</span></pre><figure class="jt ju jv jw fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kk"><img src="../Images/9f52bfcf1b9d8ea145d705991638aeaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T0rHmgeS_4FtLPE3_H-NtA.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">电影数据集中的长度或行数</figcaption></figure><p id="842a" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们还可以将数据集的一部分提取到另一个数据集中。这是特别有用的，当在一个非常大的数据集中，我们想首先集中在它的一部分，以便研究它并得出我们的结论。这有助于我们从不同的数据集中提取有价值的见解，并将它们相互比较以及与完整的数据集进行比较。这些研究有助于我们得出结论，事情是如何随时间变化的，以及在不同的数据集中发生了什么，这与完整完成的整个研究不同。</p><p id="c4e8" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面，我们创建了两个数据集，将75%的数据分配给<em class="ki">电影1 </em>，剩余部分分配给<em class="ki">电影2 </em>。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="08f5" class="kc kd hy jy b fi ke kf l kg kh">movies_1 = movies.sample(frac=0.75, random_state=1234)</span><span id="5bff" class="kc kd hy jy b fi kl kf l kg kh">movies_2 = movies.drop(movies_1.index)</span><span id="5391" class="kc kd hy jy b fi kl kf l kg kh">len(movies_1) + len(movies_2)  ## To check whether the division has been done correctly</span></pre><figure class="jt ju jv jw fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es km"><img src="../Images/a1291046fd2b88e240c8fc72348b5ffb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kRFkfZxr8JTTAF7zLO-6-g.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">将电影数据集划分为75%和25%的两个块</figcaption></figure><p id="5d8e" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hz"> <em class="ki">注意:</em> </strong>如果索引值不是唯一的，那么这整个方法都不起作用。因此，我们需要首先对我们的两个数据集进行排序，然后我们应该继续对它们进行分析。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="789b" class="kc kd hy jy b fi ke kf l kg kh">movies_1.index.sort_values()  ## Sort and check</span><span id="6ca6" class="kc kd hy jy b fi kl kf l kg kh">movies_2.index.sort_values()  ## Sort and check</span></pre><p id="0d71" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，在我们的电影数据集中，如果我们想知道有多少独特的类型，我们可以通过<em class="ki">独特的</em>命令来检查，如下所示:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="e68e" class="kc kd hy jy b fi ke kf l kg kh">movies.genre.unique()  ## Shows us the unique Genres</span></pre><figure class="jt ju jv jw fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kn"><img src="../Images/910b16cf4cc9b54cc28210a800ccc5be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8kCsyKKz8ofSVWezfnNUjg.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">数据集中的独特类型</figcaption></figure><p id="e25b" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果我们想要检查一组特定的流派，那么我们可以使用<em class="ki">或</em>条件或<em class="ki"> isin </em>方法。</p><figure class="jt ju jv jw fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ko"><img src="../Images/a4cdd5dd55e5be072541757d3e02ee55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*446rhpxtiNLcPhkf3Wcjag.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">OR条件或isin()方法</figcaption></figure><p id="b577" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">同样，在' ~ '的帮助下，我们可以显示不属于<em class="ki"> isin() </em>方法中提到的类型，如下所示:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="54dd" class="kc kd hy jy b fi ke kf l kg kh">movies[~movies.genre.isin(['Action', 'Drama', 'Western'])].head()</span></pre><figure class="jt ju jv jw fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kp"><img src="../Images/82ba40f98f44aa486e0664f290674d00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*atBsUdlJRafu2MnyNKe3Qg.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">获取不同于isin()方法中的类型</figcaption></figure><p id="4a3d" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，如果我们想知道不同流派的电影数量，我们可以借助<em class="ki"> value_counts() </em>方法来实现。</p><figure class="jt ju jv jw fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kq"><img src="../Images/55c184f341845ffec2038a9e08444d2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h5JX2Jt4Em-u5ttct-CmEA.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">要检查不同流派的数量</figcaption></figure><p id="c72d" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了得到最频繁出现的流派的数量，我们可以使用<em class="ki"> nlargest() </em>方法。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="9b66" class="kc kd hy jy b fi ke kf l kg kh">counts.nlargest(3)  ## Counts the 3 most frequent Genres in the Movie Dataset</span></pre><figure class="jt ju jv jw fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kr"><img src="../Images/1ae8d2deb50e5664a1536dd124849550.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w1lxR-UpyJM67mn8d7VJUA.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">nlargest()方法的演示</figcaption></figure><p id="1d1f" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有了这些，我将结束这篇文章，我们将在下一篇文章中讨论一些其他有用的熊猫技巧。希望你学会并喜欢。</p></div></div>    
</body>
</html>