<html>
<head>
<title>Fundamentals of Angular and Unit Testing — Part Two</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度和单位测试基础—第二部分</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/fundamentals-of-angular-and-unit-testing-part-two-736ac87e2ff5?source=collection_archive---------15-----------------------#2020-03-24">https://medium.com/analytics-vidhya/fundamentals-of-angular-and-unit-testing-part-two-736ac87e2ff5?source=collection_archive---------15-----------------------#2020-03-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="737a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">积木</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/a6596f7ef4ec4ec58fba91f55d675533.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ugPiYrduF1IFelcFn6TTUQ.jpeg"/></div></div></figure><p id="5504" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文是该系列第一部分的继续。如果你没有从那里开始，你可以点击这里的阅读之前的文章。</p><p id="1b60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这一部分，我们将会看到Angular的一些构建模块。我们将特别关注以下内容:</p><ul class=""><li id="118a" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">成分</li><li id="f492" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">指令</li><li id="ec21" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">服务</li><li id="e13d" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">模块</li></ul><p id="16b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然我们不会详细讨论这些问题，但我们也会简要提及:</p><ul class=""><li id="935e" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">管道</li><li id="e95b" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">路线</li></ul><h2 id="5204" class="ke kf hi bd kg kh ki kj kk kl km kn ko iq kp kq kr iu ks kt ku iy kv kw kx ky bi translated">Angular使用基于组件的架构</h2><p id="a6c9" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">面向对象编程和一般编程的基本原则之一是模块化。使用这种设计技术，系统的功能被分解成更小的、独立的和可互换的模块。这一点通过<a class="ae jp" href="https://en.wikipedia.org/wiki/Encapsulation_(computer_programming)" rel="noopener ugc nofollow" target="_blank">封装</a>和松耦合组件得到了强调。</p><p id="e5ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Angular就是建立在这个范式之上的。结果是，应用程序的UI由一个组件树组成，这些组件“结合”在一起，形成整体的设计布局。</p><p id="b2d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以我们的应用程序为例:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es le"><img src="../Images/20367dede983cff0b7dc36dcc2d4696e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iRlSy5HsKzYotOEneXeF-w.png"/></div></div></figure><p id="f08b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设我们在顶部添加了一个导航栏。然后，我们可以决定将应用程序分成不同的部分，如下所示:</p><ul class=""><li id="07ce" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">将保存导航的导航组件</li><li id="5415" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">用户组件，它将是按钮的父级，另一个组件用于保存用户列表</li><li id="f5ce" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">将保存用户列表的UserList组件</li></ul><p id="0d91" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这样做的结果将是嵌套的组件，然后将这些组件组合起来以给出整体设计。就表现形式而言，它应该是这样的:</p><pre class="je jf jg jh fd lf lg lh li aw lj bi"><span id="7aa5" class="ke kf hi lg b fi lk ll l lm ln">...<br/>&lt;root-component&gt;<br/> &lt;navbar-component&gt;&lt;/navbar-component&gt;<br/> &lt;users-component&gt;<br/>    &lt;h1&gt;Some title goes here&gt;&lt;/h1&gt;<br/>    &lt;users-list-component&gt;&lt;/users-list-component&gt;<br/> &lt;/users-component&gt;<br/>&lt;/root-component&gt;<br/>...</span></pre><p id="b560" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种方法的一些明显优点是:</p><ul class=""><li id="dbf6" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated"><strong class="ih hj">可重用性</strong>——在需要时重用代码变得非常容易。例如，这些组件中的任何一个都可以在我们代码的其他地方使用，而不需要重新编写</li><li id="d90a" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated"><strong class="ih hj">可测试性</strong> —测试代码更容易，因为它被分解成更小的代码片段，也因为单一责任原则(每个代码/类只做一项工作)</li><li id="0d96" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated"><strong class="ih hj">可扩展性</strong> —在不破坏现有代码基础的情况下，更容易添加更多功能</li><li id="0f81" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated"><strong class="ih hj">可维护性</strong> —代码更容易维护，因为它是高度模块化的(分解成更小的部分)</li></ul></div><div class="ab cl lo lp gp lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="hb hc hd he hf"><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lv"><img src="../Images/baca5d42b002470cdb2f965ad75f1797.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IOydw1SIkn4DLrPA_-vHnw.jpeg"/></div></div></figure><p id="c6fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我知道这是很多，你们中的一些人可能正在看这篇文章，想知道发生了什么。让我们后退一步，用乐高来看它，看看我们是否可以用它来理解我们刚才在上面所说的东西。</p></div><div class="ab cl lo lp gp lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="hb hc hd he hf"><p id="cb15" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">组件</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lw"><img src="../Images/50bb95493c83013eec15e37d70e6b875.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dVbZ39L8Oj6ulMtw3ZA1cw.jpeg"/></div></div></figure><p id="173f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">组件是Angular的基石。当建造乐高房子时，我们拿不同的积木，把它们连接在一起，然后<em class="lx"> viola </em>！我们有一个乐高房子。这差不多就是组件，乐高积木。</p><p id="5713" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有一个警告。为了让房子变成我们想象的样子，每个乐高积木都必须放在它应该去的地方。</p><p id="ae8f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">他们在Angular中有两个基本角色:</p><ul class=""><li id="8c76" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">视图表示—每个组件都需要一个HTML模板，它可以是内联的或HTML文件。这用于渲染视图</li><li id="5984" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">从数据源获取数据并将其提供给视图——该组件还负责从我们的数据源接收数据，然后将其传递给HTML视图进行显示</li></ul><p id="1980" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这方面，我们已经看了Angular的MVC架构的两个部分，即HTML(视图)和组件(控制器)</p><p id="8b7f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">模块</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ly"><img src="../Images/68d351d214dcd4c904a5ac4c78880d3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*sQRitnVY7KLtsPlrSu6GJw.jpeg"/></div></figure><p id="679e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还在乐高房子上。显然，我们不能把乐高积木到处乱扔。我们需要一个合适的地方来组织它们，比如一个容器。这就是模块的用武之地。</p><p id="1a1e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">模块是保存和组织内聚或相关代码的容器。通常，模块被分组为特性、工作流或域。在Angular中，模块包含组件、指令、服务、管道甚至其他模块(子模块)。</p><p id="dfb1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Angular应用程序必须至少有一个模块，通常称为根模块，通常命名为AppModule，可以在app.module.ts文件中找到</p><p id="942d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">服务业</strong></p><p id="d9c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">服务也是另一组特殊的乐高积木。它们用于存储应用程序需要的业务逻辑、值或功能。</p><p id="6e68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Angular利用服务来增加模块化和单一责任原则。服务应该是狭窄的和定义明确的。这意味着他们应该做一件事，并且做好。</p><p id="b1f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，组件将其他不必要的逻辑委托给服务，以便组件可以专注于用户体验，如数据绑定。这种逻辑包括:</p><ol class=""><li id="3055" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc lz jw jx jy bi translated">从服务器获取数据</li><li id="ed1d" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc lz jw jx jy bi translated">验证用户输入</li><li id="a2be" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc lz jw jx jy bi translated">前端计算</li><li id="4e90" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc lz jw jx jy bi translated">登录和注销用户</li></ol><p id="920e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然我们所熟悉的服务最常见的用途是获取数据，但是服务可以做更多的事情。例如，假设您正在开发一个电子商务web应用程序，您需要计算某人在您的平台上购物时下的订单总数。它们可以被转移到一个单独的服务中，而不是在组件上进行这样的计算。</p><p id="2fc8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在大多数情况下，我们的服务是MVC架构中的模型，因为它们通常是数据源。</p><p id="1971" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">指令</strong></p><p id="4dee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这一点上，我不确定该把指令比作乐高积木中的什么，所以如果我只是直接试图解释它们是什么，请原谅我。</p><p id="27ea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Angular中的指令是用来扩展HTML的函数。他们允许Angular操作DOM并赋予它新的语法。</p><p id="af6a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Angular2X中有不同类型的指令，即:</p><ul class=""><li id="cc30" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">属性指令—更改DOM元素的外观或行为。例如，它可以将类从隐藏改为显示。一种更简单的方式认为它们改变了HTML元素的属性。用方括号标识，例如[隐藏]、[显示]</li><li id="3a5f" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">结构化指令—通过在DOM中添加或删除元素来更改DOM布局。通常在它们前面用星号来标识，例如*ngFor，*ngIf</li><li id="6e10" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">组件—是的，组件是指令的一部分。唯一的区别是他们有一个模板</li></ul><p id="152b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="lx">提示——当考虑使用指令隐藏按钮时，我们可以选择使用[hidden]或*ngIf。这里的要点是,[hidden]将按钮的visibility属性设置为hidden。然而，按钮仍然存在于DOM中，这可以使用检查工具来查看。然而，一个*ngIf将它从DOM中完全删除</em></p><p id="0e56" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">管道和路由</strong></p><p id="73c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">管道用于转换显示的数据，即格式数据。例如，可以将日期从"<strong class="ih hj"> <em class="lx"> 1 January 2020，00:00:00 UTC </em> </strong>"格式化为类似于"<strong class="ih hj"> <em class="lx"> 1/01/2020 </em> </strong>"的格式。</p><p id="6d1c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当用户执行应用程序任务时，路由用于从一个视图导航到另一个视图。Angular中内置的应用程序是spa(单页应用程序)。因此，我恳求你进一步阅读路由是如何做的，以及什么是温泉。</p><p id="3cf4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是一些您可以探索的资源的链接:</p><ol class=""><li id="4760" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc lz jw jx jy bi translated"><a class="ae jp" href="https://scrimba.com/g/gyourfirstangularapp" rel="noopener ugc nofollow" target="_blank">https://scrimba.com/g/gyourfirstangularapp</a></li><li id="c60e" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc lz jw jx jy bi translated"><a class="ae jp" href="https://scrimba.com/g/gyourfirstangularapp" rel="noopener ugc nofollow" target="_blank">https://scrimba.com/g/gyourfirstangularapp</a></li><li id="ac22" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc lz jw jx jy bi translated"><a class="ae jp" rel="noopener" href="/@NeotericEU/single-page-application-vs-multiple-page-application-2591588efe58">https://medium . com/@ NeotericEU/single-page-application-vs . multi-page-application-2591588 EFE 58</a></li></ol><p id="dddf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该系列的其他部分可以在这里找到:</p><ol class=""><li id="170a" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc lz jw jx jy bi translated">第一部分——https://tinyurl.com/vuprd3t</li><li id="3452" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc lz jw jx jy bi translated">第三部分—<a class="ae jp" rel="noopener" href="/@henry.onyango/fundamentals-of-angular-and-unit-testing-part-3-ce101392064d">https://medium . com/@ Henry . ony ango/角度和单位测试基础—part-3-ce 101392064d</a></li></ol><p id="5e8b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们已经有了定义，在下一部分，让我们开始构建我们的应用程序</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ma"><img src="../Images/1023cf07c2a081cb0e8c5ad81b53c847.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*wZID52vDpjwv74bcCyVf5g.gif"/></div></figure></div></div>    
</body>
</html>