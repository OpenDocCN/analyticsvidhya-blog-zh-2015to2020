<html>
<head>
<title>Journey of Apache Kafka &amp; Zookeeper Administrator ( Part 7 )</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">阿帕奇卡夫卡与动物园管理员之旅(七)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/journey-of-apache-kafka-zookeeper-administrator-part-7-ddcf6c28a8c6?source=collection_archive---------21-----------------------#2020-08-26">https://medium.com/analytics-vidhya/journey-of-apache-kafka-zookeeper-administrator-part-7-ddcf6c28a8c6?source=collection_archive---------21-----------------------#2020-08-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="16fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2020年3月(卡夫卡与Appdynamics的痛苦整合)</p><p id="5d1a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一个让我大吃一惊的是,<strong class="ih hj">新遗迹</strong>合同将被取消，一个名为<strong class="ih hj"> Appdynamics、</strong>的新产品将取而代之。我已经在<strong class="ih hj">新遗迹集成</strong>上花了大约一个月的时间，现在我不得不再次用<strong class="ih hj"> Appdynamics </strong>做这件事。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/7b16d7e6d41068504af50a96594456d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3c43Ex_0Sllb0x9D5cjPHQ.jpeg"/></div></div></figure><p id="7ada" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我知道这是必须要做的，我对这个决定无能为力。我决定让我寻求帮助，这样其他队友也能学到东西。我让我的同事检查一下，让我知道如何做，我给了他新遗迹经验的例子，但他太天真了，老实说，他对做这件事没多大兴趣。总之他找到了<a class="ae jp" href="https://www.appdynamics.com/community/exchange/kafka-monitoring-extension/" rel="noopener ugc nofollow" target="_blank">app dynamics Kafka Integration</a>。在我看来没问题，我让我的同事在一台机器上实现它，让我们看看它将如何出现在Appdynamics门户中。我对Appdynamics抱有很高的期望，但它失败了。</p><p id="daea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">app dynamics bumper</strong>列表</p><ul class=""><li id="abac" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">多么令人困惑的Appdynamics门户:(。</li><li id="d695" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">Appdynamics没有简单的文档？</li><li id="a481" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">不支持标签或类似的东西。</li><li id="dfdb" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">旧式的定制仪表板，所有的东西都应该是静态的。</li><li id="017f" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">集成非常难以配置和检查？</li><li id="55ab" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">不支持API，我可以下载和上传自定义仪表板。</li><li id="fc58" class="jq jr hi ih b ii jz im ka iq kb iu kc iy kd jc jv jw jx jy bi translated">配置文件应该很小，以便于更新。</li></ul><p id="dc62" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不管怎样，我的同事在一台机器上完成了集成，并向我展示了一个关于安装和其他方面的小演示。因为他不感兴趣，所以我不得不这样做，我对自己说，这他妈的有多难，我会给它一个合适的镜头。如果它不起作用，那么我将在没有监控的情况下运行当前的生产卡夫卡(已经有了CMAK，所以并不担心)。</p><p id="0a60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">集成文档:</strong></p><div class="ke kf ez fb kg kh"><a href="https://www.appdynamics.com/community/exchange/kafka-monitoring-extension/" rel="noopener  ugc nofollow" target="_blank"><div class="ki ab dw"><div class="kj ab kk cl cj kl"><h2 class="bd hj fi z dy km ea eb kn ed ef hh bi translated">用于AppDynamics的Kafka监控扩展</h2><div class="ko l"><h3 class="bd b fi z dy km ea eb kn ed ef dx translated">用于AppDynamics用例的Kafka监控扩展Apache Kafka是一个分布式容错流平台…</h3></div><div class="kp l"><p class="bd b fp z dy km ea eb kn ed ef dx translated">www.appdynamics.com</p></div></div><div class="kq l"><div class="kr l ks kt ku kq kv jn kh"/></div></div></a></div><div class="ke kf ez fb kg kh"><a href="https://www.appdynamics.com/community/exchange/extension/zookeeper-monitoring-extension/" rel="noopener  ugc nofollow" target="_blank"><div class="ki ab dw"><div class="kj ab kk cl cj kl"><h2 class="bd hj fi z dy km ea eb kn ed ef hh bi translated">动物园管理员-监控扩展</h2><div class="ko l"><h3 class="bd b fi z dy km ea eb kn ed ef dx translated">在安装扩展之前，需要满足这里提到的先决条件。请不要继续…</h3></div><div class="kp l"><p class="bd b fp z dy km ea eb kn ed ef dx translated">www.appdynamics.com</p></div></div><div class="kq l"><div class="kw l ks kt ku kq kv jn kh"/></div></div></a></div><p id="dba7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">文档中非常奇怪的部分是，我需要定义我需要收集的每个指标，这将使我的配置很长，以后很难更新。</p><p id="966e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">配置层级</strong></p><p id="5b5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这种情况下需要报告指标。这可以通过改变<br/> <code class="du kx ky kz la b">metricPrefix: "Server|Component:&lt;Component-ID&gt;|Custom Metrics|Kafka"</code>中<code class="du kx ky kz la b">&lt;Component-ID&gt;</code>的值来实现。&lt; br/ &gt;请参考此<a class="ae jp" href="https://community.appdynamics.com/t5/Knowledge-Base/How-to-troubleshoot-missing-custom-metrics-or-extensions-metrics/ta-p/28695" rel="noopener ugc nofollow" target="_blank">链接</a>以找到您所在层级的组件ID。<br/>例如，</p><pre class="je jf jg jh fd lb la lc ld aw le bi"><span id="25c3" class="lf lg hi la b fi lh li l lj lk">metricPrefix: "Server|Component:19|Custom Metrics|Kafka"</span></pre><p id="b4d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> Config.yml </strong></p><pre class="je jf jg jh fd lb la lc ld aw le bi"><span id="2694" class="lf lg hi la b fi lh li l lj lk">- objectName: "kafka.server:type=BrokerTopicMetrics,*"<br/>          metrics:<br/>              - Count:<br/>                 alias: "Count"<br/>                 multiplier: ""<br/>                 delta: false<br/>                 aggregationType: "OBSERVATION"<br/>                 timeRollUpType: "AVERAGE"<br/>                 clusterRollUpType: "INDIVIDUAL"<br/>    <br/>              - MeanRate:<br/>                 alias: "Mean Rate"<br/>                 multiplier: ""<br/>                 delta: false<br/>                 aggregationType: "AVERAGE"<br/>                 timeRollUpType: "AVERAGE"<br/>                 clusterRollUpType: "INDIVIDUAL"</span></pre><p id="c501" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我不明白为什么他妈的我需要加上这些“计数”/“平均率”和更多？</p><p id="cf3b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你还记得New Relic正在监控200多个JMX对象，那么上面的config.yml就太长了。</p><p id="d62c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">定制仪表板</strong></p><p id="4211" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每台Kafka服务器都单独报告其指标，因此您必须在“指标浏览器”中找到每台服务器，然后将每个指标导出到自定义仪表板。如果只是做小计算</p><blockquote class="ll lm ln"><p id="6ce5" class="if ig lo ih b ii ij ik il im in io ip lp ir is it lq iv iw ix lr iz ja jb jc hb bi translated">36台Kafka服务器* 10个指标= 360(仅NewRelic仪表板的一小部分)</p></blockquote><p id="978f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以上步骤我需要做360次，这是太多的手工工作，即使我没有任何初级DevOps，所以我不能把它们交给别人:(。</p><p id="396c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">终于！</strong></p><p id="73ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我决定不管发生什么，我都不会去做，因为有太多关于Appdynamics集成的工作，这给我自己也就是<strong class="ih hj"> Kafka管理员提供了很少的见解。</strong></p></div><div class="ab cl ls lt gp lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="hb hc hd he hf"><p id="b8c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">旅程将继续实际自定义监控！</p></div></div>    
</body>
</html>