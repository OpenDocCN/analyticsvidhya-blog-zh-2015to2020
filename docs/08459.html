<html>
<head>
<title>The Importance of Stratification!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">分层的重要性！</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/the-importance-of-stratification-c1f96d8184c8?source=collection_archive---------16-----------------------#2020-07-30">https://medium.com/analytics-vidhya/the-importance-of-stratification-c1f96d8184c8?source=collection_archive---------16-----------------------#2020-07-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/94d4eba7d2a215a5b3e8018256fbbc12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rD5nAT4W_DPJowCH.png"/></div></div></figure><p id="6844" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi jo translated"><span class="l jp jq jr bm js jt ju jv jw di">在</span>我的上一篇<a class="ae jx" rel="noopener" href="/swlh/the-trap-of-a-b-testing-for-too-long-a4706066a692">帖子</a>中，我经历了一个实验，这个实验向我们展示了数据随时间的变化是如何导致从已经运行了很长时间的A/B测试中做出推论的问题。</p><p id="de6b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然而，时间并不是导致错误推断的唯一因素。通常情况下，有其他变量会导致错误的推断，这就是数据分层概念发挥作用的时候。让我们看一下这个A/B测试的例子，看看分层是如何让我们得到正确的结果的。</p><h1 id="680d" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">看着这些数据</h1><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kw"><img src="../Images/deb9f3947cddb8054c64730c3d76468e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MV-tE3qde-NFOy6a.png"/></div></div></figure><p id="55df" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">该数据由10000个数据点组成，包括客户ID、访问网站的人的年龄分类、访问时间和转换状态。</p><p id="d42f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们继续对数据进行分析。</p><h1 id="c031" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">数据分析</h1><h1 id="3785" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">实验1</h1><p id="ce64" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">一家公司首先要检查的是A组和b组之间的点击率比较。让我们这样做:</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lg"><img src="../Images/7cb123dfe353a1c0bada554108fe464b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RgUzJyvj0hBM92LSs_QvkQ.png"/></div></div></figure><p id="964b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从图表中，我们可以看到B的点击率略低于A。基于这一点，公司可以假设B在这一人群中的表现不如A。然而，这是正确的决定吗？我们再做一些分析。</p><h1 id="7e48" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">实验二</h1><p id="4c9b" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">数据集给了我们一个因素——年龄。让我们执行一个基本的分析，看看它在数据集中代表了什么。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/72207452b541e0721f933e113c70757b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mkoglMEbMypgaH1pAOAcnw.png"/></div></div></figure><p id="322b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们看到A组和B组的老人数量都比年轻人多很多。这可能会导致针对特定人群的过采样这一由来已久的情况。然而，过度采样会导致错误的推断吗？</p><p id="508a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了回答这个问题，我们从我们的数据集中抽取样本，现在A组和b组的老年人和年轻人数量相等。</p><p id="58f9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，我们执行与之前相同的实验来比较两组的点击率。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es li"><img src="../Images/a23011a3933fcefa8845e2da5fa9ae36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pTEdGZigumeFz8M27mfgkA.png"/></div></div></figure><p id="cfb1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里发生了什么？突然之间，B的表现开始比a好得多。但是是什么导致这种情况没有在整个人群中出现呢？为什么在两个年龄组中取样数量相等会导致初始评估的翻转？</p><p id="cdcd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们更深入地了解每个年龄组，找出正在发生的事情。</p><h1 id="3dea" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">实验三</h1><p id="99f5" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">现在让我们将初始数据集分成两部分。一个只有年轻人，一个只有老年人。将它们分成两个数据集后，让我们分别在这两个数据集上进行第一个实验。</p><p id="e1bc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">老年人</strong></p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lj"><img src="../Images/1cc703b7da1c6c14e45c2a5930700587.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wA3rwjWYjJ1H4BKBkXogOA.png"/></div></div></figure><p id="c3a2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">年轻人</strong></p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lj"><img src="../Images/d61632d7bf1ba239dacaaad56c752d77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kMlB1XG6Rz4grpZr9gUPDQ.png"/></div></div></figure><p id="2061" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">啊哈！我们找到了。我们的推论全都错置的原因是‘A’对老年人更有效，而‘B’对年轻人更有效。</p><p id="aadc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">基于这一发现，我们可以得出最后的推论。</p><blockquote class="lk ll lm"><p id="8fb1" class="iq ir ln is b it iu iv iw ix iy iz ja lo jc jd je lp jg jh ji lq jk jl jm jn hb bi translated">第一个实验告诉我们“A”总体上更好的原因是老年人的数量比年轻人多得多。</p><p id="ea4b" class="iq ir ln is b it iu iv iw ix iy iz ja lo jc jd je lp jg jh ji lq jk jl jm jn hb bi translated"><strong class="is hj">第二个实验显示B更好的原因是B对年轻人比A更有效，而A对老年人比B更有效。</strong></p><p id="b939" class="iq ir ln is b it iu iv iw ix iy iz ja lo jc jd je lp jg jh ji lq jk jl jm jn hb bi translated"><strong class="is hj"> <em class="hi">这就是为什么对变量进行数据分层是如此重要的一步。它使我们能够深入了解一种特定的治疗方法如何对不同层次的人群产生影响，并且我们可以避免陷入混淆变量的陷阱，在这种情况下，就是年龄。</em> </strong></p></blockquote><p id="2fb9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">感谢您通读！</strong></p><p id="9bd7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> —阿比吉特·克里希南·梅农</strong></p><p id="bb7f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">你可以在这里找到进行这些实验的Jupyter笔记本</strong> <a class="ae jx" href="https://colab.research.google.com/drive/1d7kytjnvpHsGbJRgEA29ra8M_iAnLFK1?usp=sharing" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">！</strong> </a></p></div><div class="ab cl lr ls gp lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="hb hc hd he hf"><p id="de2a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="ln">原载于2020年7月30日https://www.abhijitkmenon.com</em><em class="ln">T21</em><a class="ae jx" href="https://www.abhijitkmenon.com/post/the-importance-of-stratification" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>