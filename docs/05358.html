<html>
<head>
<title>When Will Coronavirus Peak?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">冠状病毒何时达到高峰？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/when-will-coronavirus-peak-7d9ec81e91b5?source=collection_archive---------30-----------------------#2020-04-18">https://medium.com/analytics-vidhya/when-will-coronavirus-peak-7d9ec81e91b5?source=collection_archive---------30-----------------------#2020-04-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2548" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将MA交叉股票市场分析和交互式可视化相结合，来判断你们州的冠状病毒是否已经达到顶峰。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/2dbd70b732c28acfcfa17a3edc520a69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LSXTFxgi_avUS0Dv2BhpwQ.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">来源:<a class="ae jt" href="https://www.talktomira.com/post/when-will-coronavirus-peak-and-end-social-distancing" rel="noopener ugc nofollow" target="_blank">https://www . talktomira . com/post/when-will-coronavirus-peak-and-end-social-distanding</a></figcaption></figure><p id="5026" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">今天我们的园艺师问我妻子，“你认为病毒的事情什么时候会结束？”园艺师认为数据科学家的妻子应该知道如何预测这种情况吗？或者，这只是一个安全和热门的聊天话题。</p><p id="6edb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从技术上讲，峰值可以定义为与新冠肺炎相关的最大医院资源利用率和死亡人数。研究人员一直在开发预测病毒何时达到峰值的模型(<a class="ae jt" href="https://www.talktomira.com/post/when-will-coronavirus-peak-and-end-social-distancing" rel="noopener ugc nofollow" target="_blank">https://www . talktomira . com/post/when-will-coronavirus-peak-and-end-social-distanding</a>)。老实说，即使作为一名数据科学家，我也很难验证他们的模型预测有多准确。对于普通观众来说，我们没有知识和时间去收集所有这些信息。但有一点我们可以肯定的是，这一峰值与你所在州或城市的冠状病毒确诊病例高度相关。</p><p id="d66d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我给大家介绍一个在股市分析中已经广泛使用的常用技术，检查你所在的州病毒是否已经达到顶峰。</p><p id="b70d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">均线交叉策略</strong></p><p id="47f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你曾经交易过任何股票、期权或比特币，你应该熟悉均线交叉策略。如果没有，可以查看这个资源:<a class="ae jt" href="https://www.investopedia.com/articles/active-trading/052014/how-use-moving-average-buy-stocks.asp" rel="noopener ugc nofollow" target="_blank">https://www . investopedia . com/articles/active-trading/052014/how-use-moving-average-buy-stocks . ASP</a>。</p><p id="6137" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在股票市场分析中，检查股票价格移动平均线(MA)是一种直接、流行和引人注目的技术。移动平均线消除了价格变化的噪音，价格和移动平均线交叉是主要的移动平均线策略之一。高于或低于均线(MA)的价格交叉给出了趋势可能变化的信号。</p><p id="179d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">新增确诊病例马交叉检查</strong></p><p id="fbce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">MA交叉策略启发我应用每日新确诊病例MA交叉方法来检查病毒是否已达到峰值。我将分享我如何在Python Jupyter Notebook中开发解决方案。</p><ol class=""><li id="cb8b" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated"><em class="kd">加载包进行分析。</em></li></ol><pre class="je jf jg jh fd ke kf kg kh aw ki bi"><span id="a298" class="kj kk hi kf b fi kl km l kn ko">import os<br/>import pandas as pd<br/>import datetime as dt</span><span id="6b5f" class="kj kk hi kf b fi kp km l kn ko">import matplotlib.pyplot as plt<br/>import numpy as np</span><span id="ee9f" class="kj kk hi kf b fi kp km l kn ko">import warnings<br/>warnings.filterwarnings("ignore")</span></pre><p id="7f4f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.<em class="kd">读入数据。</em></p><p id="4839" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可能已经熟悉了约翰·霍普斯金在新冠肺炎追踪上的仪表盘(<a class="ae jt" href="https://coronavirus.jhu.edu/map.html" rel="noopener ugc nofollow" target="_blank">https://coronavirus.jhu.edu/map.html</a>)和他们在Github上的数据来源(<a class="ae jt" href="https://github.com/CSSEGISandData/COVID-19" rel="noopener ugc nofollow" target="_blank">https://github.com/CSSEGISandData/COVID-19</a>)。然而，我将使用来自纽约时报(【https://github.com/nytimes/covid-19-data】T4)的经过进一步处理的数据。这些数据可能仍然来自约翰·霍普金的网站。</p><pre class="je jf jg jh fd ke kf kg kh aw ki bi"><span id="5d22" class="kj kk hi kf b fi kl km l kn ko">path = '<a class="ae jt" href="https://raw.githubusercontent.com/nytimes/covid-19-data/master/'" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/nytimes/covid-19-data/master/'</a><br/>file = 'us-states.csv'<br/>df_us_states = pd.read_csv(os.path.join(path, file), parse_dates= ['date'])<br/>df_us_states['date'] = df_us_states['date'].dt.date<br/>df_us_states_sum = df_us_states.groupby(['state', 'date'])[['cases', 'deaths']].sum()<br/>df_us_states_sum['new_confirmed'] = df_us_states_sum.cases.diff()<br/>df_us_states_sum = df_us_states_sum.dropna()<br/>df_us_states_sum['new_confirmed'] = np.where((df_us_states_sum.new_confirmed &lt;  0), 0 ,df_us_states_sum.new_confirmed)<br/>df_us_states_sum = df_us_states_sum.loc[df_us_states_sum.index.get_level_values(1) &gt;= dt.date(2020, 3,10)]<br/>df_comb_sum = df_us_states_sum.reset_index().set_index('date')</span></pre><p id="600d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.<em class="kd">交互式可视化</em></p><p id="104a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将使用ipywidgets进行交互式可视化设计。我在我的另一篇文章中介绍了如何使用ipywidgets进行EDA:<a class="ae jt" rel="noopener" href="/@ppeng08/interactive-visualization-for-exploratory-data-analysis-in-jupyter-notebook-adc826e1e76a">Jupyter Notebook中探索性数据分析的交互式可视化</a>。有兴趣请参考。这里的一个区别是，这次我将使用Plotly而不是%matplotlib。</p><pre class="je jf jg jh fd ke kf kg kh aw ki bi"><span id="5531" class="kj kk hi kf b fi kl km l kn ko"># create a list to store all the state names<br/>states = df_comb_sum.state.unique()</span><span id="148e" class="kj kk hi kf b fi kp km l kn ko">import plotly.graph_objects as go</span><span id="bb92" class="kj kk hi kf b fi kp km l kn ko">import ipywidgets<br/>from ipywidgets import widgets</span><span id="575a" class="kj kk hi kf b fi kp km l kn ko"><a class="ae jt" href="http://twitter.com/ipywidgets" rel="noopener ugc nofollow" target="_blank">@ipywidgets</a>.interact<br/>def plot(state= widgets.Dropdown(options=states,value="New York", description='State:',disabled=False,), \<br/>         ma_window=widgets.IntSlider(min=3, max=15, step=1, value=7, description="SMA window:")):           <br/>    df = df_comb_sum.loc[df_comb_sum['state'] == state]<br/>    df['new_cases_sma'] = df['new_confirmed'].rolling(window=ma_window).mean()</span><span id="9ea2" class="kj kk hi kf b fi kp km l kn ko">fig = go.Figure()<br/>    fig.add_trace(go.Scatter(<br/>        x=df.index,<br/>        y=df['new_confirmed'],<br/>        mode="lines",<br/>        name="Daily New Confirmed Cases"<br/>    ))</span><span id="6753" class="kj kk hi kf b fi kp km l kn ko">fig.add_trace(go.Scatter(<br/>        x=df.index,<br/>        y=df['new_cases_sma'],<br/>        mode="lines", <br/>        name= "Daily New Cases SMA{} ".format(ma_window)<br/>    ))<br/> <br/>    fig.show()</span></pre><p id="a7bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们可以得到如下的交互可视化:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kq"><img src="../Images/e55026494913f719a802e7f869384ae3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*TtjGwsQU_X7D-Lc0z8cvow.gif"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">纽约新冠肺炎峰检查的MA交叉分析</figcaption></figure><p id="d9ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当每日新增确诊病例线越过SMA7曲线(最近滚动七天的简单移动平均线，红色上方为蓝色)上方时，新增确诊病例正在持续增长。医院的压力持续增长。当红线(MA)高于蓝线(每日新增病例线)时，该州每天新增确诊病例较少，表明病毒爆发可能达到峰值或开始向峰值移动。</p><p id="d7e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从上面纽约州的图表来看，SMA7线(红色)于4月11日开始越过每日新增确诊病例线(蓝色)，表明病例增加趋势开始改变。但是，4月15日，蓝线再次秒杀，越过SMA7线(红色)上方，这是一个值得关注的迹象。</p><p id="7b0c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以从我的<a class="ae jt" href="https://gist.github.com/phillip1029/35ceefc13924a65b28dcf44b7de45828" rel="noopener ugc nofollow" target="_blank">要点</a>中获取代码，并在<a class="ae jt" href="https://colab.research.google.com/notebooks/welcome.ipynb#recent=true" rel="noopener ugc nofollow" target="_blank">谷歌实验室</a>中免费运行它们。如果您希望我将它部署为一个应用程序，以便您可以自己使用它而无需运行代码，请告诉我，以便我可以花一点时间将应用程序部署到云。感谢您的时间、问题和评论。</p><p id="54dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">保持安全，保持健康，呆在家里。</p></div></div>    
</body>
</html>