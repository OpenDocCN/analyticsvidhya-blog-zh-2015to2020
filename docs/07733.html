<html>
<head>
<title>Marketing Analysis using R part4</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用R part4进行营销分析</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/marketing-analysis-using-r-part4-1a06d7b7f51f?source=collection_archive---------25-----------------------#2020-07-05">https://medium.com/analytics-vidhya/marketing-analysis-using-r-part4-1a06d7b7f51f?source=collection_archive---------25-----------------------#2020-07-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2f10" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">今天，我将分享一些有用的工具来比较组使用统计测试:卡方，t测试，方差分析(ANOVA)和贝叶斯方差分析。</p><p id="1a37" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">卡方检验用于如表()所示的频率计数。例如，如果您想知道以前的产品知识(变量productKnewWhatWanted)在统计上对于教师和家长有显著的不同。您可以首先制作一个计数表，然后只选择测试所需的行和列。</p><p id="1844" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我仍然在使用来自https://goo.gl/hzRyFd的数据集，并将其命名为ecomm.df</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/db1ee7f205a6491afc688323cbc8e6fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jhryRD7u6weI_ITEMtHYKA.png"/></div></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jq"><img src="../Images/fe959df2f9843482d61a08592f36c056.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ddtYt4gZ6ZmD8T1ZPFLeNg.png"/></div></div></figure><p id="d6ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一般来说，chisq.test()对表进行操作。您可以看到，我创建的prod.table只包含家长和教师配置文件的计数。然后我应用了chisq.test():</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jr"><img src="../Images/274eba7d6ad7b3d54be79bf05e147a83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ig4zv-hLAMjkA-qeSyfv9A.png"/></div></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es js"><img src="../Images/35c7e5ea3b490dad073ad5dec5c1539e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uUyajm15TEEimsRwbGwrng.png"/></div></div></figure><p id="132c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里的无效假设是，教师和家长之间没有产品知识的先验差异。一般来说，小于0.10或0.005的p值表明组间存在差异。因此，p值0.4864告诉我们，我们不能拒绝零假设。因此，我们的结论是，在卡方检验的假设下，我们的表格没有表明家长和教师群体之间在先前产品知识方面的真正差异。</p><p id="7da2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">t检验将一个样本的平均值与另一个样本的平均值或特定值进行比较。重要的一点是，它比较的是两组数据的平均值。例如，如果我们想要比较家长和教师的平均页面浏览量(我在上一篇文章中创建的pageViewInt ),我们可以使用t.test()来了解他们的差异是否具有统计显著性以及差异的置信区间。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jt"><img src="../Images/04237e3a93bd87210ab7aa8304982af5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZAM-5MMaeCKr5_unTNOEHw.png"/></div></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ju"><img src="../Images/d7ed778685a9d264c7d1e0ca8b7e1baa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KlXANvSSCApjUq1LxfvhBg.png"/></div></div></figure><p id="ee8f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们看到t统计量为2.9841，p值为0.003038。这意味着否定了按档案组(家长和教师)划分的页面浏览量无差异的零假设。数据表明，母组的页面浏览量更高。接下来我们看到差异的95%置信区间是0.279285到1.368804。如果这些是较大人群的代表性数据，我们可以有95%的置信度认为组间差异在这些值之间。</p><p id="5967" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是，如果我们想比较所有配置文件组的pageViewInt呢？然后我们需要使用方差分析测试。它比较多个组的平均值，假设各组具有相似的方差。</p><p id="8f12" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们使用aov()来建立模型，然后调用anova()来显示标准的ANOVA汇总:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jv"><img src="../Images/e7d14f4793af8e11b1f4a6ed998be4e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FiOJ09Z74iBayWhIZ68gqA.png"/></div></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jw"><img src="../Images/9840498e872ff69fb591441dbddfb8d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v-qoXiDGDVvtaN6LabOfIg.png"/></div></div></figure><p id="fae4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们看到Pr(&gt;F)的值非常接近于0，这证实了页面浏览量因档案而异。</p><p id="f59a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我想分享的最后一个有用的工具叫做贝叶斯方差分析。让我们重复之前对教师和家长页面浏览量的比较。我们使用lmBF()来指定我们的模型并设置一个伪随机数种子，因为该函数将从后验分布中提取。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jx"><img src="../Images/83bfa8f3ab8554dd918fe1da812056f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EzBnOiMjfKXUmzkVgNs0yA.png"/></div></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jy"><img src="../Images/bd48668995e662890088e04cd8436342.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8h-8R26nl3zLF6WN5zENUQ.png"/></div></div></figure><p id="172f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了找到模型参数及其可信范围，我们使用后验()从模型prof.bf1中抽取10000个可能参数的样本。这些抽取被称为链，因为它们是由马尔可夫链过程估计的。我们应该首先使用chain对象上的plot()检查绘制是否收敛到稳定值，然后我们可以使用summary()检查参数:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jz"><img src="../Images/946d4036ef7ab77445a45471b90a1614.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9hMTGJJ0xag-hEJDHd-f3g.png"/></div></div></figure><p id="5a34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们从图中选择1:4列，因为我们关心4个参数:总体均值和方差(mu和sigma)以及2个概况(教师和家长)的均值估计</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ka"><img src="../Images/e624acabee9fa90b9a4442f774655d9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UTyOLzJ5wfvBA_iTwAmuzw.png"/></div></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kb"><img src="../Images/7f1c12acb9932720b73749a807e1554a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P3BEd5K1_u5RRGFkRaGHVQ.png"/></div></div></figure><p id="2cb6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们看到估计的参数值(y轴)相对于绘制顺序(x轴)绘制。这些形成了一条粗而直的线，这意味着估计值围绕一个稳定的中心点变化；他们就这样汇合了。在右边，我们可以看到这些值的密度图。密度形状近似正态，符合回归模型的假设。因此，图表证实了模型是稳定和收敛的。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kc"><img src="../Images/94059220d4edfbf4da0b93a4ed70a39b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gEwAeojaxnySod1Npk07tw.png"/></div></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kd"><img src="../Images/e6b0e7681ca95096eb449ee775b634f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sbtiu6Y3T-TyX7BkaKwaSw.png"/></div></div></figure><p id="95c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">摘要的第一部分()给出了链中每个参数的10000次抽取的算术估计。第二部分是我们更喜欢使用的，它报告每个参数的实际观察分位数。</p><p id="29a7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了找到轮廓总数的最佳估计值，在每个绘图中找到轮廓总数。我们需要计算该级别的配置文件值，然后汇总这些估计值。为了理解这一点，让我们首先检查链对象:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ke"><img src="../Images/e3c16b85e2bdf4b1e0fa48e04863b809.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*as56IkMUotbzLXtyDDkAVQ.png"/></div></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kf"><img src="../Images/91673c4aa7bcd923e8e6f984be5c6d5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5K4fIaXAOZ_1CuqCu0guyQ.png"/></div></div></figure><p id="4181" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们看到绘制的行(总共10000行)和每个概要文件的估计的列。然后，我们需要通过将第1列(人口估计mu)添加到其他第2-3列(父母和教师)来计算概况的总数:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kg"><img src="../Images/0deca711ded821e2bc85092b69a0731b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vCVihWu4xPLHzZApypbS0A.png"/></div></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kh"><img src="../Images/d0af37ee81e682e6c23dc45762db014f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6kb2uZkAobq9gh0e4XcZAw.png"/></div></div></figure><p id="97e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是可行的，因此现在我们可以获得95%可信范围的最佳估计值。对于按配置文件建模的平均页面浏览量的估计值，我们对每一列使用apply()和quantile()，以获得我们希望的95%可信区间的概率:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ki"><img src="../Images/34cd616fcd50ef1e10f87f5950ec43cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r9B19S_Qoek1RH0xIoBPzQ.png"/></div></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kj"><img src="../Images/40e00a3dc1da6463e33c1cb9b88f62de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yxXw8aWnvk32pa4YxU8W2Q.png"/></div></div></figure><p id="bfbe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如您所看到的，我们使用2表示按列操作，并使用t()来转置结果，以便于阅读。</p><p id="c5a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">非常感谢您的阅读。下次我会分享更多有用的工具。长周末快乐！</p></div></div>    
</body>
</html>