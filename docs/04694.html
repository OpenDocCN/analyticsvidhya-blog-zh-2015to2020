<html>
<head>
<title>How To Build A Custom Amazon Alexa Skill with AWS Lambda as a backend.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何以AWS Lambda为后端构建自定义亚马逊Alexa技能？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/basics-for-developing-a-custom-alexa-skill-with-aws-lambda-as-backend-5ac115c2919?source=collection_archive---------7-----------------------#2020-03-29">https://medium.com/analytics-vidhya/basics-for-developing-a-custom-alexa-skill-with-aws-lambda-as-backend-5ac115c2919?source=collection_archive---------7-----------------------#2020-03-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/2d512ad2abca26ef238a24d73c526ebc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MGUDW3LisNhiFhATjAxiDw.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">欢迎来到Alexa技能包，你可以说你好！</figcaption></figure><p id="a5d7" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">大家好，a偶然为我的公司开发这个Alexa技能项目，并努力获得一个平稳的开端，所以我写这篇博客，以帮助他人。希望这对你有帮助。:)</p><h1 id="24e4" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">设置ASK SDK</h1><p id="01f5" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">本指南描述了如何安装ASK SDK for Python，为开发Alexa技能做准备。我在后端使用了AWS lambda函数，因为与Alexa开发者控制台和许多其他很酷的东西相比，你可以在这里调试。</p><h1 id="c5a4" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">先决条件</h1><p id="f044" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">Python的ASK SDK需要<strong class="iw hj"> Python 2 ( &gt; = 2.7) </strong>或者<strong class="iw hj"> Python 3 ( &gt; = 3.6) </strong>。继续之前，请确保您安装了受支持的Python版本。要显示版本，请在命令提示符下运行以下命令:</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="7cd3" class="le jt hi la b fi lf lg l lh li">$ python --version<br/>Python 3.6.5</span></pre><h1 id="5a77" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">将ASK SDK for Python添加到项目中</h1><p id="e88b" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">许多Python开发人员更喜欢在虚拟环境中工作，我也是，所以在这篇博客中，我将只讨论虚拟环境。虚拟环境是一个独立的Python环境，有助于管理项目依赖性和包版本。最简单的入门方法是在虚拟环境中安装SDK。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="ece9" class="le jt hi la b fi lf lg l lh li">$ pip install virtualenv</span></pre><p id="b672" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，为你的Alexa技能创建一个新文件夹，并导航到该文件夹:</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="501d" class="le jt hi la b fi lf lg l lh li">$ mkdir skill<br/>$ cd skill</span></pre><p id="5f35" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，通过发出以下命令创建一个名为<code class="du lj lk ll la b">skill_env</code>的虚拟环境:</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="d819" class="le jt hi la b fi lf lg l lh li">$ virtualenv skill_env</span></pre><p id="c496" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，激活您的虚拟环境并安装SDK。</p><p id="114d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">运行以下命令激活您的虚拟环境:</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="fbd7" class="le jt hi la b fi lf lg l lh li">$ skill_env\Scripts\activate</span></pre><p id="4051" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">命令提示符现在应该以<em class="lm"> (skill_env) </em>为前缀，表明您正在虚拟环境中工作。使用以下命令安装ASK Python SDK:</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="78b5" class="le jt hi la b fi lf lg l lh li">(skill_env)$ pip install ask-sdk</span></pre><p id="94b2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">SDK将被安装在<code class="du lj lk ll la b">skill\Lib\site-packages</code>文件夹中。site-packages文件夹中包含的目录包括:</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="ffc5" class="le jt hi la b fi lf lg l lh li">ask_sdk<br/>ask_sdk_core<br/>ask_sdk_dynamodb<br/>ask_sdk_model<br/>boto3<br/>...</span></pre><h1 id="b6ee" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">发展你的第一项技能</h1><h1 id="6ab4" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">先决条件</h1><p id="7f03" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">除了已安装的ASK SDK for Python版本之外，您还需要:</p><ul class=""><li id="d3d2" class="ln lo hi iw b ix iy jb jc jf lp jj lq jn lr jr ls lt lu lv bi translated">一个亚马逊开发者账户。这是创建和配置Alexa的技能所必需的。</li><li id="f462" class="ln lo hi iw b ix lx jb ly jf lz jj ma jn mb jr ls lt lu lv bi translated">一个<a class="ae lw" href="https://aws.amazon.com/" rel="noopener ugc nofollow" target="_blank">亚马逊网络服务</a>账户。这是在AWS Lambda上托管技能所必需的。</li></ul><h1 id="b42d" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">创建Hello World</h1><p id="ec3f" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">您将在一个名为<code class="du lj lk ll la b">hello_world.py</code>的python文件中编写您的Hello World。在您之前创建的<code class="du lj lk ll la b">skill</code>文件夹中，使用您喜欢的文本编辑器或IDE创建一个名为<code class="du lj lk ll la b">hello_world.py</code>的文件。</p><h1 id="5bca" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">实现Hello World</h1><h1 id="6992" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">请求处理程序</h1><p id="ae2c" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">自定义技能需要响应Alexa服务发送的事件。例如，当你问你的Alexa设备(如回声，回声点，回声显示等。)要“打开hello world”，您的技能需要响应发送给您的Hello World技能的启动请求。使用ASK SDK for Python，您只需编写一个请求处理程序，即处理传入请求并返回响应的代码。您的代码负责确保使用正确的请求处理程序来处理传入的请求并提供响应。</p><p id="e784" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">首先创建一个技能生成器对象。技能生成器对象有助于添加负责处理输入请求和为您的技能生成自定义响应的组件。</p><p id="3949" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">将以下代码键入或粘贴到您的<code class="du lj lk ll la b">hello_world.py</code>文件中。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="a67d" class="le jt hi la b fi lf lg l lh li">from ask_sdk_core.skill_builder import SkillBuilder</span><span id="f41f" class="le jt hi la b fi mc lg l lh li">sb = SkillBuilder()</span></pre><p id="7c3f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">为了使用处理程序类，每个请求处理程序都被编写为一个类，它实现了<code class="du lj lk ll la b">AbstractRequestHandler</code>类的两个方法；<code class="du lj lk ll la b">can_handle</code>和<code class="du lj lk ll la b">handle</code>。</p><p id="8c5f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><code class="du lj lk ll la b">can_handle</code>该方法返回一个布尔值，表明请求处理程序是否可以为请求创建适当的响应。<code class="du lj lk ll la b">can_handle</code>方法可以访问请求类型和附加属性，这些属性可能是技能在以前的请求中设置的，甚至是从以前的交互中保存的。Hello World技能只需要引用请求信息来决定每个处理程序是否可以响应传入的请求。</p><h1 id="a320" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">启动请求处理程序</h1><p id="ccb5" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">下面的代码示例显示了如何配置当技能接收到一个<a class="ae lw" href="https://developer.amazon.com/en-US/docs/alexa/custom-skills/request-types-reference.html#launchrequest" rel="noopener ugc nofollow" target="_blank"> LaunchRequest </a>时要调用的处理程序。在没有特定意图的情况下调用技能时，会发生LaunchRequest事件。</p><p id="4567" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">将以下代码键入或粘贴到您的<code class="du lj lk ll la b">hello_world.py</code>文件中，在前面的代码之后。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="96b9" class="le jt hi la b fi lf lg l lh li">from ask_sdk_core.dispatch_components import AbstractRequestHandler<br/>from ask_sdk_core.utils import is_request_type, is_intent_name<br/>from ask_sdk_core.handler_input import HandlerInput<br/>from ask_sdk_model import Response<br/>from ask_sdk_model.ui import SimpleCard</span><span id="ed3f" class="le jt hi la b fi mc lg l lh li">class LaunchRequestHandler(AbstractRequestHandler):<br/>    def can_handle(self, handler_input):<br/>        <em class="lm"># type: (HandlerInput) -&gt; bool</em><br/>        return is_request_type("LaunchRequest")(handler_input)</span><span id="9c1f" class="le jt hi la b fi mc lg l lh li">    def handle(self, handler_input):<br/>        <em class="lm"># type: (HandlerInput) -&gt; Response</em><br/>        speech_text = "Welcome to the Alexa Skills Kit, you can say hello!"</span><span id="0fba" class="le jt hi la b fi mc lg l lh li">        handler_input.response_builder.speak(speech_text).set_card(<br/>            SimpleCard("Hello World", speech_text)).set_should_end_session(<br/>            False)<br/>        return handler_input.response_builder.response</span></pre><p id="162e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果传入的请求是一个LaunchRequest，can_handle函数返回<strong class="iw hj"> True </strong>。handle函数生成并返回一个基本的问候响应。</p><h1 id="534f" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">HelloWorldIntent事件处理程序</h1><p id="7b11" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">下面的代码示例显示了如何配置一个处理程序，以便在技能收到名为HelloWorldIntent的意向请求时调用。在前一个处理程序之后，键入或粘贴以下代码到您的<code class="du lj lk ll la b">hello_world.py</code>文件中。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="19f2" class="le jt hi la b fi lf lg l lh li">class HelloWorldIntentHandler(AbstractRequestHandler):<br/>    def can_handle(self, handler_input):<br/>        <em class="lm"># type: (HandlerInput) -&gt; bool</em><br/>        return is_intent_name("HelloWorldIntent")(handler_input)</span><span id="9512" class="le jt hi la b fi mc lg l lh li">    def handle(self, handler_input):<br/>        <em class="lm"># type: (HandlerInput) -&gt; Response</em><br/>        speech_text = "Hello World"</span><span id="b8bd" class="le jt hi la b fi mc lg l lh li">        handler_input.response_builder.speak(speech_text).set_card(<br/>            SimpleCard("Hello World", speech_text)).set_should_end_session(<br/>            True)<br/>        return handler_input.response_builder.response</span></pre><p id="d2dd" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">can_handle函数检测传入请求是否为<a class="ae lw" href="https://developer.amazon.com/en-US/docs/alexa/custom-skills/request-types-reference.html#intentrequest" rel="noopener ugc nofollow" target="_blank"> IntentRequest </a>，如果intent名称为HelloWorldIntent，则返回<strong class="iw hj"> True </strong>。handle函数生成并返回一个基本的“Hello World”响应。</p><h1 id="c12e" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">帮助意图处理程序</h1><p id="8359" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">下面的代码示例显示了如何配置一个处理程序，以便在技能接收到内置意图<a class="ae lw" href="https://developer.amazon.com/en-US/docs/alexa/custom-skills/standard-built-in-intents.html#available-standard-built-in-intents" rel="noopener ugc nofollow" target="_blank"> AMAZON时调用。帮助意向</a>。在前一个处理程序之后，键入或粘贴以下代码到您的<code class="du lj lk ll la b">hello_world.py file</code>中。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="70ac" class="le jt hi la b fi lf lg l lh li">class HelpIntentHandler(AbstractRequestHandler):<br/>    def can_handle(self, handler_input):<br/>        <em class="lm"># type: (HandlerInput) -&gt; bool</em><br/>        return is_intent_name("AMAZON.HelpIntent")(handler_input)</span><span id="217c" class="le jt hi la b fi mc lg l lh li">    def handle(self, handler_input):<br/>        <em class="lm"># type: (HandlerInput) -&gt; Response</em><br/>        speech_text = "You can say hello to me!"</span><span id="9778" class="le jt hi la b fi mc lg l lh li">        handler_input.response_builder.speak(speech_text).ask(speech_text).set_card(<br/>            SimpleCard("Hello World", speech_text))<br/>        return handler_input.response_builder.response</span></pre><p id="6add" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">与前面的处理程序类似，该处理程序将IntentRequest与预期的intent名称进行匹配。返回基本的帮助指令，<code class="du lj lk ll la b">.ask(speech_text)</code>使用户的麦克风打开，供用户响应。</p><h1 id="71fd" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">CancelAndStopIntent处理程序</h1><p id="8d97" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">CancelAndStopIntentHandler类似于HelpIntent处理程序，因为它也是由内置的<a class="ae lw" href="https://developer.amazon.com/en-US/docs/alexa/custom-skills/standard-built-in-intents.html#available-standard-built-in-intents" rel="noopener ugc nofollow" target="_blank"> AMAZON触发的。取消或亚马逊。停止意图</a>。以下示例使用单个处理程序来响应这两种意图。将以下代码键入或粘贴到您的<code class="du lj lk ll la b">hello_world.py</code>文件中，在前面的处理程序之后。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="d92e" class="le jt hi la b fi lf lg l lh li">class CancelAndStopIntentHandler(AbstractRequestHandler):<br/>    def can_handle(self, handler_input):<br/>        <em class="lm"># type: (HandlerInput) -&gt; bool</em><br/>        return is_intent_name("AMAZON.CancelIntent")(handler_input)<br/>                or is_intent_name("AMAZON.StopIntent")(handler_input)</span><span id="79b0" class="le jt hi la b fi mc lg l lh li">    def handle(self, handler_input):<br/>        <em class="lm"># type: (HandlerInput) -&gt; Response</em><br/>        speech_text = "Goodbye!"</span><span id="cca5" class="le jt hi la b fi mc lg l lh li">        handler_input.response_builder.speak(speech_text).set_card(<br/>            SimpleCard("Hello World", speech_text)).set_should_end_session(True)<br/>        return handler_input.response_builder.response</span></pre><p id="9d0a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">对这两种意图的响应是相同的，因此使用单一处理程序可以减少重复代码。</p><h1 id="74ad" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">SessionEndedRequest处理程序</h1><p id="e8f6" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">虽然在接收到一个<a class="ae lw" href="https://developer.amazon.com/en-US/docs/alexa/custom-skills/request-types-reference.html#sessionendedrequest" rel="noopener ugc nofollow" target="_blank"> SessionEndedRequest </a>之后，您不能返回一个带有任何语音、卡片或指令的响应，但是SessionEndedRequestHandler是一个放置您的清理逻辑的好地方。在前一个处理程序之后，键入或粘贴以下代码到您的<code class="du lj lk ll la b">hello_world.py</code>文件中。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="f27a" class="le jt hi la b fi lf lg l lh li">class SessionEndedRequestHandler(AbstractRequestHandler):<br/>    def can_handle(self, handler_input):<br/>        <em class="lm"># type: (HandlerInput) -&gt; bool</em><br/>        return is_request_type("SessionEndedRequest")(handler_input)</span><span id="0a0e" class="le jt hi la b fi mc lg l lh li">    def handle(self, handler_input):<br/>        <em class="lm"># type: (HandlerInput) -&gt; Response</em><br/>        <em class="lm"># any cleanup logic goes here</em></span><span id="4767" class="le jt hi la b fi mc lg l lh li">        return handler_input.response_builder.response</span></pre><h1 id="a75c" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">实现异常处理程序</h1><p id="d06e" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">以下示例向您的技能添加了一个<em class="lm">无所不包</em>异常处理程序，以确保该技能为所有异常返回一条有意义的消息。将以下代码键入或粘贴到您的<code class="du lj lk ll la b">hello_world.py</code>文件中，在前面的处理程序之后。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="920b" class="le jt hi la b fi lf lg l lh li">from ask_sdk_core.dispatch_components import AbstractExceptionHandler</span><span id="03db" class="le jt hi la b fi mc lg l lh li">class AllExceptionHandler(AbstractExceptionHandler):</span><span id="f720" class="le jt hi la b fi mc lg l lh li">    def can_handle(self, handler_input, exception):<br/>        <em class="lm"># type: (HandlerInput, Exception) -&gt; bool</em><br/>        return True</span><span id="f231" class="le jt hi la b fi mc lg l lh li">    def handle(self, handler_input, exception):<br/>        <em class="lm"># type: (HandlerInput, Exception) -&gt; Response</em><br/>        <em class="lm"># Log the exception in CloudWatch Logs</em><br/>        print(exception)</span><span id="a6d2" class="le jt hi la b fi mc lg l lh li">        speech = "Sorry, I didn't get it. Can you please say it again!!"<br/>        handler_input.response_builder.speak(speech).ask(speech)<br/>        return handler_input.response_builder.response</span></pre><h1 id="1805" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">创建Lambda处理器</h1><p id="41dc" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated"><a class="ae lw" href="https://docs.aws.amazon.com/lambda/latest/dg/python-programming-model-handler-types.html" rel="noopener ugc nofollow" target="_blank"> Lambda处理程序</a>是AWS Lambda函数的入口点。下面的代码示例创建一个Lambda处理程序函数，将所有入站请求路由到您的技能。Lambda handler函数创建一个SDK skill实例，该实例配置了您刚刚创建的请求处理程序。将以下代码键入或粘贴到您的<code class="du lj lk ll la b">hello_world.py</code>文件中，在前一个处理程序之后。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="2a44" class="le jt hi la b fi lf lg l lh li">sb.add_request_handler(LaunchRequestHandler())<br/>sb.add_request_handler(HelloWorldIntentHandler())<br/>sb.add_request_handler(HelpIntentHandler())<br/>sb.add_request_handler(CancelAndStopIntentHandler())<br/>sb.add_request_handler(SessionEndedRequestHandler())</span><span id="00e7" class="le jt hi la b fi mc lg l lh li">sb.add_exception_handler(AllExceptionHandler())</span><span id="cb69" class="le jt hi la b fi mc lg l lh li">handler = sb.lambda_handler()</span></pre><p id="3a51" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">一旦你创建了你的AWS Lambda函数，是时候给Alexa服务调用它的能力了。为此，导航到Lambda配置中的<strong class="iw hj">触发器</strong>选项卡，并添加<strong class="iw hj"> Alexa技能工具包</strong>作为触发器类型。完成后，上传上一步生成的文件<code class="du lj lk ll la b">skill.zip</code>，并用module_name.handler填充<em class="lm">处理程序</em>信息，在本例中为<code class="du lj lk ll la b">hello_world.handler</code>。</p><figure class="kv kw kx ky fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es md"><img src="../Images/30282636785b4c59fa3680bc605fc993.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lT1B3lohRhBSHaeexf9Eog.png"/></div></div></figure><h1 id="49c4" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">配置和测试您的技能</h1><p id="17df" class="pw-post-body-paragraph iu iv hi iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr hb bi translated">现在技能代码已经上传到AWS Lambda了，可以用Alexa配置技能了。</p><ul class=""><li id="6f53" class="ln lo hi iw b ix iy jb jc jf lp jj lq jn lr jr ls lt lu lv bi translated">按照以下步骤创建新技能:</li></ul><ol class=""><li id="5f57" class="ln lo hi iw b ix iy jb jc jf lp jj lq jn lr jr me lt lu lv bi translated">登录<a class="ae lw" href="https://developer.amazon.com/alexa/console/ask" rel="noopener ugc nofollow" target="_blank"> Alexa技能工具包开发者控制台</a>。</li><li id="1a6e" class="ln lo hi iw b ix lx jb ly jf lz jj ma jn mb jr me lt lu lv bi translated">点击右上角的<strong class="iw hj">创造技能</strong>按钮。</li><li id="f2fe" class="ln lo hi iw b ix lx jb ly jf lz jj ma jn mb jr me lt lu lv bi translated">输入“mark1”作为您的技能名称，然后单击下一步。</li><li id="cbe5" class="ln lo hi iw b ix lx jb ly jf lz jj ma jn mb jr me lt lu lv bi translated">对于模型，选择<strong class="iw hj">自定义</strong>，点击<strong class="iw hj">创建技能</strong>。</li></ol><figure class="kv kw kx ky fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mf"><img src="../Images/65d402a393294a32754d4a961cfc4c45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iqrcm86q5b0wY6eYs_TyZA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">此处技能名称为“mark1”。</figcaption></figure><ul class=""><li id="0d83" class="ln lo hi iw b ix iy jb jc jf lp jj lq jn lr jr ls lt lu lv bi translated">接下来，定义技能的交互模型。从工具条中选择<strong class="iw hj">调用</strong>选项，输入<strong class="iw hj">技能调用名称</strong>的“欢迎者”。</li></ul><figure class="kv kw kx ky fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mg"><img src="../Images/00e6b181ad65fd3fb757d62f56b67458.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A5Qk3SmlBjiudOKE7oKUwQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">调用名称“标记一”。</figcaption></figure><ul class=""><li id="bfa6" class="ln lo hi iw b ix iy jb jc jf lp jj lq jn lr jr ls lt lu lv bi translated">接下来，向交互模型添加一个名为<code class="du lj lk ll la b">HelloWorldIntent</code>的意图。点击交互模型的Intents部分下的<strong class="iw hj"> Add </strong>按钮。保持选择<strong class="iw hj">创建自定义意图</strong>，输入<strong class="iw hj"> HelloWorldIntent </strong>作为意图名称，并创建意图。在intent detail页面上，添加一些示例语句，用户可以说出这些语句来调用intent。对于这个例子，考虑下面的示例话语，并随意添加其他的。</li></ul><figure class="kv kw kx ky fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mh"><img src="../Images/2ae38e1b5356b2b22c9c68d556e52338.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kVBnBR7NadRS7f8-2v4eMQ.png"/></div></div></figure><ul class=""><li id="a0a3" class="ln lo hi iw b ix iy jb jc jf lp jj lq jn lr jr ls lt lu lv bi translated">由于<code class="du lj lk ll la b">AMAZON.CancelIntent</code>、<code class="du lj lk ll la b">AMAZON.HelpIntent</code>和<code class="du lj lk ll la b">AMAZON.StopIntent</code>是内置的Alexa意图，您不需要为它们提供示例语句。</li><li id="821a" class="ln lo hi iw b ix lx jb ly jf lz jj ma jn mb jr ls lt lu lv bi translated">编辑完交互模型后，一定要保存并构建模型。</li><li id="f95c" class="ln lo hi iw b ix lx jb ly jf lz jj ma jn mb jr ls lt lu lv bi translated">接下来，为技能配置端点。为此，请按照下列步骤操作:</li></ul><figure class="kv kw kx ky fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mi"><img src="../Images/2322845c505929855d105eb502654354.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f5J0iIfv0h7ixnlc39Dgug.png"/></div></div></figure><figure class="kv kw kx ky fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mi"><img src="../Images/2322845c505929855d105eb502654354.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f5J0iIfv0h7ixnlc39Dgug.png"/></div></div></figure><p id="eb01" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在新选项卡中打开AWS开发人员控制台。</p><p id="75a9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">导航到上一步中创建的AWS Lambda函数。</p><figure class="kv kw kx ky fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mj"><img src="../Images/2abf8ed79de2c3ecfc71801c8d2560e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4S1zFzWLhEU-4-uH_qIvAg.png"/></div></div></figure><p id="3395" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">从<strong class="iw hj">设计器</strong>菜单中，添加<strong class="iw hj"> Alexa技能包</strong>触发菜单，向下滚动将技能ID粘贴到<strong class="iw hj">技能ID验证</strong>配置中。完成后点击<strong class="iw hj">添加并保存</strong>以更新AWS Lambda功能。</p><figure class="kv kw kx ky fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mk"><img src="../Images/2d12b92c92e244eba6e328bb98f4c586.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m74wBeDb1EaGbR8pIxEecg.png"/></div></div></figure><p id="4fc3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">从页面右上角复制AWS Lambda函数<strong class="iw hj"> ARN </strong>。ARN是一个唯一的资源号，帮助Alexa服务识别它在技能调用期间需要调用的AWS Lambda函数。</p><figure class="kv kw kx ky fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ml"><img src="../Images/a367500ac6fd1e9eb14aee8015742d23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c7td8w_RDrLZTCtITG8Vbg.png"/></div></div></figure><p id="3c55" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">导航到Alexa技能工具包开发者控制台，点击你的<strong class="iw hj">标记1 </strong>技能。</p><p id="47ef" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在您的技能下，点击<strong class="iw hj">端点</strong>选项卡，选择<strong class="iw hj"> AWS Lambda ARN </strong>并粘贴在<strong class="iw hj">默认区域</strong>字段下的ARN中。</p><figure class="kv kw kx ky fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mm"><img src="../Images/9d74bab269276f03d271ed537d17c6a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qmcmKqBhsgtVMMTyrpBYwQ.png"/></div></div></figure><p id="2d21" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">其余设置可以保留默认值。点击<strong class="iw hj">保存端点</strong>。</p><p id="53b3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">点击<strong class="iw hj">调用</strong>选项卡，保存并建立模型。</p><figure class="kv kw kx ky fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/0779a3f754d4f8aea799a6d31a629e7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_0EUIes0CEaKP6K1GyW2VA.png"/></div></div></figure><p id="e3f3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">此时，可以测试技能了。在顶部导航中，点击<strong class="iw hj">测试</strong>。确保该技能的<strong class="iw hj">测试已启用</strong>选项已启用。您可以使用测试页面以文本和语音形式模拟请求。</p><figure class="kv kw kx ky fd ij er es paragraph-image"><div class="er es mo"><img src="../Images/24a85f348d2a3f1adff3f78030503869.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*INxqBRgVy5BihB-857aWqw.png"/></div></figure><p id="e36d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">使用调用名和一个示例语句作为指导。例如，<em class="lm">告诉迎宾员说你好</em>应该会让你的技能用“你好，世界”的声音和带显示屏的设备上的“你好，世界”卡片来回应。你也可以在手机上或在<a class="ae lw" href="https://alexa.amazon.com/" rel="noopener ugc nofollow" target="_blank">https://alexa.amazon.com</a>打开Alexa应用程序，在<strong class="iw hj">你的技能</strong>下查看你的技能。</p><p id="9f3c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">请随意开始试验您的意图以及技能代码中相应的请求处理程序。一旦你完成了迭代，可选地继续获得你的技能认证和发布，这样它可以被世界各地的客户使用。</p><p id="8b87" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">你可以在这里找到上面<a class="ae lw" href="https://github.com/prasoons075/Alexa-Skill/blob/master/hello_world.py" rel="noopener ugc nofollow" target="_blank">的完整代码。</a></p></div></div>    
</body>
</html>