<html>
<head>
<title>Work Effectively With Dates in Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">有效处理熊猫中的日期</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/work-effectively-with-dates-in-pandas-9bf0bf582f35?source=collection_archive---------15-----------------------#2020-09-08">https://medium.com/analytics-vidhya/work-effectively-with-dates-in-pandas-9bf0bf582f35?source=collection_archive---------15-----------------------#2020-09-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/1301ecde8429d91febbb8b2c59dfa6b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jYkjs1MBkSQQ9uhs7DlkAQ.jpeg"/></div></div></figure><p id="905a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">计算机如何处理日期和时间是一个丰富的话题，但是您现在需要知道的是Python将它们存储为一种特殊的日期类型:<strong class="is hj"> datetime </strong>。</p><p id="ec9a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然而，在pandas中，默认情况下datetime列作为对象(字符串)加载，如果您想按时间排列记录，请选择在一个时间范围内或计算某个时间间隔，但是您将需要datetime列。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h2 id="07ad" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated">导入数据</h2><p id="53c7" class="pw-post-body-paragraph iq ir hi is b it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn hb bi translated">以导入数据集为例，在导入过程中不进行任何配置，会得到以下结果:</p><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kv"><img src="../Images/7ac48aaed573db91d796a316e057e24d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tv4ESbpKy1SJyz3NOdlNQw.png"/></div></div><figcaption class="la lb et er es lc ld bd b be z dx translated">导入没有日期配置的数据集</figcaption></figure><p id="c621" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如我上面提到的，默认情况下，日期列作为对象加载。因此，为了确保将列作为datetime导入，我们指定列的datetime带有<code class="du le lf lg lh b">parse_dates</code>关键字参数(不是<code class="du le lf lg lh b">dtype</code>)。除此之外，<code class="du le lf lg lh b">parse_dates</code>接受:</p><ul class=""><li id="7007" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn ln lo lp lq bi translated">要分析的列名或列号的列表；</li><li id="557a" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">包含要组合和解析的列的列表，例如单独的日、月和年列；</li><li id="5973" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">一种字典，其中键是新的列名，值是要一起解析的列的列表</li></ul><h1 id="c347" class="lw jw hi bd jx lx ly lz kb ma mb mc kf md me mf ki mg mh mi kl mj mk ml ko mm bi translated">解析日期</h1><p id="3f80" class="pw-post-body-paragraph iq ir hi is b it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn hb bi translated"><strong class="is hj">标准格式</strong></p><p id="a06b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了解析标准格式的日期，我们使用前面提到的<code class="du le lf lg lh b">parse_dates</code>，传递列名或列名列表，如下所示:</p><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/c01795fc938f12f0e710d56504f911a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iLH7xoUsFdp3NGJNE7MdYw.png"/></div></div><figcaption class="la lb et er es lc ld bd b be z dx translated">使用parse_dates参数导入数据集。</figcaption></figure><p id="b1c2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当我们检查时间戳列的dtypes时，我们看到两列被成功解析。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="f20b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了解析<strong class="is hj">拆分时间戳</strong>列，我们可以添加一个包含特定列的列表，并将它们传递给<code class="du le lf lg lh b">parse_dates</code>参数。在我们的例子中，我们需要连接<code class="du le lf lg lh b">Date</code>和<code class="du le lf lg lh b">Hour</code>列。因此，pandas创建了一个新的组合datetime <code class="du le lf lg lh b">Hour_Date</code>列。结果如下所示:</p><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mo"><img src="../Images/56b6e531537cf8b1ee1c6c453d5a3faf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*75QW-5_IFUSD-19JGmmG9A.png"/></div></div><figcaption class="la lb et er es lc ld bd b be z dx translated">拆分时间戳的结果</figcaption></figure><h1 id="08bb" class="lw jw hi bd jx lx ly lz kb ma mb mc kf md me mf ki mg mh mi kl mj mk ml ko mm bi translated">非标准日期</h1><p id="1532" class="pw-post-body-paragraph iq ir hi is b it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn hb bi translated">然而，<code class="du le lf lg lh b">parse_dates</code>只在数据是熊猫理解的格式时才起作用。也就是说，如果您试图用<code class="du le lf lg lh b">parse_dates</code>解析未格式化的日期，比如<strong class="is hj"> 09032020 </strong>表示<strong class="is hj">九月</strong> <strong class="is hj"> 03，2020，</strong>您将得到一个字符串列作为结果。相反，我们需要在用pandas <code class="du le lf lg lh b">to_datetime()</code>方法导入数据集后转换非标准的。</p><p id="552b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du le lf lg lh b">to_datetime()</code>采用以下参数:</p><ul class=""><li id="50c2" class="li lj hi is b it iu ix iy jb lk jf ll jj lm jn ln lo lp lq bi translated">要转换的数据框架和列；</li><li id="718a" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated"><code class="du le lf lg lh b">format</code>:日期时间格式的字符串表示。</li></ul></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h2 id="f02b" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated">日期格式</h2><p id="cf38" class="pw-post-body-paragraph iq ir hi is b it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn hb bi translated">它们用代码和字符描述日期时间字符串格式。我们可以将最常见的日期格式举例如下:</p><blockquote class="mp mq mr"><p id="9c72" class="iq ir ms is b it iu iv iw ix iy iz ja mt jc jd je mu jg jh ji mv jk jl jm jn hb bi translated">完整名单请参考<a class="ae mw" href="https://strftime.org" rel="noopener ugc nofollow" target="_blank">https://strftime.org</a></p></blockquote><figure class="kw kx ky kz fd ij er es paragraph-image"><div class="er es mx"><img src="../Images/98e4173cd43621f6cb5f69ea2da84ecb.png" data-original-src="https://miro.medium.com/v2/resize:fit:916/format:webp/1*yIF1siA0TLsNhNlCVymR9Q.png"/></div><figcaption class="la lb et er es lc ld bd b be z dx translated">最常见的日期格式</figcaption></figure><h2 id="4b2d" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated">解析非标准日期</h2><p id="0244" class="pw-post-body-paragraph iq ir hi is b it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn hb bi translated">首先，我们需要检查我们的数据，看看数据是以什么格式排列的。在我们的例子中，我们解析<strong class="is hj">Date _ Hour _ Without _ Formatting</strong>列，我们可以看到日、月、年、小时、分钟和秒的序列。因此，在这之后，我们定义格式化代码并使用<code class="du le lf lg lh b">to_datetime()</code>，如图所示:</p><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es my"><img src="../Images/cd7f3740a689edef42c68e18adbed2a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F0CSsYdIuQS9r3QAWxGiHA.png"/></div></div><figcaption class="la lb et er es lc ld bd b be z dx translated">解析非标准日期的结果</figcaption></figure></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="d315" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">那就这样吧！我想指出的是，还有其他方法来转换日期！感谢你的阅读，如果你喜欢这篇文章，尽你所能点击鼓掌图标！</p></div></div>    
</body>
</html>