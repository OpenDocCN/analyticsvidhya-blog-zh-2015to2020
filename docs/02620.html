<html>
<head>
<title>How To: Scrape the Internet for Data using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何:使用Python在互联网上搜索数据</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-querying-the-internet-for-data-part-1-5385f3961b52?source=collection_archive---------15-----------------------#2019-12-25">https://medium.com/analytics-vidhya/how-to-querying-the-internet-for-data-part-1-5385f3961b52?source=collection_archive---------15-----------------------#2019-12-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="dbee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">这是2017年跑卫系列的第1部分，共3部分。</em></p><p id="2d9c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当一个问题出现时，你知道你是一个极客，你立即想到编码解决方案。</p><p id="5181" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我是一个超级体育迷，go #WhoDatNation，体育最棒的部分之一就是随之而来的无穷无尽的数据。每项运动的每场比赛都会产生更多的数据，这意味着有更多的数据可供分析。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/23b526eff6d494f240e6bb85aa452502.png" data-original-src="https://miro.medium.com/v2/resize:fit:516/format:webp/1*Mv_CHAZDXxPeJ7Y1yeXQ9w.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">总有相关的XKCD。</figcaption></figure><p id="7938" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就在昨天，在维京人和包装工队的比赛中，评论员提到了2017年NFL选秀，以及它如何产生了我们见过的最好的选秀课程之一。所以我花了一些时间在网上寻找球员的完整名单，看看他们从那以后的表现。事实证明，并没有一个简化的列表——所以让我们做一个吧！</p><blockquote class="jq jr js"><p id="07da" class="if ig jd ih b ii ij ik il im in io ip jt ir is it ju iv iw ix jv iz ja jb jc hb bi translated">在How To中，我们将学习如何使用Python和请求库来查询互联网。然后，我们将数据转换成DataFrame，这样我们就可以使用Pandas和Python中的其他库来进一步操作和分析数据。</p></blockquote></div><div class="ab cl jw jx gp jy" role="separator"><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb"/></div><div class="hb hc hd he hf"><p id="82c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">什么是网页抓取？听起来，它是在网上搜寻信息。现在，这并不意味着我们自己去尝试获取信息；这意味着我们正在利用某种技术使检索过程更容易。</p><p id="71cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将从挑选我们想要查看的信息开始，在我们的情况下，这是2017年的某种选秀名单。快速搜索显示，维基百科关于2017年NFL选秀<a class="ae kd" href="https://en.wikipedia.org/wiki/2017_NFL_Draft" rel="noopener ugc nofollow" target="_blank">的页面有一个漂亮且易于阅读的表格，所以我们将使用它。</a></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es ke"><img src="../Images/bf346da5ca85dd68928cc30b7defb4c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X3J7D5V7zs6IeOhYWkCZqw.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">2017年NFL选秀前20名。</figcaption></figure><p id="ddae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，让我们导入所有必需的库。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="kj kk l"/></div></figure><p id="47aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Python中的<a class="ae kd" href="https://2.python-requests.org/en/master/" rel="noopener ugc nofollow" target="_blank">请求</a>库允许您向URI\URL发送请求。这些请求通常是POST(添加)、PUT(更新)、GET(检索)和DELETE(删除)。这些是您在与典型的API交互时可以采取的操作，而请求库使您可以轻松地与所述API进行交互。出于我们的目的，我们只需要向维基百科的网页发送一个GET请求。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="kj kk l"/></div></figure><p id="35ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这一行使用请求库的<code class="du kl km kn ko b">get</code>方法并返回一个响应对象，在我们的例子中是<code class="du kl km kn ko b">&lt;Response [200]&gt;</code>。<code class="du kl km kn ko b">200</code>是我们得到的一个HTTP状态代码。200 OK是表示请求成功的响应！</p><p id="f562" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">实际GET请求的内容存储在<code class="du kl km kn ko b">r.content</code>中，是我们查询的Wikipedia页面的原始html。我们将使用带有<a class="ae kd" href="https://pypi.org/project/beautifulsoup4/" rel="noopener ugc nofollow" target="_blank"> BeautifulSoup </a>的内容。BeautifulSoup允许我们使HTML可读，并在HTML中搜索元素(例如我们正在寻找的表格)。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="kj kk l"/></div></figure><p id="3f86" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，<code class="du kl km kn ko b">root</code>保存了格式化的HTML，是一个我们可以使用BeautifulSoup的<code class="du kl km kn ko b">.find</code>方法进行搜索的对象。让我们首先在HTML中找到确切的表格</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es kp"><img src="../Images/693c6bf8ae1a8144c712dcc48efbceb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YRpxf80M-NYVqOaCDb6dsA.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">这是保存拔模数据的表格。注意，这个类是“维基可排序的”。</figcaption></figure><p id="77d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们已经找到了桌子，但是我们怎样才能进一步使用它呢？这就是熊猫的用武之地。Pandas是一个库，为数据操作和分析提供了不同类型的数据结构。在用Python处理数据时，由于它的灵活性和特性，它是一个很好的资源。Pandas中的数据帧是一个2D数组，表示为一个表。我们使用这些表来轻松地访问数据。</p><p id="12f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">回到手头的问题。现在我们已经找到了表，我们可以使用BeautifulSoup的<code class="du kl km kn ko b">find</code>方法在HTML中查找正确的表(通过指定我们要查找的类)。然后，我们可以用这个表格HTML创建一个熊猫数据框架，以便进一步操作。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="kj kk l"/></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es kq"><img src="../Images/058f7f63edd7a67a20518fd880850f6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xlL8_61gvmb1s7TLcJFYxQ.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">看看df.head()返回什么。我们有数据了！</figcaption></figure><p id="9aed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">恭喜你。您能够从web中抓取数据，并将其存储在一个易于使用的数据结构中，我们可以用它来执行数据分析。然而，我们还没有完全完成。下一步是预处理数据。我们将通过删除<code class="du kl km kn ko b">Unnamed: 0</code>列并重命名剩余的列来清理我们的数据帧。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="kj kk l"/></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es kr"><img src="../Images/7889e7fd4197294123dd681056204cfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w_uvYYBVcD_4ZIValrkbXw.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">df.head()现在返回修改后的DataFrame。干净利落，蓄势待发！</figcaption></figure><blockquote class="jq jr js"><p id="d8ac" class="if ig jd ih b ii ij ik il im in io ip jt ir is it ju iv iw ix jv iz ja jb jc hb bi translated">预处理数据是数据分析的必要步骤，因为它允许我们处理只包含我们关心的值的<a class="ae kd" href="http://vita.had.co.nz/papers/tidy-data.pdf" rel="noopener ugc nofollow" target="_blank">【整齐的数据】</a>。数据还应该易于使用，以便未来的应用更容易(如果我们进入数据可视化或机器学习)。</p></blockquote><p id="c1fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们已经清理了数据，我们可以开始查看我们感兴趣的内容:班级中的跑卫(由“RB”位置指示)。对我们来说幸运的是，Pandas使得过滤我们的数据变得很容易(而且有很多方法可以做到这一点)。我们将创建一个新的数据帧来存储所有的运行备份。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="kj kk l"/></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es ks"><img src="../Images/14f9ed63be519000cfaf295a808e15f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c6-KiUjDIvl2VOrML4vyfA.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">跑锋最终名单！</figcaption></figure><p id="7672" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">至此，我们完成了本教程！我们能够使用requests和BeautifulSoup库来查询Wikipedia网页并获得我们的表的HTML。然后我们使用Pandas，将HTML转换成数据帧，我们可以清理和过滤它，得到我们的跑锋列表！</p><p id="1ead" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在系列的下一部分<a class="ae kd" rel="noopener" href="/@amanjaiman/how-to-manipulate-dataframes-in-pandas-31375623d859">中，我们将使用我们所学的关于请求的知识来获取更多的数据，并学习如何处理数据帧。然后我们将学习可视化我们的数据，看看2017年的跑卫现在在NFL的表现如何，与其他人相比。</a></p><p id="73c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">本教程的完整代码如下:</em></p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="kj kk l"/></div></figure></div><div class="ab cl jw jx gp jy" role="separator"><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb"/></div><div class="hb hc hd he hf"><p id="b713" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">一如既往，我很想听听你对这篇文章的看法！将任何问题或意见发送至</em><a class="ae kd" href="mailto:amanjaiman@outlook.com" rel="noopener ugc nofollow" target="_blank"><em class="jd"/></a><em class="jd">。</em></p></div></div>    
</body>
</html>