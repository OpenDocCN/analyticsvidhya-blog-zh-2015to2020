<html>
<head>
<title>A Quick Guide to OpenCV: Read and Write Video Files</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">OpenCV快速指南:读写视频文件</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/a-quick-guide-to-opencv-read-and-write-video-files-78f2dca1c0e4?source=collection_archive---------21-----------------------#2019-11-19">https://medium.com/analytics-vidhya/a-quick-guide-to-opencv-read-and-write-video-files-78f2dca1c0e4?source=collection_archive---------21-----------------------#2019-11-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="9a45" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">第2部分:读写视频文件并模糊ROI</h2></div><p id="284d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">到目前为止，基于第一部分的<a class="ae jt" rel="noopener" href="/@arjitss/a-quick-guide-opencv-6f791f1c014d">，</a>我们已经完成了所有的配置和安装，现在我们的MacBook已经准备好运行这个神奇的库<strong class="iz hj"> OpenCV </strong>。<br/>下一步是编写并执行Cpp程序[<a class="ae jt" href="https://github.com/arjitss/SecureVideoTransfer" rel="noopener ugc nofollow" target="_blank">Github Repo link</a>]来读写视频文件。让我们一步一步开始:</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kb"><img src="../Images/95e65286649586a33cc8a6f1989db0e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3VigQLeUNUe1aJCB0AomAg.png"/></div></div></figure><h1 id="df8c" class="kn ko hi bd kp kq kr ks kt ku kv kw kx io ky ip kz ir la is lb iu lc iv ld le bi translated">第一步:</h1><p id="9b75" class="pw-post-body-paragraph ix iy hi iz b ja lf ij jc jd lg im jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">打开Xcode，点击创建新项目。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es lk"><img src="../Images/37f8a9dcac3e12844e3543f832dba5be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TwJmn-1P8gdh0RtvELgvmg.png"/></div></div></figure><h1 id="c6c6" class="kn ko hi bd kp kq kr ks kt ku kv kw kx io ky ip kz ir la is lb iu lc iv ld le bi translated">第二步:</h1><p id="a11f" class="pw-post-body-paragraph ix iy hi iz b ja lf ij jc jd lg im jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">点击macOS，选择应用程序类型作为命令行工具。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es ll"><img src="../Images/8eccb345572409eae97dd4ab2fa5ced6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yewEamCn_3L7HO2X1NuAqg.png"/></div></div></figure><p id="ec97" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后根据您的选择写下您的应用程序的名称</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es lm"><img src="../Images/c54b166a0d33e65cd42b8d5f82575373.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eQJhwDRfQ1SmA3vmhXBsJg.png"/></div></div></figure><p id="6430" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后选择创建项目的位置。就这样..！步骤2已完成。去喝杯茶吧。</p><h1 id="90b2" class="kn ko hi bd kp kq kr ks kt ku kv kw kx io ky ip kz ir la is lb iu lc iv ld le bi translated">第三步:</h1><p id="0c86" class="pw-post-body-paragraph ix iy hi iz b ja lf ij jc jd lg im jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">您将看到的下一个屏幕是您的应用程序<strong class="iz hj">项目设置</strong>屏幕。在“常规”选项卡上，在“框架和库”下添加OpenCV库。点击小的“<strong class="iz hj"> + </strong>”符号，添加我们在第1部分下载的所有库文件。位置是<strong class="iz hj">opencv-4 . 1 . 1</strong>→<strong class="iz hj">build</strong>→<strong class="iz hj">lib</strong>→All "<em class="ln">* . 4 . 1 . 1 . dylib "</em>文件。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es lo"><img src="../Images/9b57d7e70e640d7fe68d87599d0e2a10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g-xntfFtlTsdmArzZpLYSw.png"/></div></div></figure><h1 id="32c2" class="kn ko hi bd kp kq kr ks kt ku kv kw kx io ky ip kz ir la is lb iu lc iv ld le bi translated">第四步:</h1><p id="7672" class="pw-post-body-paragraph ix iy hi iz b ja lf ij jc jd lg im jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">接下来，根据您的安装，转到构建设置并更新以下三个路径:</p><ol class=""><li id="2136" class="lp lq hi iz b ja jb jd je jg lr jk ls jo lt js lu lv lw lx bi translated">框架搜索路径</li><li id="4992" class="lp lq hi iz b ja ly jd lz jg ma jk mb jo mc js lu lv lw lx bi translated">标题搜索路径</li><li id="5f8f" class="lp lq hi iz b ja ly jd lz jg ma jk mb jo mc js lu lv lw lx bi translated">库搜索路径</li></ol><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es md"><img src="../Images/c4581524bbd79267b0ee5397148e14df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tzTvwzgjmmWw29P-XQBKQg.png"/></div></div></figure><p id="a6f2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">伙计们，你们已经准备好发射了。所有设置部分都已完成。现在，点击main.cpp文件，尝试编译和构建代码，进行感觉检查，确认一切正常。下一步将开始探索OpenCV库(类和函数)。</p><h1 id="3a81" class="kn ko hi bd kp kq kr ks kt ku kv kw kx io ky ip kz ir la is lb iu lc iv ld le bi translated">第五步:</h1><p id="3577" class="pw-post-body-paragraph ix iy hi iz b ja lf ij jc jd lg im jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">所以现在一切都准备好了，你可以开始编码了。<br/>在这一步，我将分享关键的OpenCV库类及其函数的细节，以及我从Github库获得的<a class="ae jt" href="https://github.com/arjitss/SecureVideoTransfer" rel="noopener ugc nofollow" target="_blank">代码库</a>，你可以下载并在你的机器上执行。</p><ol class=""><li id="6c88" class="lp lq hi iz b ja jb jd je jg lr jk ls jo lt js lu lv lw lx bi translated">最重要的类是<em class="ln"> VideoCapture </em>。我们可以使用这个类的open() &amp; read()函数来打开和读取任何视频文件。</li><li id="73ea" class="lp lq hi iz b ja ly jd lz jg ma jk mb jo mc js lu lv lw lx bi translated">第二个是视频作者。我们可以用open() &amp; write()来打开和写入一个视频文件</li><li id="212f" class="lp lq hi iz b ja ly jd lz jg ma jk mb jo mc js lu lv lw lx bi translated">最后用imshow()函数来显示视频。</li></ol><p id="98b6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我在这里展示了我的Git回购的一些关键部分。</p><pre class="kc kd ke kf fd me mf mg mh aw mi bi"><span id="7c93" class="mj ko hi mf b fi mk ml l mm mn"><em class="ln">//------- Initial setup ----------</em><br/><strong class="mf hj">VideoCapture</strong> cap;    <br/><strong class="mf hj">cap.open</strong>("SampleIn.mp4");    <br/>if(!cap.isOpened()){      <br/>   cout &lt;&lt; "Error opening video stream or file" &lt;&lt; endl;      <br/>   return -1;    <br/>}    <br/>   <br/>frameWidth = cap.get(CAP_PROP_FRAME_WIDTH);    <br/>frameHeight = cap.get(CAP_PROP_FRAME_HEIGHT);</span><span id="c5cc" class="mj ko hi mf b fi mo ml l mm mn"><strong class="mf hj">VideoWriter</strong> video;<br/><em class="ln">// Define the codec and create VideoWriter object. </em>   <strong class="mf hj">video.open</strong>("SampleOut.mp4",cv::VideoWriter::fourcc('M','J','P','G'),70, Size(frameWidth,frameHeight));</span><span id="e16f" class="mj ko hi mf b fi mo ml l mm mn"><em class="ln">// ---- Reading &amp; Writing the Video --------</em><br/>while(1){        <br/><strong class="mf hj">cap &gt;&gt; frame</strong>; <em class="ln">// Read frames</em><br/>if (frame.empty())         <br/>   break;<br/><strong class="mf hj">video.write</strong>(frame); <em class="ln">// Write file frame by frame</em>    <br/><strong class="mf hj">imshow</strong>( "Frame", frame );              <br/><em class="ln">// Press  ESC on keyboard to exit  </em><br/>char c=(char) waitKey(25);       <br/>if(c==27)         <br/>   break;<br/>}</span><span id="2f5c" class="mj ko hi mf b fi mo ml l mm mn">// ---- Gracefully End -----<br/><strong class="mf hj">cap.release</strong>();    <br/>destroyAllWindows();</span></pre><p id="6f51" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae jt" href="https://github.com/arjitss/SecureVideoTransfer" rel="noopener ugc nofollow" target="_blank">库</a>还有很多其他功能，比如模糊ROI，使用HaarC模糊面部，拍摄视频截图，播放和暂停视频。如果您逐个提交回购协议，您可以在其中获得所有详细信息。</p><p id="208f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我希望你发现这些文章和<a class="ae jt" href="https://github.com/arjitss/SecureVideoTransfer" rel="noopener ugc nofollow" target="_blank">代码库</a>，足以让你亲手使用OpenCV。如果你有任何关于代码库的问题，请告诉我，我会尽我所能做出回应。如果你觉得这个文章系列有用，就鼓掌告诉我:-)。</p></div></div>    
</body>
</html>