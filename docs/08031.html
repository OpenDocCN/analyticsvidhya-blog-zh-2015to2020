<html>
<head>
<title>Optical Character Recognition (OCR) using (Py)Tesseract: Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用(Py)宇宙魔方的光学字符识别(OCR ):第2部分</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/optical-character-recognition-ocr-using-py-tesseract-part-2-39f656c03e7d?source=collection_archive---------13-----------------------#2020-07-15">https://medium.com/analytics-vidhya/optical-character-recognition-ocr-using-py-tesseract-part-2-39f656c03e7d?source=collection_archive---------13-----------------------#2020-07-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="68d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<a class="ae jd" rel="noopener" href="/@mistrynirav123/optical-character-recognition-ocr-using-py-tesseract-part-1-29ba8104eb2b?source=friends_link&amp;sk=c480f1d27c3aba061fc3c3f90c6753a7"> part1 </a>中，我们已经看到，从教科书页面图像和噪声图像中，我们如何使用tesseract提取文本。</p><p id="81f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这一部分，我们将看到如何从照片中提取文本。</p><p id="43b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们尝试一个新的例子，并带来一些我们已经学到的东西。</p><p id="25be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是一个店面的图像，让我们加载它，并尝试从图像中获取商店的名称。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="b6b8" class="jn jo hi jj b fi jp jq l jr js">from PIL import Image<br/>import pytesseract<br/># Lets read in the storefront image I've loaded into the course and display it<br/>image=Image.open('../input/OCR1/storefront.png')<br/>display(image)<br/># Finally, let's try and run tesseract on that image and see what the results are<br/>pytesseract.image_to_string(image)</span></pre><figure class="je jf jg jh fd ju er es paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="er es jt"><img src="../Images/141fb5b3a943923baf8e11d415f656b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9zjrWr4t7zfSwsC6sAiJeA.png"/></div></div></figure><p id="3c65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">' fa | INTERNATIONAL \ n \ n \ nEe oat \ n \ n \ n \ nK \ n \ n | bile \ n \ n-_ \ n = \ nE " ee—\ n . \ n \ n | PE 1800 GO德雷克·PTV·哲尔I I \ n \ n注意\ n \ n \ n \ n我是他ie '</p><p id="22c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们看到在最底部有一个我们不容易识别的字符串。宇宙魔方无法提取这个图像和名字。通过裁剪图像，它将能够识别文本。所以让我们试着通过裁剪掉某些部分来帮助宇宙魔方。</p><p id="9d0e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，让我们设置边界框。在此图中，商店名称在一个方框中。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="3f8f" class="jn jo hi jj b fi jp jq l jr js">bounding_box=(470, 150, 1020, 320)</span><span id="c71b" class="jn jo hi jj b fi kb jq l jr js"># Now lets crop the image<br/>title_image=image.crop(bounding_box)</span><span id="aeec" class="jn jo hi jj b fi kb jq l jr js"># Now lets display it and pull out the text<br/>display(title_image)<br/>pytesseract.image_to_string(title_image)</span></pre><figure class="je jf jg jh fd ju er es paragraph-image"><div class="er es kc"><img src="../Images/b29c62c2a5f5d23fbbddc8ef21c4e0ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*u7RW8jTfPrjQC94cavflwA.png"/></div></figure><p id="6916" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">德雷克\ n \国际</p><p id="daa1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">很好，我们看到了如何通过减少一些问题来实现这一点。现在，我们已经能够获取一幅图像，在我们希望看到文本的地方对其进行预处理，并将文本转换成python可以理解的字符串。</p><p id="eb7a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你回头看看这张图片，你会看到商店外面有一个小标志，上面有商店的网站。我想知道我们是否能认出那个标志上的文字？让我们试一试。</p><p id="119d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们需要为这个标志确定一个边界框。为此，让我们使用我决定的边界框。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="9768" class="jn jo hi jj b fi jp jq l jr js"># Now, lets crop the image<br/>little_sign=image.crop((1000, 548, 1215, 690))<br/>display(little_sign)</span></pre><figure class="je jf jg jh fd ju er es paragraph-image"><div class="er es kd"><img src="../Images/5bce4b8de2ce79fc5cadbea7f114d8de.png" data-original-src="https://miro.medium.com/v2/resize:fit:430/format:webp/1*v8KeZAc23y31SiUdsgepiA.png"/></div></figure><p id="2bd6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好吧，这是个小信号！OCR在处理分辨率更高的图像时效果更好，所以让我们使用pillow resize()函数来增加该图像的大小。</p><p id="c6d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们在一个(w，h)元组中将宽度和高度设置为现在的十倍</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="286b" class="jn jo hi jj b fi jp jq l jr js">new_size=(little_sign.width*5,little_sign.height*5)<br/>display(little_sign.resize( new_size, Image.NEAREST))</span></pre><figure class="je jf jg jh fd ju er es paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="er es ke"><img src="../Images/4cd04084276a3e23667ccc1471b78540.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*86HfMMpI2btZfJtN7NH1cA.png"/></div></div></figure><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="f6f1" class="jn jo hi jj b fi jp jq l jr js">pytesseract.image_to_string(little_sign.resize( new_size, Image.NEAREST))</span></pre><p id="ab6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">德拉金特尔。' COM '</p><p id="0482" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">随着尺寸的增加，我们能够提取文本。</p><p id="2d24" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你回头看看这张图片，你会看到商店外面有一个小牌子，上面有标语。我想知道我们是否能认出那个标志上的文字？让我们也试一试。</p><p id="049d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将再次裁剪该图像。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="8a34" class="jn jo hi jj b fi jp jq l jr js">little_sign=image.crop((570, 490, 690, 720))<br/>display(little_sign)</span></pre><figure class="je jf jg jh fd ju er es paragraph-image"><div class="er es kf"><img src="../Images/0acad6579f795b71d2cebab18bc12a6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:240/format:webp/1*VNjD7xB5yOykDBlTVJ25pA.png"/></div></figure><p id="c3f6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将调整此图像的大小以获得更好的视图。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="c8e8" class="jn jo hi jj b fi jp jq l jr js">new_size=(little_sign.width*5,little_sign.height*5)<br/>display(little_sign.resize( new_size, Image.NEAREST))</span></pre><figure class="je jf jg jh fd ju er es paragraph-image"><div class="er es kg"><img src="../Images/a63fd59daa4cb24eb2ee665cf7072683.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*QLJHRMHY3xOwetvZB-9Esg.png"/></div></figure><p id="7f88" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">'今天与\ n \ n我们的顾问之一见面'</p><p id="e66a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我想我们应该能找到更好的。我可以读，但它看起来真的像素化。让我们看看所有不同的调整大小选项是什么样子的。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="0577" class="jn jo hi jj b fi jp jq l jr js">options=[Image.NEAREST, Image.BOX, Image.BILINEAR, Image.HAMMING, Image.BICUBIC, Image.LANCZOS]<br/>for option in options:<br/>    # lets print the option name<br/>    print(option)<br/>    # lets display what this option looks like on our little sign<br/>    display(little_sign.resize( new_size, option))</span></pre><p id="7c6b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">0</p><figure class="je jf jg jh fd ju er es paragraph-image"><div class="er es kg"><img src="../Images/a63fd59daa4cb24eb2ee665cf7072683.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*QLJHRMHY3xOwetvZB-9Esg.png"/></div></figure><p id="c48f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">4</p><figure class="je jf jg jh fd ju er es paragraph-image"><div class="er es kg"><img src="../Images/a63fd59daa4cb24eb2ee665cf7072683.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*QLJHRMHY3xOwetvZB-9Esg.png"/></div></figure><p id="114c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">2</p><figure class="je jf jg jh fd ju er es paragraph-image"><div class="er es kg"><img src="../Images/205d4b22a90799b3797381a91cdf572b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*G_S4ff2a9tYVeEAcjTj2IQ.png"/></div></figure><p id="6868" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">5</p><figure class="je jf jg jh fd ju er es paragraph-image"><div class="er es kg"><img src="../Images/e79479a22102abb7325aa3312ec75530.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*EfDKY61oBKQ2TLJH7gnATw.png"/></div></figure><p id="d1b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">3</p><figure class="je jf jg jh fd ju er es paragraph-image"><div class="er es kg"><img src="../Images/57b6444c45047b404a76b69b08eb51bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*PXDDM6vWi6V-FcN44pl0vQ.png"/></div></figure><p id="a432" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">1</p><figure class="je jf jg jh fd ju er es paragraph-image"><div class="er es kg"><img src="../Images/998d2177d9b919e4f4db4894667ea37e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*nKkH8XIr2ELmULltzSm1XQ.png"/></div></figure><p id="6dd8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由此，我们可以注意到两件事。首先，当我们打印出一个重采样值时，它实际上只是打印一个整数！这真的很常见:API开发人员编写一个属性，比如图像。双三次，然后将它赋给一个整数值来传递。一些语言使用值的枚举，这在Java中很常见，但在python中，这是一种非常正常的做事方式。</p><p id="32a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们学到的第二件事是，图像重采样有许多不同的算法。在这种情况下，图像。双三次过滤器做得很好。让我们看看我们是否能够从这个调整大小的图像中识别出文本。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="49a4" class="jn jo hi jj b fi jp jq l jr js"># First lets resize to the larger size<br/>bigger_sign=little_sign.resize(new_size, Image.BICUBIC)<br/># Lets print out the text<br/>pytesseract.image_to_string(bigger_sign)</span></pre><p id="894b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">noua \今天\n进来和我们的顾问之一\n\n交谈</p><p id="dd06" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">嗯，不完美，但我们可以看到句子。</p><p id="8dd8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是清理OCR数据的一个不错的方法。在实践中使用一种语言或特定领域的字典是很有用的，特别是如果您正在为一种专门的语言(比如医学知识库或位置)生成一个搜索引擎。如果你向上滚动，看看我们正在处理的数据——挂在商店外面的这块小板子——情况还不算太糟。</p><p id="cb4d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">至此，您已经学会了如何处理图像并将它们转换成文本。</p><p id="70d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kh">原载于2020年7月15日</em><a class="ae jd" href="https://www.numpyninja.com/post/optical-character-recognition-ocr-using-py-tesseract-part-2" rel="noopener ugc nofollow" target="_blank"><em class="kh">【https://www.numpyninja.com】</em></a><em class="kh">。</em></p></div></div>    
</body>
</html>