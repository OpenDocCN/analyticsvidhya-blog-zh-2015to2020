<html>
<head>
<title>Standardizing Spring Boot Applications With Maker Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Maker项目标准化Spring Boot应用程序</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/standardizing-spring-boot-applications-with-maker-project-449d906917fd?source=collection_archive---------27-----------------------#2020-03-25">https://medium.com/analytics-vidhya/standardizing-spring-boot-applications-with-maker-project-449d906917fd?source=collection_archive---------27-----------------------#2020-03-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="ce17" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每天都在构建许多标准框架，但是，如果您停下来思考一下，您的应用程序在大多数情况下都不是标准化的。我现在摸你了吗？:)</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/138a4926e93e97ca880139d8cf6c0d98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/0*E0wgBldJV1sTy0Lc"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">模式模式模式。</figcaption></figure><p id="994e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">看看这个形状，现在想想设计师是怎么做的。你知道吗？嗯，当我是设计师的时候，我做一个标准的形状，把笔记本在Ctrl + C和Ctrl + V上踢很多次就做成了！</p><p id="a646" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">想到这，我做了<a class="ae jp" href="https://github.com/gustavovitor/maker" rel="noopener ugc nofollow" target="_blank">创客项目</a>。有了这个项目，你可以使用Spring Boot加速Restful API的开发。</p><h2 id="68ea" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">Maker上的标准形状在哪里？</h2><p id="0953" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">我认为你在职业生涯中已经制作了很多API，而且(如果这些API是使用MVC模式构建的)这些API有很多CRUDs，<strong class="ih hj">服务</strong>与<strong class="ih hj">仓库</strong>和<strong class="ih hj">实体</strong>一起工作，所有东西都通过<strong class="ih hj"> RestController </strong>暴露在web上。您每次都构建这些API，并且每次您编写存储库、服务和控制器时，您的控制器内的相同代码在所有API中调用您的服务方法。<strong class="ih hj">真的吗？！</strong></p><p id="e2a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请改变页面，为你的API考虑标准模式！</p><p id="65b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，您的API需要为web公开一个关于您客户的CRUD资源，冷却这方面的一切正常工作，您编写您的实体、您的存储库和您的控制器，在您的服务中实现业务规则，在您的实体上制定您的JPA规则，非常好，工作完成了，但是您损失了<strong class="ih hj">45–60分钟</strong>来做这些，<strong class="ih hj">时间就是金钱兄弟！</strong></p><p id="33ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用<a class="ae jp" href="https://github.com/gustavovitor/maker" rel="noopener ugc nofollow" target="_blank"> Maker Project </a>您可以创建您的模式，并在<strong class="ih hj">10–20分钟</strong>内转换这45–60分钟，使用plus！</p><p id="25c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我给你举个例子吧！</p><p id="6700" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通常用Spring Data JPA创建你的实体，好吗？</p><pre class="je jf jg jh fd kq kr ks kt aw ku bi"><span id="6760" class="jq jr hi kr b fi kv kw l kx ky">@Data<br/>@Entity<br/>class Car {<br/>    @Id<br/>    @GeneratedValue(strategy = GenerationType.IDENTITY)<br/>    private Long id;<br/>    <br/>    private String model; <br/>}</span></pre><p id="6985" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">太棒了，现在，创建您的存储库，但是现在，扩展RepositoryMaker而不是JpaRepository。</p><pre class="je jf jg jh fd kq kr ks kt aw ku bi"><span id="ec16" class="jq jr hi kr b fi kv kw l kx ky">public interface CarRepository extends RepositoryMaker&lt;Car, Long&gt; {}</span></pre><p id="4b05" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">为什么？RepositoryMaker </strong>为我们实现了Spring Boot规范执行器，有了它，你可以在iterables Spring Boot默认的存储库中进行查询，例如，<em class="kz"> findAll() </em>方法。</p><p id="0a39" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">很好，现在，制造者需要这个类的一个规范，才能很好地工作。</p><pre class="je jf jg jh fd kq kr ks kt aw ku bi"><span id="6b11" class="jq jr hi kr b fi kv kw l kx ky">public class CarSpecification extends SpecificationBase&lt;Car&gt; {<br/><br/>    public CarSpecification(Car car) throws ReflectionException {<br/>        super(car);<br/>    }<br/><br/>    @Override<br/>    public Predicate toPredicate(Root&lt;Car&gt; root, CriteriaQuery&lt;?&gt; criteriaQuery, CriteriaBuilder criteriaBuilder) {<br/>        List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();<br/><br/>        if (nonNull(getObject().getModel())) {<br/>            predicates.add(criteriaBuilder.like(root.get("model"), "%" + getObject().getModel() + "%"));<br/>        }<br/><br/>        return criteriaBuilder.and(predicates.toArray(new Predicate[predicates.size()]));<br/>    }<br/>}</span></pre><p id="c311" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">看看方法<em class="kz"> toPredicate()，</em>这个方法是在Spring Data在你的数据库上运行<em class="kz"> findAll() </em>之前调用的，再看看，<strong class="ih hj"> root，criteriaQuery和criteriaBuilder！你可以用这个兄弟去月球！</strong></p><p id="be4e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，使用Maker，您可以创建和构建您的查询，而不需要使用JPQL。</p><p id="7b1b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">非常酷。现在，为您的实体创建一个服务。</p><pre class="je jf jg jh fd kq kr ks kt aw ku bi"><span id="773f" class="jq jr hi kr b fi kv kw l kx ky">@Service<br/>public class CarService extends ServiceMaker&lt;CarRepository, Car, Long, Car, CarSpecification&gt; {}</span></pre><p id="556d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">停！</strong>好了，现在是蛋糕上的樱桃了。<strong class="ih hj">服务商</strong>为我们制作了一个你的CRUD的标准化方法，(就像<a class="ae jp" href="https://developers.redhat.com/courses/quarkus/panache/" rel="noopener ugc nofollow" target="_blank"> Redhat Panache </a>做的那样)，在<strong class="ih hj">服务商</strong>上使用我们有这样的方法:</p><ol class=""><li id="5cda" class="la lb hi ih b ii ij im in iq lc iu ld iy le jc lf lg lh li bi translated">findAllPageable() —调用存储库并返回实体的Spring Boot标准页面。</li><li id="4e95" class="la lb hi ih b ii lj im lk iq ll iu lm iy ln jc lf lg lh li bi translated"><em class="kz"> findAll() —调用存储库并返回您的实体列表。</em></li><li id="8226" class="la lb hi ih b ii lj im lk iq ll iu lm iy ln jc lf lg lh li bi translated"><em class="kz"> findById() —通过Id查找您的实体。</em></li><li id="fdfb" class="la lb hi ih b ii lj im lk iq ll iu lm iy ln jc lf lg lh li bi translated"><em class="kz"> beforeInsert() —用于业务规则，在此实现您的RuntimeException，并为API异常处理程序创建另一个模式。</em></li><li id="c1a1" class="la lb hi ih b ii lj im lk iq ll iu lm iy ln jc lf lg lh li bi translated"><em class="kz"> insert() —调用存储库插入方法。</em></li><li id="e080" class="la lb hi ih b ii lj im lk iq ll iu lm iy ln jc lf lg lh li bi translated"><em class="kz"> beforeUpdate() —用于业务规则，与beforeInsert()的行为相同。</em></li><li id="6658" class="la lb hi ih b ii lj im lk iq ll iu lm iy ln jc lf lg lh li bi translated"><em class="kz"> update() —复制对象的所有属性并保存，并在存储库上使用save方法。</em></li><li id="4a3f" class="la lb hi ih b ii lj im lk iq ll iu lm iy ln jc lf lg lh li bi translated"><em class="kz"> beforePatch() —用于业务规则，与beforeInsert()的行为相同。</em></li><li id="0c8f" class="la lb hi ih b ii lj im lk iq ll iu lm iy ln jc lf lg lh li bi translated"><em class="kz"> patch() —将复制对象的非空属性发送到储存库并使用储存方法。</em></li><li id="efd1" class="la lb hi ih b ii lj im lk iq ll iu lm iy ln jc lf lg lh li bi translated"><em class="kz"> beforeDelete() —用于业务规则，与beforeInsert()的行为相同。</em></li><li id="255a" class="la lb hi ih b ii lj im lk iq ll iu lm iy ln jc lf lg lh li bi translated"><em class="kz"> delete() —使用存储库的删除方法删除实体。</em></li></ol><p id="29af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每一个方法都有一个标准的实现。之前的<em class="kz">方法专门用于业务规则实现。</em></p><p id="14f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你现在能看见了吗？现在，时间从30分钟减少到8-10分钟，开发人员可以将时间集中在业务逻辑上，而不是冗长的代码上。</p><p id="a8aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以，我们现在需要一个控制器，好吗？</p><pre class="je jf jg jh fd kq kr ks kt aw ku bi"><span id="80f2" class="jq jr hi kr b fi kv kw l kx ky">@RestController<br/>@RequestMapping("/car")<br/>public class CarResource extends ResourceMaker&lt;CarService, Car, Long, Car&gt; {}</span></pre><p id="35a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">像服务一样简单。使用服务模式，为什么控制器不能是soo模式？</p><p id="3a19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> ResourceMaker </strong>用<strong class="ih hj"> ServiceMaker创造的模式为我们所有人打电话，</strong>厉害吧？</p><p id="d315" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">制作者为我们制作了这样的API调用:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lo"><img src="../Images/b625349e1590642f7277237a721b6721.png" data-original-src="https://miro.medium.com/v2/resize:fit:582/format:webp/1*lRSDq-IFyzJvKS4EYLXLqw.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">ResourceMaker生成的Maker调用。</figcaption></figure><p id="6a25" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用CRUD需要的所有方法。为什么<strong class="ih hj">【获取所有汽车】</strong><strong class="ih hj">【获取所有汽车可分页】</strong>使用PUT HTTP动词？</p><p id="8e6a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些方法接收两个对象来工作，SpecificationObject，在做搜索之前实现的和(在可分页方法上)可分页的对象，这样:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lp"><img src="../Images/a183342089ce6c8a2ea8f04321476de2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*At7cYojY5eK_1lmRFyRQ7w.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">ResourceMaker搜索可分页请求。</figcaption></figure><p id="1190" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Soo，为了简化实现和简化“框架”的可用性，我们需要用这些信息来安森体。</p><p id="3835" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">春季安全预授权规则呢？</p><p id="779f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您使用Spring Security和它的简单预授权，Maker拥有<strong class="ih hj"> SecurityResourceMaker </strong>这个Maker您可以覆盖关于预授权角色权限的方法。今天，制造者与角色一起工作。</p><h2 id="e11d" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">我可以用吗？</h2><p id="730f" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">是啊！每个人都可以使用该项目，我正在四个项目的生产环境中使用它，我希望在未来的更多项目中使用它，Maker在API上制作了我需要的一切，并制作了一个标准化的API，我可以在前端创建另一个模式来使用它，并减少更多的开发时间。</p><p id="0407" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创客项目链接:【https://github.com/gustavovitor/maker T2】</p><p id="ec68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个活生生的例子:【https://github.com/gustavovitor/maker-example】T4</p><p id="1eda" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">MongoDB示例(Maker Mongo使用QueryDsl代替规范):<a class="ae jp" href="https://github.com/gustavovitor/maker-example/tree/maker-mongo" rel="noopener ugc nofollow" target="_blank">https://github . com/Gustavo vitor/Maker-example/tree/Maker-Mongo</a></p><p id="8b29" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">再见！</p></div></div>    
</body>
</html>