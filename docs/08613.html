<html>
<head>
<title>A short story of Credit Scoring and Titanic dataset</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">信用评分和泰坦尼克号数据集的小故事</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/credit-scoring-model-9730d530f4ef?source=collection_archive---------4-----------------------#2020-08-05">https://medium.com/analytics-vidhya/credit-scoring-model-9730d530f4ef?source=collection_archive---------4-----------------------#2020-08-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="e8bd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大家好，今天我们开始了解<strong class="ih hj">【信用评分】</strong>概念，最好利用一些数据集来更具代表性。我将使用<strong class="ih hj">号泰坦尼克号</strong>数据集来展示如何给幸存乘客打分。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/67b4a6e4cc78981f57e9392240a43f3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*aYzeFRLr9z69mzMm.jpg"/></div></div></figure><h2 id="36dd" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">我们的目标</h2><p id="bb99" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">今天的主题包括:</p><ol class=""><li id="0553" class="kp kq hi ih b ii ij im in iq kr iu ks iy kt jc ku kv kw kx bi translated">什么是信用评分？</li><li id="9220" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">如何建立评分模型？</li><li id="3ab4" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">分数怎么分配？</li></ol><h2 id="3ead" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">什么是信用评分？</h2><p id="acb2" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">信用评分是金融和银行业中最广泛有用的工具。该分数可以用于贷方的决策，即他们的客户是否可能偿还贷款。这也有助于贷方在提供贷款时衡量信用风险，无论风险是否在可接受的范围内。有几种信用评分模型，如:</p><ul class=""><li id="7daa" class="kp kq hi ih b ii ij im in iq kr iu ks iy kt jc ld kv kw kx bi translated">申请分数</li><li id="766f" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ld kv kw kx bi translated">行为得分</li><li id="92f7" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ld kv kw kx bi translated">收藏分数</li><li id="3a04" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ld kv kw kx bi translated">存款分数</li></ul><p id="f2ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">今天，我们重点关注最适合我们的示例数据集的<strong class="ih hj">应用程序得分(A-Score) </strong>。</p><h2 id="8153" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">分数怎么算？</h2><p id="0959" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">现在，我们将构建A分数模型，但在此之前，您可能会有这样的问题…</p><blockquote class="le lf lg"><p id="b4c4" class="if ig lh ih b ii ij ik il im in io ip li ir is it lj iv iw ix lk iz ja jb jc hb bi translated">为什么一定要A分？</p></blockquote><p id="ec4e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">答案很简单。这取决于你有哪些数据类型。a分是基于申请数据的。就“应用”而言，意味着代表特性的数据。例如，性别、年龄、地点、教育或其他一些东西通常定义你是谁/什么，很少改变。另一方面，如果你想建立其他模型，比如B-Score，你可以使用交易数据，每天的点击数或者通常由行为改变的东西。霍普，这已经够清楚了。</p><p id="0d8e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 1。数据集</strong></p><p id="3bad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我前面提到的，今天的数据将利用Titanic数据集，该数据集通常用于分类模型教程。我们正在做几乎相同的，但更多的细节与信用评分的概念，以分配生存的分数。数据集可以在<a class="ae ll" href="https://raw.githubusercontent.com/mrpeerat/Machine_Learning_0-100/master/04%20Logistic%20Regression/titanic_data.csv" rel="noopener ugc nofollow" target="_blank">这里</a>找到。下面是数据字典，给你一个数据结构的简要总结。</p><ul class=""><li id="07a3" class="kp kq hi ih b ii ij im in iq kr iu ks iy kt jc ld kv kw kx bi translated">幸存:0 =否，1 =是<strong class="ih hj"> (1是我们的目标)</strong></li><li id="0f51" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ld kv kw kx bi translated">Pclass:机票等级— 1 =第一，2 =第二，3 =第三</li><li id="c625" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ld kv kw kx bi translated">SibSp:泰坦尼克号上兄弟姐妹/配偶的数量</li><li id="e114" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ld kv kw kx bi translated">帕奇:泰坦尼克号上父母/孩子的数量</li><li id="e0b0" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ld kv kw kx bi translated">票价:乘客票价</li><li id="0aa6" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ld kv kw kx bi translated">上船:起运港C =瑟堡，Q =皇后镇，S =南安普顿</li></ul><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="c93d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">快速检查数据集，发现在<code class="du lo lp lq lr b">‘Age’</code>列中有大量缺失值，在<code class="du lo lp lq lr b">‘Embarked’</code>中也有一些缺失值。</p><pre class="je jf jg jh fd ls lr lt lu aw lv bi"><span id="46f4" class="jp jq hi lr b fi lw lx l ly lz">Checking missing data<br/>PassengerId      0<br/>Survived         0<br/>Pclass           0<br/>Sex              0<br/>Age            177<br/>SibSp            0<br/>Parch            0<br/>Fare             0<br/>Embarked         2<br/>dtype: int64</span></pre><p id="a7e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于数据集的总数非常有限，我们希望尽可能地保留数据。因此，我们将通过替换为“mode”来修复缺失，然后准备好构建模型。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="890b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 2。模型建造</strong></p><p id="c84e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在建立评分模型之前，有两件事你应该先知道。<strong class="ih hj"> 1。证据权重(WOE) </strong>和<strong class="ih hj"> 2。信息值(四)</strong>。我们不使用原始值建模，但我们会将它们转换成WOE。然后，我们使用IV进行特征选择。</p><blockquote class="le lf lg"><p id="8b26" class="if ig lh ih b ii ij ik il im in io ip li ir is it lj iv iw ix lk iz ja jb jc hb bi translated">证据的权重表明了自变量相对于因变量的预测能力。(ListenData创始人Deepanshu)</p></blockquote><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ma"><img src="../Images/fecc95007dbfa8e9e128fc94f85e8ac6.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/format:webp/0*rgaEv-VB11N97hnD.png"/></div></figure><blockquote class="le lf lg"><p id="545b" class="if ig lh ih b ii ij ik il im in io ip li ir is it lj iv iw ix lk iz ja jb jc hb bi translated">信息值是选择预测模型中重要变量的最有用的技术之一。这有助于根据变量的重要性对其进行排序。(ListenData创始人Deepanshu)</p></blockquote><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mb"><img src="../Images/72dbc29614c6b221dd1d1aca0648ef46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7wlI0-kE3puW7sk0.png"/></div></div></figure><p id="8a51" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了计算这些值，我们可以宁滨或分组我们的连续数字因素，如年龄，乘客费用或兄弟姐妹的数量<em class="lh">(如果你想)</em>。除此之外，它还可以用自己的值来表示组，例如机票等级和登机。在熊猫图书馆，你可以用<code class="du lo lp lq lr b">qcut()</code>函数作为<code class="du lo lp lq lr b">pandas.qcut(df[‘factor’], 10, duplicates = ‘drop’)</code>来计算十分位数宁滨。</p><p id="07bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">初步结果可能不够好<strong class="ih hj">(例如，得到infinity IV) </strong>，因为当分组为十分之一时，它可能包含一些缺失的箱。你可以考虑重新宁滨，称为<strong class="ih hj">粗分类</strong>。该过程可以基于四分位数(从十分位数变化而来)、权重趋势、比率趋势(在我们的例子中是存活率)或任何其他专家感觉。所有这些都可以用来执行分析。粗略分类后，结果应该如下所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mc"><img src="../Images/7ed66526ecfaeb97ea5c8b2e9a9a3ba1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*H8UAO0us58oSSIyN.png"/></div></div></figure><pre class="je jf jg jh fd ls lr lt lu aw lv bi"><span id="828f" class="jp jq hi lr b fi lw lx l ly lz">Factors<br/>Age_bin      0.097745<br/>Embarked     0.119923<br/>Fare_bin     0.625860<br/>Parch_bin    0.089718<br/>Pclass       0.500950<br/>Sex          1.341681<br/>SibSp_bin    0.055999<br/>Name: IV, dtype: float64</span></pre><p id="3c32" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我前面提到的，我们通常不使用所有因素来开发模型，因为当有太多因素时，它可能会面临维护的困难。我们使用IV临界值进行单变量分析。因此，基于预先设定的阈值，一些因素将被消除。<strong class="ih hj"> <em class="lh">(在我们的例子中，没有IV小于0.02的因子，全部保留！)</em> </strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es md"><img src="../Images/8627fa61053ee93123df72f34bfa689f.png" data-original-src="https://miro.medium.com/v2/resize:fit:716/format:webp/1*Zek2B8CpYlqFLLAdJnTsmg.png"/></div><figcaption class="me mf et er es mg mh bd b be z dx translated">用于单变量分析的一般IV阈值</figcaption></figure><p id="81b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一步是执行<strong class="ih hj">逻辑回归</strong>。您可以拆分数据集用于训练和测试。这是为了确保超出样本数据的模型性能(不会出现过拟合)。今天我们用<code class="du lo lp lq lr b">statsmodels.api</code>通过调用<code class="du lo lp lq lr b">sm.Logit()</code>函数来建立模型。我们的目标(Y)是<code class="du lo lp lq lr b">‘Survived’</code>乘客，已经表示为1。对于我们的特征因子(X ),我们首先利用通过单变量分析步骤的所有因子。应该注意的是，特征因子是<strong class="ih hj">而不是</strong>原始值，相反，我们将使用WOE来执行逻辑模型。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="3fdf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">* *重要** </strong>我们要考虑每个因子上的模型系数输出<em class="lh">(截距除外)</em>。<strong class="ih hj">它必须具有相同的方向(例如，全部为正，全部为负)。</strong>进行评分时会有影响。此外，如果p值大于0.05，则应将其消除。因此，最终模型可能不包含所有功能。</p><p id="c583" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是我的最终模型，可以看到所有的特征系数都有正方向，它们的p值都小于0.05。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="ab fe cl mi"><img src="../Images/0686632f46a8bc5cc29b57128f4bcaea.png" data-original-src="https://miro.medium.com/v2/format:webp/1*tmehMe49P_lstcNfJt8Jqg.png"/></div><figcaption class="me mf et er es mg mh bd b be z dx translated">这是最终模型的样子</figcaption></figure><h2 id="88f4" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">分数怎么分配？</h2><p id="1a4e" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">今天的最终目标来了。我们现在准备计算记分卡。我们需要的是逻辑回归方程(模型系数)和权重值作为输入。这些是给你的<strong class="ih hj">“Logit”</strong>标度或<strong class="ih hj">“Log odds”</strong>值。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="ab fe cl mi"><img src="../Images/6cd6f00be4720f3778eb2b50ab0da523.png" data-original-src="https://miro.medium.com/v2/0*p5hApBh2ysdXP3tb"/></div></figure><p id="ded0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们需要将Logit转换为记分卡的积分系统。我们将该方法称为<strong class="ih hj">“缩放”</strong>方法。该方法的主要假设是对数比值和分数可以表示为线性形式<em class="lh">(从上面的公式可以看出)</em>。有3个主要的记分卡设置变量:</p><ul class=""><li id="4439" class="kp kq hi ih b ii ij im in iq kr iu ks iy kt jc ld kv kw kx bi translated"><strong class="ih hj">目标分数</strong>是基准分数，可以换算成点。(您可以设置任何您想要的，它根本不会影响模型性能)</li><li id="8251" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ld kv kw kx bi translated"><strong class="ih hj">目标赔率</strong>是在某一点上指定的赔率比</li><li id="6b9b" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ld kv kw kx bi translated"><strong class="ih hj">指向双倍赔率</strong>意味着“某个点”的分数将增加两倍</li></ul><p id="f453" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们设置这些变量:</p><pre class="je jf jg jh fd ls lr lt lu aw lv bi"><span id="8b7a" class="jp jq hi lr b fi lw lx l ly lz">target_score = 600<br/>target_odds = 30<br/>pts_double_odds = 20</span></pre><p id="e681" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们可以通过应用以下公式来计算每位乘客的得分:</p><ul class=""><li id="78bc" class="kp kq hi ih b ii ij im in iq kr iu ks iy kt jc ld kv kw kx bi translated">Factor = pts_double_odds / ln(2)</li><li id="e0be" class="kp kq hi ih b ii ky im kz iq la iu lb iy lc jc ld kv kw kx bi translated">Offset = Score-{Factor * ln(Odds)}</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mj"><img src="../Images/21b742d909164732e41a16c173b230cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*hp0LqgI4A4a3dAlIfUoMyQ.png"/></div></figure><p id="3f5c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完成这些后，我们现在得到了记分卡计算的最终公式。</p><h2 id="8ec1" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">结果</h2><p id="d392" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">我申请了训练和测试数据集。下面是分数分布的样子。可以看出，最终模型给出了非常相似的结果。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mk"><img src="../Images/9dd7ed12f622094c020c724029d3ad87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*r0PbUbXMOfLtvOr_.png"/></div></div></figure><p id="a33c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以做一些事情，比如找出存活率的最高分，并考虑其特征:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="72e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结果乘客ID: 330，得分为599.96。她是一名女性，当时年龄为16岁。她买了头等舱的票，从瑟堡的码头出来。</p><h2 id="98f0" class="jp jq hi bd jr js jt ju jv jw jx jy jz iq ka kb kc iu kd ke kf iy kg kh ki kj bi translated">结束前</h2><p id="691a" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">你可以看到开发评分模型并不困难。对于不同类型的数据，您可以利用相同的逻辑，并添加更先进的统计技术来构建更奇特的模型<em class="lh">(我的意思是更精确的模型)</em>。</p><p id="e55f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，在构建B分数模型<em class="lh">(甚至A分数)</em>时，您可能会面临这样的问题，比如有太多的特征，您无法通过IV仅执行单变量分析。您需要的是双变量分析或多变量分析(例如相关性或聚类)来执行特征选择。</p><p id="ce55" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我会在这里完成它，如果你有任何问题，请让我知道。你可以通过下面的LinkedIn联系我。那里见！</p><div class="ml mm ez fb mn mo"><a href="https://www.linkedin.com/in/sasiwut-chaiyadecha/" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab dw"><div class="mq ab mr cl cj ms"><h2 class="bd hj fi z dy mt ea eb mu ed ef hh bi translated">sasiwut chaiyade cha-EY高级顾问| LinkedIn</h2><div class="mv l"><h3 class="bd b fi z dy mt ea eb mu ed ef dx translated">查看全球最大的职业社区LinkedIn上Sasiwut Chaiyadecha的个人资料。Sasiwut有1个工作列在…</h3></div><div class="mw l"><p class="bd b fp z dy mt ea eb mu ed ef dx translated">www.linkedin.com</p></div></div></div></a></div><blockquote class="le lf lg"><p id="4542" class="if ig lh ih b ii ij ik il im in io ip li ir is it lj iv iw ix lk iz ja jb jc hb bi translated">更新</p></blockquote><div class="ml mm ez fb mn mo"><a href="https://github.com/naenumtou/creditrisk/blob/main/TitanicAppModel.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab dw"><div class="mq ab mr cl cj ms"><h2 class="bd hj fi z dy mt ea eb mu ed ef hh bi translated">credit risk/titanicappmodel . ipynb at main naenum tou/credit risk</h2><div class="mv l"><h3 class="bd b fi z dy mt ea eb mu ed ef dx translated">在GitHub上创建一个帐户，为naenumtou/creditrisk的发展做出贡献。</h3></div><div class="mw l"><p class="bd b fp z dy mt ea eb mu ed ef dx translated">github.com</p></div></div><div class="mx l"><div class="my l mz na nb mx nc jn mo"/></div></div></a></div><p id="a496" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">与这篇文章相关的完整代码可以在上面的笔记本中找到。</p></div></div>    
</body>
</html>