<html>
<head>
<title>Exploratory Analysis Of Uber Pickups In NYC from April to September 2014</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">2014年4月至9月纽约市优步皮卡的探索性分析</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/exploratory-data-analysis-of-uber-pickups-in-nyc-from-april-to-september-2014-ec78d5a35f78?source=collection_archive---------4-----------------------#2020-04-19">https://medium.com/analytics-vidhya/exploratory-data-analysis-of-uber-pickups-in-nyc-from-april-to-september-2014-ec78d5a35f78?source=collection_archive---------4-----------------------#2020-04-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="6131" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用Python中的各种工具探索数据并进行可视化</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/973e2c3ab5475b877cc85d4138236cf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ONVVDm_vLO0wNVaNF7nghQ.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">詹姆斯·巴勒姆/ The Verge摄影</figcaption></figure><p id="787b" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi kj translated">因为新冠肺炎，我不得不大部分时间呆在家里，这让我有了很多额外的时间，我决定利用这周末的一部分时间进行一个数据探索和可视化的小型项目，并把它写在我的第一个媒体出版物上！</p><p id="8eef" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">我从<a class="ae ks" href="https://www.kaggle.com/fivethirtyeight/uber-pickups-in-new-york-city" rel="noopener ugc nofollow" target="_blank"> <strong class="jp hj"> Kaggle </strong> </a>获得数据集。它包括来自纽约市出租车&amp;豪华轿车委员会(TLC)的2014年4月至9月纽约市超过450万辆优步皮卡和2015年1月至6月超过1430万辆优步皮卡的数据。对于本文，我将使用2014年4月至9月的数据。</p><blockquote class="kt"><p id="8351" class="ku kv hi bd kw kx ky kz la lb lc ki dx translated">TL；DR——让我们看看如何使用python来探索和可视化纽约市的优步皮卡，并在这个过程中学习一些新东西！</p></blockquote><h1 id="7b21" class="ld le hi bd lf lg lh li lj lk ll lm ln io lo ip lp ir lq is lr iu ls iv lt lu bi translated"><strong class="ak">看大图</strong></h1><p id="8adc" class="pw-post-body-paragraph jn jo hi jp b jq lv ij js jt lw im jv jw lx jy jz ka ly kc kd ke lz kg kh ki hb bi translated">当您想要执行任何与数据科学相关的任务时，首先要执行的任务是提出您想要实现的明确目标，或者明确陈述您希望或期望数据回答的业务问题。</p><p id="c400" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这个数据集可以用来回答很多问题，但是为了让这篇文章简短一点，我们将选择以下内容:</p><ol class=""><li id="d852" class="ma mb hi jp b jq jr jt ju jw mc ka md ke me ki mf mg mh mi bi translated">优步在纽约的提货和配送</li><li id="aa81" class="ma mb hi jp b jq mj jt mk jw ml ka mm ke mn ki mf mg mh mi bi translated">优步取件定期发生的时间</li><li id="f57b" class="ma mb hi jp b jq mj jt mk jw ml ka mm ke mn ki mf mg mh mi bi translated">定期提货的日子</li><li id="6599" class="ma mb hi jp b jq mj jt mk jw ml ka mm ke mn ki mf mg mh mi bi translated">区域内的拾音器分布</li><li id="63cb" class="ma mb hi jp b jq mj jt mk jw ml ka mm ke mn ki mf mg mh mi bi translated">在地图上拾取分布，并找出高度聚集/热点区域-我们将使用BDSCAN聚类算法在地图上执行此操作。</li></ol><h1 id="ab94" class="ld le hi bd lf lg lh li lj lk ll lm ln io mo ip lp ir mp is lr iu mq iv lt lu bi translated">加载数据</h1><p id="926a" class="pw-post-body-paragraph jn jo hi jp b jq lv ij js jt lw im jv jw lx jy jz ka ly kc kd ke lz kg kh ki hb bi translated">从2014年4月到9月，纽约市有六个关于优步皮卡的csv文件数据。每个文件都包含特定月份的数据，并且每个文件都有以下各列:</p><p id="5989" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj">日期/时间</strong>:优步皮卡的日期和时间<br/> <strong class="jp hj"> Lat : </strong>优步皮卡的纬度<br/> <strong class="jp hj"> Lon : </strong>优步皮卡的经度<br/><strong class="jp hj">Base:</strong>TLC Base隶属于优步皮卡的公司代码</p><p id="1d35" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">数据下载完成后，首先要做的是将六个文件连接成一个数据帧。我们将创建一个简单的函数，它将使用<strong class="jp hj"> glob </strong>和<strong class="jp hj"> os </strong>库来读取它们所在目录中的多个csv文件，并将它们连接成一个数据帧。</p><p id="3848" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">顺便说一下，大多数时候，当我处理像这样的大型数据集时，我通常在云上进行我的工作。这一次我将使用我的2.2GHz，core i5笔记本电脑，只有8GB内存，看看有多好(或坏！)是的，这比我希望的执行任务的时间要长一点。</p><p id="3782" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">如果你有类似的问题，你应该考虑使用<a class="ae ks" href="https://towardsdatascience.com/vaex-a-dataframe-with-super-strings-789b92e8d861" rel="noopener" target="_blank"> <strong class="jp hj"> Vaex </strong> </a>库。<a class="ae ks" href="https://vaex.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> Vaex </a>是一个开源的DataFrame库，可以对几乎和你的硬盘一样大的表格数据集进行可视化、探索、分析和机器学习！为此，Vaex采用了内存映射、高效核外算法和惰性评估等概念。</p><p id="a543" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">虽然我不会在这个迷你项目中使用它，但我可能会在其他拥有更大数据集的项目中使用它。它真的很容易使用，你可以阅读<a class="ae ks" href="https://towardsdatascience.com/vaex-a-dataframe-with-super-strings-789b92e8d861" rel="noopener" target="_blank">这篇文章</a>来学习如何在你的下一个项目中实现它。</p><pre class="iy iz ja jb fd mr ms mt mu aw mv bi"><span id="e703" class="mw le hi ms b fi mx my l mz na">import glob<br/>import os</span><span id="1a02" class="mw le hi ms b fi nb my l mz na">def read_taxi_data():<br/>    uber_directory = "/home/elvis/Documents/uber-pickups-in-new- york-city/2014" #loading folder containing dataset<br/>    file_type = 'csv'<br/>    seperator =','<br/>    uber_2014 = pd.concat([pd.read_csv(f, sep=seperator,parse_dates=   ["Date/Time"]) for f in glob.glob(uber_directory + "/*."+file_type)],ignore_index=True)</span><span id="344e" class="mw le hi ms b fi nb my l mz na">return uber_2014</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/ab38f747579e0bf8d4b3c99248fd39eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GK-OUJLj5E1ye7J3CBWr4w.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">请注意，当我执行上面的单元格时，用了6分钟，如单元格左下角所示！</figcaption></figure><p id="5efd" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在执行该函数之后，让我们使用<em class="nd"> info() </em>和<em class="nd"> describe() </em>函数来概述我们所拥有的数据。这有助于我们识别要素的数据类型以及哪些要素包含空值。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/29bf6ab4a2d1353a5591a5f13cdf55ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Ke4YlqpRWOoBd5WR8GewQ.png"/></div></div></figure><p id="5435" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">从<em class="nd"> info() </em>我们可以看到每一列中数据的数据类型。<em class="nd">日期/时间</em>列属于<em class="nd">日期时间</em>数据类型，因为我们在串联过程中使用<em class="nd"> parse_date </em>对其进行了转换。然而，我们必须将它分解成若干单独的列，如日期、时间、日和月，以便我们能够从这些数据中获得更有意义的见解。接下来，让我们看看数据中是否有空值。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/8ca2e03878eca8e72471a4398cfb7fba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aH5f_DKSo_n2I8_6cWgVNQ.png"/></div></div></figure><p id="4b4f" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">我们运行上面的代码行来找出是否有任何特性具有空属性，在我们的例子中，是none。超过450万行，没有一行丢失任何值，我们真幸运！</p><h1 id="8211" class="ld le hi bd lf lg lh li lj lk ll lm ln io mo ip lp ir mp is lr iu mq iv lt lu bi translated">特征工程</h1><p id="bb34" class="pw-post-body-paragraph jn jo hi jp b jq lv ij js jt lw im jv jw lx jy jz ka ly kc kd ke lz kg kh ki hb bi translated">现在我们对数据有了更好的了解，我们意识到我们需要添加更多的功能来回答我们的业务问题。</p><p id="056d" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">首先，我们将把<em class="nd">日期时间</em>特性分解成日期、月份、星期、日期和小时特性。</p><pre class="iy iz ja jb fd mr ms mt mu aw mv bi"><span id="dafb" class="mw le hi ms b fi mx my l mz na"># Function for Expanding DateTime to separate columns that can be #used for other data</span><span id="8f2c" class="mw le hi ms b fi nb my l mz na">def expand_date(df):    <br/>    df['date'] = df['Date/Time'].dt.date<br/>    df['month'] = df['Date/Time'].dt.month<br/>    df['week'] = df['Date/Time'].dt.week<br/>    df['MonthDayNum'] = df['Date/Time'].dt.day<br/>    df['HourOfDay'] = df['Date/Time'].dt.hour<br/>    df['DayOfWeekNum'] = df['Date/Time'].dt.dayofweek <br/>#on 'DayOfWeekNum', Monday=0, Tuesday=1, Wednesday=2,...,Sunday=6 </span><span id="7a40" class="mw le hi ms b fi nb my l mz na">    df['DayOfWeek'] = df['Date/Time'].dt.day_name()<br/>    <br/>    return df</span></pre><p id="269b" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">然后，我们将在优步数据集上实现该函数。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/51983a6238386c6044d7ce4dd658e049.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wrtuj2R96pvqWO-81oXeJg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">在运行info()时，我们意识到现在将有10列</figcaption></figure><h1 id="f94a" class="ld le hi bd lf lg lh li lj lk ll lm ln io mo ip lp ir mp is lr iu mq iv lt lu bi translated">数据探索</h1><h2 id="91aa" class="mw le hi bd lf ne nf ng lj nh ni nj ln jw nk nl lp ka nm nn lr ke no np lt nq bi translated">1.优步在纽约的提货和配送</h2><p id="b0d2" class="pw-post-body-paragraph jn jo hi jp b jq lv ij js jt lw im jv jw lx jy jz ka ly kc kd ke lz kg kh ki hb bi translated">首先，让我们探讨一下每月的提货量，看看这6个月是增加了还是减少了。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/3be3375a26fa25b9b4a3a11b4d1f8e02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ttxoFzeCNwp2I1hU9d9TkA.png"/></div></div></figure><p id="14e9" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">从上面的图中，我们可以看到，每个月的接送量都在稳步增长，从8月到9月的增幅略大(总行程比率= 1*10⁶)</p><h2 id="f3a9" class="mw le hi bd lf ne nf ng lj nh ni nj ln jw nk nl lp ka nm nn lr ke no np lt nq bi translated">2.按一周中的天数分配提货</h2><p id="975f" class="pw-post-body-paragraph jn jo hi jp b jq lv ij js jt lw im jv jw lx jy jz ka ly kc kd ke lz kg kh ki hb bi translated">让我们找出在这6个月中，哪一天的总接送/旅行次数比其他日子多。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/ccad13e9d9aee7540ab64460eedb574e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jwOrYC-jAf72Nvn-XEzV6Q.png"/></div></div></figure><p id="e147" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">有趣的是，周四的骑行次数更多！星期五紧随其后。甚至星期三和星期二的乘车次数都比星期六多，这是我没有预料到的！</p><p id="adcd" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">让我们进一步分析一下，试着找出每个月工作日的总乘车次数。我们将首先对我们的数据执行一个<em class="nd"> groupby() </em>操作。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/9b22c4fa8a8325ce94068284fe964bf8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yzXU9LczX-IHTxLIvKpZsw.png"/></div></div></figure><p id="7965" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">然后，我们将使用Seaborn绘制一个点图来创建我们的可视化。</p><pre class="iy iz ja jb fd mr ms mt mu aw mv bi"><span id="15d3" class="mw le hi ms b fi mx my l mz na">import seaborn as sns<br/>import matplotlib.pyplot as plt<br/>from matplotlib import cm<br/>%matplotlib inline</span><span id="8efd" class="mw le hi ms b fi nb my l mz na">## create figure<br/>fig = plt.figure(figsize=(12,6))<br/>sns.set_style(‘darkgrid’)</span><span id="f3bb" class="mw le hi ms b fi nb my l mz na">ax = sns.pointplot(x=”DayOfWeek”, y=”Base”, hue=”month”, data=daily_uber_rides_month)<br/>handles,labels = ax.get_legend_handles_labels()</span><span id="3b52" class="mw le hi ms b fi nb my l mz na">ax.set_xlabel(‘Day of Week’, fontsize = 15)<br/>ax.set_ylabel(‘Total Uber Pickups’, fontsize = 15)<br/>ax.set_title(‘Total Number of Pickups for Each Weekday per Month (April-September 2014)’, fontsize=16)<br/>ax.tick_params(labelsize = 8)<br/>ax.legend(handles,labels,loc=0, title=”Months”, prop={‘size’:10})<br/>ax.get_legend().get_title().set_fontsize(‘8’)<br/>plt.show()</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/9bc606a525bf1bea4a013d3f2dc7ec44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pYugVHM-3MuSNX-lPFIwyA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">创建了点图</figcaption></figure><p id="5248" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">从上面的图中，就像在另一个图中一样，我们可以看到优步的皮卡数量每个月都在增加，周四有更多的皮卡。我们还可以查看各个月份每天的总访问量，正如您可以清楚地注意到的那样，在一周内，这些折线图在某种程度上似乎都具有相似的模式。细分数据还显示，只有7月和8月的周四接客总数最高。</p><h2 id="a64f" class="mw le hi bd lf ne nf ng lj nh ni nj ln jw nk nl lp ka nm nn lr ke no np lt nq bi translated">3.按一天中的小时分配皮卡</h2><p id="1e96" class="pw-post-body-paragraph jn jo hi jp b jq lv ij js jt lw im jv jw lx jy jz ka ly kc kd ke lz kg kh ki hb bi translated">现在是时候找出大多数旅程的时间了。让我们从了解大多数旅行的大致时间开始。</p><pre class="iy iz ja jb fd mr ms mt mu aw mv bi"><span id="5ad8" class="mw le hi ms b fi mx my l mz na">#create a pivot table of the data<br/>uber_hour = uber_2014.pivot_table(index=['HourOfDay'],<br/>                                  values='Base',<br/>                                  aggfunc='count')</span><span id="cc58" class="mw le hi ms b fi nb my l mz na">#ploting<br/>uber_hour.plot(kind='bar', figsize=(8,6))<br/>plt.ylabel('Total Journeys')<br/>plt.title('Journeys by Hour');</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/bfaa91dcaac90a16ac550d30e5cfbb29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I24N3Qm9bIX80yHbNz7b9g.png"/></div></div></figure><p id="39d7" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">从数据的总体来看，看起来旅行在早上6-8点之间达到高峰，然后从下午3点开始再次达到高峰，并稳步上升，直到下午5点左右达到高峰，然后客流量稳步下降，直到深夜。</p><p id="9f08" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在让我们把这个每小时的乘车数据分解成天，看看趋势是否还是一样。我们将计算几个月中每天每个小时的乘车次数，并保留工作日功能。<em class="nd"> groupby() </em>操作将分配一个我们可以重置的层次索引。此外，我们将重命名该列，以表明它是符合标准的乘坐总次数的计数。</p><pre class="iy iz ja jb fd mr ms mt mu aw mv bi"><span id="bc61" class="mw le hi ms b fi mx my l mz na"># groupby operation<br/>hourly_ride_data = uber_2014.groupby(['month','DayOfWeekNum','HourOfDay','DayOfWeek'])['Base'].count()</span><span id="127e" class="mw le hi ms b fi nb my l mz na"># reset index<br/>hourly_ride_data = hourly_ride_data.reset_index()</span><span id="92ff" class="mw le hi ms b fi nb my l mz na"># rename column<br/>hourly_ride_data = hourly_ride_data.rename(columns = {'Base':'RideCount'})</span><span id="fee0" class="mw le hi ms b fi nb my l mz na"># ocular analysis<br/>hourly_ride_data.head()</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/d985d179113d30066a669f17b213967d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uf4hSpo3urKPsLuJHE0xbw.png"/></div></div></figure><p id="9382" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在让我们绘制其中一个月的每小时乘车次数，我们选择八月。</p><pre class="iy iz ja jb fd mr ms mt mu aw mv bi"><span id="18db" class="mw le hi ms b fi mx my l mz na">#first, create dataframe containing august hourly data<br/>aug_hourly_data = hourly_ride_data[hourly_ride_data.month == 4]</span><span id="ca97" class="mw le hi ms b fi nb my l mz na"># create figure<br/>fig = plt.figure(figsize=(12,6))<br/>sns.set_style('darkgrid')</span><span id="616e" class="mw le hi ms b fi nb my l mz na">ax = sns.pointplot(x="HourOfDay", y="RideCount", hue="DayOfWeek", data=aug_hourly_data)<br/>handles,labels = ax.get_legend_handles_labels()</span><span id="173c" class="mw le hi ms b fi nb my l mz na">ax.set_xlabel('Hour of Day', fontsize = 15)<br/>ax.set_ylabel('Uber Pickups', fontsize = 15)<br/>ax.set_title('Total Hourly Uber Pickups By Day of the Week in NYC (August 2014)', fontsize=16)<br/>ax.tick_params(labelsize = 8)<br/>ax.legend(handles,labels,loc=0, title="Days", prop={'size':10})<br/>ax.get_legend().get_title().set_fontsize('8')<br/>plt.show()</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/853e17a9cc4c3a6b02ef32b3a20d4c69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H-Si2I8VECguY5MRZR-Q0g.png"/></div></div></figure><p id="4e13" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">从上面的图中可以看出，在8月份，周三有更多的皮卡，高峰在下午5点至7点之间。不出所料，12点至凌晨3点接客最多的一天是周日！周日下午3点到凌晨2点的接客量也最少。</p><h2 id="8b2c" class="mw le hi bd lf ne nf ng lj nh ni nj ln jw nk nl lp ka nm nn lr ke no np lt nq bi translated">4.每个工作日每小时的平均取货量</h2><p id="82c6" class="pw-post-body-paragraph jn jo hi jp b jq lv ij js jt lw im jv jw lx jy jz ka ly kc kd ke lz kg kh ki hb bi translated">我们将使用每小时的数据来计算每个工作日的每小时平均值。与我们上面所做的使用每小时的总访问量相比，使用每个工作日的每小时平均值会给我们一个更准确的见解。我们将根据之前定义的工作日索引对数据进行排序，以便进行清晰的绘图。</p><pre class="iy iz ja jb fd mr ms mt mu aw mv bi"><span id="fe14" class="mw le hi ms b fi mx my l mz na">## groupby operation<br/>weekday_hourly_avg = hourly_ride_data.groupby(['DayOfWeek','HourOfDay'])['RideCount'].mean()</span><span id="77ba" class="mw le hi ms b fi nb my l mz na">## reset index<br/>weekday_hourly_avg = weekday_hourly_avg.reset_index()</span><span id="d5a6" class="mw le hi ms b fi nb my l mz na">## rename column<br/>weekday_hourly_avg = weekday_hourly_avg.rename(columns = {'RideCount':'AverageRides'})</span><span id="d2ef" class="mw le hi ms b fi nb my l mz na">## sort by categorical index<br/>weekday_hourly_avg = weekday_hourly_avg.sort_index()</span><span id="5772" class="mw le hi ms b fi nb my l mz na">## ocular analysis<br/>weekday_hourly_avg.head()</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/7169c91efcb6435bfd3fec9274c2e103.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lVyBL2nuONgR_IuAu_ZeGw.png"/></div></div></figure><p id="5471" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">看起来我们需要将<em class="nd"> AverageRides </em>特性转换成int。</p><pre class="iy iz ja jb fd mr ms mt mu aw mv bi"><span id="d92e" class="mw le hi ms b fi mx my l mz na">#convert AverageRides column from float to int<br/>weekday_hourly_avg['AverageRides'] = weekday_hourly_avg['AverageRides'].astype('int')</span></pre><p id="b716" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在那之后，我们可以画出我们的图形</p><pre class="iy iz ja jb fd mr ms mt mu aw mv bi"><span id="9fc9" class="mw le hi ms b fi mx my l mz na">## create figure<br/>fig = plt.figure(figsize=(12,6))<br/>sns.set_style('darkgrid')</span><span id="860a" class="mw le hi ms b fi nb my l mz na">ax = sns.pointplot(x="HourOfDay", y="AverageRides", hue="DayOfWeek", data=weekday_hourly_avg)<br/>handles,labels = ax.get_legend_handles_labels()</span><span id="fcbf" class="mw le hi ms b fi nb my l mz na">#reordering legend content<br/>handles = [handles[1], handles[5], handles[6], handles[4], handles[0], handles[2], handles[3]]<br/>labels = [labels[1], labels[5], labels[6], labels[4], labels[0], labels[2], labels[3]]</span><span id="74f6" class="mw le hi ms b fi nb my l mz na"># ax.yaxis.set_major_formatter(FormatStrFormatter('%.0f'))<br/>ax.set_xlabel('Hour of Day', fontsize = 15)<br/>ax.set_ylabel('Average Uber Pickups', fontsize = 15)<br/>ax.set_title('Hourly Average Uber Pickups By Day of the Week in NYC (April-September 2014)', fontsize=16)<br/>ax.tick_params(labelsize = 8)<br/>ax.legend(handles,labels,loc=0, title="Days", prop={'size':10})<br/>ax.get_legend().get_title().set_fontsize('8')<br/>plt.show()</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/ad8332c3868c0b6166edd9e94e4d457f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0s3nzruY5-Y4TrX7z1tJ8A.png"/></div></div></figure><p id="4ea6" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">从图中，我们可以观察到，在上午12点至4点之间，接收量逐渐下降，然后在上午4点至8点之间急剧上升，然后开始稳定下降，并在上午9点至12点之间趋于平缓。然后，它稳步上升，达到峰值，大多数日子是在下午4-8点，然后，除了周五和周六晚上8-10点略有上升外，整个晚上到第二天早上，它又稳步下降，原因很明显！</p><p id="6e49" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">我们可以看到，优步的接单量在周四下午4-9点达到高峰，周五和周六晚上9-11点记录了大量的接单量。同样有趣的是，在上午12点至4点之间，周六的取件量显著上升，周日又略有上升。</p><p id="2e02" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">另一个意想不到的观察结果是，周一全天的取件量如此之少，周一上午10点至下午3点之间的取件量最低。</p><h2 id="36e0" class="mw le hi bd lf ne nf ng lj nh ni nj ln jw nk nl lp ka nm nn lr ke no np lt nq bi translated">5.优步皮卡在各基地的分布</h2><p id="08b4" class="pw-post-body-paragraph jn jo hi jp b jq lv ij js jt lw im jv jw lx jy jz ka ly kc kd ke lz kg kh ki hb bi translated">从我收集到的信息来看，我还不确定我的判断是否正确，纽约已经被纽约出租车和豪华轿车委员会划分为几个基地，每次发生接送事件时，发生接送事件的区域的<a class="ae ks" href="http://www.nyc.gov/html/tlc/html/industry/base_and_business.shtml" rel="noopener ugc nofollow" target="_blank">区号都会被记录下来。</a></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/b49c30cf12f4bdac4dbfda0d815da7fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6uqEWANPGjZvTPrdM1ODZg.png"/></div></div></figure><p id="af9f" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">从我们的数据来看，有5个碱基，每个碱基都有一个唯一的区域代码，用于识别它。为了便于我们识别碱基，我们将把<em class="nd">碱基</em>栏中的碱基代码替换为碱基的实际名称。</p><pre class="iy iz ja jb fd mr ms mt mu aw mv bi"><span id="d46f" class="mw le hi ms b fi mx my l mz na">base_names = {"Base": {'B02617':'Weiter', 'B02598':'Hinter','B02682':'Schmecken','B02764':'Danach-NY','B02512':'Unter'}}</span><span id="74a2" class="mw le hi ms b fi nb my l mz na">uber_2014_bases = uber_2014.copy()</span><span id="2785" class="mw le hi ms b fi nb my l mz na">uber_2014_bases.replace(base_names, inplace=True)</span><span id="1272" class="mw le hi ms b fi nb my l mz na">uber_2014_bases.head()</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/ecd9dc1c310af3675353af3d657eacbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lqpH-3XtSQfGIY9xamzUBw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">“碱基”栏中的代码已被实际的碱基名称取代</figcaption></figure><p id="45ea" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在，让我们创建一个图表，找出这几个月来基地中皮卡的分布情况。为此，我们将使用plotly库。</p><pre class="iy iz ja jb fd mr ms mt mu aw mv bi"><span id="700a" class="mw le hi ms b fi mx my l mz na">import plotly.express as px</span><span id="baee" class="mw le hi ms b fi nb my l mz na"># Here we use a column with categorical data<br/>fig = px.histogram(uber_2014_bases, x="Base",<br/>                  title='Pickups Per Base',<br/>                   labels={'count':'No of Pickups'})<br/>fig.show()</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/7b5fcf4118235f29477d393e6125dc31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*akLU1QnsbbPiuhBYZRWMZw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">皮卡在基地间的分布</figcaption></figure><p id="2412" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">从上面的图中，我们可以很容易地看到维特的皮卡数量更多，紧随其后的是辛特和施梅肯。这可能是因为这些地区是人口高度密集的地区。Unter的访问量最少，不到20万次。</p><p id="81a2" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">接下来，我们将在地图上绘制数据并可视化分布。</p><h2 id="76bc" class="mw le hi bd lf ne nf ng lj nh ni nj ln jw nk nl lp ka nm nn lr ke no np lt nq bi translated">6.过去6个月的总提货量热图</h2><p id="85a1" class="pw-post-body-paragraph jn jo hi jp b jq lv ij js jt lw im jv jw lx jy jz ka ly kc kd ke lz kg kh ki hb bi translated">让我们创建一个皮卡热图，尝试并可视化这几个月来纽约市的皮卡分布情况，以查看有大量皮卡的区域，反之亦然。我们将使用我一直想使用的底图包来创建一个非常酷的地图可视化！</p><pre class="iy iz ja jb fd mr ms mt mu aw mv bi"><span id="8e12" class="mw le hi ms b fi mx my l mz na">from mpl_toolkits.basemap import Basemap</span><span id="70df" class="mw le hi ms b fi nb my l mz na">west, south, east, north = -74.26, 40.50, -73.70, 40.92</span><span id="050d" class="mw le hi ms b fi nb my l mz na">fig = plt.figure(figsize=(14,10))<br/>ax = fig.add_subplot(111)<br/>m = Basemap(projection='merc', llcrnrlat=south, urcrnrlat=north,<br/>            llcrnrlon=west, urcrnrlon=east, lat_ts=south, resolution='i')<br/>x, y = m(uber_2014['Lon'].values, uber_2014['Lat'].values)<br/>m.hexbin(x, y, gridsize=1000,<br/>         bins='log', cmap=cm.YlOrRd_r);</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/8c6f1fce8545ee77b6955aece5a2da70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xvSUekh2gfYXUzlgOWIQ9g.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">一个非常好看的地图！</figcaption></figure><p id="41d4" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">从热图中，我们可以看到曼哈顿中城和市中心(尤其是)有大量优步皮卡，这是合理的，当你向外移动时，在布朗克斯、皇后区和布鲁克林等地区，他们的皮卡数量明显减少。JFK机场周围地区也有很多优步皮卡。</p><h2 id="12c6" class="mw le hi bd lf ne nf ng lj nh ni nj ln jw nk nl lp ka nm nn lr ke no np lt nq bi translated">7.找出高度聚集/热点区域</h2><p id="5a7d" class="pw-post-body-paragraph jn jo hi jp b jq lv ij js jt lw im jv jw lx jy jz ka ly kc kd ke lz kg kh ki hb bi translated">这一节受到了杰夫·波音的文章  <strong class="jp hj"> </strong>的启发，我肯定会就此再写一篇文章。</p><p id="836d" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">虽然查看热图上的原始数据集并获得直觉是有用的，但查看快照并不能给我们提供足够的信息来做出好的结论，并且绘制几个小时的单个拾取只会造成混乱。我们希望从这个数据集中得出可操作的结论，因此我们需要能够在城市的不同区域之间进行定量比较。</p><p id="2863" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">我们不想使用基数列，因为它们覆盖了很大的区域，那么我们如何定义区域呢？</p><p id="71de" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">我们可以手动定义它们，然后相应地将它们分类，但是我们要寻找的信息已经在我们的数据集中了。与其把我们的数据强加到一个建立在我们自己假设之上的框架中，不如让我们观察人们是如何移动的，并寻找特殊情况。</p><p id="e8e5" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">我们将从<a class="ae ks" href="https://scikit-learn.org/stable/modules/generated/sklearn.cluster.DBSCAN.html" rel="noopener ugc nofollow" target="_blank"> scikit-learn </a>中实现<a class="ae ks" href="https://towardsdatascience.com/how-dbscan-works-and-why-should-i-use-it-443b4a191c80" rel="noopener" target="_blank"> <strong class="jp hj"> DBSCAN聚类方法</strong> </a>，而不是结构化空间宁滨。这会让我们更好地控制我们提出的问题。</p><p id="a02f" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">k-means算法可能是最常见的聚类算法。但是对于空间数据，DBSCAN算法在这种还使用地理数据的情况下要优越得多。</p><p id="60cb" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">DBSCAN算法会将满足指定密度度量的点组合在一起。基本上，我们将定义一个最大距离，以使两个单独的点作为邻居，以及一组点作为聚类的最小邻居数。该算法会将符合标准的点分类成组，并丢弃所有异常值。</p><p id="ec1c" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">一旦DBSCAN确定了所有适用的聚类，我们就可以使用Shapely的MultiPoint类轻松计算质心并绘制结果。</p><p id="df56" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这使我们能够准确识别在特定时间段内出现大量提货的地点。通过使用单个聚类中拾取的总数作为给热点位置着色的度量，我们可以可视化给定热点的强度以及其质心。</p><p id="a8f6" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">首先，我们将编写一个运行聚类算法并返回“热点”的函数我们将得到质心的坐标和每个集群中拾取的数量。</p><pre class="iy iz ja jb fd mr ms mt mu aw mv bi"><span id="3471" class="mw le hi ms b fi mx my l mz na">#import necessary libraries<br/>from sklearn.cluster import DBSCAN<br/>from geopy.distance import great_circle<br/>from shapely.geometry import MultiPoint</span><span id="c6be" class="mw le hi ms b fi nb my l mz na">#Most of this code is from Geoff Boeing article and GitHub repo. <br/>#If you get lost, read through it and it will explain way better than I could ever do!<br/>#<a class="ae ks" href="https://geoffboeing.com/2014/08/clustering-to-reduce-spatial-data-set-size/" rel="noopener ugc nofollow" target="_blank">https://geoffboeing.com/2014/08/clustering-to-reduce-spatial-data-set-size/</a></span><span id="d5bb" class="mw le hi ms b fi nb my l mz na">def get_hot_spots(max_distance,min_cars,ride_data):<br/>    <br/>    ## get coordinates from ride data<br/>    coords = ride_data[['Lat', 'Lon']].to_numpy()<br/>    <br/>    ## calculate epsilon parameter using<br/>    ## the user defined distance<br/>    kms_per_radian = 6371.0088<br/>    ##The epsilon parameter is the max distance that points can be from each other to be considered a cluster.<br/>    epsilon = max_distance / kms_per_radian<br/>    <br/>    ## perform clustering<br/>    db = DBSCAN(eps=epsilon, min_samples=min_cars,<br/>                algorithm='ball_tree', metric='haversine').fit(np.radians(coords))<br/>    <br/>    ## group the clusters<br/>    cluster_labels = db.labels_<br/>    num_clusters = len(set(cluster_labels))<br/>    clusters = pd.Series([coords[cluster_labels == n] for n in range(num_clusters)])<br/>    <br/>    ## report<br/>    print('Number of clusters: {}'.format(num_clusters))<br/>    <br/>    ## initialize lists for hot spots<br/>    lat = []<br/>    lon = []<br/>    num_members = []<br/>    <br/>    ## loop through clusters and get centroids, number of members<br/>    for ii in range(len(clusters)):</span><span id="e19c" class="mw le hi ms b fi nb my l mz na">## filter empty clusters<br/>        if clusters[ii].any():</span><span id="60ae" class="mw le hi ms b fi nb my l mz na">## get centroid and magnitude of cluster<br/>            lat.append(MultiPoint(clusters[ii]).centroid.x)<br/>            lon.append(MultiPoint(clusters[ii]).centroid.y)<br/>            num_members.append(len(clusters[ii]))<br/>            <br/>    hot_spots = [lon,lat,num_members]<br/>    <br/>    return hot_spots</span></pre><p id="66a7" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj">提出问题进行测试</strong></p><p id="0b49" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在2014年8月14日下午4:00之后，在50米范围内发生25起以上皮卡事件的地点在哪里？</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/51b8bfa2251087437532b87832a2cf00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UmoAqGpNQ9uOPSgsLRBrFA.png"/></div></div></figure><p id="4711" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">从数据来看，纽约市周围有172个集群符合标准。让我们把它画出来形象化。</p><p id="731b" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这一次，为了绘图，我们将利用<a class="ae ks" href="https://leafletjs.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp hj">传单库</strong> </a>的<a class="ae ks" href="https://github.com/jwass/mplleaflet" rel="noopener ugc nofollow" target="_blank"><strong class="jp hj">mple leaf</strong></a>——一个非常轻量级的JavaScript库，用于移动友好的交互式地图——将一个基本的matplotlib绘图叠加到一个传单上。它将自动执行所需的计算，将我们的GPS坐标投影到2D表示上。它也明显更快。</p><p id="8ce1" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">我们将使用散点图，这样我们就可以使用簇大小作为度量来设置标记颜色。如果我们在彩色地图上使用对数标度，那么在下限附近有更好的视觉区分。如果我们使用线性色标，那么接近下限的值将全部显示为相似的颜色。去吧，两个都试试。</p><pre class="iy iz ja jb fd mr ms mt mu aw mv bi"><span id="ddc7" class="mw le hi ms b fi mx my l mz na">import mplleaflet</span><span id="8ac2" class="mw le hi ms b fi nb my l mz na">## make the figure<br/>fig = plt.figure(figsize=(14,8))<br/>ax = fig.add_subplot(111)</span><span id="6e3c" class="mw le hi ms b fi nb my l mz na">## set the color scale<br/>color_scale = np.log(hot_spots[2])<br/># color_scale = hot_spots[2]</span><span id="2e79" class="mw le hi ms b fi nb my l mz na">## make the scatter plot<br/>plt.scatter(hot_spots[0], hot_spots[1],s=80,c=color_scale,cmap=cm.cool)</span><span id="ceb1" class="mw le hi ms b fi nb my l mz na">## display the Leaflet<br/># mpl.show()     # opens in a new interactive tab<br/>mplleaflet.display()  # shows interactive map inline in Jupyter but cannot handle large data sets</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/88e53a0d1695e3373a5bf85a9b2c3429.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B8GmmOtOVN4q_1_3-e6P_Q.png"/></div></div></figure><p id="e78d" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">上面的地图显示了2014年8月14日下午4:00后，50米内发生了25起以上的皮卡事件。太棒了。</p><p id="71e5" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">最好的部分是，你可以在地图上放大，以便清楚地查看星团所在的区域，以防它是星团高度集中的区域。真的牛逼！</p><h1 id="decf" class="ld le hi bd lf lg lh li lj lk ll lm ln io mo ip lp ir mp is lr iu mq iv lt lu bi translated"><strong class="ak">结论</strong></h1><p id="8a73" class="pw-post-body-paragraph jn jo hi jp b jq lv ij js jt lw im jv jw lx jy jz ka ly kc kd ke lz kg kh ki hb bi translated">我得出的第一个结论是，如果我在任何地方使用这么大的数据集，我永远不会使用我的这台笔记本电脑来执行任何与数据科学相关的任务！我很快肯定要再买一台笔记本电脑了。我也建议你们去看看Vaex库，不管你的电脑有多强大。这是一个真正强大的库，将大大减少所需的执行时间。</p><p id="5d12" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">其次，使用包含地理空间数据的数据集使我能够了解更多如何更好地使用它们来收集见解，因为我没有机会探索这类数据。如果你正在处理地理数据，DBSCAN算法是一个非常强大的聚类算法，我对它印象深刻。</p><p id="2aa1" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">最后，使用传单库和底图库绘制地图对我来说是第一次，它们真的是很棒的库，我将来肯定会使用它们。</p><p id="7c28" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><em class="nd">我用来做这个迷你项目的jupyter笔记本现在在</em><a class="ae ks" href="https://github.com/elvisomondi/Exploratory-Analysis-and-Clustering-of-Uber-Pickups-in-NYC-from-April-to-Sept-2014" rel="noopener ugc nofollow" target="_blank"><em class="nd">GitHub</em></a><em class="nd">上有了。</em></p></div></div>    
</body>
</html>