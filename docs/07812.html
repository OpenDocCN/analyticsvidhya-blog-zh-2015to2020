<html>
<head>
<title>ML enabled car parking: Automating mundane tasks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">支持ML的停车场:自动化日常任务</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/ml-enabled-car-parking-automating-mundane-tasks-433430c64c2f?source=collection_archive---------20-----------------------#2020-07-08">https://medium.com/analytics-vidhya/ml-enabled-car-parking-automating-mundane-tasks-433430c64c2f?source=collection_archive---------20-----------------------#2020-07-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="d051" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在商业建筑中找到一个空的停车位是一个挑战。汽车停车系统可以用来显示建筑物中每个停车位的状态。这将节省用户的时间，并通知他们可用的停车位，从而节省开车四处寻找停车位的时间和精力。</p><p id="a4fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在浦那的科里奥利技术公司实习时实施了这个项目。该项目的目的是处理来自安装在停车场的闭路电视的实时视频流，并使用机器学习(ML)来识别和提醒用户已占用和可用的停车位。</p><p id="ee77" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我把整个过程分成几个步骤:</p><ol class=""><li id="6330" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><strong class="ih hj">从视频流中检测汽车并将其存储在帧中</strong></li></ol><p id="ecc9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是停车场闭路电视的真实图像:</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es jm"><img src="../Images/c87dc23c3f5ef35fadd3b5db3ad303d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CQF0Q8GiG4IGtJ0l21jpsg.jpeg"/></div></div></figure><p id="3b82" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一步是装备系统，从视频流中检测汽车。在比较了SSD、Masked R-CNN、YOLO(一种深度学习方法)等各种模型后，证明在速度和准确性方面对该应用程序最有效。</p><p id="823e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">YOLO是解决当前问题的完美算法。它将单个神经网络应用于图像，并通过将图像划分为多个区域来预测边界框和概率。然后，它将非极大值抑制(NMS)应用于图像，以确保每个对象只被检测一次。输出图像是考虑了图像中所有边界框的预测..</p><p id="576d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了与YOLO合作，三个文件是必不可少的:</p><ol class=""><li id="23ec" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><a class="ae jy" href="https://pjreddie.com/media/files/yolov3.weights" rel="noopener ugc nofollow" target="_blank"> yolo.weights </a> —预训练的重量</li><li id="0c91" class="jd je hi ih b ii jz im ka iq kb iu kc iy kd jc ji jj jk jl bi translated"><a class="ae jy" href="https://github.com/pjreddie/darknet/blob/master/cfg/yolov3.cfg" rel="noopener ugc nofollow" target="_blank"> yolo.cfg </a> —配置文件</li><li id="b9a1" class="jd je hi ih b ii jz im ka iq kb iu kc iy kd jc ji jj jk jl bi translated"><a class="ae jy" href="https://github.com/pjreddie/darknet/blob/master/data/coco.names" rel="noopener ugc nofollow" target="_blank">可可名</a> — 80类标签</li></ol><p id="336d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这三个文件是算法、其配置和标签，对象检测器针对这些文件进行预训练。</p><p id="155c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">YOLO启用了以下输出图像，其中每个蓝色框代表一个边界框:</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es jm"><img src="../Images/06be95983caa3c3ec9776e9956a72c37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9aUb7NK4pgNI84i58cHwwg.jpeg"/></div></div></figure><p id="5a82" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 2。标记停车槽坐标</strong></p><p id="f54e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">与在程序中硬编码停车位坐标不同，保存在配置文件中减少了修改代码的需要。配置文件保存Python脚本的所有变量，并保持代码完整。所有更改都可以直接在配置文件中进行。使用<a class="ae jy" href="https://github.com/olgarose/ParkingLot/blob/master/parking_lot/coordinates_generator.py" rel="noopener ugc nofollow" target="_blank">鼠标点击事件</a>可以捕获停车位的坐标。这些坐标与汽车的边界框一起用于计算并集上的交集(IoU)。</p><p id="73ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 3。检测停车位的状态，已占用或可用</strong></p><p id="e9d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">很可能在摄像机视图中，一辆车将与另一个槽重叠。为了评估停车位的状态，使用的测量方法是<a class="ae jy" href="https://www.pyimagesearch.com/2016/11/07/intersection-over-union-iou-for-object-detection/" rel="noopener ugc nofollow" target="_blank">交叉点对联合</a>。它的计算方法是找出它们重叠的面积，然后除以两个对象覆盖的总面积，如下所示:</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es ke"><img src="../Images/9b02b8c0d98c623a0eef1abacaef5ef3.png" data-original-src="https://miro.medium.com/v2/resize:fit:466/format:webp/1*Qmasqveyg_mAnn_sbccfCg.png"/></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">并集上的交集</figcaption></figure><p id="e3ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该值有助于确定轿厢是否占用了特定的位置。如果该值小于0.2，则表示停车位是空的，因此最有可能是可用的。高于0.6的值表示汽车占据了大部分停车位，因此可以安全地假设它被占用了。</p><p id="40bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 4。与Flask服务器集成，使用JSON格式</strong></p><p id="8cb7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Flask是Python的一个轻量级web框架。它为用户提供了库、模块和工具来帮助构建Web应用程序。将相关数据与Flask API集成。</p><p id="40d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以使用下面的命令行安装它:<strong class="ih hj"> pip install flask </strong></p><p id="849d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">JSON (JavaScript Object Notation)是一种基于文本的数据存储格式，旨在方便人类和机器阅读。JSON通常是通过API返回数据的最常见格式，XML是第二常见的格式。使用curl命令的输出可以在命令行上看到如下内容:</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es kj"><img src="../Images/8386752586c90ef4878a50498c6a0378.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YsRcEHHnuACDJV6xa-jBbw.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">JSON格式的Curl输出</figcaption></figure><p id="b51d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 5。</strong> <strong class="ih hj">使用Slack app在频道上发送消息</strong></p><p id="b4f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Slack是一个受组织青睐的流行的商业交流平台，它允许团队远程工作以保持交流和工作效率。公司使用Slack进行内部沟通，使其成为这个项目的首选平台，我使用Slack应用程序发送警报。</p><p id="365d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要在Slack上发送消息，首先要安装一个名为“Slacker”的模块。下一步是<a class="ae jy" href="https://api.slack.com/start/overview" rel="noopener ugc nofollow" target="_blank">创建一个Slack应用程序</a>，它将支持使用认证令牌发送消息。此令牌将允许应用程序在添加到松弛通道后发送消息。</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es kk"><img src="../Images/a477a2a4f443e52d8a17764bec03d25a.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/1*SnDEk79aRJIjr_JQxvB0MQ.png"/></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">安装模块“懒鬼”</figcaption></figure><p id="d1ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦创建了应用程序并集成了必要的权限和功能，以下功能就可以在Slack上发送消息:</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es kl"><img src="../Images/7db616df129050dafb0d20c7e92b536a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*Z87aQYwUNqwFNZvO77ejPg.png"/></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">在空闲信道上发送警报的功能</figcaption></figure><p id="7419" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是应用程序发送的消息在Slack上的显示方式:</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es km"><img src="../Images/6316e2c8513065ec8014bc8ad01081af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*tIkDKdHNqJIamTT3ZrUdBA.png"/></div></figure><p id="655c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除了Slack应用程序，发送消息的其他可能选项是使用Slack bot或传统令牌。机器人有一些安全问题，因为它能够在它不是成员的频道上发布消息。使用传统令牌的问题是它们是一个过时的选项，Slack建议使用Slack应用程序。</p><p id="f248" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">选择这个应用程序中的应用程序的另一个主要原因是限制消息发送的渠道。Slack应用程序允许创建者添加各种权限，如写、读、上传文件和许多其他权限。这使得用户可以选择将应用添加到哪个频道，从而确保其他公共和私人频道的隐私。</p><p id="df5c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 6。</strong> <strong class="ih hj">训练和测试图像分类器</strong></p><p id="8e3f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我决定给这个应用程序添加一个额外的特性，训练一个图像分类器来识别车主。Keras ImageDataGenerator模块用于数据扩充，因为它对图像执行各种变换，如放大、缩小、水平(或垂直翻转)、从各种角度查看图像等。</p><p id="7686" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个项目中，<a class="ae jy" href="https://www.pyimagesearch.com/2019/07/08/keras-imagedatagenerator-and-data-augmentation/" rel="noopener ugc nofollow" target="_blank">训练图像分类器</a>有三个步骤:</p><p id="36d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">a.通过执行数据扩充来生成图像数据集</p><p id="f935" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">b.使用ImageDataGenerator获得的数据集训练CNN (ResNet)</p><p id="88ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">c.测试生成的模型以识别汽车的所有者</p><p id="3cd6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">识别车主的一种方法是看车牌。然而，由于光线不足，溪流处于夜间视野中，所以号码牌是反光的，因此很难从远处看清。因此，该模型被训练成基于汽车的特征来识别车主。</p><p id="374e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我的实习让我有机会开发一个解决员工停车问题的系统。该公司目前在每个停车位上都安装了超声波传感器，用于检测汽车的存在与否。该项目的目的是取代旧系统，并建立一种新的方式来帮助用户。</p><p id="08e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在这个项目中提到的链接是:</p><ol class=""><li id="5940" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><strong class="ih hj">计算并集上的交集:</strong><a class="ae jy" href="https://www.pyimagesearch.com/2016/11/07/intersection-over-union-iou-for-object-detection/" rel="noopener ugc nofollow" target="_blank">https://www . pyimagesearch . com/2016/11/07/Intersection-over-Union-iou-for-object-detection/</a></li><li id="0f3a" class="jd je hi ih b ii jz im ka iq kb iu kc iy kd jc ji jj jk jl bi translated"><strong class="ih hj">使用YOLO和OpenCV的物体检测:</strong><a class="ae jy" href="https://www.pyimagesearch.com/2018/11/12/yolo-object-detection-with-opencv/" rel="noopener ugc nofollow" target="_blank">https://www . pyimagesearch . com/2018/11/12/yolo-Object-detection-with-OpenCV/</a></li><li id="7921" class="jd je hi ih b ii jz im ka iq kb iu kc iy kd jc ji jj jk jl bi translated"><strong class="ih hj"> SSD MobileNet代码:</strong><a class="ae jy" href="https://honingds.com/blog/ssd-single-shot-object-detection-mobilenet-opencv/" rel="noopener ugc nofollow" target="_blank">https://honing ds . com/blog/SSD-single-shot-object-detection-MobileNet-opencv/</a></li><li id="2666" class="jd je hi ih b ii jz im ka iq kb iu kc iy kd jc ji jj jk jl bi translated"><strong class="ih hj">数据增强和图像分类器:</strong><a class="ae jy" href="https://www.pyimagesearch.com/2019/07/08/keras-imagedatagenerator-and-data-augmentation/" rel="noopener ugc nofollow" target="_blank">https://www . pyimagesearch . com/2019/07/08/keras-imagedata generator-and-Data-augmentation/</a><a class="ae jy" href="https://www.pyimagesearch.com/2017/12/11/image-classification-with-keras-and-deep-learning/" rel="noopener ugc nofollow" target="_blank">https://www . pyimagesearch . com/2017/12/11/Image-class ification-with-keras-and-deep-learning/</a></li></ol></div></div>    
</body>
</html>