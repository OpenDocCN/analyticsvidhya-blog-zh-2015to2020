<html>
<head>
<title>What does ' if __name__ == "__main__": ' do?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">' if __name__ == "__main__:'是做什么的？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/what-does-if-name-main-do-3de97278c6df?source=collection_archive---------17-----------------------#2020-12-13">https://medium.com/analytics-vidhya/what-does-if-name-main-do-3de97278c6df?source=collection_archive---------17-----------------------#2020-12-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2bae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您必须在 python 项目中使用 __name__。你一定见过如下 if 条件中的 __name__:</p><blockquote class="jd"><p id="bc71" class="je jf hi bd jg jh ji jj jk jl jm jc dx translated">if __name__ == "__main__ ":</p></blockquote><p id="87d6" class="pw-post-body-paragraph if ig hi ih b ii jn ik il im jo io ip iq jp is it iu jq iw ix iy jr ja jb jc hb bi translated">要理解这个 if 条件，您需要知道以下几点:</p><ul class=""><li id="1a03" class="js jt hi ih b ii ij im in iq ju iu jv iy jw jc jx jy jz ka bi translated">__name__ 是 python 的一个 Dunder 别名(全局变量)。每当我们运行 python 模块时，解释器将 __name__ 的值设置为 __main__。</li><li id="e6db" class="js jt hi ih b ii kb im kc iq kd iu ke iy kf jc jx jy jz ka bi translated">每当我们将一个模块导入另一个模块时，解释器运行导入模块的整个脚本，导入的 python 文件的名称将被设置为 __name__。</li></ul><p id="1c4c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们借助一个简单的例子来理解它:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kg"><img src="../Images/6a8b5a7f8f6c2f882673f5c9797ee87a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pal61DQRo1SQpUy4CTHs6w.jpeg"/></div></div></figure><p id="2cb6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我们运行第一个. py 文件时，在运行该文件的代码之前，解释器将 __name__ 的值设置为 __main__ 并且在此之后将发生以下步骤:</p><ul class=""><li id="a98f" class="js jt hi ih b ii ij im in iq ju iu jv iy jw jc jx jy jz ka bi translated">解释器会看到 add()的函数定义，它会记住这个定义，但函数 add()不会执行。</li><li id="fa1c" class="js jt hi ih b ii kb im kc iq kd iu ke iy kf jc jx jy jz ka bi translated">现在，解释器将看到 if 条件，它检查 __name__ 的值。由于 first.py 是直接执行的，因此 __name__ 的值将是 __main__。因此，如果条件将评估为真，所以块的如果条件将得到执行，否则块将被跳过。</li></ul><p id="3b5f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">直接执行时 first.py 的输出:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ks"><img src="../Images/e26eadf545e5e6946dbaebc81503af63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GJx7ifO6sbw5O78ya9XZ4g.jpeg"/></div></div></figure><p id="b223" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们将第一个. py 导入另一个 python 文件‘second . py’中:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kt"><img src="../Images/221ee282a7b42da641541ebe0ea06895.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zm1SVGUktpdAKduBo-7GpA.jpeg"/></div></div></figure><p id="baa4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们试着理解这将如何执行:</p><ul class=""><li id="4c01" class="js jt hi ih b ii ij im in iq ju iu jv iy jw jc jx jy jz ka bi translated">解释器将把 __name__ 的值设置为 second.py 模块的 __main__。</li><li id="1104" class="js jt hi ih b ii kb im kc iq kd iu ke iy kf jc jx jy jz ka bi translated">在这里，我们导入 first.py 模块，然后运行 second.py 解释器的任何代码，解释器将执行 first.py 模块的整个脚本。</li><li id="4fc6" class="js jt hi ih b ii kb im kc iq kd iu ke iy kf jc jx jy jz ka bi translated">first.py 将按如下方式执行:</li></ul><ol class=""><li id="045f" class="js jt hi ih b ii ij im in iq ju iu jv iy jw jc ku jy jz ka bi translated">对于 first.py，__name__ 的值将被设置为“first”。</li><li id="658f" class="js jt hi ih b ii kb im kc iq kd iu ke iy kf jc ku jy jz ka bi translated">解释器会记住 add()的定义。</li><li id="241b" class="js jt hi ih b ii kb im kc iq kd iu ke iy kf jc ku jy jz ka bi translated">由于 __name__ 的值是第一个，if 条件将计算为 False。</li><li id="31bd" class="js jt hi ih b ii kb im kc iq kd iu ke iy kf jc ku jy jz ka bi translated">因此，将执行 else 部分块中的代码。</li></ol><ul class=""><li id="71e2" class="js jt hi ih b ii ij im in iq ju iu jv iy jw jc jx jy jz ka bi translated">当 first.py 被执行时，解释器将运行 print 语句并调用 second.py 文件中的 add()。</li></ul><p id="4803" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">second.py 的输出:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kv"><img src="../Images/4212b9602fbd764f051bc390630183c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x01GLnGbVoLNj9dpXBepcA.jpeg"/></div></div></figure><h1 id="fa4b" class="kw kx hi bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">结论:</h1><blockquote class="lu lv lw"><p id="c73e" class="if ig lx ih b ii ij ik il im in io ip ly ir is it lz iv iw ix ma iz ja jb jc hb bi translated">if __name__ == "__main__ ":</p></blockquote><p id="bbae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">检查模块是否正在导入。</p><p id="8098" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">只有当代码直接运行时，才会执行 if 条件中的代码。</p></div></div>    
</body>
</html>