<html>
<head>
<title>Exploring MongoDB</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索MongoDB</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/exploring-mongodb-80635e2382a8?source=collection_archive---------18-----------------------#2020-04-01">https://medium.com/analytics-vidhya/exploring-mongodb-80635e2382a8?source=collection_archive---------18-----------------------#2020-04-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f405" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据是新时代的燃料——如果我没错的话，你可能已经见证了数据的力量，以及我们在生活中遇到数据的频率。利用大范围数据、资源使用、从中收集的见解的需求以及联网的必要性推动我们采用各种各样的数据库解决方案。</p><p id="8b23" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们今天遇到的数据最好是非结构化的。这导致了非SQL数据库解决方案的革命。现在，如果你尝试市场，你可能会遇到数百个这样的解决方案来适应你的问题。现在让我们打开MongoDB的大门，它是最流行和最广泛采用的非SQL解决方案之一。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/dc11aeaa5c089f99cb2f3afda4509176.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fl_ySpJQeoebfcDbBNLsIQ.png"/></div></div></figure><blockquote class="jp"><p id="1105" class="jq jr hi bd js jt ju jv jw jx jy jc dx translated">作为一个程序员，你用对象来思考。现在您的数据库也是如此。</p></blockquote><p id="bb29" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">MongoDB官方文档中的这个非常简单明了，值得注意。</p><p id="e79f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">深入到他们的主页你可以找到这个定义，</p><blockquote class="ke kf kg"><p id="e7dc" class="if ig kh ih b ii ij ik il im in io ip ki ir is it kj iv iw ix kk iz ja jb jc hb bi translated">MongoDB是一个通用的、基于文档的分布式数据库，为现代应用程序开发人员和云时代而构建。</p></blockquote><p id="3582" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">理论讲够了，让我们用一个用例直观地体验一下MongoDB的基础知识，</p><p id="4fc9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">更有意义、更相关、更有趣的用例应该是我们正在目睹的现在的<strong class="ih hj">新冠肺炎·疫情</strong>。让我们使用MongoDB探索一些关于新冠肺炎的有用见解，并发现当我们处理大量非结构化数据时，这些解决方案是如何脱颖而出的。</p><p id="dbcd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意</strong>:我确实假设你的机器上已经安装了MongoDB，我们可以开始了。</p><p id="82ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将坚持绝对基础，因此我们将通过Mongo shell处理数据。我们不会与任何实际的后端交互，比如node或python，我们可能会在即将发布的帖子中涉及到。</p><p id="0c47" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">确保您的MongoDB服务器正在运行，并使用命令启动shell，</p><blockquote class="ke kf kg"><p id="92e6" class="if ig kh ih b ii ij ik il im in io ip ki ir is it kj iv iw ix kk iz ja jb jc hb bi translated">蒙戈</p></blockquote><p id="f7cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您注意到一个类似这样的终端屏幕，您可以开始了，只要确保(&gt;)箭头指向，</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kl"><img src="../Images/b015f8a2821bdf862529eb3d2485b558.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lXMJvsvyxrir7gwr7tOttg.png"/></div></div></figure><p id="6b48" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">MongoDB是一个文档数据库，这意味着它将数据存储在类似JSON的文档中。您更有可能经常遇到这种数据，MongoDB社区认为这是考虑数据的最自然的方式，比传统的行/列模型更具表现力和功能。</p><p id="b2df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们创建一个数据库(比方说，COVID19-dB)并创建一个新的集合(比方说，covidReports)并根据来自世卫组织的报告存储当前的数字。我们计划几乎每天持续更新收藏。</p><p id="bec5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，让我们使用命令检查可用的数据库，</p><blockquote class="ke kf kg"><p id="335e" class="if ig kh ih b ii ij ik il im in io ip ki ir is it kj iv iw ix kk iz ja jb jc hb bi translated">显示数据库</p></blockquote><p id="e028" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将列出所有可用的数据库，</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es km"><img src="../Images/194631ab2e7c5a1797c3df36efcb439e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*axtH7_gHvBshFAXaZtvUkQ.png"/></div></div></figure><p id="2560" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您注意到可以找到数据库名称以及每个数据库的存储信息，</p><p id="6d6f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们为自己创建一个，</p><blockquote class="ke kf kg"><p id="c756" class="if ig kh ih b ii ij ik il im in io ip ki ir is it kj iv iw ix kk iz ja jb jc hb bi translated">使用COVID19-db —将为我们完成这项工作。</p></blockquote><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kl"><img src="../Images/c4098fcd1a2128e3f99380c30f3ede5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6cuQbC90PEar7AhTgPnsoA.png"/></div></div></figure><p id="06cb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们为通用COVID全球统计数据创建一个新集合，并添加一些数据，</p><p id="76aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意</strong> : MongoDB检查集合是否可用，否则它会在insert上专门为我们创建一个。</p><p id="e03f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设我们的总体报告是这样的，</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kn"><img src="../Images/2c27c7f6f11d304c798de7e564577771.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mGcE2OxsIlc8lHuuPqtEjA.png"/></div></div></figure><p id="b5bd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要将其添加到集合covidReports中，</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ko"><img src="../Images/106ffb7fdb484be02e86a974c98bee98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n5SP5Vjdt_sikeuOCO2jrA.png"/></div></div></figure><p id="acd0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以注意到数据被成功地插入和确认，以验证我们可以使用find和inspect所有可用的集合。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ko"><img src="../Images/4e3a977b0f43d4c399a78f344722b8a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lG1XpWBLljGpFemIG2nD5g.png"/></div></div></figure><p id="f50c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:那里的pretty()只是修饰文档，使其可读性更好。还有一件事是你可以发现MongoDB会自动为文档创建一个唯一的id。</p><p id="165d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，假设我们也需要国别报告。我们可以将它们插入到上一个报告之后的同一个集合中，</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ko"><img src="../Images/53f5a421dff4ac587760689b0033684b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rFCz_4YLN8pbLS_-EdKcdg.png"/></div></div></figure><p id="862b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们仔细观察，这是一个正在插入的数据数组，让我们看看集合是什么样子的，</p><div class="je jf jg jh fd ab cb"><figure class="kp ji kq kr ks kt ku paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/f290a21d2f6cb9b818be6e831dea84ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*r0Lw9Qsu2wr0_NVJVYt0dw.png"/></div></figure><figure class="kp ji kv kr ks kt ku paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/47dee7a8053813388dde297ce4429aed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*_7C8m8BmDm_rgN11Cw--XQ.png"/></div></figure></div><p id="1ac2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们仔细观察这个结果，您会发现在同一个集合中存在两种不同类型的数据(一种是具有不同键值对的总体报告和国别报告)。这被称为非结构化数据，MongoDB完全接受这一点。但是我们应该避免这种用法。为什么？</p><blockquote class="ke kf kg"><p id="74eb" class="if ig kh ih b ii ij ik il im in io ip ki ir is it kj iv iw ix kk iz ja jb jc hb bi translated">因为想象一下，你正在与来自Node.js或PHP等后端的数据进行交互，如果你试图迭代这些数据，你会发现很困难。因此，即使MongoDB是一个无模式的数据库，拥有一个基于我们的用例的模式模型来促进这种检索也是很好的。</p></blockquote><p id="37a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好了，现在我们有了所有需要的数据。</p><p id="b652" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">出于某种原因，让我们说印度计划保持一个单独的集合，以便他们可以独立操作和计划。因此，我们应该从这个集合中删除它们。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ko"><img src="../Images/118c997e8744c35eda7696dab1a53a98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B0FON6AxASLNs44JVuh2kA.png"/></div></div></figure><p id="c182" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">世界各国领导人也希望知道危重病例的数量，以便他们能够更多地关注他们的福利，并据此开展工作。要更新，</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ko"><img src="../Images/3f80e805365d6bbb0f4828e2c07a4cf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NlTaxy5ZwX2hzJ4dNoua_Q.png"/></div></div></figure><p id="dec8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们验证事情是否按要求进行，</p><div class="je jf jg jh fd ab cb"><figure class="kp ji kw kr ks kt ku paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/76a472c1730ba271652c05e55fc5aa4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*xbEpuI11fBWt4rmP9lKkRg.png"/></div></figure><figure class="kp ji kx kr ks kt ku paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/687794170621c19c928fd05a1e6a3959.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*JCKOPr2hN5GLIO0vf4zvQw.png"/></div></figure></div><p id="61c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，如果您注意到这里，我们会看到印度已被删除，关于关键病例的新的附加信息也已更新。万岁！</p><p id="7201" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，假设我们需要将所有满足死亡人数大于2000这一条件的国家和总体报告状态标记为关键，我们如何实现这一点？</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ko"><img src="../Images/b1d1c8df90df8019507e31f161dfdf5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rbb2Dun9qEbEJhrHQN5mOQ.png"/></div></div></figure><p id="ff40" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们的例子中，所有四个文档都满足条件，因此都得到更新。</p><blockquote class="ke kf kg"><p id="f85d" class="if ig kh ih b ii ij ik il im in io ip ki ir is it kj iv iw ix kk iz ja jb jc hb bi translated">MongoDB的一个独特特性是嵌入式文档。这是任何其他数据库都找不到的。因此MongoDB如此受欢迎和广泛使用。</p></blockquote><p id="de40" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这意味着您可以在其他文档中嵌入任何级别的文档。</p><blockquote class="ke kf kg"><p id="fa33" class="if ig kh ih b ii ij ik il im in io ip ki ir is it kj iv iw ix kk iz ja jb jc hb bi translated">MongoDB最多支持100层嵌套(但是最好不要超过2、3层)</p><p id="8239" class="if ig kh ih b ii ij ik il im in io ip ki ir is it kj iv iw ix kk iz ja jb jc hb bi translated">它方便我们存储最大16MB，这是相当合理的，因为我们将只存储键值对，没有那么重。</p></blockquote><p id="44c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们来看看它的运行情况。每个国家在不同的地方都有自己的检测和治疗中心。它应该包括诸如他们可以容纳的病人总数、帮助热线号码、地址信息等信息。我们如何嵌入这样的数据，</p><p id="f55a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了简单起见，让我们只嵌入美国的数据，因为他们处于最危急的状态，因此对他们非常有帮助。</p><p id="5a49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以更新类似的东西，</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ko"><img src="../Images/384b3f805b6130f348cb107ac02695bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TohdE5qzXM8pgLi8DBSlgw.png"/></div></div></figure><p id="530c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您执行find并查看数据现在的样子，</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ko"><img src="../Images/65c31a2c3eb298ef58e281fbefc2fcfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5k_6pOq6MboMtwJpCETjtw.png"/></div></div></figure><p id="1980" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这样，如果需要，您可以嵌入任何级别的数据。</p><p id="46b7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除此之外，我只是希望触及一些事情，但肯定不是深入的，因为我们决定坚持最基本的，对不对？所以让我看一下它们，</p><p id="795e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在使用MongoDB时，可以有这么多种数据类型，</p><blockquote class="ke kf kg"><p id="756b" class="if ig kh ih b ii ij ik il im in io ip ki ir is it kj iv iw ix kk iz ja jb jc hb bi translated">text<br/>boolean<br/>number——整数、长整型、十进制<br/>objectId——将包含对象创建时的时间戳<br/>iso date——用于在MongoDB <br/>嵌入式文档中存储日期和时间的日期格式——可以针对一个键<br/>数组存储一个完整的文档——可以为一个键存储多个文档或多个嵌套文档</p></blockquote><p id="d47b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您还可以像任何其他数据库一样在数据之间建立某种关系，</p><ul class=""><li id="b653" class="ky kz hi ih b ii ij im in iq la iu lb iy lc jc ld le lf lg bi translated">一对一</li><li id="7de3" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">一对多</li><li id="78d5" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">多对多</li></ul><p id="1578" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还有更多的内容要介绍，让我们把这些实验转移到其他未来的帖子中吧。我希望您在使用MongoDB的过程中获得了一些乐趣，如果有什么地方可以做得更好，请告诉我😄</p><p id="74d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">问候，<br/>玛利亚潘S，<br/>电子邮件:<strong class="ih hj">mariappangameo@gmail.com</strong></p></div></div>    
</body>
</html>