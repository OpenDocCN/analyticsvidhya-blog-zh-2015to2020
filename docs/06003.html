<html>
<head>
<title>Predicting Song Popularity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">预测歌曲流行度</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/predicting-song-popularity-71bc3b067237?source=collection_archive---------9-----------------------#2020-05-08">https://medium.com/analytics-vidhya/predicting-song-popularity-71bc3b067237?source=collection_archive---------9-----------------------#2020-05-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="df7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用Spotify歌曲数据的线性回归项目</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/3b7a22265cb322fb650b9903a9e1d9b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aTevcUMzMbxoBxE8"/></div></div></figure><p id="0431" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个项目的想法是我最近在参加了一个Zoom quarantine fun之后想到的——一个Zoom便利音乐支架。一周前，每个参与者都被要求提名四首他们认为小组不知道但会喜欢的歌曲。所有的参与者花了一周的时间来听这些选择，并为每一组歌曲的投票做准备。剧透:我的歌没有走多远——那些我非常确定的歌，我自己一遍又一遍地听。我失败的选择让我试图理解歌曲的受欢迎程度是否可以预测，以及预测结果是什么样的。于是我开始寻求建立一个歌曲流行度的预测模型…</p></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h1 id="169a" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">数据集</h1><p id="352e" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">我开始从Kaggle获取包含2000首歌曲数据的Spotify <a class="ae la" href="https://www.kaggle.com/iamsumat/spotify-top-2000s-mega-dataset" rel="noopener ugc nofollow" target="_blank">数据集</a>。它包括我的目标变量，每首歌的流行度分数。它还包括我的大部分解释变量——音频特征，如BPM、效价、响度和可跳舞性，以及更一般的特征，如流派、标题、艺术家和发行年份。我对我所有可能的功能都很满意，但作为一个狂热的Spotify用户，我知道Spotify会记录每个艺术家的粉丝数。我觉得这可以大大增加我对歌曲流行度的预测，所以我使用python向公共Spotify API发出API请求，以收集我所有歌曲的计数。</p><p id="4749" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我合并了艺术家姓名的两个数据集，并开始使用熊猫清理建模数据。我的清洁要点是:</p><ul class=""><li id="18da" class="lb lc hi ih b ii ij im in iq ld iu le iy lf jc lg lh li lj bi translated">为追随者计数分配所有nan(我的API请求大多成功，但我不得不手动查找并在少数情况下硬编码)</li><li id="b808" class="lb lc hi ih b ii lk im ll iq lm iu ln iy lo jc lg lh li lj bi translated">将190种“独特”类型整合到30种左右</li><li id="8004" class="lb lc hi ih b ii lk im ll iq lm iu ln iy lo jc lg lh li lj bi translated">为每个流派创建虚拟变量并删除原始流派列</li><li id="3f74" class="lb lc hi ih b ii lk im ll iq lm iu ln iy lo jc lg lh li lj bi translated">删除标题和艺术家列</li><li id="3db6" class="lb lc hi ih b ii lk im ll iq lm iu ln iy lo jc lg lh li lj bi translated">为每个标题中的总字数创建一个新功能(我认为这可能会有影响)</li><li id="bab9" class="lb lc hi ih b ii lk im ll iq lm iu ln iy lo jc lg lh li lj bi translated">创建一个新功能来代替年份，“发布后的年份”</li></ul><h1 id="11d7" class="jx jy hi bd jz ka lp kc kd ke lq kg kh ki lr kk kl km ls ko kp kq lt ks kt ku bi translated">EDA和统计测试</h1><p id="42a2" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">我的过程的下一步是利用探索性数据分析和统计测试来进一步了解我的数据集。我用matplotlib，seaborn和pandas做EDA。对于统计测试，我使用了scipy和statsmodels。</p><p id="f6b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在开始建模之前，我的目标是更深入地理解我的目标和特征变量之间的关系，以及更好地理解我的特征是如何相互关联的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lu"><img src="../Images/96b52d8628c3531599b531bbe819ea76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C7IEEisxiQR8sepe-jRzhQ.png"/></div></div><figcaption class="lv lw et er es lx ly bd b be z dx translated">我所有变量的相关热图，用Seaborn绘制。</figcaption></figure><p id="ccb3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如你从上面的热图中看到的，我的相关性在各个方面都很低。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lz"><img src="../Images/2e5404352b2d0e0e1dff14bc52aaf5b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*KWSTOpT1UfydlrE_dblBCw.png"/></div><figcaption class="lv lw et er es lx ly bd b be z dx translated">展示不同特征和我的目标变量之间关系的散点图。</figcaption></figure><p id="a547" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如上所示，我的每个特征和目标变量之间的关系在很大程度上是非线性的。我开始怀疑我需要转换我的变量，创造互动来处理非线性关系和低相关性。</p><h1 id="ebb1" class="jx jy hi bd jz ka lp kc kd ke lq kg kh ki lr kk kl km ls ko kp kq lt ks kt ku bi translated">特征工程—多项式变换</h1><p id="de0c" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">在我的EDA和运行基线线性回归模型后，我对我所有的歌曲音频特征应用了二次多项式变换。这创造了不同歌曲元素之间的互动，事后看来，这真的很有意义，因为它是组成歌曲的元素的组合。一首歌绝不仅仅是一个音频特征。</p><h1 id="845e" class="jx jy hi bd jz ka lp kc kd ke lq kg kh ki lr kk kl km ls ko kp kq lt ks kt ku bi translated">建模</h1><p id="1de6" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">我使用statsmodels和scikit-learn训练和测试了线性回归模型。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ma"><img src="../Images/7e079a4e6b84c208e6637c2cf33bfd0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-5xD3Oen8ui7LVfvBV4K8w.png"/></div></div><figcaption class="lv lw et er es lx ly bd b be z dx translated">我的建模过程和缩小结果的快照。</figcaption></figure><p id="7f44" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于我的第一个模型，我使用了一个看起来与流行度最相关的特征，艺术家追随者数量。我认为这个特性对受欢迎程度的影响最大。但是正如你在上面看到的，R平方值为0.09，这不是很有见地。</p><p id="69eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我运行的第二个模型使用了我所有的原始特征以及通过多项式变换创建的所有交互特征。它的表现明显更好。但是，由于85个要素与我的2，000个数据集的比例，我知道我需要减少我的要素，只包括那些真正有影响的要素，以避免多重共线性和过度拟合。</p><p id="2665" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在测试了一些不同的选择方法，如RFECV，VIF和拉索。我的利用套索要素选择的模型表现最好，R平方值为0.28，我的解释变量缩小到34。</p><h1 id="f935" class="jx jy hi bd jz ka lp kc kd ke lq kg kh ki lr kk kl km ls ko kp kq lt ks kt ku bi translated">结论</h1><p id="1abe" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">我的最终模型并不像我希望的那样具有预测性，只能解释歌曲流行度变化量的28%。然而，在分析了我的系数之后，有几点需要注意。以下特征对受欢迎程度有最积极和最消极的影响。</p><p id="f29a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最积极的:</p><ul class=""><li id="003e" class="lb lc hi ih b ii ij im in iq ld iu le iy lf jc lg lh li lj bi translated">自发布以来的年数</li><li id="a3e5" class="lb lc hi ih b ii lk im ll iq lm iu ln iy lo jc lg lh li lj bi translated">艺术家追随者计数</li><li id="f4e1" class="lb lc hi ih b ii lk im ll iq lm iu ln iy lo jc lg lh li lj bi translated">可跳舞性</li></ul><p id="d3a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最负面:</p><ul class=""><li id="d477" class="lb lc hi ih b ii ij im in iq ld iu le iy lf jc lg lh li lj bi translated">独立流派</li><li id="1d86" class="lb lc hi ih b ii lk im ll iq lm iu ln iy lo jc lg lh li lj bi translated">声音和语音</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mb"><img src="../Images/7d842c7051e73681353aba38bc5cbb7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uRuv6jWPCqiLK6v6"/></div></div></figure><h1 id="cd94" class="jx jy hi bd jz ka lp kc kd ke lq kg kh ki lr kk kl km ls ko kp kq lt ks kt ku bi translated">最后的想法</h1><p id="7841" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">总的来说，这是一个有趣且颇具洞察力的项目。为了提高我的模型的预测能力，我想进一步尝试多项式变换的次数，以找到更好的交互作用。我还想考虑可以添加到我的数据集中的其他解释变量。此外，探索更适合该数据集的其他类型的模型也是值得的。</p></div></div>    
</body>
</html>