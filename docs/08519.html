<html>
<head>
<title>How to build a simple search engine using Flask</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用 Flask 构建一个简单的搜索引擎</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-build-a-simple-search-engine-using-flask-4f3c01fe80fa?source=collection_archive---------4-----------------------#2020-08-02">https://medium.com/analytics-vidhya/how-to-build-a-simple-search-engine-using-flask-4f3c01fe80fa?source=collection_archive---------4-----------------------#2020-08-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="955c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大家好。这是我第一次在媒体上写作。我在这里要做的是，我将写一系列文章来讨论如何建立一个基于电子表格的搜索引擎，该引擎接受用户输入，并使用 Flask 和其他库返回 csv、xlxs 文件格式的结果。在这篇文章中，我们将讨论如何起草大图片，以及如何编码我们的主页。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/7de3970311d6e6e5dcafd3376967bc20.png" data-original-src="https://miro.medium.com/v2/resize:fit:876/format:webp/1*0G5zu7CnXdMT9pGbYUTQLQ.png"/></div></div></figure><h1 id="80a6" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">搜索引擎使用了以下软件包:</h1><ul class=""><li id="c1e8" class="kn ko hi ih b ii kp im kq iq kr iu ks iy kt jc ku kv kw kx bi translated">烧瓶(用于构建搜索引擎的核心)</li><li id="6b29" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">熊猫(熊猫非常适合处理电子表格)</li><li id="b669" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">Gspread(用于从 google sheet 中检索电子表格)</li></ul><h1 id="558f" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">特种宽银幕电影</h1><p id="fef9" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">第一步是最重要的一步，我们必须知道我们要做什么，以减少重复的步骤。所以在每个项目的开始，我总是先画一个大图，然后决定如何完成这个项目。</p><h1 id="b211" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">搜索引擎需要什么？</h1><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lg"><img src="../Images/ac86b35b604898e962b6f3df9ac3eb9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/1*uehhbjHonbfvdzuawbOo9w.png"/></div></figure><p id="08b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">搜索引擎需要知道用户在搜索什么，所以我们给主页一个输入框，在用户输入查询后，我们必须有一种方法让用户将查询发送回服务器。让我们添加一个提交按钮。”问题已解决</p><h1 id="f05b" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">如何显示结果？</h1><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lh"><img src="../Images/0558275e63a0d96241ca95e1e1c198e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*fWQd0XNGQDPrLup8sGi4OQ.png"/></div></figure><p id="38ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">电子表格只是一个存储信息的表格，但数据形式不同，所以我想把它当作 html 中的表格(使用<table>标签显示结果)。对于一些用户来说，他们希望为某些特定的目的打印出结果，作为程序员，我们的工作不仅仅是创造东西，还必须满足客户的需求。</table></p><h2 id="6771" class="li jq hi bd jr lj lk ll jv lm ln lo jz iq lp lq kd iu lr ls kh iy lt lu kl lv bi translated">这就是我们项目的总体情况，让我们看看我们需要什么</h2><ul class=""><li id="9eb2" class="kn ko hi ih b ii kp im kq iq kr iu ks iy kt jc ku kv kw kx bi translated">供用户键入查询的主页</li><li id="486d" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">显示结果的结果页面</li></ul><blockquote class="lw lx ly"><p id="e556" class="if ig lz ih b ii ij ik il im in io ip ma ir is it mb iv iw ix mc iz ja jb jc hb bi translated"><em class="hi">在起草了前端的样子之后，我们接着决定后端如何操作。</em></p></blockquote><h1 id="bf83" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">搜索引擎是做什么的？</h1><ul class=""><li id="f33f" class="kn ko hi ih b ii kp im kq iq kr iu ks iy kt jc ku kv kw kx bi translated">接受用户输入</li><li id="326d" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">返回结果</li><li id="9cbd" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">打印</li></ul><ol class=""><li id="176a" class="kn ko hi ih b ii ij im in iq md iu me iy mf jc mg kv kw kx bi translated">第一个过程是在主页上完成的，所以我们让主路径(“/”)为我们完成这项工作</li><li id="c4f5" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc mg kv kw kx bi translated">第二个过程是页面在接收到用户输入后返回结果，所以只需让 route("/search ")来处理这个搜索过程。</li><li id="58be" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc mg kv kw kx bi translated">最后一个过程是打印结果，我们添加了一个处理这个任务的路径("/print ")。我稍后会解释为什么我们需要这条路线。</li></ol><p id="1ba2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">毕竟，我们为我们的项目得到了以下文件结构</p><pre class="je jf jg jh fd mh mi mj mk aw ml bi"><span id="8a87" class="li jq hi mi b fi mm mn l mo mp">SearchEngine<br/>|__ templates<br/>|_____ index.html<br/>|_____ search.html<br/>|_____ print.html<br/>|_main.py</span></pre><h1 id="b643" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">让我们开始吧</h1><h1 id="6399" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">index.html</h1><p id="4642" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">它有 2 个元素输入字段和提交按钮的要求，我们将写出如下 index.html</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lg"><img src="../Images/ac86b35b604898e962b6f3df9ac3eb9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/1*uehhbjHonbfvdzuawbOo9w.png"/></div></figure><pre class="je jf jg jh fd mh mi mj mk aw ml bi"><span id="aa09" class="li jq hi mi b fi mm mn l mo mp">&lt;!DOCTYPE html&gt;<br/>&lt;head&gt;<br/>    &lt;title&gt;Simple Search Engine&lt;/title&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/>    &lt;form action="/search" method="POST"&gt;<br/>        {{form.csrf_token}}<br/>        {{form.ids}}<br/>        {{form.submit}}<br/>    &lt;/form&gt;<br/>&lt;/body&gt;</span></pre><p id="fe7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">{{form.csrf_token}}</p><p id="435c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">{{form.ids}}</p><p id="1fd2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">{{form.submit}}</p><blockquote class="lw lx ly"><p id="65d4" class="if ig lz ih b ii ij ik il im in io ip ma ir is it mb iv iw ix mc iz ja jb jc hb bi translated"><em class="hi">这些是来自 WTForm 的元素，因为我们使用 WTForm 作为我们的主表单库。</em></p></blockquote><h1 id="e5df" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">基本形式</h1><p id="87bd" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">继续我们的表单，正如我之前所说的，我将使用 WTForm 来呈现这些表单。根据 WTForm 文档，WTForms 是一个用于 Python web 开发的灵活的表单验证和呈现库。它可以与您选择的任何 web 框架和模板引擎一起工作。”</p><pre class="je jf jg jh fd mh mi mj mk aw ml bi"><span id="bb5c" class="li jq hi mi b fi mm mn l mo mp">class BasicForm(FlaskForm):<br/>    ids = StringField("ID",validators=[DataRequired()])<br/>    submit = SubmitField("Submit")</span></pre><p id="f777" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ids 和 submit 是我们的字段名称，它将以格式{"ids "、" values "、" submit "、" Submit"}从浏览器发回。记下这一点很重要，因为稍后我们将使用这种方式从用户那里获得价值。</p><h1 id="2bbe" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">主路径@app.route("/")</h1><pre class="je jf jg jh fd mh mi mj mk aw ml bi"><span id="b724" class="li jq hi mi b fi mm mn l mo mp">@app.route("/",methods =['POST','GET'])<br/>def main():<br/>    form = BasicForm()<br/>    return render_template("index.html",form = form)</span></pre><p id="84c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">decorator route 告诉我们什么样的 URL 应该触发我们的函数(在上面的情况中触发 main()函数)。main 函数初始化 BasicForm 的实例，并将其作为变量传递给 render_template。我们计划将“index.html”作为我们的主页，因此 render_template 必须包含“index.html”。</p><p id="5be3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这就是我们需要的主页添加以下代码，并从命令运行。</p><pre class="je jf jg jh fd mh mi mj mk aw ml bi"><span id="9107" class="li jq hi mi b fi mm mn l mo mp">if __name__ == "__main__":<br/>    app.run(debug=True)</span></pre><p id="f73b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从命令运行</p><pre class="je jf jg jh fd mh mi mj mk aw ml bi"><span id="3057" class="li jq hi mi b fi mm mn l mo mp">python main.py</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mq"><img src="../Images/a6903976d611551e6edc3a1acc67006d.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*TjdllifgHKvDM4TlibqDcw.png"/></div><figcaption class="mr ms et er es mt mu bd b be z dx translated">主页</figcaption></figure><p id="2d6c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这就是我们的主页。我会让这篇文章作为我们系列的第一部分结束，因为仍然有很多事情要谈，如果我只是写下所有的东西，然后在一篇文章中发布，读者很容易感到无聊。在接下来的几天里，我会尽我所能完成我们的系列，并与你们分享。第二部分将在 3 天后发布。如果我的文章有任何让你们厌烦的错误，请留下评论让我知道。感谢阅读</p></div></div>    
</body>
</html>