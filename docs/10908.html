<html>
<head>
<title>Python Iterators Vs Iterables Vs Generators</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 迭代器 Vs Iterables Vs 生成器</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/python-iterators-vs-iterables-vs-generators-e15b9403292e?source=collection_archive---------1-----------------------#2020-11-08">https://medium.com/analytics-vidhya/python-iterators-vs-iterables-vs-generators-e15b9403292e?source=collection_archive---------1-----------------------#2020-11-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="5472" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个三元组是 Python 编程中最令人困惑的事情之一，也是面试中被问得最多的问题之一。让我们一个一个地详细澄清这个困惑:—</p><p id="a47c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">迭代器</strong></p><p id="9078" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">迭代器是包含可数个值的对象。<br/>从技术上讲，在 Python 中，迭代器是实现迭代器协议的对象，迭代器协议由 __iter__()和 __next__()方法组成。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="0523" class="jm jn hi ji b fi jo jp l jq jr"><br/><strong class="ji hj">iter_obj=iter([3,4,5])</strong><br/>This creates an iterator.<br/><br/><strong class="ji hj">next(iter_obj)</strong><br/><br/>This return the first element i.e 3<br/><br/><strong class="ji hj">next(iter_obj)</strong><br/><br/>This returns the next element i.e 4 and so on.</span></pre><p id="fe7f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个如何创建你自己的迭代器的例子</p><p id="36f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们创建一个一直数到 10 的迭代器。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="4c1a" class="jm jn hi ji b fi jo jp l jq jr">class MyNumbers:<br/> def __iter__(self):<br/> self.a = 1<br/> return self</span><span id="bbb6" class="jm jn hi ji b fi js jp l jq jr">def __next__(self):<br/> if self.a &lt;= 10:<br/> x = self.a<br/> self.a += 1<br/> return x<br/> else:<br/> raise StopIteration</span><span id="f38e" class="jm jn hi ji b fi js jp l jq jr">myclass = MyNumbers()<br/>myiter = iter(myclass)</span><span id="0958" class="jm jn hi ji b fi js jp l jq jr">for x in myiter:<br/> print(x)</span></pre><p id="258b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">条目</strong></p><p id="8add" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">列表、元组、字典和集合都是可迭代的对象。它们是可迭代的容器，你可以从中获得迭代器。所有这些对象都有一个 iter()方法，用于获取迭代器。<br/>示例:-</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="dad4" class="jm jn hi ji b fi jo jp l jq jr">mytuple = (“red”, “blue”, “green”)<br/>myit = iter(mytuple)</span><span id="bd50" class="jm jn hi ji b fi js jp l jq jr">print(next(myit))<br/><br/>This will return red.<br/><br/>print(next(myit))<br/><br/>This will return blue.<br/><br/>print(next(myit))<br/><br/>This will return green.</span></pre><p id="5285" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里 mytuple 是可迭代的，myit 是迭代器。</p><p id="a4bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们来见见最后一位嘉宾</p><p id="a911" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">生成器</strong> <br/>一个 python 生成器函数借给我们一个 python 迭代的值序列。<br/>让我们实现一个生成器:-</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="dd24" class="jm jn hi ji b fi jo jp l jq jr">def even(x):<br/> while(x!=0):<br/> if x%2==0:<br/> yield x<br/> x-=1<br/> for i in even(8):<br/> print(i)<br/><br/>The output is:-<br/>8<br/>6<br/>4<br/>2</span></pre><p id="d6aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从上面的例子中，您一定已经看到了生成器和迭代器之间的一些显著差异。让我们来讨论一下</p><ol class=""><li id="98aa" class="ka kb hi ih b ii ij im in iq kc iu kd iy ke jc kf kg kh ki bi translated">我们使用一个函数来创建生成器。但是在用 python 创建迭代器时，我们使用了 iter()和 next()函数。</li><li id="6828" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated">python 中的生成器利用了‘yield’关键字。python 迭代器不会。</li><li id="1352" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated">每次‘yield’暂停 Python 中的循环时，Python generator 都会保存局部变量的状态。迭代器不使用局部变量，它只需要 iterable 来迭代。</li><li id="5767" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated">一个生成器可以有任意数量的“yield”语句。</li><li id="852d" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated">您可以使用 python 类实现自己的迭代器；在 python 中，生成器不需要类。</li><li id="4fc8" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated">要编写 python 生成器，可以使用 Python 函数或 comprehension。但是对于迭代器，必须使用 iter()和 next()函数。</li></ol><p id="73b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">现在让我们讨论生成器和迭代器的优缺点:- </strong></p><ol class=""><li id="82b5" class="ka kb hi ih b ii ij im in iq kc iu kd iy ke jc kf kg kh ki bi translated">生成器对于编写快速而紧凑的代码非常有效。这是 Python 迭代器的一个优势。它们也比自定义迭代器更容易编码。</li><li id="f38b" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated">Python 迭代器更节省内存。</li></ol><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="04dd" class="jm jn hi ji b fi jo jp l jq jr"><br/><strong class="ji hj">def</strong> func():</span><span id="41a3" class="jm jn hi ji b fi js jp l jq jr">i=1</span><span id="3b97" class="jm jn hi ji b fi js jp l jq jr"><strong class="ji hj">while</strong> i&gt;0:</span><span id="e2b1" class="jm jn hi ji b fi js jp l jq jr">yield i</span><span id="65f2" class="jm jn hi ji b fi js jp l jq jr">i-=1<br/><strong class="ji hj">for</strong> i <strong class="ji hj">in</strong> func():<br/>    print(i)</span><span id="1b9c" class="jm jn hi ji b fi js jp l jq jr">func().__sizeof__()<br/></span></pre><p id="d1c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将为生成器返回 32。</p><p id="6aaf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是对于迭代器，比如:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="1942" class="jm jn hi ji b fi jo jp l jq jr">iter([1,2]).__sizeof__()<br/></span></pre><p id="1d7b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们得到 16。</p><p id="c485" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢阅读。如果你从博客中学到了什么，请👏。</p></div></div>    
</body>
</html>