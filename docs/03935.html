<html>
<head>
<title>Object Detection in a few lines of code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">几行代码中的对象检测</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/object-detection-in-a-few-lines-of-code-40640fdb2c46?source=collection_archive---------8-----------------------#2020-02-26">https://medium.com/analytics-vidhya/object-detection-in-a-few-lines-of-code-40640fdb2c46?source=collection_archive---------8-----------------------#2020-02-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/5923d589411fcd74e71757025073321e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s5QRoq4JVQVFB_ZPcBxOOA.jpeg"/></div></div></figure><p id="afde" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">目标检测是计算机视觉的重要组成部分。这一事实可以在其众多应用中看到，如自动驾驶汽车的视觉、手机中的人脸检测、野生动物保护中的物种计数和跟踪等。然而，建立一个目标检测模型并不容易。对于经验丰富的机器学习工程师来说，这意味着使用Tensorflow对象检测API或其他框架的类似工具的几行代码。</p><p id="b50b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">另一方面，您也可以通过迁移学习将几个预训练模型(如YOLOV3)中的一个用于您的自定义任务。还有其他对象检测平台提供商，如CustomVision.ai、谷歌的Cloud AutoML等，它们为大多数业务需求提供易于使用的一键式解决方案。</p><h1 id="9dc1" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">探测器；新来的孩子</h1><p id="6695" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">然而，在这个领域有一个新的产物，它既开源又易于用于物体检测。这个新来的孩子叫做<a class="ae kr" href="https://detecto.readthedocs.io/en/latest/#" rel="noopener ugc nofollow" target="_blank">侦探</a>。网站上的以下总结清楚地定义了Detecto是什么；</p><blockquote class="ks kt ku"><p id="a896" class="iq ir kv is b it iu iv iw ix iy iz ja kw jc jd je kx jg jh ji ky jk jl jm jn hb bi translated"><a class="ae kr" href="https://github.com/alankbi/detecto" rel="noopener ugc nofollow" target="_blank">“Detecto</a>是一个Python包，允许你只用5行代码就能构建全功能的计算机视觉和物体检测模型。对静态图像和视频的推断、对自定义数据集的迁移学习以及将模型序列化为文件只是Detecto的几个功能”</p></blockquote><p id="e510" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">检测有很酷的功能，值得讨论。因此，在这篇文章和随后的几篇文章中，我们将使用<strong class="is hj"> Detecto </strong>用几行代码构建一个简单的对象检测器，并使用<a class="ae kr" href="http://streamlit.io/" rel="noopener ugc nofollow" target="_blank"><strong class="is hj">Streamlit</strong></a><strong class="is hj"/>框架部署它。</p><p id="e118" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">不过，在我们开始之前，让我们定义一下什么是对象检测。对象检测涉及图像(和视频)中对象的定位和分类。这意味着它帮助我们定位一个物体的确切位置，并告诉我们这个物体属于哪一类。当然，它还可以对图像/视频中的多个对象进行定位和分类。听起来很酷，对吧？我知道！</p><h1 id="1f97" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">安装依赖项</h1><p id="9add" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">让我们首先创建一个名为object-detector的文件夹(您可以随意命名)。接下来，使用<strong class="is hj"> python3 venv </strong>在文件夹中创建一个虚拟环境，命令如下</p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="8b70" class="li jp hi le b fi lj lk l ll lm">$ python3 -m venv detecto</span></pre><p id="024e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，使用以下命令激活您的虚拟环境</p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="30ff" class="li jp hi le b fi lj lk l ll lm">$ source detecto/bin/activate # if you are running on Linux or Mac</span><span id="fa6b" class="li jp hi le b fi ln lk l ll lm">$ detecto\Scripts\activate # for windows users</span></pre><p id="2cb2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在您已经在虚拟环境中，使用以下命令安装您的依赖项</p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="8f02" class="li jp hi le b fi lj lk l ll lm">pip install detecto</span><span id="c49d" class="li jp hi le b fi ln lk l ll lm">pip install streamlit</span><span id="e597" class="li jp hi le b fi ln lk l ll lm">pip install matplotlib</span><span id="5f77" class="li jp hi le b fi ln lk l ll lm">pip install pillow<br/>​</span><span id="8ce3" class="li jp hi le b fi ln lk l ll lm"># You can combine all that by running:</span><span id="f56d" class="li jp hi le b fi ln lk l ll lm">pip install detecto streamlit matplotlib pillow</span></pre><h1 id="c1e9" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">创建我们的模块和UI</h1><p id="0bbc" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">现在已经成功地安装了我们的依赖项，让我们开始主要的工作。首先，创建一个名为app.py的文件来保存应用程序的界面。然后添加以下代码；</p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="ccfa" class="li jp hi le b fi lj lk l ll lm">import streamlit as st</span><span id="0a13" class="li jp hi le b fi ln lk l ll lm">from PIL import Image</span><span id="25a9" class="li jp hi le b fi ln lk l ll lm">from predict import cat_vs_dog, detecto_m</span><span id="ccf5" class="li jp hi le b fi ln lk l ll lm">import matplotlib.pyplot as plt</span><span id="354e" class="li jp hi le b fi ln lk l ll lm">​</span><span id="3401" class="li jp hi le b fi ln lk l ll lm">def main():</span><span id="d5dd" class="li jp hi le b fi ln lk l ll lm">     st.markdown(“# Object Dector”)</span><span id="2dce" class="li jp hi le b fi ln lk l ll lm">     st.markdown(“#### A Simple Object detector using Detecto”)</span><span id="b41f" class="li jp hi le b fi ln lk l ll lm">     st.markdown(“ — -”)</span><span id="daee" class="li jp hi le b fi ln lk l ll lm">     # getting the image from the user</span><span id="a06f" class="li jp hi le b fi ln lk l ll lm">     uploaded_file = st.file_uploader(“Choose an pic…”, type=”jpg”)</span><span id="047f" class="li jp hi le b fi ln lk l ll lm">     if uploaded_file is not None:</span><span id="507f" class="li jp hi le b fi ln lk l ll lm">          st.image(uploaded_file, caption=’Your Image.’,         use_column_width=True)</span><span id="7765" class="li jp hi le b fi ln lk l ll lm">          st.success(“#### And taraaaaa!”)</span><span id="6657" class="li jp hi le b fi ln lk l ll lm">          result = detecto_m(uploaded_file) # passing image to our function</span><span id="7294" class="li jp hi le b fi ln lk l ll lm">         result = plt.plot() # plotting the result</span><span id="2dbc" class="li jp hi le b fi ln lk l ll lm">         st.pyplot(result)</span><span id="d655" class="li jp hi le b fi ln lk l ll lm">         st.balloons() #some fun ballons</span><span id="9371" class="li jp hi le b fi ln lk l ll lm"># to run our module</span><span id="5a0c" class="li jp hi le b fi ln lk l ll lm">if __name__==’__main__’:</span><span id="12d3" class="li jp hi le b fi ln lk l ll lm">         main()</span></pre><p id="b086" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi">​</p><p id="a447" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面的代码从导入我们将使用的库开始。Streamlit有许多很酷的预建UI组件，我们可以轻松地在我们的应用程序中使用，如文件上传器、markdown输出、酷气球和用于显示图像的图像组件。</p><h1 id="6905" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">创造我们的人造大脑</h1><p id="4a7f" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">我们还从predict.py模块中导入了一个名为detecto_m()的函数。现在让我们创建这个模块和函数。</p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="44ab" class="li jp hi le b fi lj lk l ll lm"># the imports<br/>from detecto import core, utils, visualize​</span><span id="aea6" class="li jp hi le b fi ln lk l ll lm">def detecto_m(pic):</span><span id="04e4" class="li jp hi le b fi ln lk l ll lm">       image = utils.read_image(pic)</span><span id="f5ce" class="li jp hi le b fi ln lk l ll lm">       model = core.Model()</span><span id="b015" class="li jp hi le b fi ln lk l ll lm">       labels, boxes, scores = model.predict_top(image)</span><span id="6bbe" class="li jp hi le b fi ln lk l ll lm">       result = visualize.show_labeled_image(image, boxes, labels)</span><span id="a772" class="li jp hi le b fi ln lk l ll lm">       return result</span></pre><p id="32e5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在短短5行代码中，我们有一个非常光滑的对象检测功能，能够检测80个对象类。多酷啊。很棒吧？</p><h1 id="e064" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">运行应用程序</h1><p id="b323" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">我们可以在终端中使用以下命令运行我们的应用程序</p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="d076" class="li jp hi le b fi lj lk l ll lm">$ streamlit run app.py</span></pre><p id="235b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">和taraaaa您将在默认浏览器中看到类似下面的截图。</p><figure class="kz la lb lc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/ab4dd62c87c35102715a6419ff8f5ad4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vzRn4BauLqycxrJmnCRitg.png"/></div></div></figure><p id="c3d9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Detecto是相当光滑，因此值得你的注意。让我们看看你用这个令人敬畏的包裹建造了什么。</p></div></div>    
</body>
</html>