<html>
<head>
<title>ML Model tracking and accountability made easy with MLFLOW</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MLFLOW简化了ML模型跟踪和问责</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/ml-model-tracking-and-accountability-made-easy-with-mlflow-4e2ebf3e457a?source=collection_archive---------17-----------------------#2020-05-30">https://medium.com/analytics-vidhya/ml-model-tracking-and-accountability-made-easy-with-mlflow-4e2ebf3e457a?source=collection_archive---------17-----------------------#2020-05-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="c201" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据科学项目中的一个常见问题是模型实验的跟踪。比方说，一个月前，模型在某些参数和数据的某些版本下运行良好，而突然您得到通知，模型运行不佳。</p><p id="25bd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们可能不得不回去，重新访问这些步骤，你可能已经做了5个月。我同意人们可能会检查在git中进行的最新实验，而不是进行的每一次跟踪</p><p id="96c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> MLFLOW前来救援！！！！</strong></p><p id="5abe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">什么是MLFOW？</p><p id="dd8e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">MLFLOW是一个开源项目，用于跟踪ML端到端的生命周期项目管理。</p><p id="c650" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">物流的组成</strong></p><p id="b4cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">MLFlow由4个组件组成</p><ul class=""><li id="106f" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">跟踪实验以记录和比较参数和结果(<a class="ae jm" href="https://www.mlflow.org/docs/latest/tracking.html#tracking" rel="noopener ugc nofollow" target="_blank"> MLflow Tracking </a>)。</li><li id="e948" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">以可重用、可复制的形式包装ML代码，以便与其他数据科学家共享或转移到生产中(<a class="ae jm" href="https://www.mlflow.org/docs/latest/projects.html#projects" rel="noopener ugc nofollow" target="_blank"> MLflow项目</a>)。</li><li id="10d9" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">从各种ML库中管理和部署模型到各种模型服务和推理平台(<a class="ae jm" href="https://www.mlflow.org/docs/latest/models.html#models" rel="noopener ugc nofollow" target="_blank"> MLflow模型</a>)。</li><li id="1628" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated">提供一个中央模型库来协作管理MLflow模型的整个生命周期，包括模型版本化、阶段转换和注释(<a class="ae jm" href="https://www.mlflow.org/docs/latest/model-registry.html#registry" rel="noopener ugc nofollow" target="_blank"> MLflow模型注册中心</a>)。</li></ul><p id="a6d8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">安装MLFLOW </strong></p><p id="3a91" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">mlflow以python包的形式提供，我们可以使用</p><p id="7d81" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> pip安装mlflow </strong></p><p id="1e2b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">物流跟踪入门:</strong></p><p id="b403" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">物流跟踪可分为以下层次</p><ol class=""><li id="fe79" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc js jj jk jl bi translated">实验</li><li id="7b85" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc js jj jk jl bi translated">奔跑</li><li id="4c7a" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc js jj jk jl bi translated">记录参数</li></ol><p id="7b02" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.日志记录指标</p><p id="d24e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.记录工件</p><p id="67da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6.可视化实验和记录人工制品</p><p id="132d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤1:创建物流跟踪客户端</strong></p><p id="d08b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">MLFLOW提供了一个跟踪模块<code class="du jt ju jv jw b"><a class="ae jm" href="https://www.mlflow.org/docs/latest/python_api/mlflow.tracking.html#mlflow.tracking.MlflowClient" rel="noopener ugc nofollow" target="_blank">mlflow.tracking.MlflowClient</a> </code>，我们必须创建一个客户端对象来提供一个有组织的跟踪api</p><figure class="jy jz ka kb fd kc er es paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="er es jx"><img src="../Images/637134252ec5e6baea4ae1c974e07156.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eSEI6DGI-StEj0C-RWf1hQ.png"/></div></div><figcaption class="kj kk et er es kl km bd b be z dx translated">正在创建客户端对象</figcaption></figure><p id="69a0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第二步:创建一个实验</strong></p><p id="5266" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以使用create experiment方法创建一个实验，实验名称将返回一个可用于组织的实验id，mlflow提供了一个搜索选项，我们可以使用这些来查找实验</p><figure class="jy jz ka kb fd kc er es paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="er es kn"><img src="../Images/69b921405bbe05f671de5fcf3594ca26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6LyC1ADxJxcAjr-vi3zwdw.png"/></div></div></figure><p id="9cfd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第三步:创建运行</strong></p><p id="8d40" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以为一个实验创建不同的运行，我们可以创建多个运行，并使用run跟踪实验</p><p id="10c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建运行后，使用log_params和log_metrics创建的所有日志记录都组织在下面</p><figure class="jy jz ka kb fd kc er es paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="er es ko"><img src="../Images/5f00893bd9d19213a01dfbdac95387bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U27KSNywk93EP950sTklAg.png"/></div></div></figure><p id="b397" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第四步:创建辅助功能</strong></p><p id="791d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我正在创建一个简单的逻辑回归，我正在记录参数，并创建一个简单的度量函数来捕获度量</p><figure class="jy jz ka kb fd kc"><div class="bz dy l di"><div class="kp kq l"/></div></figure><p id="65e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第五步:开始运行</strong></p><p id="30f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用-context manager启动运行，并传递上面返回的运行id和实验id</p><p id="9fe7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦我们创建了如上所示的mlflow运行，</p><p id="8c23" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以记录</p><ol class=""><li id="a2b5" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc js jj jk jl bi translated">params模型中使用的超参数</li><li id="f498" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc js jj jk jl bi translated">度量——从上述函数中得出的度量</li><li id="2022" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc js jj jk jl bi translated">工件——用于模型的数据和其他工件</li><li id="96ce" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc js jj jk jl bi translated">记录模型-记录创建的模型，可用于将来的预测</li></ol><figure class="jy jz ka kb fd kc"><div class="bz dy l di"><div class="kp kq l"/></div><figcaption class="kj kk et er es kl km bd b be z dx translated">Mlflow模型</figcaption></figure><p id="470b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第六步:可视化实验</strong></p><p id="62e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过启动mlflow us，我们可以从ui中看到上面记录的数据，如下所示</p><figure class="jy jz ka kb fd kc er es paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="er es kr"><img src="../Images/9012fb55f0f7d137230d7d6bb53e0383.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iw8nRrF9DFDZba4aq8R-Bw.png"/></div></div><figcaption class="kj kk et er es kl km bd b be z dx translated">正在启动MLFlow UI</figcaption></figure><p id="b7f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以使用localhost:5000并单击实验和运行来查看实验结果，我们还可以下载数据</p><figure class="jy jz ka kb fd kc er es paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="er es ks"><img src="../Images/d490f3f138038156353b2b742fcd9421.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1KwcO7nSaySUVMoBQvwunQ.png"/></div></div></figure><p id="e4d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在单击运行时探索参数和模型工件</p><figure class="jy jz ka kb fd kc er es paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="er es kt"><img src="../Images/4cda6de8d8f4059295b5aef36d40a2d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9D3pB6A6_rl_Re6qGaokMw.png"/></div></div><figcaption class="kj kk et er es kl km bd b be z dx translated">运行参数详细信息</figcaption></figure><figure class="jy jz ka kb fd kc er es paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="er es ku"><img src="../Images/4766556e1b34722d6830f288d6212a07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7RgDKmou7iMwSfpOaTjcvg.png"/></div></div><figcaption class="kj kk et er es kl km bd b be z dx translated">史前古器物</figcaption></figure><p id="a665" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结论</p><p id="1eef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">MLFLow是一个很好的工具，用于跟踪MLflow模型和维护在ml flow中进行的实验的责任。</p><p id="71f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">今天就到这里吧！！:)</p><p id="dd26" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Github链接:<a class="ae jm" href="https://github.com/SomanathSankaran/spark_medium/tree/master/spark_csv" rel="noopener ugc nofollow" target="_blank">https://github . com/SomanathSankaran/spark _ medium/tree/master/spark _ CSV</a></p><p id="2aa6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"/></p></div></div>    
</body>
</html>