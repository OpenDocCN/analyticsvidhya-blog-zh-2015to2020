<html>
<head>
<title>Building Spam Message Detector Using Python and Vue JS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python和Vue JS构建垃圾邮件检测器</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/building-spam-message-detector-using-python-and-vue-js-bfeabf044130?source=collection_archive---------23-----------------------#2020-04-13">https://medium.com/analytics-vidhya/building-spam-message-detector-using-python-and-vue-js-bfeabf044130?source=collection_archive---------23-----------------------#2020-04-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/4ee0f49368737a1e1aba3754c28f1cd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9a8qZwT0Y9snGHJf"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">照片由<a class="ae iu" href="https://unsplash.com/@dlanor_s?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">德拉诺尔S </a>在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><p id="49c0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在构建机器学习模型时，我很好奇如何在我们的web应用程序中实现该模型，以便用户可以与之交互。我感到有点困惑，因为我使用Jupyter笔记本来训练和建立模型。我当时就想，我们通过把我Jupyter笔记本里的所有代码复制到Flask或者Django应用上来实现机器学习模型。我必须在每个请求中将所有的数据训练成一个模型，这是非常无效的，并且使请求时间过长。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="0535" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你在谷歌上搜一下怎么做，有很多教程。在做了一些试错游戏后，我明白了如何将我的机器学习模型部署到应用程序中。这是我如何做的一般基本步骤。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ka"><img src="../Images/fd23fe5cb51bc005843ce1aff53a3a35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_5exJCs5miL5BiAwdRUCng.png"/></div></div></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h1 id="0938" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">开发模型</h1><p id="769a" class="pw-post-body-paragraph iv iw hi ix b iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo lh jq jr js hb bi translated">我总是使用Jupyter笔记本来做一些机器学习的事情，因为我觉得用它很舒服。</p><p id="e4b3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，我们导入开发模型时需要的所有包。</p><figure class="kb kc kd ke fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><p id="535c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们进口什么样的包装？</p><ol class=""><li id="7628" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">我正在用熊猫玩数据框。</li><li id="9ba0" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">Re用于删除所有特殊字符时的正则表达式任务。</li><li id="5f07" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">nltk中的停用字词用于清除停用字词任务。</li><li id="dda3" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">nltk的PorterStemmer用于词干分析。</li><li id="c6d2" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">CountVectorizer和TfidfTransformer用于将文本转换为向量，并获得单词的重要性。</li><li id="cfca" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">来自sklearn.naive_bayes的多项式inb用于使用Naive Bayes分类器来训练模型。</li><li id="1c5a" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">评估模型时显示报告。</li><li id="a3f3" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">泡菜保存模型和我们需要的其他东西。</li></ol><p id="1e03" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">导入上述所有包后。我们可以导入用于训练模型的数据，我使用了Kaggle上可用的垃圾邮件数据。</p><div class="ly lz ez fb ma mb"><a href="https://www.kaggle.com/team-ai/spam-text-message-classification" rel="noopener  ugc nofollow" target="_blank"><div class="mc ab dw"><div class="md ab me cl cj mf"><h2 class="bd hj fi z dy mg ea eb mh ed ef hh bi translated">垃圾短信分类</h2><div class="mi l"><h3 class="bd b fi z dy mg ea eb mh ed ef dx translated">让我们用数据科学与恼人的垃圾邮件制造者战斗。</h3></div><div class="mj l"><p class="bd b fp z dy mg ea eb mh ed ef dx translated">www.kaggle.com</p></div></div><div class="mk l"><div class="ml l mm mn mo mk mp io mb"/></div></div></a></div><figure class="kb kc kd ke fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><p id="8960" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">确保您的Jupyter笔记本工作表与CSV文件在同一个文件夹中，如果不在同一个文件夹中，请给出正确的路径。</p><p id="0437" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将CSV文件导入到df变量中。您可以使用df.head()检查数据是否被导入</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div class="er es mq"><img src="../Images/143ed8bd100e8486fddbe4fc8a3ab155.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/format:webp/1*uX-wkglxLEFvqbkxaB1D5A.png"/></div></figure><p id="495d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我做了一个名为preprocess_text的函数，用于删除所有特殊字符，删除所有停用词，并对文本消息数据执行词干提取任务。</p><figure class="kb kc kd ke fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><p id="b7f6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我还在一个名为“标签”的新列中将类别映射为1和0，1表示垃圾邮件，0表示非垃圾邮件。</p><figure class="kb kc kd ke fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><figure class="kb kc kd ke fd ij er es paragraph-image"><div class="er es mr"><img src="../Images/ef97e58566f0192e7b693ed23c18268a.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*TMUWoQd7OPeLRyk59ZnPSA.png"/></div></figure><p id="e6e1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来，我们将我们的消息转换为<em class="ms">词频-逆文档频率(tf-idf)，tf-idf </em>用于对我们消息列中的每个词进行加权，重要与否基于tf-idf算法(阅读更多关于<a class="ae iu" href="http://www.tfidf.com/" rel="noopener ugc nofollow" target="_blank">http://www.tfidf.com/</a>)。</p><figure class="kb kc kd ke fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><p id="8308" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要将消息转换为tf-idf形式，首先，我们将其转换为一个单词包模型(更多信息请访问<a class="ae iu" rel="noopener" href="/greyatom/an-introduction-to-bag-of-words-in-nlp-ac967d43b428">https://medium . com/grey atom/an-introduction-to-bag-of-words-in-NLP-AC 967d 43 b 428</a>)。</p><p id="bda3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，让我们使用tf-idf形式的消息来构建模型。</p><figure class="kb kc kd ke fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><p id="1e30" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后一步，当我们构建模型时，我们使用pickle转储我们的单词包transformer、tf-idf transformer和我们的模型，我们转储/导出所有这些，因为我们希望在应用程序中使用它们，而无需重新训练所有数据来预测一个输入。</p><figure class="kb kc kd ke fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><figure class="kb kc kd ke fd ij er es paragraph-image"><div class="er es mt"><img src="../Images/81ea63ee583fb7cebd2169c3c517e291.png" data-original-src="https://miro.medium.com/v2/resize:fit:838/format:webp/1*1z2ORnPbIFlmjY8SxAQo4A.png"/></div></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h1 id="9675" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">使用Python Flask Web框架开发后端</h1><p id="e174" class="pw-post-body-paragraph iv iw hi ix b iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo lh jq jr js hb bi translated">我用烧瓶是因为它很轻。我认为如果我用Django来为这个教程构建一个简单的后端，那就太过了。</p><p id="042f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是我们的后端代码，你应该先安装flask，并使用pip安装flask_cors。</p><figure class="kb kc kd ke fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><p id="cc6a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在第11–13行有加载或导入我们之前保存的pickle文件的语法。所以我们不需要重新训练模型来得到结果。</p><p id="ca06" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">第31–39行有函数preprocess_text，这是我们在构建模型时使用的相同代码。我们再次使用它，因为我们需要在预测结果之前清理用户输入的文本。</p><p id="684f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在第22–29行有一个函数定义了我们的服务，它从用户输入中获取请求，处理它，预测结果，并以JSON格式发送回前端。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h1 id="1a85" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">使用Vue Javascript框架开发前端</h1><p id="e5ca" class="pw-post-body-paragraph iv iw hi ix b iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo lh jq jr js hb bi translated">现在我们将使用Vue Js为用户输入编写一个简单的web前端。这是代码，你可以复制粘贴并保存为index.html。我是用CDN加载Vue包的，不用担心Vue的安装之类的事情。</p><figure class="kb kc kd ke fd ij"><div class="bz dy l di"><div class="li lj l"/></div></figure><p id="ad00" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面是对上述代码的简单解释</p><ol class=""><li id="18c9" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">Textarea是一个输入我们想要预测的信息的地方。</li><li id="9a55" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">按钮检查将触发checkMessage功能。</li><li id="2a43" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">名为checkMessage的函数将获取消息数据，构建URL并将数据传递到我们的后端。</li><li id="1281" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">我们的后端将用包含预测结果的JSON文件来响应。是代表非垃圾邮件的<a class="ae iu" href="https://gist.github.com/DeaVenditama/16f3048e8c22a1522faa6c033f846952" rel="noopener ugc nofollow" target="_blank">零</a>，还是代表垃圾邮件的<strong class="ix hj">一</strong>。</li><li id="23db" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">根据结果值更新/显示输出。</li></ol></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h1 id="2eca" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated"><strong class="ak">运行应用程序</strong></h1><ol class=""><li id="de72" class="lk ll hi ix b iy ld jc le jg mu jk mv jo mw js lp lq lr ls bi translated">运行我们的flask应用程序。</li></ol><pre class="kb kc kd ke fd mx my mz na aw nb bi"><span id="957a" class="nc kg hi my b fi nd ne l nf ng">$ export FLASK_APP=app.py<br/>$ flask run</span></pre><p id="aa8d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">输出</p><pre class="kb kc kd ke fd mx my mz na aw nb bi"><span id="c2cf" class="nc kg hi my b fi nd ne l nf ng">Serving Flask app "app.py"<br/> * Environment: production<br/>   WARNING: Do not use the development server in a production environment.<br/>   Use a production WSGI server instead.<br/> * Debug mode: off<br/> * Running on <a class="ae iu" href="http://127.0.0.1:5000/" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:5000/</a> (Press CTRL+C to quit)</span></pre><p id="837c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.<strong class="ix hj">在浏览器上打开我们的index.html文件。</strong></p><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nh"><img src="../Images/da74f77adee42fcd1af5d291c8c08e86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C44XGSBdkPQiIF-aeyii2g.png"/></div></div></figure><p id="935a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">用我们想要预测它是否是垃圾邮件的信息填充文本区域，然后点击检查。</p><p id="1b71" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">邮件是垃圾邮件时的结果</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nh"><img src="../Images/fbace270dc0b599f9d2c9e565546851a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A3VvuTS3mKOeotZz0WKJzQ.png"/></div></div></figure><p id="6700" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当邮件不是垃圾邮件时的结果</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nh"><img src="../Images/803d36756c5cccaa53cf5b25430afe1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mXYCWEEb7EKiSwPCu_NcNA.png"/></div></div></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="370b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这就是本教程的全部内容</p><p id="854b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我推荐你在这个链接上阅读更多关于Flask和Vue的内容。</p><ol class=""><li id="9ff4" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">flask(<a class="ae iu" href="https://flask.palletsprojects.com/en/1.1.x/quickstart/#a-minimal-application" rel="noopener ugc nofollow" target="_blank">https://flask . pallets projects . com/en/1.1 . x/quick start/# a-minimal-application</a>)</li><li id="a820" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">威(<a class="ae iu" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank">https://vuejs.org/</a>)</li></ol><p id="8a8c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你想要完整的源代码，你可以看看我的Github</p><div class="ly lz ez fb ma mb"><a href="https://github.com/DeaVenditama/spam_detector_app" rel="noopener  ugc nofollow" target="_blank"><div class="mc ab dw"><div class="md ab me cl cj mf"><h2 class="bd hj fi z dy mg ea eb mh ed ef hh bi translated">DeaVenditama/垃圾邮件检测器应用程序</h2><div class="mi l"><h3 class="bd b fi z dy mg ea eb mh ed ef dx translated">在GitHub上创建一个帐户，为DeaVenditama/spam_detector_app开发做贡献。</h3></div><div class="mj l"><p class="bd b fp z dy mg ea eb mh ed ef dx translated">github.com</p></div></div><div class="mk l"><div class="ni l mm mn mo mk mp io mb"/></div></div></a></div><p id="1eb8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">谢谢你。</p></div></div>    
</body>
</html>