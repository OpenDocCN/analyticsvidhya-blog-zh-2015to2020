<html>
<head>
<title>Implementing Semi, Anti Joins in MySQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在MySQL中实现半连接、反连接</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/implementing-semi-anti-joins-in-mysql-342dd7f3da43?source=collection_archive---------13-----------------------#2020-02-14">https://medium.com/analytics-vidhya/implementing-semi-anti-joins-in-mysql-342dd7f3da43?source=collection_archive---------13-----------------------#2020-02-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="cce5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">SQL连接用于组合和检索RDBMS中多个表的数据。大多数业务目标都可以使用原始连接(Inner、Left、Right、Outer、Cross)来实现，但是有时我们会遇到一些场景，其中一些复杂的操作需要使用连接，比如组合多个表中的数据，但是只从一个表中检索列。在这种情况下，半连接和反连接可以提供帮助。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="37cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">左半连接</strong>表示当在右表中找到匹配记录时，从左表返回记录的半连接。即使对于给定的记录，在正确的表中找到多个匹配，结果也只包含该记录一次。</p><p id="9086" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们借助一个例子来理解这个概念。</p><p id="1f5a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有两个表:<em class="jk">TBL team</em>和<em class="jk">TBL team</em>，它们包含了一批玩家的记录，包括他们的姓名、技能和年龄。两个队都可以选一名队员。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jl"><img src="../Images/0bc67d16680873350ff90aa1d7f40c4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A-trVfvi0ghpDX6R9i8WoA.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">创建表格</figcaption></figure><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kb"><img src="../Images/044414e0b702327f4e822264475432f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*11HJplebk-5PDoAYMEPbfw.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">填充tblTeamA</figcaption></figure><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kc"><img src="../Images/b6acd26e735854ad5a7e1ffb125f793a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UD-8c8CPmaCkghkJ3_GypA.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">填充tblTeamB</figcaption></figure></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="e259" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是一些使用案例:</p><p id="f449" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.找出被两个队选中的队员。<br/> 2。找出只为a队挑选的球员。找出只为b队挑选的队员。</p><p id="857a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，结果应该只包含一个玩家一次，没有必要列出同一个玩家两次(两个表中的行)。</p><blockquote class="kd ke kf"><p id="44b0" class="if ig jk ih b ii ij ik il im in io ip kg ir is it kh iv iw ix ki iz ja jb jc hb bi translated">1.找出被两个队选中的队员。</p></blockquote><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kj"><img src="../Images/e5d253fbec0333bd4a2a05e1863ef034.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*stHp6YiNPskjcwE_5hXXIA.png"/></div></div></figure><p id="5eb7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上述查询中的EXISTS子句用于实现左半连接。该查询将左表中的记录与右表中的记录进行比较。如果找到匹配，则返回左表中的行。</p><blockquote class="kd ke kf"><p id="e3e0" class="if ig jk ih b ii ij ik il im in io ip kg ir is it kh iv iw ix ki iz ja jb jc hb bi translated">2.找出只为a队挑选的队员。</p></blockquote><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kk"><img src="../Images/273cc6edd6c15405dee4d9a22c041ae6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zW2fujC4IG42VnvGJHROdA.png"/></div></div></figure><p id="42e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用NOT with EXISTS子句会排除两个表中的公共记录，因此会返回左表中不存在于右表中的唯一记录。</p><blockquote class="kd ke kf"><p id="fdc8" class="if ig jk ih b ii ij ik il im in io ip kg ir is it kh iv iw ix ki iz ja jb jc hb bi translated">3.找出只为b队挑选的队员。</p></blockquote><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kl"><img src="../Images/d37958d469f12b66647b16156ca6948d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HCh0KqIs-kOAamSxX8xmHA.png"/></div></div></figure><p id="14b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">反连接</strong>也用于在一个表中查找其他表中没有的记录。这里，右连接与WHERE子句相结合来实现反连接。</p><p id="9e75" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">总结</strong></p><p id="c922" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Left Semi或Left Anti可能听起来很奇特，但是它们的实现并不复杂。与基本连接不同，半连接或反连接没有自己的语法，但是可以通过基本连接和一些子句的组合来实现。</p><p id="805a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，我试图保持简单，并希望听到你的意见。</p><p id="7927" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢阅读！</p></div></div>    
</body>
</html>