# 马尔可夫链棒球模型

> 原文：<https://medium.com/analytics-vidhya/markov-chain-baseball-models-31bd52c422d3?source=collection_archive---------10----------------------->

马尔可夫链棒球模型:Sabermetrics 社区的全垒打

在棒球比赛中，分析师可以通过比赛中每半局发生的事件来分解整个比赛。每半局的这些事件可以被建模为有限马尔可夫链，其中在半局中有 24 个离散事件的状态，第 25 个状态标志着半局的结束。这些状态包括所有棒球比赛中的情况，例如无出局、无跑垒员到两出局三跑垒。

从那里，分析师可以使用从每个状态到另一个状态的转移概率来代表每半局发生的事件。使用这些转移概率，分析师可以用计算出的两支球队的预期总得分来执行完整的游戏模拟。马尔可夫链还有效地用于:为管理者提供战略建议，如阵容优化和最佳击球顺序；协助前线办公室评估棒球队的表现，包括特定球员对球队表现的影响，或交易或自由球员签约对名册的影响。

> 我相信你现在一定在想:“我如何建立这些马尔可夫链模型？”

幸运的是，R 和 Python 已经覆盖了您。r 提供了一个名为 *markovchain* 的包，Python 提供了一个名为 *discreteMarkovChain* 的包，这两个包都可以用来执行这些与棒球相关的操作。

分析师必须用他们喜欢的编程语言安装这些软件包，还必须能够访问棒球比赛的详细数据，以便能够建立这些模型。

布莱斯·哈珀对这些马尔可夫链棒球模型非常着迷！

为了进一步深入这个主题，我们可以看一场棒球比赛，如果它是由于每个球员的板外观而发生的一组转换。当一名球员上场击球时，他发现自己处于 24 种可能情况中的一种。一垒、二垒和三垒上可以各有一名跑垒员，或者根本没有跑垒员。那么就有零、一或两次出局。第三个出局结果在半局结束，这是第 25 种情况。每一块板的出现都可能导致跑垒员在半局中前进或出局数的变化。这些事件的有限性质证明了团队会发现自己在每一个板块出现的 25 种情况中的一种。

接下来，创建过渡态的双向频率表。这些表然后被转换成概率转移矩阵，然后转换成马尔可夫链。然后，我们可以通过从一个状态转移到另一个状态来计算预期得分，然后循环所有可能的状态，以计算在给定初始状态的情况下，在一局结束时预期得分的得分。

一旦我们获得了每支球队的预期总得分，我们就可以为两支球队的每个首发球员建立转移矩阵。在这些矩阵建立之后，我们开始并完成游戏模拟过程。

虽然没有一个模拟可以完全准确，也不可能完全预测游戏的结果，但许多模拟的完成确实给了我们应该预期的游戏结果的想法(10，000 次模拟似乎有助于更强的预测能力)。对于团队来说，使用这种方法作为预测比赛胜利或做出名单决定的唯一方法并不完全明智，但这是一个好主意，可以用来补充他们拥有的所有其他工具和资源。通过研究和个人经验，马尔可夫链方法在棒球中有很多好处:

*   在一场比赛中产生最高期望得分数的击球顺序也是该队产生最高期望获胜数的顺序。为了找到一组 9 名球员的击球顺序，使产生的期望得分数最大化，必须测试所有 9 名球员！= 362，880 种可能的阵容。
*   在每 162 场比赛的赛季中，最佳击球顺序比最差击球顺序多赢大约 4 场比赛。
*   我们可以量化一笔交易对一支球队获胜场次的影响。
*   我们评估了增加自由球员对每个赛季预期胜场数的影响。
*   我们可以使用每局得分的计算分布来帮助游戏中的管理决策。

布莱斯·哈珀希望你喜欢构建这些马尔可夫链棒球模型，这些模型将不可避免地预测费城人队将成为你的 2020 年世界职业棒球大赛冠军！