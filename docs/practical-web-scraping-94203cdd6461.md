# 学习 web 应用程序开发，同时解决现实世界中的问题

> 原文：<https://medium.com/analytics-vidhya/practical-web-scraping-94203cdd6461?source=collection_archive---------15----------------------->

![](img/47eb67e46385efd7acca0a30363ae9b5.png)

卢卡·布拉沃在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

在这个系列中，我们将学习从头创建一个 web 应用程序，web 抓取和存储抓取的数据。同时解决一个现实世界的问题。

这将是一个有趣的实践系列，分为三个部分:

1.搜集数据

2.储存它

3.创建 web 应用程序

> 注意:我不确定网络抓取是否违法。这是一个需要讨论的复杂话题。本系列不讨论 web 抓取的法律方面。然而，我相信合乎道德的网络抓取对于被废弃的网站来说不应该是一个问题。

# **我们要解决的问题**

假设你住在美国，想给你在印度的朋友或家人寄些钱。你会先用谷歌搜索美元对印度卢比的汇率，然后寻找一个允许你从美元向印度卢比汇款的汇款服务。但是，有许多不同的服务提供不同的汇率，不同的服务费。首先，你收集一份此类汇款服务的清单，然后访问他们的网站，查看他们提供的费率。这需要花费大量的时间和精力。

在本教程中，我们将通过创建一个 web 应用程序来解决这个问题，该应用程序将只在一个地方显示这些服务提供的汇率。所以，你只需要打开一个网站就可以决定使用哪种服务。

让我们把问题分成三部分来解决:

1.  从各种服务中收集数据
2.  存储数据
3.  使用数据创建 web 应用程序

**本文将涵盖第一点。**

听起来很有趣？

我们有很多内容要讲，所以不要浪费时间，让我们开始吧。

## 要求

1. [Python(网页抓取)](https://www.python.org/downloads/)

2. [BeautifulSoup(用于网络抓取的 Python 库)](https://pypi.org/project/beautifulsoup4/)

3. [urllib.request(用于打开 URL 的 Python 库)](https://docs.python.org/3/library/urllib.html)

在这一部分，我们将讨论网页抓取部分。

# **基础知识**

在典型的客户机服务器场景中，客户机(例如 web 浏览器)向服务器发送请求。服务器用数据响应。例如，当我们在任何网络浏览器中打开 google.com 时，浏览器会向谷歌服务器发送请求以获取谷歌搜索页面。google 服务器返回 HTML 格式的数据，然后浏览器呈现 HTML 并向用户显示漂亮的 UI。当我们打开任何其他网站时，也会发生同样的事情。Web 抓取是读取 HTML 并从 HTML 中获取所需的数据/信息。

让我们在解决手头问题的同时理解这一点。遵循以下步骤:

## 第一步:选择目标

因为我们要创建一个应用程序，用户可以查看各种服务提供的美元对印度卢比的汇率，让用户从美国向印度汇款。显而易见的需求是这些服务的列表。我们将使用 Remitly 和 Transferwise(随机选择)。

## 第二步:在网站中找到要抓取的元素

我们在《基础》中了解到，所有网站都是 HTML(超文本标记语言)。在常用浏览器(chrome、safari、edge、firefox)中打开的网站的底层 HTML，在页面上点击右键，选择 *Inspect* 选项，就可以轻松看到。

我们想把美元兑换成印度卢比，所以打开第一个网站()，右键点击显示你想刮的印度卢比汇率的地方。在打开的开发人员控制台中，右键单击选中的元素并复制- >复制选择器。

**选择器**被复制到剪贴板，现在保存它(！重要)，我们以后会用到。同样，打开第二个网站([transferwise](https://transferwise.com/us/currency-converter/usd-to-inr-rate))，做同样的事情。

现在我们有了选择器(这是 DOM 中显示 INR 比率的元素的 CSS 路径)。我们将以编程方式编写 Python 脚本到make 请求(使用 urllib)来发送和转换 web 页面，读取 HTML 响应(使用 BeautifulSoup 库)并使用选择器提取 INR 比率(在上一步中获得)。

上面的脚本包含了所有解释每一行是做什么的注释。如果需要更多的解释，请在评论区告诉我:)。简而言之，上面的脚本执行以下步骤:

1.调用显示美元对印度卢比汇率的页面(url)。

2.获取 HTML。

3.创建一个 BeautifulSoup 对象来轻松导航 html。

4.使用我们在步骤 2 中得到的选择器提取比率。

# 执行

将上述脚本复制到一个文件中，用**保存。py** 扩展(例如 scrapper.py)。

通过在 terminal/cmd 中执行以下命令来运行脚本(python3 应该已经安装了)

```
CopyCopyCopypython scrapper.py 
```

现在，我们有了从两个货币兑换服务(Remitly & Transferwise)获取汇率的好脚本。这个脚本可以很容易地扩展到包括更多的服务，而不需要对代码做太多的修改。只需为新服务创建新类，并将服务名包含在 MONEY _ TRANSER _ SERVICES 数组中。就是这样。

# 结论

在这一部分中，我们看到了如何从网页中提取信息。在下一部分中，我们将看到如何构建数据并将其存储在 MongoDB 中以便长期存储。敬请期待！