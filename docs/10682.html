<html>
<head>
<title>What is the c exit function ?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">c 出口函数是什么？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/what-is-the-c-exit-function-50bbb3121f6f?source=collection_archive---------20-----------------------#2020-10-29">https://medium.com/analytics-vidhya/what-is-the-c-exit-function-50bbb3121f6f?source=collection_archive---------20-----------------------#2020-10-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2880" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jd je jf jg b">exit</code>函数是 c 标准库的一部分，是在的<code class="du jd je jf jg b">stdlib.h</code>头中定义的<strong class="ih hj">。</strong></p><p id="9daa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jd je jf jg b">stdlib.h</code>定义了一些类型、宏，它包含通用的实用函数，来执行数值转换、生成随机数、执行排序、分配内存或与环境交互。</p><p id="94d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jd je jf jg b">exit</code>功能用于与环境交互。它有以下签名。</p><pre class="jh ji jj jk fd jl jg jm jn aw jo bi"><span id="13c1" class="jp jq hi jg b fi jr js l jt ju">void exit(int status);</span></pre><p id="776f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jd je jf jg b">exit</code>功能用于正常退出程序，它通过调用所有用<code class="du jd je jf jg b">atexit</code>功能注册的功能开始。</p><p id="cf66" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jd je jf jg b"> atexit</code>函数接受一个指向没有参数或返回类型的函数的指针。当调用<code class="du jd je jf jg b">exit</code>函数时，如果该函数成功注册为在程序终止时调用，则返回<code class="du jd je jf jg b">0</code>，否则返回非零值。<code class="du jd je jf jg b"> atexit</code>函数具有以下签名:</p><pre class="jh ji jj jk fd jl jg jm jn aw jo bi"><span id="c39f" class="jp jq hi jg b fi jr js l jt ju">int atexit(void (*func) (void) );</span></pre><p id="7acc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在以反向注册顺序调用用<code class="du jd je jf jg b">atexit</code>函数注册的函数后，<code class="du jd je jf jg b">exit</code>函数关闭所有打开的流，导致它们被刷新。由<code class="du jd je jf jg b">tmpfile</code>功能创建的文件被删除。</p><p id="b27c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jd je jf jg b">tmpfile</code>函数是<code class="du jd je jf jg b">stdio.h</code>头的一部分，用于创建临时文件，关闭时或程序正常终止时移除。</p><p id="8cf4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，如果传递的状态参数是在<code class="du jd je jf jg b">stdlib.h</code>头中定义的<code class="du jd je jf jg b">0</code>或整数值宏:<code class="du jd je jf jg b">EXIT_SUCCESS</code>，这意味着成功状态必须被传递给宿主环境，因为成功状态的这种实现定义形式被返回给宿主环境，控制权被放弃给宿主环境。</p><pre class="jh ji jj jk fd jl jg jm jn aw jo bi"><span id="f539" class="jp jq hi jg b fi jr js l jt ju">/* exit_success.c */</span><span id="bc69" class="jp jq hi jg b fi jv js l jt ju">#include &lt;stdlib.h&gt;</span><span id="d4d4" class="jp jq hi jg b fi jv js l jt ju">int main ( int argc , char* argv[] )<br/>{<br/>  exit(0);<br/>  /* Normally exit the program<br/>       with success status .<br/>     exit(EXIT_SUCCESS) could <br/>       also have been used .*/<br/>}</span><span id="7648" class="jp jq hi jg b fi jv js l jt ju">/*<br/>$ cc exit_success.c<br/># compile the program .</span><span id="4cf8" class="jp jq hi jg b fi jv js l jt ju">$ ./a.out <br/># execute the program .</span><span id="c0a2" class="jp jq hi jg b fi jv js l jt ju">$ echo $?<br/># check the exit status of <br/>#   the last program . <br/>0<br/># The exit status of the last<br/>#   program is 0 , which is<br/>#   success .*/</span></pre><p id="0a51" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果<strong class="ih hj">传递的状态</strong>参数是在<code class="du jd je jf jg b">stdlib.h</code>头中定义的整数值宏:<code class="du jd je jf jg b">EXIT_FAILURE</code>，则<code class="du jd je jf jg b">exit</code>函数将失败状态的实现定义形式返回给托管环境，控制权将传递给托管环境。</p><pre class="jh ji jj jk fd jl jg jm jn aw jo bi"><span id="c061" class="jp jq hi jg b fi jr js l jt ju">/* exit_failure.c */</span><span id="95af" class="jp jq hi jg b fi jv js l jt ju">#include &lt;stdlib.h&gt;</span><span id="7980" class="jp jq hi jg b fi jv js l jt ju">int main ( int argc , char* argv[] )<br/>{<br/>  exit(EXIT_FAILURE);<br/>  /* Normally exit  the program<br/>       with failure status .*/<br/>}</span><span id="c984" class="jp jq hi jg b fi jv js l jt ju">/*<br/>$ cc exit_failure.c<br/># compile the program .</span><span id="eb5c" class="jp jq hi jg b fi jv js l jt ju">$ ./a.out <br/># execute the program .</span><span id="61c7" class="jp jq hi jg b fi jv js l jt ju">$ echo $?<br/># check the exit status of <br/>#   the last program . <br/>1<br/># It is 1 , as such <br/>#  the exist status <br/>#  is failure .*/</span></pre><p id="af11" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于任何其他的<strong class="ih hj">通过状态</strong>值，返回给主机环境的退出状态是实现定义的。</p><pre class="jh ji jj jk fd jl jg jm jn aw jo bi"><span id="20c2" class="jp jq hi jg b fi jr js l jt ju">/* exit_status_implementation.c */</span><span id="d47c" class="jp jq hi jg b fi jv js l jt ju">#include &lt;stdlib.h&gt;</span><span id="4251" class="jp jq hi jg b fi jv js l jt ju">int main ( int argc , char* argv[] )<br/>{<br/>  exit(-1);<br/>  /* Normally exit the program ,<br/>       passing to the exit function<br/>       an exit status of -1 .<br/>     An implementation defined , exit<br/>       status is returned to<br/>       the hosing environment .*/<br/>}</span><span id="c2b8" class="jp jq hi jg b fi jv js l jt ju">/*<br/>$ cc exit_status_implementation.c<br/># compile the program .</span><span id="d345" class="jp jq hi jg b fi jv js l jt ju">$ ./a.out <br/># execute the program .</span><span id="9235" class="jp jq hi jg b fi jv js l jt ju">$ echo $?<br/># check the exit status of the <br/>#   last program . <br/>255<br/># The exist status is 255 .*/</span></pre><p id="5cbc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">多次调用</strong>到<code class="du jd je jf jg b">exit</code>函数的行为是未定义的。</p></div><div class="ab cl jw jx gp jy" role="separator"><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb"/></div><div class="hb hc hd he hf"><p id="7dc0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kd">原载于 2020 年 10 月 29 日</em><a class="ae ke" href="https://twiserandom.com/c/stdlib/what-is-the-c-exit-function/" rel="noopener ugc nofollow" target="_blank"><em class="kd">【https://twiserandom.com】</em></a><em class="kd">。</em></p></div></div>    
</body>
</html>