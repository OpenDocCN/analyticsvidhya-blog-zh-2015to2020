<html>
<head>
<title>Web Scraping in Python for Data Extraction &amp; Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中用于数据提取和分析的Web抓取</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/web-scraping-in-python-for-data-analysis-6bf355e4fdc8?source=collection_archive---------4-----------------------#2019-10-21">https://medium.com/analytics-vidhya/web-scraping-in-python-for-data-analysis-6bf355e4fdc8?source=collection_archive---------4-----------------------#2019-10-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="2719" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">用于分析海德拉巴住宅物业的web scraper。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/362f2d7e420f2843bec696f727c1e86a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G_HA1qyqT9aqmLoh3bWwTw.png"/></div></div></figure><p id="1027" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">再过两年，我父亲就要退休了，因此他想买一处住宅，以便退休后能在海德拉巴定居。了解到这一点后，我开始思考如何帮助他，然后决定利用这个机会提高我的Python技能。所以这个项目我需要两样东西:</p><ol class=""><li id="60f7" class="kf kg hi jl b jm jn jp jq js kh jw ki ka kj ke kk kl km kn bi translated">从最好的房地产网站之一收集并存储关于海德拉巴住宅物业的数据。</li><li id="8bb3" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke kk kl km kn bi translated">对提取的数据进行<a class="ae kt" href="https://en.wikipedia.org/wiki/Exploratory_data_analysis" rel="noopener ugc nofollow" target="_blank"> EDA </a>(探索性数据分析)，获得所需的信息和数据洞察。</li></ol><p id="a9a5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">用来搭建平台的网站是<a class="ae kt" href="https://www.makaan.com/hyderabad-residential-property/buy-property-in-hyderabad-city?budget=,&amp;page=1" rel="noopener ugc nofollow" target="_blank"> makaan </a>，它是最好的房地产网站之一。所以这个makaan网站有关于不同类型的财产的所有细节，如公寓、住宅小区、别墅、个人住宅等。我们将提取所有属性的数据，然后从数据中获取所需的信息。</p><p id="75a3" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们从导入必要的库开始。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ku"><img src="../Images/5071d9bf33426504136bd25ec00962cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FT4O6vP3nbR2zyHPm4pH7Q.png"/></div></div></figure><p id="b8a0" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">美丽的汤将帮助我们阅读Html文件。它从响应中挑选文本，并以一种使我们更容易浏览其结构和获取其内容的方式解析信息。请求模块允许您使用Python发送HTTP请求。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kv"><img src="../Images/2f6410f580c100a2b6e0212943075733.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nfw4Qyk1trfqJ73lp2I0cA.png"/></div></div></figure><p id="3fec" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">HTTP请求返回一个包含所有响应数据(内容、状态等)的响应对象。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kw"><img src="../Images/c02dfd2a62766c0cf11f0ce743c0bd1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z4X7IpU3I5SP2XepYdlYGA.png"/></div></div></figure><p id="41cc" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">以上是我们的网站，我们将从中提取数据。从网站上提供的数据中，我们选择所需的属性，并进一步提取这些属性的数据。现在要提取数据，右键单击任意属性并选择inspect。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kx"><img src="../Images/b258030536b718ab34f7bf4603ec329a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bvH2rg8p0gNY9dUjBc6nMg.png"/></div></div></figure><p id="e003" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">点击检查后，我们可以看到Html格式的源代码。现在选择你想从中提取属性数据的类。</p><p id="d8d3" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">假设我想提取资产的价格，现在我将选择包含资产价格的类。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ky"><img src="../Images/9e353700554cddb19285153612644514.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eM8LeYRbMVOQKQlOsMOxnQ.png"/></div></div></figure><p id="5b90" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，使用类名，我们可以提取如下数据，其中“持卡人”是包含所有属性数据的类。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kz"><img src="../Images/ec52b78a8676bbb22e218afc1b540a88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e2aHFR1-93Aqs7Os1FRUpA.png"/></div></div></figure><p id="b8bd" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">考虑一个保存提取数据的列表。我们可以创建n个列表来存储n个属性的提取数据。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es la"><img src="../Images/8624e343eab00fbdfea6bb70df7a8bd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qhet8rcEzbknVoKp4Dgamw.png"/></div></div></figure><p id="412f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">要一次从每个属性中提取每个属性的数据，需要大量的时间，因此我们将考虑一个for循环进行n次迭代，其中n是我们希望废弃的页数。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lb"><img src="../Images/394126b65ff6ed2cc758367d649f793d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1258/format:webp/1*nMRMh2JiFDvvPbAfnWe3Rw.png"/></div><figcaption class="lc ld et er es le lf bd b be z dx translated">完整代码请点击<a class="ae kt" href="https://github.com/Bhargava-Sai-P/Residential-Property-Analysis/blob/master/1%20%26%202.%20Data%20Understanding%20%26%20Extraction%20.ipynb" rel="noopener ugc nofollow" target="_blank"> Github </a></figcaption></figure><p id="7e15" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们存储到列表中的提取数据现在存储在数据框中，如下所示。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lg"><img src="../Images/9184a3e94fbeb618733537a6ecdcdac3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Z56g2eTwkfrZJQQxMVTaA.png"/></div></div></figure><p id="4eba" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">从上面我们可以说，我们已经提取了40260行，即40260个具有8个特征/属性的行。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lh"><img src="../Images/40dc01b53780fbcfe8ba9faf22ee1623.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*yKq9OHTdpXYcrGrncyZWbQ.png"/></div></figure><h2 id="5b10" class="li lj hi bd lk ll lm ln lo lp lq lr ls js lt lu lv jw lw lx ly ka lz ma mb mc bi translated">清理数据和检查缺失值的时间到了</h2><p id="2540" class="pw-post-body-paragraph jj jk hi jl b jm md ij jo jp me im jr js mf ju jv jw mg jy jz ka mh kc kd ke hb bi translated">检查<a class="ae kt" href="https://365datascience.com/duplicate-records-sql/" rel="noopener ugc nofollow" target="_blank">重复</a>，如果存在任何重复，则删除。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mi"><img src="../Images/19a69c9b3dad863522c6703ebdd628c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5g8hJD5YLwYYYfgoRcmvJA.png"/></div></div></figure><p id="f5f3" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">删除重复行后，我们剩下25715个数据点，其中几乎一半提取的数据点是重复的。这里，列的数量从8减少到7，因为我们删除了不必要的具有索引值的列。现在，如果我们看看我们的最终数据，这是如何显示如下。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mj"><img src="../Images/ce2f6faa76bf25cfd8e642d3c6c8e73f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JURy7ckSe_V8KybtUEa8lw.png"/></div></div></figure><p id="e70f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们在数据集中的特征/属性是标题、位置、以10万卢比为单位的价格、rate_persqft、area_insqft、building_status、agent_rating。</p><ul class=""><li id="c3c7" class="kf kg hi jl b jm jn jp jq js kh jw ki ka kj ke mk kl km kn bi translated"><strong class="jl hj">标题:</strong>定义属性的标题名称，其数据类型为字符串</li><li id="585a" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke mk kl km kn bi translated"><strong class="jl hj"> location: </strong>定义属性的位置(区域)，其数据类型为字符串</li><li id="a3d7" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke mk kl km kn bi translated"><strong class="jl hj"> price(L): </strong>定义一个房产的价格，单位为lakhs，数据类型为float。</li><li id="acce" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke mk kl km kn bi translated"><strong class="jl hj"> rate_persqft: </strong>定义房产每平方英尺的费率，其数据类型为int。</li><li id="cb83" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke mk kl km kn bi translated"><strong class="jl hj"> area_insqft: </strong>定义属性的总面积，其数据类型为int。</li><li id="4a84" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke mk kl km kn bi translated"><strong class="jl hj"> building_status: </strong>定义建筑物的当前状态，数据类型为字符串</li><li id="10d3" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke mk kl km kn bi translated"><strong class="jl hj"> agent_rating: </strong>定义客户对代理的评级，数据类型为float。</li></ul><p id="35c6" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">检查是否有丢失的值，</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ml"><img src="../Images/b8f0cbf8764bd50f821ae61af8a66b5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*22fZVPa5aSVDni0noMQbSA.png"/></div></div></figure><p id="a108" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在我们的数据集中，没有丢失的值:)我们甚至可以使用IsNull <a class="ae kt" href="https://pandas.pydata.org/pandas-docs/version/0.17.0/generated/pandas.isnull.html" rel="noopener ugc nofollow" target="_blank"> () </a>函数来检查丢失的值。</p><p id="86ab" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">让我们看看每一列中的最高值和最低值是什么。要获得这些数据，我们可以创建一个函数来返回列的最大值和最小值。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mm"><img src="../Images/c1e1f218110b46bd9cf28243e8c125a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R-31JVJkpCtBSdOHWHtCiA.png"/></div></div></figure><p id="0c24" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">从上面我们可以看到，在价格一栏中，我们的最高价格为7000万卢比，最低价格为0万卢比。看到这里，我们有一个疑问，一个资产的价格怎么可能是0。如果我们回到我们的提取代码，你可以发现，当一个属性的价格丢失时，我们用0替换它。所以我们可以得出结论，这里的0表示缺失数据。</p><p id="db27" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们可以使用插补以不同的方式处理缺失值，插补意味着用均值/中值/众数替换缺失值，或者删除行，这取决于您正在处理的数据。对于这种数据，我们不能用插补来代替数据，因为海得拉巴不同地点的房价会有所不同。</p><p id="2dec" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果我们仔细观察我们的数据，我们可以理解，我们有一个物业的总面积和每平方英尺的价格。一个简单的解决方案是，我们可以将area_in_sqft*rate_per_sqft相乘，从而得出房产的价格。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mn"><img src="../Images/4615a1b31a7c0ce3bc070a87eebd1f6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*izXr_88X_CNs0eTYwWd7Vw.png"/></div></div></figure><p id="7af9" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们可以看到没有价格值为0的行了。我们可以看到清理前和清理后的数据之间的差异，在平均值、中值、标准差等方面会有变化。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mo"><img src="../Images/96dc85c282901a43c984043385432d1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G7Z829Mh18zrP2QtwqSolg.png"/></div></div></figure><p id="9937" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">最后，我们可以将清理后的数据保存到新的excel或CSV或您希望的任何其他格式，以便您可以使用它进行进一步的分析。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mp"><img src="../Images/a4be65fa8a1f677c3456ce16adccb827.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CarPc3qi3NMAFCP6aW-Xcw.png"/></div></div></figure><p id="0633" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们可以看到，我们的最终数据由25715个数据点组成，即关于25715个属性和7个特征/属性的数据。</p><h2 id="36a5" class="li lj hi bd lk ll lm ln lo lp lq lr ls js lt lu lv jw lw lx ly ka lz ma mb mc bi translated">注意:</h2><p id="5f70" class="pw-post-body-paragraph jj jk hi jl b jm md ij jo jp me im jr js mf ju jv jw mg jy jz ka mh kc kd ke hb bi translated">这篇关于EDA的文章有一个后续部分，是关于我们提取的这些数据的。你可以在我的故事中找到它，或者点击这里。</p><p id="5ae6" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这个项目的完整代码，可以访问我的Github。点击<a class="ae kt" href="https://github.com/Bhargava-Sai-P/Residential-Property-Analysis/blob/master/1%20%26%202.%20Data%20Understanding%20%26%20Extraction%20.ipynb" rel="noopener ugc nofollow" target="_blank">此处</a>或以下</p><div class="mq mr ez fb ms mt"><a href="https://github.com/Bhargava-Sai-P/Residential-Property-Analysis/blob/master/1%20%26%202.%20Data%20Understanding%20%26%20Extraction%20.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="mu ab dw"><div class="mv ab mw cl cj mx"><h2 class="bd hj fi z dy my ea eb mz ed ef hh bi translated">bhargava-Sai-P/住宅物业分析</h2><div class="na l"><h3 class="bd b fi z dy my ea eb mz ed ef dx translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="nb l"><p class="bd b fp z dy my ea eb mz ed ef dx translated">github.com</p></div></div><div class="nc l"><div class="nd l ne nf ng nc nh jh mt"/></div></div></a></div></div><div class="ab cl ni nj gp nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="hb hc hd he hf"><p id="6582" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">感谢阅读。</p></div></div>    
</body>
</html>