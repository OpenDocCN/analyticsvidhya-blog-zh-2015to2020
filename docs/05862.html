<html>
<head>
<title>Retaining and passing information states of variables in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">åœ¨Pythonä¸­ä¿ç•™å’Œä¼ é€’å˜é‡çš„ä¿¡æ¯çŠ¶æ€</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/analytics-vidhya/retaining-and-passing-information-states-of-variables-in-python-7b39802d1362?source=collection_archive---------9-----------------------#2020-05-04">https://medium.com/analytics-vidhya/retaining-and-passing-information-states-of-variables-in-python-7b39802d1362?source=collection_archive---------9-----------------------#2020-05-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/fb589ec4bd57b600f1f23bfebccefc91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Db-ojYJICoQujth-_DJ-4A.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">ç…§ç‰‡ç”±<a class="ae iu" href="https://unsplash.com/photos/YeUVDKZWSZ4" rel="noopener ugc nofollow" target="_blank">Rene b hmeræ‹æ‘„</a></figcaption></figure><p id="582f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">çŠ¶æ€ä¿¡æ¯åœ¨è®¸å¤šç°å®ä¸–ç•Œçš„ç¨‹åºä¸­èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨ã€‚çŠ¶æ€å†³å®šäº†å®ä½“(å‡½æ•°ã€ç±»ã€å¯¹è±¡..ç­‰ç­‰)ã€‚å®ä½“-å±æ€§å…³ç³»æ˜¯å…¶ä½¿ç”¨çš„å…³é”®å› ç´ ã€‚</p><p id="8ae6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">åœ¨å°è¯•è§£å†³ä¸€ä¸ªçœŸå®ä¸–ç•Œçš„ç¨‹åºæ—¶ï¼Œæˆ‘é‡åˆ°äº†è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨è¿™ä¸ªç¨‹åºä¸­ï¼Œæˆ‘å¸Œæœ›å®ä½“ä¿å­˜ç³»ç»Ÿçš„çŠ¶æ€ï¼Œä»¥ä¾¿ä»¥åä½¿ç”¨ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°æœ‰å¤šç§æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘è¯•å›¾ç®€åŒ–è¿™äº›æ–¹æ³•ï¼Œä»¥ä¾¿å¯¹å…¶ä»–äººæœ‰æ‰€å¸®åŠ©ã€‚</p><p id="e899" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç®€å•çš„é—®é¢˜ï¼Œé€šè¿‡è¿™ä¸ªé—®é¢˜æˆ‘ä»¬å¯ä»¥ç†è§£ç¨‹åºä¸­çŠ¶æ€çš„ä¿æŒã€‚é—®é¢˜é™ˆè¿°æ˜¯å®ç°ä¸€ä¸ªç¨‹åºï¼Œæ ¹æ®å‡½æ•°çš„åˆå§‹çŠ¶æ€æ¥è®¡ç®—è°ƒç”¨å‡½æ•°çš„æ¬¡æ•°ã€‚</p><p id="6920" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">â€¦.<strong class="ix hj">ç¬¬ä¸€æ¬¡å°è¯•</strong>ğŸ¤”</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="1d75" class="kc kd hi jy b fi ke kf l kg kh">count = 0</span><span id="99c2" class="kc kd hi jy b fi ki kf l kg kh">def stateful(init_state):<br/>    global count<br/>    count = init_state      # intialize the state to global variable<br/>    def inner():<br/>        global count        # Acess global variable and increment<br/>        count += 1<br/>        return "This is a sample program", count, init_state<br/>    return inner</span><span id="030b" class="kc kd hi jy b fi ki kf l kg kh">ret = stateful(0)<br/>ret()<br/>ret()<br/>ret()<br/>print(ret())               # first</span><span id="7647" class="kc kd hi jy b fi ki kf l kg kh">ret2 = stateful(10)<br/>print(ret2())              # Second<br/>print(ret())               # Third</span></pre><p id="d222" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ä¸Šé¢çš„ä»£ç æ‰“å°å‡ºä»¥ä¸‹è¾“å‡º</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="7331" class="kc kd hi jy b fi ke kf l kg kh">('This is a sample program', 4, 0)<br/>('This is a sample program', 11, 10)<br/>('This is a sample program', 12, 0)</span></pre><p id="a378" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå…¨å±€å˜é‡<code class="du kj kk kl jy b">count</code>æ¥è·Ÿè¸ªå¯¹<code class="du kj kk kl jy b">stateful()</code>çš„è°ƒç”¨æ¬¡æ•°çš„çŠ¶æ€ã€‚ç”±äºå¯¹<code class="du kj kk kl jy b">stateful()</code>çš„è°ƒç”¨æ²¡æœ‰ä¿å­˜<code class="du kj kk kl jy b">count</code>å˜é‡çš„çŠ¶æ€ï¼Œæˆ‘ä»¬æ­£åœ¨è®¿é—®å…¨å±€<code class="du kj kk kl jy b">count</code>å˜é‡ï¼Œå¹¶å°†å‡½æ•°çš„åˆå§‹çŠ¶æ€<code class="du kj kk kl jy b">init_state</code>èµ‹ç»™<code class="du kj kk kl jy b">count</code>ï¼Œæœ€åä¸ºæ¯ä¸ªè°ƒç”¨é€’å¢å˜é‡ã€‚è™½ç„¶è¿™ç¡®å®éƒ¨åˆ†è§£å†³äº†æˆ‘ä»¬çš„é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶éœ€è¦ä¿ç•™å‘é€åˆ°<code class="du kj kk kl jy b">stateful()</code>çš„åˆå§‹çŠ¶æ€ã€‚</p><p id="ab5e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¯¹å‡½æ•°çš„<code class="du kj kk kl jy b">first</code>è°ƒç”¨å°†<code class="du kj kk kl jy b">count</code>è®°ä¸º<code class="du kj kk kl jy b">4</code>ã€‚</p><p id="b8c8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¯¹å‡½æ•°çš„<code class="du kj kk kl jy b">second</code>è°ƒç”¨å°†å…¨å±€å˜é‡counté‡æ–°åˆå§‹åŒ–ä¸º<code class="du kj kk kl jy b">10</code>ï¼Œè¿™<code class="du kj kk kl jy b">count</code>è¢«è§†ä¸º<code class="du kj kk kl jy b">11</code>ã€‚</p><p id="1919" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¯¹å‡½æ•°çš„<code class="du kj kk kl jy b">third</code>è°ƒç”¨ä»ç„¶ä½¿ç”¨å…ˆå‰çš„åˆå§‹åŒ–çŠ¶æ€ï¼Œå¹¶å°†å…ˆå‰çš„<code class="du kj kk kl jy b">count</code>å€¼å¢åŠ åˆ°<code class="du kj kk kl jy b">12</code></p><p id="4bb9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬çœ‹åˆ°ä¸Šé¢çš„ä»£ç æœ‰ä¸¤ä¸ªé—®é¢˜ã€‚å¤ªå¤šé‡å¤çš„ä»£ç è¡Œ(æˆ‘è®¨åŒè¿™ä¸€ç‚¹)å…¶æ¬¡ï¼Œæˆ‘æƒ³éš”ç¦»æ–°çš„å¯¹è±¡åˆå§‹åŒ–å’Œç‹¬ç«‹çš„è¡Œä¸ºã€‚æ‰€ä»¥ï¼Œæˆ‘ä¸€ç›´åœ¨å¯»æ‰¾æ›´å¤šçš„ç­”æ¡ˆã€‚</p><p id="fe6f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">â€¦.<strong class="ix hj">ç¬¬äºŒæ¬¡å°è¯•</strong>ğŸ¤”</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="9386" class="kc kd hi jy b fi ke kf l kg kh">def stateful(init_state):<br/>    count = init_state<br/>    def inner():<br/>        nonlocal count<br/>        count += 1<br/>        return "This is a sample program", count, init_state</span><span id="54df" class="kc kd hi jy b fi ki kf l kg kh">    return inner<br/></span><span id="eca3" class="kc kd hi jy b fi ki kf l kg kh">ret = stateful(0)             # init state 0<br/>ret()<br/>ret()<br/>ret()<br/>print(ret())                  # first<br/></span><span id="ba21" class="kc kd hi jy b fi ki kf l kg kh">ret2 = stateful(10)            # init state 10<br/>print(ret2())                  # second<br/>print(ret())                  # third</span></pre><p id="ed3b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ä¸Šé¢çš„ä»£ç è¾“å‡ºå¦‚ä¸‹</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="4711" class="kc kd hi jy b fi ke kf l kg kh">('This is a sample program', 4, 0)<br/>('This is a sample program', 11, 10)<br/>('This is a sample program', 5, 0)</span></pre><p id="bce4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†è¯­å¥<code class="du kj kk kl jy b">nonlocal</code>ï¼Œè¿™æ ·æˆ‘ä»¬ä¸ä»…å¯ä»¥åœ¨åé¢çš„é˜¶æ®µä½¿ç”¨å˜é‡<code class="du kj kk kl jy b">count</code>ä½œä¸ºå‚è€ƒï¼Œè¿˜å¯ä»¥é€šè¿‡è°ƒç”¨è®¿é—®å’Œä¿®æ”¹å˜é‡<code class="du kj kk kl jy b">count</code>çš„çŠ¶æ€ã€‚</p><p id="4934" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¯¹å‡½æ•°<code class="du kj kk kl jy b">ret()</code>çš„<code class="du kj kk kl jy b">first</code>è°ƒç”¨å°†<code class="du kj kk kl jy b">count</code>ä½œä¸º<code class="du kj kk kl jy b">4</code>ã€‚</p><p id="d47d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¯¹å‡½æ•°<code class="du kj kk kl jy b">ret2()</code>çš„<code class="du kj kk kl jy b">second</code>è°ƒç”¨å°†<code class="du kj kk kl jy b">count</code>ä½œä¸º<code class="du kj kk kl jy b">11</code>ã€‚</p><p id="704d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¯¹å‡½æ•°<code class="du kj kk kl jy b">ret()</code>çš„<code class="du kj kk kl jy b">third</code>è°ƒç”¨ç»™å‡ºçš„è®¡æ•°ä¸º<code class="du kj kk kl jy b">5</code>ã€‚</p><p id="aee2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> <em class="km">æ³¨æ„</em> </strong>:æ³¨æ„<code class="du kj kk kl jy b">ret</code>å’Œ<code class="du kj kk kl jy b">ret2</code>çš„å¯¹è±¡æ˜¯å¦‚ä½•è¢«<code class="du kj kk kl jy b">init_state</code>ä¿ç•™çš„ã€‚å¯¹å‡½æ•°<code class="du kj kk kl jy b">ret</code>çš„æ³¨é‡Šè¡Œ<code class="du kj kk kl jy b">third</code>è°ƒç”¨æ˜¯å¯¹è¯¥å‡½æ•°çš„ç¬¬äº”æ¬¡è°ƒç”¨ï¼Œå› æ­¤è®¡æ•°å¢åŠ åˆ°<code class="du kj kk kl jy b">5</code>ã€‚å½“å¯¹è±¡<code class="du kj kk kl jy b">ret2</code>ç”¨ä¸åŒçš„<code class="du kj kk kl jy b">init state</code>å³<code class="du kj kk kl jy b">10</code>åˆå§‹åŒ–æ—¶ï¼Œå®ƒä½¿ç”¨å®ƒçš„ä¸€ä¸ªçŠ¶æ€æ¥è·Ÿè¸ªå˜é‡<code class="du kj kk kl jy b">count</code>ï¼Œè¯¥å˜é‡å¢åŠ åˆ°<code class="du kj kk kl jy b">11</code>ã€‚</p><p id="9153" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ç°åœ¨è¿™ä¸ªè§£å†³æ–¹æ¡ˆè®©æˆ‘å¾ˆé«˜å…´ï¼Œå› ä¸ºå®ƒç»™å‡ºäº†é—®é¢˜é™ˆè¿°çš„ç­”æ¡ˆï¼Œä½†æˆ‘æƒ³çŸ¥é“æ˜¯å¦æœ‰æ›´å¤šçš„è§£å†³æ–¹æ¡ˆç»™æˆ‘æ›´å¤šçš„çµæ´»æ€§æ¥æ”¹å˜çŠ¶æ€å˜é‡ã€‚</p><p id="3237" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">â€¦ <strong class="ix hj">ç¬¬ä¸‰æ¬¡å°è¯•</strong>ğŸ¤”</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="3e39" class="kc kd hi jy b fi ke kf l kg kh">def stateful(init_state):<br/>    def inner():<br/>        inner.count += 1<br/>        return "This is a sample program", inner.count, init_state<br/>    inner.count = init_state<br/>    return inner<br/></span><span id="87f9" class="kc kd hi jy b fi ki kf l kg kh">ret = stateful(0)              # init state 0<br/>ret()<br/>ret()<br/>ret()<br/>print(ret())                   # first<br/></span><span id="ed94" class="kc kd hi jy b fi ki kf l kg kh">ret2 = stateful(10)            # init state 10<br/>print(ret2())                  # second<br/>print(ret())                   # third</span><span id="c783" class="kc kd hi jy b fi ki kf l kg kh">print(ret.count, ret2.count)<br/>ret2.count = 20                # change in entity's init state <br/>print(ret2())                  # fourth</span></pre><p id="9964" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ä¸Šé¢çš„ä»£ç è¾“å‡ºå¦‚ä¸‹</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="f0f1" class="kc kd hi jy b fi ke kf l kg kh">('This is a sample program', 4, 0)<br/>('This is a sample program', 11, 10)<br/>('This is a sample program', 5, 0)<br/>5 11<br/>('This is a sample program', 21, 10)</span></pre><p id="1e26" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å‡½æ•°å±æ€§æ¥è·Ÿè¸ª<code class="du kj kk kl jy b">count</code>è°ƒç”¨çš„çŠ¶æ€ã€‚ç”±äºå‡½æ•°<code class="du kj kk kl jy b">inner</code>å·²ç»å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿”å›å‡½æ•°å¯¹è±¡ä¹‹å‰åˆ›å»ºä¸€ä¸ªä½¿ç”¨å‡½æ•°ååˆ›å»ºçš„å‡½æ•°å±æ€§<code class="du kj kk kl jy b">inner.count</code>ã€‚å¯¹è±¡<code class="du kj kk kl jy b">ret</code>å’Œ<code class="du kj kk kl jy b">ret2</code>å…·æœ‰å®ƒä»¬ç›¸åº”çš„åŠŸèƒ½å±æ€§ï¼Œè¿™äº›å±æ€§ä¿ç•™äº†çŠ¶æ€ä¿¡æ¯ã€‚</p><p id="ccc6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¯¹å‡½æ•°<code class="du kj kk kl jy b">ret()</code>çš„<code class="du kj kk kl jy b">first</code>è°ƒç”¨ç»™å‡ºäº†<code class="du kj kk kl jy b">count</code> 4</p><p id="659d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¯¹å‡½æ•°<code class="du kj kk kl jy b">ret2()</code>çš„<code class="du kj kk kl jy b">second</code>è°ƒç”¨å°†<code class="du kj kk kl jy b">count</code>ä½œä¸º<code class="du kj kk kl jy b">11</code>ç»™å‡ºã€‚</p><p id="25d7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¯¹å‡½æ•°<code class="du kj kk kl jy b">ret()</code>çš„<code class="du kj kk kl jy b">third</code>è°ƒç”¨ç»™å‡ºçš„è®¡æ•°ä¸º<code class="du kj kk kl jy b">5</code>ã€‚</p><p id="dd16" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¯¹å‡½æ•°<code class="du kj kk kl jy b">ret2()</code>çš„<code class="du kj kk kl jy b">fourth</code>è°ƒç”¨ç»™å‡ºçš„è®¡æ•°ä¸º<code class="du kj kk kl jy b">21</code>ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬å·²ç»ä½¿ç”¨åŠŸèƒ½å±æ€§<code class="du kj kk kl jy b">inner.count</code>å°†<code class="du kj kk kl jy b">init_state</code>ä¿®æ”¹ä¸ºæ–°çŠ¶æ€ã€‚</p><p id="2f82" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> <em class="km">æ³¨:</em> </strong>æ³¨æ„æˆ‘ä»¬å¦‚ä½•èƒ½å¤Ÿç›´æ¥è®¿é—®å˜é‡å¹¶æ‰“å°å®ƒä»¬ç›¸åº”çš„å€¼ã€‚æˆ‘ä»¬ä¹Ÿä½¿ç”¨å‡½æ•°å±æ€§<code class="du kj kk kl jy b">inner.count</code>æ”¹å˜äº†çŠ¶æ€ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬ä¸èƒ½ä¿®æ”¹åµŒå…¥åˆ°å¯¹è±¡ä¸­çš„å€¼<code class="du kj kk kl jy b">init_state</code>ï¼Œå› æ­¤æˆ‘ä»¬åœ¨è¾“å‡ºè¡Œ<code class="du kj kk kl jy b">(â€˜This is a sample programâ€™, 21, 10)</code>ä¸­çœ‹åˆ°å€¼<code class="du kj kk kl jy b">10</code>ã€‚</p><p id="f019" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">è™½ç„¶è¿™ä¸ªè§£å†³æ–¹æ¡ˆç»™äº†æˆ‘æ›´å¥½çš„æ”¹å˜çŠ¶æ€çš„çµæ´»æ€§ï¼Œä½†æ˜¯å®ƒä¹Ÿæ‰“å¼€äº†çŠ¶æ€è¢«å¦ä¸€ä¸ªæ¨¡å—æ”¹å˜çš„å¯èƒ½æ€§ï¼Œè¿™å¯èƒ½å¯¼è‡´æ„æƒ³ä¸åˆ°çš„ç»“æœã€‚</p><p id="1394" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">â€¦ <strong class="ix hj">ç¬¬å››æ¬¡å°è¯•</strong></p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="f23a" class="kc kd hi jy b fi ke kf l kg kh">class stateful:<br/>    def __init__(self,init_state):<br/>        self.count = init_state<br/>        self.init_state = init_state</span><span id="6e80" class="kc kd hi jy b fi ki kf l kg kh">def inner(self):<br/>        self.count +=1<br/>        return "This is a sample program", self.count, self.init_state<br/></span><span id="77e3" class="kc kd hi jy b fi ki kf l kg kh">ret = stateful(0)                    # init state 0<br/>ret.inner()<br/>ret.inner()<br/>ret.inner()<br/>print(ret.inner())                   # first<br/></span><span id="d875" class="kc kd hi jy b fi ki kf l kg kh">ret2 = stateful(10)                  # init state 10<br/>print(ret2.inner())                  # second<br/>print(ret.inner())                   # third</span><span id="71f2" class="kc kd hi jy b fi ki kf l kg kh">print(ret.count, ret2.count)<br/>ret2.count = 20                      # change in entity's init state<br/>print(ret2.inner()).                 # fourth</span></pre><p id="0558" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ä¸Šé¢çš„ä»£ç è¾“å‡ºå¦‚ä¸‹</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="b976" class="kc kd hi jy b fi ke kf l kg kh">('This is a sample program', 4, 0)<br/>('This is a sample program', 11, 10)<br/>('This is a sample program', 5, 0)<br/>5 11<br/>('This is a sample program', 21, 10)</span></pre><p id="7227" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†classå±æ€§æ¥ä¿ç•™çŠ¶æ€ä¿¡æ¯ã€‚æˆ‘ä»¬å·²ç»ç”¨ç±»å¯¹è±¡<code class="du kj kk kl jy b">ret</code>å’Œ<code class="du kj kk kl jy b">ret2</code>æ¥è°ƒç”¨ç±»æ–¹æ³•ã€‚</p><p id="2f74" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¯¹å‡½æ•°<code class="du kj kk kl jy b">ret()</code>çš„<code class="du kj kk kl jy b">first</code>è°ƒç”¨ç»™å‡ºäº†<code class="du kj kk kl jy b">count</code> 4</p><p id="a9e4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¯¹å‡½æ•°<code class="du kj kk kl jy b">ret2()</code>çš„<code class="du kj kk kl jy b">second</code>è°ƒç”¨å°†<code class="du kj kk kl jy b">count</code>ä½œä¸º<code class="du kj kk kl jy b">11</code>ç»™å‡ºã€‚</p><p id="009b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¯¹å‡½æ•°<code class="du kj kk kl jy b">ret()</code>çš„<code class="du kj kk kl jy b">third</code>è°ƒç”¨ç»™å‡ºçš„è®¡æ•°ä¸º<code class="du kj kk kl jy b">5</code>ã€‚</p><p id="8382" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¯¹å‡½æ•°<code class="du kj kk kl jy b">ret2()</code>çš„<code class="du kj kk kl jy b">fourth</code>è°ƒç”¨ç»™å‡ºçš„è®¡æ•°ä¸º<code class="du kj kk kl jy b">21</code>ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬å·²ç»ä½¿ç”¨ç±»åˆ«å±æ€§<code class="du kj kk kl jy b">count</code>å°†çŠ¶æ€ä¿®æ”¹ä¸ºæ–°çš„çŠ¶æ€ã€‚</p><p id="8455" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> <em class="km">æ³¨æ„:</em> </strong>æˆ‘ä»¬å·²ç»å¯¹ç±»æ–¹æ³•è¿›è¡Œäº†æ˜¾å¼è°ƒç”¨ã€‚</p><p id="c01b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">æˆ‘ä»¬å¯ä»¥ä¿®æ”¹è¿™ä¸ªè§£å†³æ–¹æ¡ˆï¼Œä½¿å®ƒæˆä¸ºä¸€ä¸ªå¯è°ƒç”¨çš„ï¼Œè¿™æ˜¯æˆ‘æœ€åçš„é€‰æ‹©ã€‚</p><p id="21c0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">â€¦ <strong class="ix hj">ç¬¬äº”æ¬¡å°è¯•ğŸ¤”</strong></p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="4b42" class="kc kd hi jy b fi ke kf l kg kh">class stateful:<br/>    def __init__(self,init_state):<br/>        self.count = init_state<br/>        self.init_state = init_state<br/>    def __call__(self, *args, **kwargs):<br/>        self.count +=1<br/>        return "This is a sample program", self.count, self.init_state<br/></span><span id="ee1d" class="kc kd hi jy b fi ki kf l kg kh">ret = stateful(0)              # init state 0<br/>ret()<br/>ret()<br/>ret()<br/>print(ret())                   # first<br/></span><span id="7190" class="kc kd hi jy b fi ki kf l kg kh">ret2 = stateful(10)            # init state 10<br/>print(ret2())                  # second<br/>print(ret())                   # third</span><span id="128e" class="kc kd hi jy b fi ki kf l kg kh">print(ret.count, ret2.count)<br/>ret2.count = 20                # change in entity's init state<br/>print(ret2())                  # fourth</span></pre><p id="9234" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ä¸Šé¢çš„ä»£ç è¾“å‡ºå¦‚ä¸‹</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="2de2" class="kc kd hi jy b fi ke kf l kg kh">('This is a sample program', 4, 0)<br/>('This is a sample program', 11, 10)<br/>('This is a sample program', 5, 0)<br/>5 11<br/>('This is a sample program', 21, 10)</span></pre><p id="5bce" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†classå±æ€§æ¥ä¿ç•™<code class="du kj kk kl jy b">count</code>çš„çŠ¶æ€ã€‚</p><p id="1ded" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¯¹å‡½æ•°<code class="du kj kk kl jy b">ret()</code>çš„<code class="du kj kk kl jy b">first</code>è°ƒç”¨ç»™å‡ºäº†<code class="du kj kk kl jy b">count</code> 4</p><p id="7541" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¯¹å‡½æ•°<code class="du kj kk kl jy b">ret2()</code>çš„<code class="du kj kk kl jy b">second</code>è°ƒç”¨å°†<code class="du kj kk kl jy b">count</code>ä½œä¸º<code class="du kj kk kl jy b">11</code>ã€‚</p><p id="45fe" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¯¹å‡½æ•°<code class="du kj kk kl jy b">ret()</code>çš„<code class="du kj kk kl jy b">third</code>è°ƒç”¨ç»™å‡ºçš„è®¡æ•°ä¸º<code class="du kj kk kl jy b">5</code>ã€‚</p><p id="6393" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¯¹å‡½æ•°<code class="du kj kk kl jy b">ret2()</code>çš„<code class="du kj kk kl jy b">fourth</code>è°ƒç”¨ç»™å‡ºçš„è®¡æ•°ä¸º<code class="du kj kk kl jy b">21</code>ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬å·²ç»ä½¿ç”¨ç±»å±æ€§<code class="du kj kk kl jy b">count</code>å°†çŠ¶æ€ä¿®æ”¹ä¸ºä¸€ä¸ªæ–°çš„çŠ¶æ€ã€‚</p><p id="8dfb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> <em class="km">æ³¨æ„:</em> </strong>æ³¨æ„æˆ‘ä»¬æ˜¯å¦‚ä½•ä½¿ç”¨Pythonçš„dunderæ–¹æ³•ä½¿å¯¹è±¡å¯è°ƒç”¨çš„ã€‚</p><h1 id="d2e8" class="kn kd hi bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">ç»“è®º</h1><p id="c187" class="pw-post-body-paragraph iv iw hi ix b iy lk ja jb jc ll je jf jg lm ji jj jk ln jm jn jo lo jq jr js hb bi translated">æˆ‘è¯•å›¾è§£é‡Šè§£å†³é—®é¢˜çš„ä¸åŒæ–¹æ³•ã€‚è™½ç„¶è¿™äº›è§£å†³æ–¹æ¡ˆä½¿æˆ‘ä»¬èƒ½å¤Ÿè·¨ç¨‹åºä¼ é€’çŠ¶æ€ä¿¡æ¯ï¼Œä½†æˆ‘ä»¬æ²¡æœ‰è€ƒè™‘æ¯ç§æ–¹æ¡ˆçš„åˆ©å¼Šã€‚å¤„ç†çŠ¶æ€ä¿¡æ¯æ—¶æœ€é‡è¦çš„å› ç´ ï¼Œè·¨ç¨‹åºä¼ é€’çŠ¶æ€ä¿¡æ¯(æ€§èƒ½)çš„æˆæœ¬ç”šè‡³æ²¡æœ‰è¢«è€ƒè™‘ã€‚</p><p id="0017" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ä¹Ÿè®¸æˆ‘ä¼šå†å†™ä¸€ç¯‡æ–‡ç« æ¥è®¨è®ºæ¯ç§æ–¹æ³•çš„ä¼˜ç¼ºç‚¹ã€‚</p></div></div>    
</body>
</html>