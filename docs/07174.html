<html>
<head>
<title>Website Deployment Automation using Jenkins on Docker - A Devops Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Docker - A Devops项目上使用Jenkins实现网站部署自动化</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/automation-of-docker-git-and-github-with-jenkins-a-devops-project-72dda6ee8355?source=collection_archive---------4-----------------------#2020-06-16">https://medium.com/analytics-vidhya/automation-of-docker-git-and-github-with-jenkins-a-devops-project-72dda6ee8355?source=collection_archive---------4-----------------------#2020-06-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/2d53ba307eb817becb4da53aa983fc8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OW0XC-CqMFhJingCMIJ3nQ.jpeg"/></div></div></figure><p id="e1eb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这种自动化将帮助我们在扩展<strong class="is hj">的Github上部署由开发者上传的<strong class="is hj">网页</strong>。html </strong>和<strong class="is hj">。docker容器上的php </strong>。每个部分都是使用Jenkins自动完成的，Jenkins本身在docker上运行。用户甚至会在站点部署时收到一封电子邮件。</p><h1 id="05c8" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">使用的工具-</h1><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es km"><img src="../Images/0eff87597e937847f49b0a587ffa43a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NmxOR8kzAQ9BndejlYfq0Q.png"/></div></div></figure><ul class=""><li id="5669" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">Git和Github——用于版本控制和托管我们的存储库。</li><li id="c19d" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">詹金斯-自动化各种工作。</li><li id="0a74" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">Rhel8-作为运行docker和ngrok等服务的基础操作系统。</li><li id="1d73" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">部署网页和詹金斯。</li></ul><h1 id="88ae" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">任务描述-</h1><p id="cd81" class="pw-post-body-paragraph iq ir hi is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">1.使用Dockerfile创建安装了Jenkins的容器映像。</p><p id="1dd2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.当我们启动这个映像时，它应该会自动启动容器中的Jenkins服务。</p><p id="8c5f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3.使用Jenkins中的构建管道插件创建Job1、Job2、Job3和Job4的作业链</p><p id="96c3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">4.Job1:当开发者将repository推送到Github时，自动拉取Github repo。</p><p id="e54b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">5.Job2:通过查看代码或程序文件，Jenkins应该自动启动相应的语言解释器安装映像容器来部署代码(例如，如果代码是PHP的，那么Jenkins应该启动已经安装了PHP的容器)。</p><p id="0c01" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">6.工作3:测试你的应用程序是否工作正常。</p><p id="8b92" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">7.工作4:如果网页的工作，然后发送确认电子邮件给开发商。</p><p id="e32d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">8.为monitor : If容器创建一个额外的job Job5，其中应用程序正在运行。由于任何原因失败，则该作业应自动再次启动容器。</p><h1 id="56e4" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">自动化步骤-</h1><h2 id="d556" class="lk jp hi bd jq ll lm ln ju lo lp lq jy jb lr ls kc jf lt lu kg jj lv lw kk lx bi translated">1.创建安装了Jenkins的个性化Docker映像-</h2><p id="3579" class="pw-post-body-paragraph iq ir hi is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">我们可以使用Dockerfile创建个性化的Docker图像。</p><p id="1a39" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一个<strong class="is hj"> Dockerfile </strong>是一个文本文档，它包含用户可以在命令行上调用的所有命令来组合一个图像。使用docker build，用户可以创建一个连续执行几个命令行指令的自动化构建。<strong class="is hj">简而言之Dockerfile用于创建我们自己的个性化Docker图像。</strong></p><ul class=""><li id="2d8a" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">为了创建dockerfile，我创建了一个名为ws的新文件夹。</li></ul><p id="b7a5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="ly"> ]# mkdir ws/ </em></p><p id="90cd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="ly"> ]#cd /ws </em></p><ul class=""><li id="cd58" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">然后使用以下命令在ws目录中创建docker文件</li></ul><blockquote class="lz ma mb"><p id="1693" class="iq ir ly is b it iu iv iw ix iy iz ja mc jc jd je md jg jh ji me jk jl jm jn hb bi translated"><em class="hi"> ]#gedit Dockerfile </em></p></blockquote><ul class=""><li id="23ed" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">因此，我们将使用从docker hub中提取的<strong class="is hj"> centos </strong>图像开始创建Dockerfile，如下图所示。</li></ul><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mf"><img src="../Images/3e00932932ec56506b6da98cbb886e10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UUTqEgmwVSlDZFJNq491FA.png"/></div></div></figure><ul class=""><li id="cf7d" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">保存docker文件后，进入父目录</li></ul><blockquote class="lz ma mb"><p id="b800" class="iq ir ly is b it iu iv iw ix iy iz ja mc jc jd je md jg jh ji me jk jl jm jn hb bi translated"><em class="hi"> ]#cd..</em></p></blockquote><ul class=""><li id="4136" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">运行命令以创建映像</li></ul><p id="36ed" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="ly">]# docker build-t automation:v1/ws/</em></p><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mg"><img src="../Images/09264a7a1c982227604cf13d67980e41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cfl0w26UQlhxhsTSj95OQQ.png"/></div></div><figcaption class="mh mi et er es mj mk bd b be z dx translated">Dockerfile成功</figcaption></figure><h2 id="c73a" class="lk jp hi bd jq ll lm ln ju lo lp lq jy jb lr ls kc jf lt lu kg jj lv lw kk lx bi translated">2.运行Docker图像-</h2><p id="7315" class="pw-post-body-paragraph iq ir hi is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">在我们创建了docker映像之后，我们必须使用-</p><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ml"><img src="../Images/819e938a8cf96318bfe9ca85248a9504.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hDDIqvM2TuN1h-MeEaYXFA.png"/></div></div></figure><ul class=""><li id="a5a8" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">特权用于赋予主机的容器根功能，允许访问普通容器中无法访问的资源。</li><li id="f42d" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">我们设置了主机的<strong class="is hj">端口9999 </strong>来访问jenkins工作的docker容器的<strong class="is hj">端口8080 </strong>。</li><li id="102f" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">-v将主机的/连接到docker容器的/主机。</li></ul><p id="a776" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">运行该命令后，我们得到-</p><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mg"><img src="../Images/af60905f8398262f268cccdacd64c531.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UaVsX3cMnlg3cuazax5sUQ.png"/></div></div></figure><h2 id="edd9" class="lk jp hi bd jq ll lm ln ju lo lp lq jy jb lr ls kc jf lt lu kg jj lv lw kk lx bi translated">3.建立詹金斯-</h2><ul class=""><li id="2d6a" class="kr ks hi is b it lf ix lg jb mm jf mn jj mo jn kw kx ky kz bi translated">复制运行docker映像后给出的密码。</li><li id="3b90" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">转到浏览器</li><li id="718a" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">然后输入主机的URL-Ip:9999</li></ul><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mp"><img src="../Images/aed25521a88b072b3d6c672c2a5df948.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9VegHAJoHu1S7T_caZq-sA.png"/></div></div></figure><ul class=""><li id="1e1d" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">您可以通过进入<strong class="is hj">管理jenkins选项卡来更改admin的密码。</strong></li><li id="ba87" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">成功完成后，您将获得-</li></ul><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mq"><img src="../Images/4a4a5b2f30c10b9601cc2f6a695e7468.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p901RHwFxsoN8nJUlR_Xng.png"/></div></div></figure><h2 id="ec67" class="lk jp hi bd jq ll lm ln ju lo lp lq jy jb lr ls kc jf lt lu kg jj lv lw kk lx bi translated"><strong class="ak"> 4。设置我们的本地git存储库- </strong></h2><p id="a160" class="pw-post-body-paragraph iq ir hi is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">首先，我创建了一个名为<a class="ae mr" href="https://github.com/Harasis/Jenkins_Automation_T2" rel="noopener ugc nofollow" target="_blank"> Jenkins_Automation_T2 </a>的空<a class="ae mr" href="https://github.com/Harasis/MachineLearning_Automation" rel="noopener ugc nofollow" target="_blank"> Github </a>存储库。然后，通过使用基本的git命令，我将代码上传到了那个Repo。</p><p id="c7ee" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，我配置了一个提交后脚本，每当开发人员提交任何新的更改时，它将自动推送我的代码。</p><ul class=""><li id="3e0e" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">为此，您必须转到您的代码文件夹，在该文件夹中您设置了。饭桶</li><li id="b818" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">然后使用[$cd /。git/hooks ]转到钩子目录</li><li id="29b8" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">然后使用[$cat &gt; post-commit]创建一个脚本，当您提交时，该脚本将推送您的代码</li><li id="b8c1" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">在提交后，写下下图中的内容，按ctrl+d保存。</li><li id="2745" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">然后转到主代码文件夹，尝试提交。</li></ul><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ms"><img src="../Images/4e7e2656b04206f9e5d0b09918dcbd2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K61d3sSCksLezA9nKomPog.png"/></div></div></figure><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mt"><img src="../Images/18ffd53e704ee9c20f4563361235ffb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mkJRjNV6HaKSbFcETZSbAA.png"/></div></div></figure><p id="c52e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> 5。在Rhel- </strong>中为私有ip设置 <a class="ae mr" href="https://ddos-guard.net/en/terminology/technology/ip-tunnel" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">隧道</strong> </a> <strong class="is hj"/></p><p id="dbcb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在第3步中，我们必须在Github repo中设置web-hooks，我使用的是私有ip，但是Github在公共世界上，Github需要访问我们的私有ip，Jenkins在这个私有IP上运行。隧道的概念将帮助我们。</p><p id="287c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们为詹金斯正在运行的端口和协议设置了ngrok T21软件。在我的例子中，Jenkins运行在docker的端口9999上，并使用http协议。使用命令-</p><blockquote class="lz ma mb"><p id="4b7d" class="iq ir ly is b it iu iv iw ix iy iz ja mc jc jd je md jg jh ji me jk jl jm jn hb bi translated"><em class="hi"> ]#。/ngrok http 9999 </em></p></blockquote><p id="770b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将使用ngrok提供的ip在Github repo中设置我们的web-hooks。</p><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mu"><img src="../Images/c05b5e6ba64547ea20e8247117566140.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U4Fhjh3xBau80h18o7F6ng.png"/></div></div></figure><p id="6f31" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> 6。在Github Repo中设置Web挂钩- </strong></p><p id="7177" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将需要我们的Jenkis JOB1的web-hooks，它将检测Github repo中的任何变化，并将其发送到我们指定位置的Rehl Os</p><ul class=""><li id="9f0b" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">要设置Web挂钩，我们必须访问我们的git hub库，然后</li></ul><blockquote class="lz ma mb"><p id="1a7b" class="iq ir ly is b it iu iv iw ix iy iz ja mc jc jd je md jg jh ji me jk jl jm jn hb bi translated"><em class="hi"> - &gt;设置- &gt;在选项- &gt; Webhooks - &gt;添加Webhook - &gt;输入您的密码- &gt;在有效负载url中输入【ngrok _ IP/github-web hook/】-&gt;将内容类型更改为【应用程序/JSON】-&gt;然后保存Webhook </em></p></blockquote><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mv"><img src="../Images/f9a09839696f5b389783d6ba79182cac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_vKS062hXi_eco_n1NPRgg.png"/></div></div></figure><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mw"><img src="../Images/069678e005defb72c12175ff3ca269b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2R-KYe_V2wQcrHU_5iKr9Q.png"/></div></div></figure><ul class=""><li id="0dff" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">然后更新webhook</li></ul><p id="060e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果一切正常，你会看到绿色箭头-</p><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mx"><img src="../Images/689068b732488be95a763aaf48e73727.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1hnZbRJ1FVSgHOicp7Icnw.png"/></div></div></figure><h2 id="107e" class="lk jp hi bd jq ll lm ln ju lo lp lq jy jb lr ls kc jf lt lu kg jj lv lw kk lx bi translated">7.在詹金斯创建工作1-</h2><p id="0a3d" class="pw-post-body-paragraph iq ir hi is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">当开发者推送任何更新时，Job1会自动提取github库。</p><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es my"><img src="../Images/4e9304774482fbd55436458985dae536.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6yW04uL0irA9mKO2MA_oHg.png"/></div></div></figure><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mz"><img src="../Images/64522715fc79f866fccf3dcf4954c02b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*eTyifTK3XcnxiU76.png"/></div></div></figure><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es na"><img src="../Images/6d73762a644e52896c4dac1e3df89dbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OpKaA0XT69NDoLfhTHOKgQ.png"/></div></div></figure><h2 id="ba44" class="lk jp hi bd jq ll lm ln ju lo lp lq jy jb lr ls kc jf lt lu kg jj lv lw kk lx bi translated">8.在詹金斯创建Job2</h2><p id="2d67" class="pw-post-body-paragraph iq ir hi is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">Job2将查看代码或程序文件，然后自动启动相应的语言解释器安装映像容器来部署代码，即，如果代码是PHP，那么jenkins应该启动已经安装了PHP的容器，如果代码是HTML，那么Jenkins应该使用httpd启动容器。</p><p id="f663" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你必须从<strong class="is hj"> dockerhub中提取</strong>相应的图片。</p><p id="627f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对我来说，我有-</p><ul class=""><li id="7928" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">html文件的Httpd图像。</li></ul><blockquote class="lz ma mb"><p id="a94c" class="iq ir ly is b it iu iv iw ix iy iz ja mc jc jd je md jg jh ji me jk jl jm jn hb bi translated">]#docker pull httpd</p></blockquote><ul class=""><li id="05d5" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">php文件的个性化图像。</li></ul><blockquote class="lz ma mb"><p id="b089" class="iq ir ly is b it iu iv iw ix iy iz ja mc jc jd je md jg jh ji me jk jl jm jn hb bi translated">]# docker pull vimal 13/Apache-web server-PHP</p></blockquote><blockquote class="nb"><p id="b4a8" class="nc nd hi bd ne nf ng nh ni nj nk jn dx translated"><strong class="ak"> <em class="nl">这些图片下载到基础操作系统</em> </strong></p></blockquote><figure class="nn no np nq nr ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nm"><img src="../Images/a72b8ac66961ce1f68a748abb5e48942.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rwzjGOojLkU0TZlQxzryRg.png"/></div></div></figure><p id="b3db" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">工单2配置- </strong></p><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ns"><img src="../Images/d5c4106f49b0fff58161b07d2578ac27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NP4PlURpMOcuzlFYXdbUVQ.png"/></div></div></figure><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nt"><img src="../Images/ea7284d11d937a4ce0e09375f3c70b22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lKwEJWptG_QLP2lIhMWlnA.png"/></div></div></figure><p id="0bb2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里的<strong class="is hj"> chroot </strong>用于将docker容器的目录复制到我们的BaseOS。换句话说，Jenkins正在处理一个容器，因此github文件将被复制到docker容器中的文件夹<strong class="is hj"> /host/git_repository </strong>中。但是我们已经在基本操作系统中安装了docker镜像，我们需要运行。html和。php文件。</p><p id="462a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，使用chroot可以将/git_repository从conatiner复制到BaseOS。</p><p id="24d4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">如果一切正常，您可以检查网页是否已部署。</strong></p><figure class="kn ko kp kq fd ij er es paragraph-image"><div class="er es nu"><img src="../Images/04893b429e0bb3c9f13efab9589ce96d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/1*4Hf0oIzuHA7JCR0mybvMqA.png"/></div><figcaption class="mh mi et er es mj mk bd b be z dx translated">php站点已部署</figcaption></figure><figure class="kn ko kp kq fd ij er es paragraph-image"><div class="er es nv"><img src="../Images/01dcb159960acbada55d90767eec9c56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*q0UvAMHMaN-TDTTZv6zk4A.png"/></div><figcaption class="mh mi et er es mj mk bd b be z dx translated">html网站已部署</figcaption></figure><h2 id="14a0" class="lk jp hi bd jq ll lm ln ju lo lp lq jy jb lr ls kc jf lt lu kg jj lv lw kk lx bi translated">9.在詹金斯创建工作3-</h2><p id="bc02" class="pw-post-body-paragraph iq ir hi is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">Job3将测试我们的网站是否工作。</p><p id="d2f6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我已经把Job3分成了<strong class="is hj"> Job3_html </strong>和<strong class="is hj"> Job3_php。</strong></p><p id="331e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Job3_html将检查html页面的状态。</p><p id="20dd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Job3_php将检查php页面的状态。</p><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nw"><img src="../Images/89d1b462ca0c448e0752b4e605e7528b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ARZaC71kQHLMipDAdILg4A.png"/></div></div></figure><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nx"><img src="../Images/42d5d2254b4785052632315dfa0f2bf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bgp4KNL4ex4LFoX1AOeEDA.png"/></div></div></figure><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nw"><img src="../Images/827a6fc0e5baa4572d6e14580c8cc664.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wd-iIy1-7j09deHaG6Zvjg.png"/></div></div></figure><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ny"><img src="../Images/97277af5313370a4ca085f83644b663b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6jXt8MORCWu5EM_58AIl_w.png"/></div></div></figure><h2 id="e633" class="lk jp hi bd jq ll lm ln ju lo lp lq jy jb lr ls kc jf lt lu kg jj lv lw kk lx bi translated">10.在詹金斯创造就业机会4-</h2><p id="1ff3" class="pw-post-body-paragraph iq ir hi is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">Job4将向开发人员发送确认邮件。</p><p id="7ead" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我再次把Job4分成了<strong class="is hj"> Job4_html </strong>和<strong class="is hj"> Job4_php。</strong></p><ul class=""><li id="3b5f" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">Job4_html将发送的确认邮件。html站点开发者使用python文件-<a class="ae mr" href="https://github.com/Harasis/Jenkins_Automation_T2/blob/master/mail.py" rel="noopener ugc nofollow" target="_blank"><strong class="is hj"><em class="ly">mail . py</em></strong></a></li><li id="ec0a" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">Job4_php将发送确认邮件。php站点开发者使用python文件-<a class="ae mr" href="https://github.com/Harasis/Jenkins_Automation_T2/blob/master/mail_php.py" rel="noopener ugc nofollow" target="_blank"><strong class="is hj"><em class="ly">mail _ PHP . py</em></strong></a></li></ul><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nz"><img src="../Images/a20a71885e78641e49966b4e78a1ab1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ChTQ4XL9mHRlmfoABVjNDQ.png"/></div></div><figcaption class="mh mi et er es mj mk bd b be z dx translated">将在Job3_html之后触发</figcaption></figure><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es oa"><img src="../Images/32c9d053cb0fc7d0a624670a03a7426d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RWZ96XMpzafbuFPaoyfNvw.png"/></div></div></figure><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ob"><img src="../Images/6208f07fc0c27030d2d2394f80397ff1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GFTNjaIrPNVXTA6bl8QIuw.png"/></div></div><figcaption class="mh mi et er es mj mk bd b be z dx translated">Job3_php后会触发</figcaption></figure><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es oc"><img src="../Images/0dbf76d45560ae65cf87eac81a8f08cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lOrInWu1JJjvO7hfXE-Qyg.png"/></div></div></figure><h2 id="1345" class="lk jp hi bd jq ll lm ln ju lo lp lq jy jb lr ls kc jf lt lu kg jj lv lw kk lx bi translated">11.构建管道-</h2><p id="20ab" class="pw-post-body-paragraph iq ir hi is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">可以使用Jenkins中的构建管道插件来创建。</p><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es od"><img src="../Images/bba3e5d9cacde67d996ba6d9006e59e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c6UWGTuv_dS1Cwjaqao_tg.png"/></div></div></figure><h2 id="3a45" class="lk jp hi bd jq ll lm ln ju lo lp lq jy jb lr ls kc jf lt lu kg jj lv lw kk lx bi translated">12.在詹金斯创造就业机会5-</h2><p id="798b" class="pw-post-body-paragraph iq ir hi is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">这项工作超出了我们的能力范围。该任务将<strong class="is hj">监控</strong>网站运行的容器。由于任何原因失败，则该作业应<strong class="is hj">自动再次启动</strong>相应的容器。</p><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es oe"><img src="../Images/b84a7201a2a054fb8b94d11a1a088711.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bkCvQQm9URE-AAWcJEoC5A.png"/></div></div></figure><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es of"><img src="../Images/cf260cee3ecbe843e78a7973eb9c9464.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0uRxSJNU8nxfbeMwvM11-A.png"/></div></div></figure><p id="d180" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果一切正常，那么Job5的控制台输出将是-</p><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es og"><img src="../Images/c908fda0b2213874c1171a74a2333b48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WNShPPq7wBZi9DWx3cczsA.png"/></div></div></figure><h1 id="be99" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated"><strong class="ak"> <em class="nl">项目完成！！</em>T3】</strong></h1><p id="2a3f" class="pw-post-body-paragraph iq ir hi is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hb bi translated">谢谢你阅读我的博客。</p><p id="a661" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">祝你有愉快的一天。</p><p id="2fe1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Github报告-</p><p id="68bf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">【https://github.com/Harasis/Jenkins_Automation_T2 T4】</p></div></div>    
</body>
</html>