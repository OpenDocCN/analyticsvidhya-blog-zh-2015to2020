<html>
<head>
<title>Web Scraping and Coursera</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">网络抓取和课程a</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/web-scraping-and-coursera-8db6af45d83f?source=collection_archive---------5-----------------------#2020-05-25">https://medium.com/analytics-vidhya/web-scraping-and-coursera-8db6af45d83f?source=collection_archive---------5-----------------------#2020-05-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="008b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你好..在一次黑客马拉松中，我正在做一个课程推荐项目，必须为课程生成数据集。现在这种数据集的可用性非常低，因此唯一的选择就是网络抓取。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/5df50d45d15e5fef9e7af9f4c42015f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YMjcl6bP4mbVBrrx.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">来自谷歌图片的网络废弃图片</figcaption></figure><blockquote class="jt ju jv"><p id="00f7" class="if ig jw ih b ii ij ik il im in io ip jx ir is it jy iv iw ix jz iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="hi">网页抓取</em> </strong> <em class="hi">又称网页数据抽取，是从一个网站中检索或“抓取”数据的过程。与单调乏味、令人麻木的手动提取数据的过程不同，web抓取使用智能自动化从看似无穷无尽的互联网前沿检索数百、数百万甚至数十亿个数据点。</em></p></blockquote><p id="da88" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这只是一些随机的定义。就像上面的图片一样，你需要一些技术来滚动浏览web应用程序，并获取构建数据集的功能。</p><p id="f69c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最好的开始方式是使用已经这样做的库。是的…这是正确的，我们为此包括美丽的汤库。你可以在这里得到文档:<a class="ae ka" href="https://pypi.org/project/beautifulsoup4/" rel="noopener ugc nofollow" target="_blank">https://pypi.org/project/beautifulsoup4/</a></p><p id="96b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了让我们了解它是如何工作的，让我们通过一个例子来废弃一个网站并为其生成数据集。我们将致力于抓取我们著名的学习网站Coursera。在这里，我们有一个很好的机会来废弃这些数据，因为我们有一个URL，其中包含了所有课程的详细信息，就像一张卡片:<a class="ae ka" href="https://www.coursera.org/courses" rel="noopener ugc nofollow" target="_blank">https://www.coursera.org/courses</a></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kb"><img src="../Images/463e66e7e015106369ee41a11d61adc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZZQKLQXsPRqr_6t_LBtlNQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">显示所有可用课程的网站。</figcaption></figure><p id="962d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们需要导入所需的库进行抓取。</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="66ab" class="kh ki hi kd b fi kj kk l kl km">from bs4 import BeautifulSoup                   <br/>import requests</span></pre><p id="819c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里BeautifulSoup用于抓取目的，requests库将帮助我们从python向网站发送Http请求以获取web内容。</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="a359" class="kh ki hi kd b fi kj kk l kl km">response = requests.get("https://www.coursera.org/courses")</span></pre><p id="ac08" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们需要使用get方法，在该方法中，我们传递要解析为URL的链接。requests . get(“…”)将帮助我们获取web的内容，我们可以将它保存到一个变量中，比如response。</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="a5f4" class="kh ki hi kd b fi kj kk l kl km">html_soup = BeautifulSoup(response.content, 'html.parser')</span></pre><p id="8296" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们在这里做汤。所以我们有BeautifulSoup方法，它有两个参数，一个是我们想要的内容，另一个是我们想要用什么类型的解析器来解析我们的页面。我们在这里使用html.parser。我们把它放到一个名为html_soup的变量中。我们可以看到，当我们查看界面时，课程被列为一个列表，比如一页中有多达10门课程，后面有多达100页。因此，我们不能简单地在一个页面上实现我们的soup，因为我们需要获取所有的课程，因此我们需要使用两个循环，一个用于获取每个页面，另一个用于遍历每个列表。</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="2565" class="kh ki hi kd b fi kj kk l kl km">url = "https://www.coursera.org/courses?page=" +str(i) + "&amp;index=prod_all_products_term_optimization"</span></pre><p id="677e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是我们可以在每一页中找到的url，只有page=改变后的数字，因此在第一个循环中，我们可以通过使数字动态化来放置此代码以获得url。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kn ko l"/></div></figure><p id="3ef0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这有助于我们简单地通过传递标签、我们想要解析的内容和类来浏览整个课程。为了简单明了，让我们举个例子。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kb"><img src="../Images/d60889ac2399732ffc3da625d888da9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kEKYxFplbda12LblY7QFcw.png"/></div></div></figure><p id="5848" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">只看高亮的那个。这是相关的标题或课程名称。我们可以看到，与此相关的标签是“h2”，类是“颜色-主要-文本卡-标题标题-1-文本”，这是第一个和第三个参数。在第二个参数中，我们传递了一个空列表，我们希望在每个课程中添加这个列表。我们删除的内容保存在这里，稍后将成为数据帧的一整列。</p><p id="7388" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以在函数中看到，我用了一个for循环得到了100页。这可能因人而异，我这样做只是为了获取一些课程数据作为演示。对于第二个循环，我从0到9遍历一页中的所有课程。如前所述，我们通过BeautifulSoup(…)传递内容和解析器来获取数据。</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="0198" class="kh ki hi kd b fi kj kk l kl km">x = soup.find_all(html_tag, class_ = tag_class)[j].get_text()</span></pre><p id="4490" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">稍后，我们使用soup中的find_all方法来获取scrapping中引用的确切文本，并将其保存到变量x中。在每次迭代中，该文本都被追加到一个列表中，从而获得整个列数据集。</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="58a2" class="kh ki hi kd b fi kj kk l kl km">course_title = []               <br/>course_organization = []                       course_Certificate_type = []           <br/>course_rating = []                      <br/>course_difficulty = []                       course_students_enrolled = []</span></pre><p id="5646" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为我们想从网站上删除的内容创建空列表。</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="18c5" class="kh ki hi kd b fi kj kk l kl km">auto_Scrapper_Class('h2',course_title,'color-primary-text card-title headline-1-text') <br/>                      auto_Scrapper_Class('span',course_organization,'partner-name m-b-1s')          <br/>            auto_Scrapper_Class('div',course_Certificate_type,'_jen3vs _1d8rgfy3')  <br/>                     auto_Scrapper_Class('span',course_rating,'ratings-text')       <br/>                auto_Scrapper_Class('span',course_difficulty,'difficulty')     <br/>                  auto_Scrapper_Class('span',course_students_enrolled,'enrollment-number')</span></pre><p id="b61d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们传递所有必需的参数，并等待函数完成它的工作。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kn ko l"/></div></figure><p id="2404" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我们使用我们的基本pandas来制作一个名为course_df的数据帧，方法是将所有数据分成列，每个列都有一个索引。稍后，我们简单地根据标题对其进行排序，然后使用，</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="fe69" class="kh ki hi kd b fi kj kk l kl km">course_df.to_csv(UCoursera_Courses.csv)</span></pre><p id="c197" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将收集到的数据制作成一个新的csv文件。这有助于我们获得新的数据集，可以在以后用于数据分析和可视化。</p><p id="10a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">示例输出如下所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kp"><img src="../Images/bfbb08e0d18bda881d9e326ffc7d5880.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mEcMWF3i3jCu5DUCm3YX2Q.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">简而言之，数据集示例。</figcaption></figure><blockquote class="jt ju jv"><p id="04bd" class="if ig jw ih b ii ij ik il im in io ip jx ir is it jy iv iw ix jz iz ja jb jc hb bi translated">如果你喜欢这篇文章，并且觉得它很有帮助，请继续关注。我很乐意与你合作，一起做项目。</p></blockquote><p id="da58" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jw">代码做刮:</em> </strong></p><div class="kq kr ez fb ks kt"><a href="https://github.com/Siddharth1698/Coursera-Course-Dataset/blob/master/scrapping_coursera.py" rel="noopener  ugc nofollow" target="_blank"><div class="ku ab dw"><div class="kv ab kw cl cj kx"><h2 class="bd hj fi z dy ky ea eb kz ed ef hh bi translated">悉达多1698/Coursera-课程-数据集</h2><div class="la l"><h3 class="bd b fi z dy ky ea eb kz ed ef dx translated">我试图通过coursera网站生成Coursera近890门课程的课程数据集。…</h3></div><div class="lb l"><p class="bd b fp z dy ky ea eb kz ed ef dx translated">github.com</p></div></div><div class="lc l"><div class="ld l le lf lg lc lh jn kt"/></div></div></a></div><p id="292b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jw">被抓取的数据集:</em> </strong></p><div class="kq kr ez fb ks kt"><a href="https://www.kaggle.com/siddharthm1698/coursera-course-dataset" rel="noopener  ugc nofollow" target="_blank"><div class="ku ab dw"><div class="kv ab kw cl cj kx"><h2 class="bd hj fi z dy ky ea eb kz ed ef hh bi translated">Coursera课程数据集</h2><div class="la l"><h3 class="bd b fi z dy ky ea eb kz ed ef dx translated">课程数据集从Coursera网站废弃</h3></div><div class="lb l"><p class="bd b fp z dy ky ea eb kz ed ef dx translated">www.kaggle.com</p></div></div><div class="lc l"><div class="li l le lf lg lc lh jn kt"/></div></div></a></div><p id="7ca5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">再次感谢..并享受刮……:)</p></div></div>    
</body>
</html>