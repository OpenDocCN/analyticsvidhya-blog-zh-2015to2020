<html>
<head>
<title>Asynchronous programming in a nutshell (Theory)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">简言之，异步编程(理论)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/asynchronous-programming-in-a-nutshell-theory-d5fd07cf3b22?source=collection_archive---------13-----------------------#2020-10-27">https://medium.com/analytics-vidhya/asynchronous-programming-in-a-nutshell-theory-d5fd07cf3b22?source=collection_archive---------13-----------------------#2020-10-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/549684d89e38afd360345e804308c32d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cZCsMl7Dvu7S2DFqBl14zg.jpeg"/></div></div></figure><p id="78dc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在程序员的日常生活中，您很可能遇到过异步编程。你可能已经通过API使用过它，比如Java中的<a class="ae jo" href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html" rel="noopener ugc nofollow" target="_blank">线程API </a>，C#中的<a class="ae jo" href="https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task?view=netcore-3.1" rel="noopener ugc nofollow" target="_blank">任务API </a>，或者是一个库，比如<a class="ae jo" href="https://rxjs-dev.firebaseapp.com/guide/overview" rel="noopener ugc nofollow" target="_blank"> RXJS </a>。如果对异步编程没有很好的理解，就很难欣赏或使用这些API和库。本文的目标是用简单的术语解释异步编程的概念。</p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="5fb5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">大多数编程语言以“<strong class="is hj">从上到下的垂直线</strong>执行，这意味着执行将从顶部开始，逐行执行，一次只发生一件事。如果一个方法或函数依赖于另一个函数，那么它必须等到那个函数完成才能继续。这将一直持续到程序结束。在编程术语中，这被称为“<strong class="is hj">同步</strong></p><p id="7afc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里有一个stack blitz上的同步类型脚本代码示例。代码将执行第一行并打印到控制台“Hello world”，然后移动到下一行，这是一个“for循环”,并迭代10次以完成循环，之后，它将继续执行最后一段代码，将“Goodbye word”打印到控制台。</p><p id="a3a5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://stackblitz.com/edit/typescript-rze6xw" rel="noopener ugc nofollow" target="_blank">https://stackblitz.com/edit/typescript-rze6xw</a></p><h2 id="1983" class="jw jx hi bd jy jz ka kb kc kd ke kf kg jb kh ki kj jf kk kl km jj kn ko kp kq bi translated">现实生活中的例子</h2><p id="4cc3" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">让我们用一个真实的例子来理解“同步”这个术语。想象一下，你在一家餐厅，和其他客人坐在一张桌子旁，其他客人也坐在四张不同的桌子旁，你们都在等着点菜。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kw"><img src="../Images/2e295d70219fe5791673e74bcb9c74b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o9sIemKqJWhka_ZSNMQz5w.jpeg"/></div></div></figure><p id="518d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有一个服务员被分配到你的桌子和其他四张桌子。如果女服务员要以同步方式操作，她将以下列方式操作:</p><ol class=""><li id="548d" class="lb lc hi is b it iu ix iy jb ld jf le jj lf jn lg lh li lj bi translated">注意第一桌</li><li id="215f" class="lb lc hi is b it lk ix ll jb lm jf ln jj lo jn lg lh li lj bi translated">请他们点菜</li><li id="3faf" class="lb lc hi is b it lk ix ll jb lm jf ln jj lo jn lg lh li lj bi translated">把它拿到厨房</li><li id="7a29" class="lb lc hi is b it lk ix ll jb lm jf ln jj lo jn lg lh li lj bi translated">等待厨师准备他们的食物</li><li id="e6e7" class="lb lc hi is b it lk ix ll jb lm jf ln jj lo jn lg lh li lj bi translated">把他们的食物放回他们的桌子</li></ol><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/530d76f1edae4caa6defe59f51f39f88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vH3NxfycWGt4wSpTIRKtcQ.jpeg"/></div></div></figure><p id="872f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">只有在上述5个步骤之后，女服务员才会继续到下一张桌子，重复同样的动作。如果这真的是现实，想象一下你会多么沮丧地等着轮到你。</p><p id="2713" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是，如果第四步需要更长的时间来完成，那么女服务员在等待厨师准备食物的同时继续从不同的桌子上接受其他人的订单，而不是停下来，这难道没有意义吗？这就是异步编程的概念。</p><p id="2fc1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用异步编程，程序不是暂停等待一个长任务完成(就像上面的餐馆例子)，而是将长任务传递给另一个处理器并继续流程，然后当另一个处理器完成时，它会通知主处理器。</p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><h2 id="19a2" class="jw jx hi bd jy jz ka kb kc kd ke kf kg jb kh ki kj jf kk kl km jj kn ko kp kq bi translated">为什么异步编程是必要的？</h2><p id="4523" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">异步编程解决了“阻塞代码”的问题。如上所述，当一个程序正在执行，并且它到达一段密集的并且花费大量时间来完成的代码时，应用程序将停止或暂停，以等待该特定任务在继续之前完成。</p><p id="916f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这方面的一个例子是在web浏览器上运行的web应用程序，想象一下需要一段时间才能完成的大量代码。它将阻止web应用程序在完成之前在浏览器中呈现。这对任何用户来说都是极其糟糕的体验。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lq"><img src="../Images/904633fde77fbefb016be9ab4cc1817c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vEAFHOKEE7qKXMyUIlnSBw.jpeg"/></div></div></figure><p id="b081" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此时，您可能想知道，为什么编程应用程序会出现这种情况？为什么他们一次只能操作一个任务？这个的答案是<strong class="is hj">线程</strong>！</p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><h2 id="5301" class="jw jx hi bd jy jz ka kb kc kd ke kf kg jb kh ki kj jf kk kl km jj kn ko kp kq bi translated">线程…单线程还是多线程？</h2><p id="9962" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">在上一节中，我提到如果一个web应用程序正在加载一个页面，并到达一个密集的代码，应用程序将会停止。这是因为“<strong class="is hj"> JavaScript(引擎)是单线程的</strong></p><p id="99d0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在软件开发领域，在涉及多任务处理的讨论中，你会几次碰到术语<strong class="is hj">线程</strong>。</p><p id="84fe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">线程是一段可以独立运行的程序的执行。每个线程一次只能执行一个任务。</strong></p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/f0e20f3a5e35d6022ee45ee1ab91903a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q2cRhVBDsjSbMFDieTKQiw.jpeg"/></div></div></figure><p id="2323" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在计算机编程的早期，大多数计算机都是单核的，这意味着应用程序只能在单核上运行，也就是说一次只能执行一项任务。快进到今天，许多计算机都采用了多核技术。这提供了一次完成多个任务的能力。</p><p id="4d36" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">支持多线程的编程语言，如<a class="ae jo" href="https://www.java.com/en/" rel="noopener ugc nofollow" target="_blank"> Java </a>和<a class="ae jo" href="https://docs.microsoft.com/en-us/dotnet/csharp/" rel="noopener ugc nofollow" target="_blank"> C# </a>，可以利用这些多核来允许程序同时运行多个任务。</p><h2 id="a1d2" class="jw jx hi bd jy jz ka kb kc kd ke kf kg jb kh ki kj jf kk kl km jj kn ko kp kq bi translated">多线程应用程序如何工作？</h2><p id="9933" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">这很简单，主线程将执行应用程序，当它遇到一个密集型任务时，它将把它传递给另一个线程(A)，而主线程继续执行。当线程A结束时，它将把结果返回给主线程。</p><pre class="kx ky kz la fd ls lt lu lv aw lw bi"><span id="a46f" class="jw jx hi lt b fi lx ly l lz ma">Main Tread -&gt; Executes Task A -&gt; Task B -&gt; Task C -&gt; Task E -&gt; <br/>Thread A: Executes intensive Task D</span></pre><h2 id="0d70" class="jw jx hi bd jy jz ka kb kc kd ke kf kg jb kh ki kj jf kk kl km jj kn ko kp kq bi translated">等一下！你说JavaScript是单线程的？</h2><p id="aa0f" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">是的，这是正确的！JavaScript(JS)本身，这意味着<a class="ae jo" href="https://en.wikipedia.org/wiki/JavaScript_engine" rel="noopener ugc nofollow" target="_blank"> JavaScript引擎</a>是一种<strong class="is hj">单线程</strong>语言，即使它运行在多核计算机上。</p><p id="0fbf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可能会对自己说“我很确定我以前在普通JavaScript中执行过异步操作”。</p><p id="9377" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">哪个是真的！</p><p id="80b2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">JavaScript执行异步任务有两种方式。</p><ol class=""><li id="77fc" class="lb lc hi is b it iu ix iy jb ld jf le jj lf jn lg lh li lj bi translated">容器级别的多线程</li><li id="41e3" class="lb lc hi is b it lk ix ll jb lm jf ln jj lo jn lg lh li lj bi translated"><a class="ae jo" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop" rel="noopener ugc nofollow" target="_blank">事件循环</a>(这值得自成一篇)</li></ol><p id="7a31" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">由于JS事件循环需要一篇自己的文章，所以在本文中我将集中讨论第一点。</p><p id="4251" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我之前强调过JavaScript引擎<strong class="is hj">是单线程的。JavaScript是一种需要在容器(浏览器或OS(NodeJS))中执行的语言。</strong></p><p id="7c06" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">JavaScript在其上运行的容器可以提供供JavaScript使用的多线程能力。这方面的一个例子是<a class="ae jo" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API" rel="noopener ugc nofollow" target="_blank"> Web Workers API </a>。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/45583e1c6587388bfc112cfaa3ade157.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7j8sDxOuclp39XEqp2tbfg.jpeg"/></div></div></figure><p id="1fac" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Web workers允许JS脚本在后台独立的线程中运行，与Web应用程序的主线程隔离。这种多线程能力是由浏览器容器提供的，因此<a class="ae jo" href="https://caniuse.com/webworkers" rel="noopener ugc nofollow" target="_blank">并不是所有的浏览器都支持web workers。</a></p><p id="5bde" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">NodeJS也是JS引擎的另一个容器。它通过libuv库证明了多线程处理I/O和网络操作的能力</p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="a261" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">理解异步编程的概念对于任何软件开发人员来说都是至关重要的。如今，如果不使用某种形式的异步编程，很难设计出一个应用程序。我希望这篇文章能够帮助您理解异步编程的基本理论。</p><p id="2ca1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你喜欢这篇文章，一定要点击拍手按钮，也检查我下面的其他文章！</p><ul class=""><li id="88c7" class="lb lc hi is b it iu ix iy jb ld jf le jj lf jn mc lh li lj bi translated"><a class="ae jo" rel="noopener" href="/p/b324d20cc277"> <strong class="is hj">地图vs WeakMap </strong> </a></li><li id="39e3" class="lb lc hi is b it lk ix ll jb lm jf ln jj lo jn mc lh li lj bi translated"><a class="ae jo" href="https://medium.com/p/7d254b495c54/edit" rel="noopener"> <strong class="is hj">角度路由:命令式vs PopState </strong> </a></li><li id="cd66" class="lb lc hi is b it lk ix ll jb lm jf ln jj lo jn mc lh li lj bi translated"><a class="ae jo" rel="noopener" href="/@ericsarpong/what-is-a-typescript-tuple-814a016f61fd"> <strong class="is hj">什么是打字稿元组</strong> </a></li><li id="65bd" class="lb lc hi is b it lk ix ll jb lm jf ln jj lo jn mc lh li lj bi translated"><a class="ae jo" rel="noopener" href="/@ericsarpong/deep-dive-into-javascript-map-object-24c012e0b3fe"> <strong class="is hj">深度潜入Javascript图</strong> </a></li></ul></div></div>    
</body>
</html>