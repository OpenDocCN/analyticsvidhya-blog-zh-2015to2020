<html>
<head>
<title>Game of Thrones — Battles Analysis and Predicting Victory</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">《权力的游戏》——战斗分析和胜利预测</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/game-of-thrones-battles-analysis-and-predicting-victory-6197d961f587?source=collection_archive---------10-----------------------#2020-02-19">https://medium.com/analytics-vidhya/game-of-thrones-battles-analysis-and-predicting-victory-6197d961f587?source=collection_archive---------10-----------------------#2020-02-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/a15b584c0d88ff153ebaa2ba28893b4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ufHqaQt7DMrL1rXH6ENZTg.jpeg"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">权力的游戏——私生子之战，盾墙(第六季第九集)</figcaption></figure><div class=""/><div class=""><h2 id="9fbc" class="pw-subtitle-paragraph iu hw hx bd b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl dx translated"><strong class="ak"> Udacity数据科学家Nanodegree博文</strong></h2></div></div><div class="ab cl jm jn gp jo" role="separator"><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr"/></div><div class="hb hc hd he hf"><p id="9dde" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">《权力的游戏》是一部受欢迎的奇幻电视剧，改编自乔治·RR·马丁写的一系列书籍。</p><p id="5290" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">作为这部热播电视剧的粉丝，每一季的战斗场面都让我惊叹不已。我最喜欢的一场战斗是第六季第九集的“私生子之战”。我喜欢这场战斗的原因是琼恩·雪诺成功地说服了自由民加入他的军队与波顿家族作战。就参与战斗排序的人数而言，这一集导演得很好，而且在这几集中有许多详细的攻击。</p><p id="64f9" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">我的博客文章分析了克里斯·阿尔邦的“五王之战”数据集，可以在<a class="ae kp" href="https://github.com/chrisalbon/war_of_the_five_kings_dataset" rel="noopener ugc nofollow" target="_blank">这里</a>找到。这是一个伟大的系列中所有战斗的集合。</p><p id="dcde" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">另外，如果你想跳到实际的代码，我的GitHub repo可以在这里找到<a class="ae kp" href="https://github.com/hneaz/udacity_data_scientist/tree/master/p4_intro_to_data_science" rel="noopener ugc nofollow" target="_blank"/>。</p><h1 id="2607" class="kq kr hx bd ks kt ku kv kw kx ky kz la jd lb je lc jg ld jh le jj lf jk lg lh bi translated"><strong class="ak">关键问题</strong></h1><p id="6c84" class="pw-post-body-paragraph jt ju hx jv b jw li iy jy jz lj jb kb kc lk ke kf kg ll ki kj kk lm km kn ko hb bi translated">我计划解决战斗数据集中的三个关键问题:</p><p id="8dbc" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">在任何情况下，哪家赢得的战斗最多？</p><p id="7a68" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated"><strong class="jv hy"> 2)给定进攻军队的规模，防守军队的预期规模是多少？</strong></p><p id="53aa" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">什么因素促成了一场战役的胜利？</p><h1 id="5cd3" class="kq kr hx bd ks kt ku kv kw kx ky kz la jd lb je lc jg ld jh le jj lf jk lg lh bi translated"><strong class="ak">数据集</strong></h1><p id="5ea0" class="pw-post-body-paragraph jt ju hx jv b jw li iy jy jz lj jb kb kc lk ke kf kg ll ki kj kk lm km kn ko hb bi translated">我将展示数据集的一小部分，但是可以在Kaggle上的<a class="ae kp" href="https://www.kaggle.com/mylesoneill/game-of-thrones#battles.csv" rel="noopener ugc nofollow" target="_blank">这里</a>找到全部数据。</p><figure class="lo lp lq lr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ln"><img src="../Images/24a1e04e74e05d182dfc0aa92f3ddfb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N9PwpjPRpaJV0KlEYOh_ew.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">“battles.csv”的样本数据集</figcaption></figure><figure class="lo lp lq lr fd hk er es paragraph-image"><div class="er es ls"><img src="../Images/61a2fb6aa29fbe03a7ad3c74bd0a1241.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*hPoWy5ZGpsCnwJztINu-Jg.jpeg"/></div></figure><h1 id="f707" class="kq kr hx bd ks kt ku kv kw kx ky kz la jd lb je lc jg ld jh le jj lf jk lg lh bi translated"><strong class="ak">探索性数据分析</strong></h1><p id="3c60" class="pw-post-body-paragraph jt ju hx jv b jw li iy jy jz lj jb kb kc lk ke kf kg ll ki kj kk lm km kn ko hb bi translated"><strong class="jv hy">攻击者赢/输百分比</strong></p><p id="cadb" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">分析的第一部分，我看了以下进攻王的胜败百分比:</p><ul class=""><li id="6190" class="lt lu hx jv b jw jx jz ka kc lv kg lw kk lx ko ly lz ma mb bi translated">巴隆/攸伦·葛雷乔伊</li><li id="5740" class="lt lu hx jv b jw mc jz md kc me kg mf kk mg ko ly lz ma mb bi translated">乔佛里/托曼·拜拉席恩</li><li id="8280" class="lt lu hx jv b jw mc jz md kc me kg mf kk mg ko ly lz ma mb bi translated">罗柏·史塔克</li><li id="ddf7" class="lt lu hx jv b jw mc jz md kc me kg mf kk mg ko ly lz ma mb bi translated">史坦尼斯·拜拉席恩</li><li id="5c2a" class="lt lu hx jv b jw mc jz md kc me kg mf kk mg ko ly lz ma mb bi translated">曼斯·雷德</li></ul><figure class="lo lp lq lr fd hk er es paragraph-image"><div class="er es mh"><img src="../Images/ff28ff3d326c03020586c5a277231e12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/1*qoP2tbeuzgzKJQRF0gu2pQ.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">攻击国王的赢/输百分比</figcaption></figure><figure class="lo lp lq lr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mi"><img src="../Images/4d3653e34bed9a662a2298905fa8eacf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PLxYs7urTskvO8hF_pTfnw.png"/></div></div></figure><p id="018e" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">葛雷乔伊以183人的小规模军队赢得了他们作为攻击王的所有七场战斗，而曼斯·雷德却输掉了他唯一一场以10万人攻击只有1240人的防守军队的战斗！数据中的另一个缺失因素是曼斯·雷德把墙作为一个障碍，在我看来，它可以被转换成一个军队的规模来进行比较。看起来如果没有对手，一支小而灵活的军队肯定能赢得一场战斗！</p><p id="72c1" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">乔佛里/托曼·拜拉席恩以4330人的平均进攻规模赢得了大部分战役(13场或92.9%)，并与2559人的守军作战。</p><p id="0d41" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">罗柏·史塔克以4122人的平均攻击军队规模赢得了80%的战斗(10场战斗中的8场)，并与4963人的防御军队作战。</p><p id="62ba" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">最后，史坦尼斯·拜拉席恩以8875人的平均进攻兵力赢得了50%的胜利(4战2胜),并击败了8862人的守军。有趣的是，进攻和防守的军队规模非常相似。</p><p id="73ad" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated"><strong class="jv hy">攻击者胜败百分比——战斗类型</strong></p><p id="cc23" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">有四种类型的战斗:</p><ul class=""><li id="1a44" class="lt lu hx jv b jw jx jz ka kc lv kg lw kk lx ko ly lz ma mb bi translated">激战(14场战斗)</li><li id="84e6" class="lt lu hx jv b jw mc jz md kc me kg mf kk mg ko ly lz ma mb bi translated">围攻(12场战斗)</li><li id="4074" class="lt lu hx jv b jw mc jz md kc me kg mf kk mg ko ly lz ma mb bi translated">伏击(10场战斗)</li><li id="2c2d" class="lt lu hx jv b jw mc jz md kc me kg mf kk mg ko ly lz ma mb bi translated">夷平(2场战斗)</li></ul><p id="6442" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">激战、围攻和伏击是房屋面临的常见战斗。房屋面临夷为平地的情况很少，但一旦发生，就不会有重大的死亡或重大的捕获。</p><figure class="lo lp lq lr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mj"><img src="../Images/acc4b5516d187a5082bd193cc6497553.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ak-4wInK2RYsDcEiZ51V7g.png"/></div></div></figure><p id="686f" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated"><strong class="jv hy">攻击者胜率——战斗类型</strong></p><figure class="lo lp lq lr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mk"><img src="../Images/9f59fc964f1690035f9ffcb6de334384.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nih8So9PIVeo_bJ-VQ6mLw.png"/></div></div></figure><p id="d6bb" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">当这些战斗被分解成攻击王与攻击王的胜率时，我们可以看到葛雷乔伊在每种类型的战斗中都赢了。</p><p id="0dd3" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">史塔克家族在激战中表现不佳，因为他们损失了三分之二的进攻时间。然而，他们作为进攻者在围攻和伏击中总是获胜</p><p id="a8b7" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">与此同时，史坦尼斯·拜拉席恩赢得了50%的激战和围攻。</p><p id="0dd9" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">最后，乔佛里/托曼·拜拉席恩赢得了83.3%的激战，但所有的围攻和伏击。</p><p id="4189" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated"><strong class="jv hy">防御者胜败百分比——战斗类型</strong></p><figure class="lo lp lq lr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ml"><img src="../Images/8510113b49783e431c41bae6700358b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yRE_UU3hIOpRYU-xsKU7hw.png"/></div></div></figure><p id="367a" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">当这些战斗被分解为防守国王对进攻国王的损失百分比时，我们看到乔佛里/托曼·拜拉席恩作为防守者赢得了75%的激战，但只幸存了1/3的围攻。</p><p id="03f0" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">罗柏·史塔克只赢得了1/6的激战，而作为防守者却输掉了所有的伏击和围攻。</p><p id="5975" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">史坦尼斯·拜拉席恩也幸存了1/3的围攻，同时输掉了所有的激战。</p><p id="5048" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated"><strong class="jv hy">权力的游戏对战联盟</strong></p><p id="10a1" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">如果这些战斗和国王被格式化成一个体育联盟，它会是这样的:</p><figure class="lo lp lq lr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mm"><img src="../Images/fb50f19d6845fea6ea97e035b68adf0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F4Rvd0budSHDgvAGyJwMKg.png"/></div></div></figure><figure class="lo lp lq lr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mn"><img src="../Images/cec9628615d31ae1e77bd6a2d1346d9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GslHxVZWWU8mMYnsfwsfpw.png"/></div></div></figure><p id="2422" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">巴隆/欧隆·格雷乔伊和乔佛里/托曼·拜拉席恩的胜率几乎不分上下(分别为63.6%和63.0%)，而史坦尼斯·拜拉席恩的胜率为42.9%，罗柏·史塔克的胜率为37.5%。</p><p id="9e1c" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">这使得巴隆/欧伦格雷乔伊在胜率上成为赢家。</p><p id="9565" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated"><strong class="jv hy">结论</strong></p><p id="22ed" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">即使葛雷乔伊在战斗中进攻时有100%的成功率，我也不会说他们是强者，因为他们没有和一支防守的军队打过仗(基于缺乏数据)，所以我会取消他们的资格。</p><h2 id="9978" class="mo kr hx bd ks mp mq mr kw ms mt mu la kc mv mw lc kg mx my le kk mz na lg nb bi translated"><strong class="ak">乔佛里/托曼·拜拉席恩赢得最多对抗防守军队的战役！</strong></h2><figure class="lo lp lq lr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nc"><img src="../Images/b4d2ea7b5349dd2966a436803fc8139a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y-6JJWJ63IpfGF3QVO186A.jpeg"/></div></div></figure><h1 id="84d6" class="kq kr hx bd ks kt ku kv kw kx ky kz la jd lb je lc jg ld jh le jj lf jk lg lh bi translated">预测建模</h1><p id="ae02" class="pw-post-body-paragraph jt ju hx jv b jw li iy jy jz lj jb kb kc lk ke kf kg ll ki kj kk lm km kn ko hb bi translated">我将使用两种模型来回答这两个问题:</p><p id="2006" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated"><strong class="jv hy"> 2)给定进攻军队的规模，防御军队的预期规模是多少？</strong> →线性回归模型</p><p id="bfcc" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">什么因素促成了一场战役的胜利？ →分类模型</p><h1 id="66d0" class="kq kr hx bd ks kt ku kv kw kx ky kz la jd lb je lc jg ld jh le jj lf jk lg lh bi translated">线性回归模型——预测敌方军队规模</h1><p id="f855" class="pw-post-body-paragraph jt ju hx jv b jw li iy jy jz lj jb kb kc lk ke kf kg ll ki kj kk lm km kn ko hb bi translated">为了创建一个线性回归，攻击者的规模将被绘制成防御者的规模。我想了解这两个变量之间的关系。对于该数据集，异常值和军队规模0在建模前被移除。</p><p id="0c33" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated"><strong class="jv hy">进攻者体型vs防守者体型</strong></p><figure class="lo lp lq lr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nd"><img src="../Images/b183647bc2e7a6334776be7d7cb7f0dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vs8qFgf5dQdyNV1uEkTBAA.png"/></div></div></figure><p id="508d" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">该图显示弱线性相关性为0.438731，相关系数为0.192 (R平方)，这意味着只有19.2 %的方差在因变量中得到解释。图中有两个不同的部分，因此将数据分组可能会给出军队规模之间更好的线性关系。</p><p id="5c08" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated"><strong class="jv hy">攻击者体型与防御者体型——根据战斗类型划分</strong></p><figure class="lo lp lq lr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ne"><img src="../Images/7eb632385259f24544345371f1822c3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AZIUf2OHeB8CrzSmdpcOlg.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated"><strong class="bd ks">攻击者体型与防御者体型——根据战斗类型划分</strong></figcaption></figure><figure class="lo lp lq lr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nf"><img src="../Images/a7868041a000c64a0af8dd17924ea1b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J4a7CgB2c2CmnkqUm_O4mg.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated"><strong class="bd ks">进攻者体型与防守者体型——伏击</strong></figcaption></figure><p id="07dd" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated"><strong class="jv hy">伏击</strong> —当按战斗类型分割数据时，线性模型显著改进。这里，相关系数(R-Square)是0.839，这意味着只有83.9 %的方差在过滤到伏击战斗的因变量中得到解释。这个模型可以用来估计防御军队的规模，如果攻击的房子被伏击，但实际上，防御军队不会准备好这种类型的攻击。</p><figure class="lo lp lq lr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ng"><img src="../Images/3b00b79c1ac9aa6626c60ee17365e1a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1sXEcV6DxrvUUFiDyzn-Dw.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated"><strong class="bd ks">进攻者体型vs防守者体型——激战</strong></figcaption></figure><p id="b121" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated"><strong class="jv hy">激战</strong> —当按战斗类型分割数据时，线性模型显著改善。这里，相关系数(R-Square)是0.468071，这意味着在因变量滤波器中只有46.8 %的方差被解释为激战。有一个0.68的很强的相关性，所以这个模型可以用来估计防御军队的规模，如果攻击房屋涉及一场激战。</p><p id="10f8" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">由于缺乏数据，没有为攻城战生成好的模型。</p><p id="ba7a" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated"><strong class="jv hy">结论</strong></p><p id="2b6e" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">如果一支军队卷入了伏击或激战，他们可以使用线性模型来估计对方军队的规模，但使用伏击模型会比激战模型更准确。</p><figure class="lo lp lq lr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nh"><img src="../Images/1525d21f29df74fa8086751c93d3a122.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ys28Ix-1INbYIVu2HdA1fg.jpeg"/></div></div></figure><h1 id="5d3b" class="kq kr hx bd ks kt ku kv kw kx ky kz la jd lb je lc jg ld jh le jj lf jk lg lh bi translated">分类模型——预测战斗胜利</h1><p id="c489" class="pw-post-body-paragraph jt ju hx jv b jw li iy jy jz lj jb kb kc lk ke kf kg ll ki kj kk lm km kn ko hb bi translated">现在是帖子有趣的部分。我将预测战斗结果，并使用各种分类模型找出有助于战斗胜利的因素:</p><ul class=""><li id="3d59" class="lt lu hx jv b jw jx jz ka kc lv kg lw kk lx ko ly lz ma mb bi translated">逻辑回归(基线模型)</li><li id="b7ac" class="lt lu hx jv b jw mc jz md kc me kg mf kk mg ko ly lz ma mb bi translated">随机森林</li><li id="2226" class="lt lu hx jv b jw mc jz md kc me kg mf kk mg ko ly lz ma mb bi translated">XGBoost</li></ul><p id="5d6b" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">战斗数据集中只有不到40条记录，所以我必须尽可能地清理数据集。</p><p id="e2e6" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated"><strong class="jv hy">特征工程</strong></p><ul class=""><li id="a704" class="lt lu hx jv b jw jx jz ka kc lv kg lw kk lx ko ly lz ma mb bi translated">创建新的功能，如攻击者指挥官计数，防御者指挥官计数，攻击房屋(参与进攻的房屋数量)，防御者房屋(参与防御的房屋数量)</li><li id="bc8a" class="lt lu hx jv b jw mc jz md kc me kg mf kk mg ko ly lz ma mb bi translated">删除了战斗名称、位置、攻击指挥官、防御指挥官等列</li><li id="dee8" class="lt lu hx jv b jw mc jz md kc me kg mf kk mg ko ly lz ma mb bi translated">将分类变量转换为二进制变量，如攻击者国王、防御者国王、攻击者1、防御者1、战斗类型和区域</li><li id="2dfd" class="lt lu hx jv b jw mc jz md kc me kg mf kk mg ko ly lz ma mb bi translated">日志转换了攻击者规模和防御者规模，以减少数据中的差异</li><li id="ac04" class="lt lu hx jv b jw mc jz md kc me kg mf kk mg ko ly lz ma mb bi translated">归一化的数字特征，如攻击者房屋数、防御者房屋数、攻击者指挥官数、防御者指挥官数，以及上一步中经过对数变换的攻击者和防御者规模</li></ul><p id="80f7" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated"><strong class="jv hy">混洗和分割数据</strong></p><p id="761d" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">我使用75%的数据作为训练数据(28条记录)，25%作为测试数据(10条记录)，并在三个模型中使用它们。我还使用了20 k倍交叉验证，这是一种用于在有限数据样本上评估机器学习模型的重采样程序。</p><p id="3831" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated"><strong class="jv hy">模型结果</strong></p><figure class="lo lp lq lr fd hk er es paragraph-image"><div class="er es ni"><img src="../Images/4003beb4ec578d9c54cb863a1e41f053.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*wJ-d4kKelsyYU7W8CcFc4g.png"/></div></figure><p id="5e1c" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">使用逻辑回归的准确度是91.6%，标准偏差是0.2327，我们已经有了一个好的基线分类模型，这是一个好消息。</p><p id="796e" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">使用随机森林的准确度为95.0%，标准偏差为0.119。准确度提高了约3.6%，标准偏差降低了近一半。</p><p id="68b9" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">令人惊讶的是，XGBoost的性能比随机森林模型差(92.5%)，但它仍然是一个好模型。</p><p id="fb86" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated"><strong class="jv hy">随机森林的准确率最高，达到95%，所以我会用这个模型来进一步改进这个模型。</strong></p><h1 id="9d9d" class="kq kr hx bd ks kt ku kv kw kx ky kz la jd lb je lc jg ld jh le jj lf jk lg lh bi translated"><strong class="ak">最重要的五个功能是:</strong></h1><figure class="lo lp lq lr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nh"><img src="../Images/3386cc38f4bb67e4ba664b0216ba4e38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b1w4eG1Jui3ZBbw2ngK3iA.png"/></div></div></figure><ul class=""><li id="dca0" class="lt lu hx jv b jw jx jz ka kc lv kg lw kk lx ko ly lz ma mb bi translated">攻击者规模</li><li id="0bda" class="lt lu hx jv b jw mc jz md kc me kg mf kk mg ko ly lz ma mb bi translated">攻击指挥官计数</li><li id="179b" class="lt lu hx jv b jw mc jz md kc me kg mf kk mg ko ly lz ma mb bi translated">攻击房屋</li><li id="63b1" class="lt lu hx jv b jw mc jz md kc me kg mf kk mg ko ly lz ma mb bi translated">后卫尺寸</li><li id="500f" class="lt lu hx jv b jw mc jz md kc me kg mf kk mg ko ly lz ma mb bi translated">辩护律师事务所</li></ul><h1 id="cefe" class="kq kr hx bd ks kt ku kv kw kx ky kz la jd lb je lc jg ld jh le jj lf jk lg lh bi translated">实现-提取特征重要性</h1><p id="b857" class="pw-post-body-paragraph jt ju hx jv b jw li iy jy jz lj jb kb kc lk ke kf kg ll ki kj kk lm km kn ko hb bi translated">我将数据集缩减为前五个重要特征，并再次将其插入随机森林模型。</p><p id="1650" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">结果如下:</p><figure class="lo lp lq lr fd hk er es paragraph-image"><div class="er es nj"><img src="../Images/1acc595cda9e06da8f7c03393d1f0252.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/format:webp/1*zXWFhRqTStYtUvuMY5CfGg.png"/></div></figure><p id="756d" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">随机森林缩减模型提高到96.6%，标准差略有提高。</p><h1 id="6f90" class="kq kr hx bd ks kt ku kv kw kx ky kz la jd lb je lc jg ld jh le jj lf jk lg lh bi translated"><strong class="ak">重述</strong></h1><ol class=""><li id="0fbf" class="lt lu hx jv b jw li jz lj kc nk kg nl kk nm ko nn lz ma mb bi translated">乔佛里/托曼·拜拉席恩赢得了最多的防御战，因为葛雷乔伊从未与人数超过零的防御军作战。</li><li id="963f" class="lt lu hx jv b jw mc jz md kc me kg mf kk mg ko nn lz ma mb bi translated">如果一支军队卷入了伏击或激战，他们可以使用线性模型来估计对方军队的规模，但使用伏击模型会比激战模型更准确。</li><li id="3b88" class="lt lu hx jv b jw mc jz md kc me kg mf kk mg ko nn lz ma mb bi translated">使用随机森林模型决定胜利的重要因素是攻击者规模，攻击者指挥官数量，攻击房屋，防御者规模，防御者房屋。</li></ol><p id="3e7a" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">[2020年2月21日更新]在通过我的同行进行进一步咨询后，我发现随机森林模型可能不适合这种类型的数据集，因为有更多适合的模型可以预测成对比较的结果，如<a class="ae kp" href="https://en.wikipedia.org/wiki/Bradley%E2%80%93Terry_model" rel="noopener ugc nofollow" target="_blank"> Bradley-Terry模型</a>。如果我有更多的时间，我将致力于这个模型的Python实现，并更新我的帖子。</p><p id="19a1" class="pw-post-body-paragraph jt ju hx jv b jw jx iy jy jz ka jb kb kc kd ke kf kg kh ki kj kk kl km kn ko hb bi translated">点击这里查看我的GitHub repo！</p><h1 id="4c36" class="kq kr hx bd ks kt ku kv kw kx ky kz la jd lb je lc jg ld jh le jj lf jk lg lh bi translated">东尼迪</h1><h1 id="06c5" class="kq kr hx bd ks kt ku kv kw kx ky kz la jd lb je lc jg ld jh le jj lf jk lg lh bi translated"><strong class="ak"> <em class="no">“他们知道我拯救了这座城市。他们知道我赢得了战争”——乔佛里·拜拉席恩</em> </strong></h1><figure class="lo lp lq lr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es np"><img src="../Images/c6417173390cfa3728e40a686f9609f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cMi-5KJkbbBGnIql4HctkA.jpeg"/></div></div></figure></div></div>    
</body>
</html>