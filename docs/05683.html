<html>
<head>
<title>Step-by-Step Guide to Setting up PyHive with python3 on Amazon Linux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Amazon Linux上用python3设置PyHive的分步指南</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/step-by-step-guide-to-setting-up-pyhive-with-python3-on-amazon-linux-83e3e6b6af76?source=collection_archive---------5-----------------------#2020-04-29">https://medium.com/analytics-vidhya/step-by-step-guide-to-setting-up-pyhive-with-python3-on-amazon-linux-83e3e6b6af76?source=collection_archive---------5-----------------------#2020-04-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/00e64f1af5e260c8a7d1d00996af06e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iwfow-9Nsy87wdvU"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">格伦·卡斯滕斯-彼得斯在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="e76b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一个不眠之夜和数百次谷歌搜索之后，我想出了如何设置我的新ec2实例来成功连接hive。</p><p id="22fb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我正在处理AWS数据管道，并使用运行Amazon Linux的AWS提供的现有映像创建一个新的ec2实例。(亚马逊Linux AMI 2018 . 03 . 0 . 2018 08 11 x86 _ 64 HVM EBS)</p><p id="5edf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="http://aws.amazon.com/amazon-linux-ami/" rel="noopener ugc nofollow" target="_blank">亚马逊Linux </a>是从<a class="ae iu" href="https://en.wikipedia.org/wiki/Red_Hat_Enterprise_Linux" rel="noopener ugc nofollow" target="_blank">红帽企业Linux (RHEL) </a>和<a class="ae iu" href="https://en.wikipedia.org/wiki/CentOS" rel="noopener ugc nofollow" target="_blank"> CentOS </a>演化而来的发行版。它不支持<code class="du jt ju jv jw b">apt-get</code>，但有<code class="du jt ju jv jw b">yum</code>可满足所有安装要求。</p><p id="6b4f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">PyHive是针对<a class="ae iu" href="http://prestodb.io/" rel="noopener ugc nofollow" target="_blank"> Presto </a>和<a class="ae iu" href="http://hive.apache.org/" rel="noopener ugc nofollow" target="_blank"> Hive </a>的Python <a class="ae iu" href="http://www.python.org/dev/peps/pep-0249/" rel="noopener ugc nofollow" target="_blank"> DB-API </a>和<a class="ae iu" href="http://www.sqlalchemy.org/" rel="noopener ugc nofollow" target="_blank"> SQLAlchemy </a>接口的集合。它有助于从Python查询您的数据库。</p><p id="979b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">众所周知，让<code class="du jt ju jv jw b">PyHive</code>和<code class="du jt ju jv jw b">python3</code>一起工作是非常困难的。我无法在一个地方找到所有的步骤，因此决定写这篇博客，这样就没有人会因为如此琐碎的事情而度过一个不眠之夜。</p><p id="d2f3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">按顺序运行下面的命令似乎效果很好。</p><figure class="jx jy jz ka fd ij"><div class="bz dy l di"><div class="kb kc l"/></div></figure><h1 id="7fc0" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">说明</h1><p id="dd95" class="pw-post-body-paragraph iv iw hi ix b iy lb ja jb jc lc je jf jg ld ji jj jk le jm jn jo lf jq jr js hb bi translated"><code class="du jt ju jv jw b"><strong class="ix hj">Line 4</strong></code> <strong class="ix hj"> </strong> <br/>因为这是一个新的EC2实例，所以建议从我们正在使用的AMI镜像中更新所有可用的包。</p><p id="1652" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du jt ju jv jw b"><strong class="ix hj">Line 5</strong></code> <strong class="ix hj"> </strong> <br/>在实例上安装python3.6</p><p id="0990" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du jt ju jv jw b"><strong class="ix hj">Line 7 and Line 8</strong></code> <strong class="ix hj"> </strong> <br/>安装<code class="du jt ju jv jw b">gcc</code>和<code class="du jt ju jv jw b">gcc-c++</code>，它们为构建我们使用<code class="du jt ju jv jw b">c</code>和<code class="du jt ju jv jw b">c++</code>构建的python包提供了基础设施。</p><p id="a299" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du jt ju jv jw b"><strong class="ix hj">Line 10</strong></code> <strong class="ix hj"> </strong> <br/>安装python36-dev包。这不是开箱即用的，需要单独安装。</p><p id="ef04" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您不安装这些，当您试图在<code class="du jt ju jv jw b">line 17</code>中安装<code class="du jt ju jv jw b">sasl</code>时，您可能会得到以下错误跟踪</p><figure class="jx jy jz ka fd ij"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="7ab8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">安装<code class="du jt ju jv jw b">python36-devel.x86_64</code>包会带来许多头文件，包括缺失的<code class="du jt ju jv jw b">pyconfig.h</code>文件，这是构建python扩展所必需的。此实例上可用于yum安装的<code class="du jt ju jv jw b">python-dev</code>包是<code class="du jt ju jv jw b">python36-devel.x86_64</code>。</p><p id="169f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果需要，您可以通过以下方式找到适用于您系统的<code class="du jt ju jv jw b">python-dev</code>软件包:</p><p id="bf8c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du jt ju jv jw b">&gt; yum search python3 | grep devel</code></p><p id="f321" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我的系统上的输出是:</p><figure class="jx jy jz ka fd ij"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="d78b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以使用<code class="du jt ju jv jw b">Line 10</code>中的命令安装相关的开发包。</p><p id="7f59" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du jt ju jv jw b"><strong class="ix hj">Line 11</strong></code> <strong class="ix hj"> </strong> <br/>安装<code class="du jt ju jv jw b">sasl-dev</code>包。这个包专门带来了顺利安装<code class="du jt ju jv jw b">sasl</code>包所需的所有头文件。如果没有安装，您将得到以下错误跟踪</p><figure class="jx jy jz ka fd ij"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="a267" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用下面的命令快速搜索，我们可以找到要安装的相关<code class="du jt ju jv jw b">sasl-dev</code>包</p><p id="dfbd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du jt ju jv jw b">&gt; yum search sasl | grep devel</code></p><p id="7ccc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">输出是需要安装的<code class="du jt ju jv jw b">cyrus-sasl-devel.x86_64: Files needed for developing applications with Cyrus</code>。我们可以通过运行<code class="du jt ju jv jw b">Line 11</code>中的命令来安装它。</p><p id="cd8b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du jt ju jv jw b"><strong class="ix hj">Line 13</strong></code> <strong class="ix hj"> </strong> <br/> Boto是针对Python的亚马逊Web服务(AWS) SDK。它使Python开发人员能够创建、配置和管理AWS服务，如EC2和S3。因此我们安装它。</p><p id="6209" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du jt ju jv jw b"><strong class="ix hj">Line 15 to Line 18</strong></code> <strong class="ix hj"> </strong> <br/>我们安装pyhive顺利运行所需的所有其他相关包。</p><p id="d36a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，您可以在yout python脚本中非常轻松地连接到您的hive服务器。</p><figure class="jx jy jz ka fd ij"><div class="bz dy l di"><div class="kb kc l"/></div></figure></div><div class="ab cl lg lh gp li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hb hc hd he hf"><p id="360b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">就是这样！:D</p><p id="b86a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我希望这能帮助你，并节省你的谷歌时间。</p><p id="022f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请不要犹豫在评论部分改正任何错误。我真的很想学习和提高。</p></div></div>    
</body>
</html>