<html>
<head>
<title>Instagram Bot using Python and InstaPy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python和InstaPy的Instagram Bot</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/instagram-bot-using-python-and-instapy-70b25ad8e157?source=collection_archive---------11-----------------------#2020-07-27">https://medium.com/analytics-vidhya/instagram-bot-using-python-and-instapy-70b25ad8e157?source=collection_archive---------11-----------------------#2020-07-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="4a9b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于像我这样的初学者来说，这是一个有趣的python项目，它正在制作一个<strong class="ih hj"> Instagram bot </strong>来喜欢、评论和关注带有特定标签的个人资料。</p><p id="4afa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我提到了“真正的Python”的一篇文章，好像我遇到了一些重大错误，我通过谷歌搜索自己解决了这些错误。</p><p id="c8c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里使用了<strong class="ih hj"> Selenium </strong>和<strong class="ih hj">页面对象模式</strong>，它们共同作为InstaPy的基础。</p><p id="9715" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">确保你也安装了</em> <a class="ae je" href="https://www.mozilla.org/en-US/firefox/new/" rel="noopener ugc nofollow" target="_blank"> <em class="jd">火狐浏览器</em> </a> <em class="jd">因为最新版本的</em> <a class="ae je" href="https://github.com/timgrossmann/InstaPy/blob/master/CHANGELOG.md#breaking-changes" rel="noopener ugc nofollow" target="_blank"> <em class="jd"> InstaPy放弃了对Chrome </em> </a> <em class="jd">的支持。</em></p><p id="05f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，您必须安装InstaPy:</p><pre class="jf jg jh ji fd jj jk jl jm aw jn bi"><span id="e842" class="jo jp hi jk b fi jq jr l js jt">pip install instapy==0.6.8</span></pre><p id="be4a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最新版本是0.6.9，但是每当我试图使用注释时，它就会崩溃。没有注释脚本也能完美工作。</p><p id="974b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，让我们创建一个Python文件，并将以下代码放入其中:</p><figure class="jf jg jh ji fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es ju"><img src="../Images/19b8ce4127c1ef93ce80c59a861db2b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HpJeUFH0XvDMKJJeGyoxaQ.png"/></div></div></figure><p id="e4e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用你的替换用户名和密码，运行脚本，这样你就可以进入Instagram了。</p><p id="a4ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">InstaPy还做一些其他事情，比如检查你的互联网连接和Instagram服务器的状态。我们可以在浏览器或日志中直接观察到这一点:</p><p id="2f5c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">加载可能需要一些时间</em></p><figure class="jf jg jh ji fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es kc"><img src="../Images/dcd475500cef18076fcd40b6821a8aa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FQseydO3ulAxWq3MxerU4A.png"/></div></div></figure><p id="9208" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们可以喜欢一些使用<code class="du kd ke kf jk b">like_by_tags()</code>标记为<code class="du kd ke kf jk b">#dance</code>或<code class="du kd ke kf jk b">#mercedes</code>的帖子:</p><figure class="jf jg jh ji fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es kg"><img src="../Images/3f9b9956a9a007772dc775bdb4610b6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_QYNwKf8JSaU7OPU3Iaang.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">在会话设置后使用它(注释和跟随)</figcaption></figure><p id="1e65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，我们给了这个方法一个标签列表，以及每个标签的点赞数量。在这里，我们指示它每个喜欢十个职位。InstaPy记录它采取的每一个行动。</p><p id="019d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它提到了它喜欢的帖子及其链接、描述、位置，以及机器人是否对帖子发表了评论或关注了作者。</p><p id="19a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以用<code class="du kd ke kf jk b">set_dont_like()</code>:防止bot喜欢不合适的帖子。</p><blockquote class="kl km kn"><p id="3877" class="if ig jd ih b ii ij ik il im in io ip ko ir is it kp iv iw ix kq iz ja jb jc hb bi translated">在运行代码之前，我们必须修改位于<strong class="ih hj">site-packages/insta py/XPath _ compile . py</strong>中的<strong class="ih hj"> xpath_compile.py </strong>文件中的一些代码，因为instagram已经修改了HTML</p></blockquote><h2 id="a182" class="jo jp hi bd kr ks kt ku kv kw kx ky kz iq la lb lc iu ld le lf iy lg lh li lj bi translated">移除:</h2><pre class="jf jg jh ji fd jj jk jl jm aw jn bi"><span id="19f9" class="jo jp hi jk b fi jq jr l js jt">xpath["like_image"] = {<br/>    "like": "//section/span/button[*[local-name () ='svg']/@aria-label='Like']",<br/>    "unlike": "//section/span/button[*[local-name () ='svg']/@aria-label='Unlike']",<br/>}</span></pre><h2 id="6611" class="jo jp hi bd kr ks kt ku kv kw kx ky kz iq la lb lc iu ld le lf iy lg lh li lj bi translated">替换为:</h2><pre class="jf jg jh ji fd jj jk jl jm aw jn bi"><span id="08e8" class="jo jp hi jk b fi jq jr l js jt">xpath["like_image"] = {<br/>    "like": "//section/span/button/div[*[local-name()='svg']/@aria-label='Like']",<br/>    "unlike": "//section/span/button/div[*[local-name()='svg']/@aria-label='Unlike']",<br/>}</span></pre><blockquote class="kl km kn"><p id="513c" class="if ig jd ih b ii ij ik il im in io ip ko ir is it kp iv iw ix kq iz ja jb jc hb bi translated">如果我们不替换上面的代码，就会导致<code class="du kd ke kf jk b">instapy: "Invalid Like Element!"</code>的错误</p></blockquote><p id="9fa1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，你也可以在帖子上留下一些评论。</p><p id="1a96" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，用<code class="du kd ke kf jk b">set_do_comment ()</code>启用注释:</p><p id="436b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第二，告诉机器人用<code class="du kd ke kf jk b">set_comments ()</code>留下什么评论:</p><figure class="jf jg jh ji fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es lk"><img src="../Images/42ce983052b24231f96ec92dfae17215.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bXXdTvEDGWv5dmcGYanO2Q.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">这里的百分比表示它将评论的总帐户的百分比</figcaption></figure><p id="1be8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，你可以告诉机器人不仅要喜欢这些帖子，还要关注这些帖子的作者。你可以用<code class="du kd ke kf jk b">set_do_follow ()</code>来做:</p><figure class="jf jg jh ji fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es ll"><img src="../Images/56b7bf3434f96e72fca229b67d826906.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*akW1ElO2JMbtZkuv3zcQNw.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">它将跟随所有帐户% =100</figcaption></figure><p id="e86c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这之后，你必须使用<code class="du kd ke kf jk b">set_user_interact ()</code>:来反映与<strong class="ih hj">用户</strong>界面进行一次<strong class="ih hj">交互</strong>后的实际用户体验。这里的数量是机器人将在一个单独的配置文件中交互的帖子数量。</p><figure class="jf jg jh ji fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es lm"><img src="../Images/e39d2082f93ac93dd0ca3ac644973e6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MTemfMzU45J0FVlnEFfo0g.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">会话设置</figcaption></figure><blockquote class="kl km kn"><p id="51db" class="if ig jd ih b ii ij ik il im in io ip ko ir is it kp iv iw ix kq iz ja jb jc hb bi translated"><strong class="ih hj">重要的</strong>:你必须在呼叫活动之前设置配置，也必须设置交互，这意味着在上述<strong class="ih hj">会话设置</strong>之后，保持<strong class="ih hj">活动</strong>，否则机器人只会喜欢帖子，不会评论或关注。</p></blockquote><figure class="jf jg jh ji fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es kg"><img src="../Images/0742a47d22040c16946f3322aba2b2b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aCk7GHGwGuggIc30ohPMUQ.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">活动</figcaption></figure><p id="a7f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在你已经完成了基本的设置，用<code class="du kd ke kf jk b">end()</code> : <strong class="ih hj"> session.end() </strong>结束会话是个好主意</p><p id="322e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">经过多次反复试验，这个方法对我完全有效。</p><p id="1400" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是我的第一篇编码文章，如果你能为它鼓掌，我会非常高兴。</p><p id="012e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">谢谢，继续加油。</em></p><p id="7e78" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">我也将很快在</strong><a class="ae je" href="https://www.geeksforgeeks.org/" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">GeeksforGeeks</strong></a><strong class="ih hj">上发表它。</strong></p></div></div>    
</body>
</html>