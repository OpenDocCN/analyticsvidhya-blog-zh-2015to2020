<html>
<head>
<title>Natural Language Processing: Exploratory Data Analysis with Amazon Fine Food Reviews Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">自然语言处理:亚马逊美食评论数据的探索性数据分析</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/natural-language-processing-exploratory-data-analysis-with-amazon-fine-food-reviews-data-adefe46e98cf?source=collection_archive---------22-----------------------#2020-08-24">https://medium.com/analytics-vidhya/natural-language-processing-exploratory-data-analysis-with-amazon-fine-food-reviews-data-adefe46e98cf?source=collection_archive---------22-----------------------#2020-08-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="b3da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据来源:<a class="ae jd" href="https://www.kaggle.com/snap/amazon-fine-food-reviews" rel="noopener ugc nofollow" target="_blank">https://www.kaggle.com/snap/amazon-fine-food-reviews</a>(仅包含关于食品的评论)</p><p id="9ea4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将执行单词包，将文本数据转换为向量，以便我们可以在清理和预处理它之后的进一步处理中使用它。</p><p id="e0b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Amazone Fine Food Reviews数据由每个食品评论中的以下信息组成:</p><ol class=""><li id="b170" class="je jf hi ih b ii ij im in iq jg iu jh iy ji jc jj jk jl jm bi translated"><em class="jn">评分(1-5颗星)</em></li><li id="c28b" class="je jf hi ih b ii jo im jp iq jq iu jr iy js jc jj jk jl jm bi translated"><em class="jn">书评</em></li><li id="0a81" class="je jf hi ih b ii jo im jp iq jq iu jr iy js jc jj jk jl jm bi translated"><em class="jn">综述</em></li><li id="53ef" class="je jf hi ih b ii jo im jp iq jq iu jr iy js jc jj jk jl jm bi translated"><em class="jn">这个评论有没有帮助的投票人数。</em></li><li id="6b72" class="je jf hi ih b ii jo im jp iq jq iu jr iy js jc jj jk jl jm bi translated"><em class="jn">投票认为该评论有帮助的人数。</em></li><li id="f302" class="je jf hi ih b ii jo im jp iq jq iu jr iy js jc jj jk jl jm bi translated"><em class="jn">用户ID </em></li><li id="8db3" class="je jf hi ih b ii jo im jp iq jq iu jr iy js jc jj jk jl jm bi translated"><em class="jn">产品ID </em></li></ol><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es jt"><img src="../Images/a8cd8a3284e6d92eca54e3b6f6d1954c.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*JuPxaHKJIZ1hatyYa6EWAw.png"/></div><figcaption class="kb kc et er es kd ke bd b be z dx translated">亚马逊食品评论</figcaption></figure><p id="fa21" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，如果我想确定一个评价是积极的还是消极的，我可以选择许多方式，但我在这里选择的是<strong class="ih hj">评级</strong>。假设评级为4或5的评论可以被认为是积极的评论，评级为1或2的评论可以被认为是消极的评论，评级为3的评论可以被认为是中立的和被忽略的。</p><p id="790b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可用数据有两种形式:<strong class="ih hj">。csv </strong>版本和<strong class="ih hj">。SQLite </strong>版本。我在用。SQLite版本，因为它更容易有效地查询数据和可视化数据。我正在使用Anaconda Navigator和ipython笔记本。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es kf"><img src="../Images/79e35cd362ad257fef524e12948a10ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*pHvLwJ4z9GuuwaD4ZNOK-Q.png"/></div></figure><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kg"><img src="../Images/839a5d4c14c55859d01abc291ab91571.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fXVWulz1PC26-ZEi2PK8rA.png"/></div></div></figure><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kl"><img src="../Images/fb88ac8fa218e59d9487ea2d7e833aa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z-utXdmT_qRel2E54Y40iQ.png"/></div></div></figure><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es km"><img src="../Images/dd850ab613a53d19a56647cac65fbaa5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PlbZEvsPXyeBQ0qC90hyxQ.png"/></div></div></figure><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kn"><img src="../Images/696fb04255c73d9f2595790a351f6a86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6FqEmNU27Iyvlvkk9tvpqw.png"/></div></div></figure><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es ko"><img src="../Images/b35a05ffa2cacf9e94ea2e811610adcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ErTOffn63NHtRTaxVgda8w.png"/></div></div></figure><h1 id="7fc6" class="kp kq hi bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">数据清理:重复数据删除</h1><p id="8618" class="pw-post-body-paragraph if ig hi ih b ii ln ik il im lo io ip iq lp is it iu lq iw ix iy lr ja jb jc hb bi translated">通过查看评论，数据中有许多重复条目。为了获得数据分析的公正结果，删除重复项。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es ls"><img src="../Images/730c8235a95b2c3d800067ee3063bd01.png" data-original-src="https://miro.medium.com/v2/resize:fit:770/format:webp/1*1Ygz457ujxzAWp6X5FenDA.png"/></div></figure><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kl"><img src="../Images/2ee46cb95dc655f8f33dc080087d3dd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6-c6gEHfTegFoGoR0Nwj5Q.png"/></div></div></figure><p id="a179" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从上面可以看出，同一用户对具有相同的帮助性分子、帮助性分母、分数、时间、摘要和文本值的有多个评论，并且在进行分析时发现，</p><p id="05cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ProductId=B000HDOPZG是Loacker Quadratini香草威化饼干，8.82盎司包装(一包8个)</p><p id="625f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ProductId=B000HDL1RQ是Loacker Quadratini柠檬威化饼干、8.82盎司包装(一包8个)等等。</p><p id="d803" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">经过分析推断，除了ProductId之外，具有相同参数的评论属于相同的产品，只是具有不同的味道或数量。因此，为了减少冗余，决定消除具有相同参数的行。同样的方法是，我们首先根据ProductId对数据进行排序，然后只保留第一个相似的产品评论，删除其他的。例如，在上面的例子中，只保留了对ProductId=B000HDL1RQ的审查。这种方法确保每个产品只有一个代表，并且不进行排序的重复数据删除可能会导致同一产品仍然存在不同的代表。</p><p id="98bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">按照ProductId对数据进行升序排序:</strong><br/>sorted _ data = filtered _ data . sort _ values(' product id '，axis=0，ascending=True，inplace=False，kind='quicksort '，na_position='last ')</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es lt"><img src="../Images/bdf30d0ad25c6cfc71b3de46a6687495.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DRsG0HdAFQiNpuVfhMwolg.png"/></div></div></figure><p id="0124" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还可以看出，在下面给出的两行中，helpfullness的值分子大于helpfullness分母，这实际上是不可能的，因此这两行也被从计算中删除。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es lu"><img src="../Images/22f3ee4b492a1fbd4efcbc7ac3fe3beb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1mRU6FwwHvdK11ObcBzKLA.png"/></div></div></figure><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es lv"><img src="../Images/bfcbe3bfa9cd050b81bee72ded0d79ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*gAVKX5nwR_xkvBQfY2Km1g.png"/></div></figure><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es lw"><img src="../Images/02c9a872b904657be064c61a46f11514.png" data-original-src="https://miro.medium.com/v2/resize:fit:434/format:webp/1*kUBUsVCcPrGbqSV4c--XmA.png"/></div></figure><h1 id="bcce" class="kp kq hi bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">文本预处理</h1><p id="46fa" class="pw-post-body-paragraph if ig hi ih b ii ln ik il im lo io ip iq lp is it iu lq iw ix iy lr ja jb jc hb bi translated">现在，在制作预测模型之前，我们已经完成了重复数据消除，但我们的数据仍然需要一些预处理，如下所示:</p><ol class=""><li id="9da2" class="je jf hi ih b ii ij im in iq jg iu jh iy ji jc jj jk jl jm bi translated">从移除HTML标签开始</li><li id="7043" class="je jf hi ih b ii jo im jp iq jq iu jr iy js jc jj jk jl jm bi translated">删除任何标点符号或有限的一组特殊字符，如、或。或者#，等等。</li><li id="db82" class="je jf hi ih b ii jo im jp iq jq iu jr iy js jc jj jk jl jm bi translated">检查单词是否由英文字母组成，并且不是字母数字</li><li id="19c0" class="je jf hi ih b ii jo im jp iq jq iu jr iy js jc jj jk jl jm bi translated">检查单词的长度是否大于2(据调查，没有两个字母的形容词)</li><li id="e51a" class="je jf hi ih b ii jo im jp iq jq iu jr iy js jc jj jk jl jm bi translated">将单词转换成小写</li><li id="99eb" class="je jf hi ih b ii jo im jp iq jq iu jr iy js jc jj jk jl jm bi translated">删除停用词</li><li id="e053" class="je jf hi ih b ii jo im jp iq jq iu jr iy js jc jj jk jl jm bi translated">最后，雪球式词干法(据观察比波特词干法更好)之后，我们收集用于描述正面和负面评论的单词</li></ol><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es lx"><img src="../Images/af67015efe24bed92136cbdfc95caa84.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/format:webp/1*tEmAHhAEF_4E9B0KZy1ABg.png"/></div></figure><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es ly"><img src="../Images/4f1c472bf4769ac94171e4896852baf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LCJ6ZfWGWNth-chfRsLkPw.png"/></div></div></figure><p id="a124" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从文本中删除网址:<a class="ae jd" href="https://stackoverflow.com/a/40823105/4084039" rel="noopener ugc nofollow" target="_blank">https://stackoverflow.com/a/40823105/4084039</a></p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es lu"><img src="../Images/9473ee25749b897ced9593dc113181d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bS5v_sHUHjJAQ2yelNeb_A.png"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx translated">从文本中删除URL</figcaption></figure><p id="89e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从元素中移除所有标签:<a class="ae jd" href="https://stackoverflow.com/questions/16206380/python-beautifulsoup-how-to-remove-all-tags-from-an-element" rel="noopener ugc nofollow" target="_blank">https://stack overflow . com/questions/16206380/python-beautiful soup-how-to-remove-all-tags-from-an-element</a></p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es lz"><img src="../Images/2e9d32a471db17a2ffbc2bf8b1134b30.png" data-original-src="https://miro.medium.com/v2/resize:fit:674/format:webp/1*gLmeMMbkIiCSI3sUMc906w.png"/></div></figure><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es ma"><img src="../Images/1b1ccb178976707dccecb1e6afd350cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ArloZiJUuDO9BCzWhG0lhQ.png"/></div></div></figure><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es mb"><img src="../Images/0f9b2ae6c4bafd25830b4d9744395f58.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*xKoTsorCnn6lTaGzbRO-2w.png"/></div></figure><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es lu"><img src="../Images/9876259040c010b11fc9a552ccfe41bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xIt6ZL0TeC-HiX7Re-vRrg.png"/></div></div></figure><p id="411e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">去掉带数字的单词:<a class="ae jd" href="https://stackoverflow.com/a/18082370/4084039" rel="noopener ugc nofollow" target="_blank">https://stackoverflow.com/a/18082370/4084039</a></p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es lu"><img src="../Images/b3bad4ec61a3bed4a0d157a9ef5924eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ljvKPFVT_KDwqglJ6otBZQ.png"/></div></div></figure><p id="7fda" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">删除特殊字符:<a class="ae jd" href="https://stackoverflow.com/a/5843547/4084039" rel="noopener ugc nofollow" target="_blank">https://stackoverflow.com/a/5843547/4084039</a></p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es mc"><img src="../Images/a5b87f5170c4c8d1cf2f6f6df13e97f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zYu4hez0R7lCx4Y9Gk20pA.png"/></div></div></figure><p id="ea6a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，去掉停用词:<a class="ae jd" href="https://gist.github.com/sebleier/554280" rel="noopener ugc nofollow" target="_blank">https://gist.github.com/sebleier/554280</a></p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es md"><img src="../Images/5d79603538d7814edd1dcb4d89566055.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nz1xGp6MHon7LiAH6zbnNw.png"/></div></div></figure><p id="71c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从现在开始，我将在5000个顶级数据评论上进行试验。(最初，我拿了3000。)</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es me"><img src="../Images/accf8a7b356b3a00ca5f6665b41abd0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oz4VhEfE9C4TRAmeF1qxTg.png"/></div></div></figure><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es mf"><img src="../Images/b0f13198aedbc8b5e7b2532f5256eeac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J2iv8Q-4_MKLbYHNBDhnbQ.png"/></div></div></figure><h1 id="092c" class="kp kq hi bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">特色化:词汇袋</h1><p id="9b3d" class="pw-post-body-paragraph if ig hi ih b ii ln ik il im lo io ip iq lp is it iu lq iw ix iy lr ja jb jc hb bi translated">现在，通过我们执行的所有数据清理任务(如重复数据消除),数据的helpnumerator应始终小于helpdenominator，我们有了一个名为“preprocessed_reviews”的最终数据帧。Scikit-learn为从文本生成向量提供了Countvectorizer()。如下图所示，我们可以看到计数矢量器生成了一个稀疏矩阵，其中包含一些独特的单词。它生成的维度等于每个评论的独特字数。</p><p id="3dac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jn">探索CountVectorizer()这里:</em><a class="ae jd" href="https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.CountVectorizer.html" rel="noopener ugc nofollow" target="_blank"><em class="jn">https://scikit-learn . org/stable/modules/generated/sk learn . feature _ extraction . text . count vectorizer . html</em></a></p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kl"><img src="../Images/4a5362966f551a0f9d56d5399f36ae71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8fdnqK4TDt-ctRl954u5aA.png"/></div></div></figure><blockquote class="mg mh mi"><p id="8dba" class="if ig jn ih b ii ij ik il im in io ip mj ir is it mk iv iw ix ml iz ja jb jc hb bi translated">二元语法和多元语法</p></blockquote><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es mm"><img src="../Images/2a0bc6c6ff876e433996e30170d93ece.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3mlq7Q0FICvg_MWVWEu36A.png"/></div></div></figure><p id="76b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请务必阅读计数矢量器文档:<a class="ae jd" href="http://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.CountVectorizer.html" rel="noopener ugc nofollow" target="_blank">http://sci kit-learn . org/stable/modules/generated/sk learn . feature _ extraction . text . count vectorizer . html</a></p><blockquote class="mg mh mi"><p id="2f67" class="if ig jn ih b ii ij ik il im in io ip mj ir is it mk iv iw ix ml iz ja jb jc hb bi translated">TF IDF</p></blockquote><p id="6ca9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在下面的代码中，在ngram_range中，我提到了unigram(1)到bigram(2)的唯一单词和唯一对的产生。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es mn"><img src="../Images/ee3746500a9ca6447f6850dddeb45aff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DQG2RH2Xe5zEI7wMjJuI0A.png"/></div></div></figure></div></div>    
</body>
</html>