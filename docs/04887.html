<html>
<head>
<title>How to one hot encode Sequence Data in Java</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Java中对序列数据进行热编码</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-one-hot-encode-sequence-data-in-java-1e9ad5194b54?source=collection_archive---------10-----------------------#2020-04-04">https://medium.com/analytics-vidhya/how-to-one-hot-encode-sequence-data-in-java-1e9ad5194b54?source=collection_archive---------10-----------------------#2020-04-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9c49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">机器学习算法不够智能，无法理解以文本格式表示的数据。让我们试着在聊天机器人的背景下理解它。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="9126" class="jm jn hi ji b fi jo jp l jq jr">User: What is your Name <br/>ChatBot: My name is ChatBot.</span><span id="8132" class="jm jn hi ji b fi js jp l jq jr">User: Tell me about whethere in Pune<br/>ChatBot : Pleasant as always</span></pre><p id="ddf1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如上例，输入为文本格式，长度可变[输入一个包含7个(包括空格)单词，输入包含11个单词。在聊天机器人中，通常使用递归神经网络算法进行自然语言处理。算法只理解数字数据，因为数学运算只能在数字数据上执行。因为我们不能对字符串格式的数据执行梯度下降。</p><p id="3547" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了将字符串格式的数据转换成等价的数字数据，我们可以使用一个热编码作为选项之一。在今天的文章中，我将尝试描述一个热门的java编码实现。</p><p id="88a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们通过例子来详细理解它。</p><p id="f569" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">字母表中有26个字符，如果我们再增加一个字符来表示空白，那么它就变成27个。下表描述了映射，最后一行表示映射到26的空间。我们有一个有趣的术语来定义下面的映射，即整数编码</p><figure class="jd je jf jg fd ju er es paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="er es jt"><img src="../Images/26f0afbf77a8229c920a008d1bacae73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*loItptQ4QHvoX9ZS"/></div></div></figure><p id="34aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们试着将它与提供给聊天机器人的实际输入文本联系起来</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="7a81" class="jm jn hi ji b fi jo jp l jq jr">Going back to initial example </span><span id="3a5a" class="jm jn hi ji b fi js jp l jq jr">User: What is your Name</span><span id="713c" class="jm jn hi ji b fi js jp l jq jr">input can be represented as Array of Strings as below.</span><span id="8a47" class="jm jn hi ji b fi js jp l jq jr">String[] input = [ "what"," ", "is"," ", "your", " ","name"];</span><span id="f051" class="jm jn hi ji b fi js jp l jq jr">Integer Encoding for above input can be represengted as below.</span><span id="2d0a" class="jm jn hi ji b fi js jp l jq jr">Integer[] values = [22, 7, 0, 19, 26, 8, 18, 26, 24, 14, 20, 17, 26, 13, 0, 12, 4]</span></pre><p id="ba86" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是处理文本数据的第一步，现在让我们更进一步，执行一个热编码。在一种热编码中，数据用1或0表示。</p><p id="4b67" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为我们使用27个字符[字母字符+空格]，我们可以使用下面的逻辑来编码整数编码数组中的每个条目。让我们来看看它的细节。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="77dc" class="jm jn hi ji b fi jo jp l jq jr">Interger encoding of 'b' = 1<br/>Interger encoding of 'a' = 0</span><span id="001e" class="jm jn hi ji b fi js jp l jq jr">Please note 0 will  be first index and 26 will be last index [ Alphabets + space]</span><span id="fc80" class="jm jn hi ji b fi js jp l jq jr">Now lets use integer array of size 27 to represent one hot encoding.</span><span id="1c60" class="jm jn hi ji b fi js jp l jq jr">one hot encoding for 'b' = [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]  </span><span id="1064" class="jm jn hi ji b fi js jp l jq jr">one hot encoding for 'a' = [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]</span></pre><p id="5100" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，用Java实现，不使用任何外部库。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="c834" class="jm jn hi ji b fi jo jp l jq jr">package com.ai.algorithm.core;<br/></span><span id="6b34" class="jm jn hi ji b fi js jp l jq jr">import java.util.Arrays;<br/>import java.util.HashMap;<br/></span><span id="2f37" class="jm jn hi ji b fi js jp l jq jr">public class OneHotEncoder implements IEncoder {<br/></span><span id="5cd2" class="jm jn hi ji b fi js jp l jq jr">	private HashMap&lt;Character, Integer&gt; intergerEncoder = new HashMap&lt;Character, Integer&gt;();<br/></span><span id="2b1f" class="jm jn hi ji b fi js jp l jq jr">	private Character[] chars = { 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q',<br/>			'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', ' ' };<br/></span><span id="939a" class="jm jn hi ji b fi js jp l jq jr">	private void populateIntegerEncoder() {<br/>		for (int i = 0; i &lt; chars.length; i++) {<br/>			intergerEncoder.put(chars[i], i);<br/>		}<br/>	}<br/></span><span id="9e2f" class="jm jn hi ji b fi js jp l jq jr">	// Populate the integer Encoder<br/></span><span id="e70b" class="jm jn hi ji b fi js jp l jq jr">	public OneHotEncoder() {<br/>		populateIntegerEncoder();<br/>	}<br/></span><span id="0fd1" class="jm jn hi ji b fi js jp l jq jr">	@Override<br/>	public int[][] encode(String input) {<br/></span><span id="68e3" class="jm jn hi ji b fi js jp l jq jr">		if (input == null | input.isEmpty()) {<br/>			return null;<br/>		}<br/></span><span id="9300" class="jm jn hi ji b fi js jp l jq jr">		input = input.toLowerCase();<br/></span><span id="8761" class="jm jn hi ji b fi js jp l jq jr">		int[] intergerEncoding = new int[input.length()];<br/></span><span id="004d" class="jm jn hi ji b fi js jp l jq jr">		for (int i = 0; i &lt; input.length(); i++) {<br/>			Character c = input.charAt(i);<br/>			intergerEncoding[i] = intergerEncoder.get(c);<br/>		}<br/></span><span id="c358" class="jm jn hi ji b fi js jp l jq jr">		System.out.println("Integer Encoded Values " + Arrays.toString(intergerEncoding));<br/></span><span id="d9fd" class="jm jn hi ji b fi js jp l jq jr">		int[][] oneEncodedValues ​= new int[intergerEncoding.length][chars.length];<br/></span><span id="313f" class="jm jn hi ji b fi js jp l jq jr">		for (int i = 0; i &lt; intergerEncoding.length; i++) {<br/>			int[] d = new int[chars.length];<br/>			d[intergerEncoding[i]] = 1;<br/>			oneEncodedValues[i] = d;<br/>		}<br/></span><span id="4f94" class="jm jn hi ji b fi js jp l jq jr">		printMatrix(oneEncodedValues);<br/>		return oneEncodedValues;<br/>	}<br/></span><span id="932b" class="jm jn hi ji b fi js jp l jq jr">	private void printMatrix(int[][] matrix) {<br/>		System.out.println("One hot encoded Values");<br/>		for (int i = 0; i &lt; matrix.length; i++) {<br/>			System.out.println(Arrays.toString(matrix[i]));<br/>		}<br/>	}<br/></span><span id="fc6c" class="jm jn hi ji b fi js jp l jq jr">	public static void main(String[] args) {<br/>		String input = "What is your Name";<br/>		System.out.println("Input String: " + input);<br/>		OneHotEncoder encoder = new OneHotEncoder();<br/>		encoder.encode(input);<br/></span><span id="ee05" class="jm jn hi ji b fi js jp l jq jr">	}<br/></span><span id="e550" class="jm jn hi ji b fi js jp l jq jr">}</span></pre></div></div>    
</body>
</html>