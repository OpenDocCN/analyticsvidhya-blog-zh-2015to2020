<html>
<head>
<title>A Python Cloud Function to compose and send a PDF via e-mail</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个Python云函数，用于通过电子邮件撰写和发送PDF</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/a-python-cloud-function-to-compose-and-send-a-pdf-via-e-mail-89e63b7c0ff0?source=collection_archive---------7-----------------------#2020-01-10">https://medium.com/analytics-vidhya/a-python-cloud-function-to-compose-and-send-a-pdf-via-e-mail-89e63b7c0ff0?source=collection_archive---------7-----------------------#2020-01-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/fde9663a42f9081f522211345ffdc2cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GZYLjtQaqEZbS3nZ"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">埃菲社在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="2db2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我的一个项目中，我决定创建一个服务来获取一些输入信息，组成一个PDF，然后通过电子邮件发送。</p><p id="5c8a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，我编写了一个Flask应用程序来测试本地的一切，然后，我修改了我的<em class="jt"> main.py </em>中的几行代码，使它可以作为Google Cloud函数导出(它是在Flask的基础上构建的)</p><p id="95f5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要使用我们需要的服务:</p><ul class=""><li id="a172" class="ju jv hi ix b iy iz jc jd jg jw jk jx jo jy js jz ka kb kc bi translated">一个<a class="ae iu" href="https://cloud.google.com/" rel="noopener ugc nofollow" target="_blank"> Google Cloud </a>帐户来创建我们的功能(帐户上的账单需要激活才能创建它)。</li><li id="c9fe" class="ju jv hi ix b iy kd jc ke jg kf jk kg jo kh js jz ka kb kc bi translated">发送电子邮件的<a class="ae iu" href="https://sendgrid.com/" rel="noopener ugc nofollow" target="_blank"> Sendgrid </a>帐户</li></ul><p id="621c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们假设安装了Google命令行界面，因为我们将使用它来部署我们的功能(更多信息，请参见这里的<a class="ae iu" href="https://cloud.google.com/sdk/gcloud/" rel="noopener ugc nofollow" target="_blank"/>)。</p><h1 id="9384" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">背景</h1><p id="2a74" class="pw-post-body-paragraph iv iw hi ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">该服务将允许创建一个PDF文件，其中包含一场足球比赛的征召球员名单，以及一些其他信息，如比赛日期，所有球队聚集的地方，体育场地址和球队标志。</p><p id="5aad" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们会用这样的身体做一个帖子；</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="179e" class="lu kj hi lq b fi lv lw l lx ly">{<br/>   "match": "Sporting C. - FC Massinka",<br/>   "to": "<a class="ae iu" href="mailto:sporting@sportingmedium.com" rel="noopener ugc nofollow" target="_blank">sporting@sportingmedium.com</a>",<br/>   "subject": "Match Sporting C. - FC Massinka",<br/>   "html": "&lt;b&gt;Here the calls up for the Match Sporting C. - FC Massinka&lt;/b&gt;",<br/>   "text": "Here the calls up for the Match Sporting C. - FC Massinka",<br/>   "appointmentAndDate": "Where and when we meet: at Pub Greenwood at 10:00",<br/>   "date": "Date: Thursday, 24th January 2020",<br/>   "stadeAddress": "Stade address: 120, Stade Road Calweenkel",<br/>   "callsupTitle": "Called up",<br/>   "callsup": "Birkingsen D., Lawrence A., Pawlicik S., Busta S., Lukic D., Tarbet K., Semedo B.",<br/>   "logoUrl": "https://cdn.website-editor.net/6038919f8d094b12bf47f483121670f1/dms3rep/multi/thumbnail/iTunesArtwork256x256-transp.png<a class="ae iu" href="https://cdn.website-editor.net/6038919f8d094b12bf47f483121670f1/dms3rep/multi/thumbnail/iTunesArtwork256x256-transp.png" rel="noopener ugc nofollow" target="_blank">"</a><br/>}</span></pre><h1 id="aadb" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">在Google Cloud函数中使用库:requirements.txt文件</h1><p id="e05e" class="pw-post-body-paragraph iv iw hi ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">我们在项目中使用了两个外部库:</p><ul class=""><li id="9b5c" class="ju jv hi ix b iy iz jc jd jg jw jk jx jo jy js jz ka kb kc bi translated"><a class="ae iu" href="http://www.fpdf.org/" rel="noopener ugc nofollow" target="_blank"> FPDF </a>创建PDF文件</li><li id="4551" class="ju jv hi ix b iy kd jc ke jg kf jk kg jo kh js jz ka kb kc bi translated"><a class="ae iu" href="https://github.com/sendgrid/sendgrid-python" rel="noopener ugc nofollow" target="_blank"> Sendgrid </a>发送电子邮件</li></ul><p id="fac2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了从Google Cloud上的功能中使用它们，我们需要在项目的根目录下添加一个<em class="jt"> requirements.txt </em>文件，其内容如下:</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="18a1" class="lu kj hi lq b fi lv lw l lx ly">fpdf==1.7.2<br/>sendgrid==6.1.0</span></pre><h1 id="3537" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">创建PDF文件</h1><p id="02e5" class="pw-post-body-paragraph iv iw hi ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">PDF文件的创建得益于一个扩展FPDF的类(文件<em class="jt"> callsupPDF.py </em>)</p><figure class="ll lm ln lo fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="8b81" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">该类在构造函数中接收请求数据:</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="dc45" class="lu kj hi lq b fi lv lw l lx ly">def __init__(self, req_data):<br/>   self.req_data = req_data<br/>   super(CallsUpPDF, self).__init__()</span></pre><p id="55a7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要构建的第一个部分是标题，我们在这里放置球队的徽标(在左上角)、比赛(在文档顶部居中)和比赛日期。</p><p id="3e8e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下载logoUrl并创建一个临时本地文件(文件名是当前时间戳)。与FPDF的方法<em class="jt"> image() </em>相比，我们在左上角添加图片(<em class="jt"> x </em> : 10，<em class="jt"> y </em> : 8，<em class="jt">宽度</em> : 33):</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="9717" class="lu kj hi lq b fi lv lw l lx ly">logoUrl = getStringParameter(self.req_data,’logoUrl’)<br/>if logoUrl:<br/>   millis = int(round(time.time() * 1000))<br/>   filePath = “/tmp/%s.png” % str(millis)<br/>   f = open(filePath,’wb’)<br/>   f.write(urllib.request.urlopen(logoUrl).read())<br/>   f.close()<br/>   self.image(filePath, 10, 8, 33)</span></pre><p id="552c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">其他使用的FPDF方法有:</p><ul class=""><li id="aca6" class="ju jv hi ix b iy iz jc jd jg jw jk jx jo jy js jz ka kb kc bi translated"><em class="jt"> cell() </em>:在我们的例子中用来写文本，比如:</li></ul><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="56e6" class="lu kj hi lq b fi lv lw l lx ly">cell(0, 5, match, ln=1, align=’C’)</span></pre><p id="3dc0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用<em class="jt"> x </em> :0，<em class="jt"> y </em> :5，<em class="jt"> match </em>是包含文本的变量，<em class="jt"> ln </em> : 1表示一旦文本被写入就转到下一行的开头，<em class="jt">align:【C’</em>表示文本在单元格中居中</p><ul class=""><li id="edab" class="ju jv hi ix b iy iz jc jd jg jw jk jx jo jy js jz ka kb kc bi translated"><em class="jt"> ln() </em>:允许向下移动光标，向文件添加新内容</li></ul><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="0203" class="lu kj hi lq b fi lv lw l lx ly">ln(2)</span></pre><p id="5f67" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这种情况下，向下移动2，并将光标放在左侧(行首)</p><p id="86da" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们通过<em class="jt"> CallsUpPDF </em>类的<em class="jt"> composeDoc </em>方法，一个接一个地添加约会日期和地点、体育场地址、球员名单前的标题和球员名单的末尾(<em class="jt"> callsUpBlock() </em>):</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="ab26" class="lu kj hi lq b fi lv lw l lx ly">def composeDoc(self):<br/>   self.add_page()<br/>   self.set_font(‘Arial’, ‘B’, 16)<br/>   self.__addAppointmentAndPlace()<br/>   self.__addStadeAddress()<br/>   self.ln(6)<br/>   self.__callsUpBlock()</span></pre><p id="36cc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">方法前面的__前缀表示该方法是私有的。</p><p id="818b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从HTTP POST接收的参数通过文件<em class="jt"> requestUtil.py </em>及其方法<em class="jt"> getStringParameter </em>从<em class="jt"> callsupPDF.py </em>中读取，默认情况下返回一个空字符串:</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="cedd" class="lu kj hi lq b fi lv lw l lx ly">def getStringParameter(requestData, parameterName):<br/>   return requestData.get(parameterName, ‘’)</span></pre><h1 id="c18f" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">服务逻辑</h1><p id="7324" class="pw-post-body-paragraph iv iw hi ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">该服务在文件<em class="jt"> callsupUseCase.py中管理。</em>它实例化类<em class="jt"> CallsUpPDF </em>并调用上面看到的<em class="jt"> composeDoc </em>方法。</p><p id="c390" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">完成后，它创建Sendgrid API发送PDF文件所需的Base64编码字符串(稍后我们将看到Sendgrid有效负载)，然后为发送电子邮件的函数创建一个JSON对象。</p><p id="70a5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">注意到:</p><ul class=""><li id="8437" class="ju jv hi ix b iy iz jc jd jg jw jk jx jo jy js jz ka kb kc bi translated">使用Python3，我们需要使用“latin-1”来执行PDF文件的编码(由于方法<em class="jt"> output() </em>和参数<em class="jt"> dest='S '，我们以字符串的形式获得该文件)。</em>见另一种出口可能性<a class="ae iu" href="http://www.fpdf.org/en/doc/output.htm" rel="noopener ugc nofollow" target="_blank">此处</a></li></ul><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/8cbd0d10da9d5e0447f7dfbca4ef86a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j0jvyRW1FvkyRpRwnsQI7Q.png"/></div></div></figure><ul class=""><li id="6524" class="ju jv hi ix b iy iz jc jd jg jw jk jx jo jy js jz ka kb kc bi translated">我们指定了一个templateId，它标识了一个可以在Sendgrid上创建并填充数据HTML模板</li><li id="8ad1" class="ju jv hi ix b iy kd jc ke jg kf jk kg jo kh js jz ka kb kc bi translated">我们添加了一个html和一个文本消息来支持不能显示html的电子邮件客户端</li></ul><p id="39a9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">代码如下:</p><figure class="ll lm ln lo fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="ad4f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这个类还负责创建http响应，它将是:</p><ul class=""><li id="cd89" class="ju jv hi ix b iy iz jc jd jg jw jk jx jo jy js jz ka kb kc bi translated">如果一切顺利，简单的“Ok”</li><li id="6fa8" class="ju jv hi ix b iy kd jc ke jg kf jk kg jo kh js jz ka kb kc bi translated">如果发生错误，则返回500错误(为了简单起见，我们不考虑其他错误代码)</li></ul><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="20d7" class="lu kj hi lq b fi lv lw l lx ly">try:<br/>   sendMailWithPdf(emailObject)<br/>   return “Ok”<br/>except Exception as e:<br/>   print(str(e))<br/>   return str(e), 500</span></pre><h1 id="9bdb" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">将电子邮件发送到Sendgrid</h1><p id="9232" class="pw-post-body-paragraph iv iw hi ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">在文件<em class="jt">sendmail . py</em>中，我们读取了包含调用Sendgrid API的键的环境变量(我们将看到如何从命令行界面在部署中设置它):</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="a23a" class="lu kj hi lq b fi lv lw l lx ly">mailApiKey = os.environ[‘MAIL_API_KEY’]</span></pre><p id="dc43" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">随后，我们使用由<em class="jt">email obj</em>类中的<em class="jt"> callsupUseCase.py </em>传递的数据构建邮件对象。</p><p id="19df" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">完成后，我们简单地调用SendGrid库的<em class="jt"> send() </em>方法。</p><figure class="ll lm ln lo fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="0845" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们已经准备好将我们的代码部署为Google Cloud函数。</p><h1 id="1d51" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">部署</h1><p id="10fa" class="pw-post-body-paragraph iv iw hi ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">我们使用Google Cloud命令行界面来部署我们的功能。我们用下面的命令创建一个可执行的bash脚本(<em class="jt"> deploy.sh </em>):</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="0fdf" class="lu kj hi lq b fi lv lw l lx ly">gcloud functions deploy pdfmedium --runtime python37 --trigger-http --set-env-vars MAIL_API_KEY=&lt;YOUR_SENDGRID_API_KEY&gt; --project &lt;YOUR_GOOGLE_PROJECT_ID&gt; --region europe-west1</span></pre><ul class=""><li id="9b43" class="ju jv hi ix b iy iz jc jd jg jw jk jx jo jy js jz ka kb kc bi translated"><em class="jt"> pdfmedium: </em>是main.py中包含的函数的名称</li><li id="0d04" class="ju jv hi ix b iy kd jc ke jg kf jk kg jo kh js jz ka kb kc bi translated"><em class="jt"> python37: </em>指定我们正在为python运行时版本3.7进行部署</li><li id="8921" class="ju jv hi ix b iy kd jc ke jg kf jk kg jo kh js jz ka kb kc bi translated"><em class="jt"> — trigger-http: </em>指定通过http调用函数</li><li id="1ac4" class="ju jv hi ix b iy kd jc ke jg kf jk kg jo kh js jz ka kb kc bi translated"><em class="jt"> — set-env-vars </em>:允许为函数配置环境变量</li><li id="cf1a" class="ju jv hi ix b iy kd jc ke jg kf jk kg jo kh js jz ka kb kc bi translated">—项目:我们要在其中安装函数的项目id</li><li id="bbb4" class="ju jv hi ix b iy kd jc ke jg kf jk kg jo kh js jz ka kb kc bi translated">— region:将部署该功能的Google Cloud区域。<a class="ae iu" href="https://cloud.google.com/about/locations/?region=europe#region" rel="noopener ugc nofollow" target="_blank">点击此处</a>了解更多地区信息</li></ul><p id="12dc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">项目id可以在您的Google Cloud控制台中找到:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mc"><img src="../Images/30c46f482fc5bb84b93938739828fec8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HFYUHZNza0lXR8FtLIj_ag.jpeg"/></div></div></figure><h1 id="96ff" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">执行</h1><p id="9c6e" class="pw-post-body-paragraph iv iw hi ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">现在用curl或postman我们可以调用我们的函数。这里，我们可以使用curl命令:</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="51bb" class="lu kj hi lq b fi lv lw l lx ly">curl -X POST \<br/> <a class="ae iu" href="https://europe-west1-my-project-emanuele-pecorari.cloudfunctions.net/pdfmedium" rel="noopener ugc nofollow" target="_blank">https://europe-west1-my-project-emanuele-pecorari.cloudfunctions.net/pdfmedium</a> \<br/> -H ‘Content-Type: application/json’ \<br/> -H ‘Postman-Token: 055822de-a90c-4798-a239–91afb80c3565’ \<br/> -H ‘cache-control: no-cache’ \<br/> -d ‘{<br/> “match”: “Sporting C. — FC Massinka”,<br/> “to”: “<a class="ae iu" href="mailto:emanuele.pecorari@gmail.com" rel="noopener ugc nofollow" target="_blank">m</a>yemail@mydomain.com”,<br/> “subject”: “Match Sporting C. — FC Massinka”,<br/> “html”: “&lt;b&gt;Here the calls up for the Match Sporting C. — FC Massinka&lt;/b&gt;”,<br/> “text”: “Here the calls up for the Match Sporting C. — FC Massinka”,<br/> “appointmentAndDate”: “Where and when we meet: at Pub Greenwood at 10:00”,<br/> “date”: “Date: Thursday, 24th January 2020”,<br/> “stadeAddress”: “Stade address: 120, Stade Road Calweenkel”,<br/> “callsupTitle”: “Called up”,<br/> “callsup”: “Birkingsen D., Lawrence A., Pawlicik S., Busta S., Lukic D., Tarbet K., Semedo B.”,<br/> “logoUrl”: “<a class="ae iu" href="https://cdn.website-editor.net/6038919f8d094b12bf47f483121670f1/dms3rep/multi/thumbnail/iTunesArtwork256x256-transp.png" rel="noopener ugc nofollow" target="_blank">https://cdn.website-editor.net/6038919f8d094b12bf47f483121670f1/dms3rep/multi/thumbnail/iTunesArtwork256x256-transp.png</a>"<br/>}’</span></pre><p id="bddf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我们的收件箱中，我们会收到电子邮件:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es md"><img src="../Images/cd08e9261bfebb0c90cae33b9bfee1e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zRAHj9kJVrOsgxJdiG395g.png"/></div></div></figure><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/fda219e6dd1dcc3851e4ac48feb551bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rdQtUAT3kWwC4QphNcBNPQ.png"/></div></div></figure><p id="3c44" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">和PDF文件:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mf"><img src="../Images/7e7293f58d06f5c4a3ca8c5f662a6ed3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yXaPU5pf7yWGUW6lLhLxJw.png"/></div></div></figure><h1 id="51b2" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">结论</h1><p id="5b5f" class="pw-post-body-paragraph iv iw hi ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">这个简单的项目展示了Python库FPDF如何帮助从您的数据创建简单的PDF文件。您可以使用它轻松地创建想要共享账单或简短文档。</p><p id="d291" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">该代码可以很容易地发展，以管理其他数据和创建不同的PDF布局。</p><p id="8f18" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">另一个需要强调的简单步骤是如何通过Google Cloud函数上的HTTP来公开您的可伸缩服务。</p><p id="b8b2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使服务更加安全的下一步是使用令牌或api密钥添加某种身份验证，在服务执行之前对其进行检查。</p><p id="1867" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">完整的项目可以在GitHub上找到:<a class="ae iu" href="https://github.com/manupeco/MediumPythonExercise" rel="noopener ugc nofollow" target="_blank">https://github.com/manupeco/MediumPythonExercise</a></p></div></div>    
</body>
</html>