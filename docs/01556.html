<html>
<head>
<title>Automating Your Form Data Extraction and Data-basing with AWS Textract</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用AWS Textract实现表单数据提取和数据库自动化</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/automating-your-form-data-extraction-and-data-basing-with-aws-textract-4731961343e?source=collection_archive---------4-----------------------#2019-10-31">https://medium.com/analytics-vidhya/automating-your-form-data-extraction-and-data-basing-with-aws-textract-4731961343e?source=collection_archive---------4-----------------------#2019-10-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/137454640589a836e2565400e35a02ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ouj_0lR-jMU-qTCB"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">凯利·西克玛在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="cfd2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您所在的环境或行业要求您的同事、客户或委托人手工填写表格，那么您可能面临的一个挑战就是不断地将这些文档输出到数据库或服务器中，以便将来能够更快地进行搜索。</p><p id="e09a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这种情况下，特定的光学字符识别(OCR)技术可以帮助自动化过程。亚马逊网络服务(AWS)的最新服务是AWS Textract，这是(像AWS Rekognition一样)亚马逊开发的计算机视觉技术。Textract旨在部署其深度学习算法来检测文本，分析表单数据，并处理表格信息。</p><p id="d810" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，如果您希望开发一个完整的面向云的解决方案来提取表单数据，这篇文章将解释部署AWS架构来自动化这个过程的过程。</p><h1 id="ab0e" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">语境</h1><p id="fe33" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">在本文记录我的经验之前，我没有使用过任何Python或与AWS交互过，因此学习如何处理不同的本地Python IDEs、导航AWS接口以及生成输出是一个令人难以置信的学习曲线。理想情况下，下一步是创建一个应用程序，允许你的手机照片和你的表格无缝转换到S3桶，以启动这一过程，这将是另一个挑战，可能会在另一篇文章中记录。现在，让我们把注意力集中在云中发生的事情上。</p><p id="6741" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你正在阅读这篇文章，我已经写了我应用这个代码的方式，以及一步一步地设置我的AWS资源以获得这个项目的最终输出。</p><h1 id="9cea" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">您部署的服务</h1><h2 id="5a4b" class="kw ju hi bd jv kx ky kz jz la lb lc kd jg ld le kh jk lf lg kl jo lh li kp lj bi translated">自动气象站λ</h2><p id="2050" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">虽然可以在本地Python IDE中使用该解决方案；在这种情况下，您需要安装Boto 3(用于Python的AWS SDK，您可以按照这个<a class="ae iu" href="https://boto3.amazonaws.com/v1/documentation/api/latest/index.html" rel="noopener ugc nofollow" target="_blank">文档</a>安装)，我们将使用AWS Lambda来部署Textract算法。您应该注意，如果您直接从AWS客户端使用AWS Lambda(相对于Python IDE或无服务器):</p><ul class=""><li id="c77a" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">您会发现AWS可以支持一些基本Python模块；</li><li id="590a" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">通过zip文件添加新模块可能会禁用Lambda Python编辑器；</li><li id="89e0" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">测试你的Lambda函数需要更多的时间。</li></ul><p id="bc99" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于本教程，您只需要一个模块，并且可以完全在AWS Lambda Python编辑器中工作。AWS Lambda函数将被触发或触发该过程的一部分。</p><h2 id="3161" class="kw ju hi bd jv kx ky kz jz la lb lc kd jg ld le kh jk lf lg kl jo lh li kp lj bi translated">AWS S3</h2><p id="a0cc" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">为您想要分析的文档/图像提供简单的存储服务。您的S3存储桶将容纳输入(pdf、png或JPEGs格式的表单)和输出(JSON或CSV格式的表单键值对)。</p><h2 id="a2bf" class="kw ju hi bd jv kx ky kz jz la lb lc kd jg ld le kh jk lf lg kl jo lh li kp lj bi translated">AWS DynamoDB</h2><p id="8c79" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">亚马逊的NoSQL数据库服务。这个数据库将存储前面提到的Lambda函数输出。对于本教程，期望您从一个现有的空DynamoDB表开始。</p><h2 id="0f7e" class="kw ju hi bd jv kx ky kz jz la lb lc kd jg ld le kh jk lf lg kl jo lh li kp lj bi translated">AWS文本摘要</h2><p id="4af5" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">该架构的主要服务。不像其他服务，你不需要在这里设置任何东西。这将被嵌入到你的Lambda函数中。</p><h2 id="9451" class="kw ju hi bd jv kx ky kz jz la lb lc kd jg ld le kh jk lf lg kl jo lh li kp lj bi translated">AWS IAM</h2><p id="60e9" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">身份和访问管理(IAM)帮助AWS用户保护访问，并为其他服务创建角色和策略。在这个例子中，我们将使用IAM来创建附加到Lambda函数的角色。</p><h1 id="2169" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">体系结构</h1><p id="a486" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">添加上述服务是为了创建一个反应式工作流，以达到最终的数据库输出。该体系结构如下面的建议体系结构所示。</p><figure class="lz ma mb mc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ly"><img src="../Images/faba17c03e7339419bd3875073bd6133.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5iDA_8iJTzai548eDCiKBQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">提议的架构</figcaption></figure><h1 id="e6bd" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">基础知识</h1><p id="0c8d" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">我们将从基础开始。你的S3桶和你的测力台。</p><p id="b43a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我会假设，像我一样，当我开始这个项目时，你不知道如何创建一个S3桶。</p><ul class=""><li id="ede2" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">启动AWS控制台时，从服务菜单中选择或搜索S3。</li></ul><figure class="lz ma mb mc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es md"><img src="../Images/679e1336dff7a3195d4d07dcbd50743e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cOTmxktYsVn1AkZiR0HOcg.png"/></div></div></figure><ul class=""><li id="070d" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">在您的S3窗口中，选择并单击“创建存储桶”框。</li><li id="4eae" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">输入您的存储桶名称并选择您的地区。您必须跨所有这些服务维护一个区域。对于我的例子，我选择欧盟(爱尔兰)，然后单击“下一步”。</li><li id="66c2" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">在配置选项选项卡中，您几乎可以保留默认值。对于权限选项卡，使用以下公共设置。</li></ul><figure class="lz ma mb mc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/a3f1bfe90ee5159d6d6cef8e5b9af56c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7n4rvAgdEFb282gML04GLw.png"/></div></div></figure><ul class=""><li id="651c" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">单击“下一步”，检查您的存储桶设置，然后在完成S3权限后，单击“检查存储桶”。</li></ul><p id="90d1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">同样，您也可以创建DynamoDB表。您将从服务菜单开始，寻找DynamoDB。</p><ul class=""><li id="2b27" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">在DynamoDB界面点击“创建表格”。</li></ul><figure class="lz ma mb mc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mf"><img src="../Images/da31f3c96da0db2e01bee845f8ac9da9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IYS726Nw6PncfW14q9LQeA.png"/></div></div></figure><ul class=""><li id="f488" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">给你的表起一个名字，输入你的主键和类型。如果您的表单包含一个数字(ID、表单编号等。)，可以输入ID，选择类型为number。</li></ul><figure class="lz ma mb mc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mg"><img src="../Images/365986b94d1aa37b8545a37dba06b0e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ggUhu2RYwY9aNg_1gd4X5w.png"/></div></div></figure><ul class=""><li id="97f5" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">保留默认设置，然后单击“创建”完成您的表格设置。</li></ul><p id="a0c2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您应该可以开始处理Lambda函数和IAM角色了，这两者都将在下一步中完成。</p><h1 id="d122" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">重要的部分</h1><p id="2c0b" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">上面显示的架构需要创建两个Lambda函数，每个函数都有自己的IAM角色和策略，这就是我们在这里要做的。</p><h2 id="7fb5" class="kw ju hi bd jv kx ky kz jz la lb lc kd jg ld le kh jk lf lg kl jo lh li kp lj bi translated">键值对函数</h2><p id="fb26" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">第一个Lambda函数是S3到JSON函数，它将获取您上传到您创建的S3桶中的任何图像或文档，触发该函数，并为同一桶中表单的键值对提供JSON输出。</p><p id="715b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在你的AWS控制台中，寻找Lambda，然后点击“创建函数”。</p><ul class=""><li id="60ba" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">可以从头开始(或作者)；然而，鉴于您正在与AWS S3合作，您可以使用一个蓝图来帮助您。</li><li id="5421" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">在蓝图搜索栏中，查找S3。</li><li id="65e2" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">从搜索结果中选择s3-get-object-python，然后单击“配置”</li></ul><figure class="lz ma mb mc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mh"><img src="../Images/ef07d21cfbff9587716fd2929dd0b328.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8xr9wqPYv041zVJ-inll_Q.png"/></div></div></figure><ul class=""><li id="7232" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">给你的函数一个名字。在本例中，它被称为S3到JSON。</li><li id="f7e6" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">从“执行角色”下拉列表中选择“从AWS策略模板创建新角色”选项，为其命名(如“S3-到-JSON-角色”)，并保留相同的策略模板。</li></ul><figure class="lz ma mb mc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mi"><img src="../Images/f76c7108d6b7927586c81dd7119add75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p80YM80Nbz-hPMLm_oZ6SA.png"/></div></div></figure><ul class=""><li id="71e1" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">在S3触发器中，选择S3时段作为函数触发器，事件类型为“所有对象创建事件”，然后启用触发器。</li></ul><figure class="lz ma mb mc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mj"><img src="../Images/be0acfe79607611f778346b35b97cfc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LuLWJcwzalIKZuy9-8tN1Q.png"/></div></div></figure><ul class=""><li id="76f9" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">单击“创建函数”继续使用Lambda函数。您应该看到以下内容。</li></ul><figure class="lz ma mb mc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mk"><img src="../Images/5c66527b87aa59dfd26446487bffce32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m5Wuo68Q6kHADEt-GA6O8A.png"/></div></div></figure><ul class=""><li id="6bb6" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">请注意，AWS Textract在这项工作中还没有出现。这是因为你需要将它包含在你的角色中。向下滚动到执行角色，并单击“查看S3到JSON-Role角色”。</li></ul><figure class="lz ma mb mc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ml"><img src="../Images/c7e3442dcb24f8545af2f73aa0c41e23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H8CtgOqg6NqDaTzxp6Pclg.png"/></div></div></figure><ul class=""><li id="ea26" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">这一步是选择蓝图选项的有用之处，因为您只需要为Textract添加策略。云观察和S3政策已经到位。也就是说，点击“附加策略”。</li></ul><figure class="lz ma mb mc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mm"><img src="../Images/99d13f24344181a06a238b85fc2f9772.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wj-tDytbCzSES5hAo8e6ug.png"/></div></div></figure><ul class=""><li id="be64" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">在搜索栏中搜索Textract，选择“AmazonTextractFullAccess”，然后点击屏幕底部的“附加策略”。</li></ul><figure class="lz ma mb mc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/6ff2901ba777fc6876fd33ed66c1f626.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IpmhR9XG3SS-Ws9Owt-bmw.png"/></div></div></figure><ul class=""><li id="174e" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">返回并刷新Lambda函数，您会注意到Amazon Textract已经向您的函数添加了一个资源。如果你点击Amazon Textract，你将得到一个资源的概要，以及如下所示的政策声明。</li></ul><figure class="lz ma mb mc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mo"><img src="../Images/d096b4b9a66ceb90db81693f666f49bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-3MwIIUxeDvidpb0hHDG3w.png"/></div></div></figure><ul class=""><li id="f2ef" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">至此，您已经准备好在Lambda中使用Python IDE了。</li></ul><p id="02dd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">添加您的模块</strong></p><p id="dee3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我之前提到过，使用Lambda意味着你不能自由地快速找到你想要的Python模块。那么如何添加本例所需的“Trp . py”Python模块呢？</p><p id="7b57" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有很多方法可以做到这一点，但我发现，一般来说，如果你想添加多个模块，最好的方法是通过虚拟环境。虽然我们的例子相对简单，可能不需要这样做，但这是一个很好的技巧，可以放在工具箱中，我发现它非常简洁。</p><p id="205b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，我将稍微偏离主题，使用虚拟环境添加这个模块。我在这个例子中使用的是Windows 10，因此，如果你使用的是苹果或Linux，我很抱歉。</p><ul class=""><li id="1157" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">导航到Windows 10任务栏中的开始按钮，然后搜索Powershell。</li><li id="3787" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">选择Windows Powershell，右键单击，然后以管理员身份运行。</li><li id="afb9" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">导航到您的桌面，然后键入以下内容。</li></ul><figure class="lz ma mb mc fd ij er es paragraph-image"><div class="er es mp"><img src="../Images/8c33e844e7877bbc27a3655aac430892.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*wtWV8SrEUqzoHbAsaoLKhA.png"/></div></figure><ul class=""><li id="529c" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">如果你去你的桌面，你会注意到一个新的目录，“lambdafunc”被创建。</li><li id="c590" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">返回Windows Powershell，使用以下命令继续创建python虚拟环境。</li></ul><figure class="lz ma mb mc fd ij er es paragraph-image"><div class="er es mq"><img src="../Images/c31ed9f8bd750801a8608e52fcda52ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*Bmt-C7LoK66ykDFb-tJ_tw.png"/></div></figure><ul class=""><li id="0684" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">您会注意到在“lambdafunc”目录中创建了新的文件夹。</li><li id="b51f" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">此时，您需要激活您的虚拟环境。因此，如果您在Powershell中键入以下命令，您可以在使用pip install之后开始使用Python安装程序包(PIP)。</li></ul><figure class="lz ma mb mc fd ij er es paragraph-image"><div class="er es mr"><img src="../Images/70caef150a354b032f38e6a15862050b.png" data-original-src="https://miro.medium.com/v2/resize:fit:874/format:webp/1*LbleUYMwGMWW0gisWXTMQg.png"/></div></figure><p id="9090" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">(您可能会遇到错误，因为您的文件没有经过数字签名。您可以使用来自此<a class="ae iu" href="https://devblogs.microsoft.com/scripting/hey-scripting-guy-how-can-i-sign-windows-powershell-scripts-with-an-enterprise-windows-pki-part-2-of-2/" rel="noopener ugc nofollow" target="_blank">站点</a>的提示来更改执行策略。或者，您可以键入<strong class="ix hj">“Set-execution policy Unrestricted”</strong>。)</p><p id="d7b9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">那么trp.py模块呢？你不需要使用pip来安装它；但是，您可以从上面的GitHub链接下载这个模块，然后将它添加到您的lambdafunc目录中的Lib/Site-Packages文件夹。</p><p id="e025" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您将当前的Lambda Python代码复制到一个编辑器(如NotePad++)中，并将其作为lambda_function.py保存在Lib/Site-Packages文件夹中，您可以压缩模块和Lambda文件。</p><ul class=""><li id="868b" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">回到你的Lambda控制台，滚动到函数代码空间，从代码输入类型中选择“上传一个. zip文件”并点击“上传”</li></ul><figure class="lz ma mb mc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ms"><img src="../Images/1201b88678b44b8f9394ee7d61de356f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sDOT_PiQWrCTvtOBeYajDQ.png"/></div></div></figure><ul class=""><li id="0f15" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">选择最近创建的zip文件，然后按“保存”。</li><li id="8df1" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">你会注意到你的Lambda函数现在有了trp.py模块。</li></ul><figure class="lz ma mb mc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mt"><img src="../Images/cbbf8f33c959d1fabef7cff5a883e00e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VZEKSdL55egf690ID6z0Ww.png"/></div></div></figure><p id="d149" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在已经添加了这个模块，可以用下面的代码替换lambda_function.py。</p><ul class=""><li id="339b" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">注意，这段代码还上传了一个到s3 bucket中图像的URL，作为JSON输出的一部分。</li><li id="a3b3" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">测试您的函数的最好方法是将一个图像上传到bucket，然后等待输出。或者，您可以上传一张图片，点击“测试”检查功能。如果您选择“亚马逊S3 Put”作为事件模板，请更改时段名称、时段ARN和对象关键字，以匹配您的时段名称和文件名。成功的测试应该返回以下内容。</li></ul><figure class="lz ma mb mc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mu"><img src="../Images/68b6764f2ebb2a973bd5469282faa441.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UzrAllbgAv7-BGf1wE_AXA.png"/></div></div></figure><ul class=""><li id="7a7c" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">将在您的S3桶中创建一个包含您的表单键值表单的JSON文件。</li></ul><p id="6440" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">到目前为止，您只完成了架构的一半，但是不要担心，因为另一半更容易实现。</p><h2 id="9571" class="kw ju hi bd jv kx ky kz jz la lb lc kd jg ld le kh jk lf lg kl jo lh li kp lj bi translated">数据库功能</h2><p id="8b2c" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">以类似于键-值对函数的方式，您将创建另一个lambda函数(jsonS3ToDynamoDB ),它会自动将键-值对保存到DynamoDB表中。这意味着您将:</p><ol class=""><li id="1e4e" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js mv lq lr ls bi translated">使用S3放置对象蓝图</li><li id="6a11" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js mv lq lr ls bi translated">创建一个新的IAM角色(jsonS3ToDynamoDB-Role)，</li><li id="1560" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js mv lq lr ls bi translated">使用你的S3桶作为函数的触发器。唯一的区别是你的后缀是。' JSON '，如下所示。</li></ol><p id="8980" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">类似地，您需要将DynamoDB访问策略附加到您为这个Lambda函数创建的IAM角色上。请注意，这将连接许多层到您的Lambda函数，如下所示。</p><figure class="lz ma mb mc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mw"><img src="../Images/4fb881c96be73a5f65d203a210fc7c1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_DCM8vfkZBdY04tcchOl3w.png"/></div></div></figure><p id="e795" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最重要的是，你应该能够访问DynamoDB、S3和Cloudwatch。</p><p id="de6e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">将JSON内容移动到DynamoDB的代码如下所示。</p><ul class=""><li id="0c9b" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">您还可以使用“Amazon S3 Put”事件来测试该函数，并将bucket、bucket ARN和Object键更改为bucket和JSON对象，如下所示。</li></ul><figure class="lz ma mb mc fd ij er es paragraph-image"><div class="er es mx"><img src="../Images/f9300497f812588bc029445dc9500ee6.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/1*Xhii9eAa9wY9mc6AJaI4Pw.png"/></div></figure><h1 id="0f06" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">学习成果</h1><p id="680f" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">正如本文开头所述，直到两个月前，我还没有任何使用Python(本地或云)、AWS和虚拟环境的经验。</p><p id="11de" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">更重要的是，我发现数据科学和编程社区是一个非常有用和足智多谋的社区。我有潜在的方法来改进这段代码，并实现无缝的电话到数据库的过程，这可能会在以后的帖子中出现。</p><h1 id="30f1" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">前进的道路</h1><p id="578e" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">这项技术可以在许多方面帮助一个企业或一个部门。也来自AWS的自然语言处理(NLP)可以被添加来寻找特定的主题或关键词。你能想出更多的用例吗？请在评论区告诉我。</p><h1 id="d5cc" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">摘要</h1><p id="d08a" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">在这个例子中，我解释了使用Amazon Textract从上传到S3桶的图像中提取文本和表单数据的许多方法之一。该解决方案完全依赖于亚马逊服务。</p><p id="294a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你有任何关于代码或这个帖子的任何项目的问题，请给我发电子邮件到g.farfour@gmail.com，我可以讨论代码的细节。</p></div></div>    
</body>
</html>