<html>
<head>
<title>CRUD operations for openLDAP using python ldap3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用python ldap3对openLDAP进行CRUD操作</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/crud-operations-for-openldap-using-python-ldap3-46393e3122af?source=collection_archive---------1-----------------------#2020-05-28">https://medium.com/analytics-vidhya/crud-operations-for-openldap-using-python-ldap3-46393e3122af?source=collection_archive---------1-----------------------#2020-05-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="4506" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">python中的OpenLDAP CRUD操作</h2><div class=""/><div class=""><h2 id="7a3a" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">使用python在openLDAP服务器中进行添加、搜索、删除、修改操作</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/fc00d0bd340a64bac2a822237ee6f35e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UO4K7i_MUblXRsnt"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">保罗·花冈在<a class="ae jw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es jx"><img src="../Images/0c6454d25459a28947a57b9389a2c517.png" data-original-src="https://miro.medium.com/v2/resize:fit:598/format:webp/1*0pon_Q_R8LrWh4SRyQtdkw.jpeg"/></div></figure><h2 id="91e2" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ho bi translated">OpenLDAP</h2><p id="6abf" class="pw-post-body-paragraph kv kw hi kx b ky kz is la lb lc iv ld kj le lf lg kn lh li lj kr lk ll lm ln hb bi translated">OpenLDAP是OpenLDAP项目开发的轻量级目录访问协议的免费开源实现。许多需要OpenLDAP的组织在大多数技术解决方案中都需要它。由于它的灵活性，IT和DevOps工程师可以自由地以各种方式使用它</p><p id="cdd9" class="pw-post-body-paragraph kv kw hi kx b ky lo is la lb lp iv ld kj lq lf lg kn lr li lj kr ls ll lm ln hb bi translated">【https://www.openldap.org/doc/admin22/intro.html T4】</p><p id="7bf0" class="pw-post-body-paragraph kv kw hi kx b ky lo is la lb lp iv ld kj lq lf lg kn lr li lj kr ls ll lm ln hb bi translated">我已经在这里提供了安装openLDAP服务器和phpLDAPAdmin <a class="ae jw" rel="noopener" href="/@dineshkumarkb/install-openldap-with-phpldapadmin-on-ubuntu-9e56e57f741e">的步骤。</a></p><p id="985e" class="pw-post-body-paragraph kv kw hi kx b ky lo is la lb lp iv ld kj lq lf lg kn lr li lj kr ls ll lm ln hb bi translated">LDAP目录服务基于<em class="lt">客户机-服务器</em>模型。一个或多个LDAP服务器包含构成目录信息树(DIT)的数据。客户端连接到服务器，并向它提出一个问题。服务器用一个答案和/或一个指向客户机可以从哪里获得附加信息的指针(通常是另一个LDAP服务器)来响应。无论客户机连接到哪个LDAP服务器，它看到的都是相同的目录视图；呈现给一个LDAP服务器的名称引用它在另一个LDAP服务器上的相同条目。这是全局目录服务的一个重要特性，如LDAP。</p><p id="0ac7" class="pw-post-body-paragraph kv kw hi kx b ky lo is la lb lp iv ld kj lq lf lg kn lr li lj kr ls ll lm ln hb bi translated">ldap3是一个严格遵循RFC4510的纯Python LDAP 3客户端库，在LGPL v3开源许可下发布。RFC4510是IETF的当前LDAP规范(2006年6月),取代了以前的LDAP RFCs 2251、2830、3771(1997年12月)。</p><p id="af6c" class="pw-post-body-paragraph kv kw hi kx b ky lo is la lb lp iv ld kj lq lf lg kn lr li lj kr ls ll lm ln hb bi translated">ldap3可以用于从2.6开始的任何Python版本，包括所有Python 3版本。它也适用于PyPy和PyPy3。</p><p id="f30a" class="pw-post-body-paragraph kv kw hi kx b ky lo is la lb lp iv ld kj lq lf lg kn lr li lj kr ls ll lm ln hb bi translated">我们将讨论如何使用python的ldap3库从openLDAP服务器创建、读取、更新和删除用户/组</p><h2 id="98c7" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ho bi translated">使用pip安装ldap3库</h2><pre class="jh ji jj jk fd lu lv lw lx aw ly bi"><span id="c150" class="jy jz hi lv b fi lz ma l mb mc">pip install ldap3</span></pre><h2 id="a3ba" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ho bi translated">将连接绑定到LDAP服务器</h2><p id="3a4b" class="pw-post-body-paragraph kv kw hi kx b ky kz is la lb lc iv ld kj le lf lg kn lh li lj kr lk ll lm ln hb bi translated"><em class="lt">绑定操作允许在客户端和服务器之间交换凭证，以建立新的授权状态。</em></p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="md me l"/></div></figure><h2 id="3dcc" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ho bi translated">从打开的LDAP中搜索用户/组数据</h2><p id="e4c0" class="pw-post-body-paragraph kv kw hi kx b ky kz is la lb lc iv ld kj le lf lg kn lh li lj kr lk ll lm ln hb bi translated"><em class="lt">搜索操作用于请求服务器根据访问控制和其他限制返回一组与搜索过滤器匹配的条目。这可用于从单个条目、直接从属于特定条目的条目或条目的整个子树中读取属性</em></p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="md me l"/></div></figure><h2 id="4b6f" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ho bi translated">在openLDAP服务器中创建新组</h2><p id="6a5a" class="pw-post-body-paragraph kv kw hi kx b ky kz is la lb lc iv ld kj le lf lg kn lh li lj kr lk ll lm ln hb bi translated"><em class="lt">添加操作允许客户端请求在LDAP目录中添加条目。添加操作仅用于新条目，即dn必须引用不存在的对象，但父对象必须存在。</em></p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="md me l"/></div></figure><h2 id="e1b7" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ho bi translated">向openLDAP服务器添加新用户</h2><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="md me l"/></div></figure><h2 id="0125" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ho bi translated">从LDAP服务器中删除用户</h2><p id="c5c0" class="pw-post-body-paragraph kv kw hi kx b ky kz is la lb lc iv ld kj le lf lg kn lh li lj kr lk ll lm ln hb bi translated"><em class="lt">删除操作允许客户端请求从LDAP目录中删除条目。要执行删除操作，必须指定条目的dn。</em></p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="md me l"/></div></figure><h2 id="79b3" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ho bi translated">更新用户的现有值</h2><p id="4fa7" class="pw-post-body-paragraph kv kw hi kx b ky kz is la lb lc iv ld kj le lf lg kn lh li lj kr lk ll lm ln hb bi translated"><em class="lt">修改操作允许客户端请求修改LDAP目录中已经存在的条目。要执行修改操作，必须指定条目的dn和请求的更改种类。</em></p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="md me l"/></div></figure><h2 id="7aa1" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ho bi translated">将用户添加到现有ldap组，或将多个组添加到现有用户</h2><p id="3a2b" class="pw-post-body-paragraph kv kw hi kx b ky kz is la lb lc iv ld kj le lf lg kn lh li lj kr lk ll lm ln hb bi translated">对于向ldap组添加现有用户，我发现ldap v2比ldap3容易得多。因此发布ldapv2的代码。ldapv2接受字节作为输入值，在调用add_s(同步调用)之前，所有值都被转换为字节。</p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="md me l"/></div></figure><p id="4988" class="pw-post-body-paragraph kv kw hi kx b ky lo is la lb lp iv ld kj lq lf lg kn lr li lj kr ls ll lm ln hb bi translated">参考资料:</p><p id="1269" class="pw-post-body-paragraph kv kw hi kx b ky lo is la lb lp iv ld kj lq lf lg kn lr li lj kr ls ll lm ln hb bi translated"><a class="ae jw" href="https://ldap3.readthedocs.io/en/latest/index.html" rel="noopener ugc nofollow" target="_blank">https://ldap3.readthedocs.io/en/latest/index.html</a></p></div></div>    
</body>
</html>