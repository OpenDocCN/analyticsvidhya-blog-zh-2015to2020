<html>
<head>
<title>Time Series Analysis- Forecasting Departure Delays</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">时间序列分析-预测出发延误</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/time-series-analysis-forecasting-departure-delays-776d22636179?source=collection_archive---------16-----------------------#2020-04-13">https://medium.com/analytics-vidhya/time-series-analysis-forecasting-departure-delays-776d22636179?source=collection_archive---------16-----------------------#2020-04-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/5e80aae3da8af4037a391e95c1f363cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*xu1BpGfgEUu9QIm1.gif"/></div></figure><p id="3d45" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">当莱特兄弟发明第一架飞机时，他们根本没有想到21世纪的人们会多么依赖他们的革命性发明。快进到今天:便利是有代价的，人们只能希望不要成为受害者。提前几个月预订的航班出现任何形式的延误都不是好消息，但这是无法避免的。</p><p id="32aa" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我现在是在沃尔瑟姆的本特利大学学习商业分析的最后一年，我想为我的时间序列项目探索这个臭名昭著的情况。我和其他3名团队成员计划将这个过程分解成简单的步骤，试图缩小原因范围并预测未来的航班延误。</p><h1 id="ac28" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">问题</strong></h1><p id="ffa7" class="pw-post-body-paragraph im in hi io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated">如前所述，该项目的讨论主题是关注航班延误的原因，并建立一个时间序列预测模型来预测未来的延误。在这次分析中，选择的数据集是从美国运输部运输统计局(STS)提供的<a class="ae jk" href="https://www.kaggle.com/" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>下载的。数据集看起来像这样:</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es ko"><img src="../Images/817aa4900b5758c9a897740b1b7ffcfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*frd4eqyywn5ksBiuDc3b3A.png"/></div></div></figure><p id="77bb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">数据集中在2008年所有国内航班记录的几个不同方面(其中几个后来被用作时间序列模型的回归变量)。下面显示了一个简短的快照:</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es kx"><img src="../Images/21818c782226bf9aec0652b2ce8d6183.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yYJ97SgWwH-0MmOelrF9hg.png"/></div></div></figure><h1 id="65dc" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">数据清理</strong></h1><p id="7abd" class="pw-post-body-paragraph im in hi io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated">为了便于理解，变量“广播时间”被用来将航班分为3个不同的类别:广播时间&lt; 4hours; 4 hours &lt; Airtime &lt;10 hours; Airtime &gt; 10小时。</p><p id="df3a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了避免混淆和不必要的延长，将只讨论广播时间<strong class="io hj">低于4小时</strong>的航空公司类别。</p><p id="32ec" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">下一步是使数据高效和可用，这涉及到移除异常值和缺失值。在少数情况下，变量“飞行时间”的值甚至是负值，这将表明航班在计划的起飞时间之前离开。这种值的存在对于分析可能是混乱的，并且需要被解决。例如，绘制了一个箱线图来识别变量“出发延误”中的异常值。</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es ky"><img src="../Images/d05f80a0d6cf59d9874bfa17465a6e41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tNaWIhngHEr6H9SwDkqzww.png"/></div></div></figure><p id="7484" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">显而易见，与其他航空公司相比，达美航空公司(DL)和长荣航空公司(EV)的离群值明显更高。因此，这些异常值被从数据中剔除。</p><h1 id="8cde" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="ak">聚类分析</strong></h1><p id="1e75" class="pw-post-body-paragraph im in hi io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated">一旦数据可用，下一步就是选择要工作的航空公司。该数据集由20个不同的航空公司的记录组成，总共产生1，936，758个观察值。对于那些不熟悉典型数据分析过程的人来说，如果我们实际上得出一个结果，那么如此庞大的样本量会对我们的发现产生负面影响。</p><p id="da08" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">因此，首先使用以下代码汇总每个航空公司的数据:</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es kz"><img src="../Images/95c85cff4cb430b4ff0e63be94a15cc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*80ZJxYtrIndYBtOrendlSw.png"/></div></div><figcaption class="la lb et er es lc ld bd b be z dx translated">为了对每家航空公司进行单独分析，我们没有在混乱的过程中浪费时间和资源，而是求助于一位无名英雄——聚类分析。</figcaption></figure><p id="0521" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">聚类分析根据一些相似性对不同的时间序列对象进行分组。在这种情况下，我们使用一种叫做“<strong class="io hj">欧几里德距离</strong>的方法对对象进行分组，因为变量的单位(分钟)始终保持不变。(在单位不同的情况下，使用一种称为“相关距离”的方法。)聚类分析的结果是如下所示的树状图:</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es le"><img src="../Images/05e393cd75dedd88ea804d8a15c449bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DHDCtJQOr7IpoRXnt9bo4g.png"/></div></div></figure><p id="a049" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">树突图中的对象越接近，相似性就越多。换句话说，对西南航空公司(WN)执行的分析结果可以映射到边疆航空公司(F9)，以及梅萨航空公司(YV)。</p><p id="5c24" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">出于一致性考虑，西南航空公司(WN)和美国航空公司(AA)被排除在上述集群之外。(在2008年也分别保持了最大飞行次数的第一和第二名)。下面的方框图强调了这两个航班的飞行时间和起飞延迟分布的差异。</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es lf"><img src="../Images/319c89f1388c2b4a9c0dcc53381fe8dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-aXMIQjnlbHiOVf2I-CuMA.png"/></div></div></figure><p id="446b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">时间序列对象</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div class="er es lg"><img src="../Images/6a9c1abb4f840875df2d9a49cb05b2de.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/0*3K_hZW1C-_6xRffq.gif"/></div></figure><p id="a0bd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">一旦要进行的飞行最终确定，我们为两次飞行中的每一次都创建了一个时间序列对象，其绘图如下所示:</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es lh"><img src="../Images/53ff755616ed3393770f63b832ed9c45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P1tAkzyXhIu9FFxpKj3UQw.png"/></div></div></figure><h1 id="bab2" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">为了比较这些物体的行为，我们观察了<strong class="io hj">熵值。</strong>较高的熵值会降低模型的预测精度，但在预测出发延误时会出现这种情况是正常的(因为它们往往会波动)。虽然西南航空(WN)可能看起来有点混乱，但它的熵值为1.94，而美国航空(AA)的熵值为1.96。</h1><p id="5ef0" class="pw-post-body-paragraph im in hi io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated">芝加哥拥有西南航空公司最多的乘客，在冬季(芝加哥经历大雪时)向西飞行的趋势显示了西南航空公司年底延误的高峰。美国航空公司显示了年中某处延误的多次高峰，这可能归因于暑假期间旅行的增加。</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es li"><img src="../Images/4f493cac5ed8f1349a4b181dbcf46bdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*40OuN2u_z3oEXBdN2kVDlw.png"/></div></div></figure><p id="70eb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">模型结构</p><p id="d6db" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">至此，我们已经具备了开始构建模型所需的所有要素。对于那些不熟悉这一过程的人来说:有各种类型的模型可以用来预测，每一种都有其优缺点。这种类型的问题有时可能更容易决定一个模型，但在大多数情况下(包括这个问题)，在最终确定一个单一的，有效的模型之前，要建立和测试几个模型。</p><h1 id="bf86" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">构建并测试了以下模型:</h1><p id="4241" class="pw-post-body-paragraph im in hi io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated"><strong class="io hj">状态空间模型</strong></p><p id="8ae8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为以下各项选择的最佳状态空间模型:</p><blockquote class="lj lk ll"><p id="8fef" class="im in lm io b ip iq ir is it iu iv iw ln iy iz ja lo jc jd je lp jg jh ji jj hb bi translated"><strong class="io hj">美国航空:</strong> ETS(AAN)【误差和趋势:加性、季节性:不存在】</p></blockquote><p id="8145" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">西南航空:</strong> ETS(AAdN)【误差:加性，趋势:阻尼加性，季节性:不存在】</p><p id="ca2f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了检查模型的有效性，我们执行了Ljung-Box测试，根据p值检查残差[如果模型的p值高于0.05 (5%显著性水平)，则模型通过测试]</p><p id="b332" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这两个模型都通过了测试，美国航空的p值为0.104，西南航空的p值为0.934。</p><p id="6a15" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">获得上述内容的代码运行如下:</p><p id="ed0c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">ARIMA模式</strong></p><p id="4af8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">美国航空:</strong> ARIMA(5，1，0) [取最近过去的5个值，差的顺序= 1]</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es lq"><img src="../Images/ea821d5b65d9b8efdf686a6d9c268533.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TiEeh9650jgSW88zq0F86A.png"/></div></div></figure><blockquote class="lj lk ll"><p id="4c1b" class="im in lm io b ip iq ir is it iu iv iw ln iy iz ja lo jc jd je lp jg jh ji jj hb bi translated"><strong class="io hj">西南航空:</strong> ARIMA(3，1，0)【取最近过去的3个值，差的顺序=1】</p></blockquote><p id="3e45" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">再一次，模型的有效性通过Ljung-Box检验进行了检验。</p><p id="5930" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">西南地区的ARIMA(3，1，0)通过测试，p值为0.32(显著高于0.05)。然而，ARIMA(5，1，0)未能通过5%显著性水平的测试，p值为0.017(尽管它通过了1%的显著性:p值为0.01的测试)</p><p id="0d1b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">以下代码用于查找模型:</p><p id="a0ab" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> ARIMA模型:有回归变量</strong></p><p id="5b56" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">一个好的模型具有某些特征，这些特征使它能够可靠地进行预测。在各种不同的模型中，模型稳定性是最重要的。粗略地说，当一个额外的参数(或者甚至是样本数据之外的)被添加到模型中时，模型的行为不应该有所不同。这些参数被称为“回归量”。</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es lr"><img src="../Images/9324938efd8042640f2acaced8fa015f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D5nX0evSXo6G1rzks_u6UQ.png"/></div></div></figure><blockquote class="lj lk ll"><p id="1c1b" class="im in lm io b ip iq ir is it iu iv iw ln iy iz ja lo jc jd je lp jg jh ji jj hb bi translated">在我们的例子中，我们添加的回归量是:“广播时间”、“到达延迟”和“承运人延迟”。计算这些回归变量的显著性:它们是否显著不同于0。如果为真，则将它们添加到模型中。</p></blockquote><p id="17fe" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">美国航空:</strong></p><p id="b80d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">注意最后一个回归变量。比率(实际/预计)应&gt; 1.96或&lt; -1.96 for it to be considered significantly different than 0.</p><p id="dc62" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">For the above model the ratio comes out to be 1.78, rendering the regressors ineffective.</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es ls"><img src="../Images/70955c1594820621d695c0dc03b3773a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IP3NZCUuFzuCIfb9FiB4SA.png"/></div></div></figure><p id="ebed" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">西南航空:</strong></p><p id="15ee" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">最后一个回归量的比率计算为7.548，因此被添加到西南航空公司的模型中。</p><p id="0d5f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">型号选择</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es lt"><img src="../Images/1adbcc4b3da292bd2ea91a1fe0f62556.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hcBBm-nzVr2zr2jjQ5dcVQ.png"/></div></div></figure><p id="4401" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">此时，模型已经建立，测试已经完成，剩下的就是选择最佳模型。听起来很容易，是吗？</p><h1 id="1b66" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">挑选最有效的模型几乎类似于在苹果园的10棵不同的树上找到最好的苹果。每个模型都有其优点和缺点，选择有效模型的决定主要取决于问题的背景，在某些情况下，甚至取决于用户。</h1><figure class="kp kq kr ks fd ij er es paragraph-image"><div class="er es if"><img src="../Images/bb7cfcf9f5a9856afb5f827f5a68940f.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*sjSGhH_NedSjCp0h.gif"/></div></figure><p id="c394" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">对于图中的模型，每个模型的精度测量值计算和比较如下:</p><p id="8712" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">美国航空公司</p><p id="44af" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">美国航空公司的精确度测量[熵:2.107]</p><p id="a957" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">经验法则:一个好的、精确的模型有一个低的MAPE(误差)值。</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es lu"><img src="../Images/d67e694c92e52422fb0e126602494ca2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vqN170evrpPTrFpPdd935g.png"/></div></div><figcaption class="la lb et er es lc ld bd b be z dx translated">我们注意到，带有回归变量的ARIMA模型导致最低的MAPE值(在训练和测试中都是如此)。然而，ETS和ARIMA模型(没有回归变量)在测试数据上表现更好(MAPE测试&lt; MAPE train), whilst opposite is the case with ARIMA (with regressors).</figcaption></figure><p id="1d8c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">西南航空</strong></p><p id="1468" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">西南航空公司的准确性测量[熵:2.058]</p><p id="4711" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">ARIMA回归模型再次抢尽风头，在所有其他模型中MAPE值最低。然而，与我们在美国航空公司注意到的相反，西南航空公司的所有模型在测试数据中表现不佳(较高的MAPE值)。</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es lv"><img src="../Images/26af5d7088db9f852ca73ca7daf572ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HMNPgAbc2kz_ijq6YgckUA.png"/></div></div><figcaption class="la lb et er es lc ld bd b be z dx translated">两个航空公司的误差值在ARIMA模型(带有回归变量)中急剧下降的原因之一可能是过度拟合。添加参数是有代价的:模型被迫低于测试数据。</figcaption></figure><p id="948c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这种情况下，模型构建的过程被搁置一旁，引入了一个新术语:块引导</p><p id="0326" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">袋装模型</p><p id="e570" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们回顾一下这个问题:我们正试图预测某些航空公司的起飞延误。为此，我们构建并验证了几个不同的模型。建模过程本身就为错误和各种其他预测问题敞开了大门:</p><h1 id="28f2" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated"><strong class="io hj">不确定性</strong></h1><p id="d595" class="pw-post-body-paragraph im in hi io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated">真正的模式真的是ARIMA模式吗？这真的是ETS模型吗？</p><blockquote class="lj lk ll"><p id="61f8" class="im in lm io b ip iq ir is it iu iv iw ln iy iz ja lo jc jd je lp jg jh ji jj hb bi translated"><strong class="io hj">参数不确定性</strong></p></blockquote><p id="d3b0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">即使模型是ARIMA模型，斜率系数(回归量)有多可靠？</p><blockquote class="lj lk ll"><p id="d9ec" class="im in lm io b ip iq ir is it iu iv iw ln iy iz ja lo jc jd je lp jg jh ji jj hb bi translated"><strong class="io hj">随机噪声</strong></p></blockquote><p id="a959" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果选择的模型不正确，产生的随机噪声(反过来提供MAPE和类似的误差值)变得不可靠。</p><blockquote class="lj lk ll"><p id="dfb1" class="im in lm io b ip iq ir is it iu iv iw ln iy iz ja lo jc jd je lp jg jh ji jj hb bi translated">为了克服这些问题，需要依赖不同的预测方法。这一次，我们让数据决定预测应该是什么样子。这种预测将是“数据依赖的”，而不是“模型依赖的”。</p></blockquote><p id="e1ec" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">该过程概述如下:</p><p id="c8c9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">自举过程</p><p id="f6ab" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">该过程可以大致描述如下:</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es lw"><img src="../Images/866f0a636cdacf6ae190f111c664e54f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3-2m9hX2IPm7h3r7HuH22g.png"/></div></div><figcaption class="la lb et er es lc ld bd b be z dx translated">选择一个时间序列，进行Stl/Lowess分解:将时间序列分解为趋势、季节性和噪声成分。</figcaption></figure><p id="3eb6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">噪声分量被置换，即，选择纯噪声的<strong class="io hj">个小块</strong>并在块中重新排序/混洗。</p><ol class=""><li id="188a" class="lx ly hi io b ip iq it iu ix lz jb ma jf mb jj mc md me mf bi translated">噪声被添加回趋势和季节分量，导致几乎相似的时间序列(因为只有随机噪声分量被打乱)。</li><li id="d37f" class="lx ly hi io b ip mg it mh ix mi jb mj jf mk jj mc md me mf bi translated">这个过程被重复几次(由用户决定)，产生各种各样的，几乎与原始序列相似的时间序列。</li><li id="77d7" class="lx ly hi io b ip mg it mh ix mi jb mj jf mk jj mc md me mf bi translated">自举模型(原始时间序列用黑色表示)</li><li id="db2f" class="lx ly hi io b ip mg it mh ix mi jb mj jf mk jj mc md me mf bi translated">如上所述，这一过程产生了15个不同的时间序列，与原始序列非常相似。然后随机挑选一个字符串，并根据该特定字符串的数据拟合一个模型。这样一来，选择准确模型的<strong class="io hj">不确定性</strong>就被<strong class="io hj">消除了</strong>:数据决定哪个模型最适合那个特定的字符串，从而产生几个不同的模型。</li></ol><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es ml"><img src="../Images/c9b65cde5ed0310ce1f8eabff9e480e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qBvQ86S9QLUiRPrUZYpuNg.png"/></div></div><figcaption class="la lb et er es lc ld bd b be z dx translated">然后从所有这些模型中选择预测，最后进行平均，为我们提供基于数据的预测，而不是用户选择的模型。该过程因此被称为Bagging(引导+聚集)。创建袋装模型的代码如下:</figcaption></figure><p id="0941" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">注意:</strong>选择了各种不同的模型，最终预测是这些模型预测的结果平均值。因此，这增加了训练和测试数据的MASE脉塞值。</p><p id="7a9c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">袋装模型的精度测量(美国航空公司)</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es mm"><img src="../Images/fa4e346bdd7d53912757873d64a84717.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yJQMGxW-vv-fJxLhIpIIiw.png"/></div></div></figure><p id="d338" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">显而易见，袋装模型导致显著更高的MAPE值(然而在测试数据上表现更好)。这看起来确实是一笔艰难的交易，但最终还是有利可图的。由于袋装模型为我们提供了更准确的预测，MAPE值可以包括在内。</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es mn"><img src="../Images/bf6c848e4eb443b20c47223c8f742072.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*389W7dpjvAxGvdndcnZnSQ.png"/></div></div><figcaption class="la lb et er es lc ld bd b be z dx translated">因此，西南航空公司和美国航空公司都选择了袋装模型。</figcaption></figure><p id="a694" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">结论</p><p id="0975" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">该项目试图建立复杂的模型来解决乘客在日常生活中面临的简单问题。希望你喜欢阅读它！</p><h1 id="cd8e" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">有关时间序列模型构建的更多信息，请访问:<a class="ae jk" href="https://www.analyticsvidhya.com/blog/2015/12/complete-tutorial-time-series-modeling/" rel="noopener ugc nofollow" target="_blank">https://www . analyticsvidhya . com/blog/2015/12/complete-tutorial-Time-Series-modeling/</a></h1><figure class="kp kq kr ks fd ij er es paragraph-image"><div class="er es if"><img src="../Images/3f38be4d2fcebe02ee5db158d60e7138.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*IDw1v2in7fkwsg2d.gif"/></div></figure><p id="ab90" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi">The project was an attempt at building complex models to solve a simple problem faced by passengers in their everyday life. Hope you enjoyed reading it!</p><p id="a887" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi">Further information on Time Series Model Building can be found at: <a class="ae jk" href="https://www.analyticsvidhya.com/blog/2015/12/complete-tutorial-time-series-modeling/" rel="noopener ugc nofollow" target="_blank">https://www.analyticsvidhya.com/blog/2015/12/complete-tutorial-time-series-modeling/</a></p></div></div>    
</body>
</html>