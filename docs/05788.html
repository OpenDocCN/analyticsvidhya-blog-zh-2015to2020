<html>
<head>
<title>Novel Coronavirus (COVID-19) Tracker App Using Flask</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用烧瓶的新型冠状病毒(新冠肺炎)跟踪器应用程序</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/novel-coronavirus-covid-19-tracker-app-using-flask-1fd08dc314b6?source=collection_archive---------19-----------------------#2020-05-02">https://medium.com/analytics-vidhya/novel-coronavirus-covid-19-tracker-app-using-flask-1fd08dc314b6?source=collection_archive---------19-----------------------#2020-05-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/28422fa41bfa3c34ef22f028b0208196.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iEzhRRSMVZzKz3kPe6LxDA.jpeg"/></div></div></figure><blockquote class="iq ir is"><p id="aa0c" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是构建Flask应用程序系列的第2部分。如果你是Flask的绝对初学者，我建议你先浏览一下<a class="ae js" rel="noopener" href="/@dkotnala5/simplest-guide-on-getting-started-with-flask-8f70bc1c5c96">之前的帖子</a>。在那篇文章中，我解释了如何用最简单的方式编写你的第一个flask应用程序。</p></blockquote><p id="1497" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">在本教程中，我们将从上一篇文章中离开的地方继续。您将学习如何:</p><ol class=""><li id="0213" class="jw jx hi iw b ix iy jb jc jt jy ju jz jv ka jr kb kc kd ke bi translated">从Flask呈现HTML页面</li><li id="6dff" class="jw jx hi iw b ix kf jb kg jt kh ju ki jv kj jr kb kc kd ke bi translated">使用API获取数据</li><li id="adc6" class="jw jx hi iw b ix kf jb kg jt kh ju ki jv kj jr kb kc kd ke bi translated">将数据从Flask应用程序(后端)发送到HTML页面(前端)</li><li id="66b6" class="jw jx hi iw b ix kf jb kg jt kh ju ki jv kj jr kb kc kd ke bi translated">使用Bootstrap和Materialize CSS在前端整齐地显示数据。</li></ol><h1 id="1657" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">如何从Flask渲染HTML页面？</h1><p id="89b0" class="pw-post-body-paragraph it iu hi iw b ix li iz ja jb lj jd je jt lk jh ji ju ll jl jm jv lm jp jq jr hb bi translated">HTML是网页的标准标记语言。使用HTML，你可以创建自己的网站。如果你不懂HTML，那么我会推荐你先去浏览一下基本的<a class="ae js" href="https://www.w3schools.com/html/" rel="noopener ugc nofollow" target="_blank"> HTML教程</a>。你只需要知道如何创建一个基本的HTML页面，head，style，body，div，a，p，heading (h1，h2，h3，h4，h5，h6)标签。</p><p id="763f" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">说到这里，让我们继续创建我们的基本HTML页面，它将从我们的flask应用程序中呈现。</p><figure class="lo lp lq lr fd ij er es paragraph-image"><div class="er es ln"><img src="../Images/ade9e8fd28b24f28d9861e974e6a0d90.png" data-original-src="https://miro.medium.com/v2/resize:fit:912/format:webp/1*yXv9yUUgtlmgUBF5FEwZBQ.png"/></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">初始HTML页面</figcaption></figure><p id="dbf8" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">我们将在我们的项目目录中创建一个文件夹，其中包含我们的flask文件。在模板文件夹中以template.html的名字保存这个HTML文件。目录结构现在将如下所示:</p><figure class="lo lp lq lr fd ij er es paragraph-image"><div class="er es lw"><img src="../Images/755c5d87763bca4566ca83049f9c59bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:508/format:webp/1*G-d6Kr_jydv-WZanCEYV_w.png"/></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">目录结构</figcaption></figure><p id="6efd" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">让我们在flask文件“covid_tracker.py”中编写一些代码来呈现这个HTML页面。</p><figure class="lo lp lq lr fd ij er es paragraph-image"><div class="er es lx"><img src="../Images/7cf3426fca92ff541b2a989c3065edc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*uPSV4_EddpAirKdSaI3Ivg.png"/></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">从Flask呈现HTML页面</figcaption></figure><p id="db96" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">从命令提示符运行该文件。(记得在运行之前激活您的虚拟环境！)</p><pre class="lo lp lq lr fd ly lz ma mb aw mc bi"><span id="550c" class="md kl hi lz b fi me mf l mg mh">python covid_tracker.py</span></pre><figure class="lo lp lq lr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mi"><img src="../Images/ed94eb06bea03c298e51cf7798da4852.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UhRZaRKuVoAl0APFH1akqA.png"/></div></div></figure><p id="dbfb" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">转到您的浏览器并打开localhost:5000 URL</p><figure class="lo lp lq lr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mj"><img src="../Images/8bd7b49849b30070459018c30cdfe710.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2dE5Rhb_KpM-xAz3guOhng.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">从Flask呈现的HTML页面</figcaption></figure><p id="4024" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">我们完事了。我们可以在web浏览器中看到我们的template.html文件的内容。</p></div><div class="ab cl mk ml gp mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hb hc hd he hf"><h1 id="0e7c" class="kk kl hi bd km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld mv lf lg lh bi translated">如何使用API获取新冠肺炎数据并发送到HTML页面？</h1><p id="d46d" class="pw-post-body-paragraph it iu hi iw b ix li iz ja jb lj jd je jt lk jh ji ju ll jl jm jv lm jp jq jr hb bi translated">我们将从Worldometer获得数据，这是一个相当可靠的信息来源。将使用此API检索数据:</p><pre class="lo lp lq lr fd ly lz ma mb aw mc bi"><span id="3f0f" class="md kl hi lz b fi me mf l mg mh"><a class="ae js" href="https://corona.lmao.ninja/v2/all" rel="noopener ugc nofollow" target="_blank">https://corona.lmao.ninja/v2/all</a></span></pre><p id="ec2d" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">下面是来自API的JSON响应:</p><pre class="lo lp lq lr fd ly lz ma mb aw mc bi"><span id="972f" class="md kl hi lz b fi me mf l mg mh">{</span><span id="a331" class="md kl hi lz b fi mw mf l mg mh">"updated": 1588389819839,</span><span id="6891" class="md kl hi lz b fi mw mf l mg mh">"cases": 3401002,</span><span id="af98" class="md kl hi lz b fi mw mf l mg mh">"todayCases": 2529,</span><span id="7b59" class="md kl hi lz b fi mw mf l mg mh">"deaths": 239602,</span><span id="0251" class="md kl hi lz b fi mw mf l mg mh">"todayDeaths": 154,</span><span id="9f72" class="md kl hi lz b fi mw mf l mg mh">"recovered": 1081600,</span><span id="3ae0" class="md kl hi lz b fi mw mf l mg mh">"active": 2079800,</span><span id="6773" class="md kl hi lz b fi mw mf l mg mh">"critical": 51355,</span><span id="a622" class="md kl hi lz b fi mw mf l mg mh">"casesPerOneMillion": 436,</span><span id="4fa7" class="md kl hi lz b fi mw mf l mg mh">"deathsPerOneMillion": 30,</span><span id="8445" class="md kl hi lz b fi mw mf l mg mh">"tests": 35249644,</span><span id="ed64" class="md kl hi lz b fi mw mf l mg mh">"testsPerOneMillion": 4518.9,</span><span id="a2ac" class="md kl hi lz b fi mw mf l mg mh">"affectedCountries": 214</span><span id="f935" class="md kl hi lz b fi mw mf l mg mh">}</span></pre><p id="0d86" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">我们将把这个JSON数据从Flask应用程序传递到我们的HTML页面，并使用“cases”、“recovered”等标签提取所需的信息。让我们看看如何做到这一点。</p><p id="bda3" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">为了向API发出请求，我们需要requests模块。</p><pre class="lo lp lq lr fd ly lz ma mb aw mc bi"><span id="6934" class="md kl hi lz b fi me mf l mg mh">pip install requests</span></pre><p id="39c9" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">以下是我们Flask应用程序的代码:</p><figure class="lo lp lq lr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mx"><img src="../Images/fe76c9bd6f5d36bc727e0be06cf11032.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*WDrvRciN1ayv5NC7aERl-A.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">从API获取数据并将其发送到HTML模板</figcaption></figure><p id="d8ac" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">让我们来看看这些变化。</p><p id="6ffb" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">因为我们的flask应用程序可以有多个网页，所以根据某些条件从“/”或“home”路径重定向到相应的HTML页面路径会更好。</p><p id="5182" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">到目前为止，我们只有一个covid19页面。因此，我们将把用户从home route重定向到covid19页面。</p><p id="d858" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">为此，我们将需要<strong class="iw hj"> <em class="iv">重定向</em> </strong>和<strong class="iw hj"> <em class="iv"> url_for </em> </strong>模块。</p><p id="9560" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">现在我们在<strong class="iw hj"> /covid19 </strong>路线上。这里，将调用covid19()函数。我们在第16、17和18行获得API数据。一旦我们有了数据，我们可以像这样把它转发到我们的HTML页面:</p><pre class="lo lp lq lr fd ly lz ma mb aw mc bi"><span id="d38a" class="md kl hi lz b fi me mf l mg mh">return render_template(“template.html”, data=worldwide_data)</span></pre><p id="bfe0" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">在template.html文件中，进行以下更改:</p><figure class="lo lp lq lr fd ij er es paragraph-image"><div class="er es my"><img src="../Images/c909f09e4fbbe98d010e43938b1264b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1178/format:webp/1*DAo1ICaT-88VVbiqXdLucA.png"/></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">template.html</figcaption></figure><p id="df21" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">我们通过在{{ }}中写入变量来访问从flask接收的数据。</p><pre class="lo lp lq lr fd ly lz ma mb aw mc bi"><span id="b87f" class="md kl hi lz b fi me mf l mg mh">{{ data }}</span></pre><p id="ef9b" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">让我们运行这个文件，看看前端的输出。</p><figure class="lo lp lq lr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mz"><img src="../Images/1c3d8e2789e2cc840acd125cbd94f9e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uey4kEkY0VAmhcxdYTT2zQ.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">本地主机:5000/covid19</figcaption></figure><p id="f044" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">我们可以看到前端接收到的数据。看起来像一本字典，对吗？</p><p id="470d" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">让我们得到一个单独的标签值。我们可以使用JSON数据中的“cases”标签来获得总案例的值，如下所示:</p><pre class="lo lp lq lr fd ly lz ma mb aw mc bi"><span id="57a6" class="md kl hi lz b fi me mf l mg mh">{{ data[‘cases’] }}</span></pre><p id="f194" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">在template.html文件中进行以下更改:</p><figure class="lo lp lq lr fd ij er es paragraph-image"><div class="er es na"><img src="../Images/c5c465446d5bcbbd65acf0a68487decc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*rytvGOEt_LFecLqc4ZhziQ.png"/></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">template.html</figcaption></figure><p id="a866" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">运行Flask文件并在前端检查输出:</p><figure class="lo lp lq lr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nb"><img src="../Images/60efa5cda7968dad59a974e331075419.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fc64fIBuxb4XaTkILELoaw.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">本地主机:5000/covid19</figcaption></figure><p id="9627" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">到目前为止，我们已经学会了从<em class="iv"> Flask </em>渲染一个HTML页面，重定向到一个不同的路由，使用API获取数据，将这些数据发送到一个HTML页面，并在前端显示单个标签的内容。</p><p id="c55d" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">但这看起来不太妙，不是吗？</p><p id="3a12" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">让我们用CSS对我们的前端做一些修饰。如果你不了解CSS，那么我强烈建议你在继续学习之前，先学习CSS，Bootstrap和Materialize CSS基础知识。决不，你需要成为所有这些方面的专家。只要基础知识就够了。相信我，非常简单！以下是教程的链接:</p><p id="3b33" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated"><a class="ae js" href="https://www.w3schools.com/css/default.asp" rel="noopener ugc nofollow" target="_blank"> W3学校CSS教程</a></p><p id="caf9" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated"><a class="ae js" href="https://www.w3schools.com/bootstrap4/bootstrap_get_started.asp" rel="noopener ugc nofollow" target="_blank">自举4教程</a></p><p id="0abb" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated"><a class="ae js" href="https://materializecss.com/getting-started.html" rel="noopener ugc nofollow" target="_blank">物化CSS </a></p><p id="bf0e" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">在一些CSS魔术之后，使用bootstrap和Materialize CSS，我们得到以下输出:</p><figure class="lo lp lq lr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mj"><img src="../Images/e3b1a75ade79cc10877062a735772b09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rjkp_dkTBZmB706aKaSUAg.png"/></div></div></figure><p id="5b59" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">本教程到此结束！</p><p id="a461" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">在下一篇文章中，我们将学习如何从用户那里获得输入，并基于该输入执行一些操作。例如，使用前端将一个<em class="iv">国家名称</em>作为输入，在后端获取这个国家的数据，并在前端显示这个国家的信息。</p><p id="44e5" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">您可以在这个<a class="ae js" href="https://github.com/deepankarkotnala/COVID19Tracker_MediumArticle" rel="noopener ugc nofollow" target="_blank"> GitHub资源库中找到完整的代码。</a>我强烈建议你自己编写代码，不要只是复制粘贴。这些都是非常基本的东西，你应该能够自己写出来。如果需要，可以从Bootstrap和Materialize CSS文档中复制粘贴设计部分。这样，你就可以自己寻找所需的设计代码，无需任何指导就可以设计自己的应用程序。</p><p id="4924" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hb bi translated">我希望你喜欢这篇文章，并在今天学到了一些东西。如果这个教程对你有帮助，那么你可以在LinkedIn  上<em class="iv">为我</em>背书<a class="ae js" href="https://www.linkedin.com/in/deepankarkotnala/" rel="noopener ugc nofollow" target="_blank"> <em class="iv">烧瓶技能。如果你有任何问题，请在下面的评论区告诉我。快乐学习！</em></a></p></div></div>    
</body>
</html>