<html>
<head>
<title>Python 3.9: A Peek into the Future of Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 3.9:对Python未来的一瞥</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/python-3-9-a-peek-into-the-future-of-python-b696b80a2b12?source=collection_archive---------7-----------------------#2020-10-13">https://medium.com/analytics-vidhya/python-3-9-a-peek-into-the-future-of-python-b696b80a2b12?source=collection_archive---------7-----------------------#2020-10-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="c300" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">Python 3.9对Python编程的未来有多大影响。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/fb63b5b60e69547eff5aed5c9cfbce9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-oMOXQBqPrCxsDgJugJmDw.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">照片由<a class="ae jn" href="https://www.wsj.com/articles/the-office-pet-is-a-pig-no-really-1435708431" rel="noopener ugc nofollow" target="_blank">华尔街日报</a>拍摄</figcaption></figure><p id="5838" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Python 3.9于2020年10月5日星期一发布，带来了许多令人兴奋的新特性。</p><p id="bfb5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在本文中，我们将重点关注以下内容:</p><ol class=""><li id="119e" class="kk kl hi jq b jr js ju jv jx km kb kn kf ko kj kp kq kr ks bi translated">Python的年度发布周期</li><li id="aa26" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">解释器改进</li><li id="fbff" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">新的内置功能</li><li id="45ed" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">新的语法功能</li></ol><p id="f59c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">老实说<strong class="jq hj">并不</strong>喜欢阅读这些关于python如何消亡的文章，就像<a class="ae jn" href="https://towardsdatascience.com/python-is-slowly-losing-its-charm-9ca652726492" rel="noopener" target="_blank">的杰森·杜沙</a>写的Python正在慢慢失去魅力；即使他们非常固执己见。</p><p id="0d40" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">python的新版本显示了它仍然有多么活跃，以及为什么我们应该从这一点上期待更多。跟我一起阅读，看看如何…</p></div><div class="ab cl la lb gp lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hb hc hd he hf"><h1 id="b805" class="lh li hi bd lj lk ll lm ln lo lp lq lr io ls ip lt ir lu is lv iu lw iv lx ly bi translated">Python的年度发布周期</h1><p id="49e0" class="pw-post-body-paragraph jo jp hi jq b jr lz ij jt ju ma im jw jx mb jz ka kb mc kd ke kf md kh ki kj hb bi translated">Python 3.9标志着一个新发布日历的开始，将周期从1年缩短到仅12个月。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es me"><img src="../Images/faa94cee95d1df604acebc15f1be3d24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BDaZMpvk-IQZL8U00Q6fEg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">Python的年度发布周期— <a class="ae jn" href="https://s3.dualstack.us-east-2.amazonaws.com/pythondotorg-assets/media/dev/peps/pep-0602/pep-0602-example-release-calendar_llvnU1W.png" rel="noopener ugc nofollow" target="_blank"> PEP 602 </a></figcaption></figure><p id="5f25" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这将大大加快发布的速度，以至于我们可能会在每年的十月看到一个新的发布。</p><p id="4a98" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这一改变带来了一些好处，例如，使后续的<strong class="jq hj">版本变得更小</strong>，这将鼓励<strong class="jq hj">更快地在用户手中修复</strong>错误；仅举几个例子。</p><p id="2feb" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">阅读更多关于<a class="ae jn" href="https://www.python.org/dev/peps/pep-0602" rel="noopener ugc nofollow" target="_blank"> PEP 602 </a>的内容。</p></div><div class="ab cl la lb gp lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hb hc hd he hf"><h1 id="600c" class="lh li hi bd lj lk ll lm ln lo lp lq lr io ls ip lt ir lu is lv iu lw iv lx ly bi translated">解释器改进</h1><h2 id="587d" class="mf li hi bd lj mg mh mi ln mj mk ml lr jx mm mn lt kb mo mp lv kf mq mr lx ms bi translated">CPython的新PEG解析器</h2><p id="5a27" class="pw-post-body-paragraph jo jp hi jq b jr lz ij jt ju ma im jw jx mb jz ka kb mc kd ke kf md kh ki kj hb bi translated">Python 3.9将采用一个新的基于<a class="ae jn" href="https://en.wikipedia.org/wiki/Parsing_expression_grammar" rel="noopener ugc nofollow" target="_blank"> PEG </a>的解析器来代替当前的<a class="ae jn" href="https://en.wikipedia.org/wiki/LL_parser" rel="noopener ugc nofollow" target="_blank"> LL(1) </a>。我们预计Python 3.9会更快，因为与LL(1)解析器相比，新的PEG解析器在最坏的情况下会呈现指数级的时间性能。这是真的，因为PEG解析器有一个<strong class="jq hj">无限前瞻</strong>，这意味着它们可以在决定一个规则之前考虑任意数量的标记。</p><blockquote class="mt mu mv"><p id="6f91" class="jo jp mw jq b jr js ij jt ju jv im jw mx jy jz ka my kc kd ke mz kg kh ki kj hb bi translated">新解析器的<strong class="jq hj">性能</strong>已经过调整，在<strong class="jq hj">速度</strong>和<strong class="jq hj">内存消耗</strong>两方面都与旧解析器相差<strong class="jq hj">在10% </strong>以内。</p></blockquote><p id="7aa8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">完成了一个有100，000行的规范文件测试，无休止地重复以下三行:</p><pre class="iy iz ja jb fd na nb nc nd aw ne bi"><span id="b29e" class="mf li hi nb b fi nf ng l nh ni">1 + 2 + 4 + 5 + 6 + 7 + 8 + 9 + 10 + ((((((11 * 12 * 13 * 14 * 15 + 16 * 17 + 18 * 19 * 20))))))<br/>2*3 + 4*5*6<br/>12 + (2 * 3 * 4 * 5 + 6 + 7 * 8)</span></pre><p id="6004" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这个测试文件测试的结果证明，新的解析器比当前的解析器更快，使用的内存更少。</p><ul class=""><li id="f4a7" class="kk kl hi jq b jr js ju jv jx km kb kn kf ko kj nj kq kr ks bi translated">解析和编译成字节码需要1.28秒(新)。</li><li id="9953" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj nj kq kr ks bi translated">解析和编译需要1.44秒(当前解析器)。</li></ul><p id="be3a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然而，在Python 3.10之前，我们不会看到新解析器的太多动作。根据<a class="ae jn" href="https://www.python.org/dev/peps/pep-0617/" rel="noopener ugc nofollow" target="_blank"> PEP 617 </a>，对新解析器的更改将遵循精心设计的<a class="ae jn" href="https://www.python.org/dev/peps/pep-0617/#id38" rel="noopener ugc nofollow" target="_blank">迁移计划</a>。</p><h2 id="8398" class="mf li hi bd lj mg mh mi ln mj mk ml lr jx mm mn lt kb mo mp lv kf mq mr lx ms bi translated">新的数学函数</h2><p id="75c7" class="pw-post-body-paragraph jo jp hi jq b jr lz ij jt ju ma im jw jx mb jz ka kb mc kd ke kf md kh ki kj hb bi translated">内置的数学模块有新的令人敬畏的功能。</p><p id="cf15" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这个方法现在可以处理多个参数，而不是最初的两个。</p><p id="a186" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> LCM </strong> —这个新方法返回指定参数的最小公倍数。</p><p id="4f62" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">next after</strong>—<code class="du nk nl nm nb b">math.nextafter()</code>函数返回x之后y方向的下一个可表示的浮点值，如果y小于x，这些函数将返回小于x的最大可表示数。</p><p id="6492" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> ULP </strong> —代表“最后一个位置的单元”。该函数返回浮点值<em class="mw"> x. </em>的最低有效位的值</p><p id="cb96" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">用法</strong></p><pre class="iy iz ja jb fd na nb nc nd aw ne bi"><span id="9cfd" class="mf li hi nb b fi nf ng l nh ni">&gt;&gt;&gt; import math</span><span id="bd05" class="mf li hi nb b fi nn ng l nh ni">&gt;&gt;&gt; # gcd<br/>&gt;&gt;&gt; math.gcd(36,72,24)<br/>12</span><span id="cb3d" class="mf li hi nb b fi nn ng l nh ni">&gt;&gt;&gt; #lcm<br/>&gt;&gt;&gt; math.lcm(36,72,24)<br/>72</span></pre></div><div class="ab cl la lb gp lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hb hc hd he hf"><h1 id="db38" class="lh li hi bd lj lk ll lm ln lo lp lq lr io ls ip lt ir lu is lv iu lw iv lx ly bi translated">新的内置功能</h1><h2 id="47ca" class="mf li hi bd lj mg mh mi ln mj mk ml lr jx mm mn lt kb mo mp lv kf mq mr lx ms bi translated">removeprefix()和removesuffix()字符串方法</h2><p id="15ea" class="pw-post-body-paragraph jo jp hi jq b jr lz ij jt ju ma im jw jx mb jz ka kb mc kd ke kf md kh ki kj hb bi translated"><code class="du nk nl nm nb b">removeprefix('prefix')</code>和<code class="du nk nl nm nb b">removesuffix('suffix)</code>是字符串方法，可以分别用来轻松删除不需要的<em class="mw">前缀</em>或<em class="mw">后缀</em>。</p><p id="7ee2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">用法</strong></p><pre class="iy iz ja jb fd na nb nc nd aw ne bi"><span id="d739" class="mf li hi nb b fi nf ng l nh ni">&gt;&gt;&gt; text = 'Python 3.9'</span><span id="55a6" class="mf li hi nb b fi nn ng l nh ni">&gt;&gt;&gt; text.removeprefix('Python ') <br/># returns '3.9'</span><span id="d6ea" class="mf li hi nb b fi nn ng l nh ni">&gt;&gt;&gt; text.removesuffix(' 3.9') <br/># returns 'Python'</span></pre><p id="e00c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><code class="du nk nl nm nb b">lstrip/rstrtip</code>和新<code class="du nk nl nm nb b">remove(prefix/suffix)</code>之间可能会有混淆，因此，应考虑以下差异。</p><p id="040c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> lstrip/rstrip: </strong></p><ul class=""><li id="b0eb" class="kk kl hi jq b jr js ju jv jx km kb kn kf ko kj nj kq kr ks bi translated">该参数被解释为字符集。</li><li id="4906" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj nj kq kr ks bi translated">这些字符会从字符串的适当位置重复删除。</li></ul><p id="bdad" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">删除(前缀/后缀):</strong></p><ul class=""><li id="b85a" class="kk kl hi jq b jr js ju jv jx km kb kn kf ko kj nj kq kr ks bi translated">该参数被解释为连续的子字符串。</li><li id="6f6f" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj nj kq kr ks bi translated">最多只删除前缀/后缀的一个副本。</li></ul></div><div class="ab cl la lb gp lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hb hc hd he hf"><h1 id="4e4e" class="lh li hi bd lj lk ll lm ln lo lp lq lr io ls ip lt ir lu is lv iu lw iv lx ly bi translated">新的语法功能</h1><h2 id="479b" class="mf li hi bd lj mg mh mi ln mj mk ml lr jx mm mn lt kb mo mp lv kf mq mr lx ms bi translated">词典联盟</h2><p id="d7c7" class="pw-post-body-paragraph jo jp hi jq b jr lz ij jt ju ma im jw jx mb jz ka kb mc kd ke kf md kh ki kj hb bi translated">以前我们只有合并字典的<code class="du nk nl nm nb b">dict.update</code>和<code class="du nk nl nm nb b">{**d1, **d2}</code>方法。现在我们有两个以上的运营商实现联盟。</p><p id="058a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">字典合并</strong> <code class="du nk nl nm nb b"><strong class="jq hj">|</strong></code></p><pre class="iy iz ja jb fd na nb nc nd aw ne bi"><span id="bf83" class="mf li hi nb b fi nf ng l nh ni">&gt;&gt;&gt; old = {'one':1, 'two':2, 'three':3}<br/>&gt;&gt;&gt; new = {'four':4, 'five':5}<br/>&gt;&gt;&gt; old | new <br/><em class="mw">{'one':1, 'two':2, 'three':3, 'four':4, 'five':5}</em></span></pre><p id="6abc" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">更新操作符</strong> <code class="du nk nl nm nb b"><strong class="jq hj">|=</strong></code></p><pre class="iy iz ja jb fd na nb nc nd aw ne bi"><span id="4846" class="mf li hi nb b fi nf ng l nh ni">&gt;&gt;&gt; old = {'one':1.0, 'two':2.0, 'three':3}<br/>&gt;&gt;&gt; new = {'one':1.0, 'two':2.0, 'three':3.0, 'four':4.0}<br/>&gt;&gt;&gt; old |= new<br/>{'one':1.0, 'two':2.0, 'three':3.0, 'four':4.0}</span></pre><p id="4d96" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">用Iterables更新</strong></p><p id="feda" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">字典更新操作符<code class="du nk nl nm nb b">|=</code>的另一个非常酷的特性是它可以使用iterables来更新字典。</p><pre class="iy iz ja jb fd na nb nc nd aw ne bi"><span id="00f5" class="mf li hi nb b fi nf ng l nh ni">&gt;&gt;&gt; even = {'two':2, 'four':4}<br/>&gt;&gt;&gt; other = [('six', 6), ('eight', 8)]<br/>&gt;&gt;&gt; even |= other<br/>{'two':2, 'four':4, 'six':6, 'eight':8}</span></pre></div><div class="ab cl la lb gp lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hb hc hd he hf"><h1 id="8975" class="lh li hi bd lj lk ll lm ln lo lp lq lr io ls ip lt ir lu is lv iu lw iv lx ly bi translated">结论</h1><p id="7698" class="pw-post-body-paragraph jo jp hi jq b jr lz ij jt ju ma im jw jx mb jz ka kb mc kd ke kf md kh ki kj hb bi translated">每一个新的python版本都有使它更快、更强大的特性。毫无疑问，Python 3.9将对2021年10月Python 3.10开始的后续版本产生巨大影响。</p><p id="ab51" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">随着python社区的迅速发展，我相信python编程从未如此活跃过。</p></div><div class="ab cl la lb gp lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hb hc hd he hf"><p id="0268" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><a class="ae jn" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank">下载</a>享受<a class="ae jn" href="https://docs.python.org/3.9/whatsnew/3.9.html" rel="noopener ugc nofollow" target="_blank">新功能</a>。</p><p id="507b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您可以在Twitter上向我提出问题或建议。</p><p id="f38b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">感谢阅读！</p></div></div>    
</body>
</html>