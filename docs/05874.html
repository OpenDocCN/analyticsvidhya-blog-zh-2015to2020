<html>
<head>
<title>Building House Price Prediction Machine Learning Model.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">建立房价预测机器学习模型。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/building-house-price-prediction-machine-learning-model-b6619f44a8ab?source=collection_archive---------21-----------------------#2020-05-04">https://medium.com/analytics-vidhya/building-house-price-prediction-machine-learning-model-b6619f44a8ab?source=collection_archive---------21-----------------------#2020-05-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="d43e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇博客中，我将分享我建立机器学习模型预测房价的经验。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/d958eed92e2e4bb61efa141a1e1e2fde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*us8OB_BbS2BCHYQY9Qlv0w.jpeg"/></div></div></figure><p id="01c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我从<a class="ae jp" href="https://archive.ics.uci.edu/ml/machine-learning-databases/housing/" rel="noopener ugc nofollow" target="_blank">T3这里T5取数据集。你可以从这里下载数据集，也可以在我的</a><a class="ae jp" href="https://github.com/Shreyakkk" rel="noopener ugc nofollow" target="_blank"> Github库</a>中找到。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jq"><img src="../Images/b7dec2c4236c7ef3df71113c6d96318f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NUHurplOQtF3Sab0Iedxaw.png"/></div></div></figure><p id="1d57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们快速检查数据的类型和特性。下图是名为<em class="jr"> housing.data. </em>的数据的CSV文件</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es js"><img src="../Images/09fabdc15c287a977cecd6b3994e2280.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sMe2ZJFKU5sHQ7G-f5yYnA.png"/></div></div></figure><p id="cde5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们来看看这些功能以及它们是什么。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jt"><img src="../Images/1f38a3aadc8663696be1673ced093a58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3trtVltlxBZ24v0pxtxMfQ.png"/></div></div></figure><p id="43b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此在图像中，您可以观察到有<strong class="ih hj"> 14个不同的特性及其各自的定义。</strong></p><p id="ae66" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以现在让我们转向编码。</p><p id="2772" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:-这里我用的是Jupyter笔记本。你甚至可以使用Google Colab或任何其他ID。我试图在所有的单元格中添加注释，这样你就可以很容易地理解它们。如果你还有任何疑问，你可以通过博客末尾的链接联系我。</p><p id="2da1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我把博客分成了13个步骤。为了让你们更清楚。</p><ol class=""><li id="0dbb" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated">导入必要的库。</li></ol><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="3d65" class="ki kj hi ke b fi kk kl l km kn">#Import Libraries<br/>import pandas as pd<br/>import numpy as np<br/>import matplotlib.pyplot as plt<br/>%matplotlib inline</span></pre><p id="eb4a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.用变量名<strong class="ih hj"> housing加载CSV数据集。</strong></p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="6a6d" class="ki kj hi ke b fi kk kl l km kn">#Load Dataset in Notebook with variable name “housing”<br/>housing = pd.read_csv(“Datasets/house.csv”)</span></pre><p id="c128" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.检查加载的数据集。</p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="7652" class="ki kj hi ke b fi kk kl l km kn">#printing first 5 datas of dataset<br/>housing.head()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ko"><img src="../Images/fefbd41d8194d12f4561856404e402d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4-ObrJAjpg7QbxhpxrpFFQ.png"/></div></div></figure><p id="2dad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.检查关于数据集的信息</p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="52da" class="ki kj hi ke b fi kk kl l km kn">#Printing info of Dataset<br/>housing.info()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kp"><img src="../Images/fea118bdfbc27602bccfc8afcde938f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:922/format:webp/1*JCFXcl77_PVlUI7BmlSuHg.png"/></div></figure><p id="0b8b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.检查模型的描述</p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="4b1f" class="ki kj hi ke b fi kk kl l km kn">#Describing dataset<br/>housing.describe()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kq"><img src="../Images/fce450da0c98727038ff4092b49cf12d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xceD7Dy5WoP44x9CBDXvMg.png"/></div></div></figure><p id="e603" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6.在数据上绘制直方图。</p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="f81f" class="ki kj hi ke b fi kk kl l km kn"># For plotting histogram<br/>housing.hist(bins=50, figsize=(20, 15))</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kr"><img src="../Images/7ed8472649c7fa692cc3ceab7e57eb11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_2MfnOrw7ee-YLeqA0M0uQ.png"/></div></div></figure><p id="e140" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">7.现在，我们将数据集分为训练和测试。</p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="74a3" class="ki kj hi ke b fi kk kl l km kn"># Spliting Dataset in Training Dataset and Testing Dataset<br/>from sklearn.model_selection import StratifiedShuffleSplit<br/>split = StratifiedShuffleSplit(n_splits=1, test_size=0.2, random_state=42)<br/>for train_index, test_index in split.split(housing, housing[‘CHAS’]):<br/> strat_train_set = housing.loc[train_index]<br/> strat_test_set = housing.loc[test_index]</span></pre><p id="1f17" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">8.现在，我们来看看数据集中可用要素之间的相互关系。</p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="0f21" class="ki kj hi ke b fi kk kl l km kn">corr_matrix = housing.corr()<br/>corr_matrix[‘MEDV’].sort_values(ascending=False)</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ks"><img src="../Images/75cc649135681dadcd1ce8eda892d632.png" data-original-src="https://miro.medium.com/v2/resize:fit:594/format:webp/1*mZjW7JaxKo8-S2Tqwu98EQ.png"/></div></figure><p id="a824" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里你可以观察到RM有正相关，LSTAT有强负相关。</p><p id="2c60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">9.现在让我们为丢失的数据做一些事情。</p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="e477" class="ki kj hi ke b fi kk kl l km kn"># Using SimpleImputer to handle missing data<br/>from sklearn.impute import SimpleImputer<br/>imputer = SimpleImputer(strategy=”median”)<br/>imputer.fit(housing)</span></pre><p id="30ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上面的代码中，我试图拟合缺失值的中值。为此，我使用简单估算库。</p><p id="78e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">10.现在让我们创建一个管道</p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="a906" class="ki kj hi ke b fi kk kl l km kn">from sklearn.pipeline import Pipeline<br/>from sklearn.preprocessing import StandardScaler<br/>my_pipeline = Pipeline([<br/> (‘imputer’, SimpleImputer(strategy=”median”)),<br/> # ….. add as many as you want in your pipeline<br/> (‘std_scaler’, StandardScaler()),<br/>])<br/>housing_num_tr = my_pipeline.fit_transform(housing)</span></pre><p id="6b8e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">11.现在让我们导入RandomForestRegressor并放入我们的数据集。</p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="df3c" class="ki kj hi ke b fi kk kl l km kn">from sklearn.ensemble import RandomForestRegressor<br/>model = RandomForestRegressor()<br/>model.fit(housing_num_tr, housing_labels)</span></pre><p id="a9f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">12.正在保存模型。</p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="0409" class="ki kj hi ke b fi kk kl l km kn">from joblib import dump, load<br/>dump(model, ‘Dragon.joblib’)</span></pre><p id="8fa8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">13.加载模型并预测输出。</p><p id="1157" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输入— [-5.43942006，4.12628155，-1.6165014，-0.67288841，-1.42262747，<br/> -11.44443979304，-49.31238772，7.61111401，-26.0016879，-0.5778192，<br/>。</p><p id="898b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这基本上是具有13个特征的模型的输入。</p><p id="c8c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jr">注意:-始终按照训练模型时给出的相同顺序给模型输入。</em></p><pre class="je jf jg jh fd kd ke kf kg aw kh bi"><span id="e500" class="ki kj hi ke b fi kk kl l km kn">from joblib import dump, load<br/>import numpy as np<br/>model = load(‘Dragon.joblib’) <br/>features = np.array([[-5.43942006, 4.12628155, -1.6165014, -0.67288841, -1.42262747,<br/> -11.44443979304, -49.31238772, 7.61111401, -26.0016879 , -0.5778192 ,<br/> -0.97491834, 0.41164221, -66.86091034]])<br/>model.predict(features)</span></pre><p id="c08b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kt"><img src="../Images/ced1323b440dcf20fc4645f203551a53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BWdrS_SLEziUaE5vznUFfQ.png"/></div></div></figure><p id="585b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里我们的模型预测价格为24.167美元。我知道以这个价格买下这栋房子是不可能的。但是我们用随机数据来预测。所以，不要太在意预测的价格。而不是试图在我们的机器上运行这个模型，并给这个模型一个准确而有意义的输入。</p><p id="0e83" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以在下面的回复/评论部分分享您的成果。</p><p id="8426" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在来说说模型的精度。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ku"><img src="../Images/22d0a0d73d0553a8e2c2c157066ea398.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UEgaN_y8350o1ivYFQBR8g.png"/></div></div></figure><p id="2ff0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该模型的得分约为63%,但它一点也不差，因为我们使用了非常小的数据集。它只包含每个特征的506个数据。</p><p id="a949" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我也尝试了其他机器学习算法，但RandomForest在准确性方面名列前茅。</p><p id="01a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你们也可以试试其他算法，然后告诉我你们的准确性。</p><p id="2568" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">从</strong> <a class="ae jp" href="https://github.com/Shreyakkk/House-Price-Prediction-Model" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">这里</strong> </a> <strong class="ih hj">下载源代码和数据集。</strong></p></div><div class="ab cl kv kw gp kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hb hc hd he hf"><p id="18a7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jr">希望你喜欢这个博客。欢迎在评论区分享你的想法，你也可以在我的社交网站上和我联系。</em></strong><br/>Linkedin—<a class="ae jp" href="https://www.linkedin.com/in/shreyak007/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/shreyak007/</a><br/>Github—<a class="ae jp" href="https://github.com/Shreyakkk" rel="noopener ugc nofollow" target="_blank">https://github.com/Shreyakkk</a><br/>Twitter—<a class="ae jp" href="https://twitter.com/Shreyakkkk" rel="noopener ugc nofollow" target="_blank">https://twitter.com/Shreyakkkk</a><br/>insta gram—<a class="ae jp" href="https://www.instagram.com/shreyakkk/" rel="noopener ugc nofollow" target="_blank">https://www.instagram.com/shreyakkk/</a><br/>Snapchat—shreyak 001<br/>脸书—<a class="ae jp" href="https://www.facebook.com/007shreyak" rel="noopener ugc nofollow" target="_blank">https://www.facebook.com/007shreyak</a></p><p id="0a8c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">谢谢大家！</p></div></div>    
</body>
</html>