<html>
<head>
<title>Day 15: Reliably modify and replace text with the least amount of effort</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">第15天:用最少的努力可靠地修改和替换文本</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/day-15-manipulate-filenames-with-the-least-amount-of-clicking-8c1a7ba5f8d1?source=collection_archive---------20-----------------------#2020-05-15">https://medium.com/analytics-vidhya/day-15-manipulate-filenames-with-the-least-amount-of-clicking-8c1a7ba5f8d1?source=collection_archive---------20-----------------------#2020-05-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0cf1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了保证您的分析是简化的和可重复的，请熟悉函数<em class="jd"> regexprep </em>。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/749cca81df31600ecc730504d96341c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HAYmRtStokogsaMeXt8Ncg.png"/></div></div></figure><p id="5553" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<a class="ae jq" rel="noopener" href="/@neuraljojo/day-13-when-you-might-want-to-turn-your-numerical-data-into-text-290cfd26c291">的第13天</a>和<a class="ae jq" rel="noopener" href="/@neuraljojo/day-14-my-three-favorite-regular-expression-uses-90763cd803ef">的第14天</a>，我们使用正则表达式定位文本。在今天的帖子中，我们在函数<em class="jd"> regexprep </em>中使用正则表达式，这是进行精确有效的文本替换的关键。</p><h2 id="5b13" class="jr js hi bd jt ju jv jw jx jy jz ka kb iq kc kd ke iu kf kg kh iy ki kj kk kl bi translated">以下是regexprep的几个简单用例:</h2><p id="3825" class="pw-post-body-paragraph if ig hi ih b ii km ik il im kn io ip iq ko is it iu kp iw ix iy kq ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">从文件名中删除字符。</em> </strong>为了保持一致性，如果你能把一组数据和一个文件名放在一起，然后把这个文件名变成一个图形标题，那就太好了。你可以这样做。</p><pre class="jf jg jh ji fd kr ks kt ku aw kv bi"><span id="d3b5" class="jr js hi ks b fi kw kx l ky kz">% Lets suppose we have a file with some data %<br/>file = 'C:\Files\Kaleemah\Mouse1\Images\Neuron_10_May_12_Dorsal.tif'</span><span id="4f7f" class="jr js hi ks b fi la kx l ky kz">% We would load the file and show the image %</span></pre><p id="c81a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在你想创建一个标题，但你不想要所有额外的东西。以下是如何分两步做的。首先，确保你对我在第13天和第14天讨论的话题感到舒服。接下来，我们将获取文件名:</p><pre class="jf jg jh ji fd kr ks kt ku aw kv bi"><span id="d94e" class="jr js hi ks b fi kw kx l ky kz">% Extract just the filename %</span><span id="b873" class="jr js hi ks b fi la kx l ky kz">file = regexp( file, '(Neuron.*)(?=.tif)', 'match')<br/>file = file{1}</span></pre><blockquote class="lb lc ld"><p id="91fa" class="if ig jd ih b ii ij ik il im in io ip le ir is it lf iv iw ix lg iz ja jb jc hb bi translated">旁白:是的，有一种更复杂的方法，我还没有谈到，因为正如我所说的，正则表达式可能会变得非常复杂，我建议如果你有时间和耐心，你可以花几个星期的时间来研究它们。以下是另一种方法:</p></blockquote><pre class="jf jg jh ji fd kr ks kt ku aw kv bi"><span id="9c67" class="jr js hi ks b fi kw kx l ky kz">file = 'C:\Files\Kaleemah\Mouse1\Images\Neuron_10_May_12_Dorsal.tif'<br/>file = regexp( file, '([^\\]+$)', 'match')<br/>file = regexp( file, '(.*)(?=.tif)', 'match')</span><span id="27ed" class="jr js hi ks b fi la kx l ky kz">% To recover the output as a string you'll need to use file{1}{1} %</span></pre><p id="babb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">无论是哪种情况，此时，您都应该有一个变量<em class="jd">文件</em>，它是一个包含“Neuron_10_May_12_Dorsal”的字符串</p><p id="8bb6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在如果你试图创建一个图形并给一个图命名，不管是通过<em class="jd">轴</em>还是<em class="jd">标题</em>功能，你都会遇到这个问题:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lh"><img src="../Images/ad269c365ef0093002c6bbbad18bb8c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*k8XNCQR-DiGLgHsSii_ZZg.png"/></div></figure><p id="5a02" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是如何使用<em class="jd"> regexprep </em>来解决这个问题:</p><pre class="jf jg jh ji fd kr ks kt ku aw kv bi"><span id="7a2a" class="jr js hi ks b fi kw kx l ky kz">file = regexprep( file, '_', ' ' )</span></pre><p id="6e03" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您随后为图添加标题，您将看到不带下标的文本。</p></div><div class="ab cl li lj gp lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="hb hc hd he hf"><p id="1b54" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">另一个用例:加载、重命名和保存文件。如果你对可靠的、可重复的分析感兴趣，并且这种分析不会给你或你的合作者带来麻烦，那么下面的图片就是你最糟糕的噩梦:</em></strong></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lp"><img src="../Images/8bfa2bb77ebddc53e4f8c06738f16e77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*RHklY2MoRNjpoHhd_BMBRw.gif"/></div></div></figure><p id="3ae3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过图形界面访问文件不仅是单调乏味的手工操作，而且最糟糕的是，在大多数情况下，它不会留下你打开的文件在哪里的痕迹。</p><p id="274b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一种方法是在您的分析脚本或函数中保存写好的文件名，这样下一个重复您的分析的人就可以准确地看到文件的位置。</p><p id="3e97" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这可能是这样的:</p><pre class="jf jg jh ji fd kr ks kt ku aw kv bi"><span id="82c8" class="jr js hi ks b fi kw kx l ky kz">files{1} = 'C:\Files\Kaleemah\Mouse1\Images\Neuron_10_May_12_Dorsal.tif';</span></pre><p id="93d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将是加载文件的位置。接下来，假设您想要读入图像并对其进行一些分析。</p><pre class="jf jg jh ji fd kr ks kt ku aw kv bi"><span id="7b63" class="jr js hi ks b fi kw kx l ky kz">% Suppose you want to load the images (For illustrative purposes only!)   %<br/>                    <br/>% image{1} = imread( files{1} );                       <br/>% image{1} = some_analysis_fxn( image{1} );</span></pre><p id="2418" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将输出图像写入原始位置(文件{1})是可以的，但是这样会覆盖原始图像。以下是替换文件夹位置并在文件名中添加“_modified”的方法:</p><pre class="jf jg jh ji fd kr ks kt ku aw kv bi"><span id="a771" class="jr js hi ks b fi kw kx l ky kz">% First change the folder location %<br/>files_adjusted{1} = regexprep( files{1}, 'C:\Files\Kaleemah\Mouse1\Images\', 'C:\Files\Kaleemah\Mouse1\Images\Adjusted\' )</span><span id="164f" class="jr js hi ks b fi la kx l ky kz">% Next, change the file name %<br/>files_adjusted{1} = regexprep( files_adjusted{1}, '.tif', '_modified.tif' )</span></pre><p id="add9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">新文件名应该是:</p><p id="f2de" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">" C:\ Files \ Kaleemah \ mouse 1 \ Images \ Neuron _ 10 _ May _ 12 _ Dorsal _ modified . TIF "</p><p id="9792" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您可以将修改后的图像保存到变量<em class="jd"> files_adjusted{1} </em>中包含的新位置。</p></div><div class="ab cl li lj gp lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="hb hc hd he hf"><p id="aac1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">既然你已经掌握了<a class="ae jq" rel="noopener" href="/analytics-vidhya/day-13-when-you-might-want-to-turn-your-numerical-data-into-text-290cfd26c291">第13天</a>、<a class="ae jq" rel="noopener" href="/analytics-vidhya/day-14-my-three-favorite-regular-expression-uses-90763cd803ef">第14天</a>和<a class="ae jq" rel="noopener" href="/analytics-vidhya/day-15-manipulate-filenames-with-the-least-amount-of-clicking-8c1a7ba5f8d1">第15天</a>的这些重要的文本处理技能，那么让我们继续学习<a class="ae jq" rel="noopener" href="/@neuraljojo/day-16-the-ten-table-commandments-7186337fb020">第16天</a>，在这里我们将了解另一个对任何数据科学家都极其有用的技能:表格！</p></div></div>    
</body>
</html>