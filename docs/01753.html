<html>
<head>
<title>What are Haar Features used in Face Detection ?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">人脸检测中用到的Haar特征有哪些？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/what-is-haar-features-used-in-face-detection-a7e531c8332b?source=collection_archive---------2-----------------------#2019-11-12">https://medium.com/analytics-vidhya/what-is-haar-features-used-in-face-detection-a7e531c8332b?source=collection_archive---------2-----------------------#2019-11-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div class="er es hg"><img src="../Images/1fc28e735433ab52a7247a9239307aa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:862/format:webp/1*pu1tIYEeFCO6ELoCOgJJRQ.png"/></div><figcaption class="hn ho et er es hp hq bd b be z dx translated">基于哈尔特征的人脸检测</figcaption></figure><div class=""/><p id="39e7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">人脸识别是指识别人，人脸验证是指验证声称的人(通过在某个数据库中进行匹配)。它的应用遍及各个领域，如学校、学院、组织、工厂、公共场所、监控等。这些技术正在全球范围内获得动力，并随着人类情感识别而延伸，其应用是巨大的。</p><p id="d6fa" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">人脸识别的关键是检测人脸的相关特征，如眼睛、眉毛、鼻子、嘴唇等。那么我们如何实时/在图像中检测这些特征呢？答案是<strong class="is hu">哈尔小波或者哈尔特征</strong>。所使用的算法被称为Viola-Jones算法。在这篇文章中，我们将试图了解什么是Haar特征，以及它们如何用于人脸检测。</p><p id="0977" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">哈尔特征是阿尔弗雷德·哈尔在1909年提出的一系列重新标度的方形函数。它们类似于卷积神经网络课程中讲授的卷积核。我们将把这些haar特征应用到人脸的所有相关部分，从而检测出人脸。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es jo"><img src="../Images/a881bce0cc5cffcb16e64906287bdcc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/0*utIH1bMtOt3agkg0.png"/></div><figcaption class="hn ho et er es hp hq bd b be z dx translated">哈尔特征的例子:方形内核。<a class="ae jt" href="https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/VJ_featureTypes.svg/640px-VJ_featureTypes.svg.png" rel="noopener ugc nofollow" target="_blank">来源</a></figcaption></figure><p id="14b9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如上图所示，有边要素(1和2)，线要素(3)。它们是黑白像素图像(值0或值1)。但是通常我们有灰度/彩色图像(像素值范围从0到255)。现在假设我们有黑白图像的理想场景。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es ju"><img src="../Images/e128d599efec5563a0b349002c70f1be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/0*8OuVyFarJa0lVIRt.jpg"/></div><figcaption class="hn ho et er es hp hq bd b be z dx translated">目标图像。<a class="ae jt" href="https://pixabay.com/photos/woman-portrait-face-girl-beauty-3834641/" rel="noopener ugc nofollow" target="_blank">来源</a></figcaption></figure><p id="62f7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了检测眉毛，我们将使用Haar特征(图像(1))，因为前额和眉毛形成像图像一样的较亮像素-较暗像素。类似地，为了检测嘴唇，我们使用具有更亮-更暗-更亮像素的类似Haar的特征(图像(3))。为了检测鼻子，我们可以使用来自(图像(1))的更暗-更亮的类似Harr的特征。诸如此类。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es jv"><img src="../Images/915e15a72eb5f99202f65874e30c13c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/1*cXhfnN8cHo8-_GI_FLFMRQ.png"/></div><figcaption class="hn ho et er es hp hq bd b be z dx translated">应用于人脸相关部分的哈尔特征</figcaption></figure><p id="6fce" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们看看一些需要的计算。</p><p id="659d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于黑白图像(参见下面的第一个方框)，像素值为0或1 <em class="jw">(理想情况)</em>，但在实际情况下，我们有标准化的灰度图像，如包含像素值的底部方框所示。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es jx"><img src="../Images/c81f5cdd4bbc18c63721adbbe3ba4ac6.png" data-original-src="https://miro.medium.com/v2/resize:fit:522/format:webp/1*KEGHGBKMGJK_zIdPghRRfw.png"/></div><figcaption class="hn ho et er es hp hq bd b be z dx translated">像素值:理想情况下的0和1(顶部方框)，真实情况下的归一化灰度值(底部方框)</figcaption></figure><p id="84b3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">根据Viola-Jonas算法，为了检测图像中存在的Haar类特征，下面的公式应该给出更接近1的结果。该值越接近1，图像中检测Haar特征的变化越大。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es jy"><img src="../Images/ab59ec0e2ad5e8acc94a8309f9f64c35.png" data-original-src="https://miro.medium.com/v2/resize:fit:606/format:webp/1*m33m99XFWotsdLApD-BK6g.png"/></div></div></figure><p id="391b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">理想情况:Delta =(1/8)*(8)——(1/8)* 0 = 1</p><p id="15bc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">真实案例:Delta =(1/8)*(5.9)-(1/8)*(1.3)= 0.575</p><p id="6f4c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jw">(对于灰度图像，假设我们已经将黑白阈值设置为0.3。意味着像素值小于或等于0.3被认为是白色，任何大于0.3的像素被认为是黑色)</em></p><p id="18ee" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以定义另一个阈值参数来检测边缘或Haar特征。我们称之为德尔塔<em class="jw">(这不同于白暗阈值)</em>。假设我们已经将阈值设置为0.5。任何大于0.5的delta值都会检测到Haar特征。以这种方式，我们可以在给定的图像上应用、获取和检测最相关的特征，如眉毛、嘴唇、鼻子等。</p></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><p id="771e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来我们将快速了解什么是<strong class="is hu">哈尔级联分类器</strong></p><p id="1ce4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它们是一系列分类器或特征(正如我们在上面看到的),用于识别图像中的对象。使用滑动窗口和haar特征的数量(随着级数的增加而增加)，最终导致检测人脸与否。为Viola Jonas方法定义了总共38个阶段。根据滑动窗口的大小和人脸的位置、特征的数量，可以在某一阶段检测到人脸。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es kk"><img src="../Images/7de5d5164594e4006c3fbe8ca9dfe273.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6suBYFCHbOspeo_YD4jP6Q.png"/></div></div><figcaption class="hn ho et er es hp hq bd b be z dx translated">哈尔级联分类器方法</figcaption></figure><p id="1cc9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">希望你在理解人脸检测中使用的Haar特征时有一些直觉。我已经尽力简化了术语。如果你有任何问题，请发表评论。我很乐意回答。</p><p id="b8ce" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">感谢您阅读文章。</p></div></div>    
</body>
</html>