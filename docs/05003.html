<html>
<head>
<title>Exploring Logistic Curves for Disease spread in China</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索中国疾病传播的逻辑斯蒂曲线</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/exploring-logistic-curves-for-disease-spread-in-china-80c616382a9c?source=collection_archive---------24-----------------------#2020-04-07">https://medium.com/analytics-vidhya/exploring-logistic-curves-for-disease-spread-in-china-80c616382a9c?source=collection_archive---------24-----------------------#2020-04-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7bfb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在帖子<a class="ae jd" rel="noopener" href="/analytics-vidhya/modelling-disease-spread-using-a-logistic-model-in-python-c14e5755efc">的基础上，让我们看看通用的形式是否符合像中国这样的国家的数据。</a></p><h1 id="5b80" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">一般形式和曲线</h1><p id="b063" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">逻辑曲线的一般形式被定义为以下形式的参数方程。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es kh"><img src="../Images/d51858b1878fb52a594b702962b263b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*jtwEHAFZZMQofaMWw3DhmQ.png"/></div></figure><p id="b0cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">方程的四个决定参数是<em class="kp"> L </em>、<em class="kp"> k </em>、<em class="kp"> x0 </em>和<em class="kp"> b </em>。使用一些适当的参数值，曲线如下所示:</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es kq"><img src="../Images/de212cb9482773f0a212d20a5c0e59b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:950/format:webp/1*rBVYPpvJ6hXJyfV0kTmPSw.png"/></div><figcaption class="kr ks et er es kt ku bd b be z dx translated">蓝色的逻辑曲线，橙色的一阶微分</figcaption></figure><p id="5511" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">逻辑斯谛曲线有我们熟悉的S形曲线。另外需要注意的是<strong class="ih hj">橙色的</strong>曲线，它代表曲线的<em class="kp">变化率</em>，有一个熟悉的钟形。橙色曲线的峰值对应于逻辑曲线的<strong class="ih hj"> <em class="kp">拐点</em> </strong> <em class="kp"> </em>，在此处曲线开始向下弯曲。</p><blockquote class="kv kw kx"><p id="be5e" class="if ig kp ih b ii ij ik il im in io ip ky ir is it kz iv iw ix la iz ja jb jc hb bi translated">[从数学角度来看，二阶微分在峰值处为0，然后变为负值，即下面的灰色曲线。</p></blockquote><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es lb"><img src="../Images/3babccd983ccc11462537647114cf66e.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*vdrRZ5XL9fgNTlYjy0uaAQ.png"/></div></figure><blockquote class="kv kw kx"><p id="95fb" class="if ig kp ih b ii ij ik il im in io ip ky ir is it kz iv iw ix la iz ja jb jc hb bi">]</p></blockquote><p id="6080" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这基本上是扩散概率<em class="kp">‘p’</em>开始被一小部分人支配的点(斜率的变化作为拐点)</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es lc"><img src="../Images/8ea1526c2718c2036f7a470be6cbc8b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:662/format:webp/0*jwESttXThtRp7J7G.png"/></div></figure><p id="9cb3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了发现与特定数据集相关的参数，我们将使用类似于<a class="ae jd" rel="noopener" href="/analytics-vidhya/covid-19-curve-fitting-and-future-projections-a4ffdb2e17e7">新冠肺炎曲线拟合和未来预测</a>中描述的方法。</p><pre class="ki kj kk kl fd ld le lf lg aw lh bi"><span id="426d" class="li jf hi le b fi lj lk l ll lm">def sigmoid(x, L ,x0, k, b):<br/>    y = L / (1 + np.exp(-k*(x-x0)))+b<br/>    return (y)</span><span id="206f" class="li jf hi le b fi ln lk l ll lm">countries = ['china']<br/>for country in countries:<br/>    data = requests.get("<a class="ae jd" href="https://www.worldometers.info/coronavirus/country/" rel="noopener ugc nofollow" target="_blank">https://www.worldometers.info/coronavirus/country/</a>"+ country)<br/>    data = data.text<br/>    active = data[data.find("data: [")+len("data: ["):data.find("]", data.find("data: [")+len("data: ["))]<br/>    tot = data[data.find("data: [", data.find("name: \'Cases\'"))+len("data: ["):data.find("]", data.find("data: [", data.find("name: \'Cases\'"))+len("data: ["))]</span><span id="7345" class="li jf hi le b fi ln lk l ll lm">active = [int(i) for i in active.split(',')]<br/>    tot = [int(i) for i in tot.split(',')]<br/>    print(active)<br/>    print(tot)</span><span id="b8a2" class="li jf hi le b fi ln lk l ll lm">dates = data [data.find("categories: [")+len("categories: [") : data.find("]" , data.find("categories: [")+len("categories: ["))]<br/>    dates = [date for date in dates.split(",")]</span><span id="ff31" class="li jf hi le b fi ln lk l ll lm">print(len(tot))</span><span id="750b" class="li jf hi le b fi ln lk l ll lm">#use only the exponential part to fit the curve, not the whole data<br/>    finish = 40<br/>    start = 0<br/>    span = finish-start<br/>    p0 = [max(tot[start:finish]), np.median(np.linspace(0, span-1, span)),1,min(tot[start:finish])]<br/>    param, param_cov = curve_fit(sigmoid, np.linspace(0, span-1, span) , tot[start:finish], p0, method='dogbox')<br/>    print(param)<br/>    #param, param_cov = curve_fit(test, np.linspace(0, len(tot)-5, len(tot)-4) , tot[:-4])<br/>    clean_dates = [datetime.strptime(str(date) + " 2020", '\"%b %d\" %Y') for date in dates]<br/>    plt.plot(clean_dates, tot ,  label = country.upper() +" Total \n" + clean_dates[-1].strftime('%Y-%m-%d') + ":" + str(tot[-1]))<br/>    plt.plot(clean_dates, active ,  label = country.upper() +" Active" )<br/>    lobf = []<br/>    cleandates_lobf = []</span><span id="f206" class="li jf hi le b fi ln lk l ll lm">for i in range(len(tot)+5):<br/>        lobf.append(sigmoid(i, param[0], param[1], param[2], param[3]))<br/>        cleandates_lobf.append(min(clean_dates)+ timedelta(days = i))</span><span id="a828" class="li jf hi le b fi ln lk l ll lm">print(lobf)<br/>    plt.plot(cleandates_lobf, lobf, label = country.upper() + " Sigmoid curve fit on totals projected 1 week \n " + str(param))</span><span id="1d3c" class="li jf hi le b fi ln lk l ll lm">plt.legend()<br/>plt.grid(which = "both")<br/>plt.xticks(rotation=90)<br/>plt.xticks(cleandates_lobf)<br/>plt.show()</span></pre><p id="86d8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是中国在2020年4月7日的曲线。这几乎是一个完美的契合。</p><p id="3d59" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">需要注意的一个关键方面是，在scipy能够发现正确的参数之前，需要特别注意<em class="kp">初始化参数。使用这里的信息:<a class="ae jd" href="https://stackoverflow.com/questions/55725139/fit-sigmoid-function-s-shape-curve-to-data-using-python" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">https://stack overflow . com/questions/55725139/fit-sigmoid-function-s-shape-curve-to-data-using-python</strong></a></em></p><pre class="ki kj kk kl fd ld le lf lg aw lh bi"><span id="1a89" class="li jf hi le b fi lj lk l ll lm">p0 = [max(tot[start:finish]), np.median(np.linspace(0, span-1, span)),1,min(tot[start:finish])]</span></pre><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es lo"><img src="../Images/8f29a7aa84adf4e1cb59050f6c660805.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AwEYGb-0Oi73WUj7JDjB_Q.png"/></div></div></figure><p id="cbb4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如您所见，这几乎是数据的完美拟合，拟合参数为</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es lt"><img src="../Images/18d856fb8014ed19f7be4402ee73d76e.png" data-original-src="https://miro.medium.com/v2/resize:fit:338/format:webp/1*EaAr59HLaIrhaViJbDKn8A.png"/></div></figure><p id="430f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面橙色曲线中的每日病例也类似于总病例曲线的一阶微分。</p></div></div>    
</body>
</html>