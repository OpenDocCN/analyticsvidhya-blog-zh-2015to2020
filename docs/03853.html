<html>
<head>
<title>Machine Learning and Data Analysis with Python, Titanic Dataset: Part 3, Submit to Kaggle</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python进行机器学习和数据分析，泰坦尼克号数据集:第3部分，提交给Kaggle</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/machine-learning-and-data-analysis-with-python-titanic-dataset-part-3-submit-to-kaggle-a63f98f29657?source=collection_archive---------15-----------------------#2020-02-22">https://medium.com/analytics-vidhya/machine-learning-and-data-analysis-with-python-titanic-dataset-part-3-submit-to-kaggle-a63f98f29657?source=collection_archive---------15-----------------------#2020-02-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6fec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上次我们清理了我们的训练数据并建立了一个基线模型。在这个系列的这一部分，我们将对测试数据做同样的预处理，并通过Kaggle内核提交我们的预测。像往常一样，链接到视频版本将在底部。</p><p id="cb7d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们开始吧！</p><p id="c6c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们先再来看看提交文件的格式:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/523734e6af80c51797e8442dc664220f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*SO1LbPkTL8jwIxR3L8er4A.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">来自Kaggle的示例提交文件</figcaption></figure><p id="93b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后进行与我们对训练集所做的相同的预处理:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es jp"><img src="../Images/f4045ea3a5a0b34655f00999b5480e64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nQMPd52niChDbulSLtY9gQ.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">预处理测试集上的数据</figcaption></figure><ul class=""><li id="adca" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated">将测试数据作为Pandas dataframe读取，并将其存储在一个名为test_df的变量中。</li><li id="68b2" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">为测试集填写缺失的<em class="ki">年龄</em>栏。由于训练集中有更多的数据，为了获得更有代表性的平均值，我们希望将缺失的<em class="ki">年龄</em>条目设置为训练数据帧中相同性别乘客的平均年龄值。请注意，我们在训练集df上使用的条件之一是df["Sex"]==0，而不是df[" Sex "]= ' male '，这是因为训练集中的<em class="ki">性别</em>列已经转换为整数表示。</li><li id="4022" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">然后把我们目前不使用的3个值<em class="ki">名</em>、<em class="ki">票</em>和<em class="ki">舱</em>去掉。</li><li id="0b1a" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">将<em class="ki">性别</em>列中的字符串值转换为0和1。</li><li id="2770" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">在test_df上使用pd.get_dummies来获得已装载特性的一键编码。</li></ul><p id="5822" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们现在已经执行了与训练集完全相同的预处理步骤，但是:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kj"><img src="../Images/fc26d18186ea64d3caf9418784b225fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*-7XiLs7JIHtZZ3XKJzUw1A.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">意外的楠</figcaption></figure><p id="f855" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">。isna()。any()为每一列返回一个布尔值，检查它是否包含任何NaN条目。使用这个条件对dataframe列进行索引，我们可以获得包含缺失值的所有列的列表。运行test_df，我们知道在Fare列中有缺失的值。</p><p id="59aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是坚持住…</p><p id="eb67" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们不是刚刚清理了测试数据吗？</p><p id="4f7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是一个测试数据可能与训练数据有所不同的示例。仅仅因为我们在训练集中没有看到缺少<em class="ki">票价</em>条目的乘客，并不意味着我们可以安全地假设该特征对于所有要看到的数据都是填充的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es kk"><img src="../Images/d352a139eaa39878f1d49c71f88f05af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oGou18SoIVAlWeFUaCzkMA.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">乘客缺失票价条目</figcaption></figure><p id="fa1b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">幸运的是，我们只有一个实例丢失了<em class="ki"> Fare </em>条目，这表明这是一个罕见的事件，因此可以理解为什么它没有在训练集中发生。如果丢失<em class="ki"> Fare </em>条目的比率更高，我们将不得不检查为什么测试集中的这个特性似乎属于不同的分布。</p><p id="184b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的缺失- <em class="ki">票价- </em>乘客登上了<em class="ki"> Pclass </em> 3，因此我们可以用所有<em class="ki"> Pclass </em> 3乘客的平均值来填充缺失值，这与我们填充缺失<em class="ki">年龄</em>条目时使用的思路相同，只是我们假设<em class="ki">年龄</em>与<em class="ki">性别</em>更相关，而<em class="ki">票价</em>与<em class="ki"> Pclass </em>更相关。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es kl"><img src="../Images/bd37fcdd0945b046eb14d0da0971e5dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YzrylAlxbV2E3Wj1pBkOKQ.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">填写缺失的票价栏</figcaption></figure><p id="3a1d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们准备好做预测了！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es km"><img src="../Images/bea9de8e8df1cf72736cf1214b10c6e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*58NJ6rogKm32BwxesqUVzQ.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">基于Kaggle测试集的预测</figcaption></figure><p id="2d74" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">确保我们要对其进行预测的数据帧与我们用来定型模型的数据帧具有相同的列和相同的顺序。</p><p id="76bd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些预测的顺序将映射到数据帧中行的顺序。因此，如果我们创建另一个列，称其为<em class="ki">survives</em>，并将其设置为预测值，我们将根据需要将我们的预测映射到<em class="ki"> PassengerId </em>。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es kn"><img src="../Images/21026f2f0adf34f1e8650dc2128ff7e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HhUQAKnpUA-LisYFM8_5kg.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">绘制预测图并保存</figcaption></figure><p id="474b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们希望通过使用Pandas方法将预测保存在一个. csv文件中。to _ CSV({文件目录})。确保将index属性设置为False，否则当Kaggle读取您的提交时，它将得到这个<em class="ki"> Unnamed: 0 </em>列，并将拒绝提交。</p><p id="8ed5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">只需将此文件从您的本地计算机上传到Kaggle提交页面，然后等待结果！</p><p id="8f45" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是一段视频中的相同内容:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ko kp l"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">本文视频教程</figcaption></figure></div></div>    
</body>
</html>