<html>
<head>
<title>Time series forecasting in a simple way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用简单的方法进行时间序列预测</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/time-series-forecasting-in-a-simple-way-29b363e5be06?source=collection_archive---------15-----------------------#2020-11-27">https://medium.com/analytics-vidhya/time-series-forecasting-in-a-simple-way-29b363e5be06?source=collection_archive---------15-----------------------#2020-11-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/267f9682a766f196965635808f5eb09f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M-MgeWzBN68dp_nC1Jo0aA.jpeg"/></div></div></figure><p id="f5d7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你听过预言这个词吗？如果不是，让我用简单的方式告诉你。如果有人告诉你，你是那个将要拯救世界免于大毁灭的人，而事情就这样发生了，那么那个人就是先知，他说了一个关于你的预言。让我们来看一些真实的案例，在这些案例中，我们试图预测许多部门的大部分需求。其中之一就是网络流量，尽管预测流量的需求是一件棘手的事情。让我们看看这些数据，并尝试预测它的一个需求</p><p id="14b5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我从 kaggle 找到了这个数据集，这里是相同的链接:<a class="ae jo" href="https://www.kaggle.com/bobnau/daily-website-visitors" rel="noopener ugc nofollow" target="_blank"> kaggle 数据链接</a></p><p id="bcae" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">数据集</strong></p><ul class=""><li id="e910" class="jp jq hi is b it iu ix iy jb jr jf js jj jt jn ju jv jw jx bi translated">让我们看看现在的数据，它有 2014 年 9 月到 2020 年 7 月的数据。让我们把页面负载作为目标变量，其他的作为独立变量</li></ul><figure class="jz ka kb kc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jy"><img src="../Images/d7c07d89cf79f2adc2386f6ad5d90c61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*yndkQ68X99O1OrU3klnJSQ.jpeg"/></div></div><figcaption class="kd ke et er es kf kg bd b be z dx translated">资料组</figcaption></figure><ul class=""><li id="a5d2" class="jp jq hi is b it iu ix iy jb jr jf js jj jt jn ju jv jw jx bi translated">让我们来分解这一页。Loads”变量，并查看它们的外观以及它们的季节性模式。通过观察趋势和观察成分，我们可以看到时间序列具有年度季节性。</li></ul><figure class="jz ka kb kc fd ij er es paragraph-image"><div class="er es kh"><img src="../Images/51ca86e176b232b9c1c29a6ed7e67704.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*vwZ7o6f1v4VVn-uM7Fnnmg.jpeg"/></div><figcaption class="kd ke et er es kf kg bd b be z dx translated">时间序列</figcaption></figure><p id="31f8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">建模数据</strong></p><p id="7d26" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我将使用常用的自动回归模型之一<strong class="is hj"> <em class="ki">霍尔特温特斯指数平滑</em> </strong>来尝试三种数据建模方法。对于初学者来说，这是一个很好的算法，它指出时间步长<strong class="is hj"> t </strong>的值是作为时间步长<strong class="is hj"> t </strong>之前的观察值的指数线性函数给出的。但是还有一种方法可以改进你的模型，那就是改变你预测的窗口，增加潜在的回归变量。</p><p id="7d2f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们拟合 2015 年到 2019 年的模型，并对 2020 年进行预测。让我们修复默认的参数，并将这些参数从 statsmodels 库中添加到我们的指数平滑 API 中。我在这里尝试了滚动训练和预测，即假设我们的训练周期是到时间步<strong class="is hj"> <em class="ki"> (t) </em> </strong>，我们想预测从<strong class="is hj"> <em class="ki"> (t+1) </em> </strong>到<strong class="is hj"> <em class="ki"> (t+28) </em> </strong>我们能做的是一次性预测到<strong class="is hj"><em class="ki">【t+28】</em></strong>或者通过循环训练提前一周预测到<strong class="is hj"> 【T31 我们也可以对一天和一个月的时间窗口重复相同的过程。因此，让我们实现并检查模型在每个场景中的表现</strong></p><pre class="jz ka kb kc fd kj kk kl km aw kn bi"><span id="4ad3" class="ko kp hi kk b fi kq kr l ks kt">seasonal_periods = 365 # yearly seasonality<br/>seasonal = 'add'<br/>trend = 'add'</span></pre><p id="84fc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我已经定义了滚动预测函数如下，你可以编辑它，如你所愿(即改变变量和参数等)，</p><figure class="jz ka kb kc fd ij"><div class="bz dy l di"><div class="ku kv l"/></div></figure><ul class=""><li id="4d35" class="jp jq hi is b it iu ix iy jb jr jf js jj jt jn ju jv jw jx bi translated">一次性预测整个测试窗口</li></ul><figure class="jz ka kb kc fd ij"><div class="bz dy l di"><div class="ku kv l"/></div></figure><ul class=""><li id="7632" class="jp jq hi is b it iu ix iy jb jr jf js jj jt jn ju jv jw jx bi translated">预测一个月，我将 30 作为预测一个月的滚动窗口</li></ul><pre class="jz ka kb kc fd kj kk kl km aw kn bi"><span id="60a4" class="ko kp hi kk b fi kq kr l ks kt">df_om_es = rolling_forecast_es(df, df_test, 30)</span></pre><ul class=""><li id="bdd4" class="jp jq hi is b it iu ix iy jb jr jf js jj jt jn ju jv jw jx bi translated">预测一周，窗口取 7</li></ul><pre class="jz ka kb kc fd kj kk kl km aw kn bi"><span id="b137" class="ko kp hi kk b fi kq kr l ks kt">df_ow_es = rolling_forecast_es(df, df_test, 7)</span></pre><ul class=""><li id="78dc" class="jp jq hi is b it iu ix iy jb jr jf js jj jt jn ju jv jw jx bi translated">一天的预测，窗口=1</li></ul><pre class="jz ka kb kc fd kj kk kl km aw kn bi"><span id="a101" class="ko kp hi kk b fi kq kr l ks kt">df_od_es = rolling_forecast_es(df, df_test, 1)</span></pre><p id="5a9d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">分析结果</strong></p><p id="6705" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们看一下每种方法得到的图表和度量。</p><ul class=""><li id="5526" class="jp jq hi is b it iu ix iy jb jr jf js jj jt jn ju jv jw jx bi translated">观察这些图，我们可以推断出，一周前的预测似乎比其他预测表现得更好。最糟糕的无疑是对整个窗口进行预测，因为预测值完全错过了实际值的趋势。这对于所有的自回归模型来说都是显而易见的，因为它们对最近的过去比对遥远的过去给予更多的权重。</li></ul><figure class="jz ka kb kc fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kw"><img src="../Images/ca97f0c0791e676e0b2dec40c5485da7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pCj_QYSlYggDzgBgQbzyCQ.png"/></div></div></figure><ul class=""><li id="956f" class="jp jq hi is b it iu ix iy jb jr jf js jj jt jn ju jv jw jx bi translated">让我们看看错误度量，我们将能够很好地了解发生了什么</li></ul><figure class="jz ka kb kc fd ij er es paragraph-image"><div class="er es kx"><img src="../Images/1a5bab654638d884c5f3cdb7c1cccd68.png" data-original-src="https://miro.medium.com/v2/resize:fit:742/format:webp/1*Jax338H_YN_oGkI7ivXBNg.jpeg"/></div><figcaption class="kd ke et er es kf kg bd b be z dx translated">误差度量</figcaption></figure><p id="be40" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从图中可以明显看出，<strong class="is hj"> <em class="ki">【中值绝对误差】</em> </strong>在提前一周预测的情况下较低，而在整个窗口中非常高，因为模型在预测的后期丢失了趋势。奇怪的是，前一天的预测可能会表现得更好，但在这种情况下可能是由于时间范围的粒度，我相信如果是每小时的水平，它会表现得更好。</p><p id="e5d1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">感谢您花时间通读它，您也尝试通过调整参数和添加更多的定制，您可以从 Github 链接找到代码:<a class="ae jo" href="https://github.com/Vishnunkumar/traditional-ml/tree/main/time_series/blog" rel="noopener ugc nofollow" target="_blank">使用指数平滑的时间序列</a></p></div></div>    
</body>
</html>