<html>
<head>
<title>Web scraping for beginners using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">面向使用Python的初学者的Web抓取</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/web-scraping-for-beginners-using-python-73f0966d895f?source=collection_archive---------17-----------------------#2020-05-04">https://medium.com/analytics-vidhya/web-scraping-for-beginners-using-python-73f0966d895f?source=collection_archive---------17-----------------------#2020-05-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/a305cf5d0dd020b7b850826baaa2f56d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*efa8-04c2JqNAiTdeoUMtQ.png"/></div></div></figure><p id="252a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这本终极指南将帮助你从头开始创建自己的数据集。它旨在检查网页上的HTML元素，理解网页的结构，数据构建，数据清洗和数据格式化。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h1 id="be68" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated"><strong class="ak">什么是网页抓取？</strong></h1><p id="5d3b" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated"><a class="ae ky" href="https://en.wikipedia.org/wiki/Web_scraping" rel="noopener ugc nofollow" target="_blank">网络抓取</a>、网络采集或网络数据提取是用于从网站提取数据的数据抓取。网络抓取软件可以使用超文本传输协议直接访问万维网，或者通过网络浏览器访问万维网。这是一种复制形式，从网络上收集并复制特定数据，通常复制到中央本地数据库或电子表格中，供以后检索或分析。</p><h1 id="3543" class="jv jw hi bd jx jy kz ka kb kc la ke kf kg lb ki kj kk lc km kn ko ld kq kr ks bi translated"><strong class="ak">你需要的东西</strong></h1><ol class=""><li id="e876" class="le lf hi is b it kt ix ku jb lg jf lh jj li jn lj lk ll lm bi translated">python基础知识(别急，我一步一步指导你)。</li><li id="b7d9" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm bi translated">渴望学习:-)</li><li id="1d5e" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm bi translated">任何具有所需库的python解释器。我将使用谷歌可乐。</li></ol><h1 id="cc3a" class="jv jw hi bd jx jy kz ka kb kc la ke kf kg lb ki kj kk lc km kn ko ld kq kr ks bi translated">要刮的网站</h1><p id="fe85" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">由于这是一个初学者友好的指南，我们将刮一个网页，这是一个假的图书图书馆。这是一个<a class="ae ky" href="http://books.toscrape.com/catalogue/page-1.html" rel="noopener ugc nofollow" target="_blank">网站</a>的意思是要刮。</p><figure class="lt lu lv lw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ls"><img src="../Images/f452f52e558da168f2a1ee6f72fcb469.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*seaYruevaG_qszpIDvgIwQ.png"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx translated"><a class="ae ky" href="http://books.toscrape.com/catalogue/page-1.html" rel="noopener ugc nofollow" target="_blank">http://books.toscrape.com/catalogue/page-1.html</a></figcaption></figure><blockquote class="mb mc md"><p id="43a6" class="iq ir me is b it iu iv iw ix iy iz ja mf jc jd je mg jg jh ji mh jk jl jm jn hb bi translated"><strong class="is hj">警告:</strong>如果你试图从另一个网站抓取数据，请记住使用条款，通常在robots.txt文件中定义。所以做个好网民，负责任地刮刮吧。</p></blockquote></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h1 id="09c1" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated"><strong class="ak">所需工具</strong></h1><ul class=""><li id="356c" class="le lf hi is b it kt ix ku jb lg jf lh jj li jn mi lk ll lm bi translated"><a class="ae ky" href="https://requests.readthedocs.io/en/master/" rel="noopener ugc nofollow" target="_blank">请求</a>:允许你发送HTTP请求。</li><li id="6f3b" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn mi lk ll lm bi translated"><a class="ae ky" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noopener ugc nofollow" target="_blank">beautiful soup</a>:<strong class="is hj"/>用于从HTML和XML文件中提取数据。</li><li id="bd5e" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn mi lk ll lm bi translated"><a class="ae ky" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank">熊猫</a>:用于<code class="du mj mk ml mm b">DataFrame</code>创作，数据清理和分析。</li></ul></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h1 id="275e" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">让我们开始吧！</h1><h2 id="8c62" class="mn jw hi bd jx mo mp mq kb mr ms mt kf jb mu mv kj jf mw mx kn jj my mz kr na bi translated">导入库</h2><p id="762c" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">首先，我们将这些库导入到我们的代码编辑器中。</p><pre class="lt lu lv lw fd nb mm nc nd aw ne bi"><span id="6af5" class="mn jw hi mm b fi nf ng l nh ni">import requests<br/>from requests import get<br/>from bs4 import BeautifulSoup</span></pre><h2 id="c498" class="mn jw hi bd jx mo mp mq kb mr ms mt kf jb mu mv kj jf mw mx kn jj my mz kr na bi translated">提出请求</h2><p id="5a84" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">在这里，我们将定义<code class="du mj mk ml mm b">url</code>变量并获取所需URL的内容。</p><pre class="lt lu lv lw fd nb mm nc nd aw ne bi"><span id="4373" class="mn jw hi mm b fi nf ng l nh ni">url = 'http://books.toscrape.com/catalogue/page-1.html'<br/>results = requests.get(url)</span></pre><p id="d705" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du mj mk ml mm b">results</code>变量存储我们的<code class="du mj mk ml mm b">request.get</code>动作。</p><h2 id="a5fc" class="mn jw hi bd jx mo mp mq kb mr ms mt kf jb mu mv kj jf mw mx kn jj my mz kr na bi translated">使用BeautifulSoup</h2><pre class="lt lu lv lw fd nb mm nc nd aw ne bi"><span id="9352" class="mn jw hi mm b fi nf ng l nh ni">soup = BeautifulSoup(results.text, 'html.parser')<br/>print(soup.prettify())</span></pre><ul class=""><li id="4c50" class="le lf hi is b it iu ix iy jb nj jf nk jj nl jn mi lk ll lm bi translated">通过BeautifulSoup运行<code class="du mj mk ml mm b">results.text </code>文档会给我们一个存储在<code class="du mj mk ml mm b">soup</code>中的<code class="du mj mk ml mm b">BeautifulSoup</code>对象。</li><li id="9258" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn mi lk ll lm bi translated">在打印<code class="du mj mk ml mm b">soup.prettify()</code>时，我们可以在合适的树状结构中查看数据。代码的一些输出如下:</li></ul><pre class="lt lu lv lw fd nb mm nc nd aw ne bi"><span id="98a0" class="mn jw hi mm b fi nf ng l nh ni">&lt;!DOCTYPE html&gt;<br/>&lt;!--[if lt IE 7]&gt;      &lt;html lang="en-us" class="no-js lt-ie9 lt-ie8 lt-ie7"&gt; &lt;![endif]--&gt;<br/>&lt;!--[if IE 7]&gt;         &lt;html lang="en-us" class="no-js lt-ie9 lt-ie8"&gt; &lt;![endif]--&gt;<br/>&lt;!--[if IE 8]&gt;         &lt;html lang="en-us" class="no-js lt-ie9"&gt; &lt;![endif]--&gt;<br/>&lt;!--[if gt IE 8]&gt;&lt;!--&gt;<br/>&lt;html class="no-js" lang="en-us"&gt;<br/> &lt;!--&lt;![endif]--&gt;<br/> &lt;head&gt;<br/>  &lt;title&gt;<br/>   All products | Books to Scrape - Sandbox<br/>  &lt;/title&gt;<br/>  &lt;meta content="text/html; charset=utf-8" http-equiv="content-type"/&gt;<br/>  &lt;meta content="24th Jun 2016 09:30" name="created"/&gt;<br/>  &lt;meta content="" name="description"/&gt;<br/>  &lt;meta content="width=device-width" name="viewport"/&gt;<br/>  &lt;meta content="NOARCHIVE,NOCACHE" name="robots"/&gt;<br/>  &lt;!-- Le HTML5 shim, for IE6-8 support of HTML elements --&gt;<br/>  &lt;!--[if lt IE 9]&gt;<br/>        &lt;script src="//html5shim.googlecode.com/svn/trunk/html5.js"&gt;&lt;/script&gt;<br/>        &lt;![endif]--&gt;<br/>  &lt;link href="../static/oscar/favicon.ico" rel="shortcut icon"/&gt;<br/>  &lt;link href="../static/oscar/css/styles.css" rel="stylesheet" type="text/css"/&gt;<br/>  &lt;link href="../static/oscar/js/bootstrap-datetimepicker/bootstrap-datetimepicker.css" rel="stylesheet"/&gt;<br/>  &lt;link href="../static/oscar/css/datetimepicker.css" rel="stylesheet" type="text/css"/&gt;<br/> &lt;/head&gt;</span><span id="916a" class="mn jw hi mm b fi nm ng l nh ni">etc...</span></pre><h2 id="3456" class="mn jw hi bd jx mo mp mq kb mr ms mt kf jb mu mv kj jf mw mx kn jj my mz kr na bi translated">数据结构</h2><p id="f1d0" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">我们想要抓取书名、产品价格及其评级，因此定义这些列表来存储数据。</p><pre class="lt lu lv lw fd nb mm nc nd aw ne bi"><span id="24a7" class="mn jw hi mm b fi nf ng l nh ni">book_title = []<br/>product_price = []<br/>star_rating = []</span></pre><h2 id="f68a" class="mn jw hi bd jx mo mp mq kb mr ms mt kf jb mu mv kj jf mw mx kn jj my mz kr na bi translated">检查元件</h2><p id="d47d" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">现在我们需要找到我们想要的数据在哪里。右键单击并检查元素。您的屏幕应该是这样的:</p><figure class="lt lu lv lw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nn"><img src="../Images/271bdc0499dfbad4e3da6c413157c8c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Bi0XLTprR6Sa1gPHFV2Aw.png"/></div></div></figure><p id="3497" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">显而易见，我们想要的数据位于<code class="du mj mk ml mm b">li</code>容器中。</p><p id="f4d7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du mj mk ml mm b">li</code>容器有一个<code class="du mj mk ml mm b">class</code>属性，该属性有四个值<code class="du mj mk ml mm b">col-xs-6</code>、<code class="du mj mk ml mm b">col-sm-4</code>、<code class="du mj mk ml mm b">col-md-3</code>和<code class="du mj mk ml mm b">col-lg-3</code>。</p><p id="21d7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">查找所有</strong> <code class="du mj mk ml mm b">li</code> <strong class="is hj">容器</strong></p><pre class="lt lu lv lw fd nb mm nc nd aw ne bi"><span id="d551" class="mn jw hi mm b fi nf ng l nh ni">book_div = soup.find_all('li', class_='col-xs-6 col-sm-4 col-md-3 col-lg-3')<br/>print(book_div)</span></pre><p id="61ea" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du mj mk ml mm b">find_all()</code>帮助我们找到所有带有<code class="du mj mk ml mm b">li</code>标签且<code class="du mj mk ml mm b">class</code>属性具有值<code class="du mj mk ml mm b">col-xs-6</code>、<code class="du mj mk ml mm b">col-sm-4</code>、<code class="du mj mk ml mm b">col-md-3</code>和<code class="du mj mk ml mm b">col-lg-3</code>的容器，并将它们存储在<code class="du mj mk ml mm b">book_div</code>变量中。<code class="du mj mk ml mm b">book_div</code>是所有容器的列表，看起来像这样:</p><pre class="lt lu lv lw fd nb mm nc nd aw ne bi"><span id="68bd" class="mn jw hi mm b fi nf ng l nh ni">&lt;li class="col-xs-6 col-sm-4 col-md-3 col-lg-3"&gt;<br/>&lt;article class="product_pod"&gt;<br/>&lt;div class="image_container"&gt;<br/>&lt;a href="a-light-in-the-attic_1000/index.html"&gt;&lt;img alt="A Light in the Attic" class="thumbnail" src="../media/cache/2c/da/2cdad67c44b002e7ead0cc35693c0e8b.jpg"/&gt;&lt;/a&gt;<br/>&lt;/div&gt;<br/>&lt;p class="star-rating Three"&gt;<br/>&lt;i class="icon-star"&gt;&lt;/i&gt;<br/>&lt;i class="icon-star"&gt;&lt;/i&gt;<br/>&lt;i class="icon-star"&gt;&lt;/i&gt;<br/>&lt;i class="icon-star"&gt;&lt;/i&gt;<br/>&lt;i class="icon-star"&gt;&lt;/i&gt;<br/>&lt;/p&gt;<br/>&lt;h3&gt;&lt;a href="a-light-in-the-attic_1000/index.html" title="A Light in the Attic"&gt;A Light in the ...&lt;/a&gt;&lt;/h3&gt;<br/>&lt;div class="product_price"&gt;<br/>&lt;p class="price_color"&gt;Â£51.77&lt;/p&gt;<br/>&lt;p class="instock availability"&gt;<br/>&lt;i class="icon-ok"&gt;&lt;/i&gt;<br/>    <br/>        In stock<br/>    <br/>&lt;/p&gt;<br/>&lt;form&gt;<br/>&lt;button class="btn btn-primary btn-block" data-loading-text="Adding..." type="submit"&gt;Add to basket&lt;/button&gt;<br/>&lt;/form&gt;<br/>&lt;/div&gt;<br/>&lt;/article&gt;<br/>&lt;/li&gt;</span></pre><h2 id="9573" class="mn jw hi bd jx mo mp mq kb mr ms mt kf jb mu mv kj jf mw mx kn jj my mz kr na bi translated">创建一个循环</h2><p id="e8ac" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">因为我们需要遍历所有需要的<code class="du mj mk ml mm b">li</code>容器来抓取数据，所以我们使用了一个<code class="du mj mk ml mm b">for</code>循环。</p><pre class="lt lu lv lw fd nb mm nc nd aw ne bi"><span id="b818" class="mn jw hi mm b fi nf ng l nh ni">for container in book_div:</span></pre><h2 id="3fd6" class="mn jw hi bd jx mo mp mq kb mr ms mt kf jb mu mv kj jf mw mx kn jj my mz kr na bi translated">获取书名</h2><figure class="lt lu lv lw fd ij er es paragraph-image"><div class="er es no"><img src="../Images/244b632f193277606afd45ddae6a341b.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/1*dwo0XeUypohZ8JmZ4VeoBw.png"/></div></figure><p id="9f11" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">书籍<code class="du mj mk ml mm b">title</code>嵌入<code class="du mj mk ml mm b">a</code>，依次嵌入<code class="du mj mk ml mm b">h3</code>、<code class="du mj mk ml mm b">article</code>中的<code class="du mj mk ml mm b">h3</code>、<code class="du mj mk ml mm b">li</code>中的<code class="du mj mk ml mm b">article</code>。</p><pre class="lt lu lv lw fd nb mm nc nd aw ne bi"><span id="784f" class="mn jw hi mm b fi nf ng l nh ni">name = container.article.h3.a['title']<br/>book_title.append(name)</span></pre><ul class=""><li id="4ba3" class="le lf hi is b it iu ix iy jb nj jf nk jj nl jn mi lk ll lm bi translated"><code class="du mj mk ml mm b">name</code>变量现在包含了书名。</li><li id="2a67" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn mi lk ll lm bi translated">是我们的迭代器</li><li id="d341" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn mi lk ll lm bi translated"><code class="du mj mk ml mm b">.article</code>、<code class="du mj mk ml mm b">.h3</code>和<code class="du mj mk ml mm b">.a</code>是属性符号，告诉scraper访问这些标签中的每一个。</li><li id="936a" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn mi lk ll lm bi translated"><code class="du mj mk ml mm b">[‘title’]</code>告诉scraper获取存储在<code class="du mj mk ml mm b">a</code>标签的<code class="du mj mk ml mm b">text</code>属性中的字符串。</li><li id="68ce" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn mi lk ll lm bi translated"><code class="du mj mk ml mm b">name</code>被添加到<code class="du mj mk ml mm b">book_title</code>列表中。</li></ul><h2 id="b1b1" class="mn jw hi bd jx mo mp mq kb mr ms mt kf jb mu mv kj jf mw mx kn jj my mz kr na bi translated">获取产品价格</h2><figure class="lt lu lv lw fd ij er es paragraph-image"><div class="er es no"><img src="../Images/7aa0b21f1fd49ff84ce029cc7a7ae5a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/1*CvOrAMIM7q1ojjA_VyQ2Ug.png"/></div></figure><p id="ca90" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">类似于我们如何找到书名，产品价格被嵌入在<code class="du mj mk ml mm b">p</code>中，依次被嵌入在<code class="du mj mk ml mm b">div</code>、<code class="du mj mk ml mm b">article</code>中的<code class="du mj mk ml mm b">div</code>和<code class="du mj mk ml mm b">li</code>中的<code class="du mj mk ml mm b">article</code>。但是，<code class="du mj mk ml mm b">article</code>标签包含两个<code class="du mj mk ml mm b">div</code>标签，所以我们需要找到<code class="du mj mk ml mm b">div</code>标签，其<code class="du mj mk ml mm b">class</code>属性等于<code class="du mj mk ml mm b">product_price</code>。</p><pre class="lt lu lv lw fd nb mm nc nd aw ne bi"><span id="eee8" class="mn jw hi mm b fi nf ng l nh ni">price = container.article.find('div',class_='product_price').p.text<br/>product_price.append(price)</span></pre><ul class=""><li id="9559" class="le lf hi is b it iu ix iy jb nj jf nk jj nl jn mi lk ll lm bi translated"><code class="du mj mk ml mm b">price</code>变量包含产品价格。</li><li id="f654" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn mi lk ll lm bi translated">我们在<code class="du mj mk ml mm b">.article</code>属性上应用<code class="du mj mk ml mm b">find()</code>来获得具有特定属性的特定标签。</li><li id="4b94" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn mi lk ll lm bi translated"><code class="du mj mk ml mm b">.p</code>是否提取了所需<code class="du mj mk ml mm b">div</code>标签上应用的属性符号。</li><li id="0a43" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn mi lk ll lm bi translated"><code class="du mj mk ml mm b">.text</code>告诉刮刀抓取文字。</li><li id="864a" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn mi lk ll lm bi translated"><code class="du mj mk ml mm b">price</code>被追加到<code class="du mj mk ml mm b">product_price</code>列表中。</li></ul><h2 id="4ea5" class="mn jw hi bd jx mo mp mq kb mr ms mt kf jb mu mv kj jf mw mx kn jj my mz kr na bi translated">获得星级</h2><figure class="lt lu lv lw fd ij er es paragraph-image"><div class="er es np"><img src="../Images/50d2593f7e7131060e7ec251b52df385.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*4xs5RCM-Pc6adjtWV_BgMA.png"/></div></figure><p id="67a9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">星级位于<code class="du mj mk ml mm b">article</code>标签中的第一个<code class="du mj mk ml mm b">p</code>标签，所以我们可以很容易地去掉<code class="du mj mk ml mm b">class</code>属性中的最后一个字符串。</p><pre class="lt lu lv lw fd nb mm nc nd aw ne bi"><span id="d771" class="mn jw hi mm b fi nf ng l nh ni">rating = container.article.p['class'][-1]<br/>star_rating.append(rating)</span></pre><ul class=""><li id="bea2" class="le lf hi is b it iu ix iy jb nj jf nk jj nl jn mi lk ll lm bi translated">评级变量包含星级。</li><li id="373c" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn mi lk ll lm bi translated"><code class="du mj mk ml mm b">.article</code>和<code class="du mj mk ml mm b">.p</code>是属性符号，告诉scraper访问这些标签中的每一个。</li><li id="8e2f" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn mi lk ll lm bi translated"><code class="du mj mk ml mm b">[‘class’][-1]</code> : [-1]表示最后一个元素。例如上图中的“三”。</li><li id="793d" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn mi lk ll lm bi translated"><code class="du mj mk ml mm b">rating</code>被添加到<code class="du mj mk ml mm b">star_rating</code>列表中。</li></ul><p id="38f1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">至此，我们已经完成了数据创建。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h1 id="6fdb" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">创建数据框架</h1><p id="dfa7" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">首先，导入pandas库来创建一个数据框架并清理数据。</p><pre class="lt lu lv lw fd nb mm nc nd aw ne bi"><span id="1b3a" class="mn jw hi mm b fi nf ng l nh ni">import pandas as pd</span></pre><p id="e939" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将把所有的列表合并成一个字典，用于创建数据帧。</p><pre class="lt lu lv lw fd nb mm nc nd aw ne bi"><span id="9758" class="mn jw hi mm b fi nf ng l nh ni">col_dict = {'title':book_title, 'price':product_price, 'rating':star_rating}</span></pre><p id="60f7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将此col_dict作为参数传递给DataFrame函数，如下所示:</p><pre class="lt lu lv lw fd nb mm nc nd aw ne bi"><span id="775f" class="mn jw hi mm b fi nf ng l nh ni">book_store = pd.DataFrame(col_dict)</span></pre><p id="8d3d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">检查前五行和所有列的数据类型</p><pre class="lt lu lv lw fd nb mm nc nd aw ne bi"><span id="1d8b" class="mn jw hi mm b fi nf ng l nh ni">print(book_store.head())<br/>print(book_store.dtypes)</span></pre><figure class="lt lu lv lw fd ij er es paragraph-image"><div class="er es nq"><img src="../Images/642c381fd3a7359ce313471752062621.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/format:webp/1*iagxR3Ly5T70DRMj_H_NTg.png"/></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">book_store.head()</figcaption></figure><figure class="lt lu lv lw fd ij er es paragraph-image"><div class="er es nr"><img src="../Images/436c216769b61a06462b56b8b9e63e6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:298/format:webp/1*HpcybjtuqMjt4vOBEMzNaw.png"/></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">book_store.dtypes</figcaption></figure></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h1 id="e5fb" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">数据清洗！</h1><p id="d2e7" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">我们所有的列都是对象类型，和字符串类型一样。这是<code class="du mj mk ml mm b">title</code>列所需的类型，但不是<code class="du mj mk ml mm b">price</code>和<code class="du mj mk ml mm b">rating</code>列所需的类型。它们应该分别是浮点和整数数据类型。</p><h2 id="56d1" class="mn jw hi bd jx mo mp mq kb mr ms mt kf jb mu mv kj jf mw mx kn jj my mz kr na bi translated">清洗价格</h2><p id="d88f" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">为此，我们需要忽略<code class="du mj mk ml mm b">price</code>列下每个字符串的前两个字符。然后，将剩余的包含数字的字符串类型转换为浮点数。</p><pre class="lt lu lv lw fd nb mm nc nd aw ne bi"><span id="5fe6" class="mn jw hi mm b fi nf ng l nh ni">book_store['price'] = book_store['price'].apply(lambda x: float(x[2:]))</span></pre><ul class=""><li id="cf25" class="le lf hi is b it iu ix iy jb nj jf nk jj nl jn mi lk ll lm bi translated"><code class="du mj mk ml mm b">book_store[‘price’]</code>是我们<code class="du mj mk ml mm b">DataFrame</code>中的价格数据。我们正在把新清理的数据分配给我们的<code class="du mj mk ml mm b">DataFrame</code>。</li><li id="bb73" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn mi lk ll lm bi translated"><code class="du mj mk ml mm b">apply()</code>用于对<code class="du mj mk ml mm b">price</code>列下的所有元素进行操作。</li><li id="b85c" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn mi lk ll lm bi translated"><code class="du mj mk ml mm b">lambda x</code>是一个单行函数，它以单行作为参数，并将参数类型转换为<code class="du mj mk ml mm b">float</code>。</li></ul><h2 id="0935" class="mn jw hi bd jx mo mp mq kb mr ms mt kf jb mu mv kj jf mw mx kn jj my mz kr na bi translated">清洁等级</h2><p id="c73d" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">这是一个可选步骤。但是我感觉<code class="du mj mk ml mm b">rating</code>列应该是整数格式的。将字符串形式的数字映射到整数的最简单方法是为其创建一个映射字典。我们可以把字典定义为:</p><pre class="lt lu lv lw fd nb mm nc nd aw ne bi"><span id="d99d" class="mn jw hi mm b fi nf ng l nh ni">number_mapping = {'One':1,'Two':2,'Three':3,'Four':4,'Five':5}</span></pre><p id="75e1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将以整数格式将评级下的每个元素映射到其对应元素。</p><pre class="lt lu lv lw fd nb mm nc nd aw ne bi"><span id="6435" class="mn jw hi mm b fi nf ng l nh ni">book_store['rating'] = book_store.rating.apply(lambda x : number_mapping.get(x))</span></pre><ul class=""><li id="b5f9" class="le lf hi is b it iu ix iy jb nj jf nk jj nl jn mi lk ll lm bi translated"><code class="du mj mk ml mm b">book_store[‘rating’]</code>是我们在<code class="du mj mk ml mm b">DataFrame</code>的评分数据。我们正在将我们新清理的数据分配给我们的<code class="du mj mk ml mm b">DataFrame</code>。</li><li id="26d5" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn mi lk ll lm bi translated"><code class="du mj mk ml mm b">apply()</code>用于对<code class="du mj mk ml mm b">rating</code>列下的所有元素进行操作。</li><li id="3b2b" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn mi lk ll lm bi translated"><code class="du mj mk ml mm b">lambda x</code>是一个单行函数，以单行作为参数，返回对应的整数值。</li></ul><p id="57fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将再次检查前五行和所有列的数据类型。</p><pre class="lt lu lv lw fd nb mm nc nd aw ne bi"><span id="4a72" class="mn jw hi mm b fi nf ng l nh ni">print(book_store.head())<br/>print(book_store.dtypes)</span></pre><figure class="lt lu lv lw fd ij er es paragraph-image"><div class="er es ns"><img src="../Images/6169bef8c1e1e43b5fcf4bea7895576c.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/format:webp/1*DCKacZdZVYe8940mBH9BMQ.png"/></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">book_store.head()</figcaption></figure><figure class="lt lu lv lw fd ij er es paragraph-image"><div class="er es nt"><img src="../Images/967e920e958c0de0b61622fbccc25cf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:302/format:webp/1*s-1UAXdv3YlsbSimT9CDTA.png"/></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">book_store.dtypes</figcaption></figure><p id="de7f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个现在看起来挺好的:-)的</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h1 id="ad15" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">保存到csv</h1><p id="10bd" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">我们可以将数据帧保存为csv文件以备将来使用。</p><pre class="lt lu lv lw fd nb mm nc nd aw ne bi"><span id="9939" class="mn jw hi mm b fi nf ng l nh ni">book_store.to_csv('book_store.csv')</span></pre><p id="2b10" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此处提供了整个代码的链接<a class="ae ky" href="https://github.com/kunalrustagi08/Python-Projects/blob/master/random/web_scrapping_for_beginners.py" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h1 id="1596" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">结论</h1><p id="3029" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">干得好。我们成功地抓取了一个网页，并在pandas中创建了一个数据框架。我们修订了:</p><ul class=""><li id="e4f0" class="le lf hi is b it iu ix iy jb nj jf nk jj nl jn mi lk ll lm bi translated">HTML元素的检查。</li><li id="b940" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn mi lk ll lm bi translated">网页抓取。</li><li id="e075" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn mi lk ll lm bi translated">列表、字典和lambda函数。</li><li id="4f0d" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn mi lk ll lm bi translated">数据创建和清理。</li><li id="fc6b" class="le lf hi is b it ln ix lo jb lp jf lq jj lr jn mi lk ll lm bi translated"><code class="du mj mk ml mm b">csv</code>文件创建。</li></ul></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h1 id="c52f" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">下次</h1><p id="ca04" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">在第二部分中，我们将收集列表中的所有书籍，这将涉及到对我们这里的最终代码的一些修改。</p><blockquote class="mb mc md"><p id="9b5d" class="iq ir me is b it iu iv iw ix iy iz ja mf jc jd je mg jg jh ji mh jk jl jm jn hb bi translated">编辑:我的下一篇关于构建网络爬虫的文章的链接可以在这里找到。</p></blockquote><p id="eaeb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">敬请关注，继续编码！</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h1 id="18c6" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">关于我</h1><p id="8f32" class="pw-post-body-paragraph iq ir hi is b it kt iv iw ix ku iz ja jb kv jd je jf kw jh ji jj kx jl jm jn hb bi translated">你好。库纳尔·鲁斯塔吉，我是:P</p><p id="becf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你想问我任何问题，报告任何错误，建议改进或给予反馈，请随时联系我。</p><p id="4265" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae ky" href="https://www.linkedin.com/in/kunal-rustagi" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>:【https://www.linkedin.com/in/kunal-rustagi T2】</p><p id="c8c7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">【https://www.twitter.com/kunalr01】推特 : <a class="ae ky" href="https://twitter.com/kunalr01" rel="noopener ugc nofollow" target="_blank">推特</a></p><p id="bc5e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae ky" href="https://github.com/kunalrustagi08" rel="noopener ugc nofollow" target="_blank">Github</a>:<a class="ae ky" href="https://github.com/kunalrustagi08" rel="noopener ugc nofollow" target="_blank">https://www.github.com/kunalrustagi08</a></p></div></div>    
</body>
</html>