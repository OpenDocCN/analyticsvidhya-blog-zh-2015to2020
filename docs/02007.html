<html>
<head>
<title>Building a Dashboard App using Plotly’s Dash: A Complete Guide from Beginner to Pro</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Plotly的Dash构建仪表板应用程序:从初学者到专业人员的完整指南</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/building-a-dashboard-app-using-plotlys-dash-a-complete-guide-from-beginner-to-pro-e7657a4eb707?source=collection_archive---------0-----------------------#2019-11-26">https://medium.com/analytics-vidhya/building-a-dashboard-app-using-plotlys-dash-a-complete-guide-from-beginner-to-pro-e7657a4eb707?source=collection_archive---------0-----------------------#2019-11-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/e3af4341dfcc4dd6474fc2649be9b8f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ledt51iFkfFkEORy1-9Ubw.jpeg"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated"><a class="ae hv" href="https://en.wikipedia.org/wiki/Mount_Fuji" rel="noopener ugc nofollow" target="_blank"> <strong class="bd hw">观富士山</strong> </a> <strong class="bd hw"> </strong> (3776米)来自<a class="ae hv" href="https://en.wikipedia.org/wiki/Mount_Kumotori" rel="noopener ugc nofollow" target="_blank"> <strong class="bd hw">库莫多里</strong> </a> <strong class="bd hw"> </strong> (2017米)。</figcaption></figure><div class=""/><div class=""><h2 id="5cd1" class="pw-subtitle-paragraph iw hy hz bd b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dx translated">使用Dash构建交互式仪表盘应用并将其部署到Heroku的完整指南，第2部分:回调、认证和Heroku部署</h2></div><p id="a3e1" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在第1部分中，我们学习了如何从dash开始，添加Dash组件，改进图形布局，以及定义回调。在第2部分中，我们将学习<strong class="jq ia">如何添加多个标签，在回调之间共享数据，编写多输出回调，进行用户认证，以及将应用程序部署到Heroku。</strong></p><p id="7080" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我将从我们在第1部分离开的地方开始。如果您错过了第1部分，请阅读它。</p><div class="hh hi ez fb hj kk"><a rel="noopener follow" target="_blank" href="/analytics-vidhya/building-a-dashboard-app-using-plotlys-dash-complete-guide-beginner-to-pro-part-1-61e890bdc423"><div class="kl ab dw"><div class="km ab kn cl cj ko"><h2 class="bd ia fi z dy kp ea eb kq ed ef hy bi translated">使用Plotly的Dash构建仪表板应用程序-初学者到专业版完全指南第1部分</h2><div class="kr l"><h3 class="bd b fi z dy kp ea eb kq ed ef dx translated">使用Dash构建交互式仪表板应用程序并将其部署到Heroku仪表板的完整指南可以生成数据…</h3></div><div class="ks l"><p class="bd b fp z dy kp ea eb kq ed ef dx translated">medium.com</p></div></div><div class="kt l"><div class="ku l kv kw kx kt ky hp kk"/></div></div></a></div><h1 id="4331" class="kz la hz bd hw lb lc ld le lf lg lh li jf lj jg lk ji ll jj lm jl ln jm lo lp bi translated">仪表板应用程序</h1><h2 id="1f01" class="lq la hz bd hw lr ls lt le lu lv lw li jx lx ly lk kb lz ma lm kf mb mc lo md bi translated">7.<strong class="ak">标签页和回调之间的数据共享</strong></h2><p id="64b4" class="pw-post-body-paragraph jo jp hz jq b jr me ja jt ju mf jd jw jx mg jz ka kb mh kd ke kf mi kh ki kj hb bi translated">假设我们想为给定的加密货币制作不同价格技术指标的图表。为此，我们将添加选项卡到我们的应用程序布局，并修改图形的<code class="du mj mk ml mm b">app.callback</code>，以便它返回所选选项卡的图表。</p><p id="21fd" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">到目前为止，我们已经分别为表格和图形提取了数据。但是，为了节省时间和计算量，我们应该只为所有回调提取一次价格数据。所以我们需要在回调之间共享数据。为了使数据共享变得容易，我们将编写另一个<code class="du mj mk ml mm b">app.callback</code>，它将从下拉列表中获取输入，并给出一个json数据文件作为输出。此回调的输出将与其他回调共享。</p><p id="8092" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">7.1 <strong class="jq ia">调整片</strong></p><p id="092d" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我将在<code class="du mj mk ml mm b">app.layout</code>的图表上方添加标签。</p><pre class="mn mo mp mq fd mr mm ms mt aw mu bi"><span id="a5e5" class="lq la hz mm b fi mv mw l mx my">tabs_styles = {<br/>    'height': '51px'<br/>}<br/>tab_style = {<br/>    'borderBottom': '1px solid #d6d6d6',<br/>    'padding': '2px',<br/>    'fontWeight': 'bold'<br/>}<br/><br/>tab_selected_style = {<br/>    'borderTop': '1px solid #d6d6d6',<br/>    'borderBottom': '1px solid #d6d6d6',<br/>    'backgroundColor': 'black',<br/>    'color': 'yellow',<br/>    'padding': '10px'<br/>}<br/>dcc.Tabs(id="all-tabs-inline", value='tab-1', children=[<br/>            dcc.Tab(label='Simple Moving Average', value='tab-1', style=tab_style, selected_style=tab_selected_style),<br/>            dcc.Tab(label='Volatility Index', value='tab-2', style=tab_style, selected_style=tab_selected_style),<br/>            dcc.Tab(label='Relative Strength Index', value='tab-3', style=tab_style, selected_style=tab_selected_style),<br/>            dcc.Tab(label='Moving Average Divergence Convergence', value='tab-4', style=tab_style, selected_style=tab_selected_style),<br/>            dcc.Tab(label='Exponential Moving Average', value='tab-5', style=tab_style, selected_style=tab_selected_style),<br/>            dcc.Tab(label='Bollinger Bands', value='tab-6', style=tab_style,<br/>                    selected_style=tab_selected_style),<br/>        ], style=tabs_styles,<br/>            colors={<br/>            "border": "yellow",<br/>            "primary": "red",<br/>            "background": "orange"<br/>            }),</span></pre><p id="ab85" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我为6个指示器添加了6个抽头。在上面的代码中，<code class="du mj mk ml mm b">tab_style</code>、<code class="du mj mk ml mm b">tab_selected_style</code>和<code class="du mj mk ml mm b">tabs_styles</code>是常规标签外观、选择后标签外观和标签行外观的预定义样式。</p><figure class="mn mo mp mq fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mz"><img src="../Images/ec631ff3dff820b99f9c69dcce3fa44c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W89qKwD2dWxka6B-yXnwFg.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">制表符</figcaption></figure><p id="b20d" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq ia"> 7.2数据</strong></p><p id="67c2" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们需要数据来创建图表和数据表。我们将使用<code class="du mj mk ml mm b"><a class="ae hv" href="https://github.com/dc-aichara/PriceIndices" rel="noopener ugc nofollow" target="_blank"><strong class="jq ia">PriceIndices</strong></a></code> python包获取价格数据，计算技术指标。让我们编写一个脚本(<code class="du mj mk ml mm b">data.py</code>)来获取<code class="du mj mk ml mm b">dashboard_demo</code>目录中的数据。</p><figure class="mn mo mp mq fd hk"><div class="bz dy l di"><div class="na nb l"/></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">data.py</figcaption></figure><p id="c312" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">会给我们一个熊猫数据框架，其中有图表所需的所有数据。</p><p id="48d1" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq ia"> 7.3回调和数据共享</strong></p><p id="0004" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们添加一个新的回调来获取数据。</p><ul class=""><li id="ab5d" class="nc nd hz jq b jr js ju jv jx ne kb nf kf ng kj nh ni nj nk bi translated">数据回调</li></ul><pre class="mn mo mp mq fd mr mm ms mt aw mu bi"><span id="731e" class="lq la hz mm b fi mv mw l mx my"># import get_coin_data function from data.py<br/>from data import get_coin_data </span><span id="b9d4" class="lq la hz mm b fi nl mw l mx my">@app.callback(Output('intermediate-value', 'children'),<br/>              [Input('dropdown', 'value')])<br/>def get_data(option): # option from drop down <br/>    df = get_coin_data(crypto=option, save_data=True)<br/>    return df.to_json(date_format='iso', orient='split')</span></pre><p id="6334" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在修改数据表回调和图形回调。</p><ul class=""><li id="17ad" class="nc nd hz jq b jr js ju jv jx ne kb nf kf ng kj nh ni nj nk bi translated">数据表回调</li></ul><pre class="mn mo mp mq fd mr mm ms mt aw mu bi"><span id="fc3f" class="lq la hz mm b fi mv mw l mx my">@app.callback(Output('table-output', 'children'), <br/>              [Input('intermediate-value', 'children')])<br/>def get_data_table(data):<br/>    df = pd.read_json(data, orient='split')<br/>    df['date'] = pd.to_datetime(df['date'])<br/>    data_table = dash_table.DataTable(<br/>        id='datatable-data',<br/>        data=df.to_dict('records'),<br/>        columns=[{'id': c, 'name': c} for c in df.columns],<br/>        style_table={'overflowY': 'scroll'},<br/>        fixed_rows={'headers': True, 'data': 10},<br/>        style_cell={'width': '100px'},<br/>        style_header={<br/>            'backgroundColor': 'rgb(230, 230, 230)',<br/>            'fontWeight': 'bold'<br/>        }<br/>    )<br/>    return data_table</span></pre><ul class=""><li id="d259" class="nc nd hz jq b jr js ju jv jx ne kb nf kf ng kj nh ni nj nk bi translated">图形回调</li></ul><figure class="mn mo mp mq fd hk"><div class="bz dy l di"><div class="na nb l"/></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">图形回调</figcaption></figure><p id="57ad" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq ia">数据表和图形回调共享来自数据回调的数据。数据回调的输出被用作数据表和图形回调的输入。</strong>图形回调函数根据选项卡选择制作图形。有些图形有两个y轴，以获得更好的图形外观。<code class="du mj mk ml mm b">yaxis2</code>定义第二个y轴的样式。我在下面的流程图中解释了应用程序的工作流程。</p><figure class="mn mo mp mq fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nm"><img src="../Images/bc52c6ce48ab6119479e6462516950f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jh1hgm5zd0sqHyOUiJ7Zig.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">流程图-2</figcaption></figure><p id="d631" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">刷新应用页面以查看我们所做的更改。也尝试不同的硬币，日期范围和标签，看看他们如何改变结果。</p><h2 id="4fc5" class="lq la hz bd hw lr ls lt le lu lv lw li jx lx ly lk kb lz ma lm kf mb mc lo md bi translated">8.多输出回调</h2><p id="eadb" class="pw-post-body-paragraph jo jp hz jq b jr me ja jt ju mf jd jw jx mg jz ka kb mh kd ke kf mi kh ki kj hb bi translated">到目前为止我们有3次试镜。制作一个数据表和图形回调的单个<code class="du mj mk ml mm b">app.callback</code>来给出多个输出怎么样？听起来很酷？让我们开始吧。</p><p id="cc02" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们将结合图形和数据表回调，这将给出两个输出:图形和数据表。我们也可以结合其他两个数据回调，但如果我们这样做，数据将是每个标签或日期范围或硬币选择的请求。我们应该只为硬币选择和硬币输入更改请求一次数据。</p><figure class="mn mo mp mq fd hk"><div class="bz dy l di"><div class="na nb l"/></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">多输出回调</figcaption></figure><blockquote class="nn"><p id="0105" class="no np hz bd nq nr ns nt nu nv nw kj dx translated">注意:如果我们在<code class="du mj mk ml mm b">app.callback"</code>中把输出放在一个列表中，回调函数必须返回一个输出列表。</p></blockquote><p id="bc2e" class="pw-post-body-paragraph jo jp hz jq b jr nx ja jt ju ny jd jw jx nz jz ka kb oa kd ke kf ob kh ki kj hb bi translated">流程图3解释了组合两个回调后的输入和输出流程。</p><figure class="mn mo mp mq fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nm"><img src="../Images/34a7618852f1df7eaa87c50383949b73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4q1pIxT39dVkReoSabpV5w.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">流程图-3</figcaption></figure><h2 id="aecb" class="lq la hz bd hw lr ls lt le lu lv lw li jx lx ly lk kb lz ma lm kf mb mc lo md bi translated"><strong class="ak"> 9。用户认证</strong></h2><p id="f451" class="pw-post-body-paragraph jo jp hz jq b jr me ja jt ju mf jd jw jx mg jz ka kb mh kd ke kf mi kh ki kj hb bi translated">Dash通过一个单独的python包<code class="du mj mk ml mm b">dash-auth</code>提供用户认证。<code class="du mj mk ml mm b">dash-auth</code>提供两种认证方式:<strong class="jq ia"> HTTP基本认证</strong>和<strong class="jq ia"> Plotly OAuth </strong>。</p><p id="cd42" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq ia"> 9.1 HTTP基本认证</strong></p><p id="0b08" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">HTTP基本身份验证是web上最简单的身份验证形式之一，但它有一些限制。</p><ul class=""><li id="7173" class="nc nd hz jq b jr js ju jv jx ne kb nf kf ng kj nh ni nj nk bi translated">用户不能注销应用程序</li><li id="18bb" class="nc nd hz jq b jr oc ju od jx oe kb of kf og kj nh ni nj nk bi translated">您有责任通过安全通道将用户名和密码发送给您的观众</li><li id="867a" class="nc nd hz jq b jr oc ju od jx oe kb of kf og kj nh ni nj nk bi translated">您的观众不能创建自己的帐户，也不能更改他们的密码</li><li id="ed90" class="nc nd hz jq b jr oc ju od jx oe kb of kf og kj nh ni nj nk bi translated">您负责在代码中安全地存储用户名和密码对。</li></ul><p id="940f" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们需要在HTTP基本身份验证的源代码中添加用户和密码。我会在“app.py”中添加HTTP基本Auth代码。建议将用户和密码详细信息保存在单独的文件中。</p><pre class="mn mo mp mq fd mr mm ms mt aw mu bi"><span id="0e14" class="lq la hz mm b fi mv mw l mx my">import dash<br/>import dash_auth<br/>external_stylesheets = ['https://codepen.io/chriddyp/pen/bWLwgP.css']<br/>app = dash.Dash(__name__, external_stylesheets=external_stylesheets)<br/>server = app.server<br/>app.config.suppress_callback_exceptions = True<br/><br/>VALID_USERNAME_PASSWORD_PAIRS = {<br/>    'dash_demo': 'dash@demo'<br/>}<br/><br/>auth = dash_auth.BasicAuth(<br/>    app,<br/>    VALID_USERNAME_PASSWORD_PAIRS<br/>)</span></pre><p id="1e84" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">当我们重新运行或刷新应用程序页面时，会出现一个身份验证弹出窗口。我们只需认证应用一次。</p><figure class="mn mo mp mq fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es oh"><img src="../Images/e5fbcc5ef351fa594673652d78c36246.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YKhRVewcB3k9ReyOl69i-w.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">身份验证弹出窗口</figcaption></figure><p id="0c60" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq ia"> 9.2 Plotly OAuth </strong></p><p id="e31b" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Plotly Auth需要付费Plotly订阅帐户。Plotly 0Auth通过注册的在线Plotly帐户或通过公司的<a class="ae hv" href="https://plot.ly/products/on-premise" rel="noopener ugc nofollow" target="_blank"> Plotly企业服务器</a>提供认证。</p><p id="3f82" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">请看这里的例子。</p><div class="hh hi ez fb hj kk"><a href="https://dash.plot.ly/authentication" rel="noopener  ugc nofollow" target="_blank"><div class="kl ab dw"><div class="km ab kn cl cj ko"><h2 class="bd ia fi z dy kp ea eb kq ed ef hy bi translated">证明</h2><div class="kr l"><h3 class="bd b fi z dy kp ea eb kq ed ef dx translated">编辑描述</h3></div><div class="ks l"><p class="bd b fp z dy kp ea eb kq ed ef dx translated">dash.plot.ly</p></div></div></div></a></div><p id="2ef2" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq ia"> 10。登录和注销按钮</strong></p><p id="526e" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这一节中，我将演示如何使用登录和注销按钮进行身份验证。我们可以通过用户认证来保护回调的输出。</p><blockquote class="oi oj ok"><p id="dd9c" class="jo jp ol jq b jr js ja jt ju jv jd jw om jy jz ka on kc kd ke oo kg kh ki kj hb bi translated">继续之前，请从“app.py”中删除HTTP基本身份验证。</p></blockquote><p id="aa92" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">按照下面写的步骤，用登录和注销按钮实现身份验证。</p><p id="3abe" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq ia">一、在</strong> <code class="du mj mk ml mm b"><strong class="jq ia">dashboard_demo</strong></code> <strong class="jq ia">目录下创建一个“user.py ”,包含用户和密码。</strong></p><pre class="mn mo mp mq fd mr mm ms mt aw mu bi"><span id="b838" class="lq la hz mm b fi mv mw l mx my">user_pwd = {'dash': 'dash@123',<br/>            'dash1': 'dash1@123',<br/>            }<br/>user_names = {'dash': 'User1, welcome to the crypto indicators dashboard',<br/>              'dash1': 'User1, welcome to the crypto indicators dashboard',<br/>              }<br/><br/>def users_info():<br/>    return user_pwd, user_names</span></pre><p id="5e04" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq ia">二。写登录路线</strong></p><p id="805f" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">登录路由验证用户和密码组合，并根据身份验证结果重定向到url。</p><pre class="mn mo mp mq fd mr mm ms mt aw mu bi"><span id="4477" class="lq la hz mm b fi mv mw l mx my">import flask<br/>from users import users_info<br/>user_pwd, user_names = users_info()<br/>_app_route = '/'</span><span id="1bfb" class="lq la hz mm b fi nl mw l mx my"># Create a login route<br/>@app.server.route('/login', methods=['POST'])<br/>def route_login():<br/>    data = flask.request.form<br/>    username = data.get('username')<br/>    password = data.get('password')<br/><br/>    if username not in user_pwd.keys() or  user_pwd[username] != password:<br/>        return flask.redirect('/login')<br/>    else:<br/><br/>        # Return a redirect with<br/>        rep = flask.redirect(_app_route)<br/><br/>        # Here we just store the given username in a cookie.<br/>        # Actual session cookies should be signed or use a JWT token.<br/>        rep.set_cookie('custom-auth-session', username)<br/>        return rep</span></pre><p id="1d7d" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq ia">三。定义一个登录表单</strong></p><pre class="mn mo mp mq fd mr mm ms mt aw mu bi"><span id="e479" class="lq la hz mm b fi mv mw l mx my"># Simple dash component login form.<br/>login_form = html.Div([<br/>    html.Form([<br/>        dcc.Input(placeholder='username', name='username', type='text'),<br/>        dcc.Input(placeholder='password', name='password', type='password'),<br/>        html.Button('Login', type='submit')<br/>    ], action='/login', method='post')<br/>])</span></pre><p id="9ab5" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq ia">四。在DateRangePicker </strong>前的 <code class="du mj mk ml mm b">app.layout</code> <strong class="jq ia">添加按钮</strong></p><pre class="mn mo mp mq fd mr mm ms mt aw mu bi"><span id="4fb4" class="lq la hz mm b fi mv mw l mx my">html.Div(id='custom-auth-frame'),<br/>html.Div(id='custom-auth-frame-1',<br/>           style={<br/>                  'textAlign': 'right',<br/>                  "background": "black",<br/>           }<br/>           ),</span></pre><p id="26fa" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq ia">五、创建注销路径</strong></p><p id="16e0" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">当用户单击注销按钮时，注销路由重定向到登录页面。</p><pre class="mn mo mp mq fd mr mm ms mt aw mu bi"><span id="436f" class="lq la hz mm b fi mv mw l mx my"># create a logout route<br/>@app.server.route('/logout', methods=['POST'])<br/>def route_logout():<br/>    # Redirect back to the index and remove the session cookie.<br/>    rep = flask.redirect('/login')<br/>    rep.set_cookie('custom-auth-session', '', expires=0)<br/>    return rep</span></pre><p id="b54e" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">六。编辑多输出回调</p><figure class="mn mo mp mq fd hk"><div class="bz dy l di"><div class="na nb l"/></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">多输出回调</figcaption></figure><p id="6059" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这个更新的回调将基于身份验证结果产生三个输出。回调函数将验证用户和密码组合，如果验证失败，将重定向到登录页面，否则将显示图形和数据表。我们将在回调函数中编写<strong class="jq ia"> LogoutButton </strong>。</p><p id="ab9f" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们的应用程序现在有密码保护。让我们参观一下我们到目前为止所建造的东西。</p><figure class="mn mo mp mq fd hk"><div class="bz dy l di"><div class="op nb l"/></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">仪表板参观视频。</figcaption></figure><p id="bb0f" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">一切看起来都很好。根据您的要求，Dash可以为您做很多事情。在这里 阅读更多用例及教程<a class="ae hv" href="https://dash.plot.ly/?_ga=2.104688649.828752419.1574214165-1322431847.1545115553" rel="noopener ugc nofollow" target="_blank"> <strong class="jq ia">。</strong></a></p><h2 id="8984" class="lq la hz bd hw lr ls lt le lu lv lw li jx lx ly lk kb lz ma lm kf mb mc lo md bi translated">11.部署到Heroku</h2><blockquote class="oi oj ok"><p id="cc67" class="jo jp ol jq b jr js ja jt ju jv jd jw om jy jz ka on kc kd ke oo kg kh ki kj hb bi translated"><strong class="jq ia">免责声明:</strong>下面写的程序是在MacBook Pro上测试的。它应该在Linux上运行良好，但在Windows上可能无法运行。请按照这里的窗口说明:<a class="ae hv" href="https://devcenter.heroku.com/articles/heroku-cli" rel="noopener ugc nofollow" target="_blank">https://devcenter.heroku.com/articles/heroku-cli</a></p></blockquote><p id="3590" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">按照下面编写的过程将Dash应用程序部署到Heroku。</p><p id="6981" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">一、<a class="ae hv" href="https://signup.heroku.com/login" rel="noopener ugc nofollow" target="_blank"> <strong class="jq ia">注册一个免费的Heroku账号</strong> </a>。</p><p id="372b" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq ia">二。</strong>在mac或linux上用<code class="du mj mk ml mm b">brew tap heroku/brew &amp;&amp; brew install heroku </code>安装<strong class="jq ia"> Heroku命令行界面(CLI) </strong>。</p><p id="512c" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq ia">三</strong>。用<code class="du mj mk ml mm b">git init</code>命令启动GitHub存储库。</p><p id="273e" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq ia">四。</strong>将<code class="du mj mk ml mm b">Procfile</code>和<code class="du mj mk ml mm b">.gitignore</code>文件写入<code class="du mj mk ml mm b">dashboard_demo</code>目录，如下图。</p><p id="e4a0" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><code class="du mj mk ml mm b">Procfile</code></p><pre class="mn mo mp mq fd mr mm ms mt aw mu bi"><span id="99ec" class="lq la hz mm b fi mv mw l mx my">web: gunicorn index:server</span></pre><p id="aca4" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><code class="du mj mk ml mm b">.gitignore</code></p><pre class="mn mo mp mq fd mr mm ms mt aw mu bi"><span id="f0a6" class="lq la hz mm b fi mv mw l mx my">*.pyc<br/>.DS_Store</span></pre><p id="2e14" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您的<code class="du mj mk ml mm b">dashboard_demo</code>目录应该如下所示。</p><pre class="mn mo mp mq fd mr mm ms mt aw mu bi"><span id="c936" class="lq la hz mm b fi mv mw l mx my">dashboard_demo<br/>|--.gitignore<br/>|--app.py<br/>|--index.py<br/>|--Procfile<br/>|--requirements.txt<br/>|--users.py</span></pre><p id="5946" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">使用<strong class="jq ia"> </strong> <code class="du mj mk ml mm b"><strong class="jq ia">heroku login</strong></code> <strong class="jq ia"> </strong>命令通过CLI登录Heroku，运行以下命令创建并部署app。</p><pre class="mn mo mp mq fd mr mm ms mt aw mu bi"><span id="1f51" class="lq la hz mm b fi mv mw l mx my">$ heroku create dash-app-name # change dash-app-name to a unique name<br/>$ git add . # add all files to git<br/>$ git commit -m 'Initial app commit'<br/>$ git push heroku master # deploy code to heroku<br/>$ heroku ps:scale web=1  # run the app with a 1 heroku "dyno"</span></pre><p id="79ca" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在，您可以在<a class="ae hv" href="https://my-dash-app.herokuapp.com" rel="noopener ugc nofollow" target="_blank">https://</a>dash-app-name<a class="ae hv" href="https://my-dash-app.herokuapp.com" rel="noopener ugc nofollow" target="_blank">. heroku app . com</a>上看到您的应用。</p><p id="8aee" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我在Heroku上创建了一个名为<code class="du mj mk ml mm b">crypto-indicators-dashboard</code>的应用程序。这是我们在本教程(第1部分和第2部分)中创建的同一个应用程序。</p><div class="hh hi ez fb hj kk"><a href="https://crypto-indicators-dashboard.herokuapp.com/" rel="noopener  ugc nofollow" target="_blank"><div class="kl ab dw"><div class="km ab kn cl cj ko"><h2 class="bd ia fi z dy kp ea eb kq ed ef hy bi translated">破折号</h2><div class="kr l"><h3 class="bd b fi z dy kp ea eb kq ed ef dx translated">加密货币指示器仪表板</h3></div><div class="ks l"><p class="bd b fp z dy kp ea eb kq ed ef dx translated">crypto-indicators-dashboard.herokuapp.com</p></div></div></div></a></div><p id="842c" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">不及物动词如果您对代码进行了任何更改，请执行以下操作来更新应用程序。</p><pre class="mn mo mp mq fd mr mm ms mt aw mu bi"><span id="3b5b" class="lq la hz mm b fi mv mw l mx my">$ git add . # add changes<br/>$ git commit -m 'change description'<br/>$ git push heroku master # push to heroku</span></pre><p id="11ed" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果您遵循了所有的步骤，现在您应该能够构建app并将其部署到Heroku。您可能会遇到部署错误，因此尝试先部署简单的应用程序。还可以使用<code class="du mj mk ml mm b">heroku logs --tail</code>命令检查最近的应用程序日志，以检查应用程序/代码错误。</p><p id="f428" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">你可以用Dash做很多事情。你可以在同一个页面上有多个图表，有子标签，装饰特定值的数据表，制作一个数据表下载按钮等。对于本教程，我只想制作一个仪表板，显示给定日期范围和加密货币的价格指标图表。</p><h2 id="6e52" class="lq la hz bd hw lr ls lt le lu lv lw li jx lx ly lk kb lz ma lm kf mb mc lo md bi translated">摘要</h2><ul class=""><li id="7481" class="nc nd hz jq b jr me ju mf jx oq kb or kf os kj nh ni nj nk bi translated">首先了解和理解你对dashboard的需求。</li><li id="7326" class="nc nd hz jq b jr oc ju od jx oe kb of kf og kj nh ni nj nk bi translated">用简单的布局和回调来启动应用程序。</li><li id="a7c4" class="nc nd hz jq b jr oc ju od jx oe kb of kf og kj nh ni nj nk bi translated">逐个添加dash组件和回调。</li><li id="5159" class="nc nd hz jq b jr oc ju od jx oe kb of kf og kj nh ni nj nk bi translated">添加或删除后，刷新本地主机上的应用程序页面以查看更改。</li><li id="687c" class="nc nd hz jq b jr oc ju od jx oe kb of kf og kj nh ni nj nk bi translated">为应用程序、索引、数据、用户等编写单独的代码，以便于调试和理解。</li><li id="e458" class="nc nd hz jq b jr oc ju od jx oe kb of kf og kj nh ni nj nk bi translated">尝试不同的风格和应用程序布局，以获得更好的外观。</li><li id="dee4" class="nc nd hz jq b jr oc ju od jx oe kb of kf og kj nh ni nj nk bi translated">在回调之间共享数据，并使用多个输出回调。</li><li id="a159" class="nc nd hz jq b jr oc ju od jx oe kb of kf og kj nh ni nj nk bi translated">部署前在本地测试应用程序。</li><li id="a34c" class="nc nd hz jq b jr oc ju od jx oe kb of kf og kj nh ni nj nk bi translated">首先部署一个简单的应用程序，然后进行扩展。</li></ul><p id="1032" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我知道你对Dash的第一次体验。😉</p><p id="ed38" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">你可以在<a class="ae hv" href="https://github.com/dc-aichara/DS-ML-Public/tree/master/Medium_Files/dashboard_demo" rel="noopener ugc nofollow" target="_blank"> <strong class="jq ia"> Github </strong> </a>上找到这个app。</p><p id="50ea" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">感谢您的阅读！😊</p><p id="8839" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我随时准备回答您的问题，请通过<a class="ae hv" href="https://www.linkedin.com/in/dcaichara/" rel="noopener ugc nofollow" target="_blank"> <strong class="jq ia">、LinkedIn </strong> </a>或<a class="ae hv" href="https://twitter.com/dc_aichara" rel="noopener ugc nofollow" target="_blank"> <strong class="jq ia"> Twitter </strong>联系我。</a></p><blockquote class="oi oj ok"><p id="0967" class="jo jp ol jq b jr js ja jt ju jv jd jw om jy jz ka on kc kd ke oo kg kh ki kj hb bi translated">如果你想在你的Dash应用程序中添加谷歌分析跟踪、favicon、自定义CSS文件等，请阅读第3部分。</p></blockquote><div class="hh hi ez fb hj kk"><a rel="noopener follow" target="_blank" href="/game-of-data/building-a-dashboard-app-using-plotlys-dash-favicon-google-analytics-custom-css-75f7a1e95a88"><div class="kl ab dw"><div class="km ab kn cl cj ko"><h2 class="bd ia fi z dy kp ea eb kq ed ef hy bi translated">使用Plotly的Dash构建仪表板应用程序:Favicon、Google analytics、自定义CSS</h2><div class="kr l"><h3 class="bd b fi z dy kp ea eb kq ed ef dx translated">第三部分:如何给Dash App添加App favicon，App title，App description，Google Analytics，自定义CSS文件？</h3></div><div class="ks l"><p class="bd b fp z dy kp ea eb kq ed ef dx translated">medium.com</p></div></div><div class="kt l"><div class="ot l kv kw kx kt ky hp kk"/></div></div></a></div><p id="d566" class="pw-post-body-paragraph jo jp hz jq b jr js ja jt ju jv jd jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">参考资料/资源:</p><ol class=""><li id="b2c1" class="nc nd hz jq b jr js ju jv jx ne kb nf kf ng kj ou ni nj nk bi translated"><a class="ae hv" href="https://dash.plot.ly/?_ga=2.113607566.828752419.1574214165-1322431847.1545115553" rel="noopener ugc nofollow" target="_blank">https://dash.plot.ly/?_ ga = 2.11360766-132243553</a></li><li id="79b6" class="nc nd hz jq b jr oc ju od jx oe kb of kf og kj ou ni nj nk bi translated"><a class="ae hv" href="https://plot.ly/dash/" rel="noopener ugc nofollow" target="_blank">https://plot.ly/dash/</a></li><li id="6720" class="nc nd hz jq b jr oc ju od jx oe kb of kf og kj ou ni nj nk bi translated"><a class="ae hv" href="https://towardsdatascience.com/how-to-build-a-complex-reporting-dashboard-using-dash-and-plotl-4f4257c18a7f" rel="noopener" target="_blank">https://towards data science . com/how-to-build-a-complex-reporting-dashboard-using-dash-and-plotl-4f 4257 c 18 a 7 f</a></li><li id="3121" class="nc nd hz jq b jr oc ju od jx oe kb of kf og kj ou ni nj nk bi translated"><a class="ae hv" href="https://devcenter.heroku.com/articles/heroku-cli" rel="noopener ugc nofollow" target="_blank">https://devcenter.heroku.com/articles/heroku-cli</a></li></ol></div></div>    
</body>
</html>