<html>
<head>
<title>WALMART SALES FORECAST</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">沃尔玛销售预测</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/walmart-sales-forecast-41c6dc1028b8?source=collection_archive---------3-----------------------#2019-10-13">https://medium.com/analytics-vidhya/walmart-sales-forecast-41c6dc1028b8?source=collection_archive---------3-----------------------#2019-10-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7132" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我已经尝试了kaggle问题作为我自己案例研究的一部分。案例研究的主要描述和数据可以在此链接找到:<a class="ae jd" href="https://www.kaggle.com/c/walmart-recruiting-store-sales-forecasting" rel="noopener ugc nofollow" target="_blank">https://www . ka ggle . com/c/Walmart-recruiting-store-sales-forecasting</a></p><p id="516e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">全部数据都可以在这个链接中找到，并且是开源的，可以下载。</p><p id="0c25" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将讨论和解释我在ipynb中完成的整个解决方案。</p><p id="2ec2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一切按部就班。所以，我们先从数据描述部分开始。</p><h1 id="823f" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated"><strong class="ak">数据描述:</strong></h1><p id="3a6a" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">解决任何问题的第一步是彻底理解数据，比如数据是关于什么的，并且彻底理解。</p><p id="21c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果不理解数据，就不可能解决数据。</p><p id="a3bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kh">数据的正式取消声明:</em></p><p id="5154" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该数据包含位于不同地区的45家沃尔玛商店的历史销售数据。每个商店包含许多部门，我的任务是预测每个商店的部门范围内的销售额。</p><p id="f073" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，沃尔玛全年都会举办几次促销活动。这些降价发生在重要的节日之前，其中四个最大的节日是超级碗、劳动节、感恩节和圣诞节。包含这些假期的周在评估中的权重是非假期周的五倍。这项比赛的部分挑战是在缺乏完整/理想的历史数据的情况下，模拟降价对这些假日周的影响。</p><p id="f609" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">stores.csv</p><p id="54b8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该文件包含45家商店的匿名信息，表明商店的类型和规模。</p><p id="2160" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">train.csv</p><p id="a9df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是从2010年2月5日到2012年11月1日的历史培训数据。在该文件中，您将找到以下字段:</p><ul class=""><li id="b61e" class="ki kj hi ih b ii ij im in iq kk iu kl iy km jc kn ko kp kq bi translated">商店——商店编号</li><li id="d07f" class="ki kj hi ih b ii kr im ks iq kt iu ku iy kv jc kn ko kp kq bi translated">部门——部门编号</li><li id="73d0" class="ki kj hi ih b ii kr im ks iq kt iu ku iy kv jc kn ko kp kq bi translated">日期—星期</li><li id="f085" class="ki kj hi ih b ii kr im ks iq kt iu ku iy kv jc kn ko kp kq bi translated">Weekly_Sales —给定商店中给定部门的销售额</li><li id="7574" class="ki kj hi ih b ii kr im ks iq kt iu ku iy kv jc kn ko kp kq bi translated">IsHoliday —该周是否为特殊假日周</li></ul><p id="0677" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">test.csv</p><p id="9a97" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该文件与train.csv相同，只是我们保留了每周销售额。您必须预测该文件中每个商店、部门和日期三元组的销售额。</p><p id="ff91" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">功能. csv</p><p id="939c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该文件包含与给定日期的商店、部门和区域活动相关的附加数据。它包含以下字段:</p><ul class=""><li id="0b4e" class="ki kj hi ih b ii ij im in iq kk iu kl iy km jc kn ko kp kq bi translated">商店——商店编号</li><li id="0cb5" class="ki kj hi ih b ii kr im ks iq kt iu ku iy kv jc kn ko kp kq bi translated">日期—星期</li><li id="f90c" class="ki kj hi ih b ii kr im ks iq kt iu ku iy kv jc kn ko kp kq bi translated">温度—该地区的平均温度</li><li id="65eb" class="ki kj hi ih b ii kr im ks iq kt iu ku iy kv jc kn ko kp kq bi translated">燃料价格-该地区的燃料成本</li><li id="1b77" class="ki kj hi ih b ii kr im ks iq kt iu ku iy kv jc kn ko kp kq bi translated">减价1–5—与沃尔玛促销减价相关的匿名数据。降价数据仅在2011年11月后可用，并非所有商店都随时可用。任何缺少的值都标有安娜。</li><li id="b767" class="ki kj hi ih b ii kr im ks iq kt iu ku iy kv jc kn ko kp kq bi translated">CPI——消费者价格指数</li><li id="1b97" class="ki kj hi ih b ii kr im ks iq kt iu ku iy kv jc kn ko kp kq bi translated">失业——失业率</li><li id="3bf0" class="ki kj hi ih b ii kr im ks iq kt iu ku iy kv jc kn ko kp kq bi translated">IsHoliday —该周是否为特殊假日周</li></ul><p id="0052" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为方便起见，这四个假日位于数据集中的以下几周内(并非所有假日都在数据中):</p><p id="fc38" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">超级碗:2010年2月12日、2011年2月11日、2012年2月10日、2013年2月8日<br/>劳动节:2010年9月10日、2011年9月9日、2012年9月7日、2013年9月6日<br/>感恩节:2010年11月26日、2011年11月25日、2012年11月23日、2012年11月29日、2013年11月29日<br/>圣诞节:2010年12月31日、2012月30</p><p id="5198" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">— — — — — — — — — — — — — — — — — — — — — — — -</p><h2 id="0f4a" class="kw jf hi bd jg kx ky kz jk la lb lc jo iq ld le js iu lf lg jw iy lh li ka lj bi translated">绩效指标:</h2><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lk"><img src="../Images/fa84179a2a8fa7c634b678939abbcd86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zaV5zqZLUcoKeJTie3kKCg.png"/></div></div></figure><h1 id="873a" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated"><strong class="ak">问题陈述:</strong></h1><p id="7fb0" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">分配给我的主要问题是，我必须根据给定的数据集预测销售额。从问题本身我能理解的是，这是一个回归问题。我们必须使用回归模型来从数据集中预测销售额。</p><h2 id="a705" class="kw jf hi bd jg kx ky kz jk la lb lc jo iq ld le js iu lf lg jw iy lh li ka lj bi translated"><strong class="ak">解决方案:</strong></h2><p id="a390" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">我在这里的任务是解决这个作业，我会尽一切努力在最大程度上解决这个问题。</p><p id="dec7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从解决方案部分开始，我首先下载了全部数据，然后将数据加载到我的ipynb笔记本中。</p><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/cf5bde34a9adf29a80034e5e80287c7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wd6quPpyoxTHZluNi97BLg.png"/></div></div></figure><p id="0b24" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我已经从数据中读取了单个文件，并打印了列。我这样做是为了了解提供给我的数据类型。在这个解决方案中，我的核心问题是设计一种方法，在这种方法中，我应该根据上面的数据集来预测沃尔玛的销售额。所以，理解我所拥有的每一个特性是非常重要的。</p><p id="1b63" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在理解了数据集的列之后，我所做的是合并数据集，因为数据集被分成了许多部分。为了获得对数据的正确理解，我必须合并数据集。</p><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lx"><img src="../Images/5613eb543c7b48d1b113ea7db6af1248.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yHuGetexsTzbgnHaNkBfpw.png"/></div></div></figure><p id="29f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，我可以看到最终数据集已准备就绪。但是我可以看到在MarkDown1列和其他MarkDown列中有许多nan值。因此，对我来说，理解哪个特征可以用于设计机器学习算法并不容易。因此，我不得不选择探索性数据分析(它基本上被定义为一种技术，用于以统计方式理解数据的行为，并使用特定的绘图工具理解每个特征是如何表现的。所以，现在我将彻底讨论关于探索性数据分析部分。</p><h2 id="e740" class="kw jf hi bd jg kx ky kz jk la lb lc jo iq ld le js iu lf lg jw iy lh li ka lj bi translated"><strong class="ak">探索性数据分析</strong></h2><p id="2907" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">看完这些数据后，我决定先分析这些数据。分析的主要观点是，销售可以对时间因素和空间因素作出反应，商店的销售记录是每个部门日期变量的聚合，可以分解成y/m/w/d变量。日变量可以提供许多销售信息。将结合外部数据(如美国国庆节)来添加信息。我们已经知道，在机器学习问题解决部分，我们必须尝试所有可能的方法来解决问题，而90%的实验可能是徒劳的。但是我们仍然必须努力寻找近似解。</p><p id="7582" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我做的第一件事是检查商店和类型的唯一值。</p><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/26e9b194c0c6d0643c58e61c575f140f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iTuR03IWh3bd6cIta0fMLw.png"/></div></div></figure><p id="cba5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我可以发现这里的惟一值是45，也就是说，有45种不同的商店类型。虽然知道唯一类型，但在提供的数据中有三种唯一类型可用。</p><p id="8b37" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我决定寻找数据相对于类型的行为。</p><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es ly"><img src="../Images/06e34b9db71257b649a964d0f6ddc708.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bz_tc28QaShDM4UFS8sbtw.png"/></div></div></figure><p id="0ade" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我使用groupby来查看数据的所有行为，包括计数、平均值、标准差、最小销售值、最大销售值以及所有百分点值(分位数)和最大值。这是为了了解每种类型的销售行为以及数据。</p><p id="6489" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我要做的是找出每种类型数据的比例，并在饼图视图中聚焦它们。</p><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/04821924ea035faee3a5e973bb00aa7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1FeNtT8rTKFPoK9zMrxHbw.png"/></div></div></figure><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lz"><img src="../Images/8a76f4893639426b6bec9bb8eaf1483f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ft-0UeXtSKZLPY1q5qaGzg.png"/></div></div></figure><p id="aea6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从这个饼图中我们可以看到，48.9%的销售额属于A店，大约37.8%属于B店，13.3 %属于C店。</p><p id="85e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了了解A类和C类中每一类销售额的大小，我使用了箱线图。</p><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/57d53662811c77a6afc203075867be33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XLU9on4K8iXsyowBuxhbIg.png"/></div></div></figure><p id="a9b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里我们可以发现，A型商店是最大的商店，C型商店是最小的。此外，A、B和c之间没有大小重叠的区域。类型是大小的最佳预测值。</p><p id="6224" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我试图想象的是A、B、c三种类型的每周销售额。</p><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/04dc3ce0c8364dcd9631ea2d457501c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cd755sf8JdYIIloDN5LzfA.png"/></div></div></figure><p id="44cb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我能看到的是数据重叠太多，A的中位数是最高的，C是最低的，这意味着规模越大的商店销售记录越高(规模中位数和销售额中位数的顺序是相同的)</p><p id="d905" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来我要做的是深入了解训练数据。我已经合并了列车并存储了数据。然后用散点图对火车数据的大小和每周销量进行分析。</p><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/b689a0b9429d0f5007d89bba4dcf3e22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m9QLimCf6k2Lv-3K4o1XOQ.png"/></div></div></figure><p id="b03e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个结果并不令人信服，我无法从这些数据中得到任何适当的信息。</p><p id="e2f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来我做的是在每周销售额和A、B、c三种类型的规模之间做一个散点图。</p><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/85a8f1de16014fa10e96eaf6d05fa335.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QNRHs9v25As1vSUibH6CYQ.png"/></div></div></figure><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/86cc3f2d58c830454bee638d44fcbf66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*esthuazO1LPge8fFb0oZZg.png"/></div></div></figure><p id="058f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我们所看到的，A型、B型和C型的每周销售额重叠太多。因此，我们不能由此得出任何恰当的结论。</p><p id="aba1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以，让我们继续EDA部分，因为我们没有从上面的图中发现任何有帮助的东西。因此，我们应该深入挖掘，以获得数据的洞察力。</p><p id="1969" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我试图理解商店、周销售额和培训数据类型的数据。</p><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es ma"><img src="../Images/17761f61c9546f7e0df46e6069c1185a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o-q9pjaK6rS-9Xd-7BgXzw.png"/></div></div></figure><p id="81a0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我要做的是找出商店、每周销售额和假日之间的关系。</p><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es mb"><img src="../Images/819c2feeaa34a12a20b738942ffff3ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qzYCJX9SZqUIdVlfviBylw.png"/></div></div></figure><p id="fd92" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来我要做的是找出部门、周销售额和假期之间的关系。</p><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es ma"><img src="../Images/49a45c44a7ed697c6884d800b1d37f33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z2Mv23-5BaZ_3thdxXa_OQ.png"/></div></div></figure><p id="c56f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">与商店和假日的关系不同，部门和假日不能解释任何关系。72个部门显示假日期间的销售额最高，而其他部门则没有，甚至在一些部门，非假日的销售额更高。这意味着产品(部门)的特性与销售有着不同的关系。</p><p id="41dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来我要做的是确定周销售数据是否服从高斯分布。因为如果周销售额服从高斯分布，那么我们也可以预测周销售额的一些其他属性。</p><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/a83a0b24e9849b543663df7428f3e051.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qt9W_3gi3yJkRR0306k24Q.png"/></div></div></figure><p id="41ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">周销售额的值并不遵循一条直线。所以。我们可以得出这样的结论:周销售额不服从高斯分布。</p><p id="e50a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来我要做的是找出每周销售额的范围。我使用了实际值的对数来了解数据。</p><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/61e14caf81320048917ac94dba83938e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-53Fuan6J5MQnbzlHCN96Q.png"/></div></div></figure><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es mc"><img src="../Images/168efafed62fb79e090db953b38095d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OpdZrEJZCMP5iB51cWHF-A.png"/></div></div></figure><p id="1f19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我们在这里看到的，周销售额范围从0到12(对数)。</p><p id="9e40" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，作为EDA的一部分，我所做的是获得独特的部门，并将独特的部门分成4个相等的部分，并找出20个槽中的平均销售记录。</p><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/4819ac019971074507959ef5368846be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OBIaWKWOxDI7RiuiRUdMFQ.png"/></div></div></figure><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/ec420ab57e5dd8c47e29460819f5b953.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fa716C15rR0YIgkSy66JNA.png"/></div></div></figure><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/99877bbaa4f69b7268792f12994c6e27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XYlZBK83oUzJIWAZhsN18w.png"/></div></div></figure><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/0551b1b50fa647fe0beb0d348ecdae4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kiz62P3DO4FlWwFXs3ZmOQ.png"/></div></div></figure><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es mb"><img src="../Images/984e2de5d47d300f5497a53609a517dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TPEvpi05u0Pe8k2jfQBlTA.png"/></div></div></figure><p id="464d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过线图，我们可以看到以下内容</p><p id="db24" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">销售水平因部门而异，一个部门的销售记录水平是稳定的，在1月和5月左右有一些峰值。因此，可能会有一个高销售事件，一些部门与这些事件高度相关。因此，销售记录在1月或5月左右急剧上升</p><p id="1068" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结论1:部门是预测销售的好特征</p><p id="eb6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结论2:日期(尤其是事件)是预测销售额的一个很好的特征像部门，按商店销售的时间序列将显示销售趋势假设:像部门，商店将给出一种销售水平假设_2:另外，这也将给出最高销售额的一天。</p><p id="02b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我按商店和日期平均值分组，然后将它们分成5个时间段，并按时间轴绘制平均销售额。</p><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/ee30ff983a117f0a3d7278edd84164fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hombW0Y13R8vE2uq0tpGpw.png"/></div></div></figure><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/a57fe56dfc0ebe48c3146ca2fc9e50f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Kj0U1o3L6Cxvx1WT6OG0A.png"/></div></div></figure><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/4374988546cd4bfd384b0e3962b310f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jvuyP4c0CXjVeq2XpETZMg.png"/></div></div></figure><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/82371ba15d972653a13908c8d38da6d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S1srmyAtXmDr_b7NHgpXtA.png"/></div></div></figure><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/033490c415efd21ab2246a7108a5f93b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Mr5wurV_hHRZpSvZd52lg.png"/></div></div></figure><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es md"><img src="../Images/211e053054514cafc043b43b7d239d5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*owkvoTAohas69fC4OKY1dg.png"/></div></div></figure><p id="1520" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于我无法在这些销售预测栏中找到任何适当的关系，我决定制作一个虚拟模型，以检查最糟糕的情况是什么样的。</p><p id="e306" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我已经尝试了这个虚拟模型，并在kaggle网站上查看了wmae。它在kaggle页面上获得了大约25000分。</p><p id="fdd2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我已经决定在一个贪婪的方法工作，从较少的功能开始，并添加一个功能，如果分数有点多。</p><h2 id="7d0f" class="kw jf hi bd jg kx ky kz jk la lb lc jo iq ld le js iu lf lg jw iy lh li ka lj bi translated">从主解决方案开始</h2><p id="0215" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">我做的第一件事是对日期部分进行一些常见的特征化，因为日期与销售直接相关。特征化的核心部分基本上涉及到很多领域知识。</p><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/16fc16e89ffb2a278f052c2d53321757.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gEV0dIOI1r4mxtmsun4aOQ.png"/></div></div></figure><p id="9a3e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">特征化是建模最重要的一步，因为模型的准确性很大程度上取决于我们所采取的特征化。我决定选取所有特征的一个子集，看看模型的表现如何。</p><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es ma"><img src="../Images/9f878a7451c336685e00ef60c496ae93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AL5qH-hc8M66mUHsWocPNg.png"/></div></div></figure><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/6dd4a1b72f91cedcccba80c56d8c6103.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0Jj0IDVCjQUBzM39x6ihDQ.png"/></div></div></figure><figure class="ll lm ln lo fd lp er es paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="er es lw"><img src="../Images/0f8d0fa5f56c4a8cbdbc4e1f70c447d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zn1ICUWl2MqX03w2r842ZA.png"/></div></div></figure><p id="b72c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">def multi _ holiday(data):<br/>dataset = data . copy()<br/>holiday =[]<br/>dates = data[' Date ']。apply(lambda x:x . strftime(' % Y-% m-% d '))。范围内I的值<br/>(len(dates)):<br/>holiday . append(get _ holiday(str(dates[I])))<br/>holiday = PD。data frame(holiday)<br/>holiday . columns =[' super _ bowl '，' labor '，' chris '，' columbus '，' veterans '，' independence '，' memorial '，' Washington ']<br/>dataset = PD . merge(dataset，holiday，left_index=True，right _ index = True)<br/>normal _ holiday = dataset . copy()<br/>holiday _ pre1 =[]<br/>dates = data[' Date ']。apply(lambda x:(x-datetime . time delta(days = 7))。strftime('%Y-%m-%d ')。范围内I的值<br/>(len(dates)):<br/>holiday _ pre1 . append(get _ holiday(str(dates[I]))<br/>holiday _ next 1 =[]<br/>dates = data[' Date ']。apply(lambda x:(x+datetime . time delta(days = 7))。strftime('%Y-%m-%d ')。范围内I的值<br/>(len(dates)):<br/>holiday _ next 1 . append(get _ holiday(str(dates[I]))<br/>holiday _ pre1 = PD。data frame(holiday _ pre1)<br/>holiday _ next 1 = PD。data frame(holiday _ next1)<br/>holiday _ pre 1 . columns =[' super _ bowl _ P1 '，' labor_p1 '，' thank_p1 '，' chris_p1 '，' veterans_p1 '，' independence_p1 '，' memorial_p1 '，' Washington _ P1 ']<br/>holiday _ next1 . columns =[' super _ bowl _ n1 '，' labor_n1 '，' thank_n1 '，' chris_n1 '，' columbus_n1 '，' memorial_n1 '，' washington_n1'] <br/> dataset = pd .apply(lambda x:(x-datetime . time delta(days = 14))。strftime('%Y-%m-%d ')。范围内I的值<br/>(len(dates)):<br/>holiday _ pre 2 . append(get _ holiday(str(dates[I]))<br/>holiday _ next 2 =[]<br/>dates = data[' Date ']。apply(lambda x:(x+datetime . time delta(days = 14))。strftime('%Y-%m-%d ')。范围内I的值<br/>(len(dates)):<br/>holiday _ next 2 . append(get _ holiday(str(dates[I]))<br/>holiday _ pre2 = PD。data frame(holiday _ pre 2)<br/>holiday _ next 2 = PD。data frame(holiday _ next 2)<br/>holiday _ pre 2 . columns =[' super _ bowl _ p2 '，' labor_p2 '，' thank_p2 '，' chris_p2 '，' veterans_p2 '，' independence_p2 '，' memorial_p2 '，' Washington _ p2 ']<br/>holiday _ next 2 . columns =[' super _ bowl _ N2 '，' labor_n2 '，' thank_n2 '，' chris_n2 '，' columbus_n2 '，' veterans_n2 '，' independence_n2 '，' memorial_n2 '</p><p id="2d63" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我使用商店、部门、日期、销售额、周销售额和每周销售额作为训练数据集，只是为了测试这些特性的子集是如何工作的。由于销售预测与这个因素直接相关，所以我选择了这个。我已经查看了卡格尔页面上的分数。这个范围在5020左右。</p><h1 id="0457" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">最后一个IPYNB</h1></div></div>    
</body>
</html>