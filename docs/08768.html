<html>
<head>
<title>Data Scraping Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python进行数据采集</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/data-scraping-using-python-e190a3248360?source=collection_archive---------11-----------------------#2020-08-12">https://medium.com/analytics-vidhya/data-scraping-using-python-e190a3248360?source=collection_archive---------11-----------------------#2020-08-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/f5107d3ae559fc48e4cc5f2c86ffc4c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F5-kePegDEttdZ-duvkmTA.png"/></div></div></figure><p id="a056" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">数据抓取，也称为网页抓取，是从各种网站提取数据的过程。一般来说，公司不会通过API或任何其他来源公开他们的所有数据，以防止数据滥用。因此，如果我们想要访问的数据没有API，那么我们将不得不从这些网站上抓取数据。</p><h2 id="57bd" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">网页抓取的优势</h2><ul class=""><li id="c3d9" class="kj kk hi is b it kl ix km jb kn jf ko jj kp jn kq kr ks kt bi translated">比较不同网站的产品价格。</li><li id="4c1f" class="kj kk hi is b it ku ix kv jb kw jf kx jj ky jn kq kr ks kt bi translated">跟踪竞争对手的定价策略。</li><li id="5319" class="kj kk hi is b it ku ix kv jb kw jf kx jj ky jn kq kr ks kt bi translated">获取各种产品的产品描述和评论。</li><li id="34c5" class="kj kk hi is b it ku ix kv jb kw jf kx jj ky jn kq kr ks kt bi translated">收集金融数据进行市场研究和洞察。</li><li id="8e04" class="kj kk hi is b it ku ix kv jb kw jf kx jj ky jn kq kr ks kt bi translated">从黄页中抓取数据以产生线索。</li></ul><h2 id="6a58" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">怎么刮？</h2><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kz"><img src="../Images/942fe1c522788ae225310a5193978837.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NazvTDnE010NP2wwmH_19g.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">ESPN信息网站</figcaption></figure><p id="5ee8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本文中，我们将从<a class="ae li" href="https://stats.espncricinfo.com/ci/engine/records/batting/most_runs_career.html?class=2;id=6;type=team" rel="noopener ugc nofollow" target="_blank">ESPN·克瑞信息</a>网站收集数据。为了收集这些数据，我们将使用Python库，如Pandas、BeautifulSoup和urlopen。这里我提到了我想要抓取的url，并使用urlopen库打开了它，为BeautifulSoup库创建了一个汤来发挥它的魔力。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lj"><img src="../Images/e9ede98414dda01610d27db46804e81c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jxK_wsbXjK3KhEBMbdVhOQ.png"/></div></div></figure><p id="daf0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以使用soup的find_all()方法来提取网页中有用的html标签。有用的标签包括超链接的&lt; a &gt;、表格的&lt; table &gt;、表格行的&lt; tr &gt;、表格标题的&lt; th &gt;和表格单元格的&lt; td &gt;。</p><p id="bf01" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">众所周知，Pandas中的数据是以行和列的形式表示的。因此，首先我们需要获取所有的行，并通过for循环传递这些行，以获取所有相应的列。这些数据存储在一个列表中。后来，它被转换成一个熊猫数据帧。执行这项任务的代码如下所述。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/c9ea51ea5f42f036e0695175a13050c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EyQPw0sptThsFOTyfDxLJg.png"/></div></div></figure><p id="90d1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如我们所看到的，这些数据不干净，标题行也丢失了。为了得到标题，我们必须使用<th>标签。我们需要遵循与上面相同的过程来获取标题，并将其分配给另一个数据帧，最后需要连接两个数据帧。</th></p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/d11160e589a6af45393f1c0f635bb170.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JuMjoNf6cyAqSZHTwtr2bQ.png"/></div></div></figure><h2 id="0d7d" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">数据清理</h2><p id="d767" class="pw-post-body-paragraph iq ir hi is b it kl iv iw ix km iz ja jb ll jd je jf lm jh ji jj ln jl jm jn hb bi translated">正如我们看到的，我们在原始数据帧中添加了标题行，但数据仍然不干净。首先，我们需要将数据分成不同的列，并将数据的第一行指定为标题，并从数据帧中删除不必要的字符。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/b4d75baa4b48250c40e9fea3c20a258d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BCP7oYw6jm4QXUaPGrn1-g.png"/></div></div></figure><h2 id="6db1" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">数据可视化</h2><p id="da4e" class="pw-post-body-paragraph iq ir hi is b it kl iv iw ix km iz ja jb ll jd je jf lm jh ji jj ln jl jm jn hb bi translated">现在数据可以使用了。我们可以将这些数据导出为csv或任何其他格式以供进一步分析，或者我们可以使用matplotlib、seaborn等Python库来可视化这些数据。作为一个例子，让我们找出比赛次数最多的前10名印度板球运动员，并绘制出来。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/9c83f37e281a33a58f838170afd4f566.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zcev5MIBwlRc7RJczyqneQ.png"/></div></div></figure><h2 id="65f1" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">结论</h2><p id="eab2" class="pw-post-body-paragraph iq ir hi is b it kl iv iw ix km iz ja jb ll jd je jf lm jh ji jj ln jl jm jn hb bi translated">网络抓取允许我们访问互联网上的任何网站。将网络抓取应用到你的业务实践中，可以让你的业务比你的竞争对手更有优势。虽然它让我们可以无限制地访问任何网站，但必须小心避免滥用数据。一个适当规划和执行的网络搜集项目可以帮助公司向最终用户提供有意义的丰富数据。</p></div></div>    
</body>
</html>