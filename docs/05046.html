<html>
<head>
<title>Creating, Hosting &amp; Inferencing Machine Learning Model using Google Cloud Platform AutoML</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Google云平台AutoML创建、托管和推理机器学习模型</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/creating-hosting-inferencing-machine-learning-model-using-google-cloud-platform-automl-83413c9ff919?source=collection_archive---------5-----------------------#2020-04-09">https://medium.com/analytics-vidhya/creating-hosting-inferencing-machine-learning-model-using-google-cloud-platform-automl-83413c9ff919?source=collection_archive---------5-----------------------#2020-04-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/790429de8c57464716d4427e4001253b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9skL0EzBbogmWIDEYqc7cQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">谷歌云平台Auto ML</figcaption></figure><h1 id="36ef" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated"><strong class="ak">目标:</strong></h1><ol class=""><li id="58f3" class="js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">创建数据集并上传训练数据。</li><li id="cba6" class="js jt hi ju b jv kk jx kl jz km kb kn kd ko kf kg kh ki kj bi translated">培训和部署模型</li><li id="d54e" class="js jt hi ju b jv kk jx kl jz km kb kn kd ko kf kg kh ki kj bi translated">使用REST API进行推理</li></ol><h1 id="540e" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated"><strong class="ak">数据集:</strong></h1><p id="17ee" class="pw-post-body-paragraph kp kq hi ju b jv jw kr ks jx jy kt ku jz kv kw kx kb ky kz la kd lb lc ld kf hb bi translated"><a class="ae le" href="https://gist.github.com/10b81d9f1286bbe002b3312b2300d808.git" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/10b 81 d9 f 1286 bb 002 b 3312 b 2300d 808 . git</a></p><h1 id="6276" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated"><strong class="ak">步骤:</strong></h1><p id="9d50" class="pw-post-body-paragraph kp kq hi ju b jv jw kr ks jx jy kt ku jz kv kw kx kb ky kz la kd lb lc ld kf hb bi translated">第一步:</p><ul class=""><li id="ed04" class="js jt hi ju b jv lf jx lg jz lh kb li kd lj kf lk kh ki kj bi translated">创建一个Google云存储桶并上传csv文件。</li></ul><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/e15cd230d96358e6f2c96868840d8f90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UE17jFJOrtbZC0sOIRmrrg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">GCS存储桶创建和上传数据文件</figcaption></figure><ul class=""><li id="19b7" class="js jt hi ju b jv lf jx lg jz lh kb li kd lj kf lk kh ki kj bi translated">现在，我们将在GCP平台内创建一个数据集。访问<a class="ae le" href="https://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank">https://console.cloud.google.com/</a>并转到人工智能- &gt;表格- &gt;数据集。启用API(如果尚未启用)。</li></ul><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lq"><img src="../Images/f6b33987baa9065800690b214455722a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rp9JzIx71_H5D4SL0cYldQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">自动表格主页屏幕</figcaption></figure><ul class=""><li id="60c6" class="js jt hi ju b jv lf jx lg jz lh kb li kd lj kf lk kh ki kj bi translated">点击“新建数据集”</li></ul><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/e93d9736d5abbb86a3134e69e044a4c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EK_SumWGHmnKtioMdmohxA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">创建新数据集。</figcaption></figure><ul class=""><li id="b619" class="js jt hi ju b jv lf jx lg jz lh kb li kd lj kf lk kh ki kj bi translated">将名称设置为“irisdataset ”,并将区域设置为“Global”。点击“创建数据集”。</li></ul><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ls"><img src="../Images/2b6326d50814c52e0085560703e3010c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bGkbhKLK650wl6m76Zbjdw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">创建数据集</figcaption></figure><ul class=""><li id="49ce" class="js jt hi ju b jv lf jx lg jz lh kb li kd lj kf lk kh ki kj bi translated">我们现在需要将数据导入到新创建的数据集中。我们将通过上面上传的GCS桶加载相同的内容。但是，如果您有数据，也可以从本地机器和BigQuery上传。选择“从云存储中选择CSV文件”选项，并提供文件所在的GCS bucket文件路径。完成后，点击“导入”按钮。</li></ul><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/20c3ac0a66023eb679ce47270b2a78b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kbkr1nommswWNl6pAqpCTA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">导入数据</figcaption></figure><ul class=""><li id="1056" class="js jt hi ju b jv lf jx lg jz lh kb li kd lj kf lk kh ki kj bi translated">一旦数据被导入，它将显示数据的模式和数据摘要。它将显示缺失值计数、无效值(如果有)、不同值计数以及相互关系。它会自动预测数据类型，但如果你觉得它的分类不正确，请继续改变它。</li></ul><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/011b4cf4f2dccd9edcec885bc9919f51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n17Xb02fhFMc9wHP5SanfA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">输入数据详细信息</figcaption></figure><ul class=""><li id="36b9" class="js jt hi ju b jv lf jx lg jz lh kb li kd lj kf lk kh ki kj bi translated">这就完成了我们创建数据集和上传数据的第一个目标。</li><li id="62e7" class="js jt hi ju b jv kk jx kl jz km kb kn kd ko kf lk kh ki kj bi translated">你可以在下面的链接中了解更多关于准备培训数据的信息:<a class="ae le" href="https://cloud.google.com/automl-tables/docs/prepare" rel="noopener ugc nofollow" target="_blank">https://cloud.google.com/automl-tables/docs/prepare</a></li></ul><p id="1882" class="pw-post-body-paragraph kp kq hi ju b jv lf kr ks jx lg kt ku jz lt kw kx kb lu kz la kd lv lc ld kf hb bi translated"><strong class="ju hj">第二步:</strong></p><ul class=""><li id="a7ff" class="js jt hi ju b jv lf jx lg jz lh kb li kd lj kf lk kh ki kj bi translated">现在，让我们将重点放在培训和部署模型上。</li><li id="e1b9" class="js jt hi ju b jv kk jx kl jz km kb kn kd ko kf lk kh ki kj bi translated">我们需要选择目标列为“物种”。这将被用作我们的目标属性，即预测值。一旦设定，谷歌云平台将开始分析特征和目标变量之间的相互关系。</li></ul><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/b989f38da96b9eda144af60eed7a0d00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lHqfWAUQ_TH_SSw1K8K6Qg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">设置目标变量</figcaption></figure><ul class=""><li id="bd5a" class="js jt hi ju b jv lf jx lg jz lh kb li kd lj kf lk kh ki kj bi translated">一旦设置了目标变量，请点击“训练模型”。提供模型名称“irisdataset”。您可以将预算设置为“2”个最大节点小时。这可以确保您的模型构建过程不会被收取过高的费用。在功能选择列下，请取消选择“设置”功能，因为它与我们的目标变量无关，并且对目标变量没有任何影响。</li></ul><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/39bbee712cf1f66b70e8903cfd956807.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a4K9QEmYTz97tmhzK60zDg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">为模型训练设置配置</figcaption></figure><ul class=""><li id="e532" class="js jt hi ju b jv lf jx lg jz lh kb li kd lj kf lk kh ki kj bi translated">你会发现AutoML会自动选择机器学习模型。谷歌有多个深度学习模型，根据功能和目标变量，它会选择最适合的模型。(<strong class="ju hj">注:没有更改型号的选项。</strong>)</li></ul><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/86f28532382840415b316ef96c5a3a58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UnBxGAux73KfwYrI0cnsSg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">AutoML选择模型</figcaption></figure><ul class=""><li id="7b83" class="js jt hi ju b jv lf jx lg jz lh kb li kd lj kf lk kh ki kj bi translated">完成后，请点击“火车模型”。这将开始训练模型。培训过程需要时间。您无需等待培训过程，因为您将在完成模型培训过程后收到一封电子邮件。</li></ul><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/decc6318f773aab4107d6eeee2eb8abf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UsxSFdv2D0COXQlGzis1VQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">模特培训</figcaption></figure><ul class=""><li id="6f52" class="js jt hi ju b jv lf jx lg jz lh kb li kd lj kf lk kh ki kj bi translated">模型训练完成后，您将能够看到模型训练的详细信息。</li></ul><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lw"><img src="../Images/3206e5e82c8c1b098c504c56fe6acb96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fclo8cOr5SUHSmwgdZtYeA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">模型细节</figcaption></figure><ul class=""><li id="95fa" class="js jt hi ju b jv lf jx lg jz lh kb li kd lj kf lk kh ki kj bi translated">您可以通过访问“评估”选项卡查看模型评估的详细信息。</li></ul><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ls"><img src="../Images/156a693dd0600a4900db6a669a639aa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h7GQ3SNpfTy0oyL5uV7Q7g.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">模型评估详细信息</figcaption></figure><ul class=""><li id="a526" class="js jt hi ju b jv lf jx lg jz lh kb li kd lj kf lk kh ki kj bi translated">现在，我们已经准备好了我们的机器学习模型，我们将通过REST API在线部署它来进行预测。</li><li id="4cac" class="js jt hi ju b jv kk jx kl jz km kb kn kd ko kf lk kh ki kj bi translated">转到“测试和使用”选项卡，点击“在线预测”，如下所示。</li></ul><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ls"><img src="../Images/4c98bfeb83e458be84a73c792d80f4b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*74EJgiuWFeVYmdTs_7ovTg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">在线预测部署</figcaption></figure><ul class=""><li id="45f1" class="js jt hi ju b jv lf jx lg jz lh kb li kd lj kf lk kh ki kj bi translated">点击“部署模型”。系统将提示您进行确认，单击“部署”继续。</li></ul><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/263ea0a9417fa4254e7c88896577a2ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uh4NlRJbwNl8_7mI---IJg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">模型部署确认</figcaption></figure><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ly"><img src="../Images/aa682a86a55004538c150541db686366.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1AnGE2r2gr-f2U2abSonvQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">模型部署正在进行</figcaption></figure><ul class=""><li id="3bb5" class="js jt hi ju b jv lf jx lg jz lh kb li kd lj kf lk kh ki kj bi translated">一旦模型部署完成，模型将可用于在线预测。</li></ul><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/05586c97cd083a37d27bb2cf8bae6f3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JSxYjgPxHFT3gUEGMQk-mw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">为在线预测部署的模型。</figcaption></figure><ul class=""><li id="6658" class="js jt hi ju b jv lf jx lg jz lh kb li kd lj kf lk kh ki kj bi translated">GCP平台按模型部署时间对虚拟机收费。如果我们不用它来节省成本，我们可以删除该模型。这完成了我们的第二个目标，现在让我们继续使用REST API进行推理。</li><li id="75f5" class="js jt hi ju b jv kk jx kl jz km kb kn kd ko kf lk kh ki kj bi translated">你可以在下面的链接阅读更多关于训练汽车模型的信息:【https://cloud.google.com/automl-tables/docs/train T2】</li></ul><p id="3719" class="pw-post-body-paragraph kp kq hi ju b jv lf kr ks jx lg kt ku jz lt kw kx kb lu kz la kd lv lc ld kf hb bi translated"><strong class="ju hj">第三步:</strong></p><ul class=""><li id="9301" class="js jt hi ju b jv lf jx lg jz lh kb li kd lj kf lk kh ki kj bi translated">可以使用下面的API来访问REST API</li></ul><pre class="lm ln lo lp fd lz ma mb mc aw md bi"><span id="27ce" class="me iv hi ma b fi mf mg l mh mi">POST https://automl.googleapis.com/v1beta1/projects/&lt;&lt;projectid&gt;&gt;/locations/&lt;&lt;region_name&gt;&gt;/models/&lt;&lt;modelid&gt;&gt;:predict?access_token=&lt;&lt;access_token&gt;&gt;</span></pre><ul class=""><li id="1990" class="js jt hi ju b jv lf jx lg jz lh kb li kd lj kf lk kh ki kj bi translated">您可以通过访问model选项卡找到modelid。</li><li id="23ca" class="js jt hi ju b jv kk jx kl jz km kb kn kd ko kf lk kh ki kj bi translated">请看下面通过REST API推断模型的快照</li></ul><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mj"><img src="../Images/40ee24013954db994bb4dc2553a3be00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rk8XKaVPljOUdNRcbDXCNg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">REST API接口</figcaption></figure><ul class=""><li id="5191" class="js jt hi ju b jv lf jx lg jz lh kb li kd lj kf lk kh ki kj bi translated">这就完成了我们的第三个目标。(<strong class="ju hj">注意:如果您不打算继续使用模型部署，请将其删除，以节省成本。</strong>)</li><li id="a016" class="js jt hi ju b jv kk jx kl jz km kb kn kd ko kf lk kh ki kj bi translated">你可以通过下面的链接了解更多关于AutoML表格的信息:<a class="ae le" href="https://cloud.google.com/automl-tables/docs" rel="noopener ugc nofollow" target="_blank">https://cloud.google.com/automl-tables/docs</a></li><li id="05ee" class="js jt hi ju b jv kk jx kl jz km kb kn kd ko kf lk kh ki kj bi translated">如果有任何疑问，请提出意见，我很乐意回答。</li></ul></div></div>    
</body>
</html>