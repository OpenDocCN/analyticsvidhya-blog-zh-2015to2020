<html>
<head>
<title>Training custom Speech to Text model using CMU Sphinx4 — Part 1 — Setting up CMU Sphinx &amp; Environment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 CMU Sphinx4 训练自定义语音到文本模型—第 1 部分—设置 CMU Sphinx &amp;环境</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/training-custom-speech-to-text-model-using-cmu-sphinx4-part-1-setting-up-cmu-sphinx-c90123c9d7ac?source=collection_archive---------12-----------------------#2020-10-18">https://medium.com/analytics-vidhya/training-custom-speech-to-text-model-using-cmu-sphinx4-part-1-setting-up-cmu-sphinx-c90123c9d7ac?source=collection_archive---------12-----------------------#2020-10-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/66c4670f973e5bb34f4bf633f60b50ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/format:webp/1*ljrZAV5pkHl_8dGOEJQZeg.png"/></div></figure><p id="4161" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在本文中，我们将在我们的 Linux 系统上安装 CMU Sphinx。我们使用 Ubuntu 20.04 作为 Windows 子系统。</p><p id="6002" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这里有一些关于我们正在使用的发行版的细节。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es jk"><img src="../Images/42a05ff6ca399e39deae55dd49bca937.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b4xnbJYbSA2vxJQsuOS1bg.png"/></div></div></figure><p id="caad" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们将使用的大多数命令现在可能适用于您的版本，在这种情况下，请使用 google 或 StackOverflow 来查找替代的依赖项或包。</p><p id="92e3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们开始吧。😄</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="4710" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">要安装 CMU·斯芬克斯，我们需要在我们的系统上安装几个软件包。执行以下命令，这将减轻我们的工作负担:</p><pre class="jl jm jn jo fd ka kb kc kd aw ke bi"><span id="c509" class="kf kg hi kb b fi kh ki l kj kk">sudo apt-get install git gcc make automake autoconf libtool bison swig python-dev libpulse-dev subversion</span></pre><p id="4c8f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">上述命令可能会安装几个额外的软件包(大约需要 200 MB 的磁盘空间)。但是，请确保您已经安装了所有这些软件包，以便继续操作。⚠️</p><p id="bf73" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，让我们来建立 CMU 狮身人面像。狮身人面像与 CMU 狮身人面像、CMU 狮身人面像和 CMU 袖珍狮身人面像站在一起。为了能够使用所有这些包，<strong class="io hj"> <em class="kl">我们需要先安装 sphinx base</em></strong>。</p><p id="57c2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们在自己的主目录下做一个目录，从 Github 克隆 SphinxBase。</p><pre class="jl jm jn jo fd ka kb kc kd aw ke bi"><span id="ac4f" class="kf kg hi kb b fi kh ki l kj kk">mkdir sphinx_src<br/>cd sphinx_src<br/>pwd</span></pre><p id="a091" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">上述命令给出了以下输出。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es km"><img src="../Images/21502d00932241966c235a0cdc90259e.png" data-original-src="https://miro.medium.com/v2/resize:fit:682/format:webp/1*eyji-AvjdNSoktdJQVYTYQ.png"/></div></div></figure><p id="9993" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，让我们克隆 repo 并安装 SphinxBase。逐一运行以下命令。</p><pre class="jl jm jn jo fd ka kb kc kd aw ke bi"><span id="ebc1" class="kf kg hi kb b fi kh ki l kj kk">git clone <a class="ae kn" href="https://github.com/cmusphinx/sphinxbase.git" rel="noopener ugc nofollow" target="_blank">https://github.com/cmusphinx/sphinxbase.git</a></span><span id="880c" class="kf kg hi kb b fi ko ki l kj kk">cd sphinxbase</span><span id="5b1c" class="kf kg hi kb b fi ko ki l kj kk">./autogen.sh <!-- -->--disable-dependency-tracking</span><span id="8ce2" class="kf kg hi kb b fi ko ki l kj kk">make</span><span id="8faf" class="kf kg hi kb b fi ko ki l kj kk">sudo make install</span></pre><p id="c9d2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">当您运行以上命令时，您将在终端上得到大量输出。在验证 SphinxBase 是否安装正确之前，我们只需要再做一个小步骤。逐一运行以下命令:</p><pre class="jl jm jn jo fd ka kb kc kd aw ke bi"><span id="41da" class="kf kg hi kb b fi kh ki l kj kk">sudo nano /etc/ld.so.conf</span></pre><p id="7fca" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">它将打开一个文件。它已经有了下图所示的第一行。只需在第二行添加以下行。</p><pre class="jl jm jn jo fd ka kb kc kd aw ke bi"><span id="8454" class="kf kg hi kb b fi kh ki l kj kk">/usr/local/lib</span></pre><p id="baa4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">然后按<strong class="io hj"> CTRL+X </strong>，再按<strong class="io hj"> Y、</strong>和<strong class="io hj">进入</strong>。这将保存您的文件。如果再次运行 nano 命令，应该会看到以下内容。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es kp"><img src="../Images/800e6092f2eb39188c86dcca53245247.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_ZFqeFr0QSGbr1SruOHuOg.png"/></div></div></figure><p id="9aea" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，让我们验证 SphinxBase 是否安装正确。运行以下命令。</p><pre class="jl jm jn jo fd ka kb kc kd aw ke bi"><span id="d8cb" class="kf kg hi kb b fi kh ki l kj kk">sudo ldconfig</span><span id="c178" class="kf kg hi kb b fi ko ki l kj kk">sphinx_lm_convert</span></pre><p id="3d41" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您应该能够看到以下输出:</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es kq"><img src="../Images/d0fd0c047480f05b9ebb845aa8a833bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mtITJO3x9IyhePJ3MGHwRw.png"/></div></div></figure><p id="89ef" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果是这样，那太好了😃。我们迈出了重要的第一步。让我们快速安装 PocketSphinx &amp; SphinxTrain。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="8883" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们首先转到“sphinx_src”目录，然后克隆 PocketSphinx。</p><pre class="jl jm jn jo fd ka kb kc kd aw ke bi"><span id="e443" class="kf kg hi kb b fi kh ki l kj kk">git clone <a class="ae kn" href="https://github.com/cmusphinx/pocketsphinx.git" rel="noopener ugc nofollow" target="_blank">https://github.com/cmusphinx/pocketsphinx.git</a></span></pre><p id="e499" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">“sphinx_src”中现在应该有两个目录。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es kr"><img src="../Images/c2ac02a11bf6428c4e28b370c48a1568.png" data-original-src="https://miro.medium.com/v2/resize:fit:674/format:webp/1*3b5RoI3670acpgkUWdC54Q.png"/></div></div></figure><p id="90e1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，让我们执行与之前安装 PocketSphinx 时相同的一组命令。</p><pre class="jl jm jn jo fd ka kb kc kd aw ke bi"><span id="944d" class="kf kg hi kb b fi kh ki l kj kk">cd pocketsphinx</span><span id="ae5c" class="kf kg hi kb b fi ko ki l kj kk">./autogen.sh</span><span id="507a" class="kf kg hi kb b fi ko ki l kj kk">make</span><span id="5613" class="kf kg hi kb b fi ko ki l kj kk">sudo make install</span></pre><p id="737e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果一切顺利，在运行“pocketsphinx_continuous”时，应该能够看到下面的输出。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es ks"><img src="../Images/2378a7f142b6497f6d19c43e6e4e1b72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l1ey3UnzjQNMeFpTfI88Wg.png"/></div></div></figure><p id="ee28" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这不是完整的输出，但是是的，您应该能够看到类似的内容。</p><blockquote class="kt ku kv"><p id="9703" class="im in kl io b ip iq ir is it iu iv iw kw iy iz ja kx jc jd je ky jg jh ji jj hb bi translated">注意:如果您得到一个错误，它说:</p><p id="f901" class="im in kl io b ip iq ir is it iu iv iw kw iy iz ja kx jc jd je ky jg jh ji jj hb bi translated">"加载共享库时出错:libxerces-c-3.1.so:无法打开共享对象文件:没有这样的文件或目录"，</p><p id="8777" class="im in kl io b ip iq ir is it iu iv iw kw iy iz ja kx jc jd je ky jg jh ji jj hb bi translated">然后运行下面的命令，希望可以解决这个问题。否则，按照<a class="ae kn" href="https://stackoverflow.com/questions/4514997/error-loading-shared-libraries" rel="noopener ugc nofollow" target="_blank">这篇</a> stackoverflow 帖子。</p></blockquote><pre class="jl jm jn jo fd ka kb kc kd aw ke bi"><span id="12f8" class="kf kg hi kb b fi kh ki l kj kk">sudo cp /usr/local/lib/libpocketsphinx.* /usr/lib/</span></pre></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="8614" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在让我们安装 SphinxTrain。切换回“sphinx_src”目录并运行以下命令。</p><pre class="jl jm jn jo fd ka kb kc kd aw ke bi"><span id="77ad" class="kf kg hi kb b fi kh ki l kj kk">git clone <a class="ae kn" href="https://github.com/cmusphinx/sphinxtrain.git" rel="noopener ugc nofollow" target="_blank">https://github.com/cmusphinx/sphinxtrain.git</a></span><span id="e020" class="kf kg hi kb b fi ko ki l kj kk">cd sphinxtrain</span><span id="87b2" class="kf kg hi kb b fi ko ki l kj kk">./autogen.sh</span><span id="dbc8" class="kf kg hi kb b fi ko ki l kj kk">make</span><span id="4eeb" class="kf kg hi kb b fi ko ki l kj kk">sudo make install</span></pre><p id="1394" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">要验证 sphinxtrain 是否安装成功，请在终端中键入“SphinxTrain ”,您将看到以下输出。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es kz"><img src="../Images/280e15cd2eaab2ab011ddf29b1be0cef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RbIE9I_s7LLwB0qXidCULg.png"/></div></div></figure><p id="5fdc" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这就完成了我们 CMU 狮身人面像的搭建😋。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="816e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在让我们设置一些我们将来需要的附加包。</p><p id="6dcf" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">切换到“sphinx_src”目录，逐一运行以下命令:</p><pre class="jl jm jn jo fd ka kb kc kd aw ke bi"><span id="79b3" class="kf kg hi kb b fi kh ki l kj kk">svn checkout svn://svn.code.sf.net/p/cmusphinx/code/trunk cmusphinx-code</span><span id="ef92" class="kf kg hi kb b fi ko ki l kj kk">cd <!-- -->cmusphinx-code/cmuclmtk/</span><span id="3117" class="kf kg hi kb b fi ko ki l kj kk">./autogen.sh</span><span id="2a92" class="kf kg hi kb b fi ko ki l kj kk">make</span><span id="9f40" class="kf kg hi kb b fi ko ki l kj kk">sudo make install</span></pre><p id="f5ee" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果一切顺利，运行“text2idngram”时应该能看到下面的输出。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es la"><img src="../Images/7915c94b3cdef78a9f5e81ca83c3669f.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*J6DHeaF4PColus66kl5lHw.png"/></div></figure><blockquote class="kt ku kv"><p id="1bfd" class="im in kl io b ip iq ir is it iu iv iw kw iy iz ja kx jc jd je ky jg jh ji jj hb bi translated">注意:如果您得到一个错误，它说:</p><p id="5a79" class="im in kl io b ip iq ir is it iu iv iw kw iy iz ja kx jc jd je ky jg jh ji jj hb bi translated">"加载共享库时出错:libcmuclmtk.so.0:无法打开共享对象文件:没有这样的文件或目录"，</p><p id="de38" class="im in kl io b ip iq ir is it iu iv iw kw iy iz ja kx jc jd je ky jg jh ji jj hb bi translated">然后运行下面的命令，希望可以解决这个问题。</p></blockquote><pre class="jl jm jn jo fd ka kb kc kd aw ke bi"><span id="5489" class="kf kg hi kb b fi kh ki l kj kk">sudo cp /usr/local/lib/libcmuclmtk.* /usr/lib/</span></pre><p id="519b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这就完成了我们的设置。恭喜🎁</p><p id="1c3b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果你有任何问题，请联系我<a class="ae kn" href="mailto:inbox.praveen.kumar17@gmail.com" rel="noopener ugc nofollow" target="_blank">inbox.praveen.kumar17@gmail.com</a>或者你也可以在评论区写下。</p><p id="afbe" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果你喜欢这篇文章，请鼓掌👏！谢谢😃</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="d7c1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">下一步是什么？</p><p id="9fee" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">关于以下主题的一系列文章即将发表。</p><p id="55d8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">训练定制以及预训练声学模型。</p><p id="9bd6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">超参数调整参数，找到最适合您的音频数据集。</p><p id="0f91" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">使用 sphinx 配置实现最高精度。</p><p id="f4c1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">建立字典和自定义语言模型。</p></div></div>    
</body>
</html>