<html>
<head>
<title>Reverse Geocoding with GeoNames in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python中的地理名称进行反向地理编码</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/reverse-geocoding-with-geonames-in-python-3b5bb176a26c?source=collection_archive---------6-----------------------#2020-05-20">https://medium.com/analytics-vidhya/reverse-geocoding-with-geonames-in-python-3b5bb176a26c?source=collection_archive---------6-----------------------#2020-05-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="5787" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">如何从原始纬度/经度值获取位置名称</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/0c763b1776f3550479bb145cde31317b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OQ4qk-YBzcrcvX5-wWzbWg.jpeg"/></div></div></figure><h2 id="14e1" class="jj jk hi bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated">什么是反向地理编码？</h2><p id="2022" class="pw-post-body-paragraph kh ki hi kj b kk kl ij km kn ko im kp ju kq kr ks jy kt ku kv kc kw kx ky kz hb bi translated">查找给定纬度/经度对的地址或位置名称的过程。在许多与位置相关的数据科学应用中，它是一个重要的模块。</p><p id="13d7" class="pw-post-body-paragraph kh ki hi kj b kk la ij km kn lb im kp ju lc kr ks jy ld ku kv kc le kx ky kz hb bi translated">我试图找到一种方法来获得一组纬度/经度对的英文位置名称。我发现一些博客使用<a class="ae lf" href="https://nominatim.org/release-docs/develop/api/Overview/" rel="noopener ugc nofollow" target="_blank"> <strong class="kj hj">命名</strong> </a>，这也被<a class="ae lf" href="https://www.openstreetmap.org/" rel="noopener ugc nofollow" target="_blank"> OpenStreetMap </a> (OSM)用于地理编码和反向地理编码目的。但是，Nominatim返回本地语言的位置名称(例如，中国用中文，孟加拉国用孟加拉语等)。当然，你可以很容易地用python把它们翻译成英语，但是还有另外一种方法，使用<a class="ae lf" href="https://geopy.readthedocs.io/en/stable/#geonames" rel="noopener ugc nofollow" target="_blank"><strong class="kj hj">GeoNames</strong></a><strong class="kj hj"/>它是免费使用的，并且返回英语的位置名称。</p><p id="7a49" class="pw-post-body-paragraph kh ki hi kj b kk la ij km kn lb im kp ju lc kr ks jy ld ku kv kc le kx ky kz hb bi translated">在本教程中，我们将使用geopy库中的GeoNames类来执行反向地理编码。</p><h2 id="e401" class="jj jk hi bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated">安装库</h2><p id="2c49" class="pw-post-body-paragraph kh ki hi kj b kk kl ij km kn ko im kp ju kq kr ks jy kt ku kv kc kw kx ky kz hb bi translated">首先，我们需要用下面的命令从终端安装<a class="ae lf" href="https://geopy.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> <strong class="kj hj"> geopy </strong> </a>库。</p><pre class="iy iz ja jb fd lg lh li lj aw lk bi"><span id="93b6" class="jj jk hi lh b fi ll lm l ln lo">pip install geopy</span></pre><p id="3bdc" class="pw-post-body-paragraph kh ki hi kj b kk la ij km kn lb im kp ju lc kr ks jy ld ku kv kc le kx ky kz hb bi translated">现在，我们的编码部分开始。</p><h2 id="8409" class="jj jk hi bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated"><strong class="ak">导入类</strong></h2><p id="9aeb" class="pw-post-body-paragraph kh ki hi kj b kk kl ij km kn ko im kp ju kq kr ks jy kt ku kv kc kw kx ky kz hb bi translated">对于本教程，我们只需要导入一个类。</p><pre class="iy iz ja jb fd lg lh li lj aw lk bi"><span id="7616" class="jj jk hi lh b fi ll lm l ln lo">from geopy.geocoders import GeoNames</span></pre><h2 id="db65" class="jj jk hi bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated"><strong class="ak">初始化</strong></h2><p id="6aca" class="pw-post-body-paragraph kh ki hi kj b kk kl ij km kn ko im kp ju kq kr ks jy kt ku kv kc kw kx ky kz hb bi translated">为了初始化GeoNames，我们必须执行以下操作:<br/> 1 .在这里创建一个新的用户账户<a class="ae lf" href="https://www.geonames.org/login" rel="noopener ugc nofollow" target="_blank"/>。<br/> 2。在登录状态下，进入此<a class="ae lf" href="https://www.geonames.org/manageaccount" rel="noopener ugc nofollow" target="_blank">链接</a>激活免费网络服务。<br/> 3。点击页面下方的“点击此处启用”链接</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lp"><img src="../Images/182bf296eb7b0cfd7bd70b11d41e4b45.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*SqtHKhU4d2eC-9R0a34eWw.png"/></div></figure><p id="7da0" class="pw-post-body-paragraph kh ki hi kj b kk la ij km kn lb im kp ju lc kr ks jy ld ku kv kc le kx ky kz hb bi translated">因此，我们的帐户已经获得了GeoNames的免费网络服务。</p><p id="0032" class="pw-post-body-paragraph kh ki hi kj b kk la ij km kn lb im kp ju lc kr ks jy ld ku kv kc le kx ky kz hb bi translated">现在，我们通过提供我们的GeoNames帐户用户名代替“您的用户名”进行初始化，如下所示:</p><pre class="iy iz ja jb fd lg lh li lj aw lk bi"><span id="0f63" class="jj jk hi lh b fi ll lm l ln lo">geo = GeoNames(username=’your_username')</span></pre><h2 id="cc5c" class="jj jk hi bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated">查找位置名称</h2><p id="5bd8" class="pw-post-body-paragraph kh ki hi kj b kk kl ij km kn ko im kp ju kq kr ks jy kt ku kv kc kw kx ky kz hb bi translated">接下来，我们输入纬度、经度值来获取所需的位置信息。</p><pre class="iy iz ja jb fd lg lh li lj aw lk bi"><span id="3001" class="jj jk hi lh b fi ll lm l ln lo">latitude, longitude = 23.765328, 90.358641 #enter any value here<br/>location = geo.reverse(query=(latitude, longitude), exactly_one=False, timeout=5) <br/># timeout: Time, in seconds, to wait for the geocoding service to    # respond. In case of timeout error, increase it's value.</span></pre><p id="f51d" class="pw-post-body-paragraph kh ki hi kj b kk la ij km kn lb im kp ju lc kr ks jy ld ku kv kc le kx ky kz hb bi translated">上面的代码将返回一个列表类型的对象。我们可以执行以下操作来获取位置的名称:</p><pre class="iy iz ja jb fd lg lh li lj aw lk bi"><span id="f824" class="jj jk hi lh b fi ll lm l ln lo">location_name = location[0]</span></pre><p id="2ddf" class="pw-post-body-paragraph kh ki hi kj b kk la ij km kn lb im kp ju lc kr ks jy ld ku kv kc le kx ky kz hb bi translated">因此，只需几行代码，我们就可以获得特定地址的位置名称。</p><h2 id="ec66" class="jj jk hi bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated"><strong class="ak">免费数据来源</strong></h2><p id="7022" class="pw-post-body-paragraph kh ki hi kj b kk kl ij km kn ko im kp ju kq kr ks jy kt ku kv kc kw kx ky kz hb bi translated">GeoNames还开放了几个国家的<a class="ae lf" href="https://www.geonames.org/datasources/" rel="noopener ugc nofollow" target="_blank">数据源</a>。人们可以根据自己的需要轻松下载这些内容。</p><h2 id="cb40" class="jj jk hi bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated"><strong class="ak">限制</strong></h2><p id="d8a1" class="pw-post-body-paragraph kh ki hi kj b kk kl ij km kn ko im kp ju kq kr ks jy kt ku kv kc kw kx ky kz hb bi translated">尽管GeoNames对于一般用途是免费的，但它确实有一些限制。每个应用程序都有每小时和每天的限制(由用户名标识)。因此，使用一个用户名，我们可以执行一定数量的请求(函数调用)。对于<a class="ae lf" href="http://www.geonames.org/export/credits.html" rel="noopener ugc nofollow" target="_blank">反向地理编码</a>，我们可以在一小时内执行大约333个请求。如果你想用于<a class="ae lf" href="http://www.geonames.org/commercial-webservices.html" rel="noopener ugc nofollow" target="_blank">商业</a>目的，你也可以购买积分。但是对于小规模的项目，免费版本已经足够好了。</p><h2 id="9a49" class="jj jk hi bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated"><strong class="ak">结论</strong></h2><p id="1316" class="pw-post-body-paragraph kh ki hi kj b kk kl ij km kn ko im kp ju kq kr ks jy kt ku kv kc kw kx ky kz hb bi translated">我们现在可以很容易地从给定的纬度/经度对中找到我们想要的位置名称。为了便于使用，下面是最终代码。</p><pre class="iy iz ja jb fd lg lh li lj aw lk bi"><span id="76cd" class="jj jk hi lh b fi ll lm l ln lo"># import class<br/>from geopy.geocoders import GeoNames</span><span id="e467" class="jj jk hi lh b fi lq lm l ln lo"># initialize with your username<br/>geo = GeoNames(username=’your_username’)</span><span id="5520" class="jj jk hi lh b fi lq lm l ln lo"># get location information<br/>latitude, longitude = 23.765328, 90.358641 #enter your desired value<br/>location = geo.reverse(query=(latitude, longitude), exactly_one=False, timeout=5)</span><span id="2c26" class="jj jk hi lh b fi lq lm l ln lo"># get location name<br/>location_name = location[0]</span><span id="0eef" class="jj jk hi lh b fi lq lm l ln lo"># print location name<br/>print(location_name)</span></pre><p id="7cad" class="pw-post-body-paragraph kh ki hi kj b kk la ij km kn lb im kp ju lc kr ks jy ld ku kv kc le kx ky kz hb bi translated">希望这篇文章对你有帮助:)。</p><p id="8452" class="pw-post-body-paragraph kh ki hi kj b kk la ij km kn lb im kp ju lc kr ks jy ld ku kv kc le kx ky kz hb bi translated">万事如意！</p></div></div>    
</body>
</html>