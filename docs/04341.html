<html>
<head>
<title>Using Python to resize and get HEX color values from images</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python调整图像大小并获取十六进制颜色值</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/using-python-to-resize-and-get-hex-color-values-from-images-1abbad96b245?source=collection_archive---------8-----------------------#2020-03-15">https://medium.com/analytics-vidhya/using-python-to-resize-and-get-hex-color-values-from-images-1abbad96b245?source=collection_archive---------8-----------------------#2020-03-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/a0e7843cd3d7033ab91d9128b1417bee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h8_Kc-qKTBKWWvVC1ECNaA.png"/></div></div></figure><p id="0e38" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Python是迄今为止最容易使用的编程语言之一。编写函数是直观的，阅读代码本身也是如此。当处理图像时，我发现Python比NodeJS和PHP更容易使用。</p><h1 id="60d6" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">用例</h1><p id="a724" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">假设您正在构建一个类似于Unsplash的网站。用户从他们的DLSR相机上传10MB的图片到你的网站。在前端显示这些图像需要很大的页面负载。那么如何用Python来调整图像的大小呢？</p><ol class=""><li id="3b60" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">找到你的图像</li><li id="928d" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">作为图像打开</li><li id="b11d" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">调整保存大小</li></ol><p id="e121" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">依赖关系<br/>-web color:<a class="ae lf" href="https://pypi.org/project/webcolors/" rel="noopener ugc nofollow" target="_blank">【https://pypi.org/project/webcolors/】<br/>-python-resize-image:【https://pypi.org/project/python-resize-image/】</a><br/><a class="ae lf" href="https://pypi.org/project/python-resize-image/" rel="noopener ugc nofollow" target="_blank">-color thief</a><a class="ae lf" href="https://github.com/fengsp/color-thief-py" rel="noopener ugc nofollow" target="_blank">https://github.com/fengsp/color-thief-py</a></p><h1 id="2720" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">安装依赖项</h1><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="ab1e" class="lp jp hi ll b fi lq lr l ls lt">pip3 install webcolors python-resize-image colorthief</span></pre><h1 id="cc83" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">调整图像大小</h1><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="6d7c" class="lp jp hi ll b fi lq lr l ls lt">from resizeimage import resizeimage <br/>from PIL import Image</span><span id="5403" class="lp jp hi ll b fi lu lr l ls lt">image_path = './dog.jpeg'<br/>new_max_width = 1800<br/>new_filename = './dog-1800.jpeg'</span><span id="0c99" class="lp jp hi ll b fi lu lr l ls lt">with open(image_path, 'r+b') as f:<br/>  with Image.open(f) as image:<br/>  # Resize<br/>  smaller_image = resizeimage.resize_width(image, new_max_width)<br/>  smaller_image.save(new_filename, image.format)</span></pre><p id="986c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您的图像需要以字节形式打开并且可读。<strong class="is hj"> image.format </strong>将图像重新保存为正确的类型(dog.jpeg保存为jpeg)。如果你运行上面的代码，你只是调整了图像的大小。高度根据宽度自动计算，保持比例。PIL包代表“枕头”，安装了“python-resize-image”。枕头是处理图像的终极套装。一种快速获取当前高度和宽度以及其他元数据的方法。</p><p id="1c67" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">打开同样的<strong class="is hj">(image _ path，' r+b') </strong>使用ColorThief找到一个调色板。</p><h1 id="11b4" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">从图像中获取十六进制颜色值</h1><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="310b" class="lp jp hi ll b fi lq lr l ls lt">from resizeimage import resizeimage<br/>from PIL import Image<br/>import webcolors<br/>from colorthief import ColorThief</span><span id="df16" class="lp jp hi ll b fi lu lr l ls lt">image_path = './dog.jpeg'<br/>new_max_width = 1800<br/>new_filename = './dog-1800.jpeg'</span><span id="722f" class="lp jp hi ll b fi lu lr l ls lt">image_colors = []</span><span id="62e4" class="lp jp hi ll b fi lu lr l ls lt">with open(image_path, 'r+b') as f:<br/>  with Image.open(f) as image:<br/>        # Resize<br/>        smaller_image = resizeimage.resize_width(image, max_width)<br/>        smaller_image.save(new_image_path, image.format)</span><span id="0bfb" class="lp jp hi ll b fi lu lr l ls lt">        # Get Colors<br/>        color_thief = ColorThief(new_image_path)<br/>        color_palette = color_thief.get_palette(color_count=10, quality=10)<br/>        for color in color_palette:<br/>            print(webcolors.rgb_to_hex(color))</span></pre><p id="f8f3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">color_palette =返回RGB值的数组元组，然后，webcolors.rgb_to_hex将每个元组转换为十六进制值。</p><h2 id="697b" class="lp jp hi bd jq lv lw lx ju ly lz ma jy jb mb mc kc jf md me kg jj mf mg kk mh bi translated">例子</h2><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="d917" class="lp jp hi ll b fi lq lr l ls lt">&gt;&gt;&gt; import webcolors<br/>&gt;&gt;&gt; webcolors.rgb_to_hex((255, 255, 255))<br/>u'#ffffff'</span></pre><p id="8649" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">按名称获取颜色</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="d827" class="lp jp hi ll b fi lq lr l ls lt">&gt;&gt;&gt; import webcolors<br/>&gt;&gt;&gt; webcolors.rgb_to_name((255, 255, 255))<br/>u'white'</span></pre><p id="9b27" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">样本代码—<a class="ae lf" href="https://github.com/terrillo/learn-python" rel="noopener ugc nofollow" target="_blank">https://github.com/terrillo/learn-python</a></p><p id="7699" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">YouTube视频—<a class="ae lf" href="https://youtu.be/modMAADs71w" rel="noopener ugc nofollow" target="_blank">https://youtu.be/modMAADs71w</a></p></div></div>    
</body>
</html>