# 在 Heroku 上部署 Django 应用程序

> 原文：<https://medium.com/analytics-vidhya/deploying-django-apps-on-heroku-9ba204f67e38?source=collection_archive---------17----------------------->

![](img/ea07fee3854b8f6c1c3ccd0bdd7deaed.png)

嗨，读者们，我相信你们做得很好。我又看到了另一篇关于在 Heroku 上部署 Django 网站的文章。部署是网站的一个非常重要的部分，如果不小心进行的话会很累。在本文中，我们将学习在 Heroku 上部署一个 django 网站，让我们开始吧。

我将部署我创建的 todo_list 站点。你可以使用你自己的站点或者克隆我的 todo_list 项目。这里是[链接](https://github.com/4k45hv3rm4/Todo_list)

**安装虚拟环境:-**

virtualenv 是一个工具，用于创建隔离的 Python 环境，使我们的项目配置与系统和其他项目隔离开来。您可以在 windows 中使用下面的命令安装它。

```
pip install virtualenv
```

**安装 git:——**git 是一个版本控制系统，可以快速高效地处理大型和小型项目。我们会要求它把密码发送给 heroku。

使用这个[链接](https://git-scm.com/download/win)在 windows 中下载 git

下载后，在命令提示符下使用以下命令检查它是否正确安装。

```
git --version
git version 1.7.7.3  #would return something like this
```

现在，要在 heroku 上部署我们的应用程序，我们需要一个 heroku 帐户，

让我们创建一个，转到[链接](https://signup.heroku.com/)为自己创建一个新的 heroku 帐户并安装 heroku CLI。

**登录 heroku CLI**

heroku CLI 安装完成后，进入您的终端或命令提示符并运行

```
heroku login
```

上面的命令将提示你输入你的 heroku 证书，如电子邮件和密码，并允许你登录到你的 heroku 个人资料。

现在转到你的项目根目录，将项目复制到系统中的另一个目录，并使用下面的 virtualenv 命令创建一个虚拟环境

```
python -m venv env #create virtualenv env
env\Scripts\activate #activate virtualenv env
```

或者，如果您已经从 github link 克隆了项目，那么也要围绕它创建一个虚拟环境。

安装其他包或库，如果你有其他包，如 requests，Pillow 等，使用下面的命令安装它

```
pip install package_name
```

一旦安装了所有的包，我们必须更新 purr requirements.txt 文件

在终端中运行以下命令，

```
pip freeze>requirements.txt
```

这将在我们的根项目文件夹中添加更新的 requirements.txt 文件和包名，因为 heroku 将使用该文件来识别包需求。

现在快跑

```
python manage.py runserver 
```

这将在本地环境中成功运行我们的项目，如果您遇到任何错误，说数据库中没有表，这可能是由于迁移，您可以在这里运行迁移，或者直接在 heroku bash 中运行迁移，我们稍后会这样做，我建议稍后再做，以避免一些冲突。

**制作 Procfile :-** 这个文件用于显式声明应用程序的进程类型和入口点。它必须位于您的存储库或项目文件夹的根目录中。

在您的根项目文件夹中，创建一个名为 Procfile 的文件(名称完全相同)

```
Procfileweb: gunicorn myproject_name.wsgi 
```

**安装 guni corn:——**这改进了我们的部署流程，使其快速高效。使用以下命令安装 gunicorn

```
pip install gunicorn
```

**安装**[**django-heroku**](https://github.com/heroku/django-heroku)**:—**[Django-Heroku](https://github.com/heroku/django-heroku)包自动配置您的 Django 应用程序在 Heroku 上工作。

```
#installing django-heroku
pip install django-heroku
```

将 django_heroku 添加到 settings.py 文件

```
#settings.pyimport django_heroku # at the top...
...
..
# Activate Django-Heroku.
django_heroku.settings(locals())   #at bottom of settings.py file
```

创建 heroku 应用程序

```
heroku create app_name ## creating heroku app ....#Terminal will be seen with something like this 
Creating app... done, ⬢ app_name
https://git.heroku.com/app_name.git 
```

一旦以上事情完成，我们需要添加一个远程 git repo 到我们的 heroku 应用程序，我们可以使用以下命令。

```
heroku git:remote -a app_name 
#Terminal will be seen with something like this
set git remote heroku to https://git.heroku.com/app_name.git
```

将您的代码文件添加到远程 github 存储库中，

你可以用。gitnore 文件，以自动从临时区域删除不需要的文件

```
git status  #to check which files have been staged 
git add -A # to add all  code files at once
git commit -m "initial message" # to commit code files to remote repository . 
```

代码文件提交完成后，使用以下命令推送代码

```
git push heroku master
#Terminal will be seen with something like this 
...
...
Initializing repository, done.
updating 'refs/heads/master'
...
once this is complete you can got to the your app link generated by heroku and see your site live. 
```

如果您的站点中没有用户表或会话表错误，那是因为我们没有迁移数据库，您需要迁移数据库。

在命令行运行中

```
heroku run bash 
```

这将打开一个 python 运行时，就像我们在本地 django orm 中一样，使用它将模型文件迁移到数据库。

```
python manage.py makemigrations app_name 
python manage.py migrate 
```

现在去你的网站，这必须完成，你会看到你的网站生活

感谢你阅读这篇文章，我希望你发现它有用，请在评论区告诉我，如果你喜欢它，请鼓掌。快乐编码。