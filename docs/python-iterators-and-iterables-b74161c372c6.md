# Python è¿­ä»£å™¨å’Œå¯è¿­ä»£å¯¹è±¡

> åŸæ–‡ï¼š<https://medium.com/analytics-vidhya/python-iterators-and-iterables-b74161c372c6?source=collection_archive---------14----------------------->

![](img/e28d03abc52bee354b002f95c5316834.png)

For å¾ªç¯å’Œ Comprehensions ç”¨äºéå†ä¸€ä¸ªæº(åˆ—è¡¨ã€å­—å…¸æˆ–é›†åˆ)ï¼Œä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æŒ‘é€‰é¡¹ç›®å¹¶å¯¹å…¶æ‰§è¡Œä¸€äº›æ“ä½œã€‚ä½†æ˜¯æœ‰æ—¶éœ€è¦æ›´ç»†ç²’åº¦çš„æ§åˆ¶ã€‚æœ‰ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œå¤§é‡çš„ Python è¯­è¨€è¡Œä¸ºéƒ½æ˜¯åŸºäºè¿™ä¸¤ä¸ªæ¦‚å¿µæ„å»ºçš„ã€‚è¿™äº›æ˜¯å¯è¿­ä»£å¯¹è±¡å’Œè¿­ä»£å™¨å¯¹è±¡ã€‚åŸºæœ¬ä¸Šï¼Œå¯è¿­ä»£å¯¹è±¡æ˜¯é‚£äº›å¯ä»¥å¾ªç¯çš„å¯¹è±¡ã€‚ç¤ºä¾‹åŒ…æ‹¬åˆ—è¡¨ã€å­—ç¬¦ä¸²å’Œå…ƒç»„ã€‚

ä½¿ç”¨å†…ç½®çš„ **iter()** å‡½æ•°å°†å¯è¿­ä»£å¯¹è±¡è½¬æ¢ä¸ºè¿­ä»£å™¨å¯¹è±¡ã€‚

```
iterator = iter(iterable)
```

è¿­ä»£å™¨å¯¹è±¡å¯ä»¥ä¼ é€’ç»™å†…ç½®çš„ **next()** å‡½æ•°æ¥è·å–ä¸‹ä¸€é¡¹ã€‚

```
item = next(iterator)
```

æˆ‘ä»¬å¯ä»¥é€šè¿‡ Python REPL çš„ä¸€ä¸ªç®€å•ä¾‹å­æ¥ç†è§£è¿™ä¸€ç‚¹ã€‚

![](img/daf29c89e5fa675cc6d56b5693f4f03f.png)

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªåˆ—è¡¨ï¼Œå®ƒæ˜¯ä¸€ä¸ª iterable å¯¹è±¡ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è¿™ä¸ªåˆ—è¡¨ä¼ é€’ç»™å†…ç½®çš„ **iter()** å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ç»™äº†æˆ‘ä»¬ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ **next()** å‡½æ•°æ¥éå†è¿™ä¸ªè¿­ä»£å™¨å¯¹è±¡ã€‚æ¯æ¬¡è°ƒç”¨ next()å‡½æ•°æ—¶ï¼Œå®ƒéƒ½ä¼šä»ç¬¬ä¸€é¡¹å¼€å§‹ç»™å‡ºåˆ—è¡¨ä¸­çš„ä¸‹ä¸€é¡¹ã€‚æ³¨æ„ï¼Œå½“æˆ‘ä»¬åœ¨è¿­ä»£å®Œæ‰€æœ‰é¡¹ç›®åè°ƒç”¨ next()å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ª **StopIteration** å¼‚å¸¸ã€‚

åœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°æˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ª iterable å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’ç»™ä¸€ä¸ªæ–¹æ³•ã€‚

```
def first(iterable):
    iterator = iter(iterable)
    try:
        return next(iterator)
    except StopIteration:
        raise ValueError("iterable is empty")print(first(["1st", "2nd", "3rd"]))
print(first({"1st", "2nd", "3rd"}))
print(first(set()))
```

åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œä¸€ä¸ªåˆ—è¡¨æˆ–é›†åˆçš„ iterable è¢«ä¼ é€’ç»™ **first()** æ–¹æ³•ã€‚å› ä¸ºæ¯æ¬¡ç”¨æ–°çš„ iterable å¯¹è±¡è°ƒç”¨ first()æ–¹æ³•æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ iterator å¯¹è±¡ã€‚åœ¨ try å—ä¸­ï¼Œå¯¹è¿™ä¸ª iterator å¯¹è±¡è°ƒç”¨ next()æ–¹æ³•ï¼Œå®ƒæ€»æ˜¯è¿”å› iterable(åˆ—è¡¨ã€é›†åˆç­‰)ä¸­çš„ç¬¬ä¸€é¡¹ã€‚)å¯¹è±¡ã€‚ä¸Šé¢ä»£ç çš„è¾“å‡ºæ˜¯ï¼Œ

```
1st
2nd
Traceback (most recent call last):
File "iterator.py", line 4, in first
return next(iterator)
StopIterationDuring handling of the above exception, another exception occurred:Traceback (most recent call last):
File "iterator.py", line 10, in <module>
print(first(set()))
File "iterator.py", line 6, in first
raise ValueError("iterable is empty")
ValueError: iterable is empty
```

å› ä¸ºåœ¨æœ€åä¸€æ¬¡è°ƒç”¨ä¸­ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªç©ºé›†ä¼ é€’ç»™äº† first()å‡½æ•°ï¼Œå®ƒå¼•å‘äº†ä¸€ä¸ª **StopIteration** å¼‚å¸¸ï¼Œè¯¥å¼‚å¸¸åœ¨ except å—ä¸­å¤„ç†ã€‚å®ƒä¼šå¼•å‘ ValueError å¹¶æ‰“å°é”™è¯¯æ¶ˆæ¯ã€‚

æ³¨æ„ï¼Œè¯¸å¦‚ for å¾ªç¯å’Œ comprehensions ä¹‹ç±»çš„é«˜çº§ç»“æ„æ˜¯ç›´æ¥å»ºç«‹åœ¨è¿™ä¸ªä½çº§è¿­ä»£åè®®ä¹‹ä¸Šçš„ã€‚

æ„Ÿè°¢é˜…è¯»ğŸ˜Š