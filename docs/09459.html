<html>
<head>
<title>Custom metrics for Keras/TensorFlow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Keras/TensorFlow的自定义指标</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/custom-metrics-for-keras-tensorflow-ae7036654e05?source=collection_archive---------2-----------------------#2020-09-07">https://medium.com/analytics-vidhya/custom-metrics-for-keras-tensorflow-ae7036654e05?source=collection_archive---------2-----------------------#2020-09-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/4ceffc6ae0e6637a13395fdd2630e07c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4dvUTLbWnSNfRU-c46xkLw.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">克里斯里德在<a class="ae iu" href="https://unsplash.com/s/photos/code?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="681a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最近，我发表了一篇关于二进制分类度量的文章，你可以在这里查看<a class="ae iu" rel="noopener" href="/analytics-vidhya/what-nobody-tells-you-about-binary-classification-metrics-4998574b668"/>。这篇文章简要解释了最传统的指标，并介绍了不太有名的指标，如NPV、特异性和MCC。如果您不知道其中的一些指标，可以看看这篇文章。看书只要7分钟。我相信这对你会有用的。</p><p id="d740" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这篇文章中，我决定分享深度学习框架的这些指标的实现。它包括<strong class="ix hj">召回率、精确度、特异性、阴性预测值(NPV)、f1-得分和马修斯相关系数(MCC) </strong>。在Keras或TensorFlow v1/v2中都可以使用。</p><h1 id="7865" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">代码</h1><p id="7eb0" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">以下是所有指标的完整代码:</p><figure class="kw kx ky kz fd ij"><div class="bz dy l di"><div class="la lb l"/></div></figure><p id="0572" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">代码中几乎所有的指标都在前面提到的<a class="ae iu" rel="noopener" href="/analytics-vidhya/what-nobody-tells-you-about-binary-classification-metrics-4998574b668">文章</a>中有描述。因此，你可以在那里找到详细的解释。</p><h1 id="67b0" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">如何在Keras或TensorFlow中使用</h1><p id="5966" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">如果你使用Keras或者TensorFlow(尤其是v2)，使用这样的度量是相当容易的。这里有一个例子:</p><pre class="kw kx ky kz fd lc ld le lf aw lg bi"><span id="ce4f" class="lh ju hi ld b fi li lj l lk ll">model = ... # define you model as usual</span><span id="391f" class="lh ju hi ld b fi lm lj l lk ll">model.compile(<br/>    optimizer="adam", # you can use any other optimizer<br/>    loss='binary_crossentropy',<br/>    metrics=[<br/>        "accuracy",<br/>        precision,<br/>        recall,<br/>        f1,<br/>        fbeta,<br/>        specificity,<br/>        negative_predictive_value,<br/>        matthews_correlation_coefficient,<br/>        equal_error_rate<br/>    ]<br/>)</span><span id="7503" class="lh ju hi ld b fi lm lj l lk ll">model.fit(...) # train your model</span></pre><p id="45c6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如您所见，您可以一次计算所有的定制指标。请记住:</p><ul class=""><li id="f8e0" class="ln lo hi ix b iy iz jc jd jg lp jk lq jo lr js ls lt lu lv bi translated"><strong class="ix hj">由于它们是二进制分类指标，您只能在二进制分类问题中使用它们</strong>。也许你会有一些多类或回归问题的结果，但它们将是不正确的。</li><li id="1d42" class="ln lo hi ix b iy lw jc lx jg ly jk lz jo ma js ls lt lu lv bi translated"><strong class="ix hj">它们只能用作衡量标准。</strong>意思是你不能把它们当做损失。事实上，你的损失一定总是“<strong class="ix hj"> binary_crossentropy </strong>”，因为这是一个二进制分类问题。</li></ul><h1 id="cfd4" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">最后的话</h1><p id="5c0f" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">我希望你喜欢这篇文章。如果这对你也有帮助，请给点掌声👏👏。关注我在媒体上更多这样的职位。您也可以在以下位置查看我的作品:</p><ul class=""><li id="fdd9" class="ln lo hi ix b iy iz jc jd jg lp jk lq jo lr js ls lt lu lv bi translated"><a class="ae iu" href="https://github.com/arnaldog12" rel="noopener ugc nofollow" target="_blank"> Github </a></li><li id="d884" class="ln lo hi ix b iy lw jc lx jg ly jk lz jo ma js ls lt lu lv bi translated"><a class="ae iu" href="https://www.linkedin.com/in/arnaldo-gualberto/" rel="noopener ugc nofollow" target="_blank">领英</a></li><li id="54bf" class="ln lo hi ix b iy lw jc lx jg ly jk lz jo ma js ls lt lu lv bi translated"><a class="ae iu" href="http://www.arnaldogualberto.com/" rel="noopener ugc nofollow" target="_blank">个人网站</a></li></ul><figure class="kw kx ky kz fd ij er es paragraph-image"><div class="er es mb"><img src="../Images/11dbe24ef472fd228b1e66d4b178f76e.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/0*j0rhkF8I9hfedHAQ.png"/></div></figure></div></div>    
</body>
</html>