<html>
<head>
<title>Machine Learning and Data Analysis with Python, Titanic Dataset: Part 1, Visualization</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python进行机器学习和数据分析，泰坦尼克号数据集:第1部分，可视化</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/machine-learning-and-data-analysis-with-python-titanic-dataset-part-1-visualization-8a6e80732dd3?source=collection_archive---------7-----------------------#2020-02-14">https://medium.com/analytics-vidhya/machine-learning-and-data-analysis-with-python-titanic-dataset-part-1-visualization-8a6e80732dd3?source=collection_archive---------7-----------------------#2020-02-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7984" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每一个伟大的机器学习和数据科学项目都是从定义问题开始的:你必须处理哪些数据，你试图用这些数据实现什么？</p><p id="4ce8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，常见的第一步是通过可视化或描述性分析来探索数据。在教程的这一部分，我将带你了解如何理解数据，以预测谁在泰坦尼克号灾难中幸存，谁没有。我还制作了一个视频，所以如果你通过视频和音频指南学得更好，或者想听更多为什么采取每一步的理由，请随意跳到这篇文章的底部，你会看到视频的链接。</p><p id="7f6e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们开始吧！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/e1c309c81141294af361e3b73888544d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7YOzvBXiKexwLe6Ev98KjQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">数据集概述</figcaption></figure><p id="4709" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一步是弄清楚什么是我们的<em class="jt"> X </em>和<em class="jt"> y </em>，以及它们是如何关联的。<em class="jt"> X </em>包含了我们必须使用的特性。例如，在泰坦尼克号的数据集中，每个数据点都描述了一名乘客，它具有诸如姓名、年龄、性别、船舱号等特征。然后，这些特征由<em class="jt"> X </em>中的向量表示。<em class="jt"> X </em>基本上是所有乘客的这些特征向量的集合，然后形成一个矩阵。</p><p id="188b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对应于<em class="jt"> X </em>矩阵中的每个特征向量，有一个我们试图预测的标签。我们把这个标签叫做<em class="jt"> y </em>。来自所有向量的所有标签在<em class="jt"> X </em>中的聚集给了我们最终的向量<em class="jt"> y </em>。</p><p id="8d2d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了将这一点纳入泰坦尼克号示例的语义中，<em class="jt"> X </em>是由描述每个乘客的特征向量组成的矩阵，y是该乘客是否幸存的相应结果。由于结局只能是1(活了下来)和0(没活下来)，这就叫二进制分类问题。</p><p id="acb5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们试图发现的是<em class="jt"> X </em>中的什么特征对应于标签中的生存。当我们从上图看<em class="jt"> X </em>和特征描述时，我们有了这个特征<em class="jt">性别</em>。根据直觉，我们知道这将是一个非常重要的特征，因为泰坦尼克号上的大部分幸存者都是女性乘客。我们还有“Pclass”，其中1代表头等舱乘客，3代表三等舱乘客。这也是非常好的，因为来自更高阶层的人可能有更好的机会首先获救。我们已经有了一些具有良好预测能力的特性，现在让我们进入代码。在本教程的第0部分，我讲述了如何设置我们将要使用的环境，所以如果你没有一个可以工作的Jupyter笔记本环境，你可能想看看:</p><div class="ju jv ez fb jw jx"><a rel="noopener follow" target="_blank" href="/@qinchen.wang.personal/machine-learning-and-data-analysis-with-python-titanic-dataset-part-0-setting-up-94ba328ffeea"><div class="jy ab dw"><div class="jz ab ka cl cj kb"><h2 class="bd hj fi z dy kc ea eb kd ed ef hh bi translated">使用Python进行机器学习和数据分析，Titanic数据集:第0部分，设置</h2><div class="ke l"><h3 class="bd b fi z dy kc ea eb kd ed ef dx translated">这是用Python进行机器学习和数据分析系列的第0部分，以真实世界为例，泰坦尼克号…</h3></div><div class="kf l"><p class="bd b fp z dy kc ea eb kd ed ef dx translated">medium.com</p></div></div></div></a></div><p id="3689" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们将使用Pandas来读取从Kaggle下载的数据文件。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kg"><img src="../Images/cc4c5dd7eb5503cd43ba0eb59903f9e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OW8ZwnzlYq0lnM3wvfkG3w.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">读入训练数据</figcaption></figure><p id="5dec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">PD . read _ csv({您的文件目录})将. CSV文件作为熊猫数据帧读入。我们将把这个数据帧存储在一个名为<em class="jt"> df </em>的Python变量中。</p><p id="fb09" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们来看看幸存者和死者的分布情况:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kh"><img src="../Images/76e4ceb2f75347c09a85b2cee4ee4696.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4uQn66Pn_JWup1gtFvHwiw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">总存活分布</figcaption></figure><p id="83b8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">。value_counts()应用于列(技术术语是Pandas系列)时，是一个内置的Pandas方法，它返回系列中每个唯一值的频率。。plot(kind='bar ')将在条形图中显示此频率信息。</p><p id="764a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">仅仅知道存活与死亡的总体分布并不那么有趣。我们想知道哪些属性描述了幸存下来的人。例如，如果我们想看看男性和女性的生存分布。我们可以定义一个条件(你可能会听到人们称之为<em class="jt">掩码</em>)，比如df[" Sex "]= ' male '，它根据行中的性别条目是否满足条件，为数据帧中的每一行返回一个布尔值。如果我们使用这个条件对数据帧进行索引(在方括号中传递),我们将得到一个过滤后的数据帧，它只包含满足这个条件的行。因此当我们。value_counts()再次在列上显示仅男性或女性乘客的生存分布:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ki"><img src="../Images/15d85f13c0f58ef3a5c30a5b4df73ee7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zX4YfMDBYrlVniz8z3L6Pw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">男性生存分布</figcaption></figure><p id="b899" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">与总生存分布相比，男性乘客的生存比率较小。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kj"><img src="../Images/56c2ddccab9f1c4289afed1245ab3217.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s4LnLTUA9OXqYF4YRFhepg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">女性生存分布</figcaption></figure><p id="715a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">与总存活分布相比，存活比率(标签1)要大得多。它是死亡人口的两倍多，而在总分布中，死亡人数多于存活人数。</p><p id="6a90" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以用<em class="jt"> Pclass </em>做同样的事情。让我们先来看看这个<em class="jt"> Pclass </em>变量可以取什么值:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kk"><img src="../Images/ac2469353dc3ee84b0925ccc374cbe38.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/1*49o6-c7A3ozDl5FBGEHGvg.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">Pclass中每个值的频率</figcaption></figure><p id="1cc3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每一类的生存分布分别为:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kl"><img src="../Images/55146ce00257d14eff0b4dffe535bf35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*abZ1HPNuY0RxmEO_mBOnIA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">头等舱乘客的生存分布</figcaption></figure><p id="5b1d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">头等舱乘客生还的机会比死亡的机会大。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es km"><img src="../Images/c8b69176a4b045aa7c10f02409204f64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a9PKTbgonPVU90Up5G7iKQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">二等舱乘客的生存分布</figcaption></figure><p id="3c9e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于二等舱的乘客来说，这个比例稍差一些，但他们仍有相当大的生存机会。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kn"><img src="../Images/e26c4ffb469afa67d7abd9ba125be332.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bfdntPmBYMl-kYraJ9t0ng.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">三等舱乘客的生存分布</figcaption></figure><p id="af15" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于三等舱的乘客来说，这个比例看起来并不太高。</p><p id="ff04" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可能已经开始看到一种趋势:更高级别的女性乘客更倾向于生存。让我们通过使用带有AND的2条件来验证这一点。将每个条件放在一个括号中，并在括号之间放置<em class="jt"> &amp; </em>将过滤数据帧中同时满足两个条件的行:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ko"><img src="../Images/258b7a7689ed58da65f8a3a5639fb1ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T1nxzSH8U1HYmKsZ7kkrFQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">头等舱女性乘客的生存分布</figcaption></figure><p id="b73d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">向1的倾斜非常明显。所以从统计上来说，罗斯很有可能活下来。</p><p id="6945" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于这一点，让我们看看像杰克这样的乘客的生存统计数据:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kp"><img src="../Images/7e453258e7b03c7d785826de9cce54f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nQhagLKaZXQaeFahUe48Ew.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">不幸的是…</figcaption></figure><p id="00ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">图表是一种很好的表达技术，但是当你自己做分析时，也许你只想看数值。因此，从数字展示的角度来看，让我们看看使用我们刚刚学到的技术，S <em class="jt"> ex </em>和<em class="jt"> Pclass </em>的每种组合的存活几率:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kq"><img src="../Images/4861458b5b4463792b14efb8646ac2b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zPtgMmKnhCLKU-7cax4E9A.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">每个(性别，阶级)组合的生存机会</figcaption></figure><p id="2c84" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，在我们继续之前，我想给你指出一些已经盯着我们一段时间的东西:那些NaN条目是什么？</p><p id="0de7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些坏男孩代表的不是一个数字，而是我们所说的缺失数据。我们将不得不处理这些丢失的数据，因为许多模型不接受带有丢失值的数据。有两种方法可以解决这个问题:</p><ul class=""><li id="e71a" class="kr ks hi ih b ii ij im in iq kt iu ku iy kv jc kw kx ky kz bi translated">删除所有缺少值的行</li><li id="0892" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">将缺少的条目填入合理的值</li></ul><p id="d618" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们有100，000个数据点，并且只有10行缺少值，我们可以采用第一种方法。然而，泰坦尼克号数据集却不是这样。。dropna()将返回原始数据帧，其中只有没有丢失值的行:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lf"><img src="../Images/d9e27d39df82217b5c126fc1be2bf7c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yIPdI6PPEzfeiS7InQV3Sg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">用NaN删除行的效果</figcaption></figure><p id="74a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在df.dropna()之后，我们的大部分训练数据都没有了，这显然是不理想的，尤其是在这样一个小训练集的情况下。所以我们想采用第二种方法。</p><p id="6453" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们以<em class="jt">年龄</em>栏目为例。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lg"><img src="../Images/ecd03c2ceef9ff18d5b1aca9099783e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*_SmHq8bW3x9jWq133VCMqA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">年龄列中缺少值</figcaption></figure><p id="6cac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">天真的方法是用0填充所有这些值，但这实际上没有意义。对于第一次迭代，我们可以用一些平均值填充这些条目:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lh"><img src="../Images/76321868408a9bb550b344f2a4978da2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s0ltnN-dDgmZtkL7cpLtdQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">填写缺失的平均年龄值</figcaption></figure><p id="4fc5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">df.loc[{some condition}，{a column name}] =将把满足条件的数据帧中的行的特定列中的值设置为等式右侧的任何值。在这种情况下，我们将数据帧中所有缺少<em class="jt">年龄</em>条目且<em class="jt">性别</em>为男性的行的<em class="jt">年龄</em>列设置为所有未缺少<em class="jt">年龄</em>条目的男性乘客的平均年龄。女乘客也一样。</p><p id="364c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在特性列<em class="jt">年龄</em>中不会有任何缺失值。</p><p id="08ea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本系列的第2部分中，我将进行更多的预处理，然后继续构建基线模型。敬请关注！</p><p id="ac27" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在链接到几分钟前承诺的视频…</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="li lj l"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">关于我们上面讨论的更多细节</figcaption></figure></div></div>    
</body>
</html>