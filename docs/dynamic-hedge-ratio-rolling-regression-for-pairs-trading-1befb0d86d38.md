# 动态套期保值比率:配对交易的滚动回归

> 原文：<https://medium.com/analytics-vidhya/dynamic-hedge-ratio-rolling-regression-for-pairs-trading-1befb0d86d38?source=collection_archive---------4----------------------->

这篇讨论文章是“使用成对交易的[统计套利和回溯测试](/analytics-vidhya/statistical-arbitrage-with-pairs-trading-and-backtesting-ec657b25a368?source=friends_link&sk=467d90ba6c83d1e8e6e15716a52626e0)”的延续。

让我们回顾一下我们讨论过的内容:

a.分析了“金融服务”行业中 NSE 股票的历史数据，以确定共同整合的股票对，即一起变动的股票。

b.基于统计测试，确定了两只股票——巴罗达银行(BANKBARODA)和印度国家银行(SBIN)作为分析的合适候选股票。

c.根据 Pairs 交易的均值回复原则生成交易信号，并计算盈亏。

前一篇文章的重点是解释结对交易策略，并展示其工作原理。分析中的一个重要步骤，尽管当时还不太明显，是计算 SBI 银行和巴罗达银行的买卖股票数量的比率。在金融术语中，这个比率被称为对冲比率。套期保值比率的计算是使用一种简单的被证明有效的统计技术——OLS 线性回归分析来完成的。回归线的斜率是套期保值比率，它被假定为随时间保持不变。因此，无论何时产生交易信号，买入/卖出的两只股票的比率保持不变。换句话说，假设相关性的强度是时间的非演化函数。

本文对这一假设提出了挑战，并提出了套期保值比率计算的改进版本。看下面这两只股票的价格相关图，很明显，随着时间的推移，相关程度是不一样的。因此，恒定套期保值比率假设不成立。

![](img/0577daa886d29c6908174b8f7272022c.png)

一段时间内的资产价格和相关性

从逻辑上讲，我们的基本目标应该是每当产生交易信号时计算修正的套期保值比率。这将为我们提供作为时间函数的适当套期保值比率。

在我们做这个计算之前，让我们回到 OLS 线性回归模型，并试图了解我们可以在哪里以及如何做出这种改进。线性回归模型有两个参数——斜率(β)和截距(α),定义如下:

Y= β * X +α

其中，Y 和 X 是 SBI 和鲍勃的每日价格时间序列

在这种方法中，斜率和截距是使用 frequentist 方法计算的，并假设其随时间保持不变。在改进的模型中，我们希望考虑给定观测值的斜率和截距的变化。

这个概念是贝叶斯线性回归或滚动回归的中心思想。贝叶斯线性回归的目的不是找到模型参数的“单一最佳”值，而是基于任何给定点的观察值来确定模型参数的分布。这些观察值称为先验，模型参数分布称为后验分布。本文中使用的方法遵循 Stefan Jansen 和 Thomas Wiecki 的滚动回归示例。

让我们假设斜率和截距随时间随机移动，即，

![](img/68a118ad2f2658e83311dfd07d340508.png)

模型的超参数

此外，让我们假设上述分布的标准偏差，即σα和σβ遵循指数分布。

有了概率模型的这些规范(α和β的分布)，我们可以像前面那样定义回归线。根据贝叶斯概率模型，我们需要运行一个采样器来生成模型参数的后验分布。在当前的讨论中，我们使用了基于马尔可夫链蒙特卡罗(MCMC)采样过程的 NUTS 采样器(无 U 形转弯采样器)。

下图代表了我们的模型参数和假设:

![](img/574ad6048219de20e9a6525a9bf23289.png)

模型参数和假设

下图描述了截距系数和斜率系数多年来的变化，强调了不断发展的相关性:

![](img/980c2a8ff858d4c7fdccbc271077833b.png)

截距和斜率随时间的变化

下面的图结合了价格系列和回归线，用色调表示时间线。

![](img/6490617148bd682d71fed0fd220015dc.png)

随时间推移的回归线

Python 代码和分析过程的细节可以在 GitHub [链接](https://github.com/sabirjana/blog/tree/master/Bayesian_rolling_reg)找到。

*乘队* [*维马尔米什拉*](https://www.linkedin.com/in/vimal-mishra-2b28a4a/)[*萨比尔贾纳*](https://www.linkedin.com/in/sabirjana/)

参考:
1。[算法交易的机器学习:用 Python 从市场和替代数据中提取信号的预测模型，第二版](https://www.amazon.in/Machine-Learning-Algorithmic-Trading-alternative/dp/1839217715)作者 Stefan Jansen
2。滚动回归的例子托马斯·威茨基
3。贝叶斯线性回归简介[链接](https://towardsdatascience.com/introduction-to-bayesian-linear-regression-e66e60791ea7)