<html>
<head>
<title>Closures in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的闭包</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/javascript-closures-d27700d25c9f?source=collection_archive---------26-----------------------#2020-05-07">https://medium.com/analytics-vidhya/javascript-closures-d27700d25c9f?source=collection_archive---------26-----------------------#2020-05-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="5bac" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">对它们的功能和使用的简单而实用的介绍</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/b257ec18b9d793168315ef019d2a879d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MsFqZTTwyOW7y5SeDUwfiQ.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">奥斯卡·伊尔迪兹在<a class="ae jn" href="https://unsplash.com/s/photos/javascript?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="236e" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">什么是JavaScript闭包？</h1><p id="206b" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">MDN web文档给出了闭包的伟大定义:</p><blockquote class="lc ld le"><p id="b5ea" class="kg kh lf ki b kj lg ij kl km lh im ko li lj kr ks lk ll kv kw lm ln kz la lb hb bi translated">一个<strong class="ki hj">闭包</strong>是一个函数与对其周围状态的引用捆绑在一起(封闭)的组合<strong class="ki hj">词法环境</strong>。换句话说，闭包允许您从内部函数访问外部函数的范围。在JavaScript中，闭包是在每次创建函数时创建的。</p></blockquote></div><div class="ab cl lo lp gp lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="hb hc hd he hf"><h1 id="253c" class="jo jp hi bd jq jr lv jt ju jv lw jx jy io lx ip ka ir ly is kc iu lz iv ke kf bi translated">实际例子</h1><p id="b57d" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">这个例子来自我做的关于闭包的<a class="ae jn" href="https://link.medium.com/v40MQzHqh6" rel="noopener">这个</a>系列，但是使用了更简单的语法，对初学者更友好，并且做了一些改进，因为在系列中你必须简短:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ma mb l"/></div></figure><p id="b572" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated">在本例中，toString函数使用count变量，该变量在makeCounter函数中定义和初始化。这是因为toString可以访问makeCounter函数中定义的变量，因为toString是在makeCounter内部定义的。</p><p id="b7b6" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated">makeCounter函数也有一个返回语句，我们来分析一下:</p><ul class=""><li id="0e66" class="mc md hi ki b kj lg km lh kp me kt mf kx mg lb mh mi mj mk bi translated">它返回一个<a class="ae jn" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Working_with_Objects" rel="noopener ugc nofollow" target="_blank">对象文字</a></li><li id="7e15" class="mc md hi ki b kj ml km mm kp mn kt mo kx mp lb mh mi mj mk bi translated">对象有四个属性，事实证明它们都是函数(在JS中，函数是一级对象，所以变量、属性等等可以保存值、数组、对象，也可以保存函数)</li><li id="1676" class="mc md hi ki b kj ml km mm kp mn kt mo kx mp lb mh mi mj mk bi translated">这个函数还访问它们包含的函数变量count，最后一个函数访问makeCounter中定义的toString函数。</li></ul><p id="cf93" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated">需要注意的是<strong class="ki hj">没有人可以在不首先调用makeCounter】的情况下访问count变量和toString函数，这是访问它们的唯一方法。</strong></p><p id="f8d9" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated">在上面的例子中，我试图使用对初学者最友好的语法，因为如果你想学习一些关于闭包的知识，但是你是JavaScript新手，理解它的一些语法可能会很困难。无论如何，这是一个语法更短的相同示例:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ma mb l"/></div></figure></div><div class="ab cl lo lp gp lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="hb hc hd he hf"><h1 id="37b4" class="jo jp hi bd jq jr lv jt ju jv lw jx jy io lx ip ka ir ly is kc iu lz iv ke kf bi translated">播放-点击暂停</h1><p id="ecb9" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">有多少次你想让一个按钮<em class="lf">在被点击时暂停某件事的执行，并在再次被点击时继续执行</em>。这是一个闭包非常有助于实现这一点的例子，因为您可以<em class="lf">在事件处理程序中保存当前的播放状态</em>，而不必将其公开。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ma mb l"/></div></figure><p id="153e" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated">上面的代码实现了这一点:</p><ul class=""><li id="11b8" class="mc md hi ki b kj lg km lh kp me kt mf kx mg lb mh mi mj mk bi translated">播放状态保存在播放暂停功能中</li><li id="b8d4" class="mc md hi ki b kj ml km mm kp mn kt mo kx mp lb mh mi mj mk bi translated">函数实际上<strong class="ki hj">使用播放状态变量返回函数</strong></li><li id="145f" class="mc md hi ki b kj ml km mm kp mn kt mo kx mp lb mh mi mj mk bi translated">返回的函数是实际的onclick处理程序，它改变播放状态，播放和停止执行</li><li id="1009" class="mc md hi ki b kj ml km mm kp mn kt mo kx mp lb mh mi mj mk bi translated">当向我们的示例按钮添加onclick事件处理程序时，请注意playPause函数是被<strong class="ki hj">调用的</strong>，这是因为这些函数为实际的处理程序“设置”了基础(状态)，所以必须调用它才能返回实际的处理程序。</li></ul><p id="b010" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated">你可能想知道为什么我们不定义播放状态并在playPause函数中使用它，而不创建一个返回另一个函数的函数。这的确是个好问题，但如果我们做出这样的东西:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mq"><img src="../Images/f4b18fb18809a8291ff856afc2eef73a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K49x5jOeOwYrPi8LSwmyeg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">播放暂停按钮不起作用。</figcaption></figure><p id="c56b" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated">在这种情况下，我们每次点击按钮，它每次都会停止执行，并且永远不会恢复，因为每次调用事件处理程序时，播放值都会设置为true。</p></div><div class="ab cl lo lp gp lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="hb hc hd he hf"><h1 id="0c3e" class="jo jp hi bd jq jr lv jt ju jv lw jx jy io lx ip ka ir ly is kc iu lz iv ke kf bi translated">总结</h1><p id="466e" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">每当我们需要为某个变量、函数或任何东西创建一个“私有”范围时，当我们想要为一个函数“奠定基础”时(就像在play-pause示例中，我们初始化了状态，然后返回了实际的处理程序)，JS闭包会很有用，在其他许多情况下，我可能会在以后写。关于闭包要记住的重要事情可以总结为:</p><blockquote class="mr"><p id="0f91" class="ms mt hi bd mu mv mw mx my mz na lb dx translated">JS闭包允许您创建访问其封闭函数范围的函数。</p></blockquote><p id="282a" class="pw-post-body-paragraph kg kh hi ki b kj nb ij kl km nc im ko kp nd kr ks kt ne kv kw kx nf kz la lb hb bi translated">这篇文章的一个较短的版本可以作为一个中型系列<a class="ae jn" href="https://link.medium.com/v40MQzHqh6" rel="noopener">在这里</a>。</p></div><div class="ab cl lo lp gp lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="hb hc hd he hf"><h2 id="8523" class="ng jp hi bd jq nh ni nj ju nk nl nm jy kp nn no ka kt np nq kc kx nr ns ke nt bi translated">你可能也会喜欢</h2><div class="nu nv ez fb nw nx"><a href="https://medium.datadriveninvestor.com/arrow-functions-in-javascript-6817f46ea0c6" rel="noopener  ugc nofollow" target="_blank"><div class="ny ab dw"><div class="nz ab oa cl cj ob"><h2 class="bd hj fi z dy oc ea eb od ed ef hh bi translated">JavaScript中的箭头函数</h2><div class="oe l"><h3 class="bd b fi z dy oc ea eb od ed ef dx translated">像函数，但是更短…或多或少。让我们来了解一下！</h3></div><div class="of l"><p class="bd b fp z dy oc ea eb od ed ef dx translated">medium.datadriveninvestor.com</p></div></div><div class="og l"><div class="oh l oi oj ok og ol jh nx"/></div></div></a></div></div></div>    
</body>
</html>