<html>
<head>
<title>React Redux Explained</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React Redux 解释道</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/react-redux-explained-ce8a981f8629?source=collection_archive---------14-----------------------#2020-10-29">https://medium.com/analytics-vidhya/react-redux-explained-ce8a981f8629?source=collection_archive---------14-----------------------#2020-10-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/26d28f13a4da13d0707af4b62b7618b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wGaMoXB7dr83njDQjo3mHg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">反应还原</figcaption></figure><p id="48c9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi js translated">edux 是一个用 JavaScript 实现的状态管理库。此外，它可以被认为是一种全局方式的应用程序状态管理模式。它确保可预测的全局管理的应用程序状态。</p><blockquote class="kb kc kd"><p id="6c4e" class="iu iv ke iw b ix iy iz ja jb jc jd je kf jg jh ji kg jk jl jm kh jo jp jq jr hb bi translated">" Redux 不仅仅适用于 JavaScript . "</p></blockquote><p id="e5a8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">Redux 兼容 React、Angular、vanilla JavaScript 应用程序。但是将 Redux 与 React 一起使用有一个特殊的优势，因为它允许将用户界面(ui)实现为函数。在现代 React 应用程序中，有两种组件类型。</p><ul class=""><li id="4273" class="ki kj hi iw b ix iy jb jc jf kk jj kl jn km jr kn ko kp kq bi translated">表象成分</li><li id="952a" class="ki kj hi iw b ix kr jb ks jf kt jj ku jn kv jr kn ko kp kq bi translated">容器组件。</li></ul><p id="a789" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">由于表示组件从容器组件获得状态信息，所以我们对容器组件使用 Redux。容器组件中的状态与 redux 存储连接。</p><p id="5d69" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在深入了解 Redux 的细节之前，需要理解以下主要概念。</p><p id="ca0b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">1.单个<strong class="iw hj">存储</strong>用于保存与应用程序相关的所有状态。</p><p id="770f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">2.要修改状态:</p><p id="21a5" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">a.<strong class="iw hj">行动</strong>应派遣到商店。</p><p id="dce9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">b.然后<strong class="iw hj"> REDUCER </strong>应该根据动作中包含的类型和其他值更新状态。</p><p id="d41c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">3.要使用新状态，需要订阅(这是通过<strong class="iw hj">回调函数</strong>实现的)。</p><p id="3969" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">因此，让我们进入与 Redux 实现相关的解释。</p></div><div class="ab cl kw kx gp ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="hb hc hd he hf"><h2 id="8b5d" class="ld le hi bd lf lg lh li lj lk ll lm ln jf lo lp lq jj lr ls lt jn lu lv lw lx bi translated"><strong class="ak">动作</strong></h2><p id="508b" class="pw-post-body-paragraph iu iv hi iw b ix ly iz ja jb lz jd je jf ma jh ji jj mb jl jm jn mc jp jq jr hb bi translated">Action 描述应该如何更新商店。这是一个物体。动作有两个特征，</p><ul class=""><li id="9a83" class="ki kj hi iw b ix iy jb jc jf kk jj kl jn km jr kn ko kp kq bi translated">类型:</li><li id="781e" class="ki kj hi iw b ix kr jb ks jf kt jj ku jn kv jr kn ko kp kq bi translated">其他属性(有效负载):</li></ul></div><div class="ab cl kw kx gp ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="hb hc hd he hf"><h2 id="a11d" class="ld le hi bd lf lg lh li lj lk ll lm ln jf lo lp lq jj lr ls lt jn lu lv lw lx bi translated">还原剂</h2><p id="d27a" class="pw-post-body-paragraph iu iv hi iw b ix ly iz ja jb lz jd je jf ma jh ji jj mb jl jm jn mc jp jq jr hb bi translated">减速器是功能。他们根据动作提供的细节更新商店。Flux 架构(REDUX 继承自 FLUX)支持不可变状态。因此，reducers 采用两个参数。第一个参数与当前状态相关，第二个参数是调度的操作。</p><ul class=""><li id="a5b1" class="ki kj hi iw b ix iy jb jc jf kk jj kl jn km jr kn ko kp kq bi translated"><strong class="iw hj">状态:</strong>状态可以是任何东西。它也可以是一个对象。</li><li id="525a" class="ki kj hi iw b ix kr jb ks jf kt jj ku jn kv jr kn ko kp kq bi translated"><strong class="iw hj">动作:</strong>如上所述，这是一个对象。</li></ul><p id="67b1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">成功插入上述两个参数将返回新状态。</p><pre class="md me mf mg fd mh mi mj mk aw ml bi"><span id="f871" class="ld le hi mi b fi mm mn l mo mp">Const reducerName = (state = initialStateValue, actionPassed){</span><span id="acc6" class="ld le hi mi b fi mq mn l mo mp">Switch (actionPassed.actionType){</span><span id="9725" class="ld le hi mi b fi mq mn l mo mp">case condition1:</span><span id="1b10" class="ld le hi mi b fi mq mn l mo mp">return (actionToBePerformedBasedOnCase1)</span><span id="f9bc" class="ld le hi mi b fi mq mn l mo mp">case condition2:</span><span id="6c67" class="ld le hi mi b fi mq mn l mo mp">return (actionToBePerformedBasedOnCase2)</span><span id="c508" class="ld le hi mi b fi mq mn l mo mp">default:</span><span id="6da7" class="ld le hi mi b fi mq mn l mo mp">return (actionToBePerformedBasedUnknownActionValue)</span><span id="4199" class="ld le hi mi b fi mq mn l mo mp">}</span><span id="6582" class="ld le hi mi b fi mq mn l mo mp">}</span></pre></div><div class="ab cl kw kx gp ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="hb hc hd he hf"><h2 id="3065" class="ld le hi bd lf lg lh li lj lk ll lm ln jf lo lp lq jj lr ls lt jn lu lv lw lx bi translated">商店</h2><p id="e8e6" class="pw-post-body-paragraph iu iv hi iw b ix ly iz ja jb lz jd je jf ma jh ji jj mb jl jm jn mc jp jq jr hb bi translated">存储以全局方式保存整个应用程序的状态。如上所述，store 调度动作来改变/变更状态。订阅者可以收到有关状态更改的通知。此外，Redux 中还有检索整个状态树的功能。</p><pre class="md me mf mg fd mh mi mj mk aw ml bi"><span id="e3ee" class="ld le hi mi b fi mm mn l mo mp">import { createStore } from ‘redux’;<br/>let store = createStore(nameOfTheCreatedReducer);</span></pre><p id="413b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">然后您需要使用 Redux Store 来启用您的应用程序。为此，您需要将主应用程序组件包装在提供者组件中，如下所示。以前创建的商店需要被传递到提供者的商店道具中。</p><pre class="md me mf mg fd mh mi mj mk aw ml bi"><span id="433e" class="ld le hi mi b fi mm mn l mo mp">render(<br/>     &lt;Provider store={store}&gt;</span><span id="8765" class="ld le hi mi b fi mq mn l mo mp">        &lt;App /&gt;</span><span id="c256" class="ld le hi mi b fi mq mn l mo mp">     &lt;/Provider&gt;,</span><span id="920f" class="ld le hi mi b fi mq mn l mo mp"> document.getElementById(‘root’)</span><span id="4cab" class="ld le hi mi b fi mq mn l mo mp">);</span></pre></div><div class="ab cl kw kx gp ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="hb hc hd he hf"><p id="a315" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">那么为了从 React Redux 获得真正的功能，connect 函数应该使用。这将容器组件添加到 Redux 存储中。然后，它可以在整个应用程序中使用 Redux 存储中定义的状态。</p><p id="0622" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">但是在此之前，我们需要定义 connect 函数所需的两个参数。那些是<strong class="iw hj"> mapStateToProps </strong>和<strong class="iw hj"> mapDispatchProps。</strong></p><h2 id="2f75" class="ld le hi bd lf lg lh li lj lk ll lm ln jf lo lp lq jj lr ls lt jn lu lv lw lx bi translated"><strong class="ak"> mapStateToProps </strong></h2><p id="ed9e" class="pw-post-body-paragraph iu iv hi iw b ix ly iz ja jb lz jd je jf ma jh ji jj mb jl jm jn mc jp jq jr hb bi translated">它将 Redux 商店的状态映射到应用程序中使用的道具。实际上，这些道具是通过容器组件在应用程序中向下游传递的。简单地说，mapStaesToProps 将 Redux 存储中定义的状态与我们在应用程序中使用的状态进行映射。</p><pre class="md me mf mg fd mh mi mj mk aw ml bi"><span id="ab7e" class="ld le hi mi b fi mm mn l mo mp">const mapStateToProps = state =&gt; {<br/>    return ({<br/>       propOne : state.valueRelevantToProp1,<br/>       propTwo : state.valueRelevantToProp2,<br/>    });<br/>}</span></pre><p id="0ca2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">然后我们可以创建启用 Redux 的容器组件，如下所示，</p><pre class="md me mf mg fd mh mi mj mk aw ml bi"><span id="de27" class="ld le hi mi b fi mm mn l mo mp">const container = connect(mapStateToProps)(containerComponent);</span></pre></div><div class="ab cl kw kx gp ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="hb hc hd he hf"><h2 id="0d7e" class="ld le hi bd lf lg lh li lj lk ll lm ln jf lo lp lq jj lr ls lt jn lu lv lw lx bi translated"><strong class="ak"> mapDispatchProps </strong></h2><p id="e85a" class="pw-post-body-paragraph iu iv hi iw b ix ly iz ja jb lz jd je jf ma jh ji jj mb jl jm jn mc jp jq jr hb bi translated">这允许我们指定组件打算分派哪些动作。在这里，我们在一个地方定义与组件相关的所有分派，然后根据需求将它们添加到我们的元素中。有两种方法定义 mapDispatchProps。</p><p id="572b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">1.函数形式(允许更多定制)</p><p id="f640" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">2.对象速记形式(易于使用)</p><p id="92c7" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">有一种替代方法可以做到这一点，而无需在 connect 函数中指定 mapDispatchProps。(<a class="ae mr" href="https://react-redux.js.org/6.x/using-react-redux/connect-mapdispatch#default-dispatch-as-a-prop" rel="noopener ugc nofollow" target="_blank"> Alternativ </a> e)</p><p id="daab" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">但是这里我是用 mapDispatchProps 来解释的。可以定义如下。</p><pre class="md me mf mg fd mh mi mj mk aw ml bi"><span id="ec93" class="ld le hi mi b fi mm mn l mo mp">const mapDispatchProps = dispatch =&gt; {<br/>return ({<br/>   actionToBeIncluded : () =&gt; dipatch({type: actionType}),<br/>   actionToBeIncluded2 : () =&gt; dipatch ({type: actionType2}),<br/>});<br/>}</span></pre><p id="0821" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">然后我们可以更新连接函数如下:</p><pre class="md me mf mg fd mh mi mj mk aw ml bi"><span id="073d" class="ld le hi mi b fi mm mn l mo mp">const container = connect(mapStateToProps, mapDispatchProps)(containerComponent);</span></pre><p id="dd5d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">作为最后一步，现在我们可以向组件中包含的元素添加已定义的操作:</p><pre class="md me mf mg fd mh mi mj mk aw ml bi"><span id="631a" class="ld le hi mi b fi mm mn l mo mp">&lt;element event={ actionToBeIncluded }&gt; Text &lt;/element&gt;</span></pre><p id="670e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这样，我们就成功地在应用程序中启用了 React Redux。在这里，我只是演示了与 Redux 集成相关的基础知识。如果你想深入研究，你可以参考下面的资源来获取更多的信息。</p><p id="fdfd" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><a class="ae mr" href="https://redux.js.org/advanced/advanced-tutorial" rel="noopener ugc nofollow" target="_blank">https://redux.js.org/advanced/advanced-tutorial</a></p><p id="9929" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">编码快乐+谢谢！</strong></p></div></div>    
</body>
</html>