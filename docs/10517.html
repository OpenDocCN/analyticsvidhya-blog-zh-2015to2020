<html>
<head>
<title>Terraform basics and Launching an Ec2 instances using Terraform</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Terraform基础知识和使用Terraform启动Ec2实例</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/terraform-basics-and-launching-an-ec2-instances-using-terraform-7c9fe0a60421?source=collection_archive---------7-----------------------#2020-10-22">https://medium.com/analytics-vidhya/terraform-basics-and-launching-an-ec2-instances-using-terraform-7c9fe0a60421?source=collection_archive---------7-----------------------#2020-10-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/a8bc4c0047c4f69eb1fcfada6077e197.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*suwwmc5mUm9seygC.png"/></div></div></figure><h1 id="3217" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">什么是地形？</h1><p id="2e1b" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi km translated"><span class="l kn ko kp bm kq kr ks kt ku di"> T </span> erraform是一种安全高效地构建、更改和版本化基础架构的工具。配置文件向Terraform描述了运行单个应用程序或整个数据中心所需的组件。Terraform生成一个执行计划，描述它将如何达到期望的状态，然后执行它来构建所描述的基础设施。随着配置的改变，Terraform能够确定改变了什么，并创建可应用的增量执行计划。</p><h1 id="965b" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">安装:</h1><p id="ef7c" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">您可以在<a class="ae kv" href="https://learn.hashicorp.com/tutorials/terraform/install-cli" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hj">地形图</strong> </a>的官网上，通过简单的方式下载地形图。</p><ul class=""><li id="26eb" class="kw kx hi jq b jr ky jv kz jz la kd lb kh lc kl ld le lf lg bi translated">对于Ubuntu</li></ul><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="97a7" class="lq ir hi lm b fi lr ls l lt lu">1. sudo yum install -y yum-utils<br/>2. sudo yum-config-manager --add-repo    <a class="ae kv" href="https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo" rel="noopener ugc nofollow" target="_blank">https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo</a><br/>3. sudo yum -y install terraform</span></pre><h1 id="dcc9" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">验证安装:</h1><p id="8f81" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">键入terraform-帮助检查terra form是否正确安装</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="333c" class="lq ir hi lm b fi lr ls l lt lu">$ terraform -help<br/>Usage: terraform [-version] [-help] &lt;command&gt; [args]<br/><br/>The available commands for execution are listed below.<br/>The most common, useful commands are shown first, followed by<br/>less common or more advanced commands. If you're just getting<br/>started with Terraform, stick with the common commands. For the<br/>other commands, please read the help and docs before usage.<br/>##...</span></pre><h1 id="8e30" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">代码组织</h1><ul class=""><li id="8b13" class="kw kx hi jq b jr js jv jw jz lv kd lw kh lx kl ld le lf lg bi translated">Terraform语言使用以<code class="du ly lz ma lm b">.tf</code>文件扩展名命名的配置文件。</li></ul><h1 id="7b53" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">评论</h1><p id="2784" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">Terraform语言支持三种不同的注释语法:</p><ul class=""><li id="f6e4" class="kw kx hi jq b jr ky jv kz jz la kd lb kh lc kl ld le lf lg bi translated"><code class="du ly lz ma lm b"><a class="ae kv" href="https://www.terraform.io/docs/configuration/index.html#" rel="noopener ugc nofollow" target="_blank">#</a></code>以单行注释开始，在行尾结束。</li><li id="6ce9" class="kw kx hi jq b jr mb jv mc jz md kd me kh mf kl ld le lf lg bi translated"><code class="du ly lz ma lm b"><a class="ae kv" href="https://www.terraform.io/docs/configuration/index.html#-2" rel="noopener ugc nofollow" target="_blank">/*</a></code>和<code class="du ly lz ma lm b">*/</code>是可能跨越多行的注释的开始和结束分隔符。</li></ul><h1 id="afc9" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">地形认证</h1><p id="ca00" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">对云提供商的认证可以通过3种方式完成。例如，对于aws:</p><ul class=""><li id="675a" class="kw kx hi jq b jr ky jv kz jz la kd lb kh lc kl ld le lf lg bi translated">通过像aws configure这样的命令行</li><li id="f000" class="kw kx hi jq b jr mb jv mc jz md kd me kh mf kl ld le lf lg bi translated">aws配置文件:~/。AWS/凭据，用于存储使用aws config命令时输入的身份验证信息</li><li id="f3dc" class="kw kx hi jq b jr mb jv mc jz md kd me kh mf kl ld le lf lg bi translated">中指定aws_access_key_id和aws_secret_access_key。tf文件，但这不是推荐的方法。</li></ul><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="d40d" class="lq ir hi lm b fi lr ls l lt lu">provider "aws" {<br/>        region  = "us-east-1"<br/>        version = "~&gt; 2.46"<br/>        aws_access_key_id = ____________________________<br/>        aws_secret_access_key = ________________________<br/>}</span></pre><h1 id="fc68" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">初始化</h1><p id="71b9" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated"><code class="du ly lz ma lm b">terraform init</code>命令用于初始化包含Terraform配置文件的工作目录。</p><h1 id="ef0c" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">了解变化</h1><p id="a977" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">Terraform通过检测当前的基础设施测试并计算已知状态和期望状态之间的差异来工作。</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="d88c" class="lq ir hi lm b fi lr ls l lt lu">terraform plan</span></pre><p id="5cd8" class="pw-post-body-paragraph jo jp hi jq b jr ky jt ju jv kz jx jy jz mg kb kc kd mh kf kg kh mi kj kk kl hb bi translated">这将输出迁移计划，对于让其他人验证更改或验证没有不需要的更改尤其有用。</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="8c1f" class="lq ir hi lm b fi lr ls l lt lu">terraform apply</span></pre><p id="6033" class="pw-post-body-paragraph jo jp hi jq b jr ky jt ju jv kz jx jy jz mg kb kc kd mh kf kg kh mi kj kk kl hb bi translated">Terraform应用迁移计划。您也可以指定要应用的计划，以确保审核和有效更改之间没有更改。</p><p id="1110" class="pw-post-body-paragraph jo jp hi jq b jr ky jt ju jv kz jx jy jz mg kb kc kd mh kf kg kh mi kj kk kl hb bi translated">每次运行Terraform时，它都会在<em class="mj"> Terraform状态文件</em>中记录它创建了什么基础设施的信息。该文件的名称为<strong class="jq hj"> terraform.tfstate。</strong></p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="747c" class="lq ir hi lm b fi lr ls l lt lu">This file contains a custom JSON format that records a mapping from the Terraform resources in your configuration files to the representation of those resources in the real world.</span></pre><p id="2d33" class="pw-post-body-paragraph jo jp hi jq b jr ky jt ju jv kz jx jy jz mg kb kc kd mh kf kg kh mi kj kk kl hb bi translated">摧毁地形管理的基础设施，即移除我们使用的基础设施的所有资源</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="f3f5" class="lq ir hi lm b fi lr ls l lt lu">terraform destroy</span></pre><h1 id="374b" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">变量</h1><p id="18df" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">输入变量充当Terraform模块的参数，允许在不改变模块自己的源代码的情况下定制模块的各个方面，并允许在不同的配置之间共享模块。</p><p id="c221" class="pw-post-body-paragraph jo jp hi jq b jr ky jt ju jv kz jx jy jz mg kb kc kd mh kf kg kh mi kj kk kl hb bi translated">例如，我们想在aws中创建IAM用户:创建一个名为“iam_user_name_prefix”的变量，类型为string，值为“my_iam_user”。为了访问变量，我们使用下面的命令和count来指定我们想要创建的IAM用户的数量。</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="28ab" class="lq ir hi lm b fi lr ls l lt lu">var.VARIABLE_NAME     #var.iam_user_name_prefix</span></pre><figure class="lh li lj lk fd ij"><div class="bz dy l di"><div class="mk ml l"/></div></figure><p id="7b43" class="pw-post-body-paragraph jo jp hi jq b jr ky jt ju jv kz jx jy jz mg kb kc kd mh kf kg kh mi kj kk kl hb bi translated">如果我们想在IAM中创建多个用户，我们创建了一个list类型的变量“names”</p><figure class="lh li lj lk fd ij"><div class="bz dy l di"><div class="mk ml l"/></div></figure><p id="3c7e" class="pw-post-body-paragraph jo jp hi jq b jr ky jt ju jv kz jx jy jz mg kb kc kd mh kf kg kh mi kj kk kl hb bi translated">输出值:输出值类似于Terraform模块的返回值</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mm"><img src="../Images/ad9cbd3203927beca3d5be019abea662.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3bRaE32zoS4bsEbj.png"/></div></div></figure><h1 id="1de0" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">先决条件:</h1><h1 id="c226" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">AWS-cli设置</h1><ol class=""><li id="301e" class="kw kx hi jq b jr js jv jw jz lv kd lw kh lx kl mn le lf lg bi translated">在AWS上创建一个帐户。</li><li id="9cf4" class="kw kx hi jq b jr mb jv mc jz md kd me kh mf kl mn le lf lg bi translated">转到<strong class="jq hj">身份&amp;访问管理</strong> (IAM)，创建一个用户并生成一个访问密钥以在您的机器上配置AWS。您需要向该IAM用户授予AdministratorAccess权限。</li><li id="bbe6" class="kw kx hi jq b jr mb jv mc jz md kd me kh mf kl mn le lf lg bi translated">打开命令行并配置AWS</li></ol><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="8607" class="lq ir hi lm b fi lr ls l lt lu">aws configure</span></pre><p id="4288" class="pw-post-body-paragraph jo jp hi jq b jr ky jt ju jv kz jx jy jz mg kb kc kd mh kf kg kh mi kj kk kl hb bi translated">4.提供您刚刚生成的<strong class="jq hj">访问密钥</strong>和<strong class="jq hj">秘密</strong>，以及您将要部署集群的区域。AWS建议用户选择地理上靠近他们的地区，以减少延迟和成本。</p><p id="2662" class="pw-post-body-paragraph jo jp hi jq b jr ky jt ju jv kz jx jy jz mg kb kc kd mh kf kg kh mi kj kk kl hb bi translated">对于那些正在使用<strong class="jq hj"> AWS教育初学者帐户。</strong>进入AWS培训- &gt;登录- &gt; AWS账户- &gt; AWS培训入门账户- &gt;账户详情</p><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es mo"><img src="../Images/092d8bc727373fbccb79986d65bd800e.png" data-original-src="https://miro.medium.com/v2/resize:fit:60/0*XXLBksjY5l89zoxq"/></div></figure><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mp"><img src="../Images/0673d67b975e4502dd080c21848cc2fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Ylw9FaVzwRaOABAo.png"/></div></div></figure><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="47d8" class="lq ir hi lm b fi lr ls l lt lu">gedit ~/.aws/credentials</span></pre><p id="0038" class="pw-post-body-paragraph jo jp hi jq b jr ky jt ju jv kz jx jy jz mg kb kc kd mh kf kg kh mi kj kk kl hb bi translated">删除凭证文件的内容，并将以下内容粘贴到凭证文件上</p><h1 id="a798" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">所以现在让我们使用地形创建S3桶:</h1><ul class=""><li id="feac" class="kw kx hi jq b jr js jv jw jz lv kd lw kh lx kl ld le lf lg bi translated">创建一个目录S3-使用-地形导航并运行</li></ul><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="5a43" class="lq ir hi lm b fi lr ls l lt lu">mkdir S3-using-terraform<br/>cd S3-using-terraform<br/>terraform init<br/>####create a file with .tf extension</span></pre><p id="4f27" class="pw-post-body-paragraph jo jp hi jq b jr ky jt ju jv kz jx jy jz mg kb kc kd mh kf kg kh mi kj kk kl hb bi translated">我选择提供者“aws ”,并尝试创建名为“my-s3-bucket-sarthak-001”的s3存储桶，尝试使用输出值返回关于S3存储桶的所有信息</p><figure class="lh li lj lk fd ij"><div class="bz dy l di"><div class="mk ml l"/></div></figure><ul class=""><li id="2f52" class="kw kx hi jq b jr ky jv kz jz la kd lb kh lc kl ld le lf lg bi translated">保存文件并在命令行中执行以下命令</li></ul><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="6311" class="lq ir hi lm b fi lr ls l lt lu">terraform apply</span></pre><ul class=""><li id="ea2b" class="kw kx hi jq b jr ky jv kz jz la kd lb kh lc kl ld le lf lg bi translated">成功执行命令后，您将看到一个名为“my-s3-bucket-sarthak-001”的S3铲斗</li></ul><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mq"><img src="../Images/56515d01d05f165ca6c984d1e2a92bb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hhDsglYux_Sa2LmsNg-V7g.png"/></div></div></figure><ul class=""><li id="c31a" class="kw kx hi jq b jr ky jv kz jz la kd lb kh lc kl ld le lf lg bi translated">记得在执行后销毁资源</li></ul><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="5aa5" class="lq ir hi lm b fi lr ls l lt lu">terraform destroy</span></pre><h1 id="0058" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">使用Terraform创建IAM用户:</h1><ul class=""><li id="8e7d" class="kw kx hi jq b jr js jv jw jz lv kd lw kh lx kl ld le lf lg bi translated">创建一个目录IAM-using-terraform在其中导航并运行</li></ul><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="2e1c" class="lq ir hi lm b fi lr ls l lt lu">mkdir IAM-using-terraform<br/>cd IAM-using-terraform<br/>terraform init<br/>####create a file with .tf extension</span></pre><p id="feaf" class="pw-post-body-paragraph jo jp hi jq b jr ky jt ju jv kz jx jy jz mg kb kc kd mh kf kg kh mi kj kk kl hb bi translated">我选择提供者“aws ”,并尝试创建名为“my-s3-bucket-sarthak-001”的IAM，尝试使用输出值返回关于s3存储桶的所有信息</p><figure class="lh li lj lk fd ij"><div class="bz dy l di"><div class="mk ml l"/></div></figure><ul class=""><li id="877d" class="kw kx hi jq b jr ky jv kz jz la kd lb kh lc kl ld le lf lg bi translated">保存文件并在命令行中执行以下命令</li></ul><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="6ba5" class="lq ir hi lm b fi lr ls l lt lu">terraform apply</span></pre><ul class=""><li id="8b6c" class="kw kx hi jq b jr ky jv kz jz la kd lb kh lc kl ld le lf lg bi translated">成功执行命令后，您将看到一个名为“my-iam-user-sarthak”的IAM用户</li></ul><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mr"><img src="../Images/88d84b06d1bb08722d941827513cdae7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*At7ljuDATsgGsB75xJ13ow.png"/></div></div></figure><ul class=""><li id="4c9b" class="kw kx hi jq b jr ky jv kz jz la kd lb kh lc kl ld le lf lg bi translated">记得在执行后销毁资源</li></ul><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="4586" class="lq ir hi lm b fi lr ls l lt lu">terraform destroy</span></pre><h1 id="eccb" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">现在让我们使用Terraform创建EC2实例:</h1><p id="e318" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在之前的<a class="ae kv" rel="noopener" href="/analytics-vidhya/launching-ec2-instance-using-cli-and-attaching-ebs-volume-6ce00456e55d?source=friends_link&amp;sk=2f35d4841272ded769b75bb5164e2b49">帖子</a>中，我使用CLI启动了EC2实例，并将EBS卷附加到它上面。</p><p id="0c0c" class="pw-post-body-paragraph jo jp hi jq b jr ky jt ju jv kz jx jy jz mg kb kc kd mh kf kg kh mi kj kk kl hb bi translated">链接:<a class="ae kv" rel="noopener" href="/analytics-vidhya/launching-ec2-instance-using-cli-and-attaching-ebs-volume-6ce00456e55d?source=friends_link&amp;sk=2f35d4841272ded769b75bb5164e2b49">https://medium . com/analytics-vid hya/launching-ec2-instance-using-CLI-and-attaching-EBS-volume-6ce 00456 e55d？source = friends _ link&amp;sk = 2f 35d 4841272 ded 769 b 75 bb 5164 e2b 49</a></p><h1 id="3570" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">创建密钥对</h1><p id="6f02" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">由私钥和公钥组成的密钥对是一组安全凭据，用于在连接到实例时证明您的身份。Amazon EC2存储公钥，您存储私钥。</p><ul class=""><li id="c5f4" class="kw kx hi jq b jr ky jv kz jz la kd lb kh lc kl ld le lf lg bi translated">您可以使用以下命令查看所有现有密钥对:</li></ul><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="e3db" class="lq ir hi lm b fi lr ls l lt lu">aws ec2 describe-key-pairs --region us-east-1</span></pre><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ms"><img src="../Images/bb255bda6055b5751f55f1f17ae704fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-VBVPZB8BNCoyL-K.png"/></div></div></figure><p id="6702" class="pw-post-body-paragraph jo jp hi jq b jr ky jt ju jv kz jx jy jz mg kb kc kd mh kf kg kh mi kj kk kl hb bi translated">在EC2部分导航到创建密钥对，点击<strong class="jq hj">创建密钥对</strong></p><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es mt"><img src="../Images/cf9ee38f8dbe8f1e4a6837a1a77c0d82.png" data-original-src="https://miro.medium.com/v2/resize:fit:798/format:webp/1*Q4DYcozZbs4DGwjRUMghDw.png"/></div></figure><p id="d672" class="pw-post-body-paragraph jo jp hi jq b jr ky jt ju jv kz jx jy jz mg kb kc kd mh kf kg kh mi kj kk kl hb bi translated">这将创建一个新的密钥对并保存它，因为我们将在以后加载它以提供身份验证</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="e4ad" class="lq ir hi lm b fi lr ls l lt lu">mkdir ~/aws<br/>mkdir ~/aws/aws_keys<br/>mv terraform-ec2.pem ~/aws/aws_keys</span></pre><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es mu"><img src="../Images/d59a66b4b16e987154b3e1ae88a009c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*UlDmjywxI_RC2hnQpAc2cw.png"/></div></figure><ol class=""><li id="91fa" class="kw kx hi jq b jr ky jv kz jz la kd lb kh lc kl mn le lf lg bi translated">我已经创建了variables.tf文件，其中包含所有已初始化的变量。它基本上加载了路径。pem文件已找到。在我的例子中，它在~/AWS/AWS _ keys/terra form-ec2 . PEM中</li></ol><figure class="lh li lj lk fd ij"><div class="bz dy l di"><div class="mk ml l"/></div></figure><p id="9041" class="pw-post-body-paragraph jo jp hi jq b jr ky jt ju jv kz jx jy jz mg kb kc kd mh kf kg kh mi kj kk kl hb bi translated">2.我已经创建了data-providers.tf文件，其中存储了以下信息:</p><ul class=""><li id="a3bb" class="kw kx hi jq b jr ky jv kz jz la kd lb kh lc kl ld le lf lg bi translated">VPC默认信息</li><li id="b3ce" class="kw kx hi jq b jr mb jv mc jz md kd me kh mf kl ld le lf lg bi translated">AMI Linux 2映像的Id</li></ul><figure class="lh li lj lk fd ij"><div class="bz dy l di"><div class="mk ml l"/></div></figure><p id="ba02" class="pw-post-body-paragraph jo jp hi jq b jr ky jt ju jv kz jx jy jz mg kb kc kd mh kf kg kh mi kj kk kl hb bi translated">3.我创建了main.tf来存储以下信息:</p><ul class=""><li id="b487" class="kw kx hi jq b jr ky jv kz jz la kd lb kh lc kl ld le lf lg bi translated">提供商ie aws和地区</li><li id="c85b" class="kw kx hi jq b jr mb jv mc jz md kd me kh mf kl ld le lf lg bi translated">名为“http _ server _ SG”ie安全组创建了一个入口和出口规则</li><li id="9dd0" class="kw kx hi jq b jr mb jv mc jz md kd me kh mf kl ld le lf lg bi translated">实例详细信息</li><li id="5bf9" class="kw kx hi jq b jr mb jv mc jz md kd me kh mf kl ld le lf lg bi translated">将加载密钥对的连接</li><li id="503a" class="kw kx hi jq b jr mb jv mc jz md kd me kh mf kl ld le lf lg bi translated">当实例加载时，我们希望执行什么命令。在我的例子中，我想启动一个httpd服务器</li></ul><figure class="lh li lj lk fd ij"><div class="bz dy l di"><div class="mk ml l"/></div></figure><p id="f0ef" class="pw-post-body-paragraph jo jp hi jq b jr ky jt ju jv kz jx jy jz mg kb kc kd mh kf kg kh mi kj kk kl hb bi translated">4.output.tf文件将在命令行上打印实例详细信息</p><figure class="lh li lj lk fd ij"><div class="bz dy l di"><div class="mk ml l"/></div></figure><p id="1624" class="pw-post-body-paragraph jo jp hi jq b jr ky jt ju jv kz jx jy jz mg kb kc kd mh kf kg kh mi kj kk kl hb bi translated">5.最后执行命令</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="5db4" class="lq ir hi lm b fi lr ls l lt lu">terraform apply</span></pre><p id="511c" class="pw-post-body-paragraph jo jp hi jq b jr ky jt ju jv kz jx jy jz mg kb kc kd mh kf kg kh mi kj kk kl hb bi translated">6.转到EC2实例，您将看到一个正在运行的实例和创建的安全组</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mv"><img src="../Images/8a8275892e0adb6d6430771a99bce802.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MG1BhDp-SqTCeappWD6gzQ.png"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx translated">安全组已创建</figcaption></figure><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es na"><img src="../Images/407b0a9cc89f999059f68ade544e1317.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TJKrftASyA1bqa_F_l2zOA.png"/></div></div><figcaption class="mw mx et er es my mz bd b be z dx translated">实例加速旋转</figcaption></figure><p id="eed3" class="pw-post-body-paragraph jo jp hi jq b jr ky jt ju jv kz jx jy jz mg kb kc kd mh kf kg kh mi kj kk kl hb bi translated">7.点击提供的网址并在浏览器中打开它，你将得到你想要的ec2 HTTPS服务器</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nb"><img src="../Images/15dfe6ad7d293a088d6035fe08a4056b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*izXBM61rahmeDwr58Mbepg.png"/></div></div></figure><p id="4821" class="pw-post-body-paragraph jo jp hi jq b jr ky jt ju jv kz jx jy jz mg kb kc kd mh kf kg kh mi kj kk kl hb bi translated">8.最后运行下面的命令，以防止不必要的计费和破坏资源。</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="c9e6" class="lq ir hi lm b fi lr ls l lt lu">terraform destroy</span></pre></div></div>    
</body>
</html>