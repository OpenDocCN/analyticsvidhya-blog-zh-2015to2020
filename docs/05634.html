<html>
<head>
<title>Setup and CRUD Operations in MongoDB</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MongoDB中的设置和CRUD操作</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/setup-and-crud-operations-in-mongodb-dd821c4621a?source=collection_archive---------20-----------------------#2020-04-27">https://medium.com/analytics-vidhya/setup-and-crud-operations-in-mongodb-dd821c4621a?source=collection_archive---------20-----------------------#2020-04-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/7fa4fbb800139cfcd928a83ef20ce638.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OWMNHoBNKuzSzDPs9nJ9YA.png"/></div></div></figure><blockquote class="iq"><p id="9102" class="ir is hi bd it iu iv iw ix iy iz ja dx translated">在这篇文章中，我们将看到如何在MongoDB <strong class="ak"> cloud </strong>服务中建立一个帐户，并使用Pymongo进行CRUD操作。</p></blockquote><h2 id="64f9" class="jb jc hi bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy bi translated">首先，我们将设置帐户</h2><p id="2fee" class="pw-post-body-paragraph jz ka hi kb b kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks ja hb bi translated">在【https://www.mongodb.com/cloud】的<a class="ae kt" href="https://www.mongodb.com/cloud" rel="noopener ugc nofollow" target="_blank">T3的</a>T6】开户。</p><figure class="kv kw kx ky fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/97695510420ab1f1234d3f33e400563d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t4RnQUIux_QHysEhOn-uhA.png"/></div></div></figure><p id="93b4" class="pw-post-body-paragraph jz ka hi kb b kc kz ke kf kg la ki kj jm lb kl km jq lc ko kp ju ld kr ks ja hb bi translated">如果你使用的是免费账户，我建议你保留所有默认设置。</p><figure class="kv kw kx ky fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es le"><img src="../Images/738e1ac65086d5461a638baef3cd3b37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0NAimJUuGCcng4uL5Ed09g.png"/></div></div></figure><p id="4636" class="pw-post-body-paragraph jz ka hi kb b kc kz ke kf kg la ki kj jm lb kl km jq lc ko kp ju ld kr ks ja hb bi translated">一旦帐户被创建，你可以看到下面的页面。</p><figure class="kv kw kx ky fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lf"><img src="../Images/1c17bf3b7796cb54a40d45928deaa916.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nu84s-UUq5GRTJpFjEqMVQ.png"/></div></div></figure><p id="7c49" class="pw-post-body-paragraph jz ka hi kb b kc kz ke kf kg la ki kj jm lb kl km jq lc ko kp ju ld kr ks ja hb bi translated">现在我们必须通过点击<strong class="kb hj">连接</strong>按钮<em class="ku">设置连接</em> <strong class="kb hj"> </strong>。单击“连接”按钮后，请按照以下步骤操作。</p><figure class="kv kw kx ky fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lg"><img src="../Images/37b482edb52591395a3d7b7578da7ca9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3qeipPJQa2wB5-v-QH36Sw.png"/></div></div></figure><figure class="kv kw kx ky fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/00fbfbd26b844907413a9dbb544c7abf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qXZRuHfo5ulr7sm0_PeXNg.png"/></div></div></figure><p id="e8b4" class="pw-post-body-paragraph jz ka hi kb b kc kz ke kf kg la ki kj jm lb kl km jq lc ko kp ju ld kr ks ja hb bi translated"><em class="ku">复制</em><strong class="kb hj"><em class="ku">连接字符串</em> </strong>我们将在应用中需要它。既然连接部分完成了，我们就要<strong class="kb hj"> <em class="ku">创建一个数据库和集合。</em> </strong></p><figure class="kv kw kx ky fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/7fec4e76bddc8820d193aa4f76a164d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CXV-iUCmOAmK6fL8RHQr8g.png"/></div></div></figure><p id="b593" class="pw-post-body-paragraph jz ka hi kb b kc kz ke kf kg la ki kj jm lb kl km jq lc ko kp ju ld kr ks ja hb bi translated">设置数据库和收集部分已经完成。</p><p id="22de" class="pw-post-body-paragraph jz ka hi kb b kc kz ke kf kg la ki kj jm lb kl km jq lc ko kp ju ld kr ks ja hb bi translated">现在，通过在终端中运行下面的命令，为MongoDB安装python <strong class="kb hj"> pymongo </strong>模块。</p><pre class="kv kw kx ky fd li lj lk ll aw lm bi"><span id="b63d" class="jb jc hi lj b fi ln lo l lp lq">pip install pymongo</span></pre><p id="f250" class="pw-post-body-paragraph jz ka hi kb b kc kz ke kf kg la ki kj jm lb kl km jq lc ko kp ju ld kr ks ja hb bi translated">让我们转到python控制台。</p><p id="8946" class="pw-post-body-paragraph jz ka hi kb b kc kz ke kf kg la ki kj jm lb kl km jq lc ko kp ju ld kr ks ja hb bi translated">通过下面的命令导入pymongo包并使用<strong class="kb hj"> <em class="ku"> MongoClient </em> </strong>实例设置连接到我们在上面创建的集群，粘贴连接字符串并放置您在创建MongoDB用户时设置的密码-</p><pre class="kv kw kx ky fd li lj lk ll aw lm bi"><span id="ca6c" class="jb jc hi lj b fi ln lo l lp lq">import pymongo<br/>from pymongo import MongoClient<br/>client = MongoClient("CONNECTION STRING")</span></pre><figure class="kv kw kx ky fd ij er es paragraph-image"><div class="er es lr"><img src="../Images/24f51ef1ac0daab3544d80c1806a198e.png" data-original-src="https://miro.medium.com/v2/resize:fit:786/format:webp/1*tstnj3DBkU5fvPWYljJ8JA.png"/></div></figure><blockquote class="ls lt lu"><p id="7198" class="jz ka ku kb b kc kz ke kf kg la ki kj lv lb kl km lw lc ko kp lx ld kr ks ja hb bi translated"><strong class="kb hj">创建</strong></p></blockquote><p id="993f" class="pw-post-body-paragraph jz ka hi kb b kc kz ke kf kg la ki kj jm lb kl km jq lc ko kp ju ld kr ks ja hb bi translated">我们已经连接到<strong class="kb hj">集群</strong> ( <em class="ku">它是云数据库</em>中的空间)，在那里它将支持多个独立的数据库。现在我们将指定我们想要使用哪个<strong class="kb hj">数据库</strong>和<strong class="kb hj">集合</strong>。<em class="ku">收藏是表的一种</em>。</p><pre class="kv kw kx ky fd li lj lk ll aw lm bi"><span id="d90f" class="jb jc hi lj b fi ln lo l lp lq"><em class="ku"># database<br/></em>db = client["database_1"]<br/><em class="ku"># collections<br/></em>collection = db["collection_1"]</span></pre><figure class="kv kw kx ky fd ij er es paragraph-image"><div class="er es ly"><img src="../Images/200a7c01a6d31af33c14272c742815e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:636/format:webp/1*LE5tjtQU9J0s7Jycr8GYwA.png"/></div></figure><p id="1f9e" class="pw-post-body-paragraph jz ka hi kb b kc kz ke kf kg la ki kj jm lb kl km jq lc ko kp ju ld kr ks ja hb bi translated">一旦我们选择了集合，现在我们将看到如何在其中存储数据。我们在MongoDB中将数据存储为<em class="ku"> JSON风格的文档或者python </em>中的字典，它被称为<strong class="kb hj">文档</strong>。</p><pre class="kv kw kx ky fd li lj lk ll aw lm bi"><span id="90d5" class="jb jc hi lj b fi ln lo l lp lq">post = { "name": "Cena" , "age": 25 }<br/>collection.insert_one(post)</span></pre><figure class="kv kw kx ky fd ij er es paragraph-image"><div class="er es lz"><img src="../Images/a5158798856cacd03e54c9024ac7a00b.png" data-original-src="https://miro.medium.com/v2/resize:fit:634/format:webp/1*Ra6jPDlRldiylvSS_0MWog.png"/></div></figure><figure class="kv kw kx ky fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/18480cae7c7a770d1ff3b733f7ca45f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5VhV12dqfIeZ-HVfhYMXCg.png"/></div></div></figure><p id="17b4" class="pw-post-body-paragraph jz ka hi kb b kc kz ke kf kg la ki kj jm lb kl km jq lc ko kp ju ld kr ks ja hb bi translated">当我们插入文档时，会自动添加一个<strong class="kb hj"> <em class="ku"> "_id" </em> </strong>键。如果我们愿意，我们也可以指定它，但它必须在整个集合中是唯一的。</p><p id="cce3" class="pw-post-body-paragraph jz ka hi kb b kc kz ke kf kg la ki kj jm lb kl km jq lc ko kp ju ld kr ks ja hb bi translated">要插入许多文档，我们只需通过<strong class="kb hj"> insert_many() </strong>命令传递一个帖子列表。</p><pre class="kv kw kx ky fd li lj lk ll aw lm bi"><span id="4788" class="jb jc hi lj b fi ln lo l lp lq">post_1 = {"name": "Batista","age": 22,}<br/>post_2 = {"name": "Kane","age": 21,}<br/>collection.insert_many([post_1,post_2])</span></pre><figure class="kv kw kx ky fd ij er es paragraph-image"><div class="er es mb"><img src="../Images/89859bc457bebb093d38902c8dc411bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:722/format:webp/1*yIhnqV9nFQrDOQa8JWWtLA.png"/></div></figure><figure class="kv kw kx ky fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mc"><img src="../Images/7e2c6981e4cf75e9d5cc1deef0f1b119.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9YqeNtgqxquBTpHWg8e9bg.png"/></div></div></figure><blockquote class="ls lt lu"><p id="1404" class="jz ka ku kb b kc kz ke kf kg la ki kj lv lb kl km lw lc ko kp lx ld kr ks ja hb bi translated"><strong class="kb hj">改为</strong></p></blockquote><p id="24c5" class="pw-post-body-paragraph jz ka hi kb b kc kz ke kf kg la ki kj jm lb kl km jq lc ko kp ju ld kr ks ja hb bi translated">我们可以通过<strong class="kb hj"> <em class="ku"> find_one() </em> </strong>或者<strong class="kb hj"> <em class="ku"> find() </em> </strong>命令在MongoDB中执行查询。</p><pre class="kv kw kx ky fd li lj lk ll aw lm bi"><span id="4584" class="jb jc hi lj b fi ln lo l lp lq">result = collection.find()<br/>for res in result:<br/>    print(res)</span></pre><figure class="kv kw kx ky fd ij er es paragraph-image"><div class="er es md"><img src="../Images/9a5bbdf58cfb787bf60059e10f470313.png" data-original-src="https://miro.medium.com/v2/resize:fit:478/format:webp/1*ityOnCVvqxsN4MoDnoQqLA.png"/></div></figure><figure class="kv kw kx ky fd ij er es paragraph-image"><div class="er es me"><img src="../Images/420ac50eeae4fd37c2b6634335ad77ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*nR_FNJVYzoo5Smb0A6tvbg.png"/></div></figure><p id="2fa8" class="pw-post-body-paragraph jz ka hi kb b kc kz ke kf kg la ki kj jm lb kl km jq lc ko kp ju ld kr ks ja hb bi translated">如果需要，我们可以通过给定一个条件来查找一个特定的文档，例如<strong class="kb hj"><em class="ku">find({ " name ":" Cena " })</em></strong>，这将返回名称等于" Cena "的文档。为了从被搜索的文档中访问一个单独的元素，我们可以给出像<strong class="kb hj"> <em class="ku"> print(res["age"])，</em> </strong>这样的命令来从被搜索的文档中获取年龄。通过在查询对象中使用修饰符作为值，可以进行一些更高级的查询，例如<strong class="kb hj"><em class="ku">find({ " age ":{ " $ gt ":21 } })</em></strong></p><blockquote class="ls lt lu"><p id="d69b" class="jz ka ku kb b kc kz ke kf kg la ki kj lv lb kl km lw lc ko kp lx ld kr ks ja hb bi translated"><strong class="kb hj">更新</strong></p></blockquote><p id="991e" class="pw-post-body-paragraph jz ka hi kb b kc kz ke kf kg la ki kj jm lb kl km jq lc ko kp ju ld kr ks ja hb bi translated">我们可以使用修饰符来执行更新操作。为此我们将使用<strong class="kb hj"> <em class="ku"> update_one() </em> </strong>方法。</p><pre class="kv kw kx ky fd li lj lk ll aw lm bi"><span id="fa2f" class="jb jc hi lj b fi ln lo l lp lq">update=collection.update_one({"age": 21},{"$set":{"name":"Bruce"}})</span></pre><figure class="kv kw kx ky fd ij er es paragraph-image"><div class="er es mf"><img src="../Images/52b4293565bb65be440643509f6e43e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*xKCRFR9Lc0_uu9pEpDDNtQ.png"/></div></figure><figure class="kv kw kx ky fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mg"><img src="../Images/44195605edf75557c4419957ef713d18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EzSEQ6L-DrRu62Prv8g0CA.png"/></div></div></figure><p id="7778" class="pw-post-body-paragraph jz ka hi kb b kc kz ke kf kg la ki kj jm lb kl km jq lc ko kp ju ld kr ks ja hb bi translated">上面的代码将查找年龄等于21的文档，然后将名称设置为Bruce。通过使用<strong class="kb hj"><em class="ku">update _ many()</em></strong>方法，可以更新所有满足特定查询条件的文档。</p><blockquote class="ls lt lu"><p id="92a8" class="jz ka ku kb b kc kz ke kf kg la ki kj lv lb kl km lw lc ko kp lx ld kr ks ja hb bi translated"><strong class="kb hj">删除</strong></p></blockquote><p id="0ae4" class="pw-post-body-paragraph jz ka hi kb b kc kz ke kf kg la ki kj jm lb kl km jq lc ko kp ju ld kr ks ja hb bi translated">我们可以使用带有某些条件的<strong class="kb hj"> <em class="ku"> delete_one() </em> </strong>命令从我们的集合中删除一个文档，如果我们不给出任何条件，它将删除集合中的第一个文档。</p><figure class="kv kw kx ky fd ij er es paragraph-image"><div class="er es mh"><img src="../Images/6fe78b42fa24032e747cddb0cb26ba25.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*pleENv5k9FXdAS1KsUJ-BQ.png"/></div></figure><figure class="kv kw kx ky fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mi"><img src="../Images/869633aa2c5c3496ba0da7ff9243e603.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5DtA0xR1174vwdGxzS0djw.png"/></div></div></figure><p id="15c7" class="pw-post-body-paragraph jz ka hi kb b kc kz ke kf kg la ki kj jm lb kl km jq lc ko kp ju ld kr ks ja hb bi translated">要删除多个文档，我们可以使用<strong class="kb hj"><em class="ku">delete _ many()</em></strong>方法。使用delete_many时要非常小心，如果不指定任何条件，它将从集合中删除所有文档。</p><p id="cf56" class="pw-post-body-paragraph jz ka hi kb b kc kz ke kf kg la ki kj jm lb kl km jq lc ko kp ju ld kr ks ja hb bi translated">我希望你已经掌握了MongoDB快速入门的基础知识，更多详情请访问<a class="ae kt" href="https://docs.mongodb.com/" rel="noopener ugc nofollow" target="_blank"> MongoDB文档</a>。如果这篇文章对你有所帮助，请考虑给👏来激励我。感谢阅读。</p></div><div class="ab cl mj mk gp ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="hb hc hd he hf"><div class="kv kw kx ky fd mq"><a rel="noopener follow" target="_blank" href="/analytics-vidhya/extracting-audio-files-from-api-storing-it-on-a-nosql-database-789c12311a48"><div class="mr ab dw"><div class="ms ab mt cl cj mu"><h2 class="bd hj fi z dy mv ea eb mw ed ef hh bi translated">从API中提取音频文件并将其存储在NoSQL数据库中</h2><div class="mx l"><h3 class="bd b fi z dy mv ea eb mw ed ef dx translated">存储和提取音频文件的最简单方法(。wav/API)</h3></div><div class="my l"><p class="bd b fp z dy mv ea eb mw ed ef dx translated">medium.com</p></div></div><div class="mz l"><div class="na l nb nc nd mz ne io mq"/></div></div></a></div><div class="nf ng ez fb nh mq"><a rel="noopener follow" target="_blank" href="/@darpanlekharu4/trigger-aws-lambda-function-to-store-audio-from-api-in-s3-bucket-b2bc191f23ec"><div class="mr ab dw"><div class="ms ab mt cl cj mu"><h2 class="bd hj fi z dy mv ea eb mw ed ef hh bi translated">触发AWS Lambda函数以将来自API的音频存储在S3桶中</h2><div class="mx l"><h3 class="bd b fi z dy mv ea eb mw ed ef dx translated">这是一个教程，我将展示如何触发一个lambda函数，当我们上传一个音频API在S3桶和…</h3></div><div class="my l"><p class="bd b fp z dy mv ea eb mw ed ef dx translated">medium.com</p></div></div><div class="mz l"><div class="ni l nb nc nd mz ne io mq"/></div></div></a></div></div></div>    
</body>
</html>