<html>
<head>
<title>Churn modelling and prediction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">流失建模和预测</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/churn-modelling-and-prediction-4d899c112aff?source=collection_archive---------11-----------------------#2020-11-22">https://medium.com/analytics-vidhya/churn-modelling-and-prediction-4d899c112aff?source=collection_archive---------11-----------------------#2020-11-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/09896c430b47000db18936a4764e4c7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*zBpQ9riz51rnGOL1Gu0GHg.jpeg"/></div></figure><h1 id="1ed2" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">什么是流失预测？</h1><p id="01e0" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">根据<a class="ki kj ge" href="https://medium.com/u/618b87d86346?source=post_page-----4d899c112aff--------------------------------" rel="noopener" target="_blank"> Appier </a>的<a class="ae kk" href="https://www.appier.com/blog/churn-prediction/" rel="noopener ugc nofollow" target="_blank">博客</a>的说法，流失预测可以帮助人们预见到这个人是否会离开，这样你就可以有足够的时间来准备吸引他们的策略。这几周我一直在忙着研究这个话题。在人力资源领域，总有一批员工会提交辞呈，尽管他们表现不错，公司也想留住他们。然而，要留住他们总是为时已晚，因为他们已经被另一家公司接受了一份更好的工作。因此，为什么我们不在员工开始寻找其他工作机会之前就让他们参与进来呢？这就是员工流失预测发挥作用的地方。</p><p id="d2b5" class="pw-post-body-paragraph jk jl hi jm b jn kl jp jq jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh hb bi translated">关于<a class="ae kk" rel="noopener" href="/analytics-vidhya/telecom-churn-prediction-model-aa5c71ef944c">电信流失预测</a>的帖子由<a class="ki kj ge" href="https://medium.com/u/7dc0648c97f5?source=post_page-----4d899c112aff--------------------------------" rel="noopener" target="_blank"> Shivali </a>撰写，是一个很好的流失预测入门指南。使用了各种技术，如EDA(探索性数据分析)、聚类分析和流失预测模型。主要目的是分析客户的行为，并制定保留计划，以降低流失率。</p><h1 id="4ce1" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">如何开始？</h1><p id="bd4e" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">以下是如何启动客户流失预测项目的一般工作流程。主要的挑战将是数据收集过程。如果可能的话，我们应该在不同的时间戳收集尽可能多的数据点。</p><ol class=""><li id="a6d8" class="kq kr hi jm b jn kl jr km jv ks jz kt kd ku kh kv kw kx ky bi translated">数据收集</li><li id="e3c2" class="kq kr hi jm b jn kz jr la jv lb jz lc kd ld kh kv kw kx ky bi translated">数据预处理</li><li id="4b1d" class="kq kr hi jm b jn kz jr la jv lb jz lc kd ld kh kv kw kx ky bi translated">探索性数据分析</li><li id="f1e7" class="kq kr hi jm b jn kz jr la jv lb jz lc kd ld kh kv kw kx ky bi translated">流失聚类分析</li><li id="87cb" class="kq kr hi jm b jn kz jr la jv lb jz lc kd ld kh kv kw kx ky bi translated">流失预测模型</li><li id="5388" class="kq kr hi jm b jn kz jr la jv lb jz lc kd ld kh kv kw kx ky bi translated">保留计划</li></ol><h2 id="e510" class="le in hi bd io lf lg lh is li lj lk iw jv ll lm ja jz ln lo je kd lp lq ji lr bi translated">1.数据收集</h2><p id="09fb" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">数据收集听起来可能很容易，但是如果您的数据来自多个来源呢？关于员工的数据可能很难收集，尤其是关于员工的等级、与主管/同事的关系以及他们的生活事件(如婚姻、父母身份等)。我们需要明确我们的项目目标，以便数据收集可以更简单。理解我们的数据也很重要，尤其是在下一步——数据预处理。</p><h2 id="57a6" class="le in hi bd io lf lg lh is li lj lk iw jv ll lm ja jz ln lo je kd lp lq ji lr bi translated">2.数据预处理</h2><p id="6f7f" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">例如，您预测过去3年中每个季度将在6个月内离职的员工。因此，处理后的数据集应该如下所示。</p><ul class=""><li id="a841" class="kq kr hi jm b jn kl jr km jv ks jz kt kd ku kh ls kw kx ky bi translated"><code class="du lt lu lv lw b">extract_mth</code>是提取的月份</li><li id="5634" class="kq kr hi jm b jn kz jr la jv lb jz lc kd ld kh ls kw kx ky bi translated"><code class="du lt lu lv lw b">resign_dt</code>是从<em class="lx"> extract_mth </em>起6个月内的离职月份</li><li id="9b97" class="kq kr hi jm b jn kz jr la jv lb jz lc kd ld kh ls kw kx ky bi translated"><code class="du lt lu lv lw b">pct_chg_mcrate</code> <em class="lx"> </em>是当前季度MC率相对于上一季度的百分比变化</li></ul><figure class="ly lz ma mb fd ij"><div class="bz dy l di"><div class="mc md l"/></div></figure><h2 id="e070" class="le in hi bd io lf lg lh is li lj lk iw jv ll lm ja jz ln lo je kd lp lq ji lr bi translated">3.探索性数据分析</h2><p id="0de4" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">在开始使用EDA之前，您必须首先将您的数据分组/转换为3个类别— <em class="lx"> </em> <code class="du lt lu lv lw b">Numeric</code>、<code class="du lt lu lv lw b">Nominal</code>和<code class="du lt lu lv lw b">Binary</code> <em class="lx"> </em>，并将您的目标列设置为<code class="du lt lu lv lw b">Churn</code>。</p><pre class="ly lz ma mb fd me lw mf mg aw mh bi"><span id="f84b" class="le in hi lw b fi mi mj l mk ml"><strong class="lw hj">cat_cols</strong> = ["Gender","Partner","Dependents","SeniorCitizen","PhoneService","MultipleLines","InternetServiceType","OnlineSecurity","OnlineBackup","DeviceProtection","TechSupport","StreamingTV","StreamingMovies","IsContracted","ContractType","PaperlessBilling","PaymentMethod"]<br/><br/><strong class="lw hj">num_cols</strong> = ["Tenure","MonthlyCharges","TotalCharges"]<br/><br/><strong class="lw hj">target_col</strong> = 'Churn'<br/><br/><em class="lx"># spliting categorical columns into Nominal and Binary columns</em><br/><br/><strong class="lw hj">nominal_cols</strong> =[Gender','InternetServiceType','PaymentMethod','ContractType']<br/><br/><strong class="lw hj">binary_cols</strong> = ['SeniorCitizen','Partner','Dependents','PhoneService','MultipleLines','OnlineSecurity','OnlineBackup','DeviceProtection','TechSupport','StreamingTV','StreamingMovies','PaperlessBilling','InternetService',IsContracted']</span></pre><p id="0feb" class="pw-post-body-paragraph jk jl hi jm b jn kl jp jq jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh hb bi translated">关联热图对于检查输入要素之间是否存在任何关系也很有用。</p><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="er es mm"><img src="../Images/c72420da8128fb1fe1d999ce142d0096.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DOqxTmQE4w8cs9OusNQRyA.png"/></div></div></figure><h2 id="1ba3" class="le in hi bd io lf lg lh is li lj lk iw jv ll lm ja jz ln lo je kd lp lq ji lr bi translated">4.流失聚类分析</h2><p id="a73f" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">我们还可以检查输入特征之间是否有任何聚类关系(例如<code class="du lt lu lv lw b">Tenure</code>和<code class="du lt lu lv lw b">MonthlyCharges</code>)</p><figure class="ly lz ma mb fd ij er es paragraph-image"><div class="er es mr"><img src="../Images/b3b45f417d4aef4ad8b3ac7975586559.png" data-original-src="https://miro.medium.com/v2/resize:fit:794/format:webp/1*5wvm9evdKgPbE08CpRjDtw.png"/></div></figure><pre class="ly lz ma mb fd me lw mf mg aw mh bi"><span id="6e0f" class="le in hi lw b fi mi mj l mk ml"><br/>sns.lmplot(<br/>x='Tenure',<br/>y='MonthlyCharges',<br/>data=df_cal,<br/>hue='Churn',<br/>fit_reg=<strong class="lw hj">False</strong>,<br/>markers=["o", "x"],<br/>palette=plotColor)</span><span id="dc0e" class="le in hi lw b fi ms mj l mk ml">plt.show()<br/></span><span id="22b0" class="le in hi lw b fi ms mj l mk ml"><em class="lx"># checking number of clusters</em><br/><br/>Create_elbow_curve(df_cal[df_cal.Churn==1][['Tenure_norm','MonthlyCharges_norm']])</span></pre><figure class="ly lz ma mb fd ij er es paragraph-image"><div class="er es mt"><img src="../Images/a2b9eeb2a402c8c578ab1ccad231b45e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*hD0OfjNEVhwqCsgNBHPBLg.png"/></div><figcaption class="mu mv et er es mw mx bd b be z dx translated">从肘部曲线来看，3似乎最有效。</figcaption></figure><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="er es my"><img src="../Images/5b5ef77c71f1ed4b340e3a2c3df7c156.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HzprDncIho1gTjJldiTyeA.png"/></div></div></figure><h2 id="fa37" class="le in hi bd io lf lg lh is li lj lk iw jv ll lm ja jz ln lo je kd lp lq ji lr bi translated">5.流失预测模型</h2><p id="0128" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">应该使用各种模型来比较哪种模型更适合数据集。热门车型有<code class="du lt lu lv lw b">Logistic Regression</code>、<code class="du lt lu lv lw b">Random forest</code>、<code class="du lt lu lv lw b">Gradient boosting</code>。超参数调整过程也用于获得每个模型的最佳参数。</p><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="er es mz"><img src="../Images/ea4d12a487d264631d272aa90eff7ab2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ECaWn1ed-x9TuDHXV5idkg.png"/></div></div></figure><h2 id="9b88" class="le in hi bd io lf lg lh is li lj lk iw jv ll lm ja jz ln lo je kd lp lq ji lr bi translated">6.保留计划</h2><p id="f225" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">最后一步是使用当前数据上生成的模型来找出客户流失的概率。有了确定的流失群体，我们可以进一步将他们分为不同的风险因素—低、中、高风险。保留计划可以提供给<code class="du lt lu lv lw b">high risk</code>组。</p></div></div>    
</body>
</html>