<html>
<head>
<title>Graph temperature and humidity using Raspberry Pi and AWS Cloudwatch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Raspberry Pi和AWS Cloudwatch绘制温度和湿度图</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/graph-temperature-and-humidity-using-raspberry-pi-and-aws-cloudwatch-cfa55451ff7c?source=collection_archive---------16-----------------------#2020-03-26">https://medium.com/analytics-vidhya/graph-temperature-and-humidity-using-raspberry-pi-and-aws-cloudwatch-cfa55451ff7c?source=collection_archive---------16-----------------------#2020-03-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="54c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我做过许多关于Raspberry Pi和AWS的项目，但是大多数都有一个共同的缺陷。此外，如果你的项目时间有限，就很难长期管理它们。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/e0850418a53cce2c686dcf5e3a60a442.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qqtVnd8NwCvhzJ2_hPbdnQ.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">使用Raspberry Pi进行温度和湿度监控非常简单</figcaption></figure><p id="3cb8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我决定下一个项目时，我的主要标准是它必须非常容易开发和管理。因此，我决定使用树莓Pi的DHT11传感器，它可以帮助您测量湿度和温度。</p><p id="017d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将传感器连接到RPI并不困难，甚至不需要PCB(印刷电路板)或任何其他部件。只需将三根电缆连接到RPI板上，就可以了。</p><p id="0d30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">主要问题是如何存储传感器数据。当然，您可以将InfluxDB与Grafana或任何其他时间序列数据库一起使用。我不会说它在某种程度上很难建立，但一年左右后，你会发现它可能很难管理。相信我，我在系统管理方面有很多经验，我知道在你几乎忘记了一个项目的一切之后，再去做所有的升级和维护总是很遗憾的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jt"><img src="../Images/a649cbcbca2e1f6de56e91b9ec1be294.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/format:webp/1*wUTB1WhyYUkEeLebXNTm4g.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">您可以轻松地将DHT11传感器连接到RPi，无需电路板</figcaption></figure><p id="fb96" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以我开始考虑一些管理解决方案。相信我，我更多地考虑AWS，因为我每天都在使用它。不幸的是，我无法在整个AWS栈中找到一些带有图形工具的通用时间序列数据库。唯一的可能性是使用Cloudwatch获得一个带有推送指标的图表。</p><p id="a7e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我不觉得这是冒犯。此外，我发现网上有更多的人有同样的想法。我在NodeJS中找到了这个由HumbleCode编写的解决方案(在撰写本文时，该站点处于离线状态，所以我没有附上链接)。我很高兴我能够这么快地测试我的解决方案，只是因为有人在我之前解决了同样的问题。</p><p id="e5f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">HumbleCode的问题是代码质量相当低，至少对我来说是这样。您应该在控制台中运行守护程序，作为名为“screen”的实用程序中的前端进程，该实用程序允许您在后台运行控制台，这意味着您必须在每次重新启动Raspberry Pi时手动启动守护程序。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ju"><img src="../Images/c0d5bab286b417e031f11cbf9e3e05b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dKNzfGytA4etK6F2vAM8DA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">在AWS Cloudwatch中监控温度和湿度</figcaption></figure><p id="3344" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，所有变量(例如AWS凭证)都是硬编码的，应用程序的日志记录非常弱。这是一个大问题，因为当传感器意外断开时，我不只是知道。</p><p id="33ef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些是我决定从头重写传感器代理代码的主要原因。因为我不熟悉NodeJS，所以我决定使用Python作为编程语言。</p><p id="eed0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我用原来的解决方案解决了所有的问题。例如，我的代理不仅将度量放入Cloudwatch，还将度量的状态记录到Cloudwatch日志中。这是为什么呢？如果您的RPI与网络断开连接，或者传感器出现问题，您可以在Cloudwatch中轻松设置一个警报，它会通过电子邮件或短信通知您。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jv"><img src="../Images/b82944a5941b20bf7fd652dfafd3aba2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*Ccug5D1M3BnSIJoAGKvCdg.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">这也是一个好主意，看看你的树莓派和传感器的状态</figcaption></figure><p id="3141" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我的代码也作为SystemD守护进程工作，所以它可以在设备每次启动时自动启动——不需要手动干预。</p><p id="da83" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我对目前的解决方案相当满意。它不需要任何维护，只是工作。如果你也想建立这个项目，你可以在GitHub上查看我的代码—<a class="ae jw" href="https://github.com/koss822/misc/tree/master/Aws/dht11" rel="noopener ugc nofollow" target="_blank">https://github.com/koss822/misc/tree/master/Aws/dht11</a></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jx"><img src="../Images/b2680f516287b34fa044a5387555bbc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gawoHNawVNPF_3cH7sDxDw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">所有必要的代码都已经用Python写好了</figcaption></figure></div></div>    
</body>
</html>