<html>
<head>
<title>How to automate run your python script in your Raspberry Pi</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Raspberry Pi中自动运行python脚本</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-automate-run-your-python-script-in-your-raspberry-pi-b6fe652443db?source=collection_archive---------0-----------------------#2020-07-07">https://medium.com/analytics-vidhya/how-to-automate-run-your-python-script-in-your-raspberry-pi-b6fe652443db?source=collection_archive---------0-----------------------#2020-07-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/2096b8b36fa3460f9203c420a54f34fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CA4XqtiDskUb3dK5"/></div></div></figure><p id="1cef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">大家好，今天我们将讨论自动化任务。你们中的许多人可能拥有python脚本来帮助你做一些事情。我有一个。我的python脚本是一个日常新冠肺炎机器人。它只是将日常案例的通知消息推送到LINE应用程序和我的Twitter帐户。只是更好地了解情况，不是吗？</p><p id="30e1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">嗯，我不想每天手动运行它，因为如果我这样做，它可能会远离“机器人”这个词。我决定把它保存在我的单板电脑里，我有一台叫做树莓派的电脑。它也24/7运行，所以，这是一个好地方。</p><p id="f280" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我假设你们所有人的单板计算机上都安装了Linux。在Linux中有一个用于任务调度的工具，叫做<strong class="is hj">【Crontab】</strong>。今天，我们将使用crontab运行我们的python脚本。</p><h2 id="8698" class="jp jq hi bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">介绍</h2><blockquote class="kk kl km"><p id="141c" class="iq ir kn is b it iu iv iw ix iy iz ja ko jc jd je kp jg jh ji kq jk jl jm jn hb bi translated">最好了解一下crontab</p></blockquote><p id="86bc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，我们可以通过打开终端并传递以下命令来访问crontab:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="ae78" class="jp jq hi kw b fi la lb l lc ld">crontab -e</span></pre><p id="516d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="kn">(如果你第一次运行，它可能会要求你选择要编辑的内容。我会推荐Nano或者VIM。它很容易使用。)</em></p><p id="2db8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">打开编辑器后，它将向您展示该命令是如何工作的。可以总结如下:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="b7a9" class="jp jq hi kw b fi la lb l lc ld">* * * * * command to be executed<br/> - - - - -<br/> | | | | |<br/> | | | | ----- Day of week (0 - 7) (Sunday=0 or 7)<br/> | | | ------- Month (1 - 12)<br/> | | --------- Day of month (1 - 31)<br/> | ----------- Hour (0 - 23)<br/> ------------- Minute (0 - 59)</span></pre><ul class=""><li id="9592" class="le lf hi is b it iu ix iy jb lg jf lh jj li jn lj lk ll lm bi translated">第一个<code class="du ln lo lp kw b">*</code>是0–59之间的分钟范围</li><li id="342f" class="le lf hi is b it lq ix lr jb ls jf lt jj lu jn lj lk ll lm bi translated">第二个<code class="du ln lo lp kw b">*</code>小时范围在0–23之间</li><li id="f68a" class="le lf hi is b it lq ix lr jb ls jf lt jj lu jn lj lk ll lm bi translated">第三<code class="du ln lo lp kw b">*</code>日的范围是在1-31之间吗</li><li id="069b" class="le lf hi is b it lq ix lr jb ls jf lt jj lu jn lj lk ll lm bi translated">4号<code class="du ln lo lp kw b">*</code>月份范围在1-12之间</li><li id="1611" class="le lf hi is b it lq ix lr jb ls jf lt jj lu jn lj lk ll lm bi translated">5日<code class="du ln lo lp kw b">*</code>是工作日的范围在0–6之间(0是星期天，6是星期六)</li><li id="2385" class="le lf hi is b it lq ix lr jb ls jf lt jj lu jn lj lk ll lm bi translated"><strong class="is hj">第6个</strong>T5<strong class="is hj">是运行脚本的命令</strong></li></ul><p id="57a4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">例如，如果你想在每天10:45做一些事情，你可以把命令写成:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="85b7" class="jp jq hi kw b fi la lb l lc ld">45 10 * * * yourcommand</span></pre><p id="b14f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于那些有困难并且不确定命令语法的人，你可以使用下面的网站来了解公会的想法。</p><div class="lv lw ez fb lx ly"><a href="https://crontab.guru/" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab dw"><div class="ma ab mb cl cj mc"><h2 class="bd hj fi z dy md ea eb me ed ef hh bi translated">crontab . guru——cron调度表达式编辑器</h2><div class="mf l"><h3 class="bd b fi z dy md ea eb me ed ef dx translated">我们创建了Cronitor，因为cron本身无法在您的作业失败或从未启动时提醒您。Cronitor易于集成…</h3></div><div class="mg l"><p class="bd b fp z dy md ea eb me ed ef dx translated">crontab.guru</p></div></div></div></a></div><p id="0756" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">或者，如果您想通过选择日期和时间来执行相反的操作，并且需要生成命令，您可以访问下面的网站:</p><div class="lv lw ez fb lx ly"><a href="https://crontab-generator.org/" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab dw"><div class="ma ab mb cl cj mc"><h2 class="bd hj fi z dy md ea eb me ed ef hh bi translated">Crontab生成器-生成crontab语法</h2><div class="mf l"><h3 class="bd b fi z dy md ea eb me ed ef dx translated">如果您想要定期执行任务(例如，发送电子邮件、备份数据库、进行定期维护等)。)…</h3></div><div class="mg l"><p class="bd b fp z dy md ea eb me ed ef dx translated">crontab-generator.org</p></div></div></div></a></div><h2 id="b787" class="jp jq hi bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">Python脚本任务计划</h2><p id="af58" class="pw-post-body-paragraph iq ir hi is b it mh iv iw ix mi iz ja jb mj jd je jf mk jh ji jj ml jl jm jn hb bi translated">现在，我们都知道crontab是如何工作的。让我们将它与我们的python脚本集成在一起。首先，我将创建一个简单的<strong class="is hj">‘hello world’</strong>python脚本，并将其保存在桌面中。转到终端和<code class="du ln lo lp kw b">cd Desktop</code>。然后，我用Nano创建python脚本为<code class="du ln lo lp kw b">nano pytest.py</code>。在nano编辑器中，我编写了经典的代码。</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="e1d4" class="jp jq hi kw b fi la lb l lc ld">print('hello world')</span></pre><p id="b57c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">按下“Cmd+x ”,或者如果你是Windows的人，使用“Ctrl+x”。然后，您可以按“y”保存并退出编辑器。让我们试着运行代码，打开终端并键入<code class="du ln lo lp kw b">python3 pytest.py</code>。终端应该显示如下内容:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="ab0b" class="jp jq hi kw b fi la lb l lc ld">hello world</span></pre><p id="17ef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">工作正常！现在，我们可以将python脚本添加到crontab中。然而，在此之前，我们需要知道我们的python执行器在哪里。在Linux中，我们可以使用命令<code class="du ln lo lp kw b">which python3</code> <em class="kn">(我用的是python3) </em>找到执行程序的路径。通常，它应该位于以下路径中:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="95b3" class="jp jq hi kw b fi la lb l lc ld">/usr/bin/python3</span></pre><p id="7f23" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们已经准备好自动化python脚本。关于crontab，您可能需要了解的最后一步。crontab <strong class="is hj">在终端不显示任何输出</strong>。要检查您的任务计划是否仍在运行，您可以创建日志文件来保存结果。这可以通过简单地对日志文件使用<code class="du ln lo lp kw b">&gt;&gt;</code>语法来完成，如下例所示:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="33a6" class="jp jq hi kw b fi la lb l lc ld">&gt;&gt; /home/pi/Desktop/log.txt</span></pre><p id="12fd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上面的命令将在您的桌面上创建名为“log”的文本文件。它可以包含python脚本的任何输出。在这种情况下，每当脚本运行时，它都会追加“hello world”。您可以参考下面的完整命令:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="e611" class="jp jq hi kw b fi la lb l lc ld">* * * * * /usr/bin/python3 /home/pi/Desktop/pytest.py &gt;&gt; /home/pi/Desktop/log.txt</span></pre><p id="a7c3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当您可以确保您的crontab正在工作时，您可能不需要创建<code class="du ln lo lp kw b">log.txt</code>。您只能为您的任务计划程序保留<code class="du ln lo lp kw b">* * * * * /usr/bin/python3 /home/pi/Desktop/pytest.py</code>。</p><p id="ed08" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">仅此而已！简单有用就好。下次见。</p><p id="c3da" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以在LinkedIn上找到我，链接如下:</p><div class="lv lw ez fb lx ly"><a href="https://www.linkedin.com/in/sasiwut-chaiyadecha/" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab dw"><div class="ma ab mb cl cj mc"><h2 class="bd hj fi z dy md ea eb me ed ef hh bi translated">sasiwut chaiyade cha-EY高级顾问| LinkedIn</h2><div class="mf l"><h3 class="bd b fi z dy md ea eb me ed ef dx translated">Sasiwut是泰国EY公司从事绩效改进(PI)的高级顾问。目前，主要重点是…</h3></div><div class="mg l"><p class="bd b fp z dy md ea eb me ed ef dx translated">www.linkedin.com</p></div></div></div></a></div></div></div>    
</body>
</html>