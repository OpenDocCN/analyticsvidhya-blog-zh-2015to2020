<html>
<head>
<title>Analysis of Indian Covid Data using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python分析印度Covid数据</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/analysis-of-indian-covid-data-6cd043856215?source=collection_archive---------21-----------------------#2020-06-01">https://medium.com/analytics-vidhya/analysis-of-indian-covid-data-6cd043856215?source=collection_archive---------21-----------------------#2020-06-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="899a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇文章中，我使用python分析了https://www.covid19india.org/网站上的印度covid数据。他们在下面的github库开源了他们的数据库</p><div class="je jf ez fb jg jh"><a href="https://github.com/covid19india/api" rel="noopener  ugc nofollow" target="_blank"><div class="ji ab dw"><div class="jj ab jk cl cj jl"><h2 class="bd hj fi z dy jm ea eb jn ed ef hh bi translated">covid 19印度/api</h2><div class="jo l"><h3 class="bd b fi z dy jm ea eb jn ed ef dx translated">这是一个志愿者驱动的众包数据库，用于新冠肺炎统计和印度患者追踪</h3></div><div class="jp l"><p class="bd b fp z dy jm ea eb jn ed ef dx translated">github.com</p></div></div><div class="jq l"><div class="jr l js jt ju jq jv jw jh"/></div></div></a></div><p id="8cc0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">他们在github存储库中以json格式提供covid数据。最有用的api链接如下:</p><p id="1987" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1 https://api.covid19india.org/state_test_data.json<a class="ae jd" href="https://api.covid19india.org/state_test_data.json" rel="noopener ugc nofollow" target="_blank"/></p><p id="3d52" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它包含json格式的状态测试数据。有各州案例和测试的数据。</p><p id="0f14" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2 https://api.covid19india.org/state_district_wise.json<a class="ae jd" href="https://api.covid19india.org/state_district_wise.json" rel="noopener ugc nofollow" target="_blank"/></p><p id="32e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它包含每个州当前病例、康复和死亡的地区分类。</p><p id="9437" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3<a class="ae jd" href="https://api.covid19india.org/districts_daily.json" rel="noopener ugc nofollow" target="_blank">https://api.covid19india.org/districts_daily.json</a></p><p id="a283" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它包含印度每个地区的每日病例、死亡和康复更新。</p><p id="cbea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4<a class="ae jd" href="https://api.covid19india.org/data.json" rel="noopener ugc nofollow" target="_blank">https://api.covid19india.org/data.json</a></p><p id="ac77" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它包含印度每日病例、死亡和恢复的更新。</p><p id="df5f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">状态测试数据</strong></p><p id="d239" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用户可以使用请求库导入测试数据，如下所示:</p><figure class="jx jy jz ka fd kb"><div class="bz dy l di"><div class="kc kd l"/></div></figure><p id="b7f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请求库get函数返回html响应。我们可以使用文本方法访问网页的文本。我们可以看到它返回了一个包含json的字符串。</p><p id="1c8d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来使用json库的loads方法，我们可以将它解析为一个json对象。我们将它保存在state_json_data变量中。</p><p id="4f8f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个json对象包含一个带有关键字state_tested_data字典，其值包含每个状态的每日更新数组。每次更新都包含累积测试和阳性病例的数量。</p><p id="a2d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以我们迭代json，并将更新数据保存在单独的数组中。然后，我们可以将这些数组导入Pandas数据帧，如下所示:</p><figure class="jx jy jz ka fd kb"><div class="bz dy l di"><div class="kc kd l"/></div></figure><p id="5382" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">dataframe的每一列都有字符串数据类型。因此，我们必须将“日期”列转换为日期时间格式，并将“正”和“总测试”列转换为整数数据类型。</p><p id="d2f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以使用pandas astype方法将' totaltested '和' positive '列转换为整数类型。但是由于缺少值，它会抛出错误。我们可以看到它们的一些字段包含空字符串。</p><figure class="jx jy jz ka fd kb er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es ke"><img src="../Images/da9a3cf5c9a560ef4f35a30788fe72d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0SxMW4UqOCkEVPG2gXuzMg.png"/></div></div></figure><p id="6e24" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们可以使用fillna函数的pandas forward fill方法用前一天的值替换空字符串。然后我们可以使用pandas类型函数将它们转换成整数数据类型。</p><p id="9f26" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以使用pandas to_datetime函数将“日期”列转换为datetime数据类型，如下所示:</p><figure class="jx jy jz ka fd kb"><div class="bz dy l di"><div class="kc kd l"/></div></figure><p id="f833" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们的数据框架包含每天的全部测试和全部阳性病例的数据。通过计算每行之间的差异，我们可以获得每日案例和测试的数量。但为此，我们需要确保数据是按州和日期排序的。</p><p id="cbc6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，首先我们使用pandas sort_values按状态和日期对行进行排序，然后我们使用pandas diff方法获得行的差异。最后，对于每个状态的第一行，我们将difference指定为初始值，因为我们没有之前日期的值。</p><figure class="jx jy jz ka fd kb"><div class="bz dy l di"><div class="kc kd l"/></div></figure><p id="4ed9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们可以绘制主要状态的日常测试，如下所示</p><figure class="jx jy jz ka fd kb"><div class="bz dy l di"><div class="kc kd l"/></div></figure><figure class="jx jy jz ka fd kb er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es kk"><img src="../Images/bf6fde207da86c3aa1aeb4386e11fb16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sdmGnQ014eJUUp3wASYQvA.png"/></div></div></figure><p id="3742" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">马哈拉施特拉邦每天做的测试最多。然而，卡纳塔克邦在过去的两周里经历了更多的测试。</p><p id="c6f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">类似地，我们也可以绘制这些主要州完成的总测试:</p><figure class="jx jy jz ka fd kb er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es kk"><img src="../Images/b3cde6f32e9011f36736efa95398d3de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zmmXenPyZzms1GliXl9YZw.png"/></div></div></figure><p id="8496" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">马哈拉施特拉邦在印度做了最多的测试。德里和古吉拉特有相似的病例数，他们做了几乎相同数量的测试。西孟加拉邦最初在测试数量上落后，但现在几乎赶上了德里和古吉拉特邦。</p><p id="8724" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，如果我们把所有的病例都画出来，就会出现不同的情况。</p><figure class="jx jy jz ka fd kb er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es kk"><img src="../Images/7a254f8113e2230db4c8993bdbafea21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8k7WnzjruqbDLaYMu-MPBg.png"/></div></div></figure><p id="9b6e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">马哈拉施特拉邦的病例上升速度比其他邦快得多。德里和古吉拉特邦的病例数与他们的测试相同。但是卡纳塔克邦、喀拉拉邦和西孟加拉邦的病例数要低得多。</p><p id="a5e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以我画出了每个州的测试阳性率，如下图所示</p><figure class="jx jy jz ka fd kb"><div class="bz dy l di"><div class="kc kd l"/></div></figure><figure class="jx jy jz ka fd kb er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es kk"><img src="../Images/ff797bcff1b9bc82379d670f6f928d01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t7NJxsAw4sQQ1vwiIrFOcg.png"/></div></div></figure><p id="5e29" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">德里和古吉拉特邦的检测阳性率保持稳定。然而，自5月初以来，马哈拉施特拉邦的检测阳性率正在上升。</p><p id="4c5e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">地区日期型数据</strong></p><p id="88e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我处理各区的每日数据。在https://api.covid19india.org/districts_daily.json<a class="ae jd" href="https://api.covid19india.org/districts_daily.json" rel="noopener ugc nofollow" target="_blank">有售</a></p><p id="8549" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">像上面的例子一样，我使用下面的代码转换成熊猫数据帧:</p><figure class="jx jy jz ka fd kb"><div class="bz dy l di"><div class="kc kd l"/></div></figure><p id="23ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我使用以下代码计算了每个地区5月份确诊病例数的增长率</p><figure class="jx jy jz ka fd kb"><div class="bz dy l di"><div class="kc kd l"/></div></figure><p id="734d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于在5月底有超过1000例确诊病例的地区，以下是它们在该月确诊病例的增长率:</p><figure class="jx jy jz ka fd kb er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es ke"><img src="../Images/3b8ca868215ec04369da0e6eb6c1a950.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mcnS33sks6xat4zhrUeVTQ.png"/></div></div></figure><p id="7c21" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以看到，钦奈在5月份的增长率非常惊人。16倍的增长意味着这个月钦奈的病例每周翻一番。</p><p id="00f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">孟买的病例增加了5.4倍，这意味着孟买的倍增期略低于2周。</p><p id="ccfd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">利用这些数据，我们还可以绘制印度任何地区的病例图表。使用matplotlib，我为mumbai案例绘制了如下图形:</p><figure class="jx jy jz ka fd kb er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es kk"><img src="../Images/ca281728f3b1b60f9fe5af22da95d775.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xYELe2FVux9xRqmVcm8qjA.png"/></div></div></figure><p id="bb63" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，为其他地区重复绘图是很麻烦的。</p><p id="aa10" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以我用d3 javascript库绘制了这些数据。您可以单击并选择一个区域来绘制其曲线。你必须点击下面的结果标签，然后你可以选择地区来查看它的图表。</p><figure class="jx jy jz ka fd kb"><div class="bz dy l di"><div class="kl kd l"/></div></figure><p id="da26" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您在介质中看图表有问题。你可以在下面的链接看到它</p><p id="1546" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://jsfiddle.net/rohitrajjsfiddle/961txdp0/10/" rel="noopener ugc nofollow" target="_blank">https://jsfiddle.net/rohitrajjsfiddle/961txdp0/10/</a>秀</p><p id="4727" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇文章中，我解释了如何访问covidindia网站的API数据，并在python中使用它进行分析。人们可以使用这个数据集进行更多的分析。</p><p id="cb5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在下一篇文章中，我将解释如何使用D3库对Covid数据进行交互式可视化。</p></div></div>    
</body>
</html>