<html>
<head>
<title>Twitter Sentiments Analysis using a Classification Algorithm</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用分类算法的推特情感分析</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/twitter-sentiments-analysis-using-a-classification-algorithm-441599b29db0?source=collection_archive---------14-----------------------#2020-09-14">https://medium.com/analytics-vidhya/twitter-sentiments-analysis-using-a-classification-algorithm-441599b29db0?source=collection_archive---------14-----------------------#2020-09-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="21ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于那些探索ML的人来说，Twitter情绪分析是一个非常受欢迎的项目，它试图通过NLTK或自然语言工具包分析最近的推文来捕捉Twitter上特定关键字的整体情绪。</p><p id="dd12" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，一个简单的词，如<strong class="ih hj">“movies”</strong>，可以作为输入传递给模型，它会根据从实时流数据中提取的最近100条推文，按百分比显示围绕该词的情感饼状图。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/fa6161ce363271f9c47d665927cc1ac9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gi1Q8LBTkFx66mbZM64_IA.png"/></div></div></figure><p id="c756" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我会尽量详细，这样即使你是机器学习的新手，你也应该能够从头到尾运行它。我们开始吧！</p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><h1 id="4da6" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">开始之前</h1><p id="9e32" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">从我在这篇文章中提到的地方大喊到towardsdatascience.com的<a class="ae kz" href="http://towardsdatascience.com" rel="noopener" target="_blank"/>，总的来说，这是一个很棒的网站。</p><div class="la lb ez fb lc ld"><a href="https://towardsdatascience.com/creating-the-twitter-sentiment-analysis-program-in-python-with-naive-bayes-classification-672e5589a7ed" rel="noopener follow" target="_blank"><div class="le ab dw"><div class="lf ab lg cl cj lh"><h2 class="bd hj fi z dy li ea eb lj ed ef hh bi translated">用Python和朴素贝叶斯分类创建Twitter情感分析程序</h2><div class="lk l"><h3 class="bd b fi z dy li ea eb lj ed ef dx translated">如果你在科技领域呆得够久，你一定听说过情绪分析这个术语。这是一个过程…</h3></div><div class="ll l"><p class="bd b fp z dy li ea eb lj ed ef dx translated">towardsdatascience.com</p></div></div><div class="lm l"><div class="ln l lo lp lq lm lr jn ld"/></div></div></a></div><h2 id="085c" class="ls jx hi bd jy lt lu lv kc lw lx ly kg iq lz ma kk iu mb mc ko iy md me ks mf bi translated">先决条件</h2><blockquote class="mg mh mi"><p id="90f6" class="if ig mj ih b ii ij ik il im in io ip mk ir is it ml iv iw ix mm iz ja jb jc hb bi translated"><em class="hi"> -精通</em> python、pandas、nltk、matplotlib</p><p id="df81" class="if ig mj ih b ii ij ik il im in io ip mk ir is it ml iv iw ix mm iz ja jb jc hb bi translated"><em class="hi"> -一个</em> Twitter开发者账户<em class="hi">和四个密钥(</em>消费者密钥、消费者秘密、访问令牌密钥、访问令牌秘密<em class="hi"> ) </em></p><p id="43fb" class="if ig mj ih b ii ij ik il im in io ip mk ir is it ml iv iw ix mm iz ja jb jc hb bi translated"><em class="hi"> -对</em>朴素贝叶斯分类器算法<em class="hi">和</em>词向量映射<em class="hi">(NLTK的一个极其有用和令人敬畏的概念)</em></p></blockquote></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><h1 id="4a65" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">让我们编码</h1><p id="17fb" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">导入所有这些包</p><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="eba9" class="ls jx hi mo b fi ms mt l mu mv">import twitter<br/>import csv<br/>import time<br/>import pandas as pd<br/>import os<br/>from pandas import DataFrame<br/>import numpy as np<br/>import collections<br/>from sklearn.model_selection import train_test_split<br/>import random<br/>import matplotlib.pyplot as plt<br/>import re<br/>import nltk<br/>from nltk.tokenize import word_tokenize<br/>from string import punctuation<br/>from nltk.corpus import stopwords</span></pre><p id="1299" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有些是基本软件包，有些软件包需要以不同的方式安装:</p><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="a28c" class="ls jx hi mo b fi ms mt l mu mv">pip install nltk<br/>python -m nltk.downloader stopwords</span></pre><h2 id="8a71" class="ls jx hi bd jy lt lu lv kc lw lx ly kg iq lz ma kk iu mb mc ko iy md me ks mf bi translated">进入python shell并键入:</h2><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="2af9" class="ls jx hi mo b fi ms mt l mu mv">import nltk<br/>nltk.download()</span><span id="0554" class="ls jx hi mo b fi mw mt l mu mv"><strong class="mo hj"><em class="mj">Then an installation window appears. Go to the ‘Models’ tab and select ‘Punkt’, ‘Words’ from under the ‘Identifier’ column. Then click Download and it will install the necessary files.</em></strong></span></pre><h2 id="bb07" class="ls jx hi bd jy lt lu lv kc lw lx ly kg iq lz ma kk iu mb mc ko iy md me ks mf bi translated">初始化python API实例(这里使用您自己的4个键)</h2><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="a579" class="ls jx hi mo b fi ms mt l mu mv">twitter_api = twitter.Api(consumer_key=’&lt;&lt;...&gt;&gt;’,<br/>                          consumer_secret=’&lt;&lt;...&gt;&gt;’,<br/>                          access_token_key=’&lt;&lt;...&gt;&gt;’,<br/>                          access_token_secret=’&lt;&lt;...&gt;&gt;’)</span><span id="f52e" class="ls jx hi mo b fi mw mt l mu mv"><strong class="mo hj"># test authentication</strong></span><span id="5532" class="ls jx hi mo b fi mw mt l mu mv">print(twitter_api.VerifyCredentials())</span></pre><p id="4ca2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您应该会看到如下输出:</p><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="738b" class="ls jx hi mo b fi ms mt l mu mv"><em class="mj">{"created_at": "Mon Aug 17 01:11:11 +0000 2020", "default_profile": true, .....</em></span></pre></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="c59d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以从以下位置下载输入文件，<strong class="ih hj"> tweets.csv，</strong>。这个文件有两列:tweet文本和相应的标签(“正面”、“负面”、“中性”、“无关”)</p><div class="la lb ez fb lc ld"><a href="https://github.com/guptapallavi30/Datasets/blob/master/tweets.csv" rel="noopener  ugc nofollow" target="_blank"><div class="le ab dw"><div class="lf ab lg cl cj lh"><h2 class="bd hj fi z dy li ea eb lj ed ef hh bi translated">Gupta pallavi 30/数据集</h2><div class="lk l"><h3 class="bd b fi z dy li ea eb lj ed ef dx translated">Permalink GitHub是5000多万开发人员的家园，他们一起工作来托管和审查代码、管理项目以及…</h3></div><div class="ll l"><p class="bd b fp z dy li ea eb lj ed ef dx translated">github.com</p></div></div><div class="lm l"><div class="mx l lo lp lq lm lr jn ld"/></div></div></a></div><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="865c" class="ls jx hi mo b fi ms mt l mu mv"><strong class="mo hj"># Import the csv file</strong></span><span id="d957" class="ls jx hi mo b fi mw mt l mu mv">script_dir = os.getcwd()<br/>file = 'tweets.csv'<br/>tweetDataFile = os.path.normcase(os.path.join(script_dir, file))</span><span id="e03b" class="ls jx hi mo b fi mw mt l mu mv"><strong class="mo hj"># Convert CSV to Pandas DataFrame</strong></span><span id="1ff5" class="ls jx hi mo b fi mw mt l mu mv">df = pd.read_csv(os.path.normcase(os.path.join(script_dir, file)), header=0, index_col=None)</span><span id="440d" class="ls jx hi mo b fi mw mt l mu mv"><strong class="mo hj"># shuffle the DataFrame rows</strong></span><span id="4160" class="ls jx hi mo b fi mw mt l mu mv">df = df.sample(frac = 1)<br/>X = df[['text', 'label']]<br/>y = df['label']</span><span id="2ccd" class="ls jx hi mo b fi mw mt l mu mv">print(X.shape)<br/>print(y.shape)</span></pre><p id="16dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您应该会看到如下输出</p><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="dfb2" class="ls jx hi mo b fi ms mt l mu mv"><em class="mj">(4415, 2)<br/>(4415,)</em></span></pre></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="f4b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们分割数据集进行训练和测试。</p><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="f7f1" class="ls jx hi mo b fi ms mt l mu mv">X_train, X_test, y_train, y_test = train_test_split(X, y, test_size = 0.2)</span><span id="a325" class="ls jx hi mo b fi mw mt l mu mv">class_counts = dict(collections.Counter(y))<br/>print (f"X_train: {X_train.shape}, y_train: {y_train.shape}")<br/>print (f"X_test: {X_test.shape}, y_test: {y_test.shape}")<br/>print (f"Classes: {class_counts}")</span></pre><p id="ae16" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您应该会看到如下输出</p><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="1942" class="ls jx hi mo b fi ms mt l mu mv"><em class="mj">X_train: (3532, 2), y_train: (3532,)<br/>X_test: (883, 2), y_test: (883,)<br/>Classes: {'neutral': 1817, 'irrelevant': 1349, 'negative': 701, 'positive': 548}</em></span></pre></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><pre class="mn mo mp mq aw mr bi"><span id="1e3e" class="ls jx hi mo b fi my mz na nb nc mt l mu mv"><strong class="mo hj"># get all english words</strong></span><span id="0ac3" class="ls jx hi mo b fi mw mt l mu mv">eng_words = set(nltk.corpus.words.words())</span><span id="5f40" class="ls jx hi mo b fi mw mt l mu mv"><strong class="mo hj"># stopwords, punctuations, you can add your own words too</strong></span><span id="8530" class="ls jx hi mo b fi mw mt l mu mv">stopwords = set(stopwords.words('english')<br/>                      + list(punctuation)<br/>                      + ['url', 'google', 'microsoft' + 'apple' + <br/>                        'twitter', 'rt', 'android'])</span></pre></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="50f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建一个函数，<strong class="ih hj"> prepare_data_set </strong>，如下所示，用于从X_train，X_test数据集准备一个训练集。</p><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="6bfb" class="ls jx hi mo b fi ms mt l mu mv">def prepare_data_set(data):<br/>       datasets=[]<br/>       for row in data.values:<br/>              tweet_words = clean_tweet(row[0])<br/>              label = row[1]</span><span id="1c8c" class="ls jx hi mo b fi mw mt l mu mv"><strong class="mo hj"># important point to be noted here, we are adding              <br/>               # array of data, not individual element               <br/>               # ((tweet_words,label)) instead of(tweet_words,label)                   <br/>               # link words with classification label to train model</strong><br/>               <br/>               datasets.append((tweet_words,label))<br/>       return datasets</span></pre><p id="5b5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建一个函数，<strong class="ih hj"> clean_tweet </strong>，如下所示，因为它用于删除tweet中不必要的数据。</p><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="85a6" class="ls jx hi mo b fi ms mt l mu mv">def clean_tweet(tweet):</span><span id="27ed" class="ls jx hi mo b fi mw mt l mu mv">tweet = tweet.lower()</span><span id="c24b" class="ls jx hi mo b fi mw mt l mu mv"><strong class="mo hj"># find words starting from # like hashtags</strong></span><span id="610d" class="ls jx hi mo b fi mw mt l mu mv">hashWords = set({tag.strip("#") for tag in tweet.split() if tag.startswith("#")})</span><span id="b717" class="ls jx hi mo b fi mw mt l mu mv"><strong class="mo hj"># find words starting from @, it is for usernames</strong></span><span id="6fe9" class="ls jx hi mo b fi mw mt l mu mv">usernames = set({tag.strip("@") for tag in tweet.split() if tag.startswith("@")})</span><span id="7a76" class="ls jx hi mo b fi mw mt l mu mv"><strong class="mo hj"># remove url starting from www or https</strong></span><span id="9059" class="ls jx hi mo b fi mw mt l mu mv">tweet = re.sub('((www\.[^\s]+)|(https?://[^\s]+))', 'URL', tweet)</span><span id="0acc" class="ls jx hi mo b fi mw mt l mu mv"><strong class="mo hj"># create a dictionary of words from tweet</strong></span><span id="7f3a" class="ls jx hi mo b fi mw mt l mu mv">tweet = word_tokenize(tweet)</span><span id="e0e5" class="ls jx hi mo b fi mw mt l mu mv"><strong class="mo hj"># exclude hashWords, usernames</strong></span><span id="0da1" class="ls jx hi mo b fi mw mt l mu mv">tweet = [word for word in tweet if word not in hashWords]<br/>tweet = [word for word in tweet if word not in usernames]</span><span id="bac8" class="ls jx hi mo b fi mw mt l mu mv"><strong class="mo hj"># remove stopwords, declared above</strong></span><span id="d513" class="ls jx hi mo b fi mw mt l mu mv">tweet = [word for word in tweet if word not in stopwords]</span><span id="6e49" class="ls jx hi mo b fi mw mt l mu mv"><strong class="mo hj"># non-english words are not used in this classification model</strong></span><span id="ed5c" class="ls jx hi mo b fi mw mt l mu mv">tweet = [word for word in tweet if word in eng_words]</span><span id="4edd" class="ls jx hi mo b fi mw mt l mu mv"><strong class="mo hj"># remove words of length less than 2, like 'an', 'so'</strong></span><span id="3031" class="ls jx hi mo b fi mw mt l mu mv">tweet = [word for word in tweet if len(word) &gt; 2]</span><span id="dc34" class="ls jx hi mo b fi mw mt l mu mv"><strong class="mo hj"># remove words that contains non-alphabetical characters like '...'</strong></span><span id="5f02" class="ls jx hi mo b fi mw mt l mu mv">tweet = [word for word in tweet if word.isalpha() == True]<br/>return tweet</span></pre></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="c062" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，是时候为训练和测试准备数据集了。</p><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="671b" class="ls jx hi mo b fi ms mt l mu mv"><strong class="mo hj"># prepare training set for X_train</strong></span><span id="4b8d" class="ls jx hi mo b fi mw mt l mu mv">trainingSet = prepare_data_set(X_train)</span><span id="8eb9" class="ls jx hi mo b fi mw mt l mu mv"><strong class="mo hj"># prepare training set for X_test</strong></span><span id="d10f" class="ls jx hi mo b fi mw mt l mu mv">testSet = prepare_data_set(X_test)</span></pre></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><pre class="mn mo mp mq aw mr bi"><span id="263e" class="ls jx hi mo b fi my mz na nb nc mt l mu mv"><strong class="mo hj"># make a list of all words in dataset</strong></span><span id="9843" class="ls jx hi mo b fi mw mt l mu mv">all_words = []<br/>for data in trainingSet:<br/>        all_words.extend(data[0])</span><span id="d97d" class="ls jx hi mo b fi mw mt l mu mv"><strong class="mo hj"><em class="mj"># it creates mapping, how many times words appear, like   <br/># 'new':198, 'galaxy':130</em></strong></span><span id="94fa" class="ls jx hi mo b fi mw mt l mu mv">wordlist = nltk.FreqDist(all_words)</span><span id="7684" class="ls jx hi mo b fi mw mt l mu mv"><strong class="mo hj"><em class="mj"># it will create a keys of unique words, called word_features</em></strong></span><span id="8ca8" class="ls jx hi mo b fi mw mt l mu mv">word_features = wordlist.keys()</span></pre><p id="bb80" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建一个函数，<strong class="ih hj">convert _ tweet _ to _ feature</strong>，如下图，它从一条推文创建一个矢量地图。</p><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="885c" class="ls jx hi mo b fi ms mt l mu mv">def convert_tweet_to_feature(tweet):<br/>        tweet_words=set(tweet)<br/>        features={}<br/>        for word in word_features:<br/>            features[word]=(word in tweet_words)<br/>        return features</span></pre></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="16ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，根据训练特征创建一个模型。</p><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="0e5b" class="ls jx hi mo b fi ms mt l mu mv"><strong class="mo hj"># prepare training features</strong></span><span id="e623" class="ls jx hi mo b fi mw mt l mu mv">trainingFeatures = []<br/>for tweet in trainingSet:<br/>         features = convert_tweet_to_feature(tweet[0])<br/>         trainingFeatures.append((features, tweet[1]))</span><span id="755e" class="ls jx hi mo b fi mw mt l mu mv"><strong class="mo hj"># train the classifier</strong></span><span id="3fdf" class="ls jx hi mo b fi mw mt l mu mv">classifier=nltk.NaiveBayesClassifier.train(trainingFeatures)</span></pre></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="0a9c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，模型已经准备好了，我们最终可以在测试数据集上使用它来发现它的准确性。</p><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="a02c" class="ls jx hi mo b fi ms mt l mu mv">testLabels = []<br/>for tweet in testSet:<br/>       features = convert_tweet_to_feature(tweet[0])<br/>       label = classifier.classify(features)<br/>       testLabels.append(label)</span></pre></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="0af9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过函数<strong class="ih hj"> find_accuracy </strong>，我们可以将实际的测试标签与我们从模型中生成的测试标签进行比较:</p><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="4654" class="ls jx hi mo b fi ms mt l mu mv">def find_accuracy(labels):<br/>        good = 0<br/>        bad = 0<br/>        index = 0<br/>        for label in labels:<br/>            test_data = testSet[index][1]<br/>            if (label == test_data):<br/>                  good = good + 1<br/>            else:<br/>                  bad = bad + 1<br/>            index = index+1<br/>       return good/(good+bad)<br/>print('Accuracy is', find_accuracy(testLabels))</span></pre></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="618b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您应该会看到大致的准确性，如</p><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="c491" class="ls jx hi mo b fi ms mt l mu mv"><em class="mj">Accuracy is 0.6840317100792752</em></span></pre></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="b1cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完成模型和预处理步骤后，我们现在可以测试不同的关键字。我使用了<strong class="ih hj">【电影】</strong>这个词，但请随意尝试。</p><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="ead4" class="ls jx hi mo b fi ms mt l mu mv">search_term = '<strong class="mo hj">movies'<br/></strong>real_tweets = twitter_api.GetSearch(search_term, count = 100)<br/>tweets = [[status.text, ''] for status in real_tweets]<br/>dfTweets = DataFrame(tweets,columns=['text','label'])<br/>newTweets = prepare_data_set(dfTweets)</span><span id="3db6" class="ls jx hi mo b fi mw mt l mu mv"><strong class="mo hj"># use classifier to guess labels using above model</strong></span><span id="0cea" class="ls jx hi mo b fi mw mt l mu mv">twtLabels = [classifier.classify(convert_tweet_to_feature(tweet[0])) for tweet in newTweets]</span><span id="cfc4" class="ls jx hi mo b fi mw mt l mu mv"><strong class="mo hj"># it shows five most features, which are used to label new tweets</strong></span><span id="aa8c" class="ls jx hi mo b fi mw mt l mu mv">classifier.show_most_informative_features(5)</span></pre></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="5bcb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了捕捉情感百分比，创建一个函数<strong class="ih hj"> get_data_for_pie_chart </strong>，如下所示。</p><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="3338" class="ls jx hi mo b fi ms mt l mu mv">def get_data_for_pie_chart():<br/>      pos = 0<br/>      neg = 0<br/>      neu = 0<br/>      irr = 0<br/>      for label in twtLabels:<br/>           if (label == 'positive'):<br/>               pos = pos + 1<br/>           elif (label == 'negative'):<br/>               neg = neg + 1<br/>           elif (label == 'neutral'):<br/>               neu = neu + 1<br/>           elif (label == 'irrelevant'):<br/>               irr = irr + 1<br/>      sum = pos + neg + neu + irr;<br/>      pos = pos/sum;<br/>      neg = neg/sum;<br/>      neu = neu/sum;<br/>      irr = irr/sum;</span><span id="6d62" class="ls jx hi mo b fi mw mt l mu mv">return pos, neg, neu, irr</span></pre></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="abff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们现在可以显示饼图:</p><pre class="je jf jg jh fd mn mo mp mq aw mr bi"><span id="f277" class="ls jx hi mo b fi ms mt l mu mv">tweetsCategory = ["positive","negative","neutral", "irrelevant"]<br/>Usage = [get_data_for_pie_chart()]</span><span id="c216" class="ls jx hi mo b fi mw mt l mu mv"><strong class="mo hj"># Pie chart is oval by default, To make it a circle</strong></span><span id="9675" class="ls jx hi mo b fi mw mt l mu mv">plt.axis("equal")<br/>plt.pie(Usage,labels=tweetsCategory,autopct='%1.2f%%', shadow=False)<br/>plt.title("Tweets Sentiments Analysis")<br/>plt.show()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/fa6161ce363271f9c47d665927cc1ac9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gi1Q8LBTkFx66mbZM64_IA.png"/></div></div></figure><p id="1c12" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望你喜欢这篇文章！这是一个免责声明，除了预处理之外，没有进行额外的优化来提高模型的准确性，但我确实希望这为进一步试验NLTK和Twitter的大量数据集提供了一个良好的起点。请分享你的想法/观点！</p></div></div>    
</body>
</html>