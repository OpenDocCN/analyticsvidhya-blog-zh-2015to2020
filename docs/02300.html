<html>
<head>
<title>Pylint Static Code Analysis | Github Action to fail below a score threshold</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Pylint静态代码分析| Github在分数阈值以下失败的操作</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/pylint-static-code-analysis-github-action-to-fail-below-a-score-threshold-58a124aafaa0?source=collection_archive---------6-----------------------#2019-12-10">https://medium.com/analytics-vidhya/pylint-static-code-analysis-github-action-to-fail-below-a-score-threshold-58a124aafaa0?source=collection_archive---------6-----------------------#2019-12-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d67ad6cde720711ef3325ce9f0c79c1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bdONJcyUQSEbtjm40vCIvw.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">绵羊生产羊毛，羊毛生产皮棉，这是我在这篇关于皮棉代码的文章中能想到的最有创意的东西了。</figcaption></figure><p id="802c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">Pylint对于静态代码分析来说是一个非常有用的工具。它提供了一个简单的分数(满分为10分),一个关于要修复的内容的详细输出，以及忽略您不相信的事情的能力。</p><div class="js jt ez fb ju jv"><a href="https://www.pylint.org/" rel="noopener  ugc nofollow" target="_blank"><div class="jw ab dw"><div class="jx ab jy cl cj jz"><h2 class="bd hj fi z dy ka ea eb kb ed ef hh bi translated">Python | www.Pylint.org的pylint代码分析</h2><div class="kc l"><h3 class="bd b fi z dy ka ea eb kb ed ef dx translated">检查行代码的长度，检查变量名是否符合你的编码标准，检查是否…</h3></div><div class="kd l"><p class="bd b fp z dy ka ea eb kb ed ef dx translated">www.pylint.org</p></div></div><div class="ke l"><div class="kf l kg kh ki ke kj io jv"/></div></div></a></div><p id="9521" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是我正在做的关于如何在我的项目中使用Pylint的系列文章的第三部分。</p><ul class=""><li id="f4f5" class="kk kl hi iw b ix iy jb jc jf km jj kn jn ko jr kp kq kr ks bi translated">第1部分:用命令行和编程方式执行</li></ul><div class="js jt ez fb ju jv"><a rel="noopener follow" target="_blank" href="/@doedotdev/pylint-static-code-analysis-executing-with-command-line-vs-programmatically-63797fb2ac22"><div class="jw ab dw"><div class="jx ab jy cl cj jz"><h2 class="bd hj fi z dy ka ea eb kb ed ef hh bi translated">Pylint静态代码分析|用命令行执行vs编程</h2><div class="kc l"><h3 class="bd b fi z dy ka ea eb kb ed ef dx translated">Pylint对于静态代码分析来说是一个非常有用的工具。运行它从命令行或编程，并…</h3></div><div class="kd l"><p class="bd b fp z dy ka ea eb kb ed ef dx translated">medium.com</p></div></div><div class="ke l"><div class="kt l kg kh ki ke kj io jv"/></div></div></a></div><ul class=""><li id="6ec8" class="kk kl hi iw b ix iy jb jc jf km jj kn jn ko jr kp kq kr ks bi translated">第2部分:具有可变阈值的Pylint Runner脚本</li></ul><div class="js jt ez fb ju jv"><a rel="noopener follow" target="_blank" href="/@doedotdev/pylint-static-code-analysis-python-script-with-adjustable-threshold-b0d6d2c8647b"><div class="jw ab dw"><div class="jx ab jy cl cj jz"><h2 class="bd hj fi z dy ka ea eb kb ed ef hh bi translated">Pylint静态代码分析|阈值可调的Python脚本</h2><div class="kc l"><h3 class="bd b fi z dy ka ea eb kb ed ef dx translated">Pylint对于静态代码分析来说是一个非常有用的工具。这里我们创建一个脚本来运行Pylint，如果它命中…</h3></div><div class="kd l"><p class="bd b fp z dy ka ea eb kb ed ef dx translated">medium.com</p></div></div><div class="ke l"><div class="ku l kg kh ki ke kj io jv"/></div></div></a></div><ul class=""><li id="ad4b" class="kk kl hi iw b ix iy jb jc jf km jj kn jn ko jr kp kq kr ks bi translated"><strong class="iw hj">第3部分:针对低于Pylint阈值的失败构建的Github动作</strong></li></ul><h2 id="1d2a" class="kv kw hi bd kx ky kz la lb lc ld le lf jf lg lh li jj lj lk ll jn lm ln lo lp bi translated">Pylint Github操作</h2><p id="f852" class="pw-post-body-paragraph iu iv hi iw b ix lq iz ja jb lr jd je jf ls jh ji jj lt jl jm jn lu jp jq jr hb bi translated">当你签入代码时，Github动作对于自动做事情非常有用。构建、部署、测试，在这种情况下，分析代码。</p><div class="js jt ez fb ju jv"><a href="https://github.com/features/actions" rel="noopener  ugc nofollow" target="_blank"><div class="jw ab dw"><div class="jx ab jy cl cj jz"><h2 class="bd hj fi z dy ka ea eb kb ed ef hh bi translated">功能* GitHub操作</h2><div class="kc l"><h3 class="bd b fi z dy ka ea eb kb ed ef dx translated">GitHub Actions现在拥有世界一流的CI/CD，可以轻松实现所有软件工作流程的自动化。构建、测试和…</h3></div><div class="kd l"><p class="bd b fp z dy ka ea eb kb ed ef dx translated">github.com</p></div></div><div class="ke l"><div class="lv l kg kh ki ke kj io jv"/></div></div></a></div><p id="b5e0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在本系列的上一篇文章(第2部分)中，我更深入地讨论了如何创建一个Pylint runner，它的失败或通过取决于Pylint是否达到给定的阈值。您可以调用带有指定的<code class="du lw lx ly lz b">path</code>代码和分数<code class="du lw lx ly lz b">threshold</code>的<code class="du lw lx ly lz b">lint.py</code>文件来通过或失败构建！这是脚本要点的副本。</p><figure class="ma mb mc md fd ij"><div class="bz dy l di"><div class="me mf l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">lint.py</figcaption></figure><p id="885c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在我们可以利用这个脚本来创建一个Github动作，根据这个分数来决定一个构建是通过还是失败。</p><p id="64a7" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">下面是<code class="du lw lx ly lz b">lint.yml</code>代码:</p><figure class="ma mb mc md fd ij"><div class="bz dy l di"><div class="me mf l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">lint.yml</figcaption></figure><p id="c065" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">构建有3个主要步骤:</p><ul class=""><li id="a897" class="kk kl hi iw b ix iy jb jc jf km jj kn jn ko jr kp kq kr ks bi translated">设置Python环境，在本例中为3.7</li><li id="21ce" class="kk kl hi iw b ix mg jb mh jf mi jj mj jn mk jr kp kq kr ks bi translated">安装需求，在这种情况下只是Pylint</li><li id="42d7" class="kk kl hi iw b ix mg jb mh jf mi jj mj jn mk jr kp kq kr ks bi translated">使用设置的最小阈值运行lint.py</li></ul><p id="b4a2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果您的代码没有达到这个阈值(在上面的例子中是2 ),那么这会产生一个失败的构建。</p><figure class="ma mb mc md fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ml"><img src="../Images/261e355ba36d7f2f610c87e15710f1a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D-bS6S2MlZT_omoa9yVVDQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">请注意，分数1.875没有达到阈值2.0</figcaption></figure><p id="3e3f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在这里，在一个通过的案例中(因为这个测试代码，我在我的工作流中将阈值降低到1.5)，您的构建将通过！它仍然会显示修复代码的潜在机会，以及您的输入阈值和最终得分。</p><figure class="ma mb mc md fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ml"><img src="../Images/be6dc9cd3ef49a38f687bdede30e2302.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3B_iWknk5o6gBcBzcIDbbQ.png"/></div></div></figure><p id="bc26" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在您的工作流历史将显示您的代码已经改进！(或者你只是改变了你的门槛……)</p><figure class="ma mb mc md fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mm"><img src="../Images/4767d1bc66a319b5a26e4c9a421b9f08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mH9DjWJZG4NlEL0lgCBEkQ.png"/></div></div></figure><p id="ac3a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我鼓励你多看看Github的动作，在那里你可以阻止失败动作的合并，从动作中部署到pypi stratigh，验证你的测试可以和你想要的python的每个版本一起工作，等等！</p><h2 id="1caf" class="kv kw hi bd kx ky kz la lb lc ld le lf jf lg lh li jj lj lk ll jn lm ln lo lp bi translated">个人笔记</h2><p id="d1cf" class="pw-post-body-paragraph iu iv hi iw b ix lq iz ja jb lr jd je jf ls jh ji jj lt jl jm jn lu jp jq jr hb bi translated">真正的项目应该期望更高的分数。我的制作项目通常设置为9或9.5 T4作为分数阈值限制。然而，我确实使用了不同于基本Pylint设置的附加排除。</p><pre class="ma mb mc md fd mn lz mo mp aw mq bi"><span id="31a9" class="kv kw hi lz b fi mr ms l mt mu">C0114, # missing-module-docstring<br/>C0115, # missing-class-docstring<br/>C0116, # missing-function-docstring<br/>R0903  # too-few-public-methods</span></pre><p id="b48f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这个片段可以被复制并粘贴到一个<code class="du lw lx ly lz b">.pylintrc</code>文件的<code class="du lw lx ly lz b">disable</code>部分，它会忽略那些错误，它们不会降低你的分数。</p><h2 id="a4fd" class="kv kw hi bd kx ky kz la lb lc ld le lf jf lg lh li jj lj lk ll jn lm ln lo lp bi translated">结束了</h2><p id="db38" class="pw-post-body-paragraph iu iv hi iw b ix lq iz ja jb lr jd je jf ls jh ji jj lt jl jm jn lu jp jq jr hb bi translated">这个三部分系列的所有代码都在Github上。它甚至使用自己的代码对自己运行Github操作。</p><div class="js jt ez fb ju jv"><a href="https://github.com/doedotdev/wool" rel="noopener  ugc nofollow" target="_blank"><div class="jw ab dw"><div class="jx ab jy cl cj jz"><h2 class="bd hj fi z dy ka ea eb kb ed ef hh bi translated">羊毛</h2><div class="kc l"><h3 class="bd b fi z dy ka ea eb kb ed ef dx translated">Pylint示例| Pylint Runner脚本| Pylint Github操作- doedotdev/wool</h3></div><div class="kd l"><p class="bd b fp z dy ka ea eb kb ed ef dx translated">github.com</p></div></div><div class="ke l"><div class="mv l kg kh ki ke kj io jv"/></div></div></a></div><p id="7b6f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果你迷路了，一定要回去重温本系列的第2部分，在那里我将讨论我们在Github操作中运行的<code class="du lw lx ly lz b">lint.py</code>文件的用法。</p><div class="js jt ez fb ju jv"><a rel="noopener follow" target="_blank" href="/@doedotdev/pylint-static-code-analysis-python-script-with-adjustable-threshold-b0d6d2c8647b"><div class="jw ab dw"><div class="jx ab jy cl cj jz"><h2 class="bd hj fi z dy ka ea eb kb ed ef hh bi translated">Pylint静态代码分析|阈值可调的Python脚本</h2><div class="kc l"><h3 class="bd b fi z dy ka ea eb kb ed ef dx translated">Pylint对于静态代码分析来说是一个非常有用的工具。这里我们创建一个脚本来运行Pylint，如果它命中…</h3></div><div class="kd l"><p class="bd b fp z dy ka ea eb kb ed ef dx translated">medium.com</p></div></div><div class="ke l"><div class="ku l kg kh ki ke kj io jv"/></div></div></a></div><p id="3a27" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">谢谢！</p></div></div>    
</body>
</html>