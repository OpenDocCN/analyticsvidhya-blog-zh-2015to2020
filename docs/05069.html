<html>
<head>
<title>Implementing a Simple Bot to Swipe on OkCupid</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实现一个简单的机器人在OkCupid上滑动</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/implementing-a-simple-bot-to-swipe-on-okcupid-c33081418e45?source=collection_archive---------8-----------------------#2020-04-10">https://medium.com/analytics-vidhya/implementing-a-simple-bot-to-swipe-on-okcupid-c33081418e45?source=collection_archive---------8-----------------------#2020-04-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/16874a6a1ca945dc52dcaa4f81b61ec8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*frV9OLpyFewgHQW9dlyJRQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated"><a class="ae iu" href="https://www.businessofapps.com/news/dating-app-download-growth-slumps-to-5-3-in-2019/" rel="noopener ugc nofollow" target="_blank">https://www . businessofapps . com/news/dating-app-download-growth-slumps-to-5-3-in-2019/</a></figcaption></figure><h1 id="0bec" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">序文</h1><p id="7efe" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">毫无疑问，我们在新冠肺炎疫情会感到孤独。需要隔离、实行社交距离、城市被封锁、强制在家工作/上学是世界各地的领导人正在采取的一些预防措施，以遏制这种病毒的传播。这影响了我们与人的社会交往。值得庆幸的是，在线约会应用程序，如<a class="ae iu" href="https://tinder.com/?lang=en" rel="noopener ugc nofollow" target="_blank"> Tinder </a>、<a class="ae iu" href="https://www.okcupid.com/home" rel="noopener ugc nofollow" target="_blank"> OkCupid </a>和<a class="ae iu" href="https://bumble.com/" rel="noopener ugc nofollow" target="_blank"> Bumble </a>等等，是存在的。它使我们能够在家中舒适地认识新朋友并与之互动。</p><h1 id="9b77" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">议程</h1><p id="2cc9" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">用Python，Selenium和Chromedrive.exe构建OkCupid机器人。</p><h1 id="1694" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">动机</h1><p id="e513" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">最近，我在OkCupid(新加坡)上遇到了这个女孩，她给了我一个挑战，在2020年4月092359日之前，在OkCupid上搜索她的两个朋友，以换取她的Instagram手柄。我愉快地接受了挑战。</p><p id="4f21" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">我开始集思广益，寻找应对挑战的可能方案。</p><p id="588c" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">值得注意的是，我当时忙于工作和学习，简单地在应用程序上滚动每个可能的匹配既低效又耗时。鉴于这种情况，我决定造一个机器人。</p><h1 id="c0f4" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">先决条件和配置</h1><ol class=""><li id="15a1" class="kw kx hi jv b jw jx ka kb ke ky ki kz km la kq lb lc ld le bi translated">有Python (3。x及以上为推荐)，安装<a class="ae iu" href="https://www.selenium.dev/documentation/en/" rel="noopener ugc nofollow" target="_blank">硒</a>和<a class="ae iu" href="https://chromedriver.chromium.org/downloads" rel="noopener ugc nofollow" target="_blank">Chromedriver.exe</a>。</li></ol><p id="ff46" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">请下载适合您的chrome版本的Chromedriver.exe软件(设置&gt;关于Chrome)。我用的是Chrome版本81.0.4044.92(正式版)(64位)。</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="3ce3" class="lo iw hi lk b fi lp lq l lr ls">Python 3.7.6<br/>selenium 3.141.0 (pip install selenium)<br/>ChromeDriver 81.0.4044.69</span></pre><p id="e1d6" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">2.将Chromedriver.exe添加到路径变量。在你的命令提示符(Windows)或终端(macOS)中输入chromedriver.exe，如果它打开了一个本地会话，你就一切就绪了，否则就有错误。</p><p id="3561" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">3.关于面向对象编程(OOP)的基础知识。</p><h1 id="3d6d" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">游戏攻略</h1><p id="416f" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">记住这个，选择并输入。自动化网站时，这是你必须记住的两个基本操作。想象你是应用程序的使用者，然后将你的行为转化为代码。</p><h2 id="8a95" class="lo iw hi bd ix lt lu lv jb lw lx ly jf ke lz ma jj ki mb mc jn km md me jr mf bi translated">密码</h2><p id="3dc4" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">从导入这些包开始。</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="d9d8" class="lo iw hi lk b fi lp lq l lr ls">from selenium import webdriver<br/>import time</span></pre><p id="0c18" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">创建一个Bot类</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="5361" class="lo iw hi lk b fi lp lq l lr ls">class OKCBot():<br/>    def __init__(self):<br/>        chrome_options = webdriver.ChromeOptions()        chrome_options.add_experimental_option("excludeSwitches", ['enable-automation'])<br/>        self.driver = webdriver.Chrome(options=chrome_options)</span></pre><p id="0901" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">这消除了开发者对chrome的限制，否则chrome会提示“Chrome正由自动化测试软件控制。”</p><p id="5263" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">该机器人将采取如下所列的几个功能:</p><ol class=""><li id="700b" class="kw kx hi jv b jw kr ka ks ke mg ki mh km mi kq lb lc ld le bi translated">启动会话并完成登录过程。</li></ol><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="de29" class="lo iw hi lk b fi lp lq l lr ls">def open(self):<br/>    self.driver.get('https://www.okcupid.com/home')</span><span id="7fdf" class="lo iw hi lk b fi mj lq l lr ls">def sign_in(self):<br/>    time.sleep(3)<br/>    email_input = self.driver.find_element_by_xpath('//*[@id="username"]')<br/>    password_input = self.driver.find_element_by_xpath('//*[@id="password"]')<br/>    email_input.send_keys('s<strong class="lk hj">omeEmail@someDomain.com</strong>')<br/>    password_input.send_keys('<strong class="lk hj">somePassword</strong>')<br/>    next_btn = self.driver.find_element_by_xpath('//*[@id="OkModal"]/div/div[1]/div/div/div/div[2]/div/div/div[2]/div/form/div[2]/input')<br/>    next_btn.click()</span></pre><p id="01c0" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">2.按名称过滤配置文件(这是可选的，您可以让Bot在遇到的每个配置文件上向右/像滑动)。</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="9490" class="lo iw hi lk b fi lp lq l lr ls">def nameChecker(self):<br/>    time.sleep(5)<br/>    name = self.driver.find_element_by_xpath('//*[@id="quickmatch-wrapper"]/div/div/span/div/div[2]/div/div[2]/span/div/div/div/div[1]/div[1]/div[1]').text<br/>    if name in ['Rachel', 'hanna']:<br/>        self.swipeRight()<br/>        print(name, ' Liked')<br/>    else:<br/>        self.swipeLeft()<br/>        print(name, ' Passed')</span></pre><p id="29c0" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">3.swipeRight和swipeLeft函数。</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="496d" class="lo iw hi lk b fi lp lq l lr ls">def swipeRight(self):<br/>    time.sleep(1)<br/>    like_btn = self.driver.find_element_by_xpath(<br/>        '//*[@id="quickmatch-wrapper"]/div/div/span/div/div[2]/div/div[2]/span/div/div/div/div[1]/div[2]/button[2]/div')<br/>    like_btn.click()</span><span id="42e9" class="lo iw hi lk b fi mj lq l lr ls">def swipeLeft(self):<br/>    time.sleep(1)<br/>    pass_btn = self.driver.find_element_by_xpath(<br/>        '//*[@id="quickmatch-wrapper"]/div/div/span/div/div[2]/div/div[2]/span/div/div/div/div[1]/div[2]/button[1]/div')<br/>    pass_btn.click()</span></pre><h2 id="89e0" class="lo iw hi bd ix lt lu lv jb lw lx ly jf ke lz ma jj ki mb mc jn km md me jr mf bi translated">代码解释</h2><p id="98ee" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">如果你理解所使用的方法，你可以完全跳过这一部分。</p><figure class="lf lg lh li fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mk"><img src="../Images/48c749b2b5ad8fbbb3c6dfa4d041c196.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oBLS-BSC-uYABMI_bc-J4Q.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">Bot函数的伪代码</figcaption></figure><p id="60ab" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">当您浏览网页时，通常会选择或输入适用的内容。这些是你需要为机器人定义的一步一步(参考伪代码流程图)的指令。我将描述相关的过程。</p><figure class="lf lg lh li fd ij er es paragraph-image"><div class="er es ml"><img src="../Images/556576f87216b9a39814169c4c5e19c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:818/format:webp/1*-H1BWN0YlU5QeICMjO26Dg.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">动作流程图</figcaption></figure><p id="7bfe" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated"><strong class="jv hj">选择</strong></p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="7a34" class="lo iw hi lk b fi lp lq l lr ls">someVariable = driver.find_element_by_xpath(*arg)<br/># Many for Methods</span></pre><p id="2bab" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">还有一大堆其他的<a class="ae iu" href="https://selenium-python.readthedocs.io/locating-elements.html" rel="noopener ugc nofollow" target="_blank"> find_element_by </a>方法来定位HTML脚本中的元素，但是对于本文，我将使用元素的xpath。</p><figure class="lf lg lh li fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mm"><img src="../Images/82a80ddd6265b651da102473947b3f95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N9UvLycPBQ9dbJtc5WmOXw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">选择流程图</figcaption></figure><p id="8fde" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">机器人会将焦点转移到特定元素上，就像我们将鼠标悬停在浏览器上感兴趣的区域上一样。</p><p id="dd76" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated"><strong class="jv hj">输入</strong></p><figure class="lf lg lh li fd ij er es paragraph-image"><div class="er es mn"><img src="../Images/683a3514afe530009fe559c2711dd270.png" data-original-src="https://miro.medium.com/v2/resize:fit:810/format:webp/1*ZxI_xj7mk9_3qmyzdRidew.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">登录页面</figcaption></figure><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="8e88" class="lo iw hi lk b fi lp lq l lr ls">someVariable.send_keys('someString')<br/># Input text into HTML input boxes</span></pre><p id="d90a" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">这种方法复制了输入动作、键入登录信息、填写表格等。</p><p id="bfd0" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated"><strong class="jv hj">点击动作</strong></p><figure class="lf lg lh li fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mo"><img src="../Images/918bd9837c31518ea4b544968f316f6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:806/format:webp/1*JuXFn6k3JlqAzj_scE-slQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">登录页面上的下一步按钮</figcaption></figure><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="e34b" class="lo iw hi lk b fi lp lq l lr ls">next_btn = self.driver.find_element_by_xpath(*arg)<br/>next_btn.click()</span></pre><p id="18f9" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">这将执行开发人员定义的特定动作，在本例中，这是一个“点击”动作。这类似于您手动单击登录页面中的提交按钮或通过/喜欢按钮。</p><p id="0e31" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">将元素存储在变量中，并执行<em class="mp">。点击变量上的()</em>方法。</p><div class="mq mr ez fb ms mt"><a href="https://selenium-python.readthedocs.io/api.html#module-selenium.webdriver.common.keys" rel="noopener  ugc nofollow" target="_blank"><div class="mu ab dw"><div class="mv ab mw cl cj mx"><h2 class="bd hj fi z dy my ea eb mz ed ef hh bi translated">7.web driver API—Selenium Python Bindings 2文档</h2><div class="na l"><h3 class="bd b fi z dy my ea eb mz ed ef dx translated">请注意，这不是官方文档。官方API文档可从这里获得。本章涵盖了所有的…</h3></div><div class="nb l"><p class="bd b fp z dy my ea eb mz ed ef dx translated">selenium-python.readthedocs.io</p></div></div></div></a></div><p id="ae29" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">查看该文档，全面了解您可以使用Selenium执行的操作类型！</p><h1 id="d601" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">运行机器人</h1><p id="8a53" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">实例化机器人，调用它的函数，高枕无忧。</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="2505" class="lo iw hi lk b fi lp lq l lr ls"># Instantiate Bot<br/>bot = OKCBot()</span><span id="2292" class="lo iw hi lk b fi mj lq l lr ls"># Start Session<br/>bot.open()</span><span id="06cc" class="lo iw hi lk b fi mj lq l lr ls"># Sign-In<br/>bot.sign_in()</span><span id="ce85" class="lo iw hi lk b fi mj lq l lr ls"># Swiping Left or Right<br/>while True:<br/>    bot.nameChecker()</span></pre><p id="2c9f" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">这就是了，一个功能性的OKCBot()。</p><figure class="lf lg lh li fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nc"><img src="../Images/5e7b79e7fa564e21c773e68579b53946.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vEZ9NCI1KAd8HzeGJUpwew.png"/></div></div></figure><h1 id="743c" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">我遇到的问题和我的解决方案</h1><ol class=""><li id="8b46" class="kw kx hi jv b jw jx ka kb ke ky ki kz km la kq lb lc ld le bi translated">粗心大意。</li></ol><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="39b3" class="lo iw hi lk b fi lp lq l lr ls">driver.find_elements_by_xpath(*arg)</span></pre><p id="6e2b" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">这个方法返回一个列表。它通常用于查找符合选择器参数的所有元素。我没有意识到我在方法中多打了一个“s ”,不要粗心。检查你的脚本，检查文档。</p><p id="5ba7" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">2.Chrome不允许自动化。</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="8770" class="lo iw hi lk b fi lp lq l lr ls">chrome_options = webdriver.ChromeOptions()        chrome_options.add_experimental_option("excludeSwitches", ['enable-automation'])<br/>driver = webdriver.Chrome(options=chrome_options)</span></pre><p id="49d7" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">一个简单的快速修复删除默认设置在铬。</p><h1 id="3cd3" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">走向</h1><p id="2f68" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">我计划在未来通过实现一个简单的人工智能聊天机器人来自动聊天，并使用图像分析来做出通过和喜欢的决定。</p><h1 id="3a1d" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">结论</h1><p id="c89b" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">我希望这篇教程文章足以让你开始构建机器人和自动化网页！请不吝赐教或与我联系！</p><p id="f5ec" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">PS:她没有给我她的Instagram账号，但我学到了一些新东西，这才是最重要的。</p><p id="ccaf" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">源代码:<a class="ae iu" href="https://github.com/peanutsee/OKCBOT" rel="noopener ugc nofollow" target="_blank">https://github.com/peanutsee/OKCBOT</a></p></div></div>    
</body>
</html>