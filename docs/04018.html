<html>
<head>
<title>How to Package Your React App with Spring Boot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Spring Boot打包你的React应用</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-package-your-react-app-with-spring-boot-41432be974bc?source=collection_archive---------0-----------------------#2020-03-02">https://medium.com/analytics-vidhya/how-to-package-your-react-app-with-spring-boot-41432be974bc?source=collection_archive---------0-----------------------#2020-03-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="e541" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">了解如何结合创建反应应用程序与Spring Boot给你一个单一的战争文件</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/4372247a57125506e4fd79489719e7c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cY8qwOBKdIthA3YqcgcK7A.png"/></div></div></figure><p id="863a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这是如何开始的一点背景故事。我的团队需要在我们要求的基础设施上节省一些资金，因为我们希望构建的应用程序的大部分负载都在客户端，而不是服务端。我们决定尝试将Spring应用程序和React应用程序结合起来，提供一个war文件。</p><p id="d4b1" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">Spring Boot和Create React App做的基本思路。</strong></p><ol class=""><li id="9bc9" class="kf kg hi jl b jm jn jp jq js kh jw ki ka kj ke kk kl km kn bi translated">创建React应用程序可以帮助您快速启动React项目。它为您提供了尽快启动和运行所需的所有基本内容。</li><li id="b2dc" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke kk kl km kn bi translated">Spring boot帮助您快速、轻松地启动和维护Spring应用程序。</li></ol><h1 id="3bae" class="kt ku hi bd kv kw kx ky kz la lb lc ld io le ip lf ir lg is lh iu li iv lj lk bi translated">目标:</h1><ul class=""><li id="fdc1" class="kf kg hi jl b jm ll jp lm js ln jw lo ka lp ke lq kl km kn bi translated">单个war文件中的前端和后端，具有优化的生产版本</li><li id="6281" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke lq kl km kn bi translated">保留React App提供的优势，如热重装</li></ul><h1 id="ebd7" class="kt ku hi bd kv kw kx ky kz la lb lc ld io le ip lf ir lg is lh iu li iv lj lk bi translated">设置:</h1><ul class=""><li id="c191" class="kf kg hi jl b jm ll jp lm js ln jw lo ka lp ke lq kl km kn bi translated">必须安装java。头越过<a class="ae lr" href="https://www.oracle.com/java/technologies/javase-downloads.html" rel="noopener ugc nofollow" target="_blank">T5这里T7下载一个版本</a></li><li id="018b" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke lq kl km kn bi translated">必须安装maven。对于Mac，我用的是家酿(<code class="du ls lt lu lv b">brew install maven</code>)否则，这里头<a class="ae lr" href="https://maven.apache.org/install.html" rel="noopener ugc nofollow" target="_blank"><strong class="jl hj"/></a></li><li id="c53c" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke lq kl km kn bi translated">必须安装节点。对于Mac，我用的是家酿(<code class="du ls lt lu lv b">brew install node</code>)但除此之外，这里的<a class="ae lr" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank"><strong class="jl hj"/></a></li></ul><blockquote class="lw lx ly"><p id="aabd" class="jj jk lz jl b jm jn ij jo jp jq im jr ma jt ju jv mb jx jy jz mc kb kc kd ke hb bi translated"><strong class="jl hj">补充说明:我选择的ide是IntelliJ。当处理react代码时，我通常会切换到VS代码。随意使用你觉得舒服的东西</strong></p></blockquote></div><div class="ab cl md me gp mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="hb hc hd he hf"><ol class=""><li id="618a" class="kf kg hi jl b jm jn jp jq js kh jw ki ka kj ke kk kl km kn bi translated">在Github上创建一个空的repo，添加一个Read Me，gitignore，license等。</li><li id="9c6f" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke kk kl km kn bi translated">转到<a class="ae lr" href="https://start.spring.io/" rel="noopener ugc nofollow" target="_blank">https://start . spring . io</a>创建您的spring应用程序并下载到本地。组和工件也可以是你想要的任何东西。</li></ol><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mk"><img src="../Images/fd96154f50663dfbc04213201819c8d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*466xB7iRUFFfWlOMzKZZMQ.png"/></div></div></figure><p id="7a42" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">GroupId  : e.the.awesome</p><p id="3f60" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">神器</strong> : spring-react-combo-app</p><p id="bce4" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">3.将下载的项目解压到git目录中。提交提交提交。您的SpringReactComboAppApplication应该是这样的。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="212b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">4.现在让我们创建一个基本服务。我们称之为DadJokesController。这应该在与SpringReactComboAppApplication文件相同的文件夹中创建。我知道这不是一个合适的Rest API格式，但是现在让我们忽略它。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="faa5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">5.在您的终端运行中</p><pre class="iy iz ja jb fd mn lv mo mp aw mq bi"><span id="5d19" class="mr ku hi lv b fi ms mt l mu mv">mvn spring-boot:run</span></pre><p id="1c7e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">然后在你的浏览器中查看<a class="ae lr" href="http://localhost:8080/api/dadjokes" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/API/dad joins</a>。你应该看看我们在控制器上加的爸爸笑话。</p><p id="c300" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">6.要创建React应用程序，只需在根目录下运行即可</p><pre class="iy iz ja jb fd mn lv mo mp aw mq bi"><span id="688e" class="mr ku hi lv b fi ms mt l mu mv">npx create-react-app basic-frontend-app</span></pre><p id="f7d7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">随便你怎么叫，我就叫我的<em class="lz">基础-前端-app </em></p><p id="92e6" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">7.要运行前端应用程序:</p><pre class="iy iz ja jb fd mn lv mo mp aw mq bi"><span id="d547" class="mr ku hi lv b fi ms mt l mu mv">cd basic-frontend-app<br/>npm start</span></pre><p id="fb3c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">启动后，它应该看起来像:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mw"><img src="../Images/758251ee289019a6bd0053c3f3d97fae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TF9ARN6SaqN0moQBHtJXPg.png"/></div></div></figure><p id="f16b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">8.因为我们想将我们的爸爸笑话服务集成到前端，首先我们将解决代理问题。如果您已经注意到，您的服务在localhost:8080上启动，而前端在localhost:3000上启动。如果我们试图从前端调用我们的服务，根据你的浏览器，你会得到一个CORS错误。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mx"><img src="../Images/e3ca680f34bc8a17dbd5c20ed877e2c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A2OMJ1Dogeyy3NcfxaevgQ.png"/></div></div></figure><p id="6d5f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">解决这个问题的最简单的方法是让您的前端代理从端口3000到8080的任何请求。此更改将在您的package.json文件中进行</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="eba9" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">将以下内容添加到frontend App.js文件中</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="219b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">重启前端应该就好了。如果你碰巧得到这个错误:我删除了我的package-lock.json文件和node_modules文件夹重新安装了npm包并再次运行它</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es my"><img src="../Images/dfe395abd7f4f8bf868fdda01680a6dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1mMhTA2SWwk3m_91p_qefA.png"/></div></div></figure><p id="2773" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">9.您的应用程序现在应该看起来像这样。您可以看到爸爸笑话API调用的结果。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mz"><img src="../Images/f63170a17a74de4b40436611bc71dfbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1VKfTtC88yROulyR0iKsBw.png"/></div></div></figure><p id="8c3c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">10.既然我们的基本前端和后端已经完成，是时候创建一个产品构建和单个war文件了。</p><p id="0530" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在<strong class="jl hj">下的&lt;依赖关系&gt;下的</strong>中添加这个</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="8908" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在pom文件的<strong class="jl hj"> &lt;插件&gt; </strong>部分下，我们将添加以下命令，这些命令将在<code class="du ls lt lu lv b">mvn clean install </code>运行时执行以下操作。</p><ul class=""><li id="9f48" class="kf kg hi jl b jm jn jp jq js kh jw ki ka kj ke lq kl km kn bi translated">使用指定版本的节点安装npm</li><li id="de0f" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke lq kl km kn bi translated">运行我们前端的生产版本</li><li id="2f8e" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke lq kl km kn bi translated">存放生产版本</li></ul><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ml mm l"/></div></figure><p id="0364" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> <em class="lz">边注:顺序对你的插件很重要，所以确保你的节点/npm安装在复制构建文件之前执行</em> </strong></p><p id="c84b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">11.添加之后，运行<code class="du ls lt lu lv b"> mvn clean install</code>并验证target/classes目录包含前端文件和java文件。你应该可以走了。</p><p id="b10d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">最后看一下我的<a class="ae lr" href="https://github.com/Emmanuella-Aninye/Spring-Boot-ReactJS-Starter/blob/master/pom.xml" rel="noopener ugc nofollow" target="_blank"> <strong class="jl hj"> pom文件</strong> </a>。</p><p id="ac4c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">所以我只有这些了。如果你想看一看回购或使用它。这里可以在我的<a class="ae lr" href="https://github.com/Emmanuella-Aninye/Spring-Boot-ReactJS-Starter" rel="noopener ugc nofollow" target="_blank"> <strong class="jl hj"> Github </strong> </a> <strong class="jl hj">上找到。</strong></p><p id="674f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">接下来是一篇关于如何在Heroku上部署war文件的文章。期待！</p></div></div>    
</body>
</html>