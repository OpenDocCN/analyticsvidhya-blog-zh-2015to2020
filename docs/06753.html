<html>
<head>
<title>Covid 19 Dashboard Using Angular and Google Charts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用角度和谷歌图表的Covid 19仪表板</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/covid-19-dashboard-using-angular-and-google-charts-a61f15593bc3?source=collection_archive---------19-----------------------#2020-06-01">https://medium.com/analytics-vidhya/covid-19-dashboard-using-angular-and-google-charts-a61f15593bc3?source=collection_archive---------19-----------------------#2020-06-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/01dade65fffef847e4c1a5f07dfab61f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T8tP5XPz5AQBWb79642pKQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">新冠肺炎仪表板</figcaption></figure></div><div class="ab cl iu iv gp iw" role="separator"><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz"/></div><div class="hb hc hd he hf"><p id="30f8" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">在封锁期间，我致力于开发一个web应用程序，该应用程序提供有关世界各地疫情的实时数据。这个应用程序是基于角度技术和谷歌图表。该应用程序包括一个仪表板，在地图上显示每个国家的新冠肺炎数据，以及其他图表，列出十个受影响最严重的国家。在这篇文章中，我将介绍应用程序开发的主要步骤。</p><h1 id="d073" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated"><strong class="ak">采集新冠肺炎数据</strong></h1><p id="e1a2" class="pw-post-body-paragraph jb jc hi jd b je kx jg jh ji ky jk jl jm kz jo jp jq la js jt ju lb jw jx jy hb bi translated">要开发实时应用程序，需要使用更新的数据源而不是静态数据源。我的源代码是一个使用http请求和响应提供数据的web服务。</p><p id="5cbf" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">许多web服务器可用于导入新冠肺炎数据。我采用了<a class="ae lc" href="https://coronavirus-resources.esri.com/datasets/bbb2e4f589ba40d692fab712ae37b9ac_1/geoservice?geometry=34.182%2C-38.069%2C-16.794%2C63.033&amp;orderBy=Country_Region&amp;selectedAttribute=Confirmed&amp;where=Last_Update%20%3E%3D%20TIMESTAMP%20%272020-02-23%2000%3A00%3A00%27%20AND%20Last_Update%20%3C%3D%20TIMESTAMP%20%272020-04-25%2023%3A59%3A59%27" rel="noopener ugc nofollow" target="_blank"> Esri </a> web服务，数据每天更新。</p><h1 id="58f4" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated"><strong class="ak">谷歌图表</strong></h1><p id="798a" class="pw-post-body-paragraph jb jc hi jd b je kx jg jh ji ky jk jl jm kz jo jp jq la js jt ju lb jw jx jy hb bi translated">Dashboard是一种以交互方式呈现某些数据的主要发现的方法。它需要结合多种类型的图表(条形图、饼图、地图……)来突出数据特征。</p><p id="fd39" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">Google charts 是强大的工具，允许使用多种类型的图表构建交互式仪表板。</p></div><div class="ab cl iu iv gp iw" role="separator"><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz"/></div><div class="hb hc hd he hf"><h1 id="d962" class="jz ka hi bd kb kc ld ke kf kg le ki kj kk lf km kn ko lg kq kr ks lh ku kv kw bi translated">主要依赖关系</h1><ul class=""><li id="1bd4" class="li lj hi jd b je kx ji ky jm lk jq ll ju lm jy ln lo lp lq bi translated">角度CLI 9</li><li id="d06e" class="li lj hi jd b je lr ji ls jm lt jq lu ju lv jy ln lo lp lq bi translated">角度9</li><li id="d5fc" class="li lj hi jd b je lr ji ls jm lt jq lu ju lv jy ln lo lp lq bi translated">自举4</li></ul><h1 id="01c8" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated"><strong class="ak">从Github下载源代码</strong></h1><p id="8d80" class="pw-post-body-paragraph jb jc hi jd b je kx jg jh ji ky jk jl jm kz jo jp jq la js jt ju lb jw jx jy hb bi translated">由于我在本文中没有展示完整的代码，我提供了源代码，您可以从我的Github库<a class="ae lc" href="https://github.com/khaled-kch/coviddashboard" rel="noopener ugc nofollow" target="_blank"> <strong class="jd hj">下载。</strong></a></p></div><div class="ab cl iu iv gp iw" role="separator"><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz"/></div><div class="hb hc hd he hf"><h1 id="ce8e" class="jz ka hi bd kb kc ld ke kf kg le ki kj kk lf km kn ko lg kq kr ks lh ku kv kw bi translated"><strong class="ak">新冠肺炎仪表板开发</strong></h1><h2 id="b679" class="lw ka hi bd kb lx ly lz kf ma mb mc kj jm md me kn jq mf mg kr ju mh mi kv mj bi translated">步骤1:创建角度项目</h2><p id="b9bd" class="pw-post-body-paragraph jb jc hi jd b je kx jg jh ji ky jk jl jm kz jo jp jq la js jt ju lb jw jx jy hb bi translated">在创建angular项目之前，确保您已经使用<strong class="jd hj"> npm </strong>包管理器安装了<strong class="jd hj"> Angular CLI </strong>。完成后，您可以通过键入下面的命令来创建项目。</p><p id="2511" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">→ ng新型covid 19仪表板</p><h2 id="56b4" class="lw ka hi bd kb lx ly lz kf ma mb mc kj jm md me kn jq mf mg kr ju mh mi kv mj bi translated">步骤2:创建新冠肺炎数据服务</h2><p id="f705" class="pw-post-body-paragraph jb jc hi jd b je kx jg jh ji ky jk jl jm kz jo jp jq la js jt ju lb jw jx jy hb bi translated">正如我上面提到的，我使用web服务下载新冠肺炎数据。事实上，我在我的angular项目中创建了一个新服务，实现了一个向<a class="ae lc" href="https://coronavirus-resources.esri.com/datasets/bbb2e4f589ba40d692fab712ae37b9ac_1/geoservice?geometry=34.182%2C-38.069%2C-16.794%2C63.033&amp;orderBy=Country_Region&amp;selectedAttribute=Confirmed&amp;where=Last_Update%20%3E%3D%20TIMESTAMP%20%272020-02-23%2000%3A00%3A00%27%20AND%20Last_Update%20%3C%3D%20TIMESTAMP%20%272020-04-25%2023%3A59%3A59%27" rel="noopener ugc nofollow" target="_blank"> Esri </a>服务器发送HTTP请求的方法。访问网站复制使用的网址。</p><figure class="ml mm mn mo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mk"><img src="../Images/d45897abcb8f8deda22cfbd8d1f9f694.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T2dx_32JjmNvjIVDDZw6-A.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">Esri请求URL</figcaption></figure><p id="1366" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">以下简称covid数据服务<a class="ae lc" href="https://gist.github.com/khaled-kch/7886b36ad6c1f3bb413cfb6d6bef473b" rel="noopener ugc nofollow" target="_blank"><strong class="jd hj">covid-data . service . ts</strong></a>:</p><figure class="ml mm mn mo fd ij"><div class="bz dy l di"><div class="mp mq l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated"><a class="ae lc" href="https://gist.github.com/khaled-kch/7886b36ad6c1f3bb413cfb6d6bef473b" rel="noopener ugc nofollow" target="_blank"> covid-data.service.ts </a></figcaption></figure><h2 id="13a6" class="lw ka hi bd kb lx ly lz kf ma mb mc kj jm md me kn jq mf mg kr ju mh mi kv mj bi translated">第三步:整合谷歌图表</h2><p id="e22c" class="pw-post-body-paragraph jb jc hi jd b je kx jg jh ji ky jk jl jm kz jo jp jq la js jt ju lb jw jx jy hb bi translated">要使用Google Charts，一个必要的步骤是在index.html文件中包含<strong class="jd hj"> gstatic </strong>库。<br/>&lt;script type = " text/JavaScript " src = " https://www . gstatic . com/charts/loader . js "&gt;&lt;/script&gt;</p><figure class="ml mm mn mo fd ij"><div class="bz dy l di"><div class="mp mq l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">index.html</figcaption></figure><p id="92d5" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">完成后，我创建了组件<strong class="jd hj"> g-chart.component </strong>，它有四个输入(类型、数据、元素Id、数据)。该组件在一个id为elementId的HTML元素上显示图表。</p><p id="d360" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">我在g-chart.component内部注入了一个服务，该服务实现所请求的方法来绘制一个特定的图表，如下所示。</p><figure class="ml mm mn mo fd ij"><div class="bz dy l di"><div class="mp mq l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated"><a class="ae lc" href="https://gist.github.com/khaled-kch/d5dc4ef8c7a6c25d24e3a7fd45738c80" rel="noopener ugc nofollow" target="_blank"> g-chart.component.ts </a></figcaption></figure><figure class="ml mm mn mo fd ij"><div class="bz dy l di"><div class="mp mq l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated"><a class="ae lc" href="https://gist.github.com/khaled-kch/d5dc4ef8c7a6c25d24e3a7fd45738c80" rel="noopener ugc nofollow" target="_blank"> g图表.组件。</a> html</figcaption></figure><p id="8476" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">现在让我们解释一下<strong class="jd hj"> GoogleChartService </strong>的作用。</p><p id="5c85" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">首先，我将详细介绍如何用javascript创建google图表。</p><p id="ad20" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">要绘制谷歌图表，我们需要遵循3个步骤:<br/> 1。加载所需的包<br/> 2。通过传递一个绘制函数<br/> 3来调用setOnLoadCallback方法。创建绘图功能</p><p id="293c" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">draw函数必须包括以下元素:<br/> -数据和选项对象<br/> -通过传递HTML元素id创建的图表对象，其中图表将被显示<br/> -调用方法chart.draw(data，options)</p><p id="b8f1" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">查看以下示例，了解如何用javascript创建google图表。</p><figure class="ml mm mn mo fd ij"><div class="bz dy l di"><div class="mp mq l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated"><a class="ae lc" href="https://gist.github.com/khaled-kch/15dfac2ffd877c9f92da1359ed251047" rel="noopener ugc nofollow" target="_blank">Google-typical-chart . js</a></figcaption></figure><p id="acaa" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">上面提到的步骤在服务<strong class="jd hj"> GoogleChartService </strong>内部实现，该服务从服务<strong class="jd hj">Google chartservice扩展而来。</strong>父类定义了创建google图表的所有步骤，除了在子类中执行的图表对象定义。</p><p id="e556" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">以下是每项服务的代码。</p><figure class="ml mm mn mo fd ij"><div class="bz dy l di"><div class="mp mq l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated"><a class="ae lc" href="https://gist.github.com/khaled-kch/f6aeb918f7b43c27f318398ce268320b#file-google-chart-service-ts" rel="noopener ugc nofollow" target="_blank">谷歌图表服务</a></figcaption></figure><figure class="ml mm mn mo fd ij"><div class="bz dy l di"><div class="mp mq l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated"><a class="ae lc" href="https://gist.github.com/khaled-kch/eba363c27502164f6cc0b1d242107ad7" rel="noopener ugc nofollow" target="_blank">Google-chart-base . service . ts</a></figcaption></figure><h2 id="a8af" class="lw ka hi bd kb lx ly lz kf ma mb mc kj jm md me kn jq mf mg kr ju mh mi kv mj bi translated">步骤4:创建主组件</h2><p id="7d28" class="pw-post-body-paragraph jb jc hi jd b je kx jg jh ji ky jk jl jm kz jo jp jq la js jt ju lb jw jx jy hb bi translated">在这个阶段，我创建了可以导入新冠肺炎数据和绘制图表的服务。现在，我将展示将使用这些服务并显示HTML页面的主要应用程序组件。</p><p id="dfd3" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">我已经使用bootstrap库构建了应用程序组件，如下面的代码所示。</p><figure class="ml mm mn mo fd ij"><div class="bz dy l di"><div class="mp mq l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">app.component.html</figcaption></figure><p id="bc42" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated"><strong class="jd hj">app.component.html</strong>文件包括四个<strong class="jd hj">GChartComponent</strong>s:<br/>1。<strong class="jd hj">【地理图表】</strong>显示数据图<br/> 2。第一个<strong class="jd hj">“柱形图”</strong>显示确诊病例最多的前10个国家<br/> 3。第二个<strong class="jd hj">“柱形图”</strong>显示恢复案例最多的前10个国家<br/> 4。第三个<strong class="jd hj">“柱形图”</strong>显示死亡率最高的前10个国家</p><p id="04c3" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">在文件<strong class="jd hj"> app.component.ts </strong>中，我创建了显示四个图表和全局指示器对象所需的数组。</p><p id="9bfe" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">为了绘制地理图表，我创建了一个包含4列的数据数组。<br/> 1。国家纬度:编号<br/> 2。国家经度:数字<br/> 3。确诊病例:编号<br/> 4。工具提示:HTML <br/>国家地理数据(纬度，经度)从一个单独的文件<strong class="jd hj"> country-coords.ts </strong>导入。</p><p id="cfd9" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">为了绘制柱形图，我创建了三个包含前10个受影响国家的数组。每个数组由两列组成。<br/> 1。国家名称:字符串<br/> 2。案例号:编号</p><p id="4b10" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">我还在app.component.ts中定义了用于每个图表的选项。此后，用于geochart的选项。</p><figure class="ml mm mn mo fd ij"><div class="bz dy l di"><div class="mp mq l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">地理图表-选项</figcaption></figure><p id="696b" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">为了让这篇文章足够短，我没有解释<strong class="jd hj"> app.components.ts </strong>的一些细节。如果你有任何问题，请发表评论让我知道。</p><h1 id="1b3b" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">新冠肺炎仪表板用户体验</h1><figure class="ml mm mn mo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mr"><img src="../Images/cb1be3c7fb672ce13380ee7b9a61b166.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QyCigvf3Wl_oT8lu6Grh0Q.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">工具提示</figcaption></figure><p id="37fe" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">要查看单个国家的新冠肺炎，我们可以将光标放在显示确诊、康复和死亡病例的国家标记上。</p><figure class="ml mm mn mo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ms"><img src="../Images/a29587dbc5d602b400e7ad79188dff3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fCRef_ZNtCaoNkei6R7ecg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">放大和工具提示</figcaption></figure><p id="bc31" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">一些区域叠加了许多标记。在这种情况下，当光标经过它们时，显示区域的缩放，这使得选择特定标记变得容易。</p><figure class="ml mm mn mo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mt"><img src="../Images/0b425dd0f7dddcac9ca768500f01ba48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Lx4yUuhaA79aUiVmarhfQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">柱形图注释</figcaption></figure><p id="1f58" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">上图显示了将光标放在柱形图上时发布的注释。注释显示国家和值。</p><h1 id="a0a9" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">最后的想法</h1><p id="b64b" class="pw-post-body-paragraph jb jc hi jd b je kx jg jh ji ky jk jl jm kz jo jp jq la js jt ju lb jw jx jy hb bi translated">在这个应用程序中，我注意到Angular技术是多么灵活，它使得创建可重用的组件变得容易。此外，我可以试验谷歌图表，允许建立交互式仪表板。</p><p id="e9fb" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">为了使dashboard实时，我使用了web服务驱动的数据。这是使用HTTP请求和角度观测值执行的，它们将新冠肺炎数据传递给应用程序组件。</p><p id="db9f" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">我希望这篇文章能帮助您回答一些关于所用技术的问题，并启发您构建其他有趣的仪表板。</p></div><div class="ab cl iu iv gp iw" role="separator"><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz"/></div><div class="hb hc hd he hf"><h1 id="2b77" class="jz ka hi bd kb kc ld ke kf kg le ki kj kk lf km kn ko lg kq kr ks lh ku kv kw bi translated">参考</h1><ol class=""><li id="cea0" class="li lj hi jd b je kx ji ky jm lk jq ll ju lm jy mu lo lp lq bi translated"><a class="ae lc" href="https://developers.google.com/chart" rel="noopener ugc nofollow" target="_blank">https://developers.google.com/chart</a></li><li id="9ab8" class="li lj hi jd b je lr ji ls jm lt jq lu ju lv jy mu lo lp lq bi translated">https://coronavirus-resources.esri.com/<a class="ae lc" href="https://coronavirus-resources.esri.com/" rel="noopener ugc nofollow" target="_blank"/></li></ol></div></div>    
</body>
</html>