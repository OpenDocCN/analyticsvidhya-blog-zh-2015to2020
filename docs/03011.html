<html>
<head>
<title>Create Association Rules for the Market Basket Analysis for the given threshold using R and Groceries(Retail) Dataset</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用R和杂货(零售)数据集为给定阈值的购物篮分析创建关联规则</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/create-association-rules-for-the-market-basket-analysis-for-the-given-threshold-using-r-and-45af41400e1?source=collection_archive---------6-----------------------#2020-01-12">https://medium.com/analytics-vidhya/create-association-rules-for-the-market-basket-analysis-for-the-given-threshold-using-r-and-45af41400e1?source=collection_archive---------6-----------------------#2020-01-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="b4f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">下面给出了程序和数据集的链接</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/6b661ba409ef4dc0ff8d78ea5898a4db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*6HpyzmtS3uxJYb0OG0U1mQ.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">图片来源:- <a class="ae jp" href="https://thinksproutinfotech.com/" rel="noopener ugc nofollow" target="_blank">思创资讯科技</a></figcaption></figure><p id="f087" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">市场购物篮分析有助于公司了解他们的客户是如何购买的。目标是帮助配置促销、忠诚度计划和商店布局。</p><h2 id="5e7e" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated"><strong class="ak">什么是购物篮分析？</strong></h2><p id="a98a" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">购物篮分析研究亲和力的概念。亲和力是对某事物的自然喜欢或理解。它也可以指某物与另一物结合的程度。为了进行市场篮分析，我们需要一组交易数据。每笔交易都由一起购买的一组产品组成。假设我去了一家超市，买了酸奶、牛奶、钢笔、奶酪和纸。这些产品是在一次交易中购买的。然后，收集并分析交易，以确定关联规则。</p><p id="32e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">那么现在，如何才能确定协会的强弱呢？要回答这个问题，我们需要考虑三个指标:</p><ul class=""><li id="c4e0" class="kq kr hi ih b ii ij im in iq ks iu kt iy ku jc kv kw kx ky bi translated"><strong class="ih hj">支持:</strong>这个指标表示产品在数据集中出现的频率。比如我们有十笔交易，笔出现在七笔交易中，那么支持度是7/10，也就是70%。高支持百分比是优选的，因为它们表明该关联可能应用于大量的未来交易。</li></ul><blockquote class="kz"><p id="a011" class="la lb hi bd lc ld le lf lg lh li jc dx translated"><strong class="ak">Support(X-&gt;Y)= Support(X∪Y)</strong></p></blockquote><ul class=""><li id="aa6f" class="kq kr hi ih b ii lj im lk iq ll iu lm iy ln jc kv kw kx ky bi translated"><strong class="ih hj">置信度:</strong>该指标表示包含特定产品(X)的交易也包含产品(Y) {X - &gt; Y}的概率。所以X - &gt; Y的置信度= Pr(X &amp; Y) / Pr(X)。这个指标的问题是，如果X和Y都是受欢迎或经常购买的产品，可信度可能会被夸大。所以，我们需要想办法控制y的流行。</li></ul><blockquote class="kz"><p id="1a98" class="la lb hi bd lc ld le lf lg lh li jc dx translated"><strong class="ak">置信度(X - &gt; Y) =支持度(X - &gt; Y) /支持度(X) </strong></p></blockquote><ul class=""><li id="7686" class="kq kr hi ih b ii lj im lk iq ll iu lm iy ln jc kv kw kx ky bi translated"><strong class="ih hj"> Lift: </strong>该指标表示在控制Y的流行度的同时购买X时购买Y的概率。为了控制Y的流行度，我们需要测量规则中所有产品一起出现的概率，并将其除以产品概率的乘积，就好像它们之间没有关联一样。例如，如果牛奶和奶酪同时出现在2%的交易中，牛奶出现在15%的交易中，奶酪出现在5%的交易中，则lift为:0.02 / (0.15 * 0.05) = 2.7。等于1的提升值表示产品X和Y相互独立。我们应该寻找大于1的提升值，因为这些值意味着如果购买了物品X，也可能会购买物品Y。升力越大，两个产品之间的联系就越大。</li></ul><blockquote class="kz"><p id="61cb" class="la lb hi bd lc ld le lf lg lh li jc dx translated"><strong class="ak">升力(X - &gt; Y) =支撑(X - &gt; Y) /支撑(X) *支撑(Y) </strong></p></blockquote><h2 id="f86d" class="jq jr hi bd js jt lo jv jw jx lp jz ka iq lq kc kd iu lr kf kg iy ls ki kj kk bi translated"><strong class="ak">市场篮子分析旨在回答以下问题:</strong></h2><ul class=""><li id="cb6b" class="kq kr hi ih b ii kl im km iq lt iu lu iy lv jc kv kw kx ky bi translated">有哪些购买模式？(一起/按顺序/按季节购买的物品)</li><li id="3ffb" class="kq kr hi ih b ii lw im lx iq ly iu lz iy ma jc kv kw kx ky bi translated">哪些产品可能受益于广告？</li><li id="f90c" class="kq kr hi ih b ii lw im lx iq ly iu lz iy ma jc kv kw kx ky bi translated">客户为什么会购买某些产品？</li><li id="08b7" class="kq kr hi ih b ii lw im lx iq ly iu lz iy ma jc kv kw kx ky bi translated">他们每天什么时候买它？</li><li id="1e39" class="kq kr hi ih b ii lw im lx iq ly iu lz iy ma jc kv kw kx ky bi translated">客户是谁？(学生、家庭等)</li></ul><h1 id="de28" class="mb jr hi bd js mc md me jw mf mg mh ka mi mj mk kd ml mm mn kg mo mp mq kj mr bi translated"><strong class="ak">Apriori算法的工作原理</strong></h1><p id="cf4f" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">发现频繁项目集是数据挖掘中研究最多的领域之一。Apriori算法是最成熟的频繁项集挖掘算法。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/64ee37f3053b63fd77d9182d5bb2759f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*bKUhyMJQzjoUS2fQlf_XnQ.png"/></div></figure><h2 id="8e5c" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated"><strong class="ak">频繁项目集的定义</strong></h2><p id="16c3" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">出现在许多篮子中的一组项目被称为“频繁”为了正式起见，我们假设有一个数字<strong class="ih hj"> s </strong>，称为支持阈值。如果<strong class="ih hj"> I </strong>是一组项目，那么<strong class="ih hj"> I </strong>的支持就是<strong class="ih hj"> I </strong>是其子集的篮子数。我们说<strong class="ih hj"> I </strong>是频繁的，如果它的支持是<strong class="ih hj"> s </strong>或更多。<br/> <strong class="ih hj"> <br/>例子:</strong> <br/>我们来考虑一个简单的例子。考虑下列项目的交易</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="er es ms"><img src="../Images/3313e7eee47238ce606077d0a51c6609.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UeLRhS8nHoKEfqi8r1s6yg.png"/></div></div></figure><p id="9ed3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来考虑这样一个规则，即如果项目/项目集出现的次数至少为50%,它就会被频繁购买。所以这里应该至少买2次。</p><p id="c6a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了简单起见，让我们将这些项目缩写如下:</p><p id="8ecf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">苹果-A</p><p id="3c67" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">芒果-M</p><p id="3205" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">梨子-P</p><p id="5f38" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">卷心菜-钙</p><p id="1f69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">胡萝卜河</p><p id="41cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以这张桌子现在变成了</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="er es mx"><img src="../Images/70fab4c5d146a50ccc91e9e5e14951da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tbQmtr3avXkehDtwuJIARw.png"/></div></div></figure><p id="ab68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第一步:统计每一项出现的交易次数</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es my"><img src="../Images/184980ef17921ef05e63192954489dea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*jZpklQM0S48nVViGPpnuwQ.png"/></div></figure><p id="ed0a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第二步:现在把购买次数少于2次的物品全部去掉。因此新表格变成了</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="er es mz"><img src="../Images/13e9cff645df0082fbc2578fd02b77fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oxeEVmXBbXrDqxpl27zIuw.png"/></div></div></figure><p id="093f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第三步:开始将第二步中的物品配对</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="er es na"><img src="../Images/a5aa587b7f461c23976bd5ea025e817e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qxYDD3tlxmfJJ0xlJmU6qA.png"/></div></div></figure><p id="cde8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:项目集PM、CaP、CrP与MP、PCa、PCr相同，因此它们不包括在步骤3中。</p><p id="e3d4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第4步:现在我们统计第3步所示的每一对在表1 </strong>中出现的次数。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="er es nb"><img src="../Images/402e599241027b6908abd20a677e15dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zXAKiMjWGrOaoI2YoSh16w.png"/></div></div></figure><p id="b692" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第五步:看问题——它陈述了考虑被购买至少2次或50%次的项目集。</strong></p><p id="f831" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在步骤4中应用此规则会将表格简化为以下内容:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="er es nc"><img src="../Images/3653a73ae0c848b438d2b3513f8db065.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I_7ME8Zt93KYw27b6a1qNw.png"/></div></div></figure><p id="a6b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以这张表显示，以下项目MP(芒果和梨)、MCa(芒果和卷心菜)和MCr(芒果和胡萝卜)至少有50%的情况下是一起购买的。</p><h1 id="071a" class="mb jr hi bd js mc md me jw mf mg mh ka mi mj mk kd ml mm mn kg mo mp mq kj mr bi translated"><strong class="ak">使用杂货数据集实现购物篮分析的程序:</strong></h1><h2 id="fef2" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">步骤1:加载必要的包。</h2><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es nd"><img src="../Images/ef6d451bb58df966f6eccd3e4052da1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*8O6ETjQIsFYVut0UTvGC7g.png"/></div></figure><p id="fab3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们将加载程序所需的包。</p><ul class=""><li id="3c2f" class="kq kr hi ih b ii ij im in iq ks iu kt iy ku jc kv kw kx ky bi translated">arules——为表示、操作和分析事务数据和模式(频繁项目集和关联规则)提供基础设施。</li><li id="de93" class="kq kr hi ih b ii lw im lx iq ly iu lz iy ma jc kv kw kx ky bi translated">aruleviz——实现了几种已知的和新颖的可视化技术来探索关联规则。</li><li id="005d" class="kq kr hi ih b ii lw im lx iq ly iu lz iy ma jc kv kw kx ky bi translated">数据集-此包包含各种数据集。</li></ul><h2 id="8f5a" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">第二步:读取杂货数据集</h2><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ne"><img src="../Images/37854376a989d7506340fd10d1f4e730.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*f37JoIQycpxDnA_5N-DAGQ.png"/></div></figure><h2 id="5956" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">步骤3:现在，让我们看看数据集中的前10项</h2><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es nf"><img src="../Images/1cc886bd2f243de4e4a0ae5c4cf182a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*JwuIgBAJyR_3sYftR2iXmQ.png"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/6f4a5b9eade0b7338a0b3f5db411e0c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*p51ucyO0tJvl4CiFfbupSA.png"/></div></figure><h2 id="9940" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">步骤4:最后一步是使用Arules库中的Apriori算法生成具有相应支持度和置信度的规则</h2><p id="4278" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated"><strong class="ih hj">输入:- </strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="er es ng"><img src="../Images/360e4e4fdf0c171456b263f52556b13e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZQfSmwW_wsBa_gMPVrFfTw.png"/></div></div></figure><p id="e584" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">输出:- </strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es nh"><img src="../Images/acf05605ebb0f1a18755cfae849963aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*4Ycg2_31_Vpji2l9QkmDlw.png"/></div></figure><h2 id="1b92" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">步骤5:现在删除数据集中出现的冗余规则</h2><p id="c6de" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated"><strong class="ih hj">输入:- </strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ni"><img src="../Images/3c28d1a7e9a2d88a224bbe40438da48b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*PHwsUbpStwX1158FQTlotA.png"/></div></figure><p id="b37a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">输出:- </strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es nj"><img src="../Images/512d257909f852f141b1205b556872ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*yBxO7dx9mAfCFjs9vRyFnQ.png"/></div></figure><h2 id="b3ae" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">步骤6:最后显示购物篮分析/关联规则的图表。</h2><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/4bf0ec354ba7aaa4d074e383580db574.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*YcQuO_jItAGrXI1OTGX0uA.png"/></div></figure><p id="e802" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击<a class="ae jp" href="https://github.com/kshitijved/Market-Basket-Analysis" rel="noopener ugc nofollow" target="_blank">此处</a>下载程序和数据集…</p></div></div>    
</body>
</html>