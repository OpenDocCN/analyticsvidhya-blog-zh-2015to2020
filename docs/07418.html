<html>
<head>
<title>How to install CUDA on Red Hat Enterprise Linux (rhel7) and Ubuntu</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在红帽企业版Linux (rhel7)和Ubuntu上安装CUDA</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/installing-cuda-on-red-hat-linux-and-ubuntu-dda69cd5ab9c?source=collection_archive---------3-----------------------#2020-06-25">https://medium.com/analytics-vidhya/installing-cuda-on-red-hat-linux-and-ubuntu-dda69cd5ab9c?source=collection_archive---------3-----------------------#2020-06-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="8e45" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们的机器上安装CUDA总是一件艰难的工作，即使我们已经做了很多次。有时候会碰巧给TensorFlow安装了错误版本的CUDA。很多时候，我们会搞不清楚我们的安装有什么问题。</p><p id="d9d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">是的，我们都去过那里。这就是为什么人们说，“不要碰CUDA，除非你知道你在做什么”</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/1c4ff5c7c78276d929ed46bfb0859314.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bUl4CYyz_udLb3gMUQND-A.jpeg"/></div></div></figure><p id="2e40" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以我在这里介绍了在rhel7上安装CUDA-10.1(支持tf 2.x)的步骤。而且也可以用于Ubuntu。</p><p id="145c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第一步:登录英伟达</strong></p><p id="1192" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从<a class="ae jp" href="https://developer.nvidia.com/" rel="noopener ugc nofollow" target="_blank"> Nvidia-Home </a>完成您的档案注册，并使用您的凭证登录。</p><p id="0e68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第二步:下载CUDA-10.1运行文件(本地)</strong></p><ol class=""><li id="e340" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">进入此页面— <a class="ae jp" href="https://developer.nvidia.com/cuda-10.1-download-archive-base?target_os=Linux&amp;target_arch=x86_64&amp;target_distro=RHEL&amp;target_version=7&amp;target_type=runfilelocal" rel="noopener ugc nofollow" target="_blank">下载运行文件</a>。</li></ol><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jz"><img src="../Images/87eb326c020236eeda9de13386377d93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mRjfd16BRhY-qvikkVoKYg.png"/></div></div></figure><p id="3cf8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.右键单击下载，然后单击“复制链接位置/地址”<br/> 3。通过以下方式在您的计算机上执行运行文件</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ka kb l"/></div></figure><p id="db87" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第三步:环境变量</strong></p><p id="5a3f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">检查安装:</strong></p><p id="2a7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤2必须已经安装了CUDA-10.1。您可以通过以下方式检查二进制文件和库</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="8754" class="kh ki hi kd b fi kj kk l kl km">ls /usr/local</span></pre><p id="d4f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出应该如下所示。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kn"><img src="../Images/4028c8bff15865f48fdaaf948eb1bc56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TbFSHItl0voOgkcdrSZqmg.png"/></div></div></figure><p id="9d7a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">检查版本:</strong></p><p id="a4a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以通过以下方式检查当前的CUDA版本</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="d6ca" class="kh ki hi kd b fi kj kk l kl km">nvcc -V</span></pre><p id="35e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">或者</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="8112" class="kh ki hi kd b fi kj kk l kl km">cat /usr/local/cuda/version.txt</span></pre><p id="4bcf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">检查库:</strong></p><ol class=""><li id="44f9" class="jq jr hi ih b ii ij im in iq js iu jt iy ju jc jv jw jx jy bi translated">执行此命令检查TF库之间的冲突。</li></ol><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="7ab7" class="kh ki hi kd b fi kj kk l kl km">pip3 freeze |grep tensorflow</span></pre><p id="33ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果同时显示TensorFlow和TensorFlow-GPU，卸载TensorFlow，保留TensorFlow-GPU。</p><p id="3e7f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.运行这个python脚本来检查GPU访问</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ka kb l"/></div></figure><p id="1569" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果它返回<strong class="ih hj"> FALSE，</strong>那么寻找这个错误“无法打开库”，如果它在那里，问题的原因是由于CUDA变量。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ko"><img src="../Images/6dfe155ab0a5a56a58793d8e57722cc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/format:webp/1*7YdxVT3E40zSeG_SPDU_hA.png"/></div><figcaption class="kp kq et er es kr ks bd b be z dx translated">图书馆问题</figcaption></figure><p id="d2fa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.确保所有上述CUDA库都在这个目录中</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="a3f4" class="kh ki hi kd b fi kj kk l kl km">ls /usr/local/cuda-10.1/lib64/</span></pre><p id="dc9e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">分配变量:</strong></p><p id="dd8d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果所有的库都在那里，将目录指定为CUDA_HOME。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ka kb l"/></div></figure><p id="e686" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您是远程机器上的用户之一，每次会话都会删除您每次分配的本地变量。所以您应该在bash_profile中编写这些更改。</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="5213" class="kh ki hi kd b fi kj kk l kl km">nano /home/UserName/.bash_profile</span></pre><p id="ff68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后将这些行添加到。bash_profile</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ka kb l"/></div></figure><p id="ba79" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">并执行以下操作来保存更改</p><pre class="je jf jg jh fd kc kd ke kf aw kg bi"><span id="c9e2" class="kh ki hi kd b fi kj kk l kl km">source /home/UserName/.bash_profile</span></pre><p id="2e62" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">执行完这些步骤后，您将获得tf.test.is_gpu_available()的“成功打开的动态库”。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kt"><img src="../Images/36f9832aa28fe7d14548b6aaf895abdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-aHXgZ1Lc0KucQ7OVHOtxQ.png"/></div></div></figure><p id="8fa3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您收到任何错误“无法打开库libcudnn.so.7”，请按照以下步骤操作。</p><p id="65bd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤4:安装libcudnn 7 </strong></p><p id="7cf1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">进入此页面— <a class="ae jp" href="https://developer.nvidia.com/rdp/cudnn-download" rel="noopener ugc nofollow" target="_blank"> cuDNN </a>并下载适用于CUDA 10.1的<strong class="ih hj">cud nn v 7 . 6 . 5</strong></p><p id="5052" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">并从您的浏览器获取下载链接</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ku"><img src="../Images/752a2e70b63d865b2b471e18e1690134.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QTZ8g2AGX9bQ3Ho1Hv5Ghw.jpeg"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx translated">对于Firefox</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kv"><img src="../Images/5ab96d50bd6db9a62ae2ae5411e12d1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cy4EfuPnU3HFDXGbTnkzRQ.png"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx translated">对于Chrome</figcaption></figure><p id="cda6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">并执行这些命令</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ka kb l"/></div></figure><p id="c029" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在成功安装cuDNN之后，您就可以在GPU s上训练您的模型了🤟🤙</p><p id="9e43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">别忘了重启你的机器，它需要刷新一下:)</p></div></div>    
</body>
</html>