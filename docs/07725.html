<html>
<head>
<title>Text Mining with R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于R的文本挖掘</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/text-mining-with-r-d5606b3d7bec?source=collection_archive---------17-----------------------#2020-07-05">https://medium.com/analytics-vidhya/text-mining-with-r-d5606b3d7bec?source=collection_archive---------17-----------------------#2020-07-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/cd8e7ef0044fc5fa971f3a8482288fe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SlT7VW-2iMXGzJxlWngiOg.jpeg"/></div></div></figure><p id="cf5d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">感情很复杂，但情感分析不一定。当涉及到交流概念和情感时，词语总是很重要的。鉴于我们现在在社交媒体平台上消费词语的注意力持续时间很短，选择使用什么词语变得更加紧迫。</p><p id="162c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最近，我在探索R中可用的不同数据集和包时，碰巧看到了由<a class="ae jo" href="https://juliasilge.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> Julia Silge </strong> </a>和<a class="ae jo" href="http://varianceexplained.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">大卫·罗宾逊</strong> </a>写的《<a class="ae jo" href="https://www.tidytextmining.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">带R的文本挖掘》，并立即被这本书吸引住了。我没有关于文本挖掘或情感分析的先验知识，我决定读这本书。</strong></a></p><blockquote class="jp jq jr"><p id="dd26" class="iq ir js is b it iu iv iw ix iy iz ja jt jc jd je ju jg jh ji jv jk jl jm jn hb bi translated"><strong class="is hj">情感分析</strong>(又称<strong class="is hj">意见挖掘</strong>或<strong class="is hj">情感AI </strong>)是指利用自然语言处理、文本分析、计算语言学、生物特征识别等技术，对情感状态和主观信息进行系统的识别、提取、量化和研究。</p></blockquote><p id="8db4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这篇文章中，我决定将这些概念应用到我正在读的这本书上，这本书是艾米莉·勃朗特的《呼啸山庄》。这本书和其他60，000本书可以使用<code class="du jw jx jy jz b">gutenbergr</code>包从<a class="ae jo" href="https://www.gutenberg.org/" rel="noopener ugc nofollow" target="_blank">古腾堡项目</a>下载。</p></div><div class="ab cl ka kb gp kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hb hc hd he hf"><p id="9756" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我将通过安装和加载练习所需的包来开始情绪分析。最常见的方法是使用CRAN repository，然后你只需要包的名字，使用命令<code class="du jw jx jy jz b">install.packages("package")</code>。要加载已安装的软件包，请使用<code class="du jw jx jy jz b">library(package)</code>。</p><p id="9837" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以下是本文中的包所需的包:</p><pre class="kh ki kj kk fd kl jz km kn aw ko bi"><span id="16f9" class="kp kq hi jz b fi kr ks l kt ku">library(dplyr)<br/>library(tidytext)<br/>library(gutenbergr)<br/>library(wordcloud)<br/>library(ggplot2)</span></pre><p id="7b17" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，是时候使用古腾堡计划图书ID号安装图书进行分析了。</p><pre class="kh ki kj kk fd kl jz km kn aw ko bi"><span id="69f9" class="kp kq hi jz b fi kr ks l kt ku">WHeights_Bronte &lt;- gutenberg_download(768)</span></pre><p id="7d40" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">分析的下一步是整理用于文本挖掘和情感分析的数据。对于这一步，我将使用<code class="du jw jx jy jz b">unnest_token()</code>包将一行(row)转换成单独的单词(tokens)。我可以下载文本，将其分成单个单词，并使用<code class="du jw jx jy jz b">anti_join()</code>删除无用的单词(例如，“the”、“of”、“to”)。</p><pre class="kh ki kj kk fd kl jz km kn aw ko bi"><span id="6118" class="kp kq hi jz b fi kr ks l kt ku">Tidy_Bronte &lt;- Emily_Bronte %&gt;%<br/>  unnest_tokens(word,text) %&gt;%<br/>  anti_join(stop_words)</span></pre><h1 id="1922" class="kv kq hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">词频</h1><p id="9185" class="pw-post-body-paragraph iq ir hi is b it ls iv iw ix lt iz ja jb lu jd je jf lv jh ji jj lw jl jm jn hb bi translated">第一步是量化单词在小说34章中的使用频率，对内容有一个初步的概念。因此，我统计了每个单词出现的次数，并只选择了最常见的单词(即出现超过100次)。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/edc7c3145ceff61d3e3593adae31e7f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0-Wxo5BRq1BfG88DgIZdWQ.png"/></div></div></figure><p id="133e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">不出所料，主角的名字是小说中出现频率最高的词，其次是凯瑟琳和恩萧。在希斯克利夫和凯瑟琳之间看到林顿这个词是很有趣的:因为希斯克利夫和凯瑟琳的爱情故事在林顿和凯瑟琳结婚时结束了。</p><h1 id="afa7" class="kv kq hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">情感分析</h1><p id="0792" class="pw-post-body-paragraph iq ir hi is b it ls iv iw ix lt iz ja jb lu jd je jf lv jh ji jj lw jl jm jn hb bi translated">这本书的类型被描述为黑暗、悲剧和哥特式小说。我将借助情感分析来验证这一点。在前一篇文章中，我们看到了书中常用的词。接下来，你将了解这些词语如何促成不同的情感。我将使用由<code class="du jw jx jy jz b">tidytext</code>包提供的几个情感词典中的一个来进行情感分析，这个词典是“<a class="ae jo" href="http://saifmohammad.com/WebPages/AccessResource.htm" rel="noopener ugc nofollow" target="_blank"> NRC </a>”。</p><pre class="kh ki kj kk fd kl jz km kn aw ko bi"><span id="e054" class="kp kq hi jz b fi kr ks l kt ku">nrc_emotions &lt;- get_sentiments("nrc") %&gt;%<br/>  filter(sentiment == "joy" |<br/>           sentiment == "anger" |<br/>           sentiment == "fear" |<br/>           sentiment == "sadness")</span><span id="6b10" class="kp kq hi jz b fi ly ks l kt ku">TB_emotions &lt;- Tidy_Bronte %&gt;%<br/>  inner_join(nrc_emotions) %&gt;% <br/>  count(word, sentiment) %&gt;% <br/>  arrange(sentiment)</span></pre><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/848771ff4aab7729e201ef4e2f3c02ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KREa5a67ON574Ze1-iNoKA.png"/></div></div></figure><p id="4b5a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我从<a class="ae jo" href="http://saifmohammad.com/WebPages/NRC-Emotion-Lexicon.htm" rel="noopener ugc nofollow" target="_blank"> NRC单词-情绪联想词典</a>中提取情绪分类，选择了四种情绪:<strong class="is hj">愤怒</strong>、<strong class="is hj">恐惧</strong>、<strong class="is hj">喜悦</strong>和<strong class="is hj">悲伤</strong>。的确，悲剧似乎是《呼啸山庄》中这些人物生活的主旋律。</p><h1 id="1027" class="kv kq hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">词云</h1><p id="ff79" class="pw-post-body-paragraph iq ir hi is b it ls iv iw ix lt iz ja jb lu jd je jf lv jh ji jj lw jl jm jn hb bi translated">最后，我用这些单词创建了一个<strong class="is hj">单词云</strong>，用“<a class="ae jo" href="https://www.cs.uic.edu/~liub/FBS/sentiment-analysis.html" rel="noopener ugc nofollow" target="_blank"> bing </a>”情感词典将频繁出现的单词的正面和负面情感可视化。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/8d225b29b3760aab9e9105dee672a9df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FigqeR-3NAMa-UYU6FafZw.png"/></div></div></figure><h1 id="2cf4" class="kv kq hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">结论</h1><p id="a9fc" class="pw-post-body-paragraph iq ir hi is b it ls iv iw ix lt iz ja jb lu jd je jf lv jh ji jj lw jl jm jn hb bi translated">这太有趣了！现在您已经看到了使用tidytext包进行情感分析的基本实现。如果你想获得更多的见解，可以查阅本书<a class="ae jo" href="https://www.tidytextmining.com/" rel="noopener ugc nofollow" target="_blank"> <em class="js">文字挖掘与R </em> </a> <em class="js">。</em>感谢您的阅读！</p><p id="f52b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">整篇文章的代码见<a class="ae jo" href="https://github.com/namithadeshpande/Data-Analysis-with-R/blob/master/Emily_bronte.R" rel="noopener ugc nofollow" target="_blank">此处</a>。</p></div></div>    
</body>
</html>