<html>
<head>
<title>Building a CLI Journal App with Ruby, SQLite, and ActiveRecord</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Ruby、SQLite和ActiveRecord构建CLI日志应用程序</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/building-a-cli-journal-app-with-ruby-sqlite-and-activerecord-2c1f5be00f93?source=collection_archive---------12-----------------------#2020-03-10">https://medium.com/analytics-vidhya/building-a-cli-journal-app-with-ruby-sqlite-and-activerecord-2c1f5be00f93?source=collection_archive---------12-----------------------#2020-03-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="363d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们面对现实吧，如果你是编程新手，很少有什么事情比学习使用命令行更酷了。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="ji jj l"/></div><figcaption class="jk jl et er es jm jn bd b be z dx translated">我学习如何“光盘”到一个目录后的实际镜头。</figcaption></figure><p id="093b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">也许更酷的是当你真正开始做东西时的感觉。那么，为什么不把两个很酷的东西放在一起，使用good ol' terminal作为一个轻量级的、易于管理的用户界面来制作您的第一个Ruby应用程序呢！</p><p id="396f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除了给你的朋友留下深刻印象和让你的妈妈困惑之外，学习在命令行上构建一个完整的CRUD应用程序是一种很好的方式，可以练习OOP设计基础，巩固你对多对多数据关系的理解，如果你是一个想要成为ruby爱好者的人，在继续使用Rails构建更复杂的浏览器应用程序之前，先了解一下“幕后”发生了什么。</p><p id="0171" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我将向您介绍我构建一个具有用户友好界面的快速日志应用程序的基本步骤。</p><h2 id="beec" class="jo jp hi bd jq jr js jt ju jv jw jx jy iq jz ka kb iu kc kd ke iy kf kg kh ki bi translated">1.规划你的人际关系</h2><p id="7f30" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">在决定一个项目想法后，花几分钟时间思考一下你的人际关系将如何构建。在我的例子中，一个用户可以有许多条目和许多日志，一个日志可以有许多条目和许多用户。一个条目属于一个用户和一个日志，因此是“连接”。</p><p id="ba83" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在使用<a class="ae ko" href="https://www.rubyguides.com/2019/02/ruby-rake/" rel="noopener ugc nofollow" target="_blank"> Rake </a>创建我的数据库和表格后，我的整个应用程序的模式如下所示…</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es kp"><img src="../Images/ba7b9108a1477061ebd26575df274403.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*jdj2rcY59tq7YkfDwmjFcQ.png"/></div><figcaption class="jk jl et er es jm jn bd b be z dx translated">注意“entries”如何接受user_id和journal_id作为参数，从而在我的数据库表中创建多对多关系。</figcaption></figure><p id="b99b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我的用户、条目和日志模型通过它们的对应关系捆绑在一起，如下所示…</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es ks"><img src="../Images/3e8e54e85b7d0ddc157b2122345d45b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:696/format:webp/1*gMg31AOjy2BxOD3trzBaoA.png"/></div><figcaption class="jk jl et er es jm jn bd b be z dx translated">结合屏幕抓取。在实际代码中，每个模型都驻留在自己的文件中。</figcaption></figure><h2 id="d22c" class="jo jp hi bd jq jr js jt ju jv jw jx jy iq jz ka kb iu kc kd ke iy kf kg kh ki bi translated">2.植入虚拟数据以测试您的数据库和关系</h2><p id="dcac" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">让我们仔细检查一下ActiveRecord是否一切正常<a class="ae ko" href="https://guides.rubyonrails.org/active_record_basics.html" rel="noopener ugc nofollow" target="_blank"> ActiveRecord的事情</a>。在我的seeds.rb文件中，我创建了几个日志、一个用户和一些与用户和日志相关联的随机条目，以便验证我的所有数据都保存到了数据库中，并且我的关系正常工作。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es kt"><img src="../Images/3bd4d4ffed84854f9f0a218d0f07065a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wn-QZ3w_NsXTWIBPOPwV3w.png"/></div></div><figcaption class="jk jl et er es jm jn bd b be z dx translated">我可以通过使用序列化器将数组传递给条目的内容，但这是另一篇文章的主题。</figcaption></figure><p id="8fe3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我使用<a class="ae ko" href="https://github.com/pry/pry" rel="noopener ugc nofollow" target="_blank">撬</a>作为调试工具，它允许我一步一步地检查我的代码，确保一切正常。</p><pre class="jd je jf jg fd ky kz la lb aw lc bi"><span id="0cee" class="jo jp hi kz b fi ld le l lf lg"><strong class="kz hj">User.all</strong> #=&gt; [#&lt;User:0x00007fb9aa1d03d8 id: 1, name: "Joe Gelay"&gt;]</span><span id="aa17" class="jo jp hi kz b fi lh le l lf lg"><strong class="kz hj">Entry.all</strong> #=&gt; [#&lt;Entry:0x00007fb9a8b76d08 id: 1, content: ["What a great morning!"], mood: 3, user_id: 1, journal_id: 1, created_at: 2020-03-10 03:37:24 UTC, updated_at: 2020-03-10 03:37:24 UTC&gt;, #&lt;Entry:0x00007fb9a8bc8478 id: 2, ...]</span><span id="0055" class="jo jp hi kz b fi lh le l lf lg"><strong class="kz hj">Journal.all</strong> #=&gt; [#&lt;Journal:0x00007fb9a8d64ac0 id: 1, name: "Morning"&gt;, #&lt;Journal:0x00007fb9a8d71590 id: 2, name: "Afternoon"&gt;, #&lt;Journal:0x00007fb9a8d71428 id: 3, name: "Night"&gt;]</span><span id="89d1" class="jo jp hi kz b fi lh le l lf lg">etc...</span></pre><p id="93a0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">太好了！现在让我们进入有趣的部分…</p><h2 id="0aa7" class="jo jp hi bd jq jr js jt ju jv jw jx jy iq jz ka kb iu kc kd ke iy kf kg kh ki bi translated">3.想象几个用户故事</h2><p id="1617" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">在迷失在你的代码中之前，给你自己一些简单直接的目标，告诉你用户应该如何与你的应用程序交互。试着用这样的结构来表达这些目标:<strong class="ih hj"> <em class="li">作为一个用户，我希望能够…这样… </em> </strong></p><p id="a52b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于journal应用程序，以下是我首先想到的一些用户故事:</p><ol class=""><li id="6af4" class="lj lk hi ih b ii ij im in iq ll iu lm iy ln jc lo lp lq lr bi translated">作为一名用户，我希望能够创建一个新的日志条目，这样我就可以跟踪我的一天和心情。</li><li id="09d1" class="lj lk hi ih b ii ls im lt iq lu iu lv iy lw jc lo lp lq lr bi translated">作为一名用户，我希望能够阅读旧的日志条目，以便能够记住过去的日子。</li><li id="4ea1" class="lj lk hi ih b ii ls im lt iq lu iu lv iy lw jc lo lp lq lr bi translated">作为用户，我希望能够更新日志条目，以防出错。</li><li id="057a" class="lj lk hi ih b ii ls im lt iq lu iu lv iy lw jc lo lp lq lr bi translated">作为一名用户，我希望能够分析我所有日志中的情绪，这样我就可以看到我的想法与我的情绪之间的关系。</li></ol><p id="b272" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">写出这样的故事可以让你确定应用程序最重要的功能，帮助你设计一个以用户为中心的界面，并作为下一步工作的检查点。</p><h2 id="0971" class="jo jp hi bd jq jr js jt ju jv jw jx jy iq jz ka kb iu kc kd ke iy kf kg kh ki bi translated">4.创建CLI模型来启动您的应用程序</h2><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es lx"><img src="../Images/aec8d45e200eac3432b4ff5cb0b521e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*vK-MDjuKRiQV0mNw-HrwrA.png"/></div></figure><p id="02fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在获得用户名、检查它们是否存在于数据库中，然后设置一个@current_user变量之后，我们就开始比赛了。CLI模型保持简洁明了，以遵循OOP原则。CLI是否使用应用程序创建日志条目？不。那是使用者。因此，我们希望将大部分代码放在我们的“用户”模型中。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es ly"><img src="../Images/0cf2f5e45d91346289d65d4ba0d0ee2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:692/format:webp/1*YBvKdXUnNNbrqniHJQXiiA.png"/></div><figcaption class="jk jl et er es jm jn bd b be z dx translated">runner.rb文件来启动应用程序。</figcaption></figure><p id="e32c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">应用程序通过runner.rb文件启动，该文件清除终端，实例化一个新的CLI，然后调用上面的' welcome '方法。</p><h2 id="7d5c" class="jo jp hi bd jq jr js jt ju jv jw jx jy iq jz ka kb iu kc kd ke iy kf kg kh ki bi translated">5.世界(即命令行)是你的牡蛎！</h2><p id="ce1b" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated">现在是激动人心的部分，您可以自由地让您的应用程序做您想让它做的任何事情！体验宝石的乐趣，如<a class="ae ko" href="https://github.com/piotrmurach/tty-prompt" rel="noopener ugc nofollow" target="_blank"> TTY提示</a>为您的界面添加时尚菜单，尝试添加ASCII艺术<a class="ae ko" href="https://www.asciiart.eu/" rel="noopener ugc nofollow" target="_blank">或深入ActiveRecord并发现查询数据库的新方法，以将有趣的数据返回给您的用户。</a></p><p id="6ca8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了获得灵感，下面是我完成的CLI journal应用程序的视频概述。在这里看GitHub <a class="ae ko" href="https://github.com/joegelay/cli_journal_app" rel="noopener ugc nofollow" target="_blank">上的代码。</a></p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="lz jj l"/></div></figure></div></div>    
</body>
</html>