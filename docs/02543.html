<html>
<head>
<title>Hypothesis Test in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的假设检验</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/hypothesis-test-in-python-13ea116bae29?source=collection_archive---------6-----------------------#2019-12-22">https://medium.com/analytics-vidhya/hypothesis-test-in-python-13ea116bae29?source=collection_archive---------6-----------------------#2019-12-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/dc7385b8ae4c8b3b954ebdbff3df0593.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0UTo1vnQ8SpkZIRA.jpg"/></div></div></figure><h1 id="4665" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">数据驱动的时代</h1><p id="8c26" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">我们生活在一个数据驱动决策的时代。这意味着你在工作或个人生活中的每一次讨论都需要信息来支持你的论点。</p><p id="8a88" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">从工作的角度来看，这意味着你将成为一个过程的一部分，这个过程包括数据提取、分析、见解发展，以及最终根据你所学的内容制定战略。</p><p id="f9e7" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">有时候，仅仅是信息是不够的。你会遇到某些情况，你会认为某个观察到的差异很重要，而你的同事却不这么认为。这篇文章旨在帮助你了解:假设检验——简单的理论和应用；如何使用python进行测试并最终得出结论。</p><h1 id="9914" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">假设检验</h1><p id="c4db" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">这种技术可以让你识别出微小的群体差异。在本文中，我们将只探讨二项式检验，或者换句话说，两个总体之间的差异。</p><p id="03be" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">当我们处理A和b两种人群时，使用这种技术是很常见的。想象一下，你在一家营销公司工作，他们决定在他们的应用程序中加入一个新功能。目标是增加应用访问。为了评估结果，您将客户数据库分成两个平衡的样本。A组将不能访问新功能，而B组可以。发布该功能后，您提取每个组和客户的应用程序访问次数，并评估各组之间是否存在显著差异。</p><p id="ee75" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">现在，让我们来看看这个理论。通常，我们没有信息参数，所以我们需要估计平均值。为此，我们将使用最大似然估计。因此，给定一个观察向量<strong class="jq hj"> X，</strong>，我们可以构建我们的测试结构:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="4769" class="la ir hi kw b fi lb lc l ld le">H0: Xa = Xb — which is called the Null Hypothesis<br/>H1: Xa != Xb — which is called the Alternative Hypothesis</span></pre><p id="e049" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">从理论上讲，零假设必须相等。原因是我们假设人口A和B具有相同的分布，我们需要满足统计特性。第一个假设是零假设是真的，如果结果显示不是，你可以得出结论，你拒绝了零假设，或者换句话说，替代假设是真的。特别是，我更喜欢使用替代假设作为平均值之间的差异，一旦你将获得信息，如果它更大或更小。</p><p id="7901" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">对于我们的示例，我们将模拟两个具有不同平均值和相同大小的随机样本。值得一提的是，在现实世界中，你需要确认你有足够的样本来进行测试，否则你会得到假的结果。</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="356a" class="la ir hi kw b fi lb lc l ld le">import pandas as pd<br/>import numpy as np<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns<br/>import os</span><span id="fc53" class="la ir hi kw b fi lf lc l ld le">sample_a = np.random.normal(24, 10, 10000)<br/>sample_b_1 = np.random.normal(24, 10, 10000)<br/>sample_b_2 = np.random.normal(25, 10, 10000)</span><span id="6c21" class="la ir hi kw b fi lf lc l ld le">plt.figure(figsize=(20, 10))<br/>sns.kdeplot(sample_a, label="A", shade = True, color = '#000000')<br/>sns.kdeplot(sample_b_1, label="B_1", shade = True, color = '#B22222')<br/>sns.kdeplot(sample_b_2, label="B_2", shade = True, color = '#00008B')<br/>plt.legend();</span></pre><figure class="kr ks kt ku fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lg"><img src="../Images/e37dc471be2eedb0e65b727a9512bf46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j6pnOoIvwdwk294tD6VHvg.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx translated">按组划分的应用程序访问分布</figcaption></figure><h1 id="63f3" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">假设检验——检验的类型</h1><p id="5153" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">好的。我们有分布，但我们需要使用什么测试。三种最常见的检验是Z检验、T检验和卡方检验。</p><h2 id="d1a4" class="la ir hi bd is ll lm ln iw lo lp lq ja jz lr ls je kd lt lu ji kh lv lw jm lx bi translated"><strong class="ak"> Z测试</strong></h2><p id="fb47" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">这个测试是基于这样一个事实:我们的总体是正态分布的，我们知道方差，样本量大于30。<br/>因为<a class="ae ly" href="http://sphweb.bumc.bu.edu/otlt/MPH-Modules/BS/BS704_Probability/BS704_Probability12.html" rel="noopener ugc nofollow" target="_blank">中心极限理论</a>，平均值有一个正态分布，所以我们不需要担心这个。Z统计(或Z得分)的计算方法如下:</p><figure class="kr ks kt ku fd ij er es paragraph-image"><div class="er es lz"><img src="../Images/5b5c0d53881f09b277090407d289e32e.png" data-original-src="https://miro.medium.com/v2/resize:fit:464/format:webp/1*sXQsM9vn7Ix8sRCxdhvefA.png"/></div><figcaption class="lh li et er es lj lk bd b be z dx translated">其中X是观察值，μ是平均值，σ是标准偏差</figcaption></figure><h2 id="f544" class="la ir hi bd is ll lm ln iw lo lp lq ja jz lr ls je kd lt lu ji kh lv lw jm lx bi translated">t检验</h2><p id="d8b7" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">为了应用T检验，我们的总体必须是正态分布的，我们不需要知道均值和方差。因此，与z相比，这是一个更强的测试。一般来说，当我们需要比较两个样本之间的差异时，我们使用这个测试。t分数的计算方法是</p><figure class="kr ks kt ku fd ij er es paragraph-image"><div class="er es ma"><img src="../Images/283bedc9a51030bf3f87066665a8ea8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:368/format:webp/1*dh6lQG3qCFrFZNluXZqn1Q.png"/></div><figcaption class="lh li et er es lj lk bd b be z dx translated">其中X是估计的平均值，μ是总体平均值，S是估计的标准偏差，n是样本量</figcaption></figure><h2 id="1d4e" class="la ir hi bd is ll lm ln iw lo lp lq ja jz lr ls je kd lt lu ji kh lv lw jm lx bi translated">其他人</h2><p id="ac3d" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">您可能需要使用其他测试(方差分析、f检验、卡方检验等),但我们不会将重点放在它上面，以免过多地扩展主题。</p><h1 id="3159" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">假设检验—临界值</h1><blockquote class="mb mc md"><p id="723c" class="jo jp me jq b jr km jt ju jv kn jx jy mf ko kb kc mg kp kf kg mh kq kj kk kl hb bi translated"><a class="ae ly" href="http://www.stat.yale.edu/Courses/1997-98/101/sigtest.htm" rel="noopener ugc nofollow" target="_blank">给定假设检验的<strong class="jq hj">显著性水平</strong>是一个<strong class="jq hj">值</strong>，小于或等于该值的P- <strong class="jq hj">值</strong>被认为在统计上<strong class="jq hj">显著</strong>。</a></p></blockquote><p id="f98e" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">T临界值是<a class="ae ly" href="https://www.statisticshowto.datasciencecentral.com/probability-and-statistics/t-distribution/" rel="noopener ugc nofollow" target="_blank"> t分布</a>上的“截止点”。几乎等于正态分布。区别在于每个分布的形状。</p><figure class="kr ks kt ku fd ij er es paragraph-image"><div class="er es mi"><img src="../Images/6026acbf29321291c295592a6a14213c.png" data-original-src="https://miro.medium.com/v2/resize:fit:732/format:webp/0*PowBSAVj_ljLl2fG.png"/></div><figcaption class="lh li et er es lj lk bd b be z dx translated">双边测试临界区(红色)</figcaption></figure><p id="3bd7" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">一般来说，我们定义临界值为<strong class="jq hj"> α = 0.05。</strong>如果我们的p值低于<strong class="jq hj"> α </strong>，我们拒绝H0。否则，我们保持我们的零假设。</p><h1 id="06d3" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">应用测试</h1><p id="2b29" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">既然我们已经知道了这个理论，那么是时候进行测试了！</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="cdae" class="la ir hi kw b fi lb lc l ld le">import statsmodels.api as sm<br/>import scipy.stats as stats</span><span id="b3bf" class="la ir hi kw b fi lf lc l ld le">## H0: A = B<br/>## H1: A != B<br/>test_1 = stats.ttest_ind(sample_b_1,sample_a, equal_var = True)<br/>test_2 = stats.ttest_ind(sample_b_2,sample_a, equal_var = True)</span><span id="9cdd" class="la ir hi kw b fi lf lc l ld le">print(test_1)<br/>print(test_2)</span></pre><figure class="kr ks kt ku fd ij er es paragraph-image"><div class="er es mj"><img src="../Images/e3520ca83f26a5b2520a2e28fe8fd936.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/1*c55YzDtRYeHF8fUWOpElGg.png"/></div><figcaption class="lh li et er es lj lk bd b be z dx translated">t检验输出</figcaption></figure><p id="3f25" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">正如我们所看到的，第一个样本并没有表现出明显的差异。另一方面，第二个样本，即使有很小的差异，我们认为这种差异是显著的。这使我们能够得出结论，在有疑问的情况下，我们应该应用统计技术来支持我们的结果。</p><p id="adb5" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">值得一提的是，在某些领域(主要是生物统计学)，临界值需要非常非常小。原因是因为我们需要提供尽可能高的重要性。</p><p id="fd97" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">本文到此为止。希望你们喜欢:)</p></div></div>    
</body>
</html>