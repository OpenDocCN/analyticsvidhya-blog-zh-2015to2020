<html>
<head>
<title>How to Achieve more than 98% of accuracy on Titanic dataset</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Titanic数据集上达到98%以上的准确率</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-achieve-more-than-98-of-accuracy-on-titanic-dataset-87241c18161a?source=collection_archive---------8-----------------------#2019-11-06">https://medium.com/analytics-vidhya/how-to-achieve-more-than-98-of-accuracy-on-titanic-dataset-87241c18161a?source=collection_archive---------8-----------------------#2019-11-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/08fba74cfcf2724eb3a381d39981c765.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eKo_FXHetWHkh29Z"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">伊夫琳·帕里斯在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="2df2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于机器学习爱好者来说，从泰坦尼克号数据集开始练习非常平常。</p><p id="d287" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了预测泰坦尼克号灾难中全班乘客的存活率，我开始搜索Kaggle上的数据集。我决定选择，<strong class="ix hj"> Kaggle +维基百科数据集</strong>来研究客观。</p><p id="4ef1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这项研究是在R工作室完成的。</p><p id="58f4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">加载数据前，请仔细阅读Readme.md 中的“<a class="ae iu" href="https://github.com/RutvijBhutaiya/The-Famous-Titanic-Study/blob/master/README.md" rel="noopener ugc nofollow" target="_blank">数据清理和编辑”部分。</a></p><p id="3587" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">数据集中变量的结构如下...</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="391e" class="kc kd hi jy b fi ke kf l kg kh">$ PassengerId       : int  1 2 3 4 5 6 7 8 9 10 ...<br/>$ Survived          : int  0 1 1 1 0 0 0 0 1 1 ...<br/>$ Pclass            : int  3 1 3 1 3 3 1 3 3 2 ...<br/>$ Name              : Factor w/ 1307 levels "Abbing, Mr. Anthony",..: 156 287 531 430 23 826 775 922 613 855 ...<br/>$ NameLength        : int  23 27 22 29 24 16 23 30 22 22 ...<br/>$ Sex               : Factor w/ 2 levels "female","male": 2 1 1 1 2 2 2 2 1 1 ...<br/>$ SibSpouse         : int  1 1 0 1 0 0 0 3 0 1 ...<br/>$ ParentsChild      : int  0 0 0 0 0 0 0 1 2 0 ...<br/>$ TicketNumber      : Factor w/ 929 levels "110152","110413",..: 721 817 915 66 650 374 110 542 478 175 ...<br/>$ Fare              : num  7.25 71.28 7.92 53.1 8.05 ...<br/>$ Cabin             : Factor w/ 187 levels "","A10","A11",..: 1 108 1 72 1 1 165 1 1 1 ...<br/>$ Age_wiki          : num  22 35 26 35 35 22 54 2 26 14 ...<br/>$ Age_Months        : int  264 420 312 420 420 264 648 24 312 168 ...<br/>$ HometownCountry   : Factor w/ 47 levels "","Argentina",..: 18 47 19 47 18 24 47 41 47 27 ...<br/>$ Boarded           : Factor w/ 5 levels "","Belfast","Cherbourg",..: 5 3 5 5 5 4 5 5 5 3 ...<br/>$ Destination       : Factor w/ 292 levels "","Aberdeen, South Dakota, US",..: 217 187 186 242 186 186 73 57 250 60 ...<br/>$ DestinationCountry: Factor w/ 10 levels "","Brazil","Canada",..: 3 10 10 10 10 10 10 10 10 10 ...<br/>$ Lifeboat          : Factor w/ 21 levels "","1","10","11",..: 1 12 7 21 1 1 1 1 8 1 ...<br/>$ LifeboatSupport   : Factor w/ 2 levels "No","Yes": 1 2 2 2 1 1 1 1 2 1 ...</span></pre><p id="bc7c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">我们在数据分析中开始的重要任务是关于EDA(探索性数据分析)</strong>。我们还使用tableau进行分析，不仅如此，我们还使用Tableau图表分析来处理缺失值。</p><p id="f14c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">根据分析，我们发现一等舱的乘客有优先乘坐救生艇的权利，因为62%的乘客幸存，而三等舱的乘客只有24%幸存。然而，一等舱、二等舱和三等舱的乘客总数分别为323人、277人和709人。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div class="er es ki"><img src="../Images/796ad9da4c23a72b15e5be26605504f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*MeYSsuhaRoB43Rx08SiCFQ.png"/></div></figure><p id="03a9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">研究中最精彩的部分是EDA，它涵盖了，</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="7794" class="kc kd hi jy b fi ke kf l kg kh"><strong class="jy hj"># Treating Missing Values<br/># Pivot table Analysis<br/># Fare Variable Analysis for Outliers<br/># Boxplot Analysis for Outlier - Used Hypothesis <br/># Other Variables Outliers Study<br/># Correlation<br/># Data Normalization</strong></span><span id="1e3b" class="kc kd hi jy b fi kj kf l kg kh"><strong class="jy hj">## And Finally we stored clean data into TitanicCleanData.csv file.</strong> </span></pre><p id="edca" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这项研究中，我们决定在同一个数据集(TitanicCleanData.csv)上研究三种ML技术。一项完整的研究在美国完成</p><p id="4def" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在建立模型之前，我们将数据分成三部分，<strong class="ix hj"> 1。幸存变量的缺失值-实际预测。2.训练数据集—用于模型训练。3.测试数据集—用于测试基于未知和性能的模型。</strong></p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="3f9c" class="kc kd hi jy b fi ke kf l kg kh">## Development (Study) dataSet and Validation (Test) dataset </span><span id="2fbc" class="kc kd hi jy b fi kj kf l kg kh">Prediction = subset(TitanicCleanData, is.na(TitanicCleanData$Survived)) </span><span id="352a" class="kc kd hi jy b fi kj kf l kg kh">train = na.omit(TitanicCleanData)attach(train) </span><span id="ce24" class="kc kd hi jy b fi kj kf l kg kh"># %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% # </span><span id="d11b" class="kc kd hi jy b fi kj kf l kg kh">Make Ratio of 30% and 70% for test1 and train1 dataset  </span><span id="2e5c" class="kc kd hi jy b fi kj kf l kg kh">ind = sample(2, nrow(train), replace = TRUE, prob = c(0.7,0.3)) </span><span id="00c3" class="kc kd hi jy b fi kj kf l kg kh">train1 = train[ind == 1,]<br/>test1 = train[ind == 2,]</span></pre><p id="30f2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，我们应用随机森林技术来预测乘客的存活率。我们使用了<strong class="ix hj">“bo ruta”特征选择技术，</strong>并从研究中剔除了不太重要的特征。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="32d3" class="kc kd hi jy b fi ke kf l kg kh">#Feature Selection Techniques <br/>attach(train1) <br/>set.seed(123) </span><span id="a841" class="kc kd hi jy b fi kj kf l kg kh">boruta.train &lt;- Boruta(Survived ~ . , data=train1, doTrace = 2)</span></pre><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kk"><img src="../Images/8e2099989cd9ea9591774494023d8937.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yOFpNsF0qOdpIr6R"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片由<a class="ae iu" href="https://unsplash.com/@gerandeklerk?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Geran de Klerk </a>在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="e089" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们调整了随机森林模型，并根据错误率选择了正确数量的变量和树，以避免过度拟合。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="d1d0" class="kc kd hi jy b fi ke kf l kg kh">train.tune = tuneRF(x = train1[, -c(1)], <br/>y = as.factor(train1$Survived),                   <br/>mtryStart = 6,                    <br/>ntreeTry = 41,                    <br/>stepFactor = 1.2,                    <br/>improve = 0.0001,                    <br/>trace = TRUE,                    <br/>plot = TRUE,                    <br/>nodesize = 20,                    <br/>doBest = TRUE,                    <br/>importance = TRUE)  </span><span id="d65c" class="kc kd hi jy b fi kj kf l kg kh">train.rf = randomForest(as.factor(train1$Survived) ~ ., <br/>data = train1,                         <br/>ntree =31, mtry = 5, nodesize = 20, importance  = TRUE)</span></pre><p id="36e1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">同样的模型——train . RF——我们应用于在测试数据集上预测泰坦尼克号灾难中幸存的乘客，以检查模型的性能。</p><p id="9ed5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于未知数据的<strong class="ix hj">性能测量</strong>，我们使用了三种技术，<strong class="ix hj"> 1。混淆矩阵，2。F1分数，3。AUC分数。</strong></p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="4394" class="kc kd hi jy b fi ke kf l kg kh"># Confusion Matrix  <br/>library(caret)<br/>library(e1071) </span><span id="26f7" class="kc kd hi jy b fi kj kf l kg kh">confusionMatrix(as.factor(test1$Survived), test1$predict.class) </span><span id="9fcd" class="kc kd hi jy b fi kj kf l kg kh">## F1 Score </span><span id="6e48" class="kc kd hi jy b fi kj kf l kg kh">precision.test1 = precision(as.factor(test1$Survived), test1$predict.class)<br/># [1] 0.9940828 </span><span id="def1" class="kc kd hi jy b fi kj kf l kg kh">recall.test1 = recall(as.factor(test1$Survived), test1$predict.class)<br/># [1] 0.9767442 </span><span id="329c" class="kc kd hi jy b fi kj kf l kg kh">test1.F1 = (2*precision.test1*recall.test1) / sum(precision.test1, recall.test1)<br/># [1] 0.9853372  </span><span id="b03a" class="kc kd hi jy b fi kj kf l kg kh">## ROC Curve <br/>roc(test1$Survived, as.numeric(test1$predict.class), plot = TRUE, main = 'ROC Curve for test1', col = 'darkseagreen')</span></pre><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kl"><img src="../Images/bf14f03f9212e30b17ebd7fd256a0f84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pTRWtrKBIYcKMrO0gQQyWg.png"/></div></div></figure><p id="18a5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">基于TitanicCleanData.csv文件，我们还建立了逻辑回归和K近邻模型来预测泰坦尼克号上的幸存乘客。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es km"><img src="../Images/e906ca2547cca77db2caf93c353f39b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ucy_KEOes6T07-MJTb6muQ.png"/></div></div></figure><p id="ede6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">关于项目实施，<strong class="ix hj"> </strong>敬请访问…<strong class="ix hj"/><a class="ae iu" href="https://github.com/RutvijBhutaiya/The-Famous-Titanic-Study" rel="noopener ugc nofollow" target="_blank"><strong class="ix hj">Github</strong></a></p><div class="kn ko ez fb kp kq"><a href="https://github.com/RutvijBhutaiya/The-Famous-Titanic-Study" rel="noopener  ugc nofollow" target="_blank"><div class="kr ab dw"><div class="ks ab kt cl cj ku"><h2 class="bd hj fi z dy kv ea eb kw ed ef hh bi translated">rutvijbhutaya/著名的泰坦尼克号研究</h2><div class="kx l"><h3 class="bd b fi z dy kv ea eb kw ed ef dx translated">在发展中..展开步骤步骤2:下载泰坦尼克号数据集步骤3:设定研究目标步骤4…</h3></div><div class="ky l"><p class="bd b fp z dy kv ea eb kw ed ef dx translated">github.com</p></div></div><div class="kz l"><div class="la l lb lc ld kz le io kq"/></div></div></a></div></div></div>    
</body>
</html>