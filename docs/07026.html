<html>
<head>
<title>How to read and visualize netCDF(.nc) geospatial files using python?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何阅读和可视化netCDF(。nc)地理空间文件使用python？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-read-and-visualize-netcdf-nc-geospatial-files-using-python-6c2ac8907c7c?source=collection_archive---------3-----------------------#2020-06-11">https://medium.com/analytics-vidhya/how-to-read-and-visualize-netcdf-nc-geospatial-files-using-python-6c2ac8907c7c?source=collection_archive---------3-----------------------#2020-06-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><blockquote class="if ig ih"><p id="1bb9" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">如果你能把数据可视化，你就能分析数据。</p></blockquote><p id="d064" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated"><strong class="il hj">什么是netCDF文件？</strong> <br/> netCDF(网络通用数据格式)是一种用于存储温度、湿度、气压、风速、风向等多维科学数据(以变量的形式)的文件格式。这些变量中的每一个都可以通过一个维度(比如时间)来显示。它通常用于气候学、气象学、海洋学，其中数据与天气预报、气候变化有关，甚至用于一些GIS应用程序。</p><p id="d72d" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated"><strong class="il hj">访问和可视化netCDF文件需要哪些库？</strong></p><figure class="jk jl jm jn fd jo"><div class="bz dy l di"><div class="jp jq l"/></div></figure><p id="2ca8" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">要安装“底图”，请遵循以下具体步骤:</p><ol class=""><li id="f03b" class="jr js hi il b im in iq ir jh jt ji ju jj jv jg jw jx jy jz bi translated">首先，你的电脑上必须有<strong class="il hj"> anaconda </strong>安装<strong class="il hj"> </strong>。</li><li id="e7d0" class="jr js hi il b im ka iq kb jh kc ji kd jj ke jg jw jx jy jz bi translated">现在进入这个伟大的链接:<a class="ae kf" href="http://www.lfd.uci.edu/~gohlke/pythonlibs/" rel="noopener ugc nofollow" target="_blank"><strong class="il hj">http://www.lfd.uci.edu/~gohlke/pythonlibs/</strong></a><strong class="il hj"/><br/>搜索“底图”并下载名为“<strong class="il hj">底图-1 . 2 . 1-cp37-cp37m-win _ amd64 . whl</strong>”的文件。<br/>我下载了这个文件，因为我的python版本是<strong class="il hj"> 3.7.4 </strong>，我的操作系统是<strong class="il hj"> 64 </strong>位。请根据您的系统配置选择文件。</li><li id="1519" class="jr js hi il b im ka iq kb jh kc ji kd jj ke jg jw jx jy jz bi translated">移动下载的'<strong class="il hj">。“文件到目录”C:\Python27 </strong>。(同样，这是我下载python的路径，请选择python安装所在的路径。)</li><li id="ac13" class="jr js hi il b im ka iq kb jh kc ji kd jj ke jg jw jx jy jz bi translated">在“以管理员身份运行”模式下打开anaconda提示符，并转到。文件被移动了。</li><li id="9f7c" class="jr js hi il b im ka iq kb jh kc ji kd jj ke jg jw jx jy jz bi translated">使用此命令:</li></ol><pre class="jk jl jm jn fd kg kh ki kj aw kk bi"><span id="e73f" class="kl km hi kh b fi kn ko l kp kq">pip install basemap‑1.2.1‑cp37‑cp37m‑win_amd64.whl</span></pre><p id="0f2f" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">之后，您就可以导入所有需要的库了。</p><p id="e861" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated"><strong class="il hj">如何用python读取netCDF文件？</strong></p><p id="68e5" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">请点击<a class="ae kf" href="https://psl.noaa.gov/cgi-bin/db_search/DBListFiles.pl?did=195&amp;tid=86447&amp;vid=668" rel="noopener ugc nofollow" target="_blank">此处</a>下载本文数据。一旦数据下载完毕，我们就开始吧。</p><figure class="jk jl jm jn fd jo"><div class="bz dy l di"><div class="jp jq l"/></div></figure><p id="a89d" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">输出:</p><pre class="jk jl jm jn fd kg kh ki kj aw kk bi"><span id="4941" class="kl km hi kh b fi kn ko l kp kq">&lt;class 'netCDF4._netCDF4.Dataset'&gt;<br/>dict_keys(['lon', 'lat', 'time', 'tave', 'rstn'])</span></pre><p id="f0dc" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">我们可以看到数据集的类型是netCDF，数据中总共有5个变量(' lat '，' lon '，' time '，' air '，' time_bnds ')。</p><p id="ebe6" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">现在，我们已经从“数据”中包含的任何变量中读取了数据，对于本文，我们将读取坐标变量和“空气”变量。下面的代码将变量放入NumPy数组。</p><figure class="jk jl jm jn fd jo"><div class="bz dy l di"><div class="jp jq l"/></div></figure><p id="38a6" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated"><strong class="il hj">如何使用底图绘制数据？</strong></p><p id="bbd3" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">“底图”允许您使用较低和较高级别的经度和纬度位置创建参考地图。在下面的代码中，纬度和经度点取自谷歌地图，引用了印度的边界。您也可以查看下图，了解如何从谷歌地图中获取点，突出显示的值的格式为(lat，long)。这里，基本上将生成一个底图实例，它指定了我们所需的地图和投影设置。</p><figure class="jk jl jm jn fd jo"><div class="bz dy l di"><div class="jp jq l"/></div></figure><p id="8082" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">您也可以查看下图，了解如何从谷歌地图中获取点，突出显示的值的格式为(lat，long)。</p><figure class="jk jl jm jn fd jo er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es kr"><img src="../Images/b1ab3d7a63e74793377b6f749caced42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RZc-MkAopBzuTiCH_-At_w.png"/></div></div><figcaption class="ky kz et er es la lb bd b be z dx translated">显示坐标的谷歌地图快照</figcaption></figure><p id="c5d6" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">生成底图实例后，我们将继续下一步，使用matplotlib绘制数据。</p><figure class="jk jl jm jn fd jo"><div class="bz dy l di"><div class="jp jq l"/></div></figure><p id="5889" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">数据包含全年每天的点，我们现在只能看到一天的可视化，让我们尝试模拟该过程，以便全年的数据都能够可视化。在运行下面的代码之前，一定要提到应该创建的图像的数量(天数),我已经提到了整整一年(365)</p><figure class="jk jl jm jn fd jo"><div class="bz dy l di"><div class="jp jq l"/></div></figure><p id="6088" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">一旦创建了图像，循环这些图像以创建一个。gif '以便更好地可视化。在这里，利用“PIL”图书馆读取图像，并使用它们制作一个gif。</p><figure class="jk jl jm jn fd jo"><div class="bz dy l di"><div class="jp jq l"/></div></figure><p id="e28e" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated">如果所有步骤都以正确的方式执行，生成的“tave_timelapse.gif”将类似于下面这样。看一看。由于在介质上共享超过25MB图像大小的内存限制，我只做了前50天的模拟。</p><figure class="jk jl jm jn fd jo er es paragraph-image"><div class="er es lc"><img src="../Images/06c23d2a922a7cb39756459c72c32785.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/1*xyy2GcngJkuT--SEnmplqg.gif"/></div></figure><p id="b6a4" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it jh iv iw ix ji iz ja jb jj jd je jf jg hb bi translated"><strong class="il hj">观测:<br/> </strong>我们可以在地图上看到上半球的温度是如何变化的。这种类型的可视化有助于发现特定因素的变化，例如一段时间内的风、雨。</p><pre class="jk jl jm jn fd kg kh ki kj aw kk bi"><span id="2a7c" class="kl km hi kh b fi kn ko l kp kq"><strong class="kh hj">References: <br/></strong><a class="ae kf" href="https://www.youtube.com/watch?v=r5m_aU5V6oY" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=r5m_aU5V6oY</a><a class="ae kf" href="http://schubert.atmos.colostate.edu/~cslocum/netcdf_example.html" rel="noopener ugc nofollow" target="_blank"><br/>http://schubert.atmos.colostate.edu/~cslocum/netcdf_example.html</a></span></pre></div></div>    
</body>
</html>