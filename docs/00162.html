<html>
<head>
<title>Earning Manipulation Detection: Hey, why not try my M-Score Generator?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">盈利操纵检测:嘿，为什么不试试我的M分数生成器？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/earning-manipulation-detection-hey-why-not-try-my-m-score-generator-f8a7895743e0?source=collection_archive---------0-----------------------#2018-10-27">https://medium.com/analytics-vidhya/earning-manipulation-detection-hey-why-not-try-my-m-score-generator-f8a7895743e0?source=collection_archive---------0-----------------------#2018-10-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="ac7d" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">介绍</h1><p id="7918" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在夏季学期的财务会计课上，我学习了一种叫做Beneish M-Score的盈余操纵工具。M-Score是由Messod Beneish教授创建的，这是一个数学模型，利用八个财务比率来检查一家公司是否操纵了其收入。这个指标基本上是由公司的财务报表构建的。(引自本<a class="ae kb" href="https://www.businessinsider.com/the-beneish-m-score-identifying-earnings-manipulation-and-short-candidates-2011-5" rel="noopener ugc nofollow" target="_blank">链接</a>)</p><p id="a34e" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">Beneish教授使用Compustat数据库来验证M-Score。在财务与会计课程中，讲师创建了一个excel文件，其中包含M-Score的完整公式，并要求我们检测单个公司可能存在的盈余操纵行为。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kh"><img src="../Images/f0800c0b356a8008190726f80bd8dce9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*64589HoJRe0wCQpL.jpg"/></div></div></figure><p id="aca5" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">这一次，我想跳回Compustat数据库，并试图不局限于一个单一的公司，并进一步创建我自己的M分数生成器。我很好奇是否有几家公司操纵了他们的收益。</p><p id="bc4a" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">该生成器可重复使用，易于使用，易于查询，并可以绘制跨年度的M分数趋势。</p><p id="ccb0" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">我在这里举一个例子来揭示我所做的事情。是苹果M-Score跨越多年的结果。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kt"><img src="../Images/cfac809fc1a6791f6afb123a38cc7467.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UFTHVpsZMj9aG9XDz_4PCw.png"/></div></div></figure><h1 id="1a01" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">目标读者</h1><p id="ee36" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">对其投资组合中的公司的潜在收益操纵以及如何使用Python实现这种操纵感兴趣的人。</p><h1 id="27e8" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">技能和工具</h1><p id="b0aa" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><em class="ku">工具:Python，Jupyter Notebook / Spyder </em></p><p id="cafe" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated"><em class="ku">技能:数据清理和熊猫管理，函数创建，使用matplotlib可视化</em></p><h1 id="6416" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">如何使用这篇文章</h1><ol class=""><li id="5446" class="kv kw hi jf b jg jh jk jl jo kx js ky jw kz ka la lb lc ld bi translated">通读这篇文章，更多地了解我如何建立我的简单的M分数生成器，并检查一些选定公司的一些M分数的例子。</li><li id="530c" class="kv kw hi jf b jg le jk lf jo lg js lh jw li ka la lb lc ld bi translated">从<a class="ae kb" href="https://github.com/yunhanfeng/M-Score-Generator" rel="noopener ugc nofollow" target="_blank"> my Github </a>中调出我的代码，查询你感兴趣的公司的M-Score。</li></ol><h1 id="b8f6" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">方法学</h1><ol class=""><li id="9355" class="kv kw hi jf b jg jh jk jl jo kx js ky jw kz ka la lb lc ld bi translated">由于Compustate数据库相当庞大，我决定用所需的列和行对数据进行子集化和清理，并进一步将其输出为aa<em class="ku">m _ score _ dataset _ final . CSV</em>(也包含在我的Github中)。</li><li id="78c6" class="kv kw hi jf b jg le jk lf jo lg js lh jw li ka la lb lc ld bi translated">载入<em class="ku">m _ score _ datset _ final . CSV</em>，开始创建需要的列。</li><li id="97ac" class="kv kw hi jf b jg le jk lf jo lg js lh jw li ka la lb lc ld bi translated">根据数据框生成和图表输出创建几个辅助函数和主函数。</li></ol><h1 id="cd9c" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">步骤0:加载所需的包</h1><p id="7fe6" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">加载所需的包总是步骤0。和往常一样，熊猫，numpy，matplotlib，string都会收录，不浪费任何时间。</p><pre class="ki kj kk kl fd lj lk ll lm aw ln bi"><span id="3d43" class="lo ig hi lk b fi lp lq l lr ls">import pandas as pd <br/>import numpy as np<br/>import matplotlib.pyplot as plt<br/>import string as st</span></pre><h1 id="d127" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">步骤1:子集化并清理Compustat数据库的数据</h1><p id="cedc" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">由于Compustat数据库非常庞大，我不得不将数据分割成易于管理的大小。采取的几个主要步骤如下:</p><ol class=""><li id="027b" class="kv kw hi jf b jg kc jk kd jo lt js lu jw lv ka la lb lc ld bi translated">选择用于计算八个财务比率的指定列，包括净销售额、销货成本、净应收账款、流动资产、PPE、折旧、总资产、SGA费用、净收入、经营现金流、流动负债和长期负债。除了这些财务指标，我还选择了gvkey(数据库中的公司id)、公司名称、数据日期和年份。</li></ol><p id="1bbd" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">2.选择年份范围，我为生成器选择了1988年到2017年的范围。</p><p id="db61" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">3.从几根柱子上掉了NA。</p><pre class="ki kj kk kl fd lj lk ll lm aw ln bi"><span id="09c6" class="lo ig hi lk b fi lp lq l lr ls">compustat = pd.read_csv("compustat_1950_2018_annual_merged.csv")<br/>compustat_1 = compustat[["gvkey", "conm" ,"datadate","fyear","sale","cogs","rect","act",     "ppegt","dp","at","xsga","ni","oancf","lct","dltt"]]</span><span id="eea5" class="lo ig hi lk b fi lw lq l lr ls"># Year range setting<br/>compustat_2 = compustat_1.loc[compustat_1["fyear"] &gt;1987]<br/>compustat_2 = compustat_2.loc[compustat_2['fyear'] &lt; 2018]</span><span id="fdad" class="lo ig hi lk b fi lw lq l lr ls"># Some cleaning and NA dropping<br/>com_3 = compustat_2[compustat_2['rect'] &gt;= 0]<br/>com_4 = com_3.dropna(subset = ["sale","cogs","act","ppegt","dp","at","xsga","ni","oancf","lct","dltt","rect"])<br/>com_5 = com_4.fillna(0)</span><span id="8147" class="lo ig hi lk b fi lw lq l lr ls"># output the dataframe and create another csv<br/>com_5.to_csv('m_score_dataset_final.csv', float_format = '%.6f', index = 0)</span></pre><h1 id="39c8" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">第二步:进一步管理并为M分数计算创建更多变量</h1><p id="0f39" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">大多数M-score 8比率需要前一年的变量；因此，我使用pandas <em class="ku"> groupby() </em>和<em class="ku"> shift() </em>函数来创建前一年的特征。</p><pre class="ki kj kk kl fd lj lk ll lm aw ln bi"><span id="1559" class="lo ig hi lk b fi lp lq l lr ls">df['pre_sale'] = df.sort_values(['fyear']).groupby('gvkey')['sale'].shift()<br/>df['pre_cogs'] = df.sort_values(['fyear']).groupby('gvkey')['cogs'].shift()<br/>df['pre_rect'] = df.sort_values(['fyear']).groupby('gvkey')['rect'].shift()<br/>df['pre_act'] = df.sort_values(['fyear']).groupby('gvkey')['act'].shift()<br/>df['pre_ppegt'] = df.sort_values(['fyear']).groupby('gvkey')['ppegt'].shift()<br/>df['pre_dp'] = df.sort_values(['fyear']).groupby('gvkey')['dp'].shift()<br/>df['pre_at'] = df.sort_values(['fyear']).groupby('gvkey')['at'].shift()<br/>df['pre_xsga'] = df.sort_values(['fyear']).groupby('gvkey')['xsga'].shift()<br/>df['pre_ni'] = df.sort_values(['fyear']).groupby('gvkey')['ni'].shift()<br/>df['pre_oancf'] = df.sort_values(['fyear']).groupby('gvkey')['oancf'].shift()<br/>df['pre_lct'] = df.sort_values(['fyear']).groupby('gvkey')['lct'].shift()<br/>df['pre_dltt'] = df.sort_values(['fyear']).groupby('gvkey')['dltt'].shift()</span></pre><p id="a9ae" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">准备好所有变量后，现在可以创建八个比率。</p><pre class="ki kj kk kl fd lj lk ll lm aw ln bi"><span id="d495" class="lo ig hi lk b fi lp lq l lr ls"># For later calculation<br/>df['asset_qual'] = (df['at'] - df['act'] - df['ppegt']) / df['at']<br/>df['pre_asset_qual'] = (df['pre_at'] - df['pre_act'] - df['pre_ppegt']) / df['pre_at']</span><span id="84b1" class="lo ig hi lk b fi lw lq l lr ls"># Eight ratios<br/>df['DSRI'] = (df['rect']/df['sale']) / (df['pre_rect'] / df['pre_sale'])<br/>df['GMI'] =  ((df['pre_sale']-df['pre_cogs'])/df['pre_sale']) / ((df['sale']-df['cogs'])/df['sale'])<br/>df['AQI'] = df['asset_qual'] / df['pre_asset_qual']<br/>df['SGI'] = df['sale'] / df['pre_sale']<br/>df['DEPI'] = (df['pre_dp'] / (df['pre_dp'] + df['pre_ppegt'])) / (df['dp'] / (df['dp'] + df['ppegt']))<br/>df['SGAI'] = (df['xsga'] / df['sale']) / (df['pre_xsga'] / df['sale'])<br/>df['TA'] = (df['ni'] - df['oancf']) / df['at']<br/>df['LVGI'] = ((df['lct'] + df['dltt']) / df['at']) / ((df['pre_lct'] + df['pre_dltt']) / df['pre_at'])</span></pre><p id="cde8" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">最后，有了这些比率，我们就可以计算M值了。</p><pre class="ki kj kk kl fd lj lk ll lm aw ln bi"><span id="cfe7" class="lo ig hi lk b fi lp lq l lr ls">df['M-Score'] = -4.84 + .920 * df['DSRI'] + .528 * df['GMI'] + .404 * df['AQI'] + .892 * df['SGI'] + .115 * df['DEPI'] - .172 * df['SGAI'] + 4.679 * df['TA'] - .327 * df['LVGI']</span></pre><p id="3050" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">这一步的最后一步是将上面的所有代码捆绑到一个名为m_score_df()的辅助函数中。当调用这个函数时，可以创建一个完整的M-Score数据帧。</p><h1 id="de70" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">步骤3:编写函数为特定公司创建年度M-Score数据框架</h1><p id="ba2e" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">这个函数可以用作帮助函数。函数<strong class="jf hj">m _ score _ company(company _ name)</strong>将返回特定公司的数据帧。用户只需键入公司名称。它将返回该公司的年度M分数表。</p><pre class="ki kj kk kl fd lj lk ll lm aw ln bi"><span id="36b9" class="lo ig hi lk b fi lp lq l lr ls">def m_score_company(company_name):<br/>    company_name = company_name.upper()<br/>    df = m_score_df()<br/>    df1 = df[['gvkey','conm','fyear','M-Score']]<br/>    df2 = df1[df1['conm'].str.contains(company_name)]<br/>    df3 = df2.dropna()<br/>    df3 = df3.reset_index()<br/>    <br/>    return df3</span></pre><p id="695c" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">示例:</p><pre class="ki kj kk kl fd lj lk ll lm aw ln bi"><span id="7ee7" class="lo ig hi lk b fi lp lq l lr ls">m_score_company('twitter')</span><span id="15a5" class="lo ig hi lk b fi lw lq l lr ls"># result<br/>   index  gvkey         conm   fyear   M-Score<br/>0  74553  18872  TWITTER INC  2012.0 -1.955942<br/>1  74554  18872  TWITTER INC  2013.0 -1.424558<br/>2  74555  18872  TWITTER INC  2014.0 -3.162791<br/>3  74556  18872  TWITTER INC  2015.0 -2.474192<br/>4  74557  18872  TWITTER INC  2016.0 -3.394550<br/>5  74558  18872  TWITTER INC  2017.0 -3.293757</span></pre><h1 id="9ac1" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated"><strong class="ak">第四步:用红色标志线创建一个可视化函数</strong></h1><p id="7e91" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">利用上面的函数，我又创建了一个绘图函数，<strong class="jf hj">m _ score _ trend _ graph(company _ name)</strong>。<strong class="jf hj"> </strong> M-Score有两个阈值:</p><ul class=""><li id="28ca" class="kv kw hi jf b jg kc jk kd jo lt js lu jw lv ka lx lb lc ld bi translated">如果M-Score大于-1.78，则表示红旗，表示操纵严重。</li><li id="f96c" class="kv kw hi jf b jg le jk lf jo lg js lh jw li ka lx lb lc ld bi translated">如果M-Score在-2.22到-1.78之间，表示黄旗，表示轻微操纵。</li></ul><p id="2e3c" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">因此，这个函数生成的图形具有两个特性:一个是显示年度数据，另一个是红色和黄色旗帜有清晰的线条。</p><pre class="ki kj kk kl fd lj lk ll lm aw ln bi"><span id="38f4" class="lo ig hi lk b fi lp lq l lr ls">def m_score_trend_graph(company_name):<br/>    df = m_score_company(company_name)<br/>    company_name = df['conm'][0]<br/>    df1 = df[['fyear','M-Score']]<br/>    df1['fyear'] = df1['fyear'].round(1)<br/>    df1 = df1.set_index('fyear')  <br/>    company_name1 = st.capwords(company_name)<br/>    <br/>    fig, ax = plt.subplots(figsize = (13,8))<br/>    ax.plot(df1, 'b^--')<br/>    ax.axhline(y = -1.78, color = 'r', linestyle = '-')<br/>    ax.axhline(y = -2.22, color = 'g', linestyle = '-')<br/>    ax.set_title(company_name1 + ' : M Score across Year', fontsize = 15) <br/>    plt.show()</span></pre><h1 id="b79f" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">让我们来玩吧！</h1><pre class="ki kj kk kl fd lj lk ll lm aw ln bi"><span id="deb3" class="lo ig hi lk b fi lp lq l lr ls">m_score_trend_graph('facebook')</span></pre><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kt"><img src="../Images/dfba868a7cd160e2afa1c257464791a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_gUy6EQGd37EYr4kKHTZSA.png"/></div></div></figure><pre class="ki kj kk kl fd lj lk ll lm aw ln bi"><span id="2dce" class="lo ig hi lk b fi lp lq l lr ls">m_score_trend_graph('amazon')</span></pre><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ly"><img src="../Images/67860c7e96880d8a6b95fc949286beb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gx-KMSWaPwUyRKlqGUMLaw.png"/></div></div></figure><pre class="ki kj kk kl fd lj lk ll lm aw ln bi"><span id="da7c" class="lo ig hi lk b fi lp lq l lr ls">m_score_trend_graph('alphabet')</span></pre><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ly"><img src="../Images/9f03e0b5974e75169f68dcef1deeec24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z7_hRZ8xy51bmqcz39AjNA.png"/></div></div></figure><pre class="ki kj kk kl fd lj lk ll lm aw ln bi"><span id="475d" class="lo ig hi lk b fi lp lq l lr ls">m_score_trend_graph('microsoft')</span></pre><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kt"><img src="../Images/5d727e91eebf021c129b4aeb0be32608.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H3d2aQsDYB8ScifW51DA_Q.png"/></div></div></figure><h1 id="0972" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated"><strong class="ak">观察结果</strong></h1><p id="a65e" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">对于这四家公司来说，大部分时间它们都在M值的安全范围内，这表明大部分时间它们并不像是盈余操纵者。因为红旗区的某些点值得进一步调查。</p><p id="153b" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">让我们为明尼阿波利斯的一些财富500强公司尝试一下我们的M-Generator。</p><pre class="ki kj kk kl fd lj lk ll lm aw ln bi"><span id="cd6f" class="lo ig hi lk b fi lp lq l lr ls">m_score_trend_graph('3M co')</span></pre><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ly"><img src="../Images/21065654b9c5e96bd9fa7d8fa44b4e28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fJiK6xmeePy8ppCP4iDfdw.png"/></div></div></figure><pre class="ki kj kk kl fd lj lk ll lm aw ln bi"><span id="5530" class="lo ig hi lk b fi lp lq l lr ls">m_score_trend_graph('medtronic')</span></pre><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ly"><img src="../Images/346bd7e125e25fe92cb15fec3408cd6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wwDtXLDLEND7y_ceyoEnDA.png"/></div></div></figure><pre class="ki kj kk kl fd lj lk ll lm aw ln bi"><span id="6a01" class="lo ig hi lk b fi lp lq l lr ls">m_score_trend_graph('honeywell international')</span></pre><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ly"><img src="../Images/c8fe1bb04b7a96128da906b0805e7c2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Ys7QzAmHY7XIZcHfZcXsw.png"/></div></div></figure><h1 id="969c" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated"><strong class="ak">观察结果</strong></h1><p id="0d2b" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">根据M值，3M是迄今为止最不可能操纵收益的公司。</p><p id="f684" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">美敦力和霍尼韦尔在2000年左右已经显示出危险信号。这些不寻常的图案非常有趣。</p><h1 id="5447" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated"><strong class="ak">M分数生成器的限制</strong></h1><p id="cac3" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">M分数生成器有两个主要限制，可以进一步改进。</p><ol class=""><li id="cd7f" class="kv kw hi jf b jg kc jk kd jo lt js lu jw lv ka la lb lc ld bi translated">如果一些财务指标没有被公司报告，也没有在Compustat数据库中报告。无法生成M分数图。以网飞为例。</li></ol><pre class="ki kj kk kl fd lj lk ll lm aw ln bi"><span id="f2ab" class="lo ig hi lk b fi lp lq l lr ls">m_score_company('netflix')</span><span id="36a2" class="lo ig hi lk b fi lw lq l lr ls"># results<br/>Empty DataFrame<br/>Columns: [index, gvkey, conm, fyear, M-Score]<br/>Index: []</span></pre><p id="cdcd" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">这是因为网飞在<em class="ku">应收账款</em>栏里全是零，这削弱了我们的功能。我想下一步，我可能会为丢失的列寻找新的来源。</p><p id="fdd0" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">2.查找功能不是很准确。如果用户为一家公司插入一些通用关键字，它将返回包含所有匹配公司的列，并搞乱图形。</p><pre class="ki kj kk kl fd lj lk ll lm aw ln bi"><span id="2142" class="lo ig hi lk b fi lp lq l lr ls">m_score_trend_graph('honeywell')</span></pre><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ly"><img src="../Images/463d8cf841d11a54251f75fa786d19ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mo526dHnGBF1zdGCkXGmvw.png"/></div></div></figure><p id="37d6" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">如果我只在函数中输入‘霍尼韦尔’，行就会被弄乱。这是因为它将返回“霍尼韦尔国际公司”和“霍尼韦尔公司”结果</p><p id="41f8" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">因此，用户只需要键入特定的关键字。在这里，借助正则表达式的一些巧妙用法，可以做得更好。</p><h1 id="34f8" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">结论</h1><p id="1f58" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在这篇文章中，我试图探索盈余操纵的世界。我用python创建了几个有趣的函数，让读者/投资者了解他们投资组合中的公司。</p><p id="5b6c" class="pw-post-body-paragraph jd je hi jf b jg kc ji jj jk kd jm jn jo ke jq jr js kf ju jv jw kg jy jz ka hb bi translated">这个过程既有趣又富有挑战性。我的代码仍然有一些不足之处，我一定会继续努力使它们变得更好。</p><pre class="ki kj kk kl fd lj lk ll lm aw ln bi"><span id="4ad6" class="lo ig hi lk b fi lp lq l lr ls">If you like the article, feel free to give me 5+ claps<br/>If you want to read more articles like this, give me 10+ claps<br/>If you want to read articles with different topics, give me 15+ claps and leave the comment here</span><span id="f986" class="lo ig hi lk b fi lw lq l lr ls">Thank for the reading</span></pre></div></div>    
</body>
</html>