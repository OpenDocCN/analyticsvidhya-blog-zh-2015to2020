<html>
<head>
<title>Exploratory Data Analysis of New York Taxi Trip Duration Dataset using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于Python的纽约出租车出行时长数据集探索性数据分析</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/exploratory-data-analysis-of-nyc-taxi-trip-duration-dataset-using-python-257fdef2749e?source=collection_archive---------0-----------------------#2019-08-01">https://medium.com/analytics-vidhya/exploratory-data-analysis-of-nyc-taxi-trip-duration-dataset-using-python-257fdef2749e?source=collection_archive---------0-----------------------#2019-08-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f996" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd"> Anuradha参加了</em> <a class="ae je" href="https://courses.analyticsvidhya.com/courses/applied-machine-learning-beginner-to-professional" rel="noopener ugc nofollow" target="_blank"> <em class="jd">应用机器学习</em> </a> <em class="jd">课程，并在受欢迎的纽约市出租车旅行持续时间数据集上展示了她的项目。</em></p></div><div class="ab cl jf jg gp jh" role="separator"><span class="ji bw bk jj jk jl"/><span class="ji bw bk jj jk jl"/><span class="ji bw bk jj jk"/></div><div class="hb hc hd he hf"><p id="4af9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据分析是模型构建过程中最关键的步骤之一。在本文中，我将对纽约市出租车出行持续时间数据集进行数据分析。这个数据集和问题陈述摘自Analytics Vidhya 的<a class="ae je" href="https://courses.analyticsvidhya.com/courses/applied-machine-learning-beginner-to-professional" rel="noopener ugc nofollow" target="_blank">应用机器学习课程，该课程提供了许多这样的现实生活项目。</a></p><p id="8cee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们讨论项目的问题陈述。</p><p id="784f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">问题背景</strong>:</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es jm"><img src="../Images/280f177bfc40956d747ac55e067d1ed2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0VrGI7no8VdwehuLCp4xew.jpeg"/></div></div></figure><p id="1f3b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一家典型的出租车公司面临着一个共同的问题，即如何有效地将出租车分配给乘客，以使服务顺畅且没有麻烦。其中一个主要问题是确定当前行程的持续时间，以便它可以预测下一次行程出租车何时空闲。</p><p id="210d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据集包含关于纽约市的几次出租车旅行及其持续时间的数据。我现在将尝试并应用不同的数据分析技术来获得关于数据的见解，并确定不同变量如何依赖于目标变量<strong class="ih hj">行程持续时间。</strong></p><p id="cc48" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们开始吧！</p><h2 id="e3d8" class="jy jz hi bd ka kb kc kd ke kf kg kh ki iq kj kk kl iu km kn ko iy kp kq kr ks bi translated">导入所需的库</h2><p id="0f50" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">首先，我们将导入分析和可视化所需的所有必要的库。</p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="1ee1" class="jy jz hi kz b fi ld le l lf lg">import numpy as np<br/>import pandas as pd<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns<br/>import datetime<br/>sns.set()</span></pre><p id="4a9a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们有了所有必要的库，让我们加载数据集。我们将把它载入熊猫数据帧<strong class="ih hj"> df。</strong></p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="43df" class="jy jz hi kz b fi ld le l lf lg">df=pd.read_csv('nyc_taxi_trip_duration.csv')</span></pre><p id="5b4a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将数据集读入数据帧<strong class="ih hj"> df </strong>中，并将查看<strong class="ih hj">形状</strong>、<strong class="ih hj">列</strong>、<strong class="ih hj">列数据类型</strong>和<strong class="ih hj">数据的前5行</strong>。这将给出手头数据的简要概述。</p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="14bf" class="jy jz hi kz b fi ld le l lf lg">df.shape</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es lh"><img src="../Images/9b9c5db45a478f206d2c84f2cca54351.png" data-original-src="https://miro.medium.com/v2/resize:fit:308/format:webp/1*-nBnMa9nLoRXoh2AcOEWhA.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">这将返回行数和列数</figcaption></figure><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="a676" class="jy jz hi kz b fi ld le l lf lg">df.columns</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es lm"><img src="../Images/d2c7ab9365e567d56cce2e49142d722a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5aSce44LF2aiMZQw1yciZw.png"/></div></div><figcaption class="li lj et er es lk ll bd b be z dx translated">这将返回列名</figcaption></figure><p id="3434" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是我们对这些柱子的了解:</p><h2 id="ce7e" class="jy jz hi bd ka kb kc kd ke kf kg kh ki iq kj kk kl iu km kn ko iy kp kq kr ks bi translated"><strong class="ak">客户&amp;供应商</strong>的人口统计信息</h2><p id="fe22" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated"><strong class="ih hj"> id </strong>:每次行程的唯一标识符</p><p id="5d53" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> vendor_id </strong>:表示与行程记录关联的供应商的代码</p><p id="673a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">乘客计数</strong>:车内乘客数量(驾驶员输入值)</p><h2 id="1833" class="jy jz hi bd ka kb kc kd ke kf kg kh ki iq kj kk kl iu km kn ko iy kp kq kr ks bi translated"><strong class="ak">关于行程的信息</strong></h2><p id="b2f5" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated"><strong class="ih hj">拾取_经度</strong>:启用血糖仪的日期和时间</p><p id="18af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> pickup_latitude </strong>:仪表脱离的日期和时间</p><p id="688e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> dropoff_longitude </strong>:仪表脱离的经度</p><p id="0818" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> dropoff_latitude </strong>:仪表脱离的纬度</p><p id="4056" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> store_and_fwd_flag </strong>:该标志表示在发送给供应商之前，行程记录是否保存在车辆存储器中，因为车辆没有连接到服务器(Y = store and forwardn =不是存储和转发行程)</p><p id="aab3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> trip_duration </strong>:(目标)以秒为单位的行程持续时间</p><p id="6251" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们有一个729322行11列的数据集。有10个特征和1个目标变量，即<strong class="ih hj">行程持续时间</strong></p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="cd65" class="jy jz hi kz b fi ld le l lf lg">df.dtypes</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es ln"><img src="../Images/1cae60f74f9f64924a6a580f040c3002.png" data-original-src="https://miro.medium.com/v2/resize:fit:852/format:webp/1*aYgZgDNuvy0k2o92E3pp1Q.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">这将返回列的数据类型</figcaption></figure><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="4b37" class="jy jz hi kz b fi ld le l lf lg">df.head()</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es lo"><img src="../Images/5b9bf6a2d1cf12a35cff65719ae0cb23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2VEZ6xWNR1w6gCrdVYlEag.png"/></div></div><figcaption class="li lj et er es lk ll bd b be z dx translated">这将返回数据集的前5行</figcaption></figure><p id="0552" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，通过查看df.head()返回的前5行，我们可以对数据集有所了解。或者，我们可以通过将行数作为参数发送给head()函数来指定要返回的行数。</p><p id="d5b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">关于数据的一些观察:</strong></p><ul class=""><li id="67a8" class="lp lq hi ih b ii ij im in iq lr iu ls iy lt jc lu lv lw lx bi translated">列<strong class="ih hj"> id </strong>和<strong class="ih hj"> vendor_id </strong>是名义上的。</li><li id="8f7d" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">列<strong class="ih hj"> pickup_datetime </strong>和<strong class="ih hj"> dropoff_datetime </strong>存储为对象，必须将其转换为datetime以便更好地分析。</li><li id="d385" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">列<strong class="ih hj">存储转发标志</strong>是分类的</li></ul><p id="c38a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们看看数字列，</p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="f188" class="jy jz hi kz b fi ld le l lf lg">df.describe()</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es md"><img src="../Images/15a1599def49d56fc33ebc697a4c74b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4WmfQJW56uBDlC6EgqqyiA.png"/></div></div><figcaption class="li lj et er es lk ll bd b be z dx translated">这将返回数字列的统计摘要</figcaption></figure><p id="7886" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">返回的表格给出了某些见解:</strong></p><ul class=""><li id="ca6b" class="lp lq hi ih b ii ij im in iq lr iu ls iy lt jc lu lv lw lx bi translated">没有缺少数据的数字列</li><li id="052e" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">乘客数量在1到9之间变化，大多数人的数量为1或2</li><li id="a8e6" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">行程持续时间从1秒到1939秒~538小时不等。肯定存在一些必须处理的异常值。</li></ul><p id="a5a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们快速看一下非数字列，</p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="0ffc" class="jy jz hi kz b fi ld le l lf lg">non_num_cols=['id','pickup_datetime','dropoff_datetime','store_and_fwd_flag']<br/>print(df[non_num_cols].count())</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es me"><img src="../Images/5f5c1a32bbbdc5ae814ae53ca01efd55.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*W_LwNLIxmCvJRwGTpi7bWQ.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">返回指定列的计数</figcaption></figure><p id="0414" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">非数字列也没有缺失值。</p><p id="2ed1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">两列<strong class="ih hj"> pickup_datetime </strong>和<strong class="ih hj"> dropoff_datetime </strong>现在被转换为datetime格式，这使得日期和时间数据的分析更加容易。</p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="17c5" class="jy jz hi kz b fi ld le l lf lg">df['pickup_datetime']=pd.to_datetime(df['pickup_datetime'])<br/>df['dropoff_datetime']=pd.to_datetime(df['dropoff_datetime'])</span></pre><h1 id="f160" class="mf jz hi bd ka mg mh mi ke mj mk ml ki mm mn mo kl mp mq mr ko ms mt mu kr mv bi translated">单变量分析</h1><p id="fe1d" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">让我们看看数据集中各种变量的分布。</p><p id="035d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">乘客数量</strong></p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="6e47" class="jy jz hi kz b fi ld le l lf lg">sns.distplot(df['passenger_count'],kde=False)<br/>plt.title('Distribution of Passenger Count')<br/>plt.show()</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es mw"><img src="../Images/9a37863ea8598ebd0e7f878787fbe63b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*Pph2sN3OOMCV5UqkYWD2CQ.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">每次行程中乘客数量的直方图</figcaption></figure><p id="1590" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，我们看到大多数1或2名乘客利用出租车。大群人一起旅行的情况很少见。</p><p id="c29e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">每周接送日的分布</strong></p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="6b73" class="jy jz hi kz b fi ld le l lf lg">df['pickup_datetime'].nunique()<br/>df['dropoff_datetime'].nunique()</span></pre><p id="3485" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">返回值是709359和709308。这表明在这两列中有许多不同的接送日期。</p><p id="a402" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，最好将这些日期转换成一周中的几天，这样就可以找到一种模式。</p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="8b9b" class="jy jz hi kz b fi ld le l lf lg">df['pickup_day']=df['pickup_datetime'].dt.day_name()<br/>df['dropoff_day']=df['dropoff_datetime'].dt.day_name()</span></pre><p id="b03f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们看看一周中不同日子的分布</p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="6c3f" class="jy jz hi kz b fi ld le l lf lg">df['pickup_day'].value_counts()</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es mx"><img src="../Images/7107937ab196dec3cfe84dc80c781911.png" data-original-src="https://miro.medium.com/v2/resize:fit:746/format:webp/1*KA_iof4p_6t0D2Eed1iV7g.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">不同提货日的频率分布。</figcaption></figure><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="daea" class="jy jz hi kz b fi ld le l lf lg">df['dropoff_day'].value_counts()</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es my"><img src="../Images/538167a8df24bd1e62930363c91f7f49.png" data-original-src="https://miro.medium.com/v2/resize:fit:838/format:webp/1*Ru_qzXw-CxrZzKtLT7DSfw.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">不同卸货日期的频率分布。</figcaption></figure><p id="6425" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们看到大多数旅行是在周五和周一进行的，最少。旅行持续时间在一周中的分布也是一个值得研究的问题。</p><p id="3f3a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一周中各天的分布也可以用图形显示出来。</p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="4782" class="jy jz hi kz b fi ld le l lf lg">figure,ax=plt.subplots(nrows=2,ncols=1,figsize=(10,10))<br/>sns.countplot(x='pickup_day',data=df,ax=ax[0])</span><span id="be92" class="jy jz hi kz b fi mz le l lf lg">ax[0].set_title('Number of Pickups done on each day of the week')<br/>sns.countplot(x='dropoff_day',data=df,ax=ax[1])</span><span id="411c" class="jy jz hi kz b fi mz le l lf lg">ax[1].set_title('Number of dropoffs done on each day of the week')<br/>plt.tight_layout()</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es na"><img src="../Images/4279668bcb860dbf4ed0ed039615a007.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*h1qKa6qYcuGO67wfPX-71g.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">一周中每天完成的接送数量的分布</figcaption></figure><p id="8ca1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">当日接送时间分布</strong></p><p id="18f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">时间部分由时、分、秒表示，分析起来比较困难，因此我们将时间分为4个时区:<strong class="ih hj">早晨</strong> (4小时至10小时)<strong class="ih hj">中午</strong> (10小时至16小时)<strong class="ih hj">晚上</strong> (16小时至22小时)<strong class="ih hj">深夜</strong> (22小时至4小时)</p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="bac9" class="jy jz hi kz b fi ld le l lf lg">def timezone(x):<br/>    if x&gt;=datetime.time(4, 0, 1) and x &lt;=datetime.time(10, 0, 0):<br/>        return 'morning'<br/>    elif x&gt;=datetime.time(10, 0, 1) and x &lt;=datetime.time(16, 0, 0):<br/>        return 'midday'<br/>    elif x&gt;=datetime.time(16, 0, 1) and x &lt;=datetime.time(22, 0, 0):<br/>        return 'evening'<br/>    elif x&gt;=datetime.time(22, 0, 1) or x &lt;=datetime.time(4, 0, 0):<br/>        return 'late night'<br/>    <br/>df['pickup_timezone']=df['pickup_datetime'].apply(lambda x :timezone(datetime.datetime.strptime(str(x), "%Y-%m-%d %H:%M:%S").time()) )</span><span id="c575" class="jy jz hi kz b fi mz le l lf lg">df['dropoff_timezone']=df['dropoff_datetime'].apply(lambda x :timezone(datetime.datetime.strptime(str(x), "%Y-%m-%d %H:%M:%S").time()) )</span></pre><p id="d152" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们看看时区的分布</p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="3771" class="jy jz hi kz b fi ld le l lf lg">figure,ax=plt.subplots(nrows=1,ncols=2,figsize=(10,5))</span><span id="8166" class="jy jz hi kz b fi mz le l lf lg">sns.countplot(x='pickup_timezone',data=df,ax=ax[0])<br/>ax[0].set_title('The distribution of number of pickups on each part of the day')</span><span id="58ae" class="jy jz hi kz b fi mz le l lf lg">sns.countplot(x='dropoff_timezone',data=df,ax=ax[1])<br/>ax[1].set_title('The distribution of number of dropoffs on each part of the day')</span><span id="28b3" class="jy jz hi kz b fi mz le l lf lg">plt.tight_layout()</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es na"><img src="../Images/c8b75b1e7cba18043287fc539a0b8c69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*hrXC5F5MsdEzs1X7-bQajg.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">一天中每个时段完成的接送数量的分布</figcaption></figure><p id="7d41" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们观察到大多数接送发生在晚上。而最少的接送发生在早晨。</p><p id="7bcb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们用另一个列来描述一天中完成取件的时间。</p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="5130" class="jy jz hi kz b fi ld le l lf lg">figure,ax=plt.subplots(nrows=1,ncols=2,figsize=(10,5))<br/>df['pickup_hour']=df['pickup_datetime'].dt.hour<br/>df.pickup_hour.hist(bins=24,ax=ax[0])<br/>ax[0].set_title('Distribution of pickup hours')</span><span id="59af" class="jy jz hi kz b fi mz le l lf lg">df['dropoff_hour']=df['dropoff_datetime'].dt.hour<br/>df.dropoff_hour.hist(bins=24,ax=ax[1])<br/>ax[1].set_title('Distribution of dropoff hours')</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es na"><img src="../Images/b11a64a036176e4399c3a11afba43079.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*ERdLBcTllvoTIM8zba1N1Q.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">一天中每小时完成的接送数量的分布</figcaption></figure><p id="6150" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这两种分布几乎是相似的，并且也与将一天中的时间分成4个部分以及之前完成的它们的分布相一致。</p><p id="62eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">存储转发标志的分配</strong></p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="4829" class="jy jz hi kz b fi ld le l lf lg">df['store_and_fwd_flag'].value_counts()</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es nb"><img src="../Images/24b2ba184b210244e1ee5d009a71e8ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*Cl0YsNpK7IxMcUz-lTba3A.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">是/否标志的返回频率分布</figcaption></figure><p id="187d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">N旗的数量要大得多。我们稍后可以看到它们是否与旅行的持续时间有任何关系。</p><p id="58a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">行程持续时间分布</strong></p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="1e3b" class="jy jz hi kz b fi ld le l lf lg">sns.distplot(df['trip_duration'],kde=False)<br/>plt.title('The distribution of of the Pick Up  Duration distribution')</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es na"><img src="../Images/74032b872e9efb8645cdb642a4f1a515.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*iDHybSZsrvj7f9dfCbVZVw.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">以秒为单位的行程持续时间的分布</figcaption></figure><p id="f4df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该直方图显示了极端的右偏，因此存在异常值。让我们看看这个变量的箱线图。</p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="83a0" class="jy jz hi kz b fi ld le l lf lg">ns.boxplot(df['trip_duration'], orient='horizontal')<br/>plt.title('A boxplot depicting the pickup duration distribution')</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es nc"><img src="../Images/a8df4da32f0ee2a6c8180d83c2be2601.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*KFGxgeO1HZUev-Qg_o2LWg.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">行程持续时间的箱线图</figcaption></figure><p id="26fe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们看到只有接近2000000的值，而所有其他值都在0到100000之间。接近2000000的绝对是一个必须处理的异常值。</p><p id="5af2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们看看<strong class="ih hj"> trip_duration </strong>的10个最大值。</p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="9b43" class="jy jz hi kz b fi ld le l lf lg">print( df['trip_duration'].nlargest(10))</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es nd"><img src="../Images/f12e9c0e3dbe6d4ff87dcf2b3fd108c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:842/format:webp/1*o8-lLPinjvQrOZg4Q8Tvsw.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">列中返回的10个最大值</figcaption></figure><p id="bf06" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最大值远大于第二和第三大行程持续时间值。这可能是因为在数据收集过程中通常会出现一些错误，或者这可能是合法的数据。因为不太可能出现如此大的值，所以最好在进一步分析之前删除这一行。</p><p id="f83c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该值也可以由出行持续时间的众数或中位数代替。</p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="aa02" class="jy jz hi kz b fi ld le l lf lg">df=df[df.trip_duration!=df.trip_duration.max()]</span></pre><p id="f621" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在剔除异常值后，让我们来看看trip_duration的分布。</p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="d1a1" class="jy jz hi kz b fi ld le l lf lg">sns.distplot(df['trip_duration'])<br/>plt.title('Distribution of the pickup ditribution after the treatment of outliers')</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es ne"><img src="../Images/e0de0cfc34e916c3131cd4eaa259bfd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/format:webp/1*oZuiIFbKTZ4e5myv3OB9LQ.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">移除异常值后行程持续时间的分布(秒)</figcaption></figure><p id="e01f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">仍然存在极端的右倾。因此，我们将把trip_duration列分成一些区间。</p><p id="6616" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">时间间隔决定如下:</p><ul class=""><li id="8ec8" class="lp lq hi ih b ii ij im in iq lr iu ls iy lt jc lu lv lw lx bi translated">不到5小时</li><li id="1749" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">5-10小时</li><li id="2579" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">10-15小时</li><li id="5cce" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">15-20小时</li><li id="0d5d" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">20多个小时</li></ul><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="4ab6" class="jy jz hi kz b fi ld le l lf lg">bins=np.array([0,1800,3600,5400,7200,90000])<br/>df['duration_time']=pd.cut(df.trip_duration,bins,labels=["&lt; 5", "5-10", "10-15","15-20","&gt;20"])</span></pre><p id="d40f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">取货经度分布</strong></p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="def8" class="jy jz hi kz b fi ld le l lf lg">sns.distplot(df['pickup_longitude'])<br/>plt.title('The distribution of Pick up Longitude')</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es nf"><img src="../Images/946c4eb4daa7d5bee4e688d6def37b75.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*RkLITsu6lcIs8T-INc_itQ.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">拾取经度的分布</figcaption></figure><p id="adea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">下降经度分布</strong></p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="1a48" class="jy jz hi kz b fi ld le l lf lg">sns.distplot(df[‘dropoff_longitude’])<br/>plt.title(‘The distribution of Drop off Longitude’)</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es ng"><img src="../Images/535bcc4c87bd7459ff198a468c791419.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*3pba42wZNNl_mvd_hq9d9g.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">下降经度的分布</figcaption></figure><p id="212e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">衰减纬度分布</strong></p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="ddbd" class="jy jz hi kz b fi ld le l lf lg">sns.distplot(df['dropoff_latitude'])<br/>plt.title('The distribution of drop off Latitude')</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es nh"><img src="../Images/1dbc68b77bb9a6057fc09c2071a6ec4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*KF3YHhDtb2Ddc1kSqSnGUw.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">下降纬度的分布</figcaption></figure><p id="e2ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">拾音器纬度分布</strong></p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="bf87" class="jy jz hi kz b fi ld le l lf lg">sns.distplot(df['pickup_latitude'])<br/>plt.title('The distribution of pick up Latitude')</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es nh"><img src="../Images/7318f76ccfbeb7adc4537eb51a8b4d3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*mHZV7B3RHG3bj1knepE9Hg.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">拾音纬度的分布</figcaption></figure><p id="7879" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们看到，拾取经度和衰减经度具有几乎相同类型的分布，而拾取纬度和衰减纬度具有略微不同的分布。</p><p id="9a01" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">供应商id的分配</strong></p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="f052" class="jy jz hi kz b fi ld le l lf lg">df['vendor_id'].hist(bins=2)</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es ni"><img src="../Images/28107b94bb36da2f2f856596b4a60648.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*Wzq4hRGKytFzdB9FNc7XBg.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">2个供应商id的分布</figcaption></figure><p id="0a5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">供应商id的分布与预期的差别不大。</p><h1 id="41dc" class="mf jz hi bd ka mg mh mi ke mj mk ml ki mm mn mo kl mp mq mr ko ms mt mu kr mv bi translated">双变量分析</h1><p id="5aa4" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">现在让我们看看每个变量与目标变量trip_duration之间的关系。</p><p id="e6b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">旅行持续时间与一周中的某一天的关系</strong></p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="dbaf" class="jy jz hi kz b fi ld le l lf lg">sns.catplot(x="pickup_day",y="trip_duration",kind="bar",data=df,height=6,aspect=1)<br/>plt.title('The Average Trip Duration per PickUp Day of the week')</span><span id="a391" class="jy jz hi kz b fi mz le l lf lg">sns.catplot(x="dropoff_day",y="trip_duration",kind="bar",data=df,height=6,aspect=1)<br/>plt.title('The Average Trip Duration per Dropoff Day of the week')</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es nj"><img src="../Images/9718c103b6e1b6765e9b33236b09049f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1106/format:webp/1*jcheP54jTn922oj_ljaIXA.png"/></div></figure><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es nk"><img src="../Images/8d93f1b5fbe37ad2d3d9aab190c47c99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1130/format:webp/1*FM-Ieu_vwsB66Hsmi13nkA.png"/></div></figure><blockquote class="nl nm nn"><p id="3f37" class="if ig jd ih b ii ij ik il im in io ip no ir is it np iv iw ix nq iz ja jb jc hb bi translated">图表显示了一周中每天旅行的平均估计值。误差线提供了该估计的不确定性的一些指示</p></blockquote><p id="419a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，完成一次旅行的最高平均时间是在周四，而周一、周六和周日花费的时间最少。</p><p id="ab28" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但这还不够。我们还必须考虑每天进行的短程、中程和远程旅行的百分比。</p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="bab0" class="jy jz hi kz b fi ld le l lf lg">ax1=df.groupby('pickup_day')['duration_time'].value_counts(normalize=True).unstack()<br/>ax1.plot(kind='bar', stacked='True')<br/>plt.title('The Distribution of percentage of different duration of trips')</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es nh"><img src="../Images/df2d01b8068be0dbc4948ec067adab80.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*YVOeGE6OCZDHVJlBRnsG5w.png"/></div></figure><blockquote class="nl nm nn"><p id="1cd6" class="if ig jd ih b ii ij ik il im in io ip no ir is it np iv iw ix nq iz ja jb jc hb bi translated">该图显示了一周中每天不同持续时间的旅行的百分比分布。</p></blockquote><p id="0373" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这并不能提供太多的信息，因为每天0-5小时范围内的出行次数要多得多，</p><p id="4ed8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们来看看长途旅行(持续时间大于5小时)的百分比</p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="9e23" class="jy jz hi kz b fi ld le l lf lg">figure,ax=plt.subplots(nrows=1,ncols=3,figsize=(15,5))<br/>ax1=df[(df.duration_time !="&lt; 5")].groupby('pickup_day')['duration_time'].count()<br/>ax1.plot(kind='bar',ax=ax[0])<br/>ax[0].set_title('Distribution of trips &gt; 5 hours')<br/>ax2=df[(df.duration_time !="&lt; 5")].groupby('pickup_day')['duration_time'].value_counts(normalize=True).unstack()<br/>ax2.plot(kind='bar', stacked='True',ax=ax[1])<br/>ax[1].set_title('Percentage distribution of trips &gt; 5 hours')<br/>ax3=df[(df.duration_time !="&lt; 5")].groupby('pickup_day')['duration_time'].value_counts().unstack()<br/>ax3.plot(kind='bar',ax=ax[2])<br/>ax[2].set_title('A compared distribution of trips &gt; 5 hours')</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es na"><img src="../Images/3d13d817a5e34a3ae47d06359a912b0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*Do2sd2a4lBB-1bq2OKVtJw.png"/></div></figure><blockquote class="nl nm nn"><p id="0990" class="if ig jd ih b ii ij ik il im in io ip no ir is it np iv iw ix nq iz ja jb jc hb bi translated">这三张图显示了三种类型的信息:</p><p id="661c" class="if ig jd ih b ii ij ik il im in io ip no ir is it np iv iw ix nq iz ja jb jc hb bi translated">最左边的图表显示了一周中每天出行次数(&gt; 5小时)的频率分布</p><p id="619f" class="if ig jd ih b ii ij ik il im in io ip no ir is it np iv iw ix nq iz ja jb jc hb bi translated">中间一个显示了一周内每天不同持续时间(&gt; 5小时)的出行的百分比分布。</p><p id="f468" class="if ig jd ih b ii ij ik il im in io ip no ir is it np iv iw ix nq iz ja jb jc hb bi translated">右图显示了一周内每天不同持续时间(&gt; 5小时)的出行频率分布。</p></blockquote><p id="c4d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">一些要点:</strong></p><ul class=""><li id="2cfb" class="lp lq hi ih b ii ij im in iq lr iu ls iy lt jc lu lv lw lx bi translated">持续时间超过5小时的旅行次数最多的是在周四，其次是周五和周三。(左图)</li><li id="fc38" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">持续时间为5-10、10-15的旅行次数最多的是在星期四。(右图)</li><li id="d2bc" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">但是超过20小时的旅行百分比最高的是在周日和周六。(中图)</li></ul><p id="0586" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">行程持续时间与当天时间的关系</strong></p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="7660" class="jy jz hi kz b fi ld le l lf lg">figure,(ax1,ax2)=plt.subplots(ncols=2,figsize=(20,5))</span><span id="8423" class="jy jz hi kz b fi mz le l lf lg">ax1.set_title('Distribution of pickup hours')<br/>ax=sns.catplot(x="pickup_hour", y="trip_duration",kind="bar",data=df,ax=ax1)</span><span id="69d9" class="jy jz hi kz b fi mz le l lf lg">ax2.set_title('Distribution of dropoff hours')<br/>ax=sns.catplot(x="dropoff_hour", y="trip_duration",kind="bar",data=df,ax=ax2)<br/>plt.show()</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es na"><img src="../Images/41ec96ffb11a899f4a8cb48535deff23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*jAXyvng7K7AyvkF0XN3Uyg.png"/></div></figure><p id="fd82" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完成一次旅行的平均时间最长的是在中午开始的旅行(14-17小时)，最短的是在清晨开始的旅行(6-7小时)</p><p id="f3d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">乘客数量与持续时间的关系</strong></p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="a0dc" class="jy jz hi kz b fi ld le l lf lg">sns.relplot(x="passenger_count", y="trip_duration", data=df, kind="scatter")</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es nr"><img src="../Images/8aafe7164db9502d3e9a3f12d945db2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*UJVSJ97DHfnT7pQ7KZsW8g.png"/></div></figure><p id="149e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里我们看到，乘客数量与行程持续时间没有这样的关系。但值得注意的是，没有像7或9这样的高乘客计数的长途旅行。而仅对于乘客计数1，行程持续时间或多或少是均匀分布的。</p><p id="ced0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">供应商id和持续时间的关系</strong></p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="d660" class="jy jz hi kz b fi ld le l lf lg">sns.catplot(x="vendor_id", y="trip_duration",kind="strip",data=df)</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es ns"><img src="../Images/12eb71683c0362d6739b8cb0275b817d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*63VQ01A0Mn2qA6Y6qKHtkA.png"/></div></figure><p id="8a22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，我们看到供应商1主要提供短途旅行出租车，而供应商2提供短途和长途旅行出租车</p><p id="11b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">店铺转发标志与持续时间的关系</strong></p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="a9d9" class="jy jz hi kz b fi ld le l lf lg">sns.catplot(x="store_and_fwd_flag", y="trip_duration",kind="strip",data=df)</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es nt"><img src="../Images/bc8c10e7861299b056ac503b7cbc0211.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*7m08qwbtAPTFiVpFIYWXbA.png"/></div></figure><p id="06d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们看到该标志仅在短时间旅行中存储，而在长时间旅行中，该标志从不存储。</p><p id="422e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">地理位置与持续时间的关系</strong></p><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="563f" class="jy jz hi kz b fi ld le l lf lg">sns.relplot(x="pickup_latitude", y="dropoff_latitude",hue='pickup_timezone',row='duration_time',data=df);</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es nu"><img src="../Images/219ec7ad8aff255ac184beed8b6f1213.png" data-original-src="https://miro.medium.com/v2/resize:fit:1038/format:webp/1*7VLhEeuBuuZBq8kmPsso6Q.png"/></div></figure><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es nc"><img src="../Images/931f3f40ddd695b83c782ef0ed57a77e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*UAe-RhzaGiUNdO9AfE8kpw.png"/></div></figure><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es nv"><img src="../Images/4bb2801494bd436e8c2f62c4edbc1de9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/1*1sK0Kxd8fDFw5VPgbWxo5w.png"/></div></figure><p id="fb3f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是我们看到的</p><ul class=""><li id="93fa" class="lp lq hi ih b ii ij im in iq lr iu ls iy lt jc lu lv lw lx bi translated">对于短途旅行(&lt;5 hours), the pickup and dropoff latitude is more or less evenly distributed between 30 ° and 40 °</li><li id="9b94" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">for longer trips(&gt; 5小时)，接送纬度都集中在40到42度之间。</li></ul><pre class="jn jo jp jq fd ky kz la lb aw lc bi"><span id="c8ab" class="jy jz hi kz b fi ld le l lf lg">sns.relplot(x="pickup_longitude", y="dropoff_longitude",hue='pickup_timezone',row='duration_time',data=df);</span></pre><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es nw"><img src="../Images/7ceade28a634a2a2c4ffc5eb46bb734d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*A9FgdouAqt2bySxBufGfjA.png"/></div></figure><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es nx"><img src="../Images/4b98982ddf42f4a74aff755ec52de744.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*fZvDEXV5A3PaWSxaeEHW-w.png"/></div></figure><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es ny"><img src="../Images/201023ad826e66d88e1566bb92fdd35f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*F7WMJ1kuTbhk0GAyqA8J8g.png"/></div></figure><p id="fdcb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是我们看到的</p><ul class=""><li id="a1e8" class="lp lq hi ih b ii ij im in iq lr iu ls iy lt jc lu lv lw lx bi translated">对于短途旅行(&lt;5), the pickup and dropoff longitude is more or less evenly distributed between -80 ° and -65 ° with one outlier near -120 ° .</li><li id="2866" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">for longer trips(&gt; 5)，接送经度都集中在-75°附近</li></ul><h2 id="4e81" class="jy jz hi bd ka kb kc kd ke kf kg kh ki iq kj kk kl iu km kn ko iy kp kq kr ks bi translated">关于行程持续时间和数据集的结论:</h2><ul class=""><li id="54ed" class="lp lq hi ih b ii kt im ku iq nz iu oa iy ob jc lu lv lw lx bi translated">旅行持续时间变化很大，从几秒钟到20多个小时不等</li><li id="e0bb" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">大多数旅行在星期五、星期六和星期四进行</li><li id="12f5" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">一次旅行的平均持续时间在周四和周五最多，因为超过5小时的旅行大多在这些天进行</li><li id="a3a3" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">在14小时到17小时之间开始的旅行的平均持续时间最长。</li><li id="7e10" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">供应商2主要提供更长的行程</li><li id="b8fe" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">长时间出行(&gt; 5小时)主要集中在(40，75)到(42，75)附近</li></ul><p id="815b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个系列的下一部分可以在<a class="ae je" rel="noopener" href="/analytics-vidhya/building-a-linear-regression-model-on-the-new-york-taxi-trip-duration-dataset-using-python-2857027c54f3">这里</a>找到</p></div></div>    
</body>
</html>