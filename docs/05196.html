<html>
<head>
<title>An R package for COVID-19</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">给新冠肺炎的R包</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/an-r-package-for-covid-19-e6697df33862?source=collection_archive---------35-----------------------#2020-04-13">https://medium.com/analytics-vidhya/an-r-package-for-covid-19-e6697df33862?source=collection_archive---------35-----------------------#2020-04-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/2e2adb39c6280eca5297cf300c8e977c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ezjXkMSJH5k3FhZUvnSz_Q.jpeg"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">戴维·dvořáček在<a class="ae hv" href="https://unsplash.com/s/photos/convid-19-mask?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><div class=""/><p id="02df" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">轻松获取新冠肺炎分析数据。</em></p><p id="d698" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">跟上分析冠状病毒的最新数据非常困难，主要是因为有太多不同的来源需要花费时间来获得它们。</p><p id="9f9b" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">幸运的是，<a class="ae hv" href="https://kieranhealy.org/blog/archives/2020/04/10/covdata-package/" rel="noopener ugc nofollow" target="_blank"> Kieran Healy </a> [1]已经发布了一个新的包，它更新了来自3个来源的CONVID-19数据。</p><ol class=""><li id="2399" class="ju jv hy ix b iy iz jc jd jg jw jk jx jo jy js jz ka kb kc bi translated">来自欧洲疾病控制中心的国家级数据。</li><li id="b953" class="ju jv hy ix b iy kd jc ke jg kf jk kg jo kh js jz ka kb kc bi translated">来自<a class="ae hv" href="https://covidtracking.com/" rel="noopener ugc nofollow" target="_blank"> COVID追踪项目</a>【3】的美国州级数据。</li><li id="a43e" class="ju jv hy ix b iy kd jc ke jg kf jk kg jo kh js jz ka kb kc bi translated">美国的州级和县级数据来自《纽约时报》<a class="ae hv" href="https://github.com/nytimes/covid-19-data" rel="noopener ugc nofollow" target="_blank"><em class="jt"/></a><em class="jt"/>【4】。</li></ol><p id="8c93" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以安装此软件包:</p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="f869" class="kr ks hy kn b fi kt ku l kv kw">remotes::<a class="ae hv" href="https://remotes.r-lib.org/reference/install_github.html" rel="noopener ugc nofollow" target="_blank">install_github</a>("kjhealy/covdata")</span></pre><p id="fb45" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您想检查数据库中的1，您需要:</p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="1804" class="kr ks hy kn b fi kt ku l kv kw">covnat</span></pre><p id="b130" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你会得到:</p><figure class="ki kj kk kl fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kx"><img src="../Images/319bf8b4c4f9ea2efc3a4a78a9e5ecc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sVFMjgiFePXNFmbgSv580w.png"/></div></div></figure><p id="b7d9" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里有日期，国家，2018年的人口，累计病例和死亡人数。</p><p id="66ea" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您想检查第2点和第3点的数据，数据库是:</p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="2bb9" class="kr ks hy kn b fi kt ku l kv kw">##for 2<br/>covus<br/>##for 3<br/>nytcovstate<br/>##or <br/>nytcovcounty</span></pre><p id="51b4" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">数据集covus有另一个补充性的重要信息，如住院情况、阴性或阳性病例等。</p><p id="d10b" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">曲线:</em></p><p id="f4eb" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了便于比较，我们要做第一件事是按国家和日期对数据进行排序，并过滤cu_cases大于0的行。</p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="a70c" class="kr ks hy kn b fi kt ku l kv kw">covnat &lt;- covnat %&gt;% arrange (cname, date) %&gt;% filter (cu_cases&gt;0)</span></pre><p id="d585" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们将得到每个国家报告的第一个病例。</p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="2727" class="kr ks hy kn b fi kt ku l kv kw">#We get the first day for each country<br/>min_day_per_country &lt;- aggregate.data.frame(covnat$date,<br/>                by = list(covnat$cname),<br/>                FUN = min)<br/>#we rename the columns<br/>colnames(min_day_per_country) &lt;- c("cname","first_day")</span></pre><p id="b0e3" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，我们将其与covnat合并。</p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="797d" class="kr ks hy kn b fi kt ku l kv kw">covnat &lt;-merge(covnat, min_day_per_country, by='cname' )</span></pre><p id="3af1" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，我们添加一个变量“days ”,它将计算从第一天到每个国家的天数。</p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="bab5" class="kr ks hy kn b fi kt ku l kv kw">covnat &lt;- covnat  %&gt;%  mutate (days=as.integer( date-first_day))</span></pre><figure class="ki kj kk kl fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kx"><img src="../Images/cae4e9c853fd0e121ac8608ad30824f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LXu9RVD8XNCGEYNSaRJWjA.png"/></div></div></figure><p id="b3a4" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在是绘制累积病例和对数标度的累积病例的时候了。我们将只绘制4个国家:西班牙、意大利、阿根廷和巴西。</p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="7132" class="kr ks hy kn b fi kt ku l kv kw">plot(covnat[covnat$cname=='Argentina',]$days, covnat[covnat$cname=='Argentina',]$cu_cases, type='l', col='blue', main='Cumulative cases by country', xlab='Number of days', ylab='Number of cases', xlim=c(0,90), ylim=c(0,150000) )</span><span id="e6ca" class="kr ks hy kn b fi ky ku l kv kw">lines(covnat[covnat$cname=='Spain',]$days, covnat[covnat$cname=='Spain',]$cu_cases, col='red')</span><span id="e392" class="kr ks hy kn b fi ky ku l kv kw">lines(covnat[covnat$cname=='Italy',]$days, covnat[covnat$cname=='Italy',]$cu_cases, col='lightblue')</span><span id="4964" class="kr ks hy kn b fi ky ku l kv kw">lines(covnat[covnat$cname=='Brazil',]$days, covnat[covnat$cname=='Brazil',]$cu_cases, col='darkgreen')</span><span id="fd61" class="kr ks hy kn b fi ky ku l kv kw">legend("topleft", <br/>  legend = c('Argentina', 'Spain', 'Italy', 'Brazil'),<br/>  fill =c('blue', 'red', 'lightblue', 'darkgreen'),<br/>    col=c('blue', 'red', 'lightblue', 'darkgreen'),<br/>        bty='n')</span></pre><p id="6946" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后我们得到</p><figure class="ki kj kk kl fd hk er es paragraph-image"><div class="er es kz"><img src="../Images/9da53fd646b2f66566fa7df237ed8d60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*2JLUhm_YusWrgKvtwuHLhg.png"/></div></figure><p id="454e" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于对数标度，我们做:</p><pre class="ki kj kk kl fd km kn ko kp aw kq bi"><span id="76ed" class="kr ks hy kn b fi kt ku l kv kw">plot(covnat[covnat$cname=='Argentina',]$days, log(covnat[covnat$cname=='Argentina',]$cu_cases), type='l', col='blue', main='Cumulative cases by country in log scale', xlab='Number of days', ylab='Number of cases in log scale', xlim=c(0,90), ylim=c(0,12) )</span><span id="7c49" class="kr ks hy kn b fi ky ku l kv kw">lines(covnat[covnat$cname=='Spain',]$days, log(covnat[covnat$cname=='Spain',]$cu_cases), col='red')</span><span id="2e53" class="kr ks hy kn b fi ky ku l kv kw">lines(covnat[covnat$cname=='Italy',]$days, log(covnat[covnat$cname=='Italy',]$cu_cases), col='lightblue')</span><span id="2b47" class="kr ks hy kn b fi ky ku l kv kw">lines(covnat[covnat$cname=='Brazil',]$days, log(covnat[covnat$cname=='Brazil',]$cu_cases), col='darkgreen')</span><span id="9ca8" class="kr ks hy kn b fi ky ku l kv kw">legend("topleft", <br/>  legend = c('Argentina', 'Spain', 'Italy', 'Brazil'),<br/>  fill =c('blue', 'red', 'lightblue', 'darkgreen'),<br/>    col=c('blue', 'red', 'lightblue', 'darkgreen'),<br/>        bty='n')</span></pre><p id="7db3" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后我们得到:</p><figure class="ki kj kk kl fd hk er es paragraph-image"><div class="er es la"><img src="../Images/4be43209aee81297b29293845d8fe218.png" data-original-src="https://miro.medium.com/v2/resize:fit:950/format:webp/1*vZ12nyaQFlosJmtQ6JO8mw.png"/></div></figure><p id="005b" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你可以做你想做的分析。对于对数标度，可能建议在案例数量大于某个阈值时开始，并在开始时避免这种奇怪的形状。</p><p id="092a" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">完整的代码是<a class="ae hv" href="https://github.com/facundodeza/covdatapackage/blob/master/covdata%20package%20(1).ipynb" rel="noopener ugc nofollow" target="_blank">这里是</a>。</p><p id="185f" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这个帖子只是为了演示这个包。</p><p id="6b54" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hz">参考文献</strong></p><p id="7bf7" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">[1]<a class="ae hv" href="https://kieranhealy.org/blog/archives/2020/04/10/covdata-package/" rel="noopener ugc nofollow" target="_blank">https://Kieran Healy . org/blog/archives/2020/04/10/covdata-package/</a></p><p id="1d27" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">[2]https://www.ecdc.europa.eu/en<a class="ae hv" href="https://www.ecdc.europa.eu/en" rel="noopener ugc nofollow" target="_blank"/></p><p id="09f6" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">[3]https://covidtracking.com/<a class="ae hv" href="https://covidtracking.com/" rel="noopener ugc nofollow" target="_blank"/></p><p id="c9fe" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae hv" href="https://github.com/nytimes/covid-19-data" rel="noopener ugc nofollow" target="_blank">https://github.com/nytimes/covid-19-data</a></p></div><div class="ab cl lb lc gp ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="hb hc hd he hf"><p id="db2d" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你喜欢这篇文章吗？<br/>  <strong class="ix hz"> <em class="jt">推荐</em> </strong> <em class="jt">，在你的社交网络上分享</em></p><p id="40c1" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">要不要和我一起读读数据科学？<br/> </em> <strong class="ix hz"> <em class="jt">跟着我</em> </strong> <em class="jt">上媒</em></p></div></div>    
</body>
</html>