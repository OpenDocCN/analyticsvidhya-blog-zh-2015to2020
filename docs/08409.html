<html>
<head>
<title>Invisible Cloak — OpenCv project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">隐形斗篷——OpenCv项目</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/invisible-cloak-opencv-project-ce3a613f3ed3?source=collection_archive---------17-----------------------#2020-07-28">https://medium.com/analytics-vidhya/invisible-cloak-opencv-project-ce3a613f3ed3?source=collection_archive---------17-----------------------#2020-07-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="4cd1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你是一个陶工吗，如果是的话，我有一些你喜欢建造或再造的东西。</p><p id="3826" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你是一个波特迷吗，我有一样你会喜欢制作或再造的东西——隐身衣。是啊！正是这件斗篷让哈利·波特隐形，成为三大死亡圣器之一。我们将通过OpenCV实现这一点。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/0f11c2f3e6e63b900ba491c95459bef0.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/1*U7Xpqawg-sKwqQlPe5c7gg.gif"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">死亡的礼物</figcaption></figure><h1 id="b7f0" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">这将如何运作？</strong></h1><p id="9bc2" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">该算法在原理上非常类似于绿色筛选。但是不像绿色筛选，我们删除了背景，在这个应用程序中，我们删除了前景！我们用不同颜色的布料做斗篷，你可以选择不同的颜色，你可以用和哈利波特一样的红色。</p><ol class=""><li id="c74c" class="ks kt hi ih b ii ij im in iq ku iu kv iy kw jc kx ky kz la bi translated">捕获并存储背景帧。</li><li id="2efb" class="ks kt hi ih b ii lb im lc iq ld iu le iy lf jc kx ky kz la bi translated">使用颜色检测算法检测彩色布料。</li><li id="3a7b" class="ks kt hi ih b ii lb im lc iq ld iu le iy lf jc kx ky kz la bi translated">通过生成遮罩来分割出彩色布料。</li><li id="7cf4" class="ks kt hi ih b ii lb im lc iq ld iu le iy lf jc kx ky kz la bi translated">生成最终的增强输出，以创造神奇的效果。</li></ol><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lg"><img src="../Images/a930ab514df8fca0c462599b8f3a4d50.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/1*JOVXzpfx825Fa9EiYQbaRQ.gif"/></div></figure><h1 id="c5a5" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">要使用的库:</strong></h1><ol class=""><li id="91c9" class="ks kt hi ih b ii kn im ko iq lh iu li iy lj jc kx ky kz la bi translated">cv2</li><li id="c581" class="ks kt hi ih b ii lb im lc iq ld iu le iy lf jc kx ky kz la bi translated">numpy</li></ol><pre class="je jf jg jh fd lk ll lm ln aw lo bi"><span id="cebd" class="lp jq hi ll b fi lq lr l ls lt">import cv2<br/>import numpy as np</span></pre><h1 id="3556" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">捕捉背景</strong></h1><p id="a879" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">我们必须用背景像素替换对应于布料的当前帧像素来生成不可见性。为此，我们需要存储一帧背景。</p><pre class="je jf jg jh fd lk ll lm ln aw lo bi"><span id="c02e" class="lp jq hi ll b fi lq lr l ls lt">import cv2<br/>cap = cv2.VideoCapture(0)<br/><br/>while cap.isOpened():<br/>    camWorking, background = cap.read()<br/>    if camWorking:<br/>        cv2.imshow("image", background)<br/>        if cv2.waitKey(5) == ord('q'): <strong class="ll hj"># q to capture<br/>            </strong>cv2.imwrite('image.jpg', background) <strong class="ll hj"># saving image</strong><br/>            break<br/><br/>cap.release()<br/>cv2.destroyAllWindows()</span></pre><h1 id="4e70" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">隐形斗篷</strong></h1><p id="8966" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">你的斗篷是什么颜色的？</p><p id="2722" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">听起来简单吗？我们有一个RGB(红绿蓝)图像，很容易以RGB的形式设定阈值并得到我们的蒙版。由于RGB值对光照高度敏感，结果证明这并不有效。因此，即使斗篷是红色的，也可能存在一些区域，在这些区域中，由于阴影，相应像素的红色通道值非常低。</p><p id="2a8d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正确的方法是将我们图像的颜色空间从RGB转换到HSV(色调饱和度值)。</p><p id="00b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">什么是HSV？</strong></p><p id="97fe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它是我们通过眼睛实际看到的东西(颜色+强度)</p><ol class=""><li id="f96d" class="ks kt hi ih b ii ij im in iq ku iu kv iy kw jc kx ky kz la bi translated">色调:该通道对颜色信息进行编码。色调是模型的颜色部分，用0到360度的数字表示。色调可以被认为是一个角度，其中0度对应于红色，120度对应于绿色，240度对应于蓝色。(颜色)</li><li id="3304" class="ks kt hi ih b ii lb im lc iq ld iu le iy lf jc kx ky kz la bi translated">饱和度:该通道编码颜色的强度/纯度。饱和度描述特定颜色的灰色量，从0到100%。将该分量减少到零会引入更多的灰色并产生褪色效果。有时，饱和度显示为从0到1的范围，其中0是灰色，1是原色。</li><li id="edc3" class="ks kt hi ih b ii lb im lc iq ld iu le iy lf jc kx ky kz la bi translated">值:该通道对颜色的亮度进行编码。图像的阴影和光泽组件出现在此通道中。值与饱和度结合使用，描述颜色的亮度或强度，范围为0-100%，其中0表示完全黑色，100表示最亮，显示最多颜色。(黑色+彩色)</li></ol><p id="38e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用HSV颜色空间的主要优点是颜色/色调/波长仅由色调分量表示。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lu"><img src="../Images/8af5caf756b62bc3312c15170abc6156.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*gIbxJFDHJtR6zVn69Rb88A.gif"/></div></figure><p id="3e71" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">让我们编码并理解</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="6bd5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们在这里做的是读取背景图像，然后当我们的相机打开并处于工作状态时，我们记录当前显示。</p><p id="1847" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们正在寻找和计算rgb到hsv的值，你也可以谷歌和使用可用的在线转换，并写下颜色的上限和下限，以便颜色只能在该范围内被掩盖。</p><p id="3bf2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在第一部分中，我们提取斗篷的彩色像素(这里是红色)并遮蔽所有其他像素。(显示此选项将显示白色斗篷，其余为黑色)</p><p id="5f11" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们现在正在改变蒙版，在第二部分，我们将所有的彩色像素替换为边框。</p><p id="2e99" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将检测到的红色区域的像素值替换为静态背景的相应像素值，并最终生成一个增强输出，该输出创建了神奇的效果，将我们的衣服转换为隐身衣。为了做到这一点，我们首先使用bitwise_and操作来创建一个图像，其像素值对应于检测到的区域，等于静态背景的像素值，然后将输出添加到我们从中分割出红布的图像(res1)中。</p><p id="4f25" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最终显示的是旧背景帧像素和不属于斗篷颜色的新帧像素的组合。</p><p id="6dee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae lx" href="https://github.com/syedareehaquasar/Invisible-Cloak/blob/master/output.mp4" rel="noopener ugc nofollow" target="_blank">https://github . com/syedareehaquasar/Invisible-cover/blob/master/output . MP4</a></p><p id="759e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的是一个红色的斗篷，你可以访问下面的链接，创造更多不同颜色的斗篷。</p><div class="ly lz ez fb ma mb"><a href="https://github.com/syedareehaquasar/Invisible-Cloak" rel="noopener  ugc nofollow" target="_blank"><div class="mc ab dw"><div class="md ab me cl cj mf"><h2 class="bd hj fi z dy mg ea eb mh ed ef hh bi translated">syedareehaquasar/隐形斗篷</h2><div class="mi l"><h3 class="bd b fi z dy mg ea eb mh ed ef dx translated">一个用Python-OpenCv制作的可以让你隐形的程序。此回购包含2种类型的程序使用所有…</h3></div><div class="mj l"><p class="bd b fp z dy mg ea eb mh ed ef dx translated">github.com</p></div></div><div class="mk l"><div class="ml l mm mn mo mk mp jj mb"/></div></div></a></div></div></div>    
</body>
</html>