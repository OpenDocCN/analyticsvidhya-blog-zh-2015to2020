<html>
<head>
<title>An easy technique for web scraping an interactive web chart with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一种简单的web抓取技术——用Python实现交互式web图表</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/an-easy-technique-for-web-scraping-an-interactive-web-chart-38f5f945ca63?source=collection_archive---------1-----------------------#2020-10-10">https://medium.com/analytics-vidhya/an-easy-technique-for-web-scraping-an-interactive-web-chart-38f5f945ca63?source=collection_archive---------1-----------------------#2020-10-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="ebe3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你浏览一个带有交互式图表的动态网站，它有你下一个数据项目所需的所有数据。你应该如何进行网页抓取？</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/e3168542fd2715d44b69435db4ad7401.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m2GHbKH9xlVEUj9CXjbhdQ.png"/></div></div></figure><p id="78f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于这个过程，您只需要两个库</p><ol class=""><li id="4755" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated"><strong class="ih hj">请求</strong>库</li><li id="5d67" class="jp jq hi ih b ii jy im jz iq ka iu kb iy kc jc ju jv jw jx bi translated"><strong class="ih hj"> pandas.io.json </strong>库→ json_normalize</li></ol><p id="df82" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个过程的关键是在深入研究HTML之前探索网站的网络选项卡。</p><p id="dc10" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于本文，巴西雷亚尔的黄金价格将从bullionstar.com<a class="ae kd" href="https://www.bullionstar.com/charts/?fromIndex=XAU&amp;toIndex=BRL&amp;period=YEAR_3&amp;weightUnit=tr_oz" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj"/></a><strong class="ih hj"/>刮出，日期在2019年1月1日至2020年11月9日之间。</p><h2 id="15f0" class="ke kf hi bd kg kh ki kj kk kl km kn ko iq kp kq kr iu ks kt ku iy kv kw kx ky bi translated"><strong class="ak">步骤</strong></h2><ol class=""><li id="b2a0" class="jp jq hi ih b ii kz im la iq lb iu lc iy ld jc ju jv jw jx bi translated">右键单击并单击检查</li></ol><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es le"><img src="../Images/60819a1b7af0cb62055042b78c675d26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9RmncWEK0DeDnHM60PSFFw.png"/></div></div></figure><p id="9ac9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.重新加载页面并单击网络选项卡</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lf"><img src="../Images/a89d503df82321500e33035079284a6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pj6z5zyu4_xpiMnOpEa9Uw.png"/></div></div></figure><p id="77b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.这是需要锻炼你的调查技巧的部分！</p><p id="5034" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">确保单击XHR选项卡，它是一个API，以对象的形式在web浏览器和web服务器之间传输数据</p><p id="92f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在XHR选项卡中，通过查看预览选项卡，浏览不同的对象以查看是否包含web图表数据。</p><p id="b984" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">经过一番挖掘，我能够在预览选项卡下的"<strong class="ih hj"> chartsData </strong>"对象中找到web图表<strong class="ih hj">数据系列</strong>。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lg"><img src="../Images/a8dbd98a54ea00cdb10bad7f91a3eba8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4wRfpENE28R1RSSnEBAXfA.png"/></div></div></figure><p id="c011" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.现在让我们回到<strong class="ih hj">标题</strong>选项卡，找到请求方法所需的<strong class="ih hj">四个参数</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lh"><img src="../Images/9b50ce18f5263fb9f3f73eb034963774.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9XQPd4KLaMUNWrQ1BmbOfA.png"/></div></div></figure><p id="2ecd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请求URL: 请求的URL</p><p id="a0c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae kd" href="https://www.bullionstar.com/widget/generator/line/generate/chartsData" rel="noopener ugc nofollow" target="_blank">https://www . bullionstar . com/widget/generator/line/generate/charts data</a></p><p id="ec2c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> b .请求方法:</strong>用于向服务器发送数据，以创建/更新资源</p><p id="ddd0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">邮政</p><p id="befa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> c.Headers: </strong>发送到指定URL的HTTP头的字典</p><p id="adc3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用户代理:</p><p id="5309" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Mozilla/5.0(麦金塔；英特尔Mac OS X 10 _ 14 _ 6)apple WebKit/537.36(KHTML，像壁虎一样)Chrome/85 . 0 . 4183 . 121 Safari/537.36</p><p id="9f14" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> d .表格数据:</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es li"><img src="../Images/49606347d9a882da4a530d529639bd88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4C0D8PuZ_EwnF6vOoAh3_w.png"/></div></div></figure><p id="c03f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.现在让我们跳入python并开始编码</p><p id="7c9c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">一个</strong>。导入相关库</p><p id="5fce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> b. </strong>指定URL变量</p><p id="0cdc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">c</strong>利用。获取()以提取cookies</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lj"><img src="../Images/045ed7eda71998b8bae91f1314f3ba47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ieZglUWr3tprDQTly2jpfQ.png"/></div></div></figure><p id="0f9e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> d. </strong>为表单数据和标题指定变量，如下所示</p><p id="99cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将所有四个参数传递给r.post()</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lk"><img src="../Images/193899fb4e3fb775f128ef4f5c973182.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6qQQLdZuDOmchT5RNY5gqg.png"/></div></div></figure><p id="bf1a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> f. </strong>将数据拉成json()格式</p><p id="cd34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> g. </strong>归一化提取的数据，调出特定的数据序列</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ll"><img src="../Images/42d3ea53ad85a97ab3afa5d07e2b16aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yeGMt-aCQV5gvgAsfCJ6nw.png"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lm"><img src="../Images/3a319d6cc87f73c56ad43dbec09e11d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0L-Fjv_ZLkHtOLy0ZT31tA.png"/></div></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">运行“值”变量后，巴西雷亚尔的最近10个黄金价格快照</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lr"><img src="../Images/c74a635cbcab0e87439fae842189ae26.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*346LEImgZvmQO5sv5rBL3Q.png"/></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">标准化的JSON格式数据现在位于数据框中</figcaption></figure><p id="2fd2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在您可以继续保存到一个CSV文件，或者为您的数据项目做进一步的ETL工作！</p><p id="7cb6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意:</strong>这不是一个尺寸适合所有人，一些网页可能需要。get()或者使用Beautifulsoup库甚至selenium，但是要明白，通过探索这种技术，您可以减少只使用几个库来废弃交互式图表所需的时间。</p><p id="763d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你喜欢这篇文章，请在<a class="ae kd" href="https://www.linkedin.com/in/toyosibamidele/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>上关注我，并订阅我的<a class="ae kd" href="https://www.youtube.com/watch?v=jAPcbeBjjoE" rel="noopener ugc nofollow" target="_blank"> Youtube </a>频道。</p><p id="61af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我目前正在攻读数据科学硕士学位，并且正在尝试从能源行业转向技术，请给予我支持并提供有用的提示。</p></div></div>    
</body>
</html>