<html>
<head>
<title>Deploy a Flask Application to Ubuntu 18.04 Server</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Flask应用程序部署到Ubuntu 18.04服务器</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/deploy-a-flask-application-to-ubuntu-18-04-server-69b414b10881?source=collection_archive---------2-----------------------#2020-01-09">https://medium.com/analytics-vidhya/deploy-a-flask-application-to-ubuntu-18-04-server-69b414b10881?source=collection_archive---------2-----------------------#2020-01-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/88aa870e8849a8d8069e38fa1e878738.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*-kEW3Rk6at5k8AteR872zA.jpeg"/></div></figure><p id="9b9e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在本文中，我们将尝试使用Nginx在Ubuntu服务器上部署一个非常简单的Flask应用程序。本文旨在让您了解如何尽可能简单地在Ubuntu server中部署flask应用程序。因此，我们将从一个新的Ubuntu VPS开始，安装一个非常基本的Flask应用程序，然后部署它。通过删除不必要的复杂性，如数据库设置和其他依赖项，我相信这将有助于您轻松理解基本部署，然后您可以尝试自己解决另一个问题，如安装数据库或其他包。</p><p id="4a89" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">首先，我假设您已经在自己的VPS中安装了一个全新的Ubuntu服务器，并以root身份登录到该服务器。现在让我们在这里创建一个用户，以我为例，我创建了一个名为“gerry”的用户。使用这个命令，您可以随意命名它。</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="ed54" class="jt ju hi jp b fi jv jw l jx jy">$ adduser gerry</span></pre><p id="de30" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">随意插入密码和密码确认。如果您愿意，可以将其他内容留空。在我们创建一个用户(在我的例子中是gerry)之后，我们将首先更新Ubuntu服务器中的软件包，以确保我们可以安装python3和我们需要的其他软件包:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="274a" class="jt ju hi jp b fi jv jw l jx jy">$ apt update</span></pre><p id="fa8f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">首先我们需要安装web服务器Nginx:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="d3c0" class="jt ju hi jp b fi jv jw l jx jy">$ apt install nginx</span></pre><p id="c242" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在我们要为Nginx创建一个配置文件:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="6ca3" class="jt ju hi jp b fi jv jw l jx jy">nano /etc/nginx/sites-enabled/flask_app</span></pre><p id="1da4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在编辑器中添加如下代码:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="d8aa" class="jt ju hi jp b fi jv jw l jx jy"><strong class="jp hj">server</strong> {<br/>    <strong class="jp hj">listen</strong> 80;<br/>    <strong class="jp hj">server_name</strong> 192.0.2.0;<br/><br/>    <strong class="jp hj">location</strong> / {<br/>        <strong class="jp hj">proxy_pass</strong> http://127.0.0.1:8000;<br/>        <strong class="jp hj">proxy_set_header</strong> Host $host;<br/>        <strong class="jp hj">proxy_set_header</strong> X-Forwarded-For $proxy_add_x_forwarded_for;<br/>    }<br/>}</span></pre><p id="6bfd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">禁用Nginx默认配置，因为我们将使用自己的配置:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="0e09" class="jt ju hi jp b fi jv jw l jx jy">unlink /etc/nginx/sites-enabled/default</span></pre><p id="dd31" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">使用命令重新加载Nginx服务器:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="ac1d" class="jt ju hi jp b fi jv jw l jx jy">nginx -s reload</span></pre><p id="97a8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果您使用您的域名或IP地址访问您的服务器，您将看到如下结果:</p><figure class="jk jl jm jn fd ij er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es jz"><img src="../Images/ab780f78bc165c3b115a1809571168d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xqi-d4faCdRpdreeVSqZ0w.png"/></div></div></figure><p id="68cd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这意味着我们已经成功安装了nginx，但是还没有配置WSGI来连接我们的flask应用程序。</p><p id="88aa" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">接下来，我们安装python3:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="96cf" class="jt ju hi jp b fi jv jw l jx jy">$ apt install python3</span></pre><p id="d75a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">安装python3 pip</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="147e" class="jt ju hi jp b fi jv jw l jx jy">$ apt install python3-pip</span></pre><p id="4fe5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">然后导航到创建的用户的主目录(在我的例子中，我创建的用户是“gerry”)</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="c879" class="jt ju hi jp b fi jv jw l jx jy">$ cd /home/gerry</span></pre><p id="502d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在让我们安装flask应用程序，我们将按照本文安装一个新的flask应用程序(<a class="ae ke" href="https://flask.palletsprojects.com/en/1.1.x/installation/" rel="noopener ugc nofollow" target="_blank">https://flask.palletsprojects.com/en/1.1.x/installation/</a>)。</p><ol class=""><li id="5af2" class="kf kg hi io b ip iq it iu ix kh jb ki jf kj jj kk kl km kn bi translated">创建一个名为myproject <code class="du ko kp kq jp b">$ mkdir myproject</code>的目录</li><li id="8c72" class="kf kg hi io b ip kr it ks ix kt jb ku jf kv jj kk kl km kn bi translated">转到我的项目目录<code class="du ko kp kq jp b">$ cd myproject</code></li><li id="ec7f" class="kf kg hi io b ip kr it ks ix kt jb ku jf kv jj kk kl km kn bi translated">在我的项目<code class="du ko kp kq jp b">$ mkdir application</code>中创建一个名为application的目录</li><li id="16a2" class="kf kg hi io b ip kr it ks ix kt jb ku jf kv jj kk kl km kn bi translated">转到应用程序目录<code class="du ko kp kq jp b">$ cd application</code></li></ol><p id="80b8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">5.将烧瓶安装在<code class="du ko kp kq jp b">$ pip3 install flask</code>目录下</p><p id="becf" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">6.创建一个非常基本的名为<code class="du ko kp kq jp b">__init__.py</code>的flask应用程序，如下所示:</p><figure class="jk jl jm jn fd ij"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="c2d6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">7.让我们通过键入<code class="du ko kp kq jp b">$ python3 __init__.py</code>来测试我们的服务器</p><p id="48af" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">6.如果您使用端口5000访问您的服务器，您可以看到Hello，World！现在。这意味着我们已经成功地将简单的flask应用程序安装到了服务器上</p><figure class="jk jl jm jn fd ij er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ky"><img src="../Images/537a7d5f072cc23d3e65dd6cee90971f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eHN36fUvAmoV6aQWuOECXQ.png"/></div></div></figure><p id="7fd5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们按ctrl+c来停止服务器。</p><p id="f448" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在我们将安装Gunicorn:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="8737" class="jt ju hi jp b fi jv jw l jx jy">$ apt install gunicorn3</span></pre><p id="836a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">从应用程序的根目录运行Gunicorn(在myproject中，而不是在应用程序中)</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="5973" class="jt ju hi jp b fi jv jw l jx jy">$ gunicorn3 --workers=3 application:app</span></pre><p id="86e9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在我们简单的flask应用程序在互联网上运行，你可以使用你的域名或IP地址直接访问它。</p></div></div>    
</body>
</html>