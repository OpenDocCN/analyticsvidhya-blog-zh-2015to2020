<html>
<head>
<title>Setting up Logging in Python and Flask Application the right way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">正确设置Python和Flask应用程序中的日志记录</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/setting-up-logging-in-python-and-flask-application-the-right-way-e4489c759e8d?source=collection_archive---------2-----------------------#2020-04-16">https://medium.com/analytics-vidhya/setting-up-logging-in-python-and-flask-application-the-right-way-e4489c759e8d?source=collection_archive---------2-----------------------#2020-04-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/f613db4505b42d65f2a750dab2adebf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F8VSQclM-_swrrEFXpSyVg.jpeg"/></div></div></figure><blockquote class="iq ir is"><p id="3a7a" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">调试比一开始写代码要难两倍。因此，如果你尽可能聪明地编写代码，从定义上来说，你没有足够的聪明去调试它。— Brian Kernighan，C语言的共同创造者</p></blockquote><p id="4ee4" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">但是一个好的日志文件可以使调试更加容易和愉快。😄</p><p id="8906" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">但是建立一个好的日志和警报管道是一门艺术，因为它需要随着应用程序的增长而发展，并且应该是可伸缩的。</p><p id="be35" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">默认的<code class="du jv jw jx jy b">Python</code>日志记录也没有帮助。它给出的信息要么太多，要么太少。文档到处都是。除此之外，还有多种方法可以用来设置它。</p><p id="7d6c" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">如果你想在应用程序中使用其他模块，那么如果你想打印这些模块的日志，那将是一场噩梦。</p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><h2 id="9ebf" class="kg kh hi bd ki kj kk kl km kn ko kp kq js kr ks kt jt ku kv kw ju kx ky kz la bi translated"><strong class="ak">Python</strong>提供的不同类型的 <code class="du jv jw jx jy b"><strong class="ak">handlers</strong></code> <strong class="ak"/></h2><ul class=""><li id="e047" class="lb lc hi iw b ix ld jb le js lf jt lg ju lh jr li lj lk ll bi translated">StreamHandler</li><li id="b654" class="lb lc hi iw b ix lm jb ln js lo jt lp ju lq jr li lj lk ll bi translated">文件处理器</li><li id="093e" class="lb lc hi iw b ix lm jb ln js lo jt lp ju lq jr li lj lk ll bi translated">NullHandler</li><li id="bdbe" class="lb lc hi iw b ix lm jb ln js lo jt lp ju lq jr li lj lk ll bi translated">WatchedFileHandler</li><li id="31cb" class="lb lc hi iw b ix lm jb ln js lo jt lp ju lq jr li lj lk ll bi translated">BaseRotatingHandler</li><li id="9b0a" class="lb lc hi iw b ix lm jb ln js lo jt lp ju lq jr li lj lk ll bi translated">旋转文件处理器</li><li id="4a3e" class="lb lc hi iw b ix lm jb ln js lo jt lp ju lq jr li lj lk ll bi translated">TimedRotatingFileHandler</li><li id="d700" class="lb lc hi iw b ix lm jb ln js lo jt lp ju lq jr li lj lk ll bi translated">SocketHandler</li><li id="ae78" class="lb lc hi iw b ix lm jb ln js lo jt lp ju lq jr li lj lk ll bi translated">DatagramHandler</li><li id="21bf" class="lb lc hi iw b ix lm jb ln js lo jt lp ju lq jr li lj lk ll bi translated">SysLogHandler</li><li id="1db6" class="lb lc hi iw b ix lm jb ln js lo jt lp ju lq jr li lj lk ll bi translated">NTEventLogHandler</li><li id="1c5c" class="lb lc hi iw b ix lm jb ln js lo jt lp ju lq jr li lj lk ll bi translated">SMTPHandler</li><li id="4223" class="lb lc hi iw b ix lm jb ln js lo jt lp ju lq jr li lj lk ll bi translated">内存处理器</li><li id="385e" class="lb lc hi iw b ix lm jb ln js lo jt lp ju lq jr li lj lk ll bi translated">HTTPHandler</li><li id="f7e8" class="lb lc hi iw b ix lm jb ln js lo jt lp ju lq jr li lj lk ll bi translated">队列处理程序</li><li id="6f92" class="lb lc hi iw b ix lm jb ln js lo jt lp ju lq jr li lj lk ll bi translated">队列监听器</li></ul></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><h1 id="351a" class="lr kh hi bd ki ls lt lu km lv lw lx kq ly lz ma kt mb mc md kw me mf mg kz mh bi translated"><strong class="ak"> Python日志记录级别</strong></h1><p id="70f0" class="pw-post-body-paragraph it iu hi iw b ix ld iz ja jb le jd je js mi jh ji jt mj jl jm ju mk jp jq jr hb bi translated"><strong class="iw hj">调试</strong></p><blockquote class="iq ir is"><p id="845a" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">详细信息，通常仅在诊断问题时感兴趣。</p></blockquote><p id="3fd5" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated"><strong class="iw hj">信息</strong></p><blockquote class="iq ir is"><p id="2a87" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">确认事情按预期运行。</p></blockquote><p id="9b2f" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated"><strong class="iw hj">警告</strong></p><blockquote class="iq ir is"><p id="a70c" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">表示发生了意想不到的事情，或者表示近期会出现一些问题(例如“磁盘空间不足”)。该软件仍按预期工作。</p></blockquote><p id="0a0a" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated"><strong class="iw hj">错误</strong></p><blockquote class="iq ir is"><p id="f7aa" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">由于更严重的问题，软件无法执行某些功能。</p></blockquote><p id="c9ac" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated"><strong class="iw hj">危急</strong></p><blockquote class="iq ir is"><p id="ed6b" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">严重错误，表明程序本身可能无法继续运行。</p></blockquote></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><h1 id="21a3" class="lr kh hi bd ki ls lt lu km lv lw lx kq ly lz ma kt mb mc md kw me mf mg kz mh bi translated">当前实施</h1><ol class=""><li id="b724" class="lb lc hi iw b ix ld jb le js lf jt lg ju lh jr ml lj lk ll bi translated">实时错误通知应该发送到Slack频道或电子邮件(在调试错误之前，首先需要知道有错误)。</li><li id="5822" class="lb lc hi iw b ix lm jb ln js lo jt lp ju lq jr ml lj lk ll bi translated">完整的<code class="du jv jw jx jy b">stacktrace</code>应该保存在主机上的错误文件中，这些文件可以异步发送到一些集中式日志记录(Elasticsearch)。</li><li id="f4a9" class="lb lc hi iw b ix lm jb ln js lo jt lp ju lq jr ml lj lk ll bi translated"><code class="du jv jw jx jy b">access log</code>应保存在日志文件中以供审计。</li><li id="368e" class="lb lc hi iw b ix lm jb ln js lo jt lp ju lq jr ml lj lk ll bi translated">当日志变大时，必须相应地轮换和删除文件。</li><li id="4b1c" class="lb lc hi iw b ix lm jb ln js lo jt lp ju lq jr ml lj lk ll bi translated">在<code class="du jv jw jx jy b">debug</code>模式下，一切都必须在控制台中打印。</li><li id="1216" class="lb lc hi iw b ix lm jb ln js lo jt lp ju lq jr ml lj lk ll bi translated">在<code class="du jv jw jx jy b">production</code>中，只有绝对必要的日志才会被打印到控制台。</li><li id="4a6f" class="lb lc hi iw b ix lm jb ln js lo jt lp ju lq jr ml lj lk ll bi translated">不同的用例应该使用不同的<code class="du jv jw jx jy b">formatters</code>。</li><li id="c27e" class="lb lc hi iw b ix lm jb ln js lo jt lp ju lq jr ml lj lk ll bi translated">当然，它应该很容易实现。</li></ol><figure class="mm mn mo mp fd ij"><div class="bz dy l di"><div class="mq mr l"/></div><figcaption class="ms mt et er es mu mv bd b be z dx translated">正确设置Python和Flask应用程序中的日志记录</figcaption></figure><p id="104b" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">在上面的实现中，您可以更改<code class="du jv jw jx jy b">handlers</code>以在不同通道之间切换。</p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><p id="fce9" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated"><strong class="iw hj">参考文献</strong></p><p id="1bc4" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated"><a class="ae mw" href="https://gist.github.com/deepaksood619/99e790959f5eba6ba0815e056a8067d7" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/Deepak Sood 619/99e 790959 F5 EBA 6ba 0815 e 056 a 8067d 7</a></p><div class="mx my ez fb mz na"><a href="https://stackoverflow.com/a/61258002/5424888" rel="noopener  ugc nofollow" target="_blank"><div class="nb ab dw"><div class="nc ab nd cl cj ne"><h2 class="bd hj fi z dy nf ea eb ng ed ef hh bi translated">使用Python的dictConfig在Flask应用程序中为Gunicorn设置日志记录</h2><div class="nh l"><h3 class="bd b fi z dy nf ea eb ng ed ef dx translated">我想通过电子邮件或slack webhook发送我的错误日志，并将访问日志保存在一个文件中。当我试着和…</h3></div><div class="ni l"><p class="bd b fp z dy nf ea eb ng ed ef dx translated">stackoverflow.com</p></div></div><div class="nj l"><div class="nk l nl nm nn nj no io na"/></div></div></a></div><div class="mx my ez fb mz na"><a href="https://docs.python.org/3/howto/logging.html" rel="noopener  ugc nofollow" target="_blank"><div class="nb ab dw"><div class="nc ab nd cl cj ne"><h2 class="bd hj fi z dy nf ea eb ng ed ef hh bi translated">日志HOWTO - Python 3.8.2文档</h2><div class="nh l"><h3 class="bd b fi z dy nf ea eb ng ed ef dx translated">日志记录是跟踪某些软件运行时发生的事件的一种方式。该软件的开发人员添加了日志调用…</h3></div><div class="ni l"><p class="bd b fp z dy nf ea eb ng ed ef dx translated">docs.python.org</p></div></div><div class="nj l"><div class="np l nl nm nn nj no io na"/></div></div></a></div><div class="mx my ez fb mz na"><a href="https://docs.python.org/3/howto/logging-cookbook.html" rel="noopener  ugc nofollow" target="_blank"><div class="nb ab dw"><div class="nc ab nd cl cj ne"><h2 class="bd hj fi z dy nf ea eb ng ed ef hh bi translated">日志记录指南- Python 3.8.2文档</h2><div class="nh l"><h3 class="bd b fi z dy nf ea eb ng ed ef dx translated">这个页面包含了许多与日志记录相关的方法，这些方法在过去很有用。多次呼叫…</h3></div><div class="ni l"><p class="bd b fp z dy nf ea eb ng ed ef dx translated">docs.python.org</p></div></div></div></a></div></div></div>    
</body>
</html>