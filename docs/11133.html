<html>
<head>
<title>MLFlow Tracking</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">物流跟踪</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/mlflow-tracking-8e2b8c1fdd48?source=collection_archive---------15-----------------------#2020-11-19">https://medium.com/analytics-vidhya/mlflow-tracking-8e2b8c1fdd48?source=collection_archive---------15-----------------------#2020-11-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="4887" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">介绍</h2></div><p id="4cdc" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在使用不同的机器学习模型时，会出现具有不同参数和不同代码库的模型，这些模型具有如此多的指标，我们需要不断改进以获得最佳模型。人们使用 excel 表格来记录度量和参数，但是很难在 excel 表格中保存每个模型的所有记录，如果不止一个人在模型跟踪上工作将是一个挑战。这是 MLFlow 的跟踪组件。</p><p id="7c87" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">MLflow 跟踪组件是一个 API 和 UI，用于记录参数、代码版本、测量值和输出文件，同时在以后运行和可视化机器学习代码的结果。</p><h2 id="8adf" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">物流跟踪的优势</h2><ul class=""><li id="cc0b" class="ko kp hi iz b ja kq jd kr jg ks jk kt jo ku js kv kw kx ky bi translated">有助于跟踪不同数量的实验，数据迭代。</li><li id="a21d" class="ko kp hi iz b ja kz jd la jg lb jk lc jo ld js kv kw kx ky bi translated">帮助获取特定迭代的不同超参数、特性和分析。</li><li id="b6cc" class="ko kp hi iz b ja kz jd la jg lb jk lc jo ld js kv kw kx ky bi translated">帮助我们保存模型以及参数和分析。</li><li id="621a" class="ko kp hi iz b ja kz jd la jg lb jk lc jo ld js kv kw kx ky bi translated">有一个 API 接口来获取所有的实验。</li></ul><h2 id="f6d6" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">物流跟踪中的关键概念</h2><p id="676e" class="pw-post-body-paragraph ix iy hi iz b ja kq ij jc jd kr im jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">这里的跟踪基于运行的概念，每次运行记录不同的信息，如下所示</p><ol class=""><li id="e836" class="ko kp hi iz b ja jb jd je jg lh jk li jo lj js lk kw kx ky bi translated">代码的版本</li><li id="09aa" class="ko kp hi iz b ja kz jd la jg lb jk lc jo ld js lk kw kx ky bi translated">参数—您选择的键值输入参数。</li><li id="dabd" class="ko kp hi iz b ja kz jd la jg lb jk lc jo ld js lk kw kx ky bi translated">度量 MLFlow 记录并使您可以可视化度量的完整历史，因为度量可以在整个运行过程中更新。</li><li id="dd12" class="ko kp hi iz b ja kz jd la jg lb jk lc jo ld js lk kw kx ky bi translated">工件—可以将图像、模型(例如，腌制的 scikit- learn 模型)和数据文件记录为工件。</li><li id="57b5" class="ko kp hi iz b ja kz jd la jg lb jk lc jo ld js lk kw kx ky bi translated">Source —文件名、项目名、运行的入口点</li><li id="5f6f" class="ko kp hi iz b ja kz jd la jg lb jk lc jo ld js lk kw kx ky bi translated">标签和注释—关于每次跑步的信息</li><li id="cb7e" class="ko kp hi iz b ja kz jd la jg lb jk lc jo ld js lk kw kx ky bi translated">运行的开始时间和结束时间</li></ol><h2 id="5fee" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">物流跟踪中的几个重要功能</h2><p id="eb5a" class="pw-post-body-paragraph ix iy hi iz b ja kq ij jc jd kr im jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated"><strong class="iz hj"> mlflow.start_run() — </strong>开始一个新的运行或执行一个当前活动的运行。</p><p id="30d8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> mlflow.end_run() — </strong>结束当前活动的运行，如果有的话。</p><p id="ff36" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> mlflow.log_artifacts() — </strong>将目录中给定的所有文件记录为工件。</p><p id="364c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> mlflow.log_artifact() — </strong>将本地文件或目录记录为工件。</p><p id="2055" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> mlflow.log_param() — </strong>记录当前活动运行中的单个键值参数</p><p id="074a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> mlflow.log_metric() — </strong>记录单个键值对，需要为数值。</p><p id="dc41" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">ml flow . sklearn . log _ model()—</strong>记录 sk learn 拟合的估计器模型。</p><p id="402b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">ml flow . sk learn . save _ model()—</strong>sk learn 生成一个 pickle 文件，并将其保存到模型的特定路径。</p><p id="59c2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> mlflow.search_runs() — </strong>搜索当前实验中包含的运行。</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es ll"><img src="../Images/2b4491952053d80ebefa3596c8bd805c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t42d-JYXAq-4G9PUK-z98A.png"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">图 1:一个样本运行</figcaption></figure><p id="697e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">上图只是一个样本运行的例子。我们可以通过改变参数和使用不同的度量进行多次运行。</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div class="er es mb"><img src="../Images/18fcb5dd0436139d60212088a384a521.png" data-original-src="https://miro.medium.com/v2/resize:fit:652/format:webp/1*-x23z6r80V1hupjDJ78hfQ.png"/></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">图 2:实验中的所有运行</figcaption></figure><p id="421a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">图 2 显示，由于 MLFlow 跟踪，databricks 环境具有显示整个实验中发生的所有运行的功能。</p><figure class="lm ln lo lp fd lq er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es mc"><img src="../Images/bfb3ec09eb396a7ba3ffe0936d2ea76a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D7XlF34te69epBEdqua5aA.png"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">图 3: MLFlow 用户界面</figcaption></figure><p id="fa47" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这就是 MLFlow UI 的外观，如果有许多运行，可以通过应用过滤器来搜索运行，可以下载包含运行记录的 csv 文件，并将其发送给负责模型治理的团队。我们甚至可以根据自己的选择来比较运行次数的结果。每次运行的运行 ID、运行名称和开始时间也在那里。</p><p id="491d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">链接到数据砖笔记本-</p><ol class=""><li id="6053" class="ko kp hi iz b ja jb jd je jg lh jk li jo lj js lk kw kx ky bi translated"><a class="ae md" href="https://databricks-prod-cloudfront.cloud.databricks.com/public/4027ec902e239c93eaaa8714f173bcfc/8231051908381811/3047654976566775/5591676128474300/latest.html" rel="noopener ugc nofollow" target="_blank">https://data bricks-prod-cloudfront . cloud . data bricks . com/public/4027 EC 902 e 239 c 93 eaaa 8714 f 173 bcfc/8231051908381811/3047654976566775/5591676128474300/latest . html</a></li></ol></div></div>    
</body>
</html>