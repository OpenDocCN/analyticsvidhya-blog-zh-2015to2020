<html>
<head>
<title>How to Deploy Your Streamlit App on Heroku — For Free!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Heroku上免费部署您的Streamlit应用程序！</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-deploy-your-streamlit-app-on-heroku-for-free-284c96c2a06d?source=collection_archive---------1-----------------------#2020-11-13">https://medium.com/analytics-vidhya/how-to-deploy-your-streamlit-app-on-heroku-for-free-284c96c2a06d?source=collection_archive---------1-----------------------#2020-11-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="a24f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">本文假设你已经用Streamlit开发了一个app。如果你还没有，在这里查看文档</em><a class="ae je" href="https://docs.streamlit.io/en/stable/" rel="noopener ugc nofollow" target="_blank"><em class="jd"/></a><em class="jd">。这是一个奇妙而简单的工具！</em></p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jf"><img src="../Images/ca7e8e7654c0e5439accc742170466a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7iLyu2k6S4x1LD6j"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">艾蒂安·布朗热在<a class="ae je" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="e1de" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以你用Streamlit开发了一个web应用程序，你想与全世界分享它，但是你不知道如何或者不想为托管服务付费。让我把你介绍给Heroku！Heroku有一个非常好的免费层服务，让你一次托管多达5个未经验证的应用程序(未经验证意味着你没有给他们信用卡)，每个应用程序都有一个自定义域。好吧，让我们开始吧！</p><h2 id="68ab" class="jv jw hi bd jx jy jz ka kb kc kd ke kf iq kg kh ki iu kj kk kl iy km kn ko kp bi translated">报名参加Heroku</h2><p id="e7e8" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">首先，你需要<a class="ae je" href="https://signup.heroku.com" rel="noopener ugc nofollow" target="_blank">创建一个Heroku账号</a>。然后你要下载<a class="ae je" href="https://devcenter.heroku.com/articles/heroku-cli" rel="noopener ugc nofollow" target="_blank"> Heroku命令行界面</a>。注册并安装CLI后，您可以打开终端并运行:</p><pre class="jg jh ji jj fd kv kw kx ky aw kz bi"><span id="251a" class="jv jw hi kw b fi la lb l lc ld">heroku login</span></pre><p id="bc06" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将提示您在网络浏览器中登录您的新Heroku帐户。完成后，您的终端应显示“以<email>身份登录”。</email></p><h2 id="98b2" class="jv jw hi bd jx jy jz ka kb kc kd ke kf iq kg kh ki iu kj kk kl iy km kn ko kp bi translated">启动您的项目回购</h2><p id="9d5d" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">接下来，您将使用Git启动项目回购。只需导航到您想要的目录并运行下面的代码。请注意，这个项目名称将是您的域名，形式为your-app-name.heroku.com。所以你给它起的名字越通用，它被使用的几率就越高。</p><pre class="jg jh ji jj fd kv kw kx ky aw kz bi"><span id="09d0" class="jv jw hi kw b fi la lb l lc ld">heroku create your-app-name <!-- -->--buildpack heroku/python</span></pre><p id="ed2d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">实际上你不需要指定python buildpack，但是有时Heroku不能识别python文件，所以最好确认一下。您的终端应该告诉您应用程序已经创建，并提供远程回购url。复制repo url并运行下面代码，同样是在您的项目所在的目录中。</p><pre class="jg jh ji jj fd kv kw kx ky aw kz bi"><span id="53da" class="jv jw hi kw b fi la lb l lc ld">git clone remote-repo-url</span></pre><p id="53b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将创建一个repo的本地副本，您可以在其中工作，然后将更改推回到远程repo。(它会说你克隆了一个空的资源库，没问题)。</p><h2 id="7700" class="jv jw hi bd jx jy jz ka kb kc kd ke kf iq kg kh ki iu kj kk kl iy km kn ko kp bi translated">项目目录中需要的文件</h2><p id="36fb" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">现在您的应用程序已经创建，并且您已经有了repo的本地副本，您可以将Streamlit应用程序的py脚本转移到项目目录中。</p><p id="cb83" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是，在部署之前，您需要一些特殊的文件。</p><h2 id="3b74" class="jv jw hi bd jx jy jz ka kb kc kd ke kf iq kg kh ki iu kj kk kl iy km kn ko kp bi translated">需求文件</h2><p id="ee09" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">首先你需要一个需求文件，告诉Heroku你的应用需要哪些Python库，以及哪些版本。生成这个文件最简单的方法是使用pipreqs库。你可以用<a class="ae je" href="https://pypi.org/project/pipreqs/" rel="noopener ugc nofollow" target="_blank"> pip </a>或者<a class="ae je" href="https://anaconda.org/conda-forge/pipreqs" rel="noopener ugc nofollow" target="_blank"> anaconda </a>安装pipreqs。然后在您的项目目录中运行下面的。(或者，您可以在pipreqs之后添加目录路径，以便从其他地方运行它)。</p><pre class="jg jh ji jj fd kv kw kx ky aw kz bi"><span id="3a9c" class="jv jw hi kw b fi la lb l lc ld">pipreqs</span></pre><p id="73f6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就是这样。非常容易。该库读取您的py脚本，并自动确定您的应用程序将需要哪些库，然后将requirements.txt文件保存在指定的目录中。</p><h2 id="be3c" class="jv jw hi bd jx jy jz ka kb kc kd ke kf iq kg kh ki iu kj kk kl iy km kn ko kp bi translated">设置Bash脚本</h2><p id="0e20" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">接下来，您将需要一个bash脚本来配置Streamlit，以便在Heroku上使用。该文件应该被命名为“setup.sh ”,并且应该具有下面的确切代码。您可以在任何文本编辑器中编辑该文件。同样，这需要在项目的主目录中。</p><pre class="jg jh ji jj fd kv kw kx ky aw kz bi"><span id="a32b" class="jv jw hi kw b fi la lb l lc ld">mkdir -p ~/.streamlit</span><span id="0d03" class="jv jw hi kw b fi le lb l lc ld">echo "[server]<br/>headless = true<br/>port = $PORT<br/>enableCORS = false<br/>" &gt; ~/.streamlit/config.toml</span></pre><h2 id="13a2" class="jv jw hi bd jx jy jz ka kb kc kd ke kf iq kg kh ki iu kj kk kl iy km kn ko kp bi translated">Procfile</h2><p id="ff6f" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">最后，您需要一个称为Procfile的奇怪文件，它指定了应用程序在启动时执行的命令。它应该拼写为“Procfile”，没有任何文件扩展名，并且应该位于项目的主目录中。你可以用任何文本编辑器编辑它。用您的Streamlit python脚本替换下面代码的最后一部分。</p><pre class="jg jh ji jj fd kv kw kx ky aw kz bi"><span id="e7b1" class="jv jw hi kw b fi la lb l lc ld">web: sh setup.sh &amp;&amp; streamlit run your-script.py</span></pre><h2 id="7d52" class="jv jw hi bd jx jy jz ka kb kc kd ke kf iq kg kh ki iu kj kk kl iy km kn ko kp bi translated">推送远程回购和部署！</h2><p id="36a1" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">现在，所有必需的文件都应该在您的本地repo中:</p><ul class=""><li id="99e3" class="lf lg hi ih b ii ij im in iq lh iu li iy lj jc lk ll lm ln bi translated">您的python脚本(用于Streamlit)</li><li id="ee52" class="lf lg hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">Procfile</li><li id="c804" class="lf lg hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">setup.sh</li><li id="fc40" class="lf lg hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">requirements.txt</li></ul><p id="77aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">读入python脚本的任何文件也需要在该目录中。你现在要做的就是把文件推送到远程仓库！</p><pre class="jg jh ji jj fd kv kw kx ky aw kz bi"><span id="62cc" class="jv jw hi kw b fi la lb l lc ld">git add .<br/>git commit -m "message"<br/>git push origin master</span></pre><p id="a443" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">似乎默认的远程名称是origin，默认的分支名称是master。您可以通过在项目存储库中显示隐藏文件，打开。git，然后是配置文件。它应该告诉您远程和分支名称。</p><p id="9232" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将加载一切到远程回购和你的应用程序将很快上线！去https://your-app-name.herokuapp.com看现场直播。</p></div></div>    
</body>
</html>