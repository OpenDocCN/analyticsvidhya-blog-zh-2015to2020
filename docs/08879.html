<html>
<head>
<title>WHY DID I STOP USING THE COMMAND LINE TO ACTIVATE MY VIRTUAL ENVIRONMENT?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么我不再使用命令行来激活我的虚拟环境？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/hands-on-virtual-environment-in-python-bb0d5a0b8699?source=collection_archive---------9-----------------------#2020-08-17">https://medium.com/analytics-vidhya/hands-on-virtual-environment-in-python-bb0d5a0b8699?source=collection_archive---------9-----------------------#2020-08-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><h2 id="87f3" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">了解如何使用venv创建虚拟环境并使用可执行文件激活。</h2><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es jk"><img src="../Images/f38edb1eeefde644cf4faab960b558ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kSw-njRsFwVlqbTElIX8oQ.jpeg"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx translated">凯文·Ku在<a class="ae ka" href="https://unsplash.com/s/photos/coding?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><blockquote class="kb kc kd"><p id="f498" class="ke kf kg kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc hb bi translated">什么是虚拟环境？</p><p id="ad7e" class="ke kf kg kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc hb bi translated">虚拟环境有助于为项目创建、管理和隔离环境，每个环境都使用相同或不同版本的可执行文件。</p></blockquote><h2 id="c2b5" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">为什么我们需要一个？</h2><p id="bbe0" class="pw-post-body-paragraph ke kf hi kh b ki ld kk kl km le ko kp ix lf ks kt jb lg kw kx jf lh la lb lc hb bi translated">考虑以下场景，其中您有两个项目:<em class="kg">项目A </em>和<em class="kg">项目B </em>，这两个项目都依赖于同一个库，<em class="kg">项目C </em>。当我们需要不同版本的<em class="kg">项目C </em>时，问题就变得很明显了。也许<em class="kg">项目A </em>需要v1.0.0，而<em class="kg">项目B </em>需要更新的v2.0.0。这对Python来说是一个真正的问题，因为它无法区分同一目录中的版本。</p><h2 id="9cbc" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">我们哪里需要？</h2><p id="6e6e" class="pw-post-body-paragraph ke kf hi kh b ki ld kk kl km le ko kp ix lf ks kt jb lg kw kx jf lh la lb lc hb bi translated">随着Django、Flask等与Python兼容的web框架的增长，以及AWS、Google Cloud、Heroku、linode等云服务的增加。随着许多公司将他们的业务放到网上，每个项目都需要自己的库和版本，隔离每个项目变得很重要。</p><p id="34bd" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">在本指南中，我们期望在项目文件夹中创建一个虚拟环境。</p><p id="ee40" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">考虑一个文件夹/目录<strong class="kh hj"> <em class="kg"> My_Project </em> </strong>，我们要在其中创建一个名为<strong class="kh hj"> <em class="kg"> Test </em> </strong>的虚拟环境</p><p id="6286" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">1.检查Python是否安装正确。</p><p id="5aed" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">运行<strong class="kh hj"> <em class="kg">命令提示符(CMD)或Windows PowerShell </em> </strong>窗口，导航到<strong class="kh hj"> <em class="kg"> My_Project </em> </strong>目录，执行<code class="du li lj lk ll b">python</code>，然后执行<code class="du li lj lk ll b">exit()</code>。如果您得到的输出与图像中的输出相同，那么一切正常。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es lm"><img src="../Images/b9cb897d11d236c3078b93f9aeab5ca5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OsGfhp4IKOnS5s-klrtBBQ.png"/></div></div></figure><p id="5ee7" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">如果它说【python.exe】那么你必须把<strong class="kh hj"><em class="kg"/></strong>所在的目录添加到环境变量中。</p><p id="d629" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">2.执行<code class="du li lj lk ll b">pip install virtualenv</code>安装虚拟环境。</p><p id="e80a" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">3.执行<code class="du li lj lk ll b">python -m venv Test</code>其中<strong class="kh hj"> <em class="kg">测试</em> </strong>是你想要创建的虚拟环境的名称。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es ln"><img src="../Images/339cd1736de1e5bd253ca99aaa2ea5b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*ViSGY_W8jzZuboJJEIZcZg.png"/></div></figure><p id="7d12" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">如果到目前为止命令执行成功，应该在<strong class="kh hj"> <em class="kg"> My_Project </em> </strong>目录下创建一个名为<strong class="kh hj"> <em class="kg"> Test </em> </strong>的文件夹。</p><p id="1070" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">在<strong class="kh hj"> <em class="kg">测试目录内，</em> </strong>你应该会看到一个类似的文件结构。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es lo"><img src="../Images/c21c919e962895aaf4bab65902e7da52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2P370eK0jDz3b8GLSpUuMA.png"/></div></div></figure><p id="2fa8" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">4.要激活环境，执行<code class="du li lj lk ll b">.\Test\Scripts\activate</code>或<code class="du li lj lk ll b">.\Test\Scripts\activate.bat</code></p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es lp"><img src="../Images/9124d3523688f9955c80a7871a25e481.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xM8kNITv-cydUDtAKmgdmA.png"/></div></div></figure><blockquote class="kb kc kd"><p id="4b69" class="ke kf kg kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc hb bi translated"><strong class="kh hj"> <em class="hi">注意:目录路径前的“(测试)”字样表示您已经成功激活了您的虚拟环境。</em>T19】</strong></p></blockquote><p id="0690" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">5.要停用环境，执行<code class="du li lj lk ll b"> .\Test\Scripts\deactivate.bat</code></p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es lq"><img src="../Images/2ee5a3a27fc030573f96c86537ffe7dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bkR90FDY34dQG7UCH2ubFw.png"/></div></div></figure><h1 id="a9f0" class="lr in hi bd io ls lt lu is lv lw lx iw ly lz ma ja mb mc md je me mf mg ji mh bi translated">提示和技巧</h1><p id="84f0" class="pw-post-body-paragraph ke kf hi kh b ki ld kk kl km le ko kp ix lf ks kt jb lg kw kx jf lh la lb lc hb bi translated">考虑您正在进行的一个项目:如果是一个小项目，您不会介意执行命令来激活环境，如果是一个跨月的大项目，每次在项目中执行每个命令没有多大意义。所以，你可以这样做:</p><blockquote class="kb kc kd"><p id="49d3" class="ke kf kg kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc hb bi translated">创建一个<strong class="kh hj"> <em class="hi">批次(。</em></strong>bat)文件包含激活环境的命令。</p></blockquote><p id="cb23" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">创建一个新的<strong class="kh hj">文本文档(。txt )  </strong>在<strong class="kh hj"> <em class="kg"> My_Project </em> </strong>目录下，在文件中写入<strong class="kh hj"> <em class="kg"> activate.bat </em> </strong>的绝对路径，并将文件另存为项目目录下的<strong class="kh hj"><em class="kg">activate 1 . bat</em></strong>。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es mi"><img src="../Images/c1ca67600b1097cbc77e68c176b8458f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bGx9bidu6ZnztbWN6-Qzvg.png"/></div></div></figure><p id="84a4" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">现在，在按下<strong class="kh hj"> <em class="kg"> Shift </em> </strong>键的同时，右键单击项目目录上的<strong class="kh hj"><em class="kg"/></strong>，启动项目目录中的<strong class="kh hj"> <em class="kg">命令提示符/PowerShell </em> </strong>窗口。<strong class="kh hj"> <em class="kg">或</em> </strong>在任意位置启动一个<strong class="kh hj"> <em class="kg">命令提示符/PowerShell </em> </strong>窗口并将其导航到项目文件夹。现在执行<strong class="kh hj"><em class="kg">activate 1 . bat</em></strong>瞧！您的虚拟环境已激活。</p><p id="75d3" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">这里<code class="du li lj lk ll b">C:\Users\raghu\Desktop\My_Project\Test\Scripts\activate.bat</code>是我的文件的绝对路径。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es mj"><img src="../Images/c59efbbca8215c357ea6e217fc520c93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3dUjftHdX0VTP_U-RBvBNg.png"/></div></div></figure><p id="e6a6" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">但是对于一些懒人(包括我)来说——还是两步走。还能再缩短吗，当然！</p><blockquote class="kb kc kd"><p id="a969" class="ke kf kg kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc hb bi translated">创建一个<strong class="kh hj"> <em class="hi">批处理(。bat) </em> </strong>文件，该文件同时执行任务— <strong class="kh hj"> <em class="hi">启动命令提示符/PowerShell </em> </strong>窗口和<strong class="kh hj"> <em class="hi">激活虚拟环境</em> </strong>。</p></blockquote><p id="4ce3" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">现在编辑<strong class="kh hj">文本(。txt)  </strong>在前面步骤中创建的文档</p><pre class="jl jm jn jo fd mk ll ml mm aw mn bi"><span id="2db8" class="im in hi ll b fi mo mp l mq mr">start cmd /k “%~dp0Test\Scripts\activate.bat”</span></pre><p id="37ff" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">对于一些读者来说，这个命令可能看起来很模糊。我从以前的项目中复制了它，并将单词'<strong class="kh hj"> <em class="kg"> Test' </em> </strong>改为虚拟环境的名称，这就足够了。但是让我们一部分一部分地理解它所说的。</p><p id="69b5" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">1.<code class="du li lj lk ll b">start cmd</code>是启动一个命令提示窗口。</p><p id="ecc9" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">2.<code class="du li lj lk ll b">/k</code>是在命令执行后保持<strong class="kh hj"> <em class="kg">命令提示</em> </strong>窗口运行。</p><p id="2c1c" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">3.现在引号中的所有内容都是激活虚拟环境的实际命令<code class="du li lj lk ll b">%~dp0Test\Scripts\activate.bat</code></p><p id="b1c2" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">4.<code class="du li lj lk ll b">%~dp0</code>指您执行可执行文件的目录路径。该路径将被替换在这个地方，即<code class="du li lj lk ll b">C:\Users\raghu\Desktop\My_Project\ </code>，这是项目目录。</p><p id="7b1f" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">5.<code class="du li lj lk ll b">Test</code>是虚拟环境的名称。</p><p id="1dbe" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">替换后将执行的最后一条命令是:<code class="du li lj lk ll b"><em class="kg">C:\Users\raghu\Desktop\My_Project\Test\Scripts\activate.bat</em></code>，这是<strong class="kh hj"> <em class="kg"> activate.bat </em> </strong>文件的绝对路径，与第一种方法中使用的相同。</p><p id="8f7d" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">在项目目录下将文本文件保存为<strong class="kh hj"><em class="kg">activate 2 . bat</em></strong>并执行。</p><blockquote class="kb kc kd"><p id="010b" class="ke kf kg kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc hb bi translated"><strong class="kh hj">注意:您可以从任何目录使用“activate1.bat”激活“测试”虚拟环境，但是要使用“activate2.bat ”,它必须在您的项目目录中。</strong></p></blockquote><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es ms"><img src="../Images/7f9eaa60f4ff161fb938f1fad9d56ab5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*45CC5uh_LFGWyVq00RhkgA.png"/></div></div></figure><p id="1227" class="pw-post-body-paragraph ke kf hi kh b ki kj kk kl km kn ko kp ix kr ks kt jb kv kw kx jf kz la lb lc hb bi translated">我只是一个使用批处理文件的初学者，这只是一个我随着时间和使用而学会的技巧。所以，我期待着听到有经验的人。读者也可以通过LinkedIn联系我。</p></div></div>    
</body>
</html>