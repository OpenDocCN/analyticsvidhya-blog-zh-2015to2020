<html>
<head>
<title>Very simple REST API using Express.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Express.js的非常简单的REST API</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/very-simple-rest-api-using-express-js-5e4ebfad0af2?source=collection_archive---------9-----------------------#2020-10-04">https://medium.com/analytics-vidhya/very-simple-rest-api-using-express-js-5e4ebfad0af2?source=collection_archive---------9-----------------------#2020-10-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/5bdd167992eb153494703e13133c486e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S9Jvh6ky3nvd-pNwW28ATQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated"><a class="ae iu" href="http://www.freepik.com" rel="noopener ugc nofollow" target="_blank">由slidesgo / Freepik设计</a></figcaption></figure><h1 id="c165" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated"><strong class="ak">什么是REST Api？</strong></h1><p id="8532" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">简单来说，REST Api是后端的一个Api，你从前端/客户端调用它，告诉它你想要什么，它就返回你的数据。</p><h1 id="3b9b" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated"><strong class="ak"> API示例</strong></h1><p id="5e3a" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">一个非常简单的例子如下:假设您有一个数据库，其中有一堆产品数据。您想要一份价格低于200美元的产品列表。您从前端调用API。API查询数据库并返回价格低于200美元的产品列表。很简单对！您可以创建非常复杂的API，但是大多数时候您只需要一个非常简单的API。它最常用于从数据库中查询和返回数据。</p><p id="7d22" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated"><strong class="jv hj"> <em class="kw">只是总结一下，步骤有:</em> </strong></p><ol class=""><li id="5f40" class="kx ky hi jv b jw kr ka ks ke kz ki la km lb kq lc ld le lf bi translated"><em class="kw">你调用API，告诉它你想要什么。</em></li><li id="cc0b" class="kx ky hi jv b jw lg ka lh ke li ki lj km lk kq lc ld le lf bi translated"><em class="kw">API接收调用，处理或获取您想要的数据。</em></li><li id="c201" class="kx ky hi jv b jw lg ka lh ke li ki lj km lk kq lc ld le lf bi translated"><em class="kw">将数据发回给您。</em></li></ol><h1 id="b8e2" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated"><strong class="ak">用Express.js构建REST API</strong></h1><p id="9e06" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated"><strong class="jv hj"> <em class="kw">只是在我们开始之前很快。什么是Express.js？</em> </strong></p><p id="1b41" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">Express是Node.js的一个后端web框架，你可以用它轻松地创建一个API</p><h1 id="df9c" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated"><strong class="ak">入门</strong></h1><p id="1268" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">你需要的东西:</p><ol class=""><li id="f0dd" class="kx ky hi jv b jw kr ka ks ke kz ki la km lb kq lc ld le lf bi translated"><a class="ae iu" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">节点JS </a></li><li id="f08b" class="kx ky hi jv b jw lg ka lh ke li ki lj km lk kq lc ld le lf bi translated">NodeJS包管理器。我将使用<a class="ae iu" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> NPM </a>，它是一个非常流行的NodeJS包管理器。</li><li id="dd5a" class="kx ky hi jv b jw lg ka lh ke li ki lj km lk kq lc ld le lf bi translated">代码编辑器。我将使用<a class="ae iu" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码</a></li></ol><p id="efbb" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">安装了NodeJS和NPM之后，确保安装正确。这个很简单:</p><ol class=""><li id="0e98" class="kx ky hi jv b jw kr ka ks ke kz ki la km lb kq lc ld le lf bi translated">打开新的终端窗口</li><li id="10ee" class="kx ky hi jv b jw lg ka lh ke li ki lj km lk kq lc ld le lf bi translated">类型<strong class="jv hj"> <em class="kw">节点-v </em> </strong> &amp; <strong class="jv hj"> <em class="kw">节点-v </em> </strong></li></ol><figure class="lm ln lo lp fd ij er es paragraph-image"><div class="er es ll"><img src="../Images/6d47433bd2e158332ebcfb608b2d805b.png" data-original-src="https://miro.medium.com/v2/resize:fit:474/format:webp/1*ryaSEIhVPT9eFtSOf4N5AQ.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">显示节点和NPM版本的CMD窗口</figcaption></figure><p id="d1dc" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">现在您可以看到您的节点和NPM版本，您可以放心，它已经安装，并跳转到下一个thep。如果您没有看到版本，请尝试重新启动您的电脑或重新安装Node或NPM。</p><h1 id="635a" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated"><strong class="ak">设置项目</strong></h1><p id="f2ed" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">在安装express之前，首先我们需要创建我们的项目。</p><ol class=""><li id="dae7" class="kx ky hi jv b jw kr ka ks ke kz ki la km lb kq lc ld le lf bi translated">创建一个新的空文件夹，并用Visual Studio代码打开它</li><li id="2722" class="kx ky hi jv b jw lg ka lh ke li ki lj km lk kq lc ld le lf bi translated">一旦在Visual studio代码中打开，在<strong class="jv hj"> VS代码</strong>中打开终端</li></ol><figure class="lm ln lo lp fd ij er es paragraph-image"><div class="er es lq"><img src="../Images/f162136088f85dcad48477f626d9a24b.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*aIld6v5brrt1lEktPvSiDA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">单击打开VS代码中的终端</figcaption></figure><p id="aa47" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">3)现在我们想<strong class="jv hj">将</strong>您的项目初始化为<strong class="jv hj"> NPM项目</strong>。这将允许我们使用NPM。NPM所做的基本上是下载和安装我们可以使用的库/扩展/插件。</p><p id="53af" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">我们通过在终端中键入<strong class="jv hj"> <em class="kw"> npm init </em> </strong>来做到这一点:</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div class="er es lr"><img src="../Images/52767191487aad1cea60f851502c4fb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/1*JnKikqDuItGj-AYSQO-6Fw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">如何初始化一个NPM项目，这样你就可以使我们成为NPM</figcaption></figure><p id="30ae" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">一旦你按下回车键，它会问你一堆问题，你不必担心开始时。从所有的门进去，让它们保持原样。</p><p id="b9f0" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">太好了！您现在已经初始化了一个NPM项目，现在可以利用NPM来安装诸如Express和Nodemon之类的包。</p><h1 id="dc7c" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">安装Express和Nodemon</h1><p id="0203" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">为此，您只需在终端中键入以下内容:</p><p id="f097" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated"><strong class="jv hj"> <em class="kw"> npm快速安装</em> </strong> &amp; <strong class="jv hj"> <em class="kw"> npm安装节点</em> </strong></p><figure class="lm ln lo lp fd ij er es paragraph-image"><div class="er es ls"><img src="../Images/89796351229a94da5cb0b8aa18883572.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*0VXz4cPsjKn-7rFS3QkX0A.png"/></div></figure><p id="ed40" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">一旦你按下回车键，NPM将为你安装软件包和使用这些软件包所需的一切。这些包被称为依赖项，存储在一个新创建的名为<strong class="jv hj"> node_modules </strong>的文件夹中，您可以忽略它。</p><h1 id="d52d" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">什么是Nodemon，我们为什么需要它？</h1><p id="154e" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">我们将使用Nodemon在我们对任何文件进行任何更改后立即自动重启应用程序，以便应用程序的最新版本始终运行。</p><p id="0066" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">我们不需要Nodemon，但是我们需要在每次修改后手动重启程序，这样会非常低效。</p><p id="633f" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">到现在为止，你已经完成了很多工作，可能想要快速休息一下。从现在开始，我们将进入一些实际的编程。</p><blockquote class="lt lu lv"><p id="03b4" class="jt ju kw jv b jw kr jy jz ka ks kc kd lw kt kg kh lx ku kk kl ly kv ko kp kq hb bi translated">“休息一下可以带来突破。”<br/> ― <strong class="jv hj">拉塞尔·埃里克·多巴</strong></p></blockquote><h1 id="5e09" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated"><strong class="ak">使用Express创建API</strong></h1><p id="5f76" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">我们现在已经安装了我们需要的所有东西，可以开始设置我们的后端API了。</p><p id="96f7" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">我们首先创建一个名为<strong class="jv hj"> server.js </strong>的文件。这将是我们的主要应用文件。想象一个游戏的exe文件。它是您用来启动项目的文件。您可以将它命名为任何名称，但是server.js是常用的，也是有意义的，因为我们的API将在后端服务器上运行，这个文件将用于启动后端应用程序。</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div class="er es lz"><img src="../Images/5ce4a8b8096b3582d700aff2f4528b13.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*ZVzVHyNovXRN7cwaSn-ujA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">在主目录的VS代码中创建一个新文件</figcaption></figure><p id="e5fd" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">现在打开新创建的server.js文件。让我们快速思考一下我们需要遵循的步骤:</p><ol class=""><li id="0903" class="kx ky hi jv b jw kr ka ks ke kz ki la km lb kq lc ld le lf bi translated">进口快递</li><li id="3faa" class="kx ky hi jv b jw lg ka lh ke li ki lj km lk kq lc ld le lf bi translated">初始化我们的快速应用程序</li><li id="30c0" class="kx ky hi jv b jw lg ka lh ke li ki lj km lk kq lc ld le lf bi translated">设置我们的快速路线</li><li id="2967" class="kx ky hi jv b jw lg ka lh ke li ki lj km lk kq lc ld le lf bi translated">设置我们的快速监听器</li></ol><p id="86ce" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">这可能看起来有很多步骤，目前你可能不明白这些步骤是什么意思，但不要担心，过一会儿一切都会变得更有意义。</p><h1 id="694c" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">进口快递</h1><p id="28de" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">要使用express，我们首先需要将其导入到我们的程序中。这是有道理的，对不对？谢天谢地，导入包非常容易。请参见下面的代码示例:</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div class="er es ma"><img src="../Images/f41274374ddf594753d1b043cb64c839.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*u6jYOGMwPHURS0yueWSwiA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">下面一行代码导入了express包</figcaption></figure><p id="6ca4" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">非常快速和简单的权利！我们现在可以开始使用快递。</p><h1 id="2b5b" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">初始化快速应用程序</h1><p id="4db9" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">我们现在可以使用express的特性，但是如果我们不首先初始化我们的express应用程序，它就不能正常工作。对我们来说幸运的是，这非常快速简单:</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div class="er es mb"><img src="../Images/570d511468db0db302a7d0b3c0d09d5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*4I2-0dFqJUdfAsMbEfwbAA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">这段代码初始化一个express应用程序</figcaption></figure><h2 id="5371" class="mc iw hi bd ix md me mf jb mg mh mi jf ke mj mk jj ki ml mm jn km mn mo jr mp bi translated">说明</h2><p id="ac99" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated"><strong class="jv hj">第5行:</strong>这里我们都创建了一个名为<strong class="jv hj"> app </strong>的<strong class="jv hj">常量变量</strong>，并设置它<strong class="jv hj">等于</strong>一个<strong class="jv hj"> express应用程序。</strong></p><p id="03d9" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">它是一个常量变量，因为它永远不会改变。Express()初始化了一个express应用程序，我们希望将该应用程序存储在某个地方，以便我们可以正确地使用它。这就是为什么我们把它存储在一个名为app的变量中。不用担心理解太多，你只需要记住这一步就可以了。</p><p id="f430" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated"><strong class="jv hj">第6行:</strong>这里我们创建一个名为port的变量，并将其设置为一个3000的整数值。当在浏览器中查看我们的应用程序时，将使用此端口来访问它。它可以是从0到65535的任何4位数值。你不需要担心这一点，因为当我们在最后一步使用这个变量时，我们会更好地解释这一点。</p><h1 id="d926" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">设置快捷路线</h1><p id="a653" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">快速路由是我们可以打电话到的特定位置。让我们假设它是一个数字。每条路线都是一个企业，每个企业都有自己唯一的编号。我们可以用这个号码给企业打电话，从他们那里得到具体的信息。让我们看看代码，这样更有意义。</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div class="er es mq"><img src="../Images/8892a62663840a366e84ee393bc98f27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*ergS_OXZbBdUiodlQGohIw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">这段代码创建了一条路线，一旦应用程序运行，我们现在就可以在浏览器中访问这条路线</figcaption></figure><h2 id="3816" class="mc iw hi bd ix md me mf jb mg mh mi jf ke mj mk jj ki ml mm jn km mn mo jr mp bi translated">说明</h2><p id="848a" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated"><strong class="jv hj">第9行:</strong>这里我们使用app变量，它是一个express应用程序。我们调用get过程，这意味着我们只是调用路由/业务来获取信息。第一个参数<strong class="jv hj"> <em class="kw"> '/' </em> </strong>是我们正在呼叫的位置/号码。第二个参数是匿名函数，有两个参数，即req(请求)和res(响应)。这些参数变量可以被称为任何名称，但目前的名称更有意义。</p><p id="a8a4" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated"><strong class="jv hj">第10行:</strong>在匿名函数内部，我们用<strong class="jv hj"> res.send()发送一个响应。</strong> res代表响应，我们发送它。到目前为止都说得通。在send()过程中，我们传递我们想要发回的信息。在这里，我们只是发送回一些文本，上面写着“Hello World！”当客户端在“/”路由(也是基本路径)上发出呼叫时。</p><p id="5f04" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">第11行:我们简单地关闭get过程。</p><p id="5cd5" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">在匿名函数内部，我们可以进行计算，进行函数调用等等。然后将这些计算结果或函数返回值作为响应发送出去。一旦应用程序建立并运行，我们将做一个例子。</p><h1 id="d5e3" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">设置我们的快速监听器</h1><p id="3e10" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">这是我们开始应用程序之前需要做的最后一步。我们基本上需要告诉我们的应用程序在哪个端口监听调用。这将使用我们在应用程序开始时创建的端口变量。</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mr"><img src="../Images/caeaf67b73233be14b5a5b7cd0073a10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yAyArDikkqpJvF92gWEpsw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">这段代码告诉express应用程序监听端口3000上的任何呼叫</figcaption></figure><h2 id="f201" class="mc iw hi bd ix md me mf jb mg mh mi jf ke mj mk jj ki ml mm jn km mn mo jr mp bi translated">说明</h2><p id="95c5" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated"><strong class="jv hj">第14行:</strong>这里我们使用我们的express应用程序的listen过程，带有两个参数。第一个是应用程序应该监听的端口变量。第二个参数是一个匿名回调函数，它在应用程序开始监听该端口时运行。</p><p id="f0af" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated"><strong class="jv hj">第15行:</strong>在这里，我们只放入应用程序开始监听指定端口时应该运行的代码。我们只是将一个字符串记录到控制台，该字符串说明了我们可以用来发出API请求的位置。</p><h1 id="c770" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">启动我们的Express API应用程序</h1><p id="d300" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">为了启动应用程序，我们将使用nodemon和VS代码终端。这很容易。您只需输入<strong class="jv hj"> <em class="kw"> nodemon &lt;插入主文件名&gt; </em> </strong>就可以用nodemon启动您的应用程序。</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div class="er es ms"><img src="../Images/3615d6dc734660d22384db7fb481287b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*L6aPvcq5kFCSQx6uS5TwKg.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">这个终端代码将使用nodemon启动应用程序</figcaption></figure><p id="53d6" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">一旦你在你的终端上看到下面的文本，你就成功地用Express创建了你的第一个API。</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div class="er es mt"><img src="../Images/eb2aa49635dbfe00c1c7fab63bc4d59e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/format:webp/1*npmz3RQ1qoNvEzeDCffEdg.png"/></div></figure><p id="497e" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">我们现在可以使用浏览器进行API调用。为此，请打开您的浏览器并访问以下URL:<a class="ae iu" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"><strong class="jv hj"><em class="kw">http://localhost:3000/</em></strong></a></p><figure class="lm ln lo lp fd ij er es paragraph-image"><div class="er es mu"><img src="../Images/05f564a7f65c232f271b4a531d58d19f.png" data-original-src="https://miro.medium.com/v2/resize:fit:806/format:webp/1*mXKZ30D2PsFMsC_RWuTD2Q.png"/></div></figure><h1 id="b89c" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated"><strong class="ak">牛逼！</strong></h1><p id="e063" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">这里你可以看到我们的API正在工作。我们访问的网址:<a class="ae iu" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"><strong class="jv hj"><em class="kw">http://localhost:3000</em></strong></a><strong class="jv hj"><em class="kw">/</em></strong><em class="kw">基本和访问'/'路由一样。</em></p><p id="540d" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">请注意，从现在开始，当您对应用程序进行额外的更改时，您不需要再次启动应用程序，除非您关闭了VS代码。这就是我们安装Nodemon的原因。当我在未来做出改变时，Nodemon将会监视我们所有的文件，当我们对它们做出改变时，它将会自动为我们重启程序。然后，您将在终端中看到以下文本。</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div class="er es mv"><img src="../Images/678612538b80f106e2fef6c7f8fc1691.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/1*14ecRD9j-AvAwWNQmq_ZtA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">Nodemon在文件改变时自动重启我们的应用程序</figcaption></figure><h1 id="d350" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">让我们制定一些更有用的路线。</h1><p id="711e" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">我们可以保留'/'的基本路线，这样我们就可以很容易地检查我们的程序是否还在工作，但是让我们来做一些更有趣的事情。</p><h1 id="4e32" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">创建另一条路线</h1><figure class="lm ln lo lp fd ij er es paragraph-image"><div class="er es mw"><img src="../Images/7eb254c730dbbabeacf605917a04069f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1038/format:webp/1*RU7wCtlhwfb19fktYemdiA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">这将是我们的第二条路线</figcaption></figure><p id="682f" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">就在第一条路由下面，我们可以创建另一条路径为“/newRoute”的路由。该路径可以是任何路径，并且可以在<a class="ae iu" href="http://localhost:3000/newRoute" rel="noopener ugc nofollow" target="_blank"> <strong class="jv hj"> <em class="kw">访问http://localhost:3000/new route</em></strong></a></p><p id="3b50" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">现在，我们只是简单地将一个基本字符串发送回客户端</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div class="er es mx"><img src="../Images/1c99642be32d98c584ba782359459877.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/format:webp/1*s4xDRM20uQxCYrSExVgsBw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">当访问<a class="ae iu" href="http://localhost:3000/newRoute" rel="noopener ugc nofollow" target="_blank"><strong class="bd ix"><em class="my">http://localhost:3000/new route</em></strong></a><strong class="bd ix"><em class="my"/></strong>时，我们将收到新创建的响应</figcaption></figure><p id="736e" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">现在让我们做一些更有趣的事情。让我们创建一个食物名称列表。然后，我们将设置一条路径，返回一个随机的食物名称。你可以把它想象成一个随机的食物选择器或者一个每日特色食物。</p><p id="f066" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">让我们改变刚刚创建的路线。首先我们将改变路径，然后创建一个包含食物字符串的简单变量。</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mz"><img src="../Images/794d5e6093f5b644a274168a252ce790.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/format:webp/1*BD-_2z1XV1Cn0Kcxxzd7fQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">将返回随机食物名称的新路径</figcaption></figure><p id="8fb7" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">我们现在想从食物数组中获取一个随机项，并将其作为对API调用的响应发送出去。</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es na"><img src="../Images/112a408ded2a472087198c83f0c722fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cuuAWkibbOIKhYGGLEXqKg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">这个API路径现在可以运行了，我们可以</figcaption></figure><p id="bff4" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">如您所见，这一次我们在将响应/数据发送回客户端之前先做了一些计算。像上面的例子一样，您可以在API调用中运行任何其他javascript代码，然后返回一个包含生成的数据的响应。你也可以返回变量(就像我们上面做的)，javascript数组，JSON等等。</p><p id="50d9" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">让我们来看看它的实际应用:</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div class="er es nb"><img src="../Images/3bcc6c9504535066cb177df3d831cbe6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*f3i7_f7gSdOScF2PbuCp2A.gif"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">每次刷新API都会返回一个响应，其中包含一个带有随机食物名称的字符串</figcaption></figure><h1 id="6d78" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">如何在现实生活项目中使用它的例子</h1><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nc"><img src="../Images/cac8d655f26a26c4a2576ef788e22f1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*sSFSdCEAty_-9V_6SnOCRw.gif"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">API用法的真实演示示例</figcaption></figure><p id="4d3d" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">上面的gif是一个实际应用程序演示的预览，展示了如何使用这个API。在视频中，它被用在一个全是食谱的公司网站上。他们用它为用户生成一些非常酷和随机的食谱。它为网站增加了更多的功能，使其更具互动性和动态性，从而能够从竞争对手中脱颖而出。</p><p id="0299" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">请关注我的Medium profile，在以后的文章中，我们将更深入地学习一些其他的Express特性，这样我们就可以将API提升到一个新的水平。</p><h1 id="e8a0" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">感谢阅读。</h1></div></div>    
</body>
</html>