<html>
<head>
<title>Python: Finding Missing Values in a Pandas Data Frame</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python:在熊猫数据框中查找缺失值</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/python-finding-missing-values-in-a-data-frame-3030aaf0e4fd?source=collection_archive---------0-----------------------#2020-08-14">https://medium.com/analytics-vidhya/python-finding-missing-values-in-a-data-frame-3030aaf0e4fd?source=collection_archive---------0-----------------------#2020-08-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="a011" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如何使用Python/Pandas在数据框中查找缺失值</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/43ac431e6e982afd80d434298824cfea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oVrHO_8enQxprkDlP3DcEw.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">熊猫数据框中缺少值</figcaption></figure><h1 id="4a82" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak">简介:</strong></h1><p id="4032" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">当你开始从事任何数据科学项目时，提供给你的数据从来都不是干净的。任何数据集最常见的问题之一是缺少值。大多数机器学习算法都无法处理缺失值。在应用任何机器学习算法之前，需要解决丢失的值。</p><p id="838b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">根据缺失值是连续的还是分类的，可以用不同的方式处理缺失值。在这一节中，我将介绍如何查找缺失值。在下一篇文章中，我将讨论如何处理丢失的值。</p><h1 id="4d88" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak">查找缺失值:</strong></h1><p id="2d32" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">在本练习中，我将使用西雅图Airbnb数据中的“listings.csv”数据文件。数据可以在这个链接下找到:【https://www.kaggle.com/airbnb/seattle?select=listings.csv T4】</p><p id="0f61" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第一步:加载数据帧，研究数据帧的结构。</strong></p><p id="8ffe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一步是加载文件并查看文件的结构。当您有一个包含大量列的大dateset时，很难查看每一列并研究列的类型。</p><p id="8630" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了找出有多少列是分类的和数字的，我们可以使用pandas“dtypes”来获得不同的数据类型，您可以使用pandas“value _ counts()”函数来获得每个数据类型的计数。Value_counts对所有唯一实例进行分组，并给出每个实例的计数。</p><p id="8210" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如您在下面看到的，我们有62列是对象(分类数据)，17列是浮点数据类型，13列是int数据类型。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kx"><img src="../Images/b12e18a55a8c6ae6e74ddf142bbfd3b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hKc0DJ1pmDb8080H9Hl2NQ.jpeg"/></div></div></figure><p id="80da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤2:在数据框中分离分类和数字列</strong></p><p id="8987" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将数据框中的分类列和数值列分开的原因是，这两种数据类型处理缺失值的方法是不同的，我将在下一节介绍这一点。</p><p id="ea68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">实现这一步最简单的方法是根据数据类型从原始数据框中过滤出列。通过使用“dtypes”函数和等式运算符，可以得到哪些列是对象(分类变量)，哪些不是。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ky"><img src="../Images/8b8eb58e569cda2997b79e1fd4421287.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eP421dLBQ3MLmYJviMng5w.jpeg"/></div></div></figure><p id="4fec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要获得满足上述条件的列的列名，我们可以使用“df.columns”。下面的代码给出了对象的列名和非对象的列名。</p><p id="7937" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如你在下面看到的，我们将原始数据帧分成两部分，并给它们分配了新的变量。一个用于分类变量，一个用于非分类变量。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kz"><img src="../Images/b70faf9d39132145218765bbf9518604.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7TgArPxCRR5Qu_dPhwKcdg.jpeg"/></div></div></figure><p id="6f42" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第三步:查找缺失值</strong></p><p id="3148" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于分类变量和连续变量，查找缺失值是一样的。我们将使用“num_vars ”,它保存所有非对象数据类型的列。</p><p id="1fcf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> df[num_vars] </strong>将给出“num_vars”中的所有列，它由数据框中所有非对象数据类型的列组成。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es la"><img src="../Images/289abf994110f404abd4d7b10dbbb756.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FZOi3aBF2S5V72xyfXiWPw.jpeg"/></div></div></figure><p id="d38b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以使用pandas <strong class="ih hj"> "isnull()" </strong>函数找出所有缺少值的字段。如果字段有缺失值，则返回True，如果字段没有缺失值，则返回false。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lb"><img src="../Images/b3bae848ea6d30bbb53ad85bfe038a21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H22xlANdhTJcSwA5KVUcRQ.jpeg"/></div></div></figure><p id="4749" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了得到每一列中有多少缺失值，我们使用了<strong class="ih hj"> sum() </strong>和<strong class="ih hj"> isnull() </strong>，如下所示。这将汇总上一步中每一列中所有的真值。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lc"><img src="../Images/28999f84cc93cf0b672dfb935a5ef3d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QzXdNSfQg8X1moAetX1mKQ.jpeg"/></div></div></figure><p id="90ea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">按降序对列进行排序总是一种好的做法，这样您就可以看到缺失值最高的列。为此我们可以使用<strong class="ih hj"> sort_values() </strong>函数。默认情况下，该函数将按升序排序。因为我们首先想要缺失值最高的列，所以我们想将其设置为降序。您可以通过在<strong class="ih hj"> sort_values()中传递“ascending=False”参数来做到这一点。</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ld"><img src="../Images/a2a8a944a631da297d4fcfdd81ecaad1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mJsBuNsVzwegMEq3O_vAZg.png"/></div></div></figure><p id="1148" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面给出了每一列中缺失值的数量。要获得每列中缺失值的百分比，可以除以数据框的长度。您可以“len(df)”，它给出了数据框中的行数。</p><p id="3b1e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如您在下面看到的，license列缺少100%的数据，square _ feet列缺少97%的数据。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es le"><img src="../Images/d0fc23c4180df137e59aecb7fbf55de4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*_BAaTIMK2ruHHCUZWVYdUg.jpeg"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lf"><img src="../Images/2b8b3ae937ebb17a1602ed10e962ac18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PQ03F2Jy1IPhF1OHdqrbbw.jpeg"/></div></div></figure><h1 id="72f1" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak">结论</strong></h1><p id="184e" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">上面的文章介绍了如何使用Python pandas库在数据框中查找缺失值。以下是步骤</p><ol class=""><li id="b5be" class="lg lh hi ih b ii ij im in iq li iu lj iy lk jc ll lm ln lo bi translated">使用<strong class="ih hj"> isnull() </strong>函数识别数据帧中缺失的值</li><li id="cf8a" class="lg lh hi ih b ii lp im lq iq lr iu ls iy lt jc ll lm ln lo bi translated">使用<strong class="ih hj"> sum() </strong>函数获得每列所有缺失值的总和。</li><li id="39c9" class="lg lh hi ih b ii lp im lq iq lr iu ls iy lt jc ll lm ln lo bi translated">使用<strong class="ih hj">sort _ values(ascending = False)</strong>函数以降序获取缺少值的列。</li><li id="0255" class="lg lh hi ih b ii lp im lq iq lr iu ls iy lt jc ll lm ln lo bi translated">除以<strong class="ih hj"> len(df) </strong>得到每一列中缺失值的百分比。</li></ol><p id="bba1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本节中，我们确定了丢失的值，在下一节中，我们将讨论如何处理这些丢失的值。</p></div></div>    
</body>
</html>