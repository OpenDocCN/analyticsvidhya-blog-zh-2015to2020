<html>
<head>
<title>Mutable and immutable objects (py)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">可变和不可变对象(py)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/mutable-and-immutable-objects-py-efe79e5d2d39?source=collection_archive---------21-----------------------#2020-01-16">https://medium.com/analytics-vidhya/mutable-and-immutable-objects-py-efe79e5d2d39?source=collection_archive---------21-----------------------#2020-01-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div class="er es hg"><img src="../Images/65a91164c738f07c578071807b898639.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SA2kLebDYZi-C_1-GcSBHg.jpeg"/></div></figure><div class=""/><p id="4a4b" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这篇博客中，我将谈论python中可变对象和不可变对象之间的区别，这个主题非常重要，因为如果你理解了这种区别，你就可以在修改不同类型的数据时避免意外的行为。</p><p id="2a2b" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们从定义两件事开始，数据类型和变量的id，如果你以前有编程经验，你会知道存在不同类型的数据，比如int，float，str，你声明的每个变量都有一个唯一的id。</p><p id="dc76" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在Python解释器中，我们可以使用函数<strong class="io hq"> type() </strong>检查变量的数据类型，使用函数<strong class="io hq"> id() </strong>检查变量的唯一id:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="9344" class="jt ju hp jp b fi jv jw l jx jy"><strong class="jp hq">&gt;&gt;&gt; x </strong>= 10 <br/><strong class="jp hq">&gt;&gt;&gt; type</strong>(x)<br/>&lt;class 'int'&gt;<br/><strong class="jp hq">&gt;&gt;&gt; y </strong>= 10 <br/><strong class="jp hq">&gt;&gt;&gt; type</strong>(y)<br/>&lt;class 'float'&gt;<br/><strong class="jp hq">&gt;&gt;&gt; id</strong>(x)<br/>10105376<br/><strong class="jp hq">&gt;&gt;&gt; id</strong>(y)<br/>13990449964</span></pre><h1 id="50d5" class="jz ju hp bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">可变对象</h1><p id="2cca" class="pw-post-body-paragraph im in hp io b ip kw ir is it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj hb bi translated"><strong class="io hq">可变</strong>对象属于list、dict和set类型，这意味着这些类型的数据可以通过多种方式修改，让我们以数据列表的类型为例:</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="128c" class="jt ju hp jp b fi jv jw l jx jy"><strong class="jp hq">&gt;&gt;&gt; letters = ['a', 'b', 'c']</strong><br/><strong class="jp hq">&gt;&gt;&gt; letters[0] = 'z'<br/>&gt;&gt;&gt; letters[1] = 'y'<br/>&gt;&gt;&gt; letters<br/>['z', 'y', 'c']</strong></span></pre><p id="7389" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在前面的例子中，我们看到了如何使用索引修改列表，但是列表有多种方法，如append、extend、join。如果你想了解更多关于列表和它们的方法，使用下面的<a class="ae lb" href="https://docs.python.org/3/tutorial/datastructures.html" rel="noopener ugc nofollow" target="_blank">链接</a>。</p><h1 id="5323" class="jz ju hp bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">不可变对象</h1><p id="6fb1" class="pw-post-body-paragraph im in hp io b ip kw ir is it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj hb bi translated"><strong class="io hq"> </strong>上的<strong class="io hq">不可变</strong>相反是所有那些不允许任何类型修改的数据类型，一些不可变类型包括int、float、bool、string、tuple。</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="820e" class="jt ju hp jp b fi jv jw l jx jy"><strong class="jp hq">&gt;&gt;&gt; message = 'Holberton'</strong><br/><strong class="jp hq">&gt;&gt;&gt; message[0] = 'L'<br/></strong>Traceback (most recent call last):</span><span id="5942" class="jt ju hp jp b fi lc jw l jx jy">File "&lt;stdin&gt;", line 1, in &lt;module&gt;</span><span id="2fae" class="jt ju hp jp b fi lc jw l jx jy">TypeError: 'str' object does not support item assignment</span></pre><p id="8f91" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Python通过使引用同一个字符串值的两个名称引用同一个对象来优化资源。</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="c420" class="jt ju hp jp b fi jv jw l jx jy"><strong class="jp hq">&gt;&gt;&gt; message1 = 'Holberton'</strong><br/><strong class="jp hq">&gt;&gt;&gt; message2 = 'Holberton'<br/>&gt;&gt;&gt; message1 == message2</strong><br/>True<br/><strong class="jp hq">&gt;&gt;&gt; message1 is message2</strong><br/>True<br/></span></pre><h1 id="8bc6" class="jz ju hp bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">为什么对待可变和不可变对象很重要？</h1><p id="f82a" class="pw-post-body-paragraph im in hp io b ip kw ir is it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj hb bi translated">正如我在本文开头所解释的，处理可变和不可变对象很重要，因为我们可以避免意外行为，并理解Python如何在幕后优化资源</p><h1 id="0b64" class="jz ju hp bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated"><strong class="ak">参数如何传递给函数，这对可变和不可变对象意味着什么</strong></h1><p id="a43a" class="pw-post-body-paragraph im in hp io b ip kw ir is it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj hb bi translated">在Python中，参数总是通过引用传递给函数。调用者和函数共享同一个对象或变量。当我们在函数中改变一个函数参数的值时，无论参数或变量的名称如何，该变量的值在调用程序代码块中也会改变，这意味着当我们传递一个可变对象时，它可以在另一个函数中被修改，这与不可变对象相反</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="dcf0" class="jt ju hp jp b fi jv jw l jx jy">&gt;&gt;&gt; def increment(n):<br/>...   n += 1<br/>&gt;&gt;&gt; a = 1<br/>&gt;&gt;&gt; increment(a)<br/>&gt;&gt;&gt; print(a)<br/>a = 1  #keeps the same value</span></pre><p id="9db3" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">通过将函数的返回赋值给'<strong class="io hq"> a' </strong>，我们正在重新赋值给<strong class="io hq"> 'a' </strong>以引用一个具有新值的新对象</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="ba63" class="jt ju hp jp b fi jv jw l jx jy">&gt;&gt;&gt; def increment(n):<br/>...   n += 1<br/>...   return n<br/>&gt;&gt;&gt; a = 1<br/>&gt;&gt;&gt; a = increment(a)  <br/>&gt;&gt;&gt; print(a)<br/>a = 2  # 'a' refers to a new object with the new value</span></pre></div></div>    
</body>
</html>