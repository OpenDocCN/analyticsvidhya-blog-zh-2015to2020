<html>
<head>
<title>Co-occurrence networks with plotly</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">plotly共现网络</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/co-occurrence-networks-in-r-with-plotly-1d4354c463a4?source=collection_archive---------25-----------------------#2020-05-21">https://medium.com/analytics-vidhya/co-occurrence-networks-in-r-with-plotly-1d4354c463a4?source=collection_archive---------25-----------------------#2020-05-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/bc95b0e117084611f2f7c8819cdd824c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1HwYdXIGEex7NQzzVJgYsw.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">Ahmet Yal nkaya在<a class="ae iu" href="https://unsplash.com/s/photos/movies?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</figcaption></figure><p id="6b60" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">回到IMDb存在之前的日子(<em class="jt">我们是如何生活的？</em>)，以前人们玩电影琐事游戏。这些游戏中最著名的是凯文·贝肯六度。如果你不熟悉，这是一个游戏，你试图找到任何演员和凯文·贝肯之间最短的联系。</p><p id="8f6d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们来看一个不可思议的米拉·乔沃维奇的例子:米拉和威尔·法瑞尔一起出演了《超级名模2》。威尔·法瑞尔和约翰·利特高一起参加竞选，约翰·利特高和凯文·贝肯一起自由自在。那是三个步骤。你能打败它吗？</p><p id="b4f0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但是假设你想对这个游戏变得真正严肃。你不想猜测最短的连接，你需要知道它。嗯，如果你能构建一个所有电影和主演这些电影的所有演员的网络，那么你就能找到两个演员之间所有可能的最短路径。让我们用一个由一些非常有才华的女性组成的非常小的网络来尝试一下。我们将首先创建一个电影/演员关系的二分网络，然后使用二分网络的单模投影来可视化显示演员之间直接联系的同现网络。</p><h1 id="3a5d" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">演员和他们主演的电影</h1><p id="fd82" class="pw-post-body-paragraph iv iw hi ix b iy ks ja jb jc kt je jf jg ku ji jj jk kv jm jn jo kw jq jr js hb bi translated">二分网络是两种不同节点类型之间的关系或边的图形表示。为了检查演员和他们出演的电影之间的联系，一个节点类将代表演员，另一个节点类将代表他们主演的电影。对于一个二分网络来说，一条边只能在演员和电影之间运行，而不能从电影到电影或者从演员到演员。让我们从关联矩阵<strong class="ix hj"> <em class="jt"> I </em> </strong>生成一个图来表示一个二分网络。<strong class="ix hj"> <em class="jt"> I </em> </strong>中的每一行代表一部电影，每一列代表一个演员。</p><p id="84f0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://github.com/thatdarndata/BlogPosts/tree/master/SixDegrees" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hj">代码沿着</strong> </a> <strong class="ix hj">进行交互图形。你可以通过点击和拖动来移动节点！</strong></p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="91d4" class="lg jv hi lc b fi lh li l lj lk">library(igraph) <br/>library(visNetwork) </span><span id="2fa4" class="lg jv hi lc b fi ll li l lj lk"># Incident matrix to represent bipartite graph. <br/># Columns are actresses and rows are movies. <br/># 1: actress is in movie; 0: not in movie. <br/>I &lt;- matrix(c(1, 1, 0, 0, 0, 1, 1, 1, <br/>              0, 0, 0, 0, 1, 1, 0, 0, <br/>              0, 1, 1, 1), <br/>              nrow = 5) </span><span id="bd8c" class="lg jv hi lc b fi ll li l lj lk"># Name distinct node classes. <br/>colnames(I) &lt;- c("Queen Latifah", <br/>                 "Jada \n Pinkett Smith", <br/>                 "Mila Kunis", "Kristen Bell") <br/>rownames(I) &lt;- c("Set It Off", "Girls Trip", <br/>                 "Bad Moms", "Forgetting \n Sarah Marshall", <br/>                 "Frozen")</span><span id="7e54" class="lg jv hi lc b fi ll li l lj lk"># Converting incident matrix to visNetwork object. <br/>net &lt;- toVisNetworkData(graph_from_incidence_matrix(I)) </span><span id="3b48" class="lg jv hi lc b fi ll li l lj lk"># Use images in nodes. <br/>pathname &lt;- "https://raw.githubusercontent.com/thatdarndata/BlogPosts/master/Graphs/Pics/" <br/>net$nodes$image &lt;- paste0(pathname, 0:8, ".png") <br/>net$nodes$shape &lt;- c(rep("image", 5), <br/>                     rep("circularImage", 4)) </span><span id="85e4" class="lg jv hi lc b fi ll li l lj lk"># Plot. <br/>visNetwork(nodes = net$nodes, edges = net$edges) %&gt;%           visIgraphLayout(layout = "layout_as_bipartite") %&gt;% visNodes(shapeProperties = list(useBorderWithImage = TRUE), <br/>         color = list(border = "BDBDBD", background = "BDBDBD",   highlight = "BDBDBD")) %&gt;% <br/>visEdges(shadow = TRUE, color = list(color = "BDBDBD", highlight = "3D3D3D")) %&gt;% <br/>visOptions(highlightNearest = list(enabled = T, hover = T),    nodesIdSelection = T)</span></pre><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/bffe5ff944344221f4f3f977ed64bfef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vSt7yDm0g0BDhn6-Arq-YQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">双边演员电影网络。</figcaption></figure><h1 id="49ce" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">演员与演员的关系</h1><p id="f2e4" class="pw-post-body-paragraph iv iw hi ix b iy ks ja jb jc kt je jf jg ku ji jj jk kv jm jn jo kw jq jr js hb bi translated">现在，为了查看节点类中的关系<em class="jt">，我们可以使用二分网络的单模投影。例如，这将允许我们想象贾达·萍克特·史密斯和米拉·库妮丝一起出现在多少部电影中。在单模投影中，如果两个演员节点一起出演一部或多部电影，它们将有一条连接它们的边。数学上，这可以用矩阵来表示，<strong class="ix hj"> <em class="jt"> P </em> </strong>，其中<strong class="ix hj"> <em class="jt"> P = (I^T)I </em> </strong>。</em></p><p id="4d84" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">矩阵<strong class="ix hj"> <em class="jt"> P </em> </strong>的对角线代表每个演员主演的电影总数。非对角线代表每个演员对共享的共同电影的数量。我们现在将绘制单模投影，其中节点大小取决于每个演员主演的电影总数，边由每个演员对出演的电影数加权。</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="cc60" class="lg jv hi lc b fi lh li l lj lk"># Calculate weighted one-mode projection. <br/>P &lt;- t(I) %*% I </span><span id="1485" class="lg jv hi lc b fi ll li l lj lk"># Convert to visnetwork object. <br/>projNet &lt;- toVisNetworkData(graph_from_adjacency_matrix(P, weighted = TRUE, diag = FALSE, mode = 'undirected')) </span><span id="bcb7" class="lg jv hi lc b fi ll li l lj lk"># Add weights according to edge strength and node size according to diagonals. <br/>projNet$edges$width &lt;- projNet$edges$weight * 2 <br/>projNet$nodes$size &lt;- diag(P) * 10 </span><span id="e169" class="lg jv hi lc b fi ll li l lj lk"># Use images in nodes. <br/>projNet$nodes$image &lt;- paste0(pathname, 5:8, ".png") projNet$nodes$shape &lt;- "circularImage" </span><span id="57ac" class="lg jv hi lc b fi ll li l lj lk"># Plot. <br/>visNetwork(nodes = projNet$nodes, edges = projNet$edges) %&gt;% <br/>      visNodes(shapeProperties = list(useBorderWithImage = TRUE), <br/>      color = list(border = "BDBDBD", background = "BDBDBD", <br/>      highlight = "BDBDBD")) %&gt;% <br/>visEdges(color = list(color = "BDBDBD", highlight = "3D3D3D"))</span></pre><figure class="kx ky kz la fd ij er es paragraph-image"><div class="er es ln"><img src="../Images/89e15ff78be3cad489316964448a3ca5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/format:webp/0*PTZVqWGxVm70aGKu.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">我们的天才喜剧演员的单模式投影网络，或共现网络。</figcaption></figure><p id="0c84" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从图表中我们可以看到，贾达和克里斯汀出演的电影比米拉和奎恩·拉提法多(仅考虑二分网络，而不是他们的实际电影记录)。我们还可以看到，奎恩·拉提法只和贾达一起出演了一部电影，而没有和克里斯汀或米拉一起。也许一个坏妈妈客串女孩之旅2可以解决这个问题？！Jada拥有最多的连接数，因为她与网络中的每个人都有联系。然而，根据边缘权重，我们可以看到贾达与奎恩·拉提法一起主演的电影比米拉或克里斯汀更多。另一方面，克里斯汀和米拉一起出演的电影比贾达多。</p><p id="471c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们已经从一个小例子开始，<a class="ae iu" href="https://github.com/thatdarndata/BlogPosts/tree/master/SixDegrees" rel="noopener ugc nofollow" target="_blank">你能扩展这个网络以包括更多的电影和演员吗？爆笑的凯瑟琳·哈恩怎么样？</a></p></div><div class="ab cl lo lp gp lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="hb hc hd he hf"><p id="57f6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请务必关注更多类似的文章！</p><p id="3151" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">原载于2020年5月21日https://thatdarndata.com</em><em class="jt">T21</em><a class="ae iu" href="https://thatdarndata.com/6-degrees-of-talented-ladies/" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>