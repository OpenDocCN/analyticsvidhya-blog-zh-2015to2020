<html>
<head>
<title>How to Load Weather Data into Power BI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将天气数据加载到Power BI中</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-import-weather-data-into-power-bi-afccdd12c8f0?source=collection_archive---------0-----------------------#2020-02-12">https://medium.com/analytics-vidhya/how-to-import-weather-data-into-power-bi-afccdd12c8f0?source=collection_archive---------0-----------------------#2020-02-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="3e86" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我们将创建一个简单的包含天气历史数据的Power BI报告。重点是在Power BI中创建新的天气数据查询，然后为该查询创建参数。在这里，我们将创建一个简单的报告，并讨论一些用于显示天气数据的常见功能。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/5f5f92eb3361cb817d5519c97bf6cfd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yBeKZC906WXqTfYK99dAtw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">完成的电力BI报告，包括天气数据</figcaption></figure><h1 id="e3f7" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">创建天气数据查询</h1><p id="6160" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">我们将从在Power BI中创建天气数据查询开始。这将提供一个日期范围内所选位置的每日历史天气记录。</p><p id="e24a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了设置查询，我们将使用Power BI桌面工具。我们的天气来源将是<a class="ae kw" href="https://www.visualcrossing.com/weather-data" rel="noopener ugc nofollow" target="_blank">视觉交叉天气数据</a>。这个天气数据提供商提供基于网络的查询，包括天气历史数据和15天的天气预报。</p><p id="c95c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们的例子中，我们希望创建一个查询，检索指定数据范围内单个位置的每日历史天气记录。在后续步骤中，我们将在Power BI查询中添加参数，以设置位置、日期、测量单位等的值。</p><p id="8295" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一步是创建web查询请求URL。使用<a class="ae kw" href="https://www.visualcrossing.com/weather/weather-data-services" rel="noopener ugc nofollow" target="_blank">气象数据服务</a>页面，Visual Crossing提供了一个方便的创建工具，例如web查询。我们可以使用这个天气数据页面来创建历史天气数据定义请求，然后我们可以在浏览器中查看数据，以确保这就是我们所寻找的。一旦我们对浏览器中的数据感到满意，我们就可以创建一个基于web的URL版本的请求，使用Power BI Web查询来检索数据。</p><blockquote class="kx ky kz"><p id="6420" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">同样的技术可以用于将数据导入<a class="ae kw" rel="noopener" href="/@awigmore/how-to-load-weather-data-into-microsoft-excel-89d5d65567c0">微软Excel </a></p></blockquote><p id="8638" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是在美国佛罗里达州迈阿密创建2019年历史天气数据请求的结果:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es le"><img src="../Images/50905bb4a9246f56fa8b6a3c7ec956a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jQ1XLAtIVLOQd3Cnz8XQig.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">在网络浏览器中预览历史天气数据</figcaption></figure><p id="f7e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这种情况下，我们将数据限制为每日汇总(最高温度、总降雨量等)。如有必要，可提供每小时的数据。</p><p id="b6e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以看到浏览器中的数据正是我们希望集成到Power BI报告中的数据集，因此我们现在可以创建URL查询来检索相同的数据。我们点击工具中的“查询API”来显示查询:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lf"><img src="../Images/9c0b0df4572b43bb3833f40873de1c8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dYMBfs-nCU6DYYkA-45I4w.png"/></div></div></figure><p id="ea95" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以对查询进行格式化，以使用各种传输技术，包括GET或POST请求，甚至ODATA请求。所有这些都适用于Power BI数据查询，但是我们将重点关注简单的GET请求。</p><p id="7f39" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">原始请求看起来像:</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="9890" class="ll ju hi lh b fi lm ln l lo lp"><a class="ae kw" href="https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/weatherdata/history?goal=history&amp;aggregateHours=24&amp;startDateTime=2019-01-01T00%3A00%3A00&amp;endDateTime=2019-12-31T00%3A00%3A00&amp;collectStationContributions=false&amp;maxStations=-1&amp;maxDistance=-1&amp;includeNormals=false&amp;shortColumnNames=false&amp;sendAsDatasource=false&amp;allowAsynch=false&amp;contentType=csv&amp;unitGroup=us&amp;key=KPYNQ6AWUDJE9AFERDCHJHSXK&amp;locations=Miami%2C%20FL" rel="noopener ugc nofollow" target="_blank">https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/weatherdata/history?goal=history&amp;aggregateHours=24&amp;startDateTime=2019-01-01T00%3A00%3A00&amp;endDateTime=2019-12-31T00%3A00%3A00&amp;collectStationContributions=false&amp;maxStations=-1&amp;maxDistance=-1&amp;includeNormals=false&amp;shortColumnNames=false&amp;sendAsDatasource=false&amp;allowAsynch=false&amp;contentType=csv&amp;unitGroup=us&amp;key=KPYNQ6AWUDJE9AFERDCHJHSXK&amp;locations=Miami%2C%20FL</a></span></pre><p id="0270" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们来看看这个请求的细节。为了简单起见，让我们删除可选的参数，我们还解码一些非字母数字字符，如':'。最后，添加一些格式，使每个参数都在一行上，这样更容易阅读。</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="7a82" class="ll ju hi lh b fi lm ln l lo lp"><a class="ae kw" href="https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/weatherdata/history?goal=history&amp;aggregateHours=24" rel="noopener ugc nofollow" target="_blank">https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/weatherdata/history?<br/>&amp;aggregateHours=24</a><br/>&amp;startDateTime=2019-01-01T00:00:00<br/>&amp;endDateTime=2019-12-31T00:00:00<br/>&amp;contentType=csv<br/>&amp;unitGroup=us<br/>&amp;key=YOUR_API_KEY<br/>&amp;locations=Miami,FL</span></pre><p id="18c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这一要求的主要参数是:</p><p id="2b6b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> aggregatehours </strong>是每个历史时段的小时数，因此aggregatehours=24是历史记录的每日时间摘要。将此值设置为1将产生每小时的记录。</p><p id="6ad5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">开始日期时间和结束日期时间</strong>是我们想要的数据的开始和结束时间。我们已经指定了1月1日到12月31日的开始时间。</p><p id="e48b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">内容类型</strong>是我们将接收的数据的格式。在这种情况下，我们保留了逗号分隔值(CSV)格式，非常适合导入到Power BI(和Excel等)中。</p><p id="592f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">单位组</strong>是我们希望接收的数据的测量单位。例如,“美国”将温度设定为华氏温度，将距离设定为英里，而“公制”则设定为英里；将温度设置为摄氏度，距离设置为千米。</p><p id="8230" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">键</strong>是API键，将在天气服务页面自动填充。</p><p id="5033" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">位置</strong>是您需要天气数据的位置列表。在本例中，我们指定了佛罗里达州的迈阿密。我们可以通过用“|”(竖线)字符分隔来指定多个位置。我们也可以使用纬度和经度值。</p><p id="31a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想要可用参数的完整列表及其描述，请查阅<a class="ae kw" href="https://www.visualcrossing.com/weather-api" rel="noopener ugc nofollow" target="_blank"> Weather API </a>文档。</p><h1 id="3adc" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">添加Power BI Desktop Web查询</h1><p id="ade9" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">我们现在可以在Power BI Desktop中输入参数来检索天气数据。</p><p id="3aa9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要创建基本查询，请从主页功能区栏中选择“获取数据”，然后选择“Web”。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lq"><img src="../Images/d74b728067bc7229faf0c8bc790ee2d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:792/format:webp/1*rzIOtNyvXLTaR31lkIGaIg.png"/></div></figure><p id="77ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于第一个查询，我们将直接从天气数据查询构建器页面将静态请求添加到文本定义中。然后，我们将在下一节中添加参数。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lr"><img src="../Images/62ce2e5125854f75ad97806ee0efcc34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AU9zr6SzuGB6vhKzvBZ7Vw.png"/></div></div></figure><p id="b38b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">只要我们点击“确定”，Power BI就会检索数据并显示预览:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ls"><img src="../Images/6ff51535c836a6cda0f286a809782e4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4_zinU8VndKQuPbUEO7PYA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">Power BI中天气历史数据的预览</figcaption></figure><p id="8360" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以看到Power BI在解释从天气数据服务中检索的CSV数据方面做得非常好。我们可以点击“加载”将数据加载到Power BI中。过了一会儿，历史天气数据记录中的字段已填充完毕，我们可以开始创建报告了。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lt"><img src="../Images/eebd08098b5cd429295e83b6b6cd3840.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/format:webp/1*6dVn9fqQnrws0juJ11JaXg.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">Power BI桌面中填充的历史天气数据字段</figcaption></figure><h1 id="7f9c" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">我们的第一张天气数据图表——每日气温</h1><p id="11f9" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">在我们继续向查询添加参数之前，让我们向报表添加第一个图表。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lu"><img src="../Images/b40bb214c29b08b563515966f3114e2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*BNgx9fO8-HgpcqIpumsvww.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">在功率BI图表中按天计算的最高和最低温度</figcaption></figure><p id="77d4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是图表定义。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lv"><img src="../Images/9b55a2ee69cb58130e5aced3031f9c9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:494/format:webp/1*1Gm6vl-zF-IoOa9gJwm5oQ.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">最高和最低温度图表的定义</figcaption></figure><p id="e92c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们选择了一个使用最大和最小温度场作为值(y轴)的折线图。日期时间字段用于x轴。请注意，我们将温度值的默认聚合从总和更改为平均值:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lw"><img src="../Images/387e478dba14f311cb735decc768ba19.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/format:webp/1*5VhopqHE66gsvPoZEJDTiA.png"/></div></figure><p id="954d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们这样做是因为如果我们将日水平数据更改为周、月、季度，则“温度总和”的意义很小。温度通常由平均值(即算术平均值)、最大值或最小值函数来概括。</p><p id="8f80" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，我可能对一月份的正常高温(平均值)、一月份的最高温度(最大值)或一月份的最低温度(最小值)感兴趣。我们不太可能想知道一月份的所有温度总和是200华氏度！</p><p id="d9e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完成查询参数后，当我们返回到报告编辑时，我们将查看报告图表的更多功能。</p><h1 id="1143" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">向数据查询添加参数</h1><p id="862e" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">在上一节中，我们创建了一个固定的天气数据查询，以检索2019年佛罗里达州迈阿密的历史天气数据。为了使这一点真正有用，我们需要向查询添加一些参数，以便我们可以更改位置、年份或查询的任何其他部分。</p><p id="3d63" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为此，我们从Power BI Desktop中打开Power Query中的现有查询:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lx"><img src="../Images/a6b51443afa90ef26ca191ba1cfab9ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BInteTRNrWLdlWY-zIdMBQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">电力查询中已有的气象数据查询</figcaption></figure><p id="4fa3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在新功能区中，选择“管理参数”并创建新参数:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ly"><img src="../Images/2c53675a550ff86add05c34e66332d7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*Ji2xQ8O5DW9Ki_WlESRszw.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">创建新参数</figcaption></figure><p id="13b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的第一个参数将允许用户设置天气数据的位置。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lz"><img src="../Images/dda2d9a21417f4dfd081267074307e8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*hiJ1Q2Ay22GDt9eS7Dfd9A.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">创建位置查询参数</figcaption></figure><p id="c311" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们指定参数的名称(位置)，将类型设置为“text ”,并且该参数是一个自由格式的文本条目。最后，我们添加一个默认值“纽约州纽约市”。</p><p id="21ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我们点击OK时，不会发生什么。我们必须在查询中使用这个参数，以便用参数值刷新数据。</p><p id="762b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为此，我们使用“数据源设置”功能区按钮编辑我们的查询。当我们打开当前查询时，我们会看到基本的硬编码URL:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ma"><img src="../Images/ac191506f418393f6591c461cc457303.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bREW29U5kPTLEgsA0P4ArQ.png"/></div></div></figure><p id="974f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们将类型从“基本”切换到“高级”，我们可以开始使用我们的参数:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mb"><img src="../Images/dad9506b79fe8c6ed3452322c8b481e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*2icHHSgvnVKjI84XBPkK7w.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">高级查询格式允许我们使用我们的参数</figcaption></figure><p id="22ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们现在可以看到，URL将由一系列部分组成。我们从第一个URL中取出&amp;locations=Miami，FL，并将其分成两个新的部分—硬编码的' &amp;locations= '和参数值。</p><p id="c891" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们添加一个新部件，将类型保留为文本。在值中，我们添加了' &amp;locations= '</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mc"><img src="../Images/b5711b8aedbef9646e73ba1b8e221e0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*VeM5ipaFQO9hmUq7gSNaOg.png"/></div></figure><p id="aafb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我们添加另一个零件，将类型更改为参数，并选择现有的“位置”参数。</p><p id="b906" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果在按下“确定”后，我们再按下“刷新预览”，网络查询将使用参数默认值“纽约州纽约市”重新运行。</p><p id="e541" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我们可以使用参数来动态更新位置。因此，如果我们能进入“法国巴黎”</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es md"><img src="../Images/67cbb0f9983cf1f89210ca854a43430d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3fpoi8Nn5PiNUKwkphTD9g.png"/></div></div></figure><p id="448e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我们按“确定”然后“刷新查询”时，我们会看到法国巴黎的天气历史。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es me"><img src="../Images/54c0092ae1f10d373326570232cdbc10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tIn_QRV4g8lz7lIwY-YWBg.png"/></div></div></figure><p id="5fcc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">总之，我们将原始web查询URL分成五个参数。位置、键、单位组和日期范围。这将允许用户更改他们感兴趣的数据的位置和日期范围。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mf"><img src="../Images/2fbbba7531a7809e0865ec60e1389203.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*JoY73Up7NbsY16HKiX7ZRQ.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">天气数据网络查询的五个参数</figcaption></figure><p id="ef55" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们现在有一套很好的历史天气数据。让我们创建一个基本报告来展示这一点。</p><h1 id="d20c" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">创建电源BI报告</h1><p id="70d1" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">在我们简单的历史天气数据报告中，我们有几个元素:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mg"><img src="../Images/425f9efae30bea64aef3a3156305b855.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U_2oSEH2fSuR2dXmB4Xhqg.png"/></div></div></figure><p id="9029" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">位置(“佛罗里达州迈阿密”)显示为一张卡片。这允许我们显示来自天气数据的动态数据值。</p><p id="94ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我们有一组四个KPI来突出显示所选时间段的一些有趣的天气事实——最高和最低温度、总降雨量以及经历降雨的天数。</p><p id="d7b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">KPI的定义非常简单:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mh"><img src="../Images/c5183e26bbbfd631add84e5766c5396c.png" data-original-src="https://miro.medium.com/v2/resize:fit:388/format:webp/1*TczaanHcYsjNcEBd76LC2g.png"/></div></figure><p id="991c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们使用最高温度的最大值作为指标，然后日期时间年作为趋势。我们不增加目标。然后我们修改字体大小和颜色。</p><p id="e69d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最低温度、降雨量和降雨天数KPI以类似的方式添加。</p><p id="83c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们已经在上一节中查看了温度值图表。我们可以使用折线图和柱形图以类似的方式创建风压图表</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mi"><img src="../Images/762b6448960d6c7b50e3e5d8b7400399.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/format:webp/1*gbCjpk__GGNgn7quuGtEhQ.png"/></div></div></figure><p id="628b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在此图表中，线条显示压力，条形显示温度:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mj"><img src="../Images/1bdca1374de140a8508060f2bb02f435.png" data-original-src="https://miro.medium.com/v2/resize:fit:412/format:webp/1*_47G8aTYQTgmQbv8Xpi5kw.png"/></div></figure><p id="88e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在最后一行中，我们有两个显示降雨量的元素和一个显示我们用于数据的位置的地图。</p><p id="22f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">年初至今的降雨量图表，显示全年的总降雨量。这种方法清楚地显示了一年的总降雨量(在这种情况下为60英寸)，以及降雨量多的日子(图表急剧上升)和降雨量少的时候(图表保持平稳)。</p><p id="ad85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这种情况下，我们可以看到迈阿密在夏季的几个月里降雨量很大。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mk"><img src="../Images/9bfbfd3537df89185441fb838c17fcbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*-U1ZcOfrhVmDMEMYMZzUHg.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">累积雨量图</figcaption></figure><p id="9084" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">累积降雨量是一个简单的单元素堆积柱形图。我们不想显示每天的降雨量，而是想显示从年初开始的累积量。为此，我们创建了一个定义年初至今值的新标准:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ml"><img src="../Images/3491f4eb9c35aef61ab076b4ff70b2ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:384/format:webp/1*w3IFd0UphadDOr8ntcZ0eg.png"/></div></figure><p id="9ddf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">做到这一点最简单的方法是通过一个快速测量，它有助于引导我们找到年初至今测量的正确字段:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mm"><img src="../Images/a80be2d85597af1fbd3b8b6417cd3788.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N7jsTvsPecp0cEKPcnJeyA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">创建年初至今的降雨量测量</figcaption></figure><p id="354a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我们在图表中使用新的衡量标准</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mn"><img src="../Images/24b8dc0fd4d95dc9e5e37659781c5d67.png" data-original-src="https://miro.medium.com/v2/resize:fit:380/format:webp/1*3cjl8kn9_EZeNBj9crCevg.png"/></div></figure><p id="df02" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们报告的最后一个元素是显示所需天气数据位置的地图。</p><p id="91a7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">地图使用作为天气数据查询的一部分返回的经度和纬度值来显示地图上的点:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mo"><img src="../Images/e2d4bf73b358e996d3b9ab3e0491861d.png" data-original-src="https://miro.medium.com/v2/resize:fit:394/format:webp/1*soEP1dnkHj9ds9OAr2OH_g.png"/></div></figure><p id="ed26" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Power BI Desktop中，我们有简单的历史天气数据报告。最后一步是将它发布到天气预报中，这样我们就可以在我们最喜欢的网络浏览器中欣赏这份报告了。</p><h1 id="109d" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">将报告发布到网上的Power BI</h1><p id="adcb" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">要发布报告，请点击“发布”按钮:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mp"><img src="../Images/1d3e484f41779f00b70d5ed61c8368aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:128/format:webp/1*Q4Ggh0PNnnw1ZDd3QakIMg.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">点击发布，将报告共享到web上</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mq"><img src="../Images/941d9899bfce34c589020cec90dd28ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*iC6uMGDWuA0LS-gFp_FEhQ.png"/></div></figure><p id="0c9b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这种情况下，我们将把报告发布到我们自己的工作空间。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mr"><img src="../Images/ac11bf32c9d8c8b99ee9fb38cbd14ebe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MITKpchcNsQm32uTE_mE2w.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">用于web的Power BI中的最终天气数据报告</figcaption></figure><h1 id="99c4" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">更改Power BI中的参数值</h1><p id="a0e5" class="pw-post-body-paragraph if ig hi ih b ii kr ik il im ks io ip iq kt is it iu ku iw ix iy kv ja jb jc hb bi translated">最后一步是选择不同的位置。为此，我们必须修改我们在查询中指定的参数值。可以在“我的工作区”下的数据集中修改参数</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ms"><img src="../Images/55e0a88b5df68bd26d3f16ea15c830d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LTyp7ZKx9xkIRirS8tOuhQ.png"/></div></div></figure><p id="49c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">修改数据集的设置会带来参数集:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mt"><img src="../Images/29fdf4699a8271606bc74807b46bba93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2GLgngeGkvhpTJWe1fDyVQ.png"/></div></div></figure><p id="f79d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以在这里修改位置。我们把它改成英国伦敦吧</p><p id="048e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在应用新的查询参数值后，我们可以返回到中的数据集列表并点击刷新。然后，我们会在报告中看到新数据</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mu"><img src="../Images/5b54042d3ac192d2f58f51335c354a95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2oSFHoAJS8aNt3NauSpOmQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">具有新位置的报告</figcaption></figure><p id="e302" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们在本文中已经看到，我们可以轻松地将天气数据添加到Power BI报告和仪表板中。我们找到了一个很好的天气API源，可以通过Power BI Web查询访问它。从那以后，创建一个好看的历史天气数据报告就变得简单了。</p><p id="329f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">天气预报怎么样？在我的下一篇文章中，我们将使用这里使用的技术来检索天气预报，并创建一个漂亮的天气图！</p></div></div>    
</body>
</html>