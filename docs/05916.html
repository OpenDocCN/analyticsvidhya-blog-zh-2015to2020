<html>
<head>
<title>All you Should Know About Datetime Variables in Python and Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于Python和Pandas中的日期时间变量，您应该知道的是</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/all-you-should-know-about-datetime-variables-in-python-and-pandas-d1081b65668f?source=collection_archive---------25-----------------------#2020-05-05">https://medium.com/analytics-vidhya/all-you-should-know-about-datetime-variables-in-python-and-pandas-d1081b65668f?source=collection_archive---------25-----------------------#2020-05-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="ac16" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">数据科学中复杂而强大的日期时间世界</h1><p id="a416" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我仍然记得我在学习Python时遇到的第一个DateTime变量。这是一个电子商务项目，我必须弄清楚供应链——订单发货所需的时间，订单交付所需的天数等。从数据科学的角度来看，这是一个非常有趣的问题。</p><p id="c396" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">问题是——我不熟悉如何提取和使用Python中的日期和时间组件。</p><p id="89c2" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">DateTime特性增加了复杂性，这是一个数字变量中没有的额外层。掌握这些日期时间特性将有助于您成为一名更好(更高效)的数据科学家。绝对是帮了我大忙！</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kg"><img src="../Images/c800846a55c940512627001bdd707945.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*m1drLU28RaDNsEZY.jpg"/></div></div></figure><p id="5654" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">日期和时间特性在数据科学项目中无处不在。想想看，它们是有价值信息的丰富来源，因此，可以对手头的任何数据集提供一些深刻的见解。此外，当我们执行特征工程时，它们所提供的灵活性是无价的！</p><p id="0554" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在本文中，我们将首先看看如何用<strong class="jf hj"> Python的<em class="ks"> DateTime </em>模块</strong>处理日期和时间特性，然后我们将探索<strong class="jf hj"> Pandas的</strong>功能来实现同样的功能！</p><p id="d9e0" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">注意:我假设你熟悉Python和Pandas库。如果没有，我强烈推荐参加下面的免费课程:</p><ul class=""><li id="b0b9" class="kt ku hi jf b jg kb jk kc jo kv js kw jw kx ka ky kz la lb bi translated"><a class="ae lc" href="https://courses.analyticsvidhya.com/courses/python-data-science-course?utm_source=blog&amp;utm_medium=datetime-variables-python-pandas" rel="noopener ugc nofollow" target="_blank"> <em class="ks">用于商业分析和数据科学的Python</em></a></li><li id="8370" class="kt ku hi jf b jg ld jk le jo lf js lg jw lh ka ky kz la lb bi translated"><a class="ae lc" href="https://courses.analyticsvidhya.com/courses/pandas-for-data-analysis-in-python?utm_source=blog&amp;utm_medium=datetime-variables-python-pandas" rel="noopener ugc nofollow" target="_blank"> <em class="ks">用Python进行数据分析的熊猫</em> </a></li></ul><h1 id="6ace" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">目录</h1><p id="a016" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">I)日期-时间部分的重要性</p><p id="04be" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">ii)在Python中处理日期</p><p id="e514" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">iii)在Python中处理时间</p><p id="3f4c" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">iv)Python中的日期时间</p><ul class=""><li id="a6bd" class="kt ku hi jf b jg kb jk kc jo kv js kw jw kx ka ky kz la lb bi translated">更新旧日期</li><li id="4c6b" class="kt ku hi jf b jg ld jk le jo lf js lg jw lh ka ky kz la lb bi translated">从日期时间中提取工作日</li><li id="4a54" class="kt ku hi jf b jg ld jk le jo lf js lg jw lh ka ky kz la lb bi translated">这是星期几？</li><li id="94f5" class="kt ku hi jf b jg ld jk le jo lf js lg jw lh ka ky kz la lb bi translated">闰年不闰年？用日历！</li><li id="9f39" class="kt ku hi jf b jg ld jk le jo lf js lg jw lh ka ky kz la lb bi translated">不同的日期时间格式</li><li id="5157" class="kt ku hi jf b jg ld jk le jo lf js lg jw lh ka ky kz la lb bi translated">使用Strptime &amp; Strftime的高级日期时间格式</li><li id="4dac" class="kt ku hi jf b jg ld jk le jo lf js lg jw lh ka ky kz la lb bi translated">时间增量</li></ul><p id="a34d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">v)熊猫的日期时间</p><ul class=""><li id="770a" class="kt ku hi jf b jg kb jk kc jo kv js kw jw kx ka ky kz la lb bi translated">熊猫中的DateTime和Timedelta对象</li><li id="b88c" class="kt ku hi jf b jg ld jk le jo lf js lg jw lh ka ky kz la lb bi translated">熊猫的日期范围</li><li id="140e" class="kt ku hi jf b jg ld jk le jo lf js lg jw lh ka ky kz la lb bi translated">在Pandas中创建日期时间要素</li></ul><h1 id="5149" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">日期-时间组件的重要性</h1><p id="d6cd" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">值得重申的是，日期和时间是信息的宝库，这也是数据科学家如此喜爱它们的原因。</p><p id="5de4" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在我们深入文章的核心之前，我想让你亲自体验一下。看看现在的日期和时间。试着想象你能从中提取的各种信息，了解你的阅读习惯。年、月、日、小时和分钟是常见的疑点。</p><p id="1bed" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">但是如果你再深入一点，你就可以确定你是更喜欢在工作日还是周末看书，你是一个早起的人还是一个夜猫子(我们在这里是一条船上的！)，或者说你是不是积累了所有月底要看的有趣文章！</p><p id="c402" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">显然，如果你在收集数据一段时间后，比如一个月，重复这个练习，这个列表会继续下去，你会逐渐了解你的阅读习惯。现在想象一下，在长时间收集信息的真实场景中，这个特性会有多有用。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es li"><img src="../Images/70bf5f22a1228633a6278ec93ab1506d.png" data-original-src="https://miro.medium.com/v2/resize:fit:518/format:webp/0*9GerEBEf7r7g1FiL.jpeg"/></div></figure><p id="b04a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">日期和时间功能在数据科学问题中非常重要，这些问题涉及从销售、营销和金融到人力资源、电子商务、零售等多个行业。预测明天的股票市场将如何表现，在接下来的一周将售出多少产品，何时是推出新产品的最佳时间，公司的一个职位多久会被填补，等等。使用日期和时间数据，我们可以找到一些问题的答案。</p><p id="0c29" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">您可以从数据中发现的难以置信的洞察力使日期和时间组件变得如此有趣！因此，让我们开始掌握Python中的日期时间操作。</p><h1 id="a184" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">在Python中处理日期</h1><p id="d721" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">Python的<a class="ae lc" href="https://docs.python.org/3/library/datetime.html#module-datetime" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj"> DateTime </strong> </a>模块中的<strong class="jf hj"> date </strong>类处理公历中的日期。它接受三个整数参数:年、月和日。让我们来看看它是如何做到的:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ll"><img src="../Images/127469a851b5dc86d098a085eaf99bc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/format:webp/0*wOQgH9AnRyvie7QW.png"/></div></figure><p id="f917" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">您可以看到创建一个<strong class="jf hj"> datetime </strong>类的日期对象是多么容易。从日期中提取日、月、年等特征甚至更容易。这可以使用<strong class="jf hj">日</strong>、<strong class="jf hj">月</strong>和<strong class="jf hj">年</strong>属性来完成。我们将看到如何在当前的本地日期对象上实现这一点，我们将使用<strong class="jf hj"> today() </strong>函数创建该对象:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lm"><img src="../Images/9e3e26e7758f03a5e4b2c541dec67ca2.png" data-original-src="https://miro.medium.com/v2/resize:fit:224/format:webp/0*dg3ytnx_W1_rt6to.png"/></div></figure><h1 id="e2c6" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">在Python中处理时间</h1><p id="ad7b" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><a class="ae lc" href="https://docs.python.org/3/library/datetime.html#datetime.time" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj"> time </strong> </a>是DateTime模块的另一个类，它接受最长为微秒的整数参数，并返回一个DateTime对象:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ln"><img src="../Images/a20478667fa1b2fa3bc8ace8c28cd8b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:444/format:webp/0*QRlkt0GYnQqYRObM.png"/></div></figure><p id="85a4" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">您可以使用各自的属性从时间对象中提取类似于<strong class="jf hj">小时</strong>、<strong class="jf hj">分钟</strong>、<strong class="jf hj">秒</strong>和<strong class="jf hj">微秒</strong>的特征。这里有一个例子:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lo"><img src="../Images/c0242da27e9fb44b24f35a058479a001.png" data-original-src="https://miro.medium.com/v2/resize:fit:316/format:webp/0*LF4hHWYduyJGXbEP.png"/></div></figure><p id="c183" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这只是冰山一角。在Python中，我们可以利用DateTime特性做更多的事情，这就是我们将在下一节讨论的内容。</p><h1 id="22ef" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">Python中的日期时间</h1><p id="b079" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">到目前为止，我们已经看到了如何使用DateTime模块创建日期和时间对象。但是DateTime模块的美妙之处在于它允许您将这两个属性结合到一个对象中，<strong class="jf hj"> DateTime </strong>！</p><p id="cdc3" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><a class="ae lc" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj"> datetime </strong> </a>是Python的<em class="ks"> DateTime </em>模块中的一个类和对象，就像日期和时间一样。参数是日期和时间属性的组合，从年开始，以微秒结束。</p><p id="ab92" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">那么，让我们看看如何创建一个<strong class="jf hj">日期时间</strong>对象:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lp"><img src="../Images/f812f82168cec28b0f3f11ce84c78136.png" data-original-src="https://miro.medium.com/v2/resize:fit:528/format:webp/0*NFrb41uJIJ30iKDC.png"/></div></figure><p id="69d9" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">或者您甚至可以使用<strong class="jf hj"> now() </strong>方法在本地日期和时间创建一个对象:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lq"><img src="../Images/122931f600c21cdded7e1d8c8cadbb8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/0*2DZhsi2QxKH4rS6L.png"/></div></figure><p id="f811" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">您可以继续从DateTime对象中提取您想要的任何值，方法是使用我们分别用于date和Time对象的相同属性。</p><p id="2781" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">接下来，让我们看看DateTime类中的一些方法。</p><h1 id="c689" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">更新旧日期</h1><p id="0624" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">首先，我们将看到如何使用<strong class="jf hj"> date() </strong>和<strong class="jf hj"> time() </strong>方法将日期和时间从DateTime对象中分离出来。但是您也可以使用<strong class="jf hj"> replace() </strong>方法替换DateTime对象中的值，而不必更改整个日期:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lr"><img src="../Images/faeacfd67497f8d9a98f9845acb52fe7.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/format:webp/0*HqdSSW33f_prbqrp.png"/></div></figure><h1 id="79d5" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">日期时间中的工作日</h1><p id="854a" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">用DateTime函数可以做的一件很酷的事情是提取一周中的某一天！这在特征工程中特别有用，因为目标变量的值可能依赖于一周中的某一天，例如产品的销售通常在周末较高，或者在人们工作的工作日，StackOverflow的流量可能较高，等等。</p><p id="e862" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj"> weekday() </strong>方法返回一周中某一天的整数值，其中星期一为0，星期日为6。但是如果您希望它返回1到7之间的工作日值，就像在现实世界中一样，您应该使用<strong class="jf hj"> isoweekday() </strong>:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ls"><img src="../Images/678978735a34cdda5958c8d2b1deede4.png" data-original-src="https://miro.medium.com/v2/resize:fit:220/format:webp/0*_-jSBHFFLil-yorx.png"/></div></figure><h1 id="a34c" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">这是星期几？</h1><p id="0544" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">好吧，你知道星期几，但是你知道今天是一年中的第几周吗？这是另一个非常重要的特性，您可以从数据集中的给定日期生成。</p><p id="2c56" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">有时，目标变量的值在一年中的某些时候可能会更高。比如假期，电商网站上的产品销量普遍较高。</p><p id="0da5" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">通过对由<strong class="jf hj"> isocalendar() </strong>方法返回的值进行切片，可以得到一年中的星期:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lt"><img src="../Images/f14e7096c6a56808c981ed2e6e4652e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:252/format:webp/0*CyuHOvbo88M14vKr.png"/></div></figure><h1 id="8913" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">闰年不闰年？使用日历！</h1><p id="e002" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">想查一下是不是闰年？您需要使用来自<a class="ae lc" href="https://docs.python.org/3/library/calendar.html#module-calendar" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj">日历</strong> </a>模块的<strong class="jf hj"> isleap() </strong>方法，并将年份作为属性传递:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><p id="daba" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">恭喜你——你生活在闰年！额外的一天你做了什么？哦，你错过了？放心吧！这个月花一天时间做你喜欢的事情吧！但是你要去哪里？你的日历就在这里！</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lu"><img src="../Images/d29be023c0776f177db9d16ed996da8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:410/format:webp/0*HNcSHODePgK0yonq.png"/></div></figure><p id="16cd" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这个月没空？您可以查看全年的日历:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lv"><img src="../Images/4867153c0c13f1a6c9e30cf6015655cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/0*FULQfBzAjQKXwVC2.png"/></div></figure><p id="d355" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">很酷，对吧？明智地规划你的一年，抽出一些时间做你喜欢的事情！</p><h1 id="82e9" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">日期时间格式</h1><p id="0fd8" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jf hj">日期时间</strong>模块允许您在几个选项之间交换日期时间的格式。</p><p id="6e8d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">首先是ISO格式。如果您想从ISO格式的日期的字符串形式创建DateTime对象，请使用<strong class="jf hj"> fromisoformat() </strong>方法。如果你打算反过来做，使用<strong class="jf hj"> isoformat() </strong>方法:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lw"><img src="../Images/1d4fa3991b8499ce1cdb084f73429738.png" data-original-src="https://miro.medium.com/v2/resize:fit:392/format:webp/0*Kf8DxnN-ol-jNNt8.png"/></div></figure><p id="c543" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">如果想将DateTime转换成字符串格式，可以使用<strong class="jf hj"> ctime() </strong>方法。这将返回字符串格式的日期。如果您想从中提取日期，那么您必须使用切片:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lx"><img src="../Images/85225dccc2ecb5f8cde45b31faa344b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/0*Mo0SgN7-hoY0tAGO.png"/></div></figure><p id="7d3b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">如果这些函数都不符合您的要求，您可以使用<strong class="jf hj"> format() </strong>方法，该方法允许您定义自己的格式:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lm"><img src="../Images/16a87d5a14c905068eb120e39a888aaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:224/format:webp/0*8sdAzs7PF5QVdBBF.png"/></div></figure><p id="5438" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">等等，我传递给函数的参数是什么？这些被称为格式化字符串代码，我们将在下一节详细讨论它们。</p><h1 id="dcec" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">使用Strptime &amp; Strftime的高级日期时间格式</h1><p id="a534" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">这些函数非常重要，因为它们允许您显式定义DateTime对象的格式。这可以为您处理日期时间特性提供很大的灵活性。</p><p id="1dbd" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj"> strptime() </strong>从表示日期和时间的字符串创建DateTime对象。它需要两个参数:日期和日期呈现的格式。请看下面:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ly"><img src="../Images/885e49b39b5c87554977c64063280ade.png" data-original-src="https://miro.medium.com/v2/resize:fit:456/format:webp/0*IKF4apXNT9tgVT3r.png"/></div></figure><p id="3d3b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">你可以像我上面做的那样使用格式化代码来定义格式。有许多格式化代码，你可以在<a class="ae lc" href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes" rel="noopener ugc nofollow" target="_blank">文档</a>中查看。</p><p id="0b4b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">另一方面，<strong class="jf hj">STFT time()</strong>方法可用于将DateTime对象转换为表示日期和时间的字符串:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lz"><img src="../Images/35ccb8d17b4851a308213493d877b80b.png" data-original-src="https://miro.medium.com/v2/resize:fit:722/format:webp/0*gcRGaxN3lUw5Z50N.png"/></div></figure><p id="1855" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">但是您也可以从DateTime对象中提取一些重要的信息，如星期名称、月份名称、周数等。正如我们在前面几节中看到的那样，这在特性方面非常有用。</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ma"><img src="../Images/c5a7325e066c9e84f27378265b9eae81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/format:webp/0*oGwXNom0-Fi7W-pG.png"/></div></figure><h1 id="55e5" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">时间增量</h1><p id="fce4" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">到目前为止，我们已经了解了如何创建DateTime对象以及如何对其进行格式化。但有时，您可能需要找到两个日期之间的持续时间，这是您可以从数据集获得的另一个非常有用的功能。然而，这个持续时间作为一个<a class="ae lc" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hj">时间增量</strong> </a>对象返回。</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es mb"><img src="../Images/ea5ea29039bc8626d48076e708fa0ae0.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*lSpUno9KgcLsR_g2.png"/></div></figure><p id="26cb" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">如您所见，持续时间以日期的天数和日期之间的秒数返回。因此，您实际上可以为您的要素检索这些值:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><p id="f970" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">但是，如果您真的想要以小时或分钟为单位的持续时间呢？嗯，有一个简单的解决办法。</p><p id="e2d7" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj"> timedelta </strong>也是DateTime模块中的一个类。所以，你可以用它来把你的持续时间转换成小时和分钟，就像我下面做的那样:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es mc"><img src="../Images/4437d1075847609e73ece68177cdfb47.png" data-original-src="https://miro.medium.com/v2/resize:fit:536/format:webp/0*wsPuXkjwXPhccQKf.png"/></div></figure><p id="ce6f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">现在，如果你想得到5天后的日期呢？你只是在现在的日期上加5吗？</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es md"><img src="../Images/ca1220622269febfa594d8d642dce303.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/0*lCgC8whKc9r6GnDr.png"/></div></figure><p id="4e2e" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">不完全是。那么你该如何着手呢？你当然使用时间增量！</p><p id="4ff3" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">timedelta使得从DateTime对象中加减整数成为可能。</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es me"><img src="../Images/15762f129658f23ade335cc523babadd.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/0*8IlP1WXVuZoa0jut.png"/></div></div></figure><h1 id="c74c" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">熊猫的日期时间</h1><p id="e757" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们已经知道<a class="ae lc" href="https://www.analyticsvidhya.com/blog/2016/01/12-pandas-techniques-python-data-manipulation/?utm_source=blog&amp;utm_medium=datetime-variables-python-pandas" rel="noopener ugc nofollow" target="_blank"> Pandas </a>是一个很棒的用于数据分析任务的库。因此不言而喻，Pandas也支持Python日期时间对象。它有一些处理日期和时间的好方法，比如<strong class="jf hj"> to_datetime() </strong>和<strong class="jf hj"> to_timedelta() </strong>。</p><h1 id="64a2" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">熊猫中的DateTime和Timedelta对象</h1><p id="133d" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jf hj"> to_datetime() </strong>方法将字符串格式的日期和时间转换为datetime对象:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es mf"><img src="../Images/94923ca21263194efcc5abf6b3c00882.png" data-original-src="https://miro.medium.com/v2/resize:fit:820/format:webp/0*ARspO1FGd_HZQek6.png"/></div></figure><p id="1c97" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">你可能已经注意到这里有些奇怪的东西。to_datetime()返回的对象类型不是datetime而是Timestamp。好吧，别担心，这只是熊猫版的Python的DateTime。</p><p id="16ec" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们已经知道timedelta给出了时间上的差异。Pandas <strong class="jf hj"> to_timedelta() </strong>方法就是这样做的:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es mg"><img src="../Images/3dba359d1c46fb2c52d38a96300db4a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:442/format:webp/0*73gjbVykWvYMffeY.png"/></div></figure><p id="b829" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这里，单位决定了参数的单位，无论是日、月、年、小时等等。</p><h1 id="9bac" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">熊猫的日期范围</h1><p id="2079" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">为了方便创建日期序列，Pandas提供了<strong class="jf hj"> date_range() </strong>方法。它接受开始日期、结束日期和可选的频率代码:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es mh"><img src="../Images/93d05936c85cc1d19fce8547df0ba002.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/0*XWskmgoo7LqvirSZ.png"/></div></figure><p id="7678" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">您可以定义要生成的期间或期间数，而不是定义结束日期:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es mi"><img src="../Images/f8cd3b8cb4c58d50e23e3892a53a7dbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/0*8LEDv_XhuMlzMl-R.png"/></div></figure><h1 id="7af5" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">在Pandas中创建日期时间要素</h1><p id="25da" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">让我们也创建一系列结束日期，并创建一个虚拟数据集，从中我们可以派生出一些新的特性，并使我们对日期时间的了解取得成果。</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es mj"><img src="../Images/d51386e3fb7724c542f72a2bf54ea108.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/format:webp/0*9FBuZrgJu2jkcbtY.png"/></div></figure><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><p id="e144" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">完美！因此，我们有一个包含开始日期、结束日期和目标变量的数据集:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es mk"><img src="../Images/1cf87db82169b8973c265750aa9f48f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:842/format:webp/0*LSH4HJQAwywp8UQC.png"/></div></figure><p id="0139" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们可以从日期列创建多个新特性，如日、月、年、小时、分钟等。使用如下所示的<strong class="jf hj"> dt属性</strong>:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ml"><img src="../Images/00c144936ffe71b4392c19e4095085e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4FbIYTEfvQiHh0Tf.png"/></div></div></figure><p id="5c9e" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们的持续时间特性很棒，但是如果我们想要以分钟或秒为单位的持续时间呢？还记得在timedelta部分我们是如何将日期转换成秒的吗？我们可以在这里做同样的事情！</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es mm"><img src="../Images/715c9837456c5adf2c6322ae13ad59ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FoVsAh9NlPf8ZkGS.png"/></div></div></figure><p id="8ba5" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">太好了！你能看到我们根据日期创造了多少新功能吗？</p><p id="3b54" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">现在，让我们将开始日期作为数据帧的索引。这将有助于我们轻松地分析数据集，因为我们可以使用切片来查找表示所需日期的数据:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="lj lk l"/></div></figure><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es mn"><img src="../Images/ec1340abd87050d57a0319cd2725b9ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SYzfzqABzyb87bEE.png"/></div></div></figure><p id="2f29" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">厉害！当你想做可视化或任何数据分析时，这是非常有用的。</p><h1 id="f874" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">结束注释</h1><p id="9619" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我希望这篇关于如何用Python和Pandas操作日期和时间特性的文章对您有用。但是没有实践，一切都是不完整的。使用时间序列数据集是实践我们在本文中学到的知识的一种很好的方式。</p><p id="744e" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我推荐参加在<a class="ae lc" href="https://datahack.analyticsvidhya.com/contest/all/?utm_source=blog&amp;utm_medium=datetime-variables-python-pandas" rel="noopener ugc nofollow" target="_blank"> DataHack平台</a>上举办的<a class="ae lc" href="https://datahack.analyticsvidhya.com/contest/practice-problem-time-series-2/?utm_source=blog&amp;utm_medium=datetime-variables-python-pandas" rel="noopener ugc nofollow" target="_blank">时间序列黑客马拉松</a>。你可能想先浏览一下<a class="ae lc" href="https://www.analyticsvidhya.com/blog/2016/02/time-series-forecasting-codes-python/?utm_source=blog&amp;utm_medium=datetime-variables-python-pandas" rel="noopener ugc nofollow" target="_blank">这篇</a>和<a class="ae lc" href="https://www.analyticsvidhya.com/blog/2018/09/multivariate-time-series-guide-forecasting-modeling-python-codes/?utm_source=blog&amp;utm_medium=datetime-variables-python-pandas" rel="noopener ugc nofollow" target="_blank">这篇</a>文章，以便为那次黑客马拉松做准备。</p><h1 id="ee92" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">你也可以在分析Vidhya的Android应用上阅读这篇文章</h1><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es mo"><img src="../Images/a13af6d330365db52d03e0326bdaff3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1292/format:webp/0*qHQ7_IX0qugzf2cE.png"/></div></div></figure></div><div class="ab cl mp mq gp mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="hb hc hd he hf"><p id="55aa" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><em class="ks">原载于2020年5月5日https://www.analyticsvidhya.com</em><a class="ae lc" href="https://www.analyticsvidhya.com/blog/2020/05/datetime-variables-python-pandas/" rel="noopener ugc nofollow" target="_blank"><em class="ks"/></a><em class="ks">。</em></p></div></div>    
</body>
</html>