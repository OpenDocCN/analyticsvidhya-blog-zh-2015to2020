<html>
<head>
<title>Refactoring Raindrops</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">重构雨滴</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/refactoring-raindrops-39dcd4bf536e?source=collection_archive---------20-----------------------#2020-01-16">https://medium.com/analytics-vidhya/refactoring-raindrops-39dcd4bf536e?source=collection_archive---------20-----------------------#2020-01-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/4aaae33293f8ce18cc6a2bb278ee0da2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tx0LUEdORueqlCf-9Aqzcw.jpeg"/></div></div></figure><p id="86d7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在我关于这个问题的上一篇文章中，我们介绍了如何<a class="ae jo" rel="noopener" href="/analytics-vidhya/revisiting-raindrops-in-python-abc4fbb23f4e">重构Python代码，使其在雨滴(又名Fizz-Buzz)问题中更具可伸缩性</a>。</p><p id="1cc9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我用字典重写了解决方案，并在这里结束:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="4327" class="jy jz hi ju b fi ka kb l kc kd">def convert(number):<br/>    factors = []<br/>    output = ''<br/>    tu = {1:'Pling', 2:'Plang', 3:'Plong'}<br/>    <br/>    if number % 3 == 0:<br/>        factors += tu[1]<br/><br/>    if number % 5 == 0:<br/>        factors += tu[2]<br/><br/>    if number % 7 == 0:<br/>        factors += tu[3]<br/><br/>    return output.join(factors) or str(number)</span></pre><p id="2019" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你发现一系列的“如果”语句有点令人畏缩，你并不孤单！肯定不是干解。你甚至可以称之为湿解(每次都写)。老实说，一开始我甚至不愿意发表它，因为它太不优雅，也不符合pythonic语言。所以让我们摆脱那些重复！</p><p id="55e1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，请注意我们有一个带编号键的字典(记住:python中的字典是无序的，这与这个问题没有特别的关系，但是如果数据需要排序，您可能希望使用不同的数据结构，比如SortedDict)。</p><p id="09b7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以根据关键数字遍历字典，并将这些因素添加到列表中。这可以通过一个“for”循环来完成，或者更好的方法是，将这个“for”循环折叠成一个列表理解:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="cfea" class="jy jz hi ju b fi ka kb l kc kd">def convert(number):<br/>    factors = []<br/><br/>    d = {3:'Pling', 5:'Plang', 7:'Plong'}<br/><br/>    factors += [v for (k,v) in d.items() if number % k == 0]<br/><br/>    return ''.join(factors) or str(number)</span></pre><p id="438a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里，我们将“if”条件写成一次，用一个变量(k)代替整数3、5和7。如果有任何数字通过了测试，我们就追加字典值—在这种情况下，如果数字可以被键整除(或者，换句话说，如果商的余数为0)，我们就遍历字典中的每个键来进行测试。最后，我们根据问题的具体情况，把这个列表连接成一个字符串。</p><h1 id="3b44" class="ke jz hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">在4行简单的代码中，我们建立了一段通用的代码，可以处理任何数量的键/值对。</h1><p id="58c0" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">像所有好的写作一样，干净的软件是一个迭代的过程。它有助于注意为什么以及何时进行重构更改，以避免将来重复模式。</p></div></div>    
</body>
</html>