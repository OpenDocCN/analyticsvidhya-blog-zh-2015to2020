<html>
<head>
<title>Offline Speech Recognition Made Easy with Vosk</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vosk让离线语音识别变得简单</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/offline-speech-recognition-made-easy-with-vosk-c61f7b720215?source=collection_archive---------0-----------------------#2020-11-09">https://medium.com/analytics-vidhya/offline-speech-recognition-made-easy-with-vosk-c61f7b720215?source=collection_archive---------0-----------------------#2020-11-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/dc931a7355c14c9ac005ae9bea4e243d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KndD0pTUyTHI8p9-f_u_6g.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片来自Berleburg在Outlook中的语音识别，2019年12月19日</figcaption></figure><p id="01bd" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">语音识别是人工智能的众多应用之一，可以用于各种日常项目中，以增强其可访问性。谷歌的助手和亚马逊的Alexa在少数最受欢迎的语音识别应用中名列榜首。但是，它们有一个问题:它们的语音识别API只能通过互联网获得，没有互联网连接就无法访问。这一切都很好，因为语音识别最突出的用途是在家用技术中，在这个“在线时代”(2020年更是如此)，很难找到一个没有互联网连接的家庭。但是，如果您想在脱机环境中使用语音识别，该怎么办呢？幸运的是，我们有现成的解决方案，并且不需要您付出太多努力！</p><h1 id="34d6" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated"><strong class="ak"> <em class="kq">我们来介绍一下</em> </strong></h1><p id="0424" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">Vosk是一个开源的免费Python工具包，用于离线语音识别。它支持16种语言的语音识别，包括英语、印度英语、法语、西班牙语、葡萄牙语、中文、俄语、土耳其语、越南语、意大利语、荷兰语、阿拉伯语、希腊语，最近还增加了德语、加泰罗尼亚语和波斯语。</p><p id="3568" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">由于Vosk API支持多种语言，我们为每种语言都提供了模型。这些是小型型号(每个50 MB)，但您也可以找到更大的服务器型号。这些模型具有多种特性，如说话者识别、流式API和可重新配置的词汇表。</p><p id="f793" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">该工具包的另一个重要特性是它可用于各种平台，包括使用Python、Java、C#、节点绑定的桌面服务器以及轻量级设备，如Android、iOS和Raspberry Pi。因此，你可以用它来录制视频，也可以用它来制作家用技术和聊天机器人。</p><p id="1c5e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在我们开始之前，<em class="kw">重要的是</em>要注意语音识别工具的准确性还没有完善，因此结果有时会出乎意料。但是您仍然可以依靠Vosk在语音识别方面提供相当好的准确度。如果没有，您可以修改模型以更好地与您的系统一起工作。</p><p id="db16" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">工具箱说得够多了，是时候说到做到了。</p><h1 id="1a6b" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated"><strong class="ak"> <em class="kq">安装Vosk </em> </strong></h1><p id="5ddb" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">安装Vosk最简单的方法是使用pip命令。但在此之前，建议设置一个虚拟环境来解决依赖关系——当您使用不同版本的Python时，这肯定不是必需的，但却是一个很好的实践。</p><p id="7ff2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">虚拟环境可以通过三个步骤来设置和激活:</p><p id="5431" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">安装virtualenv软件包</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="7deb" class="lg jt hi lc b fi lh li l lj lk">pip install virtualenv</span></pre><p id="9afa" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">创建虚拟环境</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="639a" class="lg jt hi lc b fi lh li l lj lk">virtualenv myenv</span></pre><p id="ad9b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">激活虚拟环境</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="e2fa" class="lg jt hi lc b fi lh li l lj lk">myenv\Scripts\activate                       //for windows<br/>myenv\bin\activate                           //for linux</span></pre><p id="79bb" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">一旦建立并激活了虚拟环境，下一步就是检查虚拟环境中的Python是否满足以下依赖性要求:</p><p id="4e04" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">Python版本:3.5–3.8(Linux)，3.6–3.7(ARM)，3.8 (OSX)，3.8–64位(Windows)</p><p id="a989" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">pip版本:19.0及更新版本。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/914343dcf5d85ef83bf549872f82afcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q39sRTac51AtUmz1WQQx2Q.jpeg"/></div></div></figure><p id="981c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，您可以继续使用pip命令安装Vosk:</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="3eb0" class="lg jt hi lc b fi lh li l lj lk">pip install vosk</span></pre><p id="c762" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">Vosk API现在应该已经安装在您的系统上了。如果您遇到任何错误，请确保Python版本与需求中提到的版本相同。</p><h1 id="9e0d" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated"><strong class="ak"> <em class="kq">与沃斯克一起工作</em> </strong></h1><p id="f5af" class="pw-post-body-paragraph iu iv hi iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr hb bi translated">现在我们已经完成了安装过程，是时候看看如何使用它了！随着虚拟环境的创建和激活，以及Vosk API在virtualenv中的安全安装，下一步是在根文件夹中克隆<a class="ae lm" href="https://github.com/alphacep/vosk-api" rel="noopener ugc nofollow" target="_blank"> Vosk Github库</a>。你可以在这里找到如何克隆Github库<a class="ae lm" href="https://docs.github.com/en/free-pro-team@latest/github/creating-cloning-and-archiving-repositories/cloning-a-repository" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="df40" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">之后，您需要一个模型来使用您的API。您可以根据您选择的语言(最常见的选择是vosk-model-en-us-aspire-0.2)从<a class="ae lm" href="https://alphacephei.com/vosk/models" rel="noopener ugc nofollow" target="_blank">这里</a>安装一个模型，或者您可以训练自己的模型。</p><p id="9104" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">下载模型并将其复制到<strong class="iw hj">vosk-API \ python \ example</strong>文件夹中。</p><p id="0b2a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，让我们开始工作吧！</p><p id="fb08" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> <em class="kw">使用麦克风进行语音识别</em> </strong></p><p id="ff37" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">没有PyAudio模块，通过麦克风的语音识别无法工作。因此，您必须再次使用pip命令来安装它。</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="bddb" class="lg jt hi lc b fi lh li l lj lk">pip install pyaudio</span></pre><p id="87c2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">告诉你一个秘密。当您使用Python 3.7或更高版本时，使用pip安装PyAudio在Windows上不起作用，您可以按照本指南<a class="ae lm" href="https://stackoverflow.com/questions/52283840/i-cant-install-pyaudio-on-windows-how-to-solve-error-microsoft-visual-c-14/52284344#52284344" rel="noopener ugc nofollow" target="_blank">在您的系统上成功安装PyAudio。</a></p><p id="c482" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">开始麦克风测试前，只需再做一步。转到<strong class="iw hj">myenv \ Lib \ site-packages</strong>文件夹，找到pyaudio.py文件。修改它，使read函数中的exception_on_overflow参数设置为‘False’(如果它最初设置为True)。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/1e244430ef911bfd696a15b4c0eb6017.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*po5tym_lOqhZyZCjbR4URA.jpeg"/></div></div></figure><p id="b4ba" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，让我们运行microphone_test.py文件。通过终端导航到<strong class="iw hj">vosk-API \ python \ example</strong>文件夹，执行<strong class="iw hj">“test _ microphone . py”</strong>文件。</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="0bbd" class="lg jt hi lc b fi lh li l lj lk">python test_microphone.py</span></pre><p id="b46a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">当你对着麦克风说话时，你会看到语音识别器对出现在你的终端窗口上的转录单词施展魔法。</p><p id="4c03" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> <em class="kw">使用. mp4文件进行语音识别</em> </strong></p><p id="8b11" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果你想使用Vosk来转录一个. mp4视频文件，你可以按照这一节来做。您所需要的只是一个用于语音识别的示例视频和用于通过命令行界面处理多媒体文件的FFmpeg包。</p><p id="f43f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">你可以很容易地在互联网上找到任何样本. mp4视频文件，或者你可以录制一个你自己的。</p><p id="3131" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">FFmpeg包可以通过<a class="ae lm" href="https://ffmpeg.org/download.html#build-windows" rel="noopener ugc nofollow" target="_blank">这个</a>链接下载。</p><p id="cd05" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">一旦这两个要求都得到满足，你就可以把你的视频放在<strong class="iw hj"> vosk-api\python\example </strong>文件夹中，并在下载的FFmpeg包的bin文件夹中寻找ffmpeg.exe文件，你必须把它放在和你的视频相同的文件夹中，即<strong class="iw hj"> vosk-api\python\example </strong>文件夹。</p><p id="c268" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，您可以通过执行<strong class="iw hj">“test _ ffmpeg . py”</strong>文件，使用视频文件启动语音识别。</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="62a2" class="lg jt hi lc b fi lh li l lj lk">python test_ffmpeg.py sample.mp4</span></pre><p id="ff45" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">可以在终端窗口上看到视频的语音转换。</p><p id="a5d8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是一些可以使用Vosk进行离线语音识别的方法。您可以使用这个工具包做更多的事情，您可以在Vosk的<a class="ae lm" href="https://alphacephei.com/vosk/" rel="noopener ugc nofollow" target="_blank">文档</a>中获得帮助。API仍在不断更新，每次更新都会添加更多功能，这将提高语音识别的准确性以及API的集成选项。</p></div></div>    
</body>
</html>