<html>
<head>
<title>Day 7: Customize your figures and MATLAB’s most useful hidden plotting property</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">第7天:定制你的图形和MATLAB最有用的隐藏绘图属性</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/day-7-where-does-my-data-go-and-matlabs-most-useful-hidden-plotting-property-d00d9d12045e?source=collection_archive---------16-----------------------#2020-05-07">https://medium.com/analytics-vidhya/day-7-where-does-my-data-go-and-matlabs-most-useful-hidden-plotting-property-d00d9d12045e?source=collection_archive---------16-----------------------#2020-05-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/1b90bd18fe9a565bda442e2739840e29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vfKgT29r-CubQL2EElwOjQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">使用比箱线图还小的代码块，您可以在MATLAB中控制您的图形，并根据您的目的定制它们。在这个过程中，您将了解findobj、标记、类型和抖动。</figcaption></figure><p id="128c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="js">问候！除非你熟悉MATLAB中的“有趣”操作，否则你可能想从阅读我以前的帖子开始，从第一天的</em>  <em class="js">开始</em> <a class="ae jt" rel="noopener" href="/@neuraljojo/day-1-making-matlab-fun-ad850eaffbde"> <em class="js">。</em></a></p><p id="4ab6" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">通常，在学术界，当你接近发表或展示你的研究时，你需要增强你的数字，使它们清晰明了。在开始的时候有计划地这么做将会省去你很多头疼的事情。</p><blockquote class="ju jv jw"><p id="c8bd" class="iu iv js iw b ix iy iz ja jb jc jd je jx jg jh ji jy jk jl jm jz jo jp jq jr hb bi translated">这是我在研究生院做的事情:我制作的图形看起来足够好，可以在实验室会议上或向我的导师展示，但当涉及到使它们具有正确的大小、形状、颜色以便于阅读，为读者添加或强调某些功能等等时，我会进入Illustrator或Inkscape并开始摆弄。这些工具有它们的位置(主要是布置图形)，但是检查每个图形并进行调整是一个巨大的时间消耗。上帝禁止你用新的或额外的数据重新制作这些数字(你会的)。</p></blockquote><p id="7b76" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们这样做的原因是因为有时我们的配色方案与合作者的不匹配，或者因为MATLAB没有给我们一个直接的方法来设置某些对象的颜色。</p><p id="f53d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">到目前为止，最糟糕的是<strong class="iw hj"> boxplot </strong>函数。没有简单的方法来:</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ka"><img src="../Images/5a0f261fe98a1259b0e3a57373410fda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RhRFMJ-RxXBkv7Ek48DItw.png"/></div></div></figure><p id="071c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">(也就是说，如果你对能帮你解决很多问题的软件包感兴趣，我强烈推荐<a class="ae jt" href="https://github.com/piermorel/gramm" rel="noopener ugc nofollow" target="_blank">Gramm</a>by<a class="ae jt" href="https://twitter.com/NeuroPierre" rel="noopener ugc nofollow" target="_blank">@ NeuroPierre</a>)</p><p id="7d56" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">但是对于我们这里的目的，我们将利用这些不幸的限制作为学习的机会:</p><ol class=""><li id="71c8" class="kf kg hi iw b ix iy jb jc jf kh jj ki jn kj jr kk kl km kn bi translated">如何使用<strong class="iw hj"> findobj </strong>使用“类型”和“标签”在我们的绘图轴中搜索和选择对象</li><li id="6b17" class="kf kg hi iw b ix ko jb kp jf kq jj kr jn ks jr kk kl km kn bi translated">如何使用<strong class="iw hj"> arrayfun </strong>控制那些对象</li><li id="c3e6" class="kf kg hi iw b ix ko jb kp jf kq jj kr jn ks jr kk kl km kn bi translated">如何根据数据集中的信息用“抖动”<strong class="iw hj"> </strong>覆盖<strong class="iw hj">散点图</strong></li></ol></div><div class="ab cl kt ku gp kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hb hc hd he hf"><h2 id="ad16" class="la lb hi bd lc ld le lf lg lh li lj lk jf ll lm ln jj lo lp lq jn lr ls lt lu bi translated">让我们开始吧。</h2><p id="c40b" class="pw-post-body-paragraph iu iv hi iw b ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn lz jp jq jr hb bi translated">像往常一样，创建一个假数据集:</p><pre class="kb kc kd ke fd ma mb mc md aw me bi"><span id="8913" class="la lb hi mb b fi mf mg l mh mi">rng(5)</span><span id="8eb8" class="la lb hi mb b fi mj mg l mh mi">data = [ normrnd(1,.25,100,1); normrnd(2,.1,100,1);  ];<br/>animal_id = [ randi(5,100,1); 5+randi(5,100,1) ];</span><span id="f114" class="la lb hi mb b fi mj mg l mh mi">mytable = table( data, animal_id, ...<br/>                 'VariableNames',{'Data','Animal_id'});</span></pre><p id="5df5" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们可以想象它由分布在一组测试对象中的100个数据点(标识为1到5)和分布在具有更高平均值的第二组中的另外100个数据点(标识为6到10)组成。[对于神经人，可能是两组小鼠(1-5)和(6-10)，数据是每只小鼠神经元的平均放电率。]</p><p id="8453" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，我们将像往常一样生成我们的<strong class="iw hj">箱线图</strong>。</p><pre class="kb kc kd ke fd ma mb mc md aw me bi"><span id="1a45" class="la lb hi mb b fi mf mg l mh mi">figure('color','w'); <br/>ax = axes('NextPlot','add','FontSize',16,'TickDir','out');</span><span id="f3f4" class="la lb hi mb b fi mj mg l mh mi">boxplot( mytable.Data, mytable.Animal_id, 'Parent', ax );</span></pre><p id="1954" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">您已经创建了盒子，但是它们在哪里呢？我们可以通过简单地使用<strong class="iw hj"> findobj </strong>函数从图形或它的轴中得到任何东西。请在您的命令窗口中尝试。</p><pre class="kb kc kd ke fd ma mb mc md aw me bi"><span id="b460" class="la lb hi mb b fi mf mg l mh mi">findobj(ax)</span></pre><p id="70f7" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">您会看到类似这样的内容:</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div class="er es mk"><img src="../Images/cbc0731a2398dceb8b084dc899123c74.png" data-original-src="https://miro.medium.com/v2/resize:fit:426/format:webp/1*Fvf0ls0TePataEzJBzv9EA.png"/></div></figure><h2 id="dd07" class="la lb hi bd lc ld le lf lg lh li lj lk jf ll lm ln jj lo lp lq jn lr ls lt lu bi translated">一切都很好，看起来是时候让<strong class="ak">来做arrayfun </strong>了。但是我们如何指定我们想要修改的对象呢？</h2><p id="cdc9" class="pw-post-body-paragraph iu iv hi iw b ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn lz jp jq jr hb bi translated">原来你可以传递一个“类型”参数，只取出“类型”的东西，也就是“行”。让<em class="js">所有线条统一的好方法</em>。让我们在这儿做它。</p><pre class="kb kc kd ke fd ma mb mc md aw me bi"><span id="c11e" class="la lb hi mb b fi mf mg l mh mi">all_lines = findobj(ax,'Type','Line');</span><span id="ffa2" class="la lb hi mb b fi mj mg l mh mi">arrayfun( @(x) set(x,'LineStyle','-','Color','k','LineWidth',1), all_lines )</span></pre><p id="df5a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">回顾一下:您正在迭代<em class="js"> all_lines </em>数组，并且为该数组中的每个元素设置属性。没有for循环，没有要索引的I，没有伪变量。只是一个简单的<strong class="iw hj"> arrayfun </strong>！</p><p id="0708" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">剧情已经看起来更好了。</p><h2 id="9551" class="la lb hi bd lc ld le lf lg lh li lj lk jf ll lm ln jj lo lp lq jn lr ls lt lu bi translated">但是那些盒子呢？</h2><p id="0472" class="pw-post-body-paragraph iu iv hi iw b ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn lz jp jq jr hb bi translated">这也有一个参数。是‘标签’。请记住这一点，以后当您想要修改其他有标签的图形对象时！*提示:它们都有标签。*</p><pre class="kb kc kd ke fd ma mb mc md aw me bi"><span id="1008" class="la lb hi mb b fi mf mg l mh mi">myboxes = findobj(ax,'Tag','Box')</span><span id="c4a7" class="la lb hi mb b fi mj mg l mh mi">arrayfun( @(box) patch( box.XData, box.YData, 'm', 'FaceAlpha', 0.5), myboxes(1:5) )</span></pre><p id="ae24" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们基本上在框1到5上放置了一个洋红色的补丁(但是你可以选择1到10的任何子集，我们的animal_id)。</p><p id="ff9f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="js">【怪癖:在myboxes数组中绘制的最后五个盒子实际上是1:5！] </em></p><p id="370b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">你可以用<strong class="iw hj">补丁</strong>做各种各样的事情，如果你还没有看过的话，我建议你查阅一下它的文档。</p><h2 id="e68b" class="la lb hi bd lc ld le lf lg lh li lj lk jf ll lm ln jj lo lp lq jn lr ls lt lu bi translated">另一件很酷的事情是:立即删除</h2><p id="86a8" class="pw-post-body-paragraph iu iv hi iw b ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn lz jp jq jr hb bi translated">你不喜欢那些异常值在箱线图中的绘制方式？(我没有。)</p><p id="bae6" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">删掉就好了。简单。</p><pre class="kb kc kd ke fd ma mb mc md aw me bi"><span id="882d" class="la lb hi mb b fi mf mg l mh mi">outliers = findobj( 'Tag', 'Outliers' )<br/>delete( outliers )</span></pre><p id="3641" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这将消除所有的异常值——当然，如果您想有选择地挑出某些异常值并对它们进行注释或强调，您也可以在这里使用<strong class="iw hj"> arrayfun </strong>。</p></div><div class="ab cl kt ku gp kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hb hc hd he hf"><h1 id="de48" class="ml lb hi bd lc mm mn mo lg mp mq mr lk ms mt mu ln mv mw mx lq my mz na lt nb bi translated">最后是抖动。</h1><p id="375f" class="pw-post-body-paragraph iu iv hi iw b ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn lz jp jq jr hb bi translated">让我们添加数据点，并匹配配色方案。</p><p id="746a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们将让第二组受试者(6-10名)呈现洋红色，以匹配我们的盒子。为此，我们将对我们的<em class="js"> mytable </em>变量做一点布尔索引。尝试以下方法:</p><pre class="kb kc kd ke fd ma mb mc md aw me bi"><span id="329b" class="la lb hi mb b fi mf mg l mh mi">mytable.Animal_id(mytable.Animal_id&gt;5)</span></pre><p id="3c1f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这将产生一个“迷你”表，仅包含组&gt; 5的那些受试者。让我们将该表的内容绘制成散点图，如下所示:</p><pre class="kb kc kd ke fd ma mb mc md aw me bi"><span id="382d" class="la lb hi mb b fi mf mg l mh mi">scatter( mytable.Animal_id(mytable.Animal_id&gt;5), mytable.Data(mytable.Animal_id&gt;5) , 64, 'Jitter', 'on', 'JitterAmount', 0.1, 'MarkerEdgeColor','k', 'MarkerFaceColor', 'm', 'MarkerFaceAlpha', 0.5 )</span></pre><p id="593a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">[注意:我们将点的大小设置为64(散点的第三个参数)。]</p><p id="f766" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">通过使用未记录的“抖动”和“抖动量”属性，您可以给散点图中的数据点一个漂亮的抖动外观。还要看看我们如何索引表格，以便将散布点放置在第二组上。</p><p id="3158" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们可以对第一组盒子做同样的事情。</p><pre class="kb kc kd ke fd ma mb mc md aw me bi"><span id="64c4" class="la lb hi mb b fi mf mg l mh mi">scatter( mytable.Animal_id(mytable.Animal_id&lt;=5), mytable.Data(mytable.Animal_id&lt;=5) , 64, 'Jitter', 'on', 'JitterAmount', 0.1, 'MarkerEdgeColor','k', 'MarkerFaceColor', 'w', 'MarkerFaceAlpha', 0.5 )</span></pre><h2 id="60f9" class="la lb hi bd lc ld le lf lg lh li lj lk jf ll lm ln jj lo lp lq jn lr ls lt lu bi translated">生成图形的完整代码如下。</h2><p id="171c" class="pw-post-body-paragraph iu iv hi iw b ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn lz jp jq jr hb bi translated">这是非常微不足道的，希望容易理解！但更重要的是，它应该是教育性的，而不仅仅是实用性的。</p><figure class="kb kc kd ke fd ij"><div class="bz dy l di"><div class="nc nd l"/></div></figure><p id="d764" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">请继续关注更多技巧，让您的MATLAB代码简洁而灵活！</p></div></div>    
</body>
</html>