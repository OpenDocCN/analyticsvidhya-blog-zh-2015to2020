<html>
<head>
<title>Measuring the Goodness of Fit: R² versus Adjusted R²</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">测量拟合优度:R与调整后的R</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/measuring-the-goodness-of-fit-r%C2%B2-versus-adjusted-r%C2%B2-1e8ed0b5784a?source=collection_archive---------0-----------------------#2019-06-21">https://medium.com/analytics-vidhya/measuring-the-goodness-of-fit-r%C2%B2-versus-adjusted-r%C2%B2-1e8ed0b5784a?source=collection_archive---------0-----------------------#2019-06-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="5d30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">线性回归</strong>处理因变量和几个解释变量之间的线性关系建模。本质上，我们想要拟合一条穿过空间数据点的线。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/f8265225287645216f049f9cd6d487a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*rQoiu4Y51IUMDsOE8aGCyw.jpeg"/></div></figure><p id="a840" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是可以有多条可能的线。因此，为了找到最佳线，需要一个拟合优度的度量，即<strong class="ih hj">决定系数-R .</strong></p></div><div class="ab cl jl jm gp jn" role="separator"><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq"/></div><div class="hb hc hd he hf"><p id="e830" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="js">在你继续之前，这里有一份关于回归的5篇必读文章的清单</em><strong class="ih hj"><em class="js"/></strong><em class="js"/></p><ul class=""><li id="67c4" class="jt ju hi ih b ii ij im in iq jv iu jw iy jx jc jy jz ka kb bi translated"><a class="ae kc" href="https://www.analyticsvidhya.com/blog/2016/02/complete-tutorial-learn-data-science-scratch/" rel="noopener ugc nofollow" target="_blank"> <em class="js">从零开始在R学习数据科学的完整教程</em> </a></li><li id="aea6" class="jt ju hi ih b ii kd im ke iq kf iu kg iy kh jc jy jz ka kb bi translated"><a class="ae kc" href="https://www.analyticsvidhya.com/blog/2015/10/regression-python-beginners/" rel="noopener ugc nofollow" target="_blank"> <em class="js"> 5个可以教你多元回归的问题(用Python和R) </em> </a></li><li id="b49f" class="jt ju hi ih b ii kd im ke iq kf iu kg iy kh jc jy jz ka kb bi translated"><a class="ae kc" href="https://www.analyticsvidhya.com/blog/2015/08/comprehensive-guide-regression/" rel="noopener ugc nofollow" target="_blank"> <em class="js">你应该知道的7种回归技巧！</em> </a></li><li id="ab11" class="jt ju hi ih b ii kd im ke iq kf iu kg iy kh jc jy jz ka kb bi translated"><a class="ae kc" href="https://www.analyticsvidhya.com/blog/2016/01/complete-tutorial-ridge-lasso-regression-python/" rel="noopener ugc nofollow" target="_blank"><em class="js">Python中脊和套索回归完整教程</em> </a></li><li id="a486" class="jt ju hi ih b ii kd im ke iq kf iu kg iy kh jc jy jz ka kb bi translated"><a class="ae kc" href="https://www.analyticsvidhya.com/blog/2016/12/45-questions-to-test-a-data-scientist-on-regression-skill-test-regression-solution/" rel="noopener ugc nofollow" target="_blank"> <em class="js"> 45题测试一个数据科学家对回归</em> </a></li></ul><p id="7032" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您还可以在此查看(并参与)关于此问题的详细讨论，以及其他数据科学专家的回答:</p><p id="4a31" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae kc" href="https://discuss.analyticsvidhya.com/t/difference-between-r-square-and-adjusted-r-square/264/15" rel="noopener ugc nofollow" target="_blank"><em class="js">https://discuse . analyticsvidhya . com/t/difference-between-r-square-and-adjusted-r-square/264/15</em></a></p></div><div class="ab cl jl jm gp jn" role="separator"><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq"/></div><div class="hb hc hd he hf"><h1 id="38f9" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">决定系数— R</h1><p id="d311" class="pw-post-body-paragraph if ig hi ih b ii lg ik il im lh io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">考虑下图所示的<strong class="ih hj">简单回归</strong>的情况。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es ll"><img src="../Images/6b5dc360973bff2b94ac002696cb97bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LabByiMu_qYfdBgxucZ8HA.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx translated">如古吉拉特语Damodar N. <em class="lu">基础计量经济学</em>所述。塔塔麦格劳希尔教育公司，2009年。</figcaption></figure><p id="07a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">圆圈Y代表因变量中的<strong class="ih hj">变量</strong>，圆圈X代表自变量。</p><p id="6e7b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">圆圈的重叠代表了用x的变化来解释Y的变化的<strong class="ih hj">程度。</strong></p><p id="c0e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">系数<em class="js"> r </em>是这种重叠的数值度量，被称为<strong class="ih hj">决定系数</strong>。这成为多元回归情况下的<strong class="ih hj">多元决定系数</strong> <em class="js"> R </em>。</p><p id="7fc0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正式声明，</p><blockquote class="lv"><p id="74bb" class="lw lx hi bd ly lz ma mb mc md me jc dx translated">r测量回归模型解释的Y中总变化的比例。</p></blockquote><p id="5567" class="pw-post-body-paragraph if ig hi ih b ii mf ik il im mg io ip iq mh is it iu mi iw ix iy mj ja jb jc hb bi translated">这种变化是根据平均值的误差平方和来衡量的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mk"><img src="../Images/870188058db03518dedc84986cf385da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/1*2cSAB2SRrR2Gz-9rLv3lvQ.png"/></div></figure><p id="7ee8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们有<strong class="ih hj"> <em class="js"> n </em> </strong>观测值<strong class="ih hj"> <em class="js"> (X_i，Y_i) </em> </strong>和<strong class="ih hj"> <em class="js"> f(。)</em> </strong>是我们的预测函数，</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ml"><img src="../Images/a16d7adc3028354e45765ab8a845cb45.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*XsaopfnMdjd2R8paaf2RLA.png"/></div></figure><p id="ccd9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是关于R的一些要点:</p><ul class=""><li id="b990" class="jt ju hi ih b ii ij im in iq jv iu jw iy jx jc jy jz ka kb bi translated">它是一个范围为<strong class="ih hj"> <em class="js"> 0 ≤ R ≤ 1 </em> </strong>的非负量</li><li id="e977" class="jt ju hi ih b ii kd im ke iq kf iu kg iy kh jc jy jz ka kb bi translated">R = 0意味着回归线根本不符合数据。</li><li id="a9e1" class="jt ju hi ih b ii kd im ke iq kf iu kg iy kh jc jy jz ka kb bi translated">R = 1意味着回归线是完美的拟合。</li></ul><h2 id="7b99" class="mm kj hi bd kk mn mo mp ko mq mr ms ks iq mt mu kw iu mv mw la iy mx my le mz bi translated">R问题——值随着解释变量的数量而增加</h2><p id="3818" class="pw-post-body-paragraph if ig hi ih b ii lg ik il im lh io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">想想吧。r是解释方差与总方差的比值。在添加新变量时，解释的方差以及R <strong class="ih hj"> <em class="js">的值将增加，或者至少不会减少</em> </strong>。</p><p id="5a22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是，这个<strong class="ih hj"> <em class="js">根本不代表</em> </strong>有添加变量的模型比没有添加变量的模型好。如果用于比较具有不同数量预测因子的模型，r可能会产生误导。</p><h1 id="101c" class="ki kj hi bd kk kl na kn ko kp nb kr ks kt nc kv kw kx nd kz la lb ne ld le lf bi translated">调整后R</h1><p id="b9ae" class="pw-post-body-paragraph if ig hi ih b ii lg ik il im lh io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">调整后的R是根据预测值的数量调整的R的修改版本。它对添加不必要的特征进行惩罚，并允许使用不同数量的预测值对回归模型进行比较。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es nf"><img src="../Images/0ff4a747602d58051a2a2ffc70d5de3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1130/format:webp/1*KJlygowBOFqPmWnz9zvclQ.png"/></div></figure><p id="8899" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里<strong class="ih hj"> <em class="js"> k </em> </strong>是模型中解释变量的个数<strong class="ih hj"> <em class="js"> n </em> </strong>是观测值的个数。</p><p id="81f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">调整后的R值总是小于R值。</strong></p><blockquote class="ng nh ni"><p id="5c54" class="if ig js ih b ii ij ik il im in io ip nj ir is it nk iv iw ix nl iz ja jb jc hb bi translated">只有当新项对模型的改善程度超过偶然情况下的预期时，调整后的R平方才会增加。当预测者偶然对模型的改进小于预期时，它会减少。</p></blockquote><p id="ae7b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，请注意，调整后的R值可以是负值。</p><p id="d3f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">获得调整后R的负值可能表示以下几项或全部:</p><ul class=""><li id="60e4" class="jt ju hi ih b ii ij im in iq jv iu jw iy jx jc jy jz ka kb bi translated">线性模型不太适合数据</li><li id="613c" class="jt ju hi ih b ii kd im ke iq kf iu kg iy kh jc jy jz ka kb bi translated">预测器的数量很大</li><li id="947b" class="jt ju hi ih b ii kd im ke iq kf iu kg iy kh jc jy jz ka kb bi translated">样本数量很少</li></ul><h1 id="55c7" class="ki kj hi bd kk kl na kn ko kp nb kr ks kt nc kv kw kx nd kz la lb ne ld le lf bi translated">Python中的R和调整后的R</h1><p id="888d" class="pw-post-body-paragraph if ig hi ih b ii lg ik il im lh io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">首先生成一个随机数据集</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="nm nn l"/></div></figure><p id="18b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="js"> X </em> </strong>有6个特征。这就是因变量<strong class="ih hj"> <em class="js"> y </em> </strong>随这些特征变化的方式:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es no"><img src="../Images/6f9bc3a2ac05ac1d3d61b56728352440.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZGgNRxB-iTkJ7uT0IDqaSg.png"/></div></div></figure><p id="f667" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="js"> y对X【2】</em>或<em class="js"> y对X【4】</em>可能是线性关系。让我们使用Python中的<strong class="ih hj"> <em class="js"> statsmodels </em> </strong>库，在<strong class="ih hj"> <em class="js"> y </em> </strong>和<strong class="ih hj"><em class="js">【X【4】</em></strong>之间用<strong class="ih hj">普通最小二乘法</strong>拟合一条直线。summary()函数可用于查看R和调整后的R系数。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="nm nn l"/></div></figure><p id="69fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是摘要:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es np"><img src="../Images/c0639a2c244f8471d27ca37fa75ad245.png" data-original-src="https://miro.medium.com/v2/resize:fit:876/format:webp/1*xSxRKaTT4FqG6jVjGFQZew.jpeg"/></div></figure><p id="774b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在添加另一个解释变量，<strong class="ih hj"><em class="js">【3】</em></strong>，看看对两个系数的影响。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es nq"><img src="../Images/b1e1951e5356d78e10470434d65ff785.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/1*5j1qbjfUxxycRlMm1o5O8w.jpeg"/></div></figure><p id="b2d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有意思！R值增加，而调整后的R值下降。<strong class="ih hj"><em class="js">X【3】</em></strong>是添加到线性关系中的一个无关紧要的特征。这一点通过分别在<strong class="ih hj"> <em class="js"> Y </em> </strong>对<strong class="ih hj"><em class="js">×X</em></strong>找到OLS回归的调整后的R得到进一步证实。我们观察到它是负的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es nr"><img src="../Images/6183749e3e896ff000850656867b9c21.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*xLk1L3REnKI4z5FG6AEb-Q.jpeg"/></div></figure><p id="099b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">也可以使用<strong class="ih hj"> sklearn中metrics模块的<strong class="ih hj"> <em class="js"> r2_score </em> </strong>函数。</strong>但是，没有这样的函数可以找到调整后的r2_score。我们需要用它的公式来计算。</p><p id="2a98" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是著名的<a class="ae kc" href="https://www.kaggle.com/ruiromanini/mtcars" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj"><em class="js">mt cars</em></strong></a>数据集的回归分析，没有sklearn中的分类变量:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="nm nn l"/></div></figure><p id="e9cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们获得大约0.81的R分数和大约0.77的调整R分数</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ns"><img src="../Images/46dcd4c150e5e37fb7319c658e8f9af8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*h0Z8ZKtTPW9G-TOP00FWOw.png"/></div></figure><h1 id="0da5" class="ki kj hi bd kk kl na kn ko kp nb kr ks kt nc kv kw kx nd kz la lb ne ld le lf bi translated">结束注释</h1><p id="0b3d" class="pw-post-body-paragraph if ig hi ih b ii lg ik il im lh io ip iq li is it iu lj iw ix iy lk ja jb jc hb bi translated">虽然R和调整后的R都是拟合优度的度量，但线性回归模型不应以最大化这些系数为唯一目标。这最终会诱使我们在模型中引入许多无关紧要的预测因子。因此，我们的模型将是不准确和不可靠的。</p></div></div>    
</body>
</html>