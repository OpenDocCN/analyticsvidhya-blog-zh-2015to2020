<html>
<head>
<title>Azure Managed Identity Authentication for Azure SQL DB using Azure data factory</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Azure数据工厂对Azure SQL DB进行Azure托管身份认证</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/azure-managed-identity-authentication-for-azure-sql-db-using-azure-data-factory-d8b13afb19e7?source=collection_archive---------3-----------------------#2020-05-11">https://medium.com/analytics-vidhya/azure-managed-identity-authentication-for-azure-sql-db-using-azure-data-factory-d8b13afb19e7?source=collection_archive---------3-----------------------#2020-05-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/97b33e741722c149621a1743018f2280.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/1*AixVrU2wzDkBAAHMZGdVtQ.png"/></div></figure><p id="e0d4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">用户在使用云应用程序时面临的一个非常常见的挑战是管理身份验证的凭证。托管身份解决了这个问题，并为每个azure服务提供了一个自动托管的身份。该身份可用于认证任何支持AAD认证的服务。这是微软提供的免费服务。</p><p id="5da2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">有两种类型的受管理身份:</p><p id="d156" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">1.系统分配的MI:这将自动启用Azure实例，并为资源分配一个身份。</p><p id="9cd2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">2.用户分配的MI:它被创建为独立的Azure资源。通过创建过程，Azure在Azure AD租户中创建一个身份，该身份受到正在使用的订阅的信任。创建身份后，可以将身份分配给一个或多个Azure服务实例。</p><p id="3102" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Azure数据工厂还支持连接各种azure实例的托管身份认证。在本演示中，提供了使用该身份访问SQL DB的步骤。要使用托管身份，请执行以下步骤。请访问<a class="ae jk" href="http://thelearnguru.com/azure-managed-identity-authentication-for-azure-sql-db-using-azure-data-factory/" rel="noopener ugc nofollow" target="_blank"><strong class="io hj">http://thelearnguru . com/azure-managed-identity-authentic ation-for-azure-SQL-db-using-azure-data-factory/</strong></a>了解提供托管身份认证所涉及的端到端步骤。</p><p id="eb44" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">1.为SQL DB设置AAD管理员的第一步id。此SQL管理员可以是Azure AD用户或组。</p><p id="d5e9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">2.连接到要从中复制数据的数据库，并执行以下查询:</p><p id="8f56" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">从外部提供者创建用户【您的数据工厂名称】；</strong></p><p id="bb69" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您可以使用门户或SSMS连接Azure DB。</p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es jl"><img src="../Images/67c840084b6c15a549407347fc00321e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*GX96KAflOq2Ecdtxx31kqQ.png"/></div></div></figure><p id="aa02" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">3.使用以下命令在SQL DB中授予数据工厂管理的身份权限:</p><p id="6c77" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">更改角色[角色名称]添加成员[您的数据工厂名称]；</strong></p><p id="bd6e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">4.现在配置Azure数据工厂链接服务并测试您的连接。</p><figure class="jm jn jo jp fd ij er es paragraph-image"><div class="er es ju"><img src="../Images/a51b3283b91823411eff3311b1a8da5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*3Pak4Q5AFVwKu-2Yeld2Hg.png"/></div></figure></div></div>    
</body>
</html>