<html>
<head>
<title>Five Steps to Create a Chess App 4/5</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建象棋应用程序的五个步骤4/5</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/five-steps-to-create-a-chess-app-4-5-8bcb38f0c652?source=collection_archive---------6-----------------------#2019-10-11">https://medium.com/analytics-vidhya/five-steps-to-create-a-chess-app-4-5-8bcb38f0c652?source=collection_archive---------6-----------------------#2019-10-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/9912f7286f49f1ecc2cf74ec13fe87d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QsyoMY6NSOUzUjKI3tj1qg.png"/></div></div></figure><div class=""/><div class=""><h2 id="aa87" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh dx translated">第四步:在板上画图</h2></div><p id="d6c9" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">前3个步骤的总结:</p><p id="f196" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">第一步:从头开始创建象棋应用程序</p><p id="f05d" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">步骤2:为我们的棋盘添加一个视图</p><p id="3fe9" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">第三步:画出8×8的棋盘</p><figure class="ke kf kg kh fd hk"><div class="bz dy l di"><div class="ki kj l"/></div></figure><p id="052c" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">我们需要12张图片，6张白色和6张黑色，来代表船上的32张图片。尝试搜索您喜欢的任何图像，并将其下载到例如“下载”文件夹中。本教程中使用的图像文件可以在<a class="ae kk" href="https://github.com/zhijunsheng/chess-ios/tree/master/chess/Assets.xcassets" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><figure class="ke kf kg kh fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kl"><img src="../Images/3121d1b43218624c1fffd69b77491702.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OGl_rydr9qSicDtxK5gVNw.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">12张图片，随时可用</figcaption></figure><figure class="ke kf kg kh fd hk"><div class="bz dy l di"><div class="ki kj l"/></div></figure><p id="4071" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">返回Xcode，在左侧导航面板上点击“Assets.xcassets”。我们将所有12张图片拖放到“AppIcon”下的白色大区域。</p><figure class="ke kf kg kh fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kq"><img src="../Images/46ed30687f886366765b3e6bb5ab799b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YWnqK_yKC-dFUrLQZmp0rg.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">单击左侧导航面板上的“Assets.xcassets”</figcaption></figure><p id="e194" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">您可以一个接一个地拖移片段，或者选择全部并一起拖移它们。</p><figure class="ke kf kg kh fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kl"><img src="../Images/187d459b759dac072cad0643896e0aaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dpm1gBUewew9V_R2SxlRNw.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">在取景器中选择所有12幅图像</figcaption></figure><p id="a8fb" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">完成后，这些片段在Xcode中看起来如下。我们将使用每个图像的名称来创建UIImage对象。例如，黑人主教图像的名称是“主教-黑人”，区分大小写。</p><figure class="ke kf kg kh fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kq"><img src="../Images/94dba4550bf94e96ded0b4cd2355cfd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QdTylqaM4MnSoglq-1AFYg.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">每个图像都有一个名称，例如“Biship-black”</figcaption></figure><p id="a25a" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">是时候写一些代码了。我们将创建一个表示片段的结构。右键单击左侧导航面板上的黄色“Chess”文件夹，然后选择“新建文件…”。选择“iOS”下的“Swift文件”。然后单击“下一步”按钮继续。</p><figure class="ke kf kg kh fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kq"><img src="../Images/68dcebcc59bc540fb2c735fe5f8871fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GuApRwv4YZq_M3qaQsgrLA.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">我们将创建一个Swift文件</figcaption></figure><p id="0caa" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">输入非常有创意的名字“ChessPiece ”,点击“创建”按钮。</p><figure class="ke kf kg kh fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kq"><img src="../Images/e4e27d672127352455d2ba02e1fa5e56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r1zva_ZL81TAhz9A4vOgqw.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">点击“创建”按钮，创建文件ChessPiece.swift</figcaption></figure><p id="fb64" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">这是它创建时的样子。</p><figure class="ke kf kg kh fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kq"><img src="../Images/da4047aff2902bff86835d3c74257321.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*teeD62sPBPM9_JSGgFXeKQ.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">创建时，ChessPiece.swift几乎是空的</figcaption></figure><p id="9fd1" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">我们需要两个整数“col”和“row”来表示逻辑棋盘上一个棋子的位置。每幅作品还保留一个字段“imageName”作为自己的图像名称，例如“Bishop-black”。当我们使用“Set”来包含ChessPiece类型的对象时，需要“Hashable”。</p><pre class="ke kf kg kh fd kr ks kt ku aw kv bi"><span id="8fec" class="kw kx ht ks b fi ky kz l la lb">import Foundation</span><span id="ffc3" class="kw kx ht ks b fi lc kz l la lb">struct ChessPiece: Hashable {<br/>    let col: Int<br/>    let row: Int<br/>    let imageName: String<br/>}</span></pre><figure class="ke kf kg kh fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kq"><img src="../Images/9e7c839b8964594ad6832a3eb492795a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fg9JUh1L7ssyrEfBw7afgg.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">struct ChessPiece有3个属性或字段</figcaption></figure><p id="6e9b" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">继续为我们的游戏引擎创建另一个结构，它将包含所有的部分。如果你听说过MVC设计模式，这就是M，意思是模型。</p><figure class="ke kf kg kh fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kq"><img src="../Images/cf2eff2e6ae94f5b473f3b3c3803f854.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GOx8bsAQzLDmKRosuaMBHA.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">在文件夹“Chess”下创建另一个swift文件</figcaption></figure><p id="1b34" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">键入“ChessEngine”并单击“创建”按钮继续。</p><figure class="ke kf kg kh fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kq"><img src="../Images/88826f120c16db4f9502c229d3a11cd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RWQDfzqMLWnhBOOOa8NngA.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">点击“创建”按钮，创建文件ChessEngine.swift</figcaption></figure><p id="9e01" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">ChessEngine.swift已创建，但仍为空。</p><figure class="ke kf kg kh fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kq"><img src="../Images/cf67795ddae26d5a80622d0c4eed3cd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sBNrzs6CCHlyLl7gpfd9Qg.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">在ChessPiece.swift之后，我们创建了ChessEngine.swift</figcaption></figure><p id="ac6d" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">ChessEngine有一套作品。我们创建一个方便的函数，将所有32个初始片段插入到属性“片段”中。</p><figure class="ke kf kg kh fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kq"><img src="../Images/786beaf7befdda18ed1aed8adee233a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W2Aarp2SzgD18k3BkJhrkw.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">创建属性“棋子”和函数“初始化游戏”</figcaption></figure><p id="485d" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">以下是ChessEngine.swift的完整代码:</p><pre class="ke kf kg kh fd kr ks kt ku aw kv bi"><span id="0343" class="kw kx ht ks b fi ky kz l la lb">import Foundation</span><span id="0aba" class="kw kx ht ks b fi lc kz l la lb">struct ChessEngine {<br/>    var pieces = Set&lt;ChessPiece&gt;()<br/>    <br/>    mutating func initializeGame() {<br/>        pieces.removeAll()<br/>        <br/>        // ...<br/>    }<br/>}</span></pre><p id="c628" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">将下面的代码放在上面的“// …”处。</p><pre class="ke kf kg kh fd kr ks kt ku aw kv bi"><span id="876e" class="kw kx ht ks b fi ky kz l la lb">pieces.insert(ChessPiece(col: 0, row: 0, imageName: "Rook-black"))<br/>pieces.insert(ChessPiece(col: 7, row: 0, imageName: "Rook-black"))<br/>pieces.insert(ChessPiece(col: 0, row: 7, imageName: "Rook-white"))<br/>pieces.insert(ChessPiece(col: 7, row: 7, imageName: "Rook-white"))</span><span id="75a1" class="kw kx ht ks b fi lc kz l la lb">pieces.insert(ChessPiece(col: 1, row: 0, imageName: "Knight-black"))<br/>pieces.insert(ChessPiece(col: 6, row: 0, imageName: "Knight-black"))<br/>pieces.insert(ChessPiece(col: 1, row: 7, imageName: "Knight-white"))<br/>pieces.insert(ChessPiece(col: 6, row: 7, imageName: "Knight-white"))</span><span id="fb33" class="kw kx ht ks b fi lc kz l la lb">pieces.insert(ChessPiece(col: 2, row: 0, imageName: "Bishop-black"))<br/>pieces.insert(ChessPiece(col: 5, row: 0, imageName: "Bishop-black"))<br/>pieces.insert(ChessPiece(col: 2, row: 7, imageName: "Bishop-white"))<br/>pieces.insert(ChessPiece(col: 5, row: 7, imageName: "Bishop-white"))</span><span id="08bc" class="kw kx ht ks b fi lc kz l la lb">pieces.insert(ChessPiece(col: 3, row: 0, imageName: "Queen-black"))<br/>pieces.insert(ChessPiece(col: 3, row: 7, imageName: "Queen-white"))</span><span id="5518" class="kw kx ht ks b fi lc kz l la lb">pieces.insert(ChessPiece(col: 4, row: 0, imageName: "King-black"))<br/>pieces.insert(ChessPiece(col: 4, row: 7, imageName: "King-white"))</span><span id="d692" class="kw kx ht ks b fi lc kz l la lb">pieces.insert(ChessPiece(col: 0, row: 1, imageName: "Pawn-black"))<br/>pieces.insert(ChessPiece(col: 1, row: 1, imageName: "Pawn-black"))<br/>pieces.insert(ChessPiece(col: 2, row: 1, imageName: "Pawn-black"))<br/>pieces.insert(ChessPiece(col: 3, row: 1, imageName: "Pawn-black"))<br/>pieces.insert(ChessPiece(col: 4, row: 1, imageName: "Pawn-black"))<br/>pieces.insert(ChessPiece(col: 5, row: 1, imageName: "Pawn-black"))<br/>pieces.insert(ChessPiece(col: 6, row: 1, imageName: "Pawn-black"))<br/>pieces.insert(ChessPiece(col: 7, row: 1, imageName: "Pawn-black"))</span><span id="fbb1" class="kw kx ht ks b fi lc kz l la lb">pieces.insert(ChessPiece(col: 0, row: 6, imageName: "Pawn-white"))<br/>pieces.insert(ChessPiece(col: 1, row: 6, imageName: "Pawn-white"))<br/>pieces.insert(ChessPiece(col: 2, row: 6, imageName: "Pawn-white"))<br/>pieces.insert(ChessPiece(col: 3, row: 6, imageName: "Pawn-white"))<br/>pieces.insert(ChessPiece(col: 4, row: 6, imageName: "Pawn-white"))<br/>pieces.insert(ChessPiece(col: 5, row: 6, imageName: "Pawn-white"))<br/>pieces.insert(ChessPiece(col: 6, row: 6, imageName: "Pawn-white"))<br/>pieces.insert(ChessPiece(col: 7, row: 6, imageName: "Pawn-white"))</span></pre><p id="86ea" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">让我们继续在ViewController.swift中添加2行代码。要创建ChessEngine的实例，请在“override func viewDidLoad() {”上方添加以下代码。</p><pre class="ke kf kg kh fd kr ks kt ku aw kv bi"><span id="d7cd" class="kw kx ht ks b fi ky kz l la lb">var chessEngine = ChessEngine()</span></pre><p id="b6ee" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">并在“super.viewDidLoad()”下添加以下代码来初始化我们的国际象棋游戏，即，将所有32个棋子部署到位。</p><pre class="ke kf kg kh fd kr ks kt ku aw kv bi"><span id="aa10" class="kw kx ht ks b fi ky kz l la lb">chessEngine.initializeGame()</span></pre><p id="2afb" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">现在我们到了这项任务中最棘手和最有趣的部分。我们需要在屏幕元素和代码之间建立联系。在我们的例子中，这意味着ctrl从白板视图拖动到ViewController.swift文件中的某个地方。在左侧导航面板上，首先单击ViewController.swift，然后按住“option”键并单击Main.storyboard</p><p id="a49c" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">单击右侧的白板视图将其选中。按住control键，开始从board view拖动到“override func viewDidLoad() {”上方的空白区域。当你放开鼠标，会弹出一个对话框。</p><figure class="ke kf kg kh fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ld"><img src="../Images/10798319bd10f4034ab3b84a990f4c33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qc_hWsuPanL6qg4KIMrRlg.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">拖动完成后会弹出一个对话框</figcaption></figure><p id="4cdb" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">将该连接命名为“boardView”。然后点击“连接”按钮隐藏对话框。</p><figure class="ke kf kg kh fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ld"><img src="../Images/4257e78879530ccd876c2e6b9097bf31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uFmTyTtiGD2OpWC3ccoa4w.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">输入“boardView”并点击“连接”按钮</figcaption></figure><p id="6cde" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">Xcode插入以下代码行。变量“boardView”代表屏幕上的白色视图。</p><pre class="ke kf kg kh fd kr ks kt ku aw kv bi"><span id="afc9" class="kw kx ht ks b fi ky kz l la lb">@IBOutlet weak var boardView: BoardView!</span></pre><figure class="ke kf kg kh fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ld"><img src="../Images/2982bc8d727779156c927d043ed15018.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D-uCWk7XVhuQOmD9rqkt3g.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">Xcode插入boardView类型的变量BoardView！</figcaption></figure><p id="71f2" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">现在让我们回到文件BoardView.swift，为pieces drawing添加代码。我们创建一个实例变量块类型集合<chesspiece>。把它想象成chessen engine中的shadow pieces盒子，它是chessen engine中定义的变量pieces。我们还创建了一个函数来绘制所有的部分。</chesspiece></p><figure class="ke kf kg kh fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kq"><img src="../Images/8cc1d82140805b2706e11c5c4a103dcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QieZHrlP9OCeIRrpYxn4Bg.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">在BoardView.swift中编写代码</figcaption></figure><p id="bba3" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">BoardView.swift中的完整代码如下。</p><pre class="ke kf kg kh fd kr ks kt ku aw kv bi"><span id="6c84" class="kw kx ht ks b fi ky kz l la lb">import UIKit</span><span id="e5a2" class="kw kx ht ks b fi lc kz l la lb">class BoardView: UIView {<br/>    var pieces = Set&lt;ChessPiece&gt;()</span><span id="0a18" class="kw kx ht ks b fi lc kz l la lb">    override func draw(_ rect: CGRect) {<br/>        drawBoard()<br/>        drawPieces()<br/>    }<br/>    <br/>    func drawPieces() {<br/>        for piece in pieces {<br/>            let pieceImage = UIImage(named: piece.imageName)<br/>            pieceImage?.draw(in: CGRect(x: piece.col * 80, y: piece.row * 80, width: 80, height: 80))<br/>        }<br/>    }</span><span id="87fa" class="kw kx ht ks b fi lc kz l la lb">    func drawBoard() {<br/>        drawTwoRowsAt(y: 0 * 80)<br/>        drawTwoRowsAt(y: 2 * 80)<br/>        drawTwoRowsAt(y: 4 * 80)<br/>        drawTwoRowsAt(y: 6 * 80)<br/>    }<br/>    <br/>    func drawTwoRowsAt(y: CGFloat) {<br/>        drawSquareAt(x: 1 * 80, y: y)<br/>        drawSquareAt(x: 3 * 80, y: y)<br/>        drawSquareAt(x: 5 * 80, y: y)<br/>        drawSquareAt(x: 7 * 80, y: y)<br/>        <br/>        drawSquareAt(x: 0 * 80, y: y + 80)<br/>        drawSquareAt(x: 2 * 80, y: y + 80)<br/>        drawSquareAt(x: 4 * 80, y: y + 80)<br/>        drawSquareAt(x: 6 * 80, y: y + 80)<br/>    }<br/>    <br/>    func drawSquareAt(x: CGFloat, y: CGFloat) {<br/>        let path = UIBezierPath(rect: CGRect(x: x, y: y, width: 80, height: 80))<br/>        UIColor.lightGray.setFill()<br/>        path.fill()<br/>    }<br/>}</span></pre><p id="26b2" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">返回文件ViewController.swift添加2行代码。第21行从chessEngine中的主块(框)更新boardView中的阴影块(框)。第22行告诉系统重新绘制屏幕上的所有内容。</p><figure class="ke kf kg kh fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kq"><img src="../Images/2cdbd7028ccad239e22267d3b9bb42a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LaFYcYzqMDKnAxIWswXHbQ.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">在chessEngine中初始化32个片段后，添加2行以重新呈现UI</figcaption></figure><p id="c62c" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">下面是ViewController.swift的完整代码。</p><pre class="ke kf kg kh fd kr ks kt ku aw kv bi"><span id="9dc8" class="kw kx ht ks b fi ky kz l la lb">import UIKit</span><span id="05c5" class="kw kx ht ks b fi lc kz l la lb">class ViewController: UIViewController {<br/>    <br/>    var chessEngine = ChessEngine()</span><span id="e5f3" class="kw kx ht ks b fi lc kz l la lb">    @IBOutlet weak var boardView: BoardView!<br/>    <br/>    override func viewDidLoad() {<br/>        super.viewDidLoad()<br/>        <br/>        chessEngine.initializeGame()<br/>        boardView.pieces = chessEngine.pieces<br/>        boardView.setNeedsDisplay()<br/>    }<br/>}</span></pre><p id="275e" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">运行应用程序来欣赏这些可爱的作品。</p><figure class="ke kf kg kh fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es le"><img src="../Images/cb83ea72722eff2d5eaaa53253cc2c1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2m5bhsRw7j20dWmLXFuC5Q.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">最初棋盘上有32枚棋子</figcaption></figure></div><div class="ab cl lf lg gp lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hb hc hd he hf"><p id="00a9" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated"><a class="ae kk" rel="noopener" href="/@zhijunsheng/five-steps-to-create-a-chess-app-1-5-a5c96bc99241?source=friends_link&amp;sk=707d73067918e809e45fcb10921b1dc6">第一步:创建一个空应用</a></p><p id="0b89" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated"><a class="ae kk" rel="noopener" href="/@zhijunsheng/five-steps-to-create-a-chess-app-2-5-22eb0e0d6d9c?source=friends_link&amp;sk=d8c4d711ede8e0dc910c6b35ed21145d">第二步:把一个视图放到屏幕上</a></p><p id="1f5f" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated"><a class="ae kk" rel="noopener" href="/@zhijunsheng/five-steps-to-create-a-chess-app-3-5-77a4f73f459b?source=friends_link&amp;sk=8f4572ecb12460b2e3f584e1a5a31d7e">第三步:画棋盘</a></p><p id="cd43" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated"><a class="ae kk" rel="noopener" href="/@zhijunsheng/five-steps-to-create-a-chess-app-4-5-8bcb38f0c652?source=friends_link&amp;sk=c9a974ec64e138d37fb6859ababd1a06">第四步:绘制棋子</a></p><p id="8d11" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated"><a class="ae kk" rel="noopener" href="/@zhijunsheng/five-steps-to-create-a-chess-app-5-5-761af7719a2e?source=friends_link&amp;sk=9099609bcefef2be067e11d42ef8e0a6">第五步:移动棋子</a></p></div></div>    
</body>
</html>