<html>
<head>
<title>Fetching an API with “fetch()”</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用“fetch()”获取API</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/fetching-an-api-with-fetch-e8d902811afa?source=collection_archive---------14-----------------------#2020-01-24">https://medium.com/analytics-vidhya/fetching-an-api-with-fetch-e8d902811afa?source=collection_archive---------14-----------------------#2020-01-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/7d0ecd6adc295da865fc22cbc3098be3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SC5rr7NZwSG7uNI5"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">伊利亚·巴甫洛夫在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="550a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">API或应用程序接口可以是编程世界中的许多东西。本质上，它们是一种可以从客户机传递到服务器的数据形式，反之亦然。这些数据可以是任何东西，从定义的函数到布尔值等等。它们之所以如此重要，是因为它们是你今天访问的许多网站的组成部分。在谈论API时，“消费”这个词经常被传来传去。这是获取API并对其进行解码以实现其目的的过程，因为否则它将毫无用处。当您阅读本文时，请记住API只是数据的一种形式，仅此而已。以最简单的形式，它们可以与您的第一个JavaScript应用程序相提并论，或者像您希望的那样复杂。这完全取决于使用它的目的，以及它是否达到了目的。</p><h2 id="7357" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">JSON</h2><p id="5a88" class="pw-post-body-paragraph iv iw hi ix b iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">API的一种流行形式是以“JSON”格式或JavaScript对象符号组成的。这是一种当今许多API都遵循的格式，因为它非常容易阅读。让我们看看它是什么样子的。</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="9dc9" class="jt ju hi ky b fi lc ld l le lf">{<br/>  "puppies": ["golden retriever", "beagle", "pug"]<br/>}</span></pre><p id="81f5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">JSON基本上只是一个JavaScript对象，它的键值对有一些关键的不同。第一个也是最引人注目的是“钥匙”，在这种情况下是“小狗”。它有括号，而在普通的JavaScript对象中,“key”上没有括号。这是因为编译后的JSON是一个巨型字符串。第二个区别是包含对象没有变量名。这是因为当我们消费它时，我们将它存储在一个变量中。</p><p id="46c2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">想想看，JSON真的很酷，因为字符串是最简单的数据形式之一，这使得它成为一种非常有效的数据传输形式。JSON数据被消费后，它采用常规JavaScript对象的形式，允许开发人员对其进行操作。很聪明吧？</p><h2 id="2b14" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">强烈的</h2><p id="cbb7" class="pw-post-body-paragraph iv iw hi ix b iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">现在使用JSON数据非常简单，但过去要复杂得多。今天，我们使用一种基于承诺的方法，称为“获取”。如果你不知道承诺是什么，它基本上只是一个函数，当它解析为真时抛出一个值，当为假时抛出另一个值。我们来看看“取”吧。</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="ba3a" class="jt ju hi ky b fi lc ld l le lf">fetch("API URL or the directory location")</span></pre><p id="cadf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Fetch将API的位置作为参数，并对其进行处理。然而，要使用它的数据，我们需要“处理”它。承诺需要处理，因为它们依赖于它。一旦“fetch”被激发，它将吐出一个值。为了消耗这个值，使用了“then”方法。</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="1b35" class="jt ju hi ky b fi lc ld l le lf">fetch("API URL or the directory location").then(data =&gt; console.log(data))</span></pre><p id="4f1a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，当承诺解析为真时，就向其传递数据。“data”变量是接收到的未处理的JSON数据。在处理这些数据之前，我们必须履行另一端的承诺。这可以通过“catch”方法来实现。“catch”方法可以链接到“then”方法上。当承诺被证明为假时，触发“catch”。使用这种方法很重要，因为在使用API时可能会出现错误，因为服务器并不总是可靠的。这允许开发人员通知客户端他们的错误。错误处理是另一天的另一个主题。</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="8b93" class="jt ju hi ky b fi lc ld l le lf">fetch("API URL or the directory location").then(data =&gt; console.log(data)).catch(error =&gt; console.log(error))</span></pre><h2 id="2ff3" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">处理JSON</h2><p id="686c" class="pw-post-body-paragraph iv iw hi ix b iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">为了使用JSON数据，我们需要将其转换成JavaScript对象。这就是我们使用“json”方法的时候。这个方法附加到JSON对象上，将它转换成可以使用的常规JavaScript对象。</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="55dd" class="jt ju hi ky b fi lc ld l le lf">fetch("API URL or the directory location")<br/>.then(data =&gt; {<br/>  data.json()<br/>})<br/>.catch(error =&gt; console.log(error))</span></pre><p id="eb41" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但是你猜怎么着？“json”方法是另一个可以解决或拒绝的承诺。如果数据是有效的JSON数据，它将解析为true，否则为false。对于要使用的数据，另一个“then”方法被链接到“json”方法上。</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="24b4" class="jt ju hi ky b fi lc ld l le lf">fetch("API URL or the directory location")<br/>.then(data =&gt; {<br/>  data.json()<br/>.then(data =&gt; {<br/>sendTheData(data)<br/>})<br/>})<br/>.catch(error =&gt; console.log(error))</span></pre><p id="c272" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">就是这样！一旦数据被处理成一个常规的JavaScript对象，开发人员就能够操作它。在本例中，我使用了一个名为“sendTheData”的函数，并将“Data”作为参数，这样我就可以在我的脚本中使用它。一旦承诺被灌输到你的头脑中，使用fetch来消费你的API将变得非常容易！</p><p id="351f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">希望这有助于您更好地理解API！</p></div></div>    
</body>
</html>