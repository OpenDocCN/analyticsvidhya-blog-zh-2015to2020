<html>
<head>
<title>Refactoring Flutter Widgets into Sub widgets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Flutter小部件重构为子小部件</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/refactoring-flutter-widgets-into-sub-widgets-3cf0f1f29645?source=collection_archive---------5-----------------------#2020-06-10">https://medium.com/analytics-vidhya/refactoring-flutter-widgets-into-sub-widgets-3cf0f1f29645?source=collection_archive---------5-----------------------#2020-06-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div class="er es hg"><img src="../Images/70df902c133946d94fb4326cd8da0ba5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*_lDsdGAwFucQWF5nPAEbkQ.png"/></div></figure><div class=""/><p id="90d1" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">大家好，今天我将讨论构建一个flutter应用程序最重要的部分是代码重构。为了代码的可重用性，在每个编程中把你的代码分成子部分是非常有用的，也许你已经创建了一个按钮，你想在整个应用程序中使用同一个按钮，这样你就可以把它重构到一个单独的文件中。</p><p id="5e8d" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">步骤1:创建一个名为“代码重构flutter”的flutter项目。</p><p id="e9f0" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">步骤2:创建一个项目结构，如下图所示:</p><figure class="jl jm jn jo fd hk er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es jk"><img src="../Images/bb253d5c35c132154b193451eba6c4e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Jttqc2Tvxu5oupBfQB9lQ.png"/></div></div></figure><p id="c168" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">步骤3:在screens文件夹中创建home_screen.dart，并复制粘贴以下代码:</p><pre class="jl jm jn jo fd jt ju jv jw aw jx bi"><span id="a3bd" class="jy jz hp ju b fi ka kb l kc kd"><strong class="ju hq">import 'package:flutter/material.dart'</strong>;<br/><br/><strong class="ju hq">class </strong>HomeScreen <strong class="ju hq">extends </strong>StatelessWidget {<br/>  @override<br/>  Widget build(BuildContext context) {<br/>    <strong class="ju hq">return </strong>Scaffold(<br/>      appBar: AppBar(<br/>        title: Text(<strong class="ju hq">'HomeScreen'</strong>),<br/>      ),<br/>    );<br/>  }<br/>}</span></pre><p id="f5b4" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">步骤4:从main.dart中删除所有代码，并复制粘贴以下代码:</p><pre class="jl jm jn jo fd jt ju jv jw aw jx bi"><span id="d21c" class="jy jz hp ju b fi ka kb l kc kd"><strong class="ju hq">import 'package:flutter/material.dart'</strong>;<br/><strong class="ju hq">import './screens/home_screen.dart'</strong>;<br/><br/><strong class="ju hq">void </strong>main() =&gt; runApp(MyApp());<br/><br/><strong class="ju hq">class </strong>MyApp <strong class="ju hq">extends </strong>StatelessWidget {<br/>  @override<br/>  Widget build(BuildContext context) {<br/>    <strong class="ju hq">return </strong>MaterialApp(<br/>      home: HomeScreen(),<br/>      theme: ThemeData(<br/>        primaryColor: Colors.<em class="ke">deepOrangeAccent</em>,<br/>        accentColor: Colors.<em class="ke">amberAccent</em>,<br/>      ),<br/>    );<br/>  }<br/>}</span></pre><p id="e3ff" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">步骤5:让我们创建home_screen.dart的一个body部分，复制粘贴以下代码:</p><pre class="jl jm jn jo fd jt ju jv jw aw jx bi"><span id="6034" class="jy jz hp ju b fi ka kb l kc kd"><strong class="ju hq">import 'package:flutter/material.dart'</strong>;<br/><br/><strong class="ju hq">class </strong>HomeScreen <strong class="ju hq">extends </strong>StatelessWidget {<br/>  @override<br/>  Widget build(BuildContext context) {<br/>    <strong class="ju hq">return </strong>Scaffold(<br/>      appBar: AppBar(<br/>        title: Text(<strong class="ju hq">'HomeScreen'</strong>),<br/>      ),<br/>      body: Column(<br/>        mainAxisAlignment: MainAxisAlignment.<strong class="ju hq">center</strong>,<br/>        children: [<br/>          Padding(<br/>            padding: <strong class="ju hq">const </strong>EdgeInsets.all(8.0),<br/>            child: TextField(<br/>              keyboardType: TextInputType.<em class="ke">text</em>,<br/>              decoration: InputDecoration(<br/>                labelText: <strong class="ju hq">'Enter your name'</strong>,<br/>                icon: Icon(Icons.<em class="ke">person_pin</em>),<br/>              ),<br/>            ),<br/>          ),<br/>          Padding(<br/>            padding: <strong class="ju hq">const </strong>EdgeInsets.all(8.0),<br/>            child: TextField(<br/>              decoration: InputDecoration(<br/>                labelText: <strong class="ju hq">'Enter your email'</strong>,<br/>                icon: Icon(Icons.<em class="ke">email</em>),<br/>              ),<br/>              keyboardType: TextInputType.<em class="ke">emailAddress</em>,<br/>            ),<br/>          ),<br/>          Padding(<br/>            padding: <strong class="ju hq">const </strong>EdgeInsets.all(8.0),<br/>            child: TextField(<br/>              keyboardType: TextInputType.<em class="ke">number</em>,<br/>              decoration: InputDecoration(<br/>                labelText: <strong class="ju hq">'Enter your number'</strong>,<br/>                icon: Icon(Icons.<em class="ke">phone_android</em>),<br/>              ),<br/>            ),<br/>          ),<br/>          Padding(<br/>            padding: <strong class="ju hq">const </strong>EdgeInsets.all(8.0),<br/>            child: Row(<br/>              mainAxisAlignment: MainAxisAlignment.<strong class="ju hq">end</strong>,<br/>              children: [<br/>                RaisedButton(<br/>                  color: Theme.<em class="ke">of</em>(context).<strong class="ju hq">accentColor</strong>,<br/>                  onPressed: () {},<br/>                  child: Text(<strong class="ju hq">'Save'</strong>),<br/>                ),<br/>                SizedBox(<br/>                  width: 5,<br/>                ),<br/>                RaisedButton(<br/>                  color: Theme.<em class="ke">of</em>(context).<strong class="ju hq">accentColor</strong>,<br/>                  onPressed: () {},<br/>                  child: Text(<strong class="ju hq">'Clear'</strong>),<br/><br/>                ),<br/>              ],<br/>            ),<br/>          )<br/>        ],<br/>      ),<br/>    );<br/>  }<br/>}</span></pre><p id="ed5a" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在上面的代码中，你可以清楚地看到窗口小部件的重复出现了几次，在上面的例子中多次使用同一个窗口小部件是不好的。 将这些小部件放在一个单独的文件中很好，这样我们就可以在我们的整个应用程序中使用它，或者在我们想要使用它的地方使用它，这样我们就可以避免一次又一次地重复多行代码，通过分离文件，我们可以更容易地导入该文件并在我们的文件中使用该小部件。</p><p id="1bfc" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">步骤6:首先，让我们将文本字段重构为一个单独的文件，转到lib中的widgets文件夹，创建一个名为app_text_field的新文件，并复制粘贴以下代码:</p><pre class="jl jm jn jo fd jt ju jv jw aw jx bi"><span id="825f" class="jy jz hp ju b fi ka kb l kc kd"><strong class="ju hq">import 'package:flutter/material.dart'</strong>;<br/><br/><strong class="ju hq">class </strong>AppTextField <strong class="ju hq">extends </strong>StatelessWidget {<br/>  <strong class="ju hq">final </strong>String <strong class="ju hq">title</strong>;<br/>  <strong class="ju hq">final inputType</strong>;<br/><br/>  AppTextField({@required <strong class="ju hq">this</strong>.<strong class="ju hq">title</strong>, @required <strong class="ju hq">this</strong>.<strong class="ju hq">inputType</strong>});<br/><br/>  @override<br/>  Widget build(BuildContext context) {<br/>    <strong class="ju hq">return </strong>Padding(<br/>      padding: EdgeInsets.all(10),<br/>      child: TextField(<br/>        keyboardType: <strong class="ju hq">inputType</strong>,<br/>        decoration: InputDecoration(<br/>          labelText: <strong class="ju hq">title</strong>,<br/>          icon: Icon(Icons.<em class="ke">phone_android</em>),<br/>        ),<br/>      ),<br/>    );<br/>  }<br/>}</span></pre><p id="2873" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">当我们在文件中使用这个部件时，我们必须将标题和输入类型传递到它的构造函数中。</p><p id="30d9" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">步骤7:让我们将app_text_field.dart导入home_screen.dart并复制粘贴以下代码:</p><pre class="jl jm jn jo fd jt ju jv jw aw jx bi"><span id="bca2" class="jy jz hp ju b fi ka kb l kc kd"><strong class="ju hq">import 'package:flutter/material.dart'</strong>;<br/><strong class="ju hq">import '../widgets/app_text_field.dart'</strong>;<br/><br/><strong class="ju hq">class </strong>HomeScreen <strong class="ju hq">extends </strong>StatelessWidget {<br/>  @override<br/>  Widget build(BuildContext context) {<br/>    <strong class="ju hq">return </strong>Scaffold(<br/>      appBar: AppBar(<br/>        title: Text(<strong class="ju hq">'HomeScreen'</strong>),<br/>      ),<br/>      body: Column(<br/>        mainAxisAlignment: MainAxisAlignment.<strong class="ju hq">center</strong>,<br/>        children: [<br/><br/>          AppTextField(<br/>            title: <strong class="ju hq">'Enter your name'</strong>,<br/>            inputType: TextInputType.<em class="ke">text</em>,<br/>            icon: Icon(Icons.<em class="ke">person_pin</em>),<br/>          ),<br/>          AppTextField(<br/>            title: <strong class="ju hq">'Enter your email'</strong>,<br/>            inputType: TextInputType.<em class="ke">emailAddress</em>,<br/>            icon: Icon(Icons.<em class="ke">email</em>),<br/>          ),<br/>          AppTextField(<br/>            title: <strong class="ju hq">'Enter your phone number'</strong>,<br/>            inputType: TextInputType.<em class="ke">phone</em>,<br/>            icon: Icon(Icons.<em class="ke">phone_android</em>),<br/>          ),<br/><br/><br/>          Padding(<br/>            padding: <strong class="ju hq">const </strong>EdgeInsets.all(8.0),<br/>            child: Row(<br/>              mainAxisAlignment: MainAxisAlignment.<strong class="ju hq">end</strong>,<br/>              children: [<br/>                RaisedButton(<br/>                  color: Theme.<em class="ke">of</em>(context).<strong class="ju hq">accentColor</strong>,<br/>                  onPressed: () {},<br/>                  child: Text(<strong class="ju hq">'Save'</strong>),<br/>                ),<br/>                SizedBox(<br/>                  width: 5,<br/>                ),<br/>                RaisedButton(<br/>                  color: Theme.<em class="ke">of</em>(context).<strong class="ju hq">accentColor</strong>,<br/>                  onPressed: () {},<br/>                  child: Text(<strong class="ju hq">'Clear'</strong>),<br/>                ),<br/>              ],<br/>            ),<br/>          )<br/>        ],<br/>      ),<br/>    );<br/>  }<br/>}</span></pre><p id="e75b" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如你所见，代码重构节省了许多代码行，代码重构使我们的主窗口小部件可读性更好，更容易理解。</p><p id="dc15" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">步骤8:现在来看凸起的按钮，你可以看到它们也是重复的，所以我们也可以将其重构为一个单独的文件，在widgets文件夹中创建一个名为“app_button.dart”的新文件，并复制粘贴以下代码:</p><pre class="jl jm jn jo fd jt ju jv jw aw jx bi"><span id="926c" class="jy jz hp ju b fi ka kb l kc kd"><strong class="ju hq">import 'package:flutter/material.dart'</strong>;<br/><br/><strong class="ju hq">class </strong>AppButton <strong class="ju hq">extends </strong>StatelessWidget {<br/>  <strong class="ju hq">final title</strong>;<br/>  AppButton(<strong class="ju hq">this</strong>.<strong class="ju hq">title</strong>);<br/>  @override<br/>  Widget build(BuildContext context) {<br/>    <strong class="ju hq">return </strong>Padding(<br/>      padding: <strong class="ju hq">const </strong>EdgeInsets.all(10.0),<br/>      child: RaisedButton(<br/>        color: Theme.<em class="ke">of</em>(context).<strong class="ju hq">accentColor</strong>,<br/>        onPressed: () {},<br/>        child: Text(<strong class="ju hq">title</strong>),<br/>      ),<br/>    );<br/>  }<br/>}</span></pre><p id="f2f8" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">步骤9:让我们将app_button.dart导入到我们的home_screen.dart中，并替换下面的行代码:</p><pre class="jl jm jn jo fd jt ju jv jw aw jx bi"><span id="7eca" class="jy jz hp ju b fi ka kb l kc kd">Row(<br/>  mainAxisAlignment: MainAxisAlignment.<strong class="ju hq">end</strong>,<br/>  children: [<br/>    AppButton(<strong class="ju hq">'Save'</strong>),<br/>    AppButton(<strong class="ju hq">'Clear'</strong>),<br/>  ],<br/>),</span></pre><p id="5274" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在你可以看到我们的home_screen.dart小部件已经被完全重构，不仅对你，对其他开发者都是可读的、可理解的。为了代码的可重用性，将代码重构到一个单独的文件中总是好的。这节省了更多的代码行，也节省了您的时间。</p><p id="86db" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这就是今天的全部内容，我希望你清楚这一点，因为重构代码是你的flutter应用程序的重要组成部分。</p><p id="aaa8" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这将是我们刚刚创建的应用程序的输出。</p><figure class="jl jm jn jo fd hk er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es kf"><img src="../Images/1ede176706a37e4722d3f127fc71debb.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/format:webp/1*84Q_PhnI88Jjy3Jsp2EHPQ.png"/></div></div></figure><p id="13c5" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果你把这个最重要的概念变成简单易行的步骤，别忘了离开clap，跟我来。❤</p><p id="0646" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Github回购链接:</p><div class="hh hi ez fb hj kg"><a href="https://github.com/Mashood97/Code-refactoring-in-flutter" rel="noopener  ugc nofollow" target="_blank"><div class="kh ab dw"><div class="ki ab kj cl cj kk"><h2 class="bd hq fi z dy kl ea eb km ed ef ho bi translated">mashood 97/代码重构</h2><div class="kn l"><h3 class="bd b fi z dy kl ea eb km ed ef dx translated">新的颤振应用。这个项目是颤振应用的起点。一些资源让你…</h3></div><div class="ko l"><p class="bd b fp z dy kl ea eb km ed ef dx translated">github.com</p></div></div><div class="kp l"><div class="kq l kr ks kt kp ku hl kg"/></div></div></a></div><p id="983e" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">不要忘记开始回购，也请关注我，在Github ❤获得更多精彩的回购。</p><p id="a20a" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">下面提到了我的另外两篇文章，也可以看看:</p><ol class=""><li id="7caa" class="kv kw hp io b ip iq it iu ix kx jb ky jf kz jj la lb lc ld bi translated">表单及其验证:</li></ol><p id="8770" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><a class="ae le" rel="noopener" href="/@mashoodsidd97/forms-and-its-validation-in-flutter-1c2b3f9c985c">https://medium . com/@ mashoodsidd 97/forms-and-its-validation-in-flutter-1c 2 B3 F9 c 985 c</a></p><p id="17b3" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">2.使用提供商包的firebase的Flutter电话认证:</p><p id="8317" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><a class="ae le" rel="noopener" href="/@mashoodsidd97/flutter-phone-authentication-with-firebase-using-provider-package-55ffbce7c361">https://medium . com/@ mashoodsidd 97/flutter-phone-authentic ation-with-firebase-using-provider-package-55 ffbce 7c 361</a></p></div></div>    
</body>
</html>