<html>
<head>
<title>OpenCv Perspective Transformation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">OpenCv透视变换</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/opencv-perspective-transformation-9edffefb2143?source=collection_archive---------0-----------------------#2020-06-26">https://medium.com/analytics-vidhya/opencv-perspective-transformation-9edffefb2143?source=collection_archive---------0-----------------------#2020-06-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><p id="30d0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果您想要正确对齐图像，透视变换是一个非常有用的功能。在应用透视变换后，它以直线方式变换图像。<br/>这种情况的一个典型例子是，将表格上的页面变换为仅选择页面并进行变换，使其显示为图像的俯视图</p><p id="6c01" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在我们进入OpenCv透视变换函数之前，我们将稍微了解一下公式、算法的样子以及幕后的情况。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es jk"><img src="../Images/6e174deb4fef3f519cd11f5ad3eb1ba6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hM1WgvKKnUzDcECPbSmbuw.png"/></div></div></figure><p id="2462" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi jw translated"><span class="l jx jy jz bm ka kb kc kd ke di"/>上图左边有— <br/> <em class="kf">坐标[[50，0]，[150，0]，[0，200]，[200，200]] <br/> </em>需要转换到新坐标— <em class="kf"> <br/>新坐标[[0，0]，[200，0]，[0，200]，[200，200]] </em></p></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><p id="5e76" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">下面给出的计算示例— </strong></p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es kg"><img src="../Images/7257c9a686e08094bed614978c92926b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X-pBUmHM04ZSIj1hrMIFTg.png"/></div></div></figure><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es kh"><img src="../Images/0fd46283200fbaf44807bdad6eed00a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*JokB9YfDx0YDcoM2moiXHQ.png"/></div></figure></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><p id="dfd7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">下面是第二个计算示例</strong></p><div class="jl jm jn jo fd ab cb"><figure class="ki jp kj kk kl km kn paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><img src="../Images/7aef198f08d077b9ae6d1d9bd6bf87c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*A289U6P8doUlqbLgw4mhBA.png"/></div></figure><figure class="ki jp ko kk kl km kn paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><img src="../Images/16d3330092d31ad19c7fa67c81763f3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1054/format:webp/1*WOzTtAdDcKMGPVexLgIoXQ.png"/></div></figure></div><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es kp"><img src="../Images/54ffba6a5040bd7f91398ca0fc8be87a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Femzf646TRlW4mOGebHBMw.png"/></div></div></figure><p id="ff05" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">从图中可以看出，所有水平平行线在变换后都保持平行。变换后垂直平行线不平行。</p><h2 id="791e" class="kq kr hi bd ks kt ku kv kw kx ky kz la ix lb lc ld jb le lf lg jf lh li lj lk bi translated">OpenCv中透视变换的实现</h2><pre class="jl jm jn jo fd ll lm ln lo aw lp bi"><span id="bfe2" class="kq kr hi lm b fi lq lr l ls lt">import cv2<br/>from operator import itemgetter<br/>from glob import glob<br/>import matplotlib.pyplot as plt</span><span id="be18" class="kq kr hi lm b fi lu lr l ls lt">paper = cv2.imread('./Photos/book.jpg')<br/># Coordinates that you want to Perspective Transform<br/>pts1 = np.float32([[219,209],[612,8],[380,493],[785,271]])<br/># Size of the Transformed Image<br/>pts2 = np.float32([[0,0],[500,0],[0,400],[500,400]])<br/>for val in pt1:<br/>    cv2.circle(paper,(val[0],val[1]),5,(0,255,0),-1)<br/>M = cv2.getPerspectiveTransform(pt1,pts2)<br/>dst = cv2.warpPerspective(paper,M,(500,400))<br/>plt.imshow(dst)</span></pre><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es lv"><img src="../Images/83ed04dbfc1a25a75ecf24a2e5c9f950.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-qWQc0nXeagI8ecq4S0Ksw.jpeg"/></div></div></figure><p id="213b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">从上图中可以看出，透视变换函数如何保持图像中的水平线，并设法获得纸张的俯视图。下面给出了更多的示例图像</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es lw"><img src="../Images/a7bf17d83beb0676656a75ab716d77fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yG_E_9uMiV1bbLV2WyLJAA.jpeg"/></div></div></figure><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es lx"><img src="../Images/923a6297793f5fae8d07a85843043aeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*27DL54yaw4QG3MVhpt1Qvg.jpeg"/></div></div></figure><p id="875d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">参考—<br/><a class="ae ly" href="https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_geometric_transformations/py_geometric_transformations.html" rel="noopener ugc nofollow" target="_blank">https://opencv-python-tutroals . readthedocs . io/en/latest/py _ tutorials/py _ imgproc/py _ geometric _ transformations/py _ geometric _ transformations . html</a><br/><a class="ae ly" href="http://jlouthan.github.io/perspective-transform/examples/test-ui/index.html" rel="noopener ugc nofollow" target="_blank">http://jlouthan . github . io/perspective-transform/examples/test-ui/index . html</a></p></div></div>    
</body>
</html>