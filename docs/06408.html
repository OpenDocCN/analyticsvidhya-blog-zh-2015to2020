<html>
<head>
<title>Docker : Practical Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Docker:实用指南</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/docker-practical-guide-421507289b13?source=collection_archive---------12-----------------------#2020-05-21">https://medium.com/analytics-vidhya/docker-practical-guide-421507289b13?source=collection_archive---------12-----------------------#2020-05-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="a3cb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你们大多数人可能听说过码头工人。Docker在开发者中非常有名。Docker为开发、运输和部署提供标准化单元的打包软件。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/41098664fa32344c2b1033234243beef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s-YgL1NW7evYyCBWI-7w8Q.png"/></div></div></figure><h1 id="af9f" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">docker是什么？</strong></h1><p id="28c3" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">答案很简单:Docker是使用操作系统级虚拟化的容器化技术。这是一种不同于虚拟盒子所使用的技术。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ks"><img src="../Images/fe0387a1824be3b0a072eb7fe99bac0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rMDb3ZZ8xcW9vwr80fGv0w.png"/></div></div></figure><p id="5778" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">虚拟机箱:</strong>虚拟机箱是在硬件级别提供隔离的虚拟机管理程序。基本上，每个虚拟机都有自己的操作系统，因此应用程序、必要的二进制文件和库占用了数十GB。此外，虚拟机速度较慢。</p><p id="c7c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Docker  : Docker在软件层面提供虚拟化。因此docker与主机操作系统共享一些进程。由于docker在软件级别提供虚拟化，所以它被称为容器化。Docker消除了虚拟机管理程序和对客户操作系统的需求。因此，Docker提供了高效的虚拟化，而且速度不慢。此外，Docker容器是可移植的，因此它可以在任何主机上工作。</p><p id="a992" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Docker支持Linux、MacOS和Windows。</p><h1 id="85ea" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">Docker的优势:</h1><ol class=""><li id="f917" class="kt ku hi ih b ii kn im ko iq kv iu kw iy kx jc ky kz la lb bi translated">安全:Docker在另一个层面上提供了安全性。使用容器部署的应用程序与其他应用程序是隔离的。</li><li id="dd0c" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">轻量级:因为容器与主机系统共享内核，所以容器不需要包含操作系统，所以它将提高运输和部署的速度。</li></ol><h1 id="1b57" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">如何使用Docker？</strong></h1><p id="32a5" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">Docker可以从<a class="ae lh" href="https://docs.docker.com/install/" rel="noopener ugc nofollow" target="_blank">官方指南</a>中安装。本指南涵盖了所有平台Windows、MacOS和Linux的安装。</p><p id="0569" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦安装了docker，用户可以在终端中简单地运行<code class="du li lj lk ll b">docker</code>命令。它将提供所有可以使用的命令类型。</p><p id="8ddc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在VMBox中，我们习惯于使用ISO文件运行操作系统。在docker的情况下，我们有一个图像。你可以在<a class="ae lh" href="https://hub.docker.com/search?q=&amp;type=image" rel="noopener ugc nofollow" target="_blank"> Docker Hub </a>简单浏览大量图片。这些映像是操作系统、数据库应用程序或任何其他应用程序的映像。我们将做几个任务来理解docker是如何工作的。</p><h1 id="a6d3" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">著名的Hello World使用Docker</h1><p id="025f" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">在终端中运行以下命令:</p><pre class="je jf jg jh fd lm ll ln lo aw lp bi"><span id="9374" class="lq jq hi ll b fi lr ls l lt lu">docker run hello-world</span></pre><p id="784f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你会受到码头工人的热情欢迎！消息。如果你没有看到这条信息，那么Docker安装有问题。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lv"><img src="../Images/0fd466183bb037f4c93b0c999c443be5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*YL4P4Iu9nLirg7x3KxowdQ.png"/></div><figcaption class="lw lx et er es ly lz bd b be z dx translated">Docker Hello World消息</figcaption></figure><p id="8427" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以使用下面给定的命令查看当前安装在系统中的映像列表。</p><pre class="je jf jg jh fd lm ll ln lo aw lp bi"><span id="24be" class="lq jq hi ll b fi lr ls l lt lu">docker images</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ma"><img src="../Images/3b42472a624d2060f23fea603bd06d3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cRrg3TCxq666d5UI2ab3Eg.png"/></div></div><figcaption class="lw lx et er es ly lz bd b be z dx translated">显示系统中安装的所有图像的命令</figcaption></figure><h1 id="83a1" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">使用Ubuntu镜像的Apache web服务器</strong></h1><p id="9f66" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">使用以下命令安装Ubuntu:</p><pre class="je jf jg jh fd lm ll ln lo aw lp bi"><span id="4083" class="lq jq hi ll b fi lr ls l lt lu">docker pull ubuntu</span></pre><p id="cc2d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，上面的命令会检查系统中是否已经存在Ubuntu镜像，如果没有安装，它会从docker hub中获取。你会注意到图像的大小会比实际的Ubuntu ISO文件小很多。怎么会？因为Ubuntu镜像不包含OS /内核，因为docker使用主机的内核。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mb"><img src="../Images/236ddf433c7538ba55108df388f8f7c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/format:webp/1*AgKbWG0q9WbzaY8FYzGgAw.png"/></div><figcaption class="lw lx et er es ly lz bd b be z dx translated">Docker提取Ubuntu图像</figcaption></figure><p id="0ef2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们可以使用以下命令启动Ubuntu容器:</p><pre class="je jf jg jh fd lm ll ln lo aw lp bi"><span id="b681" class="lq jq hi ll b fi lr ls l lt lu">docker run -it --rm -p 8080:80 ubuntu</span></pre><p id="81db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，run属性将选择图像并创建容器。-它会给出一个和任何终端一样的交互外壳，-rm会在你退出后移除容器，-p会把容器的端口暴露给外部的主机，最后是镜像名称。</p><p id="7f1b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦你运行这个命令，你将会受到Ubuntu命令提示符的欢迎。现在，运行你最喜欢的命令，看看它有多棒。为了好玩，我将运行下面的命令。</p><pre class="je jf jg jh fd lm ll ln lo aw lp bi"><span id="30ec" class="lq jq hi ll b fi lr ls l lt lu">cat /etc/os-release</span></pre><p id="67d8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你会看到很多关于图片名称和版本的信息。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mc"><img src="../Images/be72d6b0750b8e64c94cb011c8335575.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*n2jC5v-pgK60JF0ZXgpKJA.png"/></div></div><figcaption class="lw lx et er es ly lz bd b be z dx translated">显示发布名称的docker ubuntu实例</figcaption></figure><p id="0e85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，更新ubuntu并安装apache web服务器。</p><pre class="je jf jg jh fd lm ll ln lo aw lp bi"><span id="e2d4" class="lq jq hi ll b fi lr ls l lt lu">apt update<br/>apt install apache2</span></pre><p id="7e7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一件事是使用这个命令启动Apache web服务器</p><pre class="je jf jg jh fd lm ll ln lo aw lp bi"><span id="4fdd" class="lq jq hi ll b fi lr ls l lt lu">apache2ctl start</span></pre><p id="528d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦完成，你可以在浏览器中输入<a class="ae lh" href="http://localhost:8080," rel="noopener ugc nofollow" target="_blank"> <em class="md"> http://localhost:8080、</em> </a> <em class="md"> </em>和<em class="md"> </em>你将会看到Apache Ubuntu的默认页面。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es me"><img src="../Images/bea881b67e5d699cc1d74d306abc571b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W_8EKhnpGPqxDCdxI4t7-g.png"/></div></div></figure><p id="fa3d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以在docker中安装任何东西，就像在真正的操作系统中一样。</p><h1 id="5932" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">为什么要把所有东西都装在容器里？</strong></h1><p id="cf5c" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">让我们什么都不做，只运行Apache服务器。在这里，您可以利用预先构建的映像。你可以在我之前提到的<a class="ae lh" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker Hub </a>中找到一堆图片。你可以找到你最喜欢的语言、工具或软件的精彩图片。您还可以在Docker Hub的Explore中找到顶级预构建图像。</p><p id="8113" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们毫不费力地安装Apache服务器。</p><p id="1c7d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行下面的命令来运行Apache映像，它是正式的映像。</p><pre class="je jf jg jh fd lm ll ln lo aw lp bi"><span id="506c" class="lq jq hi ll b fi lr ls l lt lu">docker run --rm -it -p 8080:80 httpd:2.4</span></pre><p id="ec5f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在你的网络浏览器中输入<code class="du li lj lk ll b">localhost:8080</code>，然后嘣！您已经准备好运行Apache服务器，您将很高兴在web浏览器中看到“它工作了”。</p><p id="8290" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这还不是全部，你还可以用Docker做更多的事情。假设您想安装自己选择的软件，并且不想每次都运行命令，那么您就有救了。</p><p id="7adb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有Dockerfile可以为你配置图像。让我们从在Ubuntu中安装相同的Apache web服务器开始。</p><p id="40be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们创建一个空目录，将以下内容放入<code class="du li lj lk ll b">Dockerfile</code>。</p><pre class="je jf jg jh fd lm ll ln lo aw lp bi"><span id="01c1" class="lq jq hi ll b fi lr ls l lt lu">FROM ubuntu:latest<br/>RUN apt update<br/>RUN apt install apache2 -y</span></pre><p id="dc41" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">FROM描述了您想要使用的映像，然后RUN命令将执行命令来根据您的喜好进行配置。这个命令将更新ubuntu实例，并安装apache2服务器。</p><p id="fc60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，在同一个目录中使用下面的命令构建映像。</p><pre class="je jf jg jh fd lm ll ln lo aw lp bi"><span id="daa6" class="lq jq hi ll b fi lr ls l lt lu">docker build -t test-apache </span></pre><p id="04d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，使用下面的命令创建一个容器。</p><pre class="je jf jg jh fd lm ll ln lo aw lp bi"><span id="1e11" class="lq jq hi ll b fi lr ls l lt lu">docker run --rm -it -p 8080:80 test-apache:latest bash</span></pre><p id="8a89" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，你必须使用你自己的图像名<code class="du li lj lk ll b">test-apache</code>,这几乎和之前使用的命令一样。</p><p id="d4f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您将打开bash，并使用以下命令启动web服务器:</p><pre class="je jf jg jh fd lm ll ln lo aw lp bi"><span id="8698" class="lq jq hi ll b fi lr ls l lt lu">service apache2 start.</span></pre><p id="1cc4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完成后，您现在可以打开<a class="ae lh" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080 </a>来查看是否一切正常。</p><p id="60b8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上面的步骤中，您可以看到apache服务器的默认页面。现在我将展示如何在您自己的网站上运行web服务器。</p><p id="288c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将使用GitHub上的示例网站:<a class="ae lh" href="https://github.com/himanshu188/Website_Design" rel="noopener ugc nofollow" target="_blank">https://github.com/himanshu188/Website_Design</a></p><p id="9358" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以下载或克隆GitHub存储库。</p><p id="f3c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">打开项目，在同一个目录下打开终端。您将使用该卷将主机目录内容绑定到docker。</p><p id="4ceb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行以下命令，通过在docker容器中装入卷来启动容器。</p><pre class="je jf jg jh fd lm ll ln lo aw lp bi"><span id="b773" class="lq jq hi ll b fi lr ls l lt lu">docker run --rm -it -p 8080:80 -v “$PWD”/Consultancy_Website:/var/www/html test-apache:latest bash</span></pre><p id="16da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，使用下面的命令启动web服务器。</p><pre class="je jf jg jh fd lm ll ln lo aw lp bi"><span id="458d" class="lq jq hi ll b fi lr ls l lt lu">service apache2 start</span></pre><p id="3cc4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你去<a class="ae lh" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080 </a>就能看到网页</p><p id="5893" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，您还可以将您的图像分享给朋友或发布到hub。</p><p id="860f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想在不安装docker的情况下和docker互动玩，可以去<a class="ae lh" href="https://training.play-with-docker.com/" rel="noopener ugc nofollow" target="_blank">和Docker </a>玩。</p><p id="ccd4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于Docker有很多东西要学。Docker已经成为开发人员的一项强大的首选技术。因为不同的机器或操作系统而无法工作的日子已经一去不复返了。Docker消除了本地机器和生产服务器之间的差异。现在，不用在新机器上安装所有东西，就可以很容易地开始开发。</p><p id="8efc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Docker在组织招聘新开发人员时非常受欢迎。通常，本地环境的设置要花费很多时间，但是有了Docker，使用Docker Compose只需点击一下。Docker Compose是一个定义和运行多容器Docker应用程序的工具。举个例子，如果有一个Spring框架应用程序，那么你就会有数据库、Tomcat Web服务器和Redis服务器的docker映像。因此，Docker Compose将自动启动所有Docker实例。通过这种方式，公司可以加快新开发人员的入职速度，并改善他们的基础设施。</p><p id="61eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如有任何问题，请通过(联系)himanshuptl DOT me联系我或通过LinkedIn联系我。</p></div></div>    
</body>
</html>