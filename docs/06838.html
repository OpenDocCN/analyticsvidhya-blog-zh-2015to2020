<html>
<head>
<title>Create a time series data visualization web dashboard using Python Dash</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python Dash创建时间序列数据可视化web仪表盘</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/create-a-time-series-visualization-web-dashboard-using-python-dash-e94c807e1d95?source=collection_archive---------3-----------------------#2020-06-04">https://medium.com/analytics-vidhya/create-a-time-series-visualization-web-dashboard-using-python-dash-e94c807e1d95?source=collection_archive---------3-----------------------#2020-06-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="97ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本教程中，我们将使用Python Dash和Boostrap Dash库创建一个简单的web dashboard，其中包含可供选择的侧栏和主要内容页面，以可视化时间序列数据。时间序列数据我们将可视化股票价格数据，但它可以扩展到任何数据集。最终结果将如下。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/c57d942343ebfb33f4472f82aae7b27d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1bW3YnoQ8wFlYtfd5sRDLQ.png"/></div></div></figure><p id="000c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你需要一些Python，Dash，Html，CSS，Bootstrap的背景知识来完全理解这篇文章。</p><p id="ba05" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">导入相关的dash库</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="c8f5" class="ju jv hi jq b fi jw jx l jy jz">import dash<br/>import dash_bootstrap_components as dbc<br/>import dash_core_components as dcc<br/>import dash_html_components as html<br/>from dash.dependencies import Input, Output, State<br/>import pandas as pd</span></pre><p id="e39a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">皮普安装这些，如果你没有它。</p><p id="d2de" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">初始化仪表板应用程序</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="3506" class="ju jv hi jq b fi jw jx l jy jz">app = dash.Dash(external_stylesheets=[dbc.themes.BOOTSTRAP])<br/><br/>app.layout = html.Div()<br/><br/>if __name__ == '__main__':<br/>    app.run_server(port='8083')</span></pre><p id="5831" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果没有错误，试着运行并检查浏览器。没有什么会静止不动。</p><p id="db92" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将创建一个有股票可供选择的侧栏和一个提交按钮</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="dff3" class="ju jv hi jq b fi jw jx l jy jz">ticker_name_dic = {'TSLA':'Tesla', 'GOOGL':'Alphabet Inc-CL A', 'MSFT':'Microsoft'}<br/>options = []<br/>for ticker in ticker_name_dic:<br/>    options.append({'label': '{}-{}'.format(ticker_name_dic[ticker], ticker), 'value': ticker})<br/><br/>SIDEBAR_STYLE = {<br/>    "position": "fixed",<br/>    "top": 0,<br/>    "left": 0,<br/>    "bottom": 0,<br/>    "width": "30rem",<br/>    "padding": "2rem 1rem",<br/>    "background-color": "#f8f9fa",<br/>}<br/><br/>controls = dbc.Card(<br/>    [<br/>        dbc.FormGroup(<br/>            [<br/>                dcc.Dropdown(<br/>                    id='my_ticker_symbol',<br/>                    options=options,<br/>                    value='TSLA'<br/>                ),<br/>                dbc.Button(<br/>                    id='submit-button',<br/>                    n_clicks=0,<br/>                    children='Submit',<br/>                    color="primary",<br/>                    block=True<br/>                ),<br/>            ]<br/>        )<br/>    ],<br/>)<br/><br/>sidebar = html.Div(<br/>    [<br/>        html.H2("Stocks", className="display-4"),<br/>        html.Hr(),<br/>        controls<br/>    ],<br/>    style=SIDEBAR_STYLE,<br/>)<br/></span></pre><p id="fcd8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将此侧边栏添加到主应用布局</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="3ea3" class="ju jv hi jq b fi jw jx l jy jz">app.layout = html.Div([sidebar])</span></pre><p id="b731" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行应用程序应该显示如下</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ka"><img src="../Images/3513366f5de3e91faacfc93a8c9bc93f.png" data-original-src="https://miro.medium.com/v2/resize:fit:918/format:webp/1*_hd_gIViW6O1RbF4x4mAOA.png"/></div></figure><p id="c4c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将添加主要内容，这将有密切的页面价格图表</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="4a3a" class="ju jv hi jq b fi jw jx l jy jz">CONTENT_STYLE = {<br/>    "margin-left": "32rem",<br/>    "margin-right": "2rem",<br/>    "padding": "2rem 1rem",<br/>}</span><span id="bbae" class="ju jv hi jq b fi kb jx l jy jz">content = html.Div(<br/>    [<br/>        html.H1('Personal Stock Price Dashboard', <br/>                style={'textAlign': 'center'}),<br/>        html.Hr(),<br/>        dbc.Row(<br/>            [<br/>                dbc.Col(dcc.Graph(id="my_close_price_graph"), <br/>                        width={"size": 8, "offset": 2}),<br/>            ]<br/>        )<br/>    ],<br/>    style=CONTENT_STYLE<br/>)</span></pre><p id="f1f6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为图形添加回调</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="4f1d" class="ju jv hi jq b fi jw jx l jy jz">@app.callback(<br/>    Output('my_close_price_graph', 'figure'),<br/>    [Input('submit-button', 'n_clicks')],<br/>    [State('my_ticker_symbol', 'value')])<br/>def update_graph(n_clicks, stock_ticker):<br/>    graph_data = []<br/>    close_price_query = "SELECT date, adjusted_close from stocks.eod_data where ticker = '" + str(stock_ticker) + "' order by date asc"<br/>    df = pd.read_sql(close_price_query, con=conn)<br/>    graph_data.append({'x': df['date'], 'y': df['adjusted_close']})<br/>    fig = {<br/>        'data': graph_data,<br/>        'layout': {'title': stock_ticker + " Stock Close Price"}<br/>    }<br/>    return fig</span></pre><p id="8a53" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我从本地PostgreSQL数据库中获取股票收盘价数据，但它也可以来自CSV或任何其他数据库。</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="78e2" class="ju jv hi jq b fi jw jx l jy jz">database = "test"<br/>postgresql_user = "test"<br/>postgresql_password = "****"<br/>conn = psycopg2.connect(database=database, user=user, password=password, host="127.0.0.1", port="5432")</span></pre><p id="e485" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">向应用程序布局添加内容</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="19a9" class="ju jv hi jq b fi jw jx l jy jz">app.layout = html.Div([sidebar, content])</span></pre><p id="d61d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行应用程序并在<a class="ae kc" href="http://127.0.0.1:8083/" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:8083/ </a>处检查输出</p><p id="7cfb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最终结果应该如下所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kd"><img src="../Images/c088d7d91f112d5a3eecba0332e843f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_veYcyqm0VD_pEpGCnXh8g.png"/></div></div></figure><p id="1093" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">几个参考链接:</p><div class="ke kf ez fb kg kh"><a href="https://dash.plotly.com/" rel="noopener  ugc nofollow" target="_blank"><div class="ki ab dw"><div class="kj ab kk cl cj kl"><h2 class="bd hj fi z dy km ea eb kn ed ef hh bi translated">Dash用户指南</h2><div class="ko l"><h3 class="bd b fi z dy km ea eb kn ed ef dx translated">Plotly Dash用户指南和文档</h3></div><div class="kp l"><p class="bd b fp z dy km ea eb kn ed ef dx translated">dash.plotly.com</p></div></div></div></a></div><p id="c68c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">https://dash-bootstrap-components.opensource.faculty.ai/<a class="ae kc" href="https://dash-bootstrap-components.opensource.faculty.ai/" rel="noopener ugc nofollow" target="_blank"/></p></div></div>    
</body>
</html>