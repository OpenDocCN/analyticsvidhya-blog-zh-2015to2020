<html>
<head>
<title>How to Scrape Song Lyrics: A Gentle Tutorial</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何刮歌词:温柔教程</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-scrape-song-lyrics-a-gentle-python-tutorial-5b1d4ab351d2?source=collection_archive---------2-----------------------#2019-12-11">https://medium.com/analytics-vidhya/how-to-scrape-song-lyrics-a-gentle-python-tutorial-5b1d4ab351d2?source=collection_archive---------2-----------------------#2019-12-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7279" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用Genius.com API+Beautiful Soup获取歌词并写入本地文本文件。关于您可以用这些数据做的有趣事情的未来帖子。</p><p id="2a92" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将是一个非常简单的教程，你可以按照它将歌词收集到一个本地<code class="du jd je jf jg b">.txt</code>文件中</p><p id="96f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本教程唯一困难的是在没有语法高亮的介质上阅读代码</p><h1 id="eede" class="jh ji hi bd jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke bi translated">先决条件:</h1><ul class=""><li id="1cae" class="kf kg hi ih b ii kh im ki iq kj iu kk iy kl jc km kn ko kp bi translated">获得Genius.com API密钥(免费！):在这里按照<a class="ae kq" href="https://docs.genius.com/#/getting-started-h1" rel="noopener ugc nofollow" target="_blank">的指示</a></li><li id="52a1" class="kf kg hi ih b ii kr im ks iq kt iu ku iy kv jc km kn ko kp bi translated">我用Python3</li></ul><pre class="kw kx ky kz fd la jg lb lc aw ld bi"><span id="3aae" class="le ji hi jg b fi lf lg l lh li">GENIUS_API_TOKEN='YOUR-TOKEN-HERE'</span></pre><h1 id="7b9a" class="jh ji hi bd jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke bi translated">进口</h1><pre class="kw kx ky kz fd la jg lb lc aw ld bi"><span id="72c1" class="le ji hi jg b fi lf lg l lh li"># Make HTTP requests<br/>import requests</span><span id="3921" class="le ji hi jg b fi lj lg l lh li"># Scrape data from an HTML document<br/>from bs4 import BeautifulSoup</span><span id="b427" class="le ji hi jg b fi lj lg l lh li"># I/O<br/>import os</span><span id="03bc" class="le ji hi jg b fi lj lg l lh li"># Search and manipulate strings<br/>import re</span></pre><h1 id="3eda" class="jh ji hi bd jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke bi translated">1.获取某个艺术家指定数量歌曲的Genius.com URL列表</h1><pre class="kw kx ky kz fd la jg lb lc aw ld bi"><span id="3e2f" class="le ji hi jg b fi lf lg l lh li"># Get artist object from Genius API<br/>def request_artist_info(artist_name, page):<br/>    base_url = '<a class="ae kq" href="https://api.genius.com'" rel="noopener ugc nofollow" target="_blank">https://api.genius.com'</a><br/>    headers = {'Authorization': 'Bearer ' + GENIUS_API_TOKEN}<br/>    search_url = base_url + '/search?per_page=10&amp;page=' + str(page)<br/>    data = {'q': artist_name}<br/>    response = requests.get(search_url, data=data, headers=headers)<br/>    return response</span><span id="01ab" class="le ji hi jg b fi lj lg l lh li"># Get Genius.com song url's from artist object<br/>def request_song_url(artist_name, song_cap):<br/>    page = 1<br/>    songs = []<br/>    <br/>    while True:<br/>        response = request_artist_info(artist_name, page)<br/>        json = response.json()</span><span id="630d" class="le ji hi jg b fi lj lg l lh li">        # Collect up to song_cap song objects from artist<br/>        song_info = []<br/>        for hit in json['response']['hits']:<br/>            if artist_name.lower() in hit['result']['primary_artist']['name'].lower():<br/>                song_info.append(hit)<br/>    <br/>        # Collect song URL's from song objects<br/>        for song in song_info:<br/>            if (len(songs) &lt; song_cap):<br/>                url = song['result']['url']<br/>                songs.append(url)<br/>            <br/>        if (len(songs) == song_cap):<br/>            break<br/>        else:<br/>            page += 1<br/>        <br/>    print('Found {} songs by {}'.format(len(songs), artist_name))<br/>    return songs<br/>    <br/># DEMO<br/>request_song_url('Lana Del Rey', 2)</span></pre><p id="6041" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，这可能会返回:</p><pre class="kw kx ky kz fd la jg lb lc aw ld bi"><span id="b416" class="le ji hi jg b fi lf lg l lh li">['https://genius.com/Lana-del-rey-young-and-beautiful-lyrics',<br/> 'https://genius.com/Lana-del-rey-love-lyrics']</span></pre><figure class="kw kx ky kz fd ll er es paragraph-image"><div class="er es lk"><img src="../Images/d19b1142b2295a9dd5b79b9e7702cfba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*Xe3MsgH9L7NCq5Rd"/></div><figcaption class="lo lp et er es lq lr bd b be z dx translated">文章灵感来自于听LDR的新专辑</figcaption></figure><h1 id="f4bc" class="jh ji hi bd jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke bi translated">2.从URL的获取歌词</h1><pre class="kw kx ky kz fd la jg lb lc aw ld bi"><span id="19a9" class="le ji hi jg b fi lf lg l lh li"># Scrape lyrics from a Genius.com song URL<br/>def scrape_song_lyrics(url):<br/>    page = requests.get(url)<br/>    html = BeautifulSoup(page.text, 'html.parser')<br/>    lyrics = html.find('div', class_='lyrics').get_text()<br/>    #remove identifiers like chorus, verse, etc<br/>    lyrics = re.sub(r'[\(\[].*?[\)\]]', '', lyrics)<br/>    #remove empty lines<br/>    lyrics = os.linesep.join([s for s in lyrics.splitlines() if s])         <br/>    return lyrics</span><span id="fced" class="le ji hi jg b fi lj lg l lh li"># DEMO<br/>print(scrape_song_lyrics('<a class="ae kq" href="https://genius.com/Lana-del-rey-young-and-beautiful-lyrics'" rel="noopener ugc nofollow" target="_blank">https://genius.com/Lana-del-rey-young-and-beautiful-lyrics'</a>))</span></pre><p id="5a75" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将返回:</p><pre class="kw kx ky kz fd la jg lb lc aw ld bi"><span id="520a" class="le ji hi jg b fi lf lg l lh li">I've seen the world, done it all<br/>Had my cake now<br/>Diamonds, brilliant, and Bel Air now<br/>Hot summer nights, mid-July<br/>When you and I were forever wild<br/>The crazy days, city lights<br/>The way you'd play with me like a child<br/>Will you still love me when I'm no longer young and beautiful?<br/>Will you still love me when I got nothing but my aching soul?<br/>I know you will, I know you will, I know that you will<br/>Will you still love me when I'm no longer beautiful?<br/>I've seen the world, lit it up as my stage now<br/>Channeling angels in the new age now<br/>Hot summer days, rock and roll<br/>The way you'd play for me at your show<br/>And all the ways I got to know<br/>...[etc.]</span></pre><h1 id="1f3f" class="jh ji hi bd jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke bi translated">3.循环浏览所有URL，并将歌词写到一个文件中</h1><pre class="kw kx ky kz fd la jg lb lc aw ld bi"><span id="6457" class="le ji hi jg b fi lf lg l lh li">def write_lyrics_to_file(artist_name, song_count):<br/>    f = open('lyrics/' + artist_name.lower() + '.txt', 'wb')<br/>    urls = request_song_url(artist_name, song_count)<br/>    for url in urls:<br/>        lyrics = scrape_song_lyrics(url)<br/>        f.write(lyrics.encode("utf8"))<br/>    f.close()<br/>    num_lines = sum(1 for line in open('lyrics/' + artist_name.lower() + '.txt', 'rb'))<br/>    print('Wrote {} lines to file from {} songs'.format(num_lines, song_count))<br/>  <br/># DEMO  <br/>write_lyrics_to_file('Kendrick Lamar', 100)</span></pre><p id="adfe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这会将一百首Kendrick Lamar歌曲的歌词写入一个文件<code class="du jd je jf jg b">./lyrics/kendrick lamar.txt</code></p><pre class="kw kx ky kz fd la jg lb lc aw ld bi"><span id="996d" class="le ji hi jg b fi lf lg l lh li">Found 100 songs by Kendrick Lamar<br/>Wrote 8356 lines to file from 100 songs</span></pre><p id="8a99" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里有一个年轻暴徒的输出示例:【https://pastebin.com/raw/TKqrGiTg<a class="ae kq" href="https://pastebin.com/raw/TKqrGiTg" rel="noopener ugc nofollow" target="_blank"/></p><h1 id="bde6" class="jh ji hi bd jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke bi translated">后续步骤</h1><p id="89db" class="pw-post-body-paragraph if ig hi ih b ii kh ik il im ki io ip iq ls is it iu lt iw ix iy lu ja jb jc hb bi translated">TBD我打算用这个轻量级工具做什么新颖的应用，但这里有一些启发我的想法:</p><ul class=""><li id="4e25" class="kf kg hi ih b ii ij im in iq lv iu lw iy lx jc km kn ko kp bi translated"><a class="ae kq" href="https://github.com/robbiebarrat/rapping-neural-network" rel="noopener ugc nofollow" target="_blank">在Kanye West的整个唱片集上训练的说唱歌曲写作递归神经网络</a></li><li id="b3cb" class="kf kg hi ih b ii kr im ks iq kt iu ku iy kv jc km kn ko kp bi translated"><a class="ae kq" href="https://www.google.com/search?q=song+lyric+generatio+python&amp;oq=song+lyric+generatio+python&amp;aqs=chrome..69i57.4779j0j4&amp;sourceid=chrome&amp;ie=UTF-8" rel="noopener ugc nofollow" target="_blank">同样的事情，但泰勒·斯威夫特</a></li><li id="14ff" class="kf kg hi ih b ii kr im ks iq kt iu ku iy kv jc km kn ko kp bi translated"><a class="ae kq" href="https://towardsdatascience.com/text-predictor-generating-rap-lyrics-with-recurrent-neural-networks-lstms-c3a1acbbda79" rel="noopener" target="_blank">又一篇好的抒情代文章</a></li><li id="d03e" class="kf kg hi ih b ii kr im ks iq kt iu ku iy kv jc km kn ko kp bi translated"><a class="ae kq" href="https://www.kdnuggets.com/2018/09/sentiment-analysis-adele-songs.html" rel="noopener ugc nofollow" target="_blank">情感分析</a></li><li id="15ab" class="kf kg hi ih b ii kr im ks iq kt iu ku iy kv jc km kn ko kp bi translated">基于来自两个或更多艺术家的数据训练的歌词生成(Kanye + TSwift，Young Thug +拉娜·德尔·雷，Travis Scott+Beach Boys…go wild my children)</li><li id="1729" class="kf kg hi ih b ii kr im ks iq kt iu ku iy kv jc km kn ko kp bi translated"><a class="ae kq" href="https://towardsdatascience.com/neural-networks-for-music-generation-97c983b50204" rel="noopener" target="_blank">歌词生成+音频生成= AI生成的歌曲？</a></li></ul></div></div>    
</body>
</html>