<html>
<head>
<title>Web Scrapping using Selenium Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Selenium Python进行Web清理</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/web-scrapping-using-selenium-python-bcf24da08bda?source=collection_archive---------12-----------------------#2020-03-23">https://medium.com/analytics-vidhya/web-scrapping-using-selenium-python-bcf24da08bda?source=collection_archive---------12-----------------------#2020-03-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="d50f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从网站提取数据的数据工程步骤</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/6d3c6c060c3590b82b030b15983d52e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*chv9GgJIh7DVHMtZ"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">克里斯里德在<a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><blockquote class="ju"><p id="ad0e" class="jv jw hi bd jx jy jz ka kb kc kd jc dx translated">数据在数据分析中起着至关重要的作用。</p></blockquote><p id="817e" class="pw-post-body-paragraph if ig hi ih b ii ke ik il im kf io ip iq kg is it iu kh iw ix iy ki ja jb jc hb bi translated">因此，数据收集是分析过程中非常重要的一步。废弃网站是获取数据的一种有用的技术。</p><p id="7b27" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">从网站上收集数据的工具/软件包是什么？</strong></p><ul class=""><li id="5668" class="kj kk hi ih b ii ij im in iq kl iu km iy kn jc ko kp kq kr bi translated">美丽的声音</li><li id="4a2d" class="kj kk hi ih b ii ks im kt iq ku iu kv iy kw jc ko kp kq kr bi translated">Scrapy</li><li id="17b8" class="kj kk hi ih b ii ks im kt iq ku iu kv iy kw jc ko kp kq kr bi translated">硒等。,</li></ul><p id="f582" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">为什么Selenium比其他库更受欢迎？</strong></p><p id="e145" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">BeautifulSoup和scrapy在浏览器的web元素交互方面有局限性。其中as Selenium(基于java)可以有效地与浏览器内部的web元素和java脚本进行交互。</p><p id="4b67" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们深入代码，了解selenium的实际功能。</p></div><div class="ab cl kx ky gp kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hb hc hd he hf"><p id="a186" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">演示:</strong></p><p id="28f6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本演示中，我们将从GadgetNow网站中提取每个手机品牌的所有型号</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es le"><img src="../Images/5807f55476975596215d4f45a481af4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WKgJzD8J_BXswo-jXtQluQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated"><a class="ae jt" href="https://www.gadgetsnow.com/mobile-phones/" rel="noopener ugc nofollow" target="_blank">https://www.gadgetsnow.com/mobile-phones/</a></figcaption></figure><blockquote class="lf lg lh"><p id="0fdc" class="if ig li ih b ii ij ik il im in io ip lj ir is it lk iv iw ix ll iz ja jb jc hb bi translated"><strong class="ih hj">第0步:要求</strong></p></blockquote><p id="b865" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">web报废中的大多数问题都是由于WebDriver和浏览器之间的兼容性问题造成的。因此，在创建脚本之前，验证所有的需求，以避免以后在执行过程中出现问题</p><ol class=""><li id="b407" class="kj kk hi ih b ii ij im in iq kl iu km iy kn jc lm kp kq kr bi translated">识别浏览器版本(在本文中，我使用的是chrome浏览器80.0.3987.149版本)</li></ol><p id="13fe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击<strong class="ih hj"> <em class="li">帮助&gt;关于谷歌chrome </em> </strong>识别浏览器版本</p><p id="6f1a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.下载兼容的selenium驱动程序，与各自的浏览器进行交互</p><ul class=""><li id="2691" class="kj kk hi ih b ii ij im in iq kl iu km iy kn jc ko kp kq kr bi translated"><a class="ae jt" href="https://chromedriver.chromium.org/downloads" rel="noopener ugc nofollow" target="_blank"> chrome网络驱动</a></li></ul><blockquote class="lf lg lh"><p id="1020" class="if ig li ih b ii ij ik il im in io ip lj ir is it lk iv iw ix ll iz ja jb jc hb bi translated">第一步:导入所有需要的库</p></blockquote><pre class="je jf jg jh fd ln lo lp lq aw lr bi"><span id="2d9f" class="ls lt hi lo b fi lu lv l lw lx"><strong class="lo hj">import</strong> <strong class="lo hj">re</strong><br/><strong class="lo hj">import</strong> <strong class="lo hj">time</strong><br/><strong class="lo hj">import</strong> <strong class="lo hj">requests</strong><br/><strong class="lo hj">from</strong> <strong class="lo hj">selenium.webdriver.common.by</strong> <strong class="lo hj">import</strong> By<br/><strong class="lo hj">from</strong> <strong class="lo hj">selenium.webdriver.chrome.webdriver</strong> <strong class="lo hj">import</strong> WebDriver</span></pre><blockquote class="lf lg lh"><p id="0aff" class="if ig li ih b ii ij ik il im in io ip lj ir is it lk iv iw ix ll iz ja jb jc hb bi translated"><strong class="ih hj">第二步:创建一个驱动对象，调用所需的url </strong></p></blockquote><pre class="je jf jg jh fd ln lo lp lq aw lr bi"><span id="4abe" class="ls lt hi lo b fi lu lv l lw lx"># Creates a WebDriver object <br/>driver = WebDriver(project_dir + 'chromedriver.exe')</span><span id="a511" class="ls lt hi lo b fi ly lv l lw lx"># opens link in the browser<br/>driver.get("<a class="ae jt" href="https://www.gadgetsnow.com/mobile-phones/" rel="noopener ugc nofollow" target="_blank">https://www.gadgetsnow.com/mobile-phones/</a>")</span></pre><blockquote class="lf lg lh"><p id="1a3a" class="if ig li ih b ii ij ik il im in io ip lj ir is it lk iv iw ix ll iz ja jb jc hb bi translated"><strong class="ih hj">第三步:研究网站结构，与网页元素互动</strong></p></blockquote><p id="382c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这一步在废弃过程中非常重要，因为应该知道结构与web元素的有效交互。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lz"><img src="../Images/e7490a6a7235864ce4daf60f05049880.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oLTY-yTi2i9rY4ux3NXj8A.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">检查“查看更多”按钮&amp;复制按钮的相对XPath(右击元素→检查)</figcaption></figure><pre class="je jf jg jh fd ln lo lp lq aw lr bi"><span id="379e" class="ls lt hi lo b fi lu lv l lw lx"># Function to click on see more button</span><span id="32ef" class="ls lt hi lo b fi ly lv l lw lx"># This function return's true - if it click on "SEE MORE" button<br/># else false<br/>def click_button(browser):<br/>    try:<br/>        # validates whether see more button visible or not<br/>        display = browser.execute_script("return document.getElementsByClassName('more_btn')[0].style.display")<br/>        if display == 'none':<br/>            return False<br/>        <br/>        # find the see more button and click on it<br/>        elem = browser.find_element_by_xpath('//*[<a class="ae jt" href="http://twitter.com/id" rel="noopener ugc nofollow" target="_blank">@id</a>="load_more"]')<br/>        browser.execute_script('arguments[0].click();',elem)<br/>        return True<br/>    <br/>    except Exception as e:<br/>        print('Error occured while executing the click_button function: ' + str(e))<br/>    return False</span></pre><p id="15af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有不同的方式与web元素交互，如下所示:</p><ol class=""><li id="d98a" class="kj kk hi ih b ii ij im in iq kl iu km iy kn jc lm kp kq kr bi translated">按标识查找元素</li><li id="cfe3" class="kj kk hi ih b ii ks im kt iq ku iu kv iy kw jc lm kp kq kr bi translated">按名称查找元素</li><li id="0798" class="kj kk hi ih b ii ks im kt iq ku iu kv iy kw jc lm kp kq kr bi translated">通过xpath查找元素</li><li id="9b22" class="kj kk hi ih b ii ks im kt iq ku iu kv iy kw jc lm kp kq kr bi translated">通过链接文本查找元素</li><li id="814f" class="kj kk hi ih b ii ks im kt iq ku iu kv iy kw jc lm kp kq kr bi translated">查找元素部分链接文本</li><li id="f7b8" class="kj kk hi ih b ii ks im kt iq ku iu kv iy kw jc lm kp kq kr bi translated">按标签名查找元素</li><li id="1757" class="kj kk hi ih b ii ks im kt iq ku iu kv iy kw jc lm kp kq kr bi translated">按类名查找元素</li><li id="6469" class="kj kk hi ih b ii ks im kt iq ku iu kv iy kw jc lm kp kq kr bi translated">通过css选择器查找元素</li></ol><pre class="je jf jg jh fd ln lo lp lq aw lr bi"><span id="38d7" class="ls lt hi lo b fi lu lv l lw lx"><strong class="lo hj">Note: <br/></strong>1. These methods can extract only one element (i.e., first element) matching to the pattern<strong class="lo hj"><br/></strong>2. Replacing element by elements in all the methods, we can get list of all the elements of matching to the criteria</span></pre><p id="e405" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于每种方法的更多细节可以在找到<a class="ae jt" href="https://selenium-python.readthedocs.io/locating-elements.html" rel="noopener ugc nofollow" target="_blank"/></p><blockquote class="lf lg lh"><p id="3160" class="if ig li ih b ii ij ik il im in io ip lj ir is it lk iv iw ix ll iz ja jb jc hb bi translated"><strong class="ih hj">步骤4:执行&amp;输出</strong></p></blockquote><p id="93cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">执行代码后，我们获得以<strong class="ih hj">品牌为关键字、以型号列表为值的字典。</strong>源代码可以在Github上找到</p><div class="ma mb ez fb mc md"><a href="https://github.com/bharathkumar-kancharla/Miscellaneous/blob/master/Web%20Scrapping/Web_scraping.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="me ab dw"><div class="mf ab mg cl cj mh"><h2 class="bd hj fi z dy mi ea eb mj ed ef hh bi translated">bharathkumar-Kan charla/杂项</h2><div class="mk l"><h3 class="bd b fi z dy mi ea eb mj ed ef dx translated">permalink dissolve GitHub是4000多万开发人员的家园，他们一起工作来托管和审查代码，管理…</h3></div><div class="ml l"><p class="bd b fp z dy mi ea eb mj ed ef dx translated">github.com</p></div></div><div class="mm l"><div class="mn l mo mp mq mm mr jn md"/></div></div></a></div><pre class="je jf jg jh fd ln lo lp lq aw lr bi"><span id="f0ed" class="ls lt hi lo b fi lu lv l lw lx"><strong class="lo hj">Output:</strong><br/>{'Samsung': ['GALAXY M31', 'GALAXY A71', 'GALAXY M30S', 'GALAXY M31 B', 'GALAXY A51', 'GALAXY M21', 'GALAXY S20 ULTRA', 'GALAXY ON NXT B', 'GALAXY J7 PRO', 'GALAXY S8 PLUS', 'GALAXY M30', 'GALAXY GRAND PRIME PLUS', 'GALAXY A20', 'GALAXY A70', 'GALAXY J7 PRIME', 'GALAXY A50S', 'GALAXY A50', 'GALAXY S10 PLUS', 'GALAXY S8 EDGE', 'GALAXY J7 PRIME B', 'GALAXY S10', 'GALAXY J6', 'GALAXY J5 2017', 'GALAXY NOTE 9', 'GALAXY NOTE 8', 'GALAXY A8 PLUS 2018', 'GALAXY A5 2017', 'GALAXY M50', 'GALAXY A7 2017', 'GALAXY J7 PLUS', 'GALAXY A10S', 'GALAXY J7 2017', 'GALAXY A70S', 'GALAXY A20S', 'GALAXY M41', 'GALAXY M20', 'GALAXY J5 PRIME B', 'GALAXY A7 2018', 'GALAXY A80'], 'Intex': ['TURBO PLUS', 'ELYT E7', 'AQUA 5.5 VR', 'AQUA LIONS', 'AQUA SUPREME PLUS', 'ECO A1 PLUS', 'ECO 210 PLUS', 'AQUA', 'AQUA STAR', 'TURBO SELFIE PLUS', 'ELYT-E1', 'CLOUD MATTE', 'AQUA YOUNG', 'AQUA A4 PLUS', 'AQUA PRO', 'AQUA 4.0', 'AQUASTRONG', 'AQUA Q2', 'AQUA TURBO', 'AQUA R4 PLUS', 'AQUA LIFE V', 'AQUA Q5', 'AQUA STAR 2 B', 'TURBO 210 PLUS', 'ECO PLUS', 'LIONS G2', 'JAZZ 2', 'AQUA Y2 PLUS', 'TURBO LIONS PLUS', 'ECO 107 PLUS', 'CLOUD Q11', 'AQUAPRO', 'AQUA GENX', 'ELYT DUAL']}</span></pre><p id="51fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">结论:</strong></p><p id="fc3a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Selenium是从网站上查询/获取所需信息的有效工具，并且它可以在浏览器中轻松地与各种类型的web元素进行交互。</p><p id="a383" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">延伸阅读:</strong></p><ol class=""><li id="ac6f" class="kj kk hi ih b ii ij im in iq kl iu km iy kn jc lm kp kq kr bi translated"><a class="ae jt" href="http://learn-automation.com/xpath-checker-for-chrome-browser/" rel="noopener ugc nofollow" target="_blank">http://learn-automation . com/XPath-checker-for-chrome-browser/</a></li><li id="8643" class="kj kk hi ih b ii ks im kt iq ku iu kv iy kw jc lm kp kq kr bi translated"><a class="ae jt" href="https://selenium-python.readthedocs.io/index.html" rel="noopener ugc nofollow" target="_blank">https://selenium-python.readthedocs.io/index.html</a></li></ol></div><div class="ab cl kx ky gp kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hb hc hd he hf"><p id="a5ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="li">我希望这篇文章能帮助你理解如何使用selenium web driver来清理网页。如果你觉得这篇文章有帮助，请分享，因为它鼓励我在数据科学领域写更多有用的文章。也请关注我的个人资料，了解未来文章的进一步更新</em></p></div></div>    
</body>
</html>