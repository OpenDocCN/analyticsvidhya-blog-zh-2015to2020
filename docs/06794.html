<html>
<head>
<title>CW’s The Flash | Data Analysis Approach</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CW的Flash |数据分析方法</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/the-flash-of-cw-data-analysis-approach-303044c2a7fb?source=collection_archive---------24-----------------------#2020-06-02">https://medium.com/analytics-vidhya/the-flash-of-cw-data-analysis-approach-303044c2a7fb?source=collection_archive---------24-----------------------#2020-06-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/1ad3679571c9f61ffdc466a2c366f98a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dVNrFkMkQLUSmE-nLmKZRw.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">闪电侠格兰特·古斯汀(图片来源:CW)</figcaption></figure><p id="0418" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">自2014年开播以来，CW的《闪电侠》已经成为全球最受欢迎的电视剧之一；使其主演格兰特·古斯汀成为家喻户晓的人物。结合了戏剧、科幻、时间旅行和平行宇宙的超级英雄系列给了该系列最大的优势，即拥有任何可能的故事情节来刺激观众。现在，是时候使用数据分析方法来看看这个节目有多好，以及人们对它的看法了。</p><p id="3f4e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">警告:这里使用的R脚本对于某些读者来说可以提前使用。你必须知道r的基础知识。你对Twitter API有所了解，才能理解它并使用它。</p><p id="c26a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="js">没有编程知识的读者请注意:请随意忽略R脚本和其他编程方面。带有描述和报告的情节适合所有人。</em></p><h1 id="4283" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">资源</h1><ul class=""><li id="f2e6" class="kr ks hi iw b ix kt jb ku jf kv jj kw jn kx jr ky kz la lb bi translated">学习或更新你的R知识，<a class="ae lc" href="https://www.datacamp.com" rel="noopener ugc nofollow" target="_blank">数据营</a>非常有帮助。你只需要创建一个免费账户。</li><li id="3836" class="kr ks hi iw b ix ld jb le jf lf jj lg jn lh jr ky kz la lb bi translated">免费的在线教科书<a class="ae lc" href="https://rafalab.github.io/dsbook/" rel="noopener ugc nofollow" target="_blank">介绍数据分析和R </a>预测算法也很有帮助。</li></ul><h1 id="407d" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">r提示</h1><ul class=""><li id="d4a0" class="kr ks hi iw b ix kt jb ku jf kv jj kw jn kx jr ky kz la lb bi translated">如有可能，使用<a class="ae lc" href="https://mran.microsoft.com/open" rel="noopener ugc nofollow" target="_blank">微软R Open </a>。它带有多线程数学库(MKL)和<em class="js">检查点</em>包。</li><li id="f1cc" class="kr ks hi iw b ix ld jb le jf lf jj lg jn lh jr ky kz la lb bi translated">但是如果你遇到麻烦，不要犹豫，换成常规休息。微软R Open可以有一些离奇的问题<a class="ae lc" rel="noopener ugc nofollow" target="_blank" href="/@ceshine/cxx11-is-not-defined-problem-in-mro-3-4-e51f1d27da15">我的个人经历</a>。不要浪费太多时间去修理它们。换成常规R往往能解决问题。</li><li id="398a" class="kr ks hi iw b ix ld jb le jf lf jj lg jn lh jr ky kz la lb bi translated">通过起重机安装常规R(<a class="ae lc" href="https://cran.r-project.org/bin/linux/ubuntu/README.html" rel="noopener ugc nofollow" target="_blank">Ubuntu的说明</a>)。<a class="ae lc" href="https://mran.microsoft.com/documents/rro/reproducibility" rel="noopener ugc nofollow" target="_blank">安装<em class="js">检查点</em>确保再现性</a>(不是微软R Open独占。)</li><li id="110f" class="kr ks hi iw b ix ld jb le jf lf jj lg jn lh jr ky kz la lb bi translated">使用<a class="ae lc" href="https://www.rstudio.com/" rel="noopener ugc nofollow" target="_blank"> RStudio </a>并善用其<em class="js">控制台</em>窗口。有些人对R有强烈的反感，因为它与其他主要编程语言相比有一些独特之处。事实上，许多困惑可以通过在<em class="js">控制台</em>中的简单查询来解决。不确定向量索引是从零开始还是从一开始？告诉你是一个。查询<code class="du li lj lk ll b">1:10</code>告诉您结果包括10(不像Python)。</li></ul><h1 id="a781" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">烂番茄的疮疤</h1><p id="6483" class="pw-post-body-paragraph iu iv hi iw b ix kt iz ja jb ku jd je jf lm jh ji jj ln jl jm jn lo jp jq jr hb bi translated">烂番茄是最受欢迎的影视评论聚合网站之一。闪电侠最近播出了第六季的大结局。每个季节，烂番茄都有一个自动气象仪(平均。评论家的分数)和Flash的观众分数。这些都是公开的，非常容易检索。</p><figure class="lq lr ls lt fd ij er es paragraph-image"><div class="er es lp"><img src="../Images/e97c8dba5bea119acd32c89c05d11326.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*FPNOAI2CZZNeYrJqLIsJTg.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">格兰特·古斯汀在加利福尼亚州圣地亚哥的圣地亚哥会议中心举行的2017年圣地亚哥国际动漫展上发表演讲。</figcaption></figure><p id="0941" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们创造一个情节，并比较每一季的观众评分和观众评分。</p><pre class="lq lr ls lt fd lu ll lv lw aw lx bi"><span id="14c3" class="ly ju hi ll b fi lz ma l mb mc"># Create a Data Frame of Tomatometer and Audience Score of Each Seasons<br/>library(plotly)</span><span id="e85f" class="ly ju hi ll b fi md ma l mb mc">Rotten_Tomatoes_Performence &lt;- c("Tomatometer", "Audience Score")<br/>Season_1 &lt;- c(92, 89)<br/>Season_2 &lt;- c(94, 85)<br/>Season_3 &lt;- c(85, 66)<br/>Season_4 &lt;- c(80, 52)<br/>Season_5 &lt;- c(94, 60)<br/>Season_6 &lt;- c(91, 71)<br/>data &lt;- data.frame(Rotten_Tomatoes_Performence, Season_1, Season_2, Season_3, Season_4, Season_5, Season_6)</span></pre><figure class="lq lr ls lt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/e1a6a1d6a6a7569f6ed8b4d85bd15a51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UmsTGC8LYatA_9EMZ5wJAA.png"/></div></div></figure><pre class="lq lr ls lt fd lu ll lv lw aw lx bi"><span id="a20f" class="ly ju hi ll b fi lz ma l mb mc"># Make the plot<br/>fig &lt;- plot_ly(data, x = ~Rotten_Tomatoes_Performence, y = ~Season_1, type = 'bar', name = 'Season 1')<br/>fig &lt;- fig %&gt;% add_trace(y = ~Season_2, name = 'Season 2')<br/>fig &lt;- fig %&gt;% add_trace(y = ~Season_3, name = 'Season 3')<br/>fig &lt;- fig %&gt;% add_trace(y = ~Season_4, name = 'Season 4')<br/>fig &lt;- fig %&gt;% add_trace(y = ~Season_5, name = 'Season 5')<br/>fig &lt;- fig %&gt;% add_trace(y = ~Season_6, name = 'Season 6')<br/>fig &lt;- fig %&gt;% layout(yaxis = list(title = 'Scores'), barmode = 'group')<br/>fig &lt;- fig %&gt;% layout(title = "The Flash on Rotten Tomatoes")<br/>fig</span></pre><figure class="lq lr ls lt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mf"><img src="../Images/f619a98758c3b2817e5434b679ba7a7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*05b0YUhVns3j8VcJ8H2XUA.png"/></div></div></figure><figure class="lq lr ls lt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mg"><img src="../Images/8d8f68592724395dae0010d1c5764a41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P7f8tGSrhlYWQnewSlvrog.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">变焦，第二季的主要对手，在宣传片《闪电侠》(左)和《地球2号》的亨特·佐勒蒙(右)中获得普遍好评</figcaption></figure><p id="220e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">看起来这部剧在评论家中很受欢迎。然而，我们可以看到从第二季到第四季的持续下降，第四季在评论家中得分最低。但是第五季和第六季已经显示出很高的改进。另一方面，观众对他们的分数更加挑剔。但我们可以看到第五季的进步。</p><h1 id="dd22" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">电视观众</h1><p id="33e1" class="pw-post-body-paragraph iu iv hi iw b ix kt iz ja jb ku jd je jf lm jh ji jj ln jl jm jn lo jp jq jr hb bi translated">让我们创建一个情节，并比较每一季的平均收视率。这些数据是从2014年至2020年每个季度的多个来源检索的。</p><pre class="lq lr ls lt fd lu ll lv lw aw lx bi"><span id="36a8" class="ly ju hi ll b fi lz ma l mb mc">library(plotly)<br/>Season &lt;- c(1, 2, 3, 4, 5, 6)<br/>AVG_Viewers_in_millions &lt;- c(4.62, 4.25, 3.50, 3.50, 2.43, 1.85)<br/>data &lt;- data.frame(Season, AVG_Viewers_in_millions)<br/></span></pre><figure class="lq lr ls lt fd ij er es paragraph-image"><div class="er es mi"><img src="../Images/92aa203c5a6b4ada80129f935f381c2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*Q2n0eGlf_PxI3V4iOewl6w.png"/></div></figure><pre class="lq lr ls lt fd lu ll lv lw aw lx bi"><span id="6d6b" class="ly ju hi ll b fi lz ma l mb mc">fig &lt;- plot_ly(data, x = Season , y = AVG_Viewers_in_millions, type = 'scatter', mode = 'lines')<br/>fig &lt;- fig %&gt;% layout(title = "Average Viewers for Each Season of The Flash",                   xaxis = list(title = 'Seasons'),                      yaxis = list (title = 'AVG Viewer(Millions)'))<br/>fig</span></pre><figure class="lq lr ls lt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/96e3e341086323784494d565c1e92c9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ctmdaxer04zeEOR2h4ehAg.png"/></div></div></figure><p id="f760" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们可以清楚地看到，随着剧集的继续，平均收视率急剧下降。看《闪电侠》的人越来越少，但一个重要的因素是，每一季结束后，它都会在网飞上出现。观众很可能不会收看CW电视网，而更愿意等到它在网飞播出。所以，他们可以在方便的时候观看。</p><h1 id="663b" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">按人口统计的评级</h1><p id="955c" class="pw-post-body-paragraph iu iv hi iw b ix kt iz ja jb ku jd je jf lm jh ji jj ln jl jm jn lo jp jq jr hb bi translated">IMDb是一个在线数据库，包含电影、电视剧、家庭视频、视频游戏和在线流媒体内容的信息。它还包括演员、制作人员和个人传记、情节概要、琐事、评级以及粉丝和评论。</p><p id="0a31" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">特定节目或电影的IMDb投票者的人口统计(年龄组和性别)总是公开的。我们来看看哪个年龄段和性别的人最喜欢这个节目。</p><pre class="lq lr ls lt fd lu ll lv lw aw lx bi"><span id="51d6" class="ly ju hi ll b fi lz ma l mb mc">library(plotly)</span><span id="c076" class="ly ju hi ll b fi md ma l mb mc">age_group &lt;- c("&lt;18", "18-29", "30-44", "45+")<br/>male_rating &lt;- c(7.7, 7.8, 7.6, 7.4)<br/>female_rating &lt;- c(8.2, 8.0, 7.8, 7.8)</span><span id="371e" class="ly ju hi ll b fi md ma l mb mc">data &lt;- data.frame(age_group, male_rating, female_rating)</span></pre><figure class="lq lr ls lt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mj"><img src="../Images/1a0cec6b33ff95f2a88e12a0c9fcddad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ATsAIpq9S6drXKsqo7-tJA.png"/></div></div></figure><pre class="lq lr ls lt fd lu ll lv lw aw lx bi"><span id="78c5" class="ly ju hi ll b fi lz ma l mb mc">fig &lt;- plot_ly(data, x = ~age_group, y = ~male_rating, type = 'bar', name = 'Males Rating')<br/>fig &lt;- fig %&gt;% add_trace(y = ~female_rating, name = 'Female Rating')<br/>fig &lt;- fig %&gt;% layout(yaxis = list(title = 'Score (1-10)'), barmode = 'group')<br/>fig &lt;- fig %&gt;% layout(title = "The Flash on IMDb")<br/>fig</span></pre><figure class="lq lr ls lt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/1d7b163c21896213a6ae3d10da7f531b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ue2dIW5NnTCRD037P6EVpg.png"/></div></div></figure><p id="21ab" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">18岁以下的女性似乎对闪光灯评价最高，而18-29岁的男性对该节目评价最高。但我们可以观察到，每个年龄组的男性和女性的评分似乎几乎相同。</p><h1 id="03e2" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">按人口统计投票</h1><p id="7e00" class="pw-post-body-paragraph iu iv hi iw b ix kt iz ja jb ku jd je jf lm jh ji jj ln jl jm jn lo jp jq jr hb bi translated">现在，让我们看看每个年龄组和性别的投票数。我们可以从投票中了解哪个年龄组和性别的人最喜欢看Flash。</p><figure class="lq lr ls lt fd ij er es paragraph-image"><div class="er es lp"><img src="../Images/21a2152654f57c4c705cbc18a280d9fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*NvsbgucbnnD2FptF9hTDrQ.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">《闪电侠》的女主角坎迪斯·帕顿出席了2017年的PaleyFest颁奖典礼。</figcaption></figure><pre class="lq lr ls lt fd lu ll lv lw aw lx bi"><span id="c031" class="ly ju hi ll b fi lz ma l mb mc">library(plotly)</span><span id="6b86" class="ly ju hi ll b fi md ma l mb mc">age_group &lt;- c("&lt;18", "18-29", "30-44", "45+")<br/>male_votes &lt;- c(529, 64303, 57069, 14276)<br/>female_votes &lt;- c(127, 15256, 13149, 3851)</span><span id="fb83" class="ly ju hi ll b fi md ma l mb mc">data &lt;- data.frame(age_group, male_votes, female_votes)</span><span id="3099" class="ly ju hi ll b fi md ma l mb mc">fig &lt;- plot_ly(data, x = ~age_group, y = ~male_votes, type = 'bar', name = 'Males Rating')<br/>fig &lt;- fig %&gt;% add_trace(y = ~female_votes, name = 'Female Rating')<br/>fig &lt;- fig %&gt;% layout(yaxis = list(title = 'Votes'), barmode = 'group')<br/>fig &lt;- fig %&gt;% layout(title = "IMDb Votes for The Flash")<br/>fig</span></pre><figure class="lq lr ls lt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mk"><img src="../Images/366dd65c4490e8da48275f79d8189e77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YkmOjxezi8lBe9TTd6oJZQ.png"/></div></div></figure><p id="928d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">18-29岁的男性和女性最喜欢看这个节目，其次是30-44岁的人群。但大多数投票是由男性完成的，18-29岁年龄组的投票超过60，000张，30-44岁年龄组的投票超过55，000张。</p><h1 id="f33a" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">人们在推特上说什么？</h1><p id="b56c" class="pw-post-body-paragraph iu iv hi iw b ix kt iz ja jb ku jd je jf lm jh ji jj ln jl jm jn lo jp jq jr hb bi translated">这是我们变得更先进的地方。在数据呈现给我们之前。我们只需要放入一个数据框架并进行分析。现在，我们自己得到数据。我们将分析关于CW电视台《闪电侠》的推文。我们将从Twitter上获取公共推文，我们将对其进行清理，存储到数据框中，并将我们的数据可视化。</p><p id="ee4f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们将使用#TheFlash分析最近的9000条公开推文。</p><h1 id="7d6f" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">获取推文的数据和分布</h1><p id="cbbd" class="pw-post-body-paragraph iu iv hi iw b ix kt iz ja jb ku jd je jf lm jh ji jj ln jl jm jn lo jp jq jr hb bi translated">首先按照本文的说明获取自己的API key和访问令牌，安装<code class="du li lj lk ll b">twitteR</code>包:</p><div class="ml mm ez fb mn mo"><a rel="noopener follow" target="_blank" href="/@GalarnykMichael/accessing-data-from-twitter-api-using-r-part1-b387a1c7d3e"><div class="mp ab dw"><div class="mq ab mr cl cj ms"><h2 class="bd hj fi z dy mt ea eb mu ed ef hh bi translated">使用R从Twitter API访问数据</h2><div class="mv l"><h3 class="bd b fi z dy mt ea eb mu ed ef dx translated">更新:可以在这里找到本教程的更新版本。</h3></div><div class="mw l"><p class="bd b fp z dy mt ea eb mu ed ef dx translated">medium.com</p></div></div><div class="mx l"><div class="my l mz na nb mx nc io mo"/></div></div></a></div><p id="c74a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">你需要这四个变量:</p><pre class="lq lr ls lt fd lu ll lv lw aw lx bi"><span id="7e2e" class="ly ju hi ll b fi lz ma l mb mc">consumer_key &lt;- "FILL HERE"<br/>consumer_secret &lt;- "FILL HERE"<br/>access_token &lt;- "FILL HERE"<br/>access_secret &lt;- "FILL HERE"</span></pre><p id="ab44" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这篇文章的主要访问点是searchTwitter。它将搜索9000条带有#TheFlash的近期英文公开推文。</p><pre class="lq lr ls lt fd lu ll lv lw aw lx bi"><span id="4e4d" class="ly ju hi ll b fi lz ma l mb mc">setup_twitter_oauth(consumer_key, consumer_secret, access_token, access_secret)</span><span id="18d2" class="ly ju hi ll b fi md ma l mb mc">cw.tweets&lt;- searchTwitter("#theflash",n=9000,lang="en")</span><span id="d8b6" class="ly ju hi ll b fi md ma l mb mc">tweet=cw.tweets[[1]]<br/>tweet$getScreenName()</span><span id="f2dc" class="ly ju hi ll b fi md ma l mb mc">tweet$getText()</span><span id="a29f" class="ly ju hi ll b fi md ma l mb mc">cw.text=laply(netflix.tweets,function(t)t$getText())<br/>length(cw.text)</span><span id="18a6" class="ly ju hi ll b fi md ma l mb mc">head(cw.text)</span><span id="2386" class="ly ju hi ll b fi md ma l mb mc">#performing data cleaning and store in csv.file<br/>cw.text = gsub("(RT|via)((?:\\b\\W*@\\w+)+)", "", cw.text)<br/>cw.text = gsub("@\\w+", "", cw.text)<br/>cw.text = gsub("[[:punct:]]", "", cw.text)<br/>cw.text = gsub("[[:digit:]]", "", cw.text)<br/>cw.text = gsub("http\\w+", "", cw.text)<br/>cw.text = gsub("[ \t]{2,}", "", cw.text)<br/>cw.text = gsub("^\\s+|\\s+$", "", cw.text)<br/>cw.text &lt;- str_replace_all(cw.text," "," ")<br/>cw.text &lt;- str_replace_all(cw.text,"#[a-z,A-Z]*","")<br/>cw.text &lt;- str_replace_all(cw.text,"@[a-z,A-Z]*","")  <br/>cw.text &lt;- tolower(cw.text)<br/>head(cw.text)</span><span id="3161" class="ly ju hi ll b fi md ma l mb mc">write(cw.text, "theflash.csv",ncolumn=1)</span><span id="9e7a" class="ly ju hi ll b fi md ma l mb mc">#perform sentimental analysis <br/>sentiment &lt;- get_nrc_sentiment(cw.text)<br/>head(sentiment)</span><span id="e723" class="ly ju hi ll b fi md ma l mb mc">netflix.text &lt;- cbind(cw.text, sentiment)</span><span id="6e73" class="ly ju hi ll b fi md ma l mb mc">#use the graphic to present the findings</span><span id="89ff" class="ly ju hi ll b fi md ma l mb mc">#set up y = count<br/>Totals&lt;- data.frame(colSums(cw.text[,c(11:10)]))<br/>names(Totals) &lt;- "score"</span><span id="8d4d" class="ly ju hi ll b fi md ma l mb mc">#set up x = sentiment<br/>Totals &lt;- cbind("sentiment" = rownames(Totals), Totals)<br/>rownames(Totals) &lt;- NULL</span><span id="84fa" class="ly ju hi ll b fi md ma l mb mc">ggplot(Totals, aes(x = sentiment, y = score)) +<br/>  geom_bar(aes(fill = sentiment), stat = "identity", position = "dodge", width = 1) +<br/>  xlab("sentiment") + ylab("sentiment Scores") + ggtitle("The Flash Sentiment Scores for All Tweets")</span></pre><figure class="lq lr ls lt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/3878c289ae92309e68ccb34f1dc6c44e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BxmCAE6jR1ghRicgEOJ62A.png"/></div></div></figure><figure class="lq lr ls lt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nd"><img src="../Images/0ed0e6daa80a2e595ee2a05656429be4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UmXqGSHNcEbeYJiL-BnzFg.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">第一季在2015年PaleyFest颁奖典礼上为该剧投了《闪电侠》。从左至右:卡洛斯·瓦尔德斯、丹妮尔·帕娜贝克、汤姆·加瓦那、格兰特·古斯汀、杰西·L·马丁、坎迪斯·帕顿和里克·科斯纳特。</figcaption></figure><p id="1d07" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，让我们看看词频。一旦我们知道哪些单词出现得最多，我们就可以得出一些结论。</p><pre class="lq lr ls lt fd lu ll lv lw aw lx bi"><span id="4f2f" class="ly ju hi ll b fi lz ma l mb mc">cw.tweets2&lt;- searchTwitter("#theflash",n=9000,lang="en")</span><span id="72cf" class="ly ju hi ll b fi md ma l mb mc">insta_text &lt;- sapply(cw.tweets2, function(x) x$getText())</span><span id="1e44" class="ly ju hi ll b fi md ma l mb mc">insta_text_corpus &lt;- Corpus(VectorSource(insta_text))</span><span id="0609" class="ly ju hi ll b fi md ma l mb mc">insta_text_corpus &lt;- tm_map(insta_text_corpus, removePunctuation)</span><span id="7245" class="ly ju hi ll b fi md ma l mb mc">insta_text_corpus &lt;- tm_map(insta_text_corpus, content_transformer(tolower))</span><span id="2905" class="ly ju hi ll b fi md ma l mb mc">insta_text_corpus &lt;- tm_map(insta_text_corpus, function(x)removeWords(x,stopwords()))</span><span id="7423" class="ly ju hi ll b fi md ma l mb mc">insta_text_corpus &lt;- tm_map(insta_text_corpus, removeWords, c("RT", "are","that"))</span><span id="8288" class="ly ju hi ll b fi md ma l mb mc">removeURL &lt;- function(x) gsub("http[[:alnum:]]*", "", x)<br/>insta_text_corpus &lt;- tm_map(insta_text_corpus, content_transformer(removeURL))</span><span id="c3d7" class="ly ju hi ll b fi md ma l mb mc">insta_2 &lt;- TermDocumentMatrix(insta_text_corpus)<br/>insta_2 &lt;- as.matrix(insta_2)<br/>insta_2 &lt;- sort(rowSums(insta_2),decreasing=TRUE)</span><span id="1f6e" class="ly ju hi ll b fi md ma l mb mc">insta_2 &lt;- data.frame(word = names(insta_2),freq=insta_2)</span><span id="95e0" class="ly ju hi ll b fi md ma l mb mc">par(mar = c(8, 8, 8, 8)) # Set the margin on all sides to 2<br/>barplot(insta_2[1:30,]$freq, las = 2, names.arg = insta_2[1:30,]$word,<br/>        col ="red", main ="Most frequent words in Tweets about The Flash",<br/>        ylab = "Word frequencies")</span></pre><figure class="lq lr ls lt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/7e9dbb4a8743580df2f1470e92b1b589.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Df49HXLqFcGaarLgucBJqw.png"/></div></div></figure><figure class="lq lr ls lt fd ij er es paragraph-image"><div class="er es ne"><img src="../Images/278ff3f686357da8d9d769bbc88070be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*dnD6zGpOxroVe08dJNeGqA.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">在Arrowverse的<em class="mh">CW无限地球维基上的重大时刻。为CW播放闪光灯的</em> <strong class="bd jv">格兰特·古斯汀</strong>与为DC宇宙电影播放闪光灯的<strong class="bd jv">埃兹拉·米勒</strong>面对面！这两个角色在银幕上相遇时都穿着超级英雄的服装。Instagram (@GrantGust)</figcaption></figure><p id="322f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们可以看到格兰特·古斯汀的名字出现在推特上很多次，女主角坎迪斯·帕顿的名字也是如此。他们的角色名巴里和艾里斯也出现了。“喜欢”这个词也出现了。大多数正面和一些负面措辞的推文；男主角和女主角正在推特用户的讨论中。他们在推特用户中很受欢迎。</p><p id="3070" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，让我们制作一个单词云来呈现推文中的单词。</p><pre class="lq lr ls lt fd lu ll lv lw aw lx bi"><span id="79d0" class="ly ju hi ll b fi lz ma l mb mc"># Load<br/>library("tm")<br/>library("SnowballC")<br/>library("wordcloud")<br/>library("RColorBrewer")</span><span id="57cb" class="ly ju hi ll b fi md ma l mb mc">text &lt;- readLines(file.choose()) # This let us choose the file of tweets. Remember, we created a file of all tweets when we did the sentiment analysis. We named the file theflash.csv</span><span id="3c41" class="ly ju hi ll b fi md ma l mb mc"># Load the data as a corpus<br/>docs &lt;- Corpus(VectorSource(text))</span><span id="8baf" class="ly ju hi ll b fi md ma l mb mc">inspect(docs)</span><span id="a059" class="ly ju hi ll b fi md ma l mb mc">toSpace &lt;- content_transformer(function (x , pattern ) gsub(pattern, " ", x))<br/>docs &lt;- tm_map(docs, toSpace, "/")<br/>docs &lt;- tm_map(docs, toSpace, "@")<br/>docs &lt;- tm_map(docs, toSpace, "\\|")</span><span id="84a7" class="ly ju hi ll b fi md ma l mb mc"># Convert the text to lower case<br/>docs &lt;- tm_map(docs, content_transformer(tolower))<br/># Remove numbers<br/>docs &lt;- tm_map(docs, removeNumbers)<br/># Remove english common stopwords<br/>docs &lt;- tm_map(docs, removeWords, stopwords("english"))<br/># Remove your own stop word<br/># specify your stopwords as a character vector<br/>docs &lt;- tm_map(docs, removeWords, c("blabla1", "blabla2")) <br/># Remove punctuations<br/>docs &lt;- tm_map(docs, removePunctuation)<br/># Eliminate extra white spaces<br/>docs &lt;- tm_map(docs, stripWhitespace)<br/># Text stemming<br/># docs &lt;- tm_map(docs, stemDocument)</span><span id="0b10" class="ly ju hi ll b fi md ma l mb mc">dtm &lt;- TermDocumentMatrix(docs)<br/>m &lt;- as.matrix(dtm)<br/>v &lt;- sort(rowSums(m),decreasing=TRUE)<br/>d &lt;- data.frame(word = names(v),freq=v)</span><span id="a09d" class="ly ju hi ll b fi md ma l mb mc">set.seed(1234)<br/>wordcloud(words = d$word, freq = d$freq, min.freq = 1,<br/>          max.words=200, random.order=FALSE, rot.per=0.35, <br/>          colors=brewer.pal(8, "Dark2"))</span></pre><figure class="lq lr ls lt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nf"><img src="../Images/8faa9cd73389f99ec5f8a9b338be54c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1i4Sw9NDECxxPZpTfYxU1A.png"/></div></div></figure><p id="53ed" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">而本文只关注一个twitter标签(#TheFlash)并对其进行分析。我们可以做更深入的分析。我们可以使用其他twitter标签，如# CW flash # arrow verse flash # cwbarrayallen # CW Barry # gustinestebstflash等，使用相同的R代码进行小的修改。我们可以把所有这些放在一起，得出更多更好的结论。</p><p id="abf5" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们也可以通过文本挖掘来分析评论家对烂番茄的评论。我们有很多方法可以对一场演出、电影和体育赛事进行数据分析。这只是开始讨论和更多方法的开始。</p><h1 id="9d2f" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">结束了</h1><p id="b9ea" class="pw-post-body-paragraph iu iv hi iw b ix kt iz ja jb ku jd je jf lm jh ji jj ln jl jm jn lo jp jq jr hb bi translated">《闪电侠》获得了评论家和观众的一致好评，并获得了2014年“最受喜爱的新电视剧”的人民选择奖。2020年1月，CW电视台续订了该系列的第七季，该季将于2021年1月首播。我被这个系列吸引是因为我的妹妹和弟弟喜欢它。我没有失望。就我个人而言，这部剧非常棒。我真的为即将到来的独立Flash电影感到兴奋，埃兹拉·米勒将继续扮演DC电影的Flash。</p><div class="ml mm ez fb mn mo"><a href="https://www.cinemablend.com/news/2487291/the-flash-movie-what-we-know-so-far" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab dw"><div class="mq ab mr cl cj ms"><h2 class="bd hj fi z dy mt ea eb mu ed ef hh bi translated">Flash电影:我们目前所知的</h2><div class="mv l"><h3 class="bd b fi z dy mt ea eb mu ed ef dx translated">至少从2013年开始，DC漫画迷就一直在等待这部独立的Flash电影。华纳兄弟宣布…</h3></div><div class="mw l"><p class="bd b fp z dy mt ea eb mu ed ef dx translated">www.cinemablend.com</p></div></div><div class="mx l"><div class="ng l mz na nb mx nc io mo"/></div></div></a></div></div></div>    
</body>
</html>