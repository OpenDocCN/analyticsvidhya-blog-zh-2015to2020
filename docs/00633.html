<html>
<head>
<title>Starbucks Customer Analysis and Best Offers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">星巴克顾客分析和最佳优惠</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/starbucks-customers-analysis-and-best-offers-f2b1ef762071?source=collection_archive---------7-----------------------#2019-08-19">https://medium.com/analytics-vidhya/starbucks-customers-analysis-and-best-offers-f2b1ef762071?source=collection_archive---------7-----------------------#2019-08-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="56a5" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">星巴克数据科学挑战</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/8fcb2320a9dd260f16c6929b63acb2b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*j0baBiBT0YIdMfLg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated"><a class="ae jn" href="https://unsplash.com/@darke?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">黑克吕</a>在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><h1 id="a713" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">介绍</h1><p id="c7b6" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">今天，我将看看星巴克为数据科学项目向Udacity提供的一些数据集。</p><p id="5a53" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">我认为观察并试图了解参加星巴克奖励计划的顾客的人口统计会很有趣。以及建立一个预测模型，在此基础上提供将是成功的或有效的。</p><blockquote class="lh li lj"><p id="1a5d" class="kg kh lk ki b kj lc ij kl km ld im ko ll le kr ks lm lf kv kw ln lg kz la lb hb bi translated"><strong class="ki hj">有效报价</strong>是指<strong class="ki hj">被客户查看并完成</strong>的报价。</p></blockquote><p id="8873" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">数据清理部分将不会在本文中解释，但它们可以在Github <a class="ae jn" href="https://github.com/adhamelkhouly/starbucks_promotions" rel="noopener ugc nofollow" target="_blank">资源库</a>中找到。</p></div><div class="ab cl lo lp gp lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="hb hc hd he hf"><h1 id="b8b9" class="jo jp hi bd jq jr lv jt ju jv lw jx jy io lx ip ka ir ly is kc iu lz iv ke kf bi translated">一.数据集:</h1><p id="7643" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">数据包含在三个文件中:</p><ul class=""><li id="9b19" class="ma mb hi ki b kj lc km ld kp mc kt md kx me lb mf mg mh mi bi translated">portfolio . JSON——包含要约id和关于每个要约的元数据(期限、类型等)。)</li><li id="e323" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb mf mg mh mi bi translated">profile.json —每个客户的人口统计数据</li><li id="7e73" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb mf mg mh mi bi translated">transcript.json记录交易、收到的报价、查看的报价和完成的报价</li></ul><p id="e621" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">以下是文件中每个变量的模式和解释:</p><p id="37e7" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated"><strong class="ki hj"> portfolio.json </strong></p><ul class=""><li id="c9bb" class="ma mb hi ki b kj lc km ld kp mc kt md kx me lb mf mg mh mi bi translated">id(字符串)—优惠id</li><li id="a70f" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb mf mg mh mi bi translated">offer_type (string) —优惠的类型，如BOGO、折扣、信息</li><li id="5717" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb mf mg mh mi bi translated">难度(int) —完成报价所需的最低花费</li><li id="21fc" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb mf mg mh mi bi translated">奖励(int) —为完成一项提议而给予的奖励</li><li id="6c47" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb mf mg mh mi bi translated">duration(int)-报价开放的时间，以天为单位</li><li id="d585" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb mf mg mh mi bi translated">频道(字符串列表)</li></ul><p id="c94c" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated"><strong class="ki hj"> profile.json </strong></p><ul class=""><li id="110e" class="ma mb hi ki b kj lc km ld kp mc kt md kx me lb mf mg mh mi bi translated">年龄(整数)—客户的年龄</li><li id="abf8" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb mf mg mh mi bi translated">成为会员日期(整数)—客户创建应用程序帐户的日期</li><li id="04a5" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb mf mg mh mi bi translated">性别(str) —客户的性别(请注意，有些条目包含“O”代表其他，而不是M或F)</li><li id="2d78" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb mf mg mh mi bi translated">id (str) —客户id</li><li id="bc26" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb mf mg mh mi bi translated">收入(浮动)—客户的收入</li></ul><p id="23a9" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated"><strong class="ki hj">抄本. json </strong></p><ul class=""><li id="058a" class="ma mb hi ki b kj lc km ld kp mc kt md kx me lb mf mg mh mi bi translated">事件(str) —记录描述(即交易、收到的报价、查看的报价、完成的报价)</li><li id="cc2f" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb mf mg mh mi bi translated">人员(字符串)—客户id</li><li id="4c18" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb mf mg mh mi bi translated">时间(整数)—测试开始后的时间，以小时为单位。数据开始于时间t=0</li><li id="4317" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb mf mg mh mi bi translated">value —(字符串字典)—报价id或交易金额，具体取决于记录</li></ul></div><div class="ab cl lo lp gp lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="hb hc hd he hf"><h1 id="475b" class="jo jp hi bd jq jr lv jt ju jv lw jx jy io lx ip ka ir ly is kc iu lz iv ke kf bi translated">二。探索性数据分析</h1><h2 id="11cc" class="mo jp hi bd jq mp mq mr ju ms mt mu jy kp mv mw ka kt mx my kc kx mz na ke nb bi translated">1.发送的报价</h2><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/5300f622bcc04e00694f5cc4d9f71e80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-evyqE2j-hMZIX3gnXFC1g.png"/></div></div></figure><p id="7c8b" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">发出的报价有三种类型:BOGO(买一送一)、信息和折扣。</p><p id="baf0" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">我们可以看到折扣优惠是星巴克提供的最少的，为20%。而另外两个同样为40%。信息提供不需要用户方的动作，而另外两个则需要。</p><h2 id="b4f2" class="mo jp hi bd jq mp mq mr ju ms mt mu jy kp mv mw ka kt mx my kc kx mz na ke nb bi translated">2.客户的年龄、收入和性别分布</h2><p id="f69c" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">这里有一些非常有趣的发现，我将试图争论和解释。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/b511c701ae96eca507593b13ebd850a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f6NLEHdOkVzBhiH_e6si2A.png"/></div></div></figure><p id="d541" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">最简单的一个是性别分布，其中大多数奖励顾客往往是男性，约占58%，女性次之，约占40%，其他性别占2%。</p><p id="1153" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">接下来的两个图将被同时分析。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nd"><img src="../Images/28c13c8f4991d99ba85939953db7bbaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OpVhCceYm1cLdx_hhgXuIw.png"/></div></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/879fce5e0ebb2a3b354542d47abf894d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*neghnYS5jy9jr2YzA1sU3Q.png"/></div></div></figure><p id="562d" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">有趣的是，大多数星巴克的奖励顾客都在50-59岁年龄段(我个人认为应该在20-39岁之间！).然而，如果我们看看上面的图表，我们可以看到每个年龄组的收入水平也在增加。</p><p id="2642" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">因此，这里的解释实际上可以是<strong class="ki hj">随着收入的增加(往往随着年龄的增长)，客户加入了奖励计划。</strong></p><h2 id="a107" class="mo jp hi bd jq mp mq mr ju ms mt mu jy kp mv mw ka kt mx my kc kx mz na ke nb bi translated">3.客户收到的报价分布</h2><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/5360fac6784305391cad1ada1e5d52e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HYlERvPqu5OgByWfhPVd2Q.png"/></div></div></figure><p id="4151" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">星巴克一共发出了10个优惠，可以看出是平均分布的。</p><p id="c0bb" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">这一点在以后尤其重要，这样我们的预测模型就不会偏向任何一个特定的报价，仅仅因为它发出的更多。</p><h2 id="1bea" class="mo jp hi bd jq mp mq mr ju ms mt mu jy kp mv mw ka kt mx my kc kx mz na ke nb bi translated">4.已完成和已查看的报价</h2><p id="81fc" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">如上所述，数据集中的要约事件有三种类型。现在，我们来看看查看/点击报价与完成交易之间的关系。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/a62d815e30376948d5b1a784ddb2dca3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rg0Us-qo_C7FcUUTqcKcbw.png"/></div></div></figure><p id="83ef" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">我们可以注意到它们是高度相关的。<strong class="ki hj">高度完整的报价也是那些被高度关注的报价。</strong></p><p id="c24d" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">报价2和7是例外，因为它们是信息性报价，技术上不能完成，只能查看。</p></div><div class="ab cl lo lp gp lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="hb hc hd he hf"><h1 id="9274" class="jo jp hi bd jq jr lv jt ju jv lw jx jy io lx ip ka ir ly is kc iu lz iv ke kf bi translated">三。线性回归模型</h1><p id="a97e" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">我首先构建了一个初步模型，试图查看某些系数权重，以及客户会花更多钱的<strong class="ki hj">指标。</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ne"><img src="../Images/08a44dc5f33145f661031cab3cd237d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u5betufebCoy9FplKoGtJA.png"/></div></div></figure><p id="e5e8" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">让我们关注一般特征，而不是具体的产品特征。客户会增加支出的三个<strong class="ki hj">最强积极指标是</strong>(按降序排列):</p><ol class=""><li id="a900" class="ma mb hi ki b kj lc km ld kp mc kt md kx me lb nf mg mh mi bi translated">收到的折扣数量</li><li id="7547" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb nf mg mh mi bi translated">女性</li><li id="5f4b" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb nf mg mh mi bi translated">收到的信息报价</li></ol><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ng"><img src="../Images/0c9f447dd9dd61aef6117a698e94ab2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*CuInHfJz6BWkm2yANE1l7w.png"/></div></figure><p id="0a6e" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">另一方面，用户会增加支出的三个<strong class="ki hj">最强烈的负面指标是:</strong></p><ol class=""><li id="5193" class="ma mb hi ki b kj lc km ld kp mc kt md kx me lb nf mg mh mi bi translated">男性性别</li><li id="bd17" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb nf mg mh mi bi translated">年</li><li id="756c" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb nf mg mh mi bi translated">收到的报价总数</li></ol><p id="c095" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">有趣的是，总结一下:</p><ol class=""><li id="9a8b" class="ma mb hi ki b kj lc km ld kp mc kt md kx me lb nf mg mh mi bi translated">女性顾客比男性顾客愿意在星巴克产品上花费更多。</li><li id="0515" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb nf mg mh mi bi translated">折扣优惠与客户支出密切相关。</li><li id="0d8f" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb nf mg mh mi bi translated">最近注册的会员不太可能花费更多。</li><li id="9322" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb nf mg mh mi bi translated">如果顾客收到更多的优惠，他们更有可能在产品上花更少的钱。</li></ol><h1 id="9abc" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">四。分类预测模型</h1><p id="437f" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">如前所述，这些预测模型的目标是<strong class="ki hj">根据某个客户的人口统计数据</strong>预测向其发出的报价是否有效。</p><p id="515f" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">如简介中所述，当顾客查看并完成要约时，要约被假定为<strong class="ki hj">有效</strong>。</p><h2 id="bbeb" class="mo jp hi bd jq mp mq mr ju ms mt mu jy kp mv mw ka kt mx my kc kx mz na ke nb bi translated">1.朴素分类器</h2><p id="2650" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">我从构建一个简单的分类器开始，它假设所有的报价都是有效的，并以下列指标结束:</p><pre class="iy iz ja jb fd nh ni nj nk aw nl bi"><span id="0ad5" class="mo jp hi ni b fi nm nn l no np">Precision: 0.4216387505658669<br/>Recall: 1.0<br/>f1-score: 0.5931728442236658<br/>Misclassfication Rate: 0.578361249434133</span></pre><p id="180f" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">错误分类率约为58%，这意味着它有60%的时间是错误的。和预期一样，f1分数也在60%左右，非常接近抛硬币。</p><p id="f387" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">简单的分类器作为比较性能的基础案例。</p><h2 id="9611" class="mo jp hi bd jq mp mq mr ju ms mt mu jy kp mv mw ka kt mx my kc kx mz na ke nb bi translated">2.逻辑回归分类器</h2><p id="855a" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">接下来，我想我应该转向线性分类器，知道数据中存在一些非线性。</p><p id="26f2" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">结果如下:</p><pre class="iy iz ja jb fd nh ni nj nk aw nl bi"><span id="26e8" class="mo jp hi ni b fi nm nn l no np">Best parameters for model are:<br/> {'penalty': 'l1', 'C': 1.0}<br/>              precision    recall  f1-score   support<br/><br/>           0       0.79      0.77      0.78      6322<br/>           1       0.70      0.73      0.72      4723<br/><br/>   micro avg       0.75      0.75      0.75     11045<br/>   macro avg       0.75      0.75      0.75     11045<br/>weighted avg       0.75      0.75      0.75     11045<br/><br/>True Positives: 3456<br/>True Negatives:4851<br/>False Positives: 1471<br/>False Negatives: 1267<br/>Classification Error:  0.2478949751018561<br/>Sensitivity:  0.7317383019267415</span></pre><p id="27d3" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">尽管该模型是一个线性模型，但它仍然有一个相当低的分类误差，约为25%。f1-sore为0.75。</p><p id="e595" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">这意味着一个能够处理非线性决策边界的模型会表现得更好，这是下一步的工作。</p><h2 id="59ed" class="mo jp hi bd jq mp mq mr ju ms mt mu jy kp mv mw ka kt mx my kc kx mz na ke nb bi translated">3.随机森林分类器</h2><p id="b8d9" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">接下来，我继续测试RFC，正如预期的那样，与线性模型相比，它确实提供了更好的结果。</p><pre class="iy iz ja jb fd nh ni nj nk aw nl bi"><span id="c62a" class="mo jp hi ni b fi nm nn l no np">Best parameters for model are:<br/> {'n_estimators': 200, 'min_samples_split': 10, 'min_samples_leaf': 4, 'max_features': 'auto', 'max_depth': 8}<br/>              precision    recall  f1-score   support<br/><br/>           0       0.79      0.80      0.79      6307<br/>           1       0.73      0.71      0.72      4738<br/><br/>   micro avg       0.76      0.76      0.76     11045<br/>   macro avg       0.76      0.76      0.76     11045<br/>weighted avg       0.76      0.76      0.76     11045<br/><br/>True Positives: 3382<br/>True Negatives:5047<br/>False Positives: 1260<br/>False Negatives: 1356<br/>Classification Error:  0.23684925305568127<br/>Sensitivity:  0.7138032925284931</span></pre><p id="490f" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">分类误差降低到23.7%，f1值达到0.76。</p><p id="a9e3" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">然而，所有这些都是通过<a class="ae jn" href="https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.RandomizedSearchCV.html" rel="noopener ugc nofollow" target="_blank"> RandomizedSearchCV </a>完成的，它挑选了一个随机的参数组合并对它们进行测试，而不是穷举测试。</p><p id="d0bc" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">以下结果是通过网格搜索(<a class="ae jn" href="https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.GridSearchCV.html" rel="noopener ugc nofollow" target="_blank"> GridSearchCV </a>)获得的，这是一次彻底的搜索，并且再次对模型进行了改进。</p><pre class="iy iz ja jb fd nh ni nj nk aw nl bi"><span id="f3f6" class="mo jp hi ni b fi nm nn l no np">Best parameters for model are:<br/> {'max_depth': 9, 'max_features': 'sqrt', 'min_samples_leaf': 4, 'min_samples_split': 2, 'n_estimators': 150}<br/>              precision    recall  f1-score   support<br/><br/>           0       0.79      0.81      0.80      6304<br/>           1       0.74      0.71      0.72      4741<br/><br/>   micro avg       0.77      0.77      0.77     11045<br/>   macro avg       0.76      0.76      0.76     11045<br/>weighted avg       0.77      0.77      0.77     11045<br/><br/>True Positives: 3363<br/>True Negatives:5119<br/>FalsePositives: 1185<br/>False Negatives: 1378<br/>Classification Error:  0.232050701674966<br/>Sensitivity:  0.7093440202488926</span></pre><p id="58aa" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated"><strong class="ki hj">分类误差进一步降低到23.2%，f1值提高到0.77。</strong></p><p id="aa5d" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">下图显示了在对要约是否有效进行分类时，哪些特征更为重要:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nq"><img src="../Images/4ff56752d37f2d74dd25aaca4561c8e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QAQhj4JvcYQZ6X8EaYo5aQ.png"/></div></div></figure><h1 id="5481" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">动词 （verb的缩写）结论</h1><p id="59f3" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">最困难的挑战实际上是数据清理以及报价、交易和客户信息的组合。一旦所有这些特征都在单个数据帧中表现出来，接下来的分析就更容易了。</p><p id="40f8" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">在将所有数据放在一起之后，我们继续创建一个基础案例来进行比较(朴素分类器)。然后我们用了一个线性模型和一个非线性模型。</p><p id="570c" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">然后，我们查看了功能权重，试图了解哪些优惠往往做得更好。</p><p id="0fca" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">这一分析得出的结论是:</p><ol class=""><li id="aab0" class="ma mb hi ki b kj lc km ld kp mc kt md kx me lb nf mg mh mi bi translated">女性顾客往往比其他顾客花费更多。</li><li id="69f4" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb nf mg mh mi bi translated">折扣优惠导致更多的客户支出</li><li id="b05f" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb nf mg mh mi bi translated">优惠最重要的特征如下:<br/> a .难度<br/> b .持续时间<br/> c .回报<br/>这表明优惠往往因其自身的属性而有效，而不是与特定的客户群体相关联。然而，年龄和收入也排在第六和第七位。</li><li id="ffcb" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb nf mg mh mi bi translated">令人惊讶的是，提供信息往往是最有效的。</li><li id="0813" class="ma mb hi ki b kj mj km mk kp ml kt mm kx mn lb nf mg mh mi bi translated">社交媒体作为一种渠道，往往比其他渠道更成功。值得记住的是，所有的报价都是通过电子邮件发送的，因此，很难理解它的实际效果。</li></ol><p id="bcac" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">要获得更多技术和深入的分析，以及查看所有数据争论的步骤，请访问Github <a class="ae jn" href="https://github.com/adhamelkhouly/starbucks_promotions" rel="noopener ugc nofollow" target="_blank">库</a>。</p></div></div>    
</body>
</html>