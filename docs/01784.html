<html>
<head>
<title>Designing Web-Service Endpoints using public data set and BigQuery</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用公共数据集和BigQuery设计Web服务端点</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/designing-web-service-endpoints-using-public-data-set-and-bigquery-40425cf85477?source=collection_archive---------11-----------------------#2019-11-13">https://medium.com/analytics-vidhya/designing-web-service-endpoints-using-public-data-set-and-bigquery-40425cf85477?source=collection_archive---------11-----------------------#2019-11-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="c25c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你们中的许多人都有过这样的经历:在处理海量数据集时，需要克服获得限时响应的延迟。众所周知，数据具有巨大的潜在潜力，可以为我们提供直观而有价值的见解，有助于解决业务问题。由于缺乏存储、管理、检索和处理大规模数据块的基础设施，许多这些见解无法正确提取。传统上，人们习惯于拥有内部能力，但随着数据的指数级增长，它很快就过时了。隐私问题和数据中信息的敏感性是企业屈服于数据技术新进步的主要阻碍因素。</p><p id="f34f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如今，像BigQuery这样的时髦词正变得越来越流行，它有望解决现有数据生态系统的缺点和不足。</p><h2 id="779a" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated"><strong class="ak">什么是BigQuery？</strong></h2><p id="9702" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">BigQuery是Google的无服务器、高度可扩展的企业数据仓库，专门用于以无与伦比的性价比提高数据分析师的工作效率。因为没有需要管理的基础设施，所以您可以使用熟悉的SQL专注于发现有意义的见解，而不需要数据库管理员。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kd"><img src="../Images/6ece1f279bd55c513cb66052066998fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xR-oxvMmwgUNNcv-iYbBCQ.png"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx translated">透视大查询</figcaption></figure><p id="293c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用BigQuery，人们可以在空前的时间内以更高的质量获得输出。为了强调其功能，我展示了一个下图，使用纽约出租车和豪华轿车服务的公共数据集，设计并集成了一个简单的基于Django的Web服务端点。</p><p id="5c08" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注</strong>:点击<a class="ae kt" href="https://console.cloud.google.com/marketplace/details/city-of-new-york/nyc-tlc-trips" rel="noopener ugc nofollow" target="_blank">这里</a>链接到纽约市的出租车和豪华轿车出行数据集。</p><h2 id="4d40" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated"><strong class="ak">设计动机</strong></h2><p id="b1d4" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">Django是一个最流行的基于python的web设计框架，可以轻松地连接后端和前端接口。它是免费的、开源的、快速的、完全加载的、安全的、可扩展的和通用的。</p><p id="42b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该框架主要由MVC(模型视图控制器)驱动，MVC是一种架构范式，允许程序员将web应用程序的用户界面(UI)和业务逻辑层分开。这种方法进一步帮助程序员简化和加速大型web应用程序的开发。</p><p id="a4f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">BigQuery 在这里作为基于REST API的服务引入和接口，使用标准SQL命令查询纽约市的海量数据集。Google还提供了一个交互式UI来测试和管理云上的海量数据查询。这对于在生产部署之前随时测试查询很有帮助。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kv"><img src="../Images/10fc761f693ebc342e9e9f2a5ee4f3dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Aq55g-iBO5F9gROIADuFKQ.png"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx translated">典型的BigQuery UI</figcaption></figure><h2 id="d1b6" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated"><strong class="ak">开始使用NYC的数据集和BigQuery </strong></h2><p id="743c" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">体验BigQuery的最佳方式是用一个新的空白项目创建一个Google Cloud的自由层帐户。可以从下面的说明中复制进一步的步骤，以便于理解。</p><p id="3a38" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1)因为我已经使用Google BigQuery的python客户端对BigQuery进行了免费层访问，所以必须有一个带有json凭证文件的Google服务帐户来验证从客户端到BigQuery服务器的连接。</p><p id="3292" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2)这个json凭证文件对于运行已部署项目的任何Linux生产服务器都很重要，必须将其设置为正在使用的操作系统的环境变量。</p><p id="a3c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">json凭证文件可以使用这里提到的<a class="ae kt" href="https://cloud.google.com/docs/authentication/getting-started" rel="noopener ugc nofollow" target="_blank">步骤</a>获得。</p><p id="70b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4)在此之后，您应该可以很好地开始了解项目的运行环境。您可以通过浏览到项目文件夹中的“<em class="ku"> manage.py </em>”文件的目录，在生产中启动Django服务器，并根据需要运行以下命令来运行具有本地主机绑定的服务器。</p><p id="91e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ku">&gt;&gt;$ python manage . py runserver</em></p><p id="2f23" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意</strong>:完整的GitHub托管项目可以在这里<a class="ae kt" href="https://github.com/Shashank545/Gojek_Assignment_2019/blob/master/Gojek_Assignment/total_trips/views.py" rel="noopener ugc nofollow" target="_blank">访问。</a></p><h2 id="5405" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated"><strong class="ak">查询BigQuery </strong></h2><p id="6b61" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">一旦基础设施就绪，您就可以开始在Django内部编写简单到复杂的标准SQL查询命令，以使用breeze对数据运行各种假设测试或数据分析。这里需要注意查询结果的响应时间和处理的数量。几秒钟内就可以处理数TB的数据，这是一个惊人的数字。为简单起见，我将使用以下列举的步骤分析两个用户定义的日期之间的总出租车行程。</p><p id="1821" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤1:导入所需的库</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es kw"><img src="../Images/6eafc6447b5bb17c6795aeb45b77f1d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*LSIPLwZinXOyvlgSVkEDhw.png"/></div></figure><p id="88c6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤2:执行SQL命令从BigQuery检索数据</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kx"><img src="../Images/3b1e33d3e28d7e6ad4ec0e1f99dc18ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mTiOynBx_3YV_wKTW2oJSw.png"/></div></div></figure><p id="e35e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤3:使用BigQuery的python客户端</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es ky"><img src="../Images/3585b98ec0f101d0beca4c56501a56e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TjQHdRsZT3s3_eUBV8d3kA.png"/></div></div></figure><h2 id="aa62" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated"><strong class="ak">结论</strong></h2><p id="dfa2" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">如果您一直在密切关注，您现在应该会发现自己处于一个有利的位置，可以利用BigQuery的巨大潜力来满足您自己的定制应用程序需求。我在这里只是举例说明了Web服务，但是BigQuery可以很容易地集成到各种基于数据处理和数据分析的任务中。机器学习和数据科学从业者也经常使用它来节省他们的宝贵时间和精力，从数周到数小时，从而避免了这一磨难。</p><p id="259f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我坚信我已经触动了数据分析师、数据科学家和数据工程师的好奇心。自己试试，分享一下学习心得。</p></div></div>    
</body>
</html>