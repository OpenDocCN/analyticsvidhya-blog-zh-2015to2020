<html>
<head>
<title>Create your own Twitter Dataset with this Simple Python Scraper</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用这个简单的Python Scraper创建你自己的Twitter数据集</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/create-your-own-twitter-dataset-with-this-simple-python-scraper-710bf7c5dc04?source=collection_archive---------6-----------------------#2019-10-05">https://medium.com/analytics-vidhya/create-your-own-twitter-dataset-with-this-simple-python-scraper-710bf7c5dc04?source=collection_archive---------6-----------------------#2019-10-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/3cbe7d75b73a27285c8a448626c06a87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zc93yVJg42N8Vn2-ENQu5A.png"/></div></div></figure><p id="a7a2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你曾经处理过twitter数据，我敢肯定你遇到过令人沮丧的API请求“速率限制”(uhh)。所以今天，我将向您展示如何使用Selenium和Python来“绕过”这一限制。</p><p id="e1bf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为使该项目顺利进行，您需要:</p><ul class=""><li id="e6f1" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">谷歌Chrome浏览器</li><li id="65b8" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><a class="ae kc" href="https://chromedriver.chromium.org/downloads" rel="noopener ugc nofollow" target="_blank"> ChromeDriver </a>(下载并保存在与脚本相同的路径下)</li><li id="01ff" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">Python 3.7(之前的3。*最有可能工作的版本)</li><li id="237c" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">硒(3.141.0)</li><li id="4a4b" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">Jupyter笔记本电脑(可选)</li></ul><p id="7235" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在我们进入要点之前，让我简单解释一下这是如何工作的。在Selenium library的帮助下，我们将对外打开一个新的Chrome窗口，并通过html抓取从中提取数据。简单吧？那我们开始吧。</p><figure class="ke kf kg kh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kd"><img src="../Images/b74b478600164d99c280269d4ded951a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m1FYLU09oW0wke6cdogLlg.png"/></div></div><figcaption class="ki kj et er es kk kl bd b be z dx translated">初始阶段</figcaption></figure><p id="c375" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如您所见，这是初始化阶段。首先，我们启动一个新的Chrome窗口，设置twitter搜索词(在我们的例子中是Trump)以及我们想要的推文数量(100)。最后，我们将浏览器指向所需的链接，并等待1秒钟加载。</p><p id="dc99" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">初始化阶段完成后，我们有两个主要步骤。</p><ul class=""><li id="4c26" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">get_tweets():负责抓取推文</li><li id="e0ce" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">parse_and_save():负责解析和保存数据</li></ul><figure class="ke kf kg kh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es km"><img src="../Images/5a6b534280fb7c1c0f0cd19fe8ecb1f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WvbrSpd7CMJqwIO5wl-D4A.png"/></div></div><figcaption class="ki kj et er es kk kl bd b be z dx translated">从HTML主体获取推文</figcaption></figure><p id="50f2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个函数抓取tweets，直到达到期望的数量。这个函数中有趣的事情发生在for循环内部。因为我们使用的是一个真正的Chrome窗口，所以我们在Selenium的库中使用PAGE_DOWN按钮向下滚动，以便加载更多的tweets。酷吧？</p><figure class="ke kf kg kh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kn"><img src="../Images/c444a4b5e3155c99644b32a15431e366.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gWwyyo-54trSW07TryKI3Q.png"/></div></div><figcaption class="ki kj et er es kk kl bd b be z dx translated">解析数据并保存到CSV</figcaption></figure><p id="7407" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">顾名思义，这个函数解析并以csv格式导出我们想要的数据。我决定收集以下信息，但您可以根据自己的需要随意更改:</p><p id="ea69" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="ko">用户名，tweet_text，#回复，#转发，#收藏，ref_users，标签</em> </strong></p><p id="35e3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">结果将如下所示:</p><figure class="ke kf kg kh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kp"><img src="../Images/44719e0b451a661b933e4942bad9345b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lkQrMPcztYaT1X8qEakz_g.png"/></div></div><figcaption class="ki kj et er es kk kl bd b be z dx translated">CSV格式的结果</figcaption></figure><p id="b660" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Jupyter笔记本上的完整代码:</p><figure class="ke kf kg kh fd ij"><div class="bz dy l di"><div class="kq kr l"/></div><figcaption class="ki kj et er es kk kl bd b be z dx translated"><a class="ae kc" href="https://gist.github.com/NikosKoufos/664e6d5b467f6c602f87678062b78520" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/NikosKoufos/664 E6 D5 b 467 F6 c 602 f 87678062 b 78520</a></figcaption></figure><p id="f6be" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">就这样，我们到了这篇文章的结尾。我真心希望你们会觉得有用。如果您有任何建议/问题，请在下面评论。下次见。</p><p id="b65e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">页（page的缩写）这个刮刀依赖于twitter的html结构，所以twitter结构未来的任何潜在变化都可能破坏刮刀。</p></div></div>    
</body>
</html>