# 如何组织一个 python 函数？

> 原文：<https://medium.com/analytics-vidhya/how-to-organize-a-python-function-884fba3f51a5?source=collection_archive---------23----------------------->

![](img/13c5b51b12c2be3709d83766641fc3a6.png)

伯纳德·赫曼特在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

W hat 是 python 中的一个函数？它有几行到多行代码。但是是什么让他们与众不同呢？

> **这是可重用的**

# **功能**

函数是一个自定义或预定义的实体，它接受我们的参数，执行操作并返回输出。这是一个函数的主要功能。

但是相反，一个函数有时不需要任何参数。有时，它甚至不返回输出。

例如，让我们看看一个简单的函数。

```
def simple_function():
     pass
```

我接受，这太简单了。但是从中可以观察和学习到很多东西。

> 任何用户定义的函数都以关键字 **def** 开始。
> 
> 它后面是函数名，后面是右大括号。
> 
> 函数名后跟一个冒号。
> 
> 如果一个函数不返回任何东西，我们可以用一个叫做**的关键字传递**。
> 
> 如果函数体中没有给出任何内容，它将返回一个错误。

该函数的动机是“写一次；多次使用”。它减少或消除了多次编写相同代码的不必要工作。最初的代码可能需要花费大量的时间和精力才能正确完成。但是一旦完成，就可以根据问题或情况轻松地重用它。

功能应该只由我们来创建吗？

> 肯定不是。

各种 python 库中已经提供了许多预定义的函数。在我看来，最简单的就是 **print()** 。这是一个预定义的函数，任何安装了 python 的人都可以使用。

我们大多数人都不知道 **print()** 是怎么写的。但是我们大多数人都知道它的作用。这就是函数的意义和用途。我们创建了一个模板，这样任何人都可以多次使用它，而不是多次为同一目的进行硬编码。

**自定义功能**

函数名应该是不言自明的。应该和它服务于什么目的有关。这不是成文的规则。但是，如果你在一个庞大的团队中工作，你不需要向你的每一个团队成员解释它们，那会更好。即使您尝试在不同的项目中使用相同的功能，您也可以根据需要识别和调整它。只有当你能够识别它时，这才是可能的。

函数名可以是任何东西，除了 python 的保留字。保留字是那些在 python 内置语法中已经具有角色或位置的字。一些例子是 pass、list 等。看看下面的代码。

```
def addition(a, b):
     return a+b
```

一个典型的函数看起来有点像这样。正如我提到的，函数的名字应该定义函数做什么。然后，该函数返回一个输出。

如果你不想要任何函数定义，我们可以使用上面提到的 pass 语句。您可能想知道为什么有人应该使用 pass 语句，它可以用在您只指定一个功能并希望您的团队成员完成它，或者您正在进行考试并希望学生完成它的时候。

如果我们的函数返回一个以上的输出。看看下面的例子。

```
def basic_math(a,b):
     add = a + b
     sub = a - b
     return add, sub
```

上述程序的输出将是一个元组。如果您想更好地访问它们，您可以将它们存储在多个变量中。看看下面的例子。

```
x, y = basic_math(4, 2)
```

这个函数会将加法部分返回给 x 变量，将减法部分返回给 y 变量。

**默认参数**

在某些情况下，我们需要为函数指定一些默认参数。如果用户在调用函数时没有提到该参数的值，它将采用默认值。让我们看看下面的例子。

```
def area_circle(radius, pi = 3.14):
     area = pi * radius**2
     return area
```

在上面的例子中，pi 的值作为缺省参数给出。即使用户忘记定义参数，它也不会给出任何错误并返回输出。必要时也可以覆盖这些值。要找到各种输入函数的默认参数，请查看这些函数的语法。

**文档字符串**

文档字符串用于解释特定代码块(如函数、类或方法)的用途。这是一种可供选择的注释方式，被编辑用来理解代码的功能。这通常也有助于开发者。它只是函数、类或方法的定义。让我们看看文档字符串是如何定义的。

```
def multiply(a, b):
     """
     This function takes two integers as input, multiply them and                 store them in another variable. Then the function returns the new variable.
     """
     c = a * b
     return c 
```

它们通常用三重引号括起来。在上面的例子中，文档字符串清楚地解释了函数的用途。如果有必要的话，不要诅咒我。当您处理大型模块化程序时，它会派上用场。

现在，您已经在程序中的某个地方用 docstrings 定义了函数。但是你只记得函数名。你怎么能再读一遍呢？解决办法来了。下面的代码可以用来打印我们定义的文档字符串。

```
print(multiply.__dot__)
```

如果您在具有大量功能和模块的大型团队中工作，这将更加方便。

# **专用工具箱**

到目前为止，我们已经了解了预定义函数和自定义函数。现在，我们将看看与这些功能密切相关的一些工具。

![](img/f173bb98e6f2caa727bf365c75b47eda.png)

Jo Szczepanska 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

**λ**

Lambda 是一种函数，当我们要执行的操作过于简单时，它就会出现。到目前为止，我作为例子陈述的所有示例函数都太简单了，不能用 lambda 函数本身来定义。Lambda 函数也称为匿名函数。这是因为函数不需要名称，并且是函数的轻量级版本。让我们看看下面的例子。

```
lambda x: x**2
```

上面的函数返回输入到函数中的条目的平方。冒号前的变量代表我们要操作的变量。冒号后的条目代表将要执行的功能。

这些 lambda 函数可以应用于元素、元素列表、数据帧等。它们非常强大而且简单。

这些 lambda 函数也可以分配给如下所示的变量。

```
sum = (lambda x, y : x + y)
```

在上面的例子中，我们使用了两个变量，它们被分配给一个名为 sum 的变量。请注意， *sum* 是一个变量名，而不是一个函数名。请记住函数的规则。这类似于给变量赋值。

**地图**

在我们需要避免迭代的情况下，使用映射函数。任何地方的迭代都是计算成本高且耗时的。如果你上过[Coursera](https://www.coursera.org/specializations/deep-learning)的[深度学习专业](https://www.coursera.org/)，你会注意到吴恩达提到了许多在构建神经网络时消除迭代的方法。

同样，我们可以有效地使用映射函数来进行一些有效的计算。它们在数据处理中非常有用。它们主要用于数据帧情况下的逐行计算。使用映射函数减少了代码行数。考虑以下将汽车速度从千米/小时转换为米/秒的例子。

```
def speed_conv(data):
     data_m = (data * 5) / 18
     return data_mdata_km = [10, 20, 30 40]
```

映射函数应该至少有两个参数。第一个参数是不带括号的函数名。那么必须对其执行操作的变量至少有一个参数。

```
list(map(speed_conv, data_km))
```

这将列表中的所有元素转换为 m/s。这可以根据我们的需要进行扩展，并且我们可以避免计算量大的迭代。我们使用 list 方法作为 map 函数返回一个 map 对象。所以我们需要使用 list 来获得列表形式的输出。

注意，在给出函数参数的同时，我们也可以给出一个 lambda 函数来执行操作。

**减少**

reduce 函数只是简单地将给定的函数扫过一行。它用于在给定的行中执行聚合函数。它按顺序将给定的函数应用于特定的行。

与 map 不同，reduce 不是 python 中内置的。你必须从 functools 库中导入它，如下所示。

```
from functools import reduce
```

请注意，映射函数主要用于操作多行。另一方面，reduce 函数用于一行。

需要注意的一点是，对于 reduce 函数，只允许两个参数。超过两个会导致错误。

```
from functools import reducenum =[10, 20, 30, 40]reduce(lambda a,b: a+b, num)
```

上面的函数依次对函数的结果元素求和，并返回所有元素的总和。因此，该函数总是返回单个值。

这里，当给定一个函数作为参数时，你可以使用 lambda 函数或者 general 函数。

**滤镜**

过滤函数为我们提供了一种简单的方法来过滤满足给定条件的所需行。

```
num =[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]list(filter(lambda x: x%4==0, num))
```

上面的函数只返回那些能被 4 整除的元素。lambda 函数仅对 4、8、12、16 和 20 返回 True。然后，它们被过滤函数过滤。

Filter 函数也有两个参数。第一个参数是函数，第二个参数是列表、数据系列或数据帧。

让我展示一个函数的实时应用。下面显示的是我最近参加的一次黑客马拉松中用于数据清理和宁滨目的的一个函数的一部分。看一看它。我稍微改变了一下变量的名字。

```
def data_clean(data):
    data["engagement_rating"] =                             data["engagement_rating"].fillna(1.0) data["age"] = data["age"].fillna(data["age"].mean())

    data.drop(["id", "test_id", "trainee_id"], axis=1, inplace=True)

    data["age_bin"] = 0
    data.loc[data["age"]<25, "age_bin"] = 0
    data.loc[(data["age"]<35) & (data["age"]>25), "age_bin"] = 1
    data.loc[(data["age"]<50) & (data["age"]>35), "age_bin"] = 2
    data.loc[(data["age"]<63) & (data["age"]>50), "age_bin"] = 3

    data["programme_duration"] = scale(data["programme_duration"])
    data["age"] = scale(data["age"])

    return data
```

这只是函数的一小部分。创建了这样一个通用函数后，我可以自由地向这个函数传递任意数量的数据帧。因此，它减少了不必要的时间使用。现在，我可以用这个函数清除我的训练和测试数据。此外，我甚至可以对任何其他类似的应用程序进行一些修改，重用这个函数。

**结论**

因此，通过使用所有这些工具，我们可以进行一些有效的编码。一个程序员的技能和经验反映在他写代码的方式上。所以通过发展你的技能来有效地写它。

现在开始吧，从 [kaggle](https://www.kaggle.com/) 获取一个实时数据集，开始你的练习。只有实践才能让你成为更好的程序员。

所有这些都有助于我们节省时间并有效地利用时间。毕竟，时间是宇宙中最有价值的东西。

祝大家好运🤗

**资源**

 [## 函数式编程指南- Python 3.8.2 文档

### 在本文档中，我们将浏览 Python 适合以函数式风格实现程序的特性…

docs.python.org](https://docs.python.org/3/howto/functional.html)  [## 内置函数- Python 3.8.2 文档

### Python 解释器内置了许多始终可用的函数和类型。它们被列出…

docs.python.org](https://docs.python.org/3/library/functions.html)  [## 6.表达式- Python 3.8.2 文档

### 当下面对算术运算符的描述使用短语“数值参数被转换成公共的……

docs.python.org](https://docs.python.org/3/reference/expressions.html)  [## functools -可调用对象上的高阶函数和操作- Python 3.8.2 文档

### 源代码:Lib/functools.py 该模块用于高阶函数:作用于或返回其他函数的函数…

docs.python.org](https://docs.python.org/3/library/functools.html)