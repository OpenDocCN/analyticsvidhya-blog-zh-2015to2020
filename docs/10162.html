<html>
<head>
<title>Slowly Changing Dimension</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">尺寸缓慢变化</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/slowly-changing-dimension-346270b22d0f?source=collection_archive---------15-----------------------#2020-10-07">https://medium.com/analytics-vidhya/slowly-changing-dimension-346270b22d0f?source=collection_archive---------15-----------------------#2020-10-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/10a0418ff550d1b2a90ebe4255c2f9a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1bFmgy1TmsEOfCqp"/></div></div></figure><p id="1cd3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">很长时间以来，我一直想了解慢慢变化的维度，但我无法为不熟悉该主题的人找到一个清晰、简洁的博客帖子。因此，我将向您提供我自己的产品，快速介绍数据仓库场景中缓慢变化的维度或SCD。</p><p id="9975" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们坐两张桌子吧</p><ul class=""><li id="0782" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">用户(维度)</li></ul><figure class="jx jy jz ka fd ij"><div class="bz dy l di"><div class="kb kc l"/></div></figure><ul class=""><li id="8add" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">销售(事实)</li></ul><figure class="jx jy jz ka fd ij"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="6b1e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当将数据仓库组织成星型模式时，我们需要将事实记录与维度记录相关联，以获得它的相关属性。在某些情况下，维度中的信息可能会发生变化。例如，用户Adam可能会搬到英国。如果他有，我们要把他所有的事实记录和这个新国家联系起来吗？还是我们要忽略国家的变化以保持历史的准确性？或者我们对待国家变化前的事实和变化后的事实呢？</p><p id="dd18" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正是这个决定决定了是否要使维度成为一个缓慢变化的维度。有不同类型的SCD，这取决于你如何对待到来的变化。</p><h1 id="61e1" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">SCD的类型</h1><h2 id="d73b" class="lb ke hi bd kf lc ld le kj lf lg lh kn jb li lj kr jf lk ll kv jj lm ln kz lo bi translated">类型0-固定维度</h2><p id="7961" class="pw-post-body-paragraph iq ir hi is b it lp iv iw ix lq iz ja jb lr jd je jf ls jh ji jj lt jl jm jn hb bi translated">此处不允许更改。换句话说，维度永远不会改变。在这种情况下，我们不改变亚当的国家，即使他搬到另一个国家。</p><h2 id="5901" class="lb ke hi bd kf lc ld le kj lf lg lh kn jb li lj kr jf lk ll kv jj lm ln kz lo bi translated">类型1 —无历史记录</h2><p id="b420" class="pw-post-body-paragraph iq ir hi is b it lp iv iw ix lq iz ja jb lr jd je jf ls jh ji jj lt jl jm jn hb bi translated">直接更新维度。没有尺寸变化的轨迹。我们只能看到当前的状态。在我们的情况下，Adam的记录将被修改为英国作为国家。他在美国时下的所有订单现在都指向英国。</p><figure class="jx jy jz ka fd ij"><div class="bz dy l di"><div class="kb kc l"/></div></figure><h2 id="d7e3" class="lb ke hi bd kf lc ld le kj lf lg lh kn jb li lj kr jf lk ll kv jj lm ln kz lo bi translated">类型2 —行版本控制</h2><p id="3e56" class="pw-post-body-paragraph iq ir hi is b it lp iv iw ix lq iz ja jb lr jd je jf ls jh ji jj lt jl jm jn hb bi translated">类型2是跟踪数据仓库中变化的最常见的方法。在这里，我们使用新记录和附加列(如当前标志和生效日期)来跟踪更改。</p><figure class="jx jy jz ka fd ij"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="c7a4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">新列</p><ul class=""><li id="fb94" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated"><strong class="is hj"> ID </strong> —我们添加了一个新的ID列，因为现有的用户ID不足以识别我们需要的特定记录。</li><li id="c724" class="jo jp hi is b it lu ix lv jb lw jf lx jj ly jn jt ju jv jw bi translated"><strong class="is hj"> Current_Flag </strong> —只返回每个用户最新记录的快捷方法。</li><li id="d5d4" class="jo jp hi is b it lu ix lv jb lw jf lx jj ly jn jt ju jv jw bi translated"><strong class="is hj"> Start_Date </strong> —特定记录开始生效的日期。</li><li id="f4d8" class="jo jp hi is b it lu ix lv jb lw jf lx jj ly jn jt ju jv jw bi translated"><strong class="is hj">结束日期</strong> —特定记录生效的日期</li></ul><p id="80a0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个方法很厉害。我们维护整个记录的历史，并可以轻松地执行随时间变化的分析。</p><h2 id="e681" class="lb ke hi bd kf lc ld le kj lf lg lh kn jb li lj kr jf lk ll kv jj lm ln kz lo bi translated">类型3</h2><p id="37b9" class="pw-post-body-paragraph iq ir hi is b it lp iv iw ix lq iz ja jb lr jd je jf ls jh ji jj lt jl jm jn hb bi translated">在这种类型中，我们添加了一个新列，而不是一条记录。在我们的例子中，我们添加了一个新列“Previous Country”来跟踪变化。以防万一，如果用户再次更改国家，我们必须添加另一列。</p><h2 id="9892" class="lb ke hi bd kf lc ld le kj lf lg lh kn jb li lj kr jf lk ll kv jj lm ln kz lo bi translated">类型4</h2><p id="492c" class="pw-post-body-paragraph iq ir hi is b it lp iv iw ix lq iz ja jb lr jd je jf ls jh ji jj lt jl jm jn hb bi translated">我们将简单地更新类似于类型1的记录，以适应新的变化。然而，我们同时维护一个类似于type2的历史表来跟踪变化。</p><p id="73f1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">更新后的维度表将如下所示</p><figure class="jx jy jz ka fd ij"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="faae" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">历史表将包含以下记录。</p><figure class="jx jy jz ka fd ij"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="7df5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果大多数用户只使用当前值，将历史记录与维度分离会使维度表更小，从而有助于提高性能并降低复杂性。</p><p id="690d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是，如果需要历史值，这种类型会增加复杂性和性能开销。</p><p id="0c54" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">类型1和类型2通常比类型4更优选。</p><p id="2ada" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有问题吗？在这里随意评论。</p><p id="80da" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你喜欢这篇文章，请点击👏所以其他人会在媒体上看到它。</p></div></div>    
</body>
</html>