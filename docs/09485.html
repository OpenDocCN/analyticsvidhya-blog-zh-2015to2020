<html>
<head>
<title>NLP From The Underground Part II</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">来自地下的NLP第二部分</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/nlp-from-the-underground-part-ii-d7565ed955c9?source=collection_archive---------28-----------------------#2020-09-07">https://medium.com/analytics-vidhya/nlp-from-the-underground-part-ii-d7565ed955c9?source=collection_archive---------28-----------------------#2020-09-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="5aa3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">享受统计数据和19世纪最伟大的文学作品</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/345c3ae932ea06cfce31cfffe179eb4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sz9hg_TxuOks26eIejh3iw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">费奥多·陀思妥耶夫斯基</figcaption></figure><p id="7b0a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文假设您已经阅读了地下部分I 中的<a class="ae jt" rel="noopener" href="/@joshtaylor361/nlp-from-the-underground-part-i-7d5cac2cbb8a"> NLP，并从上一篇文章停止的地方继续。概括一下:正在考虑的文集是陀思妥耶夫斯基的五部杰作:《地下笔记》、《罪与罚》、《白痴》、《着魔》和《卡拉马佐夫兄弟》。为了量化情绪，我们使用了</a><a class="ae jt" href="https://saifmohammad.com/WebPages/NRC-Emotion-Lexicon.htm" rel="noopener ugc nofollow" target="_blank"> NRC情绪词典</a>和<a class="ae jt" href="http://www2.imm.dtu.dk/pubdb/pubs/6010-full.html" rel="noopener ugc nofollow" target="_blank"> AFINN情绪词典</a>。</p><p id="84d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该分析的完整代码可以在<a class="ae jt" href="https://github.com/josht-jpg/NLP-from-the-Underground" rel="noopener ugc nofollow" target="_blank"> Github </a>上找到。</p><p id="a59d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">自然语言处理很棒。阅读伟大的书籍是伟大的。让我们继续分析。</p><h2 id="403a" class="ju jv hi bd jw jx jy jz ka kb kc kd ke iq kf kg kh iu ki kj kk iy kl km kn ko bi translated">使用NRC词典的机器学习</h2><p id="46a0" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">到目前为止，分析中引入的大部分背景都是在二元模型的水平上。使用<a class="ae jt" href="https://en.wikipedia.org/wiki/AdaBoost" rel="noopener ugc nofollow" target="_blank"> AdaBoost分类</a>，我将尝试把它扩展到句子的层面。我已经开始从每本书的句子中创建一个大的列表。从这个列表中，我随机抽取了两个尺码为100和30的样品。这将分别是我们的训练集和测试集。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ku kv l"/></div></figure><p id="e39c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我已经手动将每个句子标记为传达负面情绪(-1)、中性情绪(0)或传达正面情绪(1)。我们将按如下方式重新载入带标签的句子:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ku kv l"/></div></figure><p id="0498" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们现在使用的数据框如下所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kw"><img src="../Images/4a1d464719048c925a3240201ff97947.png" data-original-src="https://miro.medium.com/v2/resize:fit:838/format:webp/1*2ZVfvK9ybMuTRZCotWc1Mg.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">标签训练集</figcaption></figure><p id="5957" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用NRC词典，算法将学习的特征是句子中落入每个NRC情感/情绪的单词的数量。这一步的数据清理和准备与前面的NRC部分类似，只是我们现在考虑完整的句子:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ku kv l"/></div></figure><p id="706d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将准备好的训练和测试数据输入到ScikitLearn的AdaBoostClassifier中，该分类器有70个估计器，我得到了0.72的训练分数和0.7的测试分数。对我有用。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kx"><img src="../Images/a1b391e5d1bac4696d48762f86bf487d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*qo134zFu-sLzZHYwDyZeEA.png"/></div></figure><p id="054f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在进一步讨论之前，有必要提出警告。该模型的预测将是对情绪的不完美衡量。为了获得更可靠的结果，我可以使用由除我之外的其他人标记的更大的训练和验证集。如果我有时间，我甚至会这样做。但就目前而言，我认为该模型是一个足够强大的工具，可以让我们从数据中挖掘出真知灼见。只要我们记住它的弱点。</p><p id="dc9d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们使用模型来预测语料库中每个句子的情感。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ku kv l"/></div></figure><p id="293b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面的情节按照我们的模型，展示了每部小说的情绪轨迹。绘制的每个数据点是50个句子的情感总和。x轴代表叙事时间。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ky"><img src="../Images/d33ff1aadd0525510f692552641b074f.png" data-original-src="https://miro.medium.com/v2/resize:fit:782/format:webp/1*9V6goCw0_PwWGsnUbgNoJg.png"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ky"><img src="../Images/994b2d6ffbeef3b664e51f5458ad6bf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:782/format:webp/1*NlI57m8eNxOuQ-8Vq2A1Iw.png"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ky"><img src="../Images/5215bc748f53867cea4eb91632f2cdc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:782/format:webp/1*tHaJsPvy1jkpVdNLLpkbkw.png"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ky"><img src="../Images/40eb2146f25486182642b65e3da66402.png" data-original-src="https://miro.medium.com/v2/resize:fit:782/format:webp/1*JZ6iuQ9j5kQaSRxCLDCIdw.png"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ky"><img src="../Images/7897e18bc5091bc3f0c4e2ae1ffe22b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:782/format:webp/1*8mZg_pbdTtCzNF8qI4ex_w.png"/></div></figure><p id="3592" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是我们的模型得出的平均分数。1分表示每个句子都是肯定的，-1分表示每个句子都是否定的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kz"><img src="../Images/0b9e9aafaf13b9260896505b0ee398f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XCv80H49Uu3Vz7XGgzG53Q.png"/></div></div></figure><p id="2838" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">根据这一标准，《卡拉马佐夫兄弟》的正面情绪最高，《地下笔记》的负面情绪最高。精彩！我发现阅读《兄弟》是最令人振奋的经历，而《笔记》是最令人沮丧的。</p><h2 id="1976" class="ju jv hi bd jw jx jy jz ka kb kc kd ke iq kf kg kh iu ki kj kk iy kl km kn ko bi translated">用AFINN词典进行统计推断</h2><p id="de96" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">现在我们将使用推理统计学来看看这五部杰作与19世纪的其他伟大作品相比如何。我想回答的问题是:使用在第一部分中用AFINN词典计算出的积极和消极情绪的衡量标准，陀思妥耶夫斯基每部杰作中的平均情绪是否低于19世纪文学巨著中的平均情绪？</p><p id="9cd4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，一些澄清是必要的。“19世纪文学巨著”这一类别没有明确的定义。这类书没有一个普遍认可的清单。但是我们可以得到一个大多数人都会同意的好的近似值。goodreads.com网站列出了19世纪以来排名最高的1076部T2文学作品。这些排名是Goodreads用户排名的汇总。</p><p id="a28e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我使用<a class="ae jt" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noopener ugc nofollow" target="_blank"> beautifulsoup4包</a>从列表中抓取所有标题:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ku kv l"/></div></figure><p id="3862" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我看标题时，一个问题变得很明显:其中许多是陀思妥耶夫斯基的作品。幸运的是，Goodreads也有一个页面列出了陀思妥耶夫斯基排名最高的书籍。下面的代码从我们最伟大的书籍列表中删除了所有陀思妥耶夫斯基的书籍。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ku kv l"/></div></figure><p id="f4e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了执行回答我们的问题所需的统计测试，我们必须对标题进行随机抽样。在下面的代码中，我选取了60个标题作为样本。然而，有些书没有英文数字格式，这使得它们与我们的分析不相容。最终结果是42个标题的样本，这正是我想要的。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ku kv l"/></div></figure><p id="8edd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:这是我第一次浏览一个不断变化的网站。所以你可以想象，当我对本文进行最后一次检查时，发现代码产生了一组不同的标题，我有多惊讶。如果有人知道如何以一种更具可复制性的方式从不断变化的网站中抓取信息，请告诉我。</p><p id="8af0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是构成最终样本的标题列表。获取每本书内容的方法和从第一部分获取陀思妥耶夫斯基的书的内容是一样的。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ku kv l"/></div></figure><p id="2201" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这一点上，有必要重新审视我们试图回答的问题。我们现在真正要问的问题是:<em class="la">陀思妥耶夫斯基的每部杰作中的平均情绪是否低于英文数字格式的</em> <a class="ae jt" href="https://www.goodreads.com/list/show/16.Best_Books_of_the_19th_Century?page=1" rel="noopener ugc nofollow" target="_blank"> <em class="la"> Goodreads的19世纪最伟大的书籍</em> </a> <em class="la">列表中的平均情绪？</em>你可能不再认为我们的问题有意义(假设你认为第一个问题有意义)。我会注意到，只有晦涩的标题缺乏有助于我们分析的表示。我挑选的所有19世纪最伟大的书籍都在名单上，并且有英文电子版。我仍然感兴趣。</p><p id="706f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于陀思妥耶夫斯基的每一部杰作，我们的无效假设和替代假设是:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lb"><img src="../Images/c60bacab127eac2be0bce8341a27b336.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/1*0FgchErT6ZLmAVMN-xR43Q.jpeg"/></div></figure><p id="15a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将使用的显著性水平是0.05。由于我将测试5部杰作中的每一部，一个<a class="ae jt" href="https://en.wikipedia.org/wiki/Bonferroni_correction" rel="noopener ugc nofollow" target="_blank"> Bonferroni修正</a>将我们的显著性水平更新为0.01。</p><p id="efc2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们将AFINN分数应用于我们的样本，并检查一些属性:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ku kv l"/></div></figure><p id="439c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">样本中的最小值:-0.004975 <br/>样本中的最大值:0.082889 <br/>样本平均值:0.028879 <br/>样本标准偏差:0.021198</p><p id="e009" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了有把握地解释测试结果，必须满足以下假设:</p><ol class=""><li id="2323" class="lc ld hi ih b ii ij im in iq le iu lf iy lg jc lh li lj lk bi translated">观察是独立的——我认为这种假设是安全的。名单上某本书的作者可能会受到名单上其他书的影响。但是我不相信这样的影响会大到破坏我们的测试。</li><li id="9d00" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">数据必须近似正态分布——我将对我的样本数据执行<a class="ae jt" href="https://en.wikipedia.org/wiki/Normality_test#:~:text=In%20statistics%2C%20normality%20tests%20are,set%20to%20be%20normally%20distributed." rel="noopener ugc nofollow" target="_blank">正态性测试</a>,显著性水平为0.05。如果测试返回小于0.05的p值，我将不得不得出数据不是正态分布的结论。否则，我们可以继续假设我们正在处理一个正态分布。如下面的代码块所示，对我的样本进行的正常测试产生的p值约为0.18。我们可以继续了。</li></ol><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kx"><img src="../Images/c94c715eb547ab471585402adeb51911.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*ePmXumjFq3YibVxB8c6egA.png"/></div></figure><p id="f501" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设满足，我们可以执行我们的测试:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lq"><img src="../Images/a1fa2a3b10fb1ce29491105e9e1dcea4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*2pI0vzlhagknwa5ylyQ6Bw.png"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lq"><img src="../Images/83e530336d75cbc05d8ba0bbfd9801e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*D1IqRoO6qrLLQSbUip4Gqw.png"/></div></figure><p id="0bbd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是一个漂亮的表格中的结果:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lr"><img src="../Images/2354ff08d03a85b451b7e2f9432c2fa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7SplVyQtSTjGd6Tzw36FtA.png"/></div></div></figure><p id="0f14" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好极了。我们所有的无效假设都毫无机会。我们可以得出这样的结论，陀思妥耶夫斯基每部杰作中的平均情绪低于Goodreads的19世纪最伟大的书籍列表中的平均情绪。这是否适用于任何更有趣的问题是你的决定。</p></div><div class="ab cl ls lt gp lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="hb hc hd he hf"><p id="bc16" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">谢谢你的阅读，朋友们。</p><h1 id="a432" class="lz jv hi bd jw ma mb mc ka md me mf ke mg mh mi kh mj mk ml kk mm mn mo kn mp bi translated"><strong class="ak">参考文献</strong></h1><p id="72bb" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">AFINN:</p><p id="1d0d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">f .尼尔森。(2011) ANEW:微博情感分析词表评估。ESWC2011“理解微柱”研讨会论文集:CEUR研讨会论文集，第93-98页，小包装中的大东西718。</p><p id="6a57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">NRC:</p><p id="e61c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">穆罕默德、S. M .和特尼博士(2013年)。众包一个词-情感联想词典。计算智能，第29卷第3期，第436-465页。</p><p id="dcbc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">穆罕默德、S. M .和特尼博士(2010年)。常用词和短语引起的情绪:使用机械土耳其人创建情绪词典。NAACL-HLT 2010年文本情感分析和生成计算方法研讨会会议录。</p><p id="7386" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最初的灵感:</p><p id="f41c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Silge，j .和Rabinson，D. (2020年)。用R. O 'Riley挖掘文本。https://www.tidytextmining.com/index.html<a class="ae jt" href="https://www.tidytextmining.com/index.html" rel="noopener ugc nofollow" target="_blank"/></p></div></div>    
</body>
</html>