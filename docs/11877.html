<html>
<head>
<title>Python Tricks for Data Science</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据科学的 Python 技巧</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/python-tricks-for-data-science-fd038ab838a?source=collection_archive---------8-----------------------#2020-12-22">https://medium.com/analytics-vidhya/python-tricks-for-data-science-fd038ab838a?source=collection_archive---------8-----------------------#2020-12-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/72460d73c9c04ae23992f1f4c7de2d20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8kOBx3BMvlvsWuM80ZKZpg.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">这张图片让我想起了 df.explode()，这可能是我最喜欢的熊猫方法。致谢:<a class="ae iu" href="https://unsplash.com/@rzunikoff" rel="noopener ugc nofollow" target="_blank">罗伯特·祖尼科夫</a></figcaption></figure><p id="8682" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你是否经常发现自己抓耳挠腮，试图记起两天前在堆栈溢出帖子上发现的那段非常整洁的熊猫代码？这就是本文的目的——将所有的语法放在一个地方。</p><p id="5133" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这篇文章充满了我经常使用的代码；这是一种将我最喜欢的片段保存在一个地方并与他人分享的方式。我会回来更新这篇文章，如果你觉得它有用，请随时发送其他有用的建议。</p><h2 id="49ea" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">如何在 pandas 数据帧中找到空值的确切位置并看到整行？</h2><pre class="ko kp kq kr fd ks kt ku kv aw kw bi"><span id="50d5" class="jt ju hi kt b fi kx ky l kz la"># Syntax</span><span id="ee06" class="jt ju hi kt b fi lb ky l kz la">df[df.isna().any(axis=1)]</span><span id="48a9" class="jt ju hi kt b fi lb ky l kz la"># Example</span><span id="ba6c" class="jt ju hi kt b fi lb ky l kz la">import pandas as pd<br/>titanic = pd.read_csv(“train.csv”)<br/>titanic[titanic.isna().any(axis=1)]</span></pre><p id="f512" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您试图在上下文中查看同一行中的 nan 值和其他值，这很方便。</p><h2 id="1f88" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">如何检查每列中空值的百分比？</h2><p id="8ed5" class="pw-post-body-paragraph iv iw hi ix b iy lc ja jb jc ld je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">这是一种非常快速的方法，可以看出整个数据帧中每一列的损坏程度。</p><figure class="ko kp kq kr fd ij"><div class="bz dy l di"><div class="lh li l"/></div></figure><h2 id="c096" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">如何检查一列字符串中是否包含任何已编码为字符串的数字？</h2><pre class="ko kp kq kr fd ks kt ku kv aw kw bi"><span id="e39c" class="jt ju hi kt b fi kx ky l kz la"># Syntax</span><span id="88fd" class="jt ju hi kt b fi lb ky l kz la">df[df.column.str.contains("\d+", na=False)]</span><span id="6aac" class="jt ju hi kt b fi lb ky l kz la"># Example</span><span id="7e74" class="jt ju hi kt b fi lb ky l kz la">titanic[titanic.Ticket.str.contains("\d+", na=False)]</span></pre><p id="9a16" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这对于数据清理或特征工程来说是一个很好的方法——假设您试图从一列中取出数字或替换它们。</p><h2 id="1491" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">如何可靠地将 python 包安装到 Jupyter 笔记本中？</h2><p id="61bc" class="pw-post-body-paragraph iv iw hi ix b iy lc ja jb jc ld je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">这是一个非常基本的，但我觉得值得记住！启动您的笔记本，然后在一个地方安装您需要的任何新的依赖项，这要方便得多。</p><pre class="ko kp kq kr fd ks kt ku kv aw kw bi"><span id="d4ff" class="jt ju hi kt b fi kx ky l kz la"># Install a pip package in the current Jupyter kernel<br/>import sys<br/>!{sys.executable} -m pip install your-desired-python-package</span></pre><p id="7d35" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这将把您想要的包安装到您在笔记本中使用的同一个 python 环境中。</p><h2 id="fede" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">如何让一个相关矩阵可读性强很多？</h2><p id="8a31" class="pw-post-body-paragraph iv iw hi ix b iy lc ja jb jc ld je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">我发现 seaborn 的相关矩阵热图表示的默认输出读起来非常混乱。</p><p id="c6e2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一半的输出是不必要的，配色方案第一眼看上去不容易读懂；这是我的首选解决方案。</p><p id="a170" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">舍入值和指定字体也很好！</p><figure class="ko kp kq kr fd ij"><div class="bz dy l di"><div class="lh li l"/></div></figure><h2 id="94e2" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">如何获得一个 dataframe 的列的所有可能的组合？</h2><figure class="ko kp kq kr fd ij"><div class="bz dy l di"><div class="lh li l"/></div></figure><p id="4d47" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您正在测试模型的准确性，并试图找出不同的特征如何影响模型，那么这个工具就很方便了。</p><p id="241e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这样做相当耗费处理器资源，而且通常过于自动化，但是如果您对一些特定的功能组合感兴趣，这可能会很有用。</p><h2 id="68a6" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">如何读入大量 CSV 并将它们连接在一起以创建一个数据帧？</h2><pre class="ko kp kq kr fd ks kt ku kv aw kw bi"><span id="cbb6" class="jt ju hi kt b fi kx ky l kz la">import os<br/>import glob</span><span id="6e59" class="jt ju hi kt b fi lb ky l kz la"># Creates a list containing absolute file paths for all csvs in      # current working directory</span><span id="b829" class="jt ju hi kt b fi lb ky l kz la">sheets = glob.glob(os.path.join(os.getcwd(), "*.csv"))</span><span id="75c5" class="jt ju hi kt b fi lb ky l kz la"># Use a generator to read in all the csvs as dataframes<br/># Then join them all together<br/># This only works if the columns are the same in each csv</span><span id="eea3" class="jt ju hi kt b fi lb ky l kz la">big_dataframe = pd.concat(pd.read_csv((s)for s in sheets))</span></pre><p id="4de7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是我在抓取网站或进行速率受限的 API 调用后经常使用的一种方法，这意味着我会在每次 API 调用时将数据写入文件，并在最后将所有数据连接到一个数据帧中。</p><h2 id="cf72" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">如何处理一列列表？</h2><figure class="ko kp kq kr fd ij"><div class="bz dy l di"><div class="lh li l"/></div></figure><p id="be3a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">explode 方法为列表中的每一项创建一个包含重复信息的新行，这非常漂亮。</p><p id="21c7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">虽然这可能会创建一些您不想要的额外的新数据，但它允许您找到一些新的数据点。在上面的例子中，您现在可以找出哪些演员通常获得最高的 star_rating。</p></div></div>    
</body>
</html>