<html>
<head>
<title>Developing Tensorflow on Android Phone</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Android手机上开发Tensorflow</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/developing-tensorflow-on-android-phone-cfc4297b676e?source=collection_archive---------0-----------------------#2019-12-30">https://medium.com/analytics-vidhya/developing-tensorflow-on-android-phone-cfc4297b676e?source=collection_archive---------0-----------------------#2019-12-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/8a0a512c24f9c711de8c939d2cb31ac6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1R5oY5RYCmUVKD3lGurBeA.jpeg"/></div></div></figure><p id="6736" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我一直在想，我们是否可以安装Tensorflow，并在我的android手机上用人工智能进行编码。我终于让它工作了。所以我想在这里分享我实现它的步骤。</p><p id="0fcb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我的设备是华硕ROG手机2。它有12GB的内存和512GB的存储，足够强大，可以完成许多开发任务…如果我们能找到在其上运行开发生态系统的方法就好了。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jo"><img src="../Images/44fc891dfcc5039f787c815204d069cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:710/format:webp/1*n1fskBYn_v2s4bEdurLW-g.jpeg"/></div></figure><p id="914e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第一步是安装Termux。从谷歌Play商店拿就行了。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jt"><img src="../Images/199d914fbfc0532c794a4b63417d097d.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/format:webp/1*D1IsUhWM1LzEuRkzEC6KQQ.jpeg"/></div></figure><p id="3e72" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后我们会在Termux上安装Ubuntu。我们将在Ubuntu中安装所有的东西，因为它们比普通的Termux更兼容。Ubuntu将使用chroot运行。</p><ol class=""><li id="4954" class="ju jv hi is b it iu ix iy jb jw jf jx jj jy jn jz ka kb kc bi translated">启动Termux。</li><li id="c9cd" class="ju jv hi is b it kd ix ke jb kf jf kg jj kh jn jz ka kb kc bi translated">确保Termux是最新的:<code class="du ki kj kk kl b">pkg upgrade</code></li><li id="821b" class="ju jv hi is b it kd ix ke jb kf jf kg jj kh jn jz ka kb kc bi translated">安装wget和proot: <code class="du ki kj kk kl b">pkg install wget proot</code></li><li id="fb00" class="ju jv hi is b it kd ix ke jb kf jf kg jj kh jn jz ka kb kc bi translated">创建安装ubuntu的目录:<code class="du ki kj kk kl b">mkdir ubuntu &amp;&amp; cd ubuntu</code></li><li id="49cd" class="ju jv hi is b it kd ix ke jb kf jf kg jj kh jn jz ka kb kc bi translated">下载ubuntu chroot安装脚本:<code class="du ki kj kk kl b">wget <a class="ae km" href="https://raw.githubusercontent.com/Neo-Oli/termux-ubuntu/master/ubuntu.sh" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/Neo-Oli/termux-ubuntu/master/ubuntu.sh</a></code></li><li id="386d" class="ju jv hi is b it kd ix ke jb kf jf kg jj kh jn jz ka kb kc bi translated">运行安装脚本:<code class="du ki kj kk kl b">bash ubuntu.sh</code></li></ol><p id="dcfd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们可以通过运行脚本来启动Ubuntu:<code class="du ki kj kk kl b">./start-ubuntu.sh</code></p><p id="ec54" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，我们将检查并安装Ubuntu映像的更新。</p><p id="c2ca" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du ki kj kk kl b">apt-get update &amp;&amp; apt-get upgrade</code></p><p id="17a7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">安装一些先决条件。</p><p id="a52b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du ki kj kk kl b">apt-get install git wget vim zip build-essential python python3 python3-dev python3-pip libhdf5-dev</code></p><blockquote class="kn ko kp"><p id="6ca6" class="iq ir kq is b it iu iv iw ix iy iz ja kr jc jd je ks jg jh ji kt jk jl jm jn hb bi translated">如果您不想自己从头开始构建Tensorflow(和Bazel ),我还在这里提供了构建的PIP包:</p><p id="91a0" class="iq ir kq is b it iu iv iw ix iy iz ja kr jc jd je ks jg jh ji kt jk jl jm jn hb bi translated"><a class="ae km" href="https://drive.google.com/open?id=1-1AM4gl0K6u8OQPd39k4DyDroBTUcGH3" rel="noopener ugc nofollow" target="_blank">https://drive.google.com/open?id = 1-1am 4 GL 0k 6 u 8 o qpd 39k 4 dydrobtucgh 3</a></p><p id="3b69" class="iq ir kq is b it iu iv iw ix iy iz ja kr jc jd je ks jg jh ji kt jk jl jm jn hb bi translated">您可以下载并使用PIP安装，如下所示:</p></blockquote><pre class="jp jq jr js fd ku kl kv kw aw kx bi"><span id="cbeb" class="ky kz hi kl b fi la lb l lc ld">pip3 install tensorflow-1.14.1-cp37-cp37m-linux_aarch64.whl</span></pre><p id="5abc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是，如果您喜欢自己构建它，或者您想使用Tensorflow的不同版本，您可以按照下面的指南从源代码构建Tensorflow。</p><p id="19cf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们要搭建的Tensorflow版本是1.14。无论如何，这个指南应该也适用于Tensorflow的其他版本。您只需要检查哪个版本的Bazel将与您的特定版本Tensorflow配合使用，并确保下载正确版本的Bazel。</p><h1 id="65f9" class="le kz hi bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated"><strong class="ak">步骤1:在Android / Termux中构建Bazel</strong></h1><p id="9054" class="pw-post-body-paragraph iq ir hi is b it mb iv iw ix mc iz ja jb md jd je jf me jh ji jj mf jl jm jn hb bi translated">在开始之前，我建议你在手机上安装一个好的文本/代码编辑器。有几个免费的，但这里有一个最低要求。我们的Ubuntu安装在Termux数据目录中(将其放在Termux数据目录之外会导致文件权限问题，因为Termux对其数据目录之外的文件没有完全的访问权限)。通常其他应用程序(文本编辑器)将无法访问Termux的数据目录，因为Android安全的东西，除非我们根我们的手机。如果我们想在Ubuntu中使用文本编辑器编辑文件，这将是个问题。</p><p id="7f9a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是，Android确实提供了一种访问其他应用程序数据目录中的文件的方法，这种方法被称为SAF(存储访问框架)。一些文本编辑器应用程序支持它。所以我推荐你安装那些支持的。我在这里列举了其中的一些:</p><ul class=""><li id="a845" class="ju jv hi is b it iu ix iy jb jw jf jx jj jy jn mg ka kb kc bi translated">https://play.google.com/store/apps/details?<a class="ae km" href="https://play.google.com/store/apps/details?id=com.rhmsoft.edit" rel="noopener ugc nofollow" target="_blank">id=com.rhmsoft.edit </a> —这个应用程序支持SAF开箱即用。只需使用“打开(SAF)”选项。</li><li id="313f" class="ju jv hi is b it kd ix ke jb kf jf kg jj kh jn mg ka kb kc bi translated">sublime Text:<a class="ae km" href="https://apkpure.com/sublime-text-editor-for-android/com.kibou.sublime" rel="noopener ugc nofollow" target="_blank">https://apk pure . com/sublime-Text-editor-for-Android/com . kibou . sublime</a>——不知何故，这款应用已经不在Google Playstore的列表中了。您必须在设置页面中启用SAF支持。</li></ul><p id="a351" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用SAF，您可以将Termux视为另一个驱动器，并可以编辑其数据目录中的文件。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es mh"><img src="../Images/6c891dc6247dd5120863579e90e6b959.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/format:webp/1*wA_YJpcy4712Hu_PnDbEpQ.jpeg"/></div></figure><p id="e145" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因为Android设备不直接支持成熟的Tensorflow，所以我们需要从源代码中构建它。此外，Tensorflow需要Bazel来编译，而Bazel在Android中也不受官方支持。因此，我们需要首先从源代码构建Bazel，然后使用Bazel构建Tensorflow。整个过程可能需要2天才能完成。确保你有时间。</p><p id="736a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在Termux/Ubuntu内部，安装OpenJDK8。巴泽尔需要它。</p><p id="f8d0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du ki kj kk kl b">apt-get install openjdk-8-jdk</code></p><p id="d79f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下载Bazel源代码发行版。Tensorflow的每个版本都需要特定版本的Bazel来构建。我们正在构建Tensorflow 1.14。它需要Bazel 0.24.1。请注意，您不能从Bazel存储库克隆源代码并检出0.24.1分支，因为它缺少一些必备模块，例如Protobuf。源代码分发将包含我们构建Bazel所需的所有东西。</p><p id="7a1f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du ki kj kk kl b">mkdir ~/bazel &amp;&amp; cd ~/bazel</code></p><p id="0284" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du ki kj kk kl b">wget https://github.com/bazelbuild/bazel/releases/download/0.24.1/bazel-0.24.1-dist.zip</code></p><p id="8537" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du ki kj kk kl b">unzip bazel-0.24.1-dist.zip</code></p><p id="0247" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于Android，我们需要修改Bazel中的一些配置，使其构建成功。首先是增加JVM的堆大小。</p><p id="f36b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">编辑文件:<strong class="is hj">script/bootstrap/compile . sh .</strong></p><p id="2589" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果在支持SAF的情况下使用代码编辑器，它将位于Termux数据目录中:</p><p id="6ba6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">/Ubuntu/Ubuntu-fs/root/bazel/script/bootstrap/compile . sh</strong></p><p id="0be1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">转到第<strong class="is hj">行第130个</strong>，向<strong class="is hj"> ${JAVAC} </strong>添加选项，如下所示:</p><pre class="jp jq jr js fd ku kl kv kw aw kx bi"><span id="e954" class="ky kz hi kl b fi la lb l lc ld">run “${JAVAC}” <strong class="kl hj">-verbose -J-Xms1024m -J-Xmx1024m</strong> -classpath …</span></pre><p id="decd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，我们将设置Bazel在单个进程中运行，这样我们就不会耗尽手机内存。在Termux Ubuntu终端中运行以下命令:</p><p id="52be" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du ki kj kk kl b">export EXTRA_BAZEL_ARGS='--jobs 1'</code></p><p id="0f9e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">建造巴泽尔。这个过程可能需要6个小时。</p><p id="eb80" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du ki kj kk kl b">cd ~/bazel</code></p><p id="03fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du ki kj kk kl b">./compile.sh</code></p><p id="c039" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">注意，Bazel 0.24.1有一个bug。如果构建失败，您必须删除整个bazel目录，并重新开始提取<code class="du ki kj kk kl b">bazel-0.24.1-dist.zip</code>的过程。否则，您可能会在第二次运行<code class="du ki kj kk kl b">./compile.sh</code>时遇到文件权限错误</p><p id="0a0b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">构建完成后，将Bazel二进制文件复制到系统路径。</p><p id="0f3e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du ki kj kk kl b">cp ~/bazel/output/bazel /usr/local/bin/</code></p><h1 id="59d0" class="le kz hi bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">步骤2:在Android / Termux中构建Tensorflow</h1><p id="9e72" class="pw-post-body-paragraph iq ir hi is b it mb iv iw ix mc iz ja jb md jd je jf me jh ji jj mf jl jm jn hb bi translated">克隆Tensorflow源代码并检查分支r1.14。</p><pre class="jp jq jr js fd ku kl kv kw aw kx bi"><span id="2735" class="ky kz hi kl b fi la lb l lc ld">cd ~</span><span id="7c9c" class="ky kz hi kl b fi mi lb l lc ld">git clone https://github.com/tensorflow/tensorflow.git</span><span id="9517" class="ky kz hi kl b fi mi lb l lc ld">cd tensorflow</span><span id="7a38" class="ky kz hi kl b fi mi lb l lc ld">git checkout r1.14</span><span id="29fe" class="ky kz hi kl b fi mi lb l lc ld">Install Tensorflow prerequisites</span><span id="5098" class="ky kz hi kl b fi mi lb l lc ld">pip3 install six numpy wheel</span><span id="ea69" class="ky kz hi kl b fi mi lb l lc ld">pip3 install keras-applications — no-deps</span><span id="4bcf" class="ky kz hi kl b fi mi lb l lc ld">pip3 install keras-preprocessing — no-deps</span></pre><p id="6b9f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们需要对Tensorflow源代码应用一些补丁，以使其与Android上的ARM 64位兼容。您需要的修改如下所示。这些修改主要是使用预处理器开关来避免一些不支持的优化，并禁用NEON处理器优化。</p><blockquote class="kn ko kp"><p id="03bb" class="iq ir kq is b it iu iv iw ix iy iz ja kr jc jd je ks jg jh ji kt jk jl jm jn hb bi translated"><strong class="is hj">File:/tensor flow/lite/kernels/internal/depthwiseconv _ quantified _ test . cc</strong></p><p id="ea77" class="iq ir kq is b it iu iv iw ix iy iz ja kr jc jd je ks jg jh ji kt jk jl jm jn hb bi translated">第167行:</p></blockquote><pre class="jp jq jr js fd ku kl kv kw aw kx bi"><span id="9565" class="ky kz hi kl b fi la lb l lc ld"><em class="kq">// This is compiled-in even if dot-product instructions are unavailable.</em></span><span id="3ac7" class="ky kz hi kl b fi mi lb l lc ld"><em class="kq">// However, tests should skip dot-product testing in that case and not</em></span><span id="316a" class="ky kz hi kl b fi mi lb l lc ld"><em class="kq">// call this code.</em></span><span id="bebd" class="ky kz hi kl b fi mi lb l lc ld">#if defined(__aarch64__) &amp;&amp; !defined(GOOGLE_L4T)<strong class="kl hj"><em class="kq"> </em>// Change this line to the line below:</strong></span><span id="2f3c" class="ky kz hi kl b fi mi lb l lc ld">#if defined(__aarch64__) &amp;&amp; !defined(GOOGLE_L4T) &amp;&amp; defined(__ANDROID__) &amp;&amp; defined(__clang__)</span></pre><blockquote class="kn ko kp"><p id="571f" class="iq ir kq is b it iu iv iw ix iy iz ja kr jc jd je ks jg jh ji kt jk jl jm jn hb bi translated">第691行:</p></blockquote><pre class="jp jq jr js fd ku kl kv kw aw kx bi"><span id="55ec" class="ky kz hi kl b fi la lb l lc ld"><em class="kq">void TestOneNeonDot3x3(const TestParam&amp; test_param) {</em></span><span id="19ad" class="ky kz hi kl b fi mi lb l lc ld">#if defined(__aarch64__) &amp;&amp; !defined(GOOGLE_L4T) <strong class="kl hj">// Change this line to the line below:</strong></span><span id="db68" class="ky kz hi kl b fi mi lb l lc ld">#if defined(__aarch64__) &amp;&amp; !defined(GOOGLE_L4T) &amp;&amp; defined(__ANDROID__) &amp;&amp; defined(__clang__)</span></pre><blockquote class="kn ko kp"><p id="c4e6" class="iq ir kq is b it iu iv iw ix iy iz ja kr jc jd je ks jg jh ji kt jk jl jm jn hb bi translated">第856行:</p></blockquote><pre class="jp jq jr js fd ku kl kv kw aw kx bi"><span id="2cc4" class="ky kz hi kl b fi la lb l lc ld"><em class="kq">#endif</em></span><span id="57e6" class="ky kz hi kl b fi mi lb l lc ld">#if defined(__aarch64__) &amp;&amp; !defined(GOOGLE_L4T) <strong class="kl hj">// Change this line to the line below:</strong></span><span id="59ce" class="ky kz hi kl b fi mi lb l lc ld">#if defined(__aarch64__) &amp;&amp; !defined(GOOGLE_L4T) &amp;&amp; defined(__ANDROID__) &amp;&amp; defined(__clang__)</span></pre><blockquote class="kn ko kp"><p id="c710" class="iq ir kq is b it iu iv iw ix iy iz ja kr jc jd je ks jg jh ji kt jk jl jm jn hb bi translated"><strong class="is hj">File:/tensor flow/lite/kernels/internal/optimized/depthwiseconv _ uint 8 . h</strong></p><p id="d71f" class="iq ir kq is b it iu iv iw ix iy iz ja kr jc jd je ks jg jh ji kt jk jl jm jn hb bi translated">第2007行:</p></blockquote><pre class="jp jq jr js fd ku kl kv kw aw kx bi"><span id="ffd8" class="ky kz hi kl b fi la lb l lc ld"><em class="kq">// Enable for arm64 except for the Nvidia Linux 4 Tegra (L4T) running on</em></span><span id="2450" class="ky kz hi kl b fi mi lb l lc ld"><em class="kq">// Jetson TX-2. This compiler does not support the offsetof() macro.</em></span><span id="d9d2" class="ky kz hi kl b fi mi lb l lc ld">#if defined(__aarch64__) &amp;&amp; !defined(GOOGLE_L4T) <strong class="kl hj">// Change this line to the line below:</strong></span><span id="108b" class="ky kz hi kl b fi mi lb l lc ld">#if defined(__aarch64__) &amp;&amp; !defined(GOOGLE_L4T) &amp;&amp; defined(__ANDROID__) &amp;&amp; defined(__clang__)</span></pre><blockquote class="kn ko kp"><p id="c0bf" class="iq ir kq is b it iu iv iw ix iy iz ja kr jc jd je ks jg jh ji kt jk jl jm jn hb bi translated"><strong class="is hj">File:/tensor flow/lite/kernels/internal/optimized/depthwiseconv _ uint 8 _ 3x 3 _ filter . h</strong></p><p id="c1d7" class="iq ir kq is b it iu iv iw ix iy iz ja kr jc jd je ks jg jh ji kt jk jl jm jn hb bi translated">第5790行:</p></blockquote><pre class="jp jq jr js fd ku kl kv kw aw kx bi"><span id="60dc" class="ky kz hi kl b fi la lb l lc ld"><em class="kq">#endif // USE_NEON &amp;&amp;__aarch64__</em></span><span id="a841" class="ky kz hi kl b fi mi lb l lc ld">#if defined(__aarch64__) &amp;&amp; !defined(GOOGLE_L4T) <strong class="kl hj">// Change this line to the line below:</strong></span><span id="087b" class="ky kz hi kl b fi mi lb l lc ld">#if defined(__aarch64__) &amp;&amp; !defined(GOOGLE_L4T) &amp;&amp; defined(__ANDROID__) &amp;&amp; defined(__clang__)</span><span id="9092" class="ky kz hi kl b fi mi lb l lc ld"><em class="kq">// Dot product ops hard-coded</em></span></pre><blockquote class="kn ko kp"><p id="1cc0" class="iq ir kq is b it iu iv iw ix iy iz ja kr jc jd je ks jg jh ji kt jk jl jm jn hb bi translated"><strong class="is hj">文件:/第三方/png。构建</strong></p><p id="af1d" class="iq ir kq is b it iu iv iw ix iy iz ja kr jc jd je ks jg jh ji kt jk jl jm jn hb bi translated">第44行:</p></blockquote><pre class="jp jq jr js fd ku kl kv kw aw kx bi"><span id="e417" class="ky kz hi kl b fi la lb l lc ld"><strong class="kl hj">// Remove below lines:</strong></span><span id="8ac2" class="ky kz hi kl b fi mi lb l lc ld">copts = select({</span><span id="8f38" class="ky kz hi kl b fi mi lb l lc ld">   “:windows”: [“-DPNG_INTEL_SSE_OPT=1”],</span><span id="cdcb" class="ky kz hi kl b fi mi lb l lc ld">   “//conditions:default”: [],</span><span id="d860" class="ky kz hi kl b fi mi lb l lc ld">}),</span><span id="3400" class="ky kz hi kl b fi mi lb l lc ld"><strong class="kl hj">// Add below line instead:</strong></span><span id="6288" class="ky kz hi kl b fi mi lb l lc ld">copts = [“-DPNG_ARM_NEON_OPT=0”],</span></pre><p id="8372" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">运行生成配置。</p><pre class="jp jq jr js fd ku kl kv kw aw kx bi"><span id="6cdc" class="ky kz hi kl b fi la lb l lc ld">cd ~/tensorflow</span><span id="28b9" class="ky kz hi kl b fi mi lb l lc ld">./configure</span></pre><p id="94d0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">按如下方式回答构建配置(如果下面没有列出问题，则使用默认方式):</p><pre class="jp jq jr js fd ku kl kv kw aw kx bi"><span id="cd70" class="ky kz hi kl b fi la lb l lc ld"><strong class="kl hj">Please specify the location of python. :</strong> /usr/bin/python3<br/><strong class="kl hj">Do you wish to build Tensorflow with XLA JIT support? :</strong> n</span></pre><p id="30c8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">构建张量流，最多需要一天的时间来完成构建。</p><pre class="jp jq jr js fd ku kl kv kw aw kx bi"><span id="3b84" class="ky kz hi kl b fi la lb l lc ld">bazel build — config=opt //tensorflow/tools/pip_package:build_pip_package — jobs 4</span></pre><p id="ef6c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建PIP包轮文件。</p><pre class="jp jq jr js fd ku kl kv kw aw kx bi"><span id="1d1e" class="ky kz hi kl b fi la lb l lc ld">bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg</span></pre><p id="b1bc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，安装PIP包！在这个安装过程中，需要构建一些必需的库。可能需要1个小时。</p><pre class="jp jq jr js fd ku kl kv kw aw kx bi"><span id="0f0d" class="ky kz hi kl b fi la lb l lc ld">cd ~</span><span id="f702" class="ky kz hi kl b fi mi lb l lc ld">pip3 install /tmp/tensorflow_pkg/tensorflow-1.8.0-cp36-cp36m-linux_aarch64.whl</span></pre><p id="34f3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">尝试编写一些代码来使用张量流。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es jt"><img src="../Images/ac078fc173289a4a6f1e664d7b6d6ea4.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/format:webp/1*kDoXqUwUVuM9MekvL7K3Ow.jpeg"/></div></figure><p id="930d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">仅此而已。在Android手机上运行Tensorflow无法与在台式机或笔记本电脑上运行tensor flow相比。直接从你的手机上训练模型是不实际的。无论如何，对于像我们这样的核心开发人员来说，能够在移动中进行编码、开发和运行一些快速测试或调试，而不必随身携带笔记本电脑，有时是非常方便的。(如果你通读了这个故事，我想你会的)。</p><p id="a0a6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">运行模型推理从我的经验来看也还不错(嗯，可能取决于你的手机规格)。我可以用这个Tensorflow开发代码实时运行SSD+MobileNetV2进行对象检测。我以后可能会发布更多关于在Android手机上开发AI的博客。</p></div></div>    
</body>
</html>