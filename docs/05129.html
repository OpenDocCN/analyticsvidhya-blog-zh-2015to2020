<html>
<head>
<title>Exploratory Data Analysis of the Hotel Booking Demand with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于Python的酒店预订需求探索性数据分析</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/exploratory-data-analysis-of-the-hotel-booking-demand-with-python-200925230106?source=collection_archive---------0-----------------------#2020-04-12">https://medium.com/analytics-vidhya/exploratory-data-analysis-of-the-hotel-booking-demand-with-python-200925230106?source=collection_archive---------0-----------------------#2020-04-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/5935a692831cf5be5062c9ca9611ae79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*woKaYoiiz8aQSlCi"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae iu" href="https://unsplash.com/@kmuza?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Carlos Muza </a>拍摄的照片</figcaption></figure><h1 id="b29b" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">数据集:</h1><blockquote class="jt ju jv"><p id="b78a" class="jw jx jy jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">我们将使用来自Kaggle的<strong class="jz hj">酒店预订需求</strong>数据集。你可以从这里下载:<br/><a class="ae iu" href="https://www.kaggle.com/jessemostipak/hotel-booking-demand" rel="noopener ugc nofollow" target="_blank">https://www.kaggle.com/jessemostipak/hotel-booking-demand</a></p></blockquote><p id="6654" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">该数据集包含城市酒店和度假酒店的预订信息，并且包括诸如预订时间、停留时间、成人、儿童和/或婴儿的数量以及可用停车位数量等信息。所有个人识别信息都来自数据。</p><p id="793e" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">我们将使用python执行探索性数据分析，以从数据中获得洞察力。</p><h1 id="c296" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">我们将尝试回答以下问题</h1><ol class=""><li id="4fff" class="ky kz hi jz b ka la ke lb kv lc kw ld kx le ku lf lg lh li bi translated">有多少预订被取消了？</li><li id="baed" class="ky kz hi jz b ka lj ke lk kv ll kw lm kx ln ku lf lg lh li bi translated">度假酒店和城市酒店的预订比例是多少？</li><li id="05b0" class="ky kz hi jz b ka lj ke lk kv ll kw lm kx ln ku lf lg lh li bi translated">每年预订的百分比是多少？</li><li id="797b" class="ky kz hi jz b ka lj ke lk kv ll kw lm kx ln ku lf lg lh li bi translated">酒店哪个月最忙？</li><li id="b233" class="ky kz hi jz b ka lj ke lk kv ll kw lm kx ln ku lf lg lh li bi translated">大多数客人来自哪个国家？</li><li id="d659" class="ky kz hi jz b ka lj ke lk kv ll kw lm kx ln ku lf lg lh li bi translated">人们在酒店呆多长时间？</li><li id="58ad" class="ky kz hi jz b ka lj ke lk kv ll kw lm kx ln ku lf lg lh li bi translated">预订最多的住宿类型是哪一种(单人、双人、家庭)？</li></ol><p id="eb8b" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">之后，我们将制作预测模型，以预测未来是否会取消预订</p><p id="d021" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated"><strong class="jz hj">我们将:</strong></p><ul class=""><li id="1b7d" class="ky kz hi jz b ka kb ke kf kv lo kw lp kx lq ku lr lg lh li bi translated">执行特征工程以制造新特征</li><li id="3884" class="ky kz hi jz b ka lj ke lk kv ll kw lm kx ln ku lr lg lh li bi translated">执行特征选择以仅选择相关特征</li><li id="8459" class="ky kz hi jz b ka lj ke lk kv ll kw lm kx ln ku lr lg lh li bi translated">转换数据(类别到数字)</li><li id="e52d" class="ky kz hi jz b ka lj ke lk kv ll kw lm kx ln ku lr lg lh li bi translated">分割数据(训练测试分割)</li><li id="f1f5" class="ky kz hi jz b ka lj ke lk kv ll kw lm kx ln ku lr lg lh li bi translated">对数据建模(拟合数据)</li><li id="4f40" class="ky kz hi jz b ka lj ke lk kv ll kw lm kx ln ku lr lg lh li bi translated">最后，评估我们的模型</li></ul><p id="1b0b" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">让我们开始:</p><h1 id="8017" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">导入包</h1><p id="16ba" class="pw-post-body-paragraph jw jx hi jz b ka la kc kd ke lb kg kh kv ls kk kl kw lt ko kp kx lu ks kt ku hb bi translated">首先导入必要的包并导入数据集</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="8998" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">现在导入并显示数据集</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es mb"><img src="../Images/a81c03f36f56883640baefabeaa8b1fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*vpfj08V7EBM621r7QXlbaA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">我们数据集的视图</figcaption></figure></div><div class="ab cl mc md gp me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hb hc hd he hf"><h1 id="040a" class="iv iw hi bd ix iy mj ja jb jc mk je jf jg ml ji jj jk mm jm jn jo mn jq jr js bi translated">数据预处理</h1><p id="9704" class="pw-post-body-paragraph jw jx hi jz b ka la kc kd ke lb kg kh kv ls kk kl kw lt ko kp kx lu ks kt ku hb bi translated">首先复制数据集，这样我们的原始数据集保持不变</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><h2 id="f8a3" class="mo iw hi bd ix mp mq mr jb ms mt mu jf kv mv mw jj kw mx my jn kx mz na jr nb bi translated">1.处理缺失值</h2><p id="f11d" class="pw-post-body-paragraph jw jx hi jz b ka la kc kd ke lb kg kh kv ls kk kl kw lt ko kp kx lu ks kt ku hb bi translated">检查我们的数据是否包含任何缺失值</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es nc"><img src="../Images/ca6b76695eacc737cf4788ee5a2c9c67.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/format:webp/1*xYgGZ3D7JJB2D8n7-M1c_Q.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">缺少值</figcaption></figure><p id="312e" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">我们有4个缺失值的特征。</p><p id="fb65" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">在“代理和公司”列中，我们有每个代理或公司的id_number，所以对于所有缺少的值，我们将用0替换它。</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="6115" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">Children列包含孩子的数量，因此我们将用四舍五入的平均值替换所有缺失的值。</p><p id="f379" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">我们的国家列包含代表不同国家的国家代码。这是一个分类特征，所以我也将它替换为模式值。众数值是出现次数比任何其他值都多的值。所以，在这种情况下，我用最常出现的国家来代替它。</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="144a" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">有许多行没有客人，包括成人、儿童和婴儿。这些类型的行不构成</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es nd"><img src="../Images/5eaf3e48b59e84e4a8fb41a150439a89.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*pa23ebCiCm5cNGippAXLaw.png"/></div></figure><p id="e416" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">我们有180个这样的行。我们将删除这些行。</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><h2 id="0cbf" class="mo iw hi bd ix mp mq mr jb ms mt mu jf kv mv mw jj kw mx my jn kx mz na jr nb bi translated">2.转换数据类型</h2><p id="00c6" class="pw-post-body-paragraph jw jx hi jz b ka la kc kd ke lb kg kh kv ls kk kl kw lt ko kp kx lu ks kt ku hb bi translated">让我们检查数据集中每一列的数据类型。</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es ne"><img src="../Images/99527133cccd4c33eb3c8f6923da3803.png" data-original-src="https://miro.medium.com/v2/resize:fit:630/format:webp/1*5xsA3g0EDHOZkCHQIe-mBQ.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">我们特征的数据类型</figcaption></figure><p id="4a3e" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">我们可以看到不同列的不同数据类型。</p><p id="d620" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">有一些列，如children、company和agent，是float类型的，但它们的值只是整数。</p><p id="7a46" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">所以我们将把它们转换成整数类型。</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure></div><div class="ab cl mc md gp me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hb hc hd he hf"><h1 id="ec6c" class="iv iw hi bd ix iy mj ja jb jc mk je jf jg ml ji jj jk mm jm jn jo mn jq jr js bi translated">探索性数据分析</h1><p id="1973" class="pw-post-body-paragraph jw jx hi jz b ka la kc kd ke lb kg kh kv ls kk kl kw lt ko kp kx lu ks kt ku hb bi translated">现在让我们做有趣的部分，从我们的数据中提取信息，并尝试回答我们的问题。</p><h2 id="0a25" class="mo iw hi bd ix mp mq mr jb ms mt mu jf kv mv mw jj kw mx my jn kx mz na jr nb bi translated">1.有多少预订被取消了？</h2><p id="57a7" class="pw-post-body-paragraph jw jx hi jz b ka la kc kd ke lb kg kh kv ls kk kl kw lt ko kp kx lu ks kt ku hb bi translated">让我们编写函数来获得不同值的百分比。</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="1b2f" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">此函数接受一个系列或数据框列，并返回这两个数组</p><p id="2272" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">x是我们的唯一值<br/> y是每个唯一值的百分比值</p><p id="44a1" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">现在让我们在<strong class="jz hj">被取消的</strong>特征上使用这个函数，看看结果</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es nf"><img src="../Images/be4f138900090b44aad018bb7a1f6990.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*qP9jWgj7y8o9iDF0UqU8vA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">X和Y数组中的值</figcaption></figure><blockquote class="ng"><p id="4e1b" class="nh ni hi bd nj nk nl nm nn no np ku dx translated">is_canceled有两个唯一的值:如果预订被取消，则为1，否则为0。</p></blockquote><p id="d976" class="pw-post-body-paragraph jw jx hi jz b ka nq kc kd ke nr kg kh kv ns kk kl kw nt ko kp kx nu ks kt ku hb bi translated">现在我们来绘制这个结果。我将编写另一个函数来绘制图表。编写函数的好处是我们可以一次又一次地重用代码。</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="8f41" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">该函数接受两个数组x和y，并显示所需的图表。默认的绘图类型是条形图，但它也可以绘制线图。可以给出可选参数来显示标题和标签。</p><p id="2296" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">现在让我们调用函数</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es nv"><img src="../Images/f8237454cc21fdd45aed30cab8fd7399.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*HGAGmSRk5uCrBGbbrUJDKA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">取消与未取消比率</figcaption></figure><blockquote class="ng"><p id="6506" class="nh ni hi bd nj nk nl nm nn no np ku dx translated">37%的预订被取消。预订的客人有63%的时间办理了入住手续(没有取消预订)。</p></blockquote><p id="beae" class="pw-post-body-paragraph jw jx hi jz b ka nq kc kd ke nr kg kh kv ns kk kl kw nt ko kp kx nu ks kt ku hb bi translated">为了进一步分析，我们将只选择那些没有被取消的预订</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><h2 id="6112" class="mo iw hi bd ix mp mq mr jb ms mt mu jf kv mv mw jj kw mx my jn kx mz na jr nb bi translated">2.度假酒店和城市酒店的预订比例是多少？</h2><p id="11ea" class="pw-post-body-paragraph jw jx hi jz b ka la kc kd ke lb kg kh kv ls kk kl kw lt ko kp kx lu ks kt ku hb bi translated">让我们回答另一个问题，每种类型的酒店预订了多少。</p><p id="2ba2" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">我们现在可以重用之前创建的函数。我们要做的就是将dataframe列传递给get_count()函数，并将其结果(x和y数组)传递给plot函数。</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es nw"><img src="../Images/2ce79cc80e5792a8092345cfb4901c97.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*R6fREgt9gWMNQwwL6RxSqg.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">城市酒店Vs度假酒店</figcaption></figure><blockquote class="ng"><p id="18ae" class="nh ni hi bd nj nk nl nm nn no np ku dx translated">超过60%的人预订了城市酒店</p></blockquote><h2 id="1c67" class="mo iw hi bd ix mp nx mr jb ms ny mu jf kv nz mw jj kw oa my jn kx ob na jr nb bi translated">3.每年预订的百分比是多少？</h2><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es nw"><img src="../Images/3c460cb0a7dc31626e72c8111aaf3766.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*0UCElZ5LH3i_K0Ax4uQSYA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">逐年比较</figcaption></figure><blockquote class="ng"><p id="9ea1" class="nh ni hi bd nj nk nl nm nn no np ku dx translated">与前一年相比，2016年的预订量增加了一倍多。但是第二年预订量下降了近15%。</p></blockquote><p id="4e7a" class="pw-post-body-paragraph jw jx hi jz b ka nq kc kd ke nr kg kh kv ns kk kl kw nt ko kp kx nu ks kt ku hb bi translated">让我们按酒店来划分，然后绘制图表。我们将更改代码来显示计数图。</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es oc"><img src="../Images/ce5deb106680274819a5fe9627be40d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:906/format:webp/1*AhzfNuXhy7gUGEBQ-WcaPQ.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">年度和酒店比较(并排)</figcaption></figure><h2 id="487e" class="mo iw hi bd ix mp mq mr jb ms mt mu jf kv mv mw jj kw mx my jn kx mz na jr nb bi translated">4.酒店哪个月最忙？</h2><p id="ecf5" class="pw-post-body-paragraph jw jx hi jz b ka la kc kd ke lb kg kh kv ls kk kl kw lt ko kp kx lu ks kt ku hb bi translated">为了回答这个问题，我们将选择arrival_date_month特性并获取它的值计数。现在产生的数据将不会按照月份排序，所以我们必须对它进行排序。我们将制作一个包含月份名称的新列表，以便根据该列表对数据进行排序。</p><p id="f956" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">我们将显示线图来显示趋势。</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><figure class="lv lw lx ly fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es od"><img src="../Images/5bed97085288f49a2417041db271e6cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v1pNPTmnwnBLmCpwgnFtqw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">显示每月酒店预订趋势的折线图</figcaption></figure><blockquote class="ng"><p id="f627" class="nh ni hi bd nj nk nl nm nn no np ku dx translated">正如我们所看到的，大多数预订是在7月至8月间完成的。年初和年末的预订量最少。</p></blockquote><p id="1bc2" class="pw-post-body-paragraph jw jx hi jz b ka nq kc kd ke nr kg kh kv ns kk kl kw nt ko kp kx nu ks kt ku hb bi translated">让我们将每种酒店类型的数据分开，然后看看趋势。</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><figure class="lv lw lx ly fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es od"><img src="../Images/48fba2970f1c257578113133c1e53bb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7EXgUIU6EGitW4xkZc-Hsg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">显示每月酒店预订趋势的折线图(每种酒店类型单独一条线)</figcaption></figure><blockquote class="jt ju jv"><p id="5e15" class="jw jx jy jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">我们可以看到这种趋势有点类似，只是有一点点不同。度假村在年初和年末的预订量较高，六月和九月的预订量较低。</p></blockquote><h2 id="77bb" class="mo iw hi bd ix mp mq mr jb ms mt mu jf kv mv mw jj kw mx my jn kx mz na jr nb bi translated">5.大多数客人来自哪个国家？</h2><p id="f1aa" class="pw-post-body-paragraph jw jx hi jz b ka la kc kd ke lb kg kh kv ls kk kl kw lt ko kp kx lu ks kt ku hb bi translated">要查看国家比较图，请查看<strong class="jz hj">国家</strong>列。在国家一栏中，我们有每个国家的代码，比如PRT代表葡萄牙。</p><blockquote class="jt ju jv"><p id="3e9d" class="jw jx jy jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">为了获得国家名称，我们将使用<strong class="jz hj"> pycountry </strong>。<strong class="jz hj"> </strong> pycountry是一个非常有用的python包。<br/><a class="ae iu" href="https://github.com/flyingcircusio/pycountry" rel="noopener ugc nofollow" target="_blank">GitHub</a>|<a class="ae iu" href="https://pypi.org/project/pycountry/" rel="noopener ugc nofollow" target="_blank">PyPi</a></p></blockquote><p id="29f1" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">我们将使用这个包从国家代码中获取国家名称</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><figure class="lv lw lx ly fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es oe"><img src="../Images/3f2559dc1615e2494085f63bc4981019.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AVQpgbSJEOzGYPApT_jbMA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">国家预订百分比</figcaption></figure><blockquote class="ng"><p id="a3c3" class="nh ni hi bd nj nk nl nm nn no np ku dx translated">葡萄牙、英国和法国、西班牙和德国是来自最多客人的国家，超过80%来自这5个国家。</p></blockquote><h2 id="58af" class="mo iw hi bd ix mp nx mr jb ms ny mu jf kv nz mw jj kw oa my jn kx ob na jr nb bi translated">6.人们在酒店呆多长时间？</h2><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es of"><img src="../Images/4dcbeac4ac8f370dd9d49de8fed5e583.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*hkAge_aytNYebnbz28FnWA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">人们住宿的天数</figcaption></figure><blockquote class="ng"><p id="a69b" class="nh ni hi bd nj nk nl nm nn no np ku dx translated">大多数人会停留一、二或三天。超过60%的客人属于这三种情况。</p></blockquote><p id="dfff" class="pw-post-body-paragraph jw jx hi jz b ka nq kc kd ke nr kg kh kv ns kk kl kw nt ko kp kx nu ks kt ku hb bi translated">让我们看看每种酒店类型的停留时间趋势。</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><figure class="lv lw lx ly fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es og"><img src="../Images/f4a6354d4ba81bba43ae47829a4b3f60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M9Xq8hySYLkp7frmdcsAoQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">人们住宿的夜数(针对每种酒店类型)</figcaption></figure><blockquote class="ng"><p id="fed1" class="nh ni hi bd nj nk nl nm nn no np ku dx translated">对于度假酒店，最受欢迎的停留时间分别是三天、两天、一天和四天。<br/>对于城市酒店，最受欢迎的住宿时长分别为一、二、七(周)和三</p></blockquote><h2 id="6e1c" class="mo iw hi bd ix mp nx mr jb ms ny mu jf kv nz mw jj kw oa my jn kx ob na jr nb bi translated">7.<code class="du oh oi oj ok b">Which was the most booked accommodation type (Single, Couple, Family)?</code></h2><p id="cd97" class="pw-post-body-paragraph jw jx hi jz b ka la kc kd ke lb kg kh kv ls kk kl kw lt ko kp kx lu ks kt ku hb bi translated">我们将入住酒店的人分为三类。</p><p id="e050" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">单人:仅1名成人</p><p id="24ef" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">夫妇:两个成年人我们不能肯定地说这两个人是不是一对真正的夫妇，数据没有告诉我们这方面的任何事情，但我们会假设他们是夫妇:P</p><p id="78f0" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">家人或朋友:2人以上，包括成人、儿童和婴儿。(或者，我们可以称之为团体)</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es of"><img src="../Images/fa34041659cb12da91537f57dbaa0079.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*KpT72Z1ytzxlMgFx50FtxA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">住宿类型(单人、双人、家庭)</figcaption></figure><blockquote class="ng"><p id="2320" class="nh ni hi bd nj nk nl nm nn no np ku dx translated">情侣(或2名成人)是最受欢迎的住宿类型。所以酒店可以据此制定计划</p></blockquote></div><div class="ab cl mc md gp me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hb hc hd he hf"><h1 id="3679" class="iv iw hi bd ix iy mj ja jb jc mk je jf jg ml ji jj jk mm jm jn jo mn jq jr js bi translated">特征选择和特征工程</h1><p id="669e" class="pw-post-body-paragraph jw jx hi jz b ka la kc kd ke lb kg kh kv ls kk kl kw lt ko kp kx lu ks kt ku hb bi translated">在我们开始制作预测模型之前。让我们进行特征选择和特征工程。我们将创建更多相关的功能，删除不相关或不太重要的功能。</p><p id="a3a7" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">首先，制作dataframe的副本。</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="0c55" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">特征工程是非常重要的一部分，也是非常困难的一部分。花些时间，试着想想我们可以从现有的功能中创造出什么类型的新功能？</p><p id="7a83" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">现在让我们创建一些新的功能。</p><ul class=""><li id="a3e8" class="ky kz hi jz b ka kb ke kf kv lo kw lp kx lq ku lr lg lh li bi translated">我们的数据集中有两个要素是reserved_room_type，另一个是assigned_room_type。我们将创建一个新功能，让我们称之为房间，如果客人被分配到预订的同一房间，它将包含1，否则为0。如果客人没有得到同样的房间，他可以取消预订。聪明吧？</li><li id="d37d" class="ky kz hi jz b ka lj ke lk kv ll kw lm kx ln ku lr lg lh li bi translated">另一个特征将被net_cancelled。如果当前客户在过去取消的预订比他没有取消的预订多，它将包含1，否则为0。</li></ul><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="3011" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">现在删除这些不必要的功能</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="bfad" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">让我们也删除<strong class="jz hj"> reservation_status </strong>。尽管这是一个非常重要的功能，但它已经有了取消预订的信息。此外，它只能在预订被取消或客人入住后才显示信息。因此，在我们的预测模型中使用该特征是没有用的。因为对于未来的预测，我们没有关于预订状态的信息。</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="3a67" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">让我们画出热图，看看相关性</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><figure class="lv lw lx ly fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ol"><img src="../Images/d58a8e31234bedeb7c746b7983333c39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ia0Aw_jGIzA7PTmaxqigPw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">相关矩阵</figcaption></figure><blockquote class="ng"><p id="f466" class="nh ni hi bd nj nk nl nm nn no np ku dx translated">我们可以看到我们的新特性Room和net_cancelled与is_cancelled的相关性比大多数其他列都高。</p></blockquote></div><div class="ab cl mc md gp me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hb hc hd he hf"><h1 id="ffb9" class="iv iw hi bd ix iy mj ja jb jc mk je jf jg ml ji jj jk mm jm jn jo mn jq jr js bi translated">建模</h1><h2 id="ab27" class="mo iw hi bd ix mp mq mr jb ms mt mu jf kv mv mw jj kw mx my jn kx mz na jr nb bi translated">1.将分类变量转换为数字变量</h2><p id="6216" class="pw-post-body-paragraph jw jx hi jz b ka la kc kd ke lb kg kh kv ls kk kl kw lt ko kp kx lu ks kt ku hb bi translated">让我们将分类值转换成数字形式。</p><p id="9248" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">我们将使用Sklearn的LabelEncoder以有序的方式进行编码。</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><h2 id="aef2" class="mo iw hi bd ix mp mq mr jb ms mt mu jf kv mv mw jj kw mx my jn kx mz na jr nb bi translated">2.列车测试分离</h2><p id="aec9" class="pw-post-body-paragraph jw jx hi jz b ka la kc kd ke lb kg kh kv ls kk kl kw lt ko kp kx lu ks kt ku hb bi translated">现在，让我们将数据集分为训练和测试两部分。分割比例的默认大小为3:1</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><h2 id="bcd2" class="mo iw hi bd ix mp mq mr jb ms mt mu jf kv mv mw jj kw mx my jn kx mz na jr nb bi translated">3.机器学习模型(决策树)</h2><p id="b898" class="pw-post-body-paragraph jw jx hi jz b ka la kc kd ke lb kg kh kv ls kk kl kw lt ko kp kx lu ks kt ku hb bi translated">我们将使用这个决定作为我们的预测模型。让我们来拟合数据。</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><h2 id="b4fe" class="mo iw hi bd ix mp mq mr jb ms mt mu jf kv mv mw jj kw mx my jn kx mz na jr nb bi translated">4.模型评估</h2><p id="0dad" class="pw-post-body-paragraph jw jx hi jz b ka la kc kd ke lb kg kh kv ls kk kl kw lt ko kp kx lu ks kt ku hb bi translated">现在让我们来评估我们的模型。我们将打印培训和测试准确性</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es om"><img src="../Images/93f138052d52fb205cf2d7805b0c8f26.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*hxz7jYIU5yAG4Sv_SevBoA.png"/></div></figure><blockquote class="jt ju jv"><p id="90ab" class="jw jx jy jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">啊哈！几乎完美的准确性。</p></blockquote><p id="22f9" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">让我们随机选取一个样本，尝试进行预测，并与实际值进行比较</p><figure class="lv lw lx ly fd ij"><div class="bz dy l di"><div class="lz ma l"/></div></figure><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es on"><img src="../Images/d9bbbd064e1df94a3aa3a6a47b1749e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:422/format:webp/1*0K_StqwhKkZFZYS6jE6Mhw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">预测值和实际值</figcaption></figure><p id="19ad" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">我们的模型正确地预测了客人不会取消预订。</p></div><div class="ab cl mc md gp me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hb hc hd he hf"><h1 id="ea48" class="iv iw hi bd ix iy mj ja jb jc mk je jf jg ml ji jj jk mm jm jn jo mn jq jr js bi translated">结论:</h1><p id="1cce" class="pw-post-body-paragraph jw jx hi jz b ka la kc kd ke lb kg kh kv ls kk kl kw lt ko kp kx lu ks kt ku hb bi translated">我们使用了包含酒店预订数据的数据集</p><p id="9497" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">我们清理并预处理了数据，然后执行探索性数据分析，从数据中提取信息来回答以下问题。</p><ol class=""><li id="7ea2" class="ky kz hi jz b ka kb ke kf kv lo kw lp kx lq ku lf lg lh li bi translated">有多少预订被取消了？</li><li id="382a" class="ky kz hi jz b ka lj ke lk kv ll kw lm kx ln ku lf lg lh li bi translated">度假酒店和城市酒店的预订比例是多少？</li><li id="6ea5" class="ky kz hi jz b ka lj ke lk kv ll kw lm kx ln ku lf lg lh li bi translated">每年预订的百分比是多少？</li><li id="5d41" class="ky kz hi jz b ka lj ke lk kv ll kw lm kx ln ku lf lg lh li bi translated">酒店哪个月最忙？</li><li id="0db4" class="ky kz hi jz b ka lj ke lk kv ll kw lm kx ln ku lf lg lh li bi translated">大多数客人来自哪个国家？</li><li id="694e" class="ky kz hi jz b ka lj ke lk kv ll kw lm kx ln ku lf lg lh li bi translated">人们在酒店呆多长时间？</li><li id="1ccb" class="ky kz hi jz b ka lj ke lk kv ll kw lm kx ln ku lf lg lh li bi translated">预订最多的住宿类型是哪一种(单人、双人、家庭)？</li></ol><p id="e69f" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated"><strong class="jz hj">我们了解到</strong></p><ol class=""><li id="4bea" class="ky kz hi jz b ka kb ke kf kv lo kw lp kx lq ku lf lg lh li bi translated">将近35%的预订被取消。</li><li id="4af5" class="ky kz hi jz b ka lj ke lk kv ll kw lm kx ln ku lf lg lh li bi translated">超过60%的人预订了城市酒店。</li><li id="eb93" class="ky kz hi jz b ka lj ke lk kv ll kw lm kx ln ku lf lg lh li bi translated">与前一年相比，2016年的预订量增加了一倍多。但明年的预订量下降了近15%。</li><li id="39ce" class="ky kz hi jz b ka lj ke lk kv ll kw lm kx ln ku lf lg lh li bi translated">大多数预订是在7月至8月间进行的。年初和年末的预订量最少。</li><li id="eba1" class="ky kz hi jz b ka lj ke lk kv ll kw lm kx ln ku lf lg lh li bi translated">葡萄牙、英国、法国、西班牙和德国是来自最多客人的国家，超过80%来自这5个国家。</li><li id="719c" class="ky kz hi jz b ka lj ke lk kv ll kw lm kx ln ku lf lg lh li bi translated">大多数人会停留一、二或三天。<br/> - &gt;对于度假酒店来说，最受欢迎的入住时长分别是三天、两天、一天、四天。<br/> - &gt;对于城市酒店来说，最受欢迎的停留时间分别是一、二、七(周)和三</li><li id="ac9c" class="ky kz hi jz b ka lj ke lk kv ll kw lm kx ln ku lf lg lh li bi translated">情侣(或2名成人)是最受欢迎的住宿类型。因此酒店可以相应地制定安排计划</li></ol><p id="7c58" class="pw-post-body-paragraph jw jx hi jz b ka kb kc kd ke kf kg kh kv kj kk kl kw kn ko kp kx kr ks kt ku hb bi translated">然后，我们执行功能选择和功能工程，然后使用决策树建立预测模型，以预测我们的客户/客人是否会取消预订。我们达到了99%的准确率。</p><blockquote class="jt ju jv"><p id="a51f" class="jw jx jy jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">你可以从Github<br/><a class="ae iu" href="https://github.com/aaqibqadeer/Hotel-booking-demand" rel="noopener ugc nofollow" target="_blank"/>下载完整的源代码和数据集</p></blockquote></div></div>    
</body>
</html>