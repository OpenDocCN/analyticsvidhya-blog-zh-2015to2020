<html>
<head>
<title>“Python Virtual Environment ” in Nutshell.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">简而言之就是“Python虚拟环境”。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/python-virtual-environment-in-nutshell-abc74482fbd1?source=collection_archive---------17-----------------------#2020-06-15">https://medium.com/analytics-vidhya/python-virtual-environment-in-nutshell-abc74482fbd1?source=collection_archive---------17-----------------------#2020-06-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0f1c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我将带你了解Python中关于虚拟环境的一切，比如“什么是虚拟环境？”到“如何使用？”。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/0d2f7abbb326e9d827486fd5c36f4ea7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*EL3TljNU7a-C1qfEgpsP4g.gif"/></div></div></figure><p id="709d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过<strong class="ih hj">虚拟环境</strong>这个词，你会知道它基本上和环境是一样的。是的，的确如此，但这里是主环境中的环境。在IT行业中，我们构建的任何东西，首先都会为其创建一个虚拟环境。<strong class="ih hj">为什么？因为如果你要构建一个项目，你需要很多包/库来构建一个单独的项目。</strong></p><p id="7f6f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们举一个例子(根据我自己的经验)，我正在构建一个项目，我使用tensorflow 2.2来完成这个项目，项目成功执行，后来我又使用相同的框架完成了另一个项目，但这次我应该使用tensorflow 1.4，因为它与其他库兼容。现在我的项目永远不会被执行，因为我的机器得到了2.2版本，而我需要的是1.4。所以，我能做到的唯一方法是卸载2.2版本并安装1.4版本，但这里有一个twist tensorflow库，大小为350+ mb。现在你知道卸载和重新安装它的痛苦，也知道它的时间。也不要忘记，现在我已经安装了1.4版本的珍贵项目将不会运行，因为与该项目中的其他库的兼容性问题。</p><p id="8ad9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以你现在有问题了，我们解决这个问题的唯一方法是把这两个项目完全分开。我们通过为每一个创建两个独立的环境并分别安装库来做到这一点。现在，我们使用<strong class="ih hj">虚拟环境</strong>方法来做到这一点。</p><p id="ca48" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设您正在构建一个需要1.17.x版numpy的项目，而您的计算机安装了1.18.x版的numpy。因此，现在您要为该项目创建虚拟环境，并在其中安装numpy 1.17.x。对于图片中的整个过程，它看起来像这样:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jp"><img src="../Images/fae9cbea522022312727c16f82423de1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aJ3qkfzrUmWo_NzJxg9eMA.png"/></div></div></figure><p id="9b56" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">青色【numpy为1.18.x版本的主环境。</strong></p><p id="f365" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">红色</strong>:需要用1.17.x版本的numpy创建的虚拟环境。</p><p id="bb5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在打开命令提示符，输入:</p><pre class="je jf jg jh fd jq jr js jt aw ju bi"><span id="8981" class="jv jw hi jr b fi jx jy l jz ka">pip install virtualenv</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kb"><img src="../Images/2653e512dbe62b962032ec293248d19d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kyVAJil11WXmXxQFy77-TQ.jpeg"/></div></div></figure><p id="f153" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它需要几秒钟来安装我的已经在里面了。</p><p id="17f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在您已经有了virtualenv，为您想要安装虚拟环境的环境创建一个文件夹，这是一个很好的开发实践。在这里，我制作了一个名为“Envs”的文件夹。</p><pre class="je jf jg jh fd jq jr js jt aw ju bi"><span id="0d42" class="jv jw hi jr b fi jx jy l jz ka">mkdir #folder_name</span></pre><p id="9a8c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，导航到该文件夹</p><pre class="je jf jg jh fd jq jr js jt aw ju bi"><span id="7489" class="jv jw hi jr b fi jx jy l jz ka">cd #folder_name</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kc"><img src="../Images/3ce820c71ac9f6ba70d80d46c76b8676.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lBKfNEmrEjHSUpKk1vM0YA.jpeg"/></div></div></figure><p id="ac45" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在创建虚拟环境之前，让我给你看看我的主机的numpy版本。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kc"><img src="../Images/011e21a47dc2d64a53fc592ddc1eb4ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KUaaLsZj-xQEs6lpcpyKOQ.jpeg"/></div></div></figure><p id="7326" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以你可以看到我已经得到了python 3.6.7版本和numpy 1.18.1版本的主环境。接下来，我们使用下面的命令创建一个虚拟环境:</p><pre class="je jf jg jh fd jq jr js jt aw ju bi"><span id="cb04" class="jv jw hi jr b fi jx jy l jz ka">python -m venv #virtualenv_name</span></pre><p id="b5d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该命令将创建创建虚拟环境所需的所有内容，执行该命令可能需要几秒钟时间。在这里，我创建了名为“demo_env”的虚拟环境。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kd"><img src="../Images/2fd84cc97131f3f8fbb4670bf29f7ea0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EOACkX4_45Incjxv_lQp9g.jpeg"/></div></div></figure><p id="b759" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在你已经创建了一个虚拟环境并潜入到该环境的文件夹中，你会发现所有那些你在python主文件夹中找到的文件，比如Include、Lib和Scripts文件夹。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ke"><img src="../Images/1c50ba4bd77123b82e045fdabc282d13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*WLsu13_MToxcbYNSNNc93g.jpeg"/></div></figure><p id="f497" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在返回到命令提示符，因为我们刚刚创建了一个环境，我们仍然需要在使用它之前激活它。使用以下命令。</p><pre class="je jf jg jh fd jq jr js jt aw ju bi"><span id="f4b9" class="jv jw hi jr b fi jx jy l jz ka">#virtualenv_name\Scripts\activate</span></pre><p id="8e56" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将激活环境，并带你进入其中。您可以通过检查目录命令前是否有“(#virtualenv_name)”文本来确保这一点，如下所示。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kf"><img src="../Images/be840eeef93c912730ac54b132398e2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lK9Z9ilL2jTE-np2LgCdKA.jpeg"/></div></div></figure><p id="9d74" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这意味着你在虚拟环境中，你已经准备好了。现在我将展示除了python之外，这个环境与主环境没有任何联系。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kg"><img src="../Images/f3e93002b84cdfe3743908f075b50a36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-UXeawDukBDZ4aApN41jMQ.jpeg"/></div></div></figure><p id="d1c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，你可以看到它从主机共享python，而内部是空的。因此，我们得到错误消息说没有名为“numpy”的模块。让我们在其中安装所需的数字。步骤和我们通常做的一样，但是在这里你应该提到你想要的版本，否则它将安装最新的版本，在这种情况下我们不想要。</p><pre class="je jf jg jh fd jq jr js jt aw ju bi"><span id="5834" class="jv jw hi jr b fi jx jy l jz ka"> pip install numpy==1.17.0</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kg"><img src="../Images/06a9270f9b8d562888e3f1fa5abc757a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CBDSUV8-GnBA2msIEKg5kA.jpeg"/></div></div></figure><p id="16b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你检查它的版本。你会看到你想要的版本。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kf"><img src="../Images/e965d8f91a1177858e96c5e52983a0cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bv3MeqqSZB6w1aYT0a9cNg.jpeg"/></div></div></figure><p id="732c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在您的机器中有了两个numpy库。因此，如果你想使用最新的numpy，只需直接创建项目并运行它，或者如果你想要一个1.17.x的特定numpy版本，那么到这个环境中来。在这里，你可以创建不同版本相同库的多个项目，而不会干扰整个系统。当你以非常专业的方式(自由职业者)在公司或任何项目中工作时，这是非常有用的。养成这个习惯会节省很多时间和痛苦。</p><p id="7ec7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，在您完成项目后，您可以通过使用命令“停用”来停用环境，它将关闭环境并将您重定向到主环境。</p><pre class="je jf jg jh fd jq jr js jt aw ju bi"><span id="c1ba" class="jv jw hi jr b fi jx jy l jz ka">deactivate</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kd"><img src="../Images/07b5344665090ecf26116eeb44a1ba60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eX1fU8t_l0LSGVk7gai95g.jpeg"/></div></div></figure><p id="994b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">谢谢你读到这里，如果你喜欢这篇文章，请为它鼓掌。</p></div></div>    
</body>
</html>