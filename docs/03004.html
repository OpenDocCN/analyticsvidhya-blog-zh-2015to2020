<html>
<head>
<title>Data Scientist’s CLI toolbox</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据科学家的CLI工具箱</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/data-scientists-cli-toolbox-ab04842646bb?source=collection_archive---------19-----------------------#2020-01-11">https://medium.com/analytics-vidhya/data-scientists-cli-toolbox-ab04842646bb?source=collection_archive---------19-----------------------#2020-01-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/ea3ee5cfb1d00efd91f22ae0b6d83ce8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oAS1AMPDzr8PE8ve"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">由<a class="ae iu" href="https://unsplash.com/@barnimages?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">谷仓图片</a>在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="83c6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">命令行是任何数据人饮食中必不可少的一部分。</p><p id="2326" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它是我开发的大多数数据产品以及无数商业依赖的精美图表和excel文件背后的<strong class="ix hj">无名英雄</strong>。</p><p id="1030" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">本指南旨在介绍构建数据管道的<strong class="ix hj">构件</strong>。我有意让一切保持简单，这样我们<strong class="ix hj">就能直觉地发现哪种工具做得最好</strong>。在后面的文章中，我们将使用这些知识来创建越来越复杂的管道。</p><p id="a7b6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们开始吧。这是我们为你准备的—</p><ul class=""><li id="8bdd" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">处理数据源</li><li id="4915" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">加工语言<strong class="ix hj"> awk，sed </strong>和<strong class="ix hj"> jq </strong></li><li id="e552" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">bash循环</li><li id="05c6" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">实用程序，如<strong class="ix hj"> wc </strong>、<strong class="ix hj"> grep、sort、uniq </strong>等</li></ul><h1 id="4208" class="kh ki hi bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated"><strong class="ak">数据源模式— </strong></h1><p id="510e" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">重要的事情先来。我们需要从某个地方获取数据。根据我的经验，它通常是一个纯文本或json文件。我们还可以动态生成数据，或者硬编码一些东西用于测试。即使我的数据源是一个数据库，假设数据集不是特别大，我也会把它转储到一个csv文件中进行处理。如果是，我将使用一个样本来微调管道。</p><ol class=""><li id="20a6" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js lk jz ka kb bi translated"><strong class="ix hj">纯文本</strong>。空格、逗号或制表符分隔。</li></ol><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="8506" class="lu ki hi lq b fi lv lw l lx ly">cat data.txt</span></pre><p id="e6fd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.<strong class="ix hj"> JSON文件</strong>。为了向前馈送这些数据，我们需要使它变平，所以jq 非常适合这个任务。稍后我会在帖子中更详细地介绍jq。对于这个例子，假设我们有一个{用户名，出生日期}的列表，我们打算把它转换成制表符分隔的文本格式。</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="3105" class="lu ki hi lq b fi lv lw l lx ly">cat data.json | jq -r '.[] | [.username, birth_date] | @tsv'</span></pre><p id="e847" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.<strong class="ix hj">生成输入</strong>。通常是一串数字。从1到10，包括1和10—</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="caf4" class="lu ki hi lq b fi lv lw l lx ly">seq 10</span></pre><p id="7a2c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">4.<strong class="ix hj">硬编码字符串</strong>。非常有助于测试管道，尤其是那些涉及正则表达式的管道。</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="a79e" class="lu ki hi lq b fi lv lw l lx ly">echo "Lorem ipsum dolor sit amet"</span></pre><h1 id="18d4" class="kh ki hi bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated"><strong class="ak"> Awk模式</strong> —</h1><ol class=""><li id="f100" class="jt ju hi ix b iy lf jc lg jg lz jk ma jo mb js lk jz ka kb bi translated">获取一列数据。</li></ol><p id="d0d1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">假设您有一个制表符分隔的文件，其中有3列数据，您需要第二列。</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="471e" class="lu ki hi lq b fi lv lw l lx ly">cat data.txt | awk -F'\t' '{print $2}'</span></pre><p id="96ac" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">$0表示整行，而$N表示第N个字段。基于1。</p><p id="b40b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.确保你的文件每行都有相同数量的列。</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="3d43" class="lu ki hi lq b fi lv lw l lx ly">cat data.txt | awk -F'\t' '{print NF}' | sort -u</span></pre><p id="9ef6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">NF代表“字段数”。</p><p id="6123" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果它返回一个数字，并且是您期望的数字，那么一切都很好。有时候，如果你不信任来源或者你的文件是由多个来源拼接而成的，那么做这个检查会很有帮助。<strong class="ix hj">最好安全</strong>。</p><p id="672c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.你需要拿到<strong class="ix hj">最后一栏</strong>。是的，有时那会派上用场。这是NF的一个变化——它可以被引用为$1、$2等等。</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="a31d" class="lu ki hi lq b fi lv lw l lx ly">cat data.txt | awk -F'\t' '{print $NF}'</span></pre><p id="8544" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">4.<strong class="ix hj">数学</strong>表达式作为<strong class="ix hj">过滤器</strong>。假设我们需要所有能被3整除的数。</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="a537" class="lu ki hi lq b fi lv lw l lx ly">cat integers.txt | awk '$0 % 3 == 0'</span></pre><p id="9a18" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">默认情况下，awk打印输出，因此如果您的主块中只有一个print语句，那么可以省略它。</p><h1 id="2450" class="kh ki hi bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated"><strong class="ak"> Sed模式</strong> —</h1><ol class=""><li id="f63b" class="jt ju hi ix b iy lf jc lg jg lz jk ma jo mb js lk jz ka kb bi translated">从文件中取出一个<strong class="ix hj">单行。假设我们需要第10行(从1开始计数)。</strong></li></ol><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="9297" class="lu ki hi lq b fi lv lw l lx ly">cat data.txt | sed -n '10p'</span></pre><p id="4e8d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">sed就像awk一样默认打印出输入行。这里我们传递-n来抑制这种行为，并在需要时使用显式指令“p”来打印。</p><p id="008d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一个好的做法是在sed满足条件并且不期望产生更多输出后退出。对于小文件来说，这不是问题，但是如果我们要处理如此大规模的日志或文件，我们可以做以下事情。</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="158c" class="lu ki hi lq b fi lv lw l lx ly">cat data.txt | sed -n '10{p;q;}'</span></pre><p id="6ef3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它在打印完第10行后立即退出。</p><p id="ab11" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.获取<strong class="ix hj">行范围</strong>。例如，第10行到第20行。</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="14df" class="lu ki hi lq b fi lv lw l lx ly">cat data.txt | sed -n '10,20p'</span></pre><p id="be3a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.从<strong class="ix hj">特定行开始打印，直到文件</strong>结束。最后一行数字由特殊字符$表示。</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="0649" class="lu ki hi lq b fi lv lw l lx ly">cat data.txt | sed -n '10,$p'</span></pre><p id="e05e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">4.执行<strong class="ix hj">字符串替换</strong>。假设我们想用“bbb”替换所有出现的“aaa”。</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="b325" class="lu ki hi lq b fi lv lw l lx ly">cat data.txt | sed 's/aaa/bbb/g'</span></pre><p id="4402" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">5.<strong class="ix hj">打印两个正则表达式之间的行</strong>匹配。这里我们打印匹配' aaa '的行和匹配' bbb '的行之间的所有内容。包括起始行和结束行。</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="223e" class="lu ki hi lq b fi lv lw l lx ly">cat data.txt | sed -n '/aaa/,/bbb/p'</span></pre><p id="5bdb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">6.我们可以<strong class="ix hj">混搭</strong>线匹配条件。例如，我们可以打印从匹配' aaa '的一行到文件结尾的所有内容。</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="e143" class="lu ki hi lq b fi lv lw l lx ly">cat data.txt | sed -n '/aaa/,$p'</span></pre><h1 id="6c12" class="kh ki hi bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated"><strong class="ak"> Jq模式</strong> —</h1><ol class=""><li id="8cb3" class="jt ju hi ix b iy lf jc lg jg lz jk ma jo mb js lk jz ka kb bi translated"><strong class="ix hj">漂亮打印</strong>一个JSON文件。</li></ol><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="eaa5" class="lu ki hi lq b fi lv lw l lx ly">cat data.json | jq</span></pre><p id="7c15" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.从对象列表中提取一个字段。假设您有一个包含名字、姓氏和年龄的人员列表。我们想要年龄。</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="426b" class="lu ki hi lq b fi lv lw l lx ly">cat data.json | jq -r '.[] | .age'</span></pre><p id="1f1a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">。[]打开一个数组，把它变成一个记录流。age访问每个记录的特定字段。正如你所注意到的，我们这里也有管道。</p><p id="c7ae" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.<strong class="ix hj">将数据</strong>展平成一个tsv(与csv相同，但用制表符分隔)。我更喜欢使用制表符，因为我不太可能在以后遇到解析问题。</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="557d" class="lu ki hi lq b fi lv lw l lx ly">cat data.json | jq -r '.[] | [.first, .last, .age] | @tsv'</span></pre><p id="c40d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这里，我们用我们想要的字段为每个记录创建一个新的数组，然后通过管道将它传送到一个特殊的处理器‘tsv’。注意，我们将-r传递给jq。它确保所有的文字都被打印为“原始的”,即它们周围没有任何引号。我不记得上一次不用jq是什么时候了。</p><p id="8581" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">4.<strong class="ix hj">滤镜。</strong>假设我们希望所有40岁以上的人。</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="b4f1" class="lu ki hi lq b fi lv lw l lx ly">cat data.json | jq -r '.[] | select(.age &gt; 40)'</span></pre><p id="d6e5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们也可以有多个条件。</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="0ba0" class="lu ki hi lq b fi lv lw l lx ly">cat data.json | jq -r '.[] | select(.age &gt; 40 and .first == "Bob")'</span></pre><p id="9686" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">5.<strong class="ix hj">阵长。</strong></p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="1162" class="lu ki hi lq b fi lv lw l lx ly">cat data.json | jq 'length'</span></pre><p id="b946" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">确保<strong class="ix hj">不是</strong>在输入数组到“长度”之前打开它。</p><p id="9683" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我强烈推荐阅读jq的手册和<strong class="ix hj">食谱</strong>。他们有很多好吃的。</p><p id="65c4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">6.<strong class="ix hj">转储所有可能的路径。</strong></p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="8cff" class="lu ki hi lq b fi lv lw l lx ly">cat data.json | jq -r 'paths(scalars) | join(".")'</span></pre><h1 id="5066" class="kh ki hi bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated"><strong class="ak">痛击</strong></h1><p id="e04d" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">啊啊。不错的老聚会。</p><ol class=""><li id="e4e5" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js lk jz ka kb bi translated"><strong class="ix hj"> while循环。如果我需要一步做多件事，我会经常使用它们。在这个例子中，我们用curl获取一些数据。我们正在访问的远程服务返回json，但都在一行中。我希望它印得漂亮些。</strong></li></ol><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="b463" class="lu ki hi lq b fi lv lw l lx ly">cat -n long_lat.txt | while read idx long lat; do curl -X GET "https://api.fancyservice.com/search?latitude=$lat&amp;longitude=$long" | jq &gt; $idx.json; sleep 2; done</span></pre><p id="3cd7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里发生了一些事情。</p><ul class=""><li id="a58d" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">我用-n调用“cat”。这将从1开始对所有行进行编号。现在我可以用索引遍历数据。</li><li id="ad13" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">我将3列数据——索引、经度和纬度——读入它们各自的变量。</li><li id="1d52" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">我打印了curl的输出，并将其转储到一个文件中。</li><li id="6c9b" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">休眠2秒钟，这样我就不会发出任何危险信号(除非这个api是专门设计来被攻击的)</li></ul><h1 id="d580" class="kh ki hi bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated"><strong class="ak">漂亮的实用程序— </strong></h1><ol class=""><li id="0a4e" class="jt ju hi ix b iy lf jc lg jg lz jk ma jo mb js lk jz ka kb bi translated"><strong class="ix hj">行数</strong></li></ol><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="8003" class="lu ki hi lq b fi lv lw l lx ly">cat data.txt | wc -l</span></pre><p id="cbd0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.<strong class="ix hj">字符串过滤器。</strong>awk非常适合处理数字的过滤器，而grep或sed却非常喜欢字符串。</p><p id="3e3d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">给我所有以“mary”开头的行，忽略大小写。</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="85e1" class="lu ki hi lq b fi lv lw l lx ly">cat data.txt | grep -i '^mary'</span></pre><p id="ce14" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可以翻转它，要求所有的行都以别的开头。</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="70a0" class="lu ki hi lq b fi lv lw l lx ly">cat data.txt | grep -vi '^mary'</span></pre><p id="481a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">或者与“玛丽”完全匹配。</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="be9e" class="lu ki hi lq b fi lv lw l lx ly">cat data.txt | grep -wi 'mary'</span></pre><p id="c75b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.<strong class="ix hj">排序。假设我想用人名对一个文件进行排序。</strong></p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="56cd" class="lu ki hi lq b fi lv lw l lx ly">cat names.txt | sort</span></pre><p id="6a1d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果我想让它逆序排列—</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="4e6e" class="lu ki hi lq b fi lv lw l lx ly">cat names.txt | sort -r</span></pre><p id="0666" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果我们处理的是数字，那么使用-n</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="68a4" class="lu ki hi lq b fi lv lw l lx ly">cat integers.txt | sort -n</span><span id="384f" class="lu ki hi lq b fi mc lw l lx ly">OR</span><span id="30e1" class="lu ki hi lq b fi mc lw l lx ly">cat integers.txt | sort -nr</span></pre><p id="776a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">4.<strong class="ix hj">独特性。如果某处有排序，uniq就潜伏在拐角处。假设我们想要一个不同的人名列表。</strong></p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="34f1" class="lu ki hi lq b fi lv lw l lx ly">cat names.txt | sort -u</span></pre><p id="f143" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然而，如果我们想要更多，想要计算每个名字出现的次数——</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="10f1" class="lu ki hi lq b fi lv lw l lx ly">cat names.txt | sort | uniq -c</span></pre><p id="5133" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从<strong class="ix hj"> uniq </strong>返回的计数没有排序。我们可以很容易地补救这一点。</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="38ec" class="lu ki hi lq b fi lv lw l lx ly">cat names.txt | sort | uniq -c | sort -nr</span></pre><p id="9873" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这将给我们以降序排列的计数和它们各自的单词。为了把它限制在前5名，我们可以做—</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="7864" class="lu ki hi lq b fi lv lw l lx ly">cat names.txt | sort | uniq -c | sort -nr | head -5</span></pre><h1 id="c70f" class="kh ki hi bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated"><strong class="ak">结论</strong></h1><p id="7b15" class="pw-post-body-paragraph iv iw hi ix b iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo lj jq jr js hb bi translated">希望你喜欢这本书。</p><p id="8dca" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里介绍的工具比本文中介绍的要多得多。希望您发现了命令行错误，并继续自己探索。</p><p id="0b5e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请记住，有时一个特定命令必须提供的强大功能可能会以牺牲可读性为代价。</p><p id="1393" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下次见！</p></div></div>    
</body>
</html>