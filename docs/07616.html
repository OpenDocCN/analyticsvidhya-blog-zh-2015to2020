<html>
<head>
<title>A Beginner’s Guide To Cleaning Data In R — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">清除R中数据的初学者指南—第1部分</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/a-beginners-guide-to-cleaning-data-in-r-part-1-66dc431a3d42?source=collection_archive---------16-----------------------#2020-07-01">https://medium.com/analytics-vidhya/a-beginners-guide-to-cleaning-data-in-r-part-1-66dc431a3d42?source=collection_archive---------16-----------------------#2020-07-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/cdd7a87c850d3f6d0085ae42dd9ca6e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G4LJMMpJ_75mKQSuqmTp0w.png"/></div></div></figure><p id="3edf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我进入浩瀚数据世界的旅程是一次有趣而迷人的旅程。我一直粘在我的课程上，等着完成一门课程，以便继续下一门。在完成入门课程后，我转向了数据清理。众所周知，在任何数据科学项目中，大部分工作都是为了清理和整理数据集以供分析。因此，对这个话题有足够的了解是至关重要的。</p><p id="fa29" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，为了理解对干净数据的需求，我们需要查看一个典型的数据科学项目的工作流。首先访问数据，然后处理和分析数据。之后，洞察被提取出来，最后被可视化和报告。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jo"><img src="../Images/c16dd06de9dae38519a2717e2310a41b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iLbdWxj-COpzdRa3fyeo8g.png"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">典型项目工作流程</figcaption></figure><p id="0e8a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果数据中存在错误，可能会在整个工作流程中产生错误。最终，用于制定关键业务决策的洞察是不正确的，这可能会导致金钱和业务损失。因此，如果不在第一步处理和纠正混乱的数据，复合效应可能是巨大的。</p><p id="5df5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">本指南将通过汇编所有必要的功能和应该采取的行动，作为数据清理的快速入门工具。我将简要描述三种常见的数据错误，然后解释如何在数据集中识别和纠正这些错误。我还将介绍一些强大的清理和操作库，包括dplyr、stringr和assertive。只需在RStudio中编写以下代码，即可安装这些组件:</p><pre class="jp jq jr js fd jx jy jz ka aw kb bi"><span id="6b7b" class="kc kd hi jy b fi ke kf l kg kh">install.packages("tidyverse")<br/>install.packages("assertive")</span></pre><h2 id="656c" class="kc kd hi bd ki kj kk kl km kn ko kp kq jb kr ks kt jf ku kv kw jj kx ky kz la bi translated">1.不正确的数据类型</h2><p id="4b31" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">导入数据时，RStudio可能会错误地解释数据列类型，或者在提取过程中错误地标记了数据列。例如，一个常见的错误是当包含数字的数值数据被错误地标识和标记为字符类型时。</p><p id="0dce" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> a)识别</strong> <br/>首先，为了识别不正确的数据类型错误，使用<strong class="is hj">glow</strong>函数检查所有列的数据类型。glimpse功能是<strong class="is hj"> dplyr </strong>包的一部分，需要在使用glimpse之前安装。Glimpse将返回所有列及其各自的数据类型。</p><pre class="jp jq jr js fd jx jy jz ka aw kb bi"><span id="839e" class="kc kd hi jy b fi ke kf l kg kh">library(dplyr)<br/>glimpse(dataset)</span></pre><p id="a5c9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">另一种形式的逻辑检查包括<strong class="is hj">是</strong>功能。is函数可用于每种数据类型，并将返回一个逻辑输出(真/假)。我只提到了常见的is函数，但是它可以用于所有的数据类型。如果数字列是is.numeric函数的参数，则输出为true，而如果字符列是is.numeric函数的参数，则输出为false。</p><pre class="jp jq jr js fd jx jy jz ka aw kb bi"><span id="dddc" class="kc kd hi jy b fi ke kf l kg kh">is.numeric(column_name)<br/>is.character(column_name)</span></pre><p id="ec2b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> b)修正</strong> <br/>在识别出所有不正确的数据类型列之后，可以通过使用<strong class="is hj">作为</strong>函数，将它们简单地转换成正确的数据类型。例如，如果数字数据类型被错误地导入为字符数据类型，as.numeric函数会将其转换为数字数据类型。</p><pre class="jp jq jr js fd jx jy jz ka aw kb bi"><span id="4f8a" class="kc kd hi jy b fi ke kf l kg kh">as.numeric(column_name)</span></pre><h2 id="5db5" class="kc kd hi bd ki kj kk kl km kn ko kp kq jb kr ks kt jf ku kv kw jj kx ky kz la bi translated">2.逗号/百分比问题</h2><p id="81de" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">在混乱的数据集中，数字可能与逗号或百分比一起导入。虽然这些都是有用的字符，有助于有效地识别大数字，但一个可能的错误是数据可能会被读取为字符类型。</p><p id="925b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> a)修正</strong> <br/>在这种情况下，必须先去掉不必要的字符，然后将数据类型改为正确的数据类型。这可以通过一个强大的字符串操作库stringr 来实现。<strong class="is hj"> str_remove </strong>函数可用于纠正此类数据错误。它将目标列/字符串作为第一个参数，将要删除的字符作为第二个参数。</p><pre class="jp jq jr js fd jx jy jz ka aw kb bi"><span id="4d05" class="kc kd hi jy b fi ke kf l kg kh">library(stringr)<br/>str_remove(column_name, ",")</span></pre><h2 id="8ca8" class="kc kd hi bd ki kj kk kl km kn ko kp kq jb kr ks kt jf ku kv kw jj kx ky kz la bi translated">3.超出范围的值</h2><p id="f137" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">在某些情况下，数据被限制在特定的范围内。例如，测试中的百分比限制在0到100之间。在这种情况下，范围被定义为0 <p in="" such="" a="" type="" of="" error="" the="" values="" fall="" outside="" range="" and="" cannot="" be="" included="" analysis.=""/></p><p id="a14e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> a)标识</strong> <br/>为了估计一个数据集有多少超出范围的值，我们可以使用提供检查功能的<strong class="is hj">断言</strong>包。首先，在使用assert函数之前，应该记下总行数。之后，使用<strong class="is hj"> assert </strong>函数，将目标列作为第一个参数，下限作为第二个参数，上限作为第三个参数。输出将是只包含输入范围内的值的目标列。现在，总行数的注释应该提供对总超出范围值的估计。</p><pre class="jp jq jr js fd jx jy jz ka aw kb bi"><span id="79f3" class="kc kd hi jy b fi ke kf l kg kh">library(assertive)<br/>assert_all_are_in_closed_range(column_name, lower = 0, upper = 100)</span></pre><p id="192d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> b)校正</strong> <br/>识别出超出范围的值后，有几种可能性可以解决它们。这些值可以被删除、视为缺失值或替换为范围限制。</p><p id="08d3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">处理这些问题最常见的解决方案是通过使用dplyr包中的<strong class="is hj"> filter </strong>函数来过滤掉不在范围内的值，从而删除这些值。</p><pre class="jp jq jr js fd jx jy jz ka aw kb bi"><span id="ba07" class="kc kd hi jy b fi ke kf l kg kh">filter(percentage &gt;= 0, percentage &lt;= 100)</span></pre><p id="1669" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了将它们视为缺失值，我们需要将错误值替换为“不可用”，通常称为NA。我们可以使用内置的<strong class="is hj">替换</strong>功能来完成这一替换。第一个参数是目标列，第二个参数是条件，第三个参数是替换。以下输入将用NA替换所有小于0且大于100的值。</p><pre class="jp jq jr js fd jx jy jz ka aw kb bi"><span id="edff" class="kc kd hi jy b fi ke kf l kg kh">replace(column_name, percentage &lt; 0, NA)<br/>replace(column_name, percentage &gt; 100, NA)</span></pre><p id="b8b9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，超出范围的值可以由范围限制代替。例如，我们可以将104%的错误数据值替换为100%。以下输入将用100替换列中所有大于100的值。</p><pre class="jp jq jr js fd jx jy jz ka aw kb bi"><span id="8c19" class="kc kd hi jy b fi ke kf l kg kh">replace(column_name, percentage &gt; 100, 100)</span></pre><p id="1a5a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些只是数据清理过程中面临的三种最常见的错误。我希望我简单的识别然后改正的方法能帮助新来的人有效地解决这些问题。事实上，还有数百个必须格外小心处理的问题。随着我对它们的不断了解和解决，我一定会分享类似的故事，为数据社区做出贡献。</p><h2 id="75fc" class="kc kd hi bd ki kj kk kl km kn ko kp kq jb kr ks kt jf ku kv kw jj kx ky kz la bi translated">实践资源</h2><p id="6616" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">为了练习你所学的内容，我创建了一个简单的练习数据集，名为“百分比”，包含考试分数，供你尝试这些技巧。你会面临上面提到的三种常见问题。<strong class="is hj">最终结果</strong>应该是一个:数值数据集，没有百分比字符，也没有超出范围的值(0 &lt;标志&lt; 100)。</p><p id="2001" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下载链接:<a class="ae lg" href="https://mega.nz/file/cIoBHRDA#FsIYW9xw5Sx2WJco4Wuq3WAjys1UJOd6-bZvwQAoQC4" rel="noopener ugc nofollow" target="_blank">https://mega . NZ/file/cIoBHRDA # fsiyw 9 xw 5 S2 wjco 4 Wu Q3 wajys 1 ujod 6-bzvwqaoqc 4</a></p><p id="5f6d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在清理这个数据集时，你可能会面临一些问题，但这是学习过程的一部分。祝你好运！</p></div></div>    
</body>
</html>