<html>
<head>
<title>Anomaly Detection — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">异常检测—第1部分</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/anomaly-detection-part-1-acf1a993b573?source=collection_archive---------19-----------------------#2020-06-26">https://medium.com/analytics-vidhya/anomaly-detection-part-1-acf1a993b573?source=collection_archive---------19-----------------------#2020-06-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="46d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">均值或中位数可能是异常吗？</p><p id="5c22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个<strong class="ih hj">异常</strong>是一个明显不同于其他观测的数据点。然而，它可能不是极值。例如，取一维值的数据集{25，8，9，18，11，12，50，80，83，85，83，84，102}。数据集中有十三个数字。这个数据集的平均值是50。这个数据的标准差是36.76729。</p><p id="d968" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果对给定的数据集进行排序，得到{8，9，11，12，18，25，50，80，83，83，84，85，102}。由于数据集有十三个数字，第七个数字是中值。所以，中位数是50。进一步计算，我们发现第十个数字是Q3 = 83，第四个数字是Q1 = 12。四分位距= Q3-Q1 = 83–12 = 71</p><p id="d08e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">基于平均值和标准差的异常</strong>:</p><p id="e4a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以使用平均值和标准差来计算异常值。下面，我们给出了基于平均值和标准差的异常值:</p><p id="6d2b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(1) <strong class="ih hj">弱异常</strong>:在(均值—标准差)和(均值+标准差)之外的任意值。</p><p id="c014" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下限= 50–36.76729 = 13.23271</p><p id="aa19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上限= 50 + 36.76729 = 86.76729</p><p id="ce0b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由此，我们发现值8、9、11和12小于下限，而102大于上限。因此，基于平均值和标准差，值8、9、11、12和102是弱异常。</p><p id="738c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(2) <strong class="ih hj">中位异常</strong>:在(均值—2 *标准差)和(均值+2 *标准差)之外的任意值。</p><p id="ead3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们按照这种方法计算下界和上界。我们发现</p><p id="02ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下限= 50–2 * 36.76729 =-23.53458</p><p id="d7b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上限= 50 + 2*36.76729 = 123.53458</p><p id="b2c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为没有值低于下限，也没有值高于上限。没有基于介质异常的异常。</p><p id="16e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(3) <strong class="ih hj">强异常</strong>:在(均值—3 *标准差)和(均值+3 *标准差)之外的任意值。</p><p id="a54e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于没有介质异常，所以不可能有强异常。然而，让我们仍然计算下限和上限。</p><p id="2f40" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下限= 50–3 * 36.76729 =-60.30187</p><p id="9723" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上限= 50 + 3*36.76729 = 160.30187</p><p id="cee0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于在下限和上限之外没有值，所以基于这种方法没有强异常。</p><p id="07d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">基于四分位距的异常</strong>:</p><p id="a0e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面，我们给出了基于四分位距的异常值:</p><p id="4d65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(1) <strong class="ih hj">弱异常</strong>:在(Q1-0.75 *四分位距)和(Q3+0.75 *四分位距)之外的任何值。</p><p id="2d28" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下限= Q1–0.75 *四分位距= 12–0.75 * 71 =-41.25</p><p id="6912" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上限= Q3+0.75 *四分位距= 83 + 0.75*71 = 136.25</p><p id="c212" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">按照这种方法，在下限和上限之外没有值，因此没有弱异常。</p><p id="69c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(2) <strong class="ih hj">中位异常</strong>:在(Q1 —四分位距)和(Q3 +四分位距)之外的任意值。</p><p id="b45c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下限= Q1-四分位数范围= 12–71 =-59</p><p id="3a6a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上限= Q3 +四分位间距= 83 + 71 = 154</p><p id="7675" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于在下限和上限之外没有值，所以没有介质异常。</p><p id="818f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(3) <strong class="ih hj">强异常</strong>:在(Q1-1.5 *四分位距)和(Q3+1.5 *四分位距)之外的任意值。</p><p id="9c6b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下限= Q1–1.5 *四分位距= 12–1.5 * 71 =-94.5</p><p id="76e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上限= Q3+1.5 *四分位距= 83 + 1.5*71 = 189.5</p><p id="a43a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于在下限和上限之外没有值，所以按照四分位数范围没有强异常。</p><p id="666c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们仔细研究上述方法，我们发现值应该远离均值和中值才是异常。因此，平均值或中值不太可能是异常值。</p><p id="e085" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我使用了一个软件“Discover”来计算给定数据的异常。请注意，<strong class="ih hj">“发现”可以用于几百万行几百列</strong>。它可以在几分钟内从数百万行和数百列中计算异常。所以，用它做13行1列有点过分了。然而，我想找到这个数据集的异常值，所以出于好奇我使用了它。请注意，我对未排序的数据使用了“发现”。下面，我给出结果截图:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/c1c075f235c0a6a66d1ec73b998ff8bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:606/format:webp/1*dzTzEtpIuJnakTfsiSyBfg.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">Discover对上述数据集进行异常检测的结果</figcaption></figure><p id="1a01" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从上表中，我们发现值50是异常值，得分为72.42%，102是异常值，得分为50.98%。因此，如果有任何异常，它必须是50，尽管它可能是弱异常，因为分数是72%。请注意，50是给定数据的平均值和中值。现在，统计学家可能不会同意这个结果，但让我们分析并做进一步的研究。</p><p id="905e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们创建排序值的图表:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jp"><img src="../Images/974dc32ba6616d83d45bd6666cbad91c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*tEE7hwATkh-bvDxieFzHSg.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">所述数据集的数据点绘制成图表</figcaption></figure><p id="58de" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们看到上面的图表，我们已经将这些值分成了四组。第一个聚类包含值8、9、11、12、18和25。这些是彼此接近的。值50(平均值和中值)在聚类2中。它是孤立的，远离任何其他集群。所以，如果有任何异常，那一定只有这个。值80、83、83、84和85彼此接近，并且在第三群中。最后一个值102在第四个簇中。这也是孤立的但离85不远。因此，由“Discover”给出的结果是高度准确的，并且分数以百分比表示其异常值分数。</p><p id="8945" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最接近50的值是25，差25。下一个最接近50的值是80，差值是30。因此，我们发现两个最接近的值都远离50。然而，没有其他值是如此远离最近的值。比如最接近102的值是85，差17。下一个最接近的值是84，差值是18。</p><p id="4667" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，平均值和中值可能是异常值，尽管这些可能是微弱的异常，并且仅在例外情况下。</p><p id="53f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">利用异常高效管理库存</strong>:</p><p id="fe4c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们能否使用异常来检测过量库存和短缺库存(紧急订购以避免缺货)？我从一家公司收到了包含大约100，000件商品的销售和净库存数据。该公司面临着维持优化库存的挑战。一些库存项目高于需求水平，另一些库存不足，导致收入和客户流失。由于我不能分享真实的数据，我已经改变了库存ID，并采取了10%的随机项目。</p><p id="6883" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于这一点的进一步细节将在下一部分提供。</p></div></div>    
</body>
</html>