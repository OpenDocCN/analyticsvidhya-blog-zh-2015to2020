<html>
<head>
<title>How to Scrape Static Content Using Python and BeautifulSoup?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Python和BeautifulSoup抓取静态内容？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-scrap-static-content-using-python-and-beautifulsoup-a4c30a79c5db?source=collection_archive---------16-----------------------#2019-11-26">https://medium.com/analytics-vidhya/how-to-scrap-static-content-using-python-and-beautifulsoup-a4c30a79c5db?source=collection_archive---------16-----------------------#2019-11-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="4768" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">静态内容和动态内容的区别</strong></p><p id="a789" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">静态内容是跨页面保持不变的内容。</p><p id="d317" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">动态内容是基于用户与页面的交互而变化的内容，例如点击元素、在表单上键入、向下滚动页面、甚至加载HTML等。</p><p id="7c69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">动态内容和静态内容一样报废吗？</strong></p><p id="e306" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不，通常废弃动态内容的最大挑战是，要加载它，我们需要从浏览器访问它。如果您尝试使用Python库请求向动态网站发送get请求，很可能无法获得您正在寻找的数据，因为JavaScript脚本不会被执行。</p><p id="5d0f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">如何一步一步地处理废弃的静态内容。</strong> <a class="ae jd" href="http://www.google.com" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">为动态点击此处。</strong>T9】</a></p><p id="6934" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于这个循序渐进的过程，我们将使用<a class="ae jd" href="https://www.wsop.com/" rel="noopener ugc nofollow" target="_blank"> WSOP </a>网站。为什么？因为我喜欢扑克。</p><p id="5c99" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我假设你已经设置了你的Python环境，如果你还没有这样做，请跟随<a class="ae jd" href="https://www.youtube.com/watch?v=06I63_p-2A4&amp;t=2640s" rel="noopener ugc nofollow" target="_blank">这篇教程</a>学习如何设置你的visual studio代码环境。如果您愿意，也可以使用流行的Anaconda环境。但是对于本教程，我将使用Visual Studio代码。</p><p id="ccd8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好了，对于这个教程，我想得到(静态数据):</p><p id="90c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">玩家的名字，</p><p id="ae43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">玩家的手镯数量，</p><p id="ef78" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">球员职业生涯的总收入，</p><p id="62b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">球员的照片。</p><p id="33fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还有一件事，我只想要2019年WSOP的前100名选手，所以我们需要去这个地址找他们:<a class="ae jd" href="https://www.wsop.com/m/results/?aid=2&amp;grid=1622&amp;tid=17298&amp;dayof=7651" rel="noopener ugc nofollow" target="_blank">https://www.wsop.com/m/results/?aid=2&amp;grid = 1622&amp;tid = 17298&amp;dayof = 7651</a></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/ce213c7cf05148f478db07ce7ccf3db0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kO9Se0Oi4pwTYmh-4W7AuA.png"/></div></div></figure><p id="01e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是所有玩家的名单。如果我们点击他们的名字，我们将被带到他们的个人资料页面:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jq"><img src="../Images/ebda83b1ddbb8b6eca69ae4d76dda788.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OOXoFixKYoEyEzHgQlNsqw.png"/></div></div></figure><p id="e76c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好了，现在我们知道要获得我们想要的数据，我们需要进入100个个人资料页面，以某种方式获得所有的数据。</p><p id="1ff1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤1: </strong>打开您的终端并运行以下命令:</p><pre class="jf jg jh ji fd jr js jt ju aw jv bi"><span id="6f4f" class="jw jx hi js b fi jy jz l ka kb">$ cd desktop &amp;&amp; mkdir scrapping &amp;&amp; cd scrapping &amp;&amp; touch scrapper.py</span></pre><p id="ecb4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">基本上，这个命令会在桌面上创建一个新文件夹和一个扩展名为的文件。巴拉圭</p><p id="c1a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤2: </strong>通过在终端上运行以下命令来启动visual studio代码</p><pre class="jf jg jh ji fd jr js jt ju aw jv bi"><span id="2ac7" class="jw jx hi js b fi jy jz l ka kb">$ code .</span></pre><p id="2bb0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第三步:打开文件夹里唯一一个名为“scrapper.py”的文件，里面会是空的。</p><p id="4769" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤4: 导入这个项目需要的所有库。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kc"><img src="../Images/939f1e02047832120293cd66acf5d4af.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*QvJX98JPHUkyO6hATTCeng.png"/></div></figure><p id="c000" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第2行:我们导入熊猫库。该库将帮助我们将数据转换为数据框，以便以后将其导出为CSV文件。</p><p id="2480" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第3行:</strong>这将允许我们发送一个HTTP请求并获取网站代码。</p><p id="cb59" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第4行:</strong>这个库将接受HTTP请求，并将其转换成一个文本文件，我们可以浏览并找到我们需要的数据。</p><p id="40d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第五步:</strong>获取前100名玩家的网址</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/4cc2fa4c376d1d56c6f8c5febacc49f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cqm8E-uwvumwsN5beuKjaA.png"/></div></div></figure><p id="a378" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第11行:</strong>我们在变量playersUrl下创建一个空数组。</p><p id="311c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第13行:</strong>我们向WSOP站点发出一个GET请求，并将该请求保存在变量页面上。</p><p id="ff45" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第14行:</strong>我们使用。方法将请求转换成文本。</p><p id="0719" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第15行:</strong>我们使用BeautifulSoup方法解析数据并保存在变量Soup下。</p><p id="95b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第16行:</strong>我们使用find方法查找id为“results-main”的元素，并将其保存在变量tableIdStatsbracelets下。</p><p id="6393" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(如果我们转到扑克网站，我们可以打开检查器，通过选择信息所在的桌子，我们可以看到id在那里)。</p><p id="8395" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第17行:</strong>基本上，我们正在将整个HTML中的数据缩小到表中。在这一行，我们将寻找所有标记为&lt; a &gt;的元素，因为我们知道玩家的URL在那里，然后将它保存到变量aElements中。</p><p id="a815" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第18到22行:</strong>在这些行中，我们将执行一个for循环来遍历&lt; a &gt;标签的数组，并使用。get方法，稍后将它推送到我们的数组的第14行。我们还添加了一个if stamen来限制玩家数量，使之只有100人。</p><p id="c773" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">参考线:16</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/131e1d0ec80e3622607e83ef0c743ff5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O9UxEdHr9YesL2QzCvDfjA.png"/></div></div></figure><p id="a355" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤6: </strong>遍历每一个URL，并从每个配置文件中提取数据。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kd"><img src="../Images/f48650bbcc3c81e0729d5faaae1a6dd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NKWBTsj8cK6pajzOaurPVA.png"/></div></div></figure><p id="aa59" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第24行到第27行:</strong>我们创建空数组来保存最终数据。</p><p id="8220" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第29行:这里是我们的循环开始遍历玩家的URL数组的地方。</p><p id="6a8c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第30行:</strong>我们将再次对URL进行GET请求，但这次会有一点不同，因为这些URL会在每次迭代中发生变化，这样我们每次都会打开不同的配置文件。</p><p id="92dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第31行:我们将把我们的请求转换成一个文本文件。</p><p id="34f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第32行:我们将使用BeautifulSoup方法来解析我们的文本文件。</p><p id="e1b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第34行:</strong>我们将寻找容易定位的HTML来保存我们的个人资料图片。在这种情况下，它是带有类“iLeft”的元素，我们将把它保存在变量iLeft中。</p><p id="63d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第35行:</strong>我们将选择第一个也是唯一一个&lt; img &gt;标签并使用该方法。获取图像URL所在的标签的src属性。</p><p id="3c44" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第36行:</strong>在这一行，我们将把刚刚从&lt; img &gt;标签中获取的URL推送到我们的数组picture中(第27行)。</p><p id="6599" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第38行:</strong>我们将重复我们对图片所做的，但是这次是玩家的名字。我们将寻找容易定位的HTML来保存我们的玩家名字。在这种情况下，它是具有“iRightContent”类的元素，我们将把它保存在变量iRightContent中。</p><p id="df3c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第40行:</strong>现在我们知道我们的扑克玩家名字在&lt; h3 &gt;标签之间，并且我们知道它们是唯一的&lt; h3 &gt;标签，所以我们可以调用方法find，该方法将查找第一个h3元素并将其保存在变量h3Name上。</p><p id="1506" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第41行:</strong>我们将名字推送到数组call playerName。</p><p id="dd2c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第43行到第46行:</strong>我们基本上执行了与第40行和第41行相同的步骤，但是使用了不同的类。</p><p id="f814" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第七步:</strong>将我们收集的数据转化为数据帧(CSV文件)</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/8fa2572868aa77628dc26c84bdcee1ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QwZuYySMb2Ub8PBI0d754Q.png"/></div></div></figure><p id="ea03" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第50行:</strong>我们创建一个带有键和值对的对象。密钥将是我们的数据帧的报头。如果您想将这个CSV文件导入到一个Rails数据库中，我建议您使用与SQL列相同的键名。这些值将是我们保存在数组中的数据(第24到27行)。</p><p id="0174" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第51行:</strong>我们使用DataFrame方法将数据转换成数据帧。我们可以通过调用Python上的print方法在终端上看到这一点。</p><p id="d952" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第52行:</strong>我们使用方法将数据帧导出为CSV文件。to_csv("name.csv ")</p><p id="1f8c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在已经完成了。我们将数据保存在CSV文件中，可以用来分析信息或构建数据库。</p></div></div>    
</body>
</html>