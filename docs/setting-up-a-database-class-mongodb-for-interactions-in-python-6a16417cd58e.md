# 为 Python 中的交互设置数据库类(MongoDB)

> 原文：<https://medium.com/analytics-vidhya/setting-up-a-database-class-mongodb-for-interactions-in-python-6a16417cd58e?source=collection_archive---------1----------------------->

![](img/53fda8ae7ffbf11c257222de315d2edb.png)

在我的 python 之旅中，我遇到了一些简化代码的小技巧。其中之一是创建一个数据库类来与我的 MongoDB 交互。

让我们首先创建一个新文件“database.py”。我们将从创建数据库类开始:

![](img/a00679167c0b516bbce8c9f791ea0371.png)

这个类被传递“object ”,所以我们的数据库可以继承一个对象在 python 中可以做的所有事情，以及我们在这个类中创建的方法。另外两个变量是静态的，我们需要告诉我们的类在哪里连接数据库。在这个例子中，它将是我们的 MongoDB。URI(统一资源标识符)将基本上是我们的 mongodb 地址，现在我们将数据库保留为“无”。

这个类不是我们在 OOP 中习惯使用的传统类。我们不会初始化任何东西，因为我们不会创建不同数据库的实例。也就是说，可以肯定地说，我们不会使用“self”或实例方法。他们都将有相同的静态 URI，我们不会有不同的 URI。因此，如果没有实例方法，我们需要告诉 python 我们将要创建的方法不是实例方法，我们不会使用 self。我们通过在方法前添加“@staticmethod”来实现这一点。

让我们创建一个名为“initialize”的方法来启动到数据库的连接。为此，我们还需要导入 pymongo:

![](img/63dc7363a192f7c493e62b92aeffd6e7.png)

这里你会注意到我们使用的是“数据库”。URI”而不是“URI”。这是因为 URI 位于类数据库中，我们需要告诉 python 在哪里可以找到它，因为我们没有使用“self”。“数据库”也是如此。数据库”。我们使用 pymongo 并给它输入 URI，然后在 mongodb 中将“DATABASE”设置为我们想要的数据库。从那里我们可以处理一个或多个集合，并引用我们类中的任何方法。

让我们现在开始做一些方法来与我们的数据库交互。

![](img/12151d89801bcf450ca7ea618ec5493f.png)

我们的插入方法将是我们如何添加或“插入”数据到我们的数据库。它会将所需“集合”的参数带到我们希望在数据库中插入信息的位置，而“数据”就是该信息。那么如果我们想检索信息呢？

![](img/9d2ac41ed5a5dcc60767fa845bac8a46.png)

我们的#find 和#find_one 方法会帮我们做到这一点。就像#insert 方法一样，它需要接受一个集合的参数，这样我们就知道在数据库中的确切位置，只是这次它将接受一个“查询”或我们正在寻找的内容，而不是数据。

现在，在我们的 app.py 中，我们必须运行#Database.initialize()，这样它就可以启动我们的连接，我们可以自由地运行这些其他方法。为此，我们还必须将数据库类导入到文件中。

![](img/50ca7318111b0120a33c4805fc601409.png)

当我们运行我们的应用程序时，这个方法将被调用，我们的数据库类将被初始化，它将准备好使用！从这里开始，有了这些概念，我们可以继续在其他类中编写更多的方法，以进一步利用与 MongoDB 的连接。