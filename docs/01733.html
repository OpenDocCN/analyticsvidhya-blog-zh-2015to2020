<html>
<head>
<title>Sentiment Analysis using R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用R的情感分析</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/sentiment-analysis-using-r-c9af723dc57d?source=collection_archive---------12-----------------------#2019-11-11">https://medium.com/analytics-vidhya/sentiment-analysis-using-r-c9af723dc57d?source=collection_archive---------12-----------------------#2019-11-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="88fe" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">2016年美国总统辩论的简单情感分析</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/f4162ae025276f9b43c5e557e796c603.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vS0ZHq_KD3-mdHlmn4sTUw.jpeg"/></div></div></figure><p id="5327" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这是我的第一篇博文，我将亲自动手用R编程语言实现情感分析。</p><p id="e727" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在我们深入实践之前，<strong class="jl hj"> <em class="kf">什么是情感分析？</em>T3】</strong></p><p id="2b81" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这是一个分析来自pdf、网页、社交媒体帖子等文本片段的过程。去理解所表达的各种情绪。每天都有数百万条关于数吨主题的文本被发送，仅仅通过阅读每条文本、每条脸书邮报、每条推文，不可能从这些数据中提取可操作的见解。<em class="kf">疯了吧！</em></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kg"><img src="../Images/5b57d35259903a56f8ea361a28ab843e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zHO_87xnnrbPqwpirKjdkw.jpeg"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">每分钟的数据，多莫</figcaption></figure><p id="a2b6" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">情感分析通过为编程语言开发的算法提供了提取可操作见解的简单方法。对于python来说，查看一些为情感分析设计的包<a class="ae kl" href="https://elitedatascience.com/python-nlp-libraries" rel="noopener ugc nofollow" target="_blank">这里</a>。对于R用户，一些包包括:</p><ul class=""><li id="b35e" class="km kn hi jl b jm jn jp jq js ko jw kp ka kq ke kr ks kt ku bi translated">铥</li><li id="31ea" class="km kn hi jl b jm kv jp kw js kx jw ky ka kz ke kr ks kt ku bi translated">感觉分析</li><li id="7356" class="km kn hi jl b jm kv jp kw js kx jw ky ka kz ke kr ks kt ku bi translated">tidytext</li><li id="7fc1" class="km kn hi jl b jm kv jp kw js kx jw ky ka kz ke kr ks kt ku bi translated">昆特达</li></ul><p id="819e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">对于这个分析，我将使用<a class="ae kl" href="https://cran.r-project.org/package=tidytext" rel="noopener ugc nofollow" target="_blank"><em class="kf"/><strong class="jl hj"><em class="kf">tidy text</em></strong></a><strong class="jl hj"><em class="kf"/></strong>包，因为它很容易与tidyverse包一起实现。在这里找到使用的数据<a class="ae kl" href="https://github.com/simmieyungie/Sentiment-Analysis" rel="noopener ugc nofollow" target="_blank">以及<em class="kf"> R脚本</em></a></p></div><div class="ab cl la lb gp lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hb hc hd he hf"><p id="4703" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">安装所需的软件包</p><pre class="iy iz ja jb fd lh li lj lk aw ll bi"><span id="8023" class="lm ln hi li b fi lo lp l lq lr">library(tidyverse)<br/>library(tidytext)<br/>library(wordcloud)<br/>library(reshape2)</span></pre><p id="6f29" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">第一步是检查辩论中发言者的词频</p><pre class="iy iz ja jb fd lh li lj lk aw ll bi"><span id="5247" class="lm ln hi li b fi lo lp l lq lr">debate %&gt;% <br/>  group_by(Speaker) %&gt;%<br/>  unnest_tokens(word, Text) %&gt;% #Tokenization <br/>  group_by(Speaker) %&gt;% <br/>  anti_join(stop_words) %&gt;% #remove stop words<br/>  count(word, sort = T) %&gt;% <br/>  mutate(word = str_extract(word, "[a-z]+")) %&gt;% <br/>  na.omit() %&gt;% <br/>  filter(n &gt; 30) %&gt;% #Extract words with frequencies &gt; 20<br/>  ggplot(., aes(reorder(word, n), n, fill = Speaker)) +<br/>  geom_bar(stat = "identity") +<br/>  coord_flip() +<br/>  ylab("Score") +<br/>  xlab("Words") + ggtitle("Word Frequency") +<br/>  theme(plot.title = element_text(face = "bold", size = 15, hjust = 0.5),<br/>        axis.title.x = element_text(face = "bold", size = 13),<br/>        axis.title.y = element_text(face = "bold", size = 13))</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ls"><img src="../Images/a40eada694c7c53f3fe0a30956af055f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*IaZLKdxOBrVGIkUvVn3T_Q.jpeg"/></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">演讲者的词频</figcaption></figure><p id="1935" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">从上面的图表来看，特朗普和克林顿比任何人都有更多的词频，所以让我们对他们多一点兴趣。让我们来看看在他们演讲的过程中情绪是如何变化的。</p><pre class="iy iz ja jb fd lh li lj lk aw ll bi"><span id="fbbe" class="lm ln hi li b fi lo lp l lq lr">#Get the sentiments Variation<br/>debate %&gt;% <br/>  filter(Speaker %in% c("Trump","Clinton")) %&gt;% <br/>  unnest_tokens(word, Text) %&gt;% <br/>  anti_join(stop_words) %&gt;% <br/>  inner_join(get_sentiments("bing")) %&gt;% <br/>  count(Speaker, index = Line, sentiment) %&gt;%<br/>  spread(sentiment, n, fill = 0) %&gt;%<br/>  mutate(sentiment = positive - negative) %&gt;% <br/>  ggplot(.,aes(index, sentiment, fill = Speaker)) +<br/>           geom_col(show.legend = FALSE, width = 3) +<br/>           facet_wrap(~Speaker, ncol = 18, scales = "free_x") +<br/>  ggtitle("Sentiments Variation") + <br/>  theme(plot.title = element_text(face = "bold", size = 15, hjust = 0.5),<br/>        axis.title.x = element_text(face = "bold", size = 13),<br/>        axis.title.y = element_text(face = "bold", size = 13))</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ls"><img src="../Images/b53d056d77daccdf7ae8dd0c45312a62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*mO2NGbSLiz-6zf7p1ssWbA.jpeg"/></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">情绪变化</figcaption></figure><p id="e81f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">他们似乎都在演讲中使用了相当多的负面词汇，而不是正面词汇，所以让我们来比较一下演讲者对这两个词汇的使用。</p><pre class="iy iz ja jb fd lh li lj lk aw ll bi"><span id="3eed" class="lm ln hi li b fi lo lp l lq lr">#plot a comparison of postive and negative words used by participant speakers (Trump vs Clinton)<br/>debate %&gt;% <br/>  filter(Speaker %in% c("Trump","Clinton")) %&gt;% <br/>  unnest_tokens(word, Text) %&gt;% <br/>  anti_join(stop_words) %&gt;% <br/>  inner_join(get_sentiments("bing")) %&gt;% <br/>  group_by(sentiment, Speaker) %&gt;% <br/>  count(word) %&gt;% <br/>  top_n(10) %&gt;% <br/>  ggplot(., aes(reorder(word, n), n, fill = Speaker)) +<br/>  geom_col(show.legend = T) +<br/>  coord_flip() +<br/>  facet_wrap(~sentiment, scales = "free_y") +<br/>  xlab("Words") +<br/>  ylab("frequency") +<br/>  ggtitle("Word Usage") +<br/>  theme(plot.title = element_text(face = "bold", size = 15, hjust = 0.5),<br/>        axis.title.x = element_text(face = "bold", size = 13),<br/>        axis.title.y = element_text(face = "bold", size = 13))</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ls"><img src="../Images/7fdd5736d776f5308ea8affc091956c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*g4IEoy6EIhx4IHWc0N0YiQ.jpeg"/></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">词汇用法(特朗普vs克林顿)</figcaption></figure><p id="61d8" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">最后，让我们用这些单词创建一个<strong class="jl hj">单词云</strong>,将正面和负面形象化</p><pre class="iy iz ja jb fd lh li lj lk aw ll bi"><span id="181a" class="lm ln hi li b fi lo lp l lq lr">debate %&gt;% <br/>  filter(Speaker %in% c("Trump","Clinton")) %&gt;% <br/>  unnest_tokens(word, Text) %&gt;% <br/>  mutate(word = gsub("problems", "problem", word)) %&gt;% <br/>  inner_join(get_sentiments("bing")) %&gt;% <br/>  count(word, sentiment) %&gt;% <br/>  acast(word~sentiment, value.var = "n", fill = 0) %&gt;% <br/>  comparison.cloud(color = c("#1b2a49", "#00909e"),<br/>                 max.words = 100)<br/># Note the acast function is from the reshape2 package<br/># Functions such as <!-- -->comparison.cloud() require you<!-- --> to turn the data frame into a matrix with reshape2’s <!-- -->acast()</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ls"><img src="../Images/a4bb5a3a47e7b5df0f3a1382bb9c8ffe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*AEWHupqmYzmBrBbpomxnfw.jpeg"/></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">比较云</figcaption></figure><h1 id="e904" class="lt ln hi bd lu lv lw lx ly lz ma mb mc io md ip me ir mf is mg iu mh iv mi mj bi translated"><strong class="ak">结论</strong></h1><p id="1e0f" class="pw-post-body-paragraph jj jk hi jl b jm mk ij jo jp ml im jr js mm ju jv jw mn jy jz ka mo kc kd ke hb bi translated">现在您已经看到了使用tidytext包进行情感分析的基本实现。如果你想获得更多的见解，可以查阅由<a class="ae kl" href="http://juliasilge.com/" rel="noopener ugc nofollow" target="_blank">朱莉娅·西尔格</a>和<a class="ae kl" href="http://varianceexplained.org/" rel="noopener ugc nofollow" target="_blank">大卫·罗宾森</a> n著的《带R 和的文本挖掘》一书。</p></div></div>    
</body>
</html>