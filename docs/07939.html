<html>
<head>
<title>Deploying Machine learning models using Flask on your website</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在你的网站上使用Flask部署机器学习模型</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/deploying-machine-learning-models-using-flask-on-your-website-9e68aeea8e45?source=collection_archive---------17-----------------------#2020-07-12">https://medium.com/analytics-vidhya/deploying-machine-learning-models-using-flask-on-your-website-9e68aeea8e45?source=collection_archive---------17-----------------------#2020-07-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="a058" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">黑色星期五销售预测</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/53d7d14863bfc77928fdd457c4195989.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K_vM3XuTjynwRqU6PqdEwA.jpeg"/></div></div></figure><p id="94fa" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">先决条件:</strong></p><p id="a093" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">理解使用Python的机器学习(sklearn)</p><p id="2f33" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">烧瓶基础</p><p id="0f10" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">HTML、CSS的基础知识</p></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><p id="bf82" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">仅仅知道如何用python编写机器学习问题的代码是不够的。部署ML模型是另一项非常重要的技能。如果你有一个运行你自己的ML模型的网站，这对用户来说是多么有用。用户可以与其交互并选择他们想要使用的模型。</p><p id="2702" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这正是这篇文章的内容。所以我做了一个网站，可以让你下载5个不同模型的预测文件。我已经用Flask做到了。</p><p id="6b90" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在我们继续之前，看一下网站:【https://blackfriday-sales.herokuapp.com/<a class="ae km" href="https://blackfriday-sales.herokuapp.com/" rel="noopener ugc nofollow" target="_blank"/></p><p id="e8ee" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">正如你在网站上看到的，我从<a class="ae km" href="https://datahack.analyticsvidhya.com/contest/black-friday/#ProblemStatement" rel="noopener ugc nofollow" target="_blank">分析Vidhya </a>那里拿了一个问题，是黑色星期五销售预测问题。您可以下载数据集并查看其他详细信息。</p><p id="fa2b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在让我们看看编码部分。</p><p id="9d66" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在html文件中——我制作了5个按钮，并根据模型对它们进行了命名(参见代码中突出显示的部分),表单操作被设置为函数/回归变量，当我们单击这些按钮时就会触发该函数/回归变量。</p><pre class="iy iz ja jb fd kn ko kp kq aw kr bi"><span id="c555" class="ks kt hi ko b fi ku kv l kw kx">&lt;form action=”/regressor”, method=”post”&gt;<br/> &lt;button class=”btn btn-dark” <strong class="ko hj">name=”reg”</strong> type=”submit” value=”reg”&gt;Regression&lt;/button&gt; <br/> &lt;br&gt;<br/> <br/> &lt;button class=”btn btn-dark” <strong class="ko hj">name=”DT”</strong> type=”submit” value=”DT” style=”margin-top:10px;”&gt;Decision Tree&amp;nbsp;&lt;/button&gt; <br/> &lt;br&gt;<br/> <br/> &lt;button class=”btn btn-dark” <strong class="ko hj">name=”Rf”</strong> type=”submit” style=”margin-top:10px;” &gt;Random Forest&amp;nbsp;&lt;/button&gt; <br/> &lt;br&gt;<br/> &lt;button class=”btn btn-dark” <strong class="ko hj">name=”Ada”</strong> type=”submit” style=”margin-top:10px;” &gt;AdaBoost&lt;/button&gt; <br/> <br/> &lt;button class=”btn btn-dark” <strong class="ko hj">name=”Gb”</strong> type=”submit” style=”margin-top:10px;” &gt;Gradient Boosting&lt;/button&gt; <br/> <br/> &lt;/form&gt;</span></pre><p id="ab47" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这些按钮是你将在网站上看到的。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ky"><img src="../Images/2c4b9af84509cc4f424c217debf806d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wWxO0hCYX6ihpkpBNxuYNw.png"/></div></div></figure><p id="1922" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">当用户点击这些按钮时，它将在后端运行一个ML模型并下载预测文件。这就是弗拉斯克出现的原因。现在让我们看看烧瓶部分</p><p id="03b0" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我将向您展示一个按钮的功能。其他按钮也是如此。</p><blockquote class="kz"><p id="6529" class="la lb hi bd lc ld le lf lg lh li ke dx translated">【T6<em class="lj">@ app</em><em class="lj">。route('/')<br/>def index():<br/>return render _ template(' index . html ')</em></p></blockquote><p id="493e" class="pw-post-body-paragraph jj jk hi jl b jm lk ij jo jp ll im jr js lm ju jv jw ln jy jz ka lo kc kd ke hb bi translated">上述路线将显示您在上面的图像中看到的网站主页。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lp"><img src="../Images/98f6bbc5cb6654ab49158d619a7209c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xaJ3ETpmuLnO-3caHZRg_w.png"/></div></div></figure><p id="fddc" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，当你点击名为“DT”的按钮时，回归函数被触发。为了知道哪个按钮被点击，我们在第21行有if条件。然后，我们加载ML模型(这里是决策树),并使用predict函数进行预测。</p><p id="689d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们希望下载csv格式的文件，因此我们将numpy数组转换为dataframe，然后使用to_csv()函数创建csv文件。</p><p id="44c9" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">flask的send_file()函数下载csv文件。你需要为其他4个按钮做同样的事情。</p><p id="e58f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">就是这样！！</strong></p><p id="c765" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">你刚刚在你的网站上部署了你的ML模型。您可以下载预测文件，并在您的Analytics Vidhya帐户上提交。</p><p id="bfda" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">你会在我的Github上找到完整的代码。我们还在youtube上制作了一个视频。你可以自由地做出改变，让web应用程序变得更好。</p><p id="3528" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">下面是链接:<a class="ae km" href="https://github.com/aniketwattamwar/Black-Friday-Sales-Prediction-Web-App" rel="noopener ugc nofollow" target="_blank">黑色星期五销量预测Github </a></p><p id="a5d3" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">Youtube链接:<a class="ae km" href="https://www.youtube.com/watch?v=4PX2NfS4M6g" rel="noopener ugc nofollow" target="_blank">使用Flask部署ML模型</a></p><p id="0cd9" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">特别感谢分析Vidhya提供了惊人的实践问题。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="d5b6" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">谢谢大家！我希望这篇文章是有帮助的。</p></div></div>    
</body>
</html>