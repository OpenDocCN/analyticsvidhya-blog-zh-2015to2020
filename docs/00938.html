<html>
<head>
<title>Run PySpark and Jupyter Notebook using Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Docker运行PySpark和Jupyter笔记本</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/run-pyspark-and-jupyter-notebook-using-docker-bed12ecb755a?source=collection_archive---------9-----------------------#2019-09-20">https://medium.com/analytics-vidhya/run-pyspark-and-jupyter-notebook-using-docker-bed12ecb755a?source=collection_archive---------9-----------------------#2019-09-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/f1b15a3700c6e60e12e1089310013150.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*swpocxF6olc1N5QUg68dgg.jpeg"/></div></div></figure><p id="3af6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本文中，我将解释使用Docker在容器化环境中编写标准数据分析程序所需的基本工具集。和往常一样，我的方法是让你的程序可移植并且独立于平台。让我们先简单了解一下我所说的工具集是什么意思，以及我要在Docker容器中打包什么。</p><ul class=""><li id="2984" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated"><strong class="is hj"> PySpark </strong> — PySpark编程是Apache Spark和Python的合作。它是为与Apache Spark交互而构建的Python API。因为它是用Python编写的，所以您可以使用其他Python模块成为高效的数据分析师</li><li id="902a" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj"> Apache Spark </strong> —这是一个非常流行的处理和使用大数据的框架。它几乎比任何其他传统的大规模数据处理框架快100倍</li><li id="4967" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj"> Jupyter Notebook </strong> —这是一个开源web应用程序，主要由数据分析师/工程师用来编写代码、数学方程、数据可视化等</li><li id="73c7" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">这是一个Python库，用于处理多维数组、矩阵、高级数学函数等</li></ul><p id="b399" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们深入研究技术细节，看看如何设置支持PySpark、Jupyter Notebook和NumPy的本地环境。以下是分步说明:</p><ol class=""><li id="d83c" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn kc ju jv jw bi translated">在你的系统上创建一个新的文件夹，例如c:\code\pyspark-jupyter或者你想给的任何名字</li><li id="2111" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn kc ju jv jw bi translated">在该文件夹中创建一个文件，将其命名为<strong class="is hj"> docker-compose.yaml </strong>，内容如下:</li></ol><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="67dd" class="km kn hi ki b fi ko kp l kq kr">version: "3"<br/>services:<br/>  pyspark:<br/>    image: "jupyter/all-spark-notebook"<br/>    volumes:<br/>      - c:/code/pyspark-data:/home/jovyan<br/>    ports:<br/>      - 8888:8888</span></pre><ol class=""><li id="c6ce" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn kc ju jv jw bi translated">在上面的文件中，我提取了一个正式的jupyter docker映像，将本地文件夹映射到容器内部的一个文件夹，并将容器端口8888暴露给主机端口8888。很简单，不是吗？</li><li id="c8a8" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn kc ju jv jw bi translated">现在使用命令<strong class="is hj"> docker-compose up </strong>运行该文件，您将看到类似如下所示的输出</li></ol><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="2fdf" class="km kn hi ki b fi ko kp l kq kr">PS C:\code\pyspark-jupyter&gt; docker-compose up<br/>Recreating pyspark-jupyter_pyspark_1 ... done<br/>Attaching to pyspark-jupyter_pyspark_1<br/>pyspark_1  | Executing the command: jupyter notebook<br/>pyspark_1  | [I 14:41:40.780 NotebookApp] Writing notebook server cookie secret to /home/jovyan/.local/share/jupyter/runtime/notebook_cookie_secret<br/>pyspark_1  | [I 14:41:41.010 NotebookApp] Loading IPython parallel extension<br/>pyspark_1  | [I 14:41:41.049 NotebookApp] JupyterLab extension loaded from /opt/conda/lib/python3.7/site-packages/jupyterlab<br/>pyspark_1  | [I 14:41:41.049 NotebookApp] JupyterLab application directory is /opt/conda/share/jupyter/lab<br/>pyspark_1  | [I 14:41:41.054 NotebookApp] Serving notebooks from local directory: /home/jovyan<br/>pyspark_1  | [I 14:41:41.054 NotebookApp] The Jupyter Notebook is running at:<br/>pyspark_1  | [I 14:41:41.054 NotebookApp] http://3d475598a523:8888/?token=YOUR_TOKEN<br/>pyspark_1  | [I 14:41:41.054 NotebookApp]  or http://127.0.0.1:8888/?token=YOUR_TOKEN<br/>pyspark_1  | [I 14:41:41.055 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).<br/>pyspark_1  | [C 14:41:41.073 NotebookApp]<br/>pyspark_1  |<br/>pyspark_1  |     To access the notebook, open this file in a browser:<br/>pyspark_1  |         file:///home/jovyan/.local/share/jupyter/runtime/nbserver-6-open.html<br/>pyspark_1  |     Or copy and paste one of these URLs:<br/>pyspark_1  |         http://3d475598a523:8888/?token=YOUR_TOKEN<br/>pyspark_1  |      or http://127.0.0.1:8888/?token=YOUR_TOKEN</span></pre><ol class=""><li id="fdca" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn kc ju jv jw bi translated">复制网址<a class="ae ks" href="http://127.0.0.1:8888/?token=YOUR_TOKEN" rel="noopener ugc nofollow" target="_blank">T14】http://127 . 0 . 0 . 1:8888/？token=YOUR_TOKEN  </a>并在您选择的浏览器中打开</li><li id="0656" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn kc ju jv jw bi translated">您将看到Jupyter Notebook的一个实例在一个容器中运行。您可能已经注意到，您的本地文件夹被映射到容器内部</li></ol><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kt"><img src="../Images/8791bd87cc105cc27801248c0a461753.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4YlV_yPpBpAW_ABB.PNG"/></div></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">朱庇特笔记本的一个实例</figcaption></figure><p id="4553" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们创建我们的第一个笔记本，并与PySpark一起工作。这只是一个简单的介绍，因为我将分别撰写关于PySpark和NumPy的详细文章。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ky"><img src="../Images/ad5c30bddcd4c69c96e9e9e56f877e57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QB0PJWQVCw5JKJc4.PNG"/></div></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">在Docker中运行的PySpark程序</figcaption></figure></div><div class="ab cl kz la gp lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="hb hc hd he hf"><p id="77e2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第二个笔记本简要介绍了NumPy的使用</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lg"><img src="../Images/39ab1c39c252464c8f9955ab10567702.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cpixbsXL2zZZJyZT.PNG"/></div></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">Docker中运行的NumPy程序</figcaption></figure></div><div class="ab cl kz la gp lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="hb hc hd he hf"><p id="171a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">希望它有助于您开始数据分析之旅，并使用Docker制作可移植程序。</p><p id="e9b1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="lh">快乐学习！！！</em> </strong></p></div></div>    
</body>
</html>