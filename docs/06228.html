<html>
<head>
<title>Building my first Python App: SageBot — The Sage Twitter bot.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建我的第一个Python应用程序:Sage bot——Sage Twitter bot。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/building-my-first-python-app-sagebot-the-sage-twitter-bot-c528c492e6bf?source=collection_archive---------11-----------------------#2020-05-15">https://medium.com/analytics-vidhya/building-my-first-python-app-sagebot-the-sage-twitter-bot-c528c492e6bf?source=collection_archive---------11-----------------------#2020-05-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/8931c85712e9b2a32d3051bd881e1875.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q_SLd9EVzDQSMCs3pC9gkQ.jpeg"/></div></div></figure><blockquote class="iq ir is"><p id="9a07" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我从来不喜欢python。我总是想知道如何用简单的英语编写代码，最重要的是，如何不用分号来编写代码；但是我正在进行多语言编程的旅程，并向新事物敞开心扉，所以我决定尝试一下。</p></blockquote><h1 id="8f03" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">介绍</h1><p id="e9b5" class="pw-post-body-paragraph it iu hi iw b ix kq iz ja jb kr jd je ks kt jh ji ku kv jl jm kw kx jp jq jr hb bi translated">你好。在我过去3年的软件开发生涯中，我主要使用C#和JavaScript(这包括一些她流行的框架)，但是最近，我决定探索python，因为市场需求和它的乐趣。</p><p id="688d" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">SageBot是一个Twitter机器人，每隔12小时就会在Twitter上发布一些伟人的名言。在这篇文章中，我将谈谈我构建它的一般经验。</p><p id="cf81" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">但首先，跟随SageBot <a class="ae ky" href="https://twitter.com/sageeBot" rel="noopener ugc nofollow" target="_blank">现在</a>！</p><h1 id="911b" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">开始</h1><p id="d878" class="pw-post-body-paragraph it iu hi iw b ix kq iz ja jb kr jd je ks kt jh ji ku kv jl jm kw kx jp jq jr hb bi translated">所以你知道，这不会是一个完整的教程文章。我只想谈谈我的经历，以及我是如何经历SageBot建设过程中的每一个阶段的。也就是说，如果你打算用这篇文章来构建你自己的twitter机器人，你至少应该有一些编程经验。如果你是来看我的经历的，那就好好读吧！</p><p id="22d0" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">这篇文章的大纲如下:</p><ul class=""><li id="44a9" class="kz la hi iw b ix iy jb jc ks lb ku lc kw ld jr le lf lg lh bi translated">从RapidAPI获取API。</li><li id="dcbc" class="kz la hi iw b ix li jb lj ks lk ku ll kw lm jr le lf lg lh bi translated">申请一个Twitter开发者账户。</li><li id="220c" class="kz la hi iw b ix li jb lj ks lk ku ll kw lm jr le lf lg lh bi translated">使用Tweepy(一个易于使用的Python库，用于访问Twitter的API)。</li><li id="2d60" class="kz la hi iw b ix li jb lj ks lk ku ll kw lm jr le lf lg lh bi translated">在PythonAnywhere上部署。</li><li id="0a4e" class="kz la hi iw b ix li jb lj ks lk ku ll kw lm jr le lf lg lh bi translated">最后，我的有益经验。</li></ul><p id="2178" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">如果你没有注意到，这并不是我第一次亲身体验Python。我以前遇到过这种情况，但这是我第一次真正从头到尾用Python构建东西。一个人。</p><p id="8f09" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">说够了，让我们开始吧。</p><h1 id="5420" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">从RapidAPI获取API</h1><p id="afb6" class="pw-post-body-paragraph it iu hi iw b ix kq iz ja jb kr jd je ks kt jh ji ku kv jl jm kw kx jp jq jr hb bi translated">当我想开始构建时，我想到的第一件事是我要从哪里获取我的报价，这是因为我希望机器人的工作方式。如果你正在构建一个不需要使用API的机器人，你可以跳过这一节。</p><p id="8ce5" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">原来有一个网站包含了很多API，你可以订阅(反正大部分都是免费的)。RapidAPI帮助您找到并连接到一千个API。如果你正在为你的下一个应用寻找一个API，RapidAPI.com的<a class="ae ky" href="http://Rapidapi.com" rel="noopener ugc nofollow" target="_blank">就有。搜索了一会儿之后，我偶然发现了我决定要使用的quotes API。我会把链接贴在文章末尾。</a></p><p id="a8ad" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">显然，一旦您选择并订阅了您想要使用的API，您就可以测试它的端点并获得您想要的任何语言的代码片段。所以你可以复制代码(如果你知道它是如何工作的会有所帮助，以防你想对它做一些调整)然后直接使用它。</p><p id="df26" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">一旦我得到了API，我就准备好开始浏览Twitter了。</p><figure class="ln lo lp lq fd ij"><div class="bz dy l di"><div class="lr ls l"/></div><figcaption class="lt lu et er es lv lw bd b be z dx translated">从RapidAPI获取我的报价</figcaption></figure><h1 id="9e0f" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">申请一个Twitter开发者账户</h1><p id="344d" class="pw-post-body-paragraph it iu hi iw b ix kq iz ja jb kr jd je ks kt jh ji ku kv jl jm kw kx jp jq jr hb bi translated">这个阶段对我来说非常有趣，因为我已经使用了其他大公司的API，我从来没有“申请”过，但你必须有耐心，因为一旦你可以访问API，你就可以访问任何人的推文，并做任何你想做的事情。所以我想Twitter只是在小心他们把API发给谁。</p><p id="6a85" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">因此，前往https://developer.twitter.com/en申请一个开发者账户并访问Twitters API。这有助于注意到，无论您用来访问的帐户是什么，它也是使用API的帐户。这意味着，如果你使用你的个人Twitter账户来访问API，无论你决定使用API做什么，都将来自你的个人账户，无论是tweets、likes还是DMs。</p><p id="68cb" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">申请的时候，你会被问到一些问题，这些问题越详细越好。这个过程花了我大约2-3天的时间，这是因为我收到了其他电子邮件来明确定义我想要使用API的目的。所以如果需要几天也不用担心。如果你的意图是纯粹的，你应该很快就可以走了。</p><p id="2123" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">一旦你被批准，前往你的仪表板，创建一个新的应用程序，然后检查密钥和令牌选项卡，你应该看到你的秘密和令牌(如果没有，你可以生成它们)。您应该很好地保护这些秘密和令牌，因为任何有权访问它们的人都可以访问API，如果他们知道如何做的话。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/3590a7aca65bb381790fe210a1d2eced.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b9xJOIgk2FcAIakwwVVFSA.png"/></div></div><figcaption class="lt lu et er es lv lw bd b be z dx translated">我的开发者应用页面的一个例子。</figcaption></figure><h1 id="94b1" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">使用Tweepy(一个易于使用的Python库，用于访问Twitter的API)</h1><p id="04c9" class="pw-post-body-paragraph it iu hi iw b ix kq iz ja jb kr jd je ks kt jh ji ku kv jl jm kw kx jp jq jr hb bi translated">这部分真的很简单。我不知道Tweepy是怎么做到的，但他们让访问和浏览Twitter的API变得如此容易，这让一切都变得更加容易。我从广泛阅读文档开始(是的，你应该阅读文档并关注它们。它们很重要)。<br/>在这里阅读文档<a class="ae ky" href="http://docs.tweepy.org/en/latest/index.html" rel="noopener ugc nofollow" target="_blank">http://docs.tweepy.org/en/latest/index.html</a>。</p><p id="8316" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">文档非常详细，组织有序，易于阅读，因此您可以轻松地复制您需要的代码。</p><figure class="ln lo lp lq fd ij"><div class="bz dy l di"><div class="ly ls l"/></div><figcaption class="lt lu et er es lv lw bd b be z dx translated">聪明地工作。Lol！</figcaption></figure><p id="f283" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">对于我的机器人，我必须经历两个过程；身份验证和更新状态(使机器人发出Tweet)。这两种方法的代码片段都在文档中，所以我不会在这里解释它们。然而，我将展示我的代码，以及我如何能够从API制作我的机器人tweet。</p><figure class="ln lo lp lq fd ij"><div class="bz dy l di"><div class="lr ls l"/></div><figcaption class="lt lu et er es lv lw bd b be z dx translated">从API发布tweet的代码</figcaption></figure><p id="c1fc" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">从上面的代码中，您会看到我将我的秘密和令牌隐藏为环境变量(如果您需要学习如何在python中使用环境变量，您可以在这里学习<a class="ae ky" href="https://able.bio/rhett/how-to-set-and-get-environment-variables-in-python--274rgt5" rel="noopener ugc nofollow" target="_blank"/>)。使用它可以帮助我隐藏它们，这样只有我可以从我的电脑上访问它们。我也有3个方法；</p><ul class=""><li id="4d43" class="kz la hi iw b ix iy jb jc ks lb ku lc kw ld jr le lf lg lh bi translated">CreateApi()-这基本上是Tweepy身份验证方法。我提供了必要的密钥，并将自己验证为有效用户。</li><li id="10c0" class="kz la hi iw b ix li jb lj ks lk ku ll kw lm jr le lf lg lh bi translated">Tweets() —这将创建CreateApi()方法的新实例，并将其作为参数发送给TweetQuote()方法。它每12个小时做一次，这是实现计时的地方。它也是脚本开始运行时运行的方法。</li><li id="53eb" class="kz la hi iw b ix li jb lj ks lk ku ll kw lm jr le lf lg lh bi translated">TweetQuote() —它获取创建的API的实例，使用之前的RapidAPI代码片段来获取作者的引用，并使用发送给它的API参数来更新用户的状态(在这个实例中是my bot)</li></ul><p id="6475" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">基本上就是这样。在一切正常的情况下，如果您在本地运行，它应该每12小时(43200秒)创建一条新的Tweet。</p><p id="1ea2" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">出于测试的目的，将时间限制在30秒或适合你的时间是可以的。</p><h1 id="71a4" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">在PythonAnywhere上部署</h1><p id="50df" class="pw-post-body-paragraph it iu hi iw b ix kq iz ja jb kr jd je ks kt jh ji ku kv jl jm kw kx jp jq jr hb bi translated">下一步是前往pythonanywhere.com的T2创建一个账户。如果你有一个付费账户，特别是如果你打算使用外部API，那么我会建议你使用最低的计划。除此之外，你可以使用免费账户。</p><p id="cb7f" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">一旦你设置好你的账户，你应该点击菜单栏中的文件。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/64bd777c768329423a8274a339291044.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T7GnpDtARRCrtnqhrS73oQ.png"/></div></div><figcaption class="lt lu et er es lv lw bd b be z dx translated">PythonAnywhere仪表板。</figcaption></figure><p id="0ec6" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">一旦你被重定向到文件页面，上传你的python脚本，一旦它被上传，你可以运行它，看看是否一切正常</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/10956752c325c829bb7607479d7f432d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nYT-KaJ2SGVuwixaWj-SPQ.png"/></div></div><figcaption class="lt lu et er es lv lw bd b be z dx translated">上传文件。</figcaption></figure><p id="c4bd" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">如果您得到一个Tweepy模块错误，您应该返回到您的仪表板，打开一个新的bash控制台并运行</p><pre class="ln lo lp lq fd lz ma mb mc aw md bi"><span id="aaa6" class="me jt hi ma b fi mf mg l mh mi">python3 pip --user install tweepy</span></pre><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/3f26188aff5cd24c43b20a6594db6ffc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kJws6wJKgEWR_bOLUP9_gA.png"/></div></div><figcaption class="lt lu et er es lv lw bd b be z dx translated">运行新的bash控制台。</figcaption></figure><p id="52a4" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">一旦一切正常，您就可以将脚本作为任务运行了。pythonanywhere上有两种类型的任务:</p><ul class=""><li id="461f" class="kz la hi iw b ix iy jb jc ks lb ku lc kw ld jr le lf lg lh bi translated">计划任务—它们每天在计划的时间运行一次(每个免费帐户都可以访问一次)</li><li id="dd10" class="kz la hi iw b ix li jb lj ks lk ku ll kw lm jr le lf lg lh bi translated">永远在线的任务——它们永远在线，如果崩溃了还会重新启动(这种类型需要付费计划)</li></ul><p id="ddcf" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">要作为计划任务运行，请导航到任务并添加文件的目录，其格式应为:</p><pre class="ln lo lp lq fd lz ma mb mc aw md bi"><span id="d4b5" class="me jt hi ma b fi mf mg l mh mi">home/username/filename.py</span></pre><p id="443f" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">而要运行始终运行的任务，请导航到任务，并在始终运行的任务中，添加文件的目录，其格式应为:</p><pre class="ln lo lp lq fd lz ma mb mc aw md bi"><span id="b0e2" class="me jt hi ma b fi mf mg l mh mi">python3.6 home/username/filename.py</span></pre><figure class="ln lo lp lq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/d04aee3d803240a00fe51c8c3908b14b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FTTVcbqqxpFGc686xxvgnw.png"/></div></div><figcaption class="lt lu et er es lv lw bd b be z dx translated">显示计划任务和始终在线任务的图像</figcaption></figure><p id="a448" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">如果你遇到任何问题，你可以谷歌它或检查pythonanywhere支持。有可能你不是唯一一个有这个问题的人，或者曾经有过这样的问题。</p><p id="e0de" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">一旦你的任务开始运行(检查日志，看看你的任务进展如何)，你就可以开始了，你的python机器人将永远自动化(至少在你做一些事情之前)。</p><p id="bf4c" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">就是这样！这是构建和部署twitter机器人的一种方式。你绝对应该浏览Twitter的API文档，看看你能做和探索的所有东西！！</p></div><div class="ab cl mj mk gp ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="hb hc hd he hf"><h1 id="42ca" class="js jt hi bd ju jv mq jx jy jz mr kb kc kd ms kf kg kh mt kj kk kl mu kn ko kp bi translated">最后，我有益的经历</h1><p id="d975" class="pw-post-body-paragraph it iu hi iw b ix kq iz ja jb kr jd je ks kt jh ji ku kv jl jm kw kx jp jq jr hb bi translated">用Python做东西真的很酷，这种语言给了我一个放松和打字的机会，就像我写普通英语一样。我并不是一直都在寻找我的分号。但这似乎是我使用Python的弱点。写作既容易又舒服，这一事实让我失去了注意力，也让我感觉很舒服。也就是说，我真的很喜欢这一点，并希望用Python构建更多的东西。</p></div><div class="ab cl mj mk gp ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="hb hc hd he hf"><h1 id="46e3" class="js jt hi bd ju jv mq jx jy jz mr kb kc kd ms kf kg kh mt kj kk kl mu kn ko kp bi translated">参考</h1><p id="b550" class="pw-post-body-paragraph it iu hi iw b ix kq iz ja jb kr jd je ks kt jh ji ku kv jl jm kw kx jp jq jr hb bi translated">更多的阅读，你应该检查这些家伙。它们包含了更多关于你如何使用你的机器人而不仅仅是发微博的方法。</p><ul class=""><li id="a68c" class="kz la hi iw b ix iy jb jc ks lb ku lc kw ld jr le lf lg lh bi translated"><a class="ae ky" href="https://www.twilio.com/blog/build-deploy-twitter-bots-python-tweepy-pythonanywhere" rel="noopener ugc nofollow" target="_blank">https://www . twilio . com/blog/build-deploy-Twitter-bots-python-tweepy-python anywhere</a></li><li id="a926" class="kz la hi iw b ix li jb lj ks lk ku ll kw lm jr le lf lg lh bi translated">https://realpython.com/twitter-bot-python-tweepy/<a class="ae ky" href="https://realpython.com/twitter-bot-python-tweepy/" rel="noopener ugc nofollow" target="_blank"/></li><li id="8024" class="kz la hi iw b ix li jb lj ks lk ku ll kw lm jr le lf lg lh bi translated"><a class="ae ky" href="https://towardsdatascience.com/building-a-twitter-bot-with-python-89959ef2607f" rel="noopener" target="_blank">https://towards data science . com/building-a-Twitter-bot-with-python-89959 ef 2607 f</a></li><li id="8b56" class="kz la hi iw b ix li jb lj ks lk ku ll kw lm jr le lf lg lh bi translated"><a class="ae ky" href="https://www.digitalocean.com/community/tutorials/how-to-create-a-twitterbot-with-python-3-and-the-tweepy-library" rel="noopener ugc nofollow" target="_blank">https://www . digital ocean . com/community/tutorials/how-to-create-a-twiter bot-with-python-3-and-the-tweepy-library</a></li></ul><p id="4dfc" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">你也可以在这里查看我对这个机器人的回购</p><p id="2c7d" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">有什么想法也可以留言回应。</p><p id="2b02" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je ks jg jh ji ku jk jl jm kw jo jp jq jr hb bi translated">谢谢，❤保持安全。</p></div></div>    
</body>
</html>