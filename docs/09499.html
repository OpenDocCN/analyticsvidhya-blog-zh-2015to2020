<html>
<head>
<title>Auto-capture Selfie by Detecting Smile</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过检测微笑自动捕捉自拍</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/auto-capture-selfie-by-detecting-smile-1633218101ba?source=collection_archive---------12-----------------------#2020-09-08">https://medium.com/analytics-vidhya/auto-capture-selfie-by-detecting-smile-1633218101ba?source=collection_archive---------12-----------------------#2020-09-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="b344" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">微笑时自动捕捉美丽的自拍Python项目可自动检测和捕捉自拍。</h1><p id="fe99" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">每个人都喜欢微笑的照片，所以我们将开发一个项目，将捕捉你每次微笑的图像。这是一个简单的初学者机器学习项目，我们将使用OpenCV库。</p><h2 id="1c77" class="kb ig hi bd ih kc kd ke il kf kg kh ip jo ki kj it js kk kl ix jw km kn jb ko bi translated">OpenCV是什么？</h2><p id="892d" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jf hj"> OpenCV </strong>(开源计算机视觉库)是一个开源的计算机视觉和机器学习软件库。<strong class="jf hj"> OpenCV </strong>的建立是为了给计算机视觉应用提供一个通用的基础设施，并加速机器感知在商业产品中的使用。</p><h1 id="7def" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">项目先决条件</h1><p id="32d5" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">要实施这个项目，我们需要了解以下内容:</p><p id="e1b4" class="pw-post-body-paragraph jd je hi jf b jg kp ji jj jk kq jm jn jo kr jq jr js ks ju jv jw kt jy jz ka hb bi translated">1.Python的基本概念<br/> 2。openCV基础。</p><p id="b548" class="pw-post-body-paragraph jd je hi jf b jg kp ji jj jk kq jm jn jo kr jq jr js ks ju jv jw kt jy jz ka hb bi translated">要安装该库，您可以从命令行使用pip安装程序:</p><ol class=""><li id="8b49" class="ku kv hi jf b jg kp jk kq jo kw js kx jw ky ka kz la lb lc bi translated">pip安装OpenCV-python</li></ol><h1 id="d405" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">下载培训代码和XML文件</h1><h1 id="659e" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">开发项目的步骤</h1><p id="eef5" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">实施微笑检测和自拍捕捉项目的步骤</p><ol class=""><li id="e85b" class="ku kv hi jf b jg kp jk kq jo kw js kx jw ky ka kz la lb lc bi translated">我们首先导入openCV库。</li><li id="9627" class="ku kv hi jf b jg ld jk le jo lf js lg jw lh ka kz la lb lc bi translated">现在使用cv2的视频捕捉功能启动第二行的网络摄像头。</li><li id="ff90" class="ku kv hi jf b jg ld jk le jo lf js lg jw lh ka kz la lb lc bi translated">然后，在python文件中包含haarcascade文件。</li><li id="72a4" class="ku kv hi jf b jg ld jk le jo lf js lg jw lh ka kz la lb lc bi translated">视频只不过是一系列的图像，所以我们将运行一个无限的while循环。</li><li id="6c0d" class="ku kv hi jf b jg ld jk le jo lf js lg jw lh ka kz la lb lc bi translated">然后我们通过read()从视频中读取图像。</li><li id="2ffc" class="ku kv hi jf b jg ld jk le jo lf js lg jw lh ka kz la lb lc bi translated">由于灰度图像中的特征识别更准确，我们将使用基本openCV函数cvtColor()和BGR2GRAY将图像转换为灰度图像。</li><li id="a72a" class="ku kv hi jf b jg ld jk le jo lf js lg jw lh ka kz la lb lc bi translated">现在，我们将使用已经包含的haarcascade文件和detectMultiscale()函数来读取人脸，在该函数中，我们传递灰度图像、比例因子和minNeighbors。</li></ol><ul class=""><li id="7cea" class="ku kv hi jf b jg kp jk kq jo kw js kx jw ky ka li la lb lc bi translated">ScaleFactor:指定缩放图像的参数，精度取决于它，所以我们将使它接近1，但不是非常接近，就像我们取1.001(非常接近1)，那么它甚至会检测阴影，所以1.1对面部来说足够好了。</li><li id="5b53" class="ku kv hi jf b jg ld jk le jo lf js lg jw lh ka li la lb lc bi translated">minNeighbors:指定每个矩形应该有多少个邻居来保留它的参数。</li></ul><ol class=""><li id="f47a" class="ku kv hi jf b jg kp jk kq jo kw js kx jw ky ka kz la lb lc bi translated">如果它检测到人脸，我们将使用cv2的rectangle()方法绘制人脸的外部边界，该方法包含5个参数:图像、初始点(x，y)、主对角线的端点(x +宽度，y +高度)、矩形外围的颜色，最后一个参数是绘制的矩形外围的厚度。</li><li id="277f" class="ku kv hi jf b jg ld jk le jo lf js lg jw lh ka kz la lb lc bi translated">如果检测到面部，我们将同样检测到微笑，如果也检测到微笑，我们将打印保存在cmd/终端中的图像<cnt>，然后我们必须提供要保存图像的文件夹的位置。</cnt></li><li id="5b31" class="ku kv hi jf b jg ld jk le jo lf js lg jw lh ka kz la lb lc bi translated">为了保存图像，我们将使用imwrite()，它有两个参数——位置和图像。</li><li id="779d" class="ku kv hi jf b jg ld jk le jo lf js lg jw lh ka kz la lb lc bi translated">为了防止内存溢出，我们将只在一次运行中保存2个图像，因此使用if语句，如果cnt&gt;=2，该语句将中断循环。</li><li id="3913" class="ku kv hi jf b jg ld jk le jo lf js lg jw lh ka kz la lb lc bi translated">为了打破无限循环，我们使用了一个if语句，当我们按“q”表示“退出”时，该语句变为真。</li><li id="37c5" class="ku kv hi jf b jg ld jk le jo lf js lg jw lh ka kz la lb lc bi translated">最后，我们将发布视频。</li><li id="08ce" class="ku kv hi jf b jg ld jk le jo lf js lg jw lh ka kz la lb lc bi translated">不要忘记破坏所有的窗户。</li></ol><h1 id="1709" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated"><strong class="ak">代码:</strong></h1><blockquote class="lj lk ll"><p id="997c" class="jd je lm jf b jg kp ji jj jk kq jm jn ln kr jq jr lo ks ju jv lp kt jy jz ka hb bi translated">导入cv2 <br/>视频= cv2。视频捕获(0)</p><p id="8839" class="jd je lm jf b jg kp ji jj jk kq jm jn ln kr jq jr lo ks ju jv lp kt jy jz ka hb bi translated">faceCascade=cv2。cascade classifier(" G:/dataset/Haar scade _ frontal face _ default . XML ")<br/>smile scade = cv2。cascade classifier(" G:/dataset/Haar cascade _ smile . XML ")</p><p id="48d2" class="jd je lm jf b jg kp ji jj jk kq jm jn ln kr jq jr lo ks ju jv lp kt jy jz ka hb bi translated">while True: <br/> success，img = video . read()<br/>gray img = cv2 . CVT color(img，cv2。COLOR _ bgr 2 gray)<br/>faces = face cascade . detect scale(gray img，1.1，4)<br/>CNT = 1<br/>key pressed = cv2 . wait key(1)<br/>for x，y，w，h in faces:<br/>img = cv2 . rectangle(img，(x，y)，(x+w，y+h)，(0，0，0)，0)<br/>smiles = smile scade . detect scale(gray img，1.8，15) <br/>jpg' <br/> cv2.imwrite(path，img)<br/>CNT+= 1<br/>if(CNT&gt;= 2):<br/>break<br/><br/>cv2 . im show('视频直播'，img)<br/>if(key pressed&amp;0x ff = = ord(' q '):<br/>break<br/>video . release()<br/>cv2 . destroyallwindows()</p></blockquote></div></div>    
</body>
</html>