<html>
<head>
<title>How to Architect Django Templates</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何构建Django模板</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-architect-django-templates-4e780f440f6a?source=collection_archive---------10-----------------------#2020-11-01">https://medium.com/analytics-vidhya/how-to-architect-django-templates-4e780f440f6a?source=collection_archive---------10-----------------------#2020-11-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="5829" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">摘要</h1><p id="9c5b" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在本文中，我将介绍我在Django应用程序开发中设计Django模板的方法。目标是让Django应用程序的UI部分组织得更好，避免冗余编码。Django在模板引擎中提供了各种机制来帮助我们实现这个目标。在本教程中，我将通过使用Django内置的模板标签<strong class="jf hj"> block </strong>、<strong class="jf hj"> extends </strong>和<strong class="jf hj"> include </strong>来尽可能地让模板易于维护。</p><h1 id="74e4" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">依赖关系:</h1><p id="4ac8" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">1.Python 3.6</p><p id="49d4" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">2.姜戈2.2</p><p id="2ce0" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">3.AdminLTE 3.0.5(你可以查看我之前关于这个主题库的教程<a class="ae kg" href="https://www.linkedin.com/pulse/how-use-adminlte-django-yiqing-lan/" rel="noopener ugc nofollow" target="_blank">这里</a>。)</p><h1 id="e095" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">预览:模板的不良架构</h1><p id="dec5" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我已经上传了一个项目<a class="ae kg" href="https://github.com/slow999/DjangoAndBadTemplatesDesign" rel="noopener ugc nofollow" target="_blank">在这里</a>来说明模板有多乱。我们将从那里开始。我们来看看这两个页面，<a class="ae kg" href="http://127.0.0.1:8000/home/" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/home/</a>和<a class="ae kg" href="http://127.0.0.1:8000/polls/" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/polls/</a>。他们各自的html模板分别位于home/templates/home/landing . html和polls/templates/polls/index . html，简单来说，我就把他们叫做<strong class="jf hj">landing.html</strong>和<strong class="jf hj">index.html</strong>。每个模板都重复侧边栏菜单、css和javascript库。最重要的是，在“通用元素”框中有一个巨大的表单，其中的内容是相同的。随着应用程序和网址的增长，这种情况已经失控。</p><h1 id="bf2c" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">我的方法</h1><p id="41de" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">下面是我避免Django UI的“意大利面条代码”的方法。</p><h2 id="3ca0" class="kh ig hi bd ih ki kj kk il kl km kn ip jo ko kp it js kq kr ix jw ks kt jb ku bi translated">第1/4步:base.html</h2><p id="1516" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">将模板分解成多个部分，我们知道除了菜单和内容，其他的都是可重复的。我们将制作一个基础模板来保存这些公共部分。</p><figure class="kw kx ky kz fd la er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es kv"><img src="../Images/abcd05563db46f5f97a915ee195b5710.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zGez_W_YNj6nXhYkep21pA.png"/></div></div></figure><p id="0557" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在项目文件夹中创建一个文件夹<strong class="jf hj">模板</strong>。在它内部，创造出一个<strong class="jf hj">base.html</strong>。把所有普通的棋子都放进去。你可以复制并粘贴下面的代码，这些代码是由<strong class="jf hj">landing.html</strong>和<strong class="jf hj">index.html</strong>共享的。</p><figure class="kw kx ky kz fd la"><div class="bz dy l di"><div class="lh li l"/></div></figure><p id="41a1" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">请注意，块<strong class="jf hj"> content_wrapper </strong>用于呈现每个页面的自定义内容。</p><h1 id="9890" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">步骤2/4:删除多余的公共代码</h1><p id="4db4" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">由于我们在上一步中创建了一个<strong class="jf hj">base.html</strong>，所以不再需要保留<strong class="jf hj">landing.html</strong>和<strong class="jf hj">home.html</strong>中的公共代码。我们应该有如下结果。</p><figure class="kw kx ky kz fd la"><div class="bz dy l di"><div class="lh li l"/></div></figure><h1 id="1477" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">第3/4步:继承base.html</h1><p id="beef" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">为了使用<strong class="jf hj">base.html</strong>作为每个页面的基础模板，我们需要通过在模板的开头使用{% extends 'base.html' %}将<strong class="jf hj">base.html</strong>声明为“父”模板。除此之外，不要忘记<strong class="jf hj">内容_包装器</strong>块。将整个内容包装到该块中。我们应该得到如下结果。</p><p id="9385" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在<strong class="jf hj">landing.html</strong>:</p><pre class="kw kx ky kz fd lj lk ll lm aw ln bi"><span id="af76" class="kh ig hi lk b fi lo lp l lq lr">{% extends 'base.html' %}<br/>{% load static %}</span><span id="90af" class="kh ig hi lk b fi ls lp l lq lr">{% block content_wrapper %}<br/>  &lt;div class="content-wrapper"&gt;<br/>    . . .<br/>  &lt;/div&gt;<br/>{% endblock %}</span></pre><p id="8218" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在<strong class="jf hj">index.html</strong>:</p><pre class="kw kx ky kz fd lj lk ll lm aw ln bi"><span id="294f" class="kh ig hi lk b fi lo lp l lq lr">{% extends 'base.html' %}<br/>{% load static %}</span><span id="eef0" class="kh ig hi lk b fi ls lp l lq lr">{% block content_wrapper %}<br/>  &lt;div class="content-wrapper"&gt;<br/>    . . .<br/>  &lt;/div&gt;<br/>{% endblock %}</span></pre><h1 id="424e" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">第4/4步:干燥普通的小块</h1><p id="e6e0" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">您可能会注意到，两个模板中存在相同的巨型表单。几乎一半的代码是它。因为这个表单在两个模板中被重用，所以让我们把它放在一个任何模板都可以包含它的地方。</p><p id="0c67" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在<strong class="jf hj">模板</strong>文件夹中创建文件夹<strong class="jf hj"> advanced_forms </strong>。在<strong class="jf hj"> advanced_forms </strong>文件夹中，创建一个<strong class="jf hj">general _ elements _ form . html</strong>，如下图所示。</p><figure class="kw kx ky kz fd la"><div class="bz dy l di"><div class="lh li l"/></div></figure><p id="de01" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">删除<strong class="jf hj">landing.html</strong>和<strong class="jf hj">index.html</strong>中多余的表格代码。使用{ % include ' advanced _ forms/general _ elements _ form . html“% }”包含表单。随着它的建立，这里是最终的结果。</p><figure class="kw kx ky kz fd la"><div class="bz dy l di"><div class="lh li l"/></div></figure><p id="6ce2" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">现在，让我们重新启动项目。屏幕上没有变化。但是在后台，项目变得更容易维护。努力是值得的。</p><p id="c460" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这是我们完成增强后的文件模式快照。我用黄色突出显示了模板。</p><figure class="kw kx ky kz fd la er es paragraph-image"><div class="er es lt"><img src="../Images/1f1181927c98fb557aa137b30986e8cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:634/format:webp/1*SnH32pyTLvxPV0NRzGhcbw.png"/></div></figure><p id="5895" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我已经在这里上传了最终项目。<a class="ae kg" href="https://github.com/slow999/DjangoAndTemplates" rel="noopener ugc nofollow" target="_blank">https://github.com/slow999/DjangoAndTemplates</a>。</p><p id="8f1b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我在这个教程里用的乱七八糟的项目就上传到这里。<a class="ae kg" href="https://github.com/slow999/DjangoAndBadTemplatesDesign" rel="noopener ugc nofollow" target="_blank">https://github.com/slow999/DjangoAndBadTemplatesDesign</a>。</p><p id="308e" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我还做了一个视频。看看这里。</p><figure class="kw kx ky kz fd la"><div class="bz dy l di"><div class="lu li l"/></div></figure><h1 id="b869" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">结论</h1><p id="57b3" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">模板是web应用的核心部分之一。不要重复自己(干)。我已经参与并领导了大量的项目，我相信这个原则适用于前端和后端开发，这样我们就可以开发出可扩展的应用程序。希望这篇教程能回答你的问题，帮助你的项目成长。敬请关注。</p></div></div>    
</body>
</html>