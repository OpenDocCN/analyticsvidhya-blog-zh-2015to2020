<html>
<head>
<title>Bank Data EDA: Step By Step</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">银行数据 EDA:循序渐进</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/bank-data-eda-step-by-step-67a61a7f1122?source=collection_archive---------8-----------------------#2020-08-17">https://medium.com/analytics-vidhya/bank-data-eda-step-by-step-67a61a7f1122?source=collection_archive---------8-----------------------#2020-08-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/a9a25906f80dca66ccadf9827ee12988.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0HKySgmQAjfsXr41Ud1Arg.jpeg"/></div></div></figure><p id="5ee6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些银行数据是从<a class="ae jo" href="https://www.kaggle.com/zaurbegiev/my-dataset#credit_train.csv" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>中检索的，将会有一个从 EDA(探索性数据分析)到机器学习算法如何处理数据集的分解。</p><h2 id="66ff" class="jp jq hi bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">步骤:</h2><ol class=""><li id="56a4" class="kk kl hi is b it km ix kn jb ko jf kp jj kq jn kr ks kt ku bi translated">变量和数据类型的标识</li><li id="3d52" class="kk kl hi is b it kv ix kw jb kx jf ky jj kz jn kr ks kt ku bi translated">分析基本指标</li><li id="ccff" class="kk kl hi is b it kv ix kw jb kx jf ky jj kz jn kr ks kt ku bi translated">非图形单变量分析</li><li id="15d8" class="kk kl hi is b it kv ix kw jb kx jf ky jj kz jn kr ks kt ku bi translated">图形单变量分析</li><li id="75bd" class="kk kl hi is b it kv ix kw jb kx jf ky jj kz jn kr ks kt ku bi translated">双变量分析</li><li id="93ca" class="kk kl hi is b it kv ix kw jb kx jf ky jj kz jn kr ks kt ku bi translated">相关分析</li></ol><h2 id="53f1" class="jp jq hi bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">数据集:</h2><p id="8662" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb la jd je jf lb jh ji jj lc jl jm jn hb bi translated">将要使用的数据集来自<a class="ae jo" href="https://www.kaggle.com/zaurbegiev/my-dataset#credit_train.csv" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>。该数据集是一个银行贷款数据集，目标是能够检测某人是否会全额支付或冲销其贷款。</p><p id="304e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">数据集由 100，000 行和 19 列组成。预测值(因变量)将是“贷款状态”，特征(自变量)将是剩余的列。</p><h2 id="b07f" class="jp jq hi bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">变量标识:</h2><figure class="le lf lg lh fd ij er es paragraph-image"><div class="er es ld"><img src="../Images/4a1588e8e75e38a2b77b0ed37b956da0.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/format:webp/1*gvd9LCKxwxJm0N5Ykf6p9A.png"/></div></figure><p id="eaee" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第一步是确定我们在数据集中处理什么类型的变量。</p><pre class="le lf lg lh fd li lj lk ll aw lm bi"><span id="0445" class="jp jq hi lj b fi ln lo l lp lq">df.head()</span></pre><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/fe5de2c1c21b0c68fe982358b8eac542.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L8MRjLdOR7baiKMkfEX9Zg.png"/></div></div></figure><p id="9b8b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以看到，在我们的数据集中有一些数字和字符串(对象)数据类型。但是可以肯定的是，你可以用:</p><pre class="le lf lg lh fd li lj lk ll aw lm bi"><span id="8242" class="jp jq hi lj b fi ln lo l lp lq">df.info()  # Shows data types for each column</span></pre><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/d553066a6fff863f26354f842e8dfd0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wIIxaaw_L5yGdyamcqXr6Q.png"/></div></div></figure><p id="e58b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将为您提供有关变量的进一步信息，帮助您找出需要更改的内容，以便帮助您的机器学习算法能够解释您的数据。</p><h2 id="051a" class="jp jq hi bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">分析基本指标</h2><p id="346b" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb la jd je jf lb jh ji jj lc jl jm jn hb bi translated">这很简单，只需使用:</p><pre class="le lf lg lh fd li lj lk ll aw lm bi"><span id="459f" class="jp jq hi lj b fi ln lo l lp lq">df.describe().T</span></pre><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ls"><img src="../Images/bcd4052a630c6cffb913220c33b4ef08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iCdd7yZiX5wv5aLiVX3vlw.png"/></div></div></figure><p id="cd24" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这允许您查看某些指标，例如:</p><ol class=""><li id="7926" class="kk kl hi is b it iu ix iy jb lt jf lu jj lv jn kr ks kt ku bi translated">计数—该列中值的数量</li><li id="c442" class="kk kl hi is b it kv ix kw jb kx jf ky jj kz jn kr ks kt ku bi translated">平均值。该列中的值</li><li id="90b8" class="kk kl hi is b it kv ix kw jb kx jf ky jj kz jn kr ks kt ku bi translated">STD(标准偏差)-您的值的分布情况</li><li id="306e" class="kk kl hi is b it kv ix kw jb kx jf ky jj kz jn kr ks kt ku bi translated">最小值—该列中的最小值</li><li id="a8e2" class="kk kl hi is b it kv ix kw jb kx jf ky jj kz jn kr ks kt ku bi translated">25% 50% 70%—百分位</li><li id="7562" class="kk kl hi is b it kv ix kw jb kx jf ky jj kz jn kr ks kt ku bi translated">Max —该列中的最高值</li></ol><p id="2d0a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从这里您可以确定您的值是什么样的，并且您可以检测是否有任何异常值。</p><p id="9b75" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从做。describe()方法，可以看到在当前贷款额、信用评分、年收入和最大开放信用中存在一些令人关注的异常值。</p><h2 id="437f" class="jp jq hi bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">非图形单变量分析</h2><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ls"><img src="../Images/92e72d90e76a13ad2329e6cf7383e0e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bu5DoFrXE7QzwYoulvvw-A.png"/></div></div></figure><p id="faf7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">单变量分析是指查看列中的统计数据。</p><p id="6629" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个可以简单到做 df【专栏】。unique()或 df[列]。value_counts()。你试图从变量中获取尽可能多的信息。</p><p id="e93a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您还想找到您的空值</p><pre class="le lf lg lh fd li lj lk ll aw lm bi"><span id="9931" class="jp jq hi lj b fi ln lo l lp lq">df.isna().sum()</span></pre><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lw"><img src="../Images/319ef2eb66541ab814cfed71853db0e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ilpIcNN3pr9ANqwqbT7OTQ.png"/></div></div></figure><p id="08a3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将向您显示每一列中 null 值的数量，并且在我们的数据集中有大量的缺失值。在进行图形单变量分析时，我们将进一步研究缺失值。</p><h2 id="97b0" class="jp jq hi bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">图形单变量分析</h2><p id="cd40" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb la jd je jf lb jh ji jj lc jl jm jn hb bi translated">这是我们用图表来看变量的时候。</p><p id="fded" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以使用条形图来查看缺失的值:</p><pre class="le lf lg lh fd li lj lk ll aw lm bi"><span id="e528" class="jp jq hi lj b fi ln lo l lp lq">fig, ax = plt.subplots(figsize=(15, 5))</span><span id="0b26" class="jp jq hi lj b fi lx lo l lp lq">x = df.isna().sum().index<br/>y = df.isna().sum()<br/>ax.bar(x=x, height=y)<br/>ax.set_xticklabels(x, rotation = 45)<br/>plt.tight_layout();</span></pre><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ly"><img src="../Images/9db00af576eb050db06128fcdd2d10eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*guz44JyLv5MWZKuBHkqD0g.png"/></div></div></figure><p id="bfa5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">跳过缺失值，我们还可以使用直方图来查看特征的分布。</p><pre class="le lf lg lh fd li lj lk ll aw lm bi"><span id="feab" class="jp jq hi lj b fi ln lo l lp lq">df["Years of Credit History"].hist(bins=200)</span></pre><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/5559efbb44d37955b16cd311cc8f066c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nb7NyOG3PzXbbRwVzMncFg.png"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx translated">信用历史年直方图</figcaption></figure><p id="d775" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从这个直方图中，您可以通过查看是左倾斜还是右倾斜来检测是否有异常值，我们看到的是轻微的右倾斜。</p><p id="8584" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">理想情况下，我们希望每个特征的直方图尽可能接近正态分布。</p><pre class="le lf lg lh fd li lj lk ll aw lm bi"><span id="1a8a" class="jp jq hi lj b fi ln lo l lp lq"># Checking credit score<br/>df["Credit Score"].hist(bins=30)</span></pre><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/ba2d3379ec6e6dc55418b0ec7f860765.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1hw8H8Gr_JeV6JfLyw2Ryw.png"/></div></div></figure><p id="c1d8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当我们对信用评分做同样的事情时，我们可以看到有一个巨大的右偏，剩下的数以千计。这是非常令人担忧的，因为对于我们的数据集，信用评分应该在 850 上限。</p><p id="04eb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们仔细看看:</p><pre class="le lf lg lh fd li lj lk ll aw lm bi"><span id="00e2" class="jp jq hi lj b fi ln lo l lp lq"># Rows with a credit score greater than 850, U.S. highest credit score.<br/>df.loc[df["Credit Score"] &gt; 850]</span></pre><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/d1638992d68416585115fb327470d484.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xq4xa-W5qNCoHmVXLcBMzg.png"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx translated">使用 loc 方法查看信用评分高于 850 的行</figcaption></figure><p id="daaa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用 loc 方法时，您可以看到信用评分大于 850 的所有行。我们可以看到这可能是人为错误，因为在值的末尾添加了 0。一旦我们开始处理数据，这将是一个简单的解决办法。</p><p id="2000" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">另一种检测异常值的方法是使用箱线图和散点图。</p><pre class="le lf lg lh fd li lj lk ll aw lm bi"><span id="c9fe" class="jp jq hi lj b fi ln lo l lp lq">fig, ax = plt.subplots(4, 3)</span><span id="a620" class="jp jq hi lj b fi lx lo l lp lq"># Setting height and width of subplots<br/>fig.set_figheight(15)<br/>fig.set_figwidth(30)</span><span id="f671" class="jp jq hi lj b fi lx lo l lp lq"># Adding spacing between boxes<br/>fig.tight_layout(h_pad=True, w_pad=True)</span><span id="dcf1" class="jp jq hi lj b fi lx lo l lp lq">sns.boxplot(bank_df["Number of Open Accounts"], ax=ax[0, 0])<br/>sns.boxplot(bank_df["Current Loan Amount"], ax=ax[0, 1])<br/>sns.boxplot(bank_df["Monthly Debt"], ax=ax[0, 2])<br/>sns.boxplot(bank_df["Years of Credit History"], ax=ax[1, 0])<br/>sns.boxplot(bank_df["Months since last delinquent"], ax=ax[1, 1])<br/>sns.boxplot(bank_df["Number of Credit Problems"], ax=ax[1, 2])<br/>sns.boxplot(bank_df["Current Credit Balance"], ax=ax[2, 0])<br/>sns.boxplot(bank_df["Maximum Open Credit"], ax=ax[2, 1])<br/>sns.boxplot(bank_df["Bankruptcies"], ax=ax[2, 2])<br/>sns.boxplot(bank_df["Tax Liens"], ax=ax[3, 0])</span><span id="1274" class="jp jq hi lj b fi lx lo l lp lq">plt.show()</span></pre><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mf"><img src="../Images/ab79ab1b9fe9d73da83b22827925dd30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_uN-1Kw14sINALJnb3TjNA.png"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx translated">所有数字列的箱线图</figcaption></figure><pre class="le lf lg lh fd li lj lk ll aw lm bi"><span id="7c70" class="jp jq hi lj b fi ln lo l lp lq">fig, ax = plt.subplots(4, 3)</span><span id="470f" class="jp jq hi lj b fi lx lo l lp lq"># Setting height and width of subplots<br/>fig.set_figheight(15)<br/>fig.set_figwidth(30)</span><span id="c706" class="jp jq hi lj b fi lx lo l lp lq"># Adding spacing between boxes<br/>fig.tight_layout(h_pad=True, w_pad=True)</span><span id="4d29" class="jp jq hi lj b fi lx lo l lp lq">sns.scatterplot(data=bank_df["Number of Open Accounts"], ax=ax[0, 0])<br/>sns.scatterplot(data=bank_df["Current Loan Amount"], ax=ax[0, 1])<br/>sns.scatterplot(data=bank_df["Monthly Debt"], ax=ax[0, 2])<br/>sns.scatterplot(data=bank_df["Years of Credit History"], ax=ax[1, 0])<br/>sns.scatterplot(data=bank_df["Months since last delinquent"], ax=ax[1, 1])<br/>sns.scatterplot(data=bank_df["Number of Credit Problems"], ax=ax[1, 2])<br/>sns.scatterplot(data=bank_df["Current Credit Balance"], ax=ax[2, 0])<br/>sns.scatterplot(data=bank_df["Maximum Open Credit"], ax=ax[2, 1])<br/>sns.scatterplot(data=bank_df["Bankruptcies"], ax=ax[2, 2])<br/>sns.scatterplot(data=bank_df["Tax Liens"], ax=ax[3, 0])</span><span id="6d62" class="jp jq hi lj b fi lx lo l lp lq">plt.show()</span></pre><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mf"><img src="../Images/f075b529fd4555641e7068b1c4232e96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EcPWBaSgErqbqEF8o3yN8g.png"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx translated">数字数据的散点图</figcaption></figure><h2 id="0462" class="jp jq hi bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">相关分析</h2><p id="1273" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb la jd je jf lb jh ji jj lc jl jm jn hb bi translated">相关性是指你想检测一个变量对另一个变量的反应。您不想要的是多重共线性，为此，您可以使用:</p><pre class="le lf lg lh fd li lj lk ll aw lm bi"><span id="e909" class="jp jq hi lj b fi ln lo l lp lq"># Looking at mulitcollinearity<br/>sns.heatmap(df.corr())</span></pre><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mg"><img src="../Images/279714f60557d9e12c86b649dee1db01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UzGsPNhbSSFfRqftmUWSww.png"/></div></div></figure></div></div>    
</body>
</html>