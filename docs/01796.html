<html>
<head>
<title>IoT: OpenCV 4.1 on ODROID-XU4</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">IoT:ODROID-XU4上的OpenCV 4.1</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/iot-opencv-4-1-on-odroid-xu4-8a14d395f191?source=collection_archive---------7-----------------------#2019-11-14">https://medium.com/analytics-vidhya/iot-opencv-4-1-on-odroid-xu4-8a14d395f191?source=collection_archive---------7-----------------------#2019-11-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="f05a" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">如何在ODROID-XU4平台上，在Ubuntu 18.04.3 LTS(仿生海狸配Python 3.6.8)上编译安装OpenCV 4.1.2？</h2></div><p id="87a7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">你可以在我的Github库上看到下面的脚本:</em>【https://github.com/zmacario/OpenCV-4.1-on-ODROID-XU4 T2】</p><h2 id="1cf4" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jg kg kh ki jk kj kk kl jo km kn ko kp bi translated">1.首先，在Linux终端上使用以下命令更新您的系统:</h2><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="ca89" class="jv jw hi kv b fi kz la l lb lc"><strong class="kv hj">sudo apt update</strong></span><span id="576a" class="jv jw hi kv b fi ld la l lb lc"><strong class="kv hj">sudo apt upgrade</strong></span></pre><h2 id="dc9d" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jg kg kh ki jk kj kk kl jo km kn ko kp bi translated">2.安装这些工具:</h2><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="f9c5" class="jv jw hi kv b fi kz la l lb lc"><strong class="kv hj">sudo apt -y install build-essential cmake gfortran pkg-config unzip software-properties-common doxygen</strong></span></pre><h2 id="d181" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jg kg kh ki jk kj kk kl jo km kn ko kp bi translated">3.使用以下软件更新/安装Python、Pip和Numpy:</h2><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="16d7" class="jv jw hi kv b fi kz la l lb lc"><strong class="kv hj">sudo apt -y install python-dev python-pip python3-dev python3-pip python3-testresources</strong></span><span id="9311" class="jv jw hi kv b fi ld la l lb lc"><strong class="kv hj">sudo apt -y install python-numpy python3-numpy</strong></span></pre><h2 id="f221" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jg kg kh ki jk kj kk kl jo km kn ko kp bi translated">4.安装大量保证或增加OpenCV特性的东西:</h2><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="0463" class="jv jw hi kv b fi kz la l lb lc"><strong class="kv hj">sudo apt -y install libblas-dev libblas-test liblapack-dev libatlas-base-dev libopenblas-base libopenblas-dev</strong></span><span id="e9dd" class="jv jw hi kv b fi ld la l lb lc"><strong class="kv hj">sudo apt -y install libjpeg-dev libpng-dev libtiff-dev libavcodec-dev libavformat-dev libswscale-dev libv4l-dev</strong></span><span id="b3f4" class="jv jw hi kv b fi ld la l lb lc"><strong class="kv hj">sudo apt -y install libxvidcore-dev libx264-dev</strong></span><span id="6d5b" class="jv jw hi kv b fi ld la l lb lc"><strong class="kv hj">sudo apt -y install libgtk2.0-dev libgtk-3-dev libcanberra-gtk*</strong></span><span id="6f2b" class="jv jw hi kv b fi ld la l lb lc"><strong class="kv hj">sudo apt -y install libtiff5-dev libeigen3-dev libtheora-dev <br/>libvorbis-dev sphinx-common libtbb-dev yasm libopencore-amrwb-dev</strong></span><span id="5846" class="jv jw hi kv b fi ld la l lb lc"><strong class="kv hj">sudo apt -y install libopenexr-dev libgstreamer-plugins-base1.0-dev libgstreamer1.0-dev libavutil-dev libavfilter-dev</strong></span><span id="4e30" class="jv jw hi kv b fi ld la l lb lc"><strong class="kv hj">sudo apt -y install libavresample-dev ffmpeg libdc1394-22-dev libwebp-dev</strong></span><span id="13b6" class="jv jw hi kv b fi ld la l lb lc"><strong class="kv hj">sudo apt -y install libjpeg8-dev libxine2-dev libfaac-dev libmp3lame-dev libopencore-amrnb-dev libprotobuf-dev</strong></span><span id="895f" class="jv jw hi kv b fi ld la l lb lc"><strong class="kv hj">sudo apt -y install protobuf-compiler libgoogle-glog-dev libgflags-dev libgphoto2-dev libhdf5-dev</strong></span><span id="5e43" class="jv jw hi kv b fi ld la l lb lc"><strong class="kv hj">sudo apt -y install qt5-default v4l-utils</strong></span><span id="6694" class="jv jw hi kv b fi ld la l lb lc"><strong class="kv hj">sudo apt -y install libtbb2</strong></span></pre><p id="3cb3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">耐心点，这需要很长时间……</em></p><h2 id="1c83" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jg kg kh ki jk kj kk kl jo km kn ko kp bi translated">5.从Ubuntu 16.04安装旧库(这是必要的):</h2><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="b8a1" class="jv jw hi kv b fi kz la l lb lc"><strong class="kv hj">sudo add-apt-repository "deb </strong><a class="ae ju" href="http://ports.ubuntu.com/ubuntu-ports" rel="noopener ugc nofollow" target="_blank"><strong class="kv hj">http://ports.ubuntu.com/ubuntu-ports</strong></a><strong class="kv hj"> xenial-security main"</strong></span><span id="b059" class="jv jw hi kv b fi ld la l lb lc"><strong class="kv hj">sudo apt -y update</strong></span><span id="456a" class="jv jw hi kv b fi ld la l lb lc"><strong class="kv hj">sudo apt -y install libjasper-dev libjasper</strong></span></pre><h2 id="1fbd" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jg kg kh ki jk kj kk kl jo km kn ko kp bi translated">6.创建一个文件夹来接收您(将来)编译的OpenCV 4.1.2包:</h2><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="d0cf" class="jv jw hi kv b fi kz la l lb lc"><strong class="kv hj">mkdir opencv_package</strong></span></pre><p id="24b3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你可以在任何你想要的地方创建这个文件夹，但是当你开始编译器配置步骤时，你必须记住它的完整路径。</p><p id="1349" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">观察:我在“/home/odroid/Desktop/”中执行的所有后续步骤(包括这一步)。</em></p><h2 id="9ad1" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jg kg kh ki jk kj kk kl jo km kn ko kp bi translated">7.下载官方OpenCV 4.1.2压缩源文件:</h2><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="4010" class="jv jw hi kv b fi kz la l lb lc"><strong class="kv hj">wget -O opencv.zip </strong><a class="ae ju" href="https://github.com/opencv/opencv/archive/4.1.2.zip" rel="noopener ugc nofollow" target="_blank"><strong class="kv hj">https://github.com/opencv/opencv/archive/4.1.2.zip</strong></a></span><span id="ff97" class="jv jw hi kv b fi ld la l lb lc"><strong class="kv hj">wget -O opencv_contrib.zip </strong><a class="ae ju" href="https://github.com/opencv/opencv_contrib/archive/4.1.2.zip" rel="noopener ugc nofollow" target="_blank"><strong class="kv hj">https://github.com/opencv/opencv_contrib/archive/4.1.2.zip</strong></a></span></pre><h2 id="8f50" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jg kg kh ki jk kj kk kl jo km kn ko kp bi translated">8.解压缩下载的源文件:</h2><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="1fd1" class="jv jw hi kv b fi kz la l lb lc"><strong class="kv hj">unzip opencv.zip</strong></span><span id="230a" class="jv jw hi kv b fi ld la l lb lc"><strong class="kv hj">unzip opencv_contrib.zip</strong></span></pre><h2 id="75e5" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jg kg kh ki jk kj kk kl jo km kn ko kp bi translated">9.为了方便起见，重命名解压缩的文件夹:</h2><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="de4f" class="jv jw hi kv b fi kz la l lb lc"><strong class="kv hj">mv opencv-4.1.2 opencv</strong></span><span id="fae7" class="jv jw hi kv b fi ld la l lb lc"><strong class="kv hj">mv opencv_contrib-4.1.2 opencv_contrib</strong></span></pre><h2 id="fb2c" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jg kg kh ki jk kj kk kl jo km kn ko kp bi translated">10.进入解压后的OpenCV源文件夹，创建一个编译器应该使用的临时工作文件夹:</h2><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="b075" class="jv jw hi kv b fi kz la l lb lc"><strong class="kv hj">cd opencv</strong></span><span id="31a8" class="jv jw hi kv b fi ld la l lb lc"><strong class="kv hj">mkdir build</strong></span><span id="b758" class="jv jw hi kv b fi ld la l lb lc"><strong class="kv hj">cd build</strong></span></pre><h2 id="3e78" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jg kg kh ki jk kj kk kl jo km kn ko kp bi translated">11.使用以下命令配置编译器:</h2><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="c853" class="jv jw hi kv b fi kz la l lb lc"><strong class="kv hj">cmake -D CMAKE_BUILD_TYPE=RELEASE \<br/>-D CMAKE_INSTALL_PREFIX=/usr/local \<br/>-D OPENCV_ENABLE_NONFREE=ON \<br/>-D OPENCV_EXTRA_MODULES_PATH=/home/odroid/Desktop/opencv_contrib/modules \<br/>-D PYTHON_EXECUTABLE=/usr/bin/python3.6 \<br/>-D PYTHON2_EXECUTABLE=/usr/bin/python2.7 \<br/>-D PYTHON3_EXECUTABLE=/usr/bin/python3.6 \<br/>-D PYTHON_PACKAGES_PATH=/usr/lib/python3/dist-packages \<br/>-D PYTHON_LIBRARY=/usr/lib/python3.6/config-3.6m-arm-linux-gnueabihf/libpython3.6m.so \<br/>-D PYTHON_INCLUDE_DIR=/usr/include/python3.6 \<br/>-D PYTHON3_NUMPY_INCLUDE_DIRS=/usr/lib/python3/dist-packages/numpy/core/include \<br/>-D OPENCV_GENERATE_PKGCONFIG=ON \<br/>-D OPENCV_PYTHON3_INSTALL_PATH=/home/odroid/Desktop/opencv_package \<br/>-D INSTALL_PYTHON_EXAMPLES=OFF \<br/>-D INSTALL_C_EXAMPLES=OFF \<br/>-D BUILD_DOCS=NO \<br/>-D BUILD_TIFF=ON \<br/>-D WITH_FFMPEG=ON \<br/>-D WITH_GSTREAMER=ON \<br/>-D WITH_TBB=ON \<br/>-D BUILD_TBB=ON \<br/>-D WITH_V4L=ON \<br/>-D WITH_LIBV4L=ON \<br/>-D WITH_VTK=OFF \<br/>-D WITH_OPENGL=ON \<br/>-D BUILD_NEW_PYTHON_SUPPORT=ON \<br/>-D BUILD_TESTS=OFF \<br/>-D BUILD_EXAMPLES=OFF ..</strong></span></pre><p id="9ae4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">观察:我决定显式启用我目前所知的所有OpenCV特性，并排除其所有文档和示例。</em></p><h2 id="0989" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jg kg kh ki jk kj kk kl jo km kn ko kp bi translated">12.开始编译:</h2><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="f24f" class="jv jw hi kv b fi kz la l lb lc"><strong class="kv hj">make -j4</strong></span></pre><p id="c972" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">观察:由于ODROID-XU4有8个内核，您将使用其中的一半，并带有“-j4”参数。</em></p><p id="143d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，再耐心点！编译需要很长时间… </p><h2 id="9f42" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jg kg kh ki jk kj kk kl jo km kn ko kp bi translated">13.最后安装编译好的OpenCV 4.1.2:</h2><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="07bb" class="jv jw hi kv b fi kz la l lb lc"><strong class="kv hj">sudo make install</strong></span><span id="532d" class="jv jw hi kv b fi ld la l lb lc"><strong class="kv hj">sudo ldconfig</strong></span><span id="73f0" class="jv jw hi kv b fi ld la l lb lc"><strong class="kv hj">sudo apt update</strong></span></pre><h1 id="d999" class="le jw hi bd jx lf lg lh kb li lj lk kf io ll ip ki ir lm is kl iu ln iv ko lo bi translated">最后的考虑:</h1><p id="7a06" class="pw-post-body-paragraph ix iy hi iz b ja lp ij jc jd lq im jf jg lr ji jj jk ls jm jn jo lt jq jr js hb bi translated"><em class="jt">在编译结束时，创建的真正重要的二进制对象将是位于“opencv_package”文件夹中的“cv2 . cpython-36m-arm-Linux-gnueabihf . so”。不要删！</em></p><p id="cb44" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt"> Odroid XU4厂商官方链接供Ubuntu下载我用:</em><a class="ae ju" href="https://odroid.in/ubuntu_18.04lts/XU3_XU4_MC1_HC1_HC2/ubuntu-18.04.3-4.14-mate-odroid-xu4-20190929.img.xz" rel="noopener ugc nofollow" target="_blank"><em class="jt">https://Odroid . in/Ubuntu _ 18.04 lts/XU3 _ XU4 _ MC1 _ HC1 _ HC2/Ubuntu-18 . 04 . 3-4.14-mate-Odroid-XU4-2019 09 29 . img . xz</em></a></p><p id="71b3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">不要忘记分别删除/移除您在步骤7至10中下载或创建的临时文件和文件夹。</p><p id="850b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">使用以下命令清理您的系统:</em></p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="1d90" class="jv jw hi kv b fi kz la l lb lc"><strong class="kv hj">sudo apt autoremove</strong></span><span id="57fa" class="jv jw hi kv b fi ld la l lb lc"><strong class="kv hj">sudo apt clean</strong></span></pre></div></div>    
</body>
</html>