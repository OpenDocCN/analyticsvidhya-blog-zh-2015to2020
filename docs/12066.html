<html>
<head>
<title>Exploratory Data Analysis of Titanic Survival Problem</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">泰坦尼克号生存问题的探索性数据分析</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/exploratory-data-analysis-of-titanic-survival-problem-e3af0fb1f276?source=collection_archive---------1-----------------------#2020-12-30">https://medium.com/analytics-vidhya/exploratory-data-analysis-of-titanic-survival-problem-e3af0fb1f276?source=collection_archive---------1-----------------------#2020-12-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="f713" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">第一部分—分析、清洁和可视化</h2></div><p id="2499" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">EDA 是一种统计方法，用于在建立假设或建模之前可视化和分析数据。</p><p id="04fd" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是我的数据科学入门系列的第一部分。</p><ul class=""><li id="8049" class="jt ju hi iz b ja jb jd je jg jv jk jw jo jx js jy jz ka kb bi translated">第一部分——埃达论泰坦尼克号的生存问题</li><li id="deac" class="jt ju hi iz b ja kc jd kd jg ke jk kf jo kg js jy jz ka kb bi translated"><a class="ae kh" href="https://vrevathi.medium.com/exploratory-data-analysis-of-iowa-housing-price-prediction-problem-3d50a016797a" rel="noopener">第二部分——爱荷华州房价预测 EDA</a></li><li id="1000" class="jt ju hi iz b ja kc jd kd jg ke jk kf jo kg js jy jz ka kb bi translated"><a class="ae kh" href="https://vrevathi.medium.com/modeling-evaluation-and-ensembling-f00fe1de6470" rel="noopener">第三部分——模型构建、评估和组装</a></li></ul><p id="cf54" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这篇文章中，我们将探索来自 Kaggle 的<a class="ae kh" href="https://www.kaggle.com/c/titanic" rel="noopener ugc nofollow" target="_blank">泰坦尼克号——灾难中的机器学习</a>竞赛。我在这篇博客中总结了我的分析和见解。github 上有一个详细的笔记本，包含了对泰坦尼克号数据的全面研究。</p><h1 id="9b65" class="ki kj hi bd kk kl km kn ko kp kq kr ks io kt ip ku ir kv is kw iu kx iv ky kz bi translated">目录</h1><ol class=""><li id="4cb4" class="jt ju hi iz b ja la jd lb jg lc jk ld jo le js lf jz ka kb bi translated"><a class="ae kh" href="#616a" rel="noopener ugc nofollow">变量研究</a></li><li id="1059" class="jt ju hi iz b ja kc jd kd jg ke jk kf jo kg js lf jz ka kb bi translated"><a class="ae kh" href="#534e" rel="noopener ugc nofollow">数据清理</a></li><li id="425c" class="jt ju hi iz b ja kc jd kd jg ke jk kf jo kg js lf jz ka kb bi translated"><a class="ae kh" href="#a8da" rel="noopener ugc nofollow">特征工程</a></li><li id="4087" class="jt ju hi iz b ja kc jd kd jg ke jk kf jo kg js lf jz ka kb bi translated"><a class="ae kh" href="#6b20" rel="noopener ugc nofollow">相关性研究</a></li><li id="7b72" class="jt ju hi iz b ja kc jd kd jg ke jk kf jo kg js lf jz ka kb bi translated"><a class="ae kh" href="#0d81" rel="noopener ugc nofollow">目标变量分析(单变量分析)</a></li><li id="70d0" class="jt ju hi iz b ja kc jd kd jg ke jk kf jo kg js lf jz ka kb bi translated"><a class="ae kh" href="#50b6" rel="noopener ugc nofollow">双变量分析</a></li><li id="53ae" class="jt ju hi iz b ja kc jd kd jg ke jk kf jo kg js lf jz ka kb bi translated"><a class="ae kh" href="#bc31" rel="noopener ugc nofollow">多元分析</a></li></ol><h1 id="616a" class="ki kj hi bd kk kl km kn ko kp kq kr ks io kt ip ku ir kv is kw iu kx iv ky kz bi translated">变量研究</h1><p id="9ef7" class="pw-post-body-paragraph ix iy hi iz b ja la ij jc jd lb im jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">首先，我们将导入必要的包并加载数据集。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="cd69" class="ls kj hi lo b fi lt lu l lv lw">import pandas as pd<br/>import numpy as np<br/>import seaborn as sns<br/>import matplotlib.pyplot as plt</span><span id="476a" class="ls kj hi lo b fi lx lu l lv lw">df = pd.read_csv('../data/titanic-train.csv')<br/>df</span></pre><figure class="lj lk ll lm fd lz er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es ly"><img src="../Images/beb253077e47b025541801ed0cf619dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sJbeXDhzrfQTWro2dzV5ew.png"/></div></div></figure><p id="6ca3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">以上是泰坦尼克号生存问题的训练数据集。它有 891 行(乘客数量)，12 列(关于乘客的数据)，包括目标变量“<em class="mg">幸存</em>”。</p><p id="3948" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们首先查看数据的列，然后我们使用<em class="mg"> describe() </em>和<em class="mg"> info() </em>方法来了解我们手头的基本信息。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="1cd0" class="ls kj hi lo b fi lt lu l lv lw">cols = df.columns<br/>cols</span></pre><figure class="lj lk ll lm fd lz er es paragraph-image"><div class="er es mh"><img src="../Images/9eda1792fef1eff5096c99e3b95f267f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*keLTPtpIRwv_vO6djaRAWQ.png"/></div></figure><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="8be2" class="ls kj hi lo b fi lt lu l lv lw">df.describe()</span></pre><figure class="lj lk ll lm fd lz er es paragraph-image"><div class="er es mi"><img src="../Images/e9b857d2a27f7820a0e7921c1f62583c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*J2tDG3eKNtnLfzY6bux9-A.png"/></div></figure><p id="6a63" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们逐行查看数据并尝试理解。</p><p id="1076" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">计数:</strong>第一行“计数”是特定列“PassengerID”中的条目数。它显示 891(等于乘客人数)，这意味着“乘客 ID”适用于所有乘客。除了“年龄”，每个乘客的所有其他数据都可用。我们得做点什么来修复“年龄”栏中缺失的值。</p><p id="0202" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">平均值:</strong>所有数据的平均值。让我们考虑“票价”一栏。乘客的平均“票价”是 32.20 美元</p><p id="ac38" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> Std: </strong>所有数据的标准差。低标准差意味着大多数数字接近平均值，而高标准差意味着数字更加分散。“票价”也有很高的标准差。</p><p id="e291" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> Min: </strong>列的最小值。例如，最低的“票价”显示为 0 美元，这意味着“票价”不适用于某些乘客。对于某些乘客来说，该模型在 0 的情况下可能表现不佳。因此，在建模之前，我们需要关注“Fare”列。</p><p id="d027" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> Max: </strong>列的最大值。例如，最高的“票价”显示为 512.33 美元。“票价”一栏的平均值是 32.20 美元。我们看到票价差别很大。这可能是因为他们旅行的“阶级”。</p><p id="10b9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> 25%、50%&amp;75%</strong>数据的第一、第二和第三四分位数。统计学中的四分位数是一种分位数，它将有序数据点的数量分成四个相等的组。第一个四分位数是最小数和中位数之间的中间数。第二个四分位数是数据集的中位数。第三个四分位数是中间值和最高值之间的中间值。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="4ac3" class="ls kj hi lo b fi lt lu l lv lw">df.info()</span></pre><figure class="lj lk ll lm fd lz er es paragraph-image"><div class="er es mj"><img src="../Images/1448ec8ef9751cd34e487c4339d82d23.png" data-original-src="https://miro.medium.com/v2/resize:fit:758/format:webp/1*vwoHJOLXleMHJhlr6RMI3A.png"/></div></figure><p id="e867" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用<em class="mg"> info() </em>方法，我们获得数据集的 dtypes、非空计数和内存使用情况。要获得数据的总空值，我们必须使用<em class="mg"> isnull() </em>方法。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="ef59" class="ls kj hi lo b fi lt lu l lv lw">df.isnull().sum()</span></pre><figure class="lj lk ll lm fd lz er es paragraph-image"><div class="er es mk"><img src="../Images/dcb059cb62def153e7f28cd4e326d486.png" data-original-src="https://miro.medium.com/v2/resize:fit:360/format:webp/1*YU-C8ZU0YXyIYAFY6bnFdw.png"/></div></figure><p id="9f9c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们已经知道年龄列中有 177 个缺失值。从上面的结果中，我们看到‘Cabin’中有 687 个缺失值，而‘Embarked’中有 2 个缺失值。在继续建模之前，我们需要修复这些空值。</p><p id="4199" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在让我们看看空值的热图。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="573d" class="ls kj hi lo b fi lt lu l lv lw">sns.heatmap(df.isnull(), cmap = 'viridis', cbar=False)</span></pre><figure class="lj lk ll lm fd lz er es paragraph-image"><div class="er es ml"><img src="../Images/91b9218a8afb7ca242b63ef1009175a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:854/format:webp/1*FoCX2MdwbSt7bm137WvFsw.png"/></div></figure><p id="db0b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因为‘apollowed’列只有 2 个空值，所以它在热图中不可见。</p><h1 id="534e" class="ki kj hi bd kk kl km kn ko kp kq kr ks io kt ip ku ir kv is kw iu kx iv ky kz bi translated">数据清理</h1><p id="2560" class="pw-post-body-paragraph ix iy hi iz b ja la ij jc jd lb im jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">因为“小屋”列有更多的<em class="mg"> NaN </em>值，所以让我们先修复它。客舱一栏有乘客的客舱号码，没有客舱号码的乘客可填写<em class="mg"> NaN </em>。让我们创建一个新列“HasCabin ”,如果有小屋，则该列为 1，对于<em class="mg"> NaN </em>，该列为 0。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="1ab2" class="ls kj hi lo b fi lt lu l lv lw">def create_feat_has_cabin(df, colname):<br/>    # if NA =&gt; 0 else 1<br/>    def _is_nan(x):<br/>        if isinstance(x, type(np.nan)):<br/>            return 0<br/>        return 1<br/>        <br/>    return df[colname].apply(_is_nan)<br/>    <br/>df['HasCabin'] = create_feat_has_cabin(df, 'Cabin')</span></pre><p id="a8e0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，让我们用‘S’(南安普顿)填充已装船列的 NA 值</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="c2f8" class="ls kj hi lo b fi lt lu l lv lw">def fill_na_embarked(df, colname):<br/>    <br/>    return df[colname].fillna('S')<br/>    <br/>df['Embarked'] = fill_na_embarked(df, 'Embarked')</span></pre><p id="3ae4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">同样，年龄列也有很多缺失值。因此，我们用以平均值为中心的随机值来填充缺失值，并以标准差<em class="mg"> sd </em>分布。让我们先得到平均值和标准差。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="f291" class="ls kj hi lo b fi lt lu l lv lw">mean = df['Age'].mean()<br/>sd = df['Age'].std()<br/>print(mean,sd)</span></pre><figure class="lj lk ll lm fd lz er es paragraph-image"><div class="er es mm"><img src="../Images/a403e4ea0fa1d8585034fca4784b95fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:604/format:webp/1*u94rOy6LSzzYxN7li03MHg.png"/></div></figure><p id="cd79" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">数据集的平均值为 29.48，数据集的标准偏差为 13.53。因此，我们通过选择 16 到 43 之间的一个随机数来填充缺失值。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="c166" class="ls kj hi lo b fi lt lu l lv lw">def fill_na_age(df, colname):<br/>    mean = df['Age'].mean()<br/>    sd = df['Age'].std()<br/>    def fill_empty(x):<br/>        if np.isnan(x):<br/>            return np.random.randint(mean-sd, mean+sd, ())<br/>        return x<br/>    return df[colname].apply(fill_empty).astype(int)</span><span id="7672" class="ls kj hi lo b fi lx lu l lv lw">df['Age'] = fill_na_age(df, 'Age')</span></pre><h1 id="a8da" class="ki kj hi bd kk kl km kn ko kp kq kr ks io kt ip ku ir kv is kw iu kx iv ky kz bi translated">特征工程</h1><p id="7a4b" class="pw-post-body-paragraph ix iy hi iz b ja la ij jc jd lb im jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">我们已经填充了数据中所有缺失的值。在这一部分中，我们戴上我们的创意帽子，想出可以帮助我们尚未构建的模型的性能的新功能。</p><p id="aef0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，让我们通过组合“SibSp”(兄弟姐妹和配偶)和“Parch”(父母和子女)来创建一个新列“FamilySize”。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="a30b" class="ls kj hi lo b fi lt lu l lv lw">def create_feat_familly_size(df):<br/>    return df['SibSp'] + df['Parch'] + 1<br/>    <br/>df['FamilySize'] = create_feat_familly_size(df)</span></pre><p id="f9d1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">好的完成了！</p><p id="f14c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">那些独自旅行的人呢？我们用 0 和 1 创建一个名为“IsAlone”的新列。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="1974" class="ls kj hi lo b fi lt lu l lv lw">def create_feat_isalone(df, colname):<br/>    def _is_alone(x):<br/>        if x==1:<br/>            return 1<br/>        return 0<br/>    <br/>    return df[colname].apply(_is_alone)<br/>    <br/>df['IsAlone'] = create_feat_isalone(df, 'FamilySize')</span></pre><p id="cd6e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">正如我们前面看到的，Fare 列包含一些乘客的 0 和一些乘客的众所周知的高值。因此，让我们将票价分为四类，并将其存储在新列“CategoricalFare”中</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="f5fb" class="ls kj hi lo b fi lt lu l lv lw">def create_feat_categoricalFare(df, colname):<br/>    return pd.qcut(df[colname], 4, labels = [0, 1, 2, 3]).astype(int)</span><span id="8b53" class="ls kj hi lo b fi lx lu l lv lw">df['CategoricalFare'] = create_feat_categoricalFare(df, 'Fare')</span></pre><p id="896a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们已经填补了年龄的缺失值。现在让我们将年龄分为 5 个类别，并将其存储到一个新列“CategoricalAge”中</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="6e21" class="ls kj hi lo b fi lt lu l lv lw">def create_feat_categoricalAge(df, colname):<br/>    return pd.qcut(df[colname], 5, labels = [0, 1, 2, 3, 4]).astype(int)</span><span id="1013" class="ls kj hi lo b fi lx lu l lv lw">df['CategoricalAge'] = create_feat_categoricalAge(df, 'Age')</span></pre><p id="e915" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">搞定了。</p><p id="d1d7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在让我们来看看名称列。我们有许多头衔['先生'，'夫人'，'小姐'，'主人'，'堂'，'牧师'，'博士'，'夫人'，'女士'，'少校'，'夫人'，'先生'，'女士'，'上校'，'上尉'，'伯爵夫人'，'琼基尔']。因此，让我们从每个名字中提取标题，并将标题分为四类，即先生、小姐、夫人和稀有，并将其存储在一个新列“title”中。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="fe35" class="ls kj hi lo b fi lt lu l lv lw">import re</span><span id="c404" class="ls kj hi lo b fi lx lu l lv lw">def create_feat_title(df, colname):<br/>    def find_title(x):<br/>        title_search = re.search(' ([A-Za-z]+)\.', x)<br/>        if title_search:<br/>            title = title_search.group(1)<br/>            if title in ['Mlle', 'Ms']:<br/>                return 'Miss'</span><span id="41e9" class="ls kj hi lo b fi lx lu l lv lw">elif title in ['Mme', 'Mrs']:<br/>                return 'Mrs'<br/>            elif title=='Mr':<br/>                return 'Mr'           <br/>            else:<br/>                return 'Rare'<br/>        return ""<br/>    <br/>    return_title= df[colname].apply(find_title)<br/>    dict_title = {'Miss': 1, 'Mrs':2, 'Mr':3, 'Rare':4}<br/>    return return_title.replace(dict_title)</span><span id="3dae" class="ls kj hi lo b fi lx lu l lv lw">df['Title'] = create_feat_title(df, 'Name')</span></pre><p id="ffec" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们将“男性”和“女性”的“性别”列值更改为 1 和 0，并将其存储在新列“性别数值”中。但是为什么呢？机器学习算法在数值域中运行。他们不理解“男性/女性”或“是/否”。但是他们明白 0 和 1 的区别。</p><p id="5d09" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">出于同样的原因，我们也可以将 apollowed 列的值改为 numerical。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="204c" class="ls kj hi lo b fi lt lu l lv lw">def create_feat_sex(df, colname):<br/>    def sex(x):<br/>        if x=='male':<br/>            return 1<br/>        return 0<br/>    <br/>    return df[colname].apply(sex)<br/>    <br/>df['SexNumerical'] = create_feat_sex(df, 'Sex')</span><span id="ea40" class="ls kj hi lo b fi lx lu l lv lw">df['Embarked'] = df.Embarked.replace({'S': 0, 'C' : 1, 'Q' : 2})</span></pre><p id="cf58" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">好了，我们完成了数据清理和特征工程。让我们检查一下数据框中是否还有空值。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="a32c" class="ls kj hi lo b fi lt lu l lv lw">df.isna().sum()</span></pre><figure class="lj lk ll lm fd lz er es paragraph-image"><div class="er es mn"><img src="../Images/813b8c778e4d619a42ddd5c13347edee.png" data-original-src="https://miro.medium.com/v2/resize:fit:424/format:webp/1*Lo4OGoOPToldixN_X1_jlQ.png"/></div></figure><p id="1cfd" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可以忽略 Cabin 中缺少的值，因为我们已经创建了一个新列“HasCabin”。是时候删除无用的列了。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="b57c" class="ls kj hi lo b fi lt lu l lv lw">drop_list = ['PassengerId', 'Cabin', 'Ticket', 'SibSp', 'Name']<br/>titanic = df.drop(drop_list, axis=1)</span></pre><h1 id="6b20" class="ki kj hi bd kk kl km kn ko kp kq kr ks io kt ip ku ir kv is kw iu kx iv ky kz bi translated">相关研究</h1><p id="0b48" class="pw-post-body-paragraph ix iy hi iz b ja la ij jc jd lb im jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">我们已经完成了数据清理和预处理。</p><p id="2f4c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在可视化数据之前，让我们看看变量之间的相关性。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="6bb4" class="ls kj hi lo b fi lt lu l lv lw">corrmat = titanic.corr()<br/>corrmat</span></pre><figure class="lj lk ll lm fd lz er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es mo"><img src="../Images/5e25157afee4c6e7299f9d5c76c2ae3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cu91W5bRLHbl069dm3ih_g.png"/></div></div></figure><p id="d27d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">正值和负值表示正相关和负相关。数据的第一行显示了每个变量与目标变量“存活”的相关性。</p><p id="01eb" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了建立一个好的预测模型，我们对影响目标变量“存活”的变量感兴趣。积极或消极。我们需要考虑过高和过低的值。</p><p id="43e4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们来看看使用惊人而简洁的<a class="ae kh" href="https://seaborn.pydata.org/" rel="noopener ugc nofollow" target="_blank"> seaborn </a>渲染的漂亮的关联热图。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="c8e0" class="ls kj hi lo b fi lt lu l lv lw">colormap = plt.cm.Blues<br/>plt.figure(figsize=(14,10))<br/>sns.heatmap(titanic.corr(), cmap=colormap, annot=True, linewidths=0.2)</span></pre><figure class="lj lk ll lm fd lz er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es mp"><img src="../Images/26a39e1a5f2bc22bfd4dd5ebf09dafc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tr0FeMb0Km8ggJ48KIKrbQ.png"/></div></div></figure><p id="4cbb" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">第一行包含代表每个变量与目标变量的相关性的值。“HasCabin”和“CategoricalFare”与目标变量高度(正)相关，而“Sex Numerical”与目标变量负相关。</p><h1 id="0d81" class="ki kj hi bd kk kl km kn ko kp kq kr ks io kt ip ku ir kv is kw iu kx iv ky kz bi translated">目标变量分析(单变量分析)</h1><p id="17ce" class="pw-post-body-paragraph ix iy hi iz b ja la ij jc jd lb im jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">目标变量的研究是揭示变量的性质和分布的数据分析中的一个重要步骤。让我们分析一下我们的目标变量“幸存”。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="5db9" class="ls kj hi lo b fi lt lu l lv lw">titanic['Survived'].value_counts()</span></pre><figure class="lj lk ll lm fd lz er es paragraph-image"><div class="er es mq"><img src="../Images/349ff4ad6462e377c428bcb5fd992adc.png" data-original-src="https://miro.medium.com/v2/resize:fit:548/format:webp/1*XzrncDdx7dJtNDpAyfWTFA.png"/></div></figure><p id="43b5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">根据上述结果，训练数据中的 891 名乘客中有 342 人幸存。让我们用计数图来绘制它。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="f4c7" class="ls kj hi lo b fi lt lu l lv lw">sns.countplot('Survived', data=titanic)<br/>plt.title("Titanic Survived")<br/>plt.show()</span></pre><figure class="lj lk ll lm fd lz er es paragraph-image"><div class="er es mr"><img src="../Images/d8e8ca6cfab598766ea596c4b281189a.png" data-original-src="https://miro.medium.com/v2/resize:fit:866/format:webp/1*C7BkVEmwg7rV1ovmVtWY9A.png"/></div></figure><p id="b6f7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从上面的情节来看，活下来的人比死了的人少。现在让我们用饼图来看看幸存乘客的百分比。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="ce03" class="ls kj hi lo b fi lt lu l lv lw">explode = [0, 0.05]<br/>titanic['Survived'].value_counts().plot.pie(autopct = '%1.2f%%', explode=explode)</span></pre><figure class="lj lk ll lm fd lz er es paragraph-image"><div class="er es ms"><img src="../Images/69a4605698a2640f59037b5e079e68b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:656/format:webp/1*Wm565hxruby8ieSU1_wgTg.png"/></div></figure><p id="e44f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从上面的图表可以看出，根据这一训练数据，只有 38%的乘客幸免于难。显然，各阶级之间不平衡。</p><h1 id="50b6" class="ki kj hi bd kk kl km kn ko kp kq kr ks io kt ip ku ir kv is kw iu kx iv ky kz bi translated">双变量分析</h1><p id="52c7" class="pw-post-body-paragraph ix iy hi iz b ja la ij jc jd lb im jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">让我们分析“Pclass”列，因为它与目标变量高度相关。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="7d38" class="ls kj hi lo b fi lt lu l lv lw">titanic['Pclass'].value_counts()</span></pre><figure class="lj lk ll lm fd lz er es paragraph-image"><div class="er es mt"><img src="../Images/69ea98f9e6160bb43ee7b1c9eb724049.png" data-original-src="https://miro.medium.com/v2/resize:fit:522/format:webp/1*ohDl5FBkmWA37EaUuur9aw.png"/></div></figure><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="2868" class="ls kj hi lo b fi lt lu l lv lw">titanic.groupby(['Pclass', 'Survived'])['Survived'].count()</span></pre><figure class="lj lk ll lm fd lz er es paragraph-image"><div class="er es mu"><img src="../Images/08a8e76a878a729606019026912526ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:536/format:webp/1*JQmPgY5Jl8ebvcaOBHcJIg.png"/></div></figure><p id="24ca" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">以上结果显示了基于 Pclass 的乘客分手并幸存。但是，我们仍然看不到这个数据的存活率。因此，让我们将 Pclass 与 Survived 一起绘制，以便更好地了解数据。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="5f7c" class="ls kj hi lo b fi lt lu l lv lw">sns.catplot(x='Pclass', y='Survived', data=titanic, kind='point')</span></pre><figure class="lj lk ll lm fd lz er es paragraph-image"><div class="er es mv"><img src="../Images/0450029c08135cfc9cbd5bb72ba5f306.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*Q4YmaHFiuZ8JcSyeDNpq8w.png"/></div></figure><p id="1adc" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你在上面看到的叫做点状图。它显示点估计和置信区间。点估计表示变量的集中趋势，而置信区间表示该估计的不确定性。从上面的图中可以清楚地看出，与其他级别的乘客相比，头等舱乘客的存活率最高。</p><p id="0376" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们再来看一个比较性别和费用的双变量分析的例子。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="4c12" class="ls kj hi lo b fi lt lu l lv lw">sns.catplot(x='Sex', y='Fare', data=titanic, kind='boxen')</span></pre><figure class="lj lk ll lm fd lz er es paragraph-image"><div class="er es mw"><img src="../Images/0898c6cd4b4389dde8b5c19cf42e70b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:852/format:webp/1*CBiIJaVcgC7pVq1DUQrCGA.png"/></div></figure><p id="ae5a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">上面显示的增强方框图表明“女性”乘客的票价平均高于男性乘客。这可能是因为向女性乘客提供了额外的服务。</p><h1 id="bc31" class="ki kj hi bd kk kl km kn ko kp kq kr ks io kt ip ku ir kv is kw iu kx iv ky kz bi translated">多变量分析</h1><p id="566e" class="pw-post-body-paragraph ix iy hi iz b ja la ij jc jd lb im jf jg lg ji jj jk lh jm jn jo li jq jr js hb bi translated">与双变量分析相比，多变量分析有助于我们更深入地了解变量之间的关系。后者假设变量 X 和目标变量 Y 之间的关系独立于其余变量，(即 f(X，Y)不依赖于第三个变量 z。这种限制性假设可能是危险的。例如，“妇女和儿童优先”是自 1852 年以来遵循的一项海军行为守则，其中规定在生命受到威胁的情况下，首先拯救妇女和儿童的生命。我们已经知道，“生存”与“性”高度相关。但是第三个变量“年龄”(孩子)影响着“生存”和“性”之间的关系。</p><p id="e91e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，让我们看看用三个变量分析数据，然后我们将学习对四个变量之间的关系进行建模。让我们比较一下“性别”和“年龄”。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="ae49" class="ls kj hi lo b fi lt lu l lv lw">sns.catplot(x='Sex', y='Age', data=titanic)</span></pre><figure class="lj lk ll lm fd lz er es paragraph-image"><div class="er es mx"><img src="../Images/7609f35d9f0046e54b630a650024bc4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:838/format:webp/1*9l0NdYZNb-Duo9xNjqIbFA.png"/></div></figure><p id="8482" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从上面的图表中，我们可以看到一些非常老的人在旅行。但是我们不能通过比较年龄和性别来获得更多的信息。</p><p id="2fd5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以让我们把第三个参数“Pclass”包含进来，试着更好地理解它。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="901c" class="ls kj hi lo b fi lt lu l lv lw">sns.catplot(x='Sex', y='Age', data=titanic, kind='box', hue='Pclass')</span></pre><figure class="lj lk ll lm fd lz er es paragraph-image"><div class="er es my"><img src="../Images/ccec30c8b1a52c630c71e9005ba0e120.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*F_4Q0zK1qkLUzqPfNAat4A.png"/></div></figure><p id="f775" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从上面的情节中，我们推断出大多数老年人都是坐头等舱旅行。这可能是因为他们很富有。年龄在 25 至 35 岁之间的年轻人大多乘坐二等和三等舱。</p><p id="6311" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">也许用小提琴的情节我们能看得更清楚。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="ba39" class="ls kj hi lo b fi lt lu l lv lw">sns.catplot(x='Pclass', y='Age', data=titanic, kind='violin', hue='Sex')</span></pre><figure class="lj lk ll lm fd lz er es paragraph-image"><div class="er es mz"><img src="../Images/c0d114193e41aaf092d722b6893b43e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/format:webp/1*aGZQvBcIswcGpHbhhmGnRg.png"/></div></figure><p id="d7b8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在让我们看看如何比较四个变量。就拿‘年龄’和‘车费’来说吧。注意，两者都是连续变量。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="4c67" class="ls kj hi lo b fi lt lu l lv lw">sns.jointplot(x='Age', y='Fare', data=titanic, kind='hexx')</span></pre><figure class="lj lk ll lm fd lz er es paragraph-image"><div class="er es na"><img src="../Images/096f70725746e795ac312d423683a02f.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*v6UtPoQslKYExURHbX6AOQ.png"/></div></figure><p id="2b08" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">乘客的平均年龄在 20 至 40 岁之间，平均票价约为 20 至 50 美元。从之前的剧情我们看不太懂。我在下面展示了一个更好的数据视图，它包括“性别”和“阶级”以及“年龄”和“费用”。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="0009" class="ls kj hi lo b fi lt lu l lv lw">sns.relplot(x='Age', y='Fare', data=titanic, row='Sex', col='Pclass')</span></pre><figure class="lj lk ll lm fd lz er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es nb"><img src="../Images/2f50ff311d86fd9b367545af1ee7085d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZchilA6gpaBqukHx_oZPsw.png"/></div></div></figure><p id="49b9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从上面的图中，我们观察到乘坐头等舱的男性乘客比女性乘客多。头等舱女性乘客的票价高于男性乘客。二等舱和三等舱的票价没有太大差别。很少有孩子坐头等舱旅行。第三个班有更多的孩子。大多数二等和三等舱的乘客年龄在 20 岁到 40 岁之间。</p><p id="8260" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi">— — — — — — — — — — — — — — — — — — — — — — — — — —</p><p id="7c16" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这篇报道差不多到此为止了。你在上面看到的是我在过去几周所做的综合分析的总结。完整的笔记本可从<a class="ae kh" href="https://github.com/reyscode/start-datascience" rel="noopener ugc nofollow" target="_blank">reys code/start-data science</a>获得。在此期间，我在使用统计学和数据可视化来理解数据中变量之间的关系方面取得了很大进步。我很高兴地承认，我对使用统计学来理解数据中的模式感到很舒服。我期待着使用更先进的统计方法(ARIMA，…)从更多具有纠缠变量的<a class="ae kh" href="https://www.kaggle.com/muonneutrino/wikipedia-traffic-data-exploration" rel="noopener ugc nofollow" target="_blank">复杂数据</a>中获得洞见。</p><p id="3c09" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请看看我的后续博客:</p><ul class=""><li id="ffb4" class="jt ju hi iz b ja jb jd je jg jv jk jw jo jx js jy jz ka kb bi translated">第二部分— <a class="ae kh" href="https://vrevathi.medium.com/exploratory-data-analysis-of-iowa-housing-price-prediction-problem-3d50a016797a" rel="noopener"> EDA 对爱荷华州房价的预测</a></li><li id="6993" class="jt ju hi iz b ja kc jd kd jg ke jk kf jo kg js jy jz ka kb bi translated"><a class="ae kh" href="https://vrevathi.medium.com/modeling-evaluation-and-ensembling-f00fe1de6470" rel="noopener">第三部分——模型构建、评估和组装</a></li></ul><p id="5aec" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你觉得这个有趣，请在下面留下评论。我很乐意和你交流。</p></div></div>    
</body>
</html>