<html>
<head>
<title>How to Create a Fully Functional E-commerce Website with Django</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Django创建一个功能齐全的电子商务网站</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-create-fully-functional-e-commerce-website-with-django-997ffaa0f040?source=collection_archive---------3-----------------------#2020-02-11">https://medium.com/analytics-vidhya/how-to-create-fully-functional-e-commerce-website-with-django-997ffaa0f040?source=collection_archive---------3-----------------------#2020-02-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7871" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第3步，共5步:制作订单摘要</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/6fc134ba6f76d6e1138bdb2fe3143e57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nnmReMTx0I47i2-kzdG0Lw.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated"><a class="ae jt" href="https://www.shuup.com/wp-content/uploads/2017/12/python-plus-django-1.jpg" rel="noopener ugc nofollow" target="_blank">https://www . shuup . com/WP-content/uploads/2017/12/python-plus-django-1 . jpg</a></figcaption></figure><p id="b5b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本部分教程中，我们将总结购物车中的订单</p><h1 id="1696" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">先决条件</h1><ul class=""><li id="9812" class="ks kt hi ih b ii ku im kv iq kw iu kx iy ky jc kz la lb lc bi translated">Django最新版本</li><li id="4d6f" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">Anaconda(可选)创建虚拟环境</li><li id="ab61" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">作为代码编辑器的Visual Studio代码(可选)</li></ul><p id="16d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在开始本教程之前，不要忘记激活您的虚拟环境，以及我们在上一个教程中创建的项目。如果你没有，你可以在这里下载:</p><div class="li lj ez fb lk ll"><a href="https://github.com/Andika7/DjangoEcommerce/tree/88aecdce1341d871acdfb4b19add1b497170c634" rel="noopener  ugc nofollow" target="_blank"><div class="lm ab dw"><div class="ln ab lo cl cj lp"><h2 class="bd hj fi z dy lq ea eb lr ed ef hh bi translated">安集卡7/DjangoEcommerce</h2><div class="ls l"><h3 class="bd b fi z dy lq ea eb lr ed ef dx translated">在GitHub上创建一个帐户，为Andika7/DjangoEcommerce的发展做出贡献。</h3></div><div class="lt l"><p class="bd b fp z dy lq ea eb lr ed ef dx translated">github.com</p></div></div><div class="lu l"><div class="lv l lw lx ly lu lz jn ll"/></div></div></a></div><h1 id="9c0a" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">A.模型</h1><p id="8226" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq ma is it iu mb iw ix iy mc ja jb jc hb bi translated">使用编辑代码打开core / models.py，并在类模型中添加一些函数，如下所示:</p><ol class=""><li id="7141" class="ks kt hi ih b ii ij im in iq md iu me iy mf jc mg la lb lc bi translated">类<strong class="ih hj">项</strong></li></ol><p id="c55b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<strong class="ih hj">项目</strong>类中没有任何改变，因为订单汇总与<strong class="ih hj">项目</strong>类没有直接关系</p><p id="19f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.类别<strong class="ih hj"> OrderItem </strong></p><p id="911d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<strong class="ih hj"> OrderItem </strong>类中，我们将添加一些额外的函数如下:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="mh mi l"/></div></figure><ul class=""><li id="31f9" class="ks kt hi ih b ii ij im in iq md iu me iy mf jc kz la lb lc bi translated"><strong class="ih hj"> get_total_item_price </strong>，返回每个产品项目的总价值</li><li id="82ba" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated"><strong class="ih hj"> get_discount_item_price，</strong>根据折扣价格返回每个产品项目的总价</li><li id="6c05" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated"><strong class="ih hj"> get_amount_saved，</strong>返回从现有折扣中节省的价格值</li><li id="a02a" class="ks kt hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated"><strong class="ih hj"> get_final_price，</strong>返回用作价格决定因素的函数(使用原价还是折扣价)</li></ul><p id="445d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.阶级<strong class="ih hj">秩序</strong></p><p id="09dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Order类中添加一个计算订单总价的函数:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="mh mi l"/></div></figure><ul class=""><li id="bf13" class="ks kt hi ih b ii ij im in iq md iu me iy mf jc kz la lb lc bi translated"><strong class="ih hj"> get_total_price，</strong>返回所有订购产品项目的总价值</li></ul><p id="869d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.迁移模型数据库</p><p id="4487" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不要忘记使用下面的命令迁移您的模型数据库:</p><pre class="je jf jg jh fd mj mk ml mm aw mn bi"><span id="6b20" class="mo jv hi mk b fi mp mq l mr ms">$ python manage.py migrate<br/>$ python manage.py makemigrations</span></pre><p id="df78" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完整的models.py代码可以在以下链接中看到:</p><div class="li lj ez fb lk ll"><a href="https://github.com/Andika7/DjangoEcommerce/blob/0bdedf2fe57b3677ec0b1e006d0946cfed10e546/core/models.py" rel="noopener  ugc nofollow" target="_blank"><div class="lm ab dw"><div class="ln ab lo cl cj lp"><h2 class="bd hj fi z dy lq ea eb lr ed ef hh bi translated">安集卡7/DjangoEcommerce</h2><div class="ls l"><h3 class="bd b fi z dy lq ea eb lr ed ef dx translated">在GitHub上创建一个帐户，为Andika7/DjangoEcommerce的发展做出贡献。</h3></div><div class="lt l"><p class="bd b fp z dy lq ea eb lr ed ef dx translated">github.com</p></div></div><div class="lu l"><div class="mt l lw lx ly lu lz jn ll"/></div></div></a></div><h1 id="0b9b" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">B.视图</h1><p id="acff" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq ma is it iu mb iw ix iy mc ja jb jc hb bi translated">在管理我们的模型之后，现在切换到core/views.py文件。在此之前，首先使用以下链接放置您模板目录:</p><div class="li lj ez fb lk ll"><a href="https://github.com/Andika7/DjangoEcommerce/tree/0bdedf2fe57b3677ec0b1e006d0946cfed10e546/templates" rel="noopener  ugc nofollow" target="_blank"><div class="lm ab dw"><div class="ln ab lo cl cj lp"><h2 class="bd hj fi z dy lq ea eb lr ed ef hh bi translated">安集卡7/DjangoEcommerce</h2><div class="ls l"><h3 class="bd b fi z dy lq ea eb lr ed ef dx translated">在GitHub上创建一个帐户，为Andika7/DjangoEcommerce的发展做出贡献。</h3></div><div class="lt l"><p class="bd b fp z dy lq ea eb lr ed ef dx translated">github.com</p></div></div><div class="lu l"><div class="mu l lw lx ly lu lz jn ll"/></div></div></a></div><p id="f580" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">或者您可以只取<strong class="ih hj"><em class="mv">order _ summary . html</em></strong>并将其放在模板目录中。</p><ol class=""><li id="bfcd" class="ks kt hi ih b ii ij im in iq md iu me iy mf jc mg la lb lc bi translated">导入</li></ol><pre class="je jf jg jh fd mj mk ml mm aw mn bi"><span id="77c8" class="mo jv hi mk b fi mp mq l mr ms">from django.contrib import messages<br/>from django.contrib.auth.decorators import login_required<br/>from django.contrib.auth.mixins import LoginRequiredMixin<br/>from django.core.exceptions import ObjectDoesNotExist<br/>from django.shortcuts import render, get_object_or_404, redirect<br/>from django.views.generic import ListView, DetailView, View<br/>from django.utils import timezone<br/>from .models import (<br/>    Item,<br/>    Order,<br/>    OrderItem<br/>)</span></pre><p id="4fdd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在你的views.py中导入所有需求库，在<strong class="ih hj"> django.views.generic </strong>中你可以看到我们导入了<strong class="ih hj">视图</strong>类。对于订单汇总视图，我们将使用这个<strong class="ih hj">视图</strong>类</p><p id="64a0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.创建<strong class="ih hj">订单摘要视图</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="mh mi l"/></div></figure><p id="30d8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<strong class="ih hj"> OrderSummaryView </strong>类中，我们使用订单模型作为模型，使用<strong class="ih hj"> order_summary.html </strong>作为模板。</p><p id="c200" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.创建减少数量的产品</p><p id="9d0b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上一个教程中，我们制作了两个函数:<strong class="ih hj"> add_to_cart() </strong>和<strong class="ih hj"> remove_from_cart()。</strong> add_to_cart()使产品的数量增加，而remove_from_cart()函数将使所有订单删除。因此，我们将创建一个函数来减少产品项目的数量，如果数量等于0，则删除它</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="mh mi l"/></div></figure><p id="7459" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.更新视图中的重定向url</p><p id="f790" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在views.py的每个函数中，我们都将所有URL重定向到产品，但是我们现在有了一个订单摘要，我们重定向它是有好处的</p><pre class="je jf jg jh fd mj mk ml mm aw mn bi"><span id="b9bd" class="mo jv hi mk b fi mp mq l mr ms">// change this code<br/>return redirect("core:product"</span><span id="9ae9" class="mo jv hi mk b fi mw mq l mr ms">// to<br/>return redirect("core:order-summary"</span></pre><p id="ec92" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.用户必须登录才能下订单</p><p id="e083" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为每个函数添加一个<a class="ae jt" href="http://twitter.com/login_required" rel="noopener ugc nofollow" target="_blank"> @login_required </a>注释，如果用户没有登录，在运行函数时，这会将用户抛入登录页面</p><pre class="je jf jg jh fd mj mk ml mm aw mn bi"><span id="976a" class="mo jv hi mk b fi mp mq l mr ms">@login_required<br/>def add_to_cart(request, pk):<br/>   ...</span><span id="c576" class="mo jv hi mk b fi mw mq l mr ms">@login_required<br/>def remove_from_cart(request, pk):<br/>   ...</span><span id="ccb3" class="mo jv hi mk b fi mw mq l mr ms">@login_required<br/>def reduce_quantity_item(request, pk):<br/>   ....</span></pre><p id="1885" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完整的views.py代码可以在下面的链接中看到:</p><div class="li lj ez fb lk ll"><a href="https://github.com/Andika7/DjangoEcommerce/blob/0bdedf2fe57b3677ec0b1e006d0946cfed10e546/core/views.py" rel="noopener  ugc nofollow" target="_blank"><div class="lm ab dw"><div class="ln ab lo cl cj lp"><h2 class="bd hj fi z dy lq ea eb lr ed ef hh bi translated">安集卡7/DjangoEcommerce</h2><div class="ls l"><h3 class="bd b fi z dy lq ea eb lr ed ef dx translated">在GitHub上创建一个帐户，为Andika7/DjangoEcommerce的发展做出贡献。</h3></div><div class="lt l"><p class="bd b fp z dy lq ea eb lr ed ef dx translated">github.com</p></div></div><div class="lu l"><div class="mx l lw lx ly lu lz jn ll"/></div></div></a></div><h1 id="cc12" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">C.资源定位符</h1><p id="df0b" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq ma is it iu mb iw ix iy mc ja jb jc hb bi translated">完成视图后，我们现在将在core/url.py文件中添加OrderSummaryView url和reduce_quantity项函数</p><ol class=""><li id="816b" class="ks kt hi ih b ii ij im in iq md iu me iy mf jc mg la lb lc bi translated">导入</li></ol><pre class="je jf jg jh fd mj mk ml mm aw mn bi"><span id="d38f" class="mo jv hi mk b fi mp mq l mr ms">from django.urls import path<br/>from .views import (<br/>    remove_from_cart,<br/>    reduce_quantity_item,<br/>    add_to_cart,<br/>    ProductView,<br/>    HomeView,<br/>    OrderSummaryView<br/>)</span></pre><p id="60c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">添加我们在导入时在views.py文件中创建的所有视图和函数，因此我们只添加来自前一个文件的<strong class="ih hj"> OrderSummaryView </strong>和<strong class="ih hj"> reduce_quantity_item </strong>。</p><p id="7356" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.创建路径Url</p><p id="6a16" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建<strong class="ih hj"> OrderSummaryView </strong>和<strong class="ih hj"> reduce_quantity_item() </strong>函数的路径url，如下所示:</p><pre class="je jf jg jh fd mj mk ml mm aw mn bi"><span id="e5e0" class="mo jv hi mk b fi mp mq l mr ms">urlpatterns = [<br/>   ...<br/>   path('order-summary', OrderSummaryView.as_view(), <br/>        name='order-summary'),<br/>   path('reduce-quantity-item/&lt;pk&gt;/', reduce_quantity_item,<br/>        name='reduce-quantity-item')<br/>]</span></pre><p id="bbac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在您可以访问视图和另一个功能</p><h1 id="40c4" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">完成源代码这一部分:</h1><div class="li lj ez fb lk ll"><a href="https://github.com/Andika7/DjangoEcommerce/tree/0bdedf2fe57b3677ec0b1e006d0946cfed10e546" rel="noopener  ugc nofollow" target="_blank"><div class="lm ab dw"><div class="ln ab lo cl cj lp"><h2 class="bd hj fi z dy lq ea eb lr ed ef hh bi translated">安集卡7/DjangoEcommerce</h2><div class="ls l"><h3 class="bd b fi z dy lq ea eb lr ed ef dx translated">没有提供描述、网站或主题。此时您不能执行该操作。您已使用另一个标签登录…</h3></div><div class="lt l"><p class="bd b fp z dy lq ea eb lr ed ef dx translated">github.com</p></div></div><div class="lu l"><div class="my l lw lx ly lu lz jn ll"/></div></div></a></div><h1 id="64c3" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">进行下一部分！</h1><p id="5894" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq ma is it iu mb iw ix iy mc ja jb jc hb bi translated">我希望本教程的第三部分对你有所帮助。在下一节课中，我们将制作这个电子商务网站的结帐表单。</p></div></div>    
</body>
</html>