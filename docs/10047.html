<html>
<head>
<title>COVID Tweet Analysis- Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">COVID推文分析-第2部分</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/covid-tweet-analysis-part-2-5faae4062c6e?source=collection_archive---------1-----------------------#2020-10-02">https://medium.com/analytics-vidhya/covid-tweet-analysis-part-2-5faae4062c6e?source=collection_archive---------1-----------------------#2020-10-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="6165" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">利用主题建模发现潜在主题</h2></div><p id="a85f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在<a class="ae jt" rel="noopener" href="/analytics-vidhya/covid-tweet-analysis-part-1-a88ef91f432f">第一部分</a>的继续中，我们探索了与COVID相关的twitter数据。在本帖中，我们将使用主题建模来更多地了解人们在推特上谈论的潜在关键观点。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/70ea1aa862fe7e44792469d67cee5e1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RRH7usGRcHLELI_kNCrKug.png"/></div></div></figure><p id="ebed" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们先来了解一下什么是话题造型！</p><h2 id="b772" class="kg kh hi bd ki kj kk kl km kn ko kp kq jg kr ks kt jk ku kv kw jo kx ky kz la bi translated">主题建模</h2><p id="1e9e" class="pw-post-body-paragraph ix iy hi iz b ja lb ij jc jd lc im jf jg ld ji jj jk le jm jn jo lf jq jr js hb bi translated">主题建模是一种无监督的技术，有助于发现潜在主题，也称为潜在主题，存在于大量可用的文档中。</p><p id="fc0b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在现实世界中，我们观察到大量未标记的文本数据，以评论、评论或投诉等形式出现。对于这些场景，主题建模是找到正在讨论的潜在主题的快速解决方案，有助于标记过程。</p><h2 id="289d" class="kg kh hi bd ki kj kk kl km kn ko kp kq jg kr ks kt jk ku kv kw jo kx ky kz la bi translated">用于主题建模的技术</h2><ul class=""><li id="d9b3" class="lg lh hi iz b ja lb jd lc jg li jk lj jo lk js ll lm ln lo bi translated"><strong class="iz hj">潜在狄利克雷分配(LDA) </strong></li></ul><p id="247c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它的工作基于这样的假设，即具有相似主题的文档使用相似的单词。它假设文档是潜在主题的概率分布，主题是单词的概率分布。</p><p id="3ced" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">简而言之，LDA将文档表示为主题的混合物，这些主题以一定的概率与单词相关。</p><ul class=""><li id="8f58" class="lg lh hi iz b ja jb jd je jg lp jk lq jo lr js ll lm ln lo bi translated"><strong class="iz hj">非负矩阵分解</strong></li></ul><p id="93c4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它是一种数学技术，将一个矩阵因式分解为两个矩阵，其性质是所有三个矩阵都没有负元素(这就是名字的由来！).</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ls"><img src="../Images/a8db6c6cd148e823178b352f889dfcd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OuSl2Xl8A1Qat2yyEtA8dA.png"/></div></div></figure><p id="c287" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可以创建维数为n * p <strong class="iz hj">、</strong>的矩阵X(数据矩阵)，其可以表示为两个矩阵的乘积，即维数为n*k的A(基向量)<strong class="iz hj"> </strong>和维数为k *p的B(系数矩阵)<strong class="iz hj">其中n是文档的数量，p是令牌的数量，k是主题的数量。</strong>因此，这种分解对应于将文档与主题相关联以及将主题与标记相关联，因此可以用作进行主题建模的一种方式。</p><p id="5932" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这两种技术都使用了将文档与主题相关联以及将主题与标记(或单词)相关联的概念。LDA将其建模为概率分布，以找到与主题更相关的单词和与主题更相关的文档，而NMF则使用每个主题的单词的系数值(在矩阵分解过程中获得)进行解释。</p><h2 id="23d6" class="kg kh hi bd ki kj kk kl km kn ko kp kq jg kr ks kt jk ku kv kw jo kx ky kz la bi translated">COVID Twitter数据的Python实现</h2><p id="68ae" class="pw-post-body-paragraph ix iy hi iz b ja lb ij jc jd lc im jf jg ld ji jj jk le jm jn jo lf jq jr js hb bi translated">所以，让我们回到上次离开的地方，在Twitter数据上应用主题建模。在<a class="ae jt" rel="noopener" href="/analytics-vidhya/covid-tweet-analysis-part-1-a88ef91f432f">上一篇博客</a>中，我们已经进行了数据清理，所以我将从那一点开始。</p><p id="77c6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">创建文档术语矩阵</strong></p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es lt"><img src="../Images/6b32b5dba5ce7f6d88038d492f4215e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bMWoCirHIIb5KaAKADzvHw.png"/></div></div></figure><p id="12a7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用<strong class="iz hj">sk learn . feature _ extraction . text . tfidf vectorizer</strong>创建文档术语矩阵，然后对处理后的推文应用fit_transform。我已经设置了一些参数，如max_df，min_df，ngram_range，stop_words。作为输出，您将得到dtm，它是一个41122*43359的稀疏矩阵，分别对应于tweets的数量和令牌的数量，即根据上述定义的维数为n*p的矩阵X。</p><p id="0f44" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">打造NMF模式</strong></p><p id="7895" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我尝试了LDA和NMF，NMF表现更好，所以带你通过NMF的结果。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es lu"><img src="../Images/2443a691578c6712474a6037ab255538.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y0KWug5vOp-IVtjZt5hQsQ.png"/></div></div></figure><p id="09ca" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用<strong class="iz hj">sk learn . decomposition . NMF</strong>创建一个NMF对象，将n_components设置为5(尽管我也尝试了n_components的其他值，如3、6、7)，然后拟合并转换从Tfidf过程中获得的文档术语矩阵。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es lv"><img src="../Images/d8738a7aa42e7273f9fc305e796c13e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*01f2CH1b2LU4T05JVUXKBg.png"/></div></div></figure><p id="f723" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们来探讨一下转换的输出是什么样子的！这是一个维数为n*k的矩阵，正如我们在上面的定义中所讨论的。</p><p id="dae3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于与索引0处的文档相对应的主题[0],我得到一个具有五个值的数组(对应于主题的数量),索引3处的最高系数值意味着该特定文档属于主题3。</p><p id="6069" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">解释每个主题</strong></p><p id="35d3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因为我们已经了解了如何使用上面讨论的nmf_model.fit_transform(dtm)的输出将主题与文档相关联。我们也来了解一下这些题目是由什么组成的！</p><p id="c880" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这种情况下，我们使用nmf_model.components_(这是维数为k*p的第二个矩阵B)通过查看对应于每个主题的具有最高系数值的前10个单词来获得主题与单词的关系。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es lw"><img src="../Images/ba24a13a819ada4deba835b3d66fcc42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x11FNq9cqSXoU_cog7fHow.png"/></div></div></figure><p id="8277" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这些词提供了撰写主题名称的思路，以更好地报告这些发现。</p><p id="d6cc" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这里，话题0谈论石油和天然气价格，话题1涉及杂货店，话题2对应洗手液和卫生纸，话题3涉及网上购物，话题4涉及抢购。</p><p id="f771" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">给推文贴标签</strong></p><p id="6141" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，在了解了这五个主题的构成之后，下一步就是给推文贴标签。</p><p id="2ff7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们讨论的第一个矩阵，即n*k(主题变量)，我们使用<strong class="iz hj">df[' Topic ']= topics . arg max(axis = 1)</strong>分配对应于最大系数值的主题号</p><p id="3c80" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">基于与每个主题相关的词，我们可以创建相应的标签。我创造了5个标签，分别是‘石油_天然气_价格’，‘杂货店_工人’，‘卫生纸_消毒剂’，‘网上购物’，‘抢购_囤积’。这些名字可以根据:D创意重新定义</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es lx"><img src="../Images/0288bba2b447d06aa12f9251ed111e1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pN_FInwn4VX-gXhze5CmyQ.png"/></div></div><figcaption class="ly lz et er es ma mb bd b be z dx translated">将主题名称映射到主题编号</figcaption></figure><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mc"><img src="../Images/a5f8f96c85ce675b40d4b8e35333d7d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rbsY08GJjETIpHha_kvXOA.png"/></div></div><figcaption class="ly lz et er es ma mb bd b be z dx translated">原始推文和相应的主题名称</figcaption></figure><p id="f0ef" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可以看到，这些标签在理解推文方面做得很好。更多的推文被贴上了恐慌购买囤积和石油天然气价格的标签。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es md"><img src="../Images/0d6d8791e6be2aa88e30cf73ff1b072b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OuXZdNGXDxbVZxQC6KVXxw.png"/></div></div></figure><p id="c5b3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">原来如此！你坚持到了最后。</p><p id="753e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以在这里找到该分析的相应代码<a class="ae jt" href="https://github.com/poojamahajan0712/COVID_tweet_analysis/blob/master/Covid_Tweet_Topic_Modelling.ipynb" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="bf73" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">参考资料:-</p><ul class=""><li id="1044" class="lg lh hi iz b ja jb jd je jg lp jk lq jo lr js ll lm ln lo bi translated"><a class="ae jt" href="https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.TfidfVectorizer.html" rel="noopener ugc nofollow" target="_blank">https://sci kit-learn . org/stable/modules/generated/sk learn . feature _ extraction . text . tfidfvectorizer . html</a></li><li id="8bc5" class="lg lh hi iz b ja me jd mf jg mg jk mh jo mi js ll lm ln lo bi translated"><a class="ae jt" href="https://scikit-learn.org/stable/modules/generated/sklearn.decomposition.NMF.html" rel="noopener ugc nofollow" target="_blank">https://sci kit-learn . org/stable/modules/generated/sk learn . decomposition . NMF . html</a></li><li id="f400" class="lg lh hi iz b ja me jd mf jg mg jk mh jo mi js ll lm ln lo bi translated"><a class="ae jt" href="https://www.kaggle.com/datatattle/covid-19-nlp-text-classification" rel="noopener ugc nofollow" target="_blank">https://www . ka ggle . com/data tattle/新冠肺炎-nlp-text-classification </a></li></ul></div></div>    
</body>
</html>