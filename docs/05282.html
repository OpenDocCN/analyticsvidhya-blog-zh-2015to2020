<html>
<head>
<title>Flutter Forms</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">颤动形式</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/flutter-forms-50b9a8569914?source=collection_archive---------6-----------------------#2020-04-16">https://medium.com/analytics-vidhya/flutter-forms-50b9a8569914?source=collection_archive---------6-----------------------#2020-04-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/7bae4612b9e3db05b08173ffe0ba458e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ApEu0k1o-0ZgDKiUOVDB5w.jpeg"/></div></div></figure><p id="4903" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这个环节中，我将制作一个包含两个字段的表格，并给出一个基本的理解，</p><ul class=""><li id="d8b0" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">如何向表单中添加字段</li><li id="3873" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">如何添加基本造型</li><li id="d8c3" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">如何根据字段更改键盘布局</li><li id="f553" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">如何从表单域中获取值</li><li id="31c9" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">如何验证表单</li></ul><p id="5c6e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">好的，让我们从颤动的形式开始，在这节课的最后，你会学到所有你需要知道的关于建立一个基本的形式。</p><h2 id="e145" class="kc kd hi bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw bi translated">表单的字段</h2><p id="069f" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">有两种类型的字段可用于表单。它们是TextField小部件和TextFormField小部件。所有的小部件都应该包装在一个表单小部件中，如示例所示。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="3ee2" class="kc kd hi lh b fi ll lm l ln lo">Widget build(BuildContext context) {<br/>  <strong class="lh hj">return </strong>Scaffold(<br/>    appBar: AppBar(<br/>      title: Text("Basic form"),<br/>    ),<br/>    body: <strong class="lh hj">Form(<br/>      child: ListView(<br/>        padding: EdgeInsets.all(10.0),<br/>        children: &lt;Widget&gt;[<br/>          TextField(<br/>            decoration: InputDecoration(labelText: 'Username'),<br/>          ),<br/>          TextFormField(<br/>            decoration: InputDecoration(labelText: 'UserName'),<br/>          ),<br/>          RaisedButton(<br/>            onPressed: () {},<br/>            child: Text("Submit"),<br/>          )<br/>        ],<br/>      ),</strong><br/>    ),<br/>  );<br/>}</span></pre><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/ad8f3197e6eb935cfb152c1d0c243827.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LFNkA5EFWOklUf1NOKPqvA.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx translated">上面代码的预览</figcaption></figure><p id="2206" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如你所看到的，TextField窗口小部件和TextFormField窗口小部件显示相同，但没有。这两者略有不同。例如，验证在TextFiled小部件上不可用，但在TextFormField小部件上可用。</p></div><div class="ab cl lu lv gp lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="hb hc hd he hf"><h2 id="f003" class="kc kd hi bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw bi translated">给表单添加一些样式</h2><p id="9fe9" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">在这一部分，我们将学习一些基本的样式，比如边框、前缀图标、后缀图标、提示文本。</p><p id="9784" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">添加提示文本</strong></p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="cab6" class="kc kd hi lh b fi ll lm l ln lo">TextField(<br/>  decoration: InputDecoration(<br/>    labelText: 'UserName',<br/>    <strong class="lh hj">hintText: "YashodPerera",</strong><br/>  ),<br/>),</span></pre><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/49d3080f74f45ce3753d23bb4a2df249.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vulbu3ntRdF7jKvJvA5V5w.png"/></div></div></figure><p id="c460" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">增加寄宿生</strong></p><p id="0d8d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有几种类型的寄宿生，如错误寄宿生，重点寄宿生，启用寄宿生，禁用寄宿生等。在这一部分中，我们将讨论焦点边界和使能边界。一旦你能设计出一种类型的寄宿生，你就能设计出任何类型的寄宿生。</p><p id="1f27" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">添加已启用的寄宿生</strong></p><p id="fe11" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">启用的边界是当它不聚焦时出现的边界。让我们添加一个黑色启用寄宿生。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="a9a7" class="kc kd hi lh b fi ll lm l ln lo">decoration: InputDecoration(<br/>  labelText: 'UserName',<br/>  hintText: "YashodPerera",<br/>  <strong class="lh hj">enabledBorder: OutlineInputBorder(<br/>    borderSide: BorderSide(color: Colors.<em class="mc">black</em>),<br/>  ),</strong><br/>),</span></pre><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es md"><img src="../Images/7b15d5f06c4f3a4e7c281be12728e41f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o6e5uiTcWiULurYeejXpWw.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx translated">上面代码的预览</figcaption></figure><p id="37fc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后将一些样式添加到边界，得到一个圆形，并增加边界宽度如下。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="b3a3" class="kc kd hi lh b fi ll lm l ln lo">enabledBorder: OutlineInputBorder(<br/>  borderRadius: BorderRadius.all(Radius.circular(20.0)),  <br/>  borderSide: BorderSide(color: Colors.<em class="mc">black</em>, width: 2.0),<br/>),</span></pre><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/39ce34e99eabaebbba7a07802ef92494.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hrsbqn6Mn4cPYRJSKNFA1Q.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx translated">上面代码的预览</figcaption></figure><p id="a07b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">添加焦点边框</strong></p><p id="a178" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">焦点边界是场激活时出现的边界。让我们给焦点边框添加一些样式，如下所示。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="1023" class="kc kd hi lh b fi ll lm l ln lo">child: TextField(<br/>  decoration: InputDecoration(<br/>    labelText: 'UserName',<br/>    hintText: "YashodPerera",    <br/>    <strong class="lh hj">focusedBorder: OutlineInputBorder(<br/>      borderRadius: BorderRadius.all(Radius.circular(20.0)),<br/>      borderSide: BorderSide(color: Colors.<em class="mc">blue</em>, width: 2.0),<br/>    ),</strong><br/>  ),<br/>),</span></pre><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/52fdf4c5b0d4ae2f9c1695964a2235e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MgwRnS_sjqjEw25d-dQS8A.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx translated">上面代码的预览</figcaption></figure><p id="ea0e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">添加前缀图标和后缀图标</strong></p><p id="226a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在表单字段中，前缀图标被广泛用于让用户更好地理解字段，后缀图标用于不同的目的，如编辑字段、清除字段等。让我们向该字段添加前缀图标和后缀图标。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="1137" class="kc kd hi lh b fi ll lm l ln lo">TextField(<br/>  decoration: InputDecoration(<br/>    labelText: 'UserName',<br/>    <strong class="lh hj">prefixIcon: Icon(Icons.<em class="mc">person</em>),<br/>    suffixIcon: Icon(<br/>      Icons.<em class="mc">delete_outline</em>,<br/>      color: Colors.<em class="mc">red</em>,<br/>    ),</strong><br/>    hintText: "YashodPerera",<br/>    enabledBorder: OutlineInputBorder(<br/>      borderRadius: BorderRadius.all(Radius.circular(20.0)),<br/>      borderSide: BorderSide(color: Colors.<em class="mc">black</em>, width: 2.0),<br/>    ),<br/>  ),<br/>),</span></pre><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/9ed6362080eceb6c1a766895cb75166b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K8GsoLLWHKU5-aXa64_u0w.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx translated">上面代码的预览</figcaption></figure></div><div class="ab cl lu lv gp lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="hb hc hd he hf"><h2 id="ed67" class="kc kd hi bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw bi translated"><strong class="ak">更改字段的键盘布局。</strong></h2><p id="9c3f" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">在移动应用中，我们必须根据领域改变键盘布局。举例来说，给数字字段全键盘是没有用的。在TextFormField widget和TextField widget中，有一个要添加的字段是<strong class="is hj"> keyboardType </strong>。让我们看看如何改变键盘布局。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="3485" class="kc kd hi lh b fi ll lm l ln lo">TextFormField(<br/>  <strong class="lh hj">keyboardType: TextInputType.<em class="mc">number</em>,</strong><br/>  decoration: InputDecoration(<br/>    labelText: 'Age',<br/>    hintText: "20",<br/>    prefixIcon: Icon(Icons.<em class="mc">date_range</em>),<br/>    suffixIcon: Icon(<br/>      Icons.<em class="mc">delete_outline</em>,<br/>      color: Colors.<em class="mc">red</em>,<br/>    ),<br/>    enabledBorder: OutlineInputBorder(<br/>      borderRadius: BorderRadius.all(Radius.circular(20.0)),<br/>      borderSide: BorderSide(color: Colors.<em class="mc">black</em>, width: 2.0),<br/>    ),<br/>    focusedBorder: OutlineInputBorder(<br/>      borderRadius: BorderRadius.all(Radius.circular(20.0)),<br/>      borderSide: BorderSide(color: Colors.<em class="mc">blue</em>, width: 2.0),<br/>    ),<br/>  ),<br/>),</span></pre><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mf"><img src="../Images/922a94056cc305b5199ede246e7df0cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gkVYqtrnDDdDgVme1gNnjg.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx translated">上面代码的预览</figcaption></figure></div><div class="ab cl lu lv gp lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="hb hc hd he hf"><h2 id="07f6" class="kc kd hi bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw bi translated"><strong class="ak">从字段中获取值</strong></h2><p id="435b" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">控制器可以访问字段值。让我们做一些编码，并在用户点击提交时在终端上打印值。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="2d60" class="kc kd hi lh b fi ll lm l ln lo"><strong class="lh hj">TextEditingController nameController = TextEditingController();</strong><br/><br/>@override<br/>Widget build(BuildContext context) {<br/>  <strong class="lh hj">return </strong>Scaffold(<br/>    appBar: AppBar(<br/>      title: Text("Basic form"),<br/>    ),<br/>    body: Form(<br/>      child: ListView(<br/>        children: &lt;Widget&gt;[<br/>          TextField(<br/>            <strong class="lh hj">controller: nameController,</strong><br/>            decoration: InputDecoration(<br/>              labelText: 'UserName',<br/>              hintText: "YashodPerera",<br/>            ),<br/>          ),<br/>          RaisedButton(<br/>            onPressed: () {<br/>              debugPrint("${<strong class="lh hj">nameController.text</strong>}");<br/>            },<br/>            child: Text("Submit"),<br/>          ),<br/>        ],<br/>      ),<br/>    ),<br/>  );<br/>}</span></pre><p id="0845" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如您在上面的代码中看到的，TextEditingController用于获取值。使用TextEditingController对象用户名可通过<strong class="is hj"> nameController.text </strong>访问。</p></div><div class="ab cl lu lv gp lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="hb hc hd he hf"><h2 id="e2df" class="kc kd hi bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw bi translated">验证表单</h2><p id="a728" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">让我们完成本教程的最后一部分，即验证表单。为了在提交时验证表单，您必须使用表单的一个键(标识符),并且必须使用TextFormField小部件中的validator属性。您不能使用TextField widget进行验证。好的，让我们开始编码。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="edba" class="kc kd hi lh b fi ll lm l ln lo"><strong class="lh hj">GlobalKey&lt;FormState&gt; _formKey = GlobalKey&lt;FormState&gt;();<br/></strong><br/>@override<br/>Widget build(BuildContext context) {<br/>  <strong class="lh hj">return </strong>Scaffold(<br/>    appBar: AppBar(<br/>      title: Text("Basic form"),<br/>    ),<br/>    body: Form(<br/>      key: _formKey,<br/>      child: ListView(<br/>        children: &lt;Widget&gt;[<br/>          TextFormField(<br/>            <strong class="lh hj">validator: (value) {<br/>              if (value.isEmpty) {<br/>                return 'Please enter userName';<br/>              }<br/>              return null;<br/>            },</strong><br/>            decoration: InputDecoration(<br/>              labelText: 'UserName',<br/>              prefixIcon: Icon(Icons.<em class="mc">person</em>),<br/>              suffixIcon: Icon(<br/>                Icons.<em class="mc">delete_outline</em>,<br/>                color: Colors.<em class="mc">red</em>,<br/>              ),<br/>              hintText: "YashodPerera",<br/>            ),<br/>          ),<br/>          TextFormField(<br/>            <strong class="lh hj">validator: (value) {<br/>              if (value.isEmpty) {<br/>                return 'Please enter age';<br/>              }<br/>              return null;<br/>            },</strong><br/>            keyboardType: TextInputType.<em class="mc">number</em>,<br/>            decoration: InputDecoration(<br/>              labelText: 'Age',<br/>              hintText: "20",<br/>              prefixIcon: Icon(Icons.<em class="mc">date_range</em>),<br/>              suffixIcon: Icon(<br/>                Icons.<em class="mc">delete_outline</em>,<br/>                color: Colors.<em class="mc">red</em>,<br/>              ),<br/>            ),<br/>          ),<br/>          RaisedButton(<br/>            <strong class="lh hj">onPressed: () {<br/>              if (_formKey.currentState.validate()) {<br/>                debugPrint("Valid");<br/>              }<br/>            },</strong><br/>            child: Text("Submit"),<br/>          ),<br/>        ],<br/>      ),<br/>    ),<br/>  );<br/>}</span></pre><p id="59c7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要进行验证，您必须遵循以下顺序</p><ul class=""><li id="398e" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">指定表单的键</li></ul><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="ac8e" class="kc kd hi lh b fi ll lm l ln lo"><strong class="lh hj">GlobalKey&lt;FormState&gt; _formKey = GlobalKey&lt;FormState&gt;();<br/></strong>Form(<br/>      key: _formKey,<br/>      child: //child<br/>),</span></pre><ul class=""><li id="6bc3" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">向字段添加验证器</li></ul><p id="9834" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些验证器检查函数内部的条件，如果无效，它输出适当的错误。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="cf0f" class="kc kd hi lh b fi ll lm l ln lo">TextFormField(<br/>    <strong class="lh hj">validator: (value) {<br/>         if (value.isEmpty) {<br/>             return 'Please enter userName';<br/>         }<br/>         return null;<br/>     },<br/>)</strong></span></pre><ul class=""><li id="fa0e" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">提交时或任何时候使用表单密钥检查有效性。</li></ul><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="581f" class="kc kd hi lh b fi ll lm l ln lo"><strong class="lh hj">onPressed: () {<br/>     if (_formKey.currentState.validate()) {<br/>          debugPrint("Valid");<br/>     }<br/>},</strong></span></pre><p id="bf6b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上面的代码所做的是，当按钮被按下时，它检查指定表单键下的所有字段验证器(在本例中为<em class="mc"> </em> <strong class="is hj"> <em class="mc"> _formKey </em> </strong>)，并检查所有内容是否有效。如果没有，它将返回如下错误。</p><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mg"><img src="../Images/7fc4d610de265f33f9cbd6d23014da87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qZd1hrmV67FVM7azAqZqlA.png"/></div></div></figure><p id="41ce" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以在这个<a class="ae mh" href="https://github.com/yashodgayashan/flutter-tutorial/tree/form" rel="noopener ugc nofollow" target="_blank">链接</a>中找到代码。</p><p id="5d64" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你觉得这有帮助，请点击那个👏并分享到社交媒体上:)</p></div></div>    
</body>
</html>