<html>
<head>
<title>Building a Twitter Bot with any data using DashBlock and Tweepy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用DashBlock和Tweepy构建一个包含任何数据的Twitter机器人</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/building-a-twitter-bot-with-any-data-using-dashblock-and-tweepy-fd2b9f7ff5fc?source=collection_archive---------13-----------------------#2020-01-25">https://medium.com/analytics-vidhya/building-a-twitter-bot-with-any-data-using-dashblock-and-tweepy-fd2b9f7ff5fc?source=collection_archive---------13-----------------------#2020-01-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/93b1e02a573d4e6daada8324b28eebb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*H3Arz3P-lFXPkN77"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">萨拉·库菲在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="fdf2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有成千上万的推特机器人<strong class="ix hj"/>，在这篇文章中，我们将专注于构建有用/有趣/有趣的机器人，而不是宣传机器/巨魔农场。</p><blockquote class="jt"><p id="43c6" class="ju jv hi bd jw jx jy jz ka kb kc js dx translated">Twitter bot只是一个自动化的Twitter帐户，通常在预定义的时间或作为对特定外部触发的反应来发布推文。</p></blockquote><p id="205c" class="pw-post-body-paragraph iv iw hi ix b iy kd ja jb jc ke je jf jg kf ji jj jk kg jm jn jo kh jq jr js hb bi translated">例如，在本文中，您将学习如何构建一个机器人来跟踪并发布由<a class="ae iu" href="http://pitchfork.com/best" rel="noopener ugc nofollow" target="_blank"> Pitchfork、</a>发布的“最佳新音乐”，例如:</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure></div><div class="ab cl ko kp gp kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="hb hc hd he hf"><p id="f5ba" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要做到这一点，首先要获得所需的信息——在这种情况下，要<strong class="ix hj">搜索</strong> Pitchfork的网站(因为他们没有开放的API)并检索最佳的新音乐。</p><p id="b3a3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="http://dashblock.com" rel="noopener ugc nofollow" target="_blank"><strong class="ix hj">dash block</strong></a><strong class="ix hj"/>是最近推出的一款工具，它正好可以做到这一点。他们网站上的一行程序— <em class="kv">将任何网站转换成API — </em>很好地总结了<em class="kv">的全部内容。</em></p><blockquote class="jt"><p id="d2f6" class="ju jv hi bd jw jx jy jz ka kb kc js dx translated">有了Dashblock，你基本上可以点击网页的任何元素，并创建一个API，一旦查询就会返回它的内容。</p></blockquote><p id="561a" class="pw-post-body-paragraph iv iw hi ix b iy kd ja jb jc ke je jf jg kf ji jj jk kg jm jn jo kh jq jr js hb bi translated">现在，让我们一步一步地为我们的Pitchfork示例介绍如何做到这一点。</p><p id="aed5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">(1)首先我们在Dashblock的软件中输入想要抓取的URL。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kw"><img src="../Images/a4fc8437289d5e6e450b49096a5ffc97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f4rxUd1ArwTHZtQKjXWPUA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">仪表板的启动画面</figcaption></figure><p id="0f12" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">(2)我们选择(右键单击)我们感兴趣的元素，并给它们分配一个标签。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kx"><img src="../Images/57f20c0049600c6d9543276ebf779a9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t9nGlsP-x6COm0jRNjhBuQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">从网站中选择和标记UI元素。</figcaption></figure><p id="0c0f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">(3)我们可以为不同的元素创建多个标签。Dashblock将尝试并自动标记相似的元素，但如果这不起作用，您仍然可以选择缺少的元素并添加所需的标签。最终，页面看起来会像这样，每种颜色对应一个不同的标签。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ky"><img src="../Images/946d7a9c42aba054184547d3daf1755d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hU96-62CgFXBfKOH2XoQMg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">突出显示的UI元素是添加到API中的元素。</figcaption></figure><p id="c160" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">(4)要预览您选择并标记的数据的结构，您可以单击右上角的预览。这将向您展示一个类似于<em class="kv"> json </em>的结构，由您选择的数据构建而成。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kz"><img src="../Images/39f8144e2f405d78b907ca62cf594e53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SGugvxYVdR2zxU_4VsyBJA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">API将返回的数据结构的预览。</figcaption></figure><p id="3f81" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">(5)最后，如果一切正常，您可以按save并创建API。这将显示下面的页面，其中提供了示例curl/Javascript/Python代码来查询新创建的api，以及API键和模型id。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es la"><img src="../Images/04d0b58a42b4cb4f147073b48a10e5d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VXqizTF6wbzTKjUOPHiHCw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">新创建的API以及查询它的示例代码。</figcaption></figure><h1 id="ed10" class="lb lc hi bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">搞定了。</h1><p id="c4c8" class="pw-post-body-paragraph iv iw hi ix b iy lz ja jb jc ma je jf jg mb ji jj jk mc jm jn jo md jq jr js hb bi translated">我们成功地检索了我们需要的所有数据，现在我们有一个API来跟踪Pitchfork的最佳新音乐公告。</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="me kn l"/></div></figure></div><div class="ab cl ko kp gp kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="hb hc hd he hf"><p id="39dc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">本文的第二部分将指导您创建自己的Twitter机器人。为此，我们将使用<a class="ae iu" href="http://tweepy.org" rel="noopener ugc nofollow" target="_blank"> Tweepy库</a>，这使得整个过程更加顺畅。</p><p id="1557" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但是首先，你需要<a class="ae iu" href="https://developer.twitter.com/en/apply-for-access" rel="noopener ugc nofollow" target="_blank">申请并获得一个开发者账户</a>来使用Twitter APIs。获得访问权限后，您将能够创建一个应用程序，并获得使用Tweepy进行身份验证所需的凭据:</p><pre class="ki kj kk kl fd mf mg mh mi aw mj bi"><span id="cb85" class="mk lc hi mg b fi ml mm l mn mo">auth = tweepy.OAuthHandler(consumer_key, consumer_secret)<br/>auth.set_access_token(key, secret)</span></pre><p id="4266" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有关认证过程的更多细节，请访问<a class="ae iu" href="https://tweepy.readthedocs.io/en/latest/auth_tutorial.html" rel="noopener ugc nofollow" target="_blank"> Tweepy文档</a>。</p><p id="19a2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦通过身份验证，我们可以首先检查是否有新的公告要发布，如果有，就编写并发送推文。</p><p id="b78a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可以通过使用您喜欢的任何方法(例如通过Python上的<a class="ae iu" href="https://2.python-requests.org/en/master/" rel="noopener ugc nofollow" target="_blank">请求</a>)查询我们之前创建的API来轻松完成第一部分。</p><p id="49f7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦我们从API中检索到JSON格式的数据，我们就可以通过调用:</p><pre class="ki kj kk kl fd mf mg mh mi aw mj bi"><span id="5110" class="mk lc hi mg b fi ml mm l mn mo">api = tweepy.API(auth)<br/>api.update_status(f"{t['title']} by {t['artist']} is {t['tag'].upper()} on <a class="ae iu" href="http://twitter.com/Pitchfork" rel="noopener ugc nofollow" target="_blank">@Pitchfork</a>. {t['title:link']} #{t['artist'].replace(' ','')} #pitchfork #bestnewmusic")</span></pre><p id="b008" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这将从认证帐户发出一条类似于本文开头所示的<a class="ae iu" href="https://twitter.com/BotPitchfork/status/1220685410390679552" rel="noopener ugc nofollow" target="_blank"> tweet </a></p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="mp kn l"/></div></figure></div><div class="ab cl ko kp gp kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="hb hc hd he hf"><h1 id="1ff6" class="lb lc hi bd ld le mq lg lh li mr lk ll lm ms lo lp lq mt ls lt lu mu lw lx ly bi translated">(差不多)就这样了！</h1><blockquote class="jt"><p id="10a2" class="ju jv hi bd jw jx jy jz ka kb kc js dx translated">你现在有了一个可以工作的Twitter机器人，你可以连接到任何你能想到的数据，只要它在:D的互联网上</p></blockquote><p id="c7ef" class="pw-post-body-paragraph iv iw hi ix b iy kd ja jb jc ke je jf jg kf ji jj jk kg jm jn jo kh jq jr js hb bi translated">对于这篇文章中没有包括的所有细节，请随意浏览相应的存储库<a class="ae iu" href="https://github.com/rob-med/BotPitchfork" rel="noopener ugc nofollow" target="_blank">这里，</a>包括一个Flask应用程序，它在<a class="ae iu" href="http://heroku.com" rel="noopener ugc nofollow" target="_blank"> Heroku </a>上运行cron作业，以完全自动化监控和推文过程。</p><blockquote class="jt"><p id="3f42" class="ju jv hi bd jw jx jy jz ka kb kc js dx translated">快乐的推特！</p></blockquote><p id="cbbe" class="pw-post-body-paragraph iv iw hi ix b iy kd ja jb jc ke je jf jg kf ji jj jk kg jm jn jo kh jq jr js hb bi translated">如果这个指南激励你去创造一些很酷的❤，请在评论中告诉我</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="mw kn l"/></div></figure><p id="3d94" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">TL；DR:这篇文章向您展示了如何使用Dashblock通过API从任何网站检索数据，并创建一个Tweepy连接到这样的API的Twitter bot。</strong></p><p id="94ca" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有用的链接:</p><ul class=""><li id="353d" class="mx my hi ix b iy iz jc jd jg mz jk na jo nb js nc nd ne nf bi translated">Github库(源代码):<a class="ae iu" href="https://github.com/rob-med/BotPitchfork" rel="noopener ugc nofollow" target="_blank">https://github.com/rob-med/BotPitchfork</a></li><li id="b45d" class="mx my hi ix b iy ng jc nh jg ni jk nj jo nk js nc nd ne nf bi translated">微博直播机器人:<a class="ae iu" href="https://twitter.com/isharenewmusic" rel="noopener ugc nofollow" target="_blank"> @isharenewmusi </a> c</li><li id="491c" class="mx my hi ix b iy ng jc nh jg ni jk nj jo nk js nc nd ne nf bi translated">反馈？<a class="ae iu" href="https://twitter.com/rob_medico" rel="noopener ugc nofollow" target="_blank">在Twitter上找到我</a></li></ul></div></div>    
</body>
</html>