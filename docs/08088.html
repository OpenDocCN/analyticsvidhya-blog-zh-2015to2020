<html>
<head>
<title>Why use Nginx? Flask, Django, ROR, NodeJS are not Production Server.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么要用Nginx？Flask、Django、ROR、NodeJS不是生产服务器。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/why-use-nginx-for-flask-django-ror-d31a00de2141?source=collection_archive---------1-----------------------#2020-07-17">https://medium.com/analytics-vidhya/why-use-nginx-for-flask-django-ror-d31a00de2141?source=collection_archive---------1-----------------------#2020-07-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="168d" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">我们为什么要在Flask、Django、Ruby on Rails、NodeJS等应用前使用Nginx这种web服务器？</h2></div><p id="3e26" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我将在这里谈论<strong class="iz hj"> Flask </strong>，但这适用于所有框架，如<strong class="iz hj"> Django、Ruby on Rails、NodeJS等。</strong></p><p id="0ff7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你有兴趣知道，如何用uWSGI和Nginx部署Flask应用程序，请查看<a class="ae jt" rel="noopener" href="/@maanavshah/deploy-flask-applications-with-uwsgi-and-nginx-on-ubuntu-18-04-2a47f378c3d2">这个</a>。</p><p id="98af" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您已经构建了Flask web应用程序，并且正在部署站点。这是你的第一个小应用，你可能认为在<strong class="iz hj"> app.run </strong>上将<strong class="iz hj"> debug </strong>设置为<strong class="iz hj"> False </strong>就足够了。或许也启用<strong class="iz hj">线程</strong>？</p><p id="3630" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你真的不应该依赖那个。官方文件<a class="ae jt" href="https://flask.palletsprojects.com/en/1.1.x/deploying/" rel="noopener ugc nofollow" target="_blank">也不同意</a>。上面明确写着<strong class="iz hj"> Flask的内置服务器不适合生产。</strong></p><p id="6822" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在怎么办？好吧，没必要困惑。一切都很好，你只需要理解Flask development web服务器的意义，它缺少什么，用什么来代替。</p><h1 id="a76e" class="ju jv hi bd jw jx jy jz ka kb kc kd ke io kf ip kg ir kh is ki iu kj iv kk kl bi translated">Flask的内置网络服务器</h1><p id="d008" class="pw-post-body-paragraph ix iy hi iz b ja km ij jc jd kn im jf jg ko ji jj jk kp jm jn jo kq jq jr js hb bi translated">内置的Flask web服务器是为了方便开发而提供的。</p><p id="9ce5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有了它，你可以在本地机器上访问你的应用程序，而不必设置其他服务，让它们很好地一起运行。然而，它一次只能由一个人使用，并且是这样建造的。它也可以为静态文件服务，但是与为快速服务而构建的工具相比，它的速度非常慢。当只有一个人访问它的时候，这并不重要，所以它非常适合它的用途。</p><p id="14c9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当在生产环境中运行web应用程序时，您希望它能够处理多个用户和多个请求，而那些优秀的人员不必为加载页面和静态文件而等待太长时间。</p><h1 id="82c1" class="ju jv hi bd jw jx jy jz ka kb kc kd ke io kf ip kg ir kh is ki iu kj iv kk kl bi translated">生产堆栈</h1><p id="8365" class="pw-post-body-paragraph ix iy hi iz b ja km ij jc jd kn im jf jg ko ji jj jk kp jm jn jo kq jq jr js hb bi translated">一个生产设置通常由多个组件组成，每个组件的设计和构建都是为了真正擅长某一特定的事情。他们速度快，可靠，非常专注。</p><p id="7a2e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">就像内置web服务器的情况一样，与整个系统的通信是通过HTTP进行的。一个请求进来并到达第一个组件——一个专用的<strong class="iz hj">网络服务器</strong>。它非常擅长从磁盘读取静态文件(例如CSS文件)和处理多个请求。当一个请求不是一个静态文件，而是意味着你所有的时候，它会沿着堆栈向下传递。</p><p id="59aa" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">应用服务器</strong>获得这些奇特的请求，并将它们的信息转换成框架可用的Python对象。人们一致同意的一个规范描述了这是如何发生的—<a class="ae jt" href="https://en.wikipedia.org/wiki/Web_Server_Gateway_Interface" rel="noopener ugc nofollow" target="_blank"><strong class="iz hj">【WSGI】</strong></a>。</p><p id="50b7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你的Flask应用程序实际上并不像你认为的服务器那样运行——等待请求并对它们做出反应。它可以被看作是一个由应用服务器调用的函数，被提供请求对象。</p><p id="e6fa" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，应用程序服务器将运行应用程序的输出打包成一个HTTP响应，并传递回web服务器，再传递给用户。</p><h1 id="5296" class="ju jv hi bd jw jx jy jz ka kb kc kd ke io kf ip kg ir kh is ki iu kj iv kk kl bi translated">结论</h1><p id="e72e" class="pw-post-body-paragraph ix iy hi iz b ja km ij jc jd kn im jf jg ko ji jj jk kp jm jn jo kq jq jr js hb bi translated">如果你想在生产中运行Flask，确保使用一个生产就绪的web服务器，如<strong class="iz hj"> Nginx </strong>，并让你的应用程序由一个<strong class="iz hj"> WSGI </strong>应用服务器处理，如<strong class="iz hj"> Gunicorn </strong>。</p><p id="8bc5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您计划在Heroku上运行，那么会隐式地提供一个web服务器。您只需要在Procfile中指定一个命令来运行应用服务器(同样，Gunicorn也可以)。</p><p id="b3e0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">就是这样。希望这有所帮助。</p><p id="1e52" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你喜欢这篇文章，如果你能通过电子邮件把它发给朋友，或者在推特或脸书上分享，我会非常感激。谢谢大家！</p></div></div>    
</body>
</html>