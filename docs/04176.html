<html>
<head>
<title>Azure Machine Learning Services — MLOps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Azure机器学习服务——MLOps</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/azure-machine-learning-services-mlops-c0fde346a8ff?source=collection_archive---------11-----------------------#2020-03-08">https://medium.com/analytics-vidhya/azure-machine-learning-services-mlops-c0fde346a8ff?source=collection_archive---------11-----------------------#2020-03-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="86f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Azure机器学习服务拥有端到端的数据科学生命周期流程。这意味着我们可以开发出模型，然后包装起来投入生产。然后我们可以用REST API创建模型文件并部署为docker映像。然后，可以将模型映像部署到Azure kubernetes容器中，并作为REST API部署给其他应用程序使用。</p><p id="96c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里是数据科学应用生命周期流程以及数据科学家和机器学习或AI工程师的职责。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/9584dfd37920fbd85a4aad86c2cea8f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MEoUfeWtl3VmgU9Dafei_w.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">MlOps生命周期</figcaption></figure><p id="9e99" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从左到右:图的左侧是数据工程师和数据科学家一起工作的地方，或者有时只是做数据工程的数据科学家。通过查看特定用例的不同数据源，然后尝试找到用例所需的适当特性。一旦特征被提取，则数据被标记用于预测。</p><p id="bab1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个过程是重复循环的过程，直到数据科学家能够找到正确的特征，然后验证不同的机器学习算法，以找到适合用例的算法。通常这个过程会花费很多时间。为了提高尝试不同模型和调整它的效率，请尝试Azure机器学习服务-自动化ML选项。自动ML通过各种滑雪套件算法运行，并为数据集找到最佳模型。</p><p id="7735" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦找到最佳模型，现在就该准备生产了。通常最好的模型被存储为pickle文件。对于pickle文件，我们需要让机器学习或人工智能工程师创建生产部署代码。</p><p id="0350" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要将最佳模型部署到生产中，需要编写评分文件，该文件将执行数据工程自动化任务，以创建用于模型的正确数据集。然后加载pickle文件，然后预测结果。现在，分数文件被构建为Flask REST api，因此任何下游系统都可以使用该api。</p><p id="0d91" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了进行部署，我们将使用Azure DevOps。由ML/AI工程师和数据科学家创建源代码存储在Github存储库中。因此，我们可以实施持续集成和持续部署。</p><p id="f6bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Azure DevOps代码可从以下网址获得:</p><p id="1729" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jt" href="https://github.com/balakreshnan/mlops" rel="noopener ugc nofollow" target="_blank">https://github.com/balakreshnan/mlops</a></p><p id="1fdd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先通过定义管道yaml文件来构建构建管道。然后配置构建。现在为build选择存储代码的repo。如果您想进行连续构建或基于手动触发，您可以进行配置。</p><p id="4ba2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来构建发布管道。按照本教程中的步骤操作:</p><p id="94ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jt" href="https://github.com/balakreshnan/mlops2020/tree/master/feb2020/lab-guide" rel="noopener ugc nofollow" target="_blank">https://github . com/balakreshnan/mlops 2020/tree/master/feb 2020/lab-guide</a></p><p id="5dfa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的例子有3个任务，一个是更新python 3.6，然后安装python的所有依赖库或包。最后一个运行bash脚本来运行deploy rest api脚本来创建rest api。</p><p id="5567" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您可以构建和运行发布管道，构建和发布可能需要30到40分钟。等待整个任务完成。最后，您应该看到rest api url，然后进行测试。此外，如果你登录Azure机器学习服务工作区，你可以看到部署在AKS集群的REST API。</p><p id="c6f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您可以看到构建和部署任务是如何自动化的，如何无缝地部署机器学习模型，以及如何显示其他业务应用程序使用REST API的价值。</p><p id="d879" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Rest API实现还将记录推理的分数，然后将其发送到事件中心保存以备将来使用，并且还基于使用流分析的规则，我们可以使用Azure函数启用重新训练过程，以更新带有一些注释的评分代码。此外，流分析可以将数据存储在Azure SQL中，用于进一步的Power BI报告，以观察性能漂移。</p></div></div>    
</body>
</html>