<html>
<head>
<title>How to run a data science project with GPU on an old computer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在旧电脑上用GPU运行数据科学项目</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-run-a-data-science-project-with-gpu-on-an-old-computer-330805898d08?source=collection_archive---------13-----------------------#2020-05-22">https://medium.com/analytics-vidhya/how-to-run-a-data-science-project-with-gpu-on-an-old-computer-330805898d08?source=collection_archive---------13-----------------------#2020-05-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="e419" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">能用就用，不要浪费！</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/656ebfbc7e103f29e3e556fcdd71ff9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eWraNnXv8xFIxbeO"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">沙哈达特·拉赫曼在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h2 id="da0a" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">介绍</h2><p id="b7b3" class="pw-post-body-paragraph kt ku hi kv b kw kx ij ky kz la im lb kg lc ld le kk lf lg lh ko li lj lk ll hb bi translated">我在2014年购买了这台电脑，但通常情况下，我只在我的MacBook上工作，这台电脑只用于简单的网络浏览和备份照片。自从2018年我报读了MSc数据科学课程，没有GPU处理器的Macbooks处理图像数据太慢了，所以我购买了一个NVIDIA GeForce GTX 1050 Ti显卡(它只有HKD 550，很便宜)安装在我的PC上。</p><p id="f86d" class="pw-post-body-paragraph kt ku hi kv b kw lm ij ky kz ln im lb kg lo ld le kk lp lg lh ko lq lj lk ll hb bi translated">OS:Ubuntu 18.04 LTS <br/> CPU:英特尔酷睿I5–4570 @ 3.2 GHz x4<br/>RAM:16GB<br/>HDD:500 GB SSD<br/>显卡:英伟达GeForce GTX 1050 Ti</p><h2 id="56ad" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">程序:</h2><p id="3e18" class="pw-post-body-paragraph kt ku hi kv b kw kx ij ky kz la im lb kg lc ld le kk lf lg lh ko li lj lk ll hb bi translated">1.安装Ubuntu 18.04 LTS服务器<br/> 2。安装CUDA工具包10 &amp; CuDNN 7 &amp; NCCL 2 <br/> 3。安装Anaconda &amp;配置以便远程使用</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h2 id="739d" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated"><strong class="ak">#安装Ubuntu 18.04 LTS服务器</strong></h2><p id="0709" class="pw-post-body-paragraph kt ku hi kv b kw kx ij ky kz la im lb kg lc ld le kk lf lg lh ko li lj lk ll hb bi translated">由于我只能通过SSH和Juypter笔记本远程使用这台电脑，所以我将安装Ubuntu 18.04 LTS服务器。Ubuntu Desktop和Ubuntu Server的区别在于安装和使用的GUI界面。基本上，安装Ubuntu Desktop和安装其他任何软件是一样的。但是Ubuntu Server使用的是进程驱动菜单。</p><p id="20db" class="pw-post-body-paragraph kt ku hi kv b kw lm ij ky kz ln im lb kg lo ld le kk lp lg lh ko lq lj lk ll hb bi translated">Ubuntu 18.04 LTS桌面或服务器ISO可在此下载:</p><p id="d45e" class="pw-post-body-paragraph kt ku hi kv b kw lm ij ky kz ln im lb kg lo ld le kk lp lg lh ko lq lj lk ll hb bi translated">桌面:<a class="ae jn" href="http://ftp.cuhk.edu.hk/pub/Linux/ubuntu-releases/18.04/ubuntu-18.04.4-desktop-amd64.iso" rel="noopener ugc nofollow" target="_blank">http://FTP . cuhk . edu . hk/pub/Linux/Ubuntu-releases/18.04/Ubuntu-18 . 04 . 4-desktop-amd64 . iso</a></p><p id="0fcd" class="pw-post-body-paragraph kt ku hi kv b kw lm ij ky kz ln im lb kg lo ld le kk lp lg lh ko lq lj lk ll hb bi translated">服务器:<a class="ae jn" href="http://ftp.cuhk.edu.hk/pub/Linux/ubuntu-releases/18.04/ubuntu-18.04.4-live-server-amd64.iso" rel="noopener ugc nofollow" target="_blank">http://FTP . cuhk . edu . hk/pub/Linux/Ubuntu-releases/18.04/Ubuntu-18 . 04 . 4-live-server-amd64 . iso</a></p><p id="e99a" class="pw-post-body-paragraph kt ku hi kv b kw lm ij ky kz ln im lb kg lo ld le kk lp lg lh ko lq lj lk ll hb bi translated">安装方法可以参考下面杰克·沃伦关于techrepublic.com的文章</p><div class="lr ls ez fb lt lu"><a href="https://www.techrepublic.com/article/how-to-install-ubuntu-server-18-04/" rel="noopener  ugc nofollow" target="_blank"><div class="lv ab dw"><div class="lw ab lx cl cj ly"><h2 class="bd hj fi z dy lz ea eb ma ed ef hh bi translated">如何安装Ubuntu Server 18.04</h2><div class="mb l"><h3 class="bd b fi z dy lz ea eb ma ed ef dx translated">非常云友好的Ubuntu Server 18.04的安装与其前辈略有不同。这里是…</h3></div><div class="mc l"><p class="bd b fp z dy lz ea eb ma ed ef dx translated">www.techrepublic.com</p></div></div><div class="md l"><div class="me l mf mg mh md mi jh lu"/></div></div></a></div><p id="5a10" class="pw-post-body-paragraph kt ku hi kv b kw lm ij ky kz ln im lb kg lo ld le kk lp lg lh ko lq lj lk ll hb bi translated">记住，无论安装桌面版还是服务器版，重启后都需要运行更新。</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="3510" class="jv jw hi mk b fi mo mp l mq mr"># System update &amp; upgrade<em class="ms"><br/></em><strong class="mk hj">users@ds</strong>:<strong class="mk hj">~/</strong>$<em class="ms">sudo apt-get update</em></span><span id="32a1" class="jv jw hi mk b fi mt mp l mq mr"><strong class="mk hj">users@ds</strong>:<strong class="mk hj">~/</strong>$<em class="ms">sudo apt-get upgrade</em></span></pre></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="abc5" class="pw-post-body-paragraph kt ku hi kv b kw lm ij ky kz ln im lb kg lo ld le kk lp lg lh ko lq lj lk ll hb bi translated"><strong class="kv hj"> #安装CUDA工具包10 </strong></p><p id="1ecf" class="pw-post-body-paragraph kt ku hi kv b kw lm ij ky kz ln im lb kg lo ld le kk lp lg lh ko lq lj lk ll hb bi translated">因为需要使用Tensorflow配合GPU进行计算，所以我们需要安装CUDA、CuDNN7、NCCL 2等软件包。</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="8ace" class="jv jw hi mk b fi mo mp l mq mr"># Install other importance packages<br/><strong class="mk hj">sysadmin@ds</strong>:<strong class="mk hj">~/</strong>$sudo apt-get install build-essential dkms freeglut3 freeglut3-dev libxi-dev libxmu-dev</span><span id="98a5" class="jv jw hi mk b fi mt mp l mq mr"><strong class="mk hj">sysadmin@ds</strong>:<strong class="mk hj">~/</strong>$<em class="ms">wget </em><a class="ae jn" href="https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/cuda-repo-ubuntu1804_10.0.130-1_amd64.deb" rel="noopener ugc nofollow" target="_blank"><em class="ms">https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/cuda-repo-ubuntu1804_10.0.130-1_amd64.deb</em></a></span><span id="94e4" class="jv jw hi mk b fi mt mp l mq mr"><strong class="mk hj">sysadmin@ds</strong>:<strong class="mk hj">~/</strong>$sudo apt-key adv — fetch-keys <a class="ae jn" href="https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/7fa2af80.pub" rel="noopener ugc nofollow" target="_blank">https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/7fa2af80.pub</a></span><span id="19e4" class="jv jw hi mk b fi mt mp l mq mr"><strong class="mk hj">sysadmin@ds</strong>:<strong class="mk hj">~/</strong>$sudo apt-get update</span><span id="0539" class="jv jw hi mk b fi mt mp l mq mr"><strong class="mk hj">sysadmin@ds</strong>:<strong class="mk hj">~/</strong>$sudo dpkg -i cuda-repo-ubuntu1804_10.0.130–1_amd64.deb</span></pre><p id="a022" class="pw-post-body-paragraph kt ku hi kv b kw lm ij ky kz ln im lb kg lo ld le kk lp lg lh ko lq lj lk ll hb bi translated">##安装CuDNN 7和NCCL 2</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="ba01" class="jv jw hi mk b fi mo mp l mq mr"><strong class="mk hj">sysadmin@ds</strong>:<strong class="mk hj">~/</strong>$wget <a class="ae jn" href="http://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/x86_64/nvidia-machine-learning-repo-ubuntu1804_1.0.0-1_amd64.deb" rel="noopener ugc nofollow" target="_blank">http://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/x86_64/nvidia-machine-learning-repo-ubuntu1804_1.0.0-1_amd64.deb</a></span><span id="062f" class="jv jw hi mk b fi mt mp l mq mr"><strong class="mk hj">sysadmin@ds</strong>:<strong class="mk hj">~/</strong>$sudo apt install ./nvidia-machine-learning-repo-ubuntu1804_1.0.0–1_amd64.deb</span><span id="dbdd" class="jv jw hi mk b fi mt mp l mq mr"><strong class="mk hj">sysadmin@ds</strong>:<strong class="mk hj">~/</strong>$sudo apt-get update</span><span id="c421" class="jv jw hi mk b fi mt mp l mq mr"><strong class="mk hj">sysadmin@ds</strong>:<strong class="mk hj">~/</strong>$apt-get install — no-install-recommends nvidia-driver-418</span><span id="7330" class="jv jw hi mk b fi mt mp l mq mr"><strong class="mk hj">sysadmin@ds</strong>:<strong class="mk hj">~/</strong>$reboot</span></pre><p id="3359" class="pw-post-body-paragraph kt ku hi kv b kw lm ij ky kz ln im lb kg lo ld le kk lp lg lh ko lq lj lk ll hb bi translated">##重新启动计算机</p><p id="3c22" class="pw-post-body-paragraph kt ku hi kv b kw lm ij ky kz ln im lb kg lo ld le kk lp lg lh ko lq lj lk ll hb bi translated">重启后，键入:nvidia-smi，安装正常，似乎没有问题。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mu"><img src="../Images/10854a4e2e5c08013cb20d11b6349160.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3nW82_QsPnlauV8p5Cm_Rw.png"/></div></div></figure></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="09f3" class="pw-post-body-paragraph kt ku hi kv b kw lm ij ky kz ln im lb kg lo ld le kk lp lg lh ko lq lj lk ll hb bi translated"><strong class="kv hj">#安装Anaconda &amp;配置以远程使用</strong></p><p id="b1e3" class="pw-post-body-paragraph kt ku hi kv b kw lm ij ky kz ln im lb kg lo ld le kk lp lg lh ko lq lj lk ll hb bi translated">Anaconda是专门为数据科学和机器学习工作流设计的，它是一个开源的包管理器、环境管理器以及Python和R编程语言的发行版。</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="1a4f" class="jv jw hi mk b fi mo mp l mq mr"># Download Anaconda Python 3.7:<br/><strong class="mk hj">sysadmin@ds</strong>:<strong class="mk hj">~/</strong>$wget <a class="ae jn" href="https://repo.anaconda.com/archive/Anaconda3-2020.02-Linux-x86_64.sh" rel="noopener ugc nofollow" target="_blank">https://repo.anaconda.com/archive/Anaconda3-2020.02-Linux-x86_64.sh</a></span></pre><p id="46d7" class="pw-post-body-paragraph kt ku hi kv b kw lm ij ky kz ln im lb kg lo ld le kk lp lg lh ko lq lj lk ll hb bi translated">安装方法可以参考下面Lisa Tagliaferri关于digitalocean.com的文章</p><div class="lr ls ez fb lt lu"><a href="https://www.digitalocean.com/community/tutorials/how-to-install-anaconda-on-ubuntu-18-04-quickstart" rel="noopener  ugc nofollow" target="_blank"><div class="lv ab dw"><div class="lw ab lx cl cj ly"><h2 class="bd hj fi z dy lz ea eb ma ed ef hh bi translated">如何在Ubuntu 18.04上安装Anaconda【快速入门】| DigitalOcean</h2><div class="mb l"><h3 class="bd b fi z dy lz ea eb ma ed ef dx translated">Anaconda是一个为数据科学和机器学习工作流而设计的开源包管理器，环境…</h3></div><div class="mc l"><p class="bd b fp z dy lz ea eb ma ed ef dx translated">www.digitalocean.com</p></div></div><div class="md l"><div class="mv l mf mg mh md mi jh lu"/></div></div></a></div><p id="c383" class="pw-post-body-paragraph kt ku hi kv b kw lm ij ky kz ln im lb kg lo ld le kk lp lg lh ko lq lj lk ll hb bi translated">要创建一个jupyter_notebook_config.py文件，并注释掉所有默认值，可以使用以下命令行:</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="f61f" class="jv jw hi mk b fi mo mp l mq mr"><strong class="mk hj">sysadmin@ds</strong>:<strong class="mk hj">~/</strong>$jupyter notebook --generate-config</span></pre><p id="5e3b" class="pw-post-body-paragraph kt ku hi kv b kw lm ij ky kz ln im lb kg lo ld le kk lp lg lh ko lq lj lk ll hb bi translated">对于远程访问，我们需要设置Jupyter笔记本的密码，可以使用下面的命令行::</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="2b48" class="jv jw hi mk b fi mo mp l mq mr"><strong class="mk hj">sysadmin@ds</strong>:<strong class="mk hj">~/</strong>$jupyter notebook password</span></pre><p id="22ad" class="pw-post-body-paragraph kt ku hi kv b kw lm ij ky kz ln im lb kg lo ld le kk lp lg lh ko lq lj lk ll hb bi translated">设置密码后，我们需要修改Jupyter笔记本的配置文件，你可以在$home/中找到该文件。jupyter/jupyter _ notebook _ config . py:</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="bb4d" class="jv jw hi mk b fi mo mp l mq mr"><strong class="mk hj">sysadmin@ds</strong>:<strong class="mk hj">~/</strong>$cd .jupyter<br/><strong class="mk hj">sysadmin@ds</strong>:<strong class="mk hj">~/.jupyter</strong>$nano jupyter_notebook_config.py</span><span id="3cdb" class="jv jw hi mk b fi mt mp l mq mr">change the following item:</span><span id="7454" class="jv jw hi mk b fi mt mp l mq mr">c.NotebookApp.ip = <strong class="mk hj">'0.0.0.0'<br/></strong>c.NotebookApp.open_browser = <strong class="mk hj">False</strong></span></pre><p id="c612" class="pw-post-body-paragraph kt ku hi kv b kw lm ij ky kz ln im lb kg lo ld le kk lp lg lh ko lq lj lk ll hb bi translated">创建jupyter.services</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="536d" class="jv jw hi mk b fi mo mp l mq mr"><strong class="mk hj">sysadmin@ds</strong>:<strong class="mk hj">~/</strong>$nano /etc/systemd/system/jupyter.services</span><span id="dfb7" class="jv jw hi mk b fi mt mp l mq mr">[Unit]<br/>Description=Jupyter Notebook</span><span id="b46d" class="jv jw hi mk b fi mt mp l mq mr">[Service]<br/>Type=simple<br/>PIDFile=/run/jupyter.pid<br/>ExecStart=/bin/bash -c ". /home/sysadmin/anaconda3/bin/activate;jupyter-notebook"<br/>User=sysadmin<br/>Group=sysadmin<br/>WorkingDirectory=/home/sysadmin/data<br/>Restart=always<br/>RestartSec=10</span><span id="2deb" class="jv jw hi mk b fi mt mp l mq mr">[Install]<br/>WantedBy=multi-user.target</span></pre><p id="6788" class="pw-post-body-paragraph kt ku hi kv b kw lm ij ky kz ln im lb kg lo ld le kk lp lg lh ko lq lj lk ll hb bi translated">现已启用如下服务:</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="ef86" class="jv jw hi mk b fi mo mp l mq mr"><strong class="mk hj">sysadmin@ds</strong>:<strong class="mk hj">~/</strong>$sudo systemctl enable jupyter.services</span><span id="c903" class="jv jw hi mk b fi mt mp l mq mr"><strong class="mk hj">sysadmin@ds</strong>:<strong class="mk hj">~/</strong>$sudo systemctl daemon-reload</span><span id="50a3" class="jv jw hi mk b fi mt mp l mq mr"><strong class="mk hj">sysadmin@ds</strong>:<strong class="mk hj">~/</strong>$sudo systemctl restart jupyter.services</span></pre><p id="aa7f" class="pw-post-body-paragraph kt ku hi kv b kw lm ij ky kz ln im lb kg lo ld le kk lp lg lh ko lq lj lk ll hb bi translated">该服务现已启动。您可以按如下方式进行测试:</p><pre class="iy iz ja jb fd mj mk ml mm aw mn bi"><span id="9397" class="jv jw hi mk b fi mo mp l mq mr"><strong class="mk hj">sysadmin@ds</strong>:<strong class="mk hj">~/</strong>$systemctl -a | grep jupyter<br/> jupyter.services      loaded active running Jupyter Notebook</span></pre><p id="3593" class="pw-post-body-paragraph kt ku hi kv b kw lm ij ky kz ln im lb kg lo ld le kk lp lg lh ko lq lj lk ll hb bi translated">现在，Jupyter笔记本可以通过互联网访问！！！</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="8cc8" class="pw-post-body-paragraph kt ku hi kv b kw lm ij ky kz ln im lb kg lo ld le kk lp lg lh ko lq lj lk ll hb bi translated">感谢阅读！如果你喜欢这篇文章，请通过鼓掌来感谢你的支持(👏🏼)按钮，或者通过共享这篇文章让其他人可以找到它。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="7c47" class="pw-post-body-paragraph kt ku hi kv b kw lm ij ky kz ln im lb kg lo ld le kk lp lg lh ko lq lj lk ll hb bi translated">参考:</p><div class="lr ls ez fb lt lu"><a rel="noopener follow" target="_blank" href="/@joelzhang/setting-up-jupyter-notebook-server-as-service-in-ubuntu-16-04-116cf8e84781"><div class="lv ab dw"><div class="lw ab lx cl cj ly"><h2 class="bd hj fi z dy lz ea eb ma ed ef hh bi translated">在Ubuntu 16.04中将jupyter笔记本服务器设置为服务</h2><div class="mb l"><h3 class="bd b fi z dy lz ea eb ma ed ef dx translated">步骤1:验证jupyter笔记本电脑的位置:</h3></div><div class="mc l"><p class="bd b fp z dy lz ea eb ma ed ef dx translated">medium.com</p></div></div></div></a></div><div class="lr ls ez fb lt lu"><a rel="noopener follow" target="_blank" href="/@maniac.tw/ubuntu-18-04-安裝-nvidia-driver-418-cuda-10-tensorflow-1-13-a4f1c71dd8e5"><div class="lv ab dw"><div class="lw ab lx cl cj ly"><h2 class="bd hj fi z dy lz ea eb ma ed ef hh bi">Ubuntu 18.04 安裝 NVIDIA Driver 418 &amp; CUDA 10 &amp; TensorFlow 1.13</h2><div class="mb l"><h3 class="bd b fi z dy lz ea eb ma ed ef dx">作業系統：Kubuntu 18.04 (Ubuntu 的 KDE 版本)
顯示卡：NVIDIA GeForce GTX 1080 Ti
預計目標是可以成功執行 TensorFlow 1.13 的 GPU 版本。</h3></div><div class="mc l"><p class="bd b fp z dy lz ea eb ma ed ef dx translated">medium.com</p></div></div></div></a></div><div class="lr ls ez fb lt lu"><a href="https://www.tensorflow.org/install/gpu#software_requirements" rel="noopener  ugc nofollow" target="_blank"><div class="lv ab dw"><div class="lw ab lx cl cj ly"><h2 class="bd hj fi z dy lz ea eb ma ed ef hh bi translated">GPU支持| TensorFlow</h2><div class="mb l"><h3 class="bd b fi z dy lz ea eb ma ed ef dx translated">注意:GPU支持适用于带有CUDA卡的Ubuntu和Windows。TensorFlow GPU支持需要…</h3></div><div class="mc l"><p class="bd b fp z dy lz ea eb ma ed ef dx translated">www.tensorflow.org</p></div></div><div class="md l"><div class="mw l mf mg mh md mi jh lu"/></div></div></a></div></div></div>    
</body>
</html>