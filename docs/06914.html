<html>
<head>
<title>Flask — Flask-Restful — Marshmallow- SqlAlchemy Suit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">烧瓶-烧瓶-Restful-棉花糖- SqlAlchemy套装</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/flask-flask-restful-marshmallow-sqlalchemy-suit-e3fb880064a8?source=collection_archive---------8-----------------------#2020-06-07">https://medium.com/analytics-vidhya/flask-flask-restful-marshmallow-sqlalchemy-suit-e3fb880064a8?source=collection_archive---------8-----------------------#2020-06-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="790f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">姜戈的另一个选择。</p><p id="1105" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你是Python爱好者，你可能已经听说过Django和Flask。除了它的文档和社区之外，我喜欢Django的一点是它强大的<a class="ae jd" href="https://en.wikipedia.org/wiki/Object-relational_mapping" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> ORM </strong> </a> <strong class="ih hj">，</strong>它允许你的代码与市场上几乎大多数流行的数据库进行交互，只需要做一些小的设置。所以，如果你需要从MySql转换到ProgresSQl，Django允许你只需要在settings.py文件中做一点小小的改变就可以了，如果没有Django ORM，这需要做很多工作。</p><p id="4fa6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一方面，我们有烧瓶。</p><p id="36d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">与Django相比，Flask是一个更小的框架，它没有本地ORM，但我喜欢Flask的一点是，你可以快速地从零开始创建一个小应用程序，而不需要很多东西，很多时候你甚至不知道它们是干什么用的。</p><p id="0b07" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">那么，再次使用Flask有什么好处呢Django:</p><ol class=""><li id="68d5" class="je jf hi ih b ii ij im in iq jg iu jh iy ji jc jj jk jl jm bi translated">速度</li><li id="7fd1" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">简单</li><li id="0eb9" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">易于部署</li><li id="1974" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">许多预定义的模板用作容器</li><li id="a100" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">如果你需要扩展应用程序，有一个大的社区为你能想到的几乎所有东西开发新的包。</li></ol><p id="47ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我想和大家分享一个用Flask开发的关于聊天室的小应用:</p><p id="eb41" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">该应用程序包含以下功能:</strong></p><ol class=""><li id="a7a6" class="je jf hi ih b ii ij im in iq jg iu jh iy ji jc jj jk jl jm bi translated">一个简单的聊天室</li><li id="ba0f" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">只需要用户名的简单登录</li><li id="e563" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">每条消息都保存在一个SQlite数据库中(只是为了练习的效果，你可以很容易地用另一个数据库<a class="ae jd" href="https://github.com/handersonc/chatapi/blob/master/main.py#L17" rel="noopener ugc nofollow" target="_blank">来改变这个数据库)</a></li><li id="8597" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">浏览器只允许一个会话。</li><li id="862c" class="je jf hi ih b ii jn im jo iq jp iu jq iy jr jc jj jk jl jm bi translated">有一个小机器人请求关于股票的报价，所以如果你写命令“/stock= <stock_code>”，你将得到一个股票报价。</stock_code></li></ol><p id="8815" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，解释这个项目(下面提供了github链接):</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es js"><img src="../Images/b5d4a8cb51e5c38be98843dc51881159.png" data-original-src="https://miro.medium.com/v2/resize:fit:420/format:webp/1*-EZ0tAoEkmHq4glTL0HepQ.png"/></div><figcaption class="ka kb et er es kc kd bd b be z dx translated">1.代码的结构</figcaption></figure><p id="08ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://github.com/handersonc/chatapi/blob/master/main.py" rel="noopener ugc nofollow" target="_blank"> main.py </a>文件包含flask主应用程序。</p><p id="c1fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">app.db是SQlite数据库</p><p id="641b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">templates文件夹是默认文件夹，当你使用<a class="ae jd" href="https://jinja.palletsprojects.com/en/2.11.x/" rel="noopener ugc nofollow" target="_blank"> Jinja </a>时，Flask在这里寻找html模板非常有用。</p><h2 id="b4d2" class="ke kf hi bd kg kh ki kj kk kl km kn ko iq kp kq kr iu ks kt ku iy kv kw kx ky bi translated"><strong class="ak">APP的架构:</strong></h2><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es kz"><img src="../Images/fc61361f8d29502a5cc40decd90511b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dd-JiXukuI3sdmPl0aZ2dA.png"/></div></div></figure><p id="751c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">烧瓶APP: </strong></p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es le"><img src="../Images/58843eac1a2abf59b815315871c2afd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:928/format:webp/1*xSZvlAcKtpSJhA5dTF5s6Q.png"/></div></figure><p id="8ae4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个项目中有四个重要的包。其中一些是我几乎在每个项目中使用的:</p><p id="84d4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> Flask-Resful(第46行):</strong>这是我最喜欢的创建API的包。在下面的代码行中有一个这样的例子，为bot创建请求股票报价的API。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es lf"><img src="../Images/c8f84a453c44a7331b6d54db3a5a3965.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*2_cUKWXgmzhr_FiOyJrLAA.png"/></div></figure><p id="f947" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> Marshmallow(第20行):</strong>这在创建restful API时非常重要，因为它允许序列化和反序列化json格式输入和输出。我喜欢这个包，因为它加快了验证输入的过程。要了解更多信息，请点击<a class="ae jd" href="https://marshmallow.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank">这里</a></p><p id="742c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> SQLAlchemy(第17和23行):</strong>这是基本的设置。然后<a class="ae jd" href="https://github.com/handersonc/chatapi/blob/master/main.py#L15" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> DB </strong> </a> <strong class="ih hj"> </strong>对象将允许您连接到数据库。</p><p id="2939" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> LoginManager(第25行到第27行):</strong>这个包提供了登录，您将在文件的第34行和第35行看到，这里我们有在应用程序中登录和注销的路径。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es lg"><img src="../Images/a95d8450c9727f645cd3905503d0b589.png" data-original-src="https://miro.medium.com/v2/resize:fit:622/format:webp/1*U1qI6NgIJ4hI1FSxVZfLoA.png"/></div></figure><p id="485b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> SocketIO(第29行):</strong> Socketio通过使用套接字在前端和后端之间创建一个通道，帮助实时查看聊天室中的消息。因此，这个库为后端提供了一组函数，并提供了一个javascript SDK来从前端发出事件。</p><p id="2680" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在前端你会看到socket.on函数，它向后端的flask路由“消息”通道发送消息。</p><p id="9d77" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="lh"> SocketIo后端:</em></p><p id="5069" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://github.com/handersonc/chatapi/blob/master/templates/chat.html" rel="noopener ugc nofollow" target="_blank">https://github . com/handersonc/chatapi/blob/master/templates/chat . html</a></p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es li"><img src="../Images/6e50fb6af3934bab453af6fac4ab4f4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J-OmJHixpLvuKUU8k5jTow.png"/></div></div></figure><p id="0d96" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">SocketIo后端:</p><p id="717e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://github.com/handersonc/chatapi/blob/master/app/handlers/socket.py" rel="noopener ugc nofollow" target="_blank">https://github . com/handersonc/chatapi/blob/master/app/handlers/socket . py</a></p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lj"><img src="../Images/7c996024c33f96f7e2476467bc6406c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7qmhFVL6eJeuiu-E01cLug.png"/></div></div></figure><h2 id="bd2d" class="ke kf hi bd kg kh ki kj kk kl km kn ko iq kp kq kr iu ks kt ku iy kv kw kx ky bi translated"><strong class="ak">运行项目:</strong></h2><p id="2ec2" class="pw-post-body-paragraph if ig hi ih b ii lk ik il im ll io ip iq lm is it iu ln iw ix iy lo ja jb jc hb bi translated">按照自述文件中的说明进行操作:</p><div class="lp lq ez fb lr ls"><a href="https://github.com/handersonc/chatapi" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab dw"><div class="lu ab lv cl cj lw"><h2 class="bd hj fi z dy lx ea eb ly ed ef hh bi translated">handersonc/chatapi</h2><div class="lz l"><h3 class="bd b fi z dy lx ea eb ly ed ef dx translated">在GitHub上创建一个帐户，为handersonc/chatapi的开发做出贡献。</h3></div><div class="ma l"><p class="bd b fp z dy lx ea eb ly ed ef dx translated">github.com</p></div></div><div class="mb l"><div class="mc l md me mf mb mg jy ls"/></div></div></a></div><h2 id="d6f5" class="ke kf hi bd kg kh ki kj kk kl km kn ko iq kp kq kr iu ks kt ku iy kv kw kx ky bi translated"><strong class="ak">概要:</strong></h2><p id="8db6" class="pw-post-body-paragraph if ig hi ih b ii lk ik il im ll io ip iq lm is it iu ln iw ix iy lo ja jb jc hb bi translated">如果您刚开始使用python。我建议选择市场上的一个框架。Flask和Django提供并实现了很多好的实践，帮助你加速开发过程。</p><p id="302e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你正在开发一个小的后台系统，开发团队很小(一到三个)，你需要从零开始开发，不需要太多的设置，减少学习曲线，我推荐Flask，Jinja和WTform，它们是一个很好的组合。如果你正在开发一个restfull API，我强烈推荐Flask、Flask-restful和Marshmallow来将数据序列化和反序列化到JSON并返回。</p><p id="c457" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你正在开始的项目，它将是一个大系统，开发团队会更多，我建议使用Django，它也有一个大的社区，也许学习曲线比Flask稍大，但会强加一组更明确的最佳实践，最终会提高代码的质量。</p><h2 id="889f" class="ke kf hi bd kg kh ki kj kk kl km kn ko iq kp kq kr iu ks kt ku iy kv kw kx ky bi translated">参考资料:</h2><div class="lp lq ez fb lr ls"><a href="https://flask.palletsprojects.com/en/1.1.x/" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab dw"><div class="lu ab lv cl cj lw"><h2 class="bd hj fi z dy lx ea eb ly ed ef hh bi translated">欢迎使用Flask - Flask文档(1.1.x)</h2><div class="lz l"><h3 class="bd b fi z dy lx ea eb ly ed ef dx translated">欢迎阅读Flask的文档。开始安装，然后了解快速入门概述。有…</h3></div><div class="ma l"><p class="bd b fp z dy lx ea eb ly ed ef dx translated">flask.palletsprojects.com</p></div></div><div class="mb l"><div class="mh l md me mf mb mg jy ls"/></div></div></a></div><div class="lp lq ez fb lr ls"><a href="https://marshmallow.readthedocs.io/en/stable/" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab dw"><div class="lu ab lv cl cj lw"><h2 class="bd hj fi z dy lx ea eb ly ed ef hh bi translated">棉花糖:简化的对象序列化-棉花糖3.6.1文档</h2><div class="lz l"><h3 class="bd b fi z dy lx ea eb ly ed ef dx translated">marshmallow是一个ORM/ODM/framework无关的库，用于转换复杂的数据类型，例如…</h3></div><div class="ma l"><p class="bd b fp z dy lx ea eb ly ed ef dx translated">棉花糖. readthedocs.io</p></div></div></div></a></div><div class="lp lq ez fb lr ls"><a href="https://www.sqlalchemy.org/" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab dw"><div class="lu ab lv cl cj lw"><h2 class="bd hj fi z dy lx ea eb ly ed ef hh bi translated">SQLAlchemy——Python的数据库工具包</h2><div class="lz l"><h3 class="bd b fi z dy lx ea eb ly ed ef dx translated">SQLAlchemy是Python SQL工具包和对象关系映射器，它为应用程序开发人员提供了全部的能力和…</h3></div><div class="ma l"><p class="bd b fp z dy lx ea eb ly ed ef dx translated">www.sqlalchemy.org</p></div></div></div></a></div><div class="lp lq ez fb lr ls"><a href="https://www.djangoproject.com/" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab dw"><div class="lu ab lv cl cj lw"><h2 class="bd hj fi z dy lx ea eb ly ed ef hh bi translated">姜戈</h2><div class="lz l"><h3 class="bd b fi z dy lx ea eb ly ed ef dx translated">Django软件基金会非常重视我们开发人员、用户和社区的多样性。我们心烦意乱…</h3></div><div class="ma l"><p class="bd b fp z dy lx ea eb ly ed ef dx translated">www.djangoproject.com</p></div></div><div class="mb l"><div class="mi l md me mf mb mg jy ls"/></div></div></a></div></div></div>    
</body>
</html>