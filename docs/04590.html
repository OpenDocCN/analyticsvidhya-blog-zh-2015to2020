<html>
<head>
<title>Configuring Apache Spark and Jupyter Notebooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">配置Apache Spark和Jupyter笔记本电脑</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/configuring-apache-spark-and-jupyter-notebooks-1f2c67a3ef3c?source=collection_archive---------16-----------------------#2020-03-25">https://medium.com/analytics-vidhya/configuring-apache-spark-and-jupyter-notebooks-1f2c67a3ef3c?source=collection_archive---------16-----------------------#2020-03-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/ce3cba06e8e6595d68343583179f65ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zIL9C-9KaLww-1RxxfyUSA.png"/></div></div></figure><p id="eddc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">理论上，像Scikit-learn这样的框架可以很好地展示基于矩阵分解的推荐是如何工作的，但当涉及到为大规模受众或公司构建真正的推荐服务时，这些框架就会失败，因为现在我们正在处理TB或在某些情况下PB的数据。Apache spark是解决这个问题的最佳方案之一。</p><p id="058d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">根据定义，Spark是一种快如闪电的集群计算技术，专为快速计算而设计。</p><p id="bdbe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">本教程重点介绍了Apache spark在独立模式下的安装，虽然人们可以在Hadoop或yarn上使用spark，但我们现在将坚持独立模式，然后配置它与Jupyter笔记本一起工作，并为PySpark、Scala、SQL内核配置Apache Toree。所有的安装都是在Linux上完成的，但是在windows或mac上没有太大的区别。</p><p id="a0a9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤1 </strong> -安装Apache Spark(版本- 2.3.4)</p><p id="43f4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下载阿帕奇火花-</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="c0ea" class="jx jy hi jt b fi jz ka l kb kc">[temp-user@abhinav ~]$ sudo wget -o /opt/<a class="ae kd" href="http://www-eu.apache.org/dist/spark/spark-2.3.4/spark-2.3.4-bin-hadoop2.7.tgz" rel="noopener ugc nofollow" target="_blank">spark-2.3.4-bin-hadoop2.7.tgz</a> <a class="ae kd" href="http://www-eu.apache.org/dist/spark/spark-2.3.4/spark-2.3.4-bin-hadoop2.7.tgz" rel="noopener ugc nofollow" target="_blank">http://www-eu.apache.org/dist/spark/spark-2.3.4/spark-2.3.4-bin-hadoop2.7.tgz</a></span></pre><p id="6864" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">提取阿帕奇火花-</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="dd06" class="jx jy hi jt b fi jz ka l kb kc">[temp-user@abhinav ~]$ sudo tar -xvf spark-2.3.4-bin-hadoop2.7.tgz</span></pre><p id="134b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建一个符号链接以备将来使用-</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="64bf" class="jx jy hi jt b fi jz ka l kb kc">[temp-user@abhinav ~]$ ln -s /opt/spark-2.3.4-bin-hadoop2.7 /opt/spark</span></pre><p id="3b17" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">启动Spark集群的主机-如果安装在本地机器上，那么不需要指定网关或端口。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="ac1e" class="jx jy hi jt b fi jz ka l kb kc">[temp-user@abhinav ~]$ cd /opt/spark/sbin<br/>[temp-user@abhinav ~]$ sudo ./start-master.sh -host &lt;ip&gt; -port 8000</span></pre><p id="0517" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">盯着星火团主的一个工人-</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="d956" class="jx jy hi jt b fi jz ka l kb kc">[temp-user@abhinav ~]$ sudo ./start-slave.sh spark://&lt;Master-ip&gt;:8000</span></pre><p id="2e65" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这样做后，访问http:// <ip> :8081/你会看到火花仪表板。在您的情况下，正在运行的应用程序和已完成的应用程序选项卡以及工作器选项卡将为空。</ip></p><figure class="jo jp jq jr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ke"><img src="../Images/40528ac8ec709ff3b186cf29fb6e5877.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oM-cYDXOmrZgwz1YDgJTtg.png"/></div></div></figure><p id="fda1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤2- </strong>安装Jupyter</p><p id="7c72" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下载Jupyter笔记本-从<a class="ae kd" href="https://www.anaconda.com/distribution/" rel="noopener ugc nofollow" target="_blank"><em class="kf">https://www.anaconda.com/distribution/</em></a><em class="kf"/>下载最新的anaconda发行版使用<em class="kf"> </em>一个<em class="kf"> </em> <a class="ae kd" href="https://repo.anaconda.com/archive/Anaconda3-2020.02-Linux-x86_64.sh" rel="noopener ugc nofollow" target="_blank"> 64位(x86) </a>安装程序。</p><p id="d63b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">安装它是非常容易的-所有的安装位置将在过程本身被询问。</p><p id="1ea1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">注意:确保bashrc路径条目已完成。</strong></p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="1f74" class="jx jy hi jt b fi jz ka l kb kc">[temp-user@abhinav ~]$sudo ./Anaconda3–2019.03-Linux-x86_64.sh</span></pre><p id="4ab7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">运行它-如果在本地机器上运行它，那么不需要指定ip，但要确保端口不会互相冲突。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="bd66" class="jx jy hi jt b fi jz ka l kb kc">[temp-user@abhinav ~]$sudo jupyter-notebook -ip=&lt;ip&gt; -port=8080</span></pre><p id="9ca1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">步骤3- </strong>安装Apache Toree(版本-0.2.0)如果您发现我们没有使用0.3，因为默认情况下它不支持pyspark内核，安装它是另一项任务，所以现在我们跳过它。</p><p id="936f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">安装它-</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="eb32" class="jx jy hi jt b fi jz ka l kb kc">[temp-user@abhinav ~]$ pip install toree==0.2.0</span></pre><p id="be80" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">用Toree内核配置Jupyter</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="f781" class="jx jy hi jt b fi jz ka l kb kc">[temp-user@abhinav ~]$ sudo jupyter toree install -interpreters=Scala,PySpark -spark_home=/opt/spark/</span></pre><p id="19b9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在打开Jupyter笔记本网址，它看起来应该是这样的</p><figure class="jo jp jq jr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kg"><img src="../Images/93842b8da5fda2a7ccd6bba51e5db3d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lNh7ew6iXXKEVkX0RVDMhg.png"/></div></div></figure><p id="d7f3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以看到Pyspark和Scala笔记本现在都可以使用了。</p><p id="bef8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这就完成了Apache Spark在独立模式下的安装以及Jupyter笔记本和Apache Toree的安装。</p><p id="a350" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">谢谢！！！！！</p></div></div>    
</body>
</html>