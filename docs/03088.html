<html>
<head>
<title>Remove Image background and Contour</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">移除图像背景和轮廓</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/computer-vision-color-space-conversion-and-contouring-4bd03f2480d4?source=collection_archive---------14-----------------------#2020-01-15">https://medium.com/analytics-vidhya/computer-vision-color-space-conversion-and-contouring-4bd03f2480d4?source=collection_archive---------14-----------------------#2020-01-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="649f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">计算机视觉是从图像中提取数据的科学。它已被应用于各种实时应用，如人脸识别、运动跟踪、图像标记等。计算机视觉始于20世纪60年代的大学研究，并在20世纪90年代加速发展，在2020年的今天仍然非常受欢迎。在这篇文章中，我将介绍通向计算机视觉的踏脚石，即色彩空间转换和轮廓绘制。</p><h1 id="2c08" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">议程</h1><ul class=""><li id="3c1d" class="kb kc hi ih b ii kd im ke iq kf iu kg iy kh jc ki kj kk kl bi translated">将图像的背景色转换为黑色</li><li id="67fd" class="kb kc hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">将图像转换为灰度</li><li id="527a" class="kb kc hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">在图像上查找并绘制轮廓</li></ul><h1 id="243d" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">什么是色彩空间？</h1><p id="346d" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">色彩空间只不过是一个色彩模型，由3-4个主要成分组成，所有可能的颜色都是从这些成分中派生出来的。颜色范围是使用原色分量导出的数字元组。有许多可用的色彩空间，如RGB、CMY、HSV等。最广泛使用的是RGB和HSV色彩空间。如图1所示，颜色是基于3种主要成分的变化而产生的。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es ku"><img src="../Images/6c10f48adcaac33f00c0b952dc668eaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DB9gTORpLJMg9NRV4v4_og.jpeg"/></div></div><figcaption class="lg lh et er es li lj bd b be z dx translated">来源:迈克尔·霍瓦特，根据知识共享署名-同样分享3.0无版权许可协议提供</figcaption></figure><h1 id="b654" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">什么是轮廓？</h1><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lk"><img src="../Images/fa81b3db4b8e53cca0068ba6e4bb24e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/1*lWc7nNRAbSdOY4ff64SoxA.png"/></div><figcaption class="lg lh et er es li lj bd b be z dx translated">来源:t恤区，通过Indiamart.com</figcaption></figure><p id="0224" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">轮廓是覆盖整个物体形状的任何物体的边界线。下图中t恤边界上的绿色边界线描绘了轮廓。</p><p id="7f0d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它有助于物体检测、形状预测等。</p><h1 id="b4c5" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">我们来编码吧！</h1><p id="345e" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">我对这段代码使用cv2和numpy包。</p><p id="3dba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在相邻的c <em class="ll"> ode片段的第一行，</em>在读取了变量“<em class="ll"> img </em>中的苹果图像后，我将图像的色彩空间转换为HSV。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lm"><img src="../Images/28d35ee28aae152dfa8bda96dc4c647c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*zQvB1LNDwqzMl1jVCUEtZg.png"/></div></figure><p id="c954" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，使用色调，饱和度，价值(HSV)的组合，我已经定义了较低和较高的灰色阵列。Python的inRange函数从苹果的“<em class="ll"> hsv </em>”图像中提取位于“<em class="ll"> lower_gray </em>”到“<em class="ll"> upper_gray </em>”颜色范围内的所有像素，并创建图像的灰色遮罩。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es ln"><img src="../Images/bd59c6afb44b6587e5529cd90342e3c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hFotvwj6ByeufrAmEnyohw.png"/></div></div><figcaption class="lg lh et er es li lj bd b be z dx translated">原始输入图像来源:盖蒂图片社iStock</figcaption></figure><p id="dec7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是我们想要提取苹果图像而不是背景。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lo"><img src="../Images/3a6a1f4229874cbbfc60bc902f9bab48.png" data-original-src="https://miro.medium.com/v2/resize:fit:514/format:webp/1*zxMVVNeo0KmGTgZoFg_oqA.png"/></div></figure><p id="fdf4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以，让我们使用bitwise_not反转灰色遮罩。在倒置的图像中，我们看到的是背景是黑色的，而苹果区域是白色的。</p><p id="13ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它基本上是一个中间切开苹果形状的黑色纸板。</p><p id="df5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，如果我们把原来的苹果图像放在这个剪出的纸板上，我们将得到带有苹果图像的黑色背景。</p><p id="fdd1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我使用逐位and将反转的蒙版覆盖在原始图像上。结果如下:</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lp"><img src="../Images/774336f2beaed59220152a553cef5df4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A3ZKCD4hqUK-qt91gKosFQ.png"/></div></div></figure><p id="aa05" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们已经成功地将图像的背景转换为黑色，同时保持了苹果图像的完整性。耶！</p><p id="0104" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们进入下一步的轮廓。</p><p id="6b60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们首先使用cvtColor函数将前面步骤的最终图像("<em class="ll"> img_res" </em>)转换为灰度图像，从而将其转换为单通道图像，这是cv2.findContours函数所需要的。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lq"><img src="../Images/f25c9a46aca610392f535d1f795bf7e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RCks5f0vDv8KSm_HsYOlsw.png"/></div></div></figure><p id="53a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在接下来的几行代码中，我将选择面积最大的轮廓。</p><p id="4fe7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，我们使用drawContours函数在图像上绘制轮廓。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lr"><img src="../Images/0ac2270d74068a2cc16aa896f429f9a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*KeQj9--SYMalnM8MEqyeRA.png"/></div></figure><p id="3ec6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以在这里找到完整的代码。</p><p id="840e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们完事了。恭喜你！我们已经成功地将图像的背景色转换为黑色，并在图像上画出了苹果的轮廓。你现在已经步入了计算机视觉的世界。尽情享受吧！😊</p></div></div>    
</body>
</html>