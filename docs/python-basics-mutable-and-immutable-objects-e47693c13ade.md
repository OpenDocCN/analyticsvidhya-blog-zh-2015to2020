# Python 编程 101:可变和不可变对象

> 原文：<https://medium.com/analytics-vidhya/python-basics-mutable-and-immutable-objects-e47693c13ade?source=collection_archive---------17----------------------->

![](img/d3ea59285dcafefad16cc4dd5204ddd6.png)

这个世界上有一些事情比真实更真实:太阳从东方升起，在西方落下，我们在这里的时间是有限的，在 Python 中一切都是对象。你会发现，在最后一种情况下，我们正在谈论的对象是非常抽象的，因为你不能用手抓住它们，但一旦你理解了 OOP(面向对象编程)背后的概念，你的视野就会扩大。这一次我们将关注 Python 中的对象可能具有的一对特征:它们的可变和不可变属性，这些属性将允许它们按照(或不按照)用户希望的方式变形。

首先，让我们看看 Python 必须提供的几个有用的内置函数。

## ID()

这个函数允许用户看到一个对象的身份，在 C 语言中是地址。用户只需在括号内输入对象的名称，函数将返回 ID 号。该函数返回的数字是唯一的，但它可能会根据您执行它的机器而有所不同；例如，每个公民都有一个社会安全号码，每个号码都是不同的，每个号码在一个人的一生中都是唯一的。但是这有什么用呢？如果您想确定一个对象在值被更改后是否保留了它的身份，这个函数可能是您的助手。

![](img/63fccc41356d708ac5ff59949e5a2b11.png)

## 类型()

“类型”功能将允许用户找出他正在处理的变量的类型。有些情况下，程序会变得比预期的要大，不可避免地会有一些混乱，你会发现自己忘记了正在处理的给定对象的数据类型。这个函数的语法也很简单，它只需要括号内的对象名，就这样，它将返回 vartype，这样你就可以继续编码了。

![](img/78040e468aa7fca7f16f915563f1129b.png)

既然我们已经解决了这个问题，那就让我们来看看这篇文章最重要的部分:

# 可变对象

![](img/4c3bc5a78359cbd81d97a4560fcd14bf.png)

每当一个对象被创建，固有地也有一个新的 ID 伴随着它。这个对象现在占用了内存空间，它就像新生儿的指纹一样独一无二。一个物体的可变特性意味着它可以被自由地修改，而它的身份将保持不变，以孩子为例，认为它会长大，也许会纹身，长胡子，但指纹会保留。在可以修改的 Python 对象中，您会发现您构建的列表、集合、字典和类。

上面，你可以看到一个名为“a”的新对象是如何创建的，然后一个值列表被分配给它；后来，我们将列表中的一个值替换为另一个值，该值甚至与其余的值不是同一类型，由于 Python 中列表的可变属性，这个 mod 没有问题。打印 ID 是为了证明即使对象被修改，内存中的地址也保持不变。

# 不可变对象

![](img/d213d0cfbc6fc3f9f1a2effd90997625.png)

按照可变对象背后的逻辑，我们现在可以推导出不可变对象背后的主要思想:它们不能被修改。在 Python 中不能被修改的对象中，你会发现整数、浮点数、字符串、unicode 和元组。与前面的属性不同，所讨论的对象在值改变后将不会保持相同的 ID，因为对象必须完全移动到内存中的新空间，因为它不能在当前位置被修改。例如，在一个视频游戏中，你可以选择一个魔术师作为你的化身，但如果你想让它成为一个士兵，你不能只给它一些装备，你必须完全改变化身。

在本例中，创建了一个保存字符串值的对象，然后试图修改字符串时出错(因为它在 Python 中具有不可变的属性)。在此之后，该值完全被另一个值所取代，当比较这两个 id 时，您可以看到它们是不同的，这意味着它们在内存中占据了两个不同的位置。

## 处理过程的差异

在 Python 中，访问一个不可变的对象是一个更快的过程，因为它保持与第一次实例化时相同，但是当你想改变它时，缺点就出现了。由于它必须在内存中保留新的空间并重新创建它，所以它将消耗更多的系统资源。另一方面，相反地，一个可变对象的处理方式是，由于其不断变化的容量，它更难处理，并且由于不需要额外的内存空间，修改起来更快。

## 函数如何处理可变和不可变的对象？

简而言之，函数可以通过值或引用来调用变量。两者的区别在于，在第一个例子中，变量被复制用于任何你想要的目的，而在第二个例子中，变量的 ID 是被传递的。事实是，为了避免改变可变变量的初始值，最好通过引用传递给函数，并且不可变变量可以通过值安全地传递，因为它不能被修改。

Python 中的可变和不可变属性组成了一种更有组织的编码方式；你必须首先思考和弄清楚你将如何编码和实现你的程序的结构，这样你就可以选择你将使用什么类型的对象。正确地使用你的对象将会产生一个更有效的程序，谁不想这样呢？

愿你的明天充满无 bug 代码！

南