<html>
<head>
<title>Face recognition using Open CV in Java</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用Java中的Open CV进行人脸识别</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/face-recognition-using-open-cv-in-java-791d246b4560?source=collection_archive---------9-----------------------#2020-01-14">https://medium.com/analytics-vidhya/face-recognition-using-open-cv-in-java-791d246b4560?source=collection_archive---------9-----------------------#2020-01-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/1f3de9dd1d4aa41d1982d35f32d791ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/format:webp/1*dKf1zpmKBIDmTHgo88rxGw.jpeg"/></div></figure><p id="e71f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这个操作中，我们使用opencv java来构建使用spring的应用程序。所以在这个博客中，你可以看到应用程序成功地完成了人脸检测。</p><p id="2ec6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">首先，我们看看如何将库导入到应用程序中</strong></p><p id="9e34" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">首先，从下载页面获取OpenCV <a class="ae jk" href="http://opencv.org/releases.html" rel="noopener ugc nofollow" target="_blank">的新版本，并将其解压到一个简单的位置，如<code class="du jl jm jn jo b">C:\OpenCV-2.4.6\</code>。我使用的是版本2.4.6，但是其他版本的步骤大致相同。</a></p><p id="27c1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，我们将OpenCV定义为Eclipse中的用户库，因此我们可以为任何项目重用该配置。启动Eclipse并从菜单中选择Window –&gt; Preferences。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es jp"><img src="../Images/1c58d77161c9015dc57a065c85f39bab.png" data-original-src="https://miro.medium.com/v2/resize:fit:530/format:webp/0*TIX5-me_X795FNyE.png"/></div></figure><p id="5f01" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在Java –&gt;构建路径–&gt;用户库下导航，然后单击新建…</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es ju"><img src="../Images/58448c72db1be7512a244b8967764660.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/0*fr_ANetqSOjNSAQM.png"/></div></figure><p id="e07d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为新库输入一个名称，例如OpenCV-2.4.6。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es jv"><img src="../Images/37cfe56ba17ff35a6e5ab898687f6274.png" data-original-src="https://miro.medium.com/v2/resize:fit:588/format:webp/0*pX02A69dbQUwK8So.png"/></div></figure><p id="a849" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在选择您的新用户库，并单击Add External JARs…</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es ju"><img src="../Images/4810db4253cbab0146a6915fe9e57880.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/0*FO7WFERvI7YcX6ko.png"/></div></figure><p id="8cc1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">浏览<code class="du jl jm jn jo b">C:\OpenCV-2.4.6\build\java\</code>并选择opencv-246.jar。添加jar后，扩展opencv-246.jar并选择本地库位置并按下Edit....</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es ju"><img src="../Images/9e60245ef151dc2113f1201743484060.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/0*loN7kfFrLBiUZsX1.png"/></div></figure><p id="fdd0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">选择外部文件夹…并浏览选择文件夹<code class="du jl jm jn jo b">C:\OpenCV-2.4.6\build\java\x64</code>。如果您有32位系统，您需要选择x86文件夹而不是x64。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es jw"><img src="../Images/29bb0fc59f2ae825391c7b3ed1a4e849.png" data-original-src="https://miro.medium.com/v2/resize:fit:1068/format:webp/0*5puhjZLlpqsQ6kuV.png"/></div></figure><p id="9a3d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您的用户库配置应该如下所示:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es ju"><img src="../Images/2ccb40701a3a0de7cf4219a437bc2a0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/0*X2-438dmU5Riqre4.png"/></div></figure><h1 id="7c4a" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">在新的Java项目上测试配置</h1><p id="d665" class="pw-post-body-paragraph im in hi io b ip kv ir is it kw iv iw ix kx iz ja jb ky jd je jf kz jh ji jj hb bi translated">现在开始创建一个新的Java项目。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es la"><img src="../Images/7062cf043eedc999d14c7c3768647a5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/0*25fjOvCD0zjgjIMO.png"/></div></figure><p id="1c0b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在Java设置步骤的库选项卡下，选择添加库…并选择OpenCV-2.4.6，然后单击完成。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/a481542ce6c3d96884adaa7a12b88adf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/0*lXSq8kfY7jmu1pQZ.png"/></div></figure><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/028101057293ed6be6d576cb4f23987f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1050/format:webp/0*hTzTSPw5SeAlk5CE.png"/></div></figure><p id="aca8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">库应该是这样的:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/e47a51f6c9bd61b8a896bd257b4eb50d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/0*K2VgPIBWmEDhVx-2.png"/></div></figure><p id="7697" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在您已经创建并配置了一个新的Java项目，是时候测试它了。</p><h1 id="6651" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">测试面部检测器</h1><p id="6f50" class="pw-post-body-paragraph im in hi io b ip kv ir is it kw iv iw ix kx iz ja jb ky jd je jf kz jh ji jj hb bi translated">现在获取Facedetector.class的代码</p><pre class="jq jr js jt fd ld jo le lf aw lg bi"><span id="df69" class="lh jy hi jo b fi li lj l lk ll">package com.ocr.ocrexample;<br/><br/>import org.opencv.core.*;<br/>import org.opencv.imgcodecs.Imgcodecs;<br/>import org.opencv.objdetect.CascadeClassifier;<br/>import org.springframework.web.multipart.MultipartFile;<br/><br/>import java.io.IOException;<br/><br/>import static java.lang.System.<em class="lm">loadLibrary</em>;<br/>import static org.opencv.imgproc.Imgproc.<em class="lm">rectangle</em>;<br/><br/><br/><br/>class  DetectFaceDemo {</span><span id="0845" class="lh jy hi jo b fi ln lj l lk ll"><br/>    public static void run(MultipartFile file) throws IOException {<br/><br/>        <em class="lm">loadLibrary</em>( Core.<em class="lm">NATIVE_LIBRARY_NAME </em>);<br/>        CascadeClassifier faceDetector = new CascadeClassifier();<br/>        faceDetector.load( "C:\\Users\\Desktop\\ocv\\.idea\\haarcascade_frontalface_alt.xml" );<br/><br/>        // Input image<br/><br/>        com.ocr.ocrexample.FileUploadController.<em class="lm">convert</em>(file);<br/>                Mat image = Imgcodecs.<em class="lm">imread</em>(String.<em class="lm">valueOf</em>(file));</span><span id="a473" class="lh jy hi jo b fi ln lj l lk ll">// Detecting faces<br/>        MatOfRect faceDetections = new MatOfRect();<br/>        faceDetector.detectMultiScale( image, faceDetections );<br/><br/>        // Creating a rectangular box showing faces detected<br/>        for (Rect rect : faceDetections.toArray()) {<br/>            <em class="lm">rectangle</em>( image, new Point( rect.x, rect.y ), new Point( rect.width + rect.x,<br/>                    rect.height + rect.y ), new Scalar( 0, 255, 0 ) );<br/>        }</span><span id="d0ea" class="lh jy hi jo b fi ln lj l lk ll"><br/>        // Saving the output image<br/>        String filename = "Ouput.jpg";<br/>        System.<em class="lm">out</em>.println("Face Detected Successfully ");<br/>        Imgcodecs.<em class="lm">imwrite</em>( "D:\\" + filename, image );<br/><br/><br/>    }<br/>    }</span></pre><p id="3730" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">从这段代码中，你可以得到一个绿色的输出框，显示人脸。</p><h2 id="e170" class="lh jy hi bd jz lo lp lq kd lr ls lt kh ix lu lv kl jb lw lx kp jf ly lz kt ma bi translated">输出</h2><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es mb"><img src="../Images/7cf2a3fb729407614f595336e9f45755.png" data-original-src="https://miro.medium.com/v2/resize:fit:554/format:webp/1*lPJTof6tsmgtADhjhJdcHA.jpeg"/></div><figcaption class="mc md et er es me mf bd b be z dx translated">输出</figcaption></figure><h2 id="0d92" class="lh jy hi bd jz lo lp lq kd lr ls lt kh ix lu lv kl jb lw lx kp jf ly lz kt ma bi translated">可以从公开的cv java中获取人脸识别。</h2><div class="mg mh ez fb mi mj"><a href="http://linkedin.com/in/ashan-lakmal" rel="noopener  ugc nofollow" target="_blank"><div class="mk ab dw"><div class="ml ab mm cl cj mn"><h2 class="bd hj fi z dy mo ea eb mp ed ef hh bi translated">Ashan Lakmal -软件工程师实习- Axiata数字实验室| LinkedIn</h2><div class="mq l"><h3 class="bd b fi z dy mo ea eb mp ed ef dx translated">查看Ashan Lakmal在全球最大的职业社区LinkedIn上的个人资料。亚山有4份工作列在他们的…</h3></div><div class="mr l"><p class="bd b fp z dy mo ea eb mp ed ef dx translated">linkedin.com</p></div></div><div class="ms l"><div class="mt l mu mv mw ms mx ik mj"/></div></div></a></div></div></div>    
</body>
</html>