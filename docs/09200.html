<html>
<head>
<title>An Introduction to Flask: A micro-framework</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Flask简介:一个微观框架</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/an-introduction-to-flask-a-micro-framework-f8b3d789e2a3?source=collection_archive---------23-----------------------#2020-08-28">https://medium.com/analytics-vidhya/an-introduction-to-flask-a-micro-framework-f8b3d789e2a3?source=collection_archive---------23-----------------------#2020-08-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/9e45bbddcec747e16a4211fa1231491f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h86VM6uaHueeX44wYwWNgQ.jpeg"/></div></div></figure><p id="b7d0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你好。考虑使用python开发web应用程序？也许你一定在寻找一个框架，或者如果你没有意识到的话，一个<em class="jo">框架</em>是一段代码，它使开发者的生活变得更容易。它让开发人员专注于应用程序的高级功能，并通过提供一些可重用或可扩展的代码来自行处理低级功能。在本文中，我将讨论一个这样的框架，它是为用python创建web应用程序而设计的，名为<strong class="is hj"> FLASK </strong>。</p><h1 id="da86" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">什么是烧瓶？</strong></h1><p id="0725" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">根据Flask的官网介绍，这是一个python微框架。就micro而言，这并不意味着它的功能更少，或者整个应用程序应该适合一个单独的python文件(尽管我们将看到这是可能的)。这是一个高度可扩展的框架，社区提供了许多扩展，但其思想是保持核心简单。默认情况下，Flask不包含数据库抽象层、表单验证等功能。但是这些可以通过使用扩展来添加。</p><p id="316e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本文中，我们将了解如何开始使用Flask，并创建一个非常基本的图书列表应用程序。(姑且称之为Flask _书架)</p><p id="c759" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在跳转到应用程序之前，我将首先讨论一些基本概念，如在您的计算机上安装Python，创建虚拟环境(建议更好地管理项目的依赖关系)以及安装Flask。让我们一个一个来看:</p><h1 id="9f69" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">安装Python </strong></h1><p id="a3fd" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">您可以访问python的官方网站(<a class="ae ks" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank">https://www.python.org/downloads/</a>)下载与您正在使用的OS对应的最新稳定版python安装程序并进行安装。</p><p id="a128" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用<strong class="is hj"> <em class="jo"> python —版本</em> </strong>验证是否安装成功。</p><h1 id="9545" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">创建并激活虚拟环境</strong></h1><p id="ffd0" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">虚拟环境是一组python库，每个项目一个。建议在虚拟环境中工作，因为不同的项目可能需要不同版本的python或python依赖项，并且在一个项目中使用一个版本的库可能会破坏其他一些项目的兼容性。</p><p id="d636" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请注意，我在整篇文章中都使用python 3，默认情况下，python 3使用“venv”模块来创建虚拟环境。但是如果你使用python 2，你必须安装一个额外的名为“virtualenv”的模块来创建一个虚拟环境。您可以查看<a class="ae ks" href="https://flask.palletsprojects.com/en/1.1.x/installation/" rel="noopener ugc nofollow" target="_blank">烧瓶安装</a>的官方文件，了解更多详细信息。</p><p id="fcdf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要遵循的步骤:</p><ul class=""><li id="a0d1" class="kt ku hi is b it iu ix iy jb kv jf kw jj kx jn ky kz la lb bi translated">创建项目目录。在这里我把它命名为<em class="jo">烧瓶_书架</em></li></ul><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="2d4c" class="ll jq hi lh b fi lm ln l lo lp">$ <em class="jo">mkdir flask_bookshelf</em></span></pre><ul class=""><li id="1217" class="kt ku hi is b it iu ix iy jb kv jf kw jj kx jn ky kz la lb bi translated">将您的工作目录更改为刚刚创建的目录</li></ul><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="032c" class="ll jq hi lh b fi lm ln l lo lp">$ <em class="jo">cd flask_bookshelf</em></span></pre><ul class=""><li id="b42a" class="kt ku hi is b it iu ix iy jb kv jf kw jj kx jn ky kz la lb bi translated">创建一个名为“venv”的虚拟环境。你想叫它什么都可以。</li></ul><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="3daa" class="ll jq hi lh b fi lm ln l lo lp">$ <em class="jo">python3 -m venv venv</em></span></pre><p id="1e70" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">(注意，它将在根目录下创建一个venv目录)</p><ul class=""><li id="244c" class="kt ku hi is b it iu ix iy jb kv jf kw jj kx jn ky kz la lb bi translated">激活环境</li></ul><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="6380" class="ll jq hi lh b fi lm ln l lo lp">$ <em class="jo">source venv/bin/activate </em></span><span id="1645" class="ll jq hi lh b fi lq ln l lo lp"><strong class="lh hj">or</strong> </span><span id="7434" class="ll jq hi lh b fi lq ln l lo lp">$ <em class="jo">. venv/bin/activate</em></span></pre><p id="9646" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">(现在，您会注意到＄( venv)出现在终端的开头，这意味着您处于venv激活的虚拟环境中)</p><h1 id="cbcd" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">安装砂箱</strong></h1><p id="4e82" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">在这里，我使用PIP来安装flask，因此，按照步骤，确保PIP安装在您的计算机上。在激活的venv中运行以下命令</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="86a3" class="ll jq hi lh b fi lm ln l lo lp">$ <em class="jo">pip install Flask</em></span></pre><p id="88c9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">好吧！我们现在已经准备好了设置，让我们花一点时间来了解我们正在构建什么，我们的<em class="jo">烧瓶_书架</em>将会是什么样子，我们可以用它做什么。</p><p id="51d7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的应用程序将是一个非常基本的图书列表应用程序。为了简单起见，我不打算将它与任何数据库连接，而是使用一个CSV文件来存储我们的图书详细信息。在后面的另一篇文章中，我可能会讨论如何将Flask应用程序连接到任何SQL或NoSQL数据库，但是对于这篇文章，我们不使用任何数据库。我也不打算在本文中讨论如何添加、删除或修改书籍的细节。但是我向您保证，在阅读完本文之后，您将对flask应用程序的工作原理有一个清晰的概念。</p><p id="564c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将为我们的应用程序创建以下两个端点，这将基本上在网页上显示相同的内容:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="c4f3" class="ll jq hi lh b fi lm ln l lo lp">GET /</span><span id="d11a" class="ll jq hi lh b fi lq ln l lo lp">GET /home</span></pre><p id="7591" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的项目结构将如下所示:</p><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/bdf6fe192abb20919e2f67ca00973ad4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ekg0f-ACH_AwOyniq9Ovtg.jpeg"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">项目结构</figcaption></figure><p id="9a88" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是Flask的基本结构。这里，我们在src中有两个目录，即静态目录和模板目录。Static保存所有静态文件，如样式表、资产(图像、视频、字体等。)在项目中使用等。而templates目录保存了将在浏览器上呈现的所有HTML页面。</p><p id="dcb8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们开始编码。</p><p id="2f3b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在根目录中创建一个名为“src”的目录。基本上，这将容纳我们的整个应用程序。</p><p id="afcc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在src目录中创建<em class="jo"> __init__。py </em>文件包含以下内容。它将告诉python src是一个包，并且它将作为我们应用程序的工厂。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="3b5f" class="ll jq hi lh b fi lm ln l lo lp"># __init__.py</span><span id="6035" class="ll jq hi lh b fi lq ln l lo lp">from flask import Flask</span><span id="a278" class="ll jq hi lh b fi lq ln l lo lp">app = Flask(__name__)<br/></span><span id="5647" class="ll jq hi lh b fi lq ln l lo lp">@app.route(‘/’)</span><span id="2d89" class="ll jq hi lh b fi lq ln l lo lp">def home():</span><span id="9d49" class="ll jq hi lh b fi lq ln l lo lp">    return “WELCOME TO FLASK_BOOKSHELF”</span></pre><p id="9907" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是最基础最完整的Flask app的样子。要进行验证，请使用以下命令运行此命令:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="2c5c" class="ll jq hi lh b fi lm ln l lo lp">$ <em class="jo">export FLASK_APP=src</em></span><span id="e5be" class="ll jq hi lh b fi lq ln l lo lp">$ <em class="jo">export FLASK_ENV=development</em></span><span id="1d2f" class="ll jq hi lh b fi lq ln l lo lp">$ <em class="jo">flask run</em></span></pre><p id="afd8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您将在终端中看到类似这样的内容:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="722e" class="ll jq hi lh b fi lm ln l lo lp"><em class="jo">* Serving Flask app “src” (lazy loading)</em></span><span id="3b25" class="ll jq hi lh b fi lq ln l lo lp"><em class="jo">* Environment: development</em></span><span id="f452" class="ll jq hi lh b fi lq ln l lo lp"><em class="jo">* Debug mode: on</em></span><span id="6c80" class="ll jq hi lh b fi lq ln l lo lp"><em class="jo">* Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)</em></span><span id="d779" class="ll jq hi lh b fi lq ln l lo lp"><em class="jo">* Restarting with stat</em></span><span id="8c5e" class="ll jq hi lh b fi lq ln l lo lp"><em class="jo">* Debugger is active!</em></span><span id="9398" class="ll jq hi lh b fi lq ln l lo lp"><em class="jo">* Debugger PIN: 272–048–342</em></span></pre><p id="17c7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，在您的浏览器中进入<a class="ae ks" href="http://127.0.0.1:5000/" rel="noopener ugc nofollow" target="_blank"><em class="jo">http://127 . 0 . 0 . 1:5000/</em></a><em class="jo"/>，您将看到欢迎消息，这意味着您的应用程序正在成功运行。</p><p id="adf5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们来理解这段代码和我们用来运行这段代码的命令。</p><ul class=""><li id="3e2a" class="kt ku hi is b it iu ix iy jb kv jf kw jj kx jn ky kz la lb bi translated">首先，我们在代码的第一行导入了FLASK类</li><li id="61b3" class="kt ku hi is b it lw ix lx jb ly jf lz jj ma jn ky kz la lb bi translated">我们创建了FLASK类的一个实例。第一个参数是应用程序的模块或包的名称。这是必要的，这样Flask就知道在哪里寻找模板、静态文件等。这就是为什么我们在这里使用了<em class="jo"> __name__ </em>。</li><li id="a4bc" class="kt ku hi is b it lw ix lx jb ly jf lz jj ma jn ky kz la lb bi translated">然后我们使用<em class="jo"> route() </em> decorator来设置URL，这将触发我们的方法<em class="jo"> home() </em>，在flask中，我们称之为视图。</li></ul><p id="5379" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了运行这个应用程序，我们使用了三个命令。在前两个命令中，我们设置了两个环境变量FLASK_APP和FLASK_ENV。(我使用导出来设置变量，因为我使用的是Mac OS，对于windows使用set也是一样)</p><ul class=""><li id="bb34" class="kt ku hi is b it iu ix iy jb kv jf kw jj kx jn ky kz la lb bi translated">设置FLASK_APP env变量将确保终端查看我们分配给它的模块/包中的Flask App实例。</li><li id="05c5" class="kt ku hi is b it lw ix lx jb ly jf lz jj ma jn ky kz la lb bi translated">FLASK_ENV是另一个变量，将其设置为“development”将在运行应用程序时启用调试模式。通过在调试模式下运行，您不需要在每次更改时重启或重新运行应用程序，您只需要重新加载浏览器，更改就会自动反映出来。</li></ul><p id="0340" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，从这里开始，您可以让它保持原样，并遵循其余的编码。</p><p id="3b0c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">设置完这些环境变量后，我们使用<em class="jo">烧瓶运行</em>来运行应用程序。默认情况下，它在端口5000运行服务器。</p><p id="a462" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">目前，我们的应用程序只显示欢迎信息。让我们修改我们的<em class="jo"> home() </em>方法来呈现一个HTML模板(<em class="jo"> src/templates/home.html </em>)以显示可用书籍的列表，从一个CSV文件(<em class="jo"> books.csv </em>)中读取它。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="e0c2" class="ll jq hi lh b fi lm ln l lo lp"># __init__.py</span><span id="50c0" class="ll jq hi lh b fi lq ln l lo lp">import csv</span><span id="8a07" class="ll jq hi lh b fi lq ln l lo lp">from flask import Flask, render_template</span><span id="a199" class="ll jq hi lh b fi lq ln l lo lp">app = Flask(__name__)<br/></span><span id="e74e" class="ll jq hi lh b fi lq ln l lo lp">def get_books():</span><span id="9f14" class="ll jq hi lh b fi lq ln l lo lp">    books = []</span><span id="7add" class="ll jq hi lh b fi lq ln l lo lp">    with open(‘books.csv’) as book_file:</span><span id="65c6" class="ll jq hi lh b fi lq ln l lo lp">        reader = csv.reader(book_file)</span><span id="a355" class="ll jq hi lh b fi lq ln l lo lp">        for row in reader:</span><span id="f1a5" class="ll jq hi lh b fi lq ln l lo lp">            books.append(row)</span><span id="be46" class="ll jq hi lh b fi lq ln l lo lp">    return books<br/></span><span id="2c80" class="ll jq hi lh b fi lq ln l lo lp">@app.route(‘/’)</span><span id="d9dc" class="ll jq hi lh b fi lq ln l lo lp">def home():</span><span id="ef53" class="ll jq hi lh b fi lq ln l lo lp">    books = get_books() </span><span id="7eb7" class="ll jq hi lh b fi lq ln l lo lp">    return render_template(“home.html”, books=books)</span></pre><p id="bf0c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在请注意，我已经从python导入了csv模块来读取<em class="jo"> books.csv </em>文件。为此，我创建了一个方法<em class="jo"> get_books() </em>，它返回一个图书列表(实际上是一个列表列表，其中每个列表包含book_id、标题和作者)。这是我们的csv文件的样子:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="28ac" class="ll jq hi lh b fi lm ln l lo lp">001,Notes from a Small Island,Bill Bryson</span><span id="4425" class="ll jq hi lh b fi lq ln l lo lp">002,The Lord of the Rings,J.R.R. Tolkien</span><span id="7d0f" class="ll jq hi lh b fi lq ln l lo lp">003,The Control of Nature,John McPhee</span><span id="eb9b" class="ll jq hi lh b fi lq ln l lo lp">004,Coming Into the Country,John McPhee</span><span id="77c1" class="ll jq hi lh b fi lq ln l lo lp">005,The Heidi Chronicles,Wendy Wasserstein</span><span id="2346" class="ll jq hi lh b fi lq ln l lo lp">006,The Power of One,Bryce Courtenay</span></pre><p id="f1fa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在在home方法中，我们返回一个叫做<em class="jo"> render_template() </em>的东西。Flask提供了一个方法，它从template文件夹中获取一个模板名或一个模板列表，并在调用时将其呈现到浏览器中。在这里，我们通过<em class="jo">home.html</em>得到渲染。我们还可以向它传递一些关键参数，这些参数将在模板的上下文中可用。这里我把书作为关键论点。我们将看到如何在我们的模板中使用它。</p><p id="c2fa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以，现在我们需要我们的模板<em class="jo">home.html</em>。让我们来创造它。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="da2e" class="ll jq hi lh b fi lm ln l lo lp">&lt;!-- home.html --&gt;<br/></span><span id="eb39" class="ll jq hi lh b fi lq ln l lo lp">&lt;!DOCTYPE html&gt;</span><span id="c2a4" class="ll jq hi lh b fi lq ln l lo lp">&lt;html lang="en"&gt;</span><span id="1ae1" class="ll jq hi lh b fi lq ln l lo lp">&lt;head&gt;</span><span id="7095" class="ll jq hi lh b fi lq ln l lo lp">  &lt;meta charset="UTF-8"&gt;</span><span id="e2e2" class="ll jq hi lh b fi lq ln l lo lp">  &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</span><span id="b289" class="ll jq hi lh b fi lq ln l lo lp">  &lt;link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}"&gt;</span><span id="5e63" class="ll jq hi lh b fi lq ln l lo lp">  &lt;title&gt;FLASK_BOOKSHELF&lt;/title&gt;</span><span id="6f3e" class="ll jq hi lh b fi lq ln l lo lp">&lt;/head&gt;</span><span id="3b59" class="ll jq hi lh b fi lq ln l lo lp">&lt;body&gt;</span><span id="637e" class="ll jq hi lh b fi lq ln l lo lp">  &lt;center&gt;</span><span id="304a" class="ll jq hi lh b fi lq ln l lo lp">    &lt;div&gt;</span><span id="3190" class="ll jq hi lh b fi lq ln l lo lp">      &lt;h1&gt;WELCOME TO FLASK_BOOKSHELF&lt;/h1&gt;</span><span id="fcf3" class="ll jq hi lh b fi lq ln l lo lp">      &lt;table&gt;</span><span id="6ef3" class="ll jq hi lh b fi lq ln l lo lp">        &lt;tr&gt;</span><span id="7155" class="ll jq hi lh b fi lq ln l lo lp">          &lt;th&gt;BOOK ID&lt;/th&gt;</span><span id="87ec" class="ll jq hi lh b fi lq ln l lo lp">          &lt;th&gt;TITLE&lt;/th&gt;</span><span id="6687" class="ll jq hi lh b fi lq ln l lo lp">          &lt;th&gt;AUTHOR&lt;/th&gt;</span><span id="b058" class="ll jq hi lh b fi lq ln l lo lp">        &lt;/tr&gt;</span><span id="b745" class="ll jq hi lh b fi lq ln l lo lp">        {% for book in books %}</span><span id="73eb" class="ll jq hi lh b fi lq ln l lo lp">          &lt;tr&gt;</span><span id="f30a" class="ll jq hi lh b fi lq ln l lo lp">            &lt;td&gt;{{ book[0]}}&lt;/td&gt;</span><span id="ab6b" class="ll jq hi lh b fi lq ln l lo lp">            &lt;td&gt;{{ book[1]}}&lt;/td&gt;</span><span id="1851" class="ll jq hi lh b fi lq ln l lo lp">            &lt;td&gt;{{ book[2]}}&lt;/td&gt;</span><span id="f26a" class="ll jq hi lh b fi lq ln l lo lp">          &lt;/tr&gt;</span><span id="405e" class="ll jq hi lh b fi lq ln l lo lp">        {% endfor %}</span><span id="b378" class="ll jq hi lh b fi lq ln l lo lp">      &lt;/table&gt;</span><span id="b23f" class="ll jq hi lh b fi lq ln l lo lp">    &lt;/div&gt;</span><span id="dac1" class="ll jq hi lh b fi lq ln l lo lp">  &lt;/center&gt;</span><span id="7549" class="ll jq hi lh b fi lq ln l lo lp">&lt;/body&gt;</span><span id="f427" class="ll jq hi lh b fi lq ln l lo lp">&lt;/html&gt;</span></pre><p id="c32e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">仔细研究后，你可能会发现它与普通的HTML文件有点不同。例如，我使用了<em class="jo">{ % for books in books % } { % end for % }</em>来循环从视图中作为参数传递的图书列表。另外，我已经使用了<em class="jo"> {{ book[i] }} </em>来访问book变量。这实际上是一个Jinja2模板特性，flask使用它来呈现模板。你可以在这里阅读更多关于它的信息。</p><p id="3fbb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在只需在浏览器中重新加载页面，瞧！我们在页面上展示了我们的书单。但是看起来很简单。让我们通过添加一个样式表(src/static/styles.css)来使它更吸引人一些。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="12ae" class="ll jq hi lh b fi lm ln l lo lp">/* styles.css */<br/></span><span id="3a6b" class="ll jq hi lh b fi lq ln l lo lp">h1 {</span><span id="bf66" class="ll jq hi lh b fi lq ln l lo lp">  color: teal;</span><span id="b863" class="ll jq hi lh b fi lq ln l lo lp">}</span><span id="2634" class="ll jq hi lh b fi lq ln l lo lp">table, th, td {</span><span id="0b37" class="ll jq hi lh b fi lq ln l lo lp">  border: 2px solid teal;</span><span id="201d" class="ll jq hi lh b fi lq ln l lo lp">  text-align: center;</span><span id="1b46" class="ll jq hi lh b fi lq ln l lo lp">}</span><span id="4e45" class="ll jq hi lh b fi lq ln l lo lp">th, td {</span><span id="fec5" class="ll jq hi lh b fi lq ln l lo lp">  padding: 15px;</span><span id="9ace" class="ll jq hi lh b fi lq ln l lo lp">}</span><span id="05e8" class="ll jq hi lh b fi lq ln l lo lp">th {</span><span id="a522" class="ll jq hi lh b fi lq ln l lo lp">  background-color: teal;</span><span id="8ad1" class="ll jq hi lh b fi lq ln l lo lp">  color: white;</span><span id="8302" class="ll jq hi lh b fi lq ln l lo lp">}</span></pre><p id="72c3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">重新加载页面，你会看到一个更好更干净的页面。我在这里没有添加很多样式，只是想展示我们如何使用静态目录来添加样式到我们的模板中。我们目前的产量:</p><figure class="lc ld le lf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/a1c9be4f854a8f0c28a266a13c8addbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZJOKWCfGAmrYbULC7kwXlg.jpeg"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">我们的烧瓶_书架运行的输出</figcaption></figure><p id="f514" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">看起来我们已经完成了图书列表应用程序，但是等等，我们要创建两个端点。记得吗？不要担心，因为我们将为两个端点显示相同的视图，我们不需要做太多，只需在当前路线<em class="jo"> '/' </em>下添加<em class="jo"> @app.route('/home') </em>，现在Flask将为两条路线呈现相同的<em class="jo"> home() </em>视图。<em class="jo"> __init__。py </em>现在看起来像这样:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="1d16" class="ll jq hi lh b fi lm ln l lo lp"># __init__.py<br/></span><span id="fc08" class="ll jq hi lh b fi lq ln l lo lp">import csv</span><span id="44ac" class="ll jq hi lh b fi lq ln l lo lp">from flask import Flask, render_template</span><span id="7f68" class="ll jq hi lh b fi lq ln l lo lp">app = Flask(__name__)</span><span id="c859" class="ll jq hi lh b fi lq ln l lo lp">def get_books():</span><span id="6a83" class="ll jq hi lh b fi lq ln l lo lp">    books = []</span><span id="6b3c" class="ll jq hi lh b fi lq ln l lo lp">    with open(‘books.csv’) as book_file:</span><span id="2015" class="ll jq hi lh b fi lq ln l lo lp">        reader = csv.reader(book_file)</span><span id="7a7d" class="ll jq hi lh b fi lq ln l lo lp">        for row in reader:</span><span id="d0ea" class="ll jq hi lh b fi lq ln l lo lp">            books.append(row)</span><span id="a7c7" class="ll jq hi lh b fi lq ln l lo lp">    return books<br/></span><span id="7db5" class="ll jq hi lh b fi lq ln l lo lp">@app.route(‘/’)</span><span id="50c2" class="ll jq hi lh b fi lq ln l lo lp">@app.route(‘/home’)</span><span id="bf8b" class="ll jq hi lh b fi lq ln l lo lp">def home():</span><span id="e787" class="ll jq hi lh b fi lq ln l lo lp">    books = get_books()</span><span id="5ec9" class="ll jq hi lh b fi lq ln l lo lp">    return render_template(“home.html”, books=books)</span></pre><p id="9077" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">恭喜你！我们已经完成了最基本的图书列表flask应用程序。让我们总结一下我们在整个过程中学到的东西:</p><ul class=""><li id="ad57" class="kt ku hi is b it iu ix iy jb kv jf kw jj kx jn ky kz la lb bi translated">使用python3中的venv模块创建和激活虚拟环境。</li><li id="fa7d" class="kt ku hi is b it lw ix lx jb ly jf lz jj ma jn ky kz la lb bi translated">安装烧瓶。</li><li id="e522" class="kt ku hi is b it lw ix lx jb ly jf lz jj ma jn ky kz la lb bi translated">为我们的应用程序创建端点。</li><li id="6bca" class="kt ku hi is b it lw ix lx jb ly jf lz jj ma jn ky kz la lb bi translated">在flask应用程序中使用模板。</li><li id="38cc" class="kt ku hi is b it lw ix lx jb ly jf lz jj ma jn ky kz la lb bi translated">在flask应用程序中使用静态文件。</li><li id="276a" class="kt ku hi is b it lw ix lx jb ly jf lz jj ma jn ky kz la lb bi translated">运行flask应用程序</li></ul><p id="8fa7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的应用程序非常简单，它只是显示了flask应用程序的基本结构，但是使用flask可以做更多的事情。有很多事情，比如将我们的应用程序连接到数据库，添加认证，使用Blueprint模块化项目结构，添加更多的端点来更新、删除或添加我们列表中的书籍等。我可能会在以后的文章中讨论其中的一些，但是如果你想自己学习，你可以随时查看官方的<a class="ae ks" href="https://flask.palletsprojects.com/en/1.1.x/" rel="noopener ugc nofollow" target="_blank"> flask文档</a>。</p></div><div class="ab cl mc md gp me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hb hc hd he hf"><p id="5927" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">感谢您的阅读。请在评论中告诉我你的反馈。</p></div></div>    
</body>
</html>