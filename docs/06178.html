<html>
<head>
<title>Exploratory Data Analysis on Haberman Survival Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">哈伯曼生存数据的探索性数据分析</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/exploratory-data-analysis-on-haberman-survival-data-78450fa0c418?source=collection_archive---------27-----------------------#2020-05-13">https://medium.com/analytics-vidhya/exploratory-data-analysis-on-haberman-survival-data-78450fa0c418?source=collection_archive---------27-----------------------#2020-05-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="9923" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">介绍</h1><p id="46ee" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们将以探索的方式分析哈伯曼生存数据。在深入分析之前，理解数据是非常重要的。</p><p id="bbb8" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">该数据主要处理乳腺癌数据，并试图描述是否有任何患有癌症的患者存活超过5年或少于5年。</p><p id="4799" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">因此，我们将首先加载数据，并注意数据中存在的各种功能和类别，以及对数据的预期。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="e508" class="kp ig hi kl b fi kq kr l ks kt">#Importing necessary packages for Analysis</span><span id="d38d" class="kp ig hi kl b fi ku kr l ks kt">import pandas as pd</span><span id="86bd" class="kp ig hi kl b fi ku kr l ks kt">import numpy as np</span><span id="1623" class="kp ig hi kl b fi ku kr l ks kt">import matplotlib.pyplot as plt</span><span id="0fc0" class="kp ig hi kl b fi ku kr l ks kt">import seaborn as sns</span><span id="8eb6" class="kp ig hi kl b fi ku kr l ks kt">haberman = pd.read_csv("haberman.csv")</span><span id="2819" class="kp ig hi kl b fi ku kr l ks kt">#For number of data points and features</span><span id="4551" class="kp ig hi kl b fi ku kr l ks kt">print(haberman.shape)</span><span id="238a" class="kp ig hi kl b fi ku kr l ks kt">#To know about the features</span><span id="e720" class="kp ig hi kl b fi ku kr l ks kt">print(haberman.columns)</span><span id="0dca" class="kp ig hi kl b fi ku kr l ks kt">#To know if the datapoints is balanced or not and to segregate the patients which</span><span id="07bb" class="kp ig hi kl b fi ku kr l ks kt">#Die at less than 5 years i.e denoted by "2" and who survive more than 5 years by "1"</span><span id="955d" class="kp ig hi kl b fi ku kr l ks kt">print(haberman['status'].value_counts())</span></pre><p id="b8bd" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">输出:</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="0021" class="kp ig hi kl b fi kq kr l ks kt">(306, 4)</span><span id="a04a" class="kp ig hi kl b fi ku kr l ks kt"> Index([‘age’, ‘year’, ‘nodes’, ‘status’], dtype=’object’) </span><span id="a06d" class="kp ig hi kl b fi ku kr l ks kt">1 225 </span><span id="84ce" class="kp ig hi kl b fi ku kr l ks kt">2 81 </span><span id="6864" class="kp ig hi kl b fi ku kr l ks kt">Name: status, dtype: int64</span></pre><h2 id="cd92" class="kp ig hi bd ih kv kw kx il ky kz la ip jo lb lc it js ld le ix jw lf lg jb lh bi translated">分析:</h2><ol class=""><li id="88a0" class="li lj hi jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq bi translated">Shape告诉我们，数据中有306个数据点和4列</li><li id="bdcb" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">此外，我们看到有四列，即年龄、年份、节点和状态，我们将简要讨论这些内容。</li><li id="7717" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">我们还可以看到，我们需要根据我们将进一步讨论的状态对数据进行分类，可以看到状态1有225个数据点，状态2有81个数据点。因此，数据是不平衡的，因为两种状态的数据点数量相差很大。</li></ol><h1 id="e686" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">特征</h1><p id="59cd" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">现在，我们将进一步讨论数据中存在的各种特征。</p><ol class=""><li id="dd75" class="li lj hi jf b jg kb jk kc jo lw js lx jw ly ka ln lo lp lq bi translated"><strong class="jf hj">年龄</strong>:这个特征告诉我们病人去做手术时的年龄。</li><li id="15a9" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated"><strong class="jf hj">年份</strong>:患者接受癌症手术的年份。</li><li id="a987" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated"><strong class="jf hj">淋巴结</strong>:患者体内的淋巴结数量。我们知道淋巴结疼痛或肿胀是癌症的常见症状。</li><li id="390c" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated"><strong class="jf hj">状态</strong>:该功能将患者分为两类，存活5年以上的患者被归类为<strong class="jf hj">状态1 </strong>，存活不到5年的患者被归类为<strong class="jf hj">状态2 </strong>。</li></ol><p id="4707" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">现在，我们将绘制年龄和节点之间的二维散点图，看看我们是否能获得任何见解。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="8f33" class="kp ig hi kl b fi kq kr l ks kt">haberman.plot(kind='scatter' ,x='age',y='nodes');</span><span id="23eb" class="kp ig hi kl b fi ku kr l ks kt">plt.title('Scatter Plot Age vs Nodes')</span><span id="956f" class="kp ig hi kl b fi ku kr l ks kt">plt.legend("Points")</span><span id="20e8" class="kp ig hi kl b fi ku kr l ks kt">plt.show()</span></pre><figure class="kg kh ki kj fd ma er es paragraph-image"><div class="er es lz"><img src="../Images/db634fea54ae5e0378efb463c2a7ca95.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/1*xypr3GSxiuSR9gjf61n9aA.png"/></div><figcaption class="md me et er es mf mg bd b be z dx translated">情节1</figcaption></figure><h2 id="ea6e" class="kp ig hi bd ih kv kw kx il ky kz la ip jo lb lc it js ld le ix jw lf lg jb lh bi translated">分析</h2><ol class=""><li id="5275" class="li lj hi jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq bi translated">我们可以看到年龄和节点之间的散点图很难解释并从中提取意义。</li><li id="0489" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">因为点是重叠的，并且我们不能在状态1和状态2的患者之间分离，因为这两个点是相同的颜色。</li></ol><p id="676a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">因此，我们转向更好的图，即SNS图，因为SNS图给出了比上述2-D散点图更好、更生动的图。</p><p id="a205" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们再次绘制年龄和节点之间的数据，但这次我们使用SNS图。</p><h1 id="d3b8" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">SNS(Seaborn)图</h1><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="ba7e" class="kp ig hi kl b fi kq kr l ks kt">sns.set_style("whitegrid")</span><span id="2e8c" class="kp ig hi kl b fi ku kr l ks kt">sns.FacetGrid(haberman,hue="status",size=4).map(plt.scatter,"age","nodes").add_legend();</span><span id="3ec9" class="kp ig hi kl b fi ku kr l ks kt">plt.title('SNS Plot Age Vs Nodes')</span><span id="be98" class="kp ig hi kl b fi ku kr l ks kt">plt.legend()</span><span id="c4b3" class="kp ig hi kl b fi ku kr l ks kt">plt.show()</span></pre><figure class="kg kh ki kj fd ma er es paragraph-image"><div class="er es mh"><img src="../Images/a8cd70db723beb80875e3c43acdaa8ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/format:webp/1*RCX61MVExgPxi_oBFcHqVw.png"/></div><figcaption class="md me et er es mf mg bd b be z dx translated">情节2</figcaption></figure><h2 id="e18e" class="kp ig hi bd ih kv kw kx il ky kz la ip jo lb lc it js ld le ix jw lf lg jb lh bi translated">分析</h2><ol class=""><li id="79c3" class="li lj hi jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq bi translated">在这里，我们可以看到图表正确地对状态1和状态2之间的数据进行了分类，但是这两个点仍然相互重叠。</li><li id="e153" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">我们可以看到，这个图没有给出任何关于关系的具体想法，因为点是重叠和混合的，但看起来是一个很好的图。</li></ol><p id="0d68" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">因此，我们现在不能用这个图来模拟任何假设。</p><p id="9346" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们现在转向配对图，这将为我们提供每对特征之间的图，以进一步理解数据集并为我们的假设建模。</p><h1 id="c16d" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">配对图</h1><p id="e193" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">配对图给出了数据集所有特征对的图。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="c183" class="kp ig hi kl b fi kq kr l ks kt">plt.close()</span><span id="ad9b" class="kp ig hi kl b fi ku kr l ks kt">sns.set_style("whitegrid")</span><span id="2a48" class="kp ig hi kl b fi ku kr l ks kt">sns.pairplot(haberman,hue="status",height=4)</span><span id="af38" class="kp ig hi kl b fi ku kr l ks kt">plt.title('Pair Plots Between all the Features of the Data Set')</span><span id="a991" class="kp ig hi kl b fi ku kr l ks kt">plt.show()</span></pre><figure class="kg kh ki kj fd ma er es paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="er es mi"><img src="../Images/39ae02de993e2cc1e7db8e1340ca4afa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ahnqK1aZjBcUJ-HlK-_8NQ.png"/></div></div><figcaption class="md me et er es mf mg bd b be z dx translated">情节3</figcaption></figure><h2 id="fd2e" class="kp ig hi bd ih kv kw kx il ky kz la ip jo lb lc it js ld le ix jw lf lg jb lh bi translated">分析</h2><p id="10f1" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们可以看到数据集中所有可能特征之间的配对图，现在我们将逐一查看所有图。</p><p id="6150" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">因为曲线1、5和6是曲线的直方图，我们现在不考虑它，而曲线4、7、8是曲线2、3、6的镜像(代替x、y轴),所以我们将只看曲线2、3和6</p><ol class=""><li id="92be" class="li lj hi jf b jg kb jk kc jo lw js lx jw ly ka ln lo lp lq bi translated"><strong class="jf hj">剧情二</strong>:我们可以看到剧情在年龄和年份之间。该图看起来重叠，状态1和状态2点相互混合，因此我们在进一步分析时不会考虑这种关系。</li><li id="3661" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated"><strong class="jf hj">地块3 </strong>:在其他两个地块2、6中，这个地块看起来比其他地块更好，因为在状态之间有一些隔离感。剧情在年龄和节点之间。因此，我们认为节点和年龄是我们进一步分析的重要方面。</li><li id="9d07" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated"><strong class="jf hj">图6 </strong>:图6位于年份和节点之间，也是一个重叠图，点分散在两种状态的图形中。因此我们将不考虑这种关系。</li></ol><h1 id="4898" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">一维散点图</h1><p id="c57c" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">接下来，我们将研究状态1和状态2的节点的一维散点图，并尝试推导任何假设。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="7d53" class="kp ig hi kl b fi kq kr l ks kt">#now plotting 1-D Scatter plots to visualize data in 1D and analyse</span><span id="f8cd" class="kp ig hi kl b fi ku kr l ks kt">#patienAbove = Patient who survived more than 5 years.</span><span id="e534" class="kp ig hi kl b fi ku kr l ks kt">#patientBelow = Patient who did not survive more than 5 years.</span><span id="4000" class="kp ig hi kl b fi ku kr l ks kt">patientAbove = haberman[haberman['status']==1]</span><span id="947a" class="kp ig hi kl b fi ku kr l ks kt">patientBelow = haberman[haberman['status']==2]</span><span id="612d" class="kp ig hi kl b fi ku kr l ks kt">plt.plot(patientAbove["nodes"], np.zeros_like(patientAbove['nodes']), 'o')</span><span id="8f59" class="kp ig hi kl b fi ku kr l ks kt">plt.plot(patientBelow["nodes"], np.zeros_like(patientBelow['nodes']), 'r')</span><span id="58ed" class="kp ig hi kl b fi ku kr l ks kt">plt.legend(['status 1','status 2'])</span><span id="71d7" class="kp ig hi kl b fi ku kr l ks kt">plt.title('1-D Scatter Plot of Nodes for Status 1 and 2')</span><span id="ea67" class="kp ig hi kl b fi ku kr l ks kt">plt.show()</span></pre><figure class="kg kh ki kj fd ma er es paragraph-image"><div class="er es mn"><img src="../Images/96e524cc3dc626d1fac22ff67a9a818a.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*CVFj3XN6DJ5tnH8YBOU4Yw.png"/></div><figcaption class="md me et er es mf mg bd b be z dx translated">情节4</figcaption></figure><h2 id="b40b" class="kp ig hi bd ih kv kw kx il ky kz la ip jo lb lc it js ld le ix jw lf lg jb lh bi translated">分析</h2><ol class=""><li id="416d" class="li lj hi jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq bi translated">我们可以看到，状态1和状态2的一维散点图是重叠的</li></ol><p id="11f3" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">很难从这个一维散点图中得出任何假设，因为这些点在很大程度上相互重叠。</p><p id="8451" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">此外，我们将研究与状态相关的所有三个特征的PDF(概率分布函数)。</p><h1 id="8c8a" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">概率密度函数</h1><p id="32d0" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">以下是所有三个功能的状态的PDF。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="a953" class="kp ig hi kl b fi kq kr l ks kt">sns.FacetGrid(haberman,hue="status",height=5).map(sns.distplot,"nodes").add_legend()</span><span id="64f2" class="kp ig hi kl b fi ku kr l ks kt">plt.title('DistPlot/PDF of Nodes Graph')</span><span id="ac65" class="kp ig hi kl b fi ku kr l ks kt">sns.FacetGrid(haberman,hue="status",height=5).map(sns.distplot,"age").add_legend()</span><span id="ac3e" class="kp ig hi kl b fi ku kr l ks kt">plt.title('DistPlot/PDF of Age Graph')</span><span id="3e17" class="kp ig hi kl b fi ku kr l ks kt">sns.FacetGrid(haberman,hue="status",height=5).map(sns.distplot,"year").add_legend()</span><span id="852f" class="kp ig hi kl b fi ku kr l ks kt">plt.title('DistPlot/PDF of Year Graph')</span></pre><figure class="kg kh ki kj fd ma er es paragraph-image"><div class="er es mo"><img src="../Images/2677e6503a51373165fa89d757937c6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:794/format:webp/1*7tnCzwkGbijJFHqMOmn32A.png"/></div><figcaption class="md me et er es mf mg bd b be z dx translated">地块5</figcaption></figure><figure class="kg kh ki kj fd ma er es paragraph-image"><div class="er es mp"><img src="../Images/7ddea069373728c01bd1019b65797894.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/format:webp/1*XdS1LBZuM-3lOeUeqnalXQ.png"/></div><figcaption class="md me et er es mf mg bd b be z dx translated">地块6</figcaption></figure><figure class="kg kh ki kj fd ma er es paragraph-image"><div class="er es mq"><img src="../Images/3c3489e950ad0ce179b7b68a4f4a67ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:792/format:webp/1*UyH-uHgqpd6lbt6M6rdQVw.png"/></div><figcaption class="md me et er es mf mg bd b be z dx translated">情节7</figcaption></figure><h2 id="70c5" class="kp ig hi bd ih kv kw kx il ky kz la ip jo lb lc it js ld le ix jw lf lg jb lh bi translated">分析</h2><ol class=""><li id="3f09" class="li lj hi jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq bi translated">节点图:我们可以看到，这是所有其他两个图中最好的，因为我们可以从PDF中观察到，节点较少的人往往会活5年以上，这意味着他们属于状态1。</li><li id="b2c1" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">年龄图:我们可以观察到，对于状态1和状态2，35岁和65岁之间的年龄几乎相互重叠，因此我们无法从PDF中获得任何信息。</li><li id="8f70" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">年图:我们可以看到，该图也在状态1和状态2之间重叠，我们无法从PDF中获得任何信息。</li></ol><p id="9275" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">现在继续绘制节点图，我们将尝试推导出一个模型。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="bfbc" class="kp ig hi kl b fi kq kr l ks kt">#Only a Model not a Code</span><span id="c5bf" class="kp ig hi kl b fi ku kr l ks kt">if node&lt;.5</span><span id="e16f" class="kp ig hi kl b fi ku kr l ks kt">then(Patient Live Above 5 years)</span><span id="d437" class="kp ig hi kl b fi ku kr l ks kt">else</span><span id="3db3" class="kp ig hi kl b fi ku kr l ks kt">(Patient Live Below 5 Years</span></pre><p id="44b8" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们可以看到，如果节点数较少，则5年以上存活率(状态1)高于状态2。</p><p id="4ee4" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">现在我们填充进一步分析CDF(累积分布函数)并尝试推导假设。</p><h1 id="16b0" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">累积分布函数</h1><p id="f003" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">现在，我们将推导出在单个图中属于状态1和状态2的节点的CDF，并推导出我们的分析。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="0375" class="kp ig hi kl b fi kq kr l ks kt">counts, bin_edges = np.histogram(patientAbove["nodes"], bins=10, density = True)</span><span id="f270" class="kp ig hi kl b fi ku kr l ks kt">pdf = counts/sum(counts)</span><span id="7fcc" class="kp ig hi kl b fi ku kr l ks kt">print(pdf)</span><span id="2613" class="kp ig hi kl b fi ku kr l ks kt">print(bin_edges)</span><span id="b40c" class="kp ig hi kl b fi ku kr l ks kt">cdf = np.cumsum(pdf)</span><span id="1e1f" class="kp ig hi kl b fi ku kr l ks kt">plt.title('CDF and PDF of Nodes for Status 1 and 2 Combined')</span><span id="730a" class="kp ig hi kl b fi ku kr l ks kt">plt.xlabel('Nodes')</span><span id="4f21" class="kp ig hi kl b fi ku kr l ks kt">plt.ylabel('Quantity')</span><span id="8f93" class="kp ig hi kl b fi ku kr l ks kt">plt.plot(bin_edges[1:],pdf)</span><span id="7b17" class="kp ig hi kl b fi ku kr l ks kt">plt.plot(bin_edges[1:],cdf)</span><span id="8bce" class="kp ig hi kl b fi ku kr l ks kt">counts, bin_edges = np.histogram(patientBelow["nodes"], bins=10, density = True)</span><span id="68c9" class="kp ig hi kl b fi ku kr l ks kt">pdf = counts/sum(counts)</span><span id="6546" class="kp ig hi kl b fi ku kr l ks kt">print(pdf)</span><span id="0c04" class="kp ig hi kl b fi ku kr l ks kt">print(bin_edges)</span><span id="83d2" class="kp ig hi kl b fi ku kr l ks kt">cdf = np.cumsum(pdf)</span><span id="9bac" class="kp ig hi kl b fi ku kr l ks kt">plt.plot(bin_edges[1:],pdf)</span><span id="e6e8" class="kp ig hi kl b fi ku kr l ks kt">plt.plot(bin_edges[1:],cdf)</span><span id="2364" class="kp ig hi kl b fi ku kr l ks kt">plt.legend(['PatientAbove_PDF', 'PatientAbove_CDF','PatientBelow_PDF', 'PatientBelow_CDF'])</span><span id="b91b" class="kp ig hi kl b fi ku kr l ks kt">plt.show()</span></pre><p id="41a8" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">输出:</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="d95e" class="kp ig hi kl b fi kq kr l ks kt">[0.83555556 0.08       0.02222222 0.02666667 0.01777778 0.00444444  0.00888889 0.         0.         0.00444444] [ 0.   4.6  9.2 13.8 18.4 23.  27.6 32.2 36.8 41.4 46. ] [0.56790123 0.14814815 0.13580247 0.04938272 0.07407407 0.  0.01234568 0.         0.         0.01234568] [ 0.   5.2 10.4 15.6 20.8 26.  31.2 36.4 41.6 46.8 52. ]</span></pre><figure class="kg kh ki kj fd ma er es paragraph-image"><div class="er es mn"><img src="../Images/88005f0c61cc04f30862f21c9d373a82.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*Pq4BRXy3AKOobiPOUegKxg.png"/></div><figcaption class="md me et er es mf mg bd b be z dx translated">地块8</figcaption></figure><h2 id="8d09" class="kp ig hi bd ih kv kw kx il ky kz la ip jo lb lc it js ld le ix jw lf lg jb lh bi translated">分析</h2><p id="05a3" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">从图中我们可以看出</p><ol class=""><li id="3814" class="li lj hi jf b jg kb jk kc jo lw js lx jw ly ka ln lo lp lq bi translated">82%淋巴结少于3个的患者存活超过5年。</li><li id="7d81" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">58%的淋巴结少于3个的患者不能存活超过5年</li><li id="374e" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">我们还可以看到，如果淋巴结计数超过35，存活时间不超过5年的患者百分比为100%</li></ol><p id="ce02" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">由于存活患者的百分比较高，我们可以看到，如果淋巴结不太有耐心，患者往往会活得更长。</p><p id="8d80" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们还可以得出结论，节点是分析哈伯曼数据的重要特征。</p><h1 id="f11b" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">平均值、中间值和标准偏差</h1><p id="46f5" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们还可以计算状态1和状态2患者的节点的平均值、中值和标准差，并得出一些见解。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="117c" class="kp ig hi kl b fi kq kr l ks kt">#Mean</span><span id="8dee" class="kp ig hi kl b fi ku kr l ks kt">print("Mean for the nodes are: ")</span><span id="0279" class="kp ig hi kl b fi ku kr l ks kt">print(np.mean(patientAbove["nodes"]))</span><span id="6da1" class="kp ig hi kl b fi ku kr l ks kt">#print mean with an outlier</span><span id="87bd" class="kp ig hi kl b fi ku kr l ks kt">print(np.mean(np.append(patientAbove["nodes"],50)),"(with an outlier)")</span><span id="3abb" class="kp ig hi kl b fi ku kr l ks kt">print(np.mean(patientBelow["nodes"]))</span><span id="1505" class="kp ig hi kl b fi ku kr l ks kt">#print Standard devitaion to know the spread of the data</span><span id="1747" class="kp ig hi kl b fi ku kr l ks kt">print("\nStd Dev for the nodes are: ")</span><span id="455b" class="kp ig hi kl b fi ku kr l ks kt">print(np.std(patientAbove["nodes"]))</span><span id="9146" class="kp ig hi kl b fi ku kr l ks kt">print(np.std(patientBelow["nodes"]))</span></pre><p id="dd93" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">输出:</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="8e09" class="kp ig hi kl b fi kq kr l ks kt">Mean for the nodes are:  <br/>2.7911111111111113 <br/>3.0 (with an outlier) <br/>7.45679012345679  </span><span id="8d44" class="kp ig hi kl b fi ku kr l ks kt">Std Dev for the nodes are:  <br/>5.857258449412131 <br/>9.128776076761632</span></pre><h2 id="dbc7" class="kp ig hi bd ih kv kw kx il ky kz la ip jo lb lc it js ld le ix jw lf lg jb lh bi translated">分析</h2><p id="01a9" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们可以看到状态1患者的平均值为2.79，状态2患者的平均值为7.45</p><p id="5fbf" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们为状态1患者引入了一个高异常值，可以看到它对节点的平均值产生了很大的影响</p><p id="ace6" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">状态1和状态2患者节点的标准偏差为5.85和9.12。这告诉我们数据的分布。它显示状态2的患者节点比状态1的患者具有更高的数据分布。</p><p id="d4ff" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们可以说，具有3个或更少淋巴结患者可以存活5年以上，而具有3个以上淋巴结的患者很可能活不到5年。</p><h1 id="ad0a" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">中位数和MAD(中位数绝对偏差)</h1><p id="3406" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们计算相同数据的中位数和MAD。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="cd2e" class="kp ig hi kl b fi kq kr l ks kt">#now we go towards the median</span><span id="c328" class="kp ig hi kl b fi ku kr l ks kt">print("medians for the nodes are:")</span><span id="b41a" class="kp ig hi kl b fi ku kr l ks kt">print(np.median(patientAbove["nodes"]))</span><span id="09d5" class="kp ig hi kl b fi ku kr l ks kt">#with an outlier</span><span id="c193" class="kp ig hi kl b fi ku kr l ks kt">print(np.median(np.append(patientAbove["nodes"],50)),"(with and outlier)")</span><span id="8a3a" class="kp ig hi kl b fi ku kr l ks kt">print(np.median(patientBelow["nodes"]))</span><span id="877c" class="kp ig hi kl b fi ku kr l ks kt">print("Median Absolute Deviation")</span><span id="0fec" class="kp ig hi kl b fi ku kr l ks kt">from statsmodels import robust</span><span id="8fe4" class="kp ig hi kl b fi ku kr l ks kt">print(robust.mad(patientAbove["nodes"]))</span><span id="3024" class="kp ig hi kl b fi ku kr l ks kt">print(robust.mad(patientBelow["nodes"]))</span></pre><p id="a776" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">输出:</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="953c" class="kp ig hi kl b fi kq kr l ks kt">medians for the nodes are:<br/>0.0 <br/>0.0 (with and outlier) <br/>4.0 <br/>Median Absolute Deviation: <br/>0.0 <br/>5.930408874022408 </span></pre><h2 id="aee7" class="kp ig hi bd ih kv kw kx il ky kz la ip jo lb lc it js ld le ix jw lf lg jb lh bi translated">分析</h2><p id="631f" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们可以看到，状态1和状态2的平均节点数分别为0和4。</p><p id="71fd" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们为状态1引入了一个异常值，但是仍然可以看到平均值没有改变，仍然为0。</p><p id="82c2" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们可以观察到，如果节点数为0，则患者存活5年以上的可能性很高。</p><p id="f072" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们可以看到，状态1和状态2的MAD分别为0和5.93，可以说状态2的传播大于状态1。状态2患者节点密度高于状态1患者。</p><p id="551e" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">现在我们将计算百分位数和四分位数，以了解实际的数值。</p><h1 id="e8a8" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">百分位数和四分位数</h1><p id="c6cc" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">现在，我们将计算百分位数和四分位数，以了解更多关于节点患者的信息，并根据百分位数进行一些分析。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="751f" class="kp ig hi kl b fi kq kr l ks kt">print("Quantiles: ")</span><span id="0492" class="kp ig hi kl b fi ku kr l ks kt">print(np.percentile(patientAbove["nodes"],np.arange(0,100,25)))</span><span id="6326" class="kp ig hi kl b fi ku kr l ks kt">print(np.percentile(patientBelow["nodes"],np.arange(0,100,25)))</span><span id="60e4" class="kp ig hi kl b fi ku kr l ks kt">print("90 Percentiles")</span><span id="873b" class="kp ig hi kl b fi ku kr l ks kt">print(np.percentile(patientAbove["nodes"],90))</span><span id="c5eb" class="kp ig hi kl b fi ku kr l ks kt">print(np.percentile(patientBelow["nodes"],90))</span></pre><p id="25db" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">输出:</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="5e90" class="kp ig hi kl b fi kq kr l ks kt">Quartiles:  <br/>[0. 0. 0. 3.] <br/>[ 0.  1.  4. 11.] <br/>90 Percentiles <br/>8.0 <br/>20.0</span></pre><h2 id="64a4" class="kp ig hi bd ih kv kw kx il ky kz la ip jo lb lc it js ld le ix jw lf lg jb lh bi translated">分析</h2><p id="cf5b" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们可以得出以下分析:</p><ol class=""><li id="ea13" class="li lj hi jf b jg kb jk kc jo lw js lx jw ly ka ln lo lp lq bi translated">我们可以看到有50%的th患者的状态1患者的淋巴结数目为0，这意味着如果淋巴结数目为0或更少，则患者倾向于活5年以上。</li><li id="231f" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">我们还可以看到，少于3个淋巴结的75%患者也倾向于存活3年以上。</li><li id="0902" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">我们也可以说，如果患者有11个或更多的淋巴结，75%的患者倾向于在5年前死亡。</li><li id="74fc" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">如果第90百分位患者具有少于8个淋巴结，则他们活得更长。</li><li id="2777" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">如果第90百分位患者有超过20个淋巴结，则他们会早死。</li></ol><p id="9ca2" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">第90百分位给了我们一个极端的例子，病人活得更长或者死得更早。</p><p id="72b7" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">此外，我们将绘制箱线图，以查看四分位数和百分位数在图中的位置。</p><h1 id="14cf" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">箱形图</h1><p id="5096" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">箱线图是一种将数据的四分位数和百分位数以及晶须和异常值可视化的图。</p><p id="df0e" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">节点的哈伯曼数据相对于状态的箱线图如下所述。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="bb5c" class="kp ig hi kl b fi kq kr l ks kt">sns.boxplot(x="status",y="nodes",data=haberman)</span><span id="0536" class="kp ig hi kl b fi ku kr l ks kt">plt.title('Box Plot For Status 1 and Status 2')</span><span id="52ec" class="kp ig hi kl b fi ku kr l ks kt">plt.show()</span></pre><figure class="kg kh ki kj fd ma er es paragraph-image"><div class="er es lz"><img src="../Images/2e95185205489775bc98e8ebc514efdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/1*8MWCYIpAEbAfNqRSQhqtzg.png"/></div><figcaption class="md me et er es mf mg bd b be z dx translated">情节9</figcaption></figure><h2 id="4403" class="kp ig hi bd ih kv kw kx il ky kz la ip jo lb lc it js ld le ix jw lf lg jb lh bi translated">分析</h2><ol class=""><li id="b682" class="li lj hi jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq bi translated">我们可以观察到，对于状态1患者，第25%和第50%百分位相互重叠，并显示0个节点。</li><li id="04b0" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">我们还可以观察到，状态1患者节点计数的阈值为0到7，而状态2的阈值为0-24，这表明状态2患者具有更高的分布，并且状态2的阈值更高。</li><li id="e97d" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">我们还可以看到，状态2的第50%几乎与状态1的第75%重叠，这意味着有可能少数患者可能被错误地分类为状态1患者，而实际上他们是状态2患者。</li></ol><h1 id="6529" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">小提琴情节</h1><p id="1f60" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们将绘制小提琴图，这将给我们两个世界最好的结果，即PDF和四分位数/百分位数。</p><p id="7f95" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们可以在一个地方看到很多数据。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="11ef" class="kp ig hi kl b fi kq kr l ks kt">sns.violinplot(x="status",y="nodes",data=haberman)</span><span id="3ba5" class="kp ig hi kl b fi ku kr l ks kt">plt.title('Violin Plot for Status 1 and Status 2')</span><span id="6f69" class="kp ig hi kl b fi ku kr l ks kt">plt.show()</span></pre><h2 id="033d" class="kp ig hi bd ih kv kw kx il ky kz la ip jo lb lc it js ld le ix jw lf lg jb lh bi translated">分析</h2><p id="1438" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们可以分析:</p><ol class=""><li id="8529" class="li lj hi jf b jg kb jk kc jo lw js lx jw ly ka ln lo lp lq bi translated">首先，具有淋巴结的状态2患者的扩散高于状态2患者。</li><li id="5440" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">我们还可以看到，如方框图所示，状态1患者的第25%和第50%重叠。</li><li id="e031" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">我们可以看到，0个或更少淋巴结的患者有更高的概率存活超过5年。</li><li id="9188" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">我们还可以看到，状态1患者节点的第50百分位或中值为0，状态2患者节点的第50百分位或中值为3。</li><li id="5037" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">状态1的相邻值范围为0–7，状态2的相邻值范围为0–24。</li></ol><h1 id="83b7" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">多元图</h1><p id="b939" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">现在，我们将绘制一个多变量图，即等高线图，以显示年龄和节点之间的数据。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="4ec1" class="kp ig hi kl b fi kq kr l ks kt">sns.jointplot(x="age",y="nodes",data=patientAbove,kind="kde")</span><span id="49f5" class="kp ig hi kl b fi ku kr l ks kt">plt.title('Contour Plot For Status 1')</span><span id="2bc1" class="kp ig hi kl b fi ku kr l ks kt">sns.jointplot(x="age",y="nodes",data=patientBelow,kind="kde")</span><span id="58e1" class="kp ig hi kl b fi ku kr l ks kt">plt.title('Contour Plot For Status 2')</span><span id="89f1" class="kp ig hi kl b fi ku kr l ks kt">plt.show()</span></pre><figure class="kg kh ki kj fd ma er es paragraph-image"><div class="er es mr"><img src="../Images/aefce3adfc31a700b1f35cf681659c4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*nhdrOI6ZqHLdmN3_7yISaw.png"/></div><figcaption class="md me et er es mf mg bd b be z dx translated">地块11</figcaption></figure><figure class="kg kh ki kj fd ma er es paragraph-image"><div class="er es mr"><img src="../Images/64833df128bbc7a77ae8375584ef1f60.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*sxnHaXTgPJwSu3mfNyKfLA.png"/></div><figcaption class="md me et er es mf mg bd b be z dx translated">地块12</figcaption></figure><p id="6328" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">分析:</p><p id="2d59" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们可以看到对应于三维空间中山顶的黑点。</p><p id="9e5d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们可以观察到暗点，对于状态1的患者，其节点数为0或更少，而状态2的患者的节点数略多于3。</p><h1 id="ffbe" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">结论</h1><p id="1067" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们可以得出结论，如果任何患者的节点数为0或小于0，则该患者很可能会活5年以上，如果节点数大于0，则该患者很可能会活不到5年。</p><h1 id="5f3e" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">信用</h1><ol class=""><li id="5e0f" class="li lj hi jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq bi translated">applied ai(<a class="ae ms" href="https://www.appliedaicourse.com/" rel="noopener ugc nofollow" target="_blank">https://www.appliedaicourse.com/</a>)</li><li id="c966" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">卡格尔(【https://www.kaggle.com/gilsousa/habermans-survival-data-set】T2</li><li id="2e52" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">谷歌(用于了解功能和情节)</li></ol></div></div>    
</body>
</html>