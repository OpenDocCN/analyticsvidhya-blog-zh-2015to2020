<html>
<head>
<title>Exploring Statistical Arbitrage in Cryptocurrency</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索加密货币中的统计套利</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/exploring-statistical-arbitrage-in-cryptocurrency-924ad6bf2a57?source=collection_archive---------11-----------------------#2020-06-07">https://medium.com/analytics-vidhya/exploring-statistical-arbitrage-in-cryptocurrency-924ad6bf2a57?source=collection_archive---------11-----------------------#2020-06-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="cfe5" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">介绍</h1><p id="a49f" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">统计套利是量化金融领域最常见的策略之一。因此，我决定在去年夏天着手一个项目，以了解这一策略，并最终将其应用于加密货币市场。</p><p id="4e63" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">加密市场具有高度相关性和高度波动性，这对于押注两种相关证券趋同的量化策略来说非常有利。但通过修复回溯测试中的漏洞，并了解更多关于统计套利的基本知识，我得出了一个结论:将这种策略应用于加密货币市场并不容易。在大多数主要的加密交易所，交易费用都很高，而且订单簿的深度使其不可能在不造成太多滑点的情况下接受大量订单。接下来，我将深入研究交易逻辑、发现和未来计划。</p><h1 id="12e9" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">交易逻辑</h1><p id="42bf" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">利用网上资源[1]，我开始了解什么是配对交易。我在网上找到几篇文章，给了我一个如何开始的模型。</p><h2 id="82f3" class="kg ig hi bd ih kh ki kj il kk kl km ip jo kn ko it js kp kq ix jw kr ks jb kt bi translated">过滤过程(寻找配对进行交易)</h2><ol class=""><li id="af4b" class="ku kv hi jf b jg jh jk jl jo kw js kx jw ky ka kz la lb lc bi translated">由于加密领域缺乏规则，我首先缩小了我要操作的交易所的范围，以确保订单簿深度是合法的。</li><li id="5f77" class="ku kv hi jf b jg ld jk le jo lf js lg jw lh ka kz la lb lc bi translated">然后，我选择每天交易量至少为100万美元的硬币，以确保流动性。</li><li id="a2d0" class="ku kv hi jf b jg ld jk le jo lf js lg jw lh ka kz la lb lc bi translated">筛选潜在的配对</li></ol><p id="c603" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">(1)使用<a class="ae li" href="https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.stats.pearsonr.html" rel="noopener ugc nofollow" target="_blank">皮尔森相关性</a>的相关性</p><p id="c09d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">(2)协整采用<a class="ae li" href="http://www.statsmodels.org/dev/generated/statsmodels.tsa.stattools.coint.html" rel="noopener ugc nofollow" target="_blank">恩格尔-格兰杰两步协整检验</a></p><p id="cb24" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">(3)平稳性使用<a class="ae li" href="https://machinelearningmastery.com/time-series-data-stationary-python/" rel="noopener ugc nofollow" target="_blank"> ADF测试</a></p><h2 id="7651" class="kg ig hi bd ih kh ki kj il kk kl km ip jo kn ko it js kp kq ix jw kr ks jb kt bi translated">交易步骤</h2><ol class=""><li id="16d6" class="ku kv hi jf b jg jh jk jl jo kw js kx jw ky ka kz la lb lc bi translated">使用卡尔曼滤波回归计算每对的套期保值比率。</li><li id="382b" class="ku kv hi jf b jg ld jk le jo lf js lg jw lh ka kz la lb lc bi translated">使用以下等式计算价差</li></ol><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="84eb" class="kg ig hi lo b fi ls lt l lu lv">spread = y - hedge ratio * x</span></pre><p id="ce1e" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">3.使用以下公式计算z值</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="13d4" class="kg ig hi lo b fi ls lt l lu lv">(current spread - average of spread over past x days) / std of spread over x days</span></pre><p id="44ee" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这里，x是回望期。我们用半衰期来计算。关于这方面的更多信息，请查看脚注中的链接。</p><p id="4a8c" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">4.定义任意进场z值和出场z值。</p><p id="ef11" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">当z值穿过上方进场z值时，做空；用z-score平仓返回退出z-score当z值穿过较低的z值时，做多；用z值平仓返回z值退出。</p><h1 id="1fdd" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">履行</h1><p id="8d67" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">为了获取数据，我决定从Bitfinex中调出所有的XYZ/美元交易对。Bitfinex是少数几个有实际交易量的交易所之一。由于密码行业缺乏监管，在不太知名的交易所，洗白交易和其他非法活动猖獗。因此，选择正确的交易所是至关重要的一步。我选择美元作为基础货币，因为其他货币对，如基于BTC的交易对，总的交易量要低得多。</p><p id="84ee" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在进行相关性测试后，我对这些数据进行了协整检验。对于这一步，我使用了<a class="ae li" href="http://www.statsmodels.org/dev/generated/statsmodels.tsa.stattools.coint.html" rel="noopener ugc nofollow" target="_blank"> Engle-Granger两步协整检验方法</a>。由于如果选择不同的因变量，这种方法会产生不同的结果，我决定计算所有对的协整，然后选择XYZ/美元和美元/XYZ的协整p值都为&lt; 0.01的对。</p><p id="244a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">对所有蜡烛线规模进行协整检验，得出这些对作为协整对:</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="07cb" class="kg ig hi lo b fi ls lt l lu lv">[(‘tLTCUSD’,‘tIOTUSD’),(‘tEOSUSD’,‘tNEOUSD’),(‘tEOSUSD’,‘tTRXUSD’,(‘tIOTUSD’,‘tNEOUSD’),(‘tNEOUSD’,‘tOMGUSD’),(‘tEOSUSD’,‘tIOTUSD’),(‘tIOTUSD’,‘tOMGUSD’),(‘tLTCUSD’,‘tEOSUSD’),(‘tLTCUSD’,‘tNEOUSD’),(‘tOMGUSD’,‘tTRXUSD’),(‘tDSHUSD’,‘tXMRUSD’)]</span></pre><p id="d93b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">然后，我通过对价差运行ADF测试来进一步细化结果，以发现两对之间的价差是否是稳定的。</p><p id="325b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">结果图请参见<strong class="jf hj">附录A </strong>。在其中，你会发现价格、对冲比率、价差和每个协整对的z值的图表。</p><p id="2c89" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">有趣的是，ADF检验显示了与协整检验相同的模式，即使用的数据点越多(烛台频率越高。例如，从使用1D烛台到6h烛台)，越多的线对通过ADF固定测试。我已经在<strong class="jf hj">附录B </strong>中编译了结果。请参见<strong class="jf hj">附录C </strong>了解使用不同烛台的图表对比。</p><h1 id="5e0a" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">回溯测试</h1><p id="5a6a" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">没有佣金的结果都相当有希望，但一旦增加佣金，夏普比率都下降到负值。这里有一个这样的例子:</p><figure class="lj lk ll lm fd lx er es paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="er es lw"><img src="../Images/417165baf35939e7561842da3ec683de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FYIEu86zCf0JaSSynjks9w.png"/></div></div><figcaption class="me mf et er es mg mh bd b be z dx translated">图一。价格对比；对冲比率；传播与z分数；返回与OMGUSD/TRXUSD的缩编</figcaption></figure><p id="4fef" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">从分布图(图1的第三部分)可以判断。)，这是一个平稳的传播。由于巨大的交易费用(我使用0.2%进行回溯测试，但根据交易所的不同可能会更低)，我所有的样本内回溯测试都没有产生任何有效的结果。我试着交替输入z值、输出z值、回看时间来计算z值。然而，这对结果没有帮助，所有的结果都类似于上面的图。有时测试会产生一对正夏普比率，但很少会超过1。</p><h1 id="bafc" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">结论</h1><p id="7975" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">尽管整个加密市场似乎在同步运行，但利用这一事实的统计套利策略并不容易设计出来。假设在高交易费用的环境下，使用卡尔曼滤波器的统计套利策略在密码市场中表现不佳。这种特殊的策略要想成功，还需要进一步的研究。</p><p id="75ce" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">重要的是要分析市场的本质，并相应地缩小策略的范围。高频策略可能不适合高交易佣金和低交易量的市场。可以进一步优化卡尔曼滤波器的参数，但需要对该主题有更深入的数学理解，以了解哪些其他状态空间模型可以用于该用例。沿着道路，应尝试两个方向:</p><ul class=""><li id="cb21" class="ku kv hi jf b jg kb jk kc jo mi js mj jw mk ka ml la lb lc bi translated">将这种策略与其他技术结合起来，如使用机器学习，为交易逻辑增加另一层过滤器。</li><li id="78e5" class="ku kv hi jf b jg ld jk le jo lf js lg jw lh ka ml la lb lc bi translated">把这个策略运用到传统市场，比如期货市场和股票市场。</li><li id="8365" class="ku kv hi jf b jg ld jk le jo lf js lg jw lh ka ml la lb lc bi translated">检查其他状态空间模型，尝试作为统计套利策略。</li></ul></div><div class="ab cl mm mn gp mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="hb hc hd he hf"><p id="2e36" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">[1]启示:<a class="ae li" href="https://blog.quantinsti.com/kalman-filter-techniques-statistical-arbitrage-china-futures-market-python/" rel="noopener ugc nofollow" target="_blank">卡尔曼滤波技术与中国期货市场的统计套利</a>，<a class="ae li" href="http://www.ccsenet.org/journal/index.php/ijef/article/view/33007" rel="noopener ugc nofollow" target="_blank">基于统计套利的高频动态对交易采用两阶段相关和协整方法</a></p><p id="b6b3" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">[2]100万美元实际上还是太低了，不足以操作一个有利可图的配对交易策略，但是密码市场对任何更高的交易来说都太小了，所以我选择了100万美元。</p></div></div>    
</body>
</html>