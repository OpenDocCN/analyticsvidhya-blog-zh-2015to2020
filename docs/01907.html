<html>
<head>
<title>Heroku and Deployments</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Heroku和部署</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/heroku-and-deployments-c3fa56d11904?source=collection_archive---------9-----------------------#2019-11-20">https://medium.com/analytics-vidhya/heroku-and-deployments-c3fa56d11904?source=collection_archive---------9-----------------------#2019-11-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/f83c700dc18325a34a2ad383c7628635.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-Zpi6aXMZbggnrIP"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">照片由<a class="ae iu" href="https://unsplash.com/@codestorm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">萨法·萨法罗夫</a>在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="4f43" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">每当我们谈论用任何语言或框架开发一些web应用程序或任何项目时，一个问题总会浮现在我们的脑海中，那就是<strong class="ix hj">“在哪里部署这个应用程序”</strong>，如何才能看到我的应用程序或项目的运行版本。<strong class="ix hj"> <em class="jt"> Heroku </em> </strong>是一个平台即服务(PaaS)解决方案(基于容器)，使其用户和其他开发人员能够完全在云中构建、运行和操作应用程序。最初，它只支持完全用Ruby编程语言开发的应用程序，但现在它也支持Java、Python、Node.js、PHP和GO。</p><h1 id="9b3f" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated"><strong class="ak">Heroku上的基本Python应用部署</strong></h1><p id="502a" class="pw-post-body-paragraph iv iw hi ix b iy ks ja jb jc kt je jf jg ku ji jj jk kv jm jn jo kw jq jr js hb bi translated">Heroku实际上非常简单、优雅、灵活且易于使用。实际上，Heroku官方网站上有一个存储库设置，允许用户在Heroku cloud上测试基本的python应用程序部署。这里是提供的URL</p><p id="424a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://github.com/heroku/python-getting-started" rel="noopener ugc nofollow" target="_blank">https://github.com/heroku/python-getting-started</a></p><p id="447f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是一个简单的python应用程序，包含一个指定Python版本为3.7.3的<code class="du kx ky kz la b">runtime.txt</code>和一个用于安装依赖项的<code class="du kx ky kz la b">requirements.txt</code>文件。</p><h1 id="c7aa" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated"><strong class="ak">部署:</strong></h1><p id="f8dd" class="pw-post-body-paragraph iv iw hi ix b iy ks ja jb jc kt je jf jg ku ji jj jk kv jm jn jo kw jq jr js hb bi translated">首先，你必须熟悉赫罗库的环境。对于基本的应用程序部署，我们有Heroku-CLI，通过它我们可以轻松地使用命令。</p><p id="3fcf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，我们将在Heroku上初始化一个应用程序，让Heroku准备好设置您的源代码:</p><pre class="lb lc ld le fd lf la lg lh aw li bi"><span id="2dba" class="lj jv hi la b fi lk ll l lm ln">heroku create</span><span id="8a7b" class="lj jv hi la b fi lo ll l lm ln">Creating app... done, ⬢ secret-sea-89849<br/><a class="ae iu" href="https://secret-sea-89746.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">https://secret-sea-89849.herokuapp.com/</a> | <a class="ae iu" href="https://git.heroku.com/secret-sea-89746.git" rel="noopener ugc nofollow" target="_blank">https://git.heroku.com/secret-sea-89849.git</a></span></pre><p id="2429" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它将自动创建一个随机命名的应用程序，如<strong class="ix hj">“secret-sea-89849”</strong>，一个git remote(称为<code class="du kx ky kz la b">heroku</code>)也是用您的本地git库创建的。</p><p id="0f0e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们将把我们的代码推送给heroku git created</p><pre class="lb lc ld le fd lf la lg lh aw li bi"><span id="7954" class="lj jv hi la b fi lk ll l lm ln">git push heroku master</span><span id="997f" class="lj jv hi la b fi lo ll l lm ln">Counting objects: 407, done.<br/>Delta compression using up to 8 threads.<br/>Compressing objects: 100% (182/182), done.<br/>Writing objects: 100% (407/407), 68.65 KiB | 68.65 MiB/s, done.<br/>Total 407 (delta 199), reused 407 (delta 199)<br/>remote: Compressing source files... done.<br/>remote: Building source:<br/>remote:<br/>remote: -----&gt; Python app detected<br/>remote:        Using supported version of Python 3.7 (python-3.7.3)<br/>remote: -----&gt; Installing python-3.7.3<br/>.<br/>.<br/>.</span></pre><p id="5022" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它会将requirements.txt文件中的所有依赖项安装到git存储库中。完成推送过程后，您的应用程序现在部署到Heroku cloud。之后，您可以扩展应用程序当前运行的实例数量。你可以通过简单的命令来完成它。</p><pre class="lb lc ld le fd lf la lg lh aw li bi"><span id="0f72" class="lj jv hi la b fi lk ll l lm ln">heroku ps:scale web=1</span></pre><p id="7944" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">此命令不会部署应用程序。它会在您部署后启动它。当您部署应用程序时，heroku会创建一个“slug”。应用程序的可运行压缩版本，然后存储。然后你可以启动“dynos ”,它会获取你当前的slug并在heroku的一个服务器上启动它。</p><p id="2ba4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">运行<code class="du kx ky kz la b">heroku ps:scale web=1</code>会将你的应用扩展到一个运行dyno的服务器，基本上意味着你现在有一个运行你的应用的服务器。</p><p id="1b7c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您再次部署您的应用程序，将会生成并存储一个新的slug，并且您当前运行的dynos将会被销毁，并被新版本的代码所取代。</p><p id="45b2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，您可以访问由其应用程序名称生成的URL。使用heroku-CLI，您可以使用一个简单的命令:</p><pre class="lb lc ld le fd lf la lg lh aw li bi"><span id="e6dd" class="lj jv hi la b fi lk ll l lm ln">heroku open</span></pre><p id="0d32" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它会显示您的应用程序当前运行的URL，您可以在浏览器中访问该URL，并且您会看到首页。会有些像这样；</p><p id="dc44" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du kx ky kz la b"><a class="ae iu" href="https://{your-project-name}.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">https://{your-project-name}.herokuapp.com/</a></code></p><h1 id="be03" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">日志记录:</h1><p id="617a" class="pw-post-body-paragraph iv iw hi ix b iy ks ja jb jc kt je jf jg ku ji jj jk kv jm jn jo kw jq jr js hb bi translated">用户可以使用CLI中的一个简单命令轻松检查正在运行的应用程序的日志。</p><pre class="lb lc ld le fd lf la lg lh aw li bi"><span id="423d" class="lj jv hi la b fi lk ll l lm ln">heroku logs --tail</span></pre><p id="1dc2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">基本上，gunicorn服务器运行在那里，所以它会显示应用程序的详细日志，这将有助于用户在调试和其他过程中。</p><h1 id="8a7e" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated"><strong class="ak">简单地说:</strong></h1><p id="7c68" class="pw-post-body-paragraph iv iw hi ix b iy ks ja jb jc kt je jf jg ku ji jj jk kv jm jn jo kw jq jr js hb bi translated">这是一个简单的教程，解释了如何在Heroku cloud上部署一个简单的Python应用程序。在下一篇博客中，我们可以使用我们在之前的博客中创建的示例python-flask应用程序，并将它部署在Heroku cloud上。关于Heroku cloud还有很多需要学习和实践的地方。</p><p id="cecb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">开发一个软件是不够的，还必须学习大规模部署和扩展应用程序的基础知识。</p></div></div>    
</body>
</html>