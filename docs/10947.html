<html>
<head>
<title>Grafana with PostgreSQL — Data Visualization with open-source tool</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Grafana with PostgreSQL —使用开源工具实现数据可视化</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/grafana-with-postgresql-data-visualization-with-open-source-tool-36f5150fa290?source=collection_archive---------0-----------------------#2020-11-10">https://medium.com/analytics-vidhya/grafana-with-postgresql-data-visualization-with-open-source-tool-36f5150fa290?source=collection_archive---------0-----------------------#2020-11-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="868f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Grafana是一个多平台开源分析和交互式可视化web应用程序。当连接到支持的数据源时，它为web提供图表、图形和警报。它可以通过一个插件系统进行扩展。终端用户可以使用交互式查询构建器创建复杂的监控仪表板。它是用Go编程语言写的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/741867a3bef5ca5d1535d04f98727130.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2ej1l_xqZVK9L8eAF7dWXA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">图片由所有者创建:来自谷歌的图标</figcaption></figure><ol class=""><li id="4864" class="jt ju hi ih b ii ij im in iq jv iu jw iy jx jc jy jz ka kb bi translated">从<a class="ae kc" href="https://grafana.com/grafana/download?platform=windows" rel="noopener ugc nofollow" target="_blank"> Grafana官方网站</a>下载<strong class="ih hj">设置</strong>。</li><li id="2e14" class="jt ju hi ih b ii kd im ke iq kf iu kg iy kh jc jy jz ka kb bi translated">选择您想要安装的Grafana <strong class="ih hj">版本</strong>(默认选择最新的Grafana版本)。</li><li id="1165" class="jt ju hi ih b ii kd im ke iq kf iu kg iy kh jc jy jz ka kb bi translated">选择一个<strong class="ih hj">版本</strong>。</li><li id="7519" class="jt ju hi ih b ii kd im ke iq kf iu kg iy kh jc jy jz ka kb bi translated">点击<strong class="ih hj">窗口</strong>。</li></ol><h1 id="7fc2" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">使用Windows installer安装</h1><ol class=""><li id="66e1" class="jt ju hi ih b ii lg im lh iq li iu lj iy lk jc jy jz ka kb bi translated">点击<strong class="ih hj">下载安装程序</strong>。</li><li id="cd3c" class="jt ju hi ih b ii kd im ke iq kf iu kg iy kh jc jy jz ka kb bi translated">打开并运行安装程序。</li></ol><h1 id="c566" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">第一次登录</h1><ol class=""><li id="e888" class="jt ju hi ih b ii lg im lh iq li iu lj iy lk jc jy jz ka kb bi translated">打开您的网络浏览器并转到<a class="ae kc" href="http://localhost:3000/." rel="noopener ugc nofollow" target="_blank"> http://localhost:3000/。</a> <code class="du ll lm ln lo b"><strong class="ih hj">3000</strong></code> <strong class="ih hj"> </strong>是默认的HTTP端口，如果您没有配置不同的端口，Grafana会监听该端口。</li><li id="1738" class="jt ju hi ih b ii kd im ke iq kf iu kg iy kh jc jy jz ka kb bi translated">在登录页面上，键入<code class="du ll lm ln lo b"><strong class="ih hj">admin</strong></code> <strong class="ih hj"> </strong>作为用户名和密码。</li><li id="de57" class="jt ju hi ih b ii kd im ke iq kf iu kg iy kh jc jy jz ka kb bi translated">更改您的密码。</li></ol><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lp"><img src="../Images/95317196a0ce9b11250d8770ffbc603d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uG0LMln4gyRNP2H9e7CjOg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">Grafana登录页面</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lq"><img src="../Images/ca681661916a05c3a71ed79fe29d4833.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oB-EDTE53rXz_iGt72Ib9w.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">登录后的仪表板看起来像！</figcaption></figure><h1 id="8ad8" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">数据库设置</h1><p id="94a1" class="pw-post-body-paragraph if ig hi ih b ii lg ik il im lh io ip iq lr is it iu ls iw ix iy lt ja jb jc hb bi translated">遵循这些步骤:<a class="ae kc" href="https://www.postgresqltutorial.com/install-postgresql/" rel="noopener ugc nofollow" target="_blank">https://www.postgresqltutorial.com/install-postgresql/</a></p><ol class=""><li id="90f5" class="jt ju hi ih b ii ij im in iq jv iu jw iy jx jc jy jz ka kb bi translated">从<a class="ae kc" href="https://www.enterprisedb.com/downloads/postgres-postgresql-downloads" rel="noopener ugc nofollow" target="_blank">https://www . enterprise db . com/downloads/postgres-PostgreSQL-downloads</a>下载PostgreSQL安装程序</li><li id="7cfa" class="jt ju hi ih b ii kd im ke iq kf iu kg iy kh jc jy jz ka kb bi translated">运行并安装它</li><li id="aaf6" class="jt ju hi ih b ii kd im ke iq kf iu kg iy kh jc jy jz ka kb bi translated">单击下一步</li><li id="48c0" class="jt ju hi ih b ii kd im ke iq kf iu kg iy kh jc jy jz ka kb bi translated">如果要更改目录，请浏览文件夹；否则，它将转到默认路径C:\\Program Files\\</li><li id="bfce" class="jt ju hi ih b ii kd im ke iq kf iu kg iy kh jc jy jz ka kb bi translated">为超级用户添加密码</li><li id="d068" class="jt ju hi ih b ii kd im ke iq kf iu kg iy kh jc jy jz ka kb bi translated">选择端口号:默认情况下，PostgreSQL在端口5432上运行</li><li id="997b" class="jt ju hi ih b ii kd im ke iq kf iu kg iy kh jc jy jz ka kb bi translated">单击下一步，下一步…然后它开始安装…</li></ol><h1 id="2634" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">PostgreSQL安装成功了吗？</h1><ol class=""><li id="ab7d" class="jt ju hi ih b ii lg im lh iq li iu lj iy lk jc jy jz ka kb bi translated">在系统搜索栏中搜索“sql”，然后打开终端(SQL Shell)。</li></ol><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lu"><img src="../Images/80482ef434df422f95a9d9f77c86b7d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TGRGoYGd6a05V8PQKqrTOg.png"/></div></div></figure><p id="d38a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.它看起来像下面的图像:除了密码之外的所有选项都按回车键。输入您在数据库安装过程中键入的密码。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lv"><img src="../Images/e2c96b496620d20852fd6de485fa44d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LX69x8KXEfnaXBt4VmK9CQ.png"/></div></div></figure><h1 id="e128" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">用虚拟数据填充数据库</h1><ol class=""><li id="5f61" class="jt ju hi ih b ii lg im lh iq li iu lj iy lk jc jy jz ka kb bi translated">首先，您需要创建表:</li></ol><pre class="je jf jg jh fd lw lo lx ly aw lz bi"><span id="d5cd" class="ma kj hi lo b fi mb mc l md me"><strong class="lo hj">CREATE</strong> <strong class="lo hj">TABLE</strong> <!-- -->t_oil<br/>(<br/>region      <strong class="lo hj">text</strong>,<br/>country     <strong class="lo hj">text</strong>,<br/>year<!-- -->        <strong class="lo hj">int</strong>,<br/>production  <strong class="lo hj">int</strong>,<br/>consumption <strong class="lo hj">int<br/></strong>);</span></pre><p id="1b53" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.其次，通过运行以下命令，用虚拟数据填充该表:</p><pre class="je jf jg jh fd lw lo lx ly aw lz bi"><span id="14d5" class="ma kj hi lo b fi mb mc l md me"><strong class="lo hj">COPY </strong>t_oil FROM<br/>PROGRAM ‘curl <a class="ae kc" href="https://www.cybertec-postgresql.com/secret/oil_ext.txt'" rel="noopener ugc nofollow" target="_blank">https://www.cybertec-postgresql.com/secret/oil_ext.txt'</a>;</span></pre><p id="d9d4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的命令只是将所有的石油数据转储到数据库中的<strong class="ih hj"> <em class="mf"> t_oil </em> </strong>表中。也可以用<strong class="ih hj"> <em class="mf">插入</em> </strong>命令插入数据，但需要手动插入每行数据。</p><pre class="je jf jg jh fd lw lo lx ly aw lz bi"><span id="fbe9" class="ma kj hi lo b fi mb mc l md me"><strong class="lo hj">INSERT </strong>INTO <strong class="lo hj"><em class="mf">t_oil </em></strong>(<br/>region, country, year, production, consumption )<br/><strong class="lo hj">VALUES </strong>(<br/>North America, USA, 1965, 9014, 11522);</span></pre><p id="c226" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.最后，运行下面的命令检查数据是否成功插入。</p><pre class="je jf jg jh fd lw lo lx ly aw lz bi"><span id="b422" class="ma kj hi lo b fi mb mc l md me"><strong class="lo hj">SELECT </strong>* FROM <strong class="lo hj"><em class="mf">t_oil</em></strong>;</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mg"><img src="../Images/53580d9d2597c562a5eceb94173dfb84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*27khV6BQK4fms0fWtZodmQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">显示<strong class="bd kk"> t_oil </strong>表中的所有虚拟数据</figcaption></figure><h1 id="025d" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">用Grafana数据源配置PostgreSQL</h1><p id="bde1" class="pw-post-body-paragraph if ig hi ih b ii lg ik il im lh io ip iq lr is it iu ls iw ix iy lt ja jb jc hb bi translated">现在，数据库和数据已成功安装和配置。</p><p id="c31d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们用Grafana数据源连接数据库。</p><ol class=""><li id="16a6" class="jt ju hi ih b ii ij im in iq jv iu jw iy jx jc jy jz ka kb bi translated">单击顶部标题中的Grafana图标打开侧面菜单。</li><li id="7478" class="jt ju hi ih b ii kd im ke iq kf iu kg iy kh jc jy jz ka kb bi translated">在<code class="du ll lm ln lo b">Configuration</code>图标下的侧菜单中，您应该会找到一个名为<code class="du ll lm ln lo b">Data Sources</code>的链接。</li><li id="f691" class="jt ju hi ih b ii kd im ke iq kf iu kg iy kh jc jy jz ka kb bi translated">点击顶部标题中的<code class="du ll lm ln lo b">+ Add data source</code>按钮。</li><li id="8be1" class="jt ju hi ih b ii kd im ke iq kf iu kg iy kh jc jy jz ka kb bi translated">从<em class="mf">类型</em>下拉列表中选择<em class="mf"> PostgreSQL </em>。</li></ol><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mh"><img src="../Images/e979265aae39250a6fc18f88ffb76563.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CwMSOLxD60_iu-4asCOv6A.png"/></div></div></figure><p id="470c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.单击postreSQL，它会打开配置选项卡以插入数据库详细信息。</p><p id="2a36" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6.插入以下配置</p><pre class="je jf jg jh fd lw lo lx ly aw lz bi"><span id="63ef" class="ma kj hi lo b fi mb mc l md me">Host : localhost:5432<br/>User: postgres<br/>Password : // database password that you enter during installation<br/>SSL Mode: disable</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mi"><img src="../Images/36b460df1d19a3ecae3af9537cae1bae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GKN4W4vBPxAWHjIVf-4cMg.png"/></div></div></figure><p id="3f0f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">7.点击按钮中的“保存和测试”按钮，然后显示提示信息，如“数据库连接正常”，这意味着数据库已成功配置Grafana。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mj"><img src="../Images/582d83885233743a06455d9f88629929.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7FW2wUHQGSxHInQLugXcWw.png"/></div></div></figure><p id="1e32" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">8.您可以再次打开配置选项，您会看到PostgreSQL数据库显示在数据源选项卡中。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mk"><img src="../Images/cdf4691bcde68f414329f1545583fbfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gaXDqsv7KNNrKywQ2TbRJA.png"/></div></div></figure><h1 id="9117" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">可视化Grafana仪表板上的数据</h1><p id="c93f" class="pw-post-body-paragraph if ig hi ih b ii lg ik il im lh io ip iq lr is it iu ls iw ix iy lt ja jb jc hb bi translated">成功配置数据库后，让我们开始在Grafana中可视化数据。</p><ol class=""><li id="e8a6" class="jt ju hi ih b ii ij im in iq jv iu jw iy jx jc jy jz ka kb bi translated"><strong class="ih hj">创建仪表板</strong>:点击左侧面板中的“创建”选项，并选择仪表板。</li></ol><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ml"><img src="../Images/0edcdfcf422bf070661187dc30433431.png" data-original-src="https://miro.medium.com/v2/resize:fit:820/format:webp/1*b_-ZW8Q04G4JizEWRnyHCw.png"/></div></figure><p id="5f74" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.它创建了“新仪表板”。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mm"><img src="../Images/6a7c0b6a9dc9ab6029ff173484f27ee9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fscUofHR2sr8gl6JvJYbrQ.png"/></div></div></figure><p id="6c9c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.点击“添加新面板”。它打开面板就像，</p><p id="33e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">看到这里有太多选择，不要慌。让我们一个一个讨论吧！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mn"><img src="../Images/0b258cdcd28d1e61a4bbd44f4ba81a42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6LFFjkKBYWHV0h-kbFe1VA.png"/></div></div></figure><p id="fd1f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.命名您想要的面板标题，</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mo"><img src="../Images/2be4aec78b26f02a5eba9de76ffdb736.png" data-original-src="https://miro.medium.com/v2/resize:fit:1092/format:webp/1*WzECrr-lFLytLuFzhH3L6Q.png"/></div></figure><p id="3c11" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.选择要打印的可视化选项。我选择了一个“线图”来绘制石油消耗和产量。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mp"><img src="../Images/a988a24a3b2d7b8656253b86a4dfe41c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1082/format:webp/1*rahpayUBeVXwreU8NYWr6Q.png"/></div></figure><p id="5afe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6.选择在“数据源”选项卡中配置数据库时创建的数据库源。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mq"><img src="../Images/7e5e82df80725ef388f4c6c8e9251910.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FDznioUGBSn9xVkZKNG0eA.png"/></div></div></figure><p id="ef08" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">7.点击“编辑SQL”</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mr"><img src="../Images/e8b68a313b451699d1cc3248c8875088.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QZD-fk1iF8yYzLwXxupEUQ.png"/></div></div></figure><p id="59f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">8.在查询编辑器中输入SQL查询。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ms"><img src="../Images/e88f25ce81d4dadde97e5e336aadd945.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vcY1tLS6KR1O_d2KIlYebA.png"/></div></div></figure><p id="7bbc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">9.单击顶部的“应用”按钮，控制面板将显示如下:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mt"><img src="../Images/dc3fb076b78acacb794dd158edc45be2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pKNlis1k8P9ftusl9rTRew.png"/></div></div></figure><p id="e6ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">10.类似地，创建一个新的“油耗”面板，它看起来像这样:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mu"><img src="../Images/bf379c4f85cb12eebb583938a025f383.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cukt3AY-3icCEsetQ0Wnaw.png"/></div></div></figure><p id="04c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">11.我们也可以在单个图形中制作多个图形。为此，我们需要单击查询并添加新的SQL查询:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mv"><img src="../Images/056c95738e1bb9ce0a845f73b84cea53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F0997M1ZxOnGf-HmA3IhTA.png"/></div></div></figure><p id="29cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">12.单击“应用”,它应该看起来像这样:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lp"><img src="../Images/cb72b9dbb1a86bbc4d9b3ba31393abb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u0CMZCYMrNGW_GvcyZpa1w.png"/></div></div></figure><h1 id="2a2f" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">格式化图</h1><p id="864e" class="pw-post-body-paragraph if ig hi ih b ii lg ik il im lh io ip iq lr is it iu ls iw ix iy lt ja jb jc hb bi translated">绘制完图表后，让我们做一些样式。</p><p id="6916" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">进入“编辑面板”,设置显示和图例参数如下:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mw"><img src="../Images/45d0e9f1b7590bf10175a7304ed2ed99.png" data-original-src="https://miro.medium.com/v2/resize:fit:870/format:webp/1*9cxkK0jX0vFMmtDvHJ4P4Q.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">显示设置</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mx"><img src="../Images/60495ed075b79f7ee39a22c2e130ed15.png" data-original-src="https://miro.medium.com/v2/resize:fit:786/format:webp/1*2ECm9I2DGKa3rZgxW_jGeQ.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">图例设置</figcaption></figure><p id="b869" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">设置参数后，仪表板中的图如下所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es my"><img src="../Images/a787716e5dd2692452f22b3e30bbdccb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hjy5hy-n8Q8nIP7s2dgAOA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">石油生产和消费仪表板</figcaption></figure><h1 id="1c65" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">Grafana中的变量声明</h1><blockquote class="mz na nb"><p id="dbb9" class="if ig mf ih b ii ij ik il im in io ip nc ir is it nd iv iw ix ne iz ja jb jc hb bi translated">注意:正如您在上面注意到的，用于绘制图表的SQL查询只适用于美国。如果用户也想看到其他国家的情况呢？是的，我们也可以那样做。就像用户从下拉列表中选择特定国家一样，仪表板将显示该国家的石油产量/消耗量。</p></blockquote><p id="2091" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为此，我们需要声明变量。进入仪表板设置，选择变量选项。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nf"><img src="../Images/0f644b9d1e6a265fd8695dd5656b9bd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TpRgj84POUBwjI8sfU-aEQ.png"/></div></div></figure><p id="b4c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击“添加变量”,然后打开“新变量”选项卡。输入如下参数。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ng"><img src="../Images/7ce6c5e8eddab5aaa085620014df0e3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VX8Z6P2UNTZOcnuCikHB7w.png"/></div></div></figure><p id="039d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击“添加”按钮和“保存仪表板”，仪表板上出现下拉列表，显示所有国家名称。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es nh"><img src="../Images/44c1b1eb4017ba1469262093c6b30eab.png" data-original-src="https://miro.medium.com/v2/resize:fit:738/format:webp/1*nMsEORdto3KDeFTZ8KcMkg.png"/></div></figure><p id="b30c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们需要将变量链接到Grafana中的SQL查询，以便根据用户选择动态绘制图形。</p><p id="e9ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">再次进入编辑面板，更新查询，</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ni"><img src="../Images/f167d65023b4a4091d02d99a76c9658f.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*RbX5-72v0M8htKxGZQMf8Q.png"/></div></figure><p id="0209" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里的' $country '是下拉列表的变量名。将查询中WHERE子句中的“USA”替换为“$country”变量，并保存仪表板。</p><h1 id="bf5f" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">最后</h1><p id="b48c" class="pw-post-body-paragraph if ig hi ih b ii lg ik il im lh io ip iq lr is it iu ls iw ix iy lt ja jb jc hb bi translated">最终仪表板根据用户从下拉列表中选择的国家更新图表。</p><p id="1e92" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Grafana支持几乎所有的数据库来绘制实时数据，并提供不同的监控功能，如警报等。最后但同样重要的是，它节省了开发人员实现数据可视化前端的时间。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lp"><img src="../Images/0b1fdd7601bb1f780938c510d7493223.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FVm4tj367eWpKE94bMICAQ.png"/></div></div></figure></div></div>    
</body>
</html>