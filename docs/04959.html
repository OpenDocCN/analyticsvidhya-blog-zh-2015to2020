<html>
<head>
<title>Cloud Design Patterns: Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">äº‘è®¾è®¡æ¨¡å¼:ç¬¬1éƒ¨åˆ†</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/analytics-vidhya/cloud-design-patterns-part-1-32123d76ad96?source=collection_archive---------27-----------------------#2020-04-06">https://medium.com/analytics-vidhya/cloud-design-patterns-part-1-32123d76ad96?source=collection_archive---------27-----------------------#2020-04-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/bd0f8634507e8cfa6585120ca786db55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fwiweb1s25r_wu1EGZbEyw.png"/></div></div></figure><h1 id="769c" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated"><strong class="ak">é‡è¯•æ¨¡å¼</strong></h1><p id="e56c" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">ä¸äº‘ä¸­è¿è¡Œçš„å…ƒç´ è¿›è¡Œé€šä¿¡çš„åº”ç”¨ç¨‹åºå¿…é¡»å¯¹è¿™ç§ç¯å¢ƒä¸­å¯èƒ½å‘ç”Ÿçš„ç¬æ—¶æ•…éšœä¿æŒæ•æ„Ÿã€‚æ•…éšœåŒ…æ‹¬ç»„ä»¶å’ŒæœåŠ¡çš„ç½‘ç»œè¿æ¥æš‚æ—¶ä¸­æ–­ã€æœåŠ¡æš‚æ—¶ä¸å¯ç”¨æˆ–æœåŠ¡ç¹å¿™æ—¶å‡ºç°è¶…æ—¶ã€‚</p><p id="4922" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">è¿™äº›æ•…éšœé€šå¸¸æ˜¯è‡ªæˆ‘çº æ­£çš„ï¼Œå¦‚æœè§¦å‘æ•…éšœçš„åŠ¨ä½œåœ¨é€‚å½“çš„å»¶è¿Ÿåé‡å¤ï¼Œå®ƒå¾ˆå¯èƒ½æ˜¯æˆåŠŸçš„ã€‚ä¾‹å¦‚ï¼Œæ­£åœ¨å¤„ç†å¤§é‡å¹¶å‘è¯·æ±‚çš„æ•°æ®åº“æœåŠ¡å¯ä»¥å®ç°ä¸€ä¸ªèŠ‚æµç­–ç•¥ï¼Œè¯¥ç­–ç•¥ä¼šæš‚æ—¶æ‹’ç»ä»»ä½•è¿›ä¸€æ­¥çš„è¯·æ±‚ï¼Œç›´åˆ°å…¶å·¥ä½œè´Ÿè½½å‡è½»ä¸ºæ­¢ã€‚å°è¯•è®¿é—®æ•°æ®åº“çš„åº”ç”¨ç¨‹åºå¯èƒ½ä¼šè¿æ¥å¤±è´¥ï¼Œä½†å¦‚æœå®ƒåœ¨ä¸€æ®µæ—¶é—´åå†æ¬¡å°è¯•ï¼Œå®ƒå¯èƒ½ä¼šæˆåŠŸã€‚</p><p id="2b77" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">å¦‚æœåº”ç”¨ç¨‹åºåœ¨å°è¯•å‘è¿œç¨‹æœåŠ¡å‘é€è¯·æ±‚æ—¶æ£€æµ‹åˆ°æ•…éšœï¼Œå®ƒå¯ä»¥é€šè¿‡ä½¿ç”¨ä»¥ä¸‹ç­–ç•¥æ¥å¤„ç†æ•…éšœ:</p><ul class=""><li id="8900" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated"><strong class="jq hj">å–æ¶ˆã€‚</strong>å¦‚æœæ•…éšœè¡¨æ˜å¤±è´¥ä¸æ˜¯æš‚æ—¶çš„ï¼Œæˆ–è€…å¦‚æœé‡å¤çš„è¯ä¸å¤ªå¯èƒ½æˆåŠŸï¼Œåº”ç”¨ç¨‹åºåº”è¯¥å–æ¶ˆæ“ä½œå¹¶æŠ¥å‘Šä¸€ä¸ªå¼‚å¸¸ã€‚</li><li id="564c" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated"><strong class="jq hj">é‡è¯•ã€‚</strong>å¦‚æœæŠ¥å‘Šçš„ç‰¹å®šæ•…éšœå¼‚å¸¸æˆ–ç½•è§ï¼Œåˆ™å¯èƒ½æ˜¯ç”±å¼‚å¸¸æƒ…å†µå¼•èµ·çš„ï¼Œä¾‹å¦‚ç½‘ç»œæ•°æ®åŒ…åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æŸå</li><li id="fa5e" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated"><strong class="jq hj">å»¶è¿Ÿåé‡è¯•ã€‚</strong>å¦‚æœæ•…éšœæ˜¯ç”±æ›´å¸¸è§çš„è¿æ¥æˆ–ç¹å¿™æ•…éšœå¼•èµ·çš„ï¼Œç½‘ç»œæˆ–æœåŠ¡å¯èƒ½éœ€è¦ä¸€æ®µæ—¶é—´æ¥çº æ­£è¿æ¥é—®é¢˜æˆ–æ¸…é™¤å·¥ä½œç§¯å‹ã€‚åº”ç”¨ç¨‹åºåº”è¯¥åœ¨é‡è¯•è¯·æ±‚ä¹‹å‰ç­‰å¾…ä¸€æ®µåˆé€‚çš„æ—¶é—´ã€‚</li></ul><p id="189c" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">å®šä¹‰é€‚å½“çš„é‡è¯•æ¬¡æ•°å’Œé—´éš”ã€‚å‡ æ¬¡å°è¯•åï¼Œå¯èƒ½éœ€è¦æ”¾å¼ƒå¹¶è¿”å›ä¸€ä¸ªå¤±è´¥ã€‚åœ¨å°è¯•ä¸‹ä¸€ä¸ªè¯·æ±‚ä¹‹å‰ç­‰å¾…ä¹Ÿæ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ã€‚è¿™å¯ä»¥é¿å…ç»™å·²ç»è¿‡è½½çš„æœåŠ¡å¢åŠ è¿‡å¤šçš„è´Ÿè½½ã€‚</p><p id="1c10" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">å…¸å‹ç­–ç•¥ä½¿ç”¨ä»¥ä¸‹ç±»å‹çš„é‡è¯•é—´éš”:</p><ul class=""><li id="c563" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated"><strong class="jq hj">æŒ‡æ•°å›é€€ã€‚</strong>åº”ç”¨ç¨‹åºåœ¨ç¬¬ä¸€æ¬¡é‡è¯•ä¹‹å‰ä¼šç­‰å¾…ä¸€å°æ®µæ—¶é—´ï¼Œç„¶ååœ¨éšåçš„æ¯æ¬¡é‡è¯•ä¹‹é—´ä»¥æŒ‡æ•°æ–¹å¼å¢åŠ æ¬¡æ•°ã€‚ä¾‹å¦‚ï¼Œå®ƒå¯èƒ½ä¼šåœ¨50æ¯«ç§’ã€100æ¯«ç§’ã€200æ¯«ç§’ç­‰ä¹‹åé‡è¯•è¯¥æ“ä½œã€‚</li><li id="c541" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated"><strong class="jq hj">å¢é‡åŒºé—´ã€‚</strong>åº”ç”¨ç¨‹åºåœ¨ç¬¬ä¸€æ¬¡é‡è¯•ä¹‹å‰ä¼šç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œç„¶ååœ¨æ¯æ¬¡åç»­é‡è¯•ä¹‹é—´é€æ¸å¢åŠ æ¬¡æ•°ã€‚ä¾‹å¦‚ï¼Œå®ƒå¯èƒ½ä¼šåœ¨50æ¯«ç§’ã€100æ¯«ç§’ã€200æ¯«ç§’ç­‰ä¹‹åé‡è¯•è¯¥æ“ä½œã€‚</li></ul><figure class="lg lh li lj fd ij er es paragraph-image"><div class="er es lf"><img src="../Images/3c886c3edac4b6d40665ed817d84da4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/1*l3VpxqsRWzQkn5RPg_EZOA.png"/></div></figure><ul class=""><li id="809c" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated"><strong class="jq hj">æœ‰è§„å¾‹çš„é—´éš”ã€‚</strong>åº”ç”¨ç¨‹åºåœ¨æ¯æ¬¡å°è¯•ä¹‹é—´ç­‰å¾…ç›¸åŒçš„æ—¶é—´ã€‚ä¾‹å¦‚ï¼Œå®ƒå¯èƒ½æ¯3ç§’é‡è¯•ä¸€æ¬¡æ“ä½œã€‚</li><li id="ca39" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated"><strong class="jq hj">ç«‹å³é‡è¯•ã€‚</strong>æœ‰æ—¶ï¼Œç¬æ—¶æ•…éšœéå¸¸çŸ­æš‚ï¼Œå¯èƒ½æ˜¯ç”±ç½‘ç»œæ•°æ®åŒ…å†²çªæˆ–ç¡¬ä»¶ç»„ä»¶ä¸­çš„å³°å€¼ç­‰äº‹ä»¶å¼•èµ·çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç«‹å³é‡è¯•æ“ä½œæ˜¯åˆé€‚çš„ï¼Œå› ä¸ºå¦‚æœåœ¨åº”ç”¨ç¨‹åºç»„è£…å’Œå‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚çš„æ—¶é—´å†…æ•…éšœå·²ç»æ¸…é™¤ï¼Œåˆ™é‡è¯•æ“ä½œå¯èƒ½ä¼šæˆåŠŸã€‚ä½†æ˜¯ï¼Œä¸åº”è¯¥æœ‰è¶…è¿‡ä¸€æ¬¡çš„ç«‹å³é‡è¯•å°è¯•ï¼Œå¦‚æœç«‹å³é‡è¯•å¤±è´¥ï¼Œæ‚¨åº”è¯¥åˆ‡æ¢åˆ°æ›¿ä»£ç­–ç•¥ï¼Œä¾‹å¦‚æŒ‡æ•°å›é€€æˆ–å›é€€æ“ä½œã€‚</li></ul><figure class="lg lh li lj fd ij er es paragraph-image"><div class="er es lk"><img src="../Images/8ad7d92a182b8a9aff63ee35f9b23918.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/1*xWRWNKVl2xPHa_MpKxcMdQ.png"/></div></figure><ul class=""><li id="71d9" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated"><strong class="jq hj">éšæœºåŒ–ã€‚</strong>ä¸Šè¿°ä»»ä½•é‡è¯•ç­–ç•¥å¯èƒ½åŒ…æ‹¬éšæœºåŒ–ï¼Œä»¥é˜²æ­¢å®¢æˆ·ç«¯çš„å¤šä¸ªå®ä¾‹åŒæ—¶å‘é€åç»­é‡è¯•å°è¯•ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå®ä¾‹å¯èƒ½åœ¨3ç§’ã€11ç§’ã€28ç§’ç­‰ä¹‹åé‡è¯•æ“ä½œï¼Œè€Œå¦ä¸€ä¸ªå®ä¾‹å¯èƒ½åœ¨4ç§’ã€12ç§’ã€26ç§’ç­‰ä¹‹åé‡è¯•æ“ä½œã€‚éšæœºåŒ–æ˜¯ä¸€ç§æœ‰ç”¨çš„æŠ€æœ¯ï¼Œå¯ä»¥ä¸å…¶ä»–ç­–ç•¥ç»“åˆä½¿ç”¨ã€‚</li></ul><p id="026c" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">ä¸€èˆ¬åŸåˆ™æ˜¯ï¼Œå¯¹åå°æ“ä½œä½¿ç”¨æŒ‡æ•°åé€€ç­–ç•¥ï¼Œå¯¹äº¤äº’å¼æ“ä½œä½¿ç”¨ç«‹å³æˆ–å®šæœŸé‡è¯•ç­–ç•¥ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œæ‚¨éƒ½åº”è¯¥é€‰æ‹©å»¶è¿Ÿå’Œé‡è¯•æ¬¡æ•°ï¼Œä»¥ä¾¿æ‰€æœ‰é‡è¯•å°è¯•çš„æœ€å¤§å»¶è¿Ÿéƒ½åœ¨æ‰€éœ€çš„ç«¯åˆ°ç«¯å»¶è¿Ÿè¦æ±‚èŒƒå›´å†…ã€‚</p><p id="72b4" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hj"> <em class="ll">ä»£ç ä¸ºJavaä¸­çš„é‡è¯•æ¨¡å¼</em> </strong></p><pre class="lg lh li lj fd lm ln lo lp aw lq bi"><span id="521e" class="lr ir hi ln b fi ls lt l lu lv">package util;<br/><br/>import java.util.Arrays;<br/>import java.util.function.Supplier;<br/><br/>public final class Util {<br/><br/>    /**<br/>     * Retry to run a function a few times, retry if specific exceptions occur.<br/>     *<br/>     * @param timeoutExceptionClasses what exceptions should lead to retry. Default: any exception<br/>     */<br/>    public static &lt;T&gt; T retry(Supplier&lt;T&gt; function, int maxRetries, Class&lt;? extends Exception&gt;... timeoutExceptionClasses) {<br/>        timeoutExceptionClasses = timeoutExceptionClasses.length == 0 ? new Class[]{Exception.class} : timeoutExceptionClasses;<br/>        int retryCounter = 0;<br/>        Exception lastException = null;<br/>        while (retryCounter &lt; maxRetries) {<br/>            try {<br/>                return function.get();<br/>            } catch (Exception e) {<br/>                lastException = e;<br/>       if(Arrays.stream(timeoutExceptionClasses).noneMatch(tClass -&gt;<br/>                        tClass.isAssignableFrom(e.getClass())<br/>                ))<br/>                    throw lastException instanceof RuntimeException    ?((RuntimeException) lastException) :<br/>                            new RuntimeException(lastException);<br/>                else {<br/>                    retryCounter++;<br/>                    System.err.println("FAILED - Command failed on retry " + retryCounter + " of " + maxRetries);<br/>                    e.printStackTrace();<br/>                    if (retryCounter &gt;= maxRetries) {<br/>                        break;<br/>                    }<br/>                }<br/>            }<br/>        }<br/>        throw lastException instanceof RuntimeException ?<br/>                ((RuntimeException) lastException) :<br/>                new RuntimeException(lastException);<br/>    }<br/><br/>    /** Manual test method */<br/>    public static void main(String... args) throws Exception {<br/>        retry(() -&gt; {<br/>            System.out.println(5 / 0);<br/>            return null;<br/>        }, 5, Exception.class);<br/>    }<br/>}</span></pre><h1 id="7dea" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">æ–­è·¯å™¨æ¨¡å¼</h1><p id="6196" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œå¯¹è¿œç¨‹èµ„æºå’ŒæœåŠ¡çš„è°ƒç”¨å¯èƒ½ä¼šç”±äºç¬æ—¶æ•…éšœè€Œå¤±è´¥ï¼Œä¾‹å¦‚ç½‘ç»œè¿æ¥ç¼“æ…¢æˆ–è¶…æ—¶ï¼Œæˆ–è€…å½“èµ„æºè¿‡é‡ä½¿ç”¨æˆ–æš‚æ—¶ä¸å¯ç”¨æ—¶ã€‚è¿™äº›æ•…éšœé€šå¸¸ä¼šåœ¨å¾ˆçŸ­çš„æ—¶é—´å†…è‡ªè¡Œçº æ­£ï¼Œå¥å£®çš„äº‘åº”ç”¨ç¨‹åºåº”è¯¥å‡†å¤‡å¥½é€šè¿‡ä½¿ç”¨*é‡è¯•æ¨¡å¼*ç­‰ç­–ç•¥æ¥å¤„ç†å®ƒä»¬ã€‚</p><p id="ed3f" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">ä½†æ˜¯ï¼Œå¯èƒ½ä¼šå‡ºç°ç”±äºæ„å¤–äº‹ä»¶å¯¼è‡´æ•…éšœçš„æƒ…å†µï¼Œè¿™å¯èƒ½éœ€è¦æ›´é•¿çš„æ—¶é—´æ¥ä¿®å¤ã€‚è¿™äº›æ•…éšœçš„ä¸¥é‡ç¨‹åº¦ä»éƒ¨åˆ†å¤±å»è¿æ¥åˆ°æœåŠ¡å®Œå…¨å¤±è´¥ä¸ç­‰ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œåº”ç”¨ç¨‹åºä¸æ–­é‡è¯•ä¸å¤ªå¯èƒ½æˆåŠŸçš„æ“ä½œå¯èƒ½æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚ç›¸åï¼Œåº”ç”¨ç¨‹åºåº”è¯¥è¿…é€Ÿæ¥å—æ“ä½œå·²ç»å¤±è´¥ï¼Œå¹¶ç›¸åº”åœ°å¤„ç†è¿™ä¸ªå¤±è´¥ã€‚</p><p id="424d" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">æ­¤å¤–ï¼Œå¦‚æœæŸé¡¹æœåŠ¡éå¸¸ç¹å¿™ï¼Œç³»ç»ŸæŸä¸ªéƒ¨åˆ†çš„æ•…éšœå¯èƒ½ä¼šå¯¼è‡´çº§è”æ•…éšœã€‚ä¾‹å¦‚ï¼Œè°ƒç”¨æœåŠ¡çš„æ“ä½œå¯ä»¥è¢«é…ç½®ä¸ºå®ç°è¶…æ—¶ï¼Œå¹¶ä¸”å¦‚æœæœåŠ¡åœ¨è¯¥æ—¶é—´æ®µå†…æ²¡æœ‰å“åº”ï¼Œåˆ™ç”¨å¤±è´¥æ¶ˆæ¯è¿›è¡Œå›å¤ã€‚</p><p id="db0b" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><em class="ll">æ–­è·¯å™¨</em>æ¨¡å¼å¯ä»¥é˜²æ­¢åº”ç”¨ç¨‹åºåå¤å°è¯•æ‰§è¡Œå¯èƒ½å¤±è´¥çš„æ“ä½œã€‚å…è®¸å®ƒç»§ç»­ï¼Œè€Œæ— éœ€ç­‰å¾…æ•…éšœè¢«ä¿®å¤æˆ–æµªè´¹CPUå‘¨æœŸï¼ŒåŒæ—¶å®ƒç¡®å®šæ•…éšœæ˜¯é•¿æœŸæŒç»­çš„ã€‚æ–­è·¯å™¨æ¨¡å¼è¿˜ä½¿åº”ç”¨ç¨‹åºèƒ½å¤Ÿæ£€æµ‹æ•…éšœæ˜¯å¦å·²ç»è§£å†³ã€‚å¦‚æœé—®é¢˜ä¼¼ä¹å·²ç»è§£å†³ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥å°è¯•è°ƒç”¨æ“ä½œã€‚</p><p id="aaef" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">æ–­è·¯å™¨æ¨¡å¼çš„ç›®çš„ä¸åŒäºé‡è¯•æ¨¡å¼ã€‚é‡è¯•æ¨¡å¼ä½¿åº”ç”¨ç¨‹åºèƒ½å¤Ÿåœ¨æœŸæœ›æˆåŠŸçš„æƒ…å†µä¸‹é‡è¯•æ“ä½œã€‚æ–­è·¯å™¨æ¨¡å¼é˜²æ­¢åº”ç”¨ç¨‹åºæ‰§è¡Œå¯èƒ½å¤±è´¥çš„æ“ä½œã€‚åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡ä½¿ç”¨é‡è¯•æ¨¡å¼æ¥ç»“åˆè¿™ä¸¤ç§æ¨¡å¼ï¼Œä»¥é€šè¿‡æ–­è·¯å™¨è°ƒç”¨æ“ä½œã€‚ç„¶è€Œï¼Œé‡è¯•é€»è¾‘åº”è¯¥å¯¹æ–­è·¯å™¨è¿”å›çš„ä»»ä½•å¼‚å¸¸æ•æ„Ÿï¼Œå¹¶ä¸”å¦‚æœæ–­è·¯å™¨æŒ‡ç¤ºæ•…éšœä¸æ˜¯ç¬æ—¶çš„ï¼Œåˆ™æ”¾å¼ƒé‡è¯•å°è¯•ã€‚</p><p id="8677" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">æ–­è·¯å™¨å……å½“å¯èƒ½å¤±è´¥çš„æ“ä½œçš„ä»£ç†ã€‚ä»£ç†åº”è¯¥ç›‘è§†æœ€è¿‘å‘ç”Ÿçš„å¤±è´¥æ¬¡æ•°ï¼Œå¹¶ä½¿ç”¨è¯¥ä¿¡æ¯æ¥å†³å®šæ˜¯å…è®¸æ“ä½œç»§ç»­è¿›è¡Œè¿˜æ˜¯ç®€å•åœ°ç«‹å³è¿”å›ä¸€ä¸ªå¼‚å¸¸ã€‚</p><p id="3fbe" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">ä»£ç†å¯ä»¥å®ç°ä¸ºçŠ¶æ€æœºï¼Œå…·æœ‰æ¨¡æ‹Ÿç”µè·¯æ–­è·¯å™¨åŠŸèƒ½çš„ä»¥ä¸‹çŠ¶æ€:</p><ul class=""><li id="5554" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated"><strong class="jq hj">å…³é—­ã€‚</strong>æ¥è‡ªåº”ç”¨ç¨‹åºçš„è¯·æ±‚è¢«è·¯ç”±åˆ°æ“ä½œã€‚ä»£ç†ç»´æŠ¤æœ€è¿‘å¤±è´¥æ¬¡æ•°çš„è®¡æ•°ï¼Œå¹¶ä¸”å¦‚æœå¯¹æ“ä½œçš„è°ƒç”¨ä¸æˆåŠŸï¼Œåˆ™ä»£ç†é€’å¢è¯¥è®¡æ•°ã€‚å¦‚æœåœ¨ç»™å®šçš„æ—¶é—´æ®µå†…ï¼Œæœ€è¿‘çš„æ•…éšœæ•°é‡è¶…è¿‡æŒ‡å®šçš„é˜ˆå€¼ï¼Œåˆ™ä»£ç†è¢«ç½®äº<em class="ll">æ‰“å¼€çŠ¶æ€</em>ã€‚æ­¤æ—¶ï¼Œä»£ç†å¯åŠ¨è¶…æ—¶å®šæ—¶å™¨ï¼Œå½“è¯¥å®šæ—¶å™¨åˆ°æœŸæ—¶ï¼Œä»£ç†è¢«ç½®äº<em class="ll">åŠå¼€çŠ¶æ€</em>ã€‚è¶…æ—¶è®¡æ—¶å™¨çš„ç›®çš„æ˜¯åœ¨å…è®¸åº”ç”¨ç¨‹åºå†æ¬¡å°è¯•æ‰§è¡Œæ“ä½œä¹‹å‰ï¼Œç»™ç³»ç»Ÿæ—¶é—´æ¥ä¿®å¤å¯¼è‡´å¤±è´¥çš„é—®é¢˜ã€‚</li><li id="4374" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated"><strong class="jq hj">æ‰“å¼€ã€‚æ¥è‡ªåº”ç”¨ç¨‹åºçš„è¯·æ±‚ç«‹å³å¤±è´¥ï¼Œå¹¶å‘åº”ç”¨ç¨‹åºè¿”å›ä¸€ä¸ªå¼‚å¸¸ã€‚</strong></li><li id="ad9f" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated"><strong class="jq hj">åŠå¼€ã€‚</strong>æ¥è‡ªåº”ç”¨ç¨‹åºçš„æœ‰é™æ•°é‡çš„è¯·æ±‚è¢«å…è®¸é€šè¿‡å¹¶è°ƒç”¨æ“ä½œã€‚å¦‚æœè¿™äº›è¯·æ±‚æˆåŠŸï¼Œåˆ™è®¤ä¸ºä¹‹å‰å¯¼è‡´æ•…éšœçš„æ•…éšœå·²ç»ä¿®å¤ï¼Œæ–­è·¯å™¨åˆ‡æ¢åˆ°é—­åˆçŠ¶æ€(æ•…éšœè®¡æ•°å™¨å¤ä½)ã€‚å¦‚æœä»»ä½•è¯·æ±‚å¤±è´¥ï¼Œæ–­è·¯å™¨è®¤ä¸ºæ•…éšœä»ç„¶å­˜åœ¨ï¼Œå› æ­¤å®ƒå›å¤åˆ°æ–­å¼€çŠ¶æ€ï¼Œå¹¶é‡å¯è¶…æ—¶è®¡æ—¶å™¨ï¼Œä»¥ç»™ç³»ç»Ÿæ›´å¤šæ—¶é—´ä»æ•…éšœä¸­æ¢å¤ã€‚</li></ul><p id="c981" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hj"><em class="ll">Javaä¸­æ–­è·¯å™¨æ¨¡å¼çš„ä»£ç </em> </strong></p><p id="3946" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">ä½ å¯ä»¥ç”¨ç½‘é£Â·æµ·æ–¯ç‰¹é‡Œå…‹æ–¯å®ç°æ–­è·¯å™¨æ¨¡å¼ã€‚ä¸‹é¢çš„ä»£ç å¯ä»¥æ›´å¥½åœ°è§£é‡Šè§£å†³æ–¹æ¡ˆã€‚</p><p id="2a72" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">ä¸‹é¢æ˜¯æ ¹æ®å­¦æ ¡åç§°è·å–å­¦æ ¡è¯¦ç»†ä¿¡æ¯çš„åº”ç”¨ç¨‹åºã€‚</p><p id="fe3a" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">Pom.xmlå¦‚ä¸‹</p><pre class="lg lh li lj fd lm ln lo lp aw lq bi"><span id="e543" class="lr ir hi ln b fi ls lt l lu lv">&lt;<strong class="ln hj">dependencies</strong>&gt;<br/>   &lt;<strong class="ln hj">dependency</strong>&gt;<br/>      &lt;<strong class="ln hj">groupId</strong>&gt;org.springframework.boot&lt;/<strong class="ln hj">groupId</strong>&gt;<br/>      &lt;<strong class="ln hj">artifactId</strong>&gt;spring-boot-starter-actuator&lt;/<strong class="ln hj">artifactId</strong>&gt;<br/>   &lt;/<strong class="ln hj">dependency</strong>&gt;<br/>   &lt;<strong class="ln hj">dependency</strong>&gt;<br/>      &lt;<strong class="ln hj">groupId</strong>&gt;org.springframework.cloud&lt;/<strong class="ln hj">groupId</strong>&gt;<br/>      &lt;<strong class="ln hj">artifactId</strong>&gt;spring-cloud-starter-hystrix&lt;/<strong class="ln hj">artifactId</strong>&gt;<br/>   &lt;/<strong class="ln hj">dependency</strong>&gt;<br/>   &lt;<strong class="ln hj">dependency</strong>&gt;<br/>      &lt;<strong class="ln hj">groupId</strong>&gt;org.springframework.cloud&lt;/<strong class="ln hj">groupId</strong>&gt;<br/>      &lt;<strong class="ln hj">artifactId</strong>&gt;spring-cloud-starter-hystrix-dashboard&lt;/<strong class="ln hj">artifactId</strong>&gt;<br/>   &lt;/<strong class="ln hj">dependency</strong>&gt;<br/>   &lt;<strong class="ln hj">dependency</strong>&gt;<br/>      &lt;<strong class="ln hj">groupId</strong>&gt;org.springframework.boot&lt;/<strong class="ln hj">groupId</strong>&gt;<br/>      &lt;<strong class="ln hj">artifactId</strong>&gt;spring-boot-starter-data-rest&lt;/<strong class="ln hj">artifactId</strong>&gt;<br/>   &lt;/<strong class="ln hj">dependency</strong>&gt;<br/>   &lt;<strong class="ln hj">dependency</strong>&gt;<br/>      &lt;<strong class="ln hj">groupId</strong>&gt;org.springframework.boot&lt;/<strong class="ln hj">groupId</strong>&gt;<br/>      &lt;<strong class="ln hj">artifactId</strong>&gt;spring-boot-starter-web&lt;/<strong class="ln hj">artifactId</strong>&gt;<br/>   &lt;/<strong class="ln hj">dependency</strong>&gt;<br/><br/>   &lt;<strong class="ln hj">dependency</strong>&gt;<br/>      &lt;<strong class="ln hj">groupId</strong>&gt;org.springframework.boot&lt;/<strong class="ln hj">groupId</strong>&gt;<br/>      &lt;<strong class="ln hj">artifactId</strong>&gt;spring-boot-starter-test&lt;/<strong class="ln hj">artifactId</strong>&gt;<br/>      &lt;<strong class="ln hj">scope</strong>&gt;test&lt;/<strong class="ln hj">scope</strong>&gt;<br/>   &lt;/<strong class="ln hj">dependency</strong>&gt;<br/>&lt;/<strong class="ln hj">dependencies</strong>&gt;<br/><br/>&lt;<strong class="ln hj">dependencyManagement</strong>&gt;<br/>   &lt;<strong class="ln hj">dependencies</strong>&gt;<br/>      &lt;<strong class="ln hj">dependency</strong>&gt;<br/>         &lt;<strong class="ln hj">groupId</strong>&gt;org.springframework.cloud&lt;/<strong class="ln hj">groupId</strong>&gt;<br/>         &lt;<strong class="ln hj">artifactId</strong>&gt;spring-cloud-dependencies&lt;/<strong class="ln hj">artifactId</strong>&gt;<br/>         &lt;<strong class="ln hj">version</strong>&gt;${spring-cloud.version}&lt;/<strong class="ln hj">version</strong>&gt;<br/>         &lt;<strong class="ln hj">type</strong>&gt;pom&lt;/<strong class="ln hj">type</strong>&gt;<br/>         &lt;<strong class="ln hj">scope</strong>&gt;import&lt;/<strong class="ln hj">scope</strong>&gt;<br/>      &lt;/<strong class="ln hj">dependency</strong>&gt;<br/>   &lt;/<strong class="ln hj">dependencies</strong>&gt;<br/>&lt;/<strong class="ln hj">dependencyManagement</strong>&gt;</span></pre><p id="02d6" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">ä¸»è¦çš„ç±»å¦‚ä¸‹</p><pre class="lg lh li lj fd lm ln lo lp aw lq bi"><span id="1adb" class="lr ir hi ln b fi ls lt l lu lv"><strong class="ln hj">import </strong>org.springframework.boot.SpringApplication;<br/><strong class="ln hj">import </strong>org.springframework.boot.autoconfigure.SpringBootApplication;<br/><strong class="ln hj">import </strong>org.springframework.cloud.client.circuitbreaker.EnableCircuitBreaker;<br/><strong class="ln hj">import </strong>org.springframework.cloud.netflix.hystrix.dashboard.EnableHystrixDashboard;<br/><br/>@SpringBootApplication<br/>@EnableHystrixDashboard<br/>@EnableCircuitBreaker<br/><strong class="ln hj">public class </strong>SpringHystrixSchoolServiceApplication {<br/><br/>   <strong class="ln hj">public static void </strong>main(String[] args) {<br/>      SpringApplication.run(SpringHystrixSchoolServiceApplication.<strong class="ln hj">class</strong>, args);<br/>   }<br/>}</span></pre><p id="a4fc" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">æˆ‘ä»¬ç”¨<code class="du lw lx ly ln b"><em class="ll">@EnableCircuitBreaker</em></code> <em class="ll"> </em>æ¥æŒ‡å®šæˆ‘ä»¬éœ€è¦ä¸ºè¿™ä¸ªåº”ç”¨å¯ç”¨æ–­è·¯å™¨ã€‚</p><p id="8165" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">ä¸‹é¢æ˜¯RestController</p><pre class="lg lh li lj fd lm ln lo lp aw lq bi"><span id="9a8f" class="lr ir hi ln b fi ls lt l lu lv"><strong class="ln hj">import </strong>org.springframework.beans.factory.annotation.Autowired;<br/><strong class="ln hj">import </strong>org.springframework.web.bind.annotation.PathVariable;<br/><strong class="ln hj">import </strong>org.springframework.web.bind.annotation.RequestMapping;<br/><strong class="ln hj">import </strong>org.springframework.web.bind.annotation.RequestMethod;<br/><strong class="ln hj">import </strong>org.springframework.web.bind.annotation.RestController;<br/><br/><strong class="ln hj">import </strong>com.example.springhystrixschoolservice.delegate.StudentService;<br/><br/>@RestController<br/><strong class="ln hj">public class </strong>SchoolServiceController {<br/>   <br/>   @Autowired<br/>   StudentService studentService;<br/><br/>   @RequestMapping(value = <strong class="ln hj">"/getSchoolDetails/{schoolname}"</strong>, method = RequestMethod.GET)<br/>   <strong class="ln hj">public </strong>String getStudents(@PathVariable String schoolname) {<br/>      System.out.println(<strong class="ln hj">"Going to call student service to get data!"</strong>);<br/>      <strong class="ln hj">return </strong>studentService.callStudentServiceAndGetData(schoolname);<br/>   }<br/>   <br/>}</span></pre><p id="7c6f" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">æœ€åï¼ŒæœåŠ¡ä»£ç å¦‚ä¸‹</p><pre class="lg lh li lj fd lm ln lo lp aw lq bi"><span id="ba3a" class="lr ir hi ln b fi ls lt l lu lv"><strong class="ln hj">import </strong>java.util.Date;<br/><br/><strong class="ln hj">import </strong>org.springframework.beans.factory.annotation.Autowired;<br/><strong class="ln hj">import </strong>org.springframework.context.annotation.Bean;<br/><strong class="ln hj">import </strong>org.springframework.core.ParameterizedTypeReference;<br/><strong class="ln hj">import </strong>org.springframework.http.HttpMethod;<br/><strong class="ln hj">import </strong>org.springframework.stereotype.Service;<br/><strong class="ln hj">import </strong>org.springframework.web.client.RestTemplate;<br/><br/><strong class="ln hj">import </strong>com.netflix.hystrix.contrib.javanica.annotation.HystrixCommand;<br/><br/>@Service<br/><strong class="ln hj">public class </strong>StudentService {<br/>   @Autowired<br/>   RestTemplate restTemplate;<br/>   <br/>   @HystrixCommand(fallbackMethod = <strong class="ln hj">"callStudentServiceAndGetData_Fallback"</strong>)<br/>   <strong class="ln hj">public </strong>String callStudentServiceAndGetData(String schoolname) {<br/>      System.out.println(<strong class="ln hj">"Getting School details for " </strong>+ schoolname);<br/>      String response = restTemplate<br/>            .exchange(<strong class="ln hj">"http://localhost:8098/getStudentDetailsForSchool/{schoolname}"<br/>            </strong>, HttpMethod.GET<br/>            , <strong class="ln hj">null<br/>            </strong>, <strong class="ln hj">new </strong>ParameterizedTypeReference&lt;String&gt;() {<br/>         }, schoolname).getBody();<br/><br/>      System.out.println(<strong class="ln hj">"Response Received as " </strong>+ response + <strong class="ln hj">" -  " </strong>+ <strong class="ln hj">new </strong>Date());<br/><br/>      <strong class="ln hj">return "NORMAL FLOW !!! - School Name -  " </strong>+ schoolname + <strong class="ln hj">" :::  Student Details " </strong>+ response + <strong class="ln hj">" -  " </strong>+ <strong class="ln hj">new </strong>Date();<br/>   }<br/>   <br/>   @SuppressWarnings(<strong class="ln hj">"unused"</strong>)<br/>   <strong class="ln hj">private </strong>String callStudentServiceAndGetData_Fallback(String schoolname) {<br/>      System.out.println(<strong class="ln hj">"Student Service is down!!! fallback route enabled..."</strong>);<br/>      <strong class="ln hj">return "CIRCUIT BREAKER ENABLED!!!No Response From Student Service at this moment. Service will be back shortly - " </strong>+ <strong class="ln hj">new </strong>Date();<br/>   }<br/><br/>   @Bean<br/>   <strong class="ln hj">public </strong>RestTemplate restTemplate() {<br/>      <strong class="ln hj">return new </strong>RestTemplate();<br/>   }<br/>}</span></pre><p id="7edf" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">å¦‚æœä½ ä»”ç»†è§‚å¯Ÿï¼Œæˆ‘ä»¬åœ¨æ–¹æ³•<code class="du lw lx ly ln b"><em class="ll">callStudentServiceAndGetData</em></code>ä¸Šä½¿ç”¨äº†<code class="du lw lx ly ln b"><em class="ll">HystrixCommand</em></code> <em class="ll"> </em>å’Œå›é€€æ–¹æ³•ã€‚ç½‘é£çš„Hystrixåº“æä¾›äº†æ–­è·¯å™¨æ¨¡å¼çš„å®ç°ã€‚å½“æ‚¨å°†æ–­è·¯å™¨åº”ç”¨äºä¸€ä¸ªæ–¹æ³•æ—¶ï¼ŒHystrixä¼šç›‘è§†å¯¹è¯¥æ–¹æ³•çš„å¤±è´¥è°ƒç”¨ï¼Œå¦‚æœå¤±è´¥ç´¯ç§¯åˆ°æŸä¸ªé˜ˆå€¼ï¼ŒHystrixä¼šæ–­å¼€ç”µè·¯ï¼Œä»¥ä¾¿åç»­è°ƒç”¨è‡ªåŠ¨å¤±è´¥ã€‚å½“ç”µè·¯æ‰“å¼€æ—¶ï¼ŒHystrixå°†è°ƒç”¨é‡å®šå‘åˆ°æ–¹æ³•ï¼Œå¹¶å°†å®ƒä»¬ä¼ é€’ç»™æŒ‡å®šçš„å›é€€æ–¹æ³•ã€‚</p><p id="d169" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">Spring Cloudç½‘é£Hystrixå¯»æ‰¾ä»»ä½•å¸¦æœ‰<code class="du lw lx ly ln b">@HystrixCommand</code>æ³¨é‡Šçš„æ–¹æ³•ï¼Œå¹¶å°†è¯¥æ–¹æ³•åŒ…è£…åœ¨ä¸€ä¸ªè¿æ¥åˆ°æ–­è·¯å™¨çš„ä»£ç†ä¸­ï¼Œä»¥ä¾¿Hystrixå¯ä»¥ç›‘æ§å®ƒã€‚</p><p id="ec49" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼å¦‚æœä½ å–œæ¬¢ï¼Œè¯·é¼“æŒğŸ‘ä¸ºäº†å®ƒã€‚</p></div></div>    
</body>
</html>