<html>
<head>
<title>Different Ways Of Visualizing Twitter Sentiments Analysis In R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">R中可视化Twitter情感分析的不同方式</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/different-ways-of-visualizing-twitter-sentiments-analysis-in-r-270d5d459603?source=collection_archive---------8-----------------------#2020-01-07">https://medium.com/analytics-vidhya/different-ways-of-visualizing-twitter-sentiments-analysis-in-r-270d5d459603?source=collection_archive---------8-----------------------#2020-01-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/35ff52dd156c36077957a3caa85e67b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AbX-MNv3wuo0gVTGhOVZsA.jpeg"/></div></div></figure><p id="3ba6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在我之前关于WhatsApp聊天的<a class="ae jo" rel="noopener" href="/@freemangoja/sentiment-analysis-of-whatsapp-chat-a906105917f4">情感分析</a>的文章中，我已经介绍了如何使用r进行情感分析。与WhatsApp数据不同，提取twitter数据有点棘手。您必须成功设置Twitter API以获得授权。关于如何设置twitter API，有很多有用的在线资源，所以本文将主要关注分析和可视化。</p><p id="a0ef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Twitter数据非常适合情感分析。有了这么多的灵活性，你可以轻松地将你的推文选择限制在特定的日期范围、语言、地区、推文数量等等。在这篇文章中，我们将评估twitter对特朗普的情绪，并以不同的方式可视化结果。这些推文是在2019年11月22日提取的，当时国会主导的弹劾听证会正在进行。</p><p id="0ce3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">设置好API后，您将拥有consumerKey、consumerSecret、accessToken和accessTokenSecret，您需要将它们复制并粘贴到RStudio中，如下所示:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es jp"><img src="../Images/db1c142d1a2047852fb18a670bfff33c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*8zzisyNOsRkVNbX3ZxEIiw.png"/></div></figure><p id="e2f5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，您可以像这样设置您的授权:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ju"><img src="../Images/984dfe2a3ccb14b2a29aa0e3c2ddd7cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3c8gXMDsd2J3yosW0PHmqw.png"/></div></div></figure><p id="9662" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦设置成功，您就可以开始提取推文进行分析了。您需要的基本R包是:</p><p id="3861" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ROAuth:这个R包为用户认证提供了到OAuth 1.0的接口</p><p id="07cc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">twitteR:这是访问twitter API的R包。与日常交互相比，它更倾向于提取分析数据。</p><p id="ec7c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以在这里找到分析中使用的所有软件包和完整的分析代码<a class="ae jo" href="https://frex1.github.io/twitter-sentiments/tweets" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="7c86" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Twitter包中的searchTwitter函数为废弃推文提供了不同的选项。这些默认为空的参数(除了<em class="jv"> n </em>)可以单独使用，也可以与多个由“+”连接的参数组合使用。</p><p id="5a56" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">指定你希望提取的tweets的最大数量。</p><p id="b497" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">lang-同一主题的推文可能会有不同的语言版本。默认情况下为空，但指定时，会根据ISO 639-1代码将搜索限制到给定的语言。</p><p id="34b4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jv">自</em>起——用于限制搜索自给定日期以来的推文。请注意，日期必须采用YYYY-MM-DD格式。</p><p id="5d0e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jv">直到</em>——指定你感兴趣的推文的最新日期。请注意，日期必须采用YYYY-MM-DD格式。</p><p id="c0a1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jv">区域设置</em>-相对来说是最有限的选项，因为目前只有<em class="jv"> ja </em>有效，但是当指定时，它会设置搜索的区域设置。</p><p id="d1fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jv">地理编码</em>-允许您定义感兴趣的地理半径，以纬度/经度给出。</p><p id="3967" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jv">since ID</em>——用于将推文限制为那些ID比指定ID新的推文。</p><p id="7811" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">maxID-将搜索限制在比指定ID更早的推文。</p><p id="7f8a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jv">result type</em>——用于根据设定值过滤返回的tweets。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jw"><img src="../Images/bc16c1e819b6cfee8a0ecad61ada8e7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*prjRYrkblhjiHNGLrTgdJg.png"/></div></div></figure><p id="d882" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在上面的例子中，从搜索的当天开始向后(默认)检索了10，000条关于特朗普的推文。废弃的tweets在一个列表中，需要转换成数据帧，如下所示:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jx"><img src="../Images/a5b40891dfef447b84ca4545c1fe0ef6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kz0EMz9h5szk14cgnQOpXg.png"/></div></div></figure><p id="35df" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了确保没有特朗普本人对所收集的推文的个人贡献，来自@realDonaldTrump和@POTUS handles的所有推文和转发都已通过以下代码从我们的数据中删除:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jy"><img src="../Images/ed800137b54845b0850c4d3f0626dcea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BjG2fjhXr6ntXktAdLN0bA.png"/></div></div></figure><p id="6f91" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">数据集中有很多转发，如下图所示:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es jz"><img src="../Images/5a5595e4d0b58c62a28989d671fb8f45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*2O-IFxGharP3brwrECeLpg.png"/></div><figcaption class="ka kb et er es kc kd bd b be z dx translated">推文是否被转发的分类</figcaption></figure><p id="aae7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了找到关于Trump的热门推文，只需要具有最高转发计数的独特推文，因此创建了一个只包含独特推文的新数据框架，并对其进行预处理以查看热门推文:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ke"><img src="../Images/c99e435e1c77fed15865c8e551db8e6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ln8cmJufI36_Q7smmNAiaQ.png"/></div></div></figure><p id="45f3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如我们在我的<a class="ae jo" rel="noopener" href="/@freemangoja/sentiment-analysis-of-whatsapp-chat-a906105917f4">早期文章</a>中讨论的那样，推特就像其他社交媒体帖子一样，结构松散，挖掘它们需要大量的清理工作。上一次我们还使用R比较了两种不同的情感分析方法。本文将考虑单词袋和其他相关模型。</p><p id="1bd0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在找到热门推文后，对整个数据集进行了进一步的分析。这里的逻辑是，转发另一个人的推文的人很可能这样做，因为原始推文代表了他/她的想法，所以两者都同样计入情感。数据经过预处理，准备用于分析，如本<a class="ae jo" href="https://frex1.github.io/twitter-sentiments/tweets" rel="noopener ugc nofollow" target="_blank">完整代码</a>所示。</p><p id="6144" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">可以使用kableExtra包中的kable函数可视化标记化的前十个阳性单词，如下所示:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es kf"><img src="../Images/8a779b7ec21003468772721e0f7b59a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:524/format:webp/1*ZIdGN7XAjUcnDTzTEgxuCQ.png"/></div><figcaption class="ka kb et er es kc kd bd b be z dx translated">积极的话</figcaption></figure><p id="72b7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">类似地，我们可以如下所示表示否定词:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es kg"><img src="../Images/ccd14b00da1c018906462ba4f5878a49.png" data-original-src="https://miro.medium.com/v2/resize:fit:470/format:webp/1*T9A5NeIwN6apqSDkj_em4Q.png"/></div><figcaption class="ka kb et er es kc kd bd b be z dx translated">否定词</figcaption></figure><p id="bca7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在上面的两个图中，选择了前10个单词，但是你可以选择尽可能多的单词。如果需要，您还可以根据单词的频率对其进行排序。你可以看到使用最多的肯定词是“喜欢”，而使用最多的否定词是“弹劾”。</p><p id="3524" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们也可以用如下图所示的条形图来表示情感词。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es jz"><img src="../Images/6a15a414dee43700c64b020f3c18fb05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*22VU9BIaIetj3xfwfvX8sQ.png"/></div><figcaption class="ka kb et er es kc kd bd b be z dx translated">前10项积极情绪的条形图</figcaption></figure><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es jz"><img src="../Images/2bae545bb50c9c729cb2ba6feb05090b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*OTURZ1dN1pIhBxve0PJiAQ.png"/></div><figcaption class="ka kb et er es kc kd bd b be z dx translated">前10大负面情绪条形图</figcaption></figure><p id="69eb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">同样，您可以选择从最高到最短的条块对图进行排序，但这不是必须的，所以我选择保持这种顺序，以便与前面的kableExtra html输出的顺序保持一致。</p><p id="10c1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">DT包允许一个人创建一个交互式输出，很容易浏览并找到所有的情感词汇，如这个<a class="ae jo" href="https://frex1.github.io/twitter-sentiments/tweets" rel="noopener ugc nofollow" target="_blank"> html文件</a>所示。它看起来是这样的:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ju"><img src="../Images/74eb6433fd617089dcf4168b4041be98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qicRW4A223hvb4PZIFNY1A.png"/></div></div><figcaption class="ka kb et er es kc kd bd b be z dx translated">积极情绪词汇的完整列表</figcaption></figure><p id="a4f0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当您有兴趣在情感分析中寻找感兴趣的特定关键词时，这可能是有用的。搜索选项使您能够查找特定单词是否存在。</p><p id="39e2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">wordcloud功能用于创建单词包，这些单词包的最小计数为10，分别代表积极情绪和消极情绪。选择将单词输入限制在最小10个是为了保持单词包的简单和可读性。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es jz"><img src="../Images/1c4d4e5079b961c63bc20405126309d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*Qnl792i4eNbmFTZkZR8FZA.png"/></div><figcaption class="ka kb et er es kc kd bd b be z dx translated">一袋积极的情绪</figcaption></figure><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es jz"><img src="../Images/4c9d5e15aff25f035017328a086d343c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*2JVl_mANY8e7e19zre4BJw.png"/></div><figcaption class="ka kb et er es kc kd bd b be z dx translated">一袋负面情绪</figcaption></figure><p id="1a54" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以很容易地在两个单词袋中挑出前10个单词，因为它们在每种情况下都显得更粗。显然，你可以看到“喜欢”和“弹劾”分别是正面和负面情绪中最受欢迎的词。</p><p id="9de5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此外，你会注意到我们以不同方式可视化的结果是一致的，这给了我们信心，根据情况，我们可以使用其中的任何一个或多个方法，仍然可以得出有信心的结论。单词包模型非常受欢迎，但有时当数据表可以返回更具交互性的结果时，您不一定需要它，kableExtra可以给你一个复杂但更容易解释的html输出，当然，条形图可以以自我解释的方式很好地可视化它。</p><p id="bc3d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们看看情绪的分布。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es jz"><img src="../Images/1d6109064938cb79dfff9d71095f9b1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*5DM3RJP_9753NVAZ1aWmGA.png"/></div></figure><p id="580c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以下是比例:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kh"><img src="../Images/f2513455f3e0e023dc23cc88270aa837.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q-Jfy4ByPuA-oBlpoKHB8A.png"/></div></div><figcaption class="ka kb et er es kc kd bd b be z dx translated">积极情绪的比例</figcaption></figure><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jy"><img src="../Images/abb390a42849b05010652ca51ef150c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VPN-sNDFqhCs-D-LlqkdgQ.png"/></div></div><figcaption class="ka kb et er es kc kd bd b be z dx translated">负面情绪的比例</figcaption></figure><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ki"><img src="../Images/7387c2441602c6bacbd258af0b3f8dd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rREcg2V2m6YfJsB-xp9vLQ.png"/></div></div><figcaption class="ka kb et er es kc kd bd b be z dx translated">中性情绪的比例</figcaption></figure><p id="678e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上面的图表显示，消极情绪比积极情绪多得多。然而，压倒性的中性情绪带来了巨大的机会。根据政治或商业背景，双方(正面和负面)都可以设计策略来影响中立者。最终的赢家将会是那些设法获得更多支持的人。</p><p id="1c11" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">比例分析的主要收获是中性情绪的价值。通常，情绪分析侧重于消极和积极的方面，当你在这些方面占很大比例时，这没什么，但当很大比例是中性的时，这是一个不容忽视的风险太大的机会。</p><p id="3e84" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我希望你喜欢并从这篇文章中学到一些东西。保持联系，在我的下一篇文章《预测建模者选择最佳回归模型指南》中再见。</p></div></div>    
</body>
</html>