<html>
<head>
<title>Kubernetes 101 Part 2/4: Containers vs Pods</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kubernetes 101第2/4部分:集装箱与豆荚</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/kubernetes-101-part-2-4-containers-vs-pods-2ab486c748a4?source=collection_archive---------25-----------------------#2020-05-14">https://medium.com/analytics-vidhya/kubernetes-101-part-2-4-containers-vs-pods-2ab486c748a4?source=collection_archive---------25-----------------------#2020-05-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/ae1bc44aaf1491ee71adb1adea7dfaa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AY00amtBAdwBHviV.png"/></div></div></figure><h1 id="791b" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">概观</h1><p id="0f2c" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">我们已经看到了Kubernetes如何通过将工作分配给Kubernetes集群中的不同工作节点来构建可伸缩的分布式应用程序。但是你如何定义工作呢？您如何确保不同工作单元的依赖关系得到管理？</p><p id="a084" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这就是豆荚和容器进入故事的地方。许多开发人员已经通过使用Docker或类似工具熟悉了容器。容器允许您创建定义良好的运行时，将您编写的代码及其操作系统和运行时依赖项打包到一个隔离的上下文中。例如，用Node.js编写的web服务器将包括由开发人员编写的服务器代码以及运行它所必需的Node.js二进制文件，以及对操作系统版本的所有依赖。</p><p id="32cf" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">容器允许您创建可以独立运行的独立工作单元。要创建复杂的应用程序，通常需要组合多个容器。例如，上面的web服务器可能需要一个数据库来存储长期信息，这将是web服务器所依赖的一个单独的容器。或者，使用机器学习来标记照片的web应用程序可能有单独的容器用于核心服务器、标记模型和处理照片。</p><p id="405a" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这就是吊舱的设计目的。pod允许您使用多个容器，并指定它们如何组合在一起创建您的应用程序。pod允许您指出哪些容器依赖于哪些其他容器，以及它们期望在哪个接口上进行通信。</p><p id="1b8c" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在本教程中，我们将仔细研究如何构造容器并将它们组合成pod。这些组件是Kubernetes架构的核心构建块，因此即使您熟悉基础知识，也值得花一些时间来真正理解这些概念。</p><h1 id="52e2" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">容器</h1><p id="64aa" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在本质上，容器是一个受控的执行环境。它们允许您从头定义环境:从操作系统开始，到您想要使用的库的各个版本，到您想要添加的代码版本。您还可以指定要运行的命令。</p><p id="f52c" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">开发人员通过Docker最熟悉容器，Docker是最著名的管理和运行容器的软件。Docker允许您创建遵循上述模式的docker文件。在下面的docker文件中，我们从Ubuntu操作系统开始，添加NodeJS的依赖项，并在文件“app.js”中添加我们的代码</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="86ec" class="la ir hi kw b fi lb lc l ld le">FROM ubuntu <br/>RUN apt-get update <br/>RUN apt-get install -y nodejs <br/>RUN mkdir /var/www </span><span id="bda7" class="la ir hi kw b fi lf lc l ld le">ADD myapp.js /var/www/myapp.js </span><span id="62bb" class="la ir hi kw b fi lf lc l ld le">CMD ["/usr/bin/node", "/var/www/myapp.js"]</span></pre><p id="0588" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">要构建它，只需使用docker build命令，并使用-t标志添加一个名称:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="99e2" class="la ir hi kw b fi lb lc l ld le">docker build -t my-app/node-server .</span></pre><p id="8fa4" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">Docker并不是Kubernetes允许的唯一容器工具。您可以使用其他工具，如CRI-O或Containterd，但这些工具不太为人所知。您使用的容器工具称为容器运行时，它由运行Kubernetes时的环境变量设置。</p><h1 id="f0b8" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">分离舱</h1><p id="71a4" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">Kubernetes中的一个工作单元不是一个容器，而是一个Pod。pod接受一个容器，并告诉Kubernetes如何部署和运行它。您可以通过编写一个YAML文件来定义一个pod，该文件指定pod中的容器、如何运行它以及任何附加内容，如附加的存储卷或网络参数。</p><p id="5447" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">运行我们的节点服务器容器的示例YAML文件是:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="da59" class="la ir hi kw b fi lb lc l ld le">apiVersion: v1 <br/>kind: Pod <br/>metadata: <br/>   name: myapp-pod <br/>   labels: <br/>      app: myapp <br/>spec: <br/>   containers: <br/>     - name: myapp-container <br/>     image: my-app/node-server <br/>     command: ["/usr/bin/node", "/var/www/myapp.js"]</span></pre><p id="ef3f" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这定义了一个名为myapp-pod的pod。规范很简单，只有一个我们之前创建的容器。该规范还包括我们运行应用程序所需的命令。这是最简单的pod规范，只有一个容器，没有任何特殊的网络或卷。</p><figure class="kr ks kt ku fd ij er es paragraph-image"><div class="er es lg"><img src="../Images/f94805a260e4d6f5ab8a500315b3d368.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/0*dTi1cPQ3nCxVPSiZ.png"/></div></figure><p id="7221" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">使用cloudplex.io开始可视化构建您的Kubernetes应用程序</p><p id="def4" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">阿萨德·法伊兹<br/>创始人兼首席执行官<br/> CloudPlex.io</p></div><div class="ab cl lh li gp lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="hb hc hd he hf"><p id="90fe" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><em class="lo">原载于2020年5月14日</em><a class="ae lp" href="https://cloudplex.io/tutorial/pods-and-containers-tutorial/" rel="noopener ugc nofollow" target="_blank"><em class="lo">https://cloud plex . io</em></a><em class="lo">。</em></p></div></div>    
</body>
</html>