<html>
<head>
<title>Which arrondissement in Paris gladdens people the most?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">巴黎的哪个区最让人们开心？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/which-arrondissement-in-paris-gladden-peope-the-most-488f0845f782?source=collection_archive---------25-----------------------#2020-09-21">https://medium.com/analytics-vidhya/which-arrondissement-in-paris-gladden-peope-the-most-488f0845f782?source=collection_archive---------25-----------------------#2020-09-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="98e6" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">有一天，我问我的朋友:我们应该在巴黎的什么地方离开去赏月？我们用数据科学来回答一下吧！</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/2e9ec2b8d745794dc696ea2cf7d7280f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qLagZTOS_eE4UzvV"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">莱昂纳尔·科特在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="d82c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi kk translated"><span class="l kl km kn bm ko kp kq kr ks di">那天我有两个解决办法，第一个是上网搜索。第二个是我自己解决的。正如你所料，我决定选择第一个，但我没有找到一个明确的答案。所以还是自己想办法解决吧！</span></p></div><div class="ab cl kt ku gp kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hb hc hd he hf"><p id="d127" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">像往常一样，让我们分工合作:</p><p id="fb5e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> 0)数据集</strong></p><p id="cce1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> 1)启动包</strong></p><p id="788e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> 2)预处理</strong></p><p id="5daa" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> 3)加工</strong></p><p id="5b36" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> 4)可视化</strong></p></div><div class="ab cl kt ku gp kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hb hc hd he hf"><h1 id="e339" class="la lb hi bd lc ld le lf lg lh li lj lk io ll ip lm ir ln is lo iu lp iv lq lr bi translated">0)数据集</h1><p id="8da6" class="pw-post-body-paragraph jo jp hi jq b jr ls ij jt ju lt im jw jx lu jz ka kb lv kd ke kf lw kh ki kj hb bi translated">开始时，我没有数据来回答以下问题:</p><blockquote class="lx"><p id="52f8" class="ly lz hi bd ma mb mc md me mf mg kj dx translated">我们应该去巴黎哪里开心呢？</p></blockquote><figure class="mi mj mk ml mm jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mh"><img src="../Images/8d890aaa991a943087fc9c44e2d87dd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aMshhhT9tQYXkHxQ"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">照片由<a class="ae jn" href="https://unsplash.com/@jakobowens1?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">雅各布·欧文</a>在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="cc08" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">通过滚动社交媒体，我意识到我们有无限量的免费数据！事实上，人们正在社交媒体上发表意见。此外，由于有了标签，他们可以描述这些信息。在这项研究中，我使用了Instagram，但它也可以很容易地扩展到Pinterest、脸书、Twitter等等</p></div><div class="ab cl kt ku gp kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hb hc hd he hf"><div class="iy iz ja jb fd ab cb"><figure class="mn jc mo mp mq mr ms paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><img src="../Images/147b147b2af8443dae2d58485e0ded24.png" data-original-src="https://miro.medium.com/v2/resize:fit:384/format:webp/1*8ebaXxHGRBnM-qoSFeAy5w.jpeg"/></div></figure><figure class="mn jc mt mp mq mr ms paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><img src="../Images/a895cb9d569c7896d77617035b669567.png" data-original-src="https://miro.medium.com/v2/resize:fit:1618/format:webp/1*gSVqF8hc797wBt9NKyuTFg.png"/></div></figure></div><p id="7aea" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这是我输入数据的一个例子。我检索这个特定图片的所有评论和#号。此外，我检索数据的位置。基于此，我不得不在接下来的研究中做出以下假设:</p><ul class=""><li id="04ea" class="mu mv hi jq b jr js ju jv jx mw kb mx kf my kj mz na nb nc bi translated"><strong class="jq hj">在Instagram上用位置发帖的人把好的位置放上去。</strong></li><li id="38ba" class="mu mv hi jq b jr nd ju ne jx nf kb ng kf nh kj mz na nb nc bi translated">如果你快乐，那么你就写一篇更快乐的帖子，如果你不快乐。</li><li id="804b" class="mu mv hi jq b jr nd ju ne jx nf kb ng kf nh kj mz na nb nc bi translated">如果大多数人说这是个好地方，我们会承认这是个好地方。</li></ul><p id="e22d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在我们必须“工业化”这个过程:更大量的数据！！<br/>我用一个脚本用#ParisStreet检索了8762个帖子(代码在github上<a class="ae jn" href="https://github.com/BasileGoussard/ParisMap" rel="noopener ugc nofollow" target="_blank">这里</a> ) (JSON.xz文件是元数据) :</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ni"><img src="../Images/a122d1c4304219dc9d95c1bef0f996c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qMJ8ZqpyRIZeRugg32KZ4Q.png"/></div></div></figure><h1 id="47be" class="la lb hi bd lc ld nj lf lg lh nk lj lk io nl ip lm ir nm is lo iu nn iv lq lr bi translated">1)启动包</h1><p id="acbc" class="pw-post-body-paragraph jo jp hi jq b jr ls ij jt ju lt im jw jx lu jz ka kb lv kd ke kf lw kh ki kj hb bi translated">像往常一样，我将anaconda与基于三种环境的三个Jupyter笔记本一起使用:</p><ul class=""><li id="3668" class="mu mv hi jq b jr js ju jv jx mw kb mx kf my kj mz na nb nc bi translated">一个从社交媒体下载数据的环境(<strong class="jq hj"> Instaloader </strong> <a class="ae jn" href="https://instaloader.github.io/" rel="noopener ugc nofollow" target="_blank"> <em class="no">【链接】</em> </a>从Instagram下载数据)</li><li id="806c" class="mu mv hi jq b jr nd ju ne jx nf kb ng kf nh kj mz na nb nc bi translated">一个用于预处理和可视化结果的环境(常规geo环境，包含<strong class="jq hj">pandas</strong><em class="no">[</em><a class="ae jn" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank"><em class="no">link</em></a><em class="no">]</em>，<strong class="jq hj">geo pandas</strong><em class="no">[</em><a class="ae jn" href="https://geopandas.org/" rel="noopener ugc nofollow" target="_blank"><em class="no">link</em></a><em class="no"/>，NumPy<em class="no">[</em><a class="ae jn" href="http://xarray.pydata.org/en/stable/" rel="noopener ugc nofollow" target="_blank"><em class="no">link</em></a><em class="no">]</em>)</li><li id="c168" class="mu mv hi jq b jr nd ju ne jx nf kb ng kf nh kj mz na nb nc bi translated">一个从数据中获得洞察力的环境有熊猫<em class="no"/><a class="ae jn" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank"><em class="no">链接</em></a><em class="no"/>，NumPy<em class="no"/><a class="ae jn" href="http://xarray.pydata.org/en/stable/" rel="noopener ugc nofollow" target="_blank"><em class="no">链接</em></a><em class="no">&amp;</em><strong class="jq hj"><em class="no"/>Afinn</strong><a class="ae jn" href="https://github.com/fnielsen/afinn" rel="noopener ugc nofollow" target="_blank"><em class="no"/></a></li></ul><h1 id="c9e7" class="la lb hi bd lc ld nj lf lg lh nk lj lk io nl ip lm ir nm is lo iu nn iv lq lr bi translated">2)预处理</h1><p id="4dd2" class="pw-post-body-paragraph jo jp hi jq b jr ls ij jt ju lt im jw jx lu jz ka kb lv kd ke kf lw kh ki kj hb bi translated">首先，我们将只保留有地理位置的帖子。让我们深入元数据。在这里，我们可以在元数据(JSON格式)中找到另一个名为“location”的JSON。</p><pre class="iy iz ja jb fd np nq nr ns aw nt bi"><span id="f7cb" class="nu lb hi nq b fi nv nw l nx ny">import <strong class="nq hj">json          </strong>#load json <br/>import <strong class="nq hj">pandas </strong>as pd  #do some data analysis<br/>import <strong class="nq hj">lzma          </strong>#open .xz file<br/>import <strong class="nq hj">glob          </strong>#retrieve all the file from our directory</span><span id="6853" class="nu lb hi nq b fi nz nw l nx ny"><strong class="nq hj">post_list </strong>= glob.glob('./#parisstreet' + '/*.xz')</span><span id="e327" class="nu lb hi nq b fi nz nw l nx ny">adress = dict()<br/>for post in post_list:<br/>    <strong class="nq hj">metadata= json.load(lzma.open(post))</strong><br/>    location = metadata['node']['location']<br/>    if location :<br/>        if location['address_json']:<br/>            <strong class="nq hj">adress[file] = json.loads(location['address_json'])</strong></span><span id="0c5e" class="nu lb hi nq b fi nz nw l nx ny"><strong class="nq hj">df_adress = pd.DataFrame.from_dict(adress, orient = 'index')</strong></span></pre><p id="6ace" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在里面我们可以找到街道的北部，街道本身，城镇和乡村。对于这些位置中的每一个，我们检索纬度和经度。我建议您阅读来自<a class="oa ob ge" href="https://medium.com/u/d4284ce02aec?source=post_page-----488f0845f782--------------------------------" rel="noopener" target="_blank"> Abdishakur </a>的以下文章，该文章清晰地展示了地理编码方法(街道地址到位置)</p><div class="oc od ez fb oe of"><a href="https://towardsdatascience.com/geocode-with-python-161ec1e62b89" rel="noopener follow" target="_blank"><div class="og ab dw"><div class="oh ab oi cl cj oj"><h2 class="bd hj fi z dy ok ea eb ol ed ef hh bi translated">使用Python进行地理编码</h2><div class="om l"><h3 class="bd b fi z dy ok ea eb ol ed ef dx translated">如何将物理地址转换为地理位置→经纬度</h3></div><div class="on l"><p class="bd b fp z dy ok ea eb ol ed ef dx translated">towardsdatascience.com</p></div></div><div class="oo l"><div class="op l oq or os oo ot jh of"/></div></div></a></div><p id="0ac1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在我们必须过滤我们的帖子。事实上，我们将只保留那些在巴黎境内有确切位置的照片。经过这种预处理后，帖子的数量是1694！(对比开头的8762)</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ou"><img src="../Images/dac378d42f7075c2b32002d94e6a67fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DFgcPlgNnAYSgZRcbAvMEw.png"/></div></div></figure><p id="4971" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">几乎82%的帖子对我们的学习没有用！让我们将剩下的18%保存在一个新文件夹中(预处理)</p><h1 id="67fc" class="la lb hi bd lc ld nj lf lg lh nk lj lk io nl ip lm ir nm is lo iu nn iv lq lr bi translated">3)加工</h1><p id="d594" class="pw-post-body-paragraph jo jp hi jq b jr ls ij jt ju lt im jw jx lu jz ka kb lv kd ke kf lw kh ki kj hb bi translated">让我们深入到情感分析部分。我用的是afinn，这是最简单的情感分析算法。感谢Afinn，我们可以根据描述检索每个帖子的情感。</p><p id="9bf0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在，我们可以平均每个行政区的所有情绪，以检索最终得分！</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ov"><img src="../Images/18c5a280f83879d0fbe55bf0bc1e4069.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jkx02Frw6Tz93itZxIsDAg.png"/></div></div></figure><h1 id="9914" class="la lb hi bd lc ld nj lf lg lh nk lj lk io nl ip lm ir nm is lo iu nn iv lq lr bi translated">4)可视化</h1><p id="4f40" class="pw-post-body-paragraph jo jp hi jq b jr ls ij jt ju lt im jw jx lu jz ka kb lv kd ke kf lw kh ki kj hb bi translated">在这里，我表示的是基于每个区的情绪的结果&amp;基于分位数。事实上，这个想法是为了比较各区，而不是给出该市情绪的绝对值。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ow"><img src="../Images/e38e48422943c39bc1cb3da7e5b00acd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hVozbG8Q-aA0V2Q4Lofc8Q.png"/></div></div></figure><p id="c4c4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">正如我们所见，最好的成绩是17分，最差的是14分……对不起，路易斯😉！</p><blockquote class="lx"><p id="131b" class="ly lz hi bd ma mb mc md me mf mg kj dx translated">🥇:17ème <br/>🥈:02ème <br/>🥉:11ème</p></blockquote></div><div class="ab cl kt ku gp kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hb hc hd he hf"><blockquote class="lx"><p id="ff9f" class="ly lz hi bd ma mb mc md me mf mg kj dx translated">感谢您的阅读，并享受您的地理空间数据！(代码可在github上获得)</p></blockquote></div><div class="ab cl kt ku gp kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hb hc hd he hf"><blockquote class="ox oy oz"><p id="db6a" class="jo jp no jq b jr js ij jt ju jv im jw pa jy jz ka pb kc kd ke pc kg kh ki kj hb bi translated"><em class="hi">联系人</em></p><p id="b456" class="jo jp no jq b jr js ij jt ju jv im jw pa jy jz ka pb kc kd ke pc kg kh ki kj hb bi translated"><a class="ae jn" href="http://basile.earthobservation@gmail.com/" rel="noopener ugc nofollow" target="_blank"><em class="hi">basile.earthobservation@gmail.com</em></a></p><p id="5840" class="jo jp no jq b jr js ij jt ju jv im jw pa jy jz ka pb kc kd ke pc kg kh ki kj hb bi translated"><a class="ae jn" href="https://github.com/BasileGoussard" rel="noopener ugc nofollow" target="_blank"><em class="hi">https://github.com/BasileGoussard</em></a></p><p id="1226" class="jo jp no jq b jr js ij jt ju jv im jw pa jy jz ka pb kc kd ke pc kg kh ki kj hb bi translated"><a class="ae jn" href="https://www.linkedin.com/in/basile-goussard/" rel="noopener ugc nofollow" target="_blank"><em class="hi">https://www.linkedin.com/in/basile-goussard/</em></a></p></blockquote></div></div>    
</body>
</html>