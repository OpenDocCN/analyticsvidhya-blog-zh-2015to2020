<html>
<head>
<title>Spark Delta Lake</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">火花三角洲湖</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/spark-delta-lake-d05dd480287a?source=collection_archive---------5-----------------------#2019-11-17">https://medium.com/analytics-vidhya/spark-delta-lake-d05dd480287a?source=collection_archive---------5-----------------------#2019-11-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="9876" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">火花上的酸以及一些升级。</h2></div><p id="898e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">嘿伙计们，</p><p id="8c0e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">希望你做得好，今天我将向你解释三角洲湖！</p><p id="b5ca" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是我文章的第一部分，我将向你解释Apache Spark的问题和Delta Lake的需求，下一篇文章将包含动手实践的有趣部分…</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es jt"><img src="../Images/a1fc5004243058a4100d64ceebdcd363.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*vxgVZ4LubyxAW43YYH8Law.jpeg"/></div></figure><p id="5505" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">今年Spark峰会的<a class="ae kb" href="https://databricks.com/sparkaisummit/north-america/2019-spark-summit-ai-keynotes" rel="noopener ugc nofollow" target="_blank">基调</a>之一是宣布<a class="ae kb" href="http://delta.io" rel="noopener ugc nofollow" target="_blank">三角洲湖开源项目</a>。delta lake背后的主要想法是将ACID功能带回大数据，这似乎是一件早已逝去的事情。除了Spark强大而快速之外，它还缺乏酸性，这在开始时似乎并不重要，但逐渐缺乏酸性会阻碍Spark项目。许多投入生产的Spark大数据项目都因为以下问题而失败:</p><ul class=""><li id="2e7d" class="kc kd hi iz b ja jb jd je jg ke jk kf jo kg js kh ki kj kk bi translated">缺乏模式实施</li><li id="5de8" class="kc kd hi iz b ja kl jd km jg kn jk ko jo kp js kh ki kj kk bi translated">不支持增量负载</li><li id="8439" class="kc kd hi iz b ja kl jd km jg kn jk ko jo kp js kh ki kj kk bi translated">数据湖中损坏的数据</li></ul><p id="9112" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有了德尔塔湖，我们将能够克服这些问题。现在，Delta Lake最重要的方面是恢复ACID特性，但是为什么ACID特性很重要，Apache Spark中没有它的缺点是什么？</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es kq"><img src="../Images/97a7ee26e01adae5d50d9c2c4945deda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*juHPSl-vTOMC3MpKP6Brvw.jpeg"/></div></div></figure><p id="0ee4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我简单介绍一下基础知识，告诉你我们在Apache Spark中面临的问题。</p><ul class=""><li id="f3d9" class="kc kd hi iz b ja jb jd je jg ke jk kf jo kg js kh ki kj kk bi translated">原子性:这意味着工作应该完全完成，否则就不会产生任何影响。根据Spark <a class="ae kb" href="https://spark.apache.org/docs/latest/sql-data-sources-load-save-functions.html#save-modes" rel="noopener ugc nofollow" target="_blank">文档</a>，保存模式不是原子的，但是Apache Spark通过FileOutputCommiter版本1(用于Hdfs)遵循该特性。</li><li id="aaeb" class="kc kd hi iz b ja kl jd km jg kn jk ko jo kp js kh ki kj kk bi translated">一致性:在Spark中，当执行覆盖时，数据将在写入新数据之前被删除。这意味着将会有数据完全丢失的时间跨度，此时的异常将导致数据丢失，这有点可怕，因为我们可能最终没有任何数据。</li><li id="2268" class="kc kd hi iz b ja kl jd km jg kn jk ko jo kp js kh ki kj kk bi translated">隔离:这意味着对同一数据集的读写操作应该相互隔离。由于Apache Spark中的写操作缺乏原子性，它不能保证隔离。</li><li id="6479" class="kc kd hi iz b ja kl jd km jg kn jk ko jo kp js kh ki kj kk bi translated">持久性:这个特性意味着“一旦提交就永远不会丢失”。Hdfs有助于保持Spark的持久性，但是如果Spark没有正确提交作业，可能会出现问题。</li></ul><p id="d010" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">除了ACID的问题之外，缺乏模式执行也是一个主要障碍，因为Spark在读取时遵循模式，并且在增量加载期间，如果发生一些列数据类型不匹配的情况，我们将能够毫无问题地将其写入数据湖，但是这将导致损坏我们的数据。</p><p id="2fa6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，Databricks决定为这些问题画上句号，并宣布三角洲湖！Delta Lake建立在大数据项目中最常用的拼花格式之上。</p><p id="3afb" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">三角洲湖给我们带来了以下特点:</p><ul class=""><li id="f519" class="kc kd hi iz b ja jb jd je jg ke jk kf jo kg js kh ki kj kk bi translated">数据湖上的ACID事务</li><li id="de20" class="kc kd hi iz b ja kl jd km jg kn jk ko jo kp js kh ki kj kk bi translated">架构实施</li><li id="a392" class="kc kd hi iz b ja kl jd km jg kn jk ko jo kp js kh ki kj kk bi translated">时间旅行能力</li></ul><p id="2e40" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有了Spark中可能的ACID事务，我们将能够执行更新、删除和合并等操作。没有可能的方法来更新我们现有的数据或合并新的数据，但有了Delta lake，只需一个命令就可以做到这一切。此外，还将维护一个事务日志文件。</p><p id="90e3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">通过模式实施功能，将遵循写入时的模式。这意味着数据类型或模式的任何变化都会在写入时被当场捕获，这将阻止它进入数据湖，破坏我们的数据，并在执行我们的作业时给我们带来异常，这给我们带来了要纠正的噩梦。</p><p id="a9da" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Delta Lake最棒也是最酷的部分是它的时间旅行功能，这对其他数据科学家来说至关重要，因为每次我们对数据集执行操作时，它都会维护数据集的不同版本。因此，对于时间旅行，覆盖或附加到我们数据湖实际上并不意味着以实际形式丢失我们的旧数据。我们只需要用我们想要的版本搜索我们的数据集，那时的数据集就会返回给我们，很酷吧？因此，在为预测模型运行不同的数据集时，我们也会时间旅行到可能会给我们带来更好结果的旧数据集。</p><p id="3dbb" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是对达布瑞克三角洲湖的一个简短概述。在下一篇文章中，我将向您展示在Pyspark安装Delta Lake的实践。在那之前再见，塔塔，瓦纳卡姆。</p><p id="4fb2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">点击下面的链接，查看包含代码和Delta Lake实践的后续文章。</p><div class="kv kw ez fb kx ky"><a rel="noopener follow" target="_blank" href="/@merchantabid4/getting-hands-dirty-in-spark-delta-lake-1963921e4de6"><div class="kz ab dw"><div class="la ab lb cl cj lc"><h2 class="bd hj fi z dy ld ea eb le ed ef hh bi translated">在火花三角洲湖弄脏手</h2><div class="lf l"><h3 class="bd b fi z dy ld ea eb le ed ef dx translated">嘿伙计们，</h3></div><div class="lg l"><p class="bd b fp z dy ld ea eb le ed ef dx translated">medium.com</p></div></div><div class="lh l"><div class="li l lj lk ll lh lm jz ky"/></div></div></a></div><p id="539d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请查看Databricks在2019年星火峰会上发布的三角洲湖公告视频。</p><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="ln lo l"/></div></figure></div></div>    
</body>
</html>