<html>
<head>
<title>Fundamentals of Angular and Unit Testing — Part 3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度和单位测试基础—第3部分</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/fundamentals-of-angular-and-unit-testing-part-3-ce101392064d?source=collection_archive---------24-----------------------#2020-03-29">https://medium.com/analytics-vidhya/fundamentals-of-angular-and-unit-testing-part-3-ce101392064d?source=collection_archive---------24-----------------------#2020-03-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="b7d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">成分</p><p id="dc72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本系列的前一篇文章第2部分中，我们讨论了Angular的一些构建块。在第3部分中，我们将开始实现我们的应用程序并编写一些代码。在此期间，我将重点介绍Angular中的一些最佳实践，并解释一些代码。</p><h2 id="9bd5" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">对我们申请的审查</h2><p id="b0b5" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">核心上，我们的应用程序具有:</p><ul class=""><li id="b16c" class="kd ke hi ih b ii ij im in iq kf iu kg iy kh jc ki kj kk kl bi translated">一个标题</li><li id="b6bc" class="kd ke hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">名单</li><li id="159c" class="kd ke hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">纽扣</li></ul><p id="9c48" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将开始为这些特定的部分创建HTML框架。</p><p id="33b7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要创建新的角度应用程序，请运行以下命令</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="6af2" class="jd je hi kw b fi la lb l lc ld">ng new application-name</span></pre><p id="f514" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其他的设置应该很容易完成。在我们的例子中，我将应用程序命名为news-app，因为最终，当我们完成这个系列时，我们将把它移植到一个成熟的应用程序中。</p><p id="3733" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在还需要注意的是，您可以在创建新应用程序时添加标志，例如，如果您想要包含路由，您可以像这样添加路由标志:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="2819" class="jd je hi kw b fi la lb l lc ld">ng new application-name --routing</span></pre><p id="5da4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们通过运行命令来确认应用程序工作正常</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="23a5" class="jd je hi kw b fi la lb l lc ld">ng s or ng serve</span></pre><p id="0088" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这为默认端口4200上的应用程序提供服务。现在转到浏览器并导航到<em class="le"> localhost:4200。</em>您应该:</p><figure class="kr ks kt ku fd lg er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lf"><img src="../Images/bcebe89b0a6a6f25205921e4c3993779.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lZdsjY34ogyvzZ9wgyoiyg.png"/></div></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">角度默认起始页</figcaption></figure><p id="f43e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们已经确认一切正常，在您最喜欢的IDE上打开应用程序。我使用的是Visual Studio代码。导航到src &gt;应用程序。这是我们要进行大部分改变的地方。打开app.component.ts，让我们探索一下:</p><p id="bd73" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">代码分解</strong></p><p id="0aab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先要注意的是，Angular使用了es6新的类语法，使得我们的代码可读性很高，尽管它是语法糖，但它允许我们采用OOP的一些原则。</p><p id="8794" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">组件由component decorator @Component标识，这是一个接受对象的函数。该对象包含以下内容:</p><ul class=""><li id="c699" class="kd ke hi ih b ii ij im in iq kf iu kg iy kh jc ki kj kk kl bi translated"><strong class="ih hj">选择器</strong> —我们的组件可以引用的标签名。假设我们想在别处使用我们的组件，我们将使用标签&lt; app-root &gt;来引用它</li><li id="03d8" class="kd ke hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated"><strong class="ih hj"> templateUrl </strong> —描述包含我们的HTML模板的路径。这可以被一个内联模板代替，这就是我们在这个例子中要做的。当用作内联模板时，在这种情况下我们不需要HTML文件</li><li id="9043" class="kd ke hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated"><strong class="ih hj"> styleUrl </strong> —一个数组，包含我们的应用程序使用的样式表的路径。注意，我们的组件可以使用多个样式表</li></ul></div><div class="ab cl lr ls gp lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="hb hc hd he hf"><p id="a3e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们重构代码，使用内联模板。</p><p id="cbee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意，对于内联模板，我们使用<strong class="ih hj">反勾号``</strong>,反勾号内包含HTML元素</p><p id="3593" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你的服务器还在运行，Angular的热重装应该已经发生，你的应用应该如下。否则，您可以再次运行服务器。</p><figure class="kr ks kt ku fd lg er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lf"><img src="../Images/88895291ef18fa7326c804356eeec41e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j5EqPRBY3MjCiUzvovjs7w.png"/></div></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">我们带有内嵌模板的应用</figcaption></figure><p id="2578" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们现在可以继续对代码进行编辑，以包含适当的标题、列表和按钮</p><p id="ce9e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">app.component.html</p><p id="095a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">太好了。我已经将上面的代码添加到app.component.html中，并恢复使用外部模板而不是内联模板(内联模板只是向您展示它是如何完成的)。我还添加了几个类，我们将使用它们来设计我们的应用程序和一些虚拟数据。</p><p id="1fb8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您的应用程序现在应该如下所示:</p><figure class="kr ks kt ku fd lg er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lf"><img src="../Images/ef842e953967f8e7d05dbecccea809b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oqHWBiYXsInXRaPPsqOnEw.png"/></div></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">我们的应用程序包含所需的元素</figcaption></figure><p id="08d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们已经创建了应用程序的基本结构，我们可以开始设计它了。我们将使用Boostrap4进行造型。</p><p id="90b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要安装bootstrap和JQuery(bootstrap所需的依赖项)，请运行以下命令</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="63aa" class="jd je hi kw b fi la lb l lc ld">npm i --save boostrap jquery</span></pre><p id="e809" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装后，有多种方法可以使用引导程序。在我们的例子中，我们将简单地导入src文件夹中的styles.css中的样式。然而，由于我只对引导程序风格感兴趣，一个简单的解决方法是简单地使用引导程序CDN并将风格添加到index.html，也可以在src目录中找到</p><blockquote class="ly lz ma"><p id="be2d" class="if ig le ih b ii ij ik il im in io ip mb ir is it mc iv iw ix md iz ja jb jc hb bi translated"><em class="hi">提示—避免直接使用CDN，而使用NPM。这有明显的优势，但最大的优势是你不需要手动更新引导程序</em></p></blockquote><p id="dba8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦您设置了bootstrap，我们就可以继续在app.component.css中添加我们的样式，这是我们的组件使用的样式表</p><p id="14b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的应用程序现在应该如下所示:</p><figure class="kr ks kt ku fd lg er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lf"><img src="../Images/6aeddc8bce5ed2b7866d765702056038.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3jjd9uUkTjbw_zPqPnA9EQ.png"/></div></div></figure><p id="74d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一些样式规则，我们的应用程序已经开始运行了。如果你已经做到了这一步，你的应用看起来也是这样，给自己一个“自我五分”</p><figure class="kr ks kt ku fd lg er es paragraph-image"><div class="er es me"><img src="../Images/57d3efcd239593630b2896f8e1bf9382.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/1*eEM5UIMieR-Iz9Q_qIIDyQ.gif"/></div></figure><p id="c98c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">尽管在这一点上，我们仍然有一个静态的应用程序。让我们把它变得更加动态，写一些类型脚本代码。让我们为按钮添加一个点击功能，在可见和隐藏之间切换数据状态。</p><figure class="kr ks kt ku fd lg"><div class="bz dy l di"><div class="mf mg l"/></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">app.component.html</figcaption></figure><figure class="kr ks kt ku fd lg"><div class="bz dy l di"><div class="mf mg l"/></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">应用程序组件</figcaption></figure><p id="086c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">我们做了什么</strong></p><ul class=""><li id="a29e" class="kd ke hi ih b ii ij im in iq kf iu kg iy kh jc ki kj kk kl bi translated">只有当“isVisible”为真时，我们的数据才可见。我们已经使用结构指令*ngIf实现了这一点</li><li id="7a1f" class="kd ke hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">我们在按钮上附加了一个点击监听器来改变“isVisible”的状态。当单击按钮时，调用函数fetchData</li><li id="136a" class="kd ke hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">在我们的组件上，函数fetchData将变量的状态从true变为false，如果它为true，反之亦然</li></ul><p id="cb85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是我们将用来获取数据的逻辑。当我们的按钮被点击时，它调用函数fetchData，该函数又调用我们的服务来获取我们的数据。</p><p id="9757" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这一点上，我们已经做了很多。在下一节中，让我们创建我们的服务并从一个活动服务器获取数据。</p><p id="e550" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">快速链接</p><ul class=""><li id="d061" class="kd ke hi ih b ii ij im in iq kf iu kg iy kh jc ki kj kk kl bi translated">第一部分—<a class="ae mh" rel="noopener" href="/@henry.onyango/fundamentals-of-angular-and-unit-testing-538116afe8bf">https://medium . com/@ Henry . ony ango/角度和单位测试基础-538116afe8bf </a></li><li id="722b" class="kd ke hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">第二部分—<a class="ae mh" rel="noopener" href="/@henry.onyango/fundamentals-of-angular-and-unit-testing-part-two-736ac87e2ff5">https://medium . com/@ Henry . ony ango/角度和单位测试基础—第二部分—736 AC 87 e 2 ff 5</a></li><li id="612b" class="kd ke hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">GitHub知识库—<a class="ae mh" href="https://github.com/HenryKenya/angular-news-app" rel="noopener ugc nofollow" target="_blank">https://github.com/HenryKenya/angular-news-app</a></li></ul></div></div>    
</body>
</html>