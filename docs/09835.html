<html>
<head>
<title>Introduction: Data-driven workflows in Microsoft Azure Data Factory.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">简介:微软 Azure 数据工厂中的数据驱动工作流。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/introduction-data-driven-workflows-in-microsoft-azure-data-fatory-826f619842b3?source=collection_archive---------4-----------------------#2020-09-22">https://medium.com/analytics-vidhya/introduction-data-driven-workflows-in-microsoft-azure-data-fatory-826f619842b3?source=collection_archive---------4-----------------------#2020-09-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="3aa6" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">Azure 数据工厂</h1><p id="14ef" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">大多数分析解决方案都需要触发数据的批量移动并准备定期计划，这可以通过使用基于云的数据集成服务来实现，该服务可以协调数据的移动和转换。</p><p id="75be" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">Azure Data Factory (ADF)是一种基于云的 ETL 和数据集成服务，允许您创建数据驱动的工作流来协调数据移动和大规模转换数据。使用 Azure Data Factory，您可以创建和安排数据驱动的工作流(称为管道),这些工作流可以从不同的数据存储中获取数据。您可以构建复杂的 ETL 流程，使用数据流或 Azure 中的计算服务可视化地转换数据。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es kg"><img src="../Images/62b85e176b4e5586bf4c1e4c569a8daa.png" data-original-src="https://miro.medium.com/v2/resize:fit:882/format:webp/0*yXrY2GmWsJxgYoqU.png"/></div><figcaption class="ko kp et er es kq kr bd b be z dx translated"><a class="ae ks" href="https://www.bluegranite.com/hubfs/adfflow.png" rel="noopener ugc nofollow" target="_blank"> Img。1 —数据工厂云计算和存储集成。</a></figcaption></figure><h1 id="63ee" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">什么是编排？</h1><p id="585f" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">打个比方，想想交响乐团。管弦乐队的核心成员是指挥。指挥并不演奏乐器，他们只是简单地带领交响乐团成员演奏整首乐曲。音乐家使用他们自己的技巧在交响乐的不同阶段发出特定的声音，所以他们可能只学习音乐的某些部分。指挥指挥整首乐曲，因此知道正在演奏的整个乐谱。他们还会使用特定的手臂动作来指导音乐家如何演奏一首乐曲。</p><p id="b9c1" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">ADF 可以使用类似的方法，虽然它具有接收和转换数据的本机功能，但有时<strong class="jf hj">它会指示另一个服务代表它执行所需的实际工作</strong>，例如 Databricks 执行转换查询。因此，在这种情况下，应该是 Databricks 执行这项工作，而不是 ADF。<strong class="jf hj"> ADF 仅仅编排查询的执行，然后提供管道将数据移动到下一步或目的地</strong>。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es kt"><img src="../Images/7d43770cd4cb278b770f8a605a360e97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*W5wgLz4vDpKS5_bh.png"/></div></div><figcaption class="ko kp et er es kq kr bd b be z dx translated"><a class="ae ks" href="https://docs.microsoft.com/pt-br/learn/modules/data-integration-azure-data-factory/4-explain-process" rel="noopener ugc nofollow" target="_blank">img . 2—Azure 数据工厂中的数据驱动工作流。</a></figcaption></figure><p id="0b31" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">它还提供丰富的可视化功能来显示数据管道之间的沿袭和依赖关系，并从一个统一的视图中监控所有数据管道，以轻松查明问题并设置监控警报。</p><p id="a582" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">数据集成首先涉及从一个或多个来源收集数据。可选地，它通常包括一个过程，在该过程中，数据可能被清理和转换，或者可能被增加额外的数据并被准备。最后，合并的数据存储在数据平台服务中，该服务处理您想要执行的分析类型。这个过程被称为提取、转换和加载(ETL)。</p><h1 id="2352" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">提取</h1><p id="d853" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jf hj">在提取过程</strong>中，数据工程师定义数据及其来源:</p><ol class=""><li id="a6b4" class="ky kz hi jf b jg kb jk kc jo la js lb jw lc ka ld le lf lg bi translated"><strong class="jf hj">定义数据源:</strong>识别数据源细节，比如资源组、订阅和身份信息，比如密钥或秘密<strong class="jf hj">。</strong></li><li id="b563" class="ky kz hi jf b jg lh jk li jo lj js lk jw ll ka ld le lf lg bi translated"><strong class="jf hj">定义数据:</strong>标识要提取的数据。通过使用数据库查询、一组文件或用于 Blob 存储的 Azure Blob 存储名称来定义数据。</li></ol><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es lm"><img src="../Images/25264a0df0b52e8ed0d9c4488fe9c812.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jSxotEGRhNUX9_rC.png"/></div></div><figcaption class="ko kp et er es kq kr bd b be z dx translated"><a class="ae ks" href="https://azure.microsoft.com/en-us/services/data-factory/#interactive-demos" rel="noopener ugc nofollow" target="_blank"> Img。3 —简化的混合数据集成。</a></figcaption></figure><h1 id="d803" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">改变</h1><p id="09b5" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jf hj">定义数据转换:</strong>数据转换操作可以包括拆分、合并、派生、添加、删除或透视列。在数据源和数据目标之间映射字段。您可能还需要聚合或合并数据。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ln"><img src="../Images/72871d82b89fd7c18d011e3dfbe60e9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:842/format:webp/0*UiNhj8h0KnsEFPB1.png"/></div><figcaption class="ko kp et er es kq kr bd b be z dx translated"><a class="ae ks" href="https://www.element61.be/sites/default/files/competence/Azure%20Factory" rel="noopener ugc nofollow" target="_blank"> Img。4-Ex。数据转换管道。</a></figcaption></figure><h1 id="1f95" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">负荷</h1><p id="b350" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jf hj">定义目的地:</strong>在加载期间，许多 Azure 目的地可以接受 JavaScript 对象符号(JSON)、文件或 blob 格式的数据。您可能需要编写代码来与应用程序 API 进行交互。</p><p id="3bf1" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">Azure Data Factory 提供了对 Azure 函数的内置支持。您还会发现对许多编程语言的支持，包括 Node.js。NET、Python 和 Java。尽管可扩展标记语言(XML)在过去很常见，但是大多数系统都迁移到了 JSON，因为它作为半结构化数据类型非常灵活。</p><p id="d33f" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">启动作业:</strong>在开发或测试环境中测试 ETL 作业。然后将作业迁移到生产环境，以加载生产系统。</p><p id="5a1c" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">监视作业:</strong> ETL 操作可能涉及许多复杂的过程。建立一个主动和被动的监控系统，以便在出现问题时提供信息。根据将要使用的技术设置日志记录。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lo"><img src="../Images/d87c0bc7ab6b9181ebdf4cd4f1885ca5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1166/format:webp/0*ZkXIqaYQjDzWF0Kv.png"/></div><figcaption class="ko kp et er es kq kr bd b be z dx translated">Img。5-管道工作流程。</figcaption></figure><h1 id="d941" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">ETL 与 ELT:有什么区别？</h1><p id="d469" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">ETL 和 ELT 都是将数据从源传输到数据仓库的数据集成方法。尽管有相似之处，ETL 和 ELT 在根本上是不同的。这里有一个 ETL 和 ELT 的快速比较。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es lp"><img src="../Images/6b8780b03b5a79748c1feda5f65a2b71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KuppX2zIWAljL-fa.png"/></div></div><figcaption class="ko kp et er es kq kr bd b be z dx translated"><a class="ae ks" href="https://rivery.io/etl-vs-elt-whats-the-difference/" rel="noopener ugc nofollow" target="_blank"> Img。7 — ETL 过程。</a></figcaption></figure><p id="8a25" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">当数据必须被转换以符合目标数据库的数据体制时，使用 ETL。这种方法出现于 20 世纪 70 年代，在拥有有限内存和处理能力的本地数据库中仍然很流行。</p><p id="1273" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">考虑一个实际的 ETL 例子。在线分析处理(OLAP)数据仓库只接受基于关系 SQL 的数据结构。对于这种类型的数据仓库，诸如 ETL 之类的协议通过将提取的数据路由到处理服务器，然后将不一致的数据转换成基于 SQL 的数据来确保合规性。提取的数据只有在成功转换后才会从处理服务器移动到数据仓库。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es lp"><img src="../Images/3b9b06b3c45e7cb71f8066e08469b685.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9g6w54mbSvCx59uG.png"/></div></div><figcaption class="ko kp et er es kq kr bd b be z dx translated"><a class="ae ks" href="https://rivery.io/etl-vs-elt-whats-the-difference/" rel="noopener ugc nofollow" target="_blank"> Img。8 — ELT 流程。</a></figcaption></figure><p id="1044" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><strong class="jf hj">ELT 流程也与数据湖密切相关。</strong></p><blockquote class="lq lr ls"><p id="fccc" class="jd je lt jf b jg kb ji jj jk kc jm jn lu kd jq jr lv ke ju jv lw kf jy jz ka hb bi translated"><strong class="jf hj"> <em class="hi">数据湖</em> </strong> <em class="hi">是特殊类型的数据存储，与 OLAP 数据仓库不同，它接受任何类型的结构化或非结构化数据。数据湖不要求您在加载数据之前转换数据。您可以立即将任何</em> <strong class="jf hj"> <em class="hi">类型</em> </strong> <em class="hi">的原始信息加载到数据湖中，无论其格式如何。</em></p></blockquote><p id="36fe" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">使用 ELT，数据清理、丰富和转换都发生在数据仓库内部。原始数据无限期地存储在数据仓库中，允许多次转换。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lx"><img src="../Images/df4c1607a283185bf81f07e946d0e60b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/0*losFxolJl9B72d4V.png"/></div><figcaption class="ko kp et er es kq kr bd b be z dx translated"><a class="ae ks" href="https://rivery.io/wp-content/uploads/2020/01/etlvselt.png" rel="noopener ugc nofollow" target="_blank"> Img 9 — ETL 与 ELT </a></figcaption></figure><p id="c793" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">ETL 和 ELT 在两个主要方面不同。一个区别是数据在哪里转换，另一个区别是数据仓库如何保留数据。</p><ul class=""><li id="f974" class="ky kz hi jf b jg kb jk kc jo la js lb jw lc ka ly le lf lg bi translated">ETL 在单独的处理服务器上转换数据，而 ELT 在 DW/数据湖本身中转换数据。</li><li id="7f92" class="ky kz hi jf b jg lh jk li jo lj js lk jw ll ka ly le lf lg bi translated">ETL 不将原始数据传输到数据仓库，而 ELT 将原始数据直接发送到 DW/Data lake。</li></ul><p id="b031" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">对于 ETL，通过在加载过程之前在单独的服务器上转换数据，数据接收过程变得更慢。相比之下，ELT 的数据接收速度更快，因为数据不会发送到辅助服务器进行重构。事实上，使用 ELT，数据可以同时加载和转换。</p><p id="3ae7" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">ELT 的原始数据保留为生成商业智能创建了丰富的历史档案。随着目标和策略的改变，BI 团队可以重新查询原始数据，以使用全面的数据集开发新的转换。另一方面，ETL 并不生成可无限查询的完整的原始数据集。</p><p id="06c4" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这些因素使 ELT 更加灵活、高效和可扩展，特别是在接收大量数据、处理包含结构化和非结构化数据的数据集以及开发多样化的商业智能方面。</p><p id="533d" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">另一方面，ETL 非常适合计算密集型转换、具有遗留架构的系统，或者在进入目标系统之前需要操作的数据工作流，例如擦除个人身份信息(PII)。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lz"><img src="../Images/0debf598594ed6ff19fd13351ab63e36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/0*ha1Dpfj3a_gwuSg0.png"/></div></figure></div></div>    
</body>
</html>