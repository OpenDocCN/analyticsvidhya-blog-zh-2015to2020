<html>
<head>
<title>Take Full Control of AI Notebook Instance on GCP via Putty</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过Putty完全控制GCP上的AI笔记本实例</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/take-full-control-of-ai-notebook-instance-on-gcp-via-putty-814ae0e11873?source=collection_archive---------25-----------------------#2020-12-22">https://medium.com/analytics-vidhya/take-full-control-of-ai-notebook-instance-on-gcp-via-putty-814ae0e11873?source=collection_archive---------25-----------------------#2020-12-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6caf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过Putty访问云计算的GCP虚拟机实例</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/f826749a01d0e90260f079f78f5fe492.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*A4wdBnV3PZj_jxIojVlCxQ.png"/></div></figure><p id="6219" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">GCP上的AI笔记本实例运行在VM实例上。如果我们可以通过Putty访问VM实例，那么我们就可以通过Linux命令完全控制VM实例。在这篇文章中，我将介绍如何通过Putty在GCP上设置对AI笔记本实例的访问。</p><p id="13f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 1。启动虚拟机实例。</strong></p><p id="4464" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">启动人工智能笔记本实例的一种方法是使用GCP云控制台。AI笔记本实例运行在同名的VM实例上。另一种方法是使用“gcloud SDK”，我从“Windows终端”管理它。(我的另一篇文章是关于为什么你应该<a class="ae jl" rel="noopener" href="/analytics-vidhya/windows-terminal-a-must-have-productivity-tool-for-windows-programmers-9270d9dc4bfb">使用windows终端’</a>)。启动虚拟机实例的命令是:</p><pre class="je jf jg jh fd jm jn jo jp aw jq bi"><span id="fce0" class="jr js hi jn b fi jt ju l jv jw">gcloud compute instances start INSTANCE-NAME</span></pre><p id="c673" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 2。向GCP上的虚拟机实例添加一个外部IP地址。</strong></p><p id="d974" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从GCP云控制台中的导航菜单，您可以导航至计算引擎(GCE)列表，如下所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es jx"><img src="../Images/4befa8751a059d0ed521370450fc7d90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UZGUoYcohc6XfOU3-L1OJA.png"/></div></div></figure><p id="7720" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单击所选GCE虚拟机实例最右侧的三点图标，选择“查看网络详细信息”以导航至以下VPC网络配置屏幕:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es kc"><img src="../Images/6ecf4a4622dd9d993cd80f640777a2ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t2XaNxXg-eSxB6C3EHP0MQ.png"/></div></div></figure><p id="9543" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将选择“外部IP地址”选项卡。有两种可能的类型:静态的和短暂的。对于虚拟机实例，静态外部IP地址保持不变，直到它们被删除。每次启动实例时，临时外部IP地址都会发生变化。我们将外部IP地址设置为“静态”,因为我们将来需要使用相同的信息登录。</p><p id="507f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 3。将ssh密钥添加到GCP上的虚拟机实例。</strong></p><p id="6dc0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们使用PuTTYgen生成ssh密钥对(公钥和私钥)。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es kd"><img src="../Images/a4c7ef7c962542e3d5e3736fea082dc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*24zFvv0Zb-UsVEyQFncgbQ.png"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ke"><img src="../Images/b3a8e7e2e569621a0a118635cabb2d63.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/1*qcbUm-cOfOrJL_MCzFRZBg.gif"/></div></figure><p id="4bb1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“密钥注释”部分将是用户名，“密钥密码”将作为以后登录的密码。我们将保存公钥和私钥。公钥文件名遵循以“ssh-rsa”开头，以作为用户名的密钥注释结尾的格式。</p><p id="4048" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">生成ssh密钥对后，我们可以转到控制台中的虚拟机实例详细信息，单击“编辑”按钮，并向下滚动到“SSH密钥”部分，如下图所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kf"><img src="../Images/4395ab052854d0102cafc68a147ddcbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*tjgRujOqxdA_s_s7_52u0Q.png"/></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">(GCE虚拟机实例的SSH密钥)</figcaption></figure><p id="502c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">展开“显示和编辑”选项，将ssh公钥添加到虚拟机实例中。</p><p id="e71d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 4。配置Putty以连接到GCP上的虚拟机实例</strong></p><p id="de99" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">启动程序“PuTTY ”,在面板左侧选择会话类别，如下所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es kk"><img src="../Images/3c136f9ecc4fa2f183ad6adc047feb02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BjvpiG5l7e2m0OZR30tIAA.jpeg"/></div></div></figure><p id="9638" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在主机名(或IP地址)框中，我们使用在步骤2中添加到虚拟机实例的静态外部IP地址。为了避免每次都键入用户名，我们在IP地址前添加了“用户名@”。我们还保存了这些信息，这样我们就可以稍后加载存储的会话，以省去键入配置设置的工作。</p><p id="9d3b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们转到类别/Connection/SSH/Auth来加载私钥文件。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es kl"><img src="../Images/41ea5ee46ce07bfeeef93218fc77d304.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WIVrucyk-whjdsaYsbKgmg.jpeg"/></div></div></figure><p id="4632" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，我们在“Category/Connection/SSH/Auth/Tunnels”中指定用于AI笔记本实例的端口我们知道，本地机器上的Jupyter笔记本将使用端口8888。为了避免端口冲突，我们对PuTTY远程连接使用port=7080(非8888端口)。点击“添加”按钮，端口=7080将显示在“转发端口”框中。我们现在可以返回到会话部分并保存更新的设置。单击“打开”按钮后，我们将导航至PuTTY登录屏幕。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es km"><img src="../Images/0cd6a0fec91d1506e395a80d7aa31689.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uSODRMIK1LFAyARfddc1uA.jpeg"/></div></div></figure><p id="1918" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 5。从本地主机启动AI笔记本。</strong></p><p id="ddec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦我们通过PuTTY登录到VM实例，我们就可以激活AI notebook运行时环境并启动Jupyter Notebook或Jupyterlab。</p><pre class="je jf jg jh fd jm jn jo jp aw jq bi"><span id="d929" class="jr js hi jn b fi jt ju l jv jw">conda activate base<br/>cd /<br/>jupyter notebook --port=7080</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kn"><img src="../Images/d3fa5fa46da89de211c1d62f54fe3a57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*h2Zj2LwiA9m3UomzbocBWg.png"/></div></figure><p id="402a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">基础环境是AI笔记本实例使用的环境。除了基本环境之外，我们还可以根据需要创建新的环境。命令行“cd /”将我们导航到根目录。当我们开始Jupyter笔记本时，记得添加部分“- -port=7080”。</p><p id="92be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们打开浏览器，键入地址“localhost:7080”开始使用Jupyter笔记本，或键入“localhost:7080/lab”开始使用JupyterLab。</p></div></div>    
</body>
</html>