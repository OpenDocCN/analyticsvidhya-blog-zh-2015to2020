<html>
<head>
<title>Creating an Elastic Hadoop Cluster</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建弹性Hadoop集群</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/elastic-hadoop-cluster-fc08997048cc?source=collection_archive---------16-----------------------#2020-11-04">https://medium.com/analytics-vidhya/elastic-hadoop-cluster-fc08997048cc?source=collection_archive---------16-----------------------#2020-11-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/cd890120b642ab7615d283f2d4842ca9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l8ksCJWnEowkGnOpmNgRMA.jpeg"/></div></div></figure><p id="8e33" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">许多跨国公司使用Hadoop来解决大数据的容量问题，这需要弹性存储，但Hadoop集群本身并不具有弹性。因此，Linux操作系统的逻辑卷管理被用来使Hadoop集群具有弹性。在这里，我将简单演示如何构建一个弹性Hadoop集群。弹性的优势在于，您可以动态地增加/减少存储，而不会影响集群中已经存在的文件和数据。</p><blockquote class="jo jp jq"><p id="7817" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated">克隆这个GitHub <a class="ae jv" href="https://github.com/sukesh2000/AWSHadoopSetup-CLI_Tool" rel="noopener ugc nofollow" target="_blank">存储库</a>以在几秒钟内设置Hadoop集群。要了解更多关于如何在Hadoop集群中共享有限的存储空间，你可以参考这篇<a class="ae jv" href="https://sukeshseth.medium.com/share-a-limited-amount-of-storage-in-hadoop-cluster-cea41c2af922" rel="noopener">文章</a>。</p></blockquote><p id="f843" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在继续之前，将一个3GB的新卷连接到为datanode配置的系统中，并创建一个包含一个namenode和一个datanode的Hadoop集群。</p><h1 id="6df3" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">设置弹性Hadoop集群</h1><ol class=""><li id="a8d5" class="ku kv hi is b it kw ix kx jb ky jf kz jj la jn lb lc ld le bi translated">检查卷是否已连接。</li></ol><blockquote class="jo jp jq"><p id="9a08" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated">fdisk -l</p></blockquote><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lf"><img src="../Images/17f9a521fd254472305483c825d98c1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ysyGz9DiEMzTKm8Dtbi6Pw.png"/></div></div></figure><p id="b228" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.从连接的卷创建新的物理卷。</p><blockquote class="jo jp jq"><p id="486a" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated">pvcreate <device1_name/></p></blockquote><figure class="lg lh li lj fd ij er es paragraph-image"><div class="er es lk"><img src="../Images/1a8896f4f16cc5243f52c24743bd1b56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*zOToda6aZF-eC4AbJKBSPw.png"/></div></figure><p id="76d3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3.为物理卷创建新的卷组。</p><blockquote class="jo jp jq"><p id="4139" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated">vgcreate<volume_group_name>T6】</volume_group_name></p></blockquote><figure class="lg lh li lj fd ij er es paragraph-image"><div class="er es ll"><img src="../Images/e2075874e17a2b49fc3349fd7bb054b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1092/format:webp/1*iMXwV0U2DwHE9aNhxqAGUg.png"/></div></figure><p id="43db" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">显示创建的卷。</p><blockquote class="jo jp jq"><p id="7e8e" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated">vgdisplay <volume_group_name/></p></blockquote><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/ca2c29f4372bebb505b48673683e13e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YK-ON99w5NTq9FMK5-Nc1Q.png"/></div></div></figure><p id="317b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">4.创建所需大小的新逻辑卷。这样做的好处是，我们可以根据需要扩展/减少逻辑卷的大小。</p><blockquote class="jo jp jq"><p id="b538" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated">lvcreate - size <size_in_gb> - name <logical_volume_name> <volume_group_name/></logical_volume_name></size_in_gb></p></blockquote><figure class="lg lh li lj fd ij er es paragraph-image"><div class="er es ln"><img src="../Images/22d5a2afb009d285f7db47a31e14a7a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*GNTONHn4YilAK0dhXb-XGw.png"/></div></figure><p id="9e10" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">检查新创建的逻辑卷。</p><blockquote class="jo jp jq"><p id="f4db" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated">lvdisplay <volume_group_name> / <logical_volume_name/></volume_group_name></p></blockquote><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/ef9242386893f5056cf834d74e9c2d64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W-wW-dgQdyDBdaq33nEjog.png"/></div></div></figure><p id="9ba3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">5.格式化新创建的逻辑卷，并将其装载到datanode在Hadoop集群中共享的目录中。</p><blockquote class="jo jp jq"><p id="d4f1" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated">使用ext4文件系统格式化:mkfs.ext4 <logical_volume> <br/>挂载到datanode目录:Mount&lt;logical _ volume&gt;&lt;data _ node _ directory&gt;<br/>检查挂载的卷:df -hT</logical_volume></p></blockquote><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/8517e903f0c8fc525e0c34176cf445cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mC8Tl8twLPZGbmdRJLsh-Q.png"/></div></div></figure><p id="5cdf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">6.启动namenode &amp; datanode并检查它当前在Hadoop集群中共享了多少存储。</p><blockquote class="jo jp jq"><p id="1d3f" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated">Start datanode:Hadoop-daemon . sh Start NameNode<br/>Start NameNode:Hadoop-daemon . sh Start datanode<br/>检查配置的容量:hadoop dfsadmin -report</p></blockquote><figure class="lg lh li lj fd ij er es paragraph-image"><div class="er es lq"><img src="../Images/6e8ffc169e7dfc4a8a5bc1729518c389.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*VsX9jmsjI-UVt781QtDxHQ.png"/></div></figure><p id="f190" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">弹性Hadoop集群已经安装完毕！！</strong></p><h1 id="b853" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">动态扩展Hadoop集群的配置容量</h1><ol class=""><li id="e84e" class="ku kv hi is b it kw ix kx jb ky jf kz jj la jn lb lc ld le bi translated">将一个新卷附加到为datanode配置的系统上，并从中创建一个新的物理卷。</li></ol><blockquote class="jo jp jq"><p id="1768" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated">pvcreate <device_name/></p></blockquote><figure class="lg lh li lj fd ij er es paragraph-image"><div class="er es lr"><img src="../Images/329aa776973b52504b40c062e68c9fe1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/1*1A2U_nPAftBORO0cvUxBAQ.png"/></div></figure><p id="1138" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.使用这个新的物理卷扩展以前创建的卷组的大小。</p><p id="931e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">vgextend<volume_group_name>T22】</volume_group_name></p><figure class="lg lh li lj fd ij er es paragraph-image"><div class="er es ls"><img src="../Images/b77275efa2886362708bc227862e1cd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*SceCaI-DXKryjIU18ndfqQ.png"/></div></figure><p id="dc7e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">检查卷组的大小。</p><blockquote class="jo jp jq"><p id="8cdc" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated">vgdisplay <volume_group_name/></p></blockquote><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lt"><img src="../Images/13cedac3f005ed57bd3838021955eff6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4YX_7Peic9rs7aVzkLIcAQ.png"/></div></div></figure><p id="3084" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3.扩展先前创建的逻辑卷。</p><p id="66c4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">lvextend - size <size> <volume_group_name> / <logical_volume_name/></volume_group_name></size></p><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lu"><img src="../Images/e7b62e245a900c96ac95e529d3ce648e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZslfesyrKZ_pc8Z1VCUqjg.png"/></div></div></figure><p id="3436" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">4.现在，我们已经向先前创建的逻辑卷添加了一个新的未格式化的逻辑卷，因此要使用这个扩展卷，我们需要在不影响现有逻辑卷的情况下对其进行格式化。为此，Linux提供了动态调整卷大小的特性。</p><blockquote class="jo jp jq"><p id="174b" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated">resize2fs <volume/></p></blockquote><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lv"><img src="../Images/8d8af8dc46333c1695ad538df468a956.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k-T7WyXp-dqXvPRdJME1TA.png"/></div></div></figure><p id="db66" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">5.再次检查Hadoop集群的配置容量。</p><figure class="lg lh li lj fd ij er es paragraph-image"><div class="er es lw"><img src="../Images/1abc71df94dfb56fa7a38966762d312f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*YmcUOhEEvMn8gEXnS9_Cnw.png"/></div></figure><p id="b1ba" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">最后，Hadoop集群的配置容量增加了，而无需终止namenode和datanode！！</strong></p></div></div>    
</body>
</html>