<html>
<head>
<title>Creating a Rating Dialog in Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Flutter中创建分级对话框</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/creating-a-rating-dialog-in-flutter-233da88c946b?source=collection_archive---------4-----------------------#2020-03-10">https://medium.com/analytics-vidhya/creating-a-rating-dialog-in-flutter-233da88c946b?source=collection_archive---------4-----------------------#2020-03-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/d9c2a688469a223aab07f399401d629b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DQlAs6D2degUAsVCQHTniQ.png"/></div></div></figure><div class=""/><p id="045a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi jo translated">向用户展示一些信息是一个很棒的想法，为此我们最常见的是使用对话框。在Flutter这个令人惊叹的UI工具包中，我们有一些构建对话框的方法。</p><p id="e37b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这篇文章中，我将向你展示如何使用<strong class="is hu"> AlertDialog </strong>小部件创建对话。我们将构建一个返回评级的评级对话框。</p><h1 id="58ad" class="jx jy ht bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated"><strong class="ak">第一步:准备你的项目</strong></h1><p id="f01c" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">首先，您将使用命令创建一个flutter项目</p><p id="b3ed" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">颤振创建</strong>额定值_对话框</p><p id="1f8e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如你已经知道的，上面的命令将在名为<strong class="is hu"> rating_dialog </strong>的文件夹中创建一个Flutter项目。</p><p id="ba9c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们构建我们的项目。在<strong class="is hu"> lib </strong>文件夹内，我们将创建一个名为src的文件夹，在src内，我们将创建另外两个文件夹，第一个是<strong class="is hu"> widgets </strong>，第二个是<strong class="is hu"> screens </strong>。</p><p id="6c8e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的文件夹结构如下所示。</p><figure class="lb lc ld le fd hk er es paragraph-image"><div class="er es la"><img src="../Images/f94b0b10ad54de99961b9d35d2908c37.png" data-original-src="https://miro.medium.com/v2/resize:fit:852/format:webp/1*RlSFtHoI-jTSNCgYPPRgGA.png"/></div><figcaption class="lf lg et er es lh li bd b be z dx translated">图1 —文件夹结构</figcaption></figure><p id="32b9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如你所见，我们在屏幕内创建了一个名为<strong class="is hu"> home_screen.dart </strong>的文件，在小部件内创建了一个名为<strong class="is hu"> rating_dialog.dart </strong>的文件。</p><p id="ce18" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">主屏幕的内容如下所示。</p><figure class="lb lc ld le fd hk"><div class="bz dy l di"><div class="lj lk l"/></div></figure><p id="91d1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">注意第20行中的onPressed方法。我们使用showDialog函数向用户显示一个对话框，内容是一个名为<strong class="is hu"> RatingDialog() </strong>的小部件。</p><p id="b154" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将在下一步实现这个小部件，并解释showDialog()是如何工作的，但在此之前，让我向您展示我们的<strong class="is hu"> main.dart </strong>文件的内容。</p><figure class="lb lc ld le fd hk"><div class="bz dy l di"><div class="lj lk l"/></div></figure><p id="1737" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们可以专注于RatingDialog小部件。所以我们开始吧！</p><h1 id="9f65" class="jx jy ht bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">步骤2:实现RatingDialog小部件</h1><p id="90f3" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">这个小部件将是有状态的，因为我们需要管理选择了多少星星的状态，</p><p id="e2b0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为此，我们将使用AlertDialog小部件。这个小部件创建一个预定义的对话框。在本教程中，我们将使用它们的一些属性。因此，在我们的RatingDialog小部件中，我们有:</p><pre class="lb lc ld le fd ll lm ln lo aw lp bi"><span id="886b" class="lq jy ht lm b fi lr ls l lt lu">@override<br/>Widget build(BuildContext context) {<br/>  return AlertDialog(<br/>    title: Center(child: Text('Rate this post'),),<br/>    content: Row(<br/>      mainAxisAlignment: MainAxisAlignment.spaceEvenly,<br/>      children: &lt;Widget&gt;[<br/>        <strong class="lm hu">_buildStar</strong>(1),<br/>        <strong class="lm hu">_buildStar</strong>(2),<br/>        <strong class="lm hu">_buildStar</strong>(3),<br/>        <strong class="lm hu">_buildStar</strong>(4),<br/>        <strong class="lm hu">_buildStar</strong>(5),<br/>      ],<br/>  ),<br/>    actions: &lt;Widget&gt;[<br/>    FlatButton(<br/>      child: Text('CANCEL'),<br/>      onPressed: <strong class="lm hu">Navigator.of(context).pop</strong>,<br/>    ),</span><span id="8761" class="lq jy ht lm b fi lv ls l lt lu">    FlatButton(<br/>      child: Text('OK'),<br/>      onPressed: () {<br/>        <strong class="lm hu">Navigator.of(context).pop(_stars)</strong>;<br/>      },<br/>     )<br/>    ],<br/>  );<br/>}</span></pre><p id="86f7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们使用了属性<strong class="is hu">标题</strong>、<strong class="is hu">上下文</strong>和<strong class="is hu">内容</strong>。上下文将是对话框的当前上下文，标题是对话框的标题，内容是对话框的内容。</p><p id="d972" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在内容中，我们添加了一个带有五个按钮的<strong class="is hu">行()</strong>，它由一个带有<strong class="is hu">图标</strong>子图标的<strong class="is hu">油墨池</strong>组成。这给了我们一个类似于<strong class="is hu">开始按钮</strong>的行为。</p><p id="6705" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">每个按钮都有许多星星，当点击某个按钮时，星星会改变颜色。</p><p id="0541" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，如果用户点击第四颗星，四颗星被激活，以此类推。正如你在<strong class="is hu"> _buildStar() </strong>方法中看到的。</p><pre class="lb lc ld le fd ll lm ln lo aw lp bi"><span id="50cc" class="lq jy ht lm b fi lr ls l lt lu">Widget _buildStar(int starCount) {<br/>  return <strong class="lm hu">InkWell</strong>(<br/>    child: Icon(<br/>      Icons.star,<br/>      <strong class="lm hu">color: _stars &gt;= starCount ? Colors.orange : Colors.grey</strong>,<br/>    ),<br/>    <strong class="lm hu">onTap</strong>: () {<br/>      <strong class="lm hu">setState(() {<br/>        _stars = starCount;<br/>      });<br/> </strong>   },<br/>  );<br/>}</span></pre><p id="5355" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，我们有一个actions属性，其中放置了两个按钮，一个CANCEL按钮和一个OK按钮。</p><p id="5294" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这两个按钮中，我们添加了一个Navigator.pop。唯一不同的是，在<strong class="is hu"> OK </strong>按钮中，我们传递了作为Navigator.pop参数选择的星星数。</p><p id="bf01" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面你可以看到我们的小工具的全部内容:</p><figure class="lb lc ld le fd hk"><div class="bz dy l di"><div class="lj lk l"/></div></figure><h1 id="1470" class="jx jy ht bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated"><strong class="ak">第三步:使用我们的小工具</strong></h1><p id="ced0" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">现在我们的小部件已经创建好了，让我们看看<strong class="is hu"> home_screen.dart </strong>文件中RaisedButton的onPressed方法。如果你不记得，回到第一步去看。</p><p id="63b6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu"> showDialog </strong>是在app内容上方显示素材对话框的功能。它需要一些参数，但出于本教程的目的，我们将只使用两个。</p><p id="a159" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第一个是BuildContext，第二个是返回对话框小部件的生成器函数。查看代码片段</p><pre class="lb lc ld le fd ll lm ln lo aw lp bi"><span id="1005" class="lq jy ht lm b fi lr ls l lt lu"><strong class="lm hu">showDialog</strong>(<br/>  context: context,<br/>  builder: (_) =&gt; RatingDialog()<br/>);</span></pre><p id="e2eb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是在报纸上我们有更多的信息。请注意，我们的函数是一个<strong class="is hu">异步</strong>函数，我们在showDialog之前添加了一个<strong class="is hu"> await </strong>，并将其赋给了一个变量。</p><p id="842e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这对于得到被选中的星星的数量是很重要的。还记得OK按钮吗？Navigator.pop中的参数将返回到这里。</p><p id="4754" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是取消按钮是怎么回事呢？在取消中，我们没有参数，所以返回值为空。</p><p id="32d7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，我们对返回值进行验证，如果该值为空，则函数会停止，并返回一条指令。否则，如果验证不为空，我们将在控制台中打印星的数量。</p><h1 id="313f" class="jx jy ht bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">摘要</h1><p id="ebf6" class="pw-post-body-paragraph iq ir ht is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">我们完了。我们的评级对话框太棒了！制作和使用非常有用的内容非常简单，比如一些小部件、对话框、从对话框传递数据等等。</p><p id="790c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如您所见，我们使用setState来管理状态。嘿，也许你有更好的选择，比如MobX或BLoC。所以，试试吧。改变这段代码，使用另一种状态管理，这将是惊人的！</p><p id="0233" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">就这样，再见。</p><h1 id="531c" class="jx jy ht bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">参考</h1><ul class=""><li id="7b8a" class="lw lx ht is b it kv ix kw jb ly jf lz jj ma jn mb mc md me bi translated">alert dialog—<a class="ae mf" href="https://api.flutter.dev/flutter/material/AlertDialog-class.html" rel="noopener ugc nofollow" target="_blank">https://API . flutter . dev/flutter/material/alert dialog-class . html</a></li><li id="0ac3" class="lw lx ht is b it mg ix mh jb mi jf mj jj mk jn mb mc md me bi translated">有状态vs无状态—<a class="ae mf" href="https://flutter.dev/docs/development/ui/interactive" rel="noopener ugc nofollow" target="_blank">https://flutter.dev/docs/development/ui/interactive</a></li></ul></div></div>    
</body>
</html>