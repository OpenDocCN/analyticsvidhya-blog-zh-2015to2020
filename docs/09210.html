<html>
<head>
<title>What is Canonical Correlation Analysis?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是典型相关分析？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/what-is-canonical-correlation-analysis-58ef4349c0b0?source=collection_archive---------4-----------------------#2020-08-29">https://medium.com/analytics-vidhya/what-is-canonical-correlation-analysis-58ef4349c0b0?source=collection_archive---------4-----------------------#2020-08-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="eaeb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi jd translated">匿名相关分析(CCA)是一种统计技术，用于推导两组变量之间的关系。理解CCA的一个方法是使用多元回归的概念。在多元回归中，研究一个因变量和一组自变量之间的关系。在CCA中，我们将多元回归概念扩展到一个以上的因变量。在某些应用中，我们会遇到不止一个相互关联的因变量，因此忽略相关性是不明智的。例如，在抑郁症研究中，流行病学研究中心(CESD)的抑郁症和健康状况是相互关联的，两者都可以作为因变量，取决于一些变量，如性别、年龄、教育和收入。因此，我们的目标是导出一组变量的函数与另一组变量的函数之间的关系。该函数通常是一个线性函数，其权重是基于一些约束条件来指定的。</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es jm"><img src="../Images/cc71001bf06682628b42a4961d9c0f47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wF9ZjMyF3bRdYEVbfx_a6Q.png"/></div></div><figcaption class="jy jz et er es ka kb bd b be z dx translated">CCA:通过规范变量连接的两组变量</figcaption></figure><p id="bf6a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如你在上面的图中看到的，我们有一组变量在左边，另一组在右边。不失一般性，让我们假设自变量和因变量的数量分别为<em class="kc"> p </em>和<em class="kc"> q </em>。左侧和右侧的所有变量都集中在两个不同的变量中，如图中黄色圆圈所示。CCA的目的是找出两个集总变量之间的关系，使这两个变量之间的相关性达到最大。显然，变量有几种线性组合，但目的是只选择那些能最好地表达两个变量集之间相关性的线性函数。这些线性函数称为<strong class="ih hj">规范变量，</strong>而规范变量对应对之间的相关性称为<strong class="ih hj">规范相关性。</strong></p><p id="d89c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">CCA背后的基本思想是找到与x的线性组合具有最大相关性的y的线性组合。说</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es kd"><img src="../Images/699a6863af49507fd9dc3ea1e014c311.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TZCMe-wkK1Gls8hlw4fwlQ.png"/></div></div><figcaption class="jy jz et er es ka kb bd b be z dx translated">正则方程，等式(1)</figcaption></figure><p id="26a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于每一个权重的选择，我们可以导出U和V的值对，然后可以得到U和V之间的相关性。有k=min(q，p)个变量，每个变量对应不同的权重集，这给了我们k个不同的相关性。这些相关性被证明是等式(2)给出的两个矩阵乘积的特征值的平方根。</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es kd"><img src="../Images/313803b266017255dcb75c356fad1e5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7KWT1ibwB7eowUf--iR5-Q.png"/></div></div><figcaption class="jy jz et er es ka kb bd b be z dx translated">情商。(2)</figcaption></figure><p id="c87a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意，X是一个有n行和p列的矩阵。类似地，Y是一个具有<em class="kc"> n </em>行和<em class="kc"> q </em>列的矩阵。<em class="kc"> n </em>行表示观察到的样本数，而<em class="kc"> p </em>或<em class="kc"> q </em>分别是X和Y的特征数。本征值和本征向量给了我们正则相关和相应的圆锥变量U和v。如前所述，有<em class="kc"> k </em>个不同的正则变量。<strong class="ih hj"> <em class="kc">第一个规范变量是最重要的一个，因为对应的相关性是其他变量之间最大的相关性。</em> </strong>相关系数按降序排列。换句话说，第一个典型相关最大，第二个典型相关次之，依此类推。现在我们掌握了CCA背后的基础知识，让我们看看如何使用CCA来分析真实世界的数据。CCA不如多元回归普遍，因为结果解释比多元回归更难。</p><h1 id="f662" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">CCA在实际案例中的应用</h1><p id="ba94" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">为了证明CCA的有用性，我们将CCA应用于真实世界的数据，以了解它如何有助于获得洞察力。为此，我们使用数据集<a class="ae lh" href="https://stats.idre.ucla.edu/stat/data/mmreg.csv" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> mmreg.dta </strong> </a>，对八个变量进行600次观测。心理变量有<code class="du li lj lk ll b"><strong class="ih hj">locus_of_control</strong></code>、<code class="du li lj lk ll b"><strong class="ih hj">self_concept</strong></code>和<code class="du li lj lk ll b"><strong class="ih hj">motivation</strong></code>。学术变量是阅读(<code class="du li lj lk ll b"><strong class="ih hj">read</strong></code>)、写作(<code class="du li lj lk ll b"><strong class="ih hj">write</strong></code>)、数学(<code class="du li lj lk ll b"><strong class="ih hj">math</strong></code>)和科学(<code class="du li lj lk ll b"><strong class="ih hj">science</strong></code>)的标准化测试。此外，变量<code class="du li lj lk ll b"><strong class="ih hj">female</strong></code>是零一指示变量，其中一个指示女学生。代码片段可以从<a class="ae lh" href="https://stats.idre.ucla.edu/r/dae/canonical-correlation-analysis/" rel="noopener ugc nofollow" target="_blank">这里</a>获得。</p><pre class="jn jo jp jq fd lm ll ln lo aw lp bi"><span id="4b32" class="lq kf hi ll b fi lr ls l lt lu">library(lme4)<br/>library(CCA) #facilitates canonical correlation analysis<br/>library(CCP)<br/>require(ggplot2)<br/>require(GGally)</span><span id="41b8" class="lq kf hi ll b fi lv ls l lt lu">mm &lt;- read.csv("<a class="ae lh" href="https://stats.idre.ucla.edu/stat/data/mmreg.csv" rel="noopener ugc nofollow" target="_blank">https://stats.idre.ucla.edu/stat/data/mmreg.csv</a>")<br/><br/>summary(mm)</span></pre><p id="0d2a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据变量汇总如下:</p><pre class="jn jo jp jq fd lm ll ln lo aw lp bi"><span id="9644" class="lq kf hi ll b fi lr ls l lt lu">locus_of_control   self_concept       Motivation         Read     <br/>Min.   :-2.2300   Min.   :-2.6200   Min.   :0.000   Min.   :28.3  <br/>1st Qu.:-0.3725   1st Qu.:-0.3000   1st Qu.:0.330   1st Qu.:44.2  <br/>Median : 0.2100   Median : 0.0300   Median :0.670   Median :52.1  <br/>Mean   : 0.0965   Mean   : 0.0049   Mean   :0.661   Mean   :51.9  <br/>3rd Qu.: 0.5100   3rd Qu.: 0.4400   3rd Qu.:1.000   3rd Qu.:60.1  <br/>Max.   : 1.3600   Max.   : 1.1900   Max.   :1.000   Max.   :76.0  <br/>   <br/>    Write           Math         Science          Sex       <br/>Min.   :25.5   Min.   :31.8   Min.   :26.0   Min.   :0.000  <br/>1st Qu.:44.3   1st Qu.:44.5   1st Qu.:44.4   1st Qu.:0.000  <br/>Median :54.1   Median :51.3   Median :52.6   Median :1.000  <br/>Mean   :52.4   Mean   :51.9   Mean   :51.8   Mean   :0.545  <br/>3rd Qu.:59.9   3rd Qu.:58.4   3rd Qu.:58.6   3rd Qu.:1.000  <br/>Max.   :67.1   Max.   :75.5   Max.   :74.2   Max.   :1.000</span></pre><p id="6269" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">两组变量的组内相关系数可以通过下面的代码片段获得</p><pre class="jn jo jp jq fd lm ll ln lo aw lp bi"><span id="1835" class="lq kf hi ll b fi lr ls l lt lu">psych &lt;- mm[, 1:3]<br/>acad &lt;- mm[, 4:8]</span><span id="0e87" class="lq kf hi ll b fi lv ls l lt lu">ggpairs(psych)</span><span id="3beb" class="lq kf hi ll b fi lv ls l lt lu">ggpairs(acad)</span></pre><p id="83fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出将是</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es lw"><img src="../Images/600a7f3ffec445e23084413b47cab78f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*aI9SrS1kGzk5z4OYaj7NNw.png"/></div><figcaption class="jy jz et er es ka kb bd b be z dx translated">心理变量的相关系数</figcaption></figure><figure class="jn jo jp jq fd jr er es paragraph-image"><div class="er es lw"><img src="../Images/a36872ba0468a138c6725b882cd9c658.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*9LEbEjVi8dCApxZZFOkIVg.png"/></div><figcaption class="jy jz et er es ka kb bd b be z dx translated">学术变量内的相关系数</figcaption></figure><p id="1834" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，转到获得典型相关。如前所述，规范变量的个数为<em class="kc"> k = min(p，q) = min(4，3) = 3。</em>因此，我们将有三个典型相关，对于我们的情况，可以获得如下</p><pre class="jn jo jp jq fd lm ll ln lo aw lp bi"><span id="ed2f" class="lq kf hi ll b fi lr ls l lt lu">matcor(psych, acad)<br/>cc1 &lt;- cc(psych, acad)<br/>cc1$cor</span></pre><p id="ce7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">代码片段的输出将是</p><pre class="jn jo jp jq fd lm ll ln lo aw lp bi"><span id="6875" class="lq kf hi ll b fi lr ls l lt lu">0.4640861 0.1675092 0.1039911</span></pre><p id="2f21" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以看出，第一典型相关是0.464，这是第一典型变量之间的相关。<em class="kc">这个相关系数大于任何一对心理和学业变量之间的任何单个相关性(这里没有显示)。</em>生成规范变量的系数可以通过下面的代码片段获得</p><pre class="jn jo jp jq fd lm ll ln lo aw lp bi"><span id="002b" class="lq kf hi ll b fi lr ls l lt lu">cc1$ycoef<br/>cc1$xcoef</span></pre><p id="babe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出将是</p><pre class="jn jo jp jq fd lm ll ln lo aw lp bi"><span id="48f1" class="lq kf hi ll b fi lr ls l lt lu">&gt; cc1$ycoef<br/>            [,1]         [,2]         [,3]<br/>read    -0.044620600 -0.004910024  0.021380576<br/>write   -0.035877112  0.042071478  0.091307329<br/>math    -0.023417185  0.004229478  0.009398182<br/>science -0.005025152 -0.085162184 -0.109835014<br/>female  -0.632119234  1.084642326 -1.794647036</span><span id="91cb" class="lq kf hi ll b fi lv ls l lt lu">&gt; cc1$xcoef<br/>                      [,1]       [,2]       [,3]<br/>locus_of_control -1.2538339 -0.6214776 -0.6616896<br/>self_concept      0.3513499 -1.1876866  0.8267210<br/>motivation       -1.2624204  2.0272641  2.0002283</span></pre><p id="bb2f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，第一个规范变量(U1)的读取变量的系数是-0.044。</p><p id="0743" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想看看规范变量本身，你可以调用<strong class="ih hj">cc1 $ scores $ ys scores</strong>和<strong class="ih hj">cc1 $ scores $ ys scores。它会给你规范变量Ui和Vi。</strong></p><p id="42cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们也可以看看学术和心理变量和典型变量之间的相关性。这些相关性被称为<strong class="ih hj">标准可变载荷</strong>。代码片段及其相应的输出可以如下获得:</p><pre class="jn jo jp jq fd lm ll ln lo aw lp bi"><span id="a68f" class="lq kf hi ll b fi lr ls l lt lu">cc1$scores$corr.X.xscores<br/>                        [,1]       [,2]       [,3]<br/>locus_of_control    -0.90404631 -0.3896883 -0.1756227<br/>self_concept        -0.02084327 -0.7087386  0.7051632<br/>Motivation          -0.56715106  0.3508882  0.7451289</span><span id="579b" class="lq kf hi ll b fi lv ls l lt lu">cc1$scores$corr.Y.xscores<br/>              [,1]        [,2]        [,3]<br/>Read    -0.3900402 -0.06010654  0.01407661<br/>Write   -0.4067914  0.01086075  0.02647207<br/>Math    -0.3545378 -0.04990916  0.01536585<br/>Science -0.3055607 -0.11336980 -0.02395489<br/>Sex     -0.1689796  0.12645737 -0.05650916</span><span id="2232" class="lq kf hi ll b fi lv ls l lt lu">cc1$scores$corr.X.yscores<br/>                         [,1]        [,2]        [,3]<br/>locus_of_control    -0.419555307 -0.06527635 -0.01826320<br/>self_concept        -0.009673069 -0.11872021  0.07333073<br/>Motivation          -0.263206910  0.05877699  0.07748681</span><span id="bd20" class="lq kf hi ll b fi lv ls l lt lu">cc1$scores$corr.Y.yscores<br/>              [,1]        [,2]       [,3]<br/>Read    -0.8404480 -0.35882541  0.1353635<br/>Write   -0.8765429  0.06483674  0.2545608<br/>Math    -0.7639483 -0.29794884  0.1477611<br/>Science -0.6584139 -0.67679761 -0.2303551<br/>Sex     -0.3641127  0.75492811 -0.5434036</span></pre><p id="a31a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，规范变量加载显示了变量集和规范变量之间的相关性。例如，要查看<em class="kc">读取的数据</em>和第一个规范变量Y之间的相关性，我们应该查看<strong class="ih hj"> cc1$scores$corr.Y.yscores，</strong>的第一列，即-0.84。</p><h1 id="f4db" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">解释结果</h1><p id="d335" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">解释CCA的结果比多元回归稍微复杂一点。为了解释这些结果，我们来看看<strong class="ih hj">标准化系数</strong>。标准化系数可以通过将非标准化系数乘以相应变量的标准偏差得到。标准化系数可以通过下面的代码片段获得。</p><pre class="jn jo jp jq fd lm ll ln lo aw lp bi"><span id="5945" class="lq kf hi ll b fi lr ls l lt lu"># standardized psych canonical coefficients diagonal matrix of psych sd's<br/>s1 &lt;- diag(sqrt(diag(cov(psych))))<br/>s1 %*% cc1$xcoef</span><span id="6a95" class="lq kf hi ll b fi lv ls l lt lu">s2 &lt;- diag(sqrt(diag(cov(acad))))<br/>s2 %*% cc1$ycoef</span></pre><p id="1066" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出将是</p><pre class="jn jo jp jq fd lm ll ln lo aw lp bi"><span id="1fdb" class="lq kf hi ll b fi lr ls l lt lu">&gt; s1 %*% cc1$xcoef<br/>                      [,1]       [,2]       [,3]<br/>locus_of_control   -0.8404196 -0.4165639 -0.4435172<br/>self_concept        0.2478818 -0.8379278  0.5832620<br/>Motivation         -0.4326685  0.6948029  0.6855370</span><span id="c9f8" class="lq kf hi ll b fi lv ls l lt lu">&gt; s2 %*% cc1$ycoef<br/>               [,1]        [,2]        [,3]<br/>Read      -0.45080116 -0.04960589  0.21600760<br/>Write     -0.34895712  0.40920634  0.88809662<br/>Math      -0.22046662  0.03981942  0.08848141<br/>Science   -0.04877502 -0.82659938 -1.06607828<br/>Female    -0.31503962  0.54057096 -0.89442764</span></pre><p id="a7d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">CCA的互操作与多元回归非常相似。例如，可以看出，<code class="du li lj lk ll b"><strong class="ih hj">locus_of_control</strong></code> <strong class="ih hj"> </strong>的标准化相关系数为<strong class="ih hj"> -0.84。</strong>这意味着当模型中的所有其他变量保持不变时，<code class="du li lj lk ll b"><strong class="ih hj">locus_of_control</strong></code> <strong class="ih hj"> </strong>增加一个单位将导致第一个规范变量减少0.84。查看三个规范系数，我们看到<code class="du li lj lk ll b"><strong class="ih hj">locus_of_control</strong></code> <strong class="ih hj"> </strong>对所有规范变量都有负面影响。每个规范变量基于给定的系数给出不同的解释。然而，由于第一相关系数是最大的，基于第一组系数的解释更合理和可靠。</p></div><div class="ab cl lx ly gp lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hb hc hd he hf"><p id="c246" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">延伸阅读:</strong></p><p id="f7c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[1] Afifi，a .，May，s .，和Clark，V. A. (2003年)。<em class="kc">计算机辅助多元分析</em>。CRC出版社。</p><p id="bc1d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[2] González，I .，Déjean，s .，Martin，P. G .，和Baccini，A. (2008年)。CCA:扩展典型相关分析的R包。<em class="kc">统计软件杂志</em>，<em class="kc"> 23 </em> (12)，1–14。</p><p id="734b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[3]科尔特斯，p .，塞尔代拉，a .，阿尔梅达，f .，马托斯，t .，和赖斯，J. (2009年)。通过物理化学特性的数据挖掘建立葡萄酒偏好模型。<em class="kc">决策支持系统</em>，<em class="kc"> 47 </em> (4)，547–553。</p></div></div>    
</body>
</html>