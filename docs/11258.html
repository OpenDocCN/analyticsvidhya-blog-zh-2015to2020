<html>
<head>
<title>ASSIGNMENT PROBLEM (OPERATIONS RESEARCH) USING PYTHON</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 PYTHON 解决指派问题(运筹学)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/assignment-problem-in-operations-research-using-python-3fa48ac2d342?source=collection_archive---------1-----------------------#2020-11-26">https://medium.com/analytics-vidhya/assignment-problem-in-operations-research-using-python-3fa48ac2d342?source=collection_archive---------1-----------------------#2020-11-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="ab fe cl ij"><img src="../Images/b1a7c96b740fbf87832da485af46ea93.png" data-original-src="https://miro.medium.com/v2/format:webp/1*eMrRPpxggONtTSbyIRf6mA.png"/></div></figure><h1 id="cc31" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">背景</h1><p id="ca3e" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">指派问题是基于以下假设的特殊类型的线性规划问题:</p><ol class=""><li id="9002" class="ki kj hi jm b jn kk jr kl jv km jz kn kd ko kh kp kq kr ks bi translated">它的目标是用一定的资源(人或机器)完成一定数量的任务，使相关的成本或时间最小化。</li><li id="892f" class="ki kj hi jm b jn kt jr ku jv kv jz kw kd kx kh kp kq kr ks bi translated">一个资源只能分配一个作业。</li></ol><p id="f41e" class="pw-post-body-paragraph jk jl hi jm b jn kk jp jq jr kl jt ju jv ky jx jy jz kz kb kc kd la kf kg kh hb bi translated">从数学上讲，这个问题是用匈牙利方法解决的，解释如下:</p><figure class="lb lc ld le fd ii er es paragraph-image"><div class="ab fe cl ij"><img src="../Images/65705781003d4ca05bdadc41709f5399.png" data-original-src="https://miro.medium.com/v2/format:webp/1*s5XyqYd8VR7vEpVITFoKuA.png"/></div></figure><p id="80d9" class="pw-post-body-paragraph jk jl hi jm b jn kk jp jq jr kl jt ju jv ky jx jy jz kz kb kc kd la kf kg kh hb bi translated">然而，为增加数量的工作和/或资源解决这个任务需要计算技术。</p><p id="6388" class="pw-post-body-paragraph jk jl hi jm b jn kk jp jq jr kl jt ju jv ky jx jy jz kz kb kc kd la kf kg kh hb bi translated">本文旨在使用 Python 的 Gurobi 包解决一个赋值问题。</p><h1 id="af43" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">问题陈述</h1><p id="c996" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">Machineco 有四台机器和四项工作要完成。每台机器必须被分配完成一项工作。下表显示了设置每台机器以完成每项工作所需的时间。Machineco 希望最大限度地减少完成四项工作所需的总准备时间。</p><figure class="lb lc ld le fd ii er es paragraph-image"><div class="ab fe cl ij"><img src="../Images/475665bc3ca3c87bcc7c808772fc14b9.png" data-original-src="https://miro.medium.com/v2/format:webp/1*7OmQsXohyn42HndsT_H8nA.png"/></div></figure><h1 id="7bb1" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">导入 GUROBI 包</h1><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="f590" class="lk in hi lg b fi ll lm l ln lo">from gurobipy import *</span></pre><h1 id="22cc" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">设置</h1><p id="d884" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">4 台机器和 4 个作业是从所提出的问题中识别出的集合。</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="3a83" class="lk in hi lg b fi ll lm l ln lo"># Defining Sets<br/>machines = ["M0","M1","M2", "M3"]<br/>jobs= ["J0", "J1", "J2", "J3"]<br/><br/>I = range(len(machines))<br/>J = range(len(jobs))</span></pre><h1 id="60e2" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">数据</h1><p id="b9c4" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">问题矩阵为我们提供了完成工作所需的每台机器的准备时间值。</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="7fe5" class="lk in hi lg b fi ll lm l ln lo">#Data<br/>Set_up_time = [<br/>    [14,5,8,7],<br/>    [2,12,6,5],<br/>    [7,8,3,9],<br/>    [2,4,6,10]<br/>]</span></pre><h1 id="20e3" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">定义模型</h1><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="51a1" class="lk in hi lg b fi ll lm l ln lo">#Model<br/>m= Model("Assignment Model")</span></pre><h1 id="9fb5" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">定义变量</h1><p id="b58a" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">xij 定义了应该将哪台机器分配给每个作业，以便:</p><figure class="lb lc ld le fd ii er es paragraph-image"><div class="ab fe cl ij"><img src="../Images/2d7dacf0d5cdfee5a5c2aa000c7459e0.png" data-original-src="https://miro.medium.com/v2/format:webp/1*h3NwRob6cNgEITtsEvzbzQ.png"/></div></figure><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="b453" class="lk in hi lg b fi ll lm l ln lo">#Defining the Variable<br/>X = {}<br/>for i in I:<br/>    for j in J:<br/>       X[i,j] = m.addVar(vtype= GRB.BINARY)</span></pre><h1 id="7f7a" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">目标函数</h1><p id="93fc" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">目标是最小化完成四个任务所需的总准备时间。</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="f5e1" class="lk in hi lg b fi ll lm l ln lo">#Objective Function<br/>m.setObjective(quicksum(Set_up_time[i][j]*X[i,j] for i in I for j in J), GRB.MINIMIZE)</span></pre><h1 id="2ded" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">限制</h1><p id="4bef" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">需要满足两个约束条件:</p><ol class=""><li id="1f39" class="ki kj hi jm b jn kk jr kl jv km jz kn kd ko kh kp kq kr ks bi translated">每台机器最多执行一个作业，方法是强制(对于每台机器)所有作业的 X(i，j)之和最多为 1。</li><li id="c6e0" class="ki kj hi jm b jn kt jr ku jv kv jz kw kd kx kh kp kq kr ks bi translated">每项工作都要通过强制所有机器的 X(i，j)之和至少为 1 来完成。</li></ol><p id="907b" class="pw-post-body-paragraph jk jl hi jm b jn kk jp jq jr kl jt ju jv ky jx jy jz kz kb kc kd la kf kg kh hb bi translated">这些可以写成:</p><figure class="lb lc ld le fd ii er es paragraph-image"><div class="ab fe cl ij"><img src="../Images/b2749f647e71cf6b29194c97d43b2031.png" data-original-src="https://miro.medium.com/v2/format:webp/1*tocjFY7w1Sk2JeAMzkrwZQ.png"/></div></figure><p id="e70d" class="pw-post-body-paragraph jk jl hi jm b jn kk jp jq jr kl jt ju jv ky jx jy jz kz kb kc kd la kf kg kh hb bi translated">计算这些约束条件如下:</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="91f3" class="lk in hi lg b fi ll lm l ln lo">#Constraint-1<br/>for i in I:<br/>     m.addConstr(quicksum(X[i,j] for j in J) &lt;= 1)</span><span id="9797" class="lk in hi lg b fi lp lm l ln lo">#Constraint-2<br/>for j in J:<br/>    m.addConstr(quicksum(X[i,j] for i in I) &gt;= 1)</span></pre><h1 id="772a" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">优化准备时间</h1><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="dc47" class="lk in hi lg b fi ll lm l ln lo">m.optimize()<br/>print("Optimized Set up Time",m.objVal, "hours")</span><span id="339d" class="lk in hi lg b fi lp lm l ln lo">Gurobi Optimizer version 9.0.1 build v9.0.1rc0 (win64)<br/>Optimize a model with 8 rows, 16 columns and 32 nonzeros<br/>Model fingerprint: 0xee439cf7<br/>Variable types: 0 continuous, 16 integer (0 binary)<br/>Coefficient statistics:<br/>  Matrix range     [1e+00, 1e+00]<br/>  Objective range  [2e+00, 1e+01]<br/>  Bounds range     [0e+00, 0e+00]<br/>  RHS range        [1e+00, 1e+00]<br/>Presolved: 8 rows, 16 columns, 32 nonzeros<br/><br/>Continuing optimization...<br/><br/><br/>Explored 0 nodes (6 simplex iterations) in 0.01 seconds<br/>Thread count was 8 (of 8 available processors)<br/><br/>Solution count 2: 15 28 <br/><br/>Optimal solution found (tolerance 1.00e-04)<br/>Best objective 1.500000000000e+01, best bound 1.500000000000e+01, gap 0.0000%<br/>Optimized Set up Time 15.0 hours</span></pre><h1 id="5fbb" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">灵敏度分析</h1><p id="cfac" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">基于初始假设和下面的输出，15 小时的最佳分配可以通过分配:</p><ol class=""><li id="4cf6" class="ki kj hi jm b jn kk jr kl jv km jz kn kd ko kh kp kq kr ks bi translated">机器 0 到作业 1</li><li id="08b5" class="ki kj hi jm b jn kt jr ku jv kv jz kw kd kx kh kp kq kr ks bi translated">机器 1 至工单 3</li><li id="a0c5" class="ki kj hi jm b jn kt jr ku jv kv jz kw kd kx kh kp kq kr ks bi translated">机器 2 至工单 2</li><li id="5f44" class="ki kj hi jm b jn kt jr ku jv kv jz kw kd kx kh kp kq kr ks bi translated">机器 3 至工单 0</li></ol><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="af65" class="lk in hi lg b fi ll lm l ln lo">for i in I:<br/>    print("-"*30)<br/>    print("Machine:",i)<br/>    print("-"*30)   <br/>    for j in J:<br/>        print("   Jobs",j,X[i,j].x)</span><span id="cefe" class="lk in hi lg b fi lp lm l ln lo">------------------------------<br/>Machine: 0<br/>------------------------------<br/>   Jobs 0 -0.0<br/>   Jobs 1 1.0<br/>   Jobs 2 -0.0<br/>   Jobs 3 -0.0<br/>------------------------------<br/>Machine: 1<br/>------------------------------<br/>   Jobs 0 0.0<br/>   Jobs 1 -0.0<br/>   Jobs 2 -0.0<br/>   Jobs 3 1.0<br/>------------------------------<br/>Machine: 2<br/>------------------------------<br/>   Jobs 0 -0.0<br/>   Jobs 1 -0.0<br/>   Jobs 2 1.0<br/>   Jobs 3 -0.0<br/>------------------------------<br/>Machine: 3<br/>------------------------------<br/>   Jobs 0 1.0<br/>   Jobs 1 0.0<br/>   Jobs 2 -0.0<br/>   Jobs 3 -0.0</span></pre><h1 id="93a3" class="im in hi bd io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj bi translated">验证结果</h1><p id="9095" class="pw-post-body-paragraph jk jl hi jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">根据上面建议的任务，机器的准备时间在下表中突出显示。</p><p id="401c" class="pw-post-body-paragraph jk jl hi jm b jn kk jp jq jr kl jt ju jv ky jx jy jz kz kb kc kd la kf kg kh hb bi translated">从表格结果来看，</p><p id="b8f4" class="pw-post-body-paragraph jk jl hi jm b jn kk jp jq jr kl jt ju jv ky jx jy jz kz kb kc kd la kf kg kh hb bi translated">最佳设置时间= 5 + 5 + 3 + 2 = 15，这是计算出的最佳设置时间值，因此确认了最佳结果</p><figure class="lb lc ld le fd ii er es paragraph-image"><div class="ab fe cl ij"><img src="../Images/22aae349ba6de8c9d805518adc287481.png" data-original-src="https://miro.medium.com/v2/format:webp/1*UVIDCPJBtR_mpFpTgfzz7g.png"/></div></figure></div></div>    
</body>
</html>