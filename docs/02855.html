<html>
<head>
<title>How (and Why) to Add a Chart to Your D3.js Tooltip</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•(ä»¥åŠä¸ºä»€ä¹ˆ)å°†å›¾è¡¨æ·»åŠ åˆ°D3.jså·¥å…·æç¤ºä¸­</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/analytics-vidhya/how-and-why-to-add-a-chart-to-your-d3-js-tooltip-6aca4ecfd79d?source=collection_archive---------10-----------------------#2020-01-05">https://medium.com/analytics-vidhya/how-and-why-to-add-a-chart-to-your-d3-js-tooltip-6aca4ecfd79d?source=collection_archive---------10-----------------------#2020-01-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9f36" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å·¥å…·æç¤ºæ˜¯å¯è§†åŒ–ä¸­æœ€è¢«ä½ä¼°çš„éƒ¨åˆ†ä¹‹ä¸€ã€‚å½“ç”¨æˆ·æœ€åˆå¯¹å¯è§†åŒ–æ„Ÿåˆ°å›°æƒ‘æ—¶ï¼Œä»–ä»¬é€šå¸¸ä¼šå°†é¼ æ ‡æ‚¬åœåœ¨æ„Ÿå…´è¶£çš„æ•°æ®ç‚¹ä¸Šä»¥è·å–æ›´å¤šä¿¡æ¯ã€‚</p><p id="82c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä¸å¹¸çš„æ˜¯ï¼Œè®¸å¤šå·¥å…·æç¤ºå¹¶æ²¡æœ‰çœŸæ­£é˜æ˜æˆ‘ä»¬çš„æ•°æ®ã€‚ä»–ä»¬ç»å¸¸é‡å¤å·²ç»å‘ˆç°çš„å†…å®¹ï¼Œè€Œæ²¡æœ‰æ¾„æ¸…æ•°æ®ä¸­ä»»ä½•ä»¤äººå›°æƒ‘çš„éƒ¨åˆ†ã€‚æœ€å¸¸è§çš„æ˜¯ï¼Œæˆ‘çœ‹åˆ°(ç”šè‡³åˆ›é€ ğŸ˜¦)æ˜¾ç¤ºæœ€åŸºæœ¬ä¿¡æ¯çš„å·¥å…·æç¤º(åœ¨åœ°å›¾ä¸­ï¼Œå·¥å…·æç¤ºä¼šæ˜¾ç¤ºå·åå’Œæ„Ÿå…´è¶£çš„å€¼)ï¼Œé™¤æ­¤ä¹‹å¤–åˆ«æ— å…¶ä»–ï¼</p><p id="c741" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å½“ç„¶ï¼Œè¿™ç§å·¥å…·æç¤ºå¹¶æ²¡æœ‰ä»€ä¹ˆé”™ã€‚ä½†æ˜¯ä»–ä»¬çœŸçš„åšäº†æœ€å°‘çš„å·¥ä½œï¼Œç»“æœï¼Œä»–ä»¬é”™è¿‡äº†å·¥å…·æç¤ºçš„å…¨éƒ¨æ½œåŠ›ã€‚<strong class="ih hj">å¦‚æœç”¨æˆ·é€šè¿‡æµè§ˆæ•°æ®æ¥ä¸»åŠ¨å¯»æ‰¾æ›´å¤šä¿¡æ¯ï¼Œæˆ‘ä»¬åº”è¯¥å°½å¯èƒ½ç”¨æœ€æœ‰å¸®åŠ©å’Œæœ€æœ‰è¶£çš„ä¿¡æ¯æ¥å¥–åŠ±ä»–ä»¬ã€‚</strong></p><p id="4b7b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘æœ€è¿‘æ›´æ–°äº†æˆ‘çš„ä¸€ä¸ªå·¥å…·æç¤ºï¼Œä»æ–‡æœ¬ä¿¡æ¯çš„é™æ€å‘ˆç°åˆ°æç»˜éšæ—¶é—´å˜åŒ–çš„æŠ˜çº¿å›¾ã€‚</p><p id="59f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘çš„<a class="ae je" href="https://connorrothschild.github.io/D3.js/map-overdoses/" rel="noopener ugc nofollow" target="_blank"> choroplethå›¾æç»˜äº†éšç€æ—¶é—´çš„æ¨ç§»ä¸é˜¿ç‰‡ç±»è¯ç‰©æœ‰å…³çš„è¿‡é‡æ­»äº¡</a>æ¥è‡ªäºæ­¤:</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jf"><img src="../Images/2002e80bd8ff0e343fe59ddb0aa7244f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*7FzKHR_zvj9Fju4VfFERsA.gif"/></div></div></figure><p id="1f70" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¯¹æ­¤:</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jr"><img src="../Images/9399ddcc151e6db88c7a1ef8bb243c76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*aSZT1tEVL8wl68bMYtPcFw.gif"/></div></div></figure><h1 id="ab92" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">æˆ‘ä¸ºä»€ä¹ˆè¦åšè¿™æ ·çš„æ”¹å˜ï¼Ÿ</h1><p id="094e" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">ä»¥å‰çš„å·¥å…·æç¤ºæä¾›çš„ä¿¡æ¯ç›¸å½“æ— è¶£ã€‚å°½ç®¡å®ƒæ¾„æ¸…äº†åœ¨ç‰¹å®šæ—¶é—´ç‰¹å®šå·çš„è¯ç‰©è¿‡é‡æ­»äº¡çš„ç¡®åˆ‡æ¯”ç‡ï¼Œä½†å®ƒæ²¡æœ‰åšå¤ªå¤šå…¶ä»–çš„äº‹æƒ…ã€‚å®ƒç¡®å®æä¾›äº†å½“å‰è§†å›¾ä¸­çš„å¹´ä»½ï¼Œä½†æ˜¯åœ¨å¯è§†åŒ–çš„å³ä¸‹è§’ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼å®ƒè¿˜æä¾›äº†å·åï¼Œä½†æˆ‘çš„å¤§å¤šæ•°è§‚ä¼—å¯èƒ½åœ¨ä¸­å­¦ä¸Šè¿‡æˆ‘ä»¬çš„åœ°ç†è¯¾ã€‚</p><p id="5621" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å› æ­¤ï¼Œè¿™ä¸ªå·¥å…·æç¤ºæ˜¯ç›¸å½“å¤šä½™çš„ã€‚æœ€å¥½çš„æƒ…å†µæ˜¯ï¼Œå®ƒæä¾›äº†<em class="jd">ç²¾ç¡®çš„</em>æ¯”ç‡ï¼Œä»¥ä¾¿æŸ¥çœ‹è€…å¯ä»¥æ¯”è¾ƒä¸¤ä¸ªçŠ¶æ€ï¼Œæˆ–è€…äº†è§£å…³äºç»™å®šçŠ¶æ€çš„æ›´å¤šä¿¡æ¯ï¼Œè€Œä¸ä»…ä»…ä¾é é¢œè‰²ç¼–ç (<a class="ae je" href="https://courses.cs.washington.edu/courses/cse442/17au/lectures/CSE442-VisualEncoding.pdf" rel="noopener ugc nofollow" target="_blank">åœ¨æ¶‰åŠåˆ°å®šé‡ç¼–ç </a>æ—¶å¯èƒ½æœ‰äº›ä¸å¯é ï¼Œå°±åƒchoroplethå›¾ä¸­çš„æƒ…å†µ)ã€‚</p><p id="9552" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ–°çš„å·¥å…·æç¤ºæ˜¾ç¤ºäº†ä¸€æ®µæ—¶é—´çš„è¶‹åŠ¿ã€‚å®ƒè¿˜æ˜¾ç¤ºäº†å·å(ä»¥é˜²ä½ åœ¨ç¾å›½åœ°ç†ä¸­è·³è¿‡äº†é‚£ä¸€å¤©ï¼)ï¼Œä»¥åŠç”¨è¯è¿‡é‡æ­»äº¡çš„æœ€æ–°æ•°æ®ã€‚å› ä¸ºè¿™å¼ åœ°å›¾æ—¨åœ¨æ˜¾ç¤ºé˜¿ç‰‡ç±»è¯ç‰©å±æœº<em class="jd">æ˜¯å¦‚ä½•æ¼”å˜çš„</em>ï¼Œåœ¨æˆ‘çš„å·¥å…·æç¤ºä¸­æ˜¾ç¤ºæ¯ä¸ªå·çš„æŠ˜çº¿å›¾å…è®¸ç”¨æˆ·åœ¨æ‚¬åœæ—¶æ¢ç´¢æ¯ä¸ªå·çš„è¶‹åŠ¿ï¼è¿™æ¯”æ¯å¹´åœ¨æ¯ä¸ªå·å¾˜å¾Šå¹¶è¯•å›¾è·Ÿè¸ªè¶‹åŠ¿è¦å®¹æ˜“å¾—å¤šã€‚</p><p id="1403" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä¾‹å¦‚ï¼Œåœ¨è¥¿å¼—å‰å°¼äºšå·å¾˜å¾Šï¼Œè¯¥å·åœ¨2017å¹´ä¼¼ä¹æœ‰æœ€é«˜çš„é˜¿ç‰‡ç±»è¯ç‰©è¿‡é‡æ­»äº¡ç‡(å¦‚å…¶æœ€æš—çš„çº¢è‰²é˜´å½±æ‰€ç¤º)ï¼Œè¡¨æ˜å…¶ä¹Ÿç»å†äº†è‡ª1999å¹´ä»¥æ¥è¯¥æ¯”ç‡çš„æœ€å¤§é•¿æœŸå¢é•¿ä¹‹ä¸€:</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es kv"><img src="../Images/93e14d0317f6fbaf28f98bf3bbb1f806.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*joxEt06QD1fi3d3A-7Xdqg.jpeg"/></div></div></figure><h1 id="393d" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">é‚£ä¹ˆï¼Œä½ æ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿ</h1><p id="0b21" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">å¾ˆæ£’çš„é—®é¢˜ï¼è°¢å¤©è°¢åœ°ï¼Œè¿™å¹¶ä¸éš¾ï¼Œä½†å›æŠ¥æ˜¯å·¨å¤§çš„ã€‚ç”±äºå‡ ä¸ª<a class="ae je" href="https://stackoverflow.com/questions/43904643/add-chart-to-tooltip-in-d3" rel="noopener ugc nofollow" target="_blank">å †æ ˆæº¢å‡ºç­”æ¡ˆ</a>å’Œ<a class="ae je" href="https://bl.ocks.org/maelafifi/ee7fecf90bb5060d5f9a7551271f4397" rel="noopener ugc nofollow" target="_blank">åœ¨çº¿ç¤ºä¾‹</a>ï¼Œä»æˆ‘çš„æ—§çš„ã€æ— èŠçš„å·¥å…·æç¤ºåˆ°æˆ‘çš„æ–°çš„ã€æ€§æ„Ÿçš„å·¥å…·æç¤ºåªèŠ±äº†å‡ ä¸ªå°æ—¶ã€‚</p><h1 id="1c57" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">ç¬¬ä¸€æ­¥:åŠ è½½<code class="du kw kx ky kz b">d3-tip</code></h1><p id="3aca" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">è¿™ä¸ªè¿‡ç¨‹ä¸»è¦ä¾é <code class="du kw kx ky kz b">d3-tip</code>ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œäº†è§£æ›´å¤šå…³äº<a class="ae je" href="http://labratrevenge.com/d3-tip/" rel="noopener ugc nofollow" target="_blank">çš„ä¿¡æ¯ã€‚</a></p><p id="04d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä½ å¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç åŠ è½½<code class="du kw kx ky kz b">d3-tip</code>:</p><pre class="jg jh ji jj fd la kz lb lc aw ld bi"><span id="7fe5" class="le jt hi kz b fi lf lg l lh li">&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.7.1/d3-tip.min.js"&gt;&lt;/script&gt;</span></pre><h1 id="20c6" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">æ­¥éª¤2:åˆ›å»ºå·¥å…·æç¤ºå¯¹è±¡</h1><p id="bba9" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">æ¥ä¸‹æ¥ï¼Œåˆå§‹åŒ–å·¥å…·æç¤ºï¼Œç»™å®ƒä¸€ä¸ªç±»(ç”¨äºCSSæ ·å¼)ï¼Œå¹¶æä¾›æŒ‡å®šçš„<code class="du kw kx ky kz b">offset</code>ã€‚åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œæˆ‘æ ¹æ®<a class="ae je" href="https://stackoverflow.com/questions/28536367/in-d3-js-how-to-adjust-tooltip-up-and-down-based-on-the-screen-position" rel="noopener ugc nofollow" target="_blank">ç”¨æˆ·çš„é¼ æ ‡ä½ç½®</a>æ¥å®šä¹‰æˆ‘çš„åç§»é‡ã€‚è¿™æ ·ï¼Œå¦‚æœç”¨æˆ·æ‚¬åœåœ¨ä¸€ä¸ªä¸œéƒ¨å·ï¼Œå·¥å…·æç¤ºä¸ä¼šä»å±å¹•ä¸Šæ¶ˆå¤±ï¼</p><pre class="jg jh ji jj fd la kz lb lc aw ld bi"><span id="28de" class="le jt hi kz b fi lf lg l lh li">// define the tooltip <br/>var tool_tip = d3.tip()<br/>  .attr("class", "d3-tip")<br/>  // if the mouse position is greater than 650 (~ Kentucky/Missouri), offset tooltip to the left instead of the right<br/>  .offset(function() {if(current_position[0] &gt; 650) {<br/>  	return [-20,-120] } <br/>  	else { return [20,120]}<br/>  })<br/>  // input the title, and include the div<br/>  .html(<br/>  	"&lt;p&gt;Opioid-involved deaths over time in&lt;/p&gt;&lt;div id='tipDiv'&gt;&lt;/div&gt;"<br/>  );<br/><br/>svg.call(tool_tip);</span></pre><p id="9f40" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¿™é‡Œæœ€é‡è¦çš„éƒ¨åˆ†æ˜¯</p><pre class="jg jh ji jj fd la kz lb lc aw ld bi"><span id="8c3a" class="le jt hi kz b fi lf lg l lh li">.html(<br/>     "&lt;p&gt;Opioid-involved deaths over time in&lt;/p&gt;&lt;div id='tipDiv'&gt;&lt;/div&gt;"<br/>);</span></pre><p id="035a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">åœ¨è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†åˆ›å»ºå·¥å…·æç¤ºæœ¬èº«çš„htmlã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ ‡é¢˜â€œä¸é˜¿ç‰‡ç±»è¯ç‰©ç›¸å…³çš„æ­»äº¡â€ï¼Œå¹¶æŒ‡å®šå·¥å…·æç¤ºåº”è¯¥åŒ…å«çš„divã€‚</p><h1 id="6d33" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">æ­¥éª¤3:åˆ›å»º<code class="du kw kx ky kz b">tipDiv</code>å¯¹è±¡</h1><p id="22c5" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">æœ€åï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸Šé¢ä»£ç ä¸­å¼•ç”¨çš„<code class="du kw kx ky kz b">tipDiv</code>å¯¹è±¡ã€‚è¯¥å¯¹è±¡å°†åœ¨é¼ æ ‡ç»è¿‡æ„Ÿå…´è¶£çš„ç»„(åœ¨æˆ‘çš„ä¾‹å­ä¸­æ˜¯states)æ—¶åˆ›å»ºã€‚å› æ­¤ï¼Œä»£ç å°†å¦‚ä¸‹æ‰€ç¤º:</p><pre class="jg jh ji jj fd la kz lb lc aw ld bi"><span id="b6be" class="le jt hi kz b fi lf lg l lh li">states = svg.append("g")<br/>  .attr("class", "states")<br/>  .selectAll("path")<br/>  .data(topojson.feature(us, us.objects.states).features)<br/>  .enter()<br/>  .append("path")<br/>  .attr("d", path)<br/>  .on('mouseover', function(d) {<br/><br/>// define and store the mouse position. this is used to define tooltip offset, seen above.<br/>current_position = d3.mouse(this); 				<br/><br/>// define current state<br/>current_state = nameById[d.id]<br/>	<br/>// show the tooltip<br/>tool_tip.show();</span></pre><p id="45e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">åœ¨åˆå§‹åŒ–å’Œ<code class="du kw kx ky kz b">show</code>å‡½æ•°ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰<code class="du kw kx ky kz b">tipDiv</code>å¯¹è±¡:</p><pre class="jg jh ji jj fd la kz lb lc aw ld bi"><span id="afd4" class="le jt hi kz b fi lf lg l lh li">var tipSVG = d3.select("#tipDiv")<br/>     .append("svg")<br/>     .attr("width", 220)<br/>     .attr("height", 55);<br/><br/>tipSVG.append("path")<br/>     .datum(overdoses.filter(function(d) {return nameById[d.id] == current_state}))<br/>     .style("stroke", function() {<br/>     	if (rateById[d.id] &lt; 10) {<br/>     		return "grey"<br/>     	} else {<br/>     	return color(rateById[d.id])<br/>     	}<br/> 	  })<br/>     .style("stroke-width", 1.5)<br/>     .style("fill", "none")<br/>     .attr("d", line)<br/>     <br/>tipSVG.append("circle")<br/>     .attr("fill", function() {<br/>     	if (rateById[d.id] &lt; 10) {<br/>     		return "grey"<br/>     	} else {<br/>     	return color(rateById[d.id])<br/>     	}<br/> 	  })<br/>    .attr("stroke", "black")<br/>    .attr("cx", 130)<br/>    .attr("cy", y_tooltip(rateById[d.id]))<br/>    .attr("r", 3)<br/><br/>tipSVG.append("text")<br/>     .text(rateById[d.id] + " deaths")<br/>     .attr("x", 140)<br/>     .attr("y", function() {<br/>     	if (y_tooltip(rateById[d.id]) &lt; 15) { return 10 }<br/>     		else { return y_tooltip(rateById[d.id]) - 7 }<br/>     	})<br/><br/>tipSVG.append("text")<br/>     .text("per 100,000")<br/>     .attr("x", 140)<br/>     .attr("y", function() {<br/>     	if (y_tooltip(rateById[d.id]) &lt; 15) { return 24 }<br/>     		else { return y_tooltip(rateById[d.id]) + 7 }<br/>     	})<br/>	<br/>tipSVG.append("text")<br/>     .text(current_state)<br/>     .attr("x", 0)<br/>     .attr("y", 15)<br/>     .style("font-size", 18)<br/>     .style("font-weight", 400)<br/> })<br/>.on('mouseout', tool_tip.hide)</span></pre><p id="846b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆäº‹ï¼Ÿè®©æˆ‘ä»¬ä¸€æ¬¡çœ‹ä¸€å—ã€‚</p><p id="1c83" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">é¦–å…ˆ</strong>ï¼Œæˆ‘ä»¬å®šä¹‰å¯¹è±¡ï¼Œå‘½åä¸º<code class="du kw kx ky kz b">tipSVG</code>ã€‚<code class="du kw kx ky kz b">tipSVG</code>é€‰æ‹©<code class="du kw kx ky kz b">#tipDiv</code>(åœ¨æˆ‘ä»¬çš„d3-tipä¸­å®šä¹‰)å¹¶é™„åŠ ä¸€ä¸ªSVGã€‚æˆ‘ä»¬è¿˜å®šä¹‰äº†å·¥å…·æç¤ºçš„å®½åº¦å’Œé«˜åº¦ã€‚</p><pre class="jg jh ji jj fd la kz lb lc aw ld bi"><span id="09e5" class="le jt hi kz b fi lf lg l lh li">var tipSVG = d3.select("#tipDiv")<br/>	      .append("svg")<br/>	      .attr("width", 220)<br/>	      .attr("height", 55);</span></pre><p id="c6d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">æ¥ä¸‹æ¥</strong>ï¼Œæˆ‘ä»¬å‘SVGæ·»åŠ ä¸€ä¸ªè·¯å¾„ã€‚è¿™å¯ä»¥æ˜¯åœ†å½¢ã€çŸ©å½¢æˆ–ä»»ä½•å…¶ä»–å¯é™„åŠ çš„å½¢çŠ¶ã€‚å› ä¸ºæˆ‘åœ¨ç”»ä¸€æ¡ç®€å•çš„çº¿ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨<code class="du kw kx ky kz b">path</code>ã€‚</p><pre class="jg jh ji jj fd la kz lb lc aw ld bi"><span id="afe1" class="le jt hi kz b fi lf lg l lh li">tipSVG.append("path")<br/>  .datum(overdoses.filter(function(d) {return nameById[d.id] == current_state}))<br/>  .style("stroke", function() {<br/>  	if (rateById[d.id] &lt; 10) {<br/>  		return "grey"<br/>  	} else {<br/>  	return color(rateById[d.id])<br/>  	}<br/>	  })<br/>  .style("stroke-width", 1.5)<br/>  .style("fill", "none")<br/>  .attr("d", line)</span></pre><p id="58b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">åœ¨å®šä¹‰<code class="du kw kx ky kz b">d</code>å±æ€§æ—¶ï¼Œæ‚¨ä¼šçœ‹åˆ°æˆ‘ä½¿ç”¨äº†çŸ­è¯­<code class="du kw kx ky kz b">line</code>ã€‚è¿™åœ¨æˆ‘çš„ä»£ç ä¸­å®šä¹‰ä¸ºè¿”å›æ¯ä¸ªæ•°æ®ç‚¹çš„xå’Œyä½ç½®ï¼Œä»¥åˆ›å»ºè·¯å¾„æœ¬èº«ã€‚</p><pre class="jg jh ji jj fd la kz lb lc aw ld bi"><span id="6837" class="le jt hi kz b fi lf lg l lh li">var x_tooltip = d3.scaleLinear()<br/>  .domain(d3.extent(overdoses, function(d) { return d.year; }))<br/>  .range([ 0, 130 ]);<br/><br/>var y_tooltip = d3.scaleLinear()<br/>  .domain([0, 60])<br/>  .range([ 50, 0 ]);<br/><br/>var line = d3.line()<br/>  .x(function(d) {<br/>    return x_tooltip(d.year);<br/>  })<br/>  .y(function(d) {<br/>    return y_tooltip(+d.rate);<br/>  })</span></pre><p id="6f3e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">æœ€å</strong>ï¼Œæˆ‘ä»¬åœ¨çº¿çš„æœ«ç«¯æ·»åŠ ä¸€ä¸ªåœ†åœˆæ¥è¡¨ç¤ºæœ€ç»ˆçš„æ•°æ®ç‚¹ã€‚æˆ‘ä»¬è¿˜æ·»åŠ äº†2017å¹´çš„æ–‡æœ¬æ ‡ç­¾ã€‚</p><pre class="jg jh ji jj fd la kz lb lc aw ld bi"><span id="c944" class="le jt hi kz b fi lf lg l lh li">tipSVG.append("circle")<br/>  .attr("fill", function() {<br/>  	if (rateById[d.id] &lt; 10) {<br/>  		return "grey"<br/>  	} else {<br/>  	return color(rateById[d.id])<br/>  	}<br/>	  })<br/>   .attr("stroke", "black")<br/>  .attr("cx", 130)<br/>  .attr("cy", y_tooltip(rateById[d.id]))<br/>  .attr("r", 3)<br/><br/>tipSVG.append("text")<br/>  .text(rateById[d.id] + " deaths")<br/>  .attr("x", 140)<br/>  .attr("y", function() {<br/>  	if (y_tooltip(rateById[d.id]) &lt; 15) { return 10 }<br/>  		else { return y_tooltip(rateById[d.id]) - 7 }<br/>  	})<br/><br/>tipSVG.append("text")<br/>  .text("per 100,000")<br/>  .attr("x", 140)<br/>  .attr("y", function() {<br/>  	if (y_tooltip(rateById[d.id]) &lt; 15) { return 24 }<br/>  		else { return y_tooltip(rateById[d.id]) + 7 }<br/>  	})<br/><br/>tipSVG.append("text")<br/>  .text(current_state)<br/>  .attr("x", 0)<br/>  .attr("y", 15)<br/>  .style("font-size", 18)<br/>  .style("font-weight", 400)<br/> })</span></pre><p id="a301" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æœ€åï¼Œæˆ‘ä»¬éšè—mouseoutä¸Šçš„å·¥å…·æç¤º:</p><pre class="jg jh ji jj fd la kz lb lc aw ld bi"><span id="f446" class="le jt hi kz b fi lf lg l lh li">.on('mouseout', tool_tip.hide)</span></pre><p id="ba66" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ„Ÿè°¢é˜…è¯»æˆ‘çš„(ç¬¬ä¸€ï¼Ÿ)ä¸­å¸–ï¼ä½ å¯ä»¥åœ¨è¿™é‡Œ<a class="ae je" href="https://connorrothschild.github.io/D3.js/map-overdoses/" rel="noopener ugc nofollow" target="_blank">äº²è‡ªä½“éªŒå¯è§†åŒ–å’ŒæŸ¥çœ‹å·¥å…·æç¤ºã€‚</a></p></div><div class="ab cl lj lk gp ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="hb hc hd he hf"><p id="ddf9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">åŸè½½</em> <a class="ae je" href="https://connorrothschild.github.io/d3js/how-to-add-a-chart-d3-tooltip" rel="noopener ugc nofollow" target="_blank"> <em class="jd">æˆ‘çš„ç½‘ç«™ã€‚</em>T11ã€‘</a></p></div></div>    
</body>
</html>