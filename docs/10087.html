<html>
<head>
<title>Dependency Injection in Javascript with no Libraries</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">没有库的 Javascript 中的依赖注入</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/dependency-injection-in-javascript-with-no-libraries-8ad1aba74fbd?source=collection_archive---------11-----------------------#2020-10-04">https://medium.com/analytics-vidhya/dependency-injection-in-javascript-with-no-libraries-8ad1aba74fbd?source=collection_archive---------11-----------------------#2020-10-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="adc6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">嘿，这是更多故事的第二个。</p><p id="21b7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">依赖注入就是这些概念中的一个，(就像位运算一样)，它被大多数开发人员忽略了。“它给代码库带来了很多复杂性”是你从一个显然不理解 DI 的开发人员那里得到的著名回答之一。</p><h2 id="c31b" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">什么是依赖注入？</h2><p id="df48" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">首先，软件工程中的依赖是一个函数或过程需要的对象、实例或任何数据结构。下面展示了一个例子。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kd"><img src="../Images/66087a27be57ca1000cb5368b98be8ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AUz-INcWFEwLjnXUScWeRQ.png"/></div></div></figure><p id="c743" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">织物是布料对象中的一个依赖项。Fabric 对象是在 Cloth 对象内部创建的，它不允许我们在 Cloth 类之外测试甚至使用 Fabric 对象。这个限制由一个概念进一步解决，<strong class="ih hj">控制反转</strong>——依赖注入背后的概念。控制反转建议将依赖项作为参数传递给依赖项，从而将它们注入到依赖项中。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kd"><img src="../Images/ca5d75eb11c62e90e9ed6269950a123e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hsxb6bIzOnK6qCYUlM_EDg.png"/></div></div></figure><p id="b2b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此<strong class="ih hj">依赖注入</strong>是一种技术，其中一个<a class="ae kp" href="https://en.wikipedia.org/wiki/Object_(computer_science)" rel="noopener ugc nofollow" target="_blank">对象</a>接收它所依赖的其他对象。</p><p id="b18e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢您的阅读，下次见。</p></div><div class="ab cl kq kr gp ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="hb hc hd he hf"><p id="c6d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">欢迎回来！</p><p id="4bf0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">依赖注入不仅仅是将参数传递给依赖者。是的，这解释了为什么大多数人不利用它。为了进一步演示，我们将构建一个迷你应用程序来验证用户，并让用户添加和显示笑话。</p><figure class="ke kf kg kh fd ki"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="fb30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们从编写注射器开始。这个注射器是一个容器，它保存着我们的依赖，当被要求时，它会很快吐出来。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kd"><img src="../Images/16e000f560ceb54f5167273d12b10729.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8mgM-AsM6OivpBhdVhrAFw.png"/></div></div></figure><p id="3738" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">是啊。就是这样。</p><p id="8dbd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们为我们的应用程序创建依赖项(服务)。我们将把这些添加到依赖容器中。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kz"><img src="../Images/43a10fabb0b6b02b665bff591610b058.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bVQVpHKrVUMqs3fZtNsWIg.png"/></div></div></figure><p id="5665" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后是笑话服务。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es la"><img src="../Images/209f1e10b20d2e2d2320aceaa3e84956.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1R4T5ZtRbJzERdGKCYcMvQ.png"/></div></div></figure><p id="0d68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们在注射器中注册这些服务。我们在 secretary.js 文件中这样做。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es la"><img src="../Images/cde492430457840e4517234eca2a2174.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SiYy5brONiw0dXDFsoD2CQ.png"/></div></div></figure><p id="3921" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">是时候了！让我们在视图模型中使用这些。视图模型承载着应用程序级的业务逻辑。首先，我们为视图模型编写一个基类来获取这些依赖关系。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es lb"><img src="../Images/7b51e59b4d6591d34671ca0e2996f5ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZD6gPLBINoYp8F2HHL2S5A.png"/></div></div></figure><p id="85a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，是时候利用这些依赖性了。让我们写一个用于认证的视图模型，然后再写一个用于笑话的视图模型。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es lc"><img src="../Images/77ed7dc6f7829d9e9a5ad2f7e6676420.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RCYwjqnvkgryU9G1o1WZOQ.png"/></div></div></figure><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es ld"><img src="../Images/14f1aa0e02e1fc8b41ec79a03a67729f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YmMAsV-zCtNFB6KiJh8Gtw.png"/></div></div></figure><p id="2517" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">视图模型扩展了 BaseViewModel 类，因此可以访问依赖项。</p><p id="0487" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">著名的 index.js 时间到了</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es ld"><img src="../Images/239697f2468d1d1aa25eae42a87d329f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ExGNj9thpi0fRlCHAgNyGA.png"/></div></div></figure><p id="f7ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行 index.js</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es le"><img src="../Images/b686d846ddaad6742d77dcf6e6891474.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ix8br1RR-cM3GPCe9qAIEw.png"/></div></div></figure><p id="8d10" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种实现消除了在依赖关系中创建依赖关系的想法，最重要的是帮助我们避免传递依赖关系，从而破坏我们的依赖关系图。</p><p id="9906" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你觉得这篇文章有什么启发吗？留下几个掌声。多次鼓掌。</p><p id="db57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在 https://github.com/nuelsoft/js-di.git<a class="ae kp" href="https://github.com/nuelsoft/js-di.git" rel="noopener ugc nofollow" target="_blank">找到整个代码库</a></p></div></div>    
</body>
</html>