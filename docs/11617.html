<html>
<head>
<title>Adding a Border to the Image using NumPy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 NumPy 为图像添加边框</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/adding-a-border-to-the-image-using-numpy-efa23f7f1cdf?source=collection_archive---------2-----------------------#2020-12-11">https://medium.com/analytics-vidhya/adding-a-border-to-the-image-using-numpy-efa23f7f1cdf?source=collection_archive---------2-----------------------#2020-12-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/9bb9f7ec9c79ab3d57bcd68db667090f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Z2_JssnCY9QR5mC9"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">卡南·哈斯马多夫在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="a5af" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这篇文章中，我们将学习如何给图片添加/绘制边框。我们使用 OpenCV 来读取图像。剩下的部分由 NumPy 处理，从头开始编码。我们依靠它来进行矩阵运算，这些运算可以轻而易举地实现。</p><p id="d1e4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可以从两个方面开始思考:</p><ul class=""><li id="c2cf" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">如果图像以<strong class="ix hj">灰度</strong>读取，我们可以简单地保持默认颜色为<strong class="ix hj">黑色</strong>。这是因为图像矩阵形状的长度是 2。因此，我们不能添加一个颜色值为 3 的颜色边框，因此它不容易被映射。</li><li id="b9d2" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">如果以<strong class="ix hj"> RGB </strong>读取图像，我们可以选择边框的颜色。这是因为图像矩阵形状的长度将是 3。因此，我们可以添加一个颜色值大小为 3 的颜色边框，这很容易映射。</li></ul><p id="6f7e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在继续之前，我们需要确保我们有足够的颜色(基于用户的选择)。我从<a class="ae iu" href="https://www.colorhexa.com/color-names" rel="noopener ugc nofollow" target="_blank">这个网站</a>中提取了可能的颜色值。</p><p id="f1fe" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">相同的代码可以在下面看到。结果存储在名为<strong class="ix hj"><em class="kh">color _ names _ data . JSON</em></strong>的 JSON 文件中。</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="ced0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了像素分离后的映射，需要抓取 R、G 和 B 值。我们使用 NumPy 遵循<strong class="ix hj"> split </strong>和<strong class="ix hj"> merge </strong>方法。</p><p id="f1cd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">颜色数据的结构如下所示。</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><h1 id="4684" class="ko kp hi bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">编码时间到了</h1><p id="ef98" class="pw-post-body-paragraph iv iw hi ix b iy lm ja jb jc ln je jf jg lo ji jj jk lp jm jn jo lq jq jr js hb bi translated">我们主要使用的软件包有:</p><ul class=""><li id="4da0" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">NumPy</li><li id="a2c5" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">Matplotlib</li><li id="59b3" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">OpenCV</li></ul><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/18305c130ac5255d7e7a39a385ec518d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Nm7Ec_i9OjDnCPM59Nkdg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><h2 id="0fe5" class="ls kp hi bd kq lt lu lv ku lw lx ly ky jg lz ma lc jk mb mc lg jo md me lk mf bi translated">导入包</h2><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><h2 id="c85e" class="ls kp hi bd kq lt lu lv ku lw lx ly ky jg lz ma lc jk mb mc lg jo md me lk mf bi translated">阅读图像</h2><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="6fa6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">上述函数读取灰度或 RGB 图像，并返回图像矩阵。</p><h2 id="0a23" class="ls kp hi bd kq lt lu lv ku lw lx ly ky jg lz ma lc jk mb mc lg jo md me lk mf bi translated">用库实现代码</h2><p id="1240" class="pw-post-body-paragraph iv iw hi ix b iy lm ja jb jc ln je jf jg lo ji jj jk lp jm jn jo lq jq jr js hb bi translated">对于在图像周围添加/绘制边框，重要的参数可以命名如下:</p><ul class=""><li id="12a0" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><strong class="ix hj">图像文件</strong> →图像文件位置或图像名称，如果图像存储在同一目录中。</li><li id="8308" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated"><strong class="ix hj"> bt </strong> →边框粗细</li><li id="654a" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated"><strong class="ix hj">颜色名称</strong> →默认取 0(黑色)。否则，任何颜色名称都可以。</li></ul><p id="66c2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们使用 OpenCV 库中可用的方法<strong class="ix hj"><em class="kh">copyMakeBorder()</em></strong>来创建一个指定厚度的新加边图像。在代码中，我们确保将颜色名称转换为我们之前收集的颜色数据的值。</p><p id="fed7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面的函数对 RGB 图像和灰度图像都有效。</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="9834" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们测试一下上面的函数—</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es mg"><img src="../Images/9dc2ac1a4d5ef7b8e662547b3ab4d559.png" data-original-src="https://miro.medium.com/v2/resize:fit:1144/format:webp/1*B-n5n4BWOJlUzN-xJxwQxw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es mg"><img src="../Images/832403f0eaf88e5c63620abc6e380779.png" data-original-src="https://miro.medium.com/v2/resize:fit:1144/format:webp/1*hThR8RrgfAiKZ6X1Gq5AgA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><p id="03a0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可以清楚地看到边界被添加/绘制。对于灰度图像，虽然我们提到了粉红色，但还是画了黑色边框。</p><h2 id="311f" class="ls kp hi bd kq lt lu lv ku lw lx ly ky jg lz ma lc jk mb mc lg jo md me lk mf bi translated">从头开始代码实现</h2><p id="2158" class="pw-post-body-paragraph iv iw hi ix b iy lm ja jb jc ln je jf jg lo ji jj jk lp jm jn jo lq jq jr js hb bi translated">当我们谈到边界时，它基本上是整个图像周围一种颜色的恒定像素值。重要的是要注意到边界的厚度，以便能够看到。考虑到厚度，我们应该在图像周围添加一个与厚度水平相匹配的常量值。</p><p id="90a9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了这样做，我们可以使用库 NumPy 中可用的<a class="ae iu" href="https://numpy.org/doc/stable/reference/generated/numpy.pad.html" rel="noopener ugc nofollow" target="_blank"><strong class="ix hj"><em class="kh">【pad()】</em></strong></a>方法。该方法附加一个常量值，该常量值与提到的<strong class="ix hj"> <em class="kh"> pad_width </em> </strong>参数的级别相匹配。</p><p id="a8c9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">示例</strong></p><pre class="ki kj kk kl fd mh mi mj mk aw ml bi"><span id="bbe6" class="ls kp hi mi b fi mm mn l mo mp">&gt;&gt;&gt; import numpy as np<br/>&gt;&gt;&gt; m = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]<br/>&gt;&gt;&gt; m = np.array(m)<br/>&gt;&gt;&gt; m<br/>array([[1, 2, 3],<br/>       [4, 5, 6],<br/>       [7, 8, 9]])<br/>&gt;&gt;&gt;<br/>&gt;&gt;&gt; pm = np.pad(array=m, pad_width=1, mode='constant', constant_values=12)<br/>&gt;&gt;&gt; pm<br/>array([[12, 12, 12, 12, 12],<br/>       [12,  1,  2,  3, 12],<br/>       [12,  4,  5,  6, 12],<br/>       [12,  7,  8,  9, 12],<br/>       [12, 12, 12, 12, 12]])<br/>&gt;&gt;&gt;<br/>&gt;&gt;&gt; pmm = np.pad(array=m, pad_width=2, mode='constant', constant_values=24)<br/>&gt;&gt;&gt; pmm<br/>array([[24, 24, 24, 24, 24, 24, 24],<br/>       [24, 24, 24, 24, 24, 24, 24],<br/>       [24, 24,  1,  2,  3, 24, 24],<br/>       [24, 24,  4,  5,  6, 24, 24],<br/>       [24, 24,  7,  8,  9, 24, 24],<br/>       [24, 24, 24, 24, 24, 24, 24],<br/>       [24, 24, 24, 24, 24, 24, 24]])<br/>&gt;&gt;&gt;</span></pre><p id="a215" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以在<a class="ae iu" href="https://numpy.org/doc/stable/reference/generated/numpy.pad.html" rel="noopener ugc nofollow" target="_blank">文档</a>中找到更多示例。</p><p id="6cb1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们只需要通过取实际的颜色值来改变<strong class="ix hj"><em class="kh">constant _ values</em></strong>参数。</p><ul class=""><li id="f408" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">对于灰度图像，我们简单地用黑色填充图像矩阵，即 0。</li><li id="5d0a" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">对于 RGB 图像，我们从收集的数据中获取颜色值，将图像分成 3 个矩阵，并用每个颜色值填充每个矩阵。</li></ul><p id="ec06" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面的函数将更清楚地解释这个流程。</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="e3f8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们测试一下上面的函数—</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es mg"><img src="../Images/d6f8252c1ecfae51df69a752e76c2cd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1144/format:webp/1*OBiZSzB_9BEJkDW59XK4bg.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es mg"><img src="../Images/60d1d251fcf6029a9001f73d7a59c233.png" data-original-src="https://miro.medium.com/v2/resize:fit:1144/format:webp/1*tTZcywbnch2CX_jydvxHZg.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><p id="9bc8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">耶！我们做到了。除了读取图像文件的部分，我们从头开始对包括颜色选择在内的全部内容进行了编码。我们主要依赖 NumPy，因为它在计算矩阵运算时非常快(如果我们希望代码执行得非常慢，我们可以用<strong class="ix hj"> for loops </strong>来完成)。</p><p id="226f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">就我个人而言，这对我是很好的学习。我开始思考，对于真正从事开源库工作的人来说，这将是多么的困难和有趣。</p><p id="7fbb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你一定要看看我在个人资料中关于同一主题的其他文章。</p></div><div class="ab cl mq mr gp ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="hb hc hd he hf"><p id="9b69" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你喜欢，你可以在这里的给我买咖啡。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><a href="https://www.buymeacoffee.com/msameeruddin"><div class="er es mx"><img src="../Images/6d60b235fcc46a4bd696b90e886419ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:340/format:webp/1*Dpw8-hNGI2fDmosV4E8DVQ.png"/></div></a></figure></div></div>    
</body>
</html>