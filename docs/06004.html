<html>
<head>
<title>Exploring WhatsApp Group Chat using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python探索WhatsApp群聊</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/whatsapp-group-chat-analysis-using-python-91d1f49178cb?source=collection_archive---------10-----------------------#2020-05-08">https://medium.com/analytics-vidhya/whatsapp-group-chat-analysis-using-python-91d1f49178cb?source=collection_archive---------10-----------------------#2020-05-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="8960" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">难怪社交媒体每天都会产生大量信息。Whatsapp已经成为最受欢迎的消息平台之一，每天有650亿条消息被分享。全球超过10亿人、印度近4亿人每天都在使用WhatsApp。每条信息都是以文本形式生成的，在WhatsApp中分析文本信息是一项复杂的任务，因为它涉及众多因素和限制。</p><p id="86e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据科学家使用通常称为文本挖掘的过程来分析文本，该过程将原始或非结构化数据转换为一些有意义的信息，这些信息可以为业务带来洞察力，并从中做出更好的决策。</p><p id="a6eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们就来看看如何分析这篇文章中的Whatsapp群聊。这个又酷又有趣的项目可以帮助我们学习很多有趣的东西，分析很多有趣的事实，比如:</p><blockquote class="jd je jf"><p id="2609" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated">-每个人发送的消息数量</p><p id="bb53" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated">-谁发送的媒体文件和表情符号最多😂</p><p id="44e9" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated">-一天中的哪个时间🕒用户更加活跃</p><p id="4a67" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated">-常用词</p><p id="0247" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated">哪个月生成的消息数量最多，等等。</p></blockquote><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es jk"><img src="../Images/d935e68d615b06c6e54d71ff97cc166c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YD-U6Fj9EWzqPg4Oevf7Bg.jpeg"/></div></div></figure><p id="d4fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要提取群聊内容，请遵循以下步骤</p><p id="618a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.转到您的WhatsApp群，点击选项-更多</p><p id="f903" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.导出聊天内容—无媒体—通过电子邮件发送</p><p id="c711" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将生成一个文本文件。</p><blockquote class="jw"><p id="490e" class="jx jy hi bd jz ka kb kc kd ke kf jc dx translated">Y <strong class="ak"> ou可以在本</strong> <a class="ae kg" href="https://github.com/srivatsansabarish/Projects/blob/master/Whatsapp%20Chat%20Analyser/Whatsapp%20Chat%20Analyser.ipynb" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">笔记本</strong> </a>中获得完整的代码概览</p></blockquote><h1 id="93f1" class="kh ki hi bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated"><strong class="ak">数据准备部分</strong></h1><p id="b482" class="pw-post-body-paragraph if ig hi ih b ii lf ik il im lg io ip iq lh is it iu li iw ix iy lj ja jb jc hb bi translated"><strong class="ih hj">安装必要的库</strong></p><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="26f7" class="lp ki hi ll b fi lq lr l ls lt">import numpy as np<br/>import pandas as pd<br/>import re<br/>import seaborn as sns<br/>import matplotlib.pyplot as plt</span><span id="b22d" class="lp ki hi ll b fi lu lr l ls lt">from wordcloud import WordCloud, STOPWORDS</span></pre><p id="6edb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Python 3总是将文本字符串存储为Unicode <em class="jg">代码点</em>的序列。要将这些文本存储为二进制数据，您必须为该文本指定一个<em class="jg">编码</em>。有许多可用的编码，“utf-8”正成为许多应用程序的首选编码。</p><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="a328" class="lp ki hi ll b fi lq lr l ls lt">file = open(‘WhatsApp Chat 3.0.txt’,mode=’r’)<br/>watsup_content = file.read()<br/>file.close()<br/>watsup_content</span></pre><p id="ae28" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du lv lw lx ll b">mode="r”</code>:以只读模式打开文件。它从文件的开头开始读取，并且是<code class="du lv lw lx ll b">open()</code>功能的默认模式。</p><p id="7114" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在文本文件中出现的每个句子的末尾。我们需要使用split函数拆分数据，并将其存储到一个变量中。</p><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="2ee1" class="lp ki hi ll b fi lq lr l ls lt">contents=watsup_content.split(“\n”)</span></pre><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es ly"><img src="../Images/38dcaae8b86f19e8f4f2202d2872f506.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sOIDI9jlFMvZ3G3i8P-Ebw.jpeg"/></div></div></figure><p id="8add" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里每个聊天都是分开的。现在，我们需要使用各种模式搜索字符串，为了做到这一点，我们可以使用正则表达式找到模式，并将其存储到数据帧中(或)将内容存储到数据帧中，并执行提取部分。</p><p id="646f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，我们将内容存储到数据框中:</p><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="80a6" class="lp ki hi ll b fi lq lr l ls lt">df=pd.DataFrame({“data”:contents})</span></pre><p id="7fe8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦创建了数据框架，我们就为数据争论部分做好了准备。</p><blockquote class="jd je jf"><p id="f4fd" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><strong class="ih hj">从数据列中提取组名</strong></p></blockquote><h1 id="7b78" class="kh ki hi bd kj kk kl km kn ko kp kq kr ks lz ku kv kw ma ky kz la mb lc ld le bi translated">提取组名</h1><p id="762f" class="pw-post-body-paragraph if ig hi ih b ii lf ik il im lg io ip iq lh is it iu li iw ix iy lj ja jb jc hb bi translated">首先，我们通过寻找数据中的各种潜在模式来提取组名。</p><p id="e71a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一般来说，组名在于:</p><ol class=""><li id="be52" class="mc md hi ih b ii ij im in iq me iu mf iy mg jc mh mi mj mk bi translated">将主题从“X”更改为“X”</li><li id="6a30" class="mc md hi ih b ii ml im mm iq mn iu mo iy mp jc mh mi mj mk bi translated">某人X创建了组“X”</li></ol><p id="a649" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们将使用这两种模式提取组名。</p><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="5a21" class="lp ki hi ll b fi lq lr l ls lt">df["Group_Name"]=df["data"].str.extract("(created group\s.*|changed the subject from\s.*)",expand=True)</span></pre><p id="2a8e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">提取后，通过删除不需要的文本来清除这些组名。</p><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="2ebc" class="lp ki hi ll b fi lq lr l ls lt">df["Group_Name"]=df["Group_Name"].str.replace("created group ","")</span><span id="711c" class="lp ki hi ll b fi lu lr l ls lt">df["Group_Name"]=df["Group_Name"].str.replace("changed the subject from ","")</span></pre><p id="e108" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有一个问题，除了组名行之外，它会将Nan返回给所有其他行，为了处理这个问题，我们使用ffill方法。<strong class="ih hj">‘ffill’</strong>代表‘向前填充’，并将向前传播最后一次有效观察。</p><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="6650" class="lp ki hi ll b fi lq lr l ls lt">df[“Group_Name”].fillna(method=’ffill’,inplace=True)</span></pre><p id="5e3b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一般团名看起来像<strong class="ih hj"> <em class="jg">【把主语从“团名A”改成“团名B”】</em></strong>。我们只需要“组名B ”,因为它包含最后更改的组名。</p><p id="4d4c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们将该列转换为“string”类型，然后使用<strong class="ih hj"><em class="jg">“to”</em></strong>拆分组名，最后提取列表中的最后一个元素。因此我们得到了所有的组名。</p><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="3032" class="lp ki hi ll b fi lq lr l ls lt">df[“Group_Name”]=df[“Group_Name”].astype(str)</span><span id="4e42" class="lp ki hi ll b fi lu lr l ls lt">df["Group_Name"]=df["Group_Name"].apply(lambda x:x.split("to"))</span><span id="b17a" class="lp ki hi ll b fi lu lr l ls lt">df["Group_Name"]=df["Group_Name"].apply(lambda x:x[-1])</span></pre><blockquote class="jd je jf"><p id="c8cd" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><strong class="ih hj">从数据列中提取日期</strong></p></blockquote><p id="1797" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，每一行看起来像<strong class="ih hj"> [ </strong> <strong class="ih hj"> 18/07/19，晚上8:21—Srivatsan:嗨嗨】</strong></p><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="3eb7" class="lp ki hi ll b fi lq lr l ls lt">df[“Date”]=df[“data”].str.extract(‘(\d+\/\d+\/\d+)’,expand=True)</span></pre><p id="7c4a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里\d是一个数字(0-9范围内的一个字符)，+表示1次或多次。所以，\d+是一个或多个数字。</p><blockquote class="jd je jf"><p id="b5a5" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><strong class="ih hj">从数据栏中提取时间</strong></p></blockquote><p id="69fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">时间看起来是这样的<strong class="ih hj">【晚上8点21分】</strong></p><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="82e3" class="lp ki hi ll b fi lq lr l ls lt">df[“time”]=df[“data”].str.extract(‘(\d+\:\d+\s\w*)’,expand=True)</span></pre><p id="ceb5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> \s </strong> -空格和<strong class="ih hj"> \w </strong> -查找单词字符</p><p id="fe6e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">“*”</strong>代表0次或更多次。因此它将查找长度为0或更长的单词字符。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es mq"><img src="../Images/02500529c8cc6712a5e7e7902c19b81b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tks_2ZAtknzyJkS1Zdpvmg.jpeg"/></div></div></figure><blockquote class="jd je jf"><p id="8916" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><strong class="ih hj">从数据栏提取聊天和用户名</strong></p></blockquote><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="23ff" class="lp ki hi ll b fi lq lr l ls lt">df[“Name”]=df[“text”].str.extract(“(-\s\w*.*:)”,expand=True)<br/>df["Text"]=df["text"].str.extract("(:\s\w*.*)",expand=True)<br/>df["Word_count"]=df["Text"].apply(lambda x:len(x))</span></pre><p id="9c1e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">例如:[ </strong> <strong class="ih hj"> - Srivatsan : Hey hi ]，</strong>这是聊天和用户名的样子，所以我们提取名称部分，直到“:" and after:”可以提取聊天部分。提取姓名和聊天信息后，使用replace从相应的列中删除标点符号。生成文本列后，创建一个名为word count的列，这将在分析数据时派上用场。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es mr"><img src="../Images/830ba779334bdd6b73546657176ea022.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*StOX2FBjpzzu-MWOj09IXw.png"/></div></div></figure><blockquote class="jd je jf"><p id="3854" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><strong class="ih hj">将日期列转换为日期时间格式</strong></p></blockquote><p id="a85d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除非转换为日期-时间格式，否则我们无法使用日期执行其他基于序列的操作。下一步是将时间列转换为24小时格式，以便我们可以在后面的阶段轻松地进行分析。</p><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="c5cf" class="lp ki hi ll b fi lq lr l ls lt">df[‘Date’] = pd.to_datetime(df[‘Date’], format=’%d/%m/%y’)</span><span id="dbde" class="lp ki hi ll b fi lu lr l ls lt">df["Time"] = pd.to_datetime(df['time']).dt.strftime('%H:%M')</span></pre><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es ms"><img src="../Images/fca93a803cccfcd602ae496863aa902b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*llkawcLe_nUxdXcUl_MDeA.png"/></div></div></figure><blockquote class="jd je jf"><p id="7085" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><strong class="ih hj">检查聊天中是否有表情符号</strong></p></blockquote><p id="06cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">WhatsApp里用的最多的一个东西就是表情符号。比起发短信，许多人更倾向于使用表情符号来更好地表达他们的感受。</p><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="2a2c" class="lp ki hi ll b fi lq lr l ls lt">df[“Emoticons”]=df[“Text”].apply(lambda x:re.findall(r’[\U0001f600-\U0001f650]’, x))<br/>df["Emoticons_count"]=df["Text"].apply(lambda x:len(re.findall(r'[\U0001f600-\U0001f650]', x)))</span></pre><p id="11e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个Unicode序列范围内，有多个表情符号字符。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es mt"><img src="../Images/fb5dfd83299078b6b749a4032c6124eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tsXeYFHLzueDc7PR0vwY4A.jpeg"/></div></div></figure><blockquote class="jd je jf"><p id="4b72" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><strong class="ih hj">检查是否有任何媒体存在</strong></p></blockquote><p id="f892" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，媒体文件被列为“省略的媒体”,因此我们将检查任何一行是否包含省略的媒体。下面的代码返回布尔输出。</p><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="e3c2" class="lp ki hi ll b fi lq lr l ls lt">df[‘Media’]=df[‘Text’].str.contains(‘&lt;Media omitted&gt;’)</span></pre><blockquote class="jw"><p id="4d4d" class="jx jy hi bd jz ka mu mv mw mx my jc dx translated"><strong class="ak">现在，数据帧已经完全清理完毕，所有必需的列都已提取。让我们继续分析和可视化部分。</strong></p></blockquote><blockquote class="jd je jf"><p id="2e8d" class="if ig jg ih b ii mz ik il im na io ip jh nb is it ji nc iw ix jj nd ja jb jc hb bi translated"><strong class="ih hj">每人发送的表情数量</strong></p></blockquote><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="1883" class="lp ki hi ll b fi lq lr l ls lt">emoji=df.groupby([“Name”])[“Emoticons_count”].sum().sort_values()</span><span id="48fc" class="lp ki hi ll b fi lu lr l ls lt">sns.barplot(x=’Name’, y=’Emoticons_count’, data=emoji,palette=”RdPu”).set_title(‘Number of emoticons sent by each person’)<br/>plt.xticks(rotation=75)</span></pre><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es ne"><img src="../Images/cb35ade7d023e14122ad023a34c395e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:792/format:webp/1*KQ-8l2Ou9J9nqq_fzm9f7g.png"/></div></figure><p id="c812" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">同样，以同样的方式，我们可以从中收集各种见解。</p><blockquote class="jd je jf"><p id="329a" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><strong class="ih hj">最常用的表情符号</strong></p></blockquote><p id="e550" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用户倾向于在聊天中使用大量表情符号，因为表情符号更有吸引力。这是表达我们感情的好方法。</p><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="b756" class="lp ki hi ll b fi lq lr l ls lt">emo=df.Emoticons.apply(lambda x: pd.value_counts(x)).sum(axis = 0)</span></pre><p id="2f4e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">#过滤前10个常用表情符号</p><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="33f2" class="lp ki hi ll b fi lq lr l ls lt">emo=emo.sort_values(ascending=False).head(10)</span></pre><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es nf"><img src="../Images/8a1700aca3ac4957c01a6a8b17867fd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-m6aX3DqJFTZG7-B-US8fA.jpeg"/></div></div><figcaption class="ng nh et er es ni nj bd b be z dx translated">最常用的表情符号</figcaption></figure><blockquote class="jw"><p id="95d1" class="jx jy hi bd jz ka mu mv mw mx my jc dx translated">这里我们可以看到人们倾向于使用😂表情符号很多。</p></blockquote><blockquote class="jd je jf"><p id="ef17" class="if ig jg ih b ii mz ik il im na io ip jh nb is it ji nc iw ix jj nd ja jb jc hb bi translated"><strong class="ih hj">每个用户的总聊天次数</strong></p></blockquote><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="442b" class="lp ki hi ll b fi lq lr l ls lt">Message=df.groupby(“Name”)[“Text”].count().sort_values()</span></pre><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es nk"><img src="../Images/d7f1b7b55f5b91e91b432dad7f8559b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/format:webp/1*UieubHW6q7HuFgzHe4tgjw.png"/></div></figure><blockquote class="jd je jf"><p id="8224" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><strong class="ih hj">每人总字数</strong></p></blockquote><p id="65a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我前面提到的，当我们想要找出哪个用户使用了最多的单词时，单词计数列是很有用的。</p><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="1982" class="lp ki hi ll b fi lq lr l ls lt">Text_len=df.groupby([‘Name’])[‘Word_count’].sum()</span></pre><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es nl"><img src="../Images/c2d84e0a66ae5f2f6f21002ce5b36bb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*elAID9q4OEq3L7kK0r4t2Q.png"/></div></figure><blockquote class="jd je jf"><p id="c7b3" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><strong class="ih hj">常用词</strong></p></blockquote><p id="a2c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在词云的帮助下，我们可以直观地表示经常使用的词。文本的大小取决于特定单词的出现频率。</p><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="31e8" class="lp ki hi ll b fi lq lr l ls lt">from wordcloud import WordCloud, STOPWORDS</span><span id="3db8" class="lp ki hi ll b fi lu lr l ls lt">import matplotlib.pyplot as plt</span><span id="6620" class="lp ki hi ll b fi lu lr l ls lt">text = df[“Text”].values</span><span id="07ea" class="lp ki hi ll b fi lu lr l ls lt">wordcloud = WordCloud( width = 3000,height = 2000,background_color = ‘white’,stopwords = STOPWORDS).generate(str(text))</span><span id="7e14" class="lp ki hi ll b fi lu lr l ls lt">fig = plt.figure( figsize = (20, 10),facecolor = ‘k’,edgecolor =‘k’)<br/>plt.imshow(wordcloud, interpolation = ‘bilinear’)<br/>plt.axis(‘off’)<br/>plt.tight_layout(pad=0)<br/>plt.show()</span></pre><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es nm"><img src="../Images/0b5d6798ebb533f86ff47e6555f3971a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZUGKdh6IGIHz5xItxe6SOw.jpeg"/></div></div><figcaption class="ng nh et er es ni nj bd b be z dx translated">这不是一个原始的聊天图像，它只是一个例子</figcaption></figure><blockquote class="jd je jf"><p id="07e3" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><strong class="ih hj">每人分享的媒体</strong></p></blockquote><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="d0a6" class="lp ki hi ll b fi lq lr l ls lt">Media=df.groupby(“Name”)[“Media”].sum().sort_values()</span></pre><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es nn"><img src="../Images/6e1662c274ba43149c08d9721a97096b.png" data-original-src="https://miro.medium.com/v2/resize:fit:778/format:webp/1*uSM1zp5herL65edN_bLqwg.png"/></div></figure><blockquote class="jd je jf"><p id="9842" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><strong class="ih hj">每月分享的媒体量</strong></p></blockquote><p id="a5f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du lv lw lx ll b">Series.dt.strftime()</code>函数将给定系列对象中的日期转换为指定的格式。</p><p id="070e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如:Date = " 2020–05–01 "</p><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="34bc" class="lp ki hi ll b fi lq lr l ls lt">df["Date"].strftime('%B <em class="jg">%d</em>, %Y')<br/><strong class="ll hj">output:</strong><br/>'May 01, 2020'</span></pre><p id="8153" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里我们只需要从日期列中提取月份，并按它分组。</p><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="b405" class="lp ki hi ll b fi lq lr l ls lt">month_media=df.groupby(df[‘Date’].dt.strftime(‘%B’))[‘Media’].sum()</span></pre><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es nn"><img src="../Images/f749ef30fa9ef435c4de10e174eef387.png" data-original-src="https://miro.medium.com/v2/resize:fit:778/format:webp/1*tZFnI-KdRTAdrNgETCVqXw.png"/></div></figure><blockquote class="jd je jf"><p id="8a8c" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><strong class="ih hj">每月聊天总次数</strong></p></blockquote><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="6e07" class="lp ki hi ll b fi lq lr l ls lt">month_text=df.groupby(df[‘Date’].dt.strftime(‘%B’))[‘Text’].count().sort_values()</span></pre><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es nk"><img src="../Images/460c9e414eba663bd97b49c028557e7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/format:webp/1*1An5HV_vJhwHqiPBWbtssQ.png"/></div></figure><blockquote class="jd je jf"><p id="7399" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated"><strong class="ih hj">哪个时间段比较活跃</strong>🕒</p></blockquote><pre class="jl jm jn jo fd lk ll lm ln aw lo bi"><span id="3091" class="lp ki hi ll b fi lq lr l ls lt">df[‘Time’]= pd.to_datetime(df[‘Time’])<br/>df[“Time”].dt.hour<br/>hour_text=df.groupby([df[“Time”].dt.hour])[“Text”].count().sort_values()</span></pre><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es nk"><img src="../Images/0bd11aa9e3bfdd60329efb478bfabcdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/format:webp/1*knbDFn8yfvSkA9ay0oSa0A.png"/></div></figure><p id="c745" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">显示用户在晚上8点到12点之间更活跃</strong></p><h1 id="a79e" class="kh ki hi bd kj kk kl km kn ko kp kq kr ks lz ku kv kw ma ky kz la mb lc ld le bi translated"><span class="l no np nq bm nr ns nt nu nv di"> C </span> <strong class="ak">结论</strong></h1><p id="020a" class="pw-post-body-paragraph if ig hi ih b ii lf ik il im lg io ip iq lh is it iu li iw ix iy lj ja jb jc hb bi translated">在这篇文章中，我分享了我分析Whatsapp聊天的方法。请随意使用这种方法和代码来分析许多其他见解，或者根据您的假设和目标创建更多属性。我们还可以在这里使用情感分析来找出用户的情绪状态或观点，如积极、消极、悲伤、愤怒、喜悦、恐惧等。</p><p id="55e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是与英语相比，情感分析在印度地方语言中有其自身的局限性。单词和拼写的用法因人而异，许多人使用非正式文本，这使得这更具挑战性。</p><p id="0971" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，Whatsapp聊天分析器有许多好处，可以收集各种有趣的事实，了解参与者的心理状态。换句话说，它在我们的数字生态系统中有着重要的地位和作用。</p><p id="38c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢您阅读这篇文章。快乐学习！</p><p id="f0a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Linkedin上联系我。</p></div></div>    
</body>
</html>