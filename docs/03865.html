<html>
<head>
<title>Quarkus What? Why? and How?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">夸库斯什么？为什么？又是怎么做到的？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/quarkus-what-why-and-how-114bce3cc46f?source=collection_archive---------6-----------------------#2020-02-23">https://medium.com/analytics-vidhya/quarkus-what-why-and-how-114bce3cc46f?source=collection_archive---------6-----------------------#2020-02-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="e471" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，我读了很多关于这个由RedHat创建的新框架的内容。我记得我第一次听说它的时候，我并不清楚使用另一个框架的必要性，然后Spring，在那里几乎所有的东西都是神奇地制造出来的，但是从我开始深入这个框架的那一刻起，我发现在Quarkus中是微服务的一个极好的选择，甚至更适合使用java的无服务器。</p><p id="5354" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">什么是夸尔库斯？</p><p id="da9d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Quarkus是一个建立在最好的java库和模式之上的框架。主要Quarkus的目标是允许更快的开发和应用程序初始化，更小和消耗更少的机器资源。Quarkus生来就有云原生的想法，用于微服务和无服务器项目。</p><p id="5721" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一个0.0.1版本是2018年12月12日，最新版本是1.2.0。</p><p id="5fc8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Quarkus是超音速、亚原子、热重装和容器优先的，这意味着它被定制为在容器中运行。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/3af9b977ba6bbe5158a01b8c5be4187b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dZRZw6M15Vv3YLbhmUG7gw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated"><a class="ae jt" href="https://quarkus.io" rel="noopener ugc nofollow" target="_blank"> https://quarkus.io </a></figcaption></figure><p id="9b8b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">为什么在你的项目中使用夸库？</strong></p><p id="25c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当你理解“是什么”这个问题时，这个答案就很容易了。如果您需要或希望使用Docker和/或Serverless在云上运行您的应用程序，Quarkus是一个极好的选择，因为启动时间极快，内存消耗也得到优化。也就是说，如果你打算在一个云服务上使用几个容器，良好的内存管理对于省钱是必不可少的，除此之外，Quarkus还有一个名为Panache的伟大特性，这是一个ORM框架，使用不同的方法直接从你的实体执行查询，这使我们可以更快地编写查询。最后但并非最不重要的是，Quarkus具有热重装功能，还带来了开箱即用的可观察性工具。</p><p id="0898" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">如何开始？</strong></p><p id="2f5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">像Spring框架一样，Quarkus提供了以下网站<a class="ae jt" href="https://code.quarkus.io/" rel="noopener ugc nofollow" target="_blank"> https://code.quarkus.io </a>，在这里它允许从基础创建一个包含所有必需依赖项的项目。</p><p id="3f26" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本教程中，我们将使用MongoDB创建一个Rest应用程序。因此，让我们打开站点并创建我们的项目。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ju"><img src="../Images/70d67e59d8fb056106e4a6d1a495e2a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*-TnqA6Z8QJGedIVx-4FxIQ.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated"><a class="ae jt" href="https://code.quarkus.io/" rel="noopener ugc nofollow" target="_blank">https://code . quar kus . io</a></figcaption></figure><p id="fe64" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在选择了我们项目所需的所有依赖项之后，点击<em class="jv">生成您的应用程序。</em></p><p id="6f01" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要在没有任何配置的情况下运行您的新应用程序，您只需运行以下命令:</p><pre class="je jf jg jh fd jw jx jy jz aw ka bi"><span id="cd1f" class="kb kc hi jx b fi kd ke l kf kg">./mvnw compile quarkus:dev</span></pre><p id="afa6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过url访问您的应用程序:</p><p id="6c63" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jt" href="http://localhost:8080/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080 </a></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ju"><img src="../Images/367b010623971152461c7baf58522f2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*zojcEJNrVTPZawTMy-qIfQ.png"/></div></figure><p id="393b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你看到上面的页面，这是一个信号，表明我们在正确的道路上。</p><p id="731e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还有一个默认的url API。</p><p id="ff73" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jt" href="http://localhost:8080/hello" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/hello</a></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ju"><img src="../Images/f6161c4dab60d7bce378d15a4efb5a8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*jHSXGhtQNc52cOgNI79l8g.png"/></div></figure><p id="c377" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，是时候创建我们的Rest API了。至少对我来说，Quarkus让我们可以用同样的代码创建像Spring一样的Rest API，要做到这一点，我们只需要添加spring-web扩展。</p><pre class="je jf jg jh fd jw jx jy jz aw ka bi"><span id="33c1" class="kb kc hi jx b fi kd ke l kf kg">./mvnw quarkus:add-extensions -Dextensions=spring-web</span></pre><p id="8fca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在编写一些代码之前，让我们设置我们环境，我将使用MongoDB和docker，为了实现这一点，我们只需要2个命令:</p><pre class="je jf jg jh fd jw jx jy jz aw ka bi"><span id="d6ca" class="kb kc hi jx b fi kd ke l kf kg">docker pull mongo</span><span id="16a0" class="kb kc hi jx b fi kh ke l kf kg">docker run -d -i -t -p 27017:27017 mongo</span></pre><p id="b36d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">带有Spring注释的资源，使用扩展:</p><pre class="je jf jg jh fd jw jx jy jz aw ka bi"><span id="7fc1" class="kb kc hi jx b fi kd ke l kf kg">package io.andre.quarkus;</span><span id="966a" class="kb kc hi jx b fi kh ke l kf kg">import java.util.List;</span><span id="3a4a" class="kb kc hi jx b fi kh ke l kf kg">import javax.ws.rs.Consumes;</span><span id="ccce" class="kb kc hi jx b fi kh ke l kf kg">import javax.ws.rs.GET;</span><span id="99ab" class="kb kc hi jx b fi kh ke l kf kg">import javax.ws.rs.POST;</span><span id="dd08" class="kb kc hi jx b fi kh ke l kf kg">import javax.ws.rs.Path;</span><span id="5ee5" class="kb kc hi jx b fi kh ke l kf kg">import javax.ws.rs.Produces;</span><span id="fa30" class="kb kc hi jx b fi kh ke l kf kg">import javax.ws.rs.core.MediaType;</span><span id="7522" class="kb kc hi jx b fi kh ke l kf kg">@RestController</span><span id="8e32" class="kb kc hi jx b fi kh ke l kf kg">@RequestMapping(“/hello”)</span><span id="8814" class="kb kc hi jx b fi kh ke l kf kg">public class ExampleResource {</span><span id="b679" class="kb kc hi jx b fi kh ke l kf kg">@GetMapping</span><span id="a212" class="kb kc hi jx b fi kh ke l kf kg">public List&lt;User&gt; findAll(){</span><span id="ba15" class="kb kc hi jx b fi kh ke l kf kg">return User.findAll().list();</span><span id="075e" class="kb kc hi jx b fi kh ke l kf kg">}</span><span id="f7e4" class="kb kc hi jx b fi kh ke l kf kg">@PostMapping</span><span id="4f7c" class="kb kc hi jx b fi kh ke l kf kg">public void save(){</span><span id="c526" class="kb kc hi jx b fi kh ke l kf kg">User.persist(new User(1, “Andre”, 35));</span><span id="d4d0" class="kb kc hi jx b fi kh ke l kf kg">}</span><span id="2497" class="kb kc hi jx b fi kh ke l kf kg">}</span></pre><p id="839f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Rest API缺省资源，普通java:</p><pre class="je jf jg jh fd jw jx jy jz aw ka bi"><span id="1a35" class="kb kc hi jx b fi kd ke l kf kg">package io.andre.quarkus;</span><span id="ec04" class="kb kc hi jx b fi kh ke l kf kg">import java.util.List;</span><span id="30a6" class="kb kc hi jx b fi kh ke l kf kg">import javax.ws.rs.Consumes;</span><span id="437a" class="kb kc hi jx b fi kh ke l kf kg">import javax.ws.rs.GET;</span><span id="a00a" class="kb kc hi jx b fi kh ke l kf kg">import javax.ws.rs.POST;</span><span id="55dc" class="kb kc hi jx b fi kh ke l kf kg">import javax.ws.rs.Path;</span><span id="0729" class="kb kc hi jx b fi kh ke l kf kg">import javax.ws.rs.Produces;</span><span id="082d" class="kb kc hi jx b fi kh ke l kf kg">import javax.ws.rs.core.MediaType;</span><span id="a8ad" class="kb kc hi jx b fi kh ke l kf kg">@Path(“/hello”)</span><span id="8d3f" class="kb kc hi jx b fi kh ke l kf kg">@Produces(MediaType.APPLICATION_JSON)</span><span id="d862" class="kb kc hi jx b fi kh ke l kf kg">@Consumes(MediaType.APPLICATION_JSON)</span><span id="5222" class="kb kc hi jx b fi kh ke l kf kg">public class ExampleResource {</span><span id="998e" class="kb kc hi jx b fi kh ke l kf kg">@GET</span><span id="f21e" class="kb kc hi jx b fi kh ke l kf kg">public List&lt;User&gt; findAll(){</span><span id="2c2e" class="kb kc hi jx b fi kh ke l kf kg">return User.findAll().list();</span><span id="21ba" class="kb kc hi jx b fi kh ke l kf kg">}</span><span id="a306" class="kb kc hi jx b fi kh ke l kf kg">@POST</span><span id="c43e" class="kb kc hi jx b fi kh ke l kf kg">public void save(){</span><span id="d851" class="kb kc hi jx b fi kh ke l kf kg">User.persist(new User(1, “Andre”, 35));</span><span id="32ad" class="kb kc hi jx b fi kh ke l kf kg">}</span><span id="e7b8" class="kb kc hi jx b fi kh ke l kf kg">}</span></pre><p id="71f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第二个提供了开箱即用的测试我们的API。</p><p id="af89" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jt" href="http://localhost:8080/swagger-ui/" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/swagger-ui/</a></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ju"><img src="../Images/068ac2af1c07f9ce55cfa8ca29cff092.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*0_AY-Kyd8gOJlAiz8h4IeA.png"/></div></figure><pre class="je jf jg jh fd jw jx jy jz aw ka bi"><span id="3bfb" class="kb kc hi jx b fi kd ke l kf kg">package io.andre.quarkus;</span><span id="4399" class="kb kc hi jx b fi kh ke l kf kg">import io.quarkus.mongodb.panache.PanacheMongoEntity;</span><span id="fd5f" class="kb kc hi jx b fi kh ke l kf kg">public class User extends PanacheMongoEntity{</span><span id="7ad7" class="kb kc hi jx b fi kh ke l kf kg">public Integer id;</span><span id="9b4e" class="kb kc hi jx b fi kh ke l kf kg">public String name;</span><span id="0b93" class="kb kc hi jx b fi kh ke l kf kg">public Integer age;</span><span id="bcdf" class="kb kc hi jx b fi kh ke l kf kg">public User(Integer id, String name, Integer age) {</span><span id="984b" class="kb kc hi jx b fi kh ke l kf kg">this.id = id;</span><span id="812b" class="kb kc hi jx b fi kh ke l kf kg">this.name = name;</span><span id="d47a" class="kb kc hi jx b fi kh ke l kf kg">this.age = age;</span><span id="06df" class="kb kc hi jx b fi kh ke l kf kg">}</span><span id="286b" class="kb kc hi jx b fi kh ke l kf kg">public User() {</span><span id="e35d" class="kb kc hi jx b fi kh ke l kf kg">}</span><span id="73cb" class="kb kc hi jx b fi kh ke l kf kg">}</span></pre><p id="1708" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jv">应用属性</em></p><pre class="je jf jg jh fd jw jx jy jz aw ka bi"><span id="f0cb" class="kb kc hi jx b fi kd ke l kf kg">quarkus.mongodb.connection-string = mongodb://localhost:27017</span><span id="6c1b" class="kb kc hi jx b fi kh ke l kf kg">quarkus.mongodb.database = test</span></pre><p id="be25" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本教程中，您可以看到使用Quarkus和Mongodb构建一个应用程序是多么容易和快速，还可以看到它与其他框架相比的优势，以便于您在下一个ou实际项目中进行选择。</p><p id="34f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我的GitHub中提供了所有代码:</p><p id="c90b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jt" href="http://git" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">https://github.com/gigandre/quarkus-test.git</strong></a></p></div></div>    
</body>
</html>