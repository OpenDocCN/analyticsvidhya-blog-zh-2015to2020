<html>
<head>
<title>Integrating EditorJS with Django</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">集成EditorJS和Django</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/integrating-editorjs-with-django-7a30127d0771?source=collection_archive---------3-----------------------#2020-10-29">https://medium.com/analytics-vidhya/integrating-editorjs-with-django-7a30127d0771?source=collection_archive---------3-----------------------#2020-10-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2624" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">编者可能会给你博客中的作者或多或少与媒体中的作者相同的感觉。想把Django和editorJS整合到一个博客或类似的东西上吗？这篇文章可能对你有帮助。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/1371ee24de068f95a9b5ab11a6d4b240.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yKKxBrOdbRxD8ZF70llHBA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">DJango与EditorJS</figcaption></figure><blockquote class="jt ju jv"><p id="c117" class="if ig jw ih b ii ij ik il im in io ip jx ir is it jy iv iw ix jz iz ja jb jc hb bi translated"><strong class="ih hj">假设:</strong></p><p id="8d75" class="if ig jw ih b ii ij ik il im in io ip jx ir is it jy iv iw ix jz iz ja jb jc hb bi translated">你已经有一个Ajango项目和一个应用程序，你将使用<a class="ae ka" href="https://editorjs.io/" rel="noopener ugc nofollow" target="_blank">编辑器</a></p></blockquote></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h1 id="9d36" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">步骤1:安装django editorjs</h1><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="80d6" class="ll kj hi lh b fi lm ln l lo lp">pip install django-editorjs</span></pre><p id="1664" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在将<em class="jw"/><a class="ae ka" href="https://pypi.org/project/django-editorjs/" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj"><em class="jw">django _ editor js</em></strong></a>添加到settings.py中的INSTALLED_APPS中(<em class="jw">注意这里的下划线)</em></p><h1 id="7278" class="ki kj hi bd kk kl lq kn ko kp lr kr ks kt ls kv kw kx lt kz la lb lu ld le lf bi translated">步骤2:创建模型</h1><p id="3ca0" class="pw-post-body-paragraph if ig hi ih b ii lv ik il im lw io ip iq lx is it iu ly iw ix iy lz ja jb jc hb bi translated">现在，在我们创建模型之前，让我通知你，要上传图片，你需要设置你自己的文件上传解决方案(<strong class="ih hj">我也已经提到过了！</strong>)</p><p id="95d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，在这里我将创建一个Post模型，首先导入EditorJsField</p><p id="13ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ma mb mc lh b"><em class="jw">from django_editorjs import EditorJsField</em></code></p><p id="0ecc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后我将为Post创建字段，body字段将有EditorJsField。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es md"><img src="../Images/2d747dc4eea0d33cb249ecac3eada91b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*Q4HgBckypt95xHVqM4zWKw.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">发布模型</figcaption></figure><p id="39ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是如果你需要在帖子里放图片，那么:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es me"><img src="../Images/30ebbdb4b49978360d73d6cf4d1db9da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7bOWQEcfxbliMH5b1zuVrw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">启用编辑器图像的发布模型</figcaption></figure><p id="8b90" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，在这个模型中，我们有editorjs_config，它将对图像进行自定义设置。</p><h2 id="5f5e" class="ll kj hi bd kk mf mg mh ko mi mj mk ks iq ml mm kw iu mn mo la iy mp mq le mr bi translated">注意:</h2><p id="4540" class="pw-post-body-paragraph if ig hi ih b ii lv ik il im lw io ip iq lx is it iu ly iw ix iy lz ja jb jc hb bi translated"><strong class="ih hj"> 1。</strong>在图像配置的端点中，我有两个用于byFile和byUrl字段的Url。我们将从头开始创建这些网址。</p><p id="056c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 2。</strong>我也有additionalRequestHeaders字段，它有一个对象数组，虽然只有一个对象。该对象具有:</p><p id="eba9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jw">内容类型:“多部分/形式数据”</em></p><p id="96c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">此标题是上传图像所必需的。</strong></p><h2 id="22ca" class="ll kj hi bd kk mf mg mh ko mi mj mk ks iq ml mm kw iu mn mo la iy mp mq le mr bi translated">现在进行迁移和迁移。</h2></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><blockquote class="ms"><p id="8bfc" class="mt mu hi bd mv mw mx my mz na nb jc dx translated">上传到editorJS的图像将被推送到服务器，如果服务器返回成功，然后我们可以在编辑器空间的图像。</p></blockquote></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h1 id="f8fa" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">步骤3:处理图像上传</h1><p id="faa5" class="pw-post-body-paragraph if ig hi ih b ii lv ik il im lw io ip iq lx is it iu ly iw ix iy lz ja jb jc hb bi translated">首先在views.py中导入它</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nc"><img src="../Images/5f023e6dc70cb58bd7496a981199ea4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bTXYyQkvY8dmGbn7kiVflQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">导入views.py</figcaption></figure><p id="e75b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后写这个函数</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nd"><img src="../Images/19f66e55146df2e4f4644ceb622ae32b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PgvFGELGL5chQUZMMrOdHQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">图像上传</figcaption></figure><p id="0ce8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">上述代码的解释:</strong></p><ul class=""><li id="82ef" class="ne nf hi ih b ii ij im in iq ng iu nh iy ni jc nj nk nl nm bi translated">@requires_csrf_token帮助我们避免任何可能发生的csrf错误，因为我们没有使用任何形式来上传图像，所以我们无法设置任何csrf令牌/cookie，因此这是一个替代方案，<em class="jw">的工作方式类似于</em> <code class="du ma mb mc lh b"><strong class="ih hj"><em class="jw">csrf_protect</em></strong></code> <em class="jw">，但从不拒绝传入的请求。</em></li><li id="184f" class="ne nf hi ih b ii nn im no iq np iu nq iy nr jc nj nk nl nm bi translated">每当editorJs上传图片时，他们会发送一个包含图片对象的请求。这个图像有图像文件</li><li id="83e6" class="ne nf hi ih b ii nn im no iq np iu nq iy nr jc nj nk nl nm bi translated">要获得文件名，我们需要将对象转换为字符串，然后将其拆分，第一部分是名称，第二部分是扩展名</li><li id="0cfa" class="ne nf hi ih b ii nn im no iq np iu nq iy nr jc nj nk nl nm bi translated">然后我们保存文件并获得文件的url</li><li id="1812" class="ne nf hi ih b ii nn im no iq np iu nq iy nr jc nj nk nl nm bi translated"><strong class="ih hj">然后我们返回Json响应用这个</strong> <a class="ae ka" href="https://github.com/editor-js/image#server-format" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> <em class="jw">格式</em> </strong> </a> <strong class="ih hj">(强制)</strong></li></ul><p id="3039" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在urls.py中为post编写这样的代码:csrf_exempt需要用于</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ns"><img src="../Images/b12c77d7232774a325e814c85731ae1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_lzhqKjFv4Ht2qZkuGN_xw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">urls.py</figcaption></figure><h2 id="a9b9" class="ll kj hi bd kk mf mg mh ko mi mj mk ks iq ml mm kw iu mn mo la iy mp mq le mr bi translated">另外:</h2><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es nt"><img src="../Images/963205ee82baf73d8339cf3097960b67.png" data-original-src="https://miro.medium.com/v2/resize:fit:584/format:webp/1*S8HZadD0EXB3qNvd2wv84A.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">settings.py</figcaption></figure><p id="96a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jw">请务必在您的设置中添加MEDIA_ROOT &amp; MEDIA_URL，并在urls.py中添加:</em> </strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nu"><img src="../Images/7f3b5e367eabcdf2ee4cfc274a8854dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sig4X9cOCJrxhmwOnN2yUA.png"/></div></div></figure><h1 id="62fa" class="ki kj hi bd kk kl lq kn ko kp lr kr ks kt ls kv kw kx lt kz la lb lu ld le lf bi translated">就是这样！我们做到了！</h1><p id="f931" class="pw-post-body-paragraph if ig hi ih b ii lv ik il im lw io ip iq lx is it iu ly iw ix iy lz ja jb jc hb bi translated">完整代码:<a class="ae ka" href="https://github.com/abhik-b/django-editorjs-tutorial" rel="noopener ugc nofollow" target="_blank">https://github.com/abhik-b/django-editorjs-tutorial</a></p><p id="65ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">更详细的解释请看这个:</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="nv nw l"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">视频教程</figcaption></figure><p id="75d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，这是链接抓取，上传文件和图像的模型</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nx"><img src="../Images/9177a98cd3c710ef7a1bdfdd280aef89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MfCqWY4dgLfrBfrrX5ni-Q.png"/></div></div></figure><p id="0ac3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">文件上传的类似视图</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ny"><img src="../Images/53b061df4a54fb8609dd09d925b6a415.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*BcjRMB7EArvEsNGxTkW5gw.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">文件上传视图</figcaption></figure><p id="42e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要获取链接，请在虚拟环境中安装<code class="du ma mb mc lh b">pip install bs4</code>,然后编写这个视图，从任何链接中提取元数据并显示打开的图表。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nz"><img src="../Images/3529ee68642f5ed723b3a70032a619e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nTEdu5KmgFgxW3PhZK_SgA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">链接获取视图</figcaption></figure><p id="05bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你已经看过如何用html和js呈现body字段数据的视频，那么这是完整的js代码</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="c94b" class="ll kj hi lh b fi lm ln l lo lp">&lt;p id="post-body"&gt;&lt;/p&gt;</span><span id="b98d" class="ll kj hi lh b fi oa ln l lo lp">&lt;script&gt;</span><span id="6534" class="ll kj hi lh b fi oa ln l lo lp">window.addEventListener("DOMContentLoaded", () =&gt; {</span><span id="1e01" class="ll kj hi lh b fi oa ln l lo lp">const postBody = document.getElementById("post-body");</span><span id="5c22" class="ll kj hi lh b fi oa ln l lo lp">console.log("{{post.body|escapejs}}");</span><span id="19df" class="ll kj hi lh b fi oa ln l lo lp">let body = JSON.parse("{{post.body|escapejs}}");</span><span id="5fae" class="ll kj hi lh b fi oa ln l lo lp">let blocks = body.blocks;</span><span id="3c7e" class="ll kj hi lh b fi oa ln l lo lp">for (let index = 0; index &lt; blocks.length; index++) {</span><span id="f55b" class="ll kj hi lh b fi oa ln l lo lp">switch (blocks[index].type) {</span><span id="7966" class="ll kj hi lh b fi oa ln l lo lp">case "Header":</span><span id="31e1" class="ll kj hi lh b fi oa ln l lo lp">let head = document.createElement(`h${blocks[index].data.level}`);</span><span id="5c8f" class="ll kj hi lh b fi oa ln l lo lp">head.textContent = blocks[index].data.text;</span><span id="4f15" class="ll kj hi lh b fi oa ln l lo lp">postBody.appendChild(head);</span><span id="2ba4" class="ll kj hi lh b fi oa ln l lo lp">break;</span><span id="f81e" class="ll kj hi lh b fi oa ln l lo lp">case "Image":</span><span id="1b30" class="ll kj hi lh b fi oa ln l lo lp">let div = document.createElement("div");</span><span id="be37" class="ll kj hi lh b fi oa ln l lo lp">let image = document.createElement("img");</span><span id="cde3" class="ll kj hi lh b fi oa ln l lo lp">let caption = document.createElement("h5");</span><span id="cb0e" class="ll kj hi lh b fi oa ln l lo lp">image.src = `${blocks[index].data.file.url}`;</span><span id="339a" class="ll kj hi lh b fi oa ln l lo lp">caption.textContent = blocks[index].data.caption;</span><span id="09f6" class="ll kj hi lh b fi oa ln l lo lp">div.appendChild(image);</span><span id="75e1" class="ll kj hi lh b fi oa ln l lo lp">div.appendChild(caption);</span><span id="597f" class="ll kj hi lh b fi oa ln l lo lp">postBody.appendChild(div);</span><span id="5155" class="ll kj hi lh b fi oa ln l lo lp">break;</span><span id="d1c1" class="ll kj hi lh b fi oa ln l lo lp">case "List":</span><span id="14a0" class="ll kj hi lh b fi oa ln l lo lp">let list;</span><span id="5c5b" class="ll kj hi lh b fi oa ln l lo lp">if (blocks[index].data.style == "unordered") {</span><span id="6bd0" class="ll kj hi lh b fi oa ln l lo lp">list = document.createElement("ul");</span><span id="962d" class="ll kj hi lh b fi oa ln l lo lp">} else {</span><span id="4709" class="ll kj hi lh b fi oa ln l lo lp">list = document.createElement("ol");</span><span id="b11c" class="ll kj hi lh b fi oa ln l lo lp">}</span><span id="1021" class="ll kj hi lh b fi oa ln l lo lp">for (const item in blocks[index].data.items) {</span><span id="2c09" class="ll kj hi lh b fi oa ln l lo lp">let li = document.createElement("li");</span><span id="954f" class="ll kj hi lh b fi oa ln l lo lp">li.textContent = blocks[index].data.items[item];</span><span id="fd8e" class="ll kj hi lh b fi oa ln l lo lp">list.appendChild(li);</span><span id="829c" class="ll kj hi lh b fi oa ln l lo lp">}</span><span id="310d" class="ll kj hi lh b fi oa ln l lo lp">postBody.appendChild(list);</span><span id="2ebf" class="ll kj hi lh b fi oa ln l lo lp">break;</span><span id="5d35" class="ll kj hi lh b fi oa ln l lo lp">case "Raw":</span><span id="78fe" class="ll kj hi lh b fi oa ln l lo lp">let blockquote = document.createElement("blockquote");</span><span id="14e3" class="ll kj hi lh b fi oa ln l lo lp">let code = document.createElement("code");</span><span id="d439" class="ll kj hi lh b fi oa ln l lo lp">let pre = document.createElement("pre");</span><span id="780b" class="ll kj hi lh b fi oa ln l lo lp">pre.textContent = blocks[index].data.html;</span><span id="caae" class="ll kj hi lh b fi oa ln l lo lp">pre.style.background = "#131313";</span><span id="8b1d" class="ll kj hi lh b fi oa ln l lo lp">pre.style.color = "#dddddd";</span><span id="228d" class="ll kj hi lh b fi oa ln l lo lp">pre.style.padding = "15px";</span><span id="7f40" class="ll kj hi lh b fi oa ln l lo lp">code.appendChild(pre);</span><span id="973d" class="ll kj hi lh b fi oa ln l lo lp">postBody.appendChild(code);</span><span id="a586" class="ll kj hi lh b fi oa ln l lo lp">break;</span><span id="0600" class="ll kj hi lh b fi oa ln l lo lp">case "Attaches":</span><span id="60a9" class="ll kj hi lh b fi oa ln l lo lp">let parent = document.createElement("div");</span><span id="0a8e" class="ll kj hi lh b fi oa ln l lo lp">let a = document.createElement("a");</span><span id="7a54" class="ll kj hi lh b fi oa ln l lo lp">let name = document.createElement("h3");</span><span id="6de7" class="ll kj hi lh b fi oa ln l lo lp">let size = document.createElement("h3");</span><span id="10ea" class="ll kj hi lh b fi oa ln l lo lp">a.href = `${blocks[index].data.file.url}`;</span><span id="c19e" class="ll kj hi lh b fi oa ln l lo lp">a.textContent = `Downlod ${blocks[index].data.file.extension}`;</span><span id="3e10" class="ll kj hi lh b fi oa ln l lo lp">name.textContent = blocks[index].data.file.name;</span><span id="fa67" class="ll kj hi lh b fi oa ln l lo lp">size.textContent = blocks[index].data.file.size;</span><span id="23c4" class="ll kj hi lh b fi oa ln l lo lp">parent.innerHTML = `&lt;a href="${blocks[index].data.file.url}" download&gt;Download&lt;/a&gt;`;</span><span id="e296" class="ll kj hi lh b fi oa ln l lo lp">parent.appendChild(a);</span><span id="6ff8" class="ll kj hi lh b fi oa ln l lo lp">parent.appendChild(name);</span><span id="de93" class="ll kj hi lh b fi oa ln l lo lp">parent.appendChild(size);</span><span id="4178" class="ll kj hi lh b fi oa ln l lo lp">postBody.appendChild(parent);</span><span id="aae7" class="ll kj hi lh b fi oa ln l lo lp">break;</span><span id="ba79" class="ll kj hi lh b fi oa ln l lo lp">case "paragraph":</span><span id="4c37" class="ll kj hi lh b fi oa ln l lo lp">const p = document.createElement("p");</span><span id="ac5d" class="ll kj hi lh b fi oa ln l lo lp">p.innerHTML = blocks[index].data.text;</span><span id="81bd" class="ll kj hi lh b fi oa ln l lo lp">postBody.appendChild(p);</span><span id="1209" class="ll kj hi lh b fi oa ln l lo lp">case "Link":</span><span id="75a4" class="ll kj hi lh b fi oa ln l lo lp">let parent2 = document.createElement("div");</span><span id="dffe" class="ll kj hi lh b fi oa ln l lo lp">let a2 = document.createElement("a");</span><span id="8469" class="ll kj hi lh b fi oa ln l lo lp">if (blocks[index].data.meta.description) {</span><span id="5e81" class="ll kj hi lh b fi oa ln l lo lp">let desc = document.createElement("p");</span><span id="e749" class="ll kj hi lh b fi oa ln l lo lp">desc.textContent = blocks[index].data.meta.description;</span><span id="4942" class="ll kj hi lh b fi oa ln l lo lp">parent2.appendChild(desc);</span><span id="1255" class="ll kj hi lh b fi oa ln l lo lp">}</span><span id="70b4" class="ll kj hi lh b fi oa ln l lo lp">if (blocks[index].data.meta.title) {</span><span id="09f7" class="ll kj hi lh b fi oa ln l lo lp">let title = document.createElement("h3");</span><span id="a411" class="ll kj hi lh b fi oa ln l lo lp">title.textContent = blocks[index].data.meta.title;</span><span id="cdcf" class="ll kj hi lh b fi oa ln l lo lp">parent2.appendChild(title);</span><span id="11e5" class="ll kj hi lh b fi oa ln l lo lp">}</span><span id="5c61" class="ll kj hi lh b fi oa ln l lo lp">if (blocks[index].data.meta.image.url !== "") {</span><span id="631e" class="ll kj hi lh b fi oa ln l lo lp">let img = document.createElement("img");</span><span id="7862" class="ll kj hi lh b fi oa ln l lo lp">img.src = blocks[index].data.meta.image.url;</span><span id="6178" class="ll kj hi lh b fi oa ln l lo lp">parent2.appendChild(img);</span><span id="7866" class="ll kj hi lh b fi oa ln l lo lp">}</span><span id="0c4c" class="ll kj hi lh b fi oa ln l lo lp">a2.href = blocks[index].data.link;</span><span id="2556" class="ll kj hi lh b fi oa ln l lo lp">parent2.appendChild(a2);</span><span id="6dbb" class="ll kj hi lh b fi oa ln l lo lp">postBody.appendChild(parent2);</span><span id="37aa" class="ll kj hi lh b fi oa ln l lo lp">default:</span><span id="3c32" class="ll kj hi lh b fi oa ln l lo lp">break;</span><span id="ae99" class="ll kj hi lh b fi oa ln l lo lp">}</span><span id="c411" class="ll kj hi lh b fi oa ln l lo lp">}</span><span id="32fc" class="ll kj hi lh b fi oa ln l lo lp">});</span><span id="2c48" class="ll kj hi lh b fi oa ln l lo lp">&lt;/script&gt;</span></pre><p id="8d7f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是，如果您计划将它用于生产，那么请找到一种更好的方法来处理图像上传，因为我们正在<strong class="ih hj">免除图像的csrf令牌</strong>，尽管我们仍然使用<a class="ae ka" href="https://docs.djangoproject.com/en/3.1/ref/csrf/#django.views.decorators.csrf.requires_csrf_token" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">requires _ csrf _ token</strong></a><strong class="ih hj"/>作为保护措施…</p><blockquote class="jt ju jv"><p id="d57f" class="if ig jw ih b ii ij ik il im in io ip jx ir is it jy iv iw ix jz iz ja jb jc hb bi translated">如果我找到更好的解决方案，我会更新这篇文章！</p></blockquote><h1 id="4c1a" class="ki kj hi bd kk kl lq kn ko kp lr kr ks kt ls kv kw kx lt kz la lb lu ld le lf bi translated">希望这有所帮助🎉</h1></div></div>    
</body>
</html>