# 用 Plotly 实现地理空间数据可视化——新加坡房地产价格分析(下)

> 原文：<https://medium.com/analytics-vidhya/geospatial-data-visualisation-with-plotly-analyse-singapores-property-price-part-ii-eb4f8eb24d05?source=collection_archive---------5----------------------->

![](img/da192300b27c270ae77955e85f26a604.png)

在关于新加坡房地产价格的探索性研究的第一部分中，我收集了房价的交易信息，并根据房屋与便利设施的接近程度，确定了可能影响房价的便利设施。

在这篇文章中，我将谈到我创建的一些交互式图表，以提供整个新加坡的房价概况，没有任何预测模型(还没有！).虽然有其他库包，如 matplotlib、seaborne 等，但我认为纯粹使用 Plotly 来尝试绘图会很有趣，因此它是完全交互式的。

# 数据集简介

我下载了 2017-2019 年间新加坡转售平板价格的交易数据。([链接](https://data.gov.sg/dataset/resale-flat-prices))。此外，使用各种便利设施的名称和来自 [onemap.sg](https://www.onemap.sg/home/) 的网络搜索，我能够找到每个便利设施和公寓的地理坐标以及公寓和便利设施之间的地理距离。最后，我把数据合并在一起。

![](img/3b0f812ccb880ba277a67d4fdf68694d.png)

最终数据集

# **数据探索图**

**简单图形**

首先，我使用 Plotly express 来绘制最终数据集的一些简单的交互式图形。

下面的条形图显示，只有少数交易的"一室"，"两室"和多代单位类型。根据我自己的理解，我认为“1 室”和“2 室”单位由于楼层面积小而不受欢迎；而[多代公寓](https://www.straitstimes.com/singapore/housing/larger-3gen-hdb-flats-for-multi-generation-families-popular-with-8-in-10-units)是从 2013 年才开始建造的，交易量的减少可能与供应不足高度相关。我选择进一步将这些单位排除在分析之外，因为这些单位类型通常不太受欢迎。

下一步要考虑的是，类似户型的价格是否会在几年内发生变化。如果发生重大变化，交易价格将需要根据通货膨胀等因素进行调整。下面是一个脊线图(又名 joyplot ),它显示了每种公寓类型的价格在 3 年中非常相似。更有趣的是，不同类型的公寓有明显的价格差异。

## **更多精彩图**

接下来，我绘制了交易统一价格和距离之间的关联图。我在下面展示了**公寓价格**与**到市中心的距离**的相关对图的代码，它显示了所有公寓类型的反比关系，即随着离城市距离的增加，公寓价格下降。这是意料之中的。

虽然使用 matplotlib 库来绘制下面的成对相关图要容易得多，但使用 Plotly 来这样做的好处是可以更容易地识别和调查异常值。

转移话题:正如你在下面看到的，我已经转移到其他允许更多控制的图表上。Plotly express 是一种快速绘制交互式图形的方法，但是没有给我们想要的图形呈现方式(例如支线剧情)留下太多余地。

# **地理空间数据可视化**

**数据准备**

为了展示最终的地理空间图，除了最终的数据集之外，我还使用了保存的数据集，其中包含了设施的地理位置。

一个便利设施的例子

![](img/c0cea659fa1b976ea0c542d9e6d574fa.png)

MRT 地理坐标

另外，我过滤了一些便利设施的数据。例如，我过滤了新加坡最好的小学名单，而不是标出所有学校的位置(基于一家房地产网站提供的名单)，并将房价分为 4 类，每类都有不同的公寓类型。

注:通过将公寓价格从数字变量转换为分类变量，我可以很容易地确定在新加坡的某个地区是否有公寓集中(相同的公寓类型和分位数水平)。

## 绘图图表

为了以简洁但易懂的方式呈现图表，我创建了 5 个不同的地理空间地图，可以在单个 Plotly 图表中的多个选项卡下进行过滤。

新加坡的地图是使用 Plotly 的 Mapbox 生成的。(您将需要您的令牌 API，它可以在注册 Plotly 帐户后生成)。

**图表和调查结果**

我在本文中附加了 3 个选项卡—概述、“3 个房间”和“5 个房间”。

在“概览图”中，我们可以看到，总的来说，75%的分位数公寓(不考虑公寓类型)位于新加坡中部和东部。在不同区域内，离火车站越近的公寓售价越高。此外，我们还看到，靠近顶级学校的公寓价格也普遍较高。

当我们进一步分析“3 个房间”子图时，趋势不再那么明显了。交易价格较高的公寓集中在东部，在较小的区域内，便利设施的影响似乎没有太大的影响。

“5 个房间”副情节中讲述了一个不同的故事，其中东北地区(Sengkang，Punggol)和西部(Clementi)的子集群似乎暗示了火车站的重要性。其他设施(学校和小贩中心)的影响也有些重要，尽管这种影响在新加坡的所有地区并不一致。

# **结论**

通过上述可视化，很明显，一些设施对某些公寓类型有重大影响，无需进一步的数据建模，这将是一个很好的基础，人们可以在那里找到好的廉价公寓。例如，如果你倾向于在新加坡东部购买一套公寓，如果该公寓低于 50%的分位数水平，那么它将是一个便宜货。

此外，我希望我已经提供了一些有用的想法，关于如何使用 Plotly 库包用您的数据绘制简单到更复杂的图形。

在这个由 3 部分组成的系列的最后一部分中，我将谈到一些预测性的机器学习算法，我用这些算法来研究使用交易数据和地理距离预测房价的效果。