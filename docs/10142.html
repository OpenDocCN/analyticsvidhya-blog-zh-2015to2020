<html>
<head>
<title>ES6 JavaScript— “this” keyword</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ES6 JavaScript—“this”关键字</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/es6-javascript-this-keyword-4377c61f6f2d?source=collection_archive---------19-----------------------#2020-10-06">https://medium.com/analytics-vidhya/es6-javascript-this-keyword-4377c61f6f2d?source=collection_archive---------19-----------------------#2020-10-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="48f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">试举例总结“this”的用法</p><ul class=""><li id="21dd" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">每一个用 function 关键字或速记方法创建的函数都有自己的“this ”,它通常绑定到调用它的“who”。</li><li id="1e4c" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">箭头函数不会将“这个”绑定到任何东西，里面的“这个”依赖于周围的上下文</li></ul><p id="750b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">示例 1</p><p id="8e60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">错误函数在这里声明了“handler ”,这意味着“this”什么都不是，就像在处理程序之外一样，因此输出是窗口对象</p><pre class="jr js jt ju fd jv jw jx jy aw jz bi"><span id="4130" class="ka kb hi jw b fi kc kd l ke kf">const handler = () =&gt; {<br/> console.log(this);<br/>};<br/>btn1.addEventListener('click', handler);</span></pre><p id="8a48" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出</p><pre class="jr js jt ju fd jv jw jx jy aw jz bi"><span id="79c2" class="ka kb hi jw b fi kc kd l ke kf">Window {parent: Window, opener: null, top: Window, length: 0, frames: Window, …}</span></pre><p id="8c14" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">示例 2</p><p id="b74d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里用“function”关键字，“this”绑定到某个东西。在这种情况下，浏览器自动将" this "绑定到按钮，因为按钮触发了调用</p><pre class="jr js jt ju fd jv jw jx jy aw jz bi"><span id="09f3" class="ka kb hi jw b fi kc kd l ke kf">const handler = function() {<br/> console.log(this);<br/>};<br/>btn.addEventListener('click', handler);</span></pre><p id="0e46" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出</p><pre class="jr js jt ju fd jv jw jx jy aw jz bi"><span id="b10d" class="ka kb hi jw b fi kc kd l ke kf">&lt;button id="btn1"&gt;&lt;/button&gt;</span></pre><p id="b5b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">示例 3</p><p id="4617" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为什么我们需要“这个”</p><pre class="jr js jt ju fd jv jw jx jy aw jz bi"><span id="135f" class="ka kb hi jw b fi kc kd l ke kf">const name = 'Johnny';<br/>     <br/>const person = {<br/>   name: 'Fifi',<br/>   greet() {<br/>      console.log(name);        <br/>      console.log(this.name);   <br/>   }<br/>};<br/>     <br/>person.greet();</span></pre><p id="e8e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出</p><pre class="jr js jt ju fd jv jw jx jy aw jz bi"><span id="cc3d" class="ka kb hi jw b fi kc kd l ke kf">Johnny<br/>Fifi</span></pre><p id="bb19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">实例 4</p><p id="fb38" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我们所称的“newMovie.getFormattedTitle()”，getFormattedTitle()绑定到 newMovie 上下文。然而，在 oldMovie 中，getFormattedTitle()是用 arrow 函数声明的，这意味着它没有绑定到任何东西，而是绑定到周围的上下文。在这种情况下，周围的上下文不在 oldMovie 内部，因为我们不能在那里放置任何“this ”,相反，周围的上下文应该在 oldMovie 外部。于是我们打印了 Window 对象，无法调用 old movie . getformattedditle()；这就是为什么我们通常不在对象内部使用箭头函数(在内部函数中，情况不同)。</p><pre class="jr js jt ju fd jv jw jx jy aw jz bi"><span id="42a5" class="ka kb hi jw b fi kc kd l ke kf">const newMovie = {<br/>    info: {<br/>      title:'007 No time to die'<br/>    },<br/>    getFormattedTitle() {<br/>      console.log (this.info.title.toUpperCase());<br/>    }<br/>  };<br/>const oldMovie = {<br/>    info: {<br/>      title:'Saving private Ryan'<br/>    },<br/>    getFormattedTitle: ()=&gt; {<br/>      console.log(this);<br/>      console.log(this.info.title.toUpperCase());<br/>    }<br/>  };</span><span id="679e" class="ka kb hi jw b fi kg kd l ke kf">newMovie.getFormattedTitle();<br/>oldMovie.getFormattedTitle();</span></pre><p id="1bd4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出</p><pre class="jr js jt ju fd jv jw jx jy aw jz bi"><span id="33e7" class="ka kb hi jw b fi kc kd l ke kf">007 NO TIME TO DIE<br/>Window {parent: Window, opener: null, top: Window, length: 0, frames: Window, …}<br/>Uncaught TypeError: Cannot read property 'title' of undefined</span></pre><p id="ab47" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">实例 5</p><p id="043a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对象的内部函数不绑定到对象本身，而是绑定到窗口</p><pre class="jr js jt ju fd jv jw jx jy aw jz bi"><span id="0acc" class="ka kb hi jw b fi kc kd l ke kf">const newTeam = {teamName: 'ES6', <br/> people: ['Johnny', 'Fifi'], getTeamMembers() {<br/>  this.people.forEach(p =&gt; {<br/>   console.log(p + ' - ' +this.teamName); <br/> });<br/>}};</span><span id="01f7" class="ka kb hi jw b fi kg kd l ke kf">const oldTeam = {teamName: 'Java', <br/> people: ['Johnny', 'Fifi'], getTeamMembers() {<br/>  this.people.forEach(function(p) {<br/>  console.log(this);<br/>  console.log(p + ' - ' + this.teamName); <br/> });<br/>}};</span><span id="b5a1" class="ka kb hi jw b fi kg kd l ke kf">newTeam.getTeamMembers();<br/>oldTeam.getTeamMembers();</span></pre><p id="5f82" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出</p><pre class="jr js jt ju fd jv jw jx jy aw jz bi"><span id="f4d7" class="ka kb hi jw b fi kc kd l ke kf">Johnny - ES6<br/>Fifi - ES6<br/>Window {parent: Window, opener: null, top: Window, length: 4, frames: Window, …}<br/>Johnny - undefined<br/>Window {parent: Window, opener: null, top: Window, length: 4, frames: Window, …}<br/>Fifi - undefined</span></pre><p id="58ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">实例 6</p><p id="ea46" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在类中声明函数或在回调中调用函数时，使用箭头函数总是安全的。</p><pre class="jr js jt ju fd jv jw jx jy aw jz bi"><span id="09b7" class="ka kb hi jw b fi kc kd l ke kf">class Greeting {</span><span id="2c27" class="ka kb hi jw b fi kg kd l ke kf">constructor() {<br/>    this.name = 'John';<br/>  }</span><span id="7661" class="ka kb hi jw b fi kg kd l ke kf">greetMorning() {console.log('Good Morning ' + this.name);}</span><span id="c85d" class="ka kb hi jw b fi kg kd l ke kf">greetAfternoon = () =&gt; {console.log('Good Afternoon ' + this.name);};<br/>  <br/>greetEvening = function() {console.log('Good Evening ' + this.name);}  <br/>}</span><span id="f7b1" class="ka kb hi jw b fi kg kd l ke kf">const g = new Greeting();</span><span id="73cf" class="ka kb hi jw b fi kg kd l ke kf">g.name = "fifi"</span><span id="35ec" class="ka kb hi jw b fi kg kd l ke kf">g.greetMorning();<br/>g.greetAfternoon();<br/>g.greetEvening();</span><span id="bef4" class="ka kb hi jw b fi kg kd l ke kf">const button1 = document.getElementById('btn1');<br/>const button2 = document.getElementById('btn2');<br/>const button3 = document.getElementById('btn3');<br/>const button4 = document.getElementById('btn4');<br/>const button5 = document.getElementById('btn5');<br/>const button6 = document.getElementById('btn6');</span><span id="c1ec" class="ka kb hi jw b fi kg kd l ke kf">button1.addEventListener('click', () =&gt; (g.greetMorning()));<br/>button2.addEventListener('click', () =&gt; (g.greetAfternoon()));<br/>button3.addEventListener('click', () =&gt; (g.greetEvening()));<br/>button4.addEventListener('click', g.greetMorning);<br/>button5.addEventListener('click', g.greetAfternoon);<br/>button6.addEventListener('click', g.greetEvening);</span></pre><p id="e801" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出</p><pre class="jr js jt ju fd jv jw jx jy aw jz bi"><span id="a918" class="ka kb hi jw b fi kc kd l ke kf">Good Morning fifi<br/>Good Afternoon fifi<br/>Good Evening fifi<br/>Good Morning fifi<br/>Good Afternoon fifi<br/>Good Evening fifi<br/>Good Morning <br/>Good Afternoon fifi<br/>Good Evening</span></pre></div></div>    
</body>
</html>