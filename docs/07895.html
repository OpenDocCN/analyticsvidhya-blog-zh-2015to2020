<html>
<head>
<title>Plotting multiple figures with live data using Dash and Plotly</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Dash和Plotly绘制具有实时数据的多个图形</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/plotting-multiple-figures-with-live-data-using-dash-and-plotly-4f5277870cd7?source=collection_archive---------5-----------------------#2020-07-11">https://medium.com/analytics-vidhya/plotting-multiple-figures-with-live-data-using-dash-and-plotly-4f5277870cd7?source=collection_archive---------5-----------------------#2020-07-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="8c02" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每当谈到数据的可视化时，plotly都会作为一个突出的包在多个选项中进行选择，尤其是在谈到交互性时，它还附带了Dash，这是一个用于创建强大仪表板的便捷框架。当你有实时数据和多个数字时。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/3917e3d382d134bb5a04b89b7480dc42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zvsfLFDMIltbaNPq"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">斯蒂芬·道森在<a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="2015" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有时为每个数字设置一个间隔并让Dash在该间隔内更新数字是很容易的，但是要考虑您使用的数据是否在所有数字之间共享。所以你必须在每次回调中处理数据，没错！..你必须多次做同样的计算，而且你不能在回调之外更新数据，因为那样的话数据就不会被更新，你也不能使用全局变量，因为这会破坏你的应用程序，尤其是当你有用户输入的时候。</p><p id="f3c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一种方法是创建一个隐藏的div，处理并存储数据，然后用它作为回调的输入，你可以在<a class="ae jt" href="https://dash.plotly.com/sharing-data-between-callbacks" rel="noopener ugc nofollow" target="_blank">这里</a>找到这个例子</p><p id="b5f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是如果是这样呢</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ju"><img src="../Images/25978cc37e15cfa614f369df7c3269b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*y4OTl4us9VQ3K9LFGJKpLA.png"/></div></figure><p id="9ec8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">也就是说，对于每个图形，您都必须处理主实时数据中的数据。在这种情况下，您必须在每个回调中处理从JSON字符串中读取的数据，这也是计算开销很大的，并且您可能会遇到错误。</p><p id="ff91" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，更好的方法是使用多个输出</p><p id="da49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将使用我最近创建的COVID 19的Live dashboard示例向您展示，您可以在此处找到源代码<a class="ae jt" href="https://github.com/imZain448/Covid_19_Dashboard" rel="noopener ugc nofollow" target="_blank"/>，也可以查看<a class="ae jt" href="https://covid19livetracking.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">应用</a></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jv"><img src="../Images/0fb8d8688830f35aed3f577085ed2563.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H5L2Th6BPbMlhbjEfLGF5A.jpeg"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jw"><img src="../Images/715395a7ef1fcdca7cce38e60422f089.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rbu3FMxJvcpPsy0J8yVGTA.jpeg"/></div></div></figure><p id="6f65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">那我们开始吧。现在，由于这篇文章主要关注Dash中的实时数据处理，我不会沉迷于这些情节是如何创建的。所以初始化app.py文件后的第一步。正在为你的应用创建布局</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jx jy l"/></div></figure><p id="3bf6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在你可以看到我们还没有为<strong class="ih hj"> <em class="jz"> dcc指定图形属性。Graph </em> </strong>这是因为我们将使用回调函数向它提供图形。</p><blockquote class="ka kb kc"><p id="ce40" class="if ig jz ih b ii ij ik il im in io ip kd ir is it ke iv iw ix kf iz ja jb jc hb bi translated">记住您给这些数字的id，因为它将在回调的输出中使用</p></blockquote><p id="ed58" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以现在我们将写回我们的电话</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jx jy l"/></div></figure><p id="dee9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，您可以看到，我们使用fig_1和fig _ 2 ids来指定回调的输出，该函数在单个回调中处理所有数据并创建所有图形，因此，我们没有使用不同的回调来更新不同的图形，而是使用单个回调来完成所有计算，这降低了计算成本。此外，查看回调输入，它是一个间隔组件。这个组件控制回调被调用的频率，例如你可以在布局中看到<em class="jz"> dcc的间隔属性。间隔</em>设置为360*1000，这意味着它每360秒更新一次，即6分钟</p><p id="3dae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是在某些情况下，如果您希望以不同的时间间隔更新数据，那么您必须使用多个回调，但是在这种情况下，您只需将隐藏的divs id添加到处理数据的主回调输出中。记得将数据转换成JSON格式，以字符串的形式存储它</p><blockquote class="ka kb kc"><p id="a33f" class="if ig jz ih b ii ij ik il im in io ip kd ir is it ke iv iw ix kf iz ja jb jc hb bi translated">上面的代码是一个虚拟代码，只是为了便于解释，所以我建议不要复制粘贴它。但是你可以去<a class="ae jt" href="https://github.com/imZain448/Covid_19_Dashboard/blob/master/app.py" rel="noopener ugc nofollow" target="_blank">回购</a>获得完整的源代码</p></blockquote><p id="b16c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就这样，现在你知道如何为你的应用高效地处理实时数据了</p><p id="f9ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后是一些我推荐参观的文章</p><ul class=""><li id="c6e1" class="kg kh hi ih b ii ij im in iq ki iu kj iy kk jc kl km kn ko bi translated"><a class="ae jt" rel="noopener" href="/@lowweihong/simple-steps-to-build-a-live-stream-dashboard-using-python-dash-23562dea9d3f">使用Python Dash构建实时流仪表盘的简单步骤</a></li><li id="340e" class="kg kh hi ih b ii kp im kq iq kr iu ks iy kt jc kl km kn ko bi translated"><a class="ae jt" href="https://towardsdatascience.com/building-a-real-time-dashboard-using-python-plotly-library-and-web-service-145f50d204f0" rel="noopener" target="_blank">使用Python Plotly库和Web服务构建实时仪表板</a></li></ul></div></div>    
</body>
</html>