<html>
<head>
<title>Clump — a Python package for easily finding related stories and documents</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">clump——用于轻松查找相关故事和文档的Python包</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/clump-a-python-package-for-easily-finding-related-stories-and-documents-3ed992a35f8c?source=collection_archive---------20-----------------------#2020-03-08">https://medium.com/analytics-vidhya/clump-a-python-package-for-easily-finding-related-stories-and-documents-3ed992a35f8c?source=collection_archive---------20-----------------------#2020-03-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/9f34693724e2ccf1cff1a7129a8ce134.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rqRf7-D6pFoZHgFxUY_BDg.jpeg"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">来源<a class="ae hv" href="https://pixabay.com/users/MichaelGaida-652234/" rel="noopener ugc nofollow" target="_blank"> MichaelGaida </a>通过<a class="ae hv" href="https://pixabay.com/photos/news-daily-newspaper-press-1172463/" rel="noopener ugc nofollow" target="_blank"> pixabay </a></figcaption></figure><div class=""/><p id="76fb" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">易于使用的库，用于分组、标记和查找相似的文档，使用先进的自然语言处理技术。</p><p id="ccc8" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这个包的最初目的是寻找相似或相关的文档。这方面的典型用例是希望显示特定新闻故事相关内容的新闻应用程序。</p><p id="2b59" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">许多开发人员没有时间投资学习这方面的最佳实践，因此该模块提供了一个简单的包，用于加载所有要考虑的内容，然后一个函数，给出一段文本，将找到所有相关的故事。</p><p id="20e6" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这篇文章中，我们将看看如何从多个网站加载新闻，并为某个特定的提要找到相似的故事。</p><h2 id="59f1" class="jt ju hy bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">入门指南</h2><p id="d1c3" class="pw-post-body-paragraph iv iw hy ix b iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">第一步是在你的终端上安装<code class="du kt ku kv kw b">pip</code>包。在这个例子中，我们还将使用<code class="du kt ku kv kw b">feedparser </code>包从新闻网站获取提要。使用以下命令从终端安装这些组件:</p><pre class="kx ky kz la fd lb kw lc ld aw le bi"><span id="e9e4" class="jt ju hy kw b fi lf lg l lh li">$ pip3 install clump<br/>$ pip3 install feedparser</span></pre><h2 id="ebf1" class="jt ju hy bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">正在加载新闻源</h2><p id="7301" class="pw-post-body-paragraph iv iw hy ix b iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">为了获取一些内容，我们将从一些新闻网站加载feeds来查看一些最近的内容，并找出其中的相似之处。</p><p id="379e" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这可以通过以下方式实现:</p><pre class="kx ky kz la fd lb kw lc ld aw le bi"><span id="2fcc" class="jt ju hy kw b fi lf lg l lh li">import feedparser</span><span id="f74a" class="jt ju hy kw b fi lj lg l lh li">feeds = ["https://www.theguardian.com/uk/rss",<br/>    "https://www.telegraph.co.uk/news/rss.xml",<br/>    "http://rss.cnn.com/rss/cnn_topstories.rss"]</span><span id="28b0" class="jt ju hy kw b fi lj lg l lh li"># load all articles from the feeds<br/>training_articles = [entry.title for url in feeds for entry in feedparser.parse(url).entries]</span><span id="94af" class="jt ju hy kw b fi lj lg l lh li">print(training_articles)</span></pre><p id="7378" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">运行这段代码应该会显示一组新闻标题。</p><h2 id="4100" class="jt ju hy bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">构建模型</h2><p id="a085" class="pw-post-body-paragraph iv iw hy ix b iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">扩展上面的代码，我们可以将这些文章从<code class="du kt ku kv kw b">clump</code>传递到VectorSpaceModel，以便训练算法:</p><pre class="kx ky kz la fd lb kw lc ld aw le bi"><span id="9597" class="jt ju hy kw b fi lf lg l lh li">from clump.model import VectorSpaceModel</span><span id="4a84" class="jt ju hy kw b fi lj lg l lh li">model = VectorSpaceModel(training_articles)</span></pre><h2 id="8ff4" class="jt ju hy bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated"><strong class="ak">寻找相似的故事</strong></h2><p id="3eb8" class="pw-post-body-paragraph iv iw hy ix b iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">现在，我们可以查询我们的模型来查找与新故事相似的训练过的故事。写这篇文章时恰逢国际妇女节，这是一个非常受欢迎的主题。以下是一个查询示例:</p><pre class="kx ky kz la fd lb kw lc ld aw le bi"><span id="9cee" class="jt ju hy kw b fi lf lg l lh li">related = model.find_similar('International Women's Day: Duchess of Sussex surprises schoolchildren')</span></pre><p id="b569" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这返回了以下故事:</p><pre class="kx ky kz la fd lb kw lc ld aw le bi"><span id="e1e3" class="jt ju hy kw b fi lf lg l lh li">5 facts about International Women’s Day</span><span id="1a27" class="jt ju hy kw b fi lj lg l lh li">Surprise! Duchess Meghan goes to church with the queen, marks International Women’s Day at a school assembly</span><span id="6bde" class="jt ju hy kw b fi lj lg l lh li">#EachforEqual is the theme for International Women’s Day 2020. Here’s what you should know.</span></pre><h2 id="f7f9" class="jt ju hy bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">高级选项—最大匹配数</h2><p id="9893" class="pw-post-body-paragraph iv iw hy ix b iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">默认情况下，<code class="du kt ku kv kw b">find_similar</code>最多返回5条记录。这可以通过为<code class="du kt ku kv kw b">n</code>输入一个特定值来改变，如下所示:</p><pre class="kx ky kz la fd lb kw lc ld aw le bi"><span id="6522" class="jt ju hy kw b fi lf lg l lh li">related = model.find_similar('Coronavirus: How to wash your hands - in 20 seconds', n=3)</span></pre><p id="04c8" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hz">高级选项—相似性阈值</strong></p><p id="328c" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当您涉及一系列主题时，可能很难找到密切相关的内容。这种方法中的基本算法考虑文本片段之间的相似性百分比，介于0和1之间(0 =无相似性，1 =相同)。默认情况下，这是0.4，因此如果我们不太担心相似性，我们可以将其减少到0.3:</p><pre class="kx ky kz la fd lb kw lc ld aw le bi"><span id="b3fd" class="jt ju hy kw b fi lf lg l lh li">similar = model.find_similar('Coronavirus: How to wash your hands - in 20 seconds', distance_threshold=0.3)</span></pre><p id="cb7d" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">结果按相关性排序，因此最相关的故事出现在结果的最前面。</p><h2 id="4f08" class="jt ju hy bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">将所有这些放在一起:完整的示例</h2><p id="c753" class="pw-post-body-paragraph iv iw hy ix b iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">对于这个例子，我们将根据来自10个不同新闻源的故事来训练我们的模型，然后看看BBC的最新故事是如何关联的。</p><pre class="kx ky kz la fd lb kw lc ld aw le bi"><span id="5819" class="jt ju hy kw b fi lf lg l lh li"><br/>import feedparser<br/>from clump.model import VectorSpaceModel</span><span id="49a2" class="jt ju hy kw b fi lj lg l lh li">feeds = [“https://www.theguardian.com/uk/rss",<br/>   “https://www.telegraph.co.uk/news/rss.xml",<br/>   “http://rss.cnn.com/rss/cnn_topstories.rss",<br/>   “http://rssfeeds.usatoday.com/usatoday-NewsTopStories",<br/>   “https://abcnews.go.com/abcnews/usheadlines",<br/>   “http://rss.nytimes.com/services/xml/rss/nyt/World.xml",<br/>   “http://feeds.feedburner.com/time/newsfeed",<br/>   “https://feeds.a.dj.com/rss/RSSWorldNews.xml",<br/>   “http://feeds.foxnews.com/foxnews/latest",<br/>   “https://www.huffpost.com/section/front-page/feed"]</span><span id="4d45" class="jt ju hy kw b fi lj lg l lh li">test_feed = “http://feeds.bbci.co.uk/news/rss.xml"</span><span id="a942" class="jt ju hy kw b fi lj lg l lh li"># load all articles from the feeds<br/>training_articles = [entry.title for url in feeds for entry in feedparser.parse(url).entries]<br/>test_articles = [entry.title for entry in feedparser.parse(test_feed).entries]</span><span id="eee7" class="jt ju hy kw b fi lj lg l lh li"># create the model<br/>model = VectorSpaceModel(training_articles)</span><span id="3cd4" class="jt ju hy kw b fi lj lg l lh li"># find all the similar items for the test feed<br/>for test_article in test_articles:<br/>    similar = model.find_similar(test_article, distance_threshold=0.3)<br/>    if len(similar) &gt; 0:<br/>        print(test_article + “\n\t” + “\n\t”.join(similar) + “\n”)</span></pre><p id="aa77" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">非常感谢对功能的任何意见或要求。</p></div></div>    
</body>
</html>