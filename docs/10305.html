<html>
<head>
<title>Automated Image Annotation using Auto-Annotate Tool</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用自动注释工具的自动图像注释</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/automated-image-annotation-using-auto-annotate-tool-f8fff8ea4900?source=collection_archive---------1-----------------------#2020-10-13">https://medium.com/analytics-vidhya/automated-image-annotation-using-auto-annotate-tool-f8fff8ea4900?source=collection_archive---------1-----------------------#2020-10-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/c88910f85d52018b8f4cbb3c32353723.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yw04Ejw5GV7EiAHr3__hgw.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">自动注释透明徽标</figcaption></figure><div class=""/><div class=""><h2 id="fbf7" class="pw-subtitle-paragraph iu hw hx bd b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl dx translated">就像说“注释自动驾驶汽车数据集(目录)中的所有街道标志(标签)”一样简单，然后嘭！完成了。</h2></div><p id="bd54" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">在<strong class="jo hy"> </strong>平均来说，创建一个多边形遮罩并使用一些工具对其进行注释大约需要 30 多秒。使用 Auto-Annotate，可以通过点击单个命令来自动化注释图像的这一令人厌烦的手动重叠部分。开源的自动注释工具基于标签为某个目录中的图像中的对象提供了分割掩模的自动注释。</p><blockquote class="ki kj kk"><p id="60e0" class="jm jn kl jo b jp jq iy jr js jt jb ju km jw jx jy kn ka kb kc ko ke kf kg kh hb bi translated"><strong class="jo hy">在本文中，</strong>我将带您了解图像注释的基础知识、功能、代码以及自动注释工具的用法。<a class="ae kp" href="https://www.github.com/mdhmz1/Auto-Annotate" rel="noopener ugc nofollow" target="_blank"> GitHub 自动注释库可以在这里找到。</a></p></blockquote><figure class="kr ks kt ku fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kq"><img src="../Images/68beb7d7145a7821cd0cb97e76846055.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*967GfzPlCxw7sx0t"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">由<a class="ae kp" href="https://unsplash.com/@austindistel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Austin Distel </a>在<a class="ae kp" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="61c9" class="kv kw hx bd kx ky kz la lb lc ld le lf jd lg je lh jg li jh lj jj lk jk ll lm bi translated">图像注释</h1><p id="2c40" class="pw-post-body-paragraph jm jn hx jo b jp ln iy jr js lo jb ju jv lp jx jy jz lq kb kc kd lr kf kg kh hb bi translated">图像注释形成了为计算机视觉模型建立数据集的基础。图像注释是将标签形式的元数据分配给图像中各种实体的过程。这是一种数据标记技术，它标记了我们希望机器学习模型进行训练的图像中的特征。</p><p id="328c" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">最常见的图像注释类型有:</p><ul class=""><li id="6864" class="ls lt hx jo b jp jq js jt jv lu jz lv kd lw kh lx ly lz ma bi translated">2D 包围盒</li><li id="967d" class="ls lt hx jo b jp mb js mc jv md jz me kd mf kh lx ly lz ma bi translated">多边形分割</li><li id="77fa" class="ls lt hx jo b jp mb js mc jv md jz me kd mf kh lx ly lz ma bi translated">直线和样条曲线</li><li id="9f7e" class="ls lt hx jo b jp mb js mc jv md jz me kd mf kh lx ly lz ma bi translated">语义分割</li><li id="4d47" class="ls lt hx jo b jp mb js mc jv md jz me kd mf kh lx ly lz ma bi translated">三维长方体</li></ul><p id="ed1c" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">在这个工具中，我们执行多边形分割，并为它们提供注释，因为它们减少了噪声，并让模型专注于所需的一组预期像素。</p></div><div class="ab cl mg mh gp mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="hb hc hd he hf"><h1 id="90b4" class="kv kw hx bd kx ky mn la lb lc mo le lf jd mp je lh jg mq jh lj jj mr jk ll lm bi translated">自动注释工具</h1><p id="490d" class="pw-post-body-paragraph jm jn hx jo b jp ln iy jr js lo jb ju jv lp jx jy jz lq kb kc kd lr kf kg kh hb bi translated">自动注释工具建立在<a class="ae kp" href="https://github.com/matterport/Mask_RCNN" rel="noopener ugc nofollow" target="_blank">遮罩 R-CNN </a>之上，以支持图像中对象片段的每个实例的自动图像注释。Auto-Annotate 能够为 COCO 数据集中定义的标签提供自动图像注释，并且还支持自定义标签。</p><p id="7cd7" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">自动注释工具以两种模式工作:</p><ul class=""><li id="df22" class="ls lt hx jo b jp jq js jt jv lu jz lv kd lw kh lx ly lz ma bi translated">COCO 标签注释— <strong class="jo hy">无需培训</strong>。只需使用 Coco 数据集的权重，指向图像数据集目录，注释就准备好了。</li><li id="a18d" class="ls lt hx jo b jp mb js mc jv md jz me kd mf kh lx ly lz ma bi translated">自定义标签注释-为自定义标签训练模型。在图像数据集目录上使用新训练的权重，注释很快就准备好了。</li></ul><blockquote class="ki kj kk"><p id="c7a6" class="jm jn kl jo b jp jq iy jr js jt jb ju km jw jx jy kn ka kb kc ko ke kf kg kh hb bi translated"><strong class="jo hy">注:</strong>已知问题及其解决方法请参考回购中的<a class="ae kp" href="https://github.com/mdhmz1/Auto-Annotate/blob/main/knownIssues.md" rel="noopener ugc nofollow" target="_blank"> knownIssues.md </a>文件。如果在工具的安装和使用过程中出现任何错误/问题，请不吝赐教。</p></blockquote><h2 id="030b" class="ms kw hx bd kx mt mu mv lb mw mx my lf jv mz na lh jz nb nc lj kd nd ne ll nf bi translated">示例 JSON 注释:</h2><p id="8a59" class="pw-post-body-paragraph jm jn hx jo b jp ln iy jr js lo jb ju jv lp jx jy jz lq kb kc kd lr kf kg kh hb bi translated">(下面的这个例子说明了<strong class="jo hy">定制标签注释，</strong>其中被训练的模型被训练来识别和注释“鸟舍”)</p><blockquote class="ki kj kk"><p id="0d75" class="jm jn kl jo b jp jq iy jr js jt jb ju km jw jx jy kn ka kb kc ko ke kf kg kh hb bi translated">注意:JSON 响应结构对于两种风格的自动注释工具都是一样的，并且可以高度定制以满足您的需要。有关任何定制，请参考下面代码演练一节中的“JSON 格式”一节。</p></blockquote><figure class="kr ks kt ku fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ng"><img src="../Images/d2cf5e4b7572d6e4674b4a45d11a6d0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HwDCFBUbcRPEFGLhg7_wXQ.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">由 MaskRCNN 执行的图像遮罩。</figcaption></figure><figure class="kr ks kt ku fd hk"><div class="bz dy l di"><div class="nh ni l"/></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">上面鸟巢图片的 JSON 注释示例。</figcaption></figure><h2 id="2697" class="ms kw hx bd kx mt mu mv lb mw mx my lf jv mz na lh jz nb nc lj kd nd ne ll nf bi translated">JSON 格式描述:</h2><ul class=""><li id="693b" class="ls lt hx jo b jp ln js lo jv nj jz nk kd nl kh lx ly lz ma bi translated"><strong class="jo hy"> <em class="kl">文件名</em> : </strong>图像文件名。</li><li id="c829" class="ls lt hx jo b jp mb js mc jv md jz me kd mf kh lx ly lz ma bi translated"><strong class="jo hy"> <em class="kl"> id </em> : </strong>唯一 id。</li><li id="1691" class="ls lt hx jo b jp mb js mc jv md jz me kd mf kh lx ly lz ma bi translated"><strong class="jo hy"> <em class="kl">标签</em> : </strong>标签进行标注。(可可标签或定制标签)</li><li id="8009" class="ls lt hx jo b jp mb js mc jv md jz me kd mf kh lx ly lz ma bi translated"><strong class="jo hy"><em class="kl">bbox</em>:</strong>【x，y，w，h】—包围盒左上角点的 x，y 坐标。指定边界框的宽度和高度。<br/>“格式对应于包围盒的 Coco JSON 响应格式。”</li><li id="d4f3" class="ls lt hx jo b jp mb js mc jv md jz me kd mf kh lx ly lz ma bi translated"><strong class="jo hy"> <em class="kl">分割</em>:</strong>【x1，y1，x2，y2，…】—对于，Yi 属于掩膜段的像素位置。<br/>“格式对应于用于分段的 Coco JSON 响应格式。”</li></ul></div><div class="ab cl mg mh gp mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="hb hc hd he hf"><h2 id="a22d" class="ms kw hx bd kx mt mu mv lb mw mx my lf jv mz na lh jz nb nc lj kd nd ne ll nf bi translated">自动注释工具安装:</h2><ul class=""><li id="1f41" class="ls lt hx jo b jp ln js lo jv nj jz nk kd nl kh lx ly lz ma bi translated">克隆<a class="ae kp" href="https://www.github.com/mdhmz1/Auto-Annotate" rel="noopener ugc nofollow" target="_blank"> <strong class="jo hy">自动标注 GitHub </strong> </a>库。</li><li id="814a" class="ls lt hx jo b jp mb js mc jv md jz me kd mf kh lx ly lz ma bi translated">使用以下命令安装依赖项:</li></ul><pre class="kr ks kt ku fd nm nn no np aw nq bi"><span id="c0ed" class="ms kw hx nn b fi nr ns l nt nu">pip3 install -r requirements.txt</span></pre><ul class=""><li id="52d7" class="ls lt hx jo b jp jq js jt jv lu jz lv kd lw kh lx ly lz ma bi translated">如果注释标签受<strong class="jo hy"> COCO 数据集</strong>支持，从<a class="ae kp" href="https://github.com/matterport/Mask_RCNN/releases" rel="noopener ugc nofollow" target="_blank"> Mask R-CNN 发布页面</a>下载预训练的 COCO 权重(mask_rcnn_coco.h5)。<br/>如果注释<strong class="jo hy">自定义对象</strong>，使用掩码 R-CNN 训练模型，并使用新训练的模型的权重。(有关更多详细信息，请参考下面定义的定制培训)</li><li id="04db" class="ls lt hx jo b jp mb js mc jv md jz me kd mf kh lx ly lz ma bi translated">根据模式运行下面给出的命令。</li></ul><p id="04c4" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated"><em class="kl"> COCO 标签标注:</em></p><pre class="kr ks kt ku fd nm nn no np aw nq bi"><span id="1860" class="ms kw hx nn b fi nr ns l nt nu">python3 annotate.py annotateCoco --image_directory=/path/to/the/image/directory/ --label=object_label_to_annotate --weights=/path/to/weights.h5 --displayMaskedImages=False</span></pre><blockquote class="ki kj kk"><p id="82b8" class="jm jn kl jo b jp jq iy jr js jt jb ju km jw jx jy kn ka kb kc ko ke kf kg kh hb bi translated">注:—<strong class="jo hy">label = object _ label _ to _ annotate</strong>应与<a class="ae kp" href="https://cocodataset.org/" rel="noopener ugc nofollow" target="_blank"> COCO 数据集</a>标签一致。有关更多详细信息，请参考 COCO 数据集。</p></blockquote><p id="bcee" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated"><em class="kl">自定义标签标注:</em></p><pre class="kr ks kt ku fd nm nn no np aw nq bi"><span id="3271" class="ms kw hx nn b fi nr ns l nt nu">python3 annotate.py annotateCustom --image_directory=/path/to/the/image/directory/ --label=object_label_to_annotate --weights=/path/to/weights.h5 --displayMaskedImages=False</span></pre><blockquote class="ki kj kk"><p id="82bd" class="jm jn kl jo b jp jq iy jr js jt jb ju km jw jx jy kn ka kb kc ko ke kf kg kh hb bi translated">注意:—<strong class="jo hy">label = object _ label _ to _ annotate</strong>应该是一个进行训练并提供权重的标签。</p></blockquote><p id="258f" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">关于 arg params 的更多细节，请参考下面的代码演练部分。</p><ul class=""><li id="30d2" class="ls lt hx jo b jp jq js jt jv lu jz lv kd lw kh lx ly lz ma bi translated">在上面指定的目录— /path/to/the/image/directory/中找到注释。</li></ul><h2 id="c4d5" class="ms kw hx bd kx mt mu mv lb mw mx my lf jv mz na lh jz nb nc lj kd nd ne ll nf bi translated">在您自己的数据集上训练</h2><p id="ce73" class="pw-post-body-paragraph jm jn hx jo b jp ln iy jr js lo jb ju jv lp jx jy jz lq kb kc kd lr kf kg kh hb bi translated">阅读<a class="nv nw ge" href="https://medium.com/u/1a69ae209bc4?source=post_page-----f8fff8ea4900--------------------------------" rel="noopener" target="_blank">瓦利德·阿卜杜拉</a>在他的博客文章中关于使用<a class="ae kp" href="https://engineering.matterport.com/splash-of-color-instance-segmentation-with-mask-r-cnn-and-tensorflow-7c761e238b46" rel="noopener ugc nofollow" target="_blank">色彩飞溅</a>进行训练的原始文章，他非常漂亮地解释了定制训练的过程，从注释图像到使用<a class="ae kp" href="https://github.com/matterport/Mask_RCNN" rel="noopener ugc nofollow" target="_blank"> Mask R-CNN </a>进行训练。</p><p id="0298" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">然后使用<a class="ae kp" href="https://github.com/mdhmz1/Auto-Annotate/blob/main/customTrain.py" rel="noopener ugc nofollow" target="_blank"> <em class="kl"> customTrain.py </em> </a>，它是瓦利德编写的原始<a class="ae kp" href="https://github.com/matterport/Mask_RCNN/blob/master/samples/balloon/balloon.py" rel="noopener ugc nofollow" target="_blank"> balloon.py </a>的修改版本，现在只关注训练部分。</p><pre class="kr ks kt ku fd nm nn no np aw nq bi"><span id="c413" class="ms kw hx nn b fi nr ns l nt nu"># Train a new model starting from pre-trained COCO weights<br/>    python3 customTrain.py train --dataset=/path/to/custom/dataset --weights=coco</span><span id="42e5" class="ms kw hx nn b fi nx ns l nt nu"># Resume training a model that you had trained earlier<br/>    python3 customTrain.py train --dataset=/path/to/custom/dataset --weights=last</span></pre></div><div class="ab cl mg mh gp mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="hb hc hd he hf"><h1 id="7edb" class="kv kw hx bd kx ky mn la lb lc mo le lf jd mp je lh jg mq jh lj jj mr jk ll lm bi translated">代码走查</h1><p id="7845" class="pw-post-body-paragraph jm jn hx jo b jp ln iy jr js lo jb ju jv lp jx jy jz lq kb kc kd lr kf kg kh hb bi translated">本节简要介绍<a class="ae kp" href="https://github.com/mdhmz1/Auto-Annotate/" rel="noopener ugc nofollow" target="_blank">自动注释 GitHub 库</a>中<a class="ae kp" href="https://github.com/mdhmz1/Auto-Annotate/blob/main/annotate.py" rel="noopener ugc nofollow" target="_blank"> annotate.py </a>文件的构建块。</p><h2 id="cb40" class="ms kw hx bd kx mt mu mv lb mw mx my lf jv mz na lh jz nb nc lj kd nd ne ll nf bi translated">参数分析器</h2><p id="6350" class="pw-post-body-paragraph jm jn hx jo b jp ln iy jr js lo jb ju jv lp jx jy jz lq kb kc kd lr kf kg kh hb bi translated">这描述了可以传递给<a class="ae kp" href="https://github.com/mdhmz1/Auto-Annotate/blob/main/annotate.py" rel="noopener ugc nofollow" target="_blank"> annotate.py </a>的各种命令行参数的用法。</p><figure class="kr ks kt ku fd hk"><div class="bz dy l di"><div class="nh ni l"/></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">annotate.py 的参数</figcaption></figure><ul class=""><li id="c365" class="ls lt hx jo b jp jq js jt jv lu jz lv kd lw kh lx ly lz ma bi translated"><strong class="jo hy"> <em class="kl">命令</em> </strong>:可以根据需要的模式取两个值中的任意一个。<br/>值— (annotateCoco 或 annotateCustom)</li><li id="b05f" class="ls lt hx jo b jp mb js mc jv md jz me kd mf kh lx ly lz ma bi translated"><strong class="jo hy"> <em class="kl">图像 _ 目录</em> </strong>:指向数据集目录。目前支持的图像格式是“.jpg“，”。jpeg“，”。并且可以通过修改“annotateImagesInDirectory()”方法中的代码来扩展它们。</li><li id="422e" class="ls lt hx jo b jp mb js mc jv md jz me kd mf kh lx ly lz ma bi translated"><strong class="jo hy"> <em class="kl">权重</em> </strong>:如果 command = annotateCoco，则是预训练 Coco 权重的路径(mask_rcnn_coco.h5)。<br/>如果 command = annotateCustom，新训练模型的权重的路径。(在训练自定义模型完成后，可以在/log 目录中找到)。</li><li id="3e59" class="ls lt hx jo b jp mb js mc jv md jz me kd mf kh lx ly lz ma bi translated"><strong class="jo hy"> <em class="kl">标签</em> </strong>:如果 command = annotateCoco，Coco 数据集可以识别的标签。关于 Coco 数据集的标签和序列的完整列表，请参考此处的<a class="ae kp" href="https://github.com/amikelive/coco-labels/blob/master/coco-labels-2014_2017.txt" rel="noopener ugc nofollow" target="_blank"/>。<br/>如果 command = annotateCustom，则执行训练的标签和权重如上所述。</li><li id="9ff9" class="ls lt hx jo b jp mb js mc jv md jz me kd mf kh lx ly lz ma bi translated"><strong class="jo hy"/></li></ul><h2 id="7c92" class="ms kw hx bd kx mt mu mv lb mw mx my lf jv mz na lh jz nb nc lj kd nd ne ll nf bi translated">JSON 格式</h2><p id="ae29" class="pw-post-body-paragraph jm jn hx jo b jp ln iy jr js lo jb ju jv lp jx jy jz lq kb kc kd lr kf kg kh hb bi translated">这个方法可以修改成 JSON 响应注释格式，以支持根据您的需要定制的任何类型的响应。</p><p id="3e77" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">边界框结构“bbox”可以被改变以支持左上和右下样式的边界框。</p><p id="4ea8" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">为了支持[x1，x2，…，xn，y1，y2，…，yn]格式，可以更改分段。</p><p id="7a44" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">也可以在注释中添加一个区域。</p><figure class="kr ks kt ku fd hk"><div class="bz dy l di"><div class="nh ni l"/></div></figure></div><div class="ab cl mg mh gp mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="hb hc hd he hf"><p id="9695" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">感谢阅读这篇文章！如果你觉得这篇文章或这个工具很有见地，那就表达出你的爱吧。❤️ 👏</p></div><div class="ab cl mg mh gp mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="hb hc hd he hf"><p id="093d" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">在 Linkedin 上与我联系<a class="ae kp" href="https://www.linkedin.com/in/mdhmz1/" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><blockquote class="ny"><p id="b1c4" class="nz oa hx bd ob oc od oe of og oh kh dx translated">干杯！</p></blockquote></div></div>    
</body>
</html>