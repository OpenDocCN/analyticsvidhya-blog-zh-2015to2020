<html>
<head>
<title>Deploying Movie Review Sentiment Model to Ubuntu EC2 instance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将电影评论情感模型部署到Ubuntu EC2实例</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/deploying-movie-review-sentiment-model-to-ubuntu-ec2-instance-5a1198f997cd?source=collection_archive---------21-----------------------#2020-08-21">https://medium.com/analytics-vidhya/deploying-movie-review-sentiment-model-to-ubuntu-ec2-instance-5a1198f997cd?source=collection_archive---------21-----------------------#2020-08-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/e00f7feb534b64eb4c410bb67b6c9483.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*a_aHhQ8_OXmVY0iR.jpeg"/></div></figure><p id="cab6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在我之前的<a class="ae jk" rel="noopener" href="/@sarthak3398/deploying-sentiment-analysis-model-to-ec2-instance-c3e8ad900e98"> <strong class="io hj">博客</strong> </a> <strong class="io hj"> </strong>中，我已经将电影评论情感分析模型部署到Windows EC2实例，但现在我将把我的模型部署到Ubuntu EC2实例。</p><p id="e1b0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">所以让我们开始吧…..</p><h1 id="6554" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">安装</h1><p id="b000" class="pw-post-body-paragraph im in hi io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated">在github中可以找到<a class="ae jk" href="https://github.com/sarthak-sriw/DisttilBERT-App/blob/master/distilbert.ipynb" rel="noopener ugc nofollow" target="_blank">笔记本</a>和<a class="ae jk" href="https://github.com/sarthak-sriw/IMDB-Movie-Reviews-Large-Dataset-50k" rel="noopener ugc nofollow" target="_blank">数据集</a>链接。克隆<a class="ae jk" href="https://github.com/sarthak-sriw/DisttilBERT-App" rel="noopener ugc nofollow" target="_blank"> github仓库</a>并将该文件夹的所有内容存储在一个新文件夹<strong class="io hj">distilbert-App</strong>中。复制<strong class="io hj">distilbert-App</strong>来驱动并打开colab中的<strong class="io hj"> distilbert.ipynb </strong>并执行单元格，最后我们将保存模型的权重以备将来使用。将砝码下载到本地主机系统的文件夹<strong class="io hj"> distilbert中。</strong>复制distilbert-App里面的distilbert。在所有的步骤之后，你的<strong class="io hj">distilbert-App</strong>文件夹将会是这样的。</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div class="er es ko"><img src="../Images/e1d4ddfd5b116615301f2e1bd54040f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/0*rUI-tLNLVnxB-IDK.png"/></div><figcaption class="kt ku et er es kv kw bd b be z dx translated"><strong class="bd jn">distilbert-App</strong>文件夹</figcaption></figure><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es kx"><img src="../Images/7ddc38b27d92a92d58582e466c9d314b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*iBLLvN0c8cf3DdYc.png"/></div></div></figure><figure class="kp kq kr ks fd ij er es paragraph-image"><div class="ab fe cl lc"><img src="../Images/91d54318893b9fb74fc9ad789bdd8821.png" data-original-src="https://miro.medium.com/v2/format:webp/1*HyOBOPTAwlBUuGrnO8aifA.png"/></div><figcaption class="kt ku et er es kv kw bd b be z dx translated"><strong class="bd jn">蒸馏器文件夹</strong></figcaption></figure><h1 id="0294" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">注意</h1><p id="36b5" class="pw-post-body-paragraph im in hi io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated">一定要下载<a class="ae jk" href="https://cmder.net/" rel="noopener ugc nofollow" target="_blank"><strong class="io hj">Cmder</strong></a><strong class="io hj"/>和<a class="ae jk" href="https://winscp.net/eng/download.php" rel="noopener ugc nofollow" target="_blank"> <strong class="io hj"> Winscp </strong> </a> <strong class="io hj">。</strong></p><h1 id="0f2d" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">设置您的AWS帐户</h1><p id="192a" class="pw-post-body-paragraph im in hi io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated">1.你可以通过<a class="ae jk" href="https://aws.amazon.com/" rel="noopener ugc nofollow" target="_blank">亚马逊网络服务门户</a>创建一个账户，点击“登录控制台”。在那里，您可以使用现有的Amazon帐户登录或创建一个新帐户。</p><p id="e66b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">2.您需要提供您的详细信息以及亚马逊可以收取费用的有效信用卡。如果你已经是亚马逊的顾客，并且有你的信用卡记录，这个过程会快很多。</p><h1 id="ca53" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">启动您的AWS实例</h1><ol class=""><li id="c69d" class="ld le hi io b ip kj it kk ix lf jb lg jf lh jj li lj lk ll bi translated">登录到您的<a class="ae jk" href="https://console.aws.amazon.com/console/home" rel="noopener ugc nofollow" target="_blank"> AWS控制台</a>并搜索EC2。</li><li id="ca14" class="ld le hi io b ip lm it ln ix lo jb lp jf lq jj li lj lk ll bi translated">单击EC2启动新的虚拟服务器。</li><li id="6d3a" class="ld le hi io b ip lm it ln ix lo jb lp jf lq jj li lj lk ll bi translated">搜索<strong class="io hj"> ubuntu </strong>并点击选择，同时确保从右上角的下拉列表中选择<strong class="io hj">美国东部(俄亥俄州)</strong>。</li></ol><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lr"><img src="../Images/0904f43cf43c555374d05ff60f07992b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oKx8HFiL86i43RFkvD4Ucg.png"/></div></div></figure><p id="969b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">4.选择您想要启动的EC2实例的类型<strong class="io hj"> t2.micro </strong>是首选，然后单击next。</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es ls"><img src="../Images/9809081b067a444eb4ec9c87ff2329da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UwrWJr4LjV4EUdV7B70FEg.png"/></div></div></figure><p id="3c97" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">5.我们将把存储从<strong class="io hj"> 8GB </strong>增加到<strong class="io hj"> 16GB </strong>，然后单击“下一步”。</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lt"><img src="../Images/b3b4f105391c87e9f2067c5a7a878ee6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BKk2I-2n8xYImq5s-iA3MA.png"/></div></div></figure><p id="b921" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">6.接下来，我们将配置实例细节，并将<strong class="io hj">类型</strong>更改为<strong class="io hj">所有流量</strong></p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lu"><img src="../Images/27b0f87cdaac4cbe5411452d5ba6a056.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YYG8KdKevd3c_fdV3YyRcQ.png"/></div></div></figure><p id="694d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">7.单击下一步，然后单击启动。然后在弹出菜单中点击<strong class="io hj">创建新的密钥对</strong>并输入任意<strong class="io hj">密钥对名称</strong>并点击<strong class="io hj">下载密钥对</strong>。这将下载一个. pem文件。复制。pem文件并将其放入文件夹<strong class="io hj"> AWS </strong>中。</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lv"><img src="../Images/ef1f0c5d98a8127687f03cb078e5436d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_jXVWQOXMj2rlnjyxu6_Bg.png"/></div></div></figure><p id="856d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">7.安装需要时间，安装后请单击查看实例。您可以看到它提供了我们将发送请求的公共IP。</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lw"><img src="../Images/a3b054b7a5b7fc8b97813b2c5fd992d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7hnWBowZpf8AhmNmMVD9sA.jpeg"/></div></div></figure><p id="9799" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">8.点击连接并打开<strong class="io hj"> cmder </strong>终端，导航到<strong class="io hj"> AWS </strong>文件夹并执行弹出菜单中提到的以下命令。</p><pre class="kp kq kr ks fd lx ly lz ma aw mb bi"><span id="0355" class="mc jm hi ly b fi md me l mf mg">chmod 400 sarthak_ubuntu.pem<br/>ssh -i "sarthak_ubuntu.pem" <a class="ae jk" href="mailto:ubuntu@ec2-3-128-91-204.us-east-2.compute.amazonaws.com" rel="noopener ugc nofollow" target="_blank">ubuntu@ec2–X–X–X–X.us-east-2.compute.amazonaws.com</a></span><span id="8f4a" class="mc jm hi ly b fi mh me l mf mg">where X will be your IP</span></pre><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es mi"><img src="../Images/f38dcff888ca668f628b426d66095af7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QNH1zt4sBC3uWv2yiHgmlA.jpeg"/></div></div></figure><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es mj"><img src="../Images/53cddcf113e5cd8b6e1f6d6ad20ef6cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cZJV9r3GQIxmP1VK5osq6A.jpeg"/></div></div></figure><p id="7d9f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">9.现在运行以下命令来安装所有的库</p><pre class="kp kq kr ks fd lx ly lz ma aw mb bi"><span id="e184" class="mc jm hi ly b fi md me l mf mg">sudo apt install python3-pip<br/>pip install ktrain — no-cache-dir</span></pre><figure class="kp kq kr ks fd ij er es paragraph-image"><div class="er es mk"><img src="../Images/c23b344d55543d51c2659e3255b3fa95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1170/format:webp/1*_4VNojTGlmS5mXzNEvTDNw.png"/></div></figure><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es ml"><img src="../Images/d38afab0cec40252c9e59995362328aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kNIsjIeJROIXyjq1dveo7A.png"/></div></div></figure><p id="3cb1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">11.现在我们需要将文件从主机传输到ubuntu实例。所以我们将使用Wincp。输入<strong class="io hj">主机IP </strong>和<strong class="io hj">用户名</strong>并点击<strong class="io hj">前进</strong>然后点击<strong class="io hj">认证</strong>并上传。<strong class="io hj"> pem </strong>文件，该文件位于<strong class="io hj"> aws </strong>文件夹中，然后按OK。只需将<strong class="io hj">distilbert-App</strong>从左窗格拖放到右窗格</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div class="er es mm"><img src="../Images/11fffe24798d06ebb312c1b6a4d5334c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*0lbKMrrseL-R4-C0mEO8FA.jpeg"/></div></figure><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es mn"><img src="../Images/6fc167d4315aa955d1a0c30573391ef7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U8DbiB7T_qgCnWol39Ouvg.png"/></div></div></figure><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es mo"><img src="../Images/d9b03d714aa0a263e5c77dc3f5c66e57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g_vDiBNE6DwlrDaHE2p49w.png"/></div></div></figure><p id="2cfb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在运行我们的服务器之前，我们需要运行几个命令，因为我们提供了16GB的存储和1GB的RAM，其中提供的Ram不够用。因此，我们将创建2GB的交换内存</p><pre class="kp kq kr ks fd lx ly lz ma aw mb bi"><span id="adfc" class="mc jm hi ly b fi md me l mf mg">sudo fallocate -l 2G /swapfile<br/>sudo chmod 600 /swapfile<br/>sudo mkswap /swapfile<br/></span></pre><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es mp"><img src="../Images/8dba7171b6480247af021001c927bb27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-g63qwuqduztDI75mVm1Xg.png"/></div></div></figure><p id="6609" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">然后执行<strong class="io hj"> sudo nano /etc/fstab </strong>，当nano编辑器打开时，添加以下行</p><pre class="kp kq kr ks fd lx ly lz ma aw mb bi"><span id="52dc" class="mc jm hi ly b fi md me l mf mg">nano /etc/fstab<br/>/swapfile none swap sw 0 0</span></pre><figure class="kp kq kr ks fd ij er es paragraph-image"><div class="er es mq"><img src="../Images/bb1e4dd74bbeb5e4bd1b8d754bb0f7ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1186/format:webp/1*vK7D8jCEKcMMl706X5A2tA.png"/></div></figure><figure class="kp kq kr ks fd ij er es paragraph-image"><div class="er es mr"><img src="../Images/c02ef623e1e858b7a3aa25fa0bbb6886.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/format:webp/1*t1Ku1QtHfsxRyMzyOjoLlQ.png"/></div></figure><p id="a357" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">12.在<strong class="io hj">distilbert-App</strong>文件夹中导航并运行</p><pre class="kp kq kr ks fd lx ly lz ma aw mb bi"><span id="f7a9" class="mc jm hi ly b fi md me l mf mg">cd DisttilBERT-App/<br/>python app.py</span></pre><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es ms"><img src="../Images/0c7df7e86165bde4c9b59b9cde770122.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vo4w33nljdUSqZtEiq5lCQ.png"/></div></div></figure><p id="bd14" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">13.转到浏览器并键入公共IP <strong class="io hj"> 3。X.X.204:5000 </strong></p><figure class="kp kq kr ks fd ij er es paragraph-image"><div class="er es mt"><img src="../Images/64330190a2a4a087a0e4b32b37f65c1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*vgSsxFx-1yHIzdx-O0MrKQ.png"/></div></figure><p id="5965" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">14.现在，我们可以从世界上的任何地方，从您的本地主机jupyter笔记本、colab等向EC2发送请求。</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div class="er es mu"><img src="../Images/39fc78b037f9933034f9510ec9cb2913.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/format:webp/1*CrqD9JMCIPEKRwchjbEwyA.png"/></div></figure><h1 id="ec0b" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">结论</h1><p id="ebf0" class="pw-post-body-paragraph im in hi io b ip kj ir is it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj hb bi translated">我们已经成功地将我们的电影评论情感分析模型部署到EC2实例…..</p></div></div>    
</body>
</html>