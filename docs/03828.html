<html>
<head>
<title>Election Visualization with R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">选举可视化与R</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/election-visualization-with-r-8b790250d889?source=collection_archive---------7-----------------------#2020-02-21">https://medium.com/analytics-vidhya/election-visualization-with-r-8b790250d889?source=collection_archive---------7-----------------------#2020-02-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/3c1315f2274fccd76d8bf6e97a513ba4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nFRtM6UD5mP8F-Gr"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">埃利奥特种马在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="ec07" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你曾经在电视频道上观看选举结果吗？激动人心，戏剧性和动作是无与伦比的。无论是印度选举结果还是美国选举结果，尖叫的电视主持人都会增加你的肾上腺素。结果每分钟都在变化。随着计票消息的涌入，不同的电视频道显示出不同的结果。慢慢地，兴奋达到了顶峰。每一个政党都声称他们赢了。这是一个充满动作戏的新世界，甚至可以在那天打败邦德电影。</p><p id="5f26" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但有一点是所有电视频道共有的，即选举结果的可视化。哪一个电视频道展示了最好的视觉效果，哪一个就赢得了那天的战斗。</p><p id="422e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">展示选举结果是一门艺术，只有通过可视化才能实现。</p><p id="ee7b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">选举结果可以以不同的方式呈现，以下是其中几种:</p><ol class=""><li id="4acf" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><em class="kc">国家地图图表</em></li></ol><p id="a045" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="kc"> 2。议会图表</em></p><p id="d07d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="kc"> 3。条形图</em></p><p id="e429" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="kc"> 4。气泡图</em></p><p id="cb42" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="kc"> 5。树形图</em></p><p id="b26d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="kc"> 6。动画图表</em></p><p id="c854" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="kc"> 7。散点图</em></p><p id="ceea" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="kc"> 8。棒棒糖图表</em></p><p id="8ca8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">9。甜甜圈图表</p><p id="f443" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">10。牛眼图等等。</p><p id="890f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然而，当谈到观赏，国家地图是最好的观赏和最有吸引力的。市场上有很多开源的选举结果软件，你可以在这里找到一些<a class="ae iu" href="https://www.goodfirms.co/blog/best-free-open-source-voting-software-solutions" rel="noopener ugc nofollow" target="_blank"/></p><p id="8b14" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你知道Tableau，那么你也可以很容易地在上面画出选举结果。</p><p id="8edd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但是所有这些可视化都可以在R中轻松完成。你只需要相当多的R语言编码知识，最先进的可视化软件包ggplot2，可视化选举结果的地区/国家的形状文件，excel/csv中的地区/国家的选举结果，最后但同样重要的是耐心。</p><p id="96db" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这篇文章中，我将向你展示如何在R中可视化选举结果，我将采取2019年印度大选结果。因为我已经从不同的网站取得了结果，如果你发现任何错误，请告诉我。这篇文章是从教育的角度写的，你可以把它作为可视化选举结果或你正在做的任何可视化项目的基础。我在几乎所有的图表中都提到了结果来源。然而，你可以在这里找到印度2019年大选的最终结果<a class="ae iu" href="https://eci.gov.in/" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="986a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我很难在正确的印度文件中找到正确的印度和州边界。我试着在网上搜索文件印度的形状，最后在这里找到了一个<a class="ae iu" href="https://drive.google.com/drive/folders/0ByLjiBJ1xOpuTVRIWThhazBLdWM" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="a0e5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当你下载一个形状文件时，其他文件也会以不同的格式下载。shp，。dbf，。shx，。sbn和. sbx。</p><p id="7aa3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">形状文件是一个庞大复杂的文件。根据维基百科，<strong class="ix hj">形状文件</strong>格式是地理信息系统(GIS)软件的地理空间矢量数据格式。它是由Esri开发和管理的，是Esri和其他GIS软件产品之间数据互操作性的开放规范。它包含了各个地方的经度和纬度数据。点击阅读更多关于形状文件<a class="ae iu" href="https://en.wikipedia.org/wiki/Shapefile" rel="noopener ugc nofollow" target="_blank">的信息。</a></p><p id="352f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们在r中开始可视化。</p><p id="5b0a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了可视化一个形状文件，你需要各种不同的R包，如下所示:</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="888b" class="km kn hi ki b fi ko kp l kq kr"><em class="kc">library(ggplot2)<br/>library(maptools)<br/>library(rgeos)<br/>library(ggmap)<br/>library(scales)<br/>library(RColorBrewer)<br/>library(sf)<br/>library(rgdal)<br/>library(dplyr)<br/>library(plotly)<br/>library(mapproj)</em></span></pre><p id="7ce7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">设置一个随机种子并加载形状文件。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="9f09" class="km kn hi ki b fi ko kp l kq kr"><em class="kc">set.seed(8000)</em></span><span id="12d4" class="km kn hi ki b fi ks kp l kq kr"><em class="kc">shp &lt;- readOGR(‘D:/Harish/R practice projects/india/Election/india_pc_2019.shp’) </em></span><span id="2ed3" class="km kn hi ki b fi ks kp l kq kr"><em class="kc"># India shape file With Telangana, Chattisgarhand J&amp;K<br/>names(shp)</em></span><span id="b690" class="km kn hi ki b fi ks kp l kq kr"><em class="kc">[1] “ST_NAME” “PC_NAME” “ST_CODE” “PC_CODE” “Res”</em></span></pre><p id="07d0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你在一个形状文件上做一个str，你会在屏幕上得到一个很大的结果。在这里粘贴一部分输出:</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="e9a4" class="km kn hi ki b fi ko kp l kq kr"><em class="kc">str(shp)</em></span><span id="1f90" class="km kn hi ki b fi ks kp l kq kr"><em class="kc">.. .. .. .. .. .. ..@ area : num 1.35<br/> .. .. .. .. .. .. ..@ hole : logi FALSE<br/> .. .. .. .. .. .. ..@ ringDir: int 1<br/> .. .. .. .. .. .. ..@ coords : num [1:5812, 1:2] 80.2 80.2 80.2 80.2 80.2 …<br/> .. .. .. ..@ plotOrder: int 1<br/> .. .. .. ..@ labpt : num [1:2] 80.1 29.9<br/> .. .. .. ..@ ID : chr “19”<br/> .. .. .. ..@ area : num 1.35</em></span></pre><p id="3a30" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">字段ID在这里很重要。让我们绘制形状文件。见下图1。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="5c2f" class="km kn hi ki b fi ko kp l kq kr"><em class="kc">plot(shp</em>)</span></pre><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es kt"><img src="../Images/23a3897bc41144d7f0190ac8836c761e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*MFj5FYkfZZSZhZVpi4uFsQ.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">带有形状文件的印度地图</figcaption></figure><p id="d2ec" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我对形状文件做了一些特征工程和数据清理，因为我发现一些地名在两种状态下是常见的。所以我不得不纠正他们。</p><p id="240b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="kc"> #根据状态手动分离部分位置</em></p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="1b1e" class="km kn hi ki b fi ko kp l kq kr"><em class="kc">shp$PC_NAME[ shp$RId == 3] &lt;- “HAMIRPUR, HIMACHAL PRADESH”<br/>shp$PC_NAME[ shp$RId == 119] &lt;- “HAMIRPUR, UTTAR PRADESH”<br/>shp$PC_NAME[shp$RId == 135] &lt;- “MAHARAJGANJ, UTTAR PRADESH”<br/>shp$PC_NAME[shp$RId == 171] &lt;- “MAHARAJGANJ, BIHAR”<br/>shp$PC_NAME[shp$RId == 181] &lt;- “AURANGABAD, BIHAR”<br/>shp$PC_NAME[shp$RId == 359] &lt;- “AURANGABAD, MAHARASHTRA”</em></span></pre><p id="8894" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">根据此形状文件制作数据框。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="7a4b" class="km kn hi ki b fi ko kp l kq kr">#making dataframe</span><span id="2220" class="km kn hi ki b fi ks kp l kq kr"><em class="kc">shp.f &lt;- fortify(shp, region=”PC_NAME”)<br/>head(shp.f)</em></span><span id="e9b2" class="km kn hi ki b fi ks kp l kq kr"><em class="kc">long lat order hole piece id group<br/>1 78.33642 19.88331 1 FALSE 1 ADILABAD(ST) ADILABAD(ST).1<br/>2 78.33689 19.88322 2 FALSE 1 ADILABAD(ST) ADILABAD(ST).1<br/>3 78.33868 19.88331 3 FALSE 1 ADILABAD(ST) ADILABAD(ST).1<br/>4 78.34025 19.88344 4 FALSE 1 ADILABAD(ST) ADILABAD(ST).1<br/>5 78.34203 19.88310 5 FALSE 1 ADILABAD(ST) ADILABAD(ST).1<br/>6 78.34388 19.88283 6 FALSE 1 ADILABAD(ST) ADILABAD(ST).1</em></span><span id="39fe" class="km kn hi ki b fi ks kp l kq kr"><em class="kc">&gt; nrow(shp.f) #no of records<br/>[1] 3199318</em></span></pre><p id="b236" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们加载我们的选举数据。在加载数据之前，我必须对选举结果文件进行特征工程，以使其与形状文件相匹配。在这两个文件中，电脑的拼写名称是不同的。我不得不手动纠正它们。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="33a4" class="km kn hi ki b fi ko kp l kq kr"><em class="kc">Results &lt;- read.csv(‘D:/Harish/R practice projects/india/election/Data/2019 Results New.csv’)<br/>names(Results)</em></span><span id="b108" class="km kn hi ki b fi ks kp l kq kr"><em class="kc">&gt; names(Results)<br/> [1] “From.election.2019” “comp1” “id” “comp2” <br/> [5] “id_1” “Winning.Candidate” “Party” “W_Alliance” <br/> [9] “Losing.Candidate” “Party.1” “Alliance” “X.REF.”</em></span></pre><p id="f1cd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们来看看数据。它有543条记录。对于一个议会选区来说，在此期间没有举行选举。而且是后来举办的。该结果不包含在本文中。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="0029" class="km kn hi ki b fi ko kp l kq kr"><em class="kc">&gt; head(Results, n = 2)<br/> From.election.2019 comp1 id comp2 id_1 Winning.Candidate Party W_Alliance<br/>1 ADILABAD(ST) ADILABAD(ST) ADILABAD(ST) ADILABAD(ST) ADIL Soyam Bapu Rao BJP NDA<br/>2 AGRA (SC) AGRA (SC) AGRA (SC) AGRA (SC) AGRA Satyapal Singh Baghel BJP NDA<br/> Losing.Candidate Party.1 Alliance X.REF.<br/>1 Godam Nagesh TRS OTHERS #REF!<br/>2 Manoj Kumar Soni BSP MGB/OTHERS #REF!<br/>&gt; nrow(Results)<br/>[1] 543</em></span></pre><p id="7c4c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">“ID”字段包含议会选区名称。这两个文件中都有该字段。所以我们将使用这个字段来合并这两个文件，然后对这个文件进行排序。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="a1a2" class="km kn hi ki b fi ko kp l kq kr"><em class="kc">#merging the data by constituency</em></span><span id="fdee" class="km kn hi ki b fi ks kp l kq kr"><em class="kc">merged &lt;-merge(shp.f,Results, by=”id”)</em></span><span id="ae6e" class="km kn hi ki b fi ks kp l kq kr"><em class="kc">final.data&lt;-merged[order(merged$order), ]</em></span><span id="a5c2" class="km kn hi ki b fi ks kp l kq kr"><em class="kc">head(final.data, n = 2)</em></span><span id="06de" class="km kn hi ki b fi ks kp l kq kr"><em class="kc">&gt; head(final.data, n = 2)<br/> id long lat order hole piece group From.election.2019 comp1<br/>5568 ADILABAD(ST) 78.33642 19.88331 1 FALSE 1 ADILABAD(ST).1 ADILABAD(ST) ADILABAD(ST)<br/>5569 ADILABAD(ST) 78.33689 19.88322 2 FALSE 1 ADILABAD(ST).1 ADILABAD(ST) ADILABAD(ST)<br/> comp2 id_1 Winning.Candidate Party W_Alliance Losing.Candidate Party.1 Alliance X.REF.<br/>5568 ADILABAD(ST) ADIL Soyam Bapu Rao BJP NDA Godam Nagesh TRS OTHERS #REF!<br/>5569 ADILABAD(ST) ADIL Soyam Bapu Rao BJP NDA Godam Nagesh TRS OTHERS #REF!</em></span></pre><p id="46aa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们看看最终文件中的字段名。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="75ea" class="km kn hi ki b fi ko kp l kq kr"><em class="kc">&gt; names(merged)<br/> [1] “id” “long” “lat” “order” <br/> [5] “hole” “piece” “group” “From.election.2019”<br/> [9] “comp1” “comp2” “id_1” “Winning.Candidate” <br/>[13] “Party” “W_Alliance” “Losing.Candidate” “Party.1” <br/>[17] “Alliance” “X.REF.”</em></span></pre><p id="02f4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我想用颜色代表政党。所以我为此写了一小段代码。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="ceb9" class="km kn hi ki b fi ko kp l kq kr"><em class="kc">cols &lt;- c(<br/> “TRS” = “darkseagreen3”,<br/> “NDA” = “darkorange”,<br/> “UPA” = “blue”,<br/> “MGB” = “green”,<br/> “YSRC” = “darksalmon”,<br/> “TMC” = “deeppink1”,<br/> “BJD” = “darkorchid2”,<br/> “NA” = “cyan”,<br/> “OTHERS”= “red”<br/> )</em></span></pre><h1 id="6daf" class="ku kn hi bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated"><strong class="ak">国家地图图表</strong></h1><p id="bec0" class="pw-post-body-paragraph iv iw hi ix b iy lr ja jb jc ls je jf jg lt ji jj jk lu jm jn jo lv jq jr js hb bi translated">我们已经准备好了最终文件。让我们开始在印度的地图上展示这些数据。我将使用ggplot2来制作这个图表。我将使用美学— ggpolygon在印度的地图上绘制数据。请参见下面的代码:</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="a9b0" class="km kn hi ki b fi ko kp l kq kr"><em class="kc">chart &lt;- ggplot()+<br/> geom_polygon(data = final.data,aes(x = long, y = lat, group = group, <br/> fill = W_Alliance,color=id),color=”black”,size = 0.25) +<br/> coord_map() +<br/> xlab(‘Longitude’)+<br/> ylab(‘Latitude’) +<br/> labs(title=”Indian Elections — 2019 — Party wise Results”, <br/> caption = “SOURCE: oneindia.com, indiatoday.in, eci.gov.in &amp; wiki”) +<br/> scale_fill_manual(name=”id”, values = cols) + theme(legend.title=element_blank())</em></span></pre><p id="4338" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们在图表变量中得到了可视化。让我们打印这个。</p><p id="b0ca" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="kc"> #打印图表输出<br/>打印(图表)</em></p><p id="9f0d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请参见下面印度地图的最终结果</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es kt"><img src="../Images/682cc61aa74cfff8649498466021cdee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*j9c4qjmSJPF8Ku3z5sfMsQ.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">2019年印度大选结果</figcaption></figure><p id="9b81" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你想显示一个州的结果。这很简单。我添加了一个状态变量，然后根据状态过滤数据。让我们看看下面State = 'UP '的代码</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="ee8b" class="km kn hi ki b fi ko kp l kq kr">State.data &lt;- filter(final.data, State == ‘UP’)</span><span id="f527" class="km kn hi ki b fi ks kp l kq kr"># Making final Indian Map<br/>chart_state &lt;- ggplot()+<br/> geom_polygon(data = State.data,aes(x = long, y = lat, group = group, <br/> fill = W_Alliance,color=id),color=”black”,size = 0.25) +<br/> coord_map() +<br/> xlab(‘Longitude’)+<br/> ylab(‘Latitude’) +<br/> labs(title=”Indian Elections — 2019 — Party wise Results — Uttar Pradesh”, <br/> caption = “SOURCE: oneindia.com, indiatoday.in, eci.gov.in &amp; wiki”) +<br/> scale_fill_manual(name=”id”, values = cols) + theme(legend.title=element_blank())</span><span id="e1ed" class="km kn hi ki b fi ks kp l kq kr"># prining chart output<br/>print(chart_state)</span></pre><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es kt"><img src="../Images/0044276f7eb27dd2d4f249a2f2e6120c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*vSn4OZzCrYlE4qCV3xTkTQ.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">2019年北方邦大选</figcaption></figure><h1 id="3ed2" class="ku kn hi bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated"><strong class="ak">议会图表</strong></h1><p id="0983" class="pw-post-body-paragraph iv iw hi ix b iy lr ja jb jc ls je jf jg lt ji jj jk lu jm jn jo lv jq jr js hb bi translated">现在让我们制作一个议会图表。r有一个名为“ggparliament”的库，它可以帮助像弧形或像国会议员坐在议会中一样呈现数据。</p><p id="814f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们为此编写代码。我使用下面的库来制作这个图表:</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="343b" class="km kn hi ki b fi ko kp l kq kr">library(ggplot2)<br/>library(ggparliament)<br/>library(readr)<br/>library(dplyr)</span></pre><p id="3428" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我已经对我的数据进行了功能设计，以显示各个政党以及各个政党赢得的席位数。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="9203" class="km kn hi ki b fi ko kp l kq kr">#get the data<br/>Results &lt;- read.csv(‘D:/Harish/R practice projects/india/election/Data/NoOfSeats 2019.csv’, stringsAsFactors = T, na.strings=c(“”,”NA”))</span><span id="43d0" class="km kn hi ki b fi ks kp l kq kr">head(Results)</span><span id="7582" class="km kn hi ki b fi ks kp l kq kr">&gt; head(Results)<br/> party_short seats government<br/>1 BJP 303 1<br/>2 Congress 52 0<br/>3 DMK 24 0<br/>4 TMC 22 0<br/>5 YSRC 22 0<br/>6 Shiv Sena 18 1</span></pre><p id="994b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你可以把数据画成不同的形状，像马蹄形或半圆形。我在这里选择半圆。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="5d51" class="km kn hi ki b fi ko kp l kq kr">#Decide type of parliament<br/>Parlia_semicircle &lt;- parliament_data(election_data = Results,<br/> type = “semicircle”,<br/> parl_rows = 12,<br/> party_seats = Results$seats)</span></pre><p id="7c07" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在让我们用ggplot画出我们的议会图。因为我想用不同的颜色来表示不同的团体，所以我将使用“scale_color_manual”美学来传递团体名称和它所代表的颜色。下面是完整的代码。主题ggparliament中使用的主题。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="7d6c" class="km kn hi ki b fi ko kp l kq kr">ind &lt;- ggplot(Parlia_semicircle, aes(x =x, y = y, colour = party_short)) +<br/> geom_parliament_seats(stat = “identity”,position = “identity”,size = 5) + <br/> theme_ggparliament() +<br/> labs(colour = “Parties”, <br/> title = “Indian 2019 Parliament”, legend.position = “center”) +<br/> scale_color_manual(values=c(‘BJP’=’#FF8C00',<br/> ‘Congress’=’#0000FF’,<br/> ‘DMK’=’#00FA9A’,<br/> ‘TMC’=’#20B2AA’,<br/> ‘YSRC’=’#B8860B’,<br/> ‘Shiv Sena’=’#B22222',<br/> ‘JDU’=’#FF00FF’,<br/> ‘BJD’=’#6495ED’,<br/> ‘BSP’=’#ADFF2F’,<br/> ‘TRS’=’#FF7F50',<br/> ‘LJP’=’#CD5C5C’,<br/> ‘NCP’=’#F08080',<br/> ‘Samajwadi Party’=’#E9967A’,<br/> ‘Independent’=’#FA8072',<br/> ‘CPM’=’#FF0000',<br/> ‘IUML’=’#FF4500',<br/> ‘National Conference’=’#800000',<br/> ‘TDP’=’#9ACD32',<br/> ‘Apna Dal S’=’#FFD700',<br/> ‘CPI’=’#FF0000',<br/> ‘Shiromani Akali Dal’=’#000080',<br/> ‘AAP’=’#EEE8AA’,<br/> ‘AIADMK’=’#E81B23',<br/> ‘AIMIM’=’#000000',<br/> ‘AIUDF’=’#000000',<br/> ‘AJSU Party’=’#FF0000',<br/> ‘JDS’=’#00FF00',<br/> ‘JMM’=’#20B2AA’,<br/> ‘Kerala Congress (M)’=’#FFFF00',<br/> ‘MIM’=’#00FFFF’,<br/> ‘Mizo National Front’=’#FF00FF’,<br/> ‘NDPP’=’#C0C0C0',<br/> ‘NPF’=’#808080',<br/> ‘NPP’=’#800000',<br/> ‘RLP’=’#808000',<br/> ‘RSP’=’#008000',<br/> ‘SKM’=’#800080',<br/> ‘VCK’=’#008080' )) +<br/> theme(legend.position = “bottom”) +<br/> geom_highlight_government(government == 1, shape = 25) +<br/> draw_totalseats(n = 543, type = ‘semicircle’) +<br/> draw_majoritythreshold(<br/> n = 272,<br/> label = TRUE,<br/> type = ‘semicircle’<br/> ) +<br/> theme(plot.title = element_text(hjust = 0.5))</span></pre><p id="5649" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是我们最终的议会图表:</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="3359" class="km kn hi ki b fi ko kp l kq kr">#Display the plot<br/>ind</span></pre><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es lw"><img src="../Images/564d0b3e410aca3c104eba6261f27f14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*Sl4Q0rcYQfB68XdRyOPzew.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">印度议会图表2019年大选</figcaption></figure><h1 id="8f6e" class="ku kn hi bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated"><strong class="ak">历年投票率散点图及前两大政党动画图</strong></h1><p id="f325" class="pw-post-body-paragraph iv iw hi ix b iy lr ja jb jc ls je jf jg lt ji jj jk lu jm jn jo lv jq jr js hb bi translated">我们将需要' gganimate '和' gifsky '包来制作一个动画图表。让我们加载库。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="781a" class="km kn hi ki b fi ko kp l kq kr">#This code displays animation chart for vote % over the years for parties two largest parties Congress and BJP<br/>#Data source given below<br/>##devtools::install_github(‘thomasp85/gganimate’) load latest gganimate packages<br/>#load the packages<br/>library(ggplot2)<br/>library(readr)<br/>library(dplyr)<br/>library(tidyr)<br/>library(gganimate)<br/>library(gifski) #part of gganimate</span></pre><p id="3ddb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">加载数据。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="4e3f" class="km kn hi ki b fi ko kp l kq kr">#get the data</span><span id="e6e2" class="km kn hi ki b fi ks kp l kq kr">Results &lt;- read.csv(‘D:/Harish/R practice projects/india/election/Data/Voting_Per_Over_The_Years_BJP_INC.csv’, stringsAsFactors = F, na.strings=c(“”,”NA”))</span><span id="b8ac" class="km kn hi ki b fi ks kp l kq kr">#EDA<br/>typeof(Results)<br/>head(Results)<br/>sum(is.na(Results))<br/>str(Results)<br/>nrow(Results)</span><span id="1521" class="km kn hi ki b fi ks kp l kq kr">&gt; head(Results)<br/> Year Party Seats Votes_PERCEN<br/>1 2019 INC 52 19.49<br/>2 2014 INC 44 19.60<br/>3 2009 INC 206 28.60<br/>4 2004 INC 145 26.50<br/>5 1999 INC 114 28.30<br/>6 1998 INC 141 25.80</span></pre><h1 id="560e" class="ku kn hi bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated"><strong class="ak">散点图</strong></h1><p id="c50b" class="pw-post-body-paragraph iv iw hi ix b iy lr ja jb jc ls je jf jg lt ji jj jk lu jm jn jo lv jq jr js hb bi translated">画散点图。看看1980年后BJP是如何崛起的。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="3bdf" class="km kn hi ki b fi ko kp l kq kr">#1 Scatter Plot<br/>ind_1 &lt;- ggplot(data = Results, aes(x = Year, y = Votes_PERCEN, colour = Party)) +<br/> geom_line() +<br/> scale_color_manual(values=c(‘BJP’=’#FF8C00',<br/> ‘INC’=’#0000FF’)) +<br/> labs(subtitle=”Indian Elections Voting % Share Over the Years”, <br/> y=”Voting %”, <br/> x=”Party”, <br/> title=”Scatterplot”, <br/> caption = “SOURCE: oneindia.com, indiatoday.in, eci.gov.in, indiavotes.com &amp; wiki”)</span><span id="f1a0" class="km kn hi ki b fi ks kp l kq kr">ind_1</span></pre><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/dc17935f385a01f8cb0570737a12d8a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jdTCnl93Nx7evZzElt1Rxg.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">多年来BJP和国会之间的投票百分比散点图</figcaption></figure><h1 id="7dda" class="ku kn hi bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated"><strong class="ak">动画图表</strong></h1><p id="9578" class="pw-post-body-paragraph iv iw hi ix b iy lr ja jb jc ls je jf jg lt ji jj jk lu jm jn jo lv jq jr js hb bi translated">让我们用下面的代码画一个动画图表。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="6f36" class="km kn hi ki b fi ko kp l kq kr">#animation chart with geom points<br/>theme_set(theme_bw())<br/>#Result_Sel_BJP &lt;- Results %&gt;% filter(Results$Party == ‘BJP’ )</span><span id="0a86" class="km kn hi ki b fi ks kp l kq kr">ind_2 &lt;- ggplot(Results, aes(Year, Votes_PERCEN, size = Votes_PERCEN, frame = Year, colour = Party)) +<br/> geom_point() + transition_time(Year) +<br/> labs(title = “Year : {frame_time}”) + shadow_wake(wake_length = 0.1, alpha = FALSE) +<br/> labs(subtitle=”BJP &amp; COngress % Share Over the Years”, <br/> caption = “SOURCE: oneindia.com, indiatoday.in, eci.gov.in, indiavotes.com &amp; wiki”)<br/> <br/>ind_2 <br/>#saving the animation chart</span><span id="6cc5" class="km kn hi ki b fi ks kp l kq kr">anim_save(“animation_chart_with_geom_points.gif”)</span></pre><p id="6765" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面是带有gganimation包的动画图。看看分数是如何随着年份的变化而变化的。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es ly"><img src="../Images/96f3366b5b1c8b8dfbe9a24efcff8bb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*6mt0IYCW4knePsj2NOW4Bg.gif"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">动画图表:历年来BJP和国会之间的投票百分比</figcaption></figure><p id="7d0d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你可以使用上述代码为任何选举绘制这样的图表。各种图表的完整R代码，请从我的github页面<a class="ae iu" href="https://github.com/harnagpal/Indian-Election-2019-Visualization" rel="noopener ugc nofollow" target="_blank">这里下载代码和图表。</a></p><p id="6516" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">就这样，我完成了我的文章。感谢阅读全文。很快会遇到一篇新文章。</p><p id="581f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请随时给我留言或给我发邮件到harnagpal@gmail.com。</p><p id="3cd3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">看看我其他关于Medium.com的文章</p><div class="lz ma ez fb mb mc"><a rel="noopener follow" target="_blank" href="/analytics-vidhya/data-science-use-cases-in-life-insurance-8cfbfd8b2fff"><div class="md ab dw"><div class="me ab mf cl cj mg"><h2 class="bd hj fi z dy mh ea eb mi ed ef hh bi translated">人寿保险中的数据科学用例</h2><div class="mj l"><h3 class="bd b fi z dy mh ea eb mi ed ef dx translated">数据科学是当今科技界的一个新现象。随着计算能力的增加，它已经改变了世界…</h3></div><div class="mk l"><p class="bd b fp z dy mh ea eb mi ed ef dx translated">medium.com</p></div></div><div class="ml l"><div class="mm l mn mo mp ml mq io mc"/></div></div></a></div><div class="lz ma ez fb mb mc"><a rel="noopener follow" target="_blank" href="/analytics-vidhya/create-beautiful-visualization-of-data-in-trelliscopejs-package-in-r-c67879c55864"><div class="md ab dw"><div class="me ab mf cl cj mg"><h2 class="bd hj fi z dy mh ea eb mi ed ef hh bi translated">用R语言在TrelliscopeJS包中创建漂亮的可视化数据</h2><div class="mj l"><h3 class="bd b fi z dy mh ea eb mi ed ef dx translated">对于那些希望生动展示数据的人来说，这是一次很好的学习体验</h3></div><div class="mk l"><p class="bd b fp z dy mh ea eb mi ed ef dx translated">medium.com</p></div></div><div class="ml l"><div class="mr l mn mo mp ml mq io mc"/></div></div></a></div><p id="1c3f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这里看我的数据科学数学艺术<a class="ae iu" href="https://www.instagram.com/artofhary/" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="6fed" class="ku kn hi bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated"><strong class="ak">参考文献</strong></h1><div class="lz ma ez fb mb mc"><a href="https://rstudio-pubs-static.s3.amazonaws.com/435552_5656a7fe6636474fb0f8d4222d79db2c.html" rel="noopener  ugc nofollow" target="_blank"><div class="md ab dw"><div class="me ab mf cl cj mg"><h2 class="bd hj fi z dy mh ea eb mi ed ef hh bi translated">用于绘制全印度地图的笔记本</h2><div class="mj l"><h3 class="bd b fi z dy mh ea eb mi ed ef dx translated">编辑描述</h3></div><div class="mk l"><p class="bd b fp z dy mh ea eb mi ed ef dx translated">rstudio-pubs-static.s3.amazonaws.com</p></div></div></div></a></div><p id="be96" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae iu" href="https://www.oneindia.com/" rel="noopener ugc nofollow" target="_blank">https://www.oneindia.com/</a></p><div class="lz ma ez fb mb mc"><a href="https://www.indiatoday.in/" rel="noopener  ugc nofollow" target="_blank"><div class="md ab dw"><div class="me ab mf cl cj mg"><h2 class="bd hj fi z dy mh ea eb mi ed ef hh bi translated">最新消息，今日突发新闻-宝莱坞，板球，商业，政治-今日印度</h2><div class="mj l"><h3 class="bd b fi z dy mh ea eb mi ed ef dx translated">查看来自印度和世界各地的最新消息。关于宝莱坞，政治，商业，板球的最新印度新闻…</h3></div><div class="mk l"><p class="bd b fp z dy mh ea eb mi ed ef dx translated">www.indiatoday.in</p></div></div><div class="ml l"><div class="ms l mn mo mp ml mq io mc"/></div></div></a></div><div class="lz ma ez fb mb mc"><a href="https://eci.gov.in/" rel="noopener  ugc nofollow" target="_blank"><div class="md ab dw"><div class="me ab mf cl cj mg"><h2 class="bd hj fi z dy mh ea eb mi ed ef hh bi translated">印度选举委员会</h2><div class="mj l"><h3 class="bd b fi z dy mh ea eb mi ed ef dx translated">从Play Store下载我们新的手机应用程序“选民热线”。Android应用程序“选民帮助热线”为您提供了简单的…</h3></div><div class="mk l"><p class="bd b fp z dy mh ea eb mi ed ef dx translated">eci.gov.in</p></div></div><div class="ml l"><div class="mt l mn mo mp ml mq io mc"/></div></div></a></div><div class="lz ma ez fb mb mc"><a href="http://www.indiavotes.com/" rel="noopener  ugc nofollow" target="_blank"><div class="md ab dw"><div class="me ab mf cl cj mg"><h2 class="bd hj fi z dy mh ea eb mi ed ef hh bi translated">印度选票|印度最大的选举数据库</h2><div class="mj l"><h3 class="bd b fi z dy mh ea eb mi ed ef dx translated">编辑描述</h3></div><div class="mk l"><p class="bd b fp z dy mh ea eb mi ed ef dx translated">www.indiavotes.com</p></div></div><div class="ml l"><div class="mu l mn mo mp ml mq io mc"/></div></div></a></div><div class="lz ma ez fb mb mc"><a href="https://drive.google.com/drive/folders/0ByLjiBJ1xOpuTVRIWThhazBLdWM" rel="noopener  ugc nofollow" target="_blank"><div class="md ab dw"><div class="me ab mf cl cj mg"><h2 class="bd hj fi z dy mh ea eb mi ed ef hh bi translated">形状文件- Google Drive</h2><div class="mj l"><h3 class="bd b fi z dy mh ea eb mi ed ef dx translated">编辑描述</h3></div><div class="mk l"><p class="bd b fp z dy mh ea eb mi ed ef dx translated">drive.google.com</p></div></div><div class="ml l"><div class="mv l mn mo mp ml mq io mc"/></div></div></a></div></div></div>    
</body>
</html>