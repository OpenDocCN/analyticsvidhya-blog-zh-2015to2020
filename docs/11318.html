<html>
<head>
<title>gRPC vs REST — performance comparison</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">gRPC与REST —性能比较</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/grpc-vs-rest-performance-comparison-1fe5fb14a01c?source=collection_archive---------1-----------------------#2020-11-29">https://medium.com/analytics-vidhya/grpc-vs-rest-performance-comparison-1fe5fb14a01c?source=collection_archive---------1-----------------------#2020-11-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2415" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">gRPC是一个为远程过程调用交换消息的高性能框架。它使用<a class="ae jd" href="https://developers.google.com/protocol-buffers/docs/overview" rel="noopener ugc nofollow" target="_blank">协议缓冲区</a>来序列化结构化数据。</p><p id="f11f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">RESTful API是一个非常流行web服务框架，它允许Web开发人员通过http调用交换json消息。</p><p id="281b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从易用性的角度来看，REST肯定比gRPC简单，因为gRPC需要开发者在协议缓冲区定义消息结构，并用protoc compiler编译成GO模块。</p><p id="26d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是，从性能的角度来看，gRPC比REST快得多。谷歌云运行服务现在可以服务于HTTP和gRPC请求。在这里，我使用<a class="ae jd" href="https://cloud.google.com/run/docs/triggering/grpc" rel="noopener ugc nofollow" target="_blank"> Google Cloud run </a>做了一个简单的性能基准来比较gRPC和REST。</p><p id="7388" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">测试程序是用GO lang编写的。客户端有10个线程，将发送一个包含名称字符串和10K个整数的数组的大型消息，每个线程将重复5000次发送消息。云运行服务定义为1个实例1个CPU，并发数= 10。结果如下所示:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/f3d86f92f51bfb12c04d7cc3f229b890.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*edkdVfgmKVhcQIirRf_oNg.png"/></div></div></figure><p id="82e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">gRPC的吞吐量是每秒48个请求，是REST API的10倍以上。与REST (404毫秒/ 4 = 101毫秒)相比，它使用更少的cpu时间来处理每条消息(每秒CPU时间毫秒/请求= 832 / 48 = 17.33毫秒)。而请求延迟相似，分别为6毫秒和8毫秒。</p><p id="8c9c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">获胜者是gRPC。</p><p id="580d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，当我们在比赛中加入云pubsub时，pubsub很容易赢得比赛，因为它是异步的。我们使用一个GO客户端发布类似的消息字符串，然后使用另一个GO客户端提取消息。pubsub主题发布吞吐量为每秒139条消息，而请求订阅吞吐量约为每秒104条消息。所以最后的赢家是pubsub。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jq"><img src="../Images/fa77f443737f02dfb00c134d297a4eb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VwVHY-ETHDXdfgt60atYQg.png"/></div></div></figure><p id="fab6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">源代码可以在<a class="ae jd" href="https://github.com/iwasnothing/grpc-rest-compare" rel="noopener ugc nofollow" target="_blank"> Git </a>中找到。</p></div></div>    
</body>
</html>