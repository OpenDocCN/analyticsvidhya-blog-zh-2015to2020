<html>
<head>
<title>Day Light Saving time and associated Problems and Solutions in Data Science!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">日光节约时间和数据科学中的相关问题和解决方案！</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/day-light-saving-time-and-associated-problems-and-solutions-in-data-science-f4fac678f828?source=collection_archive---------16-----------------------#2020-05-01">https://medium.com/analytics-vidhya/day-light-saving-time-and-associated-problems-and-solutions-in-data-science-f4fac678f828?source=collection_archive---------16-----------------------#2020-05-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><p id="6829" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">日光节约是政府用来增加一个国家日光照射量的一个小把戏，通过在一个特定的时间间隔内改变时区来增加一个国家的日光照射量，而我们大多数人并不知道这个时间间隔。</p></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jl"><img src="../Images/60d59634415611973aafc1670c5ff4d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1LF6rkiMW4z58xyUDtEAQg.jpeg"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">标题</figcaption></figure><p id="33aa" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了创造更长的夏夜，他们一年要调两次钟。</p><ol class=""><li id="966e" class="kb kc hi io b ip iq it iu ix kd jb ke jf kf jj kg kh ki kj bi translated">美国大部分地区在三月的第二个星期天的凌晨2:00开始实行夏令时，并在十一月的第一个星期天恢复标准时间。在美国，每个时区在不同的时间转换。</li><li id="cc0b" class="kb kc hi io b ip kk it kl ix km jb kn jf ko jj kg kh ki kj bi translated">在<strong class="io hj">欧盟</strong>，夏令时在世界时(格林威治标准时间)凌晨1点开始和结束。它开始于三月的最后一个星期天，结束于十月的最后一个星期天。在欧盟，所有时区都在同一时刻改变。</li></ol><blockquote class="kp kq kr"><p id="ee10" class="im in jk io b ip iq ir is it iu iv iw ks iy iz ja kt jc jd je ku jg jh ji jj hb bi translated">这些国家基本上使用一个被称为<strong class="io hj">向前跳跃，向后倒退</strong>的通用规则</p></blockquote></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><p id="fba8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">意识不到这一现象对于普通人来说没什么大不了的，但是对于数据科学爱好者和研究人员来说，它会给你的结果带来巨大的误差。</p><p id="f67f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">举例来说，如果你正在<strong class="io hj">处理与时间相关的数据</strong>，计算持续时间之间的总间隔，以了解时间和你的项目的一些变量之间的一些趋势，你<em class="jk">遇到一个时间差</em>，它与你的预期相比<strong class="io hj">是负的或者非常大的</strong>，并且你对为什么会发生这种情况感到困惑。<br/></p><h1 id="5d53" class="kv kw hi bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">问题示例</h1><p id="ac27" class="pw-post-body-paragraph im in hi io b ip lt ir is it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj hb bi translated">让我们考虑这样一种情况，时钟在春天被向前移动了<strong class="io hj">。</strong></p><p id="f51c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">2017年3月12日<strong class="io hj">华盛顿DC </strong>时钟从<em class="jk">凌晨1:59:59直接跳到了凌晨3:00:00</em>(即时钟向前跳动),华盛顿DC时区之后的整个地区都没有正式的凌晨2点。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es ly"><img src="../Images/631692b53886b1ae7be58141f434f12c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FHMT1IelBnzMEldnp2dRaw.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">DC华盛顿的春天</figcaption></figure><p id="1f87" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在你一定已经猜到了，当你处理大量相关数据时，这会是一个很大的问题！<br/>你能想到的一个基本解决方案就是让它与UTC时间相同，这样我们就可以进行比较，但是<strong class="io hj">将这个春季向前跳跃与UTC时间进行比较，我们看到如下:</strong></p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es lz"><img src="../Images/a1b6f96b6220733bcc07dc17f4384499.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8c-ke3rs5DdKrYUo9yfBVQ.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">与UTC相比</figcaption></figure><p id="02f9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">正如我们在这里看到的，当我们试图通过与UTC进行比较来寻找共同点时，另一个问题出现了。这里，它与UTC早些时候的时间偏移也发生了变化！<br/>在DC华盛顿的<strong class="io hj">凌晨1:00:00，我们处于东部标准时间</strong> <em class="jk"> (UTC偏移= -ve 5小时)</em> <strong class="io hj"> <br/>而在DC华盛顿的凌晨3:00:00，我们处于东部夏令时(EDT) </strong> <em class="jk"> (UTC偏移= -ve 4小时)</em></p><p id="7255" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果您确切知道这是何时发生的，这个问题很容易解决，但是如果您正在处理世界各地的数据，那么准确找出每个国家的时钟何时向前跳动以及何时向后跳动将非常繁琐！</p><blockquote class="ma"><p id="e0b1" class="mb mc hi bd md me mf mg mh mi mj jj dx translated">许多国家在同一个国家也有多个时区，例如俄罗斯就有12个时区！</p></blockquote><h1 id="9839" class="kv kw hi bd kx ky kz la lb lc ld le lf lg mk li lj lk ml lm ln lo mm lq lr ls bi translated">用PYTHON代码解释的问题</h1><p id="b831" class="pw-post-body-paragraph im in hi io b ip lt ir is it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj hb bi translated">首先查看在处理日期2017年3月12日时会出现什么样的一般性错误，并找出在凌晨1:59:59和3:00:00之间经过的总时间。</p><pre class="jm jn jo jp fd mn mo mp mq aw mr bi"><span id="9b4a" class="ms kw hi mo b fi mt mu l mv mw">time_before_2am = datetime(2017, 3, 12, 1, 59, 59) #setting time to 1:59:59 on 12/03/2017 [dd/mm/yyyy]</span><span id="b9e8" class="ms kw hi mo b fi mx mu l mv mw">time_before_2am.isoformat()</span><span id="d5d6" class="ms kw hi mo b fi mx mu l mv mw"><strong class="mo hj">'2017-03-12T01:59:59'</strong></span></pre><p id="8b44" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这里我们制作一个普通的<strong class="io hj">日期时间对象</strong>来存储日期，然后以普通的ISO格式<br/> <strong class="io hj">打印它所包含的内容，并添加第二次时间</strong></p><pre class="jm jn jo jp fd mn mo mp mq aw mr bi"><span id="6958" class="ms kw hi mo b fi mt mu l mv mw">time_ahead_3am = datetime(2017, 3, 12, 3, 0, 0)</span><span id="62e2" class="ms kw hi mo b fi mx mu l mv mw">time_ahead_3am.isoformat()</span><span id="5e32" class="ms kw hi mo b fi mx mu l mv mw"><strong class="mo hj">'2017-03-12T03:00:00'</strong></span></pre><p id="06eb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">计算时差</strong></p><pre class="jm jn jo jp fd mn mo mp mq aw mr bi"><span id="d897" class="ms kw hi mo b fi mt mu l mv mw">(time_before_2am - time_ahead_3am).total_seconds()</span><span id="68ec" class="ms kw hi mo b fi mx mu l mv mw"><strong class="mo hj">3601</strong></span></pre><p id="9a49" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">据信答案是3601秒。1小时1秒<br/>但实际上只过了1秒！</p><h1 id="f10f" class="kv kw hi bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated"><strong class="ak">解决方案</strong></h1><p id="d387" class="pw-post-body-paragraph im in hi io b ip lt ir is it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj hb bi translated">现在，如果您只处理一个时区，您可以手动更改时区偏移量来解决这个问题，但是如果您无法根据各个地区政府的命令手动找到偏移量更改的确切时间，该怎么办呢？</p><p id="180d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">包裹来拯救我们了。这个包让我们不用记住夏令时规则。它有一个名为<code class="du my mz na mo b">tz</code>的类:</p><ol class=""><li id="f722" class="kb kc hi io b ip iq it iu ix kd jb ke jf kf jj kg kh ki kj bi translated">根据政府不断变化的规则，每年自动更新其数据库两次</li><li id="28e9" class="kb kc hi io b ip kk it kl ix km jb kn jf ko jj kg kh ki kj bi translated">自动检查传入的时间是否在夏令时之下，并自动给出正确的结果，无需您担心偏移的变化！</li></ol><p id="921c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">例如，同一问题的<strong class="io hj">代码将为</strong>:</p><pre class="jm jn jo jp fd mn mo mp mq aw mr bi"><span id="549f" class="ms kw hi mo b fi mt mu l mv mw"># Import tz</span><span id="5abc" class="ms kw hi mo b fi mx mu l mv mw">from dateutil import tz</span><span id="387a" class="ms kw hi mo b fi mx mu l mv mw"># Create eastern timezone for washinton DC </span><span id="d014" class="ms kw hi mo b fi mx mu l mv mw">eastern = tz.gettz('America/New_York')</span><span id="e8c2" class="ms kw hi mo b fi mx mu l mv mw"># 2017-03-12 01:59:59 in Eastern Time (EST)</span><span id="0aca" class="ms kw hi mo b fi mx mu l mv mw">time_before_2am = datetime(2017, 3, 12, 1, 59, 59,</span><span id="46e7" class="ms kw hi mo b fi mx mu l mv mw">tzinfo = eastern)</span><span id="f562" class="ms kw hi mo b fi mx mu l mv mw"># 2017-03-12 03:00:00 in Eastern Time( dateutil automatically figures out this time the eastern time zone is in EDT)</span><span id="e1b8" class="ms kw hi mo b fi mx mu l mv mw">time_ahead_3am = datetime(2017, 3, 12, 3, 0, 0,</span><span id="7bb1" class="ms kw hi mo b fi mx mu l mv mw">tzinfo = eastern)</span></pre><p id="bee4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">计算时差</strong></p><pre class="jm jn jo jp fd mn mo mp mq aw mr bi"><span id="f998" class="ms kw hi mo b fi mt mu l mv mw">(time_before_2am - time_ahead_3am).total_seconds()</span><span id="cea3" class="ms kw hi mo b fi mx mu l mv mw"><strong class="mo hj">1</strong></span></pre><p id="2e64" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">正如我们所看到的，它正确地得到了1秒的结果！</strong></p></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><p id="d07a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">感谢阅读到最后！这是我的第一篇媒体文章。</p></div></div>    
</body>
</html>