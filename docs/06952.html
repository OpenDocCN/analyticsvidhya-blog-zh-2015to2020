<html>
<head>
<title>Turfpy a new way to do spatial analysis in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python进行空间分析的新方法</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/turfpy-a-new-way-to-do-spatial-analysis-in-python-c69a7110bc7c?source=collection_archive---------9-----------------------#2020-06-08">https://medium.com/analytics-vidhya/turfpy-a-new-way-to-do-spatial-analysis-in-python-c69a7110bc7c?source=collection_archive---------9-----------------------#2020-06-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/2194375bd25be94a413a44cc171c543e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LnbeD7KcMB0o-ewg7WJj3g.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片来自<a class="ae iu" href="https://docs.mapbox.com/help/img/screenshots/snow-cholera-map-1.jpg" rel="noopener ugc nofollow" target="_blank">地图框</a></figcaption></figure><p id="06b5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">大家好，最近几个月前，我开始和TurfPy一起工作。这是一个用于执行地理空间数据分析的Python库。实际上它是turf.js的python替代品。这是一个新的包，所以目前它支持turf.js的<strong class="ix hj">测量</strong>功能主义者。由<a class="ae iu" href="https://pypi.org/project/turfpy/" rel="noopener ugc nofollow" target="_blank">turpy</a>支持的操作可以应用于简单的几何类型或基本上是标准<strong class="ix hj"> geojson特征</strong>的特征对象。</p><p id="c2c1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">草皮:<a class="ae iu" href="https://pypi.org/project/turfpy/" rel="noopener ugc nofollow" target="_blank">https://pypi.org/project/turfpy/</a></p><p id="a908" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">turpy Github:<a class="ae iu" href="https://github.com/omanges/turfpy" rel="noopener ugc nofollow" target="_blank">https://github.com/omanges/turfpy</a></p><p id="af5f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们深入了解每项功能的一些示例。</p><ul class=""><li id="2a49" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><strong class="ix hj">方位</strong>:取两个点特征，找出它们之间的地理方位。</li></ul><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="2d7e" class="kl km hi kh b fi kn ko l kp kq">from turfpy import measurement<br/>from geojson import Point, Feature<br/></span><span id="eb24" class="kl km hi kh b fi kr ko l kp kq">start = Feature(geometry=Point((-75.343, 39.984)))<br/>end = Feature(geometry=Point((-75.534, 39.123)))</span><span id="8e4d" class="kl km hi kh b fi kr ko l kp kq">measurement.bearing(start,end)</span></pre><ul class=""><li id="3d2b" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><strong class="ix hj">距离</strong>:计算两点特征之间的距离。一个点包含十进制度的纬度和经度，而<code class="du ks kt ku kh b">unit</code>是可选的。</li></ul><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="48f5" class="kl km hi kh b fi kn ko l kp kq">from turfpy import measurement<br/>from geojson import Point, Feature</span><span id="2514" class="kl km hi kh b fi kr ko l kp kq">start = Feature(geometry=Point((-75.343, 39.984)))<br/>end = Feature(geometry=Point((-75.534, 39.123)))</span><span id="42f3" class="kl km hi kh b fi kr ko l kp kq">measurement.distance(start,end)</span></pre><ul class=""><li id="680b" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><strong class="ix hj">面积</strong>:该函数计算作为输入给出的Geojson对象的面积。</li></ul><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="af10" class="kl km hi kh b fi kn ko l kp kq">from turfpy.measurement import area<br/>from geojson import Feature, FeatureCollection<br/><br/>geometry_1 = {"coordinates": [[[0, 0], [0, 10], [10, 10], [10, 0], [0, 0]]], "type": "Polygon"};<br/>geometry_2 = {"coordinates": [[[2.38, 57.322], [23.194, -20.28], [-120.43, 19.15], [2.38, 57.322]]], "type": "Polygon"};</span><span id="8fa8" class="kl km hi kh b fi kr ko l kp kq">feature_1 = Feature(geometry=geometry_1)<br/>feature_2 = Feature(geometry=geometry_2)<br/>feature_collection = FeatureCollection([feature_1, feature_2])<br/><br/>area(feature_collection)</span></pre><ul class=""><li id="b89b" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><strong class="ix hj">包围盒</strong>:该函数用于生成给定geojson的包围盒坐标，输入可以是几何类型，也可以是特征，也可以是特征集合。</li></ul><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="2606" class="kl km hi kh b fi kn ko l kp kq">from turfpy.measurement import bbox<br/>from geojson import Polygon, Feature<br/><br/>p = Polygon([[(2.38, 57.322), (23.194, -20.28), (-120.43, 19.15), (2.38, 57.322)]])<br/>feature = Feature(geometry=p)</span><span id="6671" class="kl km hi kh b fi kr ko l kp kq">bb = bbox(feature)</span></pre><ul class=""><li id="463b" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><strong class="ix hj">边界框</strong> <strong class="ix hj">多边形</strong>:为使用上述边界框功能生成的边界框生成一个多边形特征。</li></ul><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="6f73" class="kl km hi kh b fi kn ko l kp kq">from turfpy.measurement import bbox_polygon, bbox<br/>from geojson import Polygon<br/><br/>p = Polygon([[(2.38, 57.322), (23.194, -20.28), (-120.43, 19.15), (2.38, 57.322)]])</span><span id="1d6f" class="kl km hi kh b fi kr ko l kp kq">bb = bbox(p)</span><span id="ac08" class="kl km hi kh b fi kr ko l kp kq">feature = bbox_polygon(bb)</span></pre><ul class=""><li id="f8d0" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><strong class="ix hj">中心</strong>:获取一个特征或特征集合，并返回所有特征的绝对中心点。</li></ul><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="ec04" class="kl km hi kh b fi kn ko l kp kq">from turfpy.measurement import center<br/>from geojson import Feature, FeatureCollection, Point<br/><br/>f1 = Feature(geometry=Point((-97.522259, 35.4691)))<br/>f2 = Feature(geometry=Point((-97.502754, 35.463455)))<br/>f3 = Feature(geometry=Point((-97.508269, 35.463245)))</span><span id="d9d2" class="kl km hi kh b fi kr ko l kp kq">feature_collection = FeatureCollection([f1, f2, f3])</span><span id="0ae5" class="kl km hi kh b fi kr ko l kp kq">feature = center(feature_collection)</span></pre><ul class=""><li id="4056" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><strong class="ix hj"> Envelope </strong>:获取任意数量的特征并返回一个包含所有顶点的矩形多边形。</li></ul><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="14d0" class="kl km hi kh b fi kn ko l kp kq">from turfpy.measurement import envelope<br/>from geojson import Feature, FeatureCollection, Point<br/><br/>f1 = Feature(geometry=Point((-97.522259, 35.4691)))<br/>f2 = Feature(geometry=Point((-97.502754, 35.463455)))<br/>f3 = Feature(geometry=Point((-97.508269, 35.463245)))<br/>feature_collection = FeatureCollection([f1, f2, f3])</span><span id="74ab" class="kl km hi kh b fi kr ko l kp kq">feature = envelope(feature_collection)</span></pre><ul class=""><li id="2a5b" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><strong class="ix hj">长度</strong>:取一个geojson并以指定单位测量其长度。</li></ul><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="963e" class="kl km hi kh b fi kn ko l kp kq">from turfpy.measurement import length<br/>from geojson import LineString, Feature</span><span id="4ead" class="kl km hi kh b fi kr ko l kp kq">ls = LineString([(115, -32), (131, -22), (143, -25), (150, -34)])<br/>f = Feature(geometry=ls)</span><span id="6e60" class="kl km hi kh b fi kr ko l kp kq">length(f)</span></pre><ul class=""><li id="ce4a" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><strong class="ix hj">目的地</strong>:取一个点，给定以度、弧度、英里或公里为单位的距离和以度为单位的方位角，计算目的地点的位置。</li></ul><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="bda6" class="kl km hi kh b fi kn ko l kp kq">from turfpy.measurement import destination<br/>from geojson import Point, Feature</span><span id="e239" class="kl km hi kh b fi kr ko l kp kq">origin = Feature(geometry=Point([-75.343, 39.984]))<br/>distance = 50<br/>bearing = 90<br/>options = {'units': 'mi'}</span><span id="b031" class="kl km hi kh b fi kr ko l kp kq">destination(origin,distance,bearing,options)</span></pre><ul class=""><li id="a1b1" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><strong class="ix hj">质心</strong>:获取一个或多个特征，并使用所有顶点的平均值计算质心。</li></ul><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="9479" class="kl km hi kh b fi kn ko l kp kq">from turfpy.measurement import centroid<br/>from geojson import Polygon, Feature</span><span id="efe5" class="kl km hi kh b fi kr ko l kp kq">polygon = Polygon([[(-81, 41), (-88, 36), (-84, 31), (-80, 33), (-77, 39), (-81, 41)]])<br/>f = Feature(geometry=polygon)</span><span id="4878" class="kl km hi kh b fi kr ko l kp kq">centroid(polygon)</span></pre><ul class=""><li id="a6b5" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><strong class="ix hj">沿</strong>:该功能用于识别沿线串指定距离处的点特征。</li></ul><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="9990" class="kl km hi kh b fi kn ko l kp kq">from turfpy.measurement import along<br/>from geojson import LineString, Feature</span><span id="2f49" class="kl km hi kh b fi kr ko l kp kq">ls = LineString([(-83, 30), (-84, 36), (-78, 41)])<br/>f = Feature(geometry=ls)</span><span id="ec7e" class="kl km hi kh b fi kr ko l kp kq">along(f,200,'mi')</span></pre><ul class=""><li id="daa8" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><strong class="ix hj">中点</strong>:该功能用于获取任意两点之间的中点。</li></ul><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="1344" class="kl km hi kh b fi kn ko l kp kq">from turfpy.measurement import midpoint<br/>from geojson import Point, Feature</span><span id="a0b5" class="kl km hi kh b fi kr ko l kp kq">point1 = Feature(geometry=Point([144.834823, -37.771257]))<br/>point2 = Feature(geometry=Point([145.14244, -37.830937]))</span><span id="c679" class="kl km hi kh b fi kr ko l kp kq">midpoint(point1, point2)</span></pre><ul class=""><li id="2b45" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><strong class="ix hj">最近点</strong>:取一个参考点特征和点特征的特征集合，并从特征集合中返回最接近参考点特征的点。</li></ul><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="4deb" class="kl km hi kh b fi kn ko l kp kq">from turfpy.measurement import nearest_point<br/>from geojson import Point, Feature, FeatureCollection</span><span id="170b" class="kl km hi kh b fi kr ko l kp kq">f1 = Feature(geometry=Point([28.96991729736328,41.01190001748873]))<br/>f2 = Feature(geometry=Point([28.948459, 41.024204]))<br/>f3 = Feature(geometry=Point([28.938674, 41.013324]))<br/>fc = FeatureCollection([f1, f2 ,f3])<br/>t = Feature(geometry=Point([28.973865, 41.011122]))</span><span id="cdc9" class="kl km hi kh b fi kr ko l kp kq">nearest_point(t ,fc)</span></pre><ul class=""><li id="cd30" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><strong class="ix hj">特征上的点</strong>:获取一个特征或特征集合，并返回一个保证在特征表面上的点。</li></ul><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="97b2" class="kl km hi kh b fi kn ko l kp kq">from turfpy.measurement import point_on_feature<br/>from geojson import  Polygon, Feature</span><span id="6af4" class="kl km hi kh b fi kr ko l kp kq">point = Polygon([[(116, -36), (131, -32), (146, -43), (155, -25), (133, -9), (111, -22), (116, -36)]])<br/>feature = Feature(geometry=point)</span><span id="af40" class="kl km hi kh b fi kr ko l kp kq">point_on_feature(feature)</span></pre><ul class=""><li id="90ee" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><strong class="ix hj">多边形中的点</strong>:取一个点或一个点特征和多边形或多边形特征作为输入，如果点在给定的特征中，则返回True。</li></ul><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="fca6" class="kl km hi kh b fi kn ko l kp kq">from turfpy.measurement import boolean_point_in_polygon<br/>from geojson import Point, MultiPolygon, Feature</span><span id="12b3" class="kl km hi kh b fi kr ko l kp kq">point = Feature(geometry=Point([-77, 44]))<br/>polygon = Feature(geometry=MultiPolygon([([(-81, 41), (-81, 47), (-72, 47), (-72, 41), (-81, 41)],),<br/>([(3.78, 9.28), (-130.91, 1.52), (35.12, 72.234), (3.78, 9.28)],)]))</span><span id="e4e4" class="kl km hi kh b fi kr ko l kp kq">boolean_point_in_polygon(point, polygon)</span></pre><ul class=""><li id="2b70" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><strong class="ix hj">与多边形相切</strong>:从一个点找到一个(多)多边形的切线。</li></ul><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="fe29" class="kl km hi kh b fi kn ko l kp kq">from turfpy.measurement import polygon_tangents<br/>from geojson import Polygon, Point, Feature</span><span id="e883" class="kl km hi kh b fi kr ko l kp kq">point = Feature(geometry=Point([61, 5]))<br/>polygon = Feature(geometry=Polygon([[(11, 0), (22, 4), (31, 0), (31, 11), (21, 15), (11, 11), (11, 0)]]))</span><span id="af73" class="kl km hi kh b fi kr ko l kp kq">polygon_tangents(point, polygon)</span></pre><ul class=""><li id="0265" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><strong class="ix hj">点到线的距离</strong>:返回一个点和任意线段之间的最小距离。</li></ul><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="7608" class="kl km hi kh b fi kn ko l kp kq">from turfpy.measurement import point_to_line_distance<br/>from geojson import LineString, Point, Feature</span><span id="989e" class="kl km hi kh b fi kr ko l kp kq">point = Feature(geometry=Point([0, 0]))<br/>linestring = Feature(geometry=LineString([(1, 1),(-1, 1)]))</span><span id="0c9d" class="kl km hi kh b fi kr ko l kp kq">point_to_line_distance(point, linestring)</span></pre><ul class=""><li id="9771" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><strong class="ix hj">恒向方位</strong>:取两个点，沿恒向线找到它们之间的方位角度，即以度为单位测量的角度从北线(0度)开始。</li></ul><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="5d01" class="kl km hi kh b fi kn ko l kp kq">from turfpy.measurement import rhumb_bearing<br/>from geojson import Feature, Point</span><span id="08f9" class="kl km hi kh b fi kr ko l kp kq">start = Feature(geometry=Point([-75.343, 39.984]))<br/>end = Feature(geometry=Point([-75.534, 39.123]))</span><span id="f4b4" class="kl km hi kh b fi kr ko l kp kq">rhumb_bearing(start, end, True)</span></pre><ul class=""><li id="15cd" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><strong class="ix hj">恒向目的地</strong>:返回从原点沿恒向线以给定方位行进了给定距离的目的点。</li></ul><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="a36e" class="kl km hi kh b fi kn ko l kp kq">from turfpy.measurement import rhumb_destination<br/>from geojson import Point, Feature</span><span id="e7c6" class="kl km hi kh b fi kr ko l kp kq">start = Feature(geometry=Point([-75.343, 39.984]), properties={"marker-color": "F00"})<br/>distance = 50<br/>bearing = 90</span><span id="a859" class="kl km hi kh b fi kr ko l kp kq">rhumb_destination(start, distance, bearing, {'units':'mi', 'properties': {"marker-color": "F00"}})</span></pre><ul class=""><li id="b7df" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><strong class="ix hj">恒向距离</strong>:计算两点之间沿恒向线的距离，单位为度、弧度、英里或千米。</li></ul><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="6c2e" class="kl km hi kh b fi kn ko l kp kq">from turfpy.measurement import rhumb_distance<br/>from geojson import Point, Feature</span><span id="fe93" class="kl km hi kh b fi kr ko l kp kq">start = Feature(geometry=Point([-75.343, 39.984]))<br/>end = Feature(geometry=Point([-75.534, 39.123]))</span><span id="f61d" class="kl km hi kh b fi kr ko l kp kq">rhumb_distance(start, end,'mi')</span></pre><ul class=""><li id="5493" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><strong class="ix hj"> Square </strong>:获取一个边界框，并计算包含输入的最小正方形边界框。</li></ul><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="5e29" class="kl km hi kh b fi kn ko l kp kq">from turfpy.measurement import square</span><span id="fbac" class="kl km hi kh b fi kr ko l kp kq">bbox = [-20, -20, -15, 0]</span><span id="5020" class="kl km hi kh b fi kr ko l kp kq">square(bbox)</span></pre><ul class=""><li id="7a3f" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated"><strong class="ix hj"> Circle </strong>:取一个点，计算给定半径为度、弧度、英里或千米的圆多边形；和精确的步骤。</li></ul><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="3fd5" class="kl km hi kh b fi kn ko l kp kq">from turfpy import circle<br/>from geojson import Point, Feature</span><span id="ebc8" class="kl km hi kh b fi kr ko l kp kq">circle(center=Feature(geometry=Point((-75.343, 39.984))), radius=5, steps=10)</span></pre><h1 id="fd91" class="kv km hi bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">单位类型</h1><p id="46dc" class="pw-post-body-paragraph iv iw hi ix b iy ls ja jb jc lt je jf jg lu ji jj jk lv jm jn jo lw jq jr js hb bi translated">有些功能支持将<code class="du ks kt ku kh b">units</code>作为参数，对于单位为参数的功能，<code class="du ks kt ku kh b">units</code>的默认值为<code class="du ks kt ku kh b">kilometers</code>。其值为:</p><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="8b98" class="kl km hi kh b fi kn ko l kp kq">'km' = kilometers<br/>'m' = meters<br/>'mi = miles<br/>'ft' = feets<br/>'in' = inches<br/>'deg' = degrees<br/>'cen' = centimeters<br/>'rad' = radians<br/>'naut' = nauticals<br/>'yd' = yards</span></pre><p id="c41b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这就是Turfpy的所有功能。我希望你喜欢它。</p><p id="6511" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">非常欢迎对新功能和新特性或现有功能和特性的改进提出任何建议。</p><p id="0d25" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">享受快乐编码！！！</p></div></div>    
</body>
</html>