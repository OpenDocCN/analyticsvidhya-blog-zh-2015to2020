<html>
<head>
<title>Creating a Weather Forecast App with Python using Openweathermap and MongoDB</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python和Openweathermap和MongoDB创建天气预报应用程序</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/creating-a-weather-forecast-app-with-python-using-openweathermap-and-mongodb-d6e5858a4f69?source=collection_archive---------4-----------------------#2020-03-14">https://medium.com/analytics-vidhya/creating-a-weather-forecast-app-with-python-using-openweathermap-and-mongodb-d6e5858a4f69?source=collection_archive---------4-----------------------#2020-03-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/ac77f25f74459efd0d98c47b4c6ff7b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rwd7MKZioWRz5INz.jpg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">穆罕默德·马哈茂德·哈桑拍摄于https://www.publicdomainpictures.net/en/view-image.php?的天气预报图片image=269235 &amp;图片=天气预报</figcaption></figure><h1 id="5750" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">介绍</h1><p id="84a5" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">关于天气的信息是非常重要的，特别是如果你想预测天气的变化会影响到商业，如街头小贩，农业，航空，娱乐等。事先掌握天气信息可以帮助人们做好准备以避免损失。</p><p id="07ed" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">为此，重要的是要有一个应用程序，它可以让我们了解天气警报，并可能将天气数据存储在数据库中进行分析。</p><p id="5851" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">在本文中，我介绍了我使用Openweathermaps API和MongoDB用Python编程语言创建天气预报应用程序的工作。这个应用程序下载定义的城市5天-3小时的天气预报数据，在这种情况下，卡拉奇，伦敦，孟买和犹他州。它将预测数据存储在MongoDB中，并显示天气警报，如雪、雨或冰冻温度，如果这些城市的预测中有这些警报的话。它还为每个预报创建一个天气图，并在地图上显示天气预报。</p><p id="e05e" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">以下是这个应用程序的重要组成部分。</p><p id="7d1a" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated"><strong class="jv hj">开放气象地图</strong></p><p id="829a" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">OpenWeatherMap是一项在线服务，为分析提供当前、历史和天气预报数据。为了交流天气数据，用户必须在https://openweathermap.org/<a class="ae iu" href="https://openweathermap.org/" rel="noopener ugc nofollow" target="_blank">订阅Openweathermap网站，然后用户可以获得API访问密钥。只需从服务器API端点请求数据，就可以下载天气数据。数据是JSON格式的。</a></p><p id="5340" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated"><strong class="jv hj"> MongoDB </strong></p><p id="fe37" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">MongoDB是一个NoSQL数据库，使用灵活的模式将数据存储在类似JSON的文档中。在这个项目中，我使用MongoDB来存储数据。Pymongo是用于连接Mongodb和Python代码的库。</p><p id="9029" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated"><strong class="jv hj">叶子</strong></p><p id="0811" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">follow构建在Python生态系统的数据优势和fleet . js库的映射优势之上。它可用于在Python中操作您的数据，然后通过leav将其可视化在活页地图上。我用它在地图上显示天气标记。</p><h1 id="fcd3" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">程序</h1><p id="5ef2" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">在这个项目中，我完成了以下任务:</p><ol class=""><li id="467f" class="kw kx hi jv b jw kr ka ks ke ky ki kz km la kq lb lc ld le bi translated">在https://openweathermap.org/api<a class="ae iu" href="https://openweathermap.org/api" rel="noopener ugc nofollow" target="_blank">创建账户</a></li><li id="d8c1" class="kw kx hi jv b jw lf ka lg ke lh ki li km lj kq lb lc ld le bi translated">通过订阅OpenWeatherMap网站获取API访问密钥</li><li id="3d69" class="kw kx hi jv b jw lf ka lg ke lh ki li km lj kq lb lc ld le bi translated">做一个多线程程序连接API。要监控的位置应放在配置文件中</li><li id="b945" class="kw kx hi jv b jw lf ka lg ke lh ki li km lj kq lb lc ld le bi translated">一个线程下载5天/3小时预报</li><li id="0d14" class="kw kx hi jv b jw lf ka lg ke lh ki li km lj kq lb lc ld le bi translated">下载天气图的一个线程</li><li id="36f8" class="kw kx hi jv b jw lf ka lg ke lh ki li km lj kq lb lc ld le bi translated">所有的数据应该存储在数据库(mongodb)作为单独的集合/表</li><li id="bfff" class="kw kx hi jv b jw lf ka lg ke lh ki li km lj kq lb lc ld le bi translated">一个线程打开最新的天气地图，并在窗口中显示地图(应显示最后一个时间戳的最后一个图像)</li><li id="d225" class="kw kx hi jv b jw lf ka lg ke lh ki li km lj kq lb lc ld le bi translated">如果有雨/雪或冰冻温度(&lt;2 degree Fahrenheit) in any of forecast period</li><li id="7c84" class="kw kx hi jv b jw lf ka lg ke lh ki li km lj kq lb lc ld le bi translated">Display forecast/previous data from database as a graph</li></ol><p id="febb" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">The following code snippet shows how to download Openweathermap API data and store it in MongoDB database and show weather alerts.</p><figure class="lk ll lm ln fd ij"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="d9ab" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">The following code snippet shows how to create a weather map with appropriate weather symbol on top of city location on map.</p><figure class="lk ll lm ln fd ij"><div class="bz dy l di"><div class="lo lp l"/></div></figure><h1 id="54e2" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated"><strong class="ak">结果</strong>)，预测线程应打印出警报</h1><p id="8890" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">首先，我们看到的是5天预报中的天气警报。如果指定城市的天气预报有雨、雪或冰冻天气(【https://www.youtube.com/watch?v=8rV9k2tVWWI】T2&amp;t = 36s</p><figure class="lk ll lm ln fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lq"><img src="../Images/c4c264c4b7ecc095b2ab3c79ab2f6977.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0MoIp0bQI9plBiMptTxbJA.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">完整的代码可以在GitHub上找到，网址是<a class="ae iu" href="https://github.com/shayanalibhatti/Weather_forecast_using_Python_Openweathermap_and_MongoDB" rel="noopener ugc nofollow" target="_blank">https://GitHub . com/shayanalibhatti/Weather _ forecast _ using _ Python _ Openweathermap _ and _ MongoDB</a></figcaption></figure><p id="93a4" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi translated">希望你喜欢这个项目或发现它有帮助:)</p><figure class="lk ll lm ln fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/2f58b20682520cf2e70ce1286bea8788.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6wkGChj2Nq7nmYbyTmkFfQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Weather Map for Utah for 19th March, 5pm</figcaption></figure><p id="f2a2" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi">Following image shows the plot of all the weathers for Utah present in database with temperature in Fahrenheit w.r.t date and time.</p><figure class="lk ll lm ln fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ls"><img src="../Images/3a112709f99142ba939249d684fce792.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VEm5klb1AQQ2uQy1I2mFRw.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Temperature forecast plot with Temperature (F) on y-axis and Date-time on x-axis</figcaption></figure><p id="69e1" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi">Here is how the data in MongoDB looks like. We get temperature info, weather description, wind and timestamps separated by 3 hours since it is 5 day/3-hour separated weather forecast data. For the database, timestamp is made primary key to avoid duplicate records.</p><figure class="lk ll lm ln fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lt"><img src="../Images/ddb94da2350ec1df0d69e49b25db9e47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FaJ2NM3CEIUXfbcsWl_wiA.jpeg"/></div></div></figure><h1 id="cfb5" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi">Conclusion:</h1><p id="cd09" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi">In this project, I learnt to interface Mongo DB with Openweathermap API to visualize past, present and future weather forecast for analytics. I hope it will be useful to people learning about interfacing Python with Openweathermaps API and MongoDB.</p><p id="8b04" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi">A detailed explanation video of this project can be viewed on YouTube at <a class="ae iu" href="https://www.youtube.com/watch?v=8rV9k2tVWWI&amp;t=36s" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=8rV9k2tVWWI&amp;t=36s</a></p><p id="2e50" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi">Complete code is available on GitHub at <a class="ae iu" href="https://github.com/shayanalibhatti/Weather_forecast_using_Python_Openweathermap_and_MongoDB" rel="noopener ugc nofollow" target="_blank">https://github.com/shayanalibhatti/Weather_forecast_using_Python_Openweathermap_and_MongoDB</a></p><p id="3eed" class="pw-post-body-paragraph jt ju hi jv b jw kr jy jz ka ks kc kd ke kt kg kh ki ku kk kl km kv ko kp kq hb bi">Hope you liked this project or found it helpful :)</p></div></div>    
</body>
</html>