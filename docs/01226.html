<html>
<head>
<title>AI model to predict System operation failures using incremental log analysis using the fast.ai libraries</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用fast.ai库的增量日志分析来预测系统操作故障的AI模型</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/ai-model-to-predict-system-operation-failures-using-incremental-log-analysis-using-the-fast-ai-2764d4c4cf04?source=collection_archive---------7-----------------------#2019-10-09">https://medium.com/analytics-vidhya/ai-model-to-predict-system-operation-failures-using-incremental-log-analysis-using-the-fast-ai-2764d4c4cf04?source=collection_archive---------7-----------------------#2019-10-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/09adbde083d4a1b19aa4f08113fdb2a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6hNwMjKA7hUO56dP"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">萨法尔·萨法罗夫在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="e7f2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">问题陈述:</strong></p><p id="4e3a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我可以训练一个基于NLP的模型来读取服务日志，并在操作完成之前预测操作的潜在结果(通过/失败)吗？</p><h2 id="bacd" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated"><strong class="ak">摘要:</strong></h2><p id="9385" class="pw-post-body-paragraph iv iw hi ix b iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">考虑到任何操作生成的日志都是我们解决任何问题的参考点，我想探索可能的NLP解决方案，其中我可以训练一个模型，以持续监视流程生成的日志并“理解”日志记录模式，从而实时估计操作通过与失败的总体概率。</p><p id="3833" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我使用了<strong class="ix hj"> fast.ai </strong>框架，先构建语言模型，构建“以流程为中心”的词汇表。这是必要的，因为为了让我的模型“理解”Python表达式，如文件夹路径“/opt/”或单词“Python ”,并且不会将它们分别与“choice”和“Snake”混淆，语言模型是必要的。</p><p id="2181" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦建立了语言模型，我就用这个词汇来建立一个分类器，这个分类器使用预先训练好的基于AWD-LSTM的模型提供的权重(因此使用了迁移学习的概念)。</p><p id="32e3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">训练集是来自各种通过和失败场景的系统更新(操作)日志的预处理列表。</p><p id="8283" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">测试集是一组不同的预处理过的系统更新日志列表，这是模型以前没有见过的。</p><p id="ab64" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这个练习的目的是输入这个测试集，并将它的总体预测结果与实际结果进行比较。</p><h2 id="0c60" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated"><strong class="ak">详情:</strong></h2><p id="6613" class="pw-post-body-paragraph iv iw hi ix b iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">该模型能够根据增量日志文件信息(随着系统更新的进行)预测系统更新操作的通过/失败状态的概率。</p><p id="4c0a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">通过更多的训练，我认为我们应该能够生成更好的预测，并在流程周期的更早阶段捕获故障预测..</p><p id="9333" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我通过了测试集中5个样本的10%、30%、50%、75%、95%、99%和100%的日志文件，注意到了这些失败预测。</p><figure class="ku kv kw kx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kt"><img src="../Images/9b87b23fee42e0eaedce67ef0cb0a43b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jaTZXOHPxWjv5okiBCBe9g.png"/></div></div></figure><p id="6e71" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">x轴:提供给模型的日志文件的百分比</p><p id="6f04" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">y轴:故障概率</p><p id="8728" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如您所见，最初，即大约10% (X轴)，在所有5种情况下，故障概率接近50% (Y轴)，这是可以理解的，因为模型没有足够的信息来预测最终结果。</p><p id="ac5b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在案例1、2和3中，实际结果是“失败”,而模型确实预测到了失败。我感兴趣的一点是，在大约50%数据(X轴)标记处注意到了故障趋势，这表明，在查看了50%系统更新进度时生成的日志后，模型在绘制故障趋势方面做了合理的工作。</p><p id="9d53" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">案例4是一个错误的分类。直到99%的数据，事情似乎都朝着正确的方向发展，但出于某种原因，它改变了主意，决定将其归类为“失败”场景。</p><p id="38c9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">案例#5是一个成功的系统更新操作的日志文件。正如你所看到的，失败概率总是在涉及的&lt;40% (Y-axis) chance range.</p><h2 id="23f6" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated"><strong class="ak">步骤中:</strong></h2><ol class=""><li id="28a1" class="ky kz hi ix b iy ko jc kp jg la jk lb jo lc js ld le lf lg bi translated">预处理日志文件，将整个文件转换为字符串</li><li id="50c7" class="ky kz hi ix b iy lh jc li jg lj jk lk jo ll js ld le lf lg bi translated">生成一个包含两列的熊猫数据帧:日志(X)和状态(Y)</li></ol><figure class="ku kv kw kx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/12608e34f7fd9993f0a2afe8c15dc0dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KomJ-yvq5PiA9dCIhkapcA.png"/></div></div></figure><p id="9d92" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.为其创建一个测试和训练集</p><figure class="ku kv kw kx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/5430f2ff4f4c497feec8a18de7ce8545.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RIZHDBeWuIXtZMjml7ZBlg.png"/></div></div></figure><p id="527a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">4.使用fast.ai库生成语言模型，这将有助于创建特定于语言的词汇。</p><p id="b9b4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">5.使用此词汇表创建一个TextDataBunch，然后可以用它来训练分类器</p><figure class="ku kv kw kx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/938c3a382449497fa9a19aa23fa81c26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xzA4HxOVzAM4BbYRoBpBmQ.png"/></div></div></figure><p id="6498" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">6.现在，我们继续训练我们的模型:</p><figure class="ku kv kw kx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/ca0861282039a6011785ef187c6c2826.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6g4cge2qRSgvMp59vF1Wjw.png"/></div></div></figure><h2 id="f8ef" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated"><strong class="ak">一些有趣的观察:</strong></h2><p id="9fb7" class="pw-post-body-paragraph iv iw hi ix b iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">1.为了生成这些结果，我需要的数据量非常少。</p><p id="f870" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.我构建和使用词汇表的基础语言模型为我在其上构建模型提供了一个良好的基础。鉴于我在使用基于英文文章的Word2Vec和TF-IDF等令牌化工具时的失败尝试，它们与我们的系统日志的上下文相关性很低。(例如，word2vec中类似于“Python”的单词是蛇和其他爬行动物，而我们想要的是更特定于系统的)。</p><h2 id="327a" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated"><strong class="ak">总结:</strong></h2><p id="dcc7" class="pw-post-body-paragraph iv iw hi ix b iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">我们应该能够为各种关键操作建立更精确的相似模型，并执行以下任务:</p><ol class=""><li id="95ac" class="ky kz hi ix b iy iz jc jd jg lq jk lr jo ls js ld le lf lg bi translated">在周期的早期生成相关的警报</li><li id="fafb" class="ky kz hi ix b iy lh jc li jg lj jk lk jo ll js ld le lf lg bi translated">自动或手动采取纠正措施来解决问题</li></ol><h2 id="9fa7" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated"><strong class="ak">参考文献:</strong></h2><ol class=""><li id="7457" class="ky kz hi ix b iy ko jc kp jg la jk lb jo lc js ld le lf lg bi translated">Gaurav Arora 做了很多出色的工作。其中有一个是我用来作为参考来熟悉fast.ai库的:<a class="ae iu" href="https://github.com/goru001/nlp-for-kannada/blob/master/classification/Kannada_Classification_Model.ipynb" rel="noopener ugc nofollow" target="_blank">https://github . com/goru 001/NLP-for-Kannada/blob/master/Classification/Kannada _ Classification _ model . ipynb</a></li><li id="0e90" class="ky kz hi ix b iy lh jc li jg lj jk lk jo ll js ld le lf lg bi translated"><a class="ae iu" rel="noopener" href="/datadriveninvestor/deep-learning-with-python-and-fast-ai-part-2-nlp-classification-with-transfer-learning-e7aaf7514e04">https://medium . com/datadriveninvestor/deep-learning-with-python-and-fast-ai-part-2-NLP-class ification-with-transfer-learning-e7aaf 7514 e 04</a></li><li id="f76e" class="ky kz hi ix b iy lh jc li jg lj jk lk jo ll js ld le lf lg bi translated"><a class="ae iu" href="https://www.fast.ai/" rel="noopener ugc nofollow" target="_blank">https://www.fast.ai/</a></li></ol></div></div>    
</body>
</html>