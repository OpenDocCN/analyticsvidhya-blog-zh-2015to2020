<html>
<head>
<title>Top 10 Design tips for building REST APIs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建REST APIs的10大设计技巧</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/top-10-design-tips-for-building-rest-apis-38f39196dd4f?source=collection_archive---------29-----------------------#2020-06-19">https://medium.com/analytics-vidhya/top-10-design-tips-for-building-rest-apis-38f39196dd4f?source=collection_archive---------29-----------------------#2020-06-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div class="er es hg"><img src="../Images/b3a6d7108ca35f576f90610b212773a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:708/format:webp/1*wgRzxs6Gld0Zi59xwZhdcw.png"/></div></figure><div class=""/><p id="b349" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">软件设计是功能性艺术。如今，一个普通人每天至少要处理25个这样的功能性数字艺术，它们都是以手机或网络应用的形式出现的。大多数数字软件都依赖于编写良好的API，REST是编写这种可伸缩API的首选和通用风格之一。</p><p id="97b3" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Roy Fielding在他的博士论文<a class="ae jk" href="https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm" rel="noopener ugc nofollow" target="_blank">(https://www . ics . UCI . edu/~ Fielding/pubs/dissertation/REST _ arch _ style . htm)</a>中创造了一种架构风格的缩写REST(representative State Transfer)来为可伸缩的架构制定指导方针，该架构通过使web程序员能够将大规模分布式网站的设计分解为更小的独立自足的资源来简化应用程序设计。</p><p id="90e6" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">下面是一些重要的设计考虑因素，它们会使编写高效的REST APIs变得更加容易。</p><h2 id="51e0" class="jl jm hp bd jn jo jp jq jr js jt ju jv ix jw jx jy jb jz ka kb jf kc kd ke kf bi translated"><strong class="ak">客户端-服务器架构</strong></h2><p id="c9a3" class="pw-post-body-paragraph im in hp io b ip kg ir is it kh iv iw ix ki iz ja jb kj jd je jf kk jh ji jj hb bi translated">REST设计必须遵循<strong class="io hq">客户端-服务器</strong>架构。客户端和服务器应该在关注点上没有重叠。服务器存储和/或处理信息，并以有效的方式使其对用户可用。客户端获取该信息并将其显示给用户和/或使用它来执行后续的信息请求。</p><p id="34ae" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">只要接口保持不变，这种关注点的分离对于让客户机和服务器独立发展是很重要的。</p><h2 id="73b7" class="jl jm hp bd jn jo jp jq jr js jt ju jv ix jw jx jy jb jz ka kb jf kc kd ke kf bi translated">无国籍</h2><p id="9209" class="pw-post-body-paragraph im in hp io b ip kg ir is it kh iv iw ix ki iz ja jb kj jd je jf kk jh ji jj hb bi translated">REST应用程序是无状态的。这意味着客户机和服务器之间的通信总是包含执行请求所需的所有信息。会话状态应该完全保存在客户端。如果对资源的访问需要身份验证，那么客户端需要对每个请求进行身份验证。</p><h2 id="bfe4" class="jl jm hp bd jn jo jp jq jr js jt ju jv ix jw jx jy jb jz ka kb jf kc kd ke kf bi translated">可缓存性</h2><p id="bf68" class="pw-post-body-paragraph im in hp io b ip kg ir is it kh iv iw ix ki iz ja jb kj jd je jf kk jh ji jj hb bi translated">REST是可缓存的。客户端、服务器和任何中间组件都可以缓存资源以提高性能。</p><h2 id="4ebd" class="jl jm hp bd jn jo jp jq jr js jt ju jv ix jw jx jy jb jz ka kb jf kc kd ke kf bi translated"><strong class="ak">统一接口架构</strong></h2><p id="d433" class="pw-post-body-paragraph im in hp io b ip kg ir is it kh iv iw ix ki iz ja jb kj jd je jf kk jh ji jj hb bi translated">REST在组件之间提供了<strong class="io hq">统一接口</strong>。这意味着所有组件遵循相同的规则相互通信。这也使得理解系统的不同组件之间的交互变得更加容易。</p><h2 id="775e" class="jl jm hp bd jn jo jp jq jr js jt ju jv ix jw jx jy jb jz ka kb jf kc kd ke kf bi translated">分层系统设计</h2><p id="ad08" class="pw-post-body-paragraph im in hp io b ip kg ir is it kh iv iw ix ki iz ja jb kj jd je jf kk jh ji jj hb bi translated">所有REST应用程序都应设计成一个<strong class="io hq">分层系统</strong>。单个组件无法看到与其交互的直接层之外的内容。这意味着连接到一个中间组件(如代理)的客户机不知道除此之外还有什么。</p><p id="5274" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这允许组件是独立的，因此容易替换或扩展。</p><h2 id="48d2" class="jl jm hp bd jn jo jp jq jr js jt ju jv ix jw jx jy jb jz ka kb jf kc kd ke kf bi translated"><strong class="ak">按需编码</strong></h2><p id="40c8" class="pw-post-body-paragraph im in hp io b ip kg ir is it kh iv iw ix ki iz ja jb kj jd je jf kk jh ji jj hb bi translated">REST可选地按需提供<strong class="io hq">代码</strong>。可以下载代码来扩展客户端功能。但是这是可选的，因为客户端可能无法下载或运行这段代码，所以REST组件不能依赖它的执行。</p><h2 id="d268" class="jl jm hp bd jn jo jp jq jr js jt ju jv ix jw jx jy jb jz ka kb jf kc kd ke kf bi translated">HTTP动词</h2><p id="a210" class="pw-post-body-paragraph im in hp io b ip kg ir is it kh iv iw ix ki iz ja jb kj jd je jf kk jh ji jj hb bi translated">REST坚持使用协议提供的方法。这意味着虔诚地遵循GET、POST、PUT和DELETE的含义。</p><ul class=""><li id="1365" class="kl km hp io b ip iq it iu ix kn jb ko jf kp jj kq kr ks kt bi translated"><strong class="io hq"> POST </strong>总是用于创建资源(不管它是否被复制)</li><li id="5714" class="kl km hp io b ip ku it kv ix kw jb kx jf ky jj kq kr ks kt bi translated"><strong class="io hq"> PUT </strong>用于检查资源是否存在，然后更新，否则创建新的资源</li><li id="33a5" class="kl km hp io b ip ku it kv ix kw jb kx jf ky jj kq kr ks kt bi translated"><strong class="io hq">补丁</strong>总是用于更新资源，并且只包含要更新的字段</li><li id="980d" class="kl km hp io b ip ku it kv ix kw jb kx jf ky jj kq kr ks kt bi translated"><strong class="io hq">删除</strong>不言自明</li></ul><h2 id="96f5" class="jl jm hp bd jn jo jp jq jr js jt ju jv ix jw jx jy jb jz ka kb jf kc kd ke kf bi translated">可理解的错误消息</h2><p id="f392" class="pw-post-body-paragraph im in hp io b ip kg ir is it kh iv iw ix ki iz ja jb kj jd je jf kk jh ji jj hb bi translated">由于REST APIs被设计为被视为资源，一旦定义和部署，它们将从一系列接口被访问。为了使API普遍适用，程序员需要确保错误消息有意义，并遵循可理解的标准，如使用HTTP错误代码。使用定制的错误消息需要定制的代码来处理这些消息，无论REST API在哪里被访问，都需要全面的文档。</p><h2 id="98b6" class="jl jm hp bd jn jo jp jq jr js jt ju jv ix jw jx jy jb jz ka kb jf kc kd ke kf bi translated"><strong class="ak"> HATEOAS </strong>:作为应用状态引擎的超媒体</h2><p id="2500" class="pw-post-body-paragraph im in hp io b ip kg ir is it kh iv iw ix ki iz ja jb kj jd je jf kk jh ji jj hb bi translated">REST世界中的一个新的首字母缩略词是HATEOAS，即作为应用程序状态引擎的超媒体。这意味着服务器以超媒体的形式提供有关数据或操作的信息。REST架构风格允许在响应内容中包含超媒体链接(URL ),这样客户机就可以通过遍历超媒体链接动态地导航到适当的资源。</p><h2 id="6ab4" class="jl jm hp bd jn jo jp jq jr js jt ju jv ix jw jx jy jb jz ka kb jf kc kd ke kf bi translated">可寻址资源。</h2><p id="ddbe" class="pw-post-body-paragraph im in hp io b ip kg ir is it kh iv iw ix ki iz ja jb kj jd je jf kk jh ji jj hb bi translated">REST API中的每个端点都封装了一个资源，该资源是一个具有类型、数据和一组对其进行操作的标准HTTP方法的对象。资源可以与其他资源相关联，也可以独立存在。</p><p id="6be8" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Web应用程序设计人员决定如何在每个端点级别处理资源集合。根据数据可访问性要求，端点可以封装一个集合或一个资源集合。REST设计中的每个资源都应该在REST APIs中有一个ID或一个可访问的URI</p><p id="1de3" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">设计者的任务是以一种方式构建REST资源模型，使得每个端点有效地返回数据，同时保持跨端点的独立性。</p><figure class="la lb lc ld fd hk er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es kz"><img src="../Images/73af79881971a0236344432c44c515d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O-LXW2BtCebCasetia4AUw.png"/></div></div></figure><h2 id="9029" class="jl jm hp bd jn jo jp jq jr js jt ju jv ix jw jx jy jb jz ka kb jf kc kd ke kf bi translated">以名词命名的REST端点</h2><p id="99ea" class="pw-post-body-paragraph im in hp io b ip kg ir is it kh iv iw ix ki iz ja jb kj jd je jf kk jh ji jj hb bi translated">判断REST设计的一个快速指标是查看定义的uri的名称。资源设计的重点应该是资源与其子资源之间的关系。这些资源URIs是RESTful服务的端点。</p><p id="776c" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">例如，考虑一个应用程序，其中设备是顶级资源。配置是设备下的子资源。一套好的URIs应该是</p><p id="6584" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><code class="du li lj lk ll b">/devices</code></p><p id="0a08" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><code class="du li lj lk ll b">/devices/{id}</code></p><p id="0e2d" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">请注意，这些URIs没有使用任何动词或操作。在URIs中不要包含任何动词，让http动词决定端点的行为，这一点非常重要。</p></div></div>    
</body>
</html>