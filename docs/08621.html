<html>
<head>
<title>How to Manage Translations of a React application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何管理 React 应用程序的翻译</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-manage-translations-of-a-react-application-55b46e6409da?source=collection_archive---------12-----------------------#2020-08-05">https://medium.com/analytics-vidhya/how-to-manage-translations-of-a-react-application-55b46e6409da?source=collection_archive---------12-----------------------#2020-08-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="e9eb" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">向导</h2><div class=""/><p id="75b5" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">以及如何在翻译任务适当分配的情况下做到这一点</p><figure class="jn jo jp jq fd jr er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es jm"><img src="../Images/d6eb2a7799c6d426e005f6beb7833c0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_y8rkYgBoQOYyPuWLUOANQ.png"/></div></div></figure><p id="8843" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">很长一段时间以来，我一直想知道是否存在一种工具，可以在云中的一个表中管理我的网站的翻译。</p><p id="b5c2" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs">在一张表中管理多种语言的好处:</strong></p><ol class=""><li id="c0e4" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl kd ke kf kg bi translated">更快地管理，因为您看到了缺少的翻译</li><li id="7c99" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">您可以将链接复制到表格，并将其发送给翻译人员</li></ol><p id="61b4" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">但是 React i18n 的原生解决方案不允许这样做。</p><p id="30c6" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs">现在让我自我介绍一下。</strong></p><p id="9d98" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">我是一家名为<a class="ae km" href="http://reface.tech" rel="noopener ugc nofollow" target="_blank">的初创公司</a>的创始人，该公司现在发起了一场全球范围的公关活动。这就是为什么我真的需要一个工具来快速管理翻译。</p><p id="4da3" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs">所以我决定写几个剧本:</strong></p><ol class=""><li id="e72f" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl kd ke kf kg bi translated">首先将所有的翻译上传到观念</li><li id="66f5" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">第二步是将一种语言翻译成所需的一组语言(对于译者来说，检查速度更快，而不是从起始点开始翻译)</li><li id="bca7" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">第三个将下载所有内容并组成一个文件用于 React</li></ol><p id="73d5" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">观念是什么？维基百科:</p><blockquote class="kn ko kp"><p id="4891" class="io ip kq iq b ir is it iu iv iw ix iy kr ja jb jc ks je jf jg kt ji jj jk jl hb bi translated"><strong class="iq hs">概念</strong>是一个应用程序，提供了数据库、看板、wikis、日历和提醒等组件。用户可以连接这些组件来创建自己的知识管理、笔记、数据管理、项目管理等系统。这些组件和系统可以单独使用，也可以与他人合作使用。</p></blockquote><p id="4f09" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">所以它是一个非常复杂的应用程序(就像一把瑞士刀)，有很多功能可以让你的生活更简单。</p></div><div class="ab cl ku kv gp kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="hb hc hd he hf"><h1 id="24a5" class="lb lc hi bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">工具</h1><p id="6d8e" class="pw-post-body-paragraph io ip hi iq b ir lz it iu iv ma ix iy iz mb jb jc jd mc jf jg jh md jj jk jl hb bi translated">我们的脚本将用 Python 编写。</p><ul class=""><li id="a895" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl me ke kf kg bi translated">对于概念集成，我们将使用概念 API 的<a class="ae km" href="https://github.com/jamalex/notion-py" rel="noopener ugc nofollow" target="_blank">非官方包装器(因为目前概念没有公共包装器)。</a></li><li id="0f54" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl me ke kf kg bi translated">对于 React 单页面应用程序的本地化，我们使用<a class="ae km" href="https://www.npmjs.com/package/react-localization" rel="noopener ugc nofollow" target="_blank"> react-localization </a>包。它的一些功能是检测浏览器语言和支持快速改变语言(例如，如果用户点击某个按钮)。</li></ul><p id="26b4" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs">该库的数据以以下 JSON 格式存储:</strong></p><pre class="jn jo jp jq fd mf mg mh mi aw mj bi"><span id="9b8f" class="mk lc hi mg b fi ml mm l mn mo">{<br/>   “en”: {</span><span id="c66b" class="mk lc hi mg b fi mp mm l mn mo">      “some_key”: “value”</span><span id="9b2a" class="mk lc hi mg b fi mp mm l mn mo">   }</span><span id="51e5" class="mk lc hi mg b fi mp mm l mn mo">}</span></pre><ol class=""><li id="f49a" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl kd ke kf kg bi translated"><code class="du mq mr ms mg b">en</code>是语言代码</li><li id="9682" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated"><code class="du mq mr ms mg b">some_key</code>是某个字符串的键(所以我们可以访问它)</li></ol><ul class=""><li id="06f9" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl me ke kf kg bi translated">为了翻译这篇文章，我使用了一个名为<a class="ae km" href="https://pypi.org/project/googletrans/" rel="noopener ugc nofollow" target="_blank"> googletrans </a>的库。从它的名字你就能明白，它使用谷歌翻译工具来翻译文本。</li></ul><h1 id="b571" class="lb lc hi bd ld le mt lg lh li mu lk ll lm mv lo lp lq mw ls lt lu mx lw lx ly bi translated">第一步。创建表格</h1><p id="60a3" class="pw-post-body-paragraph io ip hi iq b ir lz it iu iv ma ix iy iz mb jb jc jd mc jf jg jh md jj jk jl hb bi translated">该表应该有这样的列:</p><ul class=""><li id="fc4f" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl me ke kf kg bi translated"><strong class="iq hs">键</strong>是访问字符串资源的东西</li><li id="76d8" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl me ke kf kg bi translated"><strong class="iq hs"> languages columns </strong>根据您希望 React 站点翻译的语言进行命名。如果你想把你的网站翻译成意大利语<strong class="iq hs">和俄语</strong>和俄语<strong class="iq hs">这两个栏目分别是<strong class="iq hs"> it </strong>和<strong class="iq hs"> ru </strong>。</strong></li></ul><p id="fbb5" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs">下面是我的例子:</strong></p><figure class="jn jo jp jq fd jr er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es my"><img src="../Images/6bad3f24daa29005ef4bf3c9160d5979.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x-CxHdI8RT7VOCTvZ2Q9bg.png"/></div></div></figure></div><div class="ab cl ku kv gp kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="hb hc hd he hf"><h1 id="b2a4" class="lb lc hi bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">第二步。概念授权</h1><p id="8f83" class="pw-post-body-paragraph io ip hi iq b ir lz it iu iv ma ix iy iz mb jb jc jd mc jf jg jh md jj jk jl hb bi translated">我们需要一个叫做<code class="du mq mr ms mg b">token</code>的特殊东西来调用概念 API。</p><p id="da55" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs">要得到它:</strong></p><ol class=""><li id="f250" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl kd ke kf kg bi translated">转到概念</li><li id="bb34" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">使用我们酷的 Ctrl + Shift + J，打开控制台</li><li id="15ca" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">转到应用程序—cookie，复制<code class="du mq mr ms mg b">token_v2</code></li></ol></div><div class="ab cl ku kv gp kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="hb hc hd he hf"><h1 id="c9f1" class="lb lc hi bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">第三步。一些常数</h1><p id="d26b" class="pw-post-body-paragraph io ip hi iq b ir lz it iu iv ma ix iy iz mb jb jc jd mc jf jg jh md jj jk jl hb bi translated">我们开始写 Python 代码。让我们先写一个文件，其中包含一些工作所需的常数。</p><figure class="jn jo jp jq fd jr"><div class="bz dy l di"><div class="mz na l"/></div></figure><ul class=""><li id="2c41" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl me ke kf kg bi translated"><code class="du mq mr ms mg b">TRANSLATIONS</code>是你希望你的网站被翻译的语言列表</li><li id="e377" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl me ke kf kg bi translated">你的想法是令牌吗</li><li id="0a43" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl me ke kf kg bi translated"><code class="du mq mr ms mg b">REACT</code>是存储翻译的表格的链接</li><li id="29cf" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl me ke kf kg bi translated"><code class="du mq mr ms mg b">REACT_FILE</code>是存储翻译的文件</li></ul></div><div class="ab cl ku kv gp kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="hb hc hd he hf"><h1 id="c6fa" class="lb lc hi bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">第四步。将翻译上传到概念的脚本</h1><p id="a5a5" class="pw-post-body-paragraph io ip hi iq b ir lz it iu iv ma ix iy iz mb jb jc jd mc jf jg jh md jj jk jl hb bi translated"><strong class="iq hs">简要算法:</strong></p><ol class=""><li id="55e7" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl kd ke kf kg bi translated">首先我们加载<code class="du mq mr ms mg b">JSON</code></li><li id="fb7a" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">然后任务是迭代通过它的<code class="du mq mr ms mg b">keys</code></li><li id="3f5d" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">对于每个键，我们还应该遍历 JSON 文件中的所有<code class="du mq mr ms mg b">languages</code></li><li id="c6c7" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">对于每个条目，我们应该在概念表中找到(或添加)一个相应的行，并根据语言设置它的<code class="du mq mr ms mg b">value</code></li></ol><p id="b3be" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">现在让我们写一些代码。首先，我们来写一个用于加载<code class="du mq mr ms mg b">JSON</code>文件内容和清理的部分。我们应该清理一下，因为有些 ide(例如 WebStorm)支持多行<code class="du mq mr ms mg b">JSON</code>值，但不是规范的<code class="du mq mr ms mg b">JSON</code>。</p><p id="73a0" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">这些多行<code class="du mq mr ms mg b">JSON</code>值由几个用“+”连接的字符串组成，所以我们应该将它从内容中完全删除以正确加载<code class="du mq mr ms mg b">JSON</code>。</p><figure class="jn jo jp jq fd jr"><div class="bz dy l di"><div class="mz na l"/></div></figure><p id="b723" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">然后，我们应该编写一个函数，为特定的<code class="du mq mr ms mg b">key</code>返回(如果不存在，则添加)一个<code class="du mq mr ms mg b">row</code>。</p><figure class="jn jo jp jq fd jr"><div class="bz dy l di"><div class="mz na l"/></div></figure><ul class=""><li id="6ee2" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl me ke kf kg bi translated"><code class="du mq mr ms mg b">current_rows</code>是概念表的行。我们应该在每一步都让它们支持<code class="du mq mr ms mg b">JSON</code>文件中的副本。</li><li id="0801" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl me ke kf kg bi translated"><code class="du mq mr ms mg b">database</code>是概念表的表示</li><li id="6708" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl me ke kf kg bi translated">如果我们没有找到符合<code class="du mq mr ms mg b">key</code>的行，那么我们添加它</li></ul><p id="6635" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs">现在让我们编写整个脚本:</strong></p><figure class="jn jo jp jq fd jr"><div class="bz dy l di"><div class="mz na l"/></div></figure><p id="f2a1" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs">这里的新东西:</strong></p><ul class=""><li id="9c79" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl me ke kf kg bi translated"><code class="du mq mr ms mg b">client</code>和<code class="du mq mr ms mg b">database</code>初始化</li><li id="785f" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl me ke kf kg bi translated">迭代通过<code class="du mq mr ms mg b">translations</code>和<code class="du mq mr ms mg b">keys</code></li><li id="bc11" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl me ke kf kg bi translated">给<code class="du mq mr ms mg b">row</code>赋值</li></ul></div><div class="ab cl ku kv gp kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="hb hc hd he hf"><h1 id="c34d" class="lb lc hi bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">第五步。内容翻译的脚本</h1><p id="2248" class="pw-post-body-paragraph io ip hi iq b ir lz it iu iv ma ix iy iz mb jb jc jd mc jf jg jh md jj jk jl hb bi translated">它很小，所以我不会把它分成多个代码块。</p><figure class="jn jo jp jq fd jr"><div class="bz dy l di"><div class="mz na l"/></div></figure><ol class=""><li id="6670" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl kd ke kf kg bi translated">我们初始化一个<code class="du mq mr ms mg b">translator</code>，它将与谷歌翻译交互</li><li id="b088" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">我们问自己关于目标语言和 init <code class="du mq mr ms mg b">base_language</code>的问题。通常是英语，因为谷歌翻译擅长从英语翻译成其他语言。</li><li id="37c1" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">我们初始化概念<code class="du mq mr ms mg b">database</code>并得到<code class="du mq mr ms mg b">current_rows</code></li><li id="5f8c" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">然后我们遍历所有行，获取<code class="du mq mr ms mg b">base_text</code>并检查目标语言值是否未设置。如果它被设置，那么它已经被翻译，我们应该跳过它。</li></ol></div><div class="ab cl ku kv gp kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="hb hc hd he hf"><h1 id="f7dd" class="lb lc hi bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">第六步。从概念下载翻译的脚本</h1><p id="1652" class="pw-post-body-paragraph io ip hi iq b ir lz it iu iv ma ix iy iz mb jb jc jd mc jf jg jh md jj jk jl hb bi translated">它也非常简单，所以我将把它作为一个代码块添加进来。</p><figure class="jn jo jp jq fd jr"><div class="bz dy l di"><div class="mz na l"/></div></figure><ol class=""><li id="e7c9" class="jy jz hi iq b ir is iv iw iz ka jd kb jh kc jl kd ke kf kg bi translated">我们初始化概念<code class="du mq mr ms mg b">database</code>，得到<code class="du mq mr ms mg b">current_rows</code>。然后我们初始化一个名为<code class="du mq mr ms mg b">data</code>的空字典(这将是我们的最终内容)</li><li id="7efd" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">我们遍历<code class="du mq mr ms mg b">translations</code>，从概念中获取每个翻译的值，并将其附加到语言的相应内容中</li><li id="8dfa" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">如果特定语言的内容存在，那么我们将它添加到文件中</li><li id="1069" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">在遍历完所有这些翻译之后，我们用适当的格式编写内容</li></ol></div><div class="ab cl ku kv gp kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="hb hc hd he hf"><h1 id="9b56" class="lb lc hi bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">参考</h1><h2 id="81a6" class="mk lc hi bd ld nb nc nd lh ne nf ng ll iz nh ni lp jd nj nk lt jh nl nm lx ho bi translated"><strong class="ak">下面是这个项目的 GitHub 回购:</strong></h2><p id="9676" class="pw-post-body-paragraph io ip hi iq b ir lz it iu iv ma ix iy iz mb jb jc jd mc jf jg jh md jj jk jl hb bi translated"><a class="ae km" href="https://github.com/mixeden/React-Translation/" rel="noopener ugc nofollow" target="_blank">https://github.com/mixeden/React-Translation/</a></p><h2 id="3da2" class="mk lc hi bd ld nb nc nd lh ne nf ng ll iz nh ni lp jd nj nk lt jh nl nm lx ho bi translated">以下是我们使用的库:</h2><ol class=""><li id="5e68" class="jy jz hi iq b ir lz iv ma iz nn jd no jh np jl kd ke kf kg bi translated">观念库:<a class="ae km" href="https://github.com/jamalex/notion-py" rel="noopener ugc nofollow" target="_blank">https://github.com/jamalex/notion-py</a></li><li id="bdaf" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">反应-本地化:<a class="ae km" href="https://www.npmjs.com/package/react-localization" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/react-localization</a></li><li id="b021" class="jy jz hi iq b ir kh iv ki iz kj jd kk jh kl jl kd ke kf kg bi translated">谷歌运输:<a class="ae km" href="https://pypi.org/project/googletrans/" rel="noopener ugc nofollow" target="_blank">https://pypi.org/project/googletrans/</a></li></ol></div></div>    
</body>
</html>