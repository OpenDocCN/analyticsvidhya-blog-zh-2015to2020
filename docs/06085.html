<html>
<head>
<title>Data Scraping: A Quick, Basic Tutorial in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据抓取:Python中的快速基础教程</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/data-scraping-a-quick-basic-tutorial-in-python-2699abc0a6d?source=collection_archive---------11-----------------------#2020-05-11">https://medium.com/analytics-vidhya/data-scraping-a-quick-basic-tutorial-in-python-2699abc0a6d?source=collection_archive---------11-----------------------#2020-05-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/f48e20556ec578df72389a9dccfe9849.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lt6src5w3xQ3YhVipjHy4g.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">资料来源:SSA数据</figcaption></figure><h1 id="769a" class="iu iv hi bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">什么是数据抓取？</h1><p id="65ce" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">如果你像我一样，你可能听说过这个术语在计算机科学或商业环境中被简单地使用过。那么……到底什么是数据搜集？为什么每个人都在谈论它？</p><p id="be87" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">正如生活在2020年的每个好奇的人可能会做的那样，我谷歌了一下它的意思。Dictionary.com将其定义为:</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kw"><img src="../Images/79c78efc16f17721f50e92e7470d272f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5IM0fjwdhgfFD5Wz-HSG_g.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">资料来源:Dictionary.com</figcaption></figure><p id="b527" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">简而言之，数据抓取用于轻松生成大量数据:</p><ul class=""><li id="76a7" class="lb lc hi ju b jv kr jz ks kd ld kh le kl lf kp lg lh li lj bi translated"><strong class="ju hj">可达</strong></li><li id="667b" class="lb lc hi ju b jv lk jz ll kd lm kh ln kl lo kp lg lh li lj bi translated"><strong class="ju hj">可用</strong></li><li id="789e" class="lb lc hi ju b jv lk jz ll kd lm kh ln kl lo kp lg lh li lj bi translated"><strong class="ju hj">可聚合的</strong></li></ul></div><div class="ab cl lp lq gp lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="hb hc hd he hf"><h1 id="914f" class="iu iv hi bd iw ix lw iz ja jb lx jd je jf ly jh ji jj lz jl jm jn ma jp jq jr bi translated">为什么这对数据科学家很重要？</h1><p id="e968" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">数据科学家的角色是通过数据讲故事。就像文字如何增强作家的表达能力一样，数据更好地让数据科学家有能力讲述有关过去和现在的相关、有意义而又全面的故事，以利用更美好的未来。</p><p id="403b" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">作为数据科学的构建模块和基石，从网络搜集中提取的数据可用于以下几个方面:</p><ul class=""><li id="33d7" class="lb lc hi ju b jv kr jz ks kd ld kh le kl lf kp lg lh li lj bi translated">自然语言处理</li><li id="3726" class="lb lc hi ju b jv lk jz ll kd lm kh ln kl lo kp lg lh li lj bi translated">机器学习</li><li id="05ab" class="lb lc hi ju b jv lk jz ll kd lm kh ln kl lo kp lg lh li lj bi translated">数据可视化和分析</li></ul><h2 id="546d" class="mb iv hi bd iw mc md me ja mf mg mh je kd mi mj ji kh mk ml jm kl mm mn jq mo bi translated"><strong class="ak"> <em class="mp">行业突出&amp;用途</em> </strong></h2><p id="34bd" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">从更广泛的角度来看，数据搜集并不是一种新的做法。然而，最近的自动化使公司能够真正利用它的力量。数据搜集可以提供关于<em class="kq">客户体验</em>的宝贵见解，更好地告知<em class="kq">业务决策&amp;绩效</em>，以及<em class="kq">以以前无法实现的速度推动创新</em>。它已经在数据分析&amp;可视化、研究&amp;开发和市场分析等领域得到应用。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mq"><img src="../Images/488293f92e5cbfc8935c1ace1186f3b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NeSnEAfImbR60eCWFYCfGA.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">来源:虚拟</figcaption></figure></div><div class="ab cl lp lq gp lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="hb hc hd he hf"><h1 id="a11b" class="iu iv hi bd iw ix lw iz ja jb lx jd je jf ly jh ji jj lz jl jm jn ma jp jq jr bi translated">基础知识</h1><p id="4e4c" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">要执行数据抓取，你必须对HTML结构有一个基本的理解。对于那些对计算机科学不是很有经验的人，不要担心！你只需要足够识别一些简单的HTML结构。以下是最常见的几种:</p><ul class=""><li id="bdc5" class="lb lc hi ju b jv kr jz ks kd ld kh le kl lf kp lg lh li lj bi translated"><strong class="ju hj">标题:</strong>定义从h1到h6的标签，分别从最重要到最不重要。<br/>示例:&lt; h1 &gt;这是显示的标题！&lt; h1 &gt;</li><li id="e00e" class="lb lc hi ju b jv lk jz ll kd lm kh ln kl lo kp lg lh li lj bi translated"><strong class="ju hj">段落:</strong>用&lt; p &gt;标签定义。<br/>例:&lt; p &gt;这是显示的段落！&lt; /p &gt;</li><li id="3d4a" class="lb lc hi ju b jv lk jz ll kd lm kh ln kl lo kp lg lh li lj bi translated"><strong class="ju hj">分区:</strong>由&lt; div &gt;标签定义。<br/>例:&lt; div &gt;这就是图示的容器！&lt; /div &gt;</li></ul></div><div class="ab cl lp lq gp lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="hb hc hd he hf"><h1 id="7f88" class="iu iv hi bd iw ix lw iz ja jb lx jd je jf ly jh ji jj lz jl jm jn ma jp jq jr bi translated"><strong class="ak">流程</strong></h1><p id="3e9f" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated"><strong class="ju hj">网页抓取可分为4个一般步骤:</strong></p><p id="47dc" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">1.找到想要抓取的URL</p><p id="4a0f" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">2.检查页面</p><p id="9376" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">3.识别要提取的元素</p><p id="4c4f" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">4.提取和存储数据</p></div><div class="ab cl lp lq gp lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="hb hc hd he hf"><h1 id="7215" class="iu iv hi bd iw ix lw iz ja jb lx jd je jf ly jh ji jj lz jl jm jn ma jp jq jr bi translated">入门！</h1><p id="947a" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">首先，确保你的电脑上安装了<a class="ae mr" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank"> Python </a>和<a class="ae mr" href="https://pypi.org/project/beautifulsoup4/" rel="noopener ugc nofollow" target="_blank"> BeautifulSoup </a>！这些都可以直接在网上下载。</p><p id="a954" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">我们将导入BeautifulSoup来导航数据，并导入urlopen来提取HTML。</p><pre class="kx ky kz la fd ms mt mu mv aw mw bi"><span id="c5ba" class="mb iv hi mt b fi mx my l mz na">from urllib.request import urlopen</span><span id="0e92" class="mb iv hi mt b fi nb my l mz na">from bs4 import BeautifulSoup</span></pre><p id="a1c2" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated"><strong class="ju hj"> 1。找到想要抓取的URL</strong></p><p id="ce7e" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">首先，确定你要抓取的页面的网址。在这里，我们将搜集最近发表的一篇BBC文章的数据。</p><div class="nc nd ez fb ne nf"><a href="https://www.bbc.com/news/world-52603017" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab dw"><div class="nh ab ni cl cj nj"><h2 class="bd hj fi z dy nk ea eb nl ed ef hh bi translated">全球冠状病毒病例超过400万</h2><div class="nm l"><h3 class="bd b fi z dy nk ea eb nl ed ef dx translated">根据整理的数据，世界各地已报告超过400万例冠状病毒确诊病例…</h3></div><div class="nn l"><p class="bd b fp z dy nk ea eb nl ed ef dx translated">www.bbc.com</p></div></div><div class="no l"><div class="np l nq nr ns no nt io nf"/></div></div></a></div><p id="69b6" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated"><strong class="ju hj"> 2。检查页面</strong></p><p id="8824" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">现在，我们将从获取所需的数据和检查开始。右键单击任意位置并选择“检查元素”即可。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div class="er es nu"><img src="../Images/48f38d861125950fdf159fd48b7ef445.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*Ix9xiDYxQ8G91-V5Fy_QmQ.png"/></div></figure><p id="2a29" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">您应该会看到在elements标签下有一堆HTML代码充斥着您的屏幕。</p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nv"><img src="../Images/fd1bd956969c4f8102d2e72944d35378.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A2UmHD9jE8U4Qz5AAMw24g.png"/></div></div></figure><p id="6658" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">不知所措？<strong class="ju hj">不要慌！</strong></p><p id="3382" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated"><strong class="ju hj"> 3。识别用于提取的元素</strong></p><p id="cfb0" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">现在，我们想要识别并导航到最小的分区，如<div>所示，它包含了所有需要丢弃的数据。回想一下上面提到的基本HTML结构！因为我们想删除文章的正文，所以我们在寻找代表段落的标签<p>。</p></div></p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nw"><img src="../Images/5134b72b4e639068cfbfcec42eabbe4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xt0DVclenjXWwR-mMJqBHA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">我们已经找到文章正文了，<p> s！</p></figcaption></figure><p id="d36b" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">找到所有想要的数据后，我们寻找包含它们的最具体的部分，或<div>。因为元素是基于层次结构缩进的，所以我们可以看到所有需要的数据都属于:</div></p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nx"><img src="../Images/fcac979a415e9f2e77ec73472253bc0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ycaa0NAxT8cxms-6BDufvw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">如上所示，这个部门包含了所有我们想要的商品！</figcaption></figure><p id="5731" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated"><strong class="ju hj"> 4。提取&amp;存储数据！</strong></p><p id="5244" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">首先，我们要连接到网站并检索HTML数据。</p><pre class="kx ky kz la fd ms mt mu mv aw mw bi"><span id="298c" class="mb iv hi mt b fi mx my l mz na">link = "https://www.bbc.com/news/world-52603017"</span><span id="df3e" class="mb iv hi mt b fi nb my l mz na">try:</span><span id="070b" class="mb iv hi mt b fi nb my l mz na">page = urlopen(link)</span><span id="514f" class="mb iv hi mt b fi nb my l mz na">except:</span><span id="9697" class="mb iv hi mt b fi nb my l mz na">print("Error connecting to the URL")</span></pre><p id="191d" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">这里使用了一个<a class="ae mr" href="https://www.w3schools.com/python/python_try_except.asp" rel="noopener ugc nofollow" target="_blank"> try/except </a>来捕捉URL无效时抛出的错误。</p><p id="61d8" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">现在，为了提取所需的数据，我们将创建一个BeautifulSoup对象来解析我们刚刚检索到的HTML数据。</p><pre class="kx ky kz la fd ms mt mu mv aw mw bi"><span id="3969" class="mb iv hi mt b fi mx my l mz na">soup = BeautifulSoup(page, 'html.parser')</span></pre><p id="4f03" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">我们标识了由<div>标记显示的部门，它包含了我们之前的数据:</div></p><figure class="kx ky kz la fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nx"><img src="../Images/fcac979a415e9f2e77ec73472253bc0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ycaa0NAxT8cxms-6BDufvw.png"/></div></div></figure><p id="09cd" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">现在，我们将使用BeautifulSoup对象的find()函数解析并识别特定的部门:</p><pre class="kx ky kz la fd ms mt mu mv aw mw bi"><span id="3321" class="mb iv hi mt b fi mx my l mz na">content = soup.find('div', {"class": "story-body__inner"})</span></pre><p id="b7ca" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">现在，我们将使用BeautifulSoup的find_all()函数，遍历上面隔离的特定分隔线，识别所有段落文本，这由该分隔线中的<p>指示:</p></p><pre class="kx ky kz la fd ms mt mu mv aw mw bi"><span id="e9ba" class="mb iv hi mt b fi mx my l mz na">news = ''</span><span id="2ff1" class="mb iv hi mt b fi nb my l mz na">for x in content.find_all('p'):</span><span id="8a36" class="mb iv hi mt b fi nb my l mz na">news += ' ' +  x.text</span></pre><p id="4c39" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">上面的代码将文章的整个正文存储在news变量中，稍后可以将它与其他提取的数据放在一个数据框中！</p><p id="0a7e" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">抓取的数据可以存储在CSV中。在本例中，我们将把news变量中存储的数据存储在一个名为“article.csv”的csv文件中。</p><pre class="kx ky kz la fd ms mt mu mv aw mw bi"><span id="2537" class="mb iv hi mt b fi mx my l mz na">with open('article.csv','w') as file:</span><span id="9a76" class="mb iv hi mt b fi nb my l mz na">file.write(news)</span></pre><p id="847c" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">就这样，您已经执行了一些基本的数据收集！</p></div><div class="ab cl lp lq gp lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="hb hc hd he hf"><h1 id="3bfb" class="iu iv hi bd iw ix lw iz ja jb lx jd je jf ly jh ji jj lz jl jm jn ma jp jq jr bi translated">数据搜集的伦理</h1><p id="7332" class="pw-post-body-paragraph js jt hi ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">正如所有有潜力做大事的事情一样，数据搜集也可能被不道德地、恶意地和非法地利用。数据抓取已被用于剽窃、发送垃圾邮件，甚至实施身份盗窃和欺诈。</p><p id="fd1b" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">我们正在和一些强大的东西一起工作！</p><p id="a4f9" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">虽然数据收集是一个道德概念，但新手和专家数据科学家都需要意识到我们的行为的影响— <em class="kq">,尤其是在涉及个人数据的安全和隐私时。</em></p><ul class=""><li id="f69f" class="lb lc hi ju b jv kr jz ks kd ld kh le kl lf kp lg lh li lj bi translated">如果可以的话，使用公共API，而不是抓取</li><li id="a340" class="lb lc hi ju b jv lk jz ll kd lm kh ln kl lo kp lg lh li lj bi translated">不要请求大量数据，这可能会使服务器过载或被视为DDoS攻击</li><li id="6fc7" class="lb lc hi ju b jv lk jz ll kd lm kh ln kl lo kp lg lh li lj bi translated">尊重他人的工作&amp;不要窃取内容</li></ul><p id="0040" class="pw-post-body-paragraph js jt hi ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko kp hb bi translated">记住这一点，祝你好运和快乐刮！</p></div></div>    
</body>
</html>