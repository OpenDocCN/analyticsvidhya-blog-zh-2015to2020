<html>
<head>
<title>Data Manipulation using DPLYR : Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用DPLYR进行数据操作:第1部分</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/data-manipulation-using-dplyr-part-1-fc0706c3c51f?source=collection_archive---------17-----------------------#2020-06-08">https://medium.com/analytics-vidhya/data-manipulation-using-dplyr-part-1-fc0706c3c51f?source=collection_archive---------17-----------------------#2020-06-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="b7ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇博客中，你将学习如何使用<strong class="ih hj"> R软件</strong>轻松执行<strong class="ih hj">数据操作</strong>。我们将主要使用流行的<strong class="ih hj"> dplyr </strong> R包，它包含重要的R函数来轻松地执行您的数据操作。dplyr包(由Hadley Wickham编写)为我们提供了几个函数，这些函数有助于在r中操作数据帧。</p><ol class=""><li id="e2d2" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">选择功能:便于选择记录(行)</li></ol><p id="dcf3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.过滤功能:便于选择变量(列)</p><p id="25e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.排列功能:便于记录的排序</p><p id="97f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.mutate函数:方便新变量的创建</p><p id="cb3a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.重命名功能:方便变量的重命名</p><p id="964f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6.汇总功能:便于汇总变量</p><p id="3b7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇博客的结尾，你将熟悉数据操作工具和方法，这些工具和方法将允许你有效地操作数据。</p><h1 id="a985" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">什么是数据操作？</h1><p id="e208" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">如果你仍然对这个‘术语’感到困惑，让我给你解释一下。数据操作是与“数据探索”一起使用的一个松散的术语。它包括使用一组可用的变量来“操纵”数据。这样做是为了提高与数据相关的准确性和精确度。</p><p id="2615" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">实际上，数据收集过程可能有许多漏洞。有各种不可控因素会导致数据不准确，如受访者的精神状态、个人偏见、机器读数的差异/误差等。为了减少这些不准确性，进行了数据处理以增加数据中可能的(最高的)准确性。</p><p id="6c5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有时，这一阶段也被称为数据争论或数据清理。</p><h1 id="6f26" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">所需的R包</h1><p id="a1ef" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">首先，您需要安装dplyr包并加载dplyr库，然后才能执行以下数据操作功能。</p><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="1468" class="ky jn hi ku b fi kz la l lb lc">install.packages('dplyr')</span><span id="cad7" class="ky jn hi ku b fi ld la l lb lc"><strong class="ku hj">library</strong>(dplyr)</span></pre><h1 id="b522" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">演示数据集</h1><pre class="kp kq kr ks fd kt ku kv kw aw kx bi"><span id="0798" class="ky jn hi ku b fi kz la l lb lc">student &lt;- data.frame(Student_Id = c(1012301, 1012302, 1012303,          1012304, 1012305),<br/>                 Firstname = c('John', 'Jeff', 'Ronald', 'Jennifer', 'Jessica'),<br/>                 Lastname = c('Novak', 'Barr', 'Lum', 'Forbis', 'Connor'),<br/>                 Subject_Id = c('SAE6A', 'SAE6B', 'SAE6C', 'SAE6G', 'SAE61'),<br/>                 Age = c(20, 19, 20, 19, 20),<br/>                 Sex = c('M', 'M', 'M', 'F', 'F'))<br/>print(student)</span></pre><p id="250f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出:</p><figure class="kp kq kr ks fd lf er es paragraph-image"><div class="er es le"><img src="../Images/41f50fd545a94b863950487d4bf25855.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*93EOdXqRQzX2nIkVLcVdsA.png"/></div></figure><h1 id="69bd" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">1.选择功能</h1><p id="a0e0" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">select函数允许我们选择要保留在数据集中的列。这可以通过简单地指定要保留的列名(或编号)来实现。</p><p id="2fe4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以对dataframe或CSV文件执行数据操作。</p><p id="5f2d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您可以使用select函数选择任意数量的列。这里，使用列名和列号选择了第1列到第3列和第5列，如下面的代码片段所示:</p><figure class="kp kq kr ks fd lf er es paragraph-image"><div class="er es li"><img src="../Images/b189f430cf29dee0fefe4b588455dda3.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*0vPURYPCZovU4MOLBWNdnQ.png"/></div></figure><p id="23ef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以使用负数来选择要删除的列:</p><figure class="kp kq kr ks fd lf er es paragraph-image"><div class="er es lj"><img src="../Images/3eb1ffccd9417b436c05d1603c8fd248.png" data-original-src="https://miro.medium.com/v2/resize:fit:748/format:webp/1*UVSTrzBmm2myGrB6Jvgxnw.png"/></div></figure><figure class="kp kq kr ks fd lf er es paragraph-image"><div class="er es lk"><img src="../Images/1f853ff2eb7e796bdc60966abcb5d44e.png" data-original-src="https://miro.medium.com/v2/resize:fit:776/format:webp/1*EVQsB3NWj9jPMAU-BeyMiw.png"/></div></figure><p id="328f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了识别要选择或省略的列，您可以使用许多附加的支持函数，例如“包含”、“开始于”和“结束于”:</p><figure class="kp kq kr ks fd lf er es paragraph-image"><div class="er es ll"><img src="../Images/c7d0059d20a077a7cd9496fc2dc9dcd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/1*0XRN9QfXvtNtI5KLyJ3J7w.png"/></div></figure><figure class="kp kq kr ks fd lf er es paragraph-image"><div class="er es lm"><img src="../Images/93d101c2cb58e4dd13d84633cf53cb58.png" data-original-src="https://miro.medium.com/v2/resize:fit:636/format:webp/1*hnRxjZf53agEmbITxNzufA.png"/></div></figure><figure class="kp kq kr ks fd lf er es paragraph-image"><div class="er es ln"><img src="../Images/24dcb1017825753db3b3567effb29997.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/format:webp/1*j46EiJhc0v0H7u6sm3vMRg.png"/></div></figure><h1 id="0379" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">2.过滤功能</h1><p id="0b0e" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">过滤器功能允许我们从数据框中选择特定的行。您可以通过指定一个逻辑语句来实现这一点:</p><figure class="kp kq kr ks fd lf er es paragraph-image"><div class="er es lo"><img src="../Images/a9cb00a66592a40f78f60b6c4de43606.png" data-original-src="https://miro.medium.com/v2/resize:fit:798/format:webp/1*Nj8X7NLU0IhoIp1qZ_WdAg.png"/></div></figure><figure class="kp kq kr ks fd lf er es paragraph-image"><div class="er es lp"><img src="../Images/c670536f3b9921da3d13fdd3ede4d29a.png" data-original-src="https://miro.medium.com/v2/resize:fit:788/format:webp/1*m9dLxGnO6kljg6eGfDYcFw.png"/></div></figure><figure class="kp kq kr ks fd lf er es paragraph-image"><div class="er es lq"><img src="../Images/467493717345a6c759878cc9e1e46728.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*6uURnaU4_-x-RJK7JpXUxQ.png"/></div></figure><h1 id="de8d" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">3.排列功能</h1><p id="c944" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">排列功能允许我们对一个或多个变量的数据进行排序。您提供指定变量的值，按升序排序:</p><figure class="kp kq kr ks fd lf er es paragraph-image"><div class="er es lr"><img src="../Images/ae180711b0544af61de9d31438326dcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:806/format:webp/1*68MBy6LioXaJUMxSWiaeKw.png"/></div></figure><p id="c939" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以使用desc函数来指定按降序对变量进行排序:</p><figure class="kp kq kr ks fd lf er es paragraph-image"><div class="er es lq"><img src="../Images/5a9612cb046762fee0e10d466893a051.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*6ld2-WoqrEgWkuO0F314tg.png"/></div></figure><h1 id="bcdd" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">4.变异函数</h1><p id="a659" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">您可以使用mutate函数在数据框中创建新变量:</p><figure class="kp kq kr ks fd lf er es paragraph-image"><div class="er es ls"><img src="../Images/46977f1bb1b6e5ac579bfb2a9c9a855f.png" data-original-src="https://miro.medium.com/v2/resize:fit:914/format:webp/1*VFPApdpOXyNsygoR0Zymdw.png"/></div></figure><p id="b744" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="lt">提示</em>:在创建变量时，<strong class="ih hj"> ifelse </strong>函数可用于条件逻辑。</p><figure class="kp kq kr ks fd lf er es paragraph-image"><div class="er es lu"><img src="../Images/6008c104f4f9d5867d8d0938beadd466.png" data-original-src="https://miro.medium.com/v2/resize:fit:1070/format:webp/1*jZYR_ruKqYIgQAsF7w1Htw.png"/></div></figure><h1 id="e892" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">5.重命名功能</h1><p id="accc" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">rename函数提供了一种简洁且可读性很强的方法来重命名列:</p><figure class="kp kq kr ks fd lf er es paragraph-image"><div class="er es lq"><img src="../Images/7bb255e3ae8beb261fa11944bcc4d64c.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*LZZhq6oCyvrThdATxbVEcQ.png"/></div></figure><p id="d58c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您也可以一次重命名多个变量:</p><p id="7bb2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="lt">提示</em>:新名字在左边，旧名字在右边。</p><figure class="kp kq kr ks fd lf er es paragraph-image"><div class="er es lv"><img src="../Images/45e9d07de5da74029d8babfbed834fe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:808/format:webp/1*QkeRRHmhGyiHaAHZ7o9F4g.png"/></div></figure><h1 id="e395" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">6.汇总功能</h1><p id="fac3" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">通常，当分析数据集时，我们希望计算汇总统计数据；您可以结合使用summary函数和几个基本的汇总函数来实现这一点:</p><ul class=""><li id="d889" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc lw jj jk jl bi translated">标准汇总，如平均值、中值、最小值、最大值等。</li><li id="d2c7" class="jd je hi ih b ii lx im ly iq lz iu ma iy mb jc lw jj jk jl bi translated">dplyr提供的附加函数:n，n_distinct</li><li id="2d55" class="jd je hi ih b ii lx im ly iq lz iu ma iy mb jc lw jj jk jl bi translated">逻辑和，如sum(x &gt; 10)</li></ul><figure class="kp kq kr ks fd lf er es paragraph-image"><div class="er es mc"><img src="../Images/cc1bd4f6ff32fe131a0803a2015f40eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/format:webp/1*0NE6W8pqkjNDyTjnBQjSPw.png"/></div></figure><p id="fcaf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您有丢失的数据，我们可以添加一个选项na.rm = TRUE，即使有丢失的值，它也会找到汇总值。</p><figure class="kp kq kr ks fd lf er es paragraph-image"><div class="er es md"><img src="../Images/9b12347f996f32fc809067989940a73f.png" data-original-src="https://miro.medium.com/v2/resize:fit:802/format:webp/1*slp1-5tl45QLlcDwQEkEnQ.png"/></div></figure><p id="e00d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请注意，默认的列名与所进行的调用相同。您可以通过指定新的列名来替换它们:</p><figure class="kp kq kr ks fd lf er es paragraph-image"><div class="er es me"><img src="../Images/adc84029a43f1bd178808f076fa03c54.png" data-original-src="https://miro.medium.com/v2/resize:fit:854/format:webp/1*lfPEPUiIlCgumIoqdRizXw.png"/></div></figure><figure class="kp kq kr ks fd lf er es paragraph-image"><div class="er es mf"><img src="../Images/398cfc4b9e42f11598211b5678413a03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*lFuh-XNuKhdqTDp1_IFJcg.png"/></div></figure><h1 id="523d" class="jm jn hi bd jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj bi translated">摘要</h1><p id="6ba1" class="pw-post-body-paragraph if ig hi ih b ii kk ik il im kl io ip iq km is it iu kn iw ix iy ko ja jb jc hb bi translated">在这篇关于R中的数据操作的博客中，我们讨论了R中数据操作的函数。dplyr包为我们提供了几个函数，方便了数据操作(例如，选择、过滤、排列、变异、汇总、重命名)。</p><h2 id="d1c2" class="ky jn hi bd jo mg mh mi js mj mk ml jw iq mm mn ka iu mo mp ke iy mq mr ki ms bi translated">调用函数时:</h2><ul class=""><li id="8375" class="jd je hi ih b ii kk im kl iq mt iu mu iy mv jc lw jj jk jl bi translated">第一个参数是输入数据帧，</li><li id="6aab" class="jd je hi ih b ii lx im ly iq lz iu ma iy mb jc lw jj jk jl bi translated">其余参数描述了如何处理数据框</li><li id="a2de" class="jd je hi ih b ii lx im ly iq lz iu ma iy mb jc lw jj jk jl bi translated">该函数输出一个数据帧。</li></ul><p id="2d80" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本系列的下一部分<a class="ae mw" rel="noopener" href="/@margi.patel016/data-manipulation-using-tidyr-part-2-84458c3ef90b"> part2 </a>将涵盖使用<strong class="ih hj">tidyr</strong>T10】包的数据操作。</p><p id="eea2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你喜欢这个博客或者觉得它很有帮助，请留下你的掌声！</p><p id="4e76" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">谢谢你</p></div></div>    
</body>
</html>