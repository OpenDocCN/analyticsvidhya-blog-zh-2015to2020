<html>
<head>
<title>End to end deep learning-based Mobile app.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">端到端基于深度学习的移动app。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/end-to-end-deep-learning-based-app-af67d4008550?source=collection_archive---------10-----------------------#2020-03-13">https://medium.com/analytics-vidhya/end-to-end-deep-learning-based-app-af67d4008550?source=collection_archive---------10-----------------------#2020-03-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="7e69" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">聪明烹饪</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/730656524ae0b497e1bbc8822a0485cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cQ6WD-TSHgDJayYJCZk8JA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">聪明烹饪</figcaption></figure><p id="4246" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">大家好，今天在这篇文章中，我将分享我构建梦想应用程序的经验，即<a class="ae kj" href="https://play.google.com/store/apps/details?id=com.amply.recipefinder" rel="noopener ugc nofollow" target="_blank"> Cook smart </a>。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><a href="https://play.google.com/store/apps/details?id=com.amply.recipefinder"><div class="er es kk"><img src="../Images/5081447f77973e1514eb2d708fb35126.png" data-original-src="https://miro.medium.com/v2/resize:fit:830/0*HwR3vpFRo5g8J981"/></div></a></figure><p id="94f6" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">我们将逐步讨论什么是问题陈述、想法和执行。</p><p id="ca60" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">请下载应用程序，并等待下载模型。</p></div><div class="ab cl kl km gp kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hb hc hd he hf"><h2 id="34fb" class="ks kt hi bd ku kv kw kx ky kz la lb lc jw ld le lf ka lg lh li ke lj lk ll lm bi translated">为什么？</h2><blockquote class="ln lo lp"><p id="ecd6" class="jn jo lq jp b jq jr ij js jt ju im jv lr jx jy jz ls kb kc kd lt kf kg kh ki hb bi translated">问题陈述</p></blockquote><p id="3196" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这是我每次想到烹饪时都会面临的问题，不仅仅是我。我从我的许多朋友那里听到了同样的话。他们也有类似的问题，也就是说，我们家里有食材，但仍然缺乏准备不同种类食物的知识。当准备一顿饭或小吃时，人们倾向于准备他们已经准备了多年的同样的老东西。该列表几乎不包括5到10个经常被调整的食谱。因此，我想出了一个主意，用我们之前用过的相同原料制作不同的美食。每次收集家常食材时制作不同食物的想法</p></div><div class="ab cl kl km gp kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hb hc hd he hf"><h2 id="af81" class="ks kt hi bd ku kv kw kx ky kz la lb lc jw ld le lf ka lg lh li ke lj lk ll lm bi translated">怎么会？</h2><blockquote class="ln lo lp"><p id="3b00" class="jn jo lq jp b jq jr ij js jt ju im jv lr jx jy jz ls kb kc kd lt kf kg kh ki hb bi translated">这个概念</p></blockquote><p id="ba52" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这个想法是这样的..在做饭前，我们必须打开智能烹饪应用程序扫描食材。我们所拥有的。一旦项目被成功识别，它将使用配料搜索食谱，并以列表格式显示结果。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lu"><img src="../Images/2ec8a77fbcc7827d3e7eb879fadf17c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5xbx7A6bdcU4Z9RIEyXHbQ.jpeg"/></div></div></figure><blockquote class="ln lo lp"><p id="9fa4" class="jn jo lq jp b jq jr ij js jt ju im jv lr jx jy jz ls kb kc kd lt kf kg kh ki hb bi translated">这个app怎么用？</p></blockquote><p id="f99d" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">下面是该应用的gif图。及其工作流程。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lv"><img src="../Images/de4938e1b7ce16a041e8cf376ea04589.png" data-original-src="https://miro.medium.com/v2/resize:fit:796/1*pOxrvgTyzjeBEFDtFwA_3Q.gif"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">应用流程</figcaption></figure><h2 id="7070" class="ks kt hi bd ku kv kw kx ky kz la lb lc jw ld le lf ka lg lh li ke lj lk ll lm bi translated">什么？</h2><blockquote class="ln lo lp"><p id="4922" class="jn jo lq jp b jq jr ij js jt ju im jv lr jx jy jz ls kb kc kd lt kf kg kh ki hb bi translated">我们会学习的</p></blockquote><p id="5992" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">为了完成这个应用程序，我们将经历许多不同的练习。分别是<strong class="jp hj">使用Tensorflow </strong>进行图像分类、原生android应用开发、<strong class="jp hj">使用原生android应用开发的Tensorflow lite】、Python <strong class="jp hj">脚本</strong>、Python <strong class="jp hj">网页抓取</strong>、Python <strong class="jp hj"> Flask-API开发</strong>、<strong class="jp hj">无服务器函数</strong>(使用Python的<strong class="jp hj"> GCP函数</strong>或<strong class="jp hj">lambda【AWS】、<strong class="jp hj"> Mongo DB、Firebase实时数据库、</strong></strong>让我们看看如何利用这些来制作一个很棒的应用程序。请注意，这一切都将是实时的，我们将看到如何<strong class="jp hj">部署</strong>一切。所以继续前进。</strong></p><p id="6db5" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">应用程序的完整系统设计。我们将逐一查看每一个街区。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lu"><img src="../Images/be619728f1d31c5154a1ef7260d6ad2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FOg3ua3nsk4EgN_NNk6u2g.png"/></div></div></figure><h2 id="310b" class="ks kt hi bd ku kv kw kx ky kz la lb lc jw ld le lf ka lg lh li ke lj lk ll lm bi translated"><strong class="ak">配料图像分类</strong></h2><p id="0654" class="pw-post-body-paragraph jn jo hi jp b jq lw ij js jt lx im jv jw ly jy jz ka lz kc kd ke ma kg kh ki hb bi translated">这是机器学习在这个应用中的一部分。为了再做一次，我们需要把这个任务分成更小的块。即，</p><ol class=""><li id="e461" class="mb mc hi jp b jq jr jt ju jw md ka me ke mf ki mg mh mi mj bi translated">收集配料数据。</li><li id="ab7d" class="mb mc hi jp b jq mk jt ml jw mm ka mn ke mo ki mg mh mi mj bi translated">为此训练一个深度神经网络模型。</li><li id="a277" class="mb mc hi jp b jq mk jt ml jw mm ka mn ke mo ki mg mh mi mj bi translated">一旦它达到令人满意的精度，我们就可以保存到Firebase中。</li></ol><p id="47ba" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj">收集数据</strong></p><p id="1b36" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">没有人能从网上下载每种配料的图片，每种配料我们至少需要500张图片。所以我使用了一个使用<a class="ae kj" href="https://pypi.org/project/google_images_download/" rel="noopener ugc nofollow" target="_blank">google _ image _ download()</a>lib的脚本来从Google下载图片。这是我收集配料图像的脚本。</p><p id="847a" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在使用这个google_image_download()时，我发现并不是所有的图片都从这个库中下载，所以我添加了一个递归函数manage_download()来下载所有需要的图片。</p><p id="a0c5" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">对于这项工作，我收集了不到12k的图像，大约160张图像作为每种成分，我们有74种成分(输出标签)。:)</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mp"><img src="../Images/9ba3edce4c0471d97b9fa9f31cb1639c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*73p-4S6kqUTA4LnyEwDsvg.png"/></div></figure><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mq mr l"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">使用google_image_download()下载配料图像</figcaption></figure><p id="6e91" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj">使用这些图像预处理和训练模型</strong></p><p id="aa8a" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">黄金部分是制作一个将成分分类的模型。当我们的数据准备好了，我们需要开始为模型训练。所以有两种主要的方法。</p><ol class=""><li id="5d78" class="mb mc hi jp b jq jr jt ju jw md ka me ke mf ki mg mh mi mj bi translated">使用MobileNetV2、inception v3进行迁移学习</li><li id="69e6" class="mb mc hi jp b jq mk jt ml jw mm ka mn ke mo ki mg mh mi mj bi translated">自己的CNN模型。</li></ol><p id="c1c7" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">迁移学习:简单地说，迁移学习是我们将使用预训练的CNN模型和现有模型的方式，它将帮助我们进行特征提取。但首先，让我们下载。</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="ed90" class="ks kt hi mt b fi mx my l mz na">IMG_SHAPE = (IMAGE_SIZE, IMAGE_SIZE, 3)</span><span id="43b0" class="ks kt hi mt b fi nb my l mz na"># Create the base model from the pre-trained model MobileNet V2<br/>insp_base_model = tf.keras.applications.InceptionV3(input_shape=IMG_SHAPE,include_top=False,weights=’imagenet’)</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nc"><img src="../Images/e1c28bd2ba8c4131def4d62bef829205.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JSqwe3Lcdz9Y4-0ORh7rwg.jpeg"/></div></div></figure><p id="e2b8" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这里的基本模型有MobileNetV2，或者我们也可以采用InceptionV3或VGG16，这里有一个关于我们如何使用上述模型的示例代码。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nd"><img src="../Images/6ca38992500c5794db274a3aeac88cd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ay6GxIJPE2cyu2gnpVM3jw.png"/></div></div></figure><p id="8a65" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">然后我们会编译模型并拟合(训练它)。下面是我编译的代码。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ne"><img src="../Images/09e5751a19c5f64b9d0a6fdd3a277d8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jQJEr0Nm9KPueVtcN0xMlw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">回拨列表</figcaption></figure><p id="4762" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">回调列表维护early _ stoping(即，如果模型在准确性上没有改进，则停止它)，checkpoint_save(即，对于每次迭代，检查我们是否获得了比先前更好的准确性，如果为真，则保存模型文件。)、learning_rate_reduction(即动态学习率变化)所有这些，以便我们不会错过我们项目的任何改进模型。</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="bb20" class="ks kt hi mt b fi mx my l mz na">insp_model.compile(loss=’categorical_crossentropy’,optimizer=adam,metrics=[‘accuracy’])</span><span id="d7af" class="ks kt hi mt b fi nb my l mz na">history = insp_model.fit_generator(train_generator, epochs=100, callbacks = callbacks_list, validation_data=val_generator)</span></pre><p id="a8db" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">一旦模特接受训练。我们可以将模型文件保存到model.tflite中，下面是相关代码。</p><p id="7979" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj">我发现了什么准确性？</strong></p><p id="9b30" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">我发现Vgg16层非常好用。看看这里。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es nf"><img src="../Images/f498d13a9935a555fa86ce1e6d603b07.png" data-original-src="https://miro.medium.com/v2/resize:fit:952/format:webp/1*2bqSw-12rYy3xmZmvD3u7w.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">通过各种模型获得的精确度，包括我自己的CNN模型。</figcaption></figure><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="852d" class="ks kt hi mt b fi mx my l mz na">saved_model_dir = 'save/fine_tuning'<br/>tf.saved_model.save(model, saved_model_dir)<br/>converter=tf.lite.TFLiteConverter.from_saved_model(saved_model_dir)<br/>tflite_model = converter.convert()<br/>with open('model.tflite', 'wb') as f:<br/>   f.write(tflite_model)</span></pre><p id="f721" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">如果你像我一样使用google colab，我们可以用下面的代码下载某个文件。或者保存到</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="4d02" class="ks kt hi mt b fi mx my l mz na">from google.colab import files<br/>files.download(‘model.tflite’)<br/>files.download(‘labels.txt’)</span></pre><p id="2c79" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">第二种方法是创建自己的模型。</p><p id="a96e" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">因此，对于这种方式，我们需要使用CNN过滤器，最大池，并根据我们的辍学层，所以这里是我设法创建模型的方式。</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="e215" class="ks kt hi mt b fi mx my l mz na">model = tf.keras.Sequential([tf.keras.layers.Conv2D(filters = 32, kernel_size = 3, input_shape=input_shape_img, activation=’relu’, padding=’same’, ),<br/>tf.keras.layers.MaxPooling2D(2),<br/>tf.keras.layers.BatchNormalization(),<br/>tf.keras.layers.Dropout(0.5),</span><span id="4e4b" class="ks kt hi mt b fi nb my l mz na">tf.keras.layers.Conv2D(filters = 32, kernel_size = 3, activation= ‘relu’, padding=’same’, kernel_initializer = ‘he_uniform’),<br/>tf.keras.layers.MaxPooling2D(2),<br/>tf.keras.layers.BatchNormalization(),<br/>tf.keras.layers.Dropout(0.5),</span><span id="9068" class="ks kt hi mt b fi nb my l mz na">tf.keras.layers.Conv2D(filters = 64, kernel_size = 3, activation= ‘relu’, padding=’same’, kernel_initializer = ‘he_uniform’),<br/>tf.keras.layers.MaxPooling2D(2),<br/>tf.keras.layers.BatchNormalization(),<br/>tf.keras.layers.Dropout(0.5),</span><span id="6e17" class="ks kt hi mt b fi nb my l mz na">tf.keras.layers.Conv2D(filters = 64, kernel_size = 3, activation= ‘relu’, padding=’same’, kernel_initializer = ‘he_uniform’),<br/>tf.keras.layers.MaxPooling2D(2),<br/>tf.keras.layers.BatchNormalization(),<br/>tf.keras.layers.Dropout(0.5),</span><span id="32e9" class="ks kt hi mt b fi nb my l mz na">tf.keras.layers.Flatten(),<br/>tf.keras.layers.Dense(128, activation= ‘relu’),<br/>tf.keras.layers.Dropout(0.5),<br/>tf.keras.layers.Dense(len(train_generator.class_indices), activation=’softmax’)<br/>])</span><span id="b49f" class="ks kt hi mt b fi nb my l mz na">model.compile(loss='categorical_crossentropy',optimizer=adam,metrics=['accuracy'])</span><span id="db5a" class="ks kt hi mt b fi nb my l mz na">history = model.fit_generator(train_generator, epochs=100, callbacks = callbacks_list, validation_data=val_generator)</span><span id="f169" class="ks kt hi mt b fi nb my l mz na">#Loss plot<br/>acc = history.history['accuracy']<br/>val_acc = history.history['val_accuracy']<br/>loss = history.history['loss']<br/>val_loss = history.history['val_loss']<br/>plt.figure(figsize=(8, 8))</span><span id="4185" class="ks kt hi mt b fi nb my l mz na">plt.subplot(2, 1, 1)<br/>plt.plot(acc, label='Training Accuracy')<br/>plt.plot(val_acc, label='Validation Accuracy')<br/>plt.legend(loc='lower right')<br/>plt.ylabel('Accuracy')<br/>plt.ylim([min(plt.ylim()),1.2])<br/>plt.title('Training and Validation Accuracy')</span><span id="bd46" class="ks kt hi mt b fi nb my l mz na">plt.subplot(2, 1, 2)<br/>plt.plot(loss, label='Training Loss')<br/>plt.plot(val_loss, label='Validation Loss')<br/>plt.legend(loc='upper right')<br/>plt.ylabel('Cross Entropy')<br/>plt.ylim([0,3.0])<br/>plt.title('Training and Validation Loss')<br/>plt.xlabel('epoch')<br/>plt.show()</span></pre><p id="399c" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj">将模型保存成可执行格式(在这种情况下。tflite) </strong></p><p id="31fb" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">一旦模型准备好了，我们需要将tflite格式的模型保存到android应用程序可以访问的地方。为此，我使用了Firebase。这是我上传文件到Firebase实时数据库的脚本。</p><h2 id="625b" class="ks kt hi bd ku kv kw kx ky kz la lb lc jw ld le lf ka lg lh li ke lj lk ll lm bi translated"><strong class="ak">制作REST API端点</strong></h2><p id="e6a8" class="pw-post-body-paragraph jn jo hi jp b jq lw ij js jt lx im jv jw ly jy jz ka lz kc kd ke ma kg kh ki hb bi translated">为了创建REST API端点，我遵循了以下步骤。即</p><ol class=""><li id="9787" class="mb mc hi jp b jq jr jt ju jw md ka me ke mf ki mg mh mi mj bi translated">收集配方数据。</li><li id="e079" class="mb mc hi jp b jq mk jt ml jw mm ka mn ke mo ki mg mh mi mj bi translated">清理食谱数据，并使这些成为食谱对象。</li><li id="b398" class="mb mc hi jp b jq mk jt ml jw mm ka mn ke mo ki mg mh mi mj bi translated">保存到Mongo数据库。</li><li id="5cf9" class="mb mc hi jp b jq mk jt ml jw mm ka mn ke mo ki mg mh mi mj bi translated">通过互联网访问这些端点的无服务器功能。</li></ol><p id="a239" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj">收集(网页抓取食谱数据)</strong></p><p id="885f" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">为了我的食谱，我从http://allrecipes.com/的T2搜集了这些数据。向allrecipes.com团队大声疾呼，如果这些人没有配方数据，我可能要花100倍的时间来收集数据。</p><p id="3408" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">为食谱清洗类，并使它们成为对象。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mq mr l"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">用于清理配方数据的Python类</figcaption></figure><p id="68fb" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这里他们有两个不同的用户界面用于不同的食谱，我发现主要有两种类型的用户界面。我从两种类型的用户界面中获取了1000多种印度食谱。有了这个，我不得不区分成分的名称。也就是说，我得到的配料数据就像“1茶匙压碎的大蒜”，我必须将它们转换成数量:1，配料:大蒜，方法:压碎，所以为此我使用了<a class="ae kj" href="https://spacy.io/" rel="noopener ugc nofollow" target="_blank"> spacy lib </a>。</p><p id="723b" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">下面是我的recipe对象的一个片段。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mq mr l"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">配方对象</figcaption></figure><p id="46f7" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj">保存到Mongo </strong></p><p id="e1c3" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这是一个非常简单的步骤，我们只需要导入pymongo。使用insert_one()我们可以将所有食谱添加到我们的mongo DB中。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mq mr l"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">Mongo数据库插入</figcaption></figure><p id="97d2" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">然后你会发现像下图这样的数据。在这里，我使用compass在Mongo DB中可视化数据。为了让它活起来，我已经将数据上传到Mongo DB Atlas中。atlas提供500mb的免费mongo主机，而我只有20mb左右的数据，这对我来说再合适不过了。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ng"><img src="../Images/8ae57437d5227e6c4e37270e12bcec24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aXg7YUzJGKhYOpHgNhhEug.png"/></div></div></figure><p id="920d" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj">无服务器功能</strong></p><p id="aafb" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">为了与这个数据库通信，我们需要一个端点，在这里我们可以通过查询配料来获取这些食谱。为此，我们可以选择基于Flask服务器的API或云无服务器端点。我有两个API。即</p><ol class=""><li id="562c" class="mb mc hi jp b jq jr jt ju jw md ka me ke mf ki mg mh mi mj bi translated">获取包含配料名称的配方列表</li><li id="4d7f" class="mb mc hi jp b jq mk jt ml jw mm ka mn ke mo ki mg mh mi mj bi translated">用配方id获取配方细节，向用户展示完整的配方。</li></ol><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nh"><img src="../Images/86a51b38dcddae2566ebe2aee169f246.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bamSAEFpRsuQ0eSWOdtDrQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">左(Flask API)右(Google cloud functions for server less API)</figcaption></figure><p id="3b3d" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">我选择无服务器API，因为它支持一个月200万次调用。任何人都不能要求更多。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ni"><img src="../Images/39784d25f3ba37c56a458fa1817b63e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dt1XSSaKkekkV3syY6iDLQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">获取食谱的示例响应。</figcaption></figure><p id="825d" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj">安卓应用</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es nj"><img src="../Images/d8881b3bbe8e0e8c889434c8c33a3bfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/0*2nUejjJ-bHqMKnCJ.jpg"/></div></figure><p id="64ce" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在到了这样一个阶段，我们将把所有的块组合起来，制作一个真正能解决问题的android应用程序。为此，我们需要遵循以下步骤:</p><ol class=""><li id="eedb" class="mb mc hi jp b jq jr jt ju jw md ka me ke mf ki mg mh mi mj bi translated">Tensorflow与android应用程序的集成。</li><li id="35ac" class="mb mc hi jp b jq mk jt ml jw mm ka mn ke mo ki mg mh mi mj bi translated">使用Model.tflite文件和label.text文件在应用程序中进行预测。</li><li id="4abd" class="mb mc hi jp b jq mk jt ml jw mm ka mn ke mo ki mg mh mi mj bi translated">为食谱和食谱细节调用REST APIs。</li></ol><p id="749e" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">为了设计这个应用程序，我使用Adobe XD进行用户体验设计和用户界面设计。</p><p id="e1d9" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">第一步变得很容易，因为在Tensorflow网站上，他们提供了一个使用Tensor flow lib的示例应用程序。尽管如此，如果有人觉得很难，只需添加到app.gradle文件，如下所示。</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="aaa3" class="ks kt hi mt b fi mx my l mz na"><em class="lq">// Build off of nightly TensorFlow Lite<br/></em>implementation <strong class="mt hj">'org.tensorflow:tensorflow-lite:0.0.0-nightly'<br/></strong>implementation <strong class="mt hj">'org.tensorflow:tensorflow-lite-gpu:0.0.0-nightly'<br/></strong>implementation <strong class="mt hj">'org.tensorflow:tensorflow-lite-support:0.0.0-nightly'</strong></span></pre><p id="3465" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">然后你就可以在android应用中使用TensorFlow-lite了。在<em class="lq">ClassifierFloatMobileNet.java</em>中更改您的型号和标签文件</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="2ea3" class="ks kt hi mt b fi mx my l mz na">@Override<br/><strong class="mt hj">protected </strong>String getModelPath() {<br/>  <strong class="mt hj">return "model.tflite"</strong>;<br/>}<br/><br/>@Override<br/><strong class="mt hj">protected </strong>String getLabelPath() {<br/>  <strong class="mt hj">return "labels.txt"</strong>;<br/>}</span></pre><p id="c627" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">它会在<em class="lq">CameraActivity.java</em>中反映出来，这是直接从摄像机中检测到的成分。如下图所示。</p><ul class=""><li id="8dd0" class="mb mc hi jp b jq jr jt ju jw md ka me ke mf ki nk mh mi mj bi translated"><em class="lq">*图片* — —安卓应用中的相机活动</em></li></ul><p id="93f8" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">为了用android调用API，我使用了AsyncHttpClient，它是okhttp的扩展。这里有一个函数，我们可以在android应用程序中获取食谱。</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="c160" class="ks kt hi mt b fi mx my l mz na"><strong class="mt hj">private void </strong>getRecipesData(String ingredientStr) <strong class="mt hj">throws </strong>JSONException, UnsupportedEncodingException {<br/>        <strong class="mt hj">avi</strong>.show();<br/>        <strong class="mt hj">mTextProgress</strong>.setVisibility(View.<strong class="mt hj"><em class="lq">VISIBLE</em></strong>);<br/>        <strong class="mt hj">recipesList </strong>= <strong class="mt hj">new </strong>ArrayList&lt;&gt;();<br/>        AsyncHttpClient client = <strong class="mt hj">new </strong>AsyncHttpClient();<br/><em class="lq">//        Log.v("ingr_pass", ingredientStr);<br/><br/>        </em>JSONObject jsonParams = <strong class="mt hj">new </strong>JSONObject();<br/>        jsonParams.put(<strong class="mt hj">"ingredients"</strong>, <strong class="mt hj">"" </strong>+ ingredientStr); <em class="lq">//{"ingredients":"chicken,onion"}<br/>        </em>StringEntity entity = <strong class="mt hj">new </strong>StringEntity(jsonParams.toString());<br/>        client.setTimeout(15 * 1000); <em class="lq">// 15 sec timeout<br/>        </em>client.post(ListOfRecipeActivity.<strong class="mt hj">this</strong>, <strong class="mt hj">RECIPES_URL</strong>, entity, <strong class="mt hj">"application/json"</strong>, <strong class="mt hj">new </strong>AsyncHttpResponseHandler() {<br/>            @Override<br/>            <strong class="mt hj">public void </strong>onSuccess(<strong class="mt hj">int </strong>statusCode, Header[] headers, <strong class="mt hj">byte</strong>[] responseBody) {<br/><br/>                Gson gson = <strong class="mt hj">new </strong>Gson();<br/>                String jsonOutput = <strong class="mt hj">new </strong>String(responseBody);<br/>                <strong class="mt hj">if </strong>(!jsonOutput.trim().equals(<strong class="mt hj">"[]"</strong>)) {<br/>                    <strong class="mt hj">mEditSearchRecipe</strong>.setVisibility(View.<strong class="mt hj"><em class="lq">VISIBLE</em></strong>);<br/>                    <strong class="mt hj">llNoData</strong>.setVisibility(View.<strong class="mt hj"><em class="lq">GONE</em></strong>);<br/>                    <strong class="mt hj">avi</strong>.hide();<br/>                    <strong class="mt hj">mTextProgress</strong>.setVisibility(View.<strong class="mt hj"><em class="lq">GONE</em></strong>);<br/>                    Type listType = <strong class="mt hj">new </strong>TypeToken&lt;ArrayList&lt;Recipes&gt;&gt;() {<br/>                    }.getType();<br/>                    <strong class="mt hj">recipesList </strong>= gson.fromJson(jsonOutput, listType);<br/>                    populateRecipes(<strong class="mt hj">recipesList</strong>);<br/>                    System.<strong class="mt hj"><em class="lq">out</em></strong>.println(<strong class="mt hj">"recipes:" </strong>+ jsonOutput);<br/>                    <strong class="mt hj">ingrListStr </strong>= <strong class="mt hj">""</strong>;<br/>                } <strong class="mt hj">else </strong>{<br/>                    <strong class="mt hj">llNoData</strong>.setVisibility(View.<strong class="mt hj"><em class="lq">VISIBLE</em></strong>);<br/>                    <strong class="mt hj">avi</strong>.hide();<br/>                    <strong class="mt hj">mTextProgress</strong>.setVisibility(View.<strong class="mt hj"><em class="lq">GONE</em></strong>);<br/>                    <strong class="mt hj">ingrListStr </strong>= <strong class="mt hj">""</strong>;<br/>                    <strong class="mt hj">mEditSearchRecipe</strong>.setVisibility(View.<strong class="mt hj"><em class="lq">GONE</em></strong>);<br/>                }<br/><br/>            }<br/><br/>            @Override<br/>            <strong class="mt hj">public void </strong>onFailure(<strong class="mt hj">int </strong>statusCode, Header[] headers, <strong class="mt hj">byte</strong>[] responseBody, Throwable error) {<br/>                <strong class="mt hj">avi</strong>.hide();<br/>                <strong class="mt hj">mTextProgress</strong>.setVisibility(View.<strong class="mt hj"><em class="lq">GONE</em></strong>);<br/>                <strong class="mt hj">ingrListStr </strong>= <strong class="mt hj">""</strong>;<br/>            }<br/>        });<br/>    }</span></pre><p id="b245" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">为了将数据填充为一个列表，我使用了recycler view并借助了一个适配器。</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="69b3" class="ks kt hi mt b fi mx my l mz na"><strong class="mt hj">private void </strong>populateRecipes(ArrayList&lt;Recipes&gt; recipesArrayList) {<br/>    <strong class="mt hj">adapter </strong>= <strong class="mt hj">new </strong>RecipesAdapter(<strong class="mt hj">this</strong>, recipesArrayList);<br/>    <strong class="mt hj">adapter</strong>.setClickListener(<strong class="mt hj">this</strong>);<br/>    <strong class="mt hj">mRecyclerRecipes</strong>.setAdapter(<strong class="mt hj">adapter</strong>);<br/>    <strong class="mt hj">mEditSearchRecipe</strong>.setVisibility(View.<strong class="mt hj"><em class="lq">VISIBLE</em></strong>);<br/>}</span></pre><p id="a6cf" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">适配器</p><pre class="iy iz ja jb fd ms mt mu mv aw mw bi"><span id="cd99" class="ks kt hi mt b fi mx my l mz na"><strong class="mt hj">public class </strong>RecipesAdapter <strong class="mt hj">extends </strong>RecyclerView.Adapter&lt;RecipesAdapter.ViewHolder&gt;  {<br/><br/>    <strong class="mt hj">private </strong>ArrayList&lt;Recipes&gt; <strong class="mt hj">mRecipeList</strong>;<br/>    <strong class="mt hj">private </strong>LayoutInflater <strong class="mt hj">mInflater</strong>;<br/>    <strong class="mt hj">private </strong>RecipeClickListener <strong class="mt hj">mClickListener</strong>;<br/><br/>    <strong class="mt hj">private </strong>String <strong class="mt hj">mIngrList</strong>;<br/><br/>    <em class="lq">// data is passed into the constructor<br/>    </em><strong class="mt hj">public </strong>RecipesAdapter(Context context, ArrayList&lt;Recipes&gt; data) {<br/>        <strong class="mt hj">this</strong>.<strong class="mt hj">mInflater </strong>= LayoutInflater.<em class="lq">from</em>(context);<br/>        <strong class="mt hj">this</strong>.<strong class="mt hj">mRecipeList </strong>= data;<br/>    }<br/><br/>    <em class="lq">// inflates the cell layout from xml when needed<br/>    </em>@Override<br/>    @NonNull<br/>    <strong class="mt hj">public </strong>ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, <strong class="mt hj">int </strong>viewType) {<br/>        View view = <strong class="mt hj">mInflater</strong>.inflate(R.layout.<strong class="mt hj"><em class="lq">each_recipe_design</em></strong>, parent, <strong class="mt hj">false</strong>);<br/>        <strong class="mt hj">return new </strong>ViewHolder(view);<br/>    }<br/><br/>    <em class="lq">// binds the data to the TextView in each cell<br/>    </em>@Override<br/>    <strong class="mt hj">public void </strong>onBindViewHolder(@NonNull ViewHolder holder, <strong class="mt hj">int </strong>position) {<br/><br/>        Recipes recipes = <strong class="mt hj">mRecipeList</strong>.get(position);<br/><br/>        holder.<strong class="mt hj">mTextCount</strong>.setText(<strong class="mt hj">""</strong>+String.<em class="lq">valueOf</em>(position+1));<br/><br/>        Random rnd = <strong class="mt hj">new </strong>Random();<br/>        <strong class="mt hj">int </strong>color = Color.<em class="lq">argb</em>(255, rnd.nextInt(256), rnd.nextInt(256), rnd.nextInt(256));<br/>        holder.<strong class="mt hj">mCardViewRecipe</strong>.setCardBackgroundColor(color);<br/><br/>        holder.<strong class="mt hj">mTextRecipeName</strong>.setText(<strong class="mt hj">""</strong>+recipes.getRecipeName().substring(0, 1).toUpperCase() + recipes.getRecipeName().substring(1).toLowerCase());<br/><em class="lq">//        holder.mTextIngrList.setText(mIngrList);<br/></em><br/>        holder.<strong class="mt hj">mTextIngr1</strong>.setText(<strong class="mt hj">""</strong>+recipes.getRecipeIngredient().get(1).getIngr());<br/>        holder.<strong class="mt hj">mTextIngr2</strong>.setText(<strong class="mt hj">""</strong>+recipes.getRecipeIngredient().get(2).getIngr());<br/>        holder.<strong class="mt hj">mTextIngr3</strong>.setText(<strong class="mt hj">""</strong>+recipes.getRecipeIngredient().get(3).getIngr());<br/><br/>        <strong class="mt hj">mIngrList </strong>= <strong class="mt hj">""</strong>;<br/>        <strong class="mt hj">if </strong>(recipes.getRecipeServings() != <strong class="mt hj">null</strong>) {<br/>            holder.<strong class="mt hj">mTextServing</strong>.setText(<strong class="mt hj">"Servings: "</strong>+String.<em class="lq">valueOf</em>(recipes.getRecipeServings()));<br/>        }<strong class="mt hj">else </strong>{<br/>            holder.<strong class="mt hj">mTextServing</strong>.setText(<strong class="mt hj">"Data Not found!"</strong>);<br/>        }<br/><br/>        <strong class="mt hj">if </strong>(recipes.getRecipePreptime() != <strong class="mt hj">null</strong>) {<br/>            holder.<strong class="mt hj">mTextPrepTime</strong>.setText(recipes.getRecipePreptime());<br/>        }<strong class="mt hj">else </strong>{<br/>            holder.<strong class="mt hj">mTextPrepTime</strong>.setText(<strong class="mt hj">"Data Not found!"</strong>);<br/>        }<br/><br/>        <strong class="mt hj">if </strong>(recipes.getRecipeCalories() != <strong class="mt hj">null</strong>) {<br/>            holder.<strong class="mt hj">mTextCalories</strong>.setText(<strong class="mt hj">"Calories: "</strong>+String.<em class="lq">valueOf</em>(recipes.getRecipeCalories())+<strong class="mt hj">" cals"</strong>);<br/>        }<strong class="mt hj">else </strong>{<br/>            holder.<strong class="mt hj">mTextCalories</strong>.setText(<strong class="mt hj">"Data Not found!"</strong>);<br/>        }<br/><br/>        holder.<strong class="mt hj">mTextIngrFirstChr</strong>.setText(<strong class="mt hj">""</strong>+recipes.getRecipeName().substring(0, 1).toUpperCase());<br/><br/>    }<br/><br/>    <strong class="mt hj">public void </strong>filterList(ArrayList&lt;Recipes&gt; filterdNames) {<br/>        <strong class="mt hj">this</strong>.<strong class="mt hj">mRecipeList </strong>= filterdNames;<br/>        notifyDataSetChanged();<br/>    }<br/><br/>    <em class="lq">// total number of cells<br/>    </em>@Override<br/>    <strong class="mt hj">public int </strong>getItemCount() {<br/>        <strong class="mt hj">return mRecipeList</strong>.size();<br/>    }<br/><br/><br/>    <em class="lq">// stores and recycles views as they are scrolled off screen<br/>    </em><strong class="mt hj">public class </strong>ViewHolder <strong class="mt hj">extends </strong>RecyclerView.ViewHolder <strong class="mt hj">implements </strong>View.OnClickListener {<br/>        TextView <strong class="mt hj">mTextRecipeName</strong>, <strong class="mt hj">mTextPrepTime</strong>, <strong class="mt hj">mTextIngrFirstChr</strong>, <strong class="mt hj">mTextServing</strong>, <strong class="mt hj">mTextCalories</strong>, <strong class="mt hj">mTextCount</strong>;<br/>        TextView <strong class="mt hj">mTextIngr1</strong>,<strong class="mt hj">mTextIngr2</strong>,<strong class="mt hj">mTextIngr3</strong>;<br/>        CardView <strong class="mt hj">mCardViewRecipe</strong>;<br/><br/>        ViewHolder(View itemView) {<br/>            <strong class="mt hj">super</strong>(itemView);<br/>            <strong class="mt hj">mTextRecipeName </strong>= itemView.findViewById(R.id.<strong class="mt hj"><em class="lq">tv_recipe_name</em></strong>);<br/>            <strong class="mt hj">mTextIngrFirstChr </strong>= itemView.findViewById(R.id.<strong class="mt hj"><em class="lq">tv_ingr_name</em></strong>);<br/><em class="lq">//            mTextIngrList = itemView.findViewById(R.id.tv_recipe_ingr_list);<br/>            </em><strong class="mt hj">mTextServing </strong>= itemView.findViewById(R.id.<strong class="mt hj"><em class="lq">tv_recipe_ingr_serv</em></strong>);<br/>            <strong class="mt hj">mTextPrepTime </strong>= itemView.findViewById(R.id.<strong class="mt hj"><em class="lq">tv_recipe_prep_time</em></strong>);<br/>            <strong class="mt hj">mTextCalories </strong>= itemView.findViewById(R.id.<strong class="mt hj"><em class="lq">tv_recipe_calories</em></strong>);<br/>            <strong class="mt hj">mTextCount </strong>= itemView.findViewById(R.id.<strong class="mt hj"><em class="lq">tv_count</em></strong>);<br/>            <strong class="mt hj">mTextIngr1 </strong>= itemView.findViewById(R.id.<strong class="mt hj"><em class="lq">tv_ingr_1</em></strong>);<br/>            <strong class="mt hj">mTextIngr2 </strong>= itemView.findViewById(R.id.<strong class="mt hj"><em class="lq">tv_ingr_2</em></strong>);<br/>            <strong class="mt hj">mTextIngr3 </strong>= itemView.findViewById(R.id.<strong class="mt hj"><em class="lq">tv_ingr_3</em></strong>);<br/><br/>            <strong class="mt hj">mCardViewRecipe </strong>= itemView.findViewById(R.id.<strong class="mt hj"><em class="lq">card_view_recipe</em></strong>);<br/>            itemView.setOnClickListener(<strong class="mt hj">this</strong>);<br/>        }<br/><br/>        @Override<br/>        <strong class="mt hj">public void </strong>onClick(View view) {<br/>            <strong class="mt hj">if </strong>(<strong class="mt hj">mClickListener </strong>!= <strong class="mt hj">null</strong>) <strong class="mt hj">mClickListener</strong>.onRecipeClick(view, getAdapterPosition());<br/>        }<br/>    }<br/><br/>    <em class="lq">// convenience method for getting data at click position<br/>    </em>Recipes getItem(<strong class="mt hj">int </strong>id) {<br/>        <strong class="mt hj">return mRecipeList</strong>.get(id);<br/>    }<br/><br/>    <em class="lq">// allows clicks events to be caught<br/>    </em><strong class="mt hj">public void </strong>setClickListener(RecipeClickListener itemClickListener) {<br/>        <strong class="mt hj">this</strong>.<strong class="mt hj">mClickListener </strong>= itemClickListener;<br/>    }<br/><br/>    <em class="lq">// parent activity will implement this method to respond to click events<br/>    </em><strong class="mt hj">public interface </strong>RecipeClickListener {<br/>        <strong class="mt hj">void </strong>onRecipeClick(View view, <strong class="mt hj">int </strong>position);<br/>    }<br/><br/>    <strong class="mt hj">public void </strong>clear() {<br/>        <strong class="mt hj">int </strong>size = <strong class="mt hj">mRecipeList</strong>.size();<br/>        <strong class="mt hj">mRecipeList</strong>.clear();<br/>        notifyItemRangeRemoved(0, size);<br/>    }<br/><br/>}</span></pre><p id="2d85" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这就是我们如何在应用程序中填充配方列表。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es nj"><img src="../Images/f0ea34031008fc61b1d327bb8122f4c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/0*qnQNs_FDLlvyGBeJ.jpg"/></div></figure><p id="0d8c" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这是我在取苹果配料时找到的食谱清单。</p><p id="01f2" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">我们可以从搜索结果中搜索我们想要的相关食谱。</p><p id="067a" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">如果我们没有得到预期的结果，我们总是可以使用更新成分来修改我们的搜索。</p><p id="e40a" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">由于这个应用程序已经完成开发，我们将把它部署到Android play商店。</p><p id="97ed" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj">将应用部署到Playstore </strong></p><p id="05b4" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">为了部署该应用程序，首先我们必须创建签名的apk，其余的你可以从这里跟随的是一个<a class="ae kj" href="https://youtu.be/AWawL5HFn64" rel="noopener ugc nofollow" target="_blank"> youtube视频。</a></p><p id="ed80" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj">接下来是什么？</strong></p><ol class=""><li id="d1d5" class="mb mc hi jp b jq jr jt ju jw md ka me ke mf ki mg mh mi mj bi translated">要改进这种应用，最确定的方法是添加更多的成分。</li><li id="58e0" class="mb mc hi jp b jq mk jt ml jw mm ka mn ke mo ki mg mh mi mj bi translated">以提高模型的准确性。</li><li id="5121" class="mb mc hi jp b jq mk jt ml jw mm ka mn ke mo ki mg mh mi mj bi translated">添加更多的食谱，因为我们在未来只有印度食谱，我会添加更多的食谱</li></ol><p id="5cfb" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">如有任何疑问，请联系我。</p><p id="5905" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj">感谢阅读。</strong></p></div><div class="ab cl kl km gp kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hb hc hd he hf"><p id="a2f3" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj">信用&amp;参考</strong></p><ol class=""><li id="d2fa" class="mb mc hi jp b jq jr jt ju jw md ka me ke mf ki mg mh mi mj bi translated">蔬菜成分分类。</li></ol><p id="3d38" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><a class="ae kj" href="https://www.ijraset.com/fileserve.php?FID=16219" rel="noopener ugc nofollow" target="_blank">https://www.ijraset.com/fileserve.php?FID=16219</a></p><p id="0b4c" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">2.全面的方法。</p><p id="74e0" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><a class="ae kj" href="https://www.researchgate.net/publication/327936696_A_comprehensive_review_of_fruit_and_vegetable_classification_techniques" rel="noopener ugc nofollow" target="_blank">https://www . research gate . net/publication/327936696 _ A _ comprehensive _ review _ of _ fruit _ and _ vegetable _ class ification _ techniques</a></p><p id="74a8" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">3.对于所有食谱</p><div class="nl nm ez fb nn no"><a href="http://allrecipes.com/" rel="noopener  ugc nofollow" target="_blank"><div class="np ab dw"><div class="nq ab nr cl cj ns"><h2 class="bd hj fi z dy nt ea eb nu ed ef hh bi translated">Allrecipes |食物、朋友和食谱灵感</h2><div class="nv l"><h3 class="bd b fi z dy nt ea eb nu ed ef dx translated">在Allrecipes上寻找并分享日常烹饪灵感。发现食谱，厨师，视频，和如何基于…</h3></div><div class="nw l"><p class="bd b fp z dy nt ea eb nu ed ef dx translated">allrecipes.com</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc jh no"/></div></div></a></div><p id="144c" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">4.无服务器功能的谷歌云</p><p id="0fb7" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><a class="ae kj" href="http://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank">http://console.cloud.google.com/</a></p></div></div>    
</body>
</html>