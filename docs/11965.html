<html>
<head>
<title>Crop the Image Intuitively — NumPy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">直观地裁剪图像— NumPy</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/crop-the-image-intuitively-numpy-d19ef55c2207?source=collection_archive---------6-----------------------#2020-12-26">https://medium.com/analytics-vidhya/crop-the-image-intuitively-numpy-d19ef55c2207?source=collection_archive---------6-----------------------#2020-12-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/444e84a67c3ff49d6ed7a629ffec393b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*a7TJSPSHgs6KM0yj"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">尤里克·兰格纳在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="d995" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这篇博客文章中，我们将学习如何使用NumPy作为理想的库在Python中裁剪图像。当我们谈论图像时，它们只是2D空间中的矩阵。当然，这取决于图像，如果它是一个<strong class="ix hj"> RGB </strong>图像，那么图像的大小将是(宽度，高度，3)，否则-灰度将只是(宽度，高度)。但最终，图像只是一个大矩阵，其中每个值都是一个相应地按行和列定位的像素。</p><p id="2c90" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">裁剪图像就是获得图像矩阵的子矩阵。子矩阵(裁剪图像)的大小可以由我们选择，主要是高度和宽度。要裁剪的图像需要有一个重要的东西，即<strong class="ix hj"> <em class="jt">起始位置</em> </strong>。<strong class="ix hj"> <em class="jt">起始位置</em> </strong>有助于从该位置获取子矩阵，根据高度和宽度，我们可以轻松地裁剪图像。</p><p id="8bff" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">三件重要的事情是:</p><ul class=""><li id="53af" class="ju jv hi ix b iy iz jc jd jg jw jk jx jo jy js jz ka kb kc bi translated">起始位置</li><li id="d43a" class="ju jv hi ix b iy kd jc ke jg kf jk kg jo kh js jz ka kb kc bi translated">长度(高度)</li><li id="b6f9" class="ju jv hi ix b iy kd jc ke jg kf jk kg jo kh js jz ka kb kc bi translated">宽度</li></ul><p id="8242" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">基于这三件事，我们可以完全准备好构造我们的裁剪函数。</p><h1 id="0e47" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">编码时间到了</h1><p id="0ad7" class="pw-post-body-paragraph iv iw hi ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">我们主要使用的软件包有:</p><ul class=""><li id="99d0" class="ju jv hi ix b iy iz jc jd jg jw jk jx jo jy js jz ka kb kc bi translated">NumPy</li><li id="134d" class="ju jv hi ix b iy kd jc ke jg kf jk kg jo kh js jz ka kb kc bi translated">Matplotlib</li><li id="138e" class="ju jv hi ix b iy kd jc ke jg kf jk kg jo kh js jz ka kb kc bi translated">OpenCV →仅用于读取图像。</li></ul><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/18305c130ac5255d7e7a39a385ec518d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Nm7Ec_i9OjDnCPM59Nkdg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><h2 id="678c" class="lq kj hi bd kk lr ls lt ko lu lv lw ks jg lx ly kw jk lz ma la jo mb mc le md bi translated">导入包</h2><figure class="lm ln lo lp fd ij"><div class="bz dy l di"><div class="me mf l"/></div></figure><h2 id="6e4f" class="lq kj hi bd kk lr ls lt ko lu lv lw ks jg lx ly kw jk lz ma la jo mb mc le md bi translated">阅读图像</h2><figure class="lm ln lo lp fd ij"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="a1e7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">上述函数读取灰度或RGB图像，并返回图像矩阵。</p><h2 id="cc75" class="lq kj hi bd kk lr ls lt ko lu lv lw ks jg lx ly kw jk lz ma la jo mb mc le md bi translated">裁剪图像</h2><p id="8d21" class="pw-post-body-paragraph iv iw hi ix b iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo lk jq jr js hb bi translated">我们需要在函数中传递上述三个参数。但在此之前，让我们尝试用NumPy裁剪(切片)矩阵。</p><pre class="lm ln lo lp fd mg mh mi mj aw mk bi"><span id="ee75" class="lq kj hi mh b fi ml mm l mn mo">&gt;&gt;&gt; import numpy as np<br/>&gt;&gt;&gt; m = np.array([<br/>...     [1, 2, 3, 4, 5, 6, 7],<br/>...     [5, 3, 4, 2, 1, 7, 6],<br/>...     [6, 4, 3, 5, 1, 2, 7],<br/>...     [5, 6, 3, 1, 4, 2, 7],<br/>...     [1, 2, 3, 4, 5, 6, 7]<br/>... ])<br/>&gt;&gt;&gt;<br/>&gt;&gt;&gt; print(m)<br/>[[1 2 3 4 5 6 7]<br/> [5 3 4 2 1 7 6]<br/> [6 4 3 5 1 2 7]<br/> [5 6 3 1 4 2 7]<br/> [1 2 3 4 5 6 7]]<br/>&gt;&gt;&gt;<br/>&gt;&gt;&gt; crop_m = m[1:4, 2:7]<br/>&gt;&gt;&gt; print(crop_m)<br/>[[4 2 1 7 6]<br/> [3 5 1 2 7]<br/> [3 1 4 2 7]]<br/>&gt;&gt;&gt;</span></pre><p id="3a0e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">上面的代码是一个我们如何裁剪图像矩阵的例子。注意<strong class="ix hj"> <em class="jt"> crop_m </em> </strong>是从原矩阵<strong class="ix hj"> <em class="jt"> m </em> </strong>切片而来的裁剪矩阵(子矩阵)。子矩阵<strong class="ix hj"> <em class="jt"> crop_m </em> </strong>从<strong class="ix hj"><em class="jt">【1:4，2:7】</em></strong>中取值，即从<strong class="ix hj">第1行</strong>到<strong class="ix hj">第4行</strong>以及从<strong class="ix hj">第2列</strong>到<strong class="ix hj">第7列</strong>的值。我们应该对图像进行类似的操作，以获得裁剪后的图像。让我们来编写裁剪图像函数。</p><figure class="lm ln lo lp fd ij"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="dd08" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们来理解这个函数实际上会产生什么结果。</p><ol class=""><li id="af91" class="ju jv hi ix b iy iz jc jd jg jw jk jx jo jy js mp ka kb kc bi translated">在第一步中，我们读取灰度或RGB图像并获得图像矩阵。</li><li id="be3e" class="ju jv hi ix b iy kd jc ke jg kf jk kg jo kh js mp ka kb kc bi translated">我们获得图像的高度和宽度，这将进一步用于验证代码。</li><li id="7c25" class="ju jv hi ix b iy kd jc ke jg kf jk kg jo kh js mp ka kb kc bi translated">我们确保<strong class="ix hj"> <em class="jt">长度</em> </strong>和<strong class="ix hj"> <em class="jt">宽度</em> </strong>都是正整数。因此考虑绝对值。</li><li id="8a16" class="ju jv hi ix b iy kd jc ke jg kf jk kg jo kh js mp ka kb kc bi translated">我们计算对矩阵切片有用的四个重要值——<strong class="ix hj"><em class="jt">【start _ row】</em></strong><strong class="ix hj"><em class="jt">end _ row</em></strong><strong class="ix hj"><em class="jt">start _ column</em></strong><strong class="ix hj"><em class="jt">end _ column</em></strong>。我们通过传递的三个参数得到这个结果——<strong class="ix hj"><em class="jt">start _ pos</em></strong>，<strong class="ix hj"> <em class="jt"> length </em> </strong>，<strong class="ix hj"> <em class="jt"> width </em> </strong>。</li><li id="9c2b" class="ju jv hi ix b iy kd jc ke jg kf jk kg jo kh js mp ka kb kc bi translated">我们通过对矩阵进行切片来获得裁剪后的图像。</li><li id="17a6" class="ju jv hi ix b iy kd jc ke jg kf jk kg jo kh js mp ka kb kc bi translated">我们为可视化绘制原始图像和裁剪后的图像。</li></ol><p id="c4cf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们测试一下上面的函数—</p><h2 id="93cc" class="lq kj hi bd kk lr ls lt ko lu lv lw ks jg lx ly kw jk lz ma la jo mb mc le md bi translated">对于RGB图像</h2><figure class="lm ln lo lp fd ij"><div class="bz dy l di"><div class="me mf l"/></div></figure><pre class="lm ln lo lp fd mg mh mi mj aw mk bi"><span id="a7cf" class="lq kj hi mh b fi ml mm l mn mo">start row 	-  199<br/>end row 	-  299<br/>start column 	-  199<br/>end column 	-  399</span></pre><figure class="lm ln lo lp fd ij er es paragraph-image"><div class="er es mq"><img src="../Images/ce20463d53dda3013b40193f226dab93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1144/format:webp/1*4KEl794CYke3YG7gXQ-4qQ.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><h2 id="8586" class="lq kj hi bd kk lr ls lt ko lu lv lw ks jg lx ly kw jk lz ma la jo mb mc le md bi translated">对于灰度图像</h2><figure class="lm ln lo lp fd ij"><div class="bz dy l di"><div class="me mf l"/></div></figure><pre class="lm ln lo lp fd mg mh mi mj aw mk bi"><span id="0145" class="lq kj hi mh b fi ml mm l mn mo">start row 	-  199<br/>end row 	-  299<br/>start column 	-  199<br/>end column 	-  399</span></pre><figure class="lm ln lo lp fd ij er es paragraph-image"><div class="er es mq"><img src="../Images/793ded073c44dc0f15a0346439b7e19e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1144/format:webp/1*sM02DRLl4XhzVx3Fowp9_A.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><p id="b8e8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">就是这个！！！我们最终能够通过知道裁剪图像的起始位置和长度和宽度来裁剪图像。是不是很棒？我们还可以添加许多定制选项，如在图像周围添加边框等。想知道如何给图片添加边框，可以参考我的<a class="ae iu" rel="noopener" href="/analytics-vidhya/adding-a-border-to-the-image-using-numpy-efa23f7f1cdf">文章</a>。</p><p id="1189" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">其他类似的文章可以在我的个人资料中找到。有一个伟大的时间阅读和实施相同的。</p></div><div class="ab cl mr ms gp mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="hb hc hd he hf"><p id="e635" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你喜欢，你可以从这里的<a class="ae iu" href="https://www.buymeacoffee.com/msameeruddin" rel="noopener ugc nofollow" target="_blank">给我买咖啡。</a></p><figure class="lm ln lo lp fd ij er es paragraph-image"><a href="https://www.buymeacoffee.com/msameeruddin"><div class="er es my"><img src="../Images/6d60b235fcc46a4bd696b90e886419ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:340/format:webp/1*Dpw8-hNGI2fDmosV4E8DVQ.png"/></div></a></figure></div></div>    
</body>
</html>