<html>
<head>
<title>Restarting Scraping Algorithm After an Error</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">出错后重新启动抓取算法</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/jupyter-selenium-and-a-way-to-freeze-time-while-scraping-74f57621e67f?source=collection_archive---------13-----------------------#2020-02-29">https://medium.com/analytics-vidhya/jupyter-selenium-and-a-way-to-freeze-time-while-scraping-74f57621e67f?source=collection_archive---------13-----------------------#2020-02-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9710" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你有没有遇到过这样的情况，你的scraper遇到了一个错误[可能是服务器错误或刮刀块]，不得不重新开始？</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/3bdbe14b68634506359761c375cfc0ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gNpeUCA8B8sQRDtx"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">由<a class="ae jt" href="https://unsplash.com/@loic?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Djim Loic </a>在<a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="2283" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你很幸运！您可以使用Jupyter从scrapper终止的地方重新启动脚本。我不知道这到底是如何工作的，但是让我给你一个关于如何使用这个方法的简单解释。</p><p id="7716" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个解决方案很大程度上依赖于Jupyter的“运行代码”特性，在这个特性中，我们可以从每一批代码中独立地运行代码块。</p><p id="8a98" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从通常的刮库开始:</p><p id="05e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">蟒蛇，硒，熊猫，美汤，还有你的好老朋友时光。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ju"><img src="../Images/3ebb06bfbc341fe7d96a8c0df489e80e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5_EAHK7txW6sVQeOlvhPFA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">该项目的库需求</figcaption></figure><p id="b27d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个解释中，我不会深究我的源代码，而是展示我的第一批抓取代码是什么样子的。</p><p id="6ae8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对我的代码的简要解释如下:</p><ol class=""><li id="9ce1" class="jv jw hi ih b ii ij im in iq jx iu jy iy jz jc ka kb kc kd bi translated">转到目标站点</li><li id="0cdc" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">使用xpath执行一些操作，转到我想去的特定站点。</li><li id="d230" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">创建名为compiled_list的数组</li><li id="eca4" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">去掉javascript表中的“地狱”(处理带有分页功能的网站不会在URL中显示)</li><li id="5ddd" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">将数据保存在数组中</li><li id="d3ce" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">将数组转换为熊猫数据框。</li><li id="b9d3" class="jv jw hi ih b ii ke im kf iq kg iu kh iy ki jc ka kb kc kd bi translated">将熊猫数据表导出到CSV，用页面命名它们</li></ol><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kj"><img src="../Images/730ad534d64a7dc9b0fffba054c02862.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-q6-ILnbalfCExrNmutwlw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">由于数据的敏感性，一些部分被屏蔽</figcaption></figure><p id="0e81" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们在这里…什么？服务器关闭了…</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kk"><img src="../Images/38f528262d06d78927f76cf1bf010d0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YJJ_N4U6K8ayK4_LKa1DrQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">刮很多的人讨厌这个错误消息</figcaption></figure><p id="8b15" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是正如我在本文的第一部分中所说的，创建另一批代码来继续您开始的代码。</p><blockquote class="kl km kn"><p id="55da" class="if ig ko ih b ii ij ik il im in io ip kp ir is it kq iv iw ix kr iz ja jb jc hb bi translated"><strong class="ih hj">在你继续之前</strong>:</p><p id="7d2b" class="if ig ko ih b ii ij ik il im in io ip kp ir is it kq iv iw ix kr iz ja jb jc hb bi translated">1)不要关闭与您的脚本连接的chrome浏览器。如果您这样做，您的所有会话/进度将被删除。</p><p id="dd6c" class="if ig ko ih b ii ij ik il im in io ip kp ir is it kq iv iw ix kr iz ja jb jc hb bi translated">2)记得检查你抓取的页码，并在下一批代码中相应地重新编码。</p></blockquote><p id="8f00" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以再次运行程序…在导出部分对set no的id号做一点修改。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ks"><img src="../Images/7597916da7da24acfaa6a1943dcd79f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dNTxSPt1-9AcwTlza6UtGA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">在运行这段代码之前，我编辑了集合号</figcaption></figure><p id="7005" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还有tada！我们前进到刮集的其余部分</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kt"><img src="../Images/7f0d25a08c40cf895637acd02601295e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DYa8OQPGIigJ9leIaPyoog.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">代码的其余部分正在运行</figcaption></figure><p id="fb0d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是，如果网站服务器像我的目标网站一样不稳定，一定要小心连续的错误。每当你的程序与网站的连接被切断时，重复上述过程。</p><p id="de15" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我不知道如何自动化这一部分，但是如果你的读者知道答案，请在下面评论。</p><p id="0ea6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">反正就是这样乡亲们~ jupyter刮时光机。</p></div></div>    
</body>
</html>