<html>
<head>
<title>Learn AlphaGo &amp; Python (06)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å­¦ä¹ AlphaGoå’ŒPython (06)</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/analytics-vidhya/learn-alphago-python-06-1420783eb748?source=collection_archive---------9-----------------------#2019-12-18">https://medium.com/analytics-vidhya/learn-alphago-python-06-1420783eb748?source=collection_archive---------9-----------------------#2019-12-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/1ad309cd0070f26c99c5d551ce0be57d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*d_gppfKOBQzTkGch.png"/></div></div></figure><div class=""/><div class=""><h2 id="2c6c" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh dx translated">å¤„ç†æ•è·å’ŒKo</h2></div><figure class="jj jk jl jm fd hk er es paragraph-image"><div class="er es ji"><img src="../Images/4a80a345b917bd6cb1560ee7fb0f1d1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/0*onLgRCQ3LPPhVQ3I.png"/></div><figcaption class="jn jo et er es jp jq bd b be z dx translated">åœ¨è¿™å°macä¸Šæµ‹è¯•çš„ä»£ç </figcaption></figure><figure class="jj jk jl jm fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es jr"><img src="../Images/af9067a3d91a55fc5ad1c3c440508885.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DCsXWwZWgfVxAXGH.png"/></div></div><figcaption class="jn jo et er es jp jq bd b be z dx translated">ä»è¿™æœ¬ä¹¦ä¸­å­¦åˆ°çš„ä»£ç </figcaption></figure></div><div class="ab cl js jt gp ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="hb hc hd he hf"><p id="957d" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">åœ¨dlgo/goboard_slow.pyä¸­åˆ›å»ºç±»<code class="du kv kw kx ky b">GoString</code></p><pre class="jj jk jl jm fd kz ky la lb aw lc bi"><span id="4e7f" class="ld le ht ky b fi lf lg l lh li">class GoString():<br/>  def __init__(self, color, stones, liberties):<br/>    self.color = color<br/>    self.stones = set(stones)<br/>    self.liberties = set(liberties)</span><span id="3d5d" class="ld le ht ky b fi lj lg l lh li">  def remove_liberty(self, point):<br/>    self.liberties.remove(point)</span><span id="427e" class="ld le ht ky b fi lj lg l lh li">  def add_liberty(self, point):<br/>    self.liberties.add(point)</span><span id="a392" class="ld le ht ky b fi lj lg l lh li">  def merged_with(self, go_string):<br/>    assert go_string.color == self.color<br/>    combined_stones = self.stones | go_string.stones<br/>    return GoString(self.color, combined_stones,<br/>      (self.liberties | go_string.liberties) - combined_stones)</span><span id="69ef" class="ld le ht ky b fi lj lg l lh li">  @property<br/>  def num_liberties(self):<br/>    return len(self.liberties)</span><span id="e4ab" class="ld le ht ky b fi lj lg l lh li">  def __eq__(self, other):<br/>    return isinstance(other, GoString) and \<br/>      self.color == other.color and \<br/>      self.stones == other.stones and \<br/>      self.liberties == other.liberties</span></pre><p id="065d" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨ä½¿ç”¨<code class="du kv kw kx ky b">Board</code>ç±»çš„å­—å…¸å±æ€§<code class="du kv kw kx ky b">_grid</code>æ¥ä¿å­˜<code class="du kv kw kx ky b">Player</code>å’Œ<code class="du kv kw kx ky b">Point</code>çš„é”®å€¼å¯¹ã€‚æˆ‘ä»¬è¦å°†å€¼ç±»å‹æ›´æ”¹ä¸º<code class="du kv kw kx ky b">GoString</code>å¹¶ä¿æŒé”®ç±»å‹ä¸å˜(å³ä»ä¸º<code class="du kv kw kx ky b">Player</code>)ã€‚</p><p id="d313" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">dlgo/goboard_slow.py</p><pre class="jj jk jl jm fd kz ky la lb aw lc bi"><span id="374d" class="ld le ht ky b fi lf lg l lh li">import copy<br/>from dlgo.gotypes import Player</span><span id="b199" class="ld le ht ky b fi lj lg l lh li">class Move():<br/>  def __init__(self, point=None, is_pass=False, is_resign=False):<br/>    assert (point is not None) ^ is_pass ^ is_resign<br/>    self.point = point<br/>    self.is_play = (self.point is not None)<br/>    self.is_pass = is_pass<br/>    self.is_resign = is_resign</span><span id="7866" class="ld le ht ky b fi lj lg l lh li">  @classmethod<br/>  def play(cls, point):<br/>    return Move(point=point)</span><span id="4fa5" class="ld le ht ky b fi lj lg l lh li">  @classmethod<br/>  def pass_turn(cls):<br/>    return Move(is_pass=True)</span><span id="c5da" class="ld le ht ky b fi lj lg l lh li">  @classmethod<br/>  def resign(cls):<br/>    return Move(is_resign=True)</span><span id="85bb" class="ld le ht ky b fi lj lg l lh li">class Board():<br/>  def __init__(self, num_rows, num_cols):<br/>    self.num_rows = num_rows<br/>    self.num_cols = num_cols<br/>    self._grid = {}</span><span id="c2c8" class="ld le ht ky b fi lj lg l lh li">  def place_stone(self, player, point):<br/>    assert self.is_on_grid(point)<br/>    assert self._grid.get(point) is None<br/>    adjacent_same_color = []<br/>    adjacent_opposite_color = []<br/>    liberties = []<br/>    for neighbor in point.neighbors():<br/>      if not self.is_on_grid(neighbor):<br/>        continue<br/>      neighbor_string = self._grid.get(neighbor)<br/>      if neighbor_string is None:<br/>        liberties.append(neighbor)<br/>      elif neighbor_string.color == player:<br/>        if neighbor_string not in adjacent_same_color:<br/>          adjacent_same_color.append(neighbor_string)<br/>      else:<br/>        if neighbor_string not in adjacent_opposite_color:<br/>          adjacent_opposite_color.append(neightbor_string)<br/>    new_string = GoString(player, [point], liberties)<br/>    for same_color_string in adjacent_same_color:<br/>      new_string = new_string.merged_with(same_color_string)<br/>    for new_string_point in new_string.stones:<br/>      self._grid[new_string_point] = new_string<br/>    for other_color_string in adjacent_opposite_color:<br/>      other_color_string.remove_liberty(point)<br/>    for other_color_string in adjacent_opposite_color:<br/>      if other_color_string.num_liberties == 0:<br/>        self._remove_string(other_color_string)</span><span id="23d9" class="ld le ht ky b fi lj lg l lh li">  def _remove_string(self, string):<br/>    for point in string.stones:<br/>      for neighbor in point.neighbors():<br/>        neighbor_string = self._grid.get(neighbor)<br/>        if neighbor_string is None:<br/>          continue<br/>        if neighbor_string is not string:<br/>          neighbor_string.add_liberty(point)<br/>      self._grid[point] = None</span><span id="5efb" class="ld le ht ky b fi lj lg l lh li">  def is_on_grid(self, point):<br/>    return 1 &lt;= point.row &lt;= self.num_rows and \<br/>           1 &lt;= point.col &lt;= self.num_cols</span><span id="2908" class="ld le ht ky b fi lj lg l lh li">  def get(self, point):<br/>    string = self._grid.get(point)<br/>    if string is None:<br/>      return None<br/>    return string.color</span><span id="89fd" class="ld le ht ky b fi lj lg l lh li">  def get_go_string(self, point):<br/>    string = self._grid.get(point)<br/>    if string is None:<br/>      return None<br/>    return string</span><span id="7a28" class="ld le ht ky b fi lj lg l lh li">class GameState():<br/>  def __init__(self, board, next_player, previous, move):<br/>    self.board = board<br/>    self.next_player = next_player<br/>    self.previous_state = previous<br/>    self.last_move = move</span><span id="4085" class="ld le ht ky b fi lj lg l lh li">  def apply_move(self, move):<br/>    if move.is_play:<br/>      next_board = copy.deepcopy(self.board)<br/>      next_board.place_stone(self.next_player, move.point)<br/>    else:<br/>      next_board = self.board<br/>    return GameState(next_board, self.next_player.other, self, move)</span><span id="5469" class="ld le ht ky b fi lj lg l lh li">  @classmethod<br/>  def new_game(cls, board_size):<br/>    if isinstance(board_size, int):<br/>      board_size = (board_size, board_size)<br/>    board = Board(*board_size)<br/>    return GameState(board, Player.black, None, None)</span><span id="2ea8" class="ld le ht ky b fi lj lg l lh li">  def is_over(self):<br/>    if self.last_move is None:<br/>      return False<br/>    if self.last_move.is_resign:<br/>      return True<br/>    second_last_move = self.previous_state.last_move<br/>    if second_last_move is None:<br/>      return False<br/>    return self.last_move.is_pass and second_last_move.is_pass</span><span id="d15a" class="ld le ht ky b fi lj lg l lh li">  def is_valid_move(self, move):<br/>    if self.is_over():<br/>      return False<br/>    if move.is_pass or move.is_resign:<br/>      return True<br/>    return (<br/>      self.board.get(move.point) is None<br/>      )</span><span id="4714" class="ld le ht ky b fi lj lg l lh li">class GoString():<br/>  def __init__(self, color, stones, liberties):<br/>    self.color = color<br/>    self.stones = set(stones)<br/>    self.liberties = set(liberties)</span><span id="a208" class="ld le ht ky b fi lj lg l lh li">  def remove_liberty(self, point):<br/>    self.liberties.remove(point)</span><span id="6869" class="ld le ht ky b fi lj lg l lh li">  def add_liberty(self, point):<br/>    self.liberties.add(point)</span><span id="793e" class="ld le ht ky b fi lj lg l lh li">  def merged_with(self, go_string):<br/>    assert go_string.color == self.color<br/>    combined_stones = self.stones | go_string.stones<br/>    return GoString(self.color, combined_stones,<br/>      (self.liberties | go_string.liberties) - combined_stones)</span><span id="e3ff" class="ld le ht ky b fi lj lg l lh li">  @property<br/>  def num_liberties(self):<br/>    return len(self.liberties)</span><span id="4f10" class="ld le ht ky b fi lj lg l lh li">  def __eq__(self, other):<br/>    return isinstance(other, GoString) and \<br/>      self.color == other.color and \<br/>      self.stones == other.stones and \<br/>      self.liberties == other.liberties</span></pre><p id="bd17" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">è®©æˆ‘ä»¬æ·»åŠ ä¸€äº›ä»£ç æ¥æµ‹è¯•bot_v_bot.pyä¸­çš„æ•è·ã€‚</p><pre class="jj jk jl jm fd kz ky la lb aw lc bi"><span id="9a2d" class="ld le ht ky b fi lf lg l lh li">from dlgo.agent import naive<br/>from dlgo import goboard_slow<br/>from dlgo import gotypes<br/>import time</span><span id="1b1b" class="ld le ht ky b fi lj lg l lh li">COLS = 'ABCDEFGHJKLMNOPQRST'<br/>STONE_TO_CHAR = {<br/>  None: '. ',<br/>  gotypes.Player.black: 'x ',<br/>  gotypes.Player.white: 'o ',<br/>}</span><span id="fc35" class="ld le ht ky b fi lj lg l lh li">def print_move(player, move):<br/>  if move.is_pass:<br/>    move_str = 'passes'<br/>  elif move.is_resign:<br/>    move_str = 'resigns'<br/>  else:<br/>    move_str = '%s%d' % (COLS[move.point.col - 1], move.point.row)<br/>  print('%s %s' % (player, move_str))</span><span id="1f83" class="ld le ht ky b fi lj lg l lh li">def print_board(board):<br/>  for row in range(board.num_rows, 0, -1):<br/>    bump = " " if row &lt;= 9 else ""<br/>    line = []<br/>    for col in range(1, board.num_cols + 1):<br/>      stone = board.get(gotypes.Point(row=row, col=col))<br/>      line.append(STONE_TO_CHAR[stone])<br/>    print('%s%d %s' % (bump, row, ''.join(line)))<br/>  print('   ' + ' '.join(COLS[:board.num_cols]))</span><span id="6496" class="ld le ht ky b fi lj lg l lh li"><strong class="ky hu">def makeMove(game, r, c):<br/>  return game.apply_move(goboard_slow.Move.play(gotypes.Point(r, c)))<br/>def testCapture(game):<br/>  print(chr(27) + "[2J")<br/>  game = makeMove(game, 5, 10)<br/>  game = makeMove(game, 6, 10)<br/>  game = makeMove(game, 5, 11)<br/>  game = makeMove(game, 6, 11)<br/>  game = makeMove(game, 6, 9)<br/>  game = makeMove(game, 1, 1)<br/>  game = makeMove(game, 6, 12)<br/>  game = makeMove(game, 2, 1)<br/>  game = makeMove(game, 7, 10)<br/>  game = makeMove(game, 3, 1)<br/>  print_board(game.board)<br/>  time.sleep(5.0)<br/>  game = makeMove(game, 7, 11)<br/>  print(chr(27) + "[2J")<br/>  print_board(game.board)<br/>  game = makeMove(game, 4, 1)<br/>  return game</strong></span><span id="f203" class="ld le ht ky b fi lj lg l lh li">def main():<br/>  board_size = 19<br/>  bots = {<br/>    gotypes.Player.black: naive.RandomBot(),<br/>    gotypes.Player.white: naive.RandomBot(),<br/>  }<br/>  game = goboard_slow.GameState.new_game(board_size)</span><span id="1839" class="ld le ht ky b fi lj lg l lh li">  <strong class="ky hu">game = testCapture(game)</strong></span><span id="293b" class="ld le ht ky b fi lj lg l lh li">  while not game.is_over():<br/>    time.sleep(2.0)</span><span id="99c3" class="ld le ht ky b fi lj lg l lh li">    print(chr(27) + "[2J")<br/>    print_board(game.board)<br/>    print()<br/>    bot_move = bots[game.next_player].select_move(game)<br/>    print_move(game.next_player, bot_move)<br/>    game = game.apply_move(bot_move)</span><span id="2c51" class="ld le ht ky b fi lj lg l lh li">if __name__ == '__main__':<br/>  main()</span></pre><p id="8a44" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">æ•è·å‰:</p><pre class="jj jk jl jm fd kz ky la lb aw lc bi"><span id="e681" class="ld le ht ky b fi lf lg l lh li">19 . . . . . . . . . . . . . . . . . . . <br/>18 . . . . . . . . . . . . . . . . . . . <br/>17 . . . . . . . . . . . . . . . . . . . <br/>16 . . . . . . . . . . . . . . . . . . . <br/>15 . . . . . . . . . . . . . . . . . . . <br/>14 . . . . . . . . . . . . . . . . . . . <br/>13 . . . . . . . . . . . . . . . . . . . <br/>12 . . . . . . . . . . . . . . . . . . . <br/>11 . . . . . . . . . . . . . . . . . . . <br/>10 . . . . . . . . . . . . . . . . . . . <br/> 9 . . . . . . . . . . . . . . . . . . . <br/> 8 . . . . . . . . . . . . . . . . . . . <br/> 7 . . . . . . . . . x . . . . . . . . . <br/> 6 . . . . . . . . x o o x . . . . . . . <br/> 5 . . . . . . . . . x x . . . . . . . . <br/> 4 . . . . . . . . . . . . . . . . . . . <br/> 3 o . . . . . . . . . . . . . . . . . . <br/> 2 o . . . . . . . . . . . . . . . . . . <br/> 1 o . . . . . . . . . . . . . . . . . . <br/>   A B C D E F G H J K L M N O P Q R S T</span></pre><p id="0b25" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">æ•è·å:</p><pre class="jj jk jl jm fd kz ky la lb aw lc bi"><span id="c04b" class="ld le ht ky b fi lf lg l lh li">19 . . . . . . . . . . . . . . . . . . . <br/>18 . . . . . . . . . . . . . . . . . . . <br/>17 . . . . . . . . . . . . . . . . . . . <br/>16 . . . . . . . . . . . . . . . . . . . <br/>15 . . . . . . . . . . . . . . . . . . . <br/>14 . . . . . . . . . . . . . . . . . . . <br/>13 . . . . . . . . . . . . . . . . . . . <br/>12 . . . . . . . . . . . . . . . . . . . <br/>11 . . . . . . . . . . . . . . . . . . . <br/>10 . . . . . . . . . . . . . . . . . . . <br/> 9 . . . . . . . . . . . . . . . . . . . <br/> 8 . . . . . . . . . . . . . . . . . . . <br/> 7 . . . . . . . . . x x . . . . . . . . <br/> 6 . . . . . . . . x . . x . . . . . . . <br/> 5 . . . . . . . . . x x . . . . . . . . <br/> 4 . . . . . . . . . . . . . . . . . . . <br/> 3 o . . . . . . . . . . . . . . . . . . <br/> 2 o . . . . . . . . . . . . . . . . . . <br/> 1 o . . . . . . . . . . . . . . . . . . <br/>   A B C D E F G H J K L M N O P Q R S T</span></pre></div><div class="ab cl js jt gp ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="hb hc hd he hf"><p id="1fd8" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">é€šè¿‡åœ¨dlgo/goboard_slow.pyä¸­çš„<code class="du kv kw kx ky b">GameState</code>ç±»ä¸­æ·»åŠ å‡½æ•°<code class="du kv kw kx ky b">is_move_self_capture</code>æ¥é¿å…è‡ªæ‹ã€‚</p><pre class="jj jk jl jm fd kz ky la lb aw lc bi"><span id="ed1e" class="ld le ht ky b fi lf lg l lh li">class GameState():<br/>  def __init__(self, board, next_player, previous, move):<br/>    self.board = board<br/>    self.next_player = next_player<br/>    self.previous_state = previous<br/>    self.last_move = move</span><span id="c4c9" class="ld le ht ky b fi lj lg l lh li">  def apply_move(self, move):<br/>    if move.is_play:<br/>      next_board = copy.deepcopy(self.board)<br/>      next_board.place_stone(self.next_player, move.point)<br/>    else:<br/>      next_board = self.board<br/>    return GameState(next_board, self.next_player.other, self, move)</span><span id="b0f3" class="ld le ht ky b fi lj lg l lh li">  @classmethod<br/>  def new_game(cls, board_size):<br/>    if isinstance(board_size, int):<br/>      board_size = (board_size, board_size)<br/>    board = Board(*board_size)<br/>    return GameState(board, Player.black, None, None)</span><span id="d7b8" class="ld le ht ky b fi lj lg l lh li">  def is_over(self):<br/>    if self.last_move is None:<br/>      return False<br/>    if self.last_move.is_resign:<br/>      return True<br/>    second_last_move = self.previous_state.last_move<br/>    if second_last_move is None:<br/>      return False<br/>    return self.last_move.is_pass and second_last_move.is_pass</span><span id="e704" class="ld le ht ky b fi lj lg l lh li">  <strong class="ky hu">def is_move_self_capture(self, player, move):<br/>    if not move.is_play:<br/>      return False<br/>    next_board = copy.deepcopy(self.board)<br/>    next_board.place_stone(player, move.point)<br/>    new_string = next_board.get_go_string(move.point)<br/>    return new_string.num_liberties == 0</strong></span><span id="53ad" class="ld le ht ky b fi lj lg l lh li">  def is_valid_move(self, move):<br/>    if self.is_over():<br/>      return False<br/>    if move.is_pass or move.is_resign:<br/>      return True<br/>    return (<br/>      self.board.get(move.point) is None <strong class="ky hu">and<br/>      not self.is_move_self_capture(self.next_player, move)</strong><br/>      )</span></pre></div><div class="ab cl js jt gp ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="hb hc hd he hf"><p id="0769" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">ä¸è¦è¿åKoã€‚åœ¨dlgo/goboard_slow.pyä¸­çš„<code class="du kv kw kx ky b">GameState</code>ç±»ä¸­æ·»åŠ å‡½æ•°<code class="du kv kw kx ky b">does_move_violate_ko</code>ã€‚</p><pre class="jj jk jl jm fd kz ky la lb aw lc bi"><span id="d00e" class="ld le ht ky b fi lf lg l lh li">class GameState():<br/>  def __init__(self, board, next_player, previous, move):<br/>    self.board = board<br/>    self.next_player = next_player<br/>    self.previous_state = previous<br/>    self.last_move = move</span><span id="6413" class="ld le ht ky b fi lj lg l lh li">def apply_move(self, move):<br/>    if move.is_play:<br/>      next_board = copy.deepcopy(self.board)<br/>      next_board.place_stone(self.next_player, move.point)<br/>    else:<br/>      next_board = self.board<br/>    return GameState(next_board, self.next_player.other, self, move)</span><span id="3f45" class="ld le ht ky b fi lj lg l lh li">@classmethod<br/>  def new_game(cls, board_size):<br/>    if isinstance(board_size, int):<br/>      board_size = (board_size, board_size)<br/>    board = Board(*board_size)<br/>    return GameState(board, Player.black, None, None)</span><span id="aebc" class="ld le ht ky b fi lj lg l lh li">def is_over(self):<br/>    if self.last_move is None:<br/>      return False<br/>    if self.last_move.is_resign:<br/>      return True<br/>    second_last_move = self.previous_state.last_move<br/>    if second_last_move is None:<br/>      return False<br/>    return self.last_move.is_pass and second_last_move.is_pass</span><span id="ba02" class="ld le ht ky b fi lj lg l lh li">def is_move_self_capture(self, player, move):<br/>    if not move.is_play:<br/>      return False<br/>    next_board = copy.deepcopy(self.board)<br/>    next_board.place_stone(player, move.point)<br/>    new_string = next_board.get_go_string(move.point)<br/>    return new_string.num_liberties == 0</span><span id="ca40" class="ld le ht ky b fi lj lg l lh li">  <strong class="ky hu">@property<br/>  def situation(self):<br/>    return (self.next_player, self.board)</strong></span><span id="209e" class="ld le ht ky b fi lj lg l lh li"><strong class="ky hu">  def does_move_violate_ko(self, player, move):<br/>    if not move.is_play:<br/>      return False<br/>    next_board = copy.deepcopy(self.board)<br/>    next_board.place_stone(player, move.point)<br/>    next_situation = (player.other, next_board)<br/>    past_state = self.previous_state<br/>    while past_state is not None:<br/>      if past_state.situation == next_situation:<br/>        return True<br/>      past_state = past_state.previous_state<br/>    return False</strong></span><span id="d61d" class="ld le ht ky b fi lj lg l lh li">def is_valid_move(self, move):<br/>    if self.is_over():<br/>      return False<br/>    if move.is_pass or move.is_resign:<br/>      return True<br/>    return (<br/>      self.board.get(move.point) is None and<br/>      not self.is_move_self_capture(self.next_player, move) <strong class="ky hu">and<br/>      not self.does_move_violate_ko(self.next_player, move)</strong>)</span></pre></div><div class="ab cl js jt gp ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="hb hc hd he hf"><p id="5ad9" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">å°†board_sizeä»19æ›´æ”¹ä¸º9ï¼Œä»¥æµ‹è¯•æ¸¸æˆåœ¨ç™½äººç©å®¶é€šè¿‡åè‡ªç„¶ç»“æŸã€‚</p><pre class="jj jk jl jm fd kz ky la lb aw lc bi"><span id="598a" class="ld le ht ky b fi lf lg l lh li">ğŸ python3 bot_v_bot.py<br/> <br/> 9 x . x x x x x x x <br/> 8 x x x . x . x o o <br/> 7 o o x x x x x x o <br/> 6 o o o x . x x o o <br/> 5 . o . o x x o o o <br/> 4 o o o o o x x o . <br/> 3 o . o . o o o o o <br/> 2 . o o o o o o o o <br/> 1 o o o o o . o . o <br/>   A B C D E F G H J</span><span id="2daf" class="ld le ht ky b fi lj lg l lh li">Player.white passes<br/>ğŸ</span></pre><p id="edfa" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated"><a class="ae lk" href="https://github.com/zhijunsheng/go-py/commits/develop" rel="noopener ugc nofollow" target="_blank">æºä»£ç </a></p></div><div class="ab cl js jt gp ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="hb hc hd he hf"><p id="90ee" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated"><a class="ae lk" rel="noopener" href="/@zhijunsheng/learn-alphago-python-01-96d360468042?source=friends_link&amp;sk=3a5637ebac3916b285124eaa59407bd6">å­¦ä¹ AlphaGo &amp; Python (01) </a></p><p id="03a7" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated"><a class="ae lk" rel="noopener" href="/@zhijunsheng/learn-alphago-python-02-8fd82d311f4d?source=friends_link&amp;sk=e8e31cd2ca3fe97a29fe1d9129b0b54e">å­¦ä¹ AlphaGo &amp; Python (02) </a></p><p id="29c4" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated"><a class="ae lk" rel="noopener" href="/@zhijunsheng/learn-alphago-python-03-c5a602fe584d?source=friends_link&amp;sk=d96741134456aceb7b4745f70f92d4e3">å­¦ä¹ AlphaGo &amp; Python (03) </a></p><p id="afe6" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated"><a class="ae lk" rel="noopener" href="/@zhijunsheng/learn-alphago-python-04-ed9d6713bcd6?sk=a9a0572ef5c2bf7b1bd36d92cabfd20c">å­¦ä¹ AlphaGo &amp; Python (04) </a></p><p id="2bbd" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated"><a class="ae lk" rel="noopener" href="/@zhijunsheng/learn-alphago-python-05-55b1f6979cc8?sk=3774fca42b4bddfd7128a57999086dcd">å­¦ä¹ AlphaGo &amp; Python (05) </a></p><p id="01eb" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated"><a class="ae lk" rel="noopener" href="/@zhijunsheng/learn-alphago-python-06-1420783eb748?sk=6dc7c6e825b56b9d23e26b557e7514e9">å­¦ä¹ AlphaGo &amp; Python (06) </a></p><p id="a0d2" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated"><a class="ae lk" rel="noopener" href="/@zhijunsheng/learn-alphago-python-07-95635d5f278a?sk=1357b105fab52b220246c832fb72602f">å­¦ä¹ AlphaGo &amp; Python(07) </a></p></div></div>    
</body>
</html>