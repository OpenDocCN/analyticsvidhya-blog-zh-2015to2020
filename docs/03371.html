<html>
<head>
<title>Django Translations Working example</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Django翻译工作示例</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/django-translations-working-example-70457372bd72?source=collection_archive---------5-----------------------#2020-01-28">https://medium.com/analytics-vidhya/django-translations-working-example-70457372bd72?source=collection_archive---------5-----------------------#2020-01-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/604b135291a49398f5524394915f5cd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0vpj0Zf4XGJa2t9H.png"/></div></div></figure><p id="4af9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我在乔治亚州巴统市一家最大的公司做后端开发。</p><p id="73f9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最近在工作中，我被要求在我的Django应用程序中提供翻译。我们希望用户阅读这3种语言:格鲁吉亚语，俄语，英语。我会写一本指南来帮你安装。随意添加更多的语言。<br/> 1)设置的第一步是从Django.utils.translation导入settings.py <br/>中的gettext_lazy as _ </p><p id="12d1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将使用“_”(下划线)字符来标记可翻译的字符串。</p><p id="9a59" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2)接下来我们要做的是导入名为<strong class="is hj"> <em class="jo"> LocaleMiddleware的Django本地化中间件。</em> </strong>一定要遵循这个顺序，因为localemiddleware使用sessionmiddleware，CommonMiddleware也一样。<br/>' django . contrib . sessions . middleware '，<br/>' django . middleware . locale . localemiddleware '，<br/>' django . middleware . common . common middleware '，</p><p id="53e2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Django开发者称这个过程为翻译激活</p><p id="a357" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3)现在我们将在设置文件中添加一些变量，让Django知道我们将使用哪些语言</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="4735" class="jy jz hi ju b fi ka kb l kc kd">LANGUAGES = [<br/>    ('ka', _('Georgian')),<br/>    ('ru', _('Russian')),<br/>    ('en', _('English')),<br/>]<br/><br/>LANGUAGE_CODE = 'ka'<br/><br/>LOCALE_PATHS = (<br/>    '/var/www/djangoApp/Billing/object/locale',<br/>)</span></pre><p id="3266" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">语言列表包含语言代码集及其名称，用“，”(逗号)分隔。<br/> Language_code变量包含首选语言代码。最后，我们添加Locale_paths，它是django-admin startapp创建的应用程序内的文件夹。</p><p id="e8c4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">4)确保在app的目录下创建此文件夹结构。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es ke"><img src="../Images/1142a2063fdd9885aeeade99d705d514.png" data-original-src="https://miro.medium.com/v2/resize:fit:310/format:webp/1*P5-RrscKfopaKTkFSXOVdQ.png"/></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">文件夹结构</figcaption></figure><p id="e781" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这样，Django将知道在哪里放置生成的。每种语言的po文件<br/> PO文件是一个基于文本的可移植对象文件。这些类型的文件通常在软件开发中使用。的。PO文件可能被Java程序、GNU gettext或其他软件程序作为属性文件引用。<br/> Django使用gettext与翻译PO和mo文件进行交互。</p><p id="b428" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">5)完成这些步骤后，我们将准备好要翻译的文件。我将展示一个端点</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="33ea" class="jy jz hi ju b fi ka kb l kc kd"><em class="jo">def </em>hello_world(request):<em class="jo"><br/>    </em>response_data = {'msg': _('This Url does not exist. Check spelling.')}<br/>    <em class="jo">return </em>HttpResponse(response_data)</span></pre><p id="6c77" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可能已经注意到有_('这个网址不存在。检查拼写。)<br/>这个字符串是为翻译准备的。<br/>为了让它工作，我们必须使用Django-admin makemessages命令生成翻译文件。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es kj"><img src="../Images/ea7de89c0ea1f830fbbaa761e75bed9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:806/format:webp/1*sU_AcApgRdnUeQnvUJEtdQ.png"/></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">生成消息</figcaption></figure><p id="1b87" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">姜戈创造了。每种语言的po文件。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es kk"><img src="../Images/11f4f67dfdb51d65e9055ca3dad4f0e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:356/format:webp/1*8I9q03lUjg_ny8YXcG5Djg.png"/></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">。采购订单文件</figcaption></figure><p id="080a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们打开格鲁吉亚的。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="113c" class="jy jz hi ju b fi ka kb l kc kd"><em class="jo"># SOME DESCRIPTIVE TITLE.<br/># Copyright (C) YEAR THE PACKAGE'S COPYRIGHT HOLDER<br/># This file is distributed under the same license as the PACKAGE package.<br/># FIRST AUTHOR &lt;EMAIL@ADDRESS&gt;, YEAR.<br/>#<br/>#, fuzzy <br/>msgid </em>""<br/><em class="jo">msgstr </em>""<br/>"Project-Id-Version: PACKAGE VERSION\n"<br/>"Report-Msgid-Bugs-To: \n"<br/>"POT-Creation-Date: 2020-01-28 14:45+0400\n"<br/>"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"<br/>"Last-Translator: FULL NAME &lt;EMAIL@ADDRESS&gt;\n"<br/>"Language-Team: LANGUAGE &lt;LL@li.org&gt;\n"<br/>"Language: \n"<br/>"MIME-Version: 1.0\n"<br/>"Content-Type: text/plain; charset=UTF-8\n"<br/>"Content-Transfer-Encoding: 8bit\n"<br/>"Plural-Forms: nplurals=2; plural=(n!=1);\n"<br/><br/><em class="jo">#: views.py:4913<br/>msgid </em>"This Url does not exist. Check spelling"<br/><em class="jo">msgstr </em>""<br/><br/><em class="jo">#: views.py:137<br/>msgid </em>"Please add your authorisation token in header"<br/><em class="jo">msgstr </em>""</span></pre><p id="2c15" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如你所看到的，Django找到了一些翻译好的字符串并放在这里。采购订单文件。</p><p id="c77d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> msgid </strong>下面是我们如何请求<strong class="is hj"> msgstr </strong> —实际翻译的字符串。</p><p id="f4cf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">确保您删除#模糊(第7行)从每。po文件<br/>“模糊”的意思是django应用程序正在增加对第二语言的支持。<br/>现在翻译者可以将翻译后的字符串放在每个字符串的msgstr行中。在格鲁吉亚语中，应该是“ეს URL არ არსებობს.”შეამოწმეთ მართლწერა"</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="7581" class="jy jz hi ju b fi ka kb l kc kd"><em class="jo">#: views.py:4913<br/>msgid </em>"This Url does not exist. Check spelling"<br/><em class="jo">msgstr </em>"ეს URL არ არსებობს. შეამოწმეთ მართლწერა"</span></pre><p id="7327" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">6)现在我们可以使用django-admin compilemessages编译翻译。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es kl"><img src="../Images/eb89105ce9c9c34302f61c253dbc0f17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/1*D3X1N_NZHTMHYkMdoO-BtA.png"/></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">django-管理编译消息</figcaption></figure><p id="0588" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">姜戈创造了。mo文件，他用它来获得翻译后的字符串。MO文件:MO或机器对象是一个二进制数据文件，包含程序引用的对象数据。它通常用于翻译程序代码，并且可以加载或导入到GNU gettext程序中。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es kk"><img src="../Images/b99e289301304e7d226387cadcf472d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:356/format:webp/1*c9ObWTo7gHxRef5UL-4g7A.png"/></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">创建的文件</figcaption></figure><p id="d8de" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，让我们请求格鲁吉亚字符串。我们必须在请求头中添加<br/> Accept-language头。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es km"><img src="../Images/4e845d2aab028bc7e288e1eee3042c05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_IqZ6r5HTJI9dZwYB4_-Jg.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">给你</figcaption></figure><p id="fe69" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">感谢阅读。也和我分享一些新员工。https://t.me/DevChro电报组的:D <br/>加入我的<a class="ae kn" href="https://t.me/DevChro" rel="noopener ugc nofollow" target="_blank">讨论一些牛逼的工作人员</a></p></div></div>    
</body>
</html>