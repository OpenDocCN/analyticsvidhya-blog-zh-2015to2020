<html>
<head>
<title>Build the first Flask Python web app framework</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建第一个Flask Python web应用框架</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/https-medium-com-chirag6891-build-the-first-flask-python-e278b52473f3?source=collection_archive---------7-----------------------#2019-11-06">https://medium.com/analytics-vidhya/https-medium-com-chirag6891-build-the-first-flask-python-e278b52473f3?source=collection_archive---------7-----------------------#2019-11-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="0980" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">当用Python开发一个web应用程序时，你可能会利用一个框架。Python有很多框架，我们现在将从中学习<a class="ae ix" href="http://flask.pocoo.org/" rel="noopener ugc nofollow" target="_blank"> Flask </a>。这篇文章将成为你使用Flask web框架开发全功能网站的完整权威指南。</h2></div><h1 id="0e67" class="iy iz hi bd ja jb jc jd je jf jg jh ji io jj ip jk ir jl is jm iu jn iv jo jp bi translated"><strong class="ak">本文详解</strong>:</h1><p id="2f92" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">1)安装烧瓶</p><p id="48f2" class="pw-post-body-paragraph jq jr hi js b jt km ij jv jw kn im jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">2)创建机器学习模型</p><p id="324a" class="pw-post-body-paragraph jq jr hi js b jt km ij jv jw kn im jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">3)保存机器学习模型</p><p id="6452" class="pw-post-body-paragraph jq jr hi js b jt km ij jv jw kn im jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">4)使用Flask创建API</p><p id="3da4" class="pw-post-body-paragraph jq jr hi js b jt km ij jv jw kn im jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">5)创建前端应用程序</p><p id="e4ff" class="pw-post-body-paragraph jq jr hi js b jt km ij jv jw kn im jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">6)在个人服务器上托管</p><h1 id="78b4" class="iy iz hi bd ja jb jc jd je jf jg jh ji io jj ip jk ir jl is jm iu jn iv jo jp bi translated">环境设置</h1><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es kr"><img src="../Images/f1690648e80f2728033a081021bfd8e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZDXzEwWqdDwu95G374AM0g.jpeg"/></div></div><figcaption class="ld le et er es lf lg bd b be z dx translated">REST API使用Flask</figcaption></figure><p id="0563" class="pw-post-body-paragraph jq jr hi js b jt km ij jv jw kn im jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="js hj"> Flask是一个web框架，</strong>为我们提供工具、库和技术，让我们<em class="lh">构建一个web应用</em>。这个web应用程序可以是任何网页或博客，也可以像商业网站一样大。</p><p id="3f40" class="pw-post-body-paragraph jq jr hi js b jt km ij jv jw kn im jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="js hj">在Anaconda发行版中安装烧瓶:</strong></p><p id="3130" class="pw-post-body-paragraph jq jr hi js b jt km ij jv jw kn im jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">pip安装烧瓶</p><h1 id="92d3" class="iy iz hi bd ja jb jc jd je jf jg jh ji io jj ip jk ir jl is jm iu jn iv jo jp bi translated">使用Flask解释数据流</h1><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es li"><img src="../Images/c261ac51450017b7e9b6e25a939fa8bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t0MLLv0UhYoETR8Y_ZaSmw.png"/></div></div><figcaption class="ld le et er es lf lg bd b be z dx translated">使用Flask的数据流</figcaption></figure><p id="0968" class="pw-post-body-paragraph jq jr hi js b jt km ij jv jw kn im jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="js hj">要采取的步骤:</strong></p><p id="89b3" class="pw-post-body-paragraph jq jr hi js b jt km ij jv jw kn im jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">1)训练机器学习模型</p><p id="ee1a" class="pw-post-body-paragraph jq jr hi js b jt km ij jv jw kn im jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">2)将训练好的机器学习模型对象保存为pickle文件(序列化)</p><p id="0271" class="pw-post-body-paragraph jq jr hi js b jt km ij jv jw kn im jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">3)构建一个flask环境，该环境将具有一个API端点，该端点将封装我们训练过的机器学习模型，并使其能够通过HTTP/HTTPS上的GET请求接收输入(特征),然后在解序列化早期序列化模型后返回输出</p><p id="328e" class="pw-post-body-paragraph jq jr hi js b jt km ij jv jw kn im jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">4)上传flask脚本以及经过训练的机器学习模型</p><p id="3e07" class="pw-post-body-paragraph jq jr hi js b jt km ij jv jw kn im jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">5)通过网站或任何其他能够发送HTTP/HTTPS请求的应用程序向托管的flask脚本发出请求</p><h1 id="2ea5" class="iy iz hi bd ja jb jc jd je jf jg jh ji io jj ip jk ir jl is jm iu jn iv jo jp bi translated">机器学习模型</h1><h2 id="12fa" class="lj iz hi bd ja lk ll lm je ln lo lp ji jz lq lr jk kd ls lt jm kh lu lv jo lw bi translated">训练我们的机器学习模型</h2><p id="6b22" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">创建Python文件model.py</p><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es lx"><img src="../Images/ef0845f9041e8b50b0ddc17fc6592db3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uCUj0Suo6kMSROdtCswE9Q.png"/></div></div><figcaption class="ld le et er es lf lg bd b be z dx translated">机器学习模型</figcaption></figure><p id="d616" class="pw-post-body-paragraph jq jr hi js b jt km ij jv jw kn im jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这里，在运行上述代码后，使用dump创建了一个名为“model.pkl”的文件，dump是经过训练的机器学习模型，可以传输到任何地方，并在使用load进行反序列化后使用。</p><h1 id="d27a" class="iy iz hi bd ja jb jc jd je jf jg jh ji io jj ip jk ir jl is jm iu jn iv jo jp bi translated">烧瓶设置</h1><p id="cdf9" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">让我们首先在本地主机上设置flask服务器，然后在python上部署它。</p><p id="87a8" class="pw-post-body-paragraph jq jr hi js b jt km ij jv jw kn im jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">以下脚本在本地主机和默认端口(5000)上启动flask服务器，创建URL:<a class="ae ix" href="http://127.0.0.1:5000/" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:5000/</a>(http://127 . 0 . 0 . 1:5000/)</p><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es ly"><img src="../Images/9c3ee76db3d7c255998c1bbe33eb899b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NY9c4B4ZSM7Yojk50jXo2A.png"/></div></div><figcaption class="ld le et er es lf lg bd b be z dx translated">app.py</figcaption></figure><p id="246a" class="pw-post-body-paragraph jq jr hi js b jt km ij jv jw kn im jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">应用内路由app.route decorator用于指定flask应用在web上的路由。</p><ol class=""><li id="e9f1" class="lz ma hi js b jt km jw kn jz mb kd mc kh md kl me mf mg mh bi translated">“/”简单地表示是“http://127 . 0 . 0 . 1:5000/”(http://127 . 0 . 0 . 1:5000/)的家</li><li id="cf81" class="lz ma hi js b jt mi jw mj jz mk kd ml kh mm kl me mf mg mh bi translated">2)“/predict/”表示<a class="ae ix" href="http://127.0.0.1:5000/predict/" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:5000/predict/</a>(http://127 . 0 . 0 . 1:5000/predict/)</li></ol><h1 id="e814" class="iy iz hi bd ja jb jc jd je jf jg jh ji io jj ip jk ir jl is jm iu jn iv jo jp bi translated"><strong class="ak">路由</strong></h1><p id="5864" class="pw-post-body-paragraph jq jr hi js b jt ju ij jv jw jx im jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在初始化app.py文件后，我们必须告诉Flask在网页加载后我们想做什么。python代码<a class="ae ix" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank"> @app </a>。route("/"，methods = ["GET "，" POST"])告诉Flask当我们加载网站主页时要做什么。在方法中:GET方法是我们的web浏览器在访问网页的URL时将发送给网站的请求类型。不要担心POST方法，因为它在这个部署过程中与我们没有太大的关联。</p><h1 id="ef05" class="iy iz hi bd ja jb jc jd je jf jg jh ji io jj ip jk ir jl is jm iu jn iv jo jp bi translated">设置HTML文件</h1><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es mn"><img src="../Images/f4d6d61b54dfa3867487e3aa2afda4e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JbONG9LD6Ri-m6Rz8OhdMg.png"/></div></div><figcaption class="ld le et er es lf lg bd b be z dx translated">index.html</figcaption></figure><h2 id="ba99" class="lj iz hi bd ja lk ll lm je ln lo lp ji jz lq lr jk kd ls lt jm kh lu lv jo lw bi translated">保存model.py、app.py和index.html</h2><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es mo"><img src="../Images/8edabe9c99ef18768652804e730a32a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9eRbSWpqPKCC2dVLTGeoNw.png"/></div></div><figcaption class="ld le et er es lf lg bd b be z dx translated">在anaconda提示符下运行app.py</figcaption></figure><p id="4b81" class="pw-post-body-paragraph jq jr hi js b jt km ij jv jw kn im jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">复制网址<a class="ae ix" href="http://127.0.0.1:5000/" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:5000/</a>(http://127 . 0 . 0 . 1:5000/)并粘贴到您的浏览器中</p><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es mp"><img src="../Images/7de87504a1a07768a33734ae0358116f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vq-WemLKQF5lFi-jZWbLaw.png"/></div></div></figure><p id="3e9d" class="pw-post-body-paragraph jq jr hi js b jt km ij jv jw kn im jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">几秒钟后，这将显示在浏览器中。</p><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es mq"><img src="../Images/e4b1861ec3e55e4ed216a56dc0f179ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BzVYPLm_l2HhKSIzBd5LBg.png"/></div></div><figcaption class="ld le et er es lf lg bd b be z dx translated">机器学习API</figcaption></figure><h2 id="c6c2" class="lj iz hi bd ja lk ll lm je ln lo lp ji jz lq lr jk kd ls lt jm kh lu lv jo lw bi translated">将数据输入不同的类别</h2><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es lx"><img src="../Images/e22be6816debe030d60927548708141e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d2nP5EN0utxXinTWJ1FqEQ.png"/></div></div></figure><h2 id="e4aa" class="lj iz hi bd ja lk ll lm je ln lo lp ji jz lq lr jk kd ls lt jm kh lu lv jo lw bi translated">然后按预测按钮</h2><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es mq"><img src="../Images/894cdbb00e02a02e8c3c2690acc3caba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K1aB482e9Eqsd2iiJ_KuVA.png"/></div></div></figure><p id="64a9" class="pw-post-body-paragraph jq jr hi js b jt km ij jv jw kn im jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">你可以看到我们预测了我们的利润，注意到页面的URL变成了<a class="ae ix" href="http://127.0.0.1:5000/predict" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:5000/predict</a>(http://127 . 0 . 0 . 1:5000/predict)。</p><p id="cccb" class="pw-post-body-paragraph jq jr hi js b jt km ij jv jw kn im jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这是我的第一篇文章，希望你喜欢，所有文件的Github链接都在这里:<a class="ae ix" href="https://github.com/chiragsamal/flask_tutorial" rel="noopener ugc nofollow" target="_blank">https://github.com/chiragsamal/flask_tutorial</a></p></div></div>    
</body>
</html>