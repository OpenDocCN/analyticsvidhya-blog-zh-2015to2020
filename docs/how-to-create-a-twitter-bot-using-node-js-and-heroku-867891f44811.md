# å¦‚ä½•ä½¿ç”¨ Node.js å’Œ Heroku åˆ›å»ºä¸€ä¸ª Twitter Bot

> åŸæ–‡ï¼š<https://medium.com/analytics-vidhya/how-to-create-a-twitter-bot-using-node-js-and-heroku-867891f44811?source=collection_archive---------13----------------------->

![](img/a23176f8f0977475de00d60403a3d1c9.png)

ä½¿ç”¨ Node.js å’Œ Heroku çš„ Twitter bot

M åˆ¶ä½œ twitter æœºå™¨äººæ˜¯ä½¿ç”¨ Twitter API çš„ä¼—å¤šç”¨ä¾‹ä¹‹ä¸€ã€‚æœºå™¨äººå¯ä»¥ç”¨æ¥å¢å¼ºä½ çš„ä¸šåŠ¡ï¼Œé€šè¿‡è‡ªåŠ¨å›å¤å¸®åŠ©å®¢æˆ·ï¼Œè‡ªåŠ¨è½¬å‘ç‰¹å®šçš„æ¡æ¬¾ï¼Œç­‰ç­‰ã€‚

è¿™ç¯‡æ–‡ç« æ˜¯å…³äºæˆ‘å¦‚ä½•ä½¿ç”¨ Node.js åˆ›å»º`[The Data Science Bot](https://twitter.com/datasciencebot_)`çš„ã€‚

# ç›®å½•

1.  ç”³è¯·ä¸€ä¸ª Twitter å¼€å‘è€…è´¦æˆ·
2.  åœ¨ twitter ä¸Šåˆ›å»ºåº”ç”¨ç¨‹åº
3.  è®¾ç½®å¼€å‘ç¯å¢ƒ
4.  åœ¨ Node.js ä¸­ç¼–å†™ä»£ç 
5.  éƒ¨ç½²åˆ° Heroku
6.  é¿å…é‡å¤è½¬å‘

![](img/414fa2bc85a098076695c4d35a6860da.png)

æ²¡æœ‰å†è´¹å‘¨æŠ˜

# ç¬¬ä¸€æ­¥:ç”³è¯· Twitter å¼€å‘è€…è´¦æˆ·

å¯¹æˆ‘æ¥è¯´ï¼Œè¿™æ˜¯æœ€é‡è¦çš„ä¸€æ­¥ï¼Œä¹Ÿå¯èƒ½æ˜¯æœ€å›°éš¾çš„ä¸€æ­¥ã€‚

*   ç™»å½•[æ¨ç‰¹](https://twitter.com)
*   å‰å¾€ developers.twitter.com[ç‚¹å‡»â€œç”³è¯·å¼€å‘è€…è´¦æˆ·â€](https://developer.twitter.com/en/apply-for-access)
*   é€‰æ‹©åº”ç”¨ç±»å‹ï¼Œå³å­¦ç”Ÿ/ä¼ä¸š/ä¸šä½™çˆ±å¥½è€…ç­‰ã€‚
*   æåŠä½ ç”³è¯·çš„ç›®çš„ã€‚åœ¨è¿™é‡Œå°½å¯èƒ½å…·ä½“ä¸€äº›ã€‚

## åœ¨ç”³è¯·ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²ç»é€šè¯»äº†[å¼€å‘è€…åè®®å’Œæ”¿ç­–](https://developer.twitter.com/en/developer-terms/agreement-and-policy)ã€[è‡ªåŠ¨åŒ–è§„åˆ™](https://help.twitter.com/en/rules-and-policies/twitter-automation)å’Œ[Twitter è§„åˆ™](https://help.twitter.com/en/rules-and-policies/twitter-rules)

> ä¸ç¬¦åˆè¿™äº›æ¡ä»¶å°†å¯¼è‡´ä½ çš„ç”³è¯·è¢«æ‹’ç»

**é˜…è¯»å…³äº[å¦‚ä½•ç”³è¯· twitter å¼€å‘è€…è´¦æˆ·](/@sumedh.patkar19/beginners-guide-how-to-apply-for-a-twitter-developer-account-763cda3af109)çš„å®Œæ•´æ–‡ç« **

# ç¬¬äºŒæ­¥:åœ¨ twitter ä¸Šåˆ›å»ºåº”ç”¨

åœ¨æ‚¨çš„ twitter å¼€å‘è€…è´¦æˆ·è·å¾—æ‰¹å‡†å*æ‰§è¡Œæ­¤æ“ä½œã€‚*

*   åœ¨ apps.twitter.com åˆ›å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºã€‚å¡«å†™æ‰€éœ€çš„è¯¦ç»†ä¿¡æ¯ã€‚
*   ç”Ÿæˆ API å¯†é’¥ã€‚ç‚¹å‡»æ‚¨çš„åº”ç”¨è¯¦æƒ…å¹¶å¯¼èˆªè‡³`Keys and tokens`

![](img/55e4e6b76f38c05d0c7ff18631628af2.png)

å¯¼èˆªåˆ°â€œå¯†é’¥å’Œä»¤ç‰Œâ€å¹¶å•å‡»â€œç”Ÿæˆâ€

> *âš ï¸* ***è­¦å‘Š*** *(ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸è¦æ³„éœ² API å¯†é’¥)ã€‚*

# æ­¥éª¤ 3:è®¾ç½®å¼€å‘ç¯å¢ƒ

ç¡®ä¿æ‚¨çš„ PC ä¸Šå®‰è£…äº† Node.js å’Œ npmã€‚

å¯¹äº Ubuntuï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…

```
sudo apt install nodejs
sudo apt install npm
```

å¯¹äºå…¶ä»–å‘è¡Œç‰ˆï¼Œç‚¹å‡»[æ­¤å¤„](https://nodejs.org/en/)è·å–å®‰è£…è¯´æ˜ã€‚

åˆ›å»ºä¸€ä¸ªåä¸º`your-botname`çš„ç›®å½•ã€‚
åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œæˆ‘æŠŠå®ƒå‘½åä¸º`the-datascience-bot`ã€‚

è¦åˆå§‹åŒ– git ç¯å¢ƒå¹¶ä½¿ç”¨`npm`å®‰è£…åŒ…`twit`ï¼Œè¯·åœ¨`your-botname`ç›®å½•çš„ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤*:*

![](img/6c73d97169826df6d25966d042763d96.png)

è®¾ç½®å¼€å‘ç¯å¢ƒ

æ­å–œä½ ï¼æ‚¨å·²ç»æˆåŠŸåœ°è®¾ç½®äº† Node.js å¼€å‘ç¯å¢ƒğŸ‰ğŸ‰

# ç¬¬å››æ­¥:ç¼–ç 

*   é¦–å…ˆæˆ‘ä»¬è¦è®¤è¯`twit`ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ç”Ÿæˆçš„ *API é”®*é“¾æ¥æˆ‘ä»¬çš„ twitter åº”ç”¨å’Œä»£ç ã€‚

åˆ›å»ºä¸€ä¸ªåä¸º`config.js`çš„æ–‡ä»¶ï¼Œå¹¶å°†ä¸‹é¢çš„ä»£ç æ”¾å…¥å…¶ä¸­ã€‚

**config.js**

![](img/ed79bd1df05e05dc48dc30d5702f1415.png)

é…ç½®æ–‡ä»¶

æŠŠä½ çš„é’¥åŒ™ä»ä½ çš„ twitter åº”ç”¨ä»ªè¡¨æ¿ä¸Šå¤åˆ¶ä¸‹æ¥ã€‚

*   æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨æ–‡ä»¶`bot.js`ä¸­ç¼–å†™æœºå™¨äººçš„ä»£ç ã€‚

è¿™æ˜¯ä»£ç ã€‚

**bot.js**

bot.js

æˆ‘ä»¬æ¥åˆ†è§£ä¸€ä¸‹ã€‚

*   æˆ‘ä»¬ä½¿ç”¨æ¥è‡ª`config.js`çš„é…ç½®ç»†èŠ‚åˆå§‹åŒ– twit å¯¹è±¡
*   retweet å‡½æ•°é¦–å…ˆä¸ºç»™å®šçš„æœç´¢æŸ¥è¯¢è°ƒç”¨`search/tweets` API ç«¯ç‚¹ã€‚åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼ŒæŸ¥è¯¢æ˜¯ ***'#DataScience æˆ–#DataVisualization'***
*   æˆ‘ä»¬å°†ä»¥ä¸‹å‚æ•°ä¼ é€’ç»™æœç´¢ API

1.  `q`:æœç´¢æŸ¥è¯¢
2.  `result_type`:*â€˜æ··åˆâ€™*æœ€æ–°çš„ä»¥åŠæµè¡Œçš„æ—§æ¨æ–‡
3.  `count`:ä¸€æ¬¡æ£€ç´¢çš„æ¨æ–‡æ•°é‡

*   æ£€ç´¢åˆ°çš„ [JSON](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON) å¯¹è±¡æœ‰ä¸€ä¸ªåŒ…å«#DataScience æˆ–#DataVisualization çš„ tweets åˆ—è¡¨ã€‚
*   ç„¶åï¼Œæˆ‘ä»¬å°†æ¯ä¸ª tweet IDs ä¼ é€’ç»™`statuses/retweet/:id` API ç«¯ç‚¹ï¼Œåè€…è½¬å‘è¯¥ tweetã€‚
*   ä½¿ç”¨`setInterval`åŠŸèƒ½æ¯åˆ†é’Ÿè¿è¡Œä¸€æ¬¡åŠŸèƒ½

> *è¯¦ç»†çš„ API å‚è€ƒæŒ‡å—ä¸º* [*æœç´¢*](https://developer.twitter.com/en/docs/tweets/search/api-reference/get-search-tweets) *å’Œ* [*è½¬å‘*](https://developer.twitter.com/en/docs/tweets/post-and-engage/api-reference/post-statuses-retweet-id) *ã€‚*

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨æœ¬åœ°æµ‹è¯• bot:

```
node bot.js
```

ä½ çš„æ¨ç‰¹æ—¶é—´è¡¨åº”è¯¥æ˜¾ç¤ºè½¬å‘ã€‚

å¦‚æœä¸å·¥ä½œï¼Œå°è¯•åœ¨æ§åˆ¶å°ä¸Šè°ƒè¯•ã€‚

# æ­¥éª¤ 5:éƒ¨ç½²åˆ° Heroku

*   åœ¨ [Heroku](https://www.heroku.com/) ä¸Šåˆ›å»ºä¸€ä¸ªè´¦æˆ·
*   åœ¨ Heroku ä¸Šåˆ›å»ºä¸€ä¸ªåä¸ºâ€œä½ çš„æœºå™¨äººåâ€çš„åº”ç”¨ç¨‹åº

![](img/fcb85b08d37b0e64c76c9128490d5558.png)![](img/5d8ab55f5de375075af1ec3bbc5dbc07.png)

åœ¨ Heroku ä¸Šåˆ›å»ºæ–°çš„åº”ç”¨ç¨‹åº

> *ç¡®ä¿æ‚¨çš„æœ¬åœ°é¡¹ç›®ç›®å½•çš„åç§°* ***ä¸æ‚¨çš„ Heroku é¡¹ç›®åç§°*** *å®Œå…¨ç›¸åŒã€‚*

*   åœ¨ä½ çš„ç”µè„‘ä¸Šå®‰è£… **heroku-cli**

å¦‚æœä½ æœ‰ä¸€ä¸ªåŸºäº Ubuntu/Debian çš„å‘è¡Œç‰ˆï¼Œé‚£ä¹ˆä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥å®‰è£…

```
curl https://cli-assets.heroku.com/install-ubuntu.sh | sh
```

å¯¹äºå…¶ä»–ç¯å¢ƒï¼Œå®‰è£…è¯´æ˜å¯åœ¨å¤„æ‰¾åˆ°

*   åˆ›å»ºä¸€ä¸ªåä¸ºâ€œProcfileâ€çš„æ–‡ä»¶ï¼Œå…¶ä»£ç å¦‚ä¸‹

## Procfile

```
worker: node bot.js
```

*   ç™»å½• heroku CLI

```
$ heroku login
```

è¿™å°†åœ¨ Heroku ä¸Šæ‰“å¼€ä¸€ä¸ªç™»å½•é“¾æ¥ï¼Œä½ å¿…é¡»è¾“å…¥ä½ çš„å¯†ç ã€‚

*   ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤éƒ¨ç½²åˆ° Heroku

![](img/54f305a6b92f1d8e19e915c1b8b81c61.png)

éƒ¨ç½²åˆ° Heroku

## æœ€åä¸€æ­¥

å¯åŠ¨*`*worker*`*dyno*on*Herokuã€‚**

*   **å»[dashboard.heroku.com/apps](https://dashboard.heroku.com/apps)ç‚¹å‡»ä½ çš„æœºå™¨äººåº”ç”¨ã€‚**
*   **ç„¶åï¼Œç‚¹å‡»é…ç½® Dynos**

**![](img/08d2e6de6e83d7f57917577251442679.png)**

**é…ç½®å·¥ä½œåŠ¨æ€**

*   **å¯åŠ¨`worker` dyno å¹¶ç‚¹å‡»ç¡®è®¤**

**![](img/04e9657edcbfbd7f4c13745b7ceb5133.png)**

**å¯åŠ¨å·¥ä½œåŠ¨åŠ›**

# **ä½ çš„æœºå™¨äººå‡†å¤‡å¥½äº†ï¼ğŸ‰ğŸ‰**

**![](img/781cb468644303fd08e4ebfcde0cf0e8.png)**

**å‡†å¤‡æœä»ï¼**

# **ç¬¬å…­æ­¥:å¦‚ä½•é¿å…é‡å¤è½¬å‘**

**åœ¨æˆ‘ä»¬ç¼–å†™
`//more code here later..`çš„ for å¾ªç¯ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç **

**![](img/6cffe1bd66e0205e07006b9631885f04.png)**

**æ£€æŸ¥é‡å¤**

**ç„¶ååœ¨å¾ªç¯ä¹‹å¤–-**

**![](img/1f20c6058b7c24af717d5f1ff61d299c.png)**

**ä»…è¿‡æ»¤å”¯ä¸€çš„ tweetIDs**

**å®ç”¨å‡½æ•°`onlyUnique`ä¹Ÿå¯ä»¥å†™åœ¨ retweet å‡½æ•°ä¹‹å¤–ã€‚**

**è¿™å°†è®©æˆ‘ä»¬çš„æœºå™¨äººé¿å…é‡å¤è½¬å‘ã€‚**

*****ä¸Šé¢ä»£ç çš„ç®€çŸ­è¯´æ˜*****

*   **æ¯æ¡æ¨æ–‡éƒ½æœ‰ä¸€ä¸ªç‹¬ç‰¹çš„å±æ€§`id_str`ã€‚
    å¦‚æœä½ è½¬å‘äº†æŸäººçš„æ¨æ–‡ï¼Œå®ƒä¼šæœ‰ä¸åŒçš„`id_str`ã€‚**
*   **æœç´¢ API ä¼šæ‰¾åˆ°åŸå§‹æ¨æ–‡å’Œè¢«è½¬å‘çš„æ¨æ–‡ã€‚**
*   **å½“æˆ‘ä»¬è°ƒç”¨`statuses/retweet/:id` API ç«¯ç‚¹æ—¶ï¼Œå®ƒä¼šè½¬å‘æ‰€æœ‰çš„ç«¯ç‚¹ã€‚**
*   **å¯¹äºä¸€ä¸ª Twitter æ–°æ‰‹æ¥è¯´ï¼Œçœ‹èµ·æ¥ä½ çš„æœºå™¨äººå·²ç»è½¬å‘äº†åŒæ ·çš„ä¸œè¥¿ä¸¤æ¬¡æˆ–æ›´å¤šæ¬¡ã€‚**

## **ç±»ä¼¼è¿™æ ·çš„ä¸œè¥¿ğŸ‘‡**

**![](img/e78df9469dfdcbb32926a59c574c7e02.png)**

**é‡å¤è½¬å‘**

*   **å¦‚æœæ¨æ–‡ä»¥â€œRT @â€å¼€å¤´ï¼Œé‚£ä¹ˆå®ƒæ˜¯ä¸€æ¡è¢«è½¬å‘çš„æ¨æ–‡ï¼Œä¸åŸå§‹æ¨æ–‡çš„`id_str`ä¸åŒã€‚æˆ‘ä»¬è·å–**åŸå§‹æ¨æ–‡**çš„`id_str`ï¼Œå¹¶ä½¿ç”¨`onlyUnique`å‡½æ•°è¿‡æ»¤é‡å¤çš„æ¨æ–‡**

> **ä½¿ç”¨ API å¯ä»¥åšæ›´å¤šçš„äº‹æƒ…ã€‚æŸ¥çœ‹ API å‚è€ƒ([https://developer.twitter.com/en/docs/api-reference-index](https://developer.twitter.com/en/docs/api-reference-index))äº†è§£æ›´å¤šç»†èŠ‚ã€‚**

# **æ•°æ®ç§‘å­¦æœºå™¨äºº**

**![](img/41c4dc8c986794da8ca61e5847f375a8.png)**

**æ¨ç‰¹ä¸Šçš„@datasciencebot_ ä¸Š**

**è¿™æ˜¯æˆ‘åˆ›é€ çš„æœºå™¨äºº**

**æœºå™¨äººè½¬å‘å¸¦æœ‰æ ‡ç­¾[#æ•°æ®ç§‘å­¦](https://twitter.com/search?q=%23DataScience)å’Œ[#æ•°æ®å¯è§†åŒ–](https://twitter.com/search?q=%23DataVisualization)çš„æ¨æ–‡**

**è¿™æ˜¯æˆ‘çš„æœºå™¨äºº[https://twitter.com/datasciencebot_](https://twitter.com/datasciencebot_)çš„é“¾æ¥**

**è¯·ç…§æ­¤åŠç†ï¼:P**

# **æºä»£ç **

**å®Œæ•´çš„æºä»£ç å¯ä»¥åœ¨è¿™é‡Œè·å¾—-**

**[](https://github.com/Sumedh-Patkar/the-datascience-bot) [## sume DH-pat kar/the-data science-bot

### ä¸€ä¸ªè½¬å‘æ ‡ç­¾ä¸º#æ•°æ®ç§‘å­¦ï¼Œ#æ•°æ®å¯è§†åŒ–è§£æ•£çš„æ¨ç‰¹æœºå™¨äºº GitHub æ‹¥æœ‰è¶…è¿‡ 50 ä¸ªâ€¦

github.com](https://github.com/Sumedh-Patkar/the-datascience-bot)** 

**å¥½å§ï¼Œå°±è¿™æ ·ï¼**

**è¿™æ˜¯æˆ‘ç¬¬ä¸€ç¯‡å…³äºåª’ä½“çš„æŠ€æœ¯æ–‡ç« **

**![](img/f726c7b148310e6b0982837cf1f6539d.png)**

**æˆ‘æœ‰å—ï¼Ÿè®©æˆ‘çŸ¥é“ï¼:)**

**ä»»ä½•åé¦ˆéƒ½å°†ä¸èƒœæ„Ÿæ¿€ï¼**

**æ„Ÿè°¢é˜…è¯»ï¼ğŸ˜Š**

**![](img/ea98d02efd5248b4d4ef9f99dc71859f.png)**

**é³ã€‚**