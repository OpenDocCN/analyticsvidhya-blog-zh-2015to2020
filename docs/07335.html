<html>
<head>
<title>NumPy ways to handle dimensions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">处理尺寸的多种方法</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/numpy-ways-to-handle-dimensions-939752c75d89?source=collection_archive---------6-----------------------#2020-06-22">https://medium.com/analytics-vidhya/numpy-ways-to-handle-dimensions-939752c75d89?source=collection_archive---------6-----------------------#2020-06-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="910e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">用python代码说明的np.reshape、np.newaxis和np.expand _ dims】</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/4fa0f46fffb1f726c96f674f19398334.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DAcG0yqDMKOjdGw0xTnWLQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated"><strong class="bd jt">图片来自</strong> <a class="ae ju" href="https://pixabay.com/illustrations/fractal-abstract-background-physics-1352598/" rel="noopener ugc nofollow" target="_blank"> <strong class="bd jt"> Pixabay </strong> </a></figcaption></figure><p id="f45c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> np.newaxis </strong></p><p id="0496" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它用于增加现有数组的维数。它使用切片操作符来重新创建数组。</p><p id="7519" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">维度临时添加到数组中np.newaxis的位置。“None”也可以用来代替np.newaxis</p><p id="cc1e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> np.reshape: </strong></p><p id="d9e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它用于将阵列重新调整为所需的布局</p><p id="8b05" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> np.expand_dims: </strong></p><p id="8955" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它通过在展开的数组形状的轴位置插入一个新轴来展开数组形状</p><p id="bbab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们看一些主要的应用程序，上面的NumPy维处理操作派上了用场:</p><p id="54f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">应用1 </strong> : <strong class="ih hj">秩1数组到行/列向量的转换</strong></p><p id="ddd9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，我们创建了一个形状为(4)的4个元素的数组，称为<strong class="ih hj"> Rank 1数组。</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jv jw l"/></div></figure><pre class="je jf jg jh fd jx jy jz ka aw kb bi"><span id="3fdc" class="kc kd hi jy b fi ke kf l kg kh">Array of 4 elements: [0 1 2 3]<br/>Notice the shape, this is rank 1 array: (4,)<br/>after transpose: (4,)</span></pre><p id="2dbc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，<strong class="ih hj">、</strong>秩1数组<strong class="ih hj">、</strong>经常导致不明确的结果，因为它们的行为与行/列向量不一致。如上图，如果我们对x1进行转置，它的形状保持不变。</p><p id="0b13" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，总是建议显式指定数组的维度。这可以通过上面解释的所有3种技术来实现:</p><ul class=""><li id="b252" class="ki kj hi ih b ii ij im in iq kk iu kl iy km jc kn ko kp kq bi translated">使用np.newaxis:</li></ul><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jv jw l"/></div></figure><pre class="je jf jg jh fd jx jy jz ka aw kb bi"><span id="e1f1" class="kc kd hi jy b fi ke kf l kg kh">row vector: [[0 1 2 3]]<br/>(1, 4)<br/><br/><br/>column vector:<br/> [[0]<br/> [1]<br/> [2]<br/> [3]]<br/>(4, 1)</span></pre><ul class=""><li id="403d" class="ki kj hi ih b ii ij im in iq kk iu kl iy km jc kn ko kp kq bi translated">使用np.reshape</li></ul><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jv jw l"/></div></figure><pre class="je jf jg jh fd jx jy jz ka aw kb bi"><span id="e82d" class="kc kd hi jy b fi ke kf l kg kh">Row vector using reshape: [[0 1 2 3]]<br/>column vector using reshape:<br/> [[0]<br/> [1]<br/> [2]<br/> [3]]</span></pre><ul class=""><li id="64ec" class="ki kj hi ih b ii ij im in iq kk iu kl iy km jc kn ko kp kq bi translated">使用np.expand_dims</li></ul><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jv jw l"/></div></figure><pre class="je jf jg jh fd jx jy jz ka aw kb bi"><span id="d859" class="kc kd hi jy b fi ke kf l kg kh">Row vector using expand_dims: [[0 1 2 3]]<br/>column vector using expand_dims:<br/> [[0]<br/> [1]<br/> [2]<br/> [3]]</span></pre><p id="9a72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">应用二</strong> : <strong class="ih hj">增加尺寸</strong></p><p id="72e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们创建另一个形状为(2，4，28)的数组x2，并检查如何将x2的维度从3D扩展到5D</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kr"><img src="../Images/35a2a8ad7583e5421c735c89ab55a666.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e-eYFeNAvzaxUd7T0k5jww.png"/></div></div></figure><p id="2cad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从上面要注意的关键是np.reshape也允许你分割维度。</p><p id="d9e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">应用3:广播</strong></p><p id="8b3e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">根据<a class="ae ju" href="https://numpy.org/doc/stable/user/basics.broadcasting.html#:~:text=The%20term%20broadcasting%20describes%20how,that%20they%20have%20compatible%20shapes." rel="noopener ugc nofollow" target="_blank"> NumPy文件</a>:</p><blockquote class="ks"><p id="3699" class="kt ku hi bd kv kw kx ky kz la lb jc dx translated"><em class="lc">广播描述了numpy在算术运算时如何处理不同形状的数组。</em></p></blockquote><p id="863c" class="pw-post-body-paragraph if ig hi ih b ii ld ik il im le io ip iq lf is it iu lg iw ix iy lh ja jb jc hb bi translated">例如，当我们添加以下两个数组时，由于形状不匹配，它会显示“ValueError ”:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es li"><img src="../Images/fbc1639608a9446535499706d4865ab5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cjQAynn0MlUwb52a-N69EA.png"/></div></div></figure><p id="eb84" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们看看np.newaxis是如何增加下面一个数组的维数的:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lj"><img src="../Images/5ecccbd29c0bf291105542fbbb14a52f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XNH1hz4hPBnoJ5xMGnWOJw.png"/></div></div></figure><p id="5684" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于我们主要需要调整数组的维度以进行正确的广播操作，因此np.reshape和np.expand_dims增加维度的方法同样有效(如前面的示例所示)。</p><p id="c6fe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢阅读！！！</p><p id="9af7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Jupyter笔记本全代码放<a class="ae ju" href="https://github.com/vidhi-am/numpy-dimension/blob/master/dimension%20handling-checkpoint.ipynb" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><p id="dd04" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">参考资料:</p><ul class=""><li id="63d8" class="ki kj hi ih b ii ij im in iq kk iu kl iy km jc kn ko kp kq bi translated"><a class="ae ju" href="https://stackoverflow.com/questions/46334014/np-reshapex-1-1-vs-x-np-newaxis?noredirect=1&amp;lq=1" rel="noopener ugc nofollow" target="_blank">https://stack overflow . com/questions/46334014/NP-resh apex-1-1-vs-x-NP-new axis？noredirect=1 &amp; lq=1 </a></li><li id="5b48" class="ki kj hi ih b ii lk im ll iq lm iu ln iy lo jc kn ko kp kq bi translated"><a class="ae ju" href="https://stackoverflow.com/questions/28385666/numpy-use-reshape-or-newaxis-to-add-dimensions" rel="noopener ugc nofollow" target="_blank">https://stack overflow . com/questions/28385666/numpy-use-shape-or-new axis-to-add-dimensions</a></li></ul></div></div>    
</body>
</html>