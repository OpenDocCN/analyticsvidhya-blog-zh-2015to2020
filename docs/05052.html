<html>
<head>
<title>Duck Typing in Python — 3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的Duck类型— 3</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/duck-typing-in-python-3-b52e3fbe340?source=collection_archive---------11-----------------------#2020-04-09">https://medium.com/analytics-vidhya/duck-typing-in-python-3-b52e3fbe340?source=collection_archive---------11-----------------------#2020-04-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="8101" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">让我们来学习使用Python中的鸭子类型</h1><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/20ecfb69ca3ca16ee6b185d3aa7c8939.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2CAhpIkrajx2tqrh"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">照片由<a class="ae jt" href="https://unsplash.com/@zoeeee_?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">佐里夫</a>在<a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="6aa4" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">鸭子打字</h1><p id="e956" class="pw-post-body-paragraph ju jv hi jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">对于经验丰富的程序员来说，Duck typing应该不是一个陌生的概念。对于新手来说，这可能听起来是一个有趣的短语。鸭子和编程有什么关系？</p><p id="6300" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi translated">从回顾的角度来看，这个概念改编自以下表达式，作为<a class="ae jt" href="https://en.wikipedia.org/wiki/Abductive_reasoning" rel="noopener ugc nofollow" target="_blank">溯因推理</a>的一种形式，你可以在<a class="ae jt" href="https://en.wikipedia.org/wiki/Duck_test" rel="noopener ugc nofollow" target="_blank">维基百科</a>上找到。</p><blockquote class="kx ky kz"><p id="c1ae" class="ju jv la jw b jx ks jz ka kb kt kd ke lb ku kh ki lc kv kl km ld kw kp kq kr hb bi translated">如果它长得像鸭子，游起来像鸭子，叫起来像鸭子，那么它很可能就是一只鸭子。</p></blockquote><p id="3644" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi translated">我们现在不需要把这个表达式和编程联系起来，但是我们应该已经注意到这个表达式和我们如何识别一只鸭子有关。本质上，我们不需要对感兴趣的动物进行基因组测序就能知道它的身份。我们不是接近内在因素，而是根据它的外在表现和行为得出结论。</p></div><div class="ab cl le lf gp lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hb hc hd he hf"><h1 id="ebb2" class="if ig hi bd ih ii ll ik il im lm io ip iq ln is it iu lo iw ix iy lp ja jb jc bi translated">动态与静态类型</h1><p id="54f0" class="pw-post-body-paragraph ju jv hi jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">duck typing的概念主要被支持动态类型的编程语言所采用，比如Python和JavaScript。在这些语言中，一个共同的特征是我们声明变量而不需要指定它们的类型。</p><pre class="je jf jg jh fd lq lr ls lt aw lu bi"><span id="760f" class="lv ig hi lr b fi lw lx l ly lz">&gt;&gt;&gt; a = 2000</span><span id="e258" class="lv ig hi lr b fi ma lx l ly lz">&gt;&gt;&gt; type(a)&lt;class ‘int’&gt;</span><span id="5622" class="lv ig hi lr b fi ma lx l ly lz">&gt;&gt;&gt; a = ‘Dynamic Typing’</span><span id="6356" class="lv ig hi lr b fi ma lx l ly lz">&gt;&gt;&gt; type(a)&lt;class ‘str’&gt;</span><span id="1967" class="lv ig hi lr b fi ma lx l ly lz">&gt;&gt;&gt; a = [1, 2, 3]</span><span id="f2a2" class="lv ig hi lr b fi ma lx l ly lz">&gt;&gt;&gt; type(a)</span><span id="d5d8" class="lv ig hi lr b fi ma lx l ly lz">&lt;class ‘list’&gt;</span></pre><p id="b071" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi translated">从上面的代码片段中可以看出，我们最初给变量<code class="du mb mc md lr b">a</code>赋了一个整数，使其成为<code class="du mb mc md lr b">int</code>类型。后来我们给同一个变量赋了一个字符串和一个数字列表，类型分别变成了<code class="du mb mc md lr b">str</code>和<code class="du mb mc md lr b">list</code>。解释器没有抱怨同一个变量的数据类型的变化。</p><p id="b144" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi translated">相比之下，许多其他类型的编程语言都以静态类型为特色，比如Java和Swift。当我们声明变量时，我们需要明确这些变量的数据类型。后来，如果我们希望改变数据类型，编译器不允许我们这样做，因为它与初始声明不一致。</p></div><div class="ab cl le lf gp lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hb hc hd he hf"><h1 id="1f5c" class="if ig hi bd ih ii ll ik il im lm io ip iq ln is it iu lo iw ix iy lp ja jb jc bi translated">概念示例</h1><p id="68be" class="pw-post-body-paragraph ju jv hi jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">在上一节中，我们已经提到Python是一种动态类型语言，正如涉及内置数据类型的最基本的例子所示。但是，我们可以进一步将动态类型应用于自定义数据类型。下面我们来看一个概念性的例子。</p><p id="b843" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi translated">&gt;&gt;&gt;类鸭:……def swim _嘎嘎(自):</p><p id="c993" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi translated">… print(“我是一只鸭子，我会游泳，还会嘎嘎叫。”)…</p><p id="676b" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi translated">&gt; &gt; &gt; class robotic bird:……def swim _ quak(self):</p><p id="1cfe" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi">…</p><p id="02ec" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi translated">print("我是一只机器鸟，我会游泳，还会嘎嘎叫。")</p><p id="7a9a" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi">…</p><p id="1a6d" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi translated">&gt;&gt;&gt;类鱼:</p><p id="ee02" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi">…</p><p id="3583" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi translated">定义游泳(自己):</p><p id="8763" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi">…</p><p id="c818" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi translated">print("我是一条鱼，我会游泳，但不会呱呱。")</p><p id="7dc7" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi">…</p><p id="f208" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi translated">&gt; &gt; &gt; def鸭_测试(动物):</p><p id="681f" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi">…</p><p id="83fc" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi translated">animal.swim _嘎嘎()</p><p id="ce61" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi">…</p><p id="6cdd" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi translated">&gt; &gt; &gt; duck_testing(Duck())我是一只鸭子，我会游泳，会嘎嘎叫。</p><p id="d566" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi translated">&gt; &gt; &gt; duck_testing(RoboticBird())我是一只机器鸟，我会游泳，会嘎嘎叫。</p><p id="f26e" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi translated">&gt;&gt;&gt;鸭子_测试(Fish())</p><p id="60ab" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi translated">回溯(最近一次呼叫):</p><p id="7388" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi translated">文件<stdin>，第1行，在<module>中</module></stdin></p><p id="6814" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi translated">duck_testing中文件“<stdin>”的第2行</stdin></p><p id="73e3" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi translated">attribute error:“Fish”对象没有属性“swim _ quack”</p><p id="9679" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi translated">在上面的代码片段中，我们可以看到<code class="du mb mc md lr b">Duck</code>类的一个实例当然可以游泳和嘎嘎叫，正如成功调用<code class="du mb mc md lr b">duck_testing</code>函数所反映的那样。对于<code class="du mb mc md lr b">RoboticBird</code>类也是如此，它也实现了所需的<code class="du mb mc md lr b">swim_quack</code>函数。然而，<code class="du mb mc md lr b">Fish</code>类没有实现<code class="du mb mc md lr b">swim_quack</code>函数，导致它的实例没有通过duck测试评估。</p><p id="677b" class="pw-post-body-paragraph ju jv hi jw b jx ks jz ka kb kt kd ke kf ku kh ki kj kv kl km kn kw kp kq kr hb bi translated">通过这些观察，我们应该理解这里duck类型的一个基本符号。当我们为特定目的使用自定义类型时，相关功能的实现比数据的确切类型更重要。在我们的例子中，尽管一只机器鸟不是一只真正的鸭子，但是它对<code class="du mb mc md lr b">swim_quack</code>函数的实现“使”它成为一只鸭子——一种会游泳和嘎嘎叫的动物。</p></div></div>    
</body>
</html>