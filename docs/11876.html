<html>
<head>
<title>Serverless Framework â€” Package Your Lambda Functions Easily</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">æ— æœåŠ¡å™¨æ¡†æ¶â€”â€”è½»æ¾æ‰“åŒ…æ‚¨çš„Lambdaå‡½æ•°</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/analytics-vidhya/serverless-framework-package-your-lambda-functions-easily-6c4f0351cdab?source=collection_archive---------7-----------------------#2020-12-22">https://medium.com/analytics-vidhya/serverless-framework-package-your-lambda-functions-easily-6c4f0351cdab?source=collection_archive---------7-----------------------#2020-12-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7098" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ç°åœ¨ï¼Œä¸€å¤©æ— æœåŠ¡å™¨æ˜¯äº‘è®¡ç®—ä¸–ç•Œä¸­å¿«é€Ÿå‘å±•çš„æŠ€æœ¯ã€‚å¤§å¤šæ•°å…¬å¸æ­£åœ¨ä»ä¼ ç»Ÿæ¶æ„è½¬å‘é›†è£…ç®±æ¶æ„æˆ–æ— æœåŠ¡å™¨æ¶æ„ã€‚</p><p id="d1f6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">AWSæ˜¯æœ€æµè¡Œå’Œæœ€å¼ºå¤§çš„äº‘ä¹‹ä¸€ã€‚å®ƒæœ‰è®¸å¤šæœåŠ¡ï¼Œå¹¶å¯¹æ— æœåŠ¡å™¨æŠ€æœ¯æœ‰å¾ˆå¤§çš„æ”¯æŒã€‚</p><p id="a6b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">AWS Lambdaæ˜¯è¿è¡Œæ— æœåŠ¡å™¨å·¥ä½œè´Ÿè½½çš„å¼ºå¤§æœåŠ¡ä¹‹ä¸€ï¼Œç»“åˆäº†API Gatewayã€DynamoDBã€S3ç­‰å…¶ä»–æœåŠ¡..</p><p id="30cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éƒ½æœ‰ä½¿ç”¨ä¸€äº›å¤–éƒ¨ä¾èµ–é¡¹çš„è¦æ±‚ï¼Œå½“æ¶‰åŠåˆ°åœ¨AWS Lambdaä¸­ä½¿ç”¨å¤–éƒ¨åŒ…éƒ¨ç½²ä»£ç æ—¶ï¼Œæ‚¨åˆ›å»ºä¸€ä¸ªä»£ç çš„zipæ–‡ä»¶ï¼Œå¹¶å°†å…¶ä¸Šä¼ åˆ°S3 bucketï¼Œç„¶åé…ç½®æ‚¨çš„Lambdaå‡½æ•°ä»¥æŒ‡å‘è¯¥ä½ç½®ï¼Œä½†å¦‚æœæˆ‘è¯´æ‚¨ä¸å¿…åšæ‰€æœ‰è¿™äº›ï¼Œè€Œæ˜¯ä¸“æ³¨äºåˆ›å»ºæ‚¨çš„ä»£ç ï¼Œä¸€ä¸ªæ¡†æ¶ä¼šè´Ÿè´£å°†æ‚¨çš„ä»£ç æ‰“åŒ…å¹¶éƒ¨ç½²åˆ°AWS Lambdaï¼Œé‚£ä¼šæ€ä¹ˆæ ·ï¼Ÿå¬èµ·æ¥å¾ˆæœ‰è¶£ï¼Ÿå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆç»§ç»­é˜…è¯»è¿™ç¯‡åšå®¢ã€‚</p><h1 id="ca8e" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">æ— æœåŠ¡å™¨æ¡†æ¶çš„å…ˆå†³æ¡ä»¶</h1><ul class=""><li id="526f" class="kb kc hi ih b ii kd im ke iq kf iu kg iy kh jc ki kj kk kl bi translated">IAMç”¨æˆ·çš„è®¿é—®å¯†é’¥å’Œç§˜å¯†è®¿é—®å¯†é’¥ã€‚</li><li id="7f95" class="kb kc hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">Dockerå·²å®‰è£…å¹¶åœ¨ç³»ç»Ÿä¸­è¿è¡Œ</li><li id="2bdf" class="kb kc hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">AWS CLI</li><li id="3003" class="kb kc hi ih b ii km im kn iq ko iu kp iy kq jc ki kj kk kl bi translated">ç»“èŠ‚</li></ul><h1 id="01e6" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">è®©æˆ‘ä»¬å¼€å§‹å§ã€‚</h1><ul class=""><li id="a461" class="kb kc hi ih b ii kd im ke iq kf iu kg iy kh jc ki kj kk kl bi translated">æ­£åœ¨å®‰è£…æ— æœåŠ¡å™¨æ¡†æ¶ã€‚</li></ul><p id="63f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kr">æ³¨æ„:å¦‚æœä½ çš„æœºå™¨ä¸Šè¿˜æ²¡æœ‰</em> <a class="ae ks" href="https://nodejs.org/en/download/package-manager/" rel="noopener ugc nofollow" target="_blank"> <em class="kr">èŠ‚ç‚¹</em> </a> <em class="kr">ï¼Œä½ éœ€è¦å…ˆå®‰è£…å®ƒã€‚æˆ‘å»ºè®®ä½¿ç”¨NodeJSçš„æœ€æ–°LTSç‰ˆæœ¬ã€‚</em></p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="cfc2" class="lc je hi ky b fi ld le l lf lg">npm install -g serverless</span></pre><h1 id="485d" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">åœ¨æœ¬åœ°åˆ›å»ºæ‚¨çš„æœåŠ¡</h1><p id="d85b" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq lh is it iu li iw ix iy lj ja jb jc hb bi translated">ä¸€ä¸ª<code class="du lk ll lm ky b">service</code>å°±åƒä¸€ä¸ªé¡¹ç›®ã€‚åœ¨è¿™é‡Œå®šä¹‰AWS Lambdaå‡½æ•°ã€è§¦å‘å®ƒä»¬çš„<code class="du lk ll lm ky b">events</code>ä»¥åŠå®ƒä»¬éœ€è¦çš„ä»»ä½•AWSåŸºç¡€è®¾æ–½<code class="du lk ll lm ky b">resources</code>ï¼Œæ‰€æœ‰è¿™äº›éƒ½åœ¨ä¸€ä¸ªåä¸º<code class="du lk ll lm ky b">serverless.yml</code>çš„æ–‡ä»¶ä¸­ã€‚</p><p id="fac3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘ä»¬å¯ä»¥ä»æ¨¡æ¿åˆ›å»ºæœåŠ¡ã€‚æˆ‘å‡†å¤‡ç”¨Python 3ã€‚</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="e354" class="lc je hi ky b fi ld le l lf lg">serverless create \<br/> --template aws-python3 \<br/> --name harsh-test \<br/> --path harsh-test<!-- --> </span></pre><p id="dc76" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du lk ll lm ky b">serverless create</code>å‘½ä»¤å°†åˆ›å»ºä¸€ä¸ªæœåŠ¡ã€‚<code class="du lk ll lm ky b">--template aws-python3</code>å°†ä½¿ç”¨python3åˆå§‹åŒ–æˆ‘ä»¬çš„æœåŠ¡<code class="du lk ll lm ky b">--name harsh-test</code>å°†è¢«ç”¨ä½œæœåŠ¡åï¼Œè€Œ<code class="du lk ll lm ky b">--path harsh-test</code>å°†åˆ›å»ºä¸€ä¸ªåä¸ºharsh-testçš„ç›®å½•æ¥å­˜å‚¨æˆ‘ä»¬çš„ä»£ç å’Œæ¥è‡ªæ— æœåŠ¡å™¨æ¡†æ¶çš„ä¸€äº›å…¶ä»–æ–‡ä»¶ã€‚</p><blockquote class="ln lo lp"><p id="f755" class="if ig kr ih b ii ij ik il im in io ip lq ir is it lr iv iw ix ls iz ja jb jc hb bi translated">æ— æœåŠ¡å™¨æ¡†æ¶å¸¦æœ‰ä¸€äº›é¢„å®šä¹‰çš„æ¨¡æ¿ã€‚æ‚¨å¯ä»¥é˜…è¯»æ›´å¤šå…³äºå…¶ä»–å¯ç”¨æ¨¡æ¿çš„ä¿¡æ¯â€”<a class="ae ks" href="https://www.serverless.com/framework/docs/providers/aws/guide/services/" rel="noopener ugc nofollow" target="_blank">https://www . server less . com/framework/docs/providers/AWS/guide/services/</a></p></blockquote><figure class="kt ku kv kw fd lu er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es lt"><img src="../Images/156f584012f93dfbe8b9af953d83e240.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HhTSzlrIEDFTID95fQ45qA.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx translated">ä½¿ç”¨aws-python3æ¨¡æ¿åˆ›å»ºæ— æœåŠ¡å™¨</figcaption></figure><p id="3b80" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¿™å°†åœ¨æˆ‘ä»¬çš„ç›®å½•ä¸­åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶ï¼Œå³<code class="du lk ll lm ky b">handler.py</code>å’Œ<code class="du lk ll lm ky b">serverless.yml</code>æ–‡ä»¶ã€‚</p><figure class="kt ku kv kw fd lu er es paragraph-image"><div class="er es mf"><img src="../Images/3c280be791054db049f0c28baf0e2794.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*3IkofS-fvHHIv8e4eV978w.png"/></div></figure><h1 id="08b1" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</h1><p id="4ba1" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq lh is it iu li iw ix iy lj ja jb jc hb bi translated">æˆ‘ä»¬å°†åœ¨æ— æœåŠ¡å™¨æ¡†æ¶åˆ›å»ºçš„ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒã€‚ä½ å¯ä»¥é˜…è¯»<a class="ae ks" href="https://python-guide-pt-br.readthedocs.io/pt_BR/latest/dev/virtualenvs.html" rel="noopener ugc nofollow" target="_blank">è¿™é‡Œ</a>å…³äºå¦‚ä½•å’Œä¸ºä»€ä¹ˆä½¿ç”¨Pythonè™šæ‹Ÿç¯å¢ƒã€‚</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="9e08" class="lc je hi ky b fi ld le l lf lg">virtualenv venv --python=python3</span></pre><p id="2395" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¦‚æœæ‚¨æ²¡æœ‰å®‰è£…virtualenvï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code class="du lk ll lm ky b">pip3 install virtualenv</code>æ¥å®‰è£…</p><figure class="kt ku kv kw fd lu er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es mg"><img src="../Images/0e9d096d364f65fcef4f5d6380c5a9a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NmSWujhFAcjb2eZRtNdpcw.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx translated">virtuaenv usig python3</figcaption></figure><p id="7eae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ:</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="1701" class="lc je hi ky b fi ld le l lf lg">source venv/bin/activate</span></pre><p id="d7ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è®©æˆ‘ä»¬è®¾ç½®æƒ³è¦éƒ¨ç½²çš„åŠŸèƒ½ã€‚åœ¨æ‚¨æœ€å–œæ¬¢çš„æ–‡æœ¬ç¼–è¾‘å™¨ä¸­æ‰“å¼€<code class="du lk ll lm ky b">handler.py</code>,æ·»åŠ ä»¥ä¸‹å‡ è¡Œ:</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="ed04" class="lc je hi ky b fi ld le l lf lg"># handler.py</span><span id="99df" class="lc je hi ky b fi mh le l lf lg">import numpy as np</span><span id="c384" class="lc je hi ky b fi mh le l lf lg">def main(event, context):<br/>  a = np.arange(15).reshape(3, 5)<br/>  print("Your numpy array:")<br/>  print(a)</span><span id="4643" class="lc je hi ky b fi mh le l lf lg">if __name__ == "__main__":<br/>  main('', '')</span></pre><p id="3870" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¿™æ˜¯ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œä½¿ç”¨äº†<a class="ae ks" href="https://numpy.org/doc/stable/user/quickstart.html" rel="noopener ugc nofollow" target="_blank">æ•°å­—å¿«é€Ÿå…¥é—¨</a>ä¸­çš„ä¸€ä¸ªä¾‹å­ã€‚å½“ä½¿ç”¨AWS Lambdaå‡½æ•°æ—¶ï¼Œæ‚¨éœ€è¦å®šä¹‰ä¸€ä¸ªæ¥å—ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°:<code class="du lk ll lm ky b">event</code>å’Œ<code class="du lk ll lm ky b">context</code>ã€‚ä½ å¯ä»¥åœ¨AWSä¸Šé˜…è¯»æ›´å¤šå…³äºPython çš„<a class="ae ks" href="http://docs.aws.amazon.com/lambda/latest/dg/python-programming-model-handler-types.html" rel="noopener ugc nofollow" target="_blank"> Lambdaå‡½æ•°å¤„ç†ç¨‹åºã€‚</a></p><p id="d5d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¦‚æœæˆ‘ä»¬è¿è¡Œ<code class="du lk ll lm ky b">python handler.py</code>ï¼Œå®ƒå°†è¿è¡Œæˆ‘ä»¬çš„<code class="du lk ll lm ky b">main()</code>åŠŸèƒ½ã€‚</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="a59c" class="lc je hi ky b fi ld le l lf lg">python handler.py</span></pre><figure class="kt ku kv kw fd lu er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es mi"><img src="../Images/2cc728a4e5c42af58acc1506352c8707.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vjWIfalswz8F7Qms_4AADA.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx translated">ç¼–è¾‘å’Œè¿è¡Œhandler.pyæ–‡ä»¶</figcaption></figure><p id="ee1e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å•Šï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰åœ¨æˆ‘ä»¬çš„è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…<code class="du lk ll lm ky b">numpy</code>ã€‚è®©æˆ‘ä»¬åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…<code class="du lk ll lm ky b">numpy</code>ã€‚</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="dd71" class="lc je hi ky b fi ld le l lf lg">pip install numpy</span></pre><figure class="kt ku kv kw fd lu er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es mj"><img src="../Images/3325a76a9dbdb22352c10b49fa00d2d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*On3iCSCyunX74-JcC0vu6Q.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx translated">åœ¨virtualenvä¸­å®‰è£…Numpy</figcaption></figure><p id="7a28" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘ä½¿ç”¨çš„æ˜¯<code class="du lk ll lm ky b">pip install numpy</code>ï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥åœ¨åˆ›å»ºvirtualenvæ—¶ç¼–å†™<code class="du lk ll lm ky b">pip3 insatll numpy</code>ï¼Œæˆ‘ä»¬å·²ç»æåˆ°è¿‡æˆ‘ä»¬æƒ³è¦ä½¿ç”¨<code class="du lk ll lm ky b">python3</code>åˆ›å»ºvirtualenvï¼Œæ‰€ä»¥åœ¨æˆ‘ä»¬çš„virtualenv <code class="du lk ll lm ky b">pip</code>ä¸­å°†ä½¿ç”¨<code class="du lk ll lm ky b">python3</code>æ¥å®‰è£…åŒ…ã€‚</p><p id="8a57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è®©æˆ‘ä»¬åˆ›å»º<code class="du lk ll lm ky b">requirements.txt</code>æ–‡ä»¶ã€‚</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="1fe1" class="lc je hi ky b fi ld le l lf lg">pip freeze &gt; requirements.txt</span></pre><figure class="kt ku kv kw fd lu er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es mk"><img src="../Images/2c4614bce783f07133ddb5eee9372f2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RKdTFgiUG6vEGo4zFAVJ1A.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx translated">ç”Ÿæˆrequirements.txtæ–‡ä»¶</figcaption></figure><p id="2582" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ç°åœ¨è®©æˆ‘ä»¬è¿è¡Œä»£ç ã€‚</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="09be" class="lc je hi ky b fi ld le l lf lg">python handler.py</span></pre><figure class="kt ku kv kw fd lu er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es ml"><img src="../Images/6d88b20f836ab41773ee25d302889cf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rQ49TF1UED4s1XIR0ryxhA.png"/></div></div></figure><p id="fb95" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ­å–œä½ ï¼ï¼ğŸ‘æˆ‘ä»¬å·²ç»æˆåŠŸåœ°åœ¨æœ¬åœ°è¿è¡Œäº†pythonä»£ç ã€‚</p><h1 id="0dae" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">éƒ¨ç½²æˆ‘ä»¬çš„æ— æœåŠ¡å™¨æœåŠ¡</h1><p id="48c7" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq lh is it iu li iw ix iy lj ja jb jc hb bi translated">æˆ‘ä»¬çš„åŠŸèƒ½æ­£åœ¨æœ¬åœ°å·¥ä½œï¼Œå¹¶ä¸”å·²ç»å‡†å¤‡å¥½éƒ¨ç½²åˆ°Lambdaã€‚åœ¨æ‚¨æœ€å–œæ¬¢çš„æ–‡æœ¬ç¼–è¾‘å™¨ä¸­æ‰“å¼€<code class="du lk ll lm ky b">serverless.yml</code>æ–‡ä»¶ï¼Œå¹¶å†™ä¸‹ä»¥ä¸‹å‡ è¡Œ:</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="38e5" class="lc je hi ky b fi ld le l lf lg"># serverless.yml</span><span id="9f4c" class="lc je hi ky b fi mh le l lf lg">---<br/>service: harsh-test</span><span id="246e" class="lc je hi ky b fi mh le l lf lg">frameworkVersion: '2'</span><span id="40e4" class="lc je hi ky b fi mh le l lf lg">provider:<br/>  name: aws<br/>  runtime: python3.8</span><span id="1287" class="lc je hi ky b fi mh le l lf lg">functions:<br/>  hello:<br/>    handler: handler.main</span></pre><p id="807d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¿™æ˜¯ä¸€ä¸ªå«åš<code class="du lk ll lm ky b">harsh-test</code>çš„åŸºç¡€æœåŠ¡ã€‚å®ƒå°†å‘AWSéƒ¨ç½²ä¸€ä¸ªåä¸º<code class="du lk ll lm ky b">hello</code>çš„Python 3.8å‡½æ•°ï¼Œè€Œ<code class="du lk ll lm ky b">hello</code>å‡½æ•°çš„å…¥å£ç‚¹æ˜¯<code class="du lk ll lm ky b">handler.py</code>æ¨¡å—ä¸­çš„<code class="du lk ll lm ky b">main</code>å‡½æ•°ã€‚</p><figure class="kt ku kv kw fd lu er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es mm"><img src="../Images/f698f9970594b5e811560344ab9e4c21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qCLwKI5bZfQfFysjaMISCQ.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx translated">æ— æœåŠ¡å™¨. ymlæ–‡ä»¶</figcaption></figure><p id="abd2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">éƒ¨ç½²å‰çš„æœ€åä¸€æ­¥æ˜¯æ·»åŠ <code class="du lk ll lm ky b">serverless-python-requirements</code>æ’ä»¶ã€‚è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code class="du lk ll lm ky b">package.json</code>æ–‡ä»¶æ¥ä¿å­˜æ‚¨çš„èŠ‚ç‚¹ä¾èµ–å…³ç³»ã€‚</p><p id="bea7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¯¥å‘½ä»¤å°†åˆ›å»º<code class="du lk ll lm ky b">package.json</code>æ–‡ä»¶ï¼Œæ¥å—æ‰€æœ‰é»˜è®¤å€¼ã€‚</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="e059" class="lc je hi ky b fi ld le l lf lg">npm init</span></pre><figure class="kt ku kv kw fd lu er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es mn"><img src="../Images/42a9c4cafdb82a6f546768cb162fffb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7dP9iinRIIsi5Z6WbMb3xQ.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx translated">åˆ›å»ºpacakge.jsonæ–‡ä»¶</figcaption></figure><p id="f2f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ç°åœ¨æˆ‘ä»¬å°†å†è¿è¡Œä¸€ä¸ªå‘½ä»¤æ¥å®‰è£…`<code class="du lk ll lm ky b">serverless-python-requirements</code>package</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="ebb7" class="lc je hi ky b fi ld le l lf lg">npm install --save serverless-python-requirements</span></pre><figure class="kt ku kv kw fd lu er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es mo"><img src="../Images/240aaae26c5f750e3c62e68c3bac0a56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XhbWJJa8c6gw2zuDSPFVwQ.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx translated">å®‰è£…æ— æœåŠ¡å™¨-python-è¦æ±‚</figcaption></figure><p id="ea99" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä¸ºäº†é…ç½®æˆ‘ä»¬çš„<code class="du lk ll lm ky b">serverless.yml</code>æ–‡ä»¶æ¥ä½¿ç”¨è¿™ä¸ªæ’ä»¶ï¼Œæˆ‘ä»¬å°†åœ¨æˆ‘ä»¬çš„<code class="du lk ll lm ky b">serverless.yml</code>ä¸­æ·»åŠ ä»¥ä¸‹å‡ è¡Œ:</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="776b" class="lc je hi ky b fi ld le l lf lg">[...]</span><span id="9941" class="lc je hi ky b fi mh le l lf lg">plugins:<br/>  - serverless-python-requirements</span><span id="5661" class="lc je hi ky b fi mh le l lf lg">custom:<br/>  pythonRequirements:<br/>    dockerizePip: non-linux</span></pre><figure class="kt ku kv kw fd lu er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es mp"><img src="../Images/264089b867932455e4c5167ed268005c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_E1g_80gnV32417Gbuwthw.png"/></div></div></figure><p id="27d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du lk ll lm ky b">plugins</code>éƒ¨åˆ†å‘æ¡†æ¶æ³¨å†Œæ’ä»¶ã€‚åœ¨<code class="du lk ll lm ky b">custom</code>éƒ¨åˆ†ï¼Œæˆ‘ä»¬å‘Šè¯‰æ’ä»¶åœ¨ç”¨pipå®‰è£…åŒ…æ—¶ä½¿ç”¨Dockerã€‚å®ƒå°†ä½¿ç”¨ä¸€ä¸ªç±»ä¼¼äºLambdaç¯å¢ƒçš„Dockerå®¹å™¨ï¼Œå› æ­¤ç¼–è¯‘åçš„æ‰©å±•å°†æ˜¯å…¼å®¹çš„ã€‚</p><p id="98c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¿›è¡Œéƒ¨ç½²ä¹‹å‰çš„æœ€åä¸€æ­¥æ˜¯é…ç½®IAMç”¨æˆ·çš„å¯†é’¥ã€‚</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="5e8a" class="lc je hi ky b fi ld le l lf lg">aws configure</span></pre><p id="ab3e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å®ƒä¼šè¦æ±‚æ‚¨è¾“å…¥IAMç”¨æˆ·çš„è®¿é—®å¯†é’¥Idå’Œç§˜å¯†è®¿é—®å¯†é’¥ã€‚æ­£ç¡®é…ç½®å€¼ã€‚</p><p id="a063" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æœ€åï¼Œæˆ‘ä»¬å°†éƒ¨ç½²æˆ‘ä»¬çš„åŠŸèƒ½:</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="9b02" class="lc je hi ky b fi ld le l lf lg">serverless deploy</span></pre><p id="cd19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ­å–œä½ ï¼ğŸ‘æ‚¨å·²ç»ä½¿ç”¨æ— æœåŠ¡å™¨æ¡†æ¶æˆåŠŸéƒ¨ç½²äº†AWS Lambdaå‡½æ•°ã€‚</p><h1 id="ee77" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">ä½¿ç”¨å˜é‡</h1><p id="e43e" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq lh is it iu li iw ix iy lj ja jb jc hb bi translated">åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»åˆ›å»ºäº†åŸºæœ¬çš„lambdaå‡½æ•°ï¼Œä½¿ç”¨ä¸€ä¸ªç®€å•çš„å‘½ä»¤ï¼Œä½¿ç”¨æ— æœåŠ¡å™¨æ¡†æ¶éƒ¨ç½²å®ƒã€‚</p><p id="307c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è®©æˆ‘ä»¬å‘å‰è¿ˆå‡ºä¸€æ­¥ï¼Œè®©æˆ‘ä»¬çš„ç¯å¢ƒå˜å¾—æ›´æœ‰æ´»åŠ›ã€‚</p><p id="5d89" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è€ƒè™‘ä¸€ä¸ªåœºæ™¯ï¼Œæ‚¨å¸Œæœ›åœ¨å¤šä¸ªç¯å¢ƒä¸­éƒ¨ç½²ç›¸åŒçš„åŠŸèƒ½ã€‚æˆ‘ä»¬å°†åœ¨æˆ‘ä»¬çš„<code class="du lk ll lm ky b">serverless.yml</code>æ–‡ä»¶ä¸­ä½¿ç”¨ä¸€äº›è‡ªå®šä¹‰å˜é‡æ¥å°†æˆ‘ä»¬çš„ä»£ç éƒ¨ç½²åˆ°å¤šä¸ªåŒºåŸŸã€‚</p><p id="3baf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ‰“å¼€<code class="du lk ll lm ky b">serverless.yml</code>æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å‡ è¡Œ:</p><ul class=""><li id="fb5c" class="kb kc hi ih b ii ij im in iq mq iu mr iy ms jc ki kj kk kl bi translated">æ·»åŠ è‡ªå®šä¹‰å˜é‡</li></ul><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="3834" class="lc je hi ky b fi ld le l lf lg">[Previous Content.....]</span><span id="5e75" class="lc je hi ky b fi mh le l lf lg">custom:<br/>  defaultEnv: dev</span><span id="587e" class="lc je hi ky b fi mh le l lf lg">  #Env Specific Variables</span><span id="909e" class="lc je hi ky b fi mh le l lf lg">  dev:<br/>    region: us-east-1<br/>    profile: dev</span><span id="96c2" class="lc je hi ky b fi mh le l lf lg">  staging:<br/>    region: ap-south-1<br/>    profile: staging</span><span id="0438" class="lc je hi ky b fi mh le l lf lg">  pythonRequirements:<br/>    dockerizePip: non-linux</span></pre><p id="54c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">åœ¨æˆ‘ä»¬çš„<code class="du lk ll lm ky b">serverless.yml</code>æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º<code class="du lk ll lm ky b">custom</code>çš„é”®ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æåˆ°äº†<code class="du lk ll lm ky b">defaultEnv: dev</code>ï¼Œæˆ‘ä»¬è¿˜åˆ›å»ºäº†<code class="du lk ll lm ky b">dev</code>é”®ï¼Œå¹¶æŒ‡å®šæˆ‘ä»¬è¦ä½¿ç”¨<code class="du lk ll lm ky b">us-east-1</code>åŒºåŸŸå’Œ<code class="du lk ll lm ky b">dev</code>é…ç½®æ–‡ä»¶ã€‚å¯¹äº<code class="du lk ll lm ky b">staging</code>ç¯å¢ƒä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œé˜…è¯»æ›´å¤šå…³äºæ— æœåŠ¡å™¨æ¡†æ¶<a class="ae ks" href="https://www.serverless.com/framework/docs/providers/aws/guide/variables/" rel="noopener ugc nofollow" target="_blank">ä¸­çš„å˜é‡ã€‚</a></p><ul class=""><li id="a73f" class="kb kc hi ih b ii ij im in iq mq iu mr iy ms jc ki kj kk kl bi translated">åœ¨æˆ‘ä»¬çš„æä¾›è€…ä¸­ä½¿ç”¨å˜é‡ã€‚</li></ul><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="7f79" class="lc je hi ky b fi ld le l lf lg">[Existing Content.....]</span><span id="a664" class="lc je hi ky b fi mh le l lf lg">provider:<br/>  name: aws<br/>  runtime: python3.8<br/>  stage: ${opt:stage, self:custom.defaultStage}<br/>  region: ${self:custom.${self:provider.stage}.region}<br/>  profile: ${opt:profile,self:custom.${self:provider.stage}.profile}</span><span id="ef57" class="lc je hi ky b fi mh le l lf lg">[Existing Content....]</span></pre><p id="6613" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">åœ¨æˆ‘ä»¬çš„<code class="du lk ll lm ky b">provider</code>éƒ¨åˆ†ï¼Œæˆ‘ä»¬å†™äº†<code class="du lk ll lm ky b">stage: ${opt:stage, self:custom.defaultStage}</code>ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨è¿è¡Œå‘½ä»¤<code class="du lk ll lm ky b">serverless deploy</code>æ—¶ä¼ é€’stageçš„å€¼ï¼Œå¦åˆ™å®ƒå°†ä½¿ç”¨é»˜è®¤stageã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ å†™<code class="du lk ll lm ky b">serverless deploy --stage staging</code>ï¼Œé‚£ä¹ˆå®ƒå°†è¢«ç¿»è¯‘æˆ<code class="du lk ll lm ky b">stage: staging</code>ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œé˜…è¯»æ›´å¤šå…³äºAWSæä¾›è€…<a class="ae ks" href="https://www.serverless.com/framework/docs/providers/aws/guide/serverless.yml/" rel="noopener ugc nofollow" target="_blank">çš„å¯ç”¨é€‰é¡¹ã€‚æˆ‘åœ¨<code class="du lk ll lm ky b">provider</code>ä¸­ä½¿ç”¨çš„é”®éƒ½æ¥è‡ªé‚£ä¸ªæ–‡æ¡£ï¼Œæˆ‘ä»¬æ­£åœ¨ä½¿å®ƒåŠ¨æ€åŒ–ã€‚</a></p><ul class=""><li id="ef07" class="kb kc hi ih b ii ij im in iq mq iu mr iy ms jc ki kj kk kl bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬å°†æŠŠç°æœ‰åŠŸèƒ½éƒ¨ç½²åˆ°èˆå°ç¯å¢ƒä¸­ã€‚</li></ul><p id="9872" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘ä»¬éœ€è¦å†æ¬¡è¿è¡ŒAWS Configureæ¥ä¸ºæˆ‘ä»¬çš„<code class="du lk ll lm ky b">stageing</code>ç¯å¢ƒé…ç½®å‡­è¯ã€‚</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="20fb" class="lc je hi ky b fi ld le l lf lg">aws configure --profile staging</span></pre><p id="85d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ‚¨å¿…é¡»é…ç½®ä¸´æ—¶ç¯å¢ƒIAMç”¨æˆ·çš„Access_Key_Idå’ŒSecret_Access_Keyã€‚</p><ul class=""><li id="0b10" class="kb kc hi ih b ii ij im in iq mq iu mr iy ms jc ki kj kk kl bi translated">æœ€ç»ˆ<code class="du lk ll lm ky b">serverless.yml</code>æ–‡ä»¶:</li></ul><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="5084" class="lc je hi ky b fi ld le l lf lg">---<br/>service: harsh-test</span><span id="d102" class="lc je hi ky b fi mh le l lf lg">frameworkVersion: '2'</span><span id="dd6a" class="lc je hi ky b fi mh le l lf lg">custom:<br/>  defaultStage: dev</span><span id="6ee7" class="lc je hi ky b fi mh le l lf lg">  dev:<br/>    region: us-east-1<br/>    profile: dev</span><span id="63e2" class="lc je hi ky b fi mh le l lf lg">  staging:<br/>    region: ap-south-1<br/>    profile: staging</span><span id="ee51" class="lc je hi ky b fi mh le l lf lg">  pythonRequirements:<br/>    dockerizePip: non-linux</span><span id="9ef2" class="lc je hi ky b fi mh le l lf lg">provider:<br/>  name: aws<br/>  runtime: python3.8<br/>  stage: ${opt:stage, self:custom.defaultStage}<br/>  region: ${self:custom.${self:provider.stage}.region}<br/>  profile: ${opt:profile,self:custom.${self:provider.stage}.profile}</span><span id="56fa" class="lc je hi ky b fi mh le l lf lg">functions:<br/>  hello:<br/>    handler: handler.main</span><span id="b748" class="lc je hi ky b fi mh le l lf lg">plugins:<br/>  - serverless-python-requirements</span></pre><h1 id="fcfd" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">å°†æˆ‘ä»¬çš„åŠŸèƒ½éƒ¨ç½²åˆ°å¦ä¸€ä¸ªç¯å¢ƒ</h1><p id="8190" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq lh is it iu li iw ix iy lj ja jb jc hb bi translated">ä¸€æ—¦æ‚¨å®Œæˆäº†å¯¹<code class="du lk ll lm ky b">serverless.yml</code>æ–‡ä»¶çš„æ›´æ”¹ï¼Œæˆ‘ä»¬åªéœ€è¿è¡Œä¸€ä¸ªå‘½ä»¤ï¼Œå®ƒå°±ä¼šå°†æˆ‘ä»¬çš„åŠŸèƒ½éƒ¨ç½²åˆ°ç¯å¢ƒä¸­ã€‚</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="58e9" class="lc je hi ky b fi ld le l lf lg">serverless deploy --stage staging --profile staging</span></pre><p id="efba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ³¨æ„:â€”åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œæˆ‘çš„ç¯å¢ƒåç§°æ˜¯stagingï¼Œæˆ‘çš„AWSæ¦‚è¦æ–‡ä»¶åç§°ä¹Ÿæ˜¯stagingã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨æˆ‘ä»¬çš„å‘½ä»¤ä¸­ï¼Œé˜¶æ®µåå’Œæ¦‚è¦åæ˜¯ç›¸åŒçš„ã€‚åœ¨é…ç½®AWSå‡­è¯æ—¶ï¼Œ<code class="du lk ll lm ky b">--profile</code>å¯¹åº”äºAWSé…ç½®æ–‡ä»¶ã€‚</p></div></div>    
</body>
</html>