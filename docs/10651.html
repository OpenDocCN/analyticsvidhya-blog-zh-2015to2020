<html>
<head>
<title>Visualization of YouTube Trending using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python可视化YouTube趋势</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/visualization-of-us-youtube-trends-using-python-1aa64164f841?source=collection_archive---------2-----------------------#2020-10-28">https://medium.com/analytics-vidhya/visualization-of-us-youtube-trends-using-python-1aa64164f841?source=collection_archive---------2-----------------------#2020-10-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="dfbf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大家好！我用Python对美国YouTube趋势视频数据集做了一些探索性的数据分析和可视化。</p><p id="895d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">代码将在我所有步骤的相关描述之上。让我们看看我发现了什么！</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="68bc" class="jm jn hi ji b fi jo jp l jq jr">from google.colab import files<br/>uploaded = files.upload()</span><span id="081f" class="jm jn hi ji b fi js jp l jq jr">import pandas as pd<br/>import numpy as np<br/>import seaborn as sns<br/>import matplotlib.pyplot as plot</span><span id="23b9" class="jm jn hi ji b fi js jp l jq jr">df = pd.read_csv(‘US_youtube_trending_data.csv’)<br/>df.head(3)<br/>df.tail(3)<br/>df.shape</span></pre><p id="dcc1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我从上传数据集和导入库开始。在Kaggle上可以获得数据集。那么数据框就创建好了。您可以在图1中看到它的前3行。数据集有14798行和16列。换句话说，数据集有16个要素。</p><figure class="jd je jf jg fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es ju"><img src="../Images/3891bc3701971080ad5196132bb968ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cJLQydzXTnvSuzt45Mo7YQ.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">图1</figcaption></figure><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="1571" class="jm jn hi ji b fi jo jp l jq jr">from datetime import datetime</span><span id="53f2" class="jm jn hi ji b fi js jp l jq jr">df[‘trending_date’] = pd.to_datetime(df[‘trending_date’], format=”%Y-%m-%dT%H:%M”)<br/>df[‘publishedAt’] = pd.to_datetime(df[‘publishedAt’], format=”%Y-%m-%dT%H:%M”)<br/>df.head(3)</span></pre><p id="1f89" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如图1所示，发布日期和趋势日期列的格式不正确。为了避免这种复杂性，使用了上面的代码。现在，数据帧如图2所示。数据集的趋势日期为2020年8月12日至2020年10月24日，发布日期为2020年8月11日至2020年10月19日。</p><figure class="jd je jf jg fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es kg"><img src="../Images/ac3af6e378dcf81d72d9bd370d99db8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KO2mia1RjNu6gm6ZjmFWBQ.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">图2</figcaption></figure><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="426d" class="jm jn hi ji b fi jo jp l jq jr">df.nunique()</span></pre><p id="8976" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我之前提到的，有16个特征。数字不能显示所有的特征。上面的代码向我们展示了它的特性和有多少独特的变量。结果如图3所示。</p><figure class="jd je jf jg fd jv er es paragraph-image"><div class="er es kh"><img src="../Images/f2a11f6bd64e1a5e6268088c0fdad458.png" data-original-src="https://miro.medium.com/v2/resize:fit:332/format:webp/1*0XuYEVA_7HlOvISqHbxAzw.png"/></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">图3</figcaption></figure><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="ee76" class="jm jn hi ji b fi jo jp l jq jr">trends = df.drop([‘video_id’, ‘categoryId’, ‘comments_disabled’, ‘ratings_disabled’], axis=1)</span><span id="8f4f" class="jm jn hi ji b fi js jp l jq jr">correlation = trends.corr()<br/>fig = plot.figure(figsize=(10, 8))<br/>sns.heatmap(correlation, xticklabels = correlation.columns, yticklabels = correlation.columns, annot = True, cmap=’RdPu’, annot_kws={‘weight’:’bold’})<br/>plot.title('Heat Map')</span></pre><p id="9979" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们来观察一下相关性。为了找到合理的结果，我删除了一些分类列，即视频id、类别id、禁用评论和禁用评级。因此，我们可以使用热图来查看视图计数、喜欢、不喜欢和评论计数的相关性。我们可以看到，在系数为0.92的情况下，最高的相关性出现在视图计数和赞数之间，如图4所示。</p><figure class="jd je jf jg fd jv er es paragraph-image"><div class="er es ki"><img src="../Images/22a129cd7e2b9ddbc3074444150aa24b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1114/format:webp/1*gZvEQ9_7a3lt4HjRUbCPig.png"/></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">图4</figcaption></figure><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="3519" class="jm jn hi ji b fi jo jp l jq jr">colors = ["#CD4FDE"]<br/>sns.set_palette(sns.color_palette(colors))<br/>sns.lmplot(x = ‘likes’, y = ‘view_count’, data = trends)<br/>plot.title(‘View Count vs. Likes’)</span></pre><p id="e7c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在图5中可以更清楚地看到观看计数和喜欢之间的线性关系。</p><figure class="jd je jf jg fd jv er es paragraph-image"><div class="er es kj"><img src="../Images/14a58e13ef9f4b574e9625ac6d5e4c6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:730/format:webp/1*hwD_Ew5mAqmlg7V_rCUoZQ.png"/></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">图5</figcaption></figure><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="d13d" class="jm jn hi ji b fi jo jp l jq jr">sns.set(rc={‘figure.figsize’:(12,10)})<br/>ax= sns.lineplot(x=’trending_date’, y=’view_count’, data=df, ci=False, color=’#CE4DBD’)<br/>plot.title(‘View Count vs. Trending Date’)</span></pre><p id="5022" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们来看看浏览量和趋势日期之间的关系。用于此的线图。与所有趋势日期相比，8月15日之后的浏览量非常高。以及在9月15日之后观察到的最少观看计数。</p><figure class="jd je jf jg fd jv er es paragraph-image"><div class="er es kk"><img src="../Images/a6f58dba39beac2add073026ff5bf6bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*MmTdTQMh2LCPcXuLpf8uzA.png"/></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">图6</figcaption></figure><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="1b4f" class="jm jn hi ji b fi jo jp l jq jr">sns.set(rc={‘figure.figsize’:(8,5)})<br/>ax= sns.lineplot(x=’publishedAt’, y=’likes’, data=df, ci=False, color=’#CE4DBD’)<br/>plot.title(‘Likes vs. Published Date’)</span></pre><p id="73da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为喜欢和发布日期创建了一个类似的线图。所以，我们看到8月15日之后喜欢的人更多了。结果如图7所示。</p><figure class="jd je jf jg fd jv er es paragraph-image"><div class="er es kk"><img src="../Images/e18d890a06c877861618eb369a1dd035.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*L_-N1E_2PgBlCfRg2cSE-w.png"/></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">图7</figcaption></figure><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="21a2" class="jm jn hi ji b fi jo jp l jq jr">sns.set(rc={'figure.figsize':(8,10)})<br/>top10channel = df.groupby(["channelTitle"]).size().sort_values(ascending = False).head(10)<br/>sns.barplot(top10channel.values, top10channel.index.values, palette = "rocket")<br/>plot.title("Top 10 Trending Youtube Channels")</span></pre><p id="97c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后根据频率对频道进行排序。您可以在图8中看到前10大趋势频道。最热门的频道是NBA。</p><figure class="jd je jf jg fd jv er es paragraph-image"><div class="er es kl"><img src="../Images/3da60975f5be2ee07a47f1b7c5de95bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*tUHdqy6Q1Wl98nKwetcn_w.png"/></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">图8</figcaption></figure><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="f105" class="jm jn hi ji b fi jo jp l jq jr">sns.set(rc={'figure.figsize':(8,12)})<br/>by_channel = df.groupby("title").size().reset_index(name="view_count") \.sort_values("view_count", ascending=False).head(20)<br/>ax =sns.barplot(x="view_count", y="title", data=by_channel,palette=sns.cubehelix_palette(n_colors=22, reverse=True))<br/>plot.title('Most Viewed Videos')<br/>plot.xlabel("View")<br/>plot.ylabel("Video Title")</span></pre><p id="0e72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击率最高的视频如图9所示。首先，对视频标题进行分组。然后根据查看次数进行排序。所以，贾斯汀比伯——神圣的金融时报。《说唱歌手》可能是数据集中观看次数最多的视频。</p><figure class="jd je jf jg fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es km"><img src="../Images/c25d6ae7490b593c999064b362973a84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m2JMkIw22Iv5K4rPgnctqw.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">图9</figcaption></figure><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="93c9" class="jm jn hi ji b fi jo jp l jq jr">df.loc[df['categoryId'] ==1, 'category'] = 'Film &amp; Animation'<br/>df.loc[df['categoryId'] ==2, 'category'] = 'Autos &amp; Vehicles'<br/>df.loc[df['categoryId'] ==10, 'category'] = 'Music'<br/>df.loc[df['categoryId'] ==15, 'category'] = 'Pets &amp; Animals'<br/>df.loc[df['categoryId'] ==17, 'category'] = 'Sports'<br/>df.loc[df['categoryId'] ==19, 'category'] = 'Travel &amp; Events'<br/>df.loc[df['categoryId'] ==20, 'category'] = 'Gaming'<br/>df.loc[df['categoryId'] ==22, 'category'] = 'People &amp; Blogs'<br/>df.loc[df['categoryId'] ==23, 'category'] = 'Comedy'<br/>df.loc[df['categoryId'] ==24, 'category'] = 'Entertainment'<br/>df.loc[df['categoryId'] ==25, 'category'] = 'News &amp; Politics'<br/>df.loc[df['categoryId'] ==26, 'category'] = 'Howto &amp; Style'<br/>df.loc[df['categoryId'] ==27, 'category'] = 'Education'<br/>df.loc[df['categoryId'] ==28, 'category'] = 'Science &amp; Technology'<br/>df.loc[df['categoryId'] ==29, 'category'] = 'Nonprofits &amp; Activism'</span><span id="8616" class="jm jn hi ji b fi js jp l jq jr">df.head(5)</span></pre><p id="d807" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">众所周知，数据集没有类别名称。它只有类别id。因此，添加了类别列。“类别”列显示类别名称。匹配类别id和类别名称时，我接受了这个<a class="ae jt" href="https://techpostplus.com/youtube-video-categories-list-faqs-and-solutions/" rel="noopener ugc nofollow" target="_blank">网站</a>作为参考。这样，可以根据类别名称创建图表。您可以在图10中看到category列。</p><figure class="jd je jf jg fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es kn"><img src="../Images/4ef4b3d2a2b2d5d58b62b75e47045aed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NJx6tybfH1Iy9xU9sz9pDw.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">图10</figcaption></figure><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="ce66" class="jm jn hi ji b fi jo jp l jq jr">sns.set(rc={'figure.figsize':(10,10)})<br/>ax= sns.barplot(x='likes', y='category', data=df, ci=False, palette='magma')<br/>plot.title('Likes vs. Category')<br/>plot.xlabel("Likes")<br/>plot.ylabel("Category")</span></pre><p id="805a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们来看看哪个类别的赞最多。如图11所示,“音乐”类别最受欢迎，而“新闻和政治”类别最不受欢迎。</p><figure class="jd je jf jg fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es ko"><img src="../Images/5dcd3f6a95c60bd22cc2a60b4718e308.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uC7cmvz52lcNQi5SjjoHlw.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">图11</figcaption></figure><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="abe2" class="jm jn hi ji b fi jo jp l jq jr">sns.set(rc={‘figure.figsize’:(10,15)})<br/>ax= sns.barplot(x=’view_count’, y=’category’, data=df, ci=False, palette=’rocket’ , hue=’ratings_disabled’)</span></pre><p id="debe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在图12中，我们可以看到哪些类别被查看得更多。此外，我们可以看到类别的评级是否被禁用。紫色条显示视频分级未被禁用，而珊瑚色条显示视频分级被禁用。音乐类别的分级大多被禁用。</p><figure class="jd je jf jg fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es ko"><img src="../Images/9472adaefe048c0b73b6bfaf99a3f76c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-NtCOlnwTyAZo_KrffRjjw.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">图12</figcaption></figure><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="fab6" class="jm jn hi ji b fi jo jp l jq jr">sns.set(rc={‘figure.figsize’:(5,5)})<br/>sns.barplot(x=’comments_disabled’, y=’view_count’, data=df, palette=’magma’, ci= False)<br/>plot.title(‘View Count vs. Comments Disabled’)</span></pre><p id="fa16" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">图13显示了视图计数和禁用注释之间的关系。正如所见，禁用评论的视频有更多的浏览量。</p><figure class="jd je jf jg fd jv er es paragraph-image"><div class="er es kp"><img src="../Images/407cd05d2445e3779e74e962e0c7f9fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:674/format:webp/1*xcOJ7E5-MmyOkKBzk2laBQ.png"/></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">图13</figcaption></figure><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="c18e" class="jm jn hi ji b fi jo jp l jq jr">sns.set(rc={‘figure.figsize’:(10,6)})<br/>df.likes.plot(kind=’line’,color=’#93089A’, label = ‘Likes’, linestyle = ‘ --‘)<br/>df.dislikes.plot(color=’black’, label = ‘Dislikes’)<br/>plot.title(‘Likes vs. Dislikes’)<br/>plot.xlabel(‘Number of videos’)<br/>plot.ylabel(‘Likes and Dislikes’)</span></pre><p id="de09" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们通过视频数量来比较喜欢和不喜欢。紫色线表示喜欢，黑色线表示不喜欢。该图显示，热门视频获得的喜欢远远多于不喜欢。</p><figure class="jd je jf jg fd jv er es paragraph-image"><div class="er es kq"><img src="../Images/0999718f7715ac216024a64a31bef804.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*oe21qzVQazKtB3_tvnz4LQ.png"/></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">图14</figcaption></figure><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="7a01" class="jm jn hi ji b fi jo jp l jq jr">sns.set(rc={‘figure.figsize’:(20,8)})<br/>sns_ax = sns.boxplot(x=’category’,y=’comment_count’,data=df)<br/>category_boxplot = sns_ax.set_xticklabels(labels, rotation=90)<br/>category_boxplot = sns_ax.set(yscale=”log”)<br/>plot.title(‘Boxplot : Category vs. Comment’)<br/>plot.ylabel(‘comments’)</span></pre><p id="c399" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">箱线图有助于比较每个箱线图各自的中位数。此外，创建盒状图是识别异常值的最简单方法。在图15中，根据评论对类别进行了比较。你可以看到，最高的平均评论是在游戏类别。评论的最低均值在旅游&amp;事件类。音乐得到了最多的离群值。</p><figure class="jd je jf jg fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es kr"><img src="../Images/b9e68fc92921f3dc47e740ca00f3ca63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BzTHAzL46v4MvuLszpw63A.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx translated">图15</figcaption></figure></div></div>    
</body>
</html>