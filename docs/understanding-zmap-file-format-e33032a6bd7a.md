# 了解 ZMAP+文件格式

> 原文：<https://medium.com/analytics-vidhya/understanding-zmap-file-format-e33032a6bd7a?source=collection_archive---------23----------------------->

在这篇文章中，我想分享我对如何解释 ZMAP 文件格式的发现。

# ZMAP+ plus 文件格式到底是什么

ZMapPlus 是一种旧格式，用于以 ASCII 行格式存储网格数据，以便于传输和存储。它是石油和天然气勘探领域的应用程序中常用的读写格式。

它适用于网格数据。该格式还支持点和面数据，但每个文件中只允许一种数据类型。有一组特定的标题行，它们定义了数据在文件中的写入方式以及标题后面的实际数据。

下面是示例 zmap+文件。

```
!
! File created by DMBTools2.GridFileFormats.ZmapPlusFile
!
@GRID FILE, GRID, 4
20, -9999.0000000, , 7, 1
6, 4, 0, 200, 0, 300
0.0, 0.0, 0.0
@
       -9999.0000000       -9999.0000000           3.0000000          32.0000000
          88.0000000          13.0000000
       -9999.0000000          20.0000000           8.0000000          42.0000000
          75.0000000           5.0000000
           5.0000000         100.0000000          35.0000000          50.0000000
          27.0000000           1.0000000
           2.0000000          36.0000000          10.0000000           6.0000000
           9.0000000       -9999.0000000
```

文件中的注释用“！”表示在行首。因此，如果第一个字符是“！”这一行是注释。

ZMAP+中有两个部分，头部分和数据部分。让我们逐一解码。

标题部分从带有“@”符号的第一行开始。数据从最后一个“@”符号后的第一行开始，可能只有两个。

这是上面样品的标题。标题字段用逗号分隔。让我们逐行查看字段。

*   在第 1 行，有三个字段:

1.  第一个是用户定义的，但很多时候只是“网格文件”。
2.  第二，对于网格文件，必须是“grid”。
3.  第三个是一个整数，表示每条物理线上网格节点的数量。

*   在第 2 行，有五个字段:

1.  第一个字段是每个网格节点的字段宽度，存储在最后一个“@”下面的数据部分中(在标题部分下面)
2.  第二个字段是缺失或空数据值，因为它将在数据节中找到。
3.  第三个字段是用户定义的文本值，用于指示缺失值或空值。在我们的案例中是空白的。只有当字段编号 2 为空/缺失时，才会使用该值。
4.  第四个字段指示在数据节点中找不到小数点时要使用的小数位数。
5.  第五个字段指示文件数据部分中每行第一个网格节点的起始列。

*   在第 3 行，有六个字段:

1.  第一个字段是网格中的行数。
2.  第二个字段是网格中的列数。(因此，数据部分中值的总数必须等于行*列)
3.  第三个是最小网格 X 节点值。(x 分钟)
4.  第四个是最大网格 X 节点值。(x-max)
5.  第五个是最小网格 Y 节点值。(y 分钟)
6.  第六个是最大网格 Y 节点值。(y 轴最大值)

*   在第 4 行，有三个字段，它们总是“0，0，0.0，0.0”。(我不知道这样做的真正原因，但如果你知道，请在下面的评论区写下)

# 解码数据段

```
@
       -9999.0000000       -9999.0000000           3.0000000          32.0000000
          88.0000000          13.0000000
       -9999.0000000          20.0000000           8.0000000          42.0000000
          75.0000000           5.0000000
           5.0000000         100.0000000          35.0000000          50.0000000
          27.0000000           1.0000000
           2.0000000          36.0000000          10.0000000           6.0000000
           9.0000000       -9999.0000000
```

在最后一个标题行之后，有一个带有单个“@”的单行，其后的行是文件的数据段中的第一行数据。数据部分有固定的字段宽度，每个字段是一个网格节点，通常是右对齐的。

除了第一个标题行的第三个字段中定义的节点之外，任何物理行上都不会有更多的节点。(行号 1，字段号 3)

数据字段可能有也可能没有小数点。如果没有找到，则意味着小数位数是在第四个字段的第二个标题行中定义的。(行号 2，字段号 4)

数据节中的网格节点按列主顺序存储。即首先写入第一列数据，从网格的左上角开始。

例如，如果网格有 7 行 3 列，每行的节点数为 4，则数据部分的第一行将有 4 个节点，前四个网格节点从左上方向下。第二行将有三个节点，即第一列的最后三个节点。然后写下一列，四个节点然后三个。然后最后一列用同样的模式写。

# 谢谢大家！

我不得不绞尽脑汁来理解这种文件格式，所以我想我应该把这些都放在一个帖子里来分享我的发现。我希望这篇文章已经帮助您熟悉了 ZMAP+文件格式。欢迎批评！