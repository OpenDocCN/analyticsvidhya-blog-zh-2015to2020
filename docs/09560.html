<html>
<head>
<title>Journey of Apache Kafka &amp; Zookeeper Administrator ( Part 15 )</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">阿帕奇卡夫卡与动物园管理员之旅(十五)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/journey-of-apache-kafka-zookeeper-administrator-part-15-fdc2e043e3a2?source=collection_archive---------16-----------------------#2020-09-10">https://medium.com/analytics-vidhya/journey-of-apache-kafka-zookeeper-administrator-part-15-fdc2e043e3a2?source=collection_archive---------16-----------------------#2020-09-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="67ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2020年8月(Docker容器的初始支持)</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/116d93b6a1dc019c2db295433e2a0b13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kebysCUAymlfZYxboYi0wQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">CMAK的随机图片</figcaption></figure><p id="b233" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇文章中，我将分享关于# <strong class="ih hj"> CMAK </strong>在# <strong class="ih hj">容器</strong>中运行的事情。</p><p id="8763" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我使用<strong class="ih hj"> Docker运行时</strong>作为起点，但同样的东西可以扩展到<strong class="ih hj"> CoreOS </strong> / <strong class="ih hj"> LXC </strong> /等。</p><p id="c5de" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为<strong class="ih hj"> CMAK </strong>是一个独立的应用程序，并且不在本地机器中存储它的状态。这是集装箱的最佳选择。</p><p id="b1a7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有两种方法可以制作CMAK的形象。</p><ol class=""><li id="5c7e" class="jt ju hi ih b ii ij im in iq jv iu jw iy jx jc jy jz ka kb bi translated">从零开始建设CMAK。</li><li id="e504" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">使用预制的CMAK罐。</li></ol><p id="4950" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将分享关于从零开始建设CMAK的细节。</p><p id="f915" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们检查一下<a class="ae kh" href="https://github.com/116davinder/kafka-cluster-ansible/blob/master/docker/cmak/Dockerfile" rel="noopener ugc nofollow" target="_blank">文档文件</a></p><pre class="je jf jg jh fd ki kj kk kl aw km bi"><span id="c281" class="kn ko hi kj b fi kp kq l kr ks">FROM openjdk:11</span><span id="0f3a" class="kn ko hi kj b fi kt kq l kr ks">LABEL AUTHOR="Davinder Pal"<br/>LABEL AUTHOR_EMAIL="<a class="ae kh" href="mailto:dpsangwal@gmail.com" rel="noopener ugc nofollow" target="_blank">dpsangwal@gmail.com</a>"<br/>LABEL GITHUB="<a class="ae kh" href="https://github.com/116davinder" rel="noopener ugc nofollow" target="_blank">https://github.com/116davinder</a>"<br/>LABEL GITHUB_CMAK="<a class="ae kh" href="https://github.com/yahoo/CMAK" rel="noopener ugc nofollow" target="_blank">https://github.com/yahoo/CMAK</a>"</span><span id="79c7" class="kn ko hi kj b fi kt kq l kr ks">ENV ZK_HOSTS=localhost:2181<br/>ENV CMAK_VERSION=3.0.0.5</span><span id="3ef6" class="kn ko hi kj b fi kt kq l kr ks">RUN cd /tmp &amp;&amp; wget <a class="ae kh" href="https://github.com/yahoo/CMAK/archive/${CMAK_VERSION}.tar.gz" rel="noopener ugc nofollow" target="_blank">https://github.com/yahoo/CMAK/archive/${CMAK_VERSION}.tar.gz</a> &amp;&amp; \<br/>    tar -xzvf ${CMAK_VERSION}.tar.gz</span><span id="48b4" class="kn ko hi kj b fi kt kq l kr ks">RUN cd /tmp/CMAK-${CMAK_VERSION} &amp;&amp; \<br/>    ./sbt clean dist</span><span id="0e05" class="kn ko hi kj b fi kt kq l kr ks">RUN unzip -d / /tmp/CMAK-${CMAK_VERSION}/target/universal/cmak-${CMAK_VERSION}.zip</span><span id="4212" class="kn ko hi kj b fi kt kq l kr ks">RUN rm -fr /tmp/CMAK-${CMAK_VERSION} /tmp/${CMAK_VERSION}.tar.gz</span><span id="974f" class="kn ko hi kj b fi kt kq l kr ks">WORKDIR /cmak-${CMAK_VERSION}</span><span id="74ed" class="kn ko hi kj b fi kt kq l kr ks">EXPOSE 9000<br/>ENTRYPOINT ["./bin/cmak","-Dconfig.file=conf/application.conf"]</span></pre><ul class=""><li id="7d4f" class="jt ju hi ih b ii ij im in iq jv iu jw iy jx jc ku jz ka kb bi translated">我使用<strong class="ih hj"> OpenJDK 11 </strong>作为基础映像，因为CMAK建议使用<strong class="ih hj"> Java 11 </strong>。</li><li id="5f1f" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc ku jz ka kb bi translated">Zookeeper主机在运行时作为环境变量传递给容器。</li><li id="fd89" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc ku jz ka kb bi translated">不需要安装www.scala-sbt.org的SBT，因为CMAK已经在代码中包含了SBT二进制。</li><li id="58b7" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc ku jz ka kb bi translated">它目前不支持任何认证方法<strong class="ih hj"> Basic / LDAP </strong>。</li></ul></div><div class="ab cl kv kw gp kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hb hc hd he hf"><p id="697c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">旅程需要在这里休息一下，因为我还没有做下一部分的研究，所以很抱歉。(接下来是对Kubernetes或类似工具的支持)</p></div></div>    
</body>
</html>