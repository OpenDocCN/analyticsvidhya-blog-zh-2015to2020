<html>
<head>
<title>How to Scrape the Text Data??</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">文本数据怎么刮？？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-scrape-the-text-data-9332e7ad1d71?source=collection_archive---------12-----------------------#2019-11-19">https://medium.com/analytics-vidhya/how-to-scrape-the-text-data-9332e7ad1d71?source=collection_archive---------12-----------------------#2019-11-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="8dd6" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">从<strong class="ak"> <em class="ix">亚马逊网站</em> </strong>提取评论</h2></div><figure class="iz ja jb jc fd jd er es paragraph-image"><div class="er es iy"><img src="../Images/d70d7555269ca349e5a8794b263b3b71.png" data-original-src="https://miro.medium.com/v2/resize:fit:770/format:webp/1*tmEBLYUSiefobA6vC6kBwQ.jpeg"/></div><figcaption class="jg jh et er es ji jj bd b be z dx translated">网页抓取方法</figcaption></figure><p id="d93c" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">我们在日常生活中看到的所有数据都是以数字的形式存在的，这些数字是按行和列排列的。因此，数字形式的数据是现成的格式。但是，让我们假设当我们使用一个电子商务网站，任何社交媒体网站，如脸书，推特，Instagram，我们不能分析客户评论，因为所有这些评论都是文本格式的。</p><blockquote class="kg kh ki"><p id="3eaf" class="jk jl kj jm b jn jo ij jp jq jr im js kk ju jv jw kl jy jz ka km kc kd ke kf hb bi translated"><strong class="jm hj"> Python </strong>为我们从网站上抓取数据提供了一个很好的工具。Python使用<strong class="jm hj"> <em class="hi">请求</em> </strong>库从网页中检索内容。同样，我们使用<strong class="jm hj"> <em class="hi">美汤</em> </strong>来提取信息。让我们看看代码。</p></blockquote><figure class="iz ja jb jc fd jd er es paragraph-image"><div class="er es kn"><img src="../Images/581d66e122fd66445db2521e9d6a80c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*VTl-lxu1opNb34sxg4T2Wg.png"/></div></figure><p id="ecef" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">为了从网站上抓取特定的数据，我们需要提供带有基本URL的特定项目的搜索查询。</p><figure class="iz ja jb jc fd jd er es paragraph-image"><div class="er es ko"><img src="../Images/49a4662ad9a7487096afd34f9106d97a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/1*BzNQnr3u-cFFMDCKGbCJww.png"/></div></figure><p id="29f9" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">现在我们传递了URL，但是我们需要检查我们是否可以访问这个页面。因此，我们使用<em class="kj">search _ response . status _ code</em></p><figure class="iz ja jb jc fd jd er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es kp"><img src="../Images/2d1fd6458933f22ba2c61b0553cd11e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1hoX6dYUtXT4hPgzdFOD9A.png"/></div></div></figure><figure class="iz ja jb jc fd jd er es paragraph-image"><div class="er es ku"><img src="../Images/66bf07680719ffe05cada8864a41b0f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*bRef6yDWNUzBYUGK0JGRSQ.png"/></div></figure><p id="f187" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">HTML中的状态代码503表示<em class="kj">服务不可用。</em>所以，我们需要在search_response中传递头。在传递头部之后，我们得到的状态码是200，这是可以的。</p><figure class="iz ja jb jc fd jd er es paragraph-image"><div class="er es kv"><img src="../Images/3444885de6f1768b62ab80ed1a43c7b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*TsRlohX9SXsQbGVlVQ43Dw.png"/></div></figure><p id="9433" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">然后我们应该检查是否所有的搜索查询状态都是200。所以，我写了一个定义状态码的函数。</p><figure class="iz ja jb jc fd jd er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es kw"><img src="../Images/09122bb79a85a94d2b56fd2979f40d15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vnltbuT_vh5PTV4ZNY0DKw.png"/></div></div></figure><p id="db6a" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">因此，如果出现任何错误，上面的代码都会返回，正如我提到的status_code 200提供对页面的访问。</p><p id="e947" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">我选择的产品是男士Fastrack手表。那么，我们开始吧。</p><figure class="iz ja jb jc fd jd er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es kx"><img src="../Images/33317286388008cb91f7c309c62b8991.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZV1c-8UkjKvRGA89vg3ueQ.png"/></div></div></figure><p id="1d1e" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">上面的代码给出了我们正在搜索的产品的URL。在这里，soup.findALL指的是我们访问亚马逊网页时的产品名称。要获得span标签，我们需要访问网站，然后单击开发人员工具(F12)。现在，我们应该单击产品名称来获取所需的span标签。</p><figure class="iz ja jb jc fd jd er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es ky"><img src="../Images/798e4d0bbe4d15e37f1964fea726c1a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dwqPLEYyCP9K_bVfD4CERw.png"/></div></div><figcaption class="jg jh et er es ji jj bd b be z dx translated">开发人员工具(F12)</figcaption></figure><p id="97df" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">从上面的步骤中，我们执行了Fastrack的产品。现在，让我们分析ASIN代码。ASIN代表亚马逊标准识别号，是亚马逊分配的字母数字唯一标识符。</p><figure class="iz ja jb jc fd jd er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es kz"><img src="../Images/533bc56bfba91316ef3f8d3386efcef9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fk0TWymguC9cg8cKkCAMhA.png"/></div></div></figure><p id="9b4e" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">对于每一个数据，一个asin编号被分配给一个特定的产品，当我们打印时，分别检查asin代码，以验证我们是否得到了一个特定的产品。</p><p id="d1b3" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">现在我们已经得到了数据，让我们使用下面的函数来抓取评论。</p><figure class="iz ja jb jc fd jd er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es la"><img src="../Images/545836584455d166d955fc5ef767db52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*abTQ5qcr6STwIDiPXL36ww.png"/></div></div></figure><p id="a7ce" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">r1表示我们已经放弃的评论，然后打印所有评论。</p><figure class="iz ja jb jc fd jd er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es lb"><img src="../Images/9b7bb4d8840242496a204cb9889ef6e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*0oU5b8de_T9kyfG4xUUHVA.png"/></div></div></figure><p id="0e1b" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">现在再次导入熊猫并将r1加载到r中。为了验证所有的评论，将所有的评论转换为CSV文件以便进行验证。</p><figure class="iz ja jb jc fd jd er es paragraph-image"><div class="er es lc"><img src="../Images/2b538a57f967b93e2537530bb42322f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*8wuV6o-u-XM2eAPeFANXoA.png"/></div></figure><p id="4102" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">最后，我们通过搜集数据获得了对我们产品的所有评论，python帮助我们通过几个小时的努力完成了工作。我们可以在任何网站上使用这种方法将文本数据转换成结构化格式。</p><figure class="iz ja jb jc fd jd er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es ld"><img src="../Images/7e0219906eaac658a4c6c645695cc448.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UbNyFDTAHJZ-9kTKT4uxpQ.png"/></div></div><figcaption class="jg jh et er es ji jj bd b be z dx translated">亚马逊的评论</figcaption></figure><p id="5e2e" class="pw-post-body-paragraph jk jl hi jm b jn jo ij jp jq jr im js jt ju jv jw jx jy jz ka kb kc kd ke kf hb bi translated">这是结构化格式的输出，正如我前面提到的，我们可以将其转换为CSV文件。</p><h2 id="6981" class="le lf hi bd lg lh li lj lk ll lm ln lo jt lp lq lr jx ls lt lu kb lv lw lx ly bi translated"><strong class="ak">停止复印开始刮削</strong> …</h2></div></div>    
</body>
</html>