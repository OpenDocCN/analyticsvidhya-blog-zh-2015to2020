<html>
<head>
<title>Machine Learning Infrastructure</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">机器学习基础设施</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/machine-learning-infrastructure-baf074869ef?source=collection_archive---------24-----------------------#2020-01-19">https://medium.com/analytics-vidhya/machine-learning-infrastructure-baf074869ef?source=collection_archive---------24-----------------------#2020-01-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="08b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以，你有一个很棒的AI应用想法，但是现在呢？你如何训练它，建造它，让世界使用你的奇妙创造？</p><p id="80ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我们将讨论这一点。</p><p id="8097" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">机器学习生态系统中最受欢迎和谈论最多的工具之一是谷歌的Tensorflow。</p><h1 id="0b27" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated"><strong class="ak">什么是张量流？</strong></h1><blockquote class="kb kc kd"><p id="e6cb" class="if ig ke ih b ii ij ik il im in io ip kf ir is it kg iv iw ix kh iz ja jb jc hb bi translated">“TensorFlow是机器学习的端到端开源平台。它拥有一个由工具、库和社区资源组成的全面、灵活的生态系统，使研究人员能够推动ML的发展，开发人员能够轻松构建和部署ML驱动的应用。”</p></blockquote><p id="fed3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">翻译</strong>:张量流有各种不同的用途。目前，最受欢迎的用途之一是建立深度学习模型。虽然这是一个最初为大型数值计算创建的库，但谷歌开源了它，将其用作深度学习库。<br/>它为几种不同的语言提供了API，其中python是使用和支持最广泛的一种。</p><p id="bf33" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作为Tensorflow生态系统的一部分，Google还引入了Tensorflow服务，它允许您以protobuf格式导出模型，并创建grpc或rest API。</p><h1 id="fc6c" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated"><strong class="ak">积木</strong></h1><p id="6192" class="pw-post-body-paragraph if ig hi ih b ii ki ik il im kj io ip iq kk is it iu kl iw ix iy km ja jb jc hb bi translated">让我们首先深入了解Tensorflow服务的架构。以下是您应该很好理解的基础知识:</p><p id="3351" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> Servables </strong> <br/> Servables是TF服务生态系统中最小的单元。它们是用于执行不同计算的对象。这些物体有不同的大小、复杂程度和类型。出于本文的目的，我们将讨论servables是SavedModel格式的模型。</p><p id="831a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Servables也有不同的版本，这很好，因为我们可以进行A/B测试，尝试不同的神经架构和不同的算法。本质上，版本化的能力为我们打开了一个世界，在这个世界中，我们可以更有条理地构建、测试和微调我们的模型。</p><p id="4614" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在TF服务的世界里，模型其实只是服务对象。它通常包含算法、学习到的权重和查找表。</p><p id="5e35" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">加载器</strong> <br/>顾名思义，加载器帮助加载和卸载你的servables。也就是说，它们管理一个服务的整个生命周期。加载器独立于算法、数据和用例。</p><p id="17b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> Sources </strong> <br/> Sources用于查找servables。它们与加载器密切合作，sources为每个服务流提供一个加载器实例，以允许这些服务被加载器处理。</p><h1 id="e8a9" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated"><strong class="ak">TF服务的技术架构</strong></h1><figure class="ko kp kq kr fd ks er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es kn"><img src="../Images/8c3e25f297c4b9c129197db90d4b911a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BX3HpK5ZFhTKVK5XCru55w.jpeg"/></div></div></figure><p id="3b92" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">概括地说，会发生以下步骤:</p><p id="f146" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">源为模型或servable的特定版本创建一个加载器。来源提醒版本的管理者。<br/>管理器确定它是否安全(例如，有足够的资源)并给予加载器所需的资源，并允许加载器加载特定版本。<br/>然后，客户端可以向管理器请求特定版本的servable，或者请求默认的最新版本</p><h1 id="5364" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated"><strong class="ak">机器学习管道</strong></h1><p id="67a2" class="pw-post-body-paragraph if ig hi ih b ii ki ik il im kj io ip iq kk is it iu kl iw ix iy km ja jb jc hb bi translated">作为一种技术，机器学习有两个主要要求:数据和建模。<br/>可扩展的服务和产品需要能够自动化、可重复和可调试。本质上，在构建集成人工智能的产品的每个阶段都有不同的关注点。</p><p id="0c97" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了结合这些原则和关注点，我决定将管道分成两个主要管道:构建模型和服务模型。</p><figure class="ko kp kq kr fd ks er es paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="er es kz"><img src="../Images/fe45ea92b1f3339ad1444a11203ea740.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D2M0wVomzmSvBEKTds6UaQ.jpeg"/></div></div></figure><p id="0dff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据被收集并存储在S3桶中，或您选择的任何其他数据存储中。然后，数据科学家和其他模型构建者能够使用所需的或多或少的计算资源(例如使用P2实例)手动构建和训练模型，该模型被发布到另一个S3存储桶。</p><p id="ec47" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种方法的好处是双重的。首先，在构建模型的阶段，我们不需要担心基础设施。我们专注于构建模型。围绕存储和计算资源的决策被抽象化了。也就是说，我们可以假装我们只是在自己的本地机器上工作。</p><p id="4796" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其次，将模型发布到bucket意味着，我们能够发布和更新我们想要的模型的任意多个版本，而不必担心下游的客户端。也就是说，我们成为生产者，让服务管道去担心提醒客户关于变化的问题，或者根据需要提供模型的新版本。</p><p id="4998" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一个管道是模型的实际服务和使用。这里我们使用tensorflow架构，它管理模型的加载、卸载和服务。我们只需指定源代码(S3桶)并将生成的api包装在python web应用程序中。然后，客户端能够向这个新应用程序发出请求。</p><p id="24e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可能会问，为什么要把api封装在另一个应用中？嗯，我对这个特殊设置的关注点一直围绕着计算机视觉和图像处理。在处理图像时，我们必须采取一些步骤来预处理图像，并对结果进行后处理。通过将它包装在一个python应用程序中，我们获得了所有适用于图像和数据科学的python工具，同时还确保了使用我们模型的应用程序不会与python捆绑在一起。也就是说，我们的客户端可以是Node应用程序、Go应用程序或您选择的任何其他技术。</p><p id="a33f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是对我设计和实现的一个简单架构的高度解释。随着我继续构建，我目前正在添加几个主要内容:</p><p id="c5af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.运行在Kubernetes(二手Kubeflow)上<br/> 2。监控(工作进行中)<br/> 3。模型的自动重新训练</p></div></div>    
</body>
</html>