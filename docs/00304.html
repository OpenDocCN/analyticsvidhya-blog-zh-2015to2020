<html>
<head>
<title>How I scrapped Top 50 Movie recommendations from IMDB using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何使用Python从IMDB中删除前50部电影推荐</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/web-scraping-with-python-using-beautiful-soup-or-how-i-scrapped-top-50-movie-recommendations-from-94c49d9d8cf8?source=collection_archive---------1-----------------------#2019-03-20">https://medium.com/analytics-vidhya/web-scraping-with-python-using-beautiful-soup-or-how-i-scrapped-top-50-movie-recommendations-from-94c49d9d8cf8?source=collection_archive---------1-----------------------#2019-03-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="311a" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">或者一个非技术性的使用美汤进行网络抓取的指南。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/4f6ad2055d19e4de00c350018a648718.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KDCuwY3tm9Ll1Ygg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">丹尼斯·简斯在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><h1 id="0563" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">解释如何抓取网页的非技术性指南</h1><p id="74fb" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">真的很抱歉这个长标题，但是由于我从一个非技术背景的人到现在写脚本和代码，我觉得我应该做一些落后于某些人的事情。</p><p id="b284" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">我意识到作为一名开发人员，所有的焦点是写一个更好的代码，但是文档是非常必要的。</p><p id="2aba" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">在我开始向你解释做什么和如何做之前，让我们回到我们正在做什么，这样你就可以使用算法来完成类似的任务。</p><p id="c774" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">我的目标是<strong class="ki hj">使用任何库从python中的任何网站提取任何信息。</strong></p><p id="0799" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">我选择Beautiful soup是因为它是一个非常简单的库，只需要很少的代码就可以完成很多工作。</p><p id="66b4" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">美汤或Soup是一个可以一步步解析XML、JSON和HTML、HTML5内容的库。</p><p id="ad0f" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">我的意思是看看下面的HTML代码，用漂亮的汤下面的代码看起来像。</p><p id="3a24" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">www.imdb.com<a class="ae jn" href="http://www.imdb.com" rel="noopener ugc nofollow" target="_blank">的HTML代码</a></p><blockquote class="lh li lj"><p id="12ed" class="kg kh lk ki b kj lc ij kl km ld im ko ll le kr ks lm lf kv kw ln lg kz la lb hb bi translated"><tr><br/>&lt;TD&gt;&lt;input id = " title _ type-1 " type = " checkbox " name = " title _ type " value = " Feature "&gt;&lt;label for = " title _ type-1 "&gt;故事片&lt;/label&gt;&lt;/TD&gt;<br/>&lt;TD&gt;&lt;input id = " title _ type-2 " type = " checkbox " name = " title _ type " value = " TV &lt;label for = " title _ type-4 "&gt;电视剧集&lt;/label&gt;&lt;/TD&gt;<br/>&lt;/tr&gt;<br/>&lt;tr&gt;</tr></p><p id="035c" class="kg kh lk ki b kj lc ij kl km ld im ko ll le kr ks lm lf kv kw ln lg kz la lb hb bi translated"/><p id="2244" class="kg kh lk ki b kj lc ij kl km ld im ko ll le kr ks lm lf kv kw ln lg kz la lb hb bi translated"/></blockquote><p id="92ec" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">汤能为你制作出多么漂亮的html</p><blockquote class="lh li lj"><p id="ab2c" class="kg kh lk ki b kj lc ij kl km ld im ko ll le kr ks lm lf kv kw ln lg kz la lb hb bi translated">第一个tr标签</p><p id="0182" class="kg kh lk ki b kj lc ij kl km ld im ko ll le kr ks lm lf kv kw ln lg kz la lb hb bi translated">第一个td标签</p><p id="9777" class="kg kh lk ki b kj lc ij kl km ld im ko ll le kr ks lm lf kv kw ln lg kz la lb hb bi translated">{在第一个td内部，第一个输入函数，其属性id = " title _ type-1 " type = " checkbox " name = " title _ type " value = " feature " &gt;…。</p></blockquote><p id="9005" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">基本上使用漂亮的soup，其中xml或html具有重复的div标签、h3标签等模式，这样就可以使用循环来提取所有类型的模式。</p><p id="eb11" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">Beautiful soup使您能够使用html标记名、您给定的id = '名称、您给定的' class = '名称来访问html的每个元素。</p><p id="df51" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">你可以访问html页面上的每一个元素/内容/文本，并使用beautiful soup循环解析它。</p><p id="d78a" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">在这里阅读更多内容—<a class="ae jn" href="https://medium.freecodecamp.org/how-to-scrape-websites-with-python-and-beautifulsoup-5946935d93fe" rel="noopener ugc nofollow" target="_blank">https://medium . freecodecamp . org/how-to-scrape-websites-with-python-and-beautiful soup-5946935 d93fe</a></p><p id="d252" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">为了完成我的目标，我需要—</p><ol class=""><li id="53a9" class="lo lp hi ki b kj lc km ld kp lq kt lr kx ls lb lt lu lv lw bi translated">要废弃的网站</li><li id="c41d" class="lo lp hi ki b kj lx km ly kp lz kt ma kx mb lb lt lu lv lw bi translated">一个有解析器的库</li></ol><p id="9573" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">我选择的网站是IMDB.com，我想找到两个日期之间的前50个节目，查看这个页面</p><div class="mc md ez fb me mf"><a href="https://www.imdb.com/search/title?release_date=" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab dw"><div class="mh ab mi cl cj mj"><h2 class="bd hj fi z dy mk ea eb ml ed ef hh bi translated">IMDb:高级标题搜索</h2><div class="mm l"><h3 class="bd b fi z dy mk ea eb ml ed ef dx translated">IMDb的高级搜索允许你对数据库中的所有人和头衔进行极其强大的查询。查找…</h3></div><div class="mn l"><p class="bd b fp z dy mk ea eb ml ed ef dx translated">www.imdb.com</p></div></div><div class="mo l"><div class="mp l mq mr ms mo mt jh mf"/></div></div></a></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mu"><img src="../Images/a47ef29c01956c1a7413631336b13d65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/format:webp/1*wsU93Un3oCR3P9J0Ss0SbQ.png"/></div></figure><p id="08f4" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">IMDB有很多你可以在代码中使用的过滤器，比如<strong class="ki hj">流派——</strong>动作/冒险或者<strong class="ki hj">用户评级</strong>或者<strong class="ki hj">日期</strong>往返。</p><p id="e90a" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">我使用了日期过滤器，但是你也可以使用你自己的过滤器，我会告诉你如何使用页面上的任何东西。</p><p id="c98f" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">我将去掉两个日期的URL变成—</p><p id="b6e9" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated"><a class="ae jn" href="https://www.imdb.com/search/title?release_date=2018-03-01,2019-03-01" rel="noopener ugc nofollow" target="_blank">https://www.imdb.com/search/title?发布日期=2018-03-01，2019-03-01 </a></p><p id="dc2b" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">来自<a class="ae jn" href="https://www.imdb.com/search/title?release_date=2018-03-01,2019-03-01" rel="noopener ugc nofollow" target="_blank">https://www.imdb.com/search/title?</a></p><p id="d7ce" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">我只是将两个日期作为输入，并将其添加到下面代码中的URL中</p><pre class="iy iz ja jb fd mv mw mx my aw mz bi"><span id="b5c5" class="na jp hi mw b fi nb nc l nd ne">date_entry = input(‘Enter From date in YYYY-MM-DD format : ‘)<br/>year, month, day = map(int, date_entry.split(‘-’))<br/>date1 = datetime.date(year, month, day)</span><span id="8f7a" class="na jp hi mw b fi nf nc l nd ne">date_entry = input(‘Enter To date in YYYY-MM-DD format : ‘)<br/>year, month, day = map(int, date_entry.split(‘-’))<br/>date2 = datetime.date(year, month, day)</span></pre><p id="8299" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">使用日期1和日期2向用户请求日期2，然后将其添加到URL变量中，即</p><pre class="iy iz ja jb fd mv mw mx my aw mz bi"><span id="160d" class="na jp hi mw b fi nb nc l nd ne">URL=”<a class="ae jn" href="http://www.imdb.com/search/title?release_date=" rel="noopener ugc nofollow" target="_blank">http://www.imdb.com/search/title?release_date=</a>" + str(date1) + “,” + str(date2)</span></pre><p id="43cb" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">一旦我读到这一页—<a class="ae jn" href="https://www.imdb.com/search/title?release_date=2018-03-01,2019-03-01" rel="noopener ugc nofollow" target="_blank">https://www.imdb.com/search/title?release_date=2018-03-01，2019-03-01 </a></p><p id="b8dc" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">我现在有50个节目的列表，我想用美丽的汤来阅读。</p><pre class="iy iz ja jb fd mv mw mx my aw mz bi"><span id="b58a" class="na jp hi mw b fi nb nc l nd ne">r = requests.get(URL) <br/> <br/>soup = BeautifulSoup(r.content, ‘html5lib’)</span></pre><p id="8a95" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">我简单地使用<strong class="ki hj">调用整个网站。get </strong>其中url是添加了日期的URL。然后，我使用漂亮的soup库创建一个包含r.content的soup类型对象(http格式的我的网站数据，“html 5 lib”——我将用来解析imdb页面的解析器类型，对于xml可以是“lxml ”,对于json也是如此。)</p><p id="5fff" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">现在我们在我的解析器中有了所有来自网站的数据，接下来我需要定位列表在我的网站中的确切位置，这只是一个观察HTML标签模式的练习。</p><p id="bd12" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">就去https://www.imdb.com/search/title?吧release_date=2018-03-01，2019-03-01 点击检查并查看哪些确切的标签包含我试图获取的节目名称。</p><p id="f668" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">因为我已经做了这个练习，我将粘贴我的代码-</p><blockquote class="lh li lj"><p id="9723" class="kg kh lk ki b kj lc ij kl km ld im ko ll le kr ks lm lf kv kw ln lg kz la lb hb bi translated"><code class="du ng nh ni mw b">table = soup.find(‘div’, attrs = {‘class’:’lister-list’})</code></p></blockquote><p id="b0eb" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">这就形成了一个变量表，它类似于我的通用数据集数据的样本集数据，存储在soup对象中，也就是说，表在数据方面是soup的一部分。表中有来自div标签列表的数据，这是我们在这里作为参数传递的，这可以是任何其他标签，如<p>、</p><h3>等，也可以是任何其他类、id等。</h3></p><p id="3f7d" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">一旦我有了提取节目名称的样本数据，我就简单地创建一个循环，并要求该循环覆盖<strong class="ki hj">表</strong>中特定代码区域的内容。</p><pre class="iy iz ja jb fd mv mw mx my aw mz bi"><span id="a816" class="na jp hi mw b fi nb nc l nd ne">for row2 in table.findAll(‘h3’, attrs = {‘class’:’lister-item-header’}):<br/> print(row2.span.text,row2.a.text)</span></pre><p id="3fb2" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">FindAll类似于Ctrl + F，它使用类lister-item-header查找所有出现的h3标签，这些标签在节目的每个名称周围重复出现。</p><p id="34e3" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">一旦我的循环知道了要执行哪些标签，我就简单地让我的循环覆盖某些标签，如上面的<span>和<a> </a>来打印节目的排名和节目的名称。</span></p><p id="1e05" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">如果您想运行该脚本，可以从这里下载该脚本，</p><div class="mc md ez fb me mf"><a href="https://github.com/rmadan16/Beautiful-Soup-IMDB-top-50-shows-in-python" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab dw"><div class="mh ab mi cl cj mj"><h2 class="bd hj fi z dy mk ea eb ml ed ef hh bi translated">RMA Dan 16/Beautiful-Soup-IMD b-top-50-shows-in-python</h2><div class="mm l"><h3 class="bd b fi z dy mk ea eb ml ed ef dx translated">这个python程序将找出两个日期之间的前50个节目。该程序要求用户输入日期并打印前50名…</h3></div><div class="mn l"><p class="bd b fp z dy mk ea eb ml ed ef dx translated">github.com</p></div></div><div class="mo l"><div class="nj l mq mr ms mo mt jh mf"/></div></div></a></div><p id="0db7" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">你只需要python 3.x来运行它，或者你可以将代码复制粘贴到https://colab.research.google.com的笔记本上。</p><p id="cd81" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">愿原力与你同在。</p></div></div>    
</body>
</html>