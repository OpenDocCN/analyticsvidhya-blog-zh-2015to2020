<html>
<head>
<title>The S&amp;P 500, the Granddaddy of All Indicators — Let Me Show You How Easy It Is to Build One in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">标准普尔500，所有指标的鼻祖——让我向您展示用Python构建一个指标是多么容易</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/the-s-p-500-the-granddaddy-of-all-indicators-let-me-show-you-how-easy-it-is-to-build-one-in-af8a441a451d?source=collection_archive---------23-----------------------#2019-12-16">https://medium.com/analytics-vidhya/the-s-p-500-the-granddaddy-of-all-indicators-let-me-show-you-how-easy-it-is-to-build-one-in-af8a441a451d?source=collection_archive---------23-----------------------#2019-12-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/11beceec5395cc40add81ab6dae38f89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Fdr97eL6F4NWNDRJQ0qRg.png"/></div></div></figure><p id="e0be" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">最初发表于</em>【ViralML.com】<em class="jo"/></p><p id="3c55" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">标准普尔500是世界经济的晴雨表。如果我必须去一个荒岛，并且只能拿一个市场指数，这将是一个。</p><p id="127f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有很多方法可以将它分割成一个指标，可能是你的想象力所能承受的。让我们挑选价格和数量，让事情变得简单。你会看到当数量激增时，麻烦就来了。但是这些数据从何而来？</p><p id="ba4f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">标准普尔500由在美国交易所上市的500家最大的公司组成。每只股票都以其已发行股票的总市值来衡量。这一强大而有力的指数包含了美国80%的股票市值，其30%的收入来自美国以外。它是衡量所有其他金融产品的基准。</p><p id="6936" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这就是为什么它也是一个伟大的市场指标。</p><figure class="jq jr js jt fd ij"><div class="bz dy l di"><div class="ju jv l"/></div></figure><h1 id="0b19" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">用Python绘制标准普尔500</h1><p id="9c2f" class="pw-post-body-paragraph iq ir hi is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">没有什么比回答我们自己的市场问题更令人满意的了，使用Python很容易做到这一点。让我带你完成这个简单的练习。让我们从雅虎财经<a class="ae jp" href="https://finance.yahoo.com/quote/%5EGSPC" rel="noopener ugc nofollow" target="_blank">下载标准普尔500历史数据。他们已经允许我们免费下载这些数据很多年了——感谢雅虎！</a></p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kz"><img src="../Images/cea12de9546ca48ba11ae88eb69f660d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JBsA63oR3UwWvFDbPX37AQ.png"/></div></div></figure><p id="3486" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">点击“历史数据”链接。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kz"><img src="../Images/0e3e9effd8fc0056a8de80d32ce35cd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9RUaJUxlj_Wi6Td9BNpCwQ.png"/></div></div></figure><p id="2224" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后选择可用的最大时间段(是的，可以一直追溯到1927年)，点击蓝色的“应用”按钮，最后，单击“下载数据”链接。这将把所有数据下载到本地机器上的逗号分隔文件(CSV)中。</p><h1 id="2958" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">Python和Matplotlib</h1><p id="5e85" class="pw-post-body-paragraph iq ir hi is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">打开你信任的Jupyter笔记本，放入雅虎标准普尔500 CSV文件的同一个文件夹。调用包括“Matplotlib”在内的几个库。使用“熊猫”将数据加载到内存中，并稍微清理一下。</p><pre class="jq jr js jt fd la lb lc ld aw le bi"><span id="205c" class="lf jx hi lb b fi lg lh l li lj">%matplotlib inline<br/>import matplotlib<br/>import matplotlib.pyplot as plt<br/>import pandas as pd<br/>import numpy as np<br/>import datetime<br/>path_to_market_data = ‘/Users/manuel/Documents/financial-research/market-data/2019–12–06/’</span><span id="930c" class="lf jx hi lb b fi lk lh l li lj">sp500_df = pd.read_csv(path_to_market_data + ‘^GSPC.csv’)<br/>sp500_df[‘Date’] = pd.to_datetime(sp500_df[‘Date’])<br/>sp500_df = sp500_df.sort_values(‘Date’, ascending=True)<br/>sp500_df.head()</span><span id="af0d" class="lf jx hi lb b fi lk lh l li lj">fig, ax = plt.subplots(figsize=(16, 8))<br/>plt.plot(sp500_df[‘Date’], sp500_df[‘Adj Close’], color=’blue’)<br/>plt.title(‘S&amp;P 500’)<br/>plt.grid()<br/>plt.show()</span></pre><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/b4abbda0e236e60b4479498352d9bd01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oG-1DBStwXSDzsUlFRkJ4g.png"/></div></div></figure><p id="c79a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">很简单，对吧？让我们将卷添加到图表中，因为它包含在下载的数据中。是的，通过添加一个额外的y轴，使用Matplotlib仍然是微不足道的。</p><pre class="jq jr js jt fd la lb lc ld aw le bi"><span id="a5b8" class="lf jx hi lb b fi lg lh l li lj">sp500_df_tmp = sp500_df[sp500_df['Date'] &gt; '01-01-2006']</span><span id="134a" class="lf jx hi lb b fi lk lh l li lj">fig, ax = plt.subplots(figsize=(16, 8))<br/>plt.plot(sp500_df_tmp['Date'], sp500_df_tmp['Adj Close'], color='blue')<br/>ax.legend(loc='upper left', frameon=False)<br/>plt.title('S&amp;P 500')<br/>plt.grid()</span><span id="c844" class="lf jx hi lb b fi lk lh l li lj"># Get second axis<br/>ax2 = ax.twinx()<br/>plt.plot(sp500_df_tmp['Date'], <br/>         sp500_df_tmp['Volume'], label='Volume', color='red')<br/>ax2.legend(loc='lower right', frameon=False)</span><span id="9a29" class="lf jx hi lb b fi lk lh l li lj">plt.show()</span></pre><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/8cc5538be94bb31421dd8fd08e816a3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lqHwlOlzpZWrFcv30X0jAg.png"/></div></div></figure><p id="1a59" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">明白我说的“所有指标的鼻祖”是什么意思了吗？看看红色的交易量叠加图，它似乎在乱世中飙升。</p><h1 id="bfe0" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">用滚动平均来清理事物</h1><p id="a6cd" class="pw-post-body-paragraph iq ir hi is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">让我们通过应用滚动平均值来降低音量。这会让我们的眼睛看起来更舒服。滚动平均简单地按时间顺序遍历数据序列，并对一定量的过去数据进行平均，以计算一个新点。在Pandas中，使用“rolling()”函数很容易做到这一点。</p><pre class="jq jr js jt fd la lb lc ld aw le bi"><span id="6c7a" class="lf jx hi lb b fi lg lh l li lj">sp500_df_tmp = sp500_df[sp500_df['Date'] &gt; '01-01-2006']</span><span id="6096" class="lf jx hi lb b fi lk lh l li lj">fig, ax = plt.subplots(figsize=(16, 8))</span><span id="43aa" class="lf jx hi lb b fi lk lh l li lj"># ax.set_facecolor('xkcd:black')<br/>plt.plot(sp500_df_tmp['Date'], sp500_df_tmp['Adj Close'], linewidth=3, color='blue')</span><span id="a5d9" class="lf jx hi lb b fi lk lh l li lj">plt.title('S&amp;P 500')<br/>plt.legend(loc='upper left') <br/>plt.grid()</span><span id="57ca" class="lf jx hi lb b fi lk lh l li lj"># Get second axis<br/>ax2 = ax.twinx()<br/>plt.plot(sp500_df_tmp['Date'], <br/>         sp500_df_tmp['Volume'].rolling(window=50).mean().values, label='Volume', color='red')<br/>ax2.legend(loc='lower right', frameon=False)</span><span id="37d1" class="lf jx hi lb b fi lk lh l li lj">plt.show()</span></pre><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/cd69d3240c916c1a9fbe31278f617e29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e4kBxE6KvL_f6GJn_KYWiw.png"/></div></div></figure><p id="a3a5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">是的，我们可以看到数量的增加意味着变化和/或麻烦。这是有道理的，因为担心的人会抛售头寸，其他人会因为希勒的“非理性繁荣”效应而加入投机行列。可能有无数的原因和故事与这些高峰有关，但我们并不真正关心“为什么”，我们真正关心的只是“什么时候”。</p><h1 id="6ce1" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">最后</h1><p id="a631" class="pw-post-body-paragraph iq ir hi is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">就像我之前说的，没有什么比回答我们自己的市场问题更令人满意的了！</p><p id="adb4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对冲基金超级明星复兴科技公司就是这样发现其第一个模式的吗？谁知道呢，而且肯定不是用Python写的(Python很老，但Renaissance更老)。</p><p id="f6ff" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你喜欢这种方法，也就是“双手卷起袖子”的方法，可以看看我在维拉尔学校的免费入门课，只需注册订阅我的时事通讯，我就会免费发给你。</p><div class="lo lp ez fb lq lr"><a href="https://www.viralml.com/deal.html?t=39194" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab dw"><div class="lt ab lu cl cj lv"><h2 class="bd hj fi z dy lw ea eb lx ed ef hh bi translated">市场分析与Python -简介-学习找到自己的答案，基本面和…</h2><div class="ly l"><h3 class="bd b fi z dy lw ea eb lx ed ef dx translated">(即使您已经在我的时事通讯上，并且想要参加该课程，也只需再次注册并单击“是”即可…</h3></div><div class="lz l"><p class="bd b fp z dy lw ea eb lx ed ef dx translated">www.viralml.com</p></div></div><div class="ma l"><div class="mb l mc md me ma mf io lr"/></div></div></a></div><p id="a970" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你想了解更多，这里有“<a class="ae jp" href="https://www.viralml.com/applied-fundamental-market-analysis-tract.html" rel="noopener ugc nofollow" target="_blank">Python Track</a>应用基本面市场分析”的链接。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es mg"><img src="../Images/eee3d1f651f36df5e011b51e9295693b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/0*HWw1RVgQd3rzwu5N.png"/></div></figure><p id="0c62" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">关注我在ViralML.com<a class="ae jp" href="https://www.viralml.com/" rel="noopener ugc nofollow" target="_blank">和</a><a class="ae jp" href="https://amunategui.github.io/" rel="noopener ugc nofollow" target="_blank"> amunategui.github.io </a>的最新项目。</p><p id="70e8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">作者:"<a class="ae jp" href="https://amzn.to/2DERG3d" rel="noopener ugc nofollow" target="_blank">基本面指标小书:用Python进行实际市场分析:用Python、Jupyter笔记本和免费数据找到你的市场定位。</a>”</p><p id="0f96" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最初发表于<a class="ae jp" href="https://www.viralml.com/blog-content.html?l=The-SP-500-The-Granddaddy-of-All-Indicators.html" rel="noopener ugc nofollow" target="_blank">ViralML.com</a></p></div></div>    
</body>
</html>