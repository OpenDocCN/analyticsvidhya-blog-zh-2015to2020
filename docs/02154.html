<html>
<head>
<title>Statistical Visualization In R — 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">R — 2中的统计可视化</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/statistical-visualization-in-r-2-9e9070bcdecf?source=collection_archive---------11-----------------------#2019-12-03">https://medium.com/analytics-vidhya/statistical-visualization-in-r-2-9e9070bcdecf?source=collection_archive---------11-----------------------#2019-12-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><blockquote class="if ig ih"><p id="7cea" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">如果您还没有阅读R数据分析系列的第1部分，请仔细阅读下面的文章，其中我们讨论了将数据读入R -1 的许多方法。</p><p id="88f0" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">这篇文章的内容是我在IIM-B时代得到的几本书的要点。</p><p id="3d35" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">人人为我——贾里德·p·兰德</p><p id="2dfd" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">实用数据科学与R — Nina Zumel和John Mount</p><p id="e79b" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">文中讨论的所有代码块都以R markdown的形式出现在<a class="ae jh" href="https://github.com/viveksrinivasanss/Data_Science_Using_R" rel="noopener ugc nofollow" target="_blank"> Github链接</a>中。</p></blockquote><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es ji"><img src="../Images/012eb2fdf873d922290a75a5aec99c62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*b0kH3vD-XuaJJmqY.jpeg"/></div></div></figure><p id="876f" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi jx translated">分析中最困难的部分之一是制作高质量的支持图形。相反，一个好的图表是展示发现的最佳方式之一。幸运的是，R提供了优秀的绘图能力，无论是在基础安装中还是在像<code class="du kg kh ki kj b">lattice</code>和<code class="du kg kh ki kj b">ggplot2</code>这样的包中添加广告。在这篇文章中，我们将简要介绍一些使用基本图形的简单图形，然后展示它们在<code class="du kg kh ki kj b">ggplot2</code>中的对应部分。</p><p id="e696" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">统计中使用图形主要有两个原因:<code class="du kg kh ki kj b">Exploratory Data Analysis(EDA)</code>和呈现结果。两者都非常重要，但必须针对不同的受众。</p><h1 id="085c" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">基础图形</h1><p id="0ef3" class="pw-post-body-paragraph ii ij hi il b im li io ip iq lj is it ju lk iw ix jv ll ja jb jw lm je jf jg hb bi translated">当第一次用R绘图时，大多数人使用基本图形，然后当他们的需求变得更复杂时，再转向<code class="du kg kh ki kj b">ggplot2</code>。本节是为了完整性，因为基本图形是必需的，特别是在修改由其他函数生成的图时。</p><p id="1795" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">在我们继续之前，我们需要一些数据。即使按照十年前的标准，R中内置的大多数数据集都很小。具有讽刺意味的是，一个好的数据集(例如图表)包含在<code class="du kg kh ki kj b">ggplot2</code>中。为了访问它，必须首先安装并加载<code class="du kg kh ki kj b">ggplot2</code>。本文的目的是向您介绍一些使用<code class="du kg kh ki kj b">base graphics</code>和<code class="du kg kh ki kj b">ggplot2</code>的基本统计图。因此，我们将使用一个简单的数据集，更多地关注图表概念。</p><pre class="jj jk jl jm fd ln kj lo lp aw lq bi"><span id="cf98" class="lr kl hi kj b fi ls lt l lu lv">require(ggplot2)<br/>data(diamonds)<br/>head(diamonds)</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es lw"><img src="../Images/b4b1e0664b5d8cfcdd1695b403bdda84.png" data-original-src="https://miro.medium.com/v2/resize:fit:90/0*ZGwdK6Vqcn3gthOD"/></div></figure><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lx"><img src="../Images/5ace5870ed441ab31f3fe93996c902af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*e7oFQHfuscvEr8SW.png"/></div></div></figure><h1 id="a00f" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">基本直方图</h1><p id="1077" class="pw-post-body-paragraph ii ij hi il b im li io ip iq lj is it ju lk iw ix jv ll ja jb jw lm je jf jg hb bi translated">最常见的单变量数据图表是<code class="du kg kh ki kj b">histogram</code>。这显示了该变量的值的分布。创建<code class="du kg kh ki kj b">histogram</code>非常简单，如下图所示为<code class="du kg kh ki kj b">diamonds</code>中的克拉列。</p><pre class="jj jk jl jm fd ln kj lo lp aw lq bi"><span id="1f98" class="lr kl hi kj b fi ls lt l lu lv">hist(diamonds$carat, main="Carat Histogram", xlab="Carat")</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lx"><img src="../Images/04a844fe1abb25fedc194f00af5c645d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*nS_hI7cZDZ7C55Og.png"/></div></div></figure><p id="8293" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">这显示了<code class="du kg kh ki kj b">carat</code>大小的分布。注意标题是用<code class="du kg kh ki kj b">main</code>参数和带<code class="du kg kh ki kj b">xlab</code>参数的x轴标签设置的。直方图将数据分成多个桶，柱的高度代表落入每个桶的观察值的数量。</p><h1 id="6fb3" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">基础散点图</h1><p id="57f9" class="pw-post-body-paragraph ii ij hi il b im li io ip iq lj is it ju lk iw ix jv ll ja jb jw lm je jf jg hb bi translated">经常看到两个变量相互比较是好的；这就是使用<code class="du kg kh ki kj b">scatterplot</code>的地方。我们将使用<code class="du kg kh ki kj b">formula</code>符号绘制钻石的<code class="du kg kh ki kj b">price</code>与<code class="du kg kh ki kj b">carat</code>的关系。</p><pre class="jj jk jl jm fd ln kj lo lp aw lq bi"><span id="ee02" class="lr kl hi kj b fi ls lt l lu lv">plot(price ~ carat, data = diamonds)</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lx"><img src="../Images/88d8fbd09c1ca34c01d13872318c039f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rCdxQg_XaIYZH50Z.png"/></div></div></figure><p id="1e87" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">分隔<code class="du kg kh ki kj b">price</code>和<code class="du kg kh ki kj b">carat</code>的<code class="du kg kh ki kj b">~</code>表示我们正在对照<code class="du kg kh ki kj b">carat</code>查看<code class="du kg kh ki kj b">price</code>，其中<code class="du kg kh ki kj b">price</code>是<code class="du kg kh ki kj b">y</code>值，<code class="du kg kh ki kj b">carat</code>是<code class="du kg kh ki kj b">x</code>值。也可以通过简单地指定<code class="du kg kh ki kj b">x</code>和<code class="du kg kh ki kj b">y</code>变量而不用<code class="du kg kh ki kj b">formula</code>接口来构建散点图。</p><pre class="jj jk jl jm fd ln kj lo lp aw lq bi"><span id="9786" class="lr kl hi kj b fi ls lt l lu lv">plot(diamonds$carat, diamonds$price)</span></pre><h1 id="45f0" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">箱线图</h1><p id="f0a7" class="pw-post-body-paragraph ii ij hi il b im li io ip iq lj is it ju lk iw ix jv ll ja jb jw lm je jf jg hb bi translated"><code class="du kg kh ki kj b">Boxplots</code>通常是最先教给统计学学生的图表。它通常被用作一种统计机制来发现数据中的异常值。鉴于它们无处不在，了解它们是很重要的，谢天谢地R有盒图函数来帮助我们构建一个。</p><pre class="jj jk jl jm fd ln kj lo lp aw lq bi"><span id="c3e6" class="lr kl hi kj b fi ls lt l lu lv">boxplot(diamonds$carat)</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lx"><img src="../Images/783cce77141a8b630eba2428ac3a8f3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*B1EDCZcEkhYFzpw9.png"/></div></div></figure><p id="28f1" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated"><code class="du kg kh ki kj b">boxplot</code>背后的想法是，中间的粗线代表中间值，盒子由第一个和第三个<code class="du kg kh ki kj b">quartiles</code>界定。这是中间50%的数据——四分位数范围或IQR位于盒子中。线向两个方向延伸到1.5*IQR。然后，在此之外绘制异常点。</p><h1 id="fb29" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">ggplot2</h1><p id="6489" class="pw-post-body-paragraph ii ij hi il b im li io ip iq lj is it ju lk iw ix jv ll ja jb jw lm je jf jg hb bi translated">虽然R的基本图形非常强大和灵活，并且可以在很大程度上进行定制，但使用它们在大多数时候可能是劳动密集型的。构建了两个包- <code class="du kg kh ki kj b">ggplot2 </code>和<code class="du kg kh ki kj b">lattice</code>来简化绘图。现在，我们将重新创建之前的所有图表，并使用更多高级功能扩展示例。</p><p id="135a" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">起初,<code class="du kg kh ki kj b">ggplot2</code>语法更难掌握，但是努力是值得的。<code class="du kg kh ki kj b">ggplot2</code>的基本结构从<code class="du kg kh ki kj b">ggplot</code>函数开始，它最基本的应该是把数据作为它的第一个参数。初始化对象后，我们使用<code class="du kg kh ki kj b">+</code>符号添加图层。首先，我们只讨论<code class="du kg kh ki kj b">geometric</code>层，如<code class="du kg kh ki kj b">points</code>、<code class="du kg kh ki kj b">lines</code>和<code class="du kg kh ki kj b">histograms</code>。此外，层可以有不同的<code class="du kg kh ki kj b">aesthetic</code>映射，甚至不同的数据。</p><h1 id="a8ca" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">ggplot2直方图和密度</h1><p id="05e9" class="pw-post-body-paragraph ii ij hi il b im li io ip iq lj is it ju lk iw ix jv ll ja jb jw lm je jf jg hb bi translated">正如我们在上面使用<code class="du kg kh ki kj b">base</code>图形所做的那样，让我们使用<code class="du kg kh ki kj b">ggplot2</code>来绘制<code class="du kg kh ki kj b">diamonds</code>克拉的分布。这是使用如下所示的<code class="du kg kh ki kj b">ggplot</code>和<code class="du kg kh ki kj b">geom_histogram</code>构建的。</p><pre class="jj jk jl jm fd ln kj lo lp aw lq bi"><span id="1cf1" class="lr kl hi kj b fi ls lt l lu lv">ggplot(data = diamonds) + geom_histogram(aes(x=carat))</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lx"><img src="../Images/a00044c9d374c89413932b013c73103e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ISfr7gSl1O51zfL6.png"/></div></div></figure><p id="616c" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">类似的显示是<code class="du kg kh ki kj b">density</code>图，通过将<code class="du kg kh ki kj b">geom_histogram</code>更改为<code class="du kg kh ki kj b">geom_density</code>来完成。我们还使用<code class="du kg kh ki kj b">fill</code>参数指定填充图形的颜色。</p><pre class="jj jk jl jm fd ln kj lo lp aw lq bi"><span id="0fbf" class="lr kl hi kj b fi ls lt l lu lv">ggplot(data=diamonds) + geom_density(aes(x=carat) + fill="grey50")</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lx"><img src="../Images/aa7ea0e2ddf9cc5af574452976c74dfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*q4vOzNF1P3DjmnZA.png"/></div></div></figure><p id="093c" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated"><code class="du kg kh ki kj b">histogram</code>显示桶中的数据计数，而<code class="du kg kh ki kj b">density</code>图显示观察值落入滑动窗口的概率以及感兴趣的变量。两者之间的差别很微妙但很重要，因为<code class="du kg kh ki kj b">histograms</code>更多的是离散测量，而<code class="du kg kh ki kj b">density</code>图更多的是连续测量。</p><h1 id="ba6c" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">ggplot2散点图</h1><p id="71c2" class="pw-post-body-paragraph ii ij hi il b im li io ip iq lj is it ju lk iw ix jv ll ja jb jw lm je jf jg hb bi translated">在这里，我们不仅看到了制作<code class="du kg kh ki kj b">scatterplot</code>的<code class="du kg kh ki kj b">ggplot2</code>方法，还展示了ggplot2的一些功能。在接下来的几个例子中，我们将重复使用<code class="du kg kh ki kj b">ggplot(diamonds, aes(x=carat.y=price))</code>，这通常需要大量的冗余输入。幸运的是，我们可以将<code class="du kg kh ki kj b">ggplot </code>对象保存到变量中，稍后再添加图层。这里我们使用<code class="du kg kh ki kj b">color</code>列向<code class="du kg kh ki kj b">scatterplot</code>添加第三维。</p><pre class="jj jk jl jm fd ln kj lo lp aw lq bi"><span id="4f7f" class="lr kl hi kj b fi ls lt l lu lv">g &lt;- ggplot(diamonds, aes(x=carat,y=price))<br/>g + geom_point(aes(color=color))</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lx"><img src="../Images/29d8d8bd916af6e5a30ff8dc28789591.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lKppe4lKe51Drv78.png"/></div></div></figure><p id="f7e0" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">注意，我们在<code class="du kg kh ki kj b">aes</code>中设置了<code class="du kg kh ki kj b">color=color</code>。这是因为指定的颜色将由数据决定。另外，请注意，图例是自动生成的。</p><p id="38ae" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated"><code class="du kg kh ki kj b">ggplot2 </code>有能力制作刻面图，或小倍数，这是使用<code class="du kg kh ki kj b">facet_wrap</code>或<code class="du kg kh ki kj b">facet_grid</code>完成的。<code class="du kg kh ki kj b">facet_wrap</code>获取一个变量的级别，根据这些级别分割底层数据，为每组数据创建一个单独的窗格，并将其排列在图中。在这里，行和列的位置没有实际意义。</p><pre class="jj jk jl jm fd ln kj lo lp aw lq bi"><span id="0bdb" class="lr kl hi kj b fi ls lt l lu lv">g + geom_point(aes(color=color)) + facet_wrap(~color)</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lx"><img src="../Images/4be67e2667f88221b5a170f6ff78a537.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5LARJS_SX-ob6gYV.png"/></div></div></figure><p id="89ed" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">另一方面，<code class="du kg kh ki kj b">facet_grid</code>的行为类似，但是将变量的所有级别分配给行或列，如下所示。</p><pre class="jj jk jl jm fd ln kj lo lp aw lq bi"><span id="6e9f" class="lr kl hi kj b fi ls lt l lu lv">g + geom_point(aes(color=color)) + facet_grid(cut~clarity)</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lx"><img src="../Images/bf6f87c546ef34c34619ba2840999994.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KBxdGYM3I_X5YfF2.png"/></div></div></figure><p id="a3eb" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">在理解了如何阅读该图中的一个窗格后，我们可以很容易地理解所有的窗格并进行快速比较。</p><h1 id="ffa8" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">ggplot2盒图和小提琴图</h1><p id="2958" class="pw-post-body-paragraph ii ij hi il b im li io ip iq lj is it ju lk iw ix jv ll ja jb jw lm je jf jg hb bi translated">作为一个完整的图形包<code class="du kg kh ki kj b">ggplot2</code>提供<code class="du kg kh ki kj b">geom_boxplot</code>。即使它是一维的，使用一个<code class="du kg kh ki kj b">y</code>美学，也需要有一些<code class="du kg kh ki kj b">x</code>美学，所以我们将使用1。</p><pre class="jj jk jl jm fd ln kj lo lp aw lq bi"><span id="f5fe" class="lr kl hi kj b fi ls lt l lu lv">ggplot(diamonds,aes(y=carat,x=1)) + geom_boxplot()</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lx"><img src="../Images/eca0a0c9c4dd58208a8671801ba7063a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*f786BzF4jnSfON_h.png"/></div></div></figure><p id="d32a" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">这可以灵活地扩展到绘制多个<code class="du kg kh ki kj b">boxplots</code>，如下所示，一个变量对应一个级别。</p><pre class="jj jk jl jm fd ln kj lo lp aw lq bi"><span id="394e" class="lr kl hi kj b fi ls lt l lu lv">ggplot(diamonds,aes(y=carat,x=cut)) + geom_boxplot()</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lx"><img src="../Images/21809bf1b8651ce5173cf806b8b05afe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2LWUFbBTquo5je8m.png"/></div></div></figure><p id="f8ea" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">我们可以用<code class="du kg kh ki kj b">geom_violin</code>把<code class="du kg kh ki kj b">boxplots</code>换成<code class="du kg kh ki kj b">violin</code>图。<code class="du kg kh ki kj b">Violin</code>图与<code class="du kg kh ki kj b">boxplots</code>相似，除了方框是弯曲的，给人数据密度的感觉。</p><p id="2494" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">我们可以在同一个地块上添加多个图层(geoms ),如下所示。请注意，层的顺序很重要。在左边的图中，点在小提琴的下面，而在右边的图中，点在小提琴的上面。注意<code class="du kg kh ki kj b">gridExtra</code>包帮助你按行和列排列多个图形。</p><pre class="jj jk jl jm fd ln kj lo lp aw lq bi"><span id="9aed" class="lr kl hi kj b fi ls lt l lu lv">require(gridExtra)<br/>p1 &lt;- ggplot(diamonds,aes(y=carat,x=cut)) + geom_point() + geom_violin()<br/>p2 &lt;- ggplot(diamonds,aes(y=carat,x=cut)) + geom_violin() + geom_point()<br/>grid.arrange(p1, p2, ncol=2)</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lx"><img src="../Images/026601ff8e73c5b9ba54103a76132541.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DudQEQFYG8D6mjmk.png"/></div></div></figure><h1 id="bad9" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">ggplot2线图</h1><p id="4769" class="pw-post-body-paragraph ii ij hi il b im li io ip iq lj is it ju lk iw ix jv ll ja jb jw lm je jf jg hb bi translated"><code class="du kg kh ki kj b">Line</code>当一个变量具有一定的连续性时，通常使用图表，但这并不总是必要的，因为通常有一个很好的理由使用带有<code class="du kg kh ki kj b">categorical</code>数据的线。</p><p id="7938" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">让我们使用来自<code class="du kg kh ki kj b">ggplot2</code>包的<code class="du kg kh ki kj b">economics</code>数据创建一个简单的<code class="du kg kh ki kj b">line</code>图。</p><pre class="jj jk jl jm fd ln kj lo lp aw lq bi"><span id="0ffc" class="lr kl hi kj b fi ls lt l lu lv">data(economics)<br/>head(economics)<br/>ggplot(economics, aes(x=date,y=pop)) + geom_line()</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lx"><img src="../Images/9f33368577d90db43e9af82a6ebf2025.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cbK_RFcNfUbgfZFb.png"/></div></div></figure><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lx"><img src="../Images/fbc5099dc88c951a73df3fda01014f58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rsUcLFb7wfXbBnZL.png"/></div></div></figure><p id="4fef" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">折线图的一个常见任务是显示一年中多年的指标。为了准备<code class="du kg kh ki kj b">economics</code>数据，我们将使用<code class="du kg kh ki kj b">lubridate</code>包，它提供了操作日期的便利函数。我们需要创建两个新变量year和month。为了简化起见，我们将对数据进行子集划分，只包括从2000年开始的年份。</p><pre class="jj jk jl jm fd ln kj lo lp aw lq bi"><span id="bd9a" class="lr kl hi kj b fi ls lt l lu lv">require(lubridate)## Create month and year columns<br/>economics$year &lt;- year(economics$date)<br/>economics$month &lt;- month(economics$date)## Subset the data<br/>econ2000 &lt;- economics[which(economics$year&gt;=2000),]<br/>head(econ2000)</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lx"><img src="../Images/444b8537c35e1777f4db580a6d99d567.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lMOxnuxUEDwO5VlC.png"/></div></div></figure><p id="e9f7" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">现在，让我们创建描绘多年的折线图，如下所示。代码块的第一行创建了折线图，其中每一年都有单独的线条和颜色。请注意，我们将<code class="du kg kh ki kj b">year</code>转换为<code class="du kg kh ki kj b">factor</code>，这样它将获得一个离散的色标，然后该色标通过使用<code class="du kg kh ki kj b">scale_color_discrete(name=”Year”)</code>来命名。最后用<code class="du kg kh ki kj b">labs</code>设置<code class="du kg kh ki kj b">title</code>、<code class="du kg kh ki kj b">x-label</code>和<code class="du kg kh ki kj b">y-label</code>。所有这些部分放在一起，构建了一个专业外观、出版物质量的图表，如下所示。</p><pre class="jj jk jl jm fd ln kj lo lp aw lq bi"><span id="0718" class="lr kl hi kj b fi ls lt l lu lv">g &lt;- ggplot(econ2000,aes(x=month,y=pop))<br/>g &lt;- g + geom_line(aes(color=factor(year), group=year))<br/>g &lt;- g + scale_color_discrete(name=”Year”)<br/>g &lt;- g + labs(title="Population Growth", x="Month",y="Population")<br/>g</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lx"><img src="../Images/1be49cdb1c2889612dc5a183d1de605e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5SdjLad46UzBkEq-.png"/></div></div></figure><h1 id="fdac" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">主题</h1><p id="7cc5" class="pw-post-body-paragraph ii ij hi il b im li io ip iq lj is it ju lk iw ix jv ll ja jb jw lm je jf jg hb bi translated">一个伟大的<code class="du kg kh ki kj b">ggplot2</code>是能够使用主题来轻松地改变情节的方式。虽然从头开始构建主题可能是一项艰巨的任务，但<code class="du kg kh ki kj b">ggthemes</code> package已经将主题放在一起，以重新创建常用的图形样式。下面是几款<code class="du kg kh ki kj b">The Economist</code>、<code class="du kg kh ki kj b">Excel</code>、<code class="du kg kh ki kj b">Edward Tufte</code>和<code class="du kg kh ki kj b">The Wall Street Journal</code>。</p><pre class="jj jk jl jm fd ln kj lo lp aw lq bi"><span id="8288" class="lr kl hi kj b fi ls lt l lu lv">require(ggthemes)<br/>g2 &lt;- ggplot(diamonds, aes(x=carat,y=price)) + geom_point(aes(color=color))## Lets apply few themes<br/>p1 &lt;- g2 + theme_economist() + scale_color_economist()<br/>p2 &lt;- g2 + theme_excel() + scale_color_excel()<br/>p3 &lt;- g2 + theme_tufte()<br/>p4 &lt;- g2 + theme_wsj()grid.arrange(p1, p2, p3, p4, nrow=2, ncol=2)</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lx"><img src="../Images/89145d789766023a5831a0b39cc5a04b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*icWoW2hnlT6qkd4a.png"/></div></div></figure><p id="04c3" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">在本文中，我们看到了更好、更容易创建的基本图形和<code class="du kg kh ki kj b">ggplot2</code>。我们已经介绍了<code class="du kg kh ki kj b">histograms</code>、<code class="du kg kh ki kj b">scatterplots</code>、<code class="du kg kh ki kj b">boxplots</code>、<code class="du kg kh ki kj b">violinplots</code>、<code class="du kg kh ki kj b">line plots</code>和<code class="du kg kh ki kj b">density</code>图表。我们还研究了使用颜色和小倍数来区分数据。这只是对r中的<code class="du kg kh ki kj b">ggplot2 </code>和<code class="du kg kh ki kj b">base</code>绘图的简单介绍。在<code class="du kg kh ki kj b">ggplot2</code>中还有许多其他特性，如<code class="du kg kh ki kj b">jittering</code>、<code class="du kg kh ki kj b">stacking</code>、<code class="du kg kh ki kj b">dodging</code>和<code class="du kg kh ki kj b">alpha</code>，我们将在需要时在下面的文章中介绍。</p><p id="072d" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">在下一篇文章中，我们将看到R</p><p id="c4eb" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated"><a class="ae jh" rel="noopener" href="/@viveksrinivasan/group-manipulation-in-r-3-5554a0c1b544"> <em class="ik">组操纵在R — </em> </a> <em class="ik"> 3 </em></p><blockquote class="if ig ih"><p id="2d5e" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">一定要通过评论和分享文章来分享你的想法和支持。</p></blockquote></div></div>    
</body>
</html>