<html>
<head>
<title>News article virality prediction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">新闻文章病毒式预测</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/news-article-virality-prediction-c0c069de0c9c?source=collection_archive---------14-----------------------#2020-04-29">https://medium.com/analytics-vidhya/news-article-virality-prediction-c0c069de0c9c?source=collection_archive---------14-----------------------#2020-04-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="00b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">前两篇文章解释了信息检索和一些基本代码，它们将帮助您实现web抓取。本文重点研究新闻文章的提取和使用各种机器学习模型预测其病毒传播性。根据“文章获得的份额数”来衡量病毒传播性。</p><p id="a601" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您需要有关网页抓取的参考资料，请单击下面的链接。</p><ol class=""><li id="59a2" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><a class="ae jm" rel="noopener" href="/analytics-vidhya/information-retrieval-part-1-extracting-webpages-a9d0b715535d">信息检索第一部分:提取网页</a></li><li id="8180" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ji jj jk jl bi translated"><a class="ae jm" rel="noopener" href="/analytics-vidhya/information-retrieval-part-2-simplifying-the-information-53880b930ebd">信息检索第二部分:简化信息</a></li></ol><h1 id="bf13" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated"><strong class="ak"> 1。数据集:</strong></h1><p id="fdf8" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated"><a class="ae jm" href="http://archive.ics.uci.edu/ml/datasets/Online+News+Popularity" rel="noopener ugc nofollow" target="_blank">网络新闻流行度</a></p><h1 id="d39d" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated"><strong class="ak"> 2。使用的库</strong>:</h1><p id="97a6" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">newspaper3k，TextBlob，sklearn，numpy，requests，BeautifulSoup，nltk，pandas，seaborn，catboost，xgboost</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="5052" class="le jt hi la b fi lf lg l lh li">import numpy as np<br/>import pandas as pd<br/>import matplotlib.pyplot as plt<br/>from sklearn import preprocessing<br/>from sklearn.model_selection import train_test_split, GridSearchCV<br/>from sklearn.ensemble import RandomForestRegressor<br/>from catboost import CatBoostRegressor<br/>from sklearn.linear_model import RidgeCV<br/>from xgboost import XGBRegressor<br/>from xgboost import plot_importance<br/>from sklearn.metrics import mean_squared_error as RMSE<br/>from sklearn.decomposition import PCA<br/>import seaborn as sns<br/>from newspaper import Article<br/>import requests<br/>from bs4 import BeautifulSoup<br/>from textblob import TextBlob<br/>from nltk.tokenize import word_tokenize <br/>from nltk.corpus import stopwords</span></pre></div><div class="ab cl lj lk gp ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="hb hc hd he hf"><h1 id="1c50" class="js jt hi bd ju jv lq jx jy jz lr kb kc kd ls kf kg kh lt kj kk kl lu kn ko kp bi translated">3.使用数据集</h1><ul class=""><li id="8f0a" class="jd je hi ih b ii kq im kr iq lv iu lw iy lx jc ly jj jk jl bi translated">最初会采取一些预防措施。例如格式化列名、删除不必要的列</li><li id="2f8e" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ly jj jk jl bi translated">提取重要特征(下)</li></ul><p id="7076" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> XGBoost </strong>库提供了一种方法<strong class="ih hj"><em class="lz">plot _ importance()</em></strong>来计算数据集中包含的要素的重要性。以下是为UCI数据集创建的图。</p><figure class="kv kw kx ky fd mb er es paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="er es ma"><img src="../Images/f46febfeae9441d1eedaaf6f0f1b094b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*F45_G3DU7FHloYHl.png"/></div></div><figcaption class="mi mj et er es mk ml bd b be z dx translated">UCI在线新闻流行度数据集的plot_importance()图</figcaption></figure><p id="eb3a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">提取<strong class="ih hj">前20个</strong>特征，保持600 的<strong class="ih hj">阈值。我设法计算出了其中的9个，因为其余的描述不够清晰，无法表达。以下是计算的特征:</strong></p><ul class=""><li id="bbe8" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ly jj jk jl bi translated"><strong class="ih hj"> n_tokens_title </strong>:标题字数</li><li id="094e" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ly jj jk jl bi translated"><strong class="ih hj"> n_tokens_content: </strong>内容的字数</li><li id="d56b" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ly jj jk jl bi translated"><strong class="ih hj"> n_unique_tokens : </strong>内容中唯一单词的比率(#unique words / #words)</li><li id="424c" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ly jj jk jl bi translated"><strong class="ih hj"> average_token_length : </strong>内容中单词的平均长度</li><li id="50bf" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ly jj jk jl bi translated"><strong class="ih hj"> avg_positive_polarity : </strong>正词平均极性</li><li id="3326" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ly jj jk jl bi translated"><strong class="ih hj">n _ non _ stop _ unique _ tokens:</strong>内容中唯一不停词的比率</li><li id="d5d0" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ly jj jk jl bi translated"><strong class="ih hj"> num_hrefs : </strong>文章中的链接数</li><li id="4688" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ly jj jk jl bi translated"><strong class="ih hj">全局_主观性:</strong>文章内容的主观性</li><li id="3f39" class="jd je hi ih b ii jn im jo iq jp iu jq iy jr jc ly jj jk jl bi translated"><strong class="ih hj">全局情绪极性</strong>:文本情绪极性</li></ul><p id="394e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们简单介绍一下用于计算上述特征的两个库，<strong class="ih hj"> newspaper3k和TextBlob </strong>。</p><blockquote class="mm mn mo"><p id="cda2" class="if ig lz ih b ii ij ik il im in io ip mp ir is it mq iv iw ix mr iz ja jb jc hb bi translated">报纸是一个了不起的python库，用于提取和管理文章。</p></blockquote><p id="a69d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面的代码着重于从新闻文章URL中提取新闻，并访问各种特性，如文章的标题<strong class="ih hj">和内容文本</strong>等。</p><figure class="kv kw kx ky fd mb"><div class="bz dy l di"><div class="ms mt l"/></div></figure><blockquote class="mm mn mo"><p id="677f" class="if ig lz ih b ii ij ik il im in io ip mp ir is it mq iv iw ix mr iz ja jb jc hb bi translated">T <!-- --> extBlob是一个用于处理文本数据的Python库。它提供了一个简单的API，用于处理常见的自然语言处理(NLP)任务，如词性标注、名词短语提取、情感分析、分类、翻译等。</p></blockquote><p id="4e2b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">TextBlob库帮助我们计算单词和句子的极性和主观性。它的用法如下:</p><figure class="kv kw kx ky fd mb"><div class="bz dy l di"><div class="ms mt l"/></div></figure><p id="a94a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这样做了之后，使用<strong class="ih hj"> nltk.tokenize </strong>和<strong class="ih hj"> nltk.corpus.stopwords </strong>，可以很容易地计算出前6个特征。(GitHub资源库中的代码)。</p><p id="cd92" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，<strong class="ih hj"> num_hrefs </strong>用下面的方法计算:</p><figure class="kv kw kx ky fd mb"><div class="bz dy l di"><div class="ms mt l"/></div></figure></div><div class="ab cl lj lk gp ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="hb hc hd he hf"><h1 id="09ff" class="js jt hi bd ju jv lq jx jy jz lr kb kc kd ls kf kg kh lt kj kk kl lu kn ko kp bi translated">4.抓取新闻文章</h1><p id="966f" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">我从英国广播公司(BBC)的网站上搜集文章来收集新闻。</p><figure class="kv kw kx ky fd mb"><div class="bz dy l di"><div class="ms mt l"/></div></figure><p id="1e2c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，文章链接被收集到一个列表中。此外，然后使用newspaper3k库来抓取文章。</p><p id="8d46" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，为文章文本计算前一节中描述的9个特征<strong class="ih hj">并创建新闻文章特征的最终数据集。</strong></p><p id="3813" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意:上面定义的9个特征是从原始的UCI数据集中切分出来的，以匹配新闻文章数据集的特征。</strong></p><h1 id="f1f3" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">5.机器学习模型的测试</h1><p id="5ea6" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">UCI数据集被分成4个不同的模型进行训练和测试，如下所示:</p><ul class=""><li id="5c42" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ly jj jk jl bi translated">XGboost回归器</li></ul><figure class="kv kw kx ky fd mb er es paragraph-image"><div class="er es mu"><img src="../Images/3fe955f5f13b9954fa1fd742525e4ffd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/format:webp/1*QZcP0jpfSZN8r-622CqDgQ.png"/></div></figure><p id="5c2e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用了两个版本的XGBoost，一个使用<strong class="ih hj"> gblinear </strong>作为助推器，另一个使用<strong class="ih hj"> gbtree </strong>作为助推器。</p><p id="2c72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">多次运行的平均结果给出了gblinear的～10973和gbtree的～11430的RMSE。</p><ul class=""><li id="e795" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ly jj jk jl bi translated">随机森林回归量</li></ul><figure class="kv kw kx ky fd mb er es paragraph-image"><div class="er es mv"><img src="../Images/d7d9a29d9e1ec929769a70f6c7680d58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*l5ALJi1VxFpNWNh0nyjJng.png"/></div></figure><p id="d137" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">多次运行的平均结果给出了～10973的RMSE。</p><ul class=""><li id="b33d" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ly jj jk jl bi translated">RidgeCV线性回归器</li></ul><figure class="kv kw kx ky fd mb er es paragraph-image"><div class="er es mw"><img src="../Images/317824fb48b35d1ec172d07e18e2ac5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*NLmpgTm9klj0ML3E5JBQAQ.png"/></div></figure><p id="f99b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">多次运行的平均结果给出了～10952的RMSE。</p><ul class=""><li id="91e7" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ly jj jk jl bi translated">CatBoost</li></ul><figure class="kv kw kx ky fd mb er es paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="er es mx"><img src="../Images/10e5887eb829c63c6cfb2c2a9d17fed9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aQY4TvfAHEr71NdLdI9qWQ.png"/></div></div><figcaption class="mi mj et er es mk ml bd b be z dx translated">放大细节</figcaption></figure><p id="7ae4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">测试参数的平均结果是RMSE 11200。</p><p id="bcd9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">评估的最终结果如下所示</p><figure class="kv kw kx ky fd mb er es paragraph-image"><div class="er es my"><img src="../Images/1a3da10b184ab56efd4df29161fb058f.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/format:webp/1*bUs1qMXBm2dyB4Td3GyL_g.png"/></div></figure><p id="2bcc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">显然，RidgeCV是所有模特中表现最好的。然后，这些模型被用来预测新闻文章的份额。RidgeCV的结果平均是其他模型的10倍。由于无法获得真实的股份数量，我无法断定哪些是准确的。</p><p id="7a24" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢您的关注！</p><p id="4419" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是笔记本的链接。请随意评论任何可以改进的地方！:-)</p><p id="eb91" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">链接到GitHub知识库:</strong> <a class="ae jm" href="https://github.com/arnabsinha99/MListheroxx/tree/master/Mini_Projects/News%20Virality%20Prediction" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">新闻病毒式预测</strong> </a></p><p id="4106" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">链接到Kaggle笔记本:</strong> <a class="ae jm" href="https://www.kaggle.com/sherlocked99/news-virality-prediction?scriptVersionId=32865911#Converting-UCI-dataset" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">新闻病毒式预测</strong> </a></p></div></div>    
</body>
</html>