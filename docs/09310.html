<html>
<head>
<title>Analyze Your Texting Habits in the Apple Ecosystem</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">分析你在苹果生态系统中的短信习惯</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/analyze-your-texting-habits-using-sql-and-python-bd440de5d114?source=collection_archive---------13-----------------------#2020-09-01">https://medium.com/analytics-vidhya/analyze-your-texting-habits-using-sql-and-python-bd440de5d114?source=collection_archive---------13-----------------------#2020-09-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="1528" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用 Python 和 SQL 开发一个时间序列图来分析你在苹果生态系统中的短信流量和习惯。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/d810ba4c0a3b7e10a42aa519f4ed65dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*jBBWAymxi3eTHMBwjqDE2g.png"/></div></figure><h2 id="1099" class="jl jm hi bd jn jo jp jq jr js jt ju jv iq jw jx jy iu jz ka kb iy kc kd ke kf bi translated">介绍</h2><p id="d110" class="pw-post-body-paragraph if ig hi ih b ii kg ik il im kh io ip iq ki is it iu kj iw ix iy kk ja jb jc hb bi translated">寒假期间，我在 Mac 电脑上发现了两个隐藏的功能，这让我陷入了数据查询和分析的泥潭。我能够通过在终端中使用 SQLite3 来访问我的文本消息(即 iMessage)的隐藏数据库。这对我意义重大；我可以可视化和分析我的数据，以确定发短信的习惯，并希望了解自己的一些情况。</p><p id="0e4c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是我使用 SQLite3 和 Python 以及 seaborn 库得到下图的步骤。这是一次有趣的学习经历，我建议尝试一下。实际的代码文件可以在<a class="ae kl" href="https://github.com/jerall24/sql_analyze_imessage" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es km"><img src="../Images/2e9ffdbc7d88cc2872f0d0f0b5ecda81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r8ylqLaPukVnYna9LM8tkg.png"/></div></div></figure><p id="4be4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> Chat.db </strong></p><p id="1ce5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae kl" href="https://towardsdatascience.com/heres-how-you-can-access-your-entire-imessage-history-on-your-mac-f8878276c6e9" rel="noopener" target="_blank">这篇文章</a>介绍了 macOS 中隐藏的聊天数据库。但是有一个问题——数据库是不可访问的。你必须用别的东西来读取和操作数据。但是这个发现对于正在学习数据分析的人来说意义重大。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kr"><img src="../Images/309c6ac7d59458973360bbae75bd291d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZTytrpVJQECnb1Hy"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">chat.db 在 finder 中的位置</figcaption></figure><p id="1995" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个数据库保存了你发送和接收的所有文本的元数据。它会告诉你日期和时间(UTC)，你是否发送了它，文本的接收者，等等。那里有如此多的信息可以用来理解你如何与人互动。在实际尝试分析数据之前，您必须检索数据。</p><p id="cdc7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">端子</strong>中的 SQLite3</p><p id="8e35" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面链接的文章不仅介绍了如何访问数据库，还介绍了如何与之交互。作者使用了 SQLite3 和 Python 的组合来提取数据，并创建了熊猫数据框架。</p><p id="6cbc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个项目中，你将做一些类似的事情，但是看看你的整个历史。</p><h2 id="64f8" class="jl jm hi bd jn jo jp jq jr js jt ju jv iq jw jx jy iu jz ka kb iy kc kd ke kf bi translated"><strong class="ak">设置好一切</strong></h2><p id="6812" class="pw-post-body-paragraph if ig hi ih b ii kg ik il im kh io ip iq ki is it iu kj iw ix iy kk ja jb jc hb bi translated">首先要做的是打开终端。通过同时按下 CMD+ENTER 在 Mac 中搜索“终端”来访问终端。一旦你打开它，你就可以开始了。</p><p id="d356" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤 1:导航至所需文件夹</strong></p><p id="1bda" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本教程中，我们将从桌面工作，所以你不需要知道两个以上的命令。首先将所需的文件夹作为您的活动目录。您可以使用以下命令来完成此操作:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="721b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">出于本教程的考虑，您可以简单地使用下面的命令。这将使生成的电子表格保存到您的桌面上。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="95bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用以下命令列出当前文件夹中的文件。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="8975" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这篇<a class="ae kl" href="https://computers.tutsplus.com/tutorials/navigating-the-terminal-a-gentle-introduction--mac-3855" rel="noopener ugc nofollow" target="_blank">文章</a>很好地介绍了终端以及如何使用它——第 2 步和第 5 步给了你真正需要的所有信息。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ky"><img src="../Images/b4496e53580eeb331fd6d5330ae7394c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9cJKqmCINqp-YKCsziGo6g.png"/></div></div></figure><p id="ef75" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦成功导航，将活动目录更改为您想要工作的文件夹，您就可以开始访问数据库了。我们可以在不移动活动目录的情况下访问数据库。我们只需要在特定的数据库对象上运行 SQLite3。我们通过使用以下命令来实现这一点:</p><p id="f28d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第二步:运行 SQLite </strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="9a28" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:您可能会得到如下所示的错误，提示您无法打开数据库。按照以下步骤修复此错误。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ky"><img src="../Images/9255db19642b579e137ec2e745550ea9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pHguYTm2izSWUcWLO4yRhA.png"/></div></div></figure><p id="29fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您收到此错误，请给予终端完全磁盘访问权限。您可以通过导航到系统偏好设置&gt;安全与隐私&gt;隐私选项卡来完成此操作。一旦在隐私标签，找到完整的磁盘访问部分，并启用终端复选框。你需要打开左下角的锁才能进行更改。一旦你检查了接线盒，重新锁上锁，试着再运行一次代码。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kz"><img src="../Images/57f9fa460abd9fbde4df89c551813a99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CZTZTYSonhb6rMzZ"/></div></div></figure><p id="3aae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个命令应该是通用的，除非您移动了主目录或 chat.db 文件的位置。如果 SQLite3 成功启动，您可以编写代码来提取数据。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ky"><img src="../Images/f889df28955c6068678ade1d1b8fabe3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sf5AE8Y16UISLPGfIRrvEQ.png"/></div></div></figure><h2 id="351e" class="jl jm hi bd jn jo jp jq jr js jt ju jv iq jw jx jy iu jz ka kb iy kc kd ke kf bi translated"><strong class="ak">查询你的聊天记录</strong></h2><p id="66c7" class="pw-post-body-paragraph if ig hi ih b ii kg ik il im kh io ip iq ki is it iu kj iw ix iy kk ja jb jc hb bi translated">为了将查询导出到 excel 文档，我们必须准备一些代码。为此，请编写以下内容:</p><p id="08d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第三步:设置导出</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="281b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将<file_name>替换为您想要的文件名。上面的代码只是说将数据导出到一个. csv 文件，并打开文件头。文件将被保存到您运行 SQLite3 函数的文件夹中(对我们来说是桌面)。</file_name></p><p id="d779" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤 4:运行查询</strong></p><p id="8f96" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在将这段代码复制到终端来执行查询:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="a6ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的代码选择了四条信息:按月、年和收件人名称分组的文本计数，也就是你是否发送或接收了它。它将数据分组在一起，以便给出的信息显示您使用 iMessage 的每个月发送和接收的短信数量。</p><p id="f675" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Apple 将日期和时间存储为一个整数值，以 2001 年 1 月 1 日之后的秒数表示。为了获得正确的时间格式，请使用 strftime()和 datetime()函数。在这里阅读 strftime()和 datetime() <a class="ae kl" href="https://www.sqlite.org/lang_datefunc.html" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="84eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过运行这段代码，您将获得 excel 文档，其中包含您使用 iMessage 的每一年每月发送和接收的文本数量。</p><p id="2dd9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您的终端和桌面应该看起来像这样:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ky"><img src="../Images/8e40bd0b5f551d0902e90f261e1a9e48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tLY_he8SzwRw0mpZQ6JP7A.png"/></div></div></figure><h2 id="68b4" class="jl jm hi bd jn jo jp jq jr js jt ju jv iq jw jx jy iu jz ka kb iy kc kd ke kf bi translated">可视化您的数据</h2><p id="f4c9" class="pw-post-body-paragraph if ig hi ih b ii kg ik il im kh io ip iq ki is it iu kj iw ix iy kk ja jb jc hb bi translated">现在，您希望使用 Python 的 seaborn 库来可视化数据。我们将使用 Jupyter 笔记本进行安装，如果您没有，您可以在此处找到安装说明<a class="ae kl" href="https://jupyter.org/install" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="976e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你需要安装<a class="ae kl" href="https://seaborn.pydata.org/index.html" rel="noopener ugc nofollow" target="_blank"> seaborn </a>、<a class="ae kl" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"> matplotlib </a>、<a class="ae kl" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank"> pandas </a>和<a class="ae kl" href="https://numpy.org/" rel="noopener ugc nofollow" target="_blank"> numpy </a>库。如果不使用下面的命令。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="bdd7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在下载<a class="ae kl" href="https://github.com/jerall24/sql_analyze_imessage.git" rel="noopener ugc nofollow" target="_blank"> GitHub repo </a>中的 create _ text _ history _ chart . ipynb 并保存到你的桌面。之后，打开朱庇特笔记本。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="555a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">打开 create _ text _ history _ chart . ipynb:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kw kx l"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">访问 GitHub 上的完整文件</figcaption></figure><p id="0bba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">打开文件，单击运行&gt;运行所有单元。这将运行整个脚本并将图像保存到您的桌面。该图像将是您对下图的理解。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es km"><img src="../Images/2e9ffdbc7d88cc2872f0d0f0b5ecda81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r8ylqLaPukVnYna9LM8tkg.png"/></div></div></figure><h2 id="ee02" class="jl jm hi bd jn jo jp jq jr js jt ju jv iq jw jx jy iu jz ka kb iy kc kd ke kf bi translated"><strong class="ak">总结</strong></h2><p id="1a52" class="pw-post-body-paragraph if ig hi ih b ii kg ik il im kh io ip iq ki is it iu kj iw ix iy kk ja jb jc hb bi translated">通过阅读这些数据，你可以了解到许多有趣的事情。我证实了一些关于我发短信习惯的假设，并学到了一些新东西，例如，当我在谈恋爱时，我不会发那么多短信。数据库中保存了如此多的信息，可以用来了解自己。总的来说，这是一次很好的学习经历，让我了解了自己，也学到了一些非常有用的技能。我建议你自己尝试一下；有了这个指南，你应该不会花很长时间来完成这些措施。</p><p id="b106" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以扩展的几个领域是非 iMessage 通信平台，如 Facebook Messenger、WhatsApp、微信等。这些都对我们的交流方式产生了深远的影响，并将导致人们在形象上的差异。iMessage 群聊显示我收到的短信比发送的多，这也扭曲了结果。</p><p id="71d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请随时联系我讨论这个问题。我很想听听我如何改进这一点，发现更好的方法，或者我如何阅读这些数据。</p><p id="14c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">热雷米·阿拉德</p><p id="f4c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae kl" href="https://www.jeremieallard.com" rel="noopener ugc nofollow" target="_blank">JeremieAllard.com</a>|<a class="ae kl" href="https://www.linkedin.com/in/jeremiea/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae kl" href="http://github.com/jerall24" rel="noopener ugc nofollow" target="_blank">GitHub</a></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es la"><img src="../Images/95901a0db1c880f77359d1a7b140c4e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BJa5xmVx8XEMjBgCtlKp6Q.png"/></div></div></figure></div></div>    
</body>
</html>