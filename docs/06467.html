<html>
<head>
<title>How to generate a Chinese text-to-speech via iFLYTEK API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•é€šè¿‡ç§‘å¤§è®¯é£APIç”Ÿæˆä¸­æ–‡æ–‡æœ¬åˆ°è¯­éŸ³è½¬æ¢</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/analytics-vidhya/how-to-generate-a-chinese-text-to-speech-via-iflytek-api-db469b31f4a2?source=collection_archive---------22-----------------------#2020-05-23">https://medium.com/analytics-vidhya/how-to-generate-a-chinese-text-to-speech-via-iflytek-api-db469b31f4a2?source=collection_archive---------22-----------------------#2020-05-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="e210" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">å°†è¯­éŸ³æ·»åŠ åˆ°æ‚¨çš„ç½‘ç«™å’Œåº”ç”¨ç¨‹åºä¸­ï¼Œä½¿æ‚¨çš„å†…å®¹é¢å‘æ›´å¤šå—ä¼—ã€‚</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/235a5514e10b8b684e04b4396c847225.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xnA0J7rqH9WQQuLG"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">åŸƒé‡Œå…‹Â·æ™®åŠ³æ³½ç‰¹åœ¨<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šæ‹æ‘„çš„ç…§ç‰‡</figcaption></figure><p id="0ea9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">ç®€ä»‹</strong></p><p id="7c8e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">å»å¹´ï¼Œæˆ‘è¿›è¡Œäº†ä¸€ä¸ªé¡¹ç›®ï¼Œè¦æ±‚å°†ä¸­å›½å¤ä»£è¯—æ­Œä»æ–‡æœ¬è½¬æ¢ä¸ºéŸ³é¢‘ã€‚æ‰€ä»¥æˆ‘åœ¨ç½‘ä¸Šåšäº†ä¸€äº›è°ƒæŸ¥ï¼Œå‘ç°èƒ½æä¾›ä¸­æ–‡æ–‡å­—è½¬è¯­éŸ³æœåŠ¡çš„å…¬å¸å¹¶ä¸å¤šã€‚æœ€åï¼Œæˆ‘å‘ç°åœ¨githubä¸Šä½¿ç”¨ç§‘å¤§è®¯é£æºä»£ç å¯ä»¥æä¾›è¯­éŸ³è¯†åˆ«åŠŸèƒ½ï¼Œå¹¶å¯¹å…¶è¿›è¡Œäº†æ”¹è¿›ï¼Œä»¥æ»¡è¶³é¡¹ç›®çš„è¦æ±‚ã€‚</p><p id="5bea" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">githubä¸Šçš„åŸå§‹æºä»£ç é“¾æ¥:</p><div class="kk kl ez fb km kn"><a href="https://github.com/ssky87/iflytek_sdk_python" rel="noopener  ugc nofollow" target="_blank"><div class="ko ab dw"><div class="kp ab kq cl cj kr"><h2 class="bd hj fi z dy ks ea eb kt ed ef hh bi translated">ssky 87/ç§‘å¤§è®¯é£_sdk_python</h2><div class="ku l"><h3 class="bd b fi z dy ks ea eb kt ed ef dx">Pythonä½¿ç”¨ç§‘å¤§è®¯é£è¯­éŸ³è¯†åˆ«ã€è¯­éŸ³åˆæˆ. Contribute to ssky87/iflytek_sdk_python development by creating an account on GitHub.</h3></div><div class="kv l"><p class="bd b fp z dy ks ea eb kt ed ef dx translated">github.com</p></div></div><div class="kw l"><div class="kx l ky kz la kw lb jh kn"/></div></div></a></div><p id="d452" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">ä»€ä¹ˆæ˜¯æ–‡æœ¬åˆ°è¯­éŸ³è½¬æ¢ï¼Ÿ</p><p id="8838" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">æ–‡è¯­è½¬æ¢çš„ç¼©å†™æ˜¯(TTS)ï¼Œå³â€œä»æ–‡æœ¬åˆ°è¯­éŸ³â€ï¼Œæ˜¯äººæœºå¯¹è¯çš„ä¸€éƒ¨åˆ†ï¼Œè®©æœºå™¨è¯´è¯ã€‚æ–‡æœ¬åˆ°è¯­éŸ³(TTS)æ˜¯ä¸€ç§è‡ªç„¶è¯­è¨€å»ºæ¨¡è¿‡ç¨‹ï¼Œéœ€è¦å°†æ–‡æœ¬å•å…ƒè½¬æ¢ä¸ºè¯­éŸ³å•å…ƒä»¥è¿›è¡ŒéŸ³é¢‘å‘ˆç°ã€‚è¿™æ˜¯è¯­éŸ³å’Œæ–‡å­—çš„å¯¹ç«‹é¢ã€‚åœ¨è¿™ç§æŠ€æœ¯ä¸­ï¼Œä¸€ç§æŠ€æœ¯å¸æ”¶å£è¯­å•è¯å¹¶è¯•å›¾å°†å®ƒä»¬å‡†ç¡®åœ°è®°å½•ä¸ºæ–‡æœ¬ã€‚</p><p id="a4c6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†ä»€ä¹ˆæ˜¯æ–‡è¯­è½¬æ¢ï¼Œæˆ‘æ¥è§£é‡Šä¸€ä¸‹é¡¹ç›®çš„å‰æœŸå‡†å¤‡å’Œéœ€æ±‚ã€‚</p><p id="c8bc" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">å‡†å¤‡</strong>:</p><p id="16a6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">è¿™ä¸ªé¡¹ç›®æˆ‘ä¼šç”¨ubuntu 16.04ï¼Œå› ä¸ºæˆ‘å‘ç°ubuntu 18.04ä»¥ä¸Šçš„ç‰ˆæœ¬ä¸è¡Œã€‚ç¬¬äºŒæ˜¯éœ€è¦ä½¿ç”¨Python 2.7ç‰ˆæœ¬ã€‚å®‰è£…åï¼Œæˆ‘ä»¬é¦–å…ˆä¸‹è½½åŸå§‹çš„githubåŒ…ã€‚</p><pre class="iy iz ja jb fd lc ld le lf aw lg bi"><span id="b8e8" class="lh li hi ld b fi lj lk l ll lm">sysadmin@tts:~$ git clone <a class="ae jn" href="https://github.com/ssky87/iflytek_sdk_python.git" rel="noopener ugc nofollow" target="_blank">https://github.com/ssky87/iflytek_sdk_python.git</a><br/>Cloning into 'iflytek_sdk_python'...<br/>remote: Enumerating objects: 16, done.<br/>remote: Total 16 (delta 0), reused 0 (delta 0), pack-reused 16<br/>Unpacking objects: 100% (16/16), done.<br/>Checking connectivity... done.</span></pre><p id="18de" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">ç„¶åï¼Œæˆ‘ä»¬éœ€è¦æµ‹è¯•è½¯ä»¶åŒ…æ˜¯å¦è¿è¡Œæ­£ç¡®ã€‚</p><pre class="iy iz ja jb fd lc ld le lf aw lg bi"><span id="4b40" class="lh li hi ld b fi lj lk l ll lm">sysadmin@tts:~$ cd iflytek_sdk_python/<br/>sysadmin@tts:~/iflytek_sdk_python$ python tts.py<br/>INFO:root:æ­£åœ¨åˆæˆ [ç§‘å¤§è®¯é£è¿˜æ˜¯ä¸é”™çš„]...<br/>DEBUG:root:.<br/>DEBUG:root:.<br/>DEBUG:root:.<br/>DEBUG:root:.<br/>DEBUG:root:.<br/>INFO:root:åˆæˆå®Œæˆï¼<br/>sysadmin@tts:~/iflytek_sdk_python$ ls<br/>README.md  <strong class="ld hj">msc</strong>  stt.py  tts.py  <strong class="ld hj">x64</strong>  <strong class="ld hj">x86</strong>  xx.wav</span></pre><p id="79ff" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">æˆ‘ä»¬ä¼šçœ‹åˆ°ä¸€ä¸ªxx.wavï¼Œè¯•ç€ä¸‹è½½å¬ä¸€ä¸‹ï¼Œè¿™æ˜¯æˆ‘ä»¬åˆšåˆšç”Ÿæˆçš„è¯­éŸ³æ–‡ä»¶ã€‚ä½†æ˜¯å¯¹è¿™ä¸ªé¡¹ç›®æœ‰ä¸€äº›è¦æ±‚ï¼Œä¾‹å¦‚:</p><ol class=""><li id="4231" class="ln lo hi jq b jr js ju jv jx lp kb lq kf lr kj ls lt lu lv bi translated">éœ€è¦ä»æ–‡æœ¬æ–‡ä»¶ä¸­è¾“å…¥</li><li id="ed1f" class="ln lo hi jq b jr lw ju lx jx ly kb lz kf ma kj ls lt lu lv bi translated">æ¯æ®µéƒ½éœ€è¦åŠ ä¸Šåœé¡¿æ—¶é—´</li><li id="b479" class="ln lo hi jq b jr lw ju lx jx ly kb lz kf ma kj ls lt lu lv bi translated">ç”±äºè¾“å‡ºçš„wavæ–‡ä»¶å¤ªå¤§ï¼Œéœ€è¦è½¬æ¢æˆmp3</li></ol><p id="13c2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">åœ¨ç¡®è®¤éœ€æ±‚ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…ffmpegåŒ…æ¥å°†wavè½¬æ¢æˆmp3ã€‚</p><pre class="iy iz ja jb fd lc ld le lf aw lg bi"><span id="62ec" class="lh li hi ld b fi lj lk l ll lm">sysadmin@tts:~$ sudo add-apt-repository ppa:mc3man/trusty-media<br/>sysadmin@tts:~$ sudo apt-get update<br/>sysadmin@tts:~$ sudo apt-get install ffmpeg</span></pre><p id="8ff1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">ä¿®æ”¹æºä»£ç </strong></p><p id="3fd6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">å¯¼å…¥æ‰€éœ€çš„åº“</p><pre class="iy iz ja jb fd lc ld le lf aw lg bi"><span id="454b" class="lh li hi ld b fi lj lk l ll lm">#!/usr/bin/env python<br/># -*- coding: utf-8 -*-<br/>import os<br/>import sys<br/>reload(sys)<br/>sys.setdefaultencoding('utf-8')<br/><br/>import time<br/>from ctypes import *<br/>from io import BytesIO<br/>import wave<br/>import platform<br/>import logging<br/>from pydub import AudioSegment<br/>import shutil</span></pre><p id="a044" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">å°†æºä»£ç å°è£…åœ¨ç±»ä¸­</p><pre class="iy iz ja jb fd lc ld le lf aw lg bi"><span id="ea79" class="lh li hi ld b fi lj lk l ll lm">class convertTTS(object):<br/>    logging.basicConfig(level=logging.DEBUG)<br/>    BASEPATH=os.path.split(os.path.realpath(__file__))[0]<br/>    plat = platform.architecture()</span><span id="98de" class="lh li hi ld b fi mb lk l ll lm">    if plat[0] == '32bit':<br/>        cur = cdll.LoadLibrary(BASEPATH + '/x86/libmsc.so')<br/>    else:<br/>        cur = cdll.LoadLibrary(BASEPATH + '/x64/libmsc.so')</span><span id="986d" class="lh li hi ld b fi mb lk l ll lm">    def login(self,str_txt='appid = 539feff8, work_dir = .'):<br/>        MSPLogin = self.cur.MSPLogin<br/>        ret = 0<br/>        ret = MSPLogin(None,None,str_txt) <br/>  <br/>        if ret != 0:<br/>            logging.error("MSPLogin failed, error code: " + str(ret))<br/>        else:<br/>            logging.info("MSPLogin")<br/><br/>        return ret</span><span id="cc6f" class="lh li hi ld b fi mb lk l ll lm">    def logout(self):<br/>        MSPLogout = self.cur.MSPLogout<br/>        MSPLogout()<br/>        logging.info("MSPLogout")</span><span id="a486" class="lh li hi ld b fi mb lk l ll lm">    def saveWave(self, raw_data, _tmpFile = 'test.wav'):<br/>        f = wave.open(_tmpFile,'w')<br/>        f.setparams((1, 2, 16000, 262720, 'NONE', 'not compressed'))<br/>        f.writeframesraw(raw_data)<br/>        f.close()</span><span id="7711" class="lh li hi ld b fi mb lk l ll lm">        return _tmpFile</span><span id="de60" class="lh li hi ld b fi mb lk l ll lm">    def text_to_speech(self,src_text,voicename,speed,volumn,pitch,mp3,file_name=None):</span><span id="85bb" class="lh li hi ld b fi mb lk l ll lm">        logging.info (str(voicename) + " " + str(speed) + " " + str(volumn) + " " + str(pitch))<br/>        encoding = 'utf8'<br/>        sample_rate = 16000<br/>        rdn = 2<br/><br/>        QTTSSessionBegin = self.cur.QTTSSessionBegin<br/>        QTTSTextPut = self.cur.QTTSTextPut<br/>        QTTSAudioGet = self.cur.QTTSAudioGet<br/>        QTTSAudioGet.restype = c_void_p<br/>        QTTSSessionEnd = self.cur.QTTSSessionEnd<br/><br/>        ret_c = c_int(0)</span><span id="464e" class="lh li hi ld b fi mb lk l ll lm">session_begin_params="voice_name=" + str(voicename) + ",text_encoding=" + str(encoding) + ",sample_rate=" + str(sample_rate) +",speed=" + str(speed) + ",volume=" + str(volumn) + ",pitch=" + str(pitch) + ",rdn=" + str(rdn)<br/><br/>        sessionID = QTTSSessionBegin(session_begin_params, byref(ret_c))<br/><br/>	if ret_c.value != 0 :<br/>            logging.error("QTTSSessionBegin failed, error code: " + ret_c.value)<br/>            return</span><span id="3785" class="lh li hi ld b fi mb lk l ll lm">        ret = QTTSTextPut(sessionID, src_text, len(src_text),None)</span><span id="64a3" class="lh li hi ld b fi mb lk l ll lm">        if ret != 0:<br/>            logging.error("QTTSTextPut failed, error code: " + str(ret))<br/>            QTTSSessionEnd(sessionID, "TextPutError")<br/>            return</span><span id="a3b4" class="lh li hi ld b fi mb lk l ll lm">        logging.info("Synthesizing : " + (src_text))</span><span id="54f1" class="lh li hi ld b fi mb lk l ll lm">        audio_len = c_uint(0)<br/>	synth_status = c_int(0)<br/>        f = BytesIO()</span><span id="3618" class="lh li hi ld b fi mb lk l ll lm">        while True:<br/>            p = QTTSAudioGet(sessionID, byref(audio_len), byref(synth_status), byref(ret_c))</span><span id="8bab" class="lh li hi ld b fi mb lk l ll lm">        if ret_c.value != 0:<br/>	    logging.error("QTTSAudioGet failed, error code: " + str(ret_c))<br/>	    QTTSSessionEnd(sessionID, "AudioGetError")<br/>	    break</span><span id="b72b" class="lh li hi ld b fi mb lk l ll lm">        if p != None:<br/>	    buf = (c_char * audio_len.value).from_address(p)<br/>	    f.write(buf)</span><span id="0e4a" class="lh li hi ld b fi mb lk l ll lm">        if synth_status.value == 2 :<br/>	    self.saveWave(f.getvalue(),file_name)<br/>	    break</span><span id="e499" class="lh li hi ld b fi mb lk l ll lm">        time.sleep(1)</span><span id="ed67" class="lh li hi ld b fi mb lk l ll lm">        logging.info('Convert Completedï¼ã€' + file_name  + 'ã€‘\n')</span><span id="cf4e" class="lh li hi ld b fi mb lk l ll lm">        ret = QTTSSessionEnd(sessionID, "Normal")</span><span id="8e70" class="lh li hi ld b fi mb lk l ll lm">        if ret != 0:<br/>            logging.error("QTTSTextPut failed, error code: " + str(ret))</span></pre><p id="b302" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">å› ä¸ºæˆ‘ä»¬æ˜¯æŒ‰æ®µè½è½¬æ¢ï¼Œæ‰€ä»¥ä¼šç”Ÿæˆå¤šä¸ªæ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†è¿™äº›æ–‡ä»¶åˆå¹¶åœ¨ä¸€èµ·ã€‚</p><pre class="iy iz ja jb fd lc ld le lf aw lg bi"><span id="7dbb" class="lh li hi ld b fi lj lk l ll lm">def joinwav(fn, num_of_file):<br/>    infiles =[]<br/>    outfile = fn + ".wav"<br/><br/>    for num in range(1,num_of_file):<br/>	filename = fn + "-" + str(num) + ".wav"<br/>	logging.info(filename)<br/>	infiles.append (AudioSegment.from_wav(filename))<br/>	infiles.append (AudioSegment.from_wav("silentFix.wav"))<br/>	<br/>    combined = infiles[0]<br/>	<br/>    for wavcombined in infiles[1:]:<br/>	combined = combined.append(wavcombined)<br/><br/>    combined.export(outfile, format="wav")<br/>    logging.info(' Merge Completeï¼ã€' + outfile  + 'ã€‘')</span></pre><p id="1cdf" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å°†è¾“å‡ºçš„wavæ–‡ä»¶è½¬æ¢æˆmp3æ–‡ä»¶</p><pre class="iy iz ja jb fd lc ld le lf aw lg bi"><span id="9cfe" class="lh li hi ld b fi lj lk l ll lm">def wav2mp3(filename):<br/>    fn = os.path.splitext(filename)[0]<br/><br/>    AudioSegment.from_wav(filename).export(fn + ".mp3", format="mp3"<br/>    logging.info(' MP3 Output Completeï¼ã€' + fn + ".mp3"  + 'ã€‘')</span></pre><p id="2588" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">æ¸…é™¤æ–‡æœ¬æ–‡ä»¶ä¸­çš„ç‰¹æ®Šç¬¦å·</p><pre class="iy iz ja jb fd lc ld le lf aw lg bi"><span id="d35c" class="lh li hi ld b fi lj lk l ll lm">def clear(text):<br/>    text = text.replace('ã€Š', '')<br/>    text = text.replace('ã€‹','')<br/><br/>    return text</span></pre><p id="1a28" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">ç¨‹åºé€»è¾‘:ä½ å¯ä»¥åœ¨å‡½æ•°ä¸­æ›´æ”¹è¯­éŸ³åç§°ã€é€Ÿåº¦ã€éŸ³é‡ã€éŸ³è°ƒã€mp3ã€joinfileã€‚</p><p id="23b1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">voicename:é€šè¿‡è¯¥å‚æ•°è®¾ç½®ä¸åŒçš„è¯´è¯äººï¼Œå®ç°ä¸åŒçš„è¯­è¨€ã€æ–¹è¨€ã€æ€§åˆ«ç­‰ã€‚é»˜è®¤å‘è¨€è€…æ˜¯å°ç‡•</p><p id="aa2f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">é€Ÿåº¦:é€šè¿‡è¯¥å‚æ•°è®¾ç½®åˆæˆè¿”å›çš„éŸ³é¢‘çš„è¯­é€Ÿï¼Œå–å€¼èŒƒå›´:[0ï¼Œ100]ï¼Œé»˜è®¤:50</p><p id="df48" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">volumn:é€šè¿‡è¯¥å‚æ•°è®¾ç½®åˆæˆè¿”å›çš„éŸ³é¢‘çš„éŸ³é‡ï¼Œå–å€¼èŒƒå›´:[0ï¼Œ100]ï¼Œé»˜è®¤:50</p><p id="97cc" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">éŸ³é«˜:é€šè¿‡è¯¥å‚æ•°è®¾ç½®åˆæˆåçš„å›ä¼ éŸ³é¢‘çš„éŸ³è°ƒï¼Œå–å€¼èŒƒå›´:[0ï¼Œ100]ï¼Œé»˜è®¤ä¸º:50</p><p id="956f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">mp3:é€šè¿‡æ­¤å‚æ•°è®¾ç½®æ˜¯å¦è¾“å‡ºmp3æ–‡ä»¶</p><p id="66b7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">joinfile:é€šè¿‡è¯¥å‚æ•°è®¾ç½®æ˜¯å¦å°†å¤šä¸ªwavæ–‡ä»¶é“¾æ¥æˆä¸€ä¸ªæ–‡ä»¶</p><pre class="iy iz ja jb fd lc ld le lf aw lg bi"><span id="9ec1" class="lh li hi ld b fi lj lk l ll lm">def main(filename, voicename, speed, volumn, pitch, mp3, joinfile):<br/>    lineno = 0<br/><br/>    fh = open(filename)<br/>    fn = os.path.splitext(filename)[0]<br/><br/>    tts = convertTTS()<br/>    tts.login()<br/><br/>    while True:	<br/>        content = fh.readline()<br/><br/>	if (content &lt;&gt; ''):<br/>	    if not content.strip(): continue<br/>		content = clear(content)<br/><br/>		lineno = lineno + 1<br/>			<br/>		targetfilename = fn + "-" + str(lineno) + ".wav"<br/>						    tts.text_to_speech(content,voicename,speed,volumn,pitch,mp3,targetfilename)<br/><br/><br/>	if not content:<br/>	    break</span><span id="be45" class="lh li hi ld b fi mb lk l ll lm">    fh.close()<br/>	<br/>    tts.logout()<br/>	<br/>    if (1 == joinfile):<br/>	joinwav(fn, lineno+1)<br/><br/>	if (1 == mp3):<br/>            wav2mp3(fn + ".wav")</span><span id="3217" class="lh li hi ld b fi mb lk l ll lm">if __name__ == "__main__":<br/>    nfn = sys.argv[1]</span><span id="8271" class="lh li hi ld b fi mb lk l ll lm">    main(nfn, 'xiaoyan', 50, 50, 50, 1, 1)</span></pre><p id="70eb" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">ç°åœ¨ä½ å¯ä»¥åœ¨æ§åˆ¶å°è¿è¡Œç¨‹åºäº†ï¼ï¼ï¼</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mc"><img src="../Images/75b6467dc1b50706c9fb73dd3e0de014.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EK51s4fLJuKURdA5iZtuow.png"/></div></div></figure></div><div class="ab cl md me gp mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="hb hc hd he hf"><p id="1aa4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">æ„Ÿè°¢é˜…è¯»ï¼å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·é€šè¿‡é¼“æŒæ¥æ„Ÿè°¢ä½ çš„æ”¯æŒ(ğŸ‘ğŸ¼)æŒ‰é’®ï¼Œæˆ–è€…é€šè¿‡å…±äº«è¿™ç¯‡æ–‡ç« è®©å…¶ä»–äººå¯ä»¥æ‰¾åˆ°å®ƒã€‚</p><p id="eb70" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">æ‚¨ä¹Ÿå¯ä»¥åœ¨æˆ‘çš„<a class="ae jn" href="https://github.com/kindersham/100DaysDS/tree/master/iFLYTEK_TTS" rel="noopener ugc nofollow" target="_blank"> github </a>èµ„æºåº“ä¸­ä¸‹è½½æºä»£ç ã€‚æ„Ÿè°¢æ‚¨çš„é˜…è¯»æ—¶é—´ã€‚</p></div></div>    
</body>
</html>