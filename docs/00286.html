<html>
<head>
<title>Using Simulation to Estimate the Power of an A/B experiment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用模拟来估计A/B实验的功效</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/using-simulation-to-estimate-the-power-of-an-a-b-experiment-d38adf32b29c?source=collection_archive---------0-----------------------#2019-03-06">https://medium.com/analytics-vidhya/using-simulation-to-estimate-the-power-of-an-a-b-experiment-d38adf32b29c?source=collection_archive---------0-----------------------#2019-03-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/8f418fc1985dc07f2513ab61c9effa67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kJM_hcmtii-gpGs3"/></div></div></figure><p id="493f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi jo translated">实验的功效衡量实验检测特定替代假设的能力。例如，一家电子商务公司试图通过改变网站的设计来增加用户在网站上的时间。他们计划使用著名的双样本t检验。Power有助于回答以下问题:t检验是否能够通过拒绝零假设来检测平均时间花费的差异(如果存在)？</p><p id="4f94" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">零假设(H <em class="jx"> o): </em> </strong> <em class="jx"> </em>新设计对用户在网站上花费的时间没有影响</p><p id="e00a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">替代假设(H <em class="jx"> a): </em> </strong>新设计影响用户在网站上花费的时间</p><p id="6152" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当运行A/B实验来衡量网站重新设计的影响时，我们希望确保该实验至少有80%的功效。以下参数会影响实验的功效:</p><ol class=""><li id="5294" class="jy jz hi is b it iu ix iy jb ka jf kb jj kc jn kd ke kf kg bi translated"><strong class="is hj">样本量(n): </strong>样本量越大，标准差变得越小；并且使得采样分布更小。增加样本量，增加实验的功效</li><li id="38a6" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj">效应size(𝛿): </strong>零假设和替代假设的均值抽样分布之间的差异。效果尺寸越小，需要更多样本来检测预定义功率下的效果</li><li id="4168" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj"> Alpha(𝛼): </strong>显著性值通常设置为0.05；这是我们接受或拒绝零假设的分界点。使alpha变小需要更多的样本来检测预定义功率下的效果</li><li id="0b2c" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated"><strong class="is hj">β(β):</strong>幂定义为1-β</li></ol><p id="26d4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为什么在进行实验之前要进行功效分析来确定样本量？</p><ol class=""><li id="220d" class="jy jz hi is b it iu ix iy jb ka jf kb jj kc jn kd ke kf kg bi translated">进行实验既昂贵又耗时</li><li id="2ff1" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated">增加发现显著效果的机会</li><li id="330b" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated">增加复制实验中检测到的效果的机会</li></ol><p id="2672" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">例如，用户当前在网站上花费的时间呈正态分布，平均值为2分钟，标准差为1分钟。产品经理想设计一个实验来了解重新设计的网站是否有助于增加在网站上花费的时间。</p><p id="c541" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">该实验应该能够检测出花费在网站上的时间的最小5%的变化。对于像这样的测试，由于抽样分布是已知的，所以精确的解决方案可用于估计样本大小。在这里，我们将使用模拟方法来估计样本，并使用精确方法进行验证。</p><p id="5a83" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以下步骤估计双样本t检验的功效:</p><ol class=""><li id="277f" class="jy jz hi is b it iu ix iy jb ka jf kb jj kc jn kd ke kf kg bi translated">零𝒩(2,1)和替代假设𝒩(2+𝛿,1)下的模型的模拟数据</li><li id="7bce" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated">对样本进行t检验，并记录t检验是否拒绝零假设</li><li id="7e53" class="jy jz hi is b it kh ix ki jb kj jf kk jj kl jn kd ke kf kg bi translated">多次运行模拟，并计算t检验拒绝零假设的次数。该比例是对实验功效的估计</li></ol><h2 id="6d49" class="km kn hi bd ko kp kq kr ks kt ku kv kw jb kx ky kz jf la lb lc jj ld le lf lg bi translated">计算特定样本大小、效应大小和显著性水平的实验功效的代码:</h2><p id="f18c" class="pw-post-body-paragraph iq ir hi is b it lh iv iw ix li iz ja jb lj jd je jf lk jh ji jj ll jl jm jn hb bi translated">在样本量为1000的情况下，实验的功效为58.8%</p><figure class="lm ln lo lp fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><h2 id="eace" class="km kn hi bd ko kp kq kr ks kt ku kv kw jb kx ky kz jf la lb lc jj ld le lf lg bi translated">计算特定效应大小和显著性水平达到80%功效所需样本大小的代码:</h2><p id="0fcd" class="pw-post-body-paragraph iq ir hi is b it lh iv iw ix li iz ja jb lj jd je jf lk jh ji jj ll jl jm jn hb bi translated">基于模拟方法，我们需要1560个用户达到80%的功率，这与使用精确方法估计的样本大小非常匹配</p><figure class="lm ln lo lp fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><h2 id="3397" class="km kn hi bd ko kp kq kr ks kt ku kv kw jb kx ky kz jf la lb lc jj ld le lf lg bi translated">使用精确方法计算样本大小的代码:</h2><figure class="lm ln lo lp fd ij"><div class="bz dy l di"><div class="lq lr l"/></div></figure><h1 id="e0e1" class="ls kn hi bd ko lt lu lv ks lw lx ly kw lz ma mb kz mc md me lc mf mg mh lf mi bi translated">结论</h1><p id="e35a" class="pw-post-body-paragraph iq ir hi is b it lh iv iw ix li iz ja jb lj jd je jf lk jh ji jj ll jl jm jn hb bi translated">本文解释了当封闭形式的解决方案不存在时，如何使用模拟来估计A/B实验的功效。</p></div></div>    
</body>
</html>