<html>
<head>
<title>Movement With PhaserJS — Animated Motion (Before User Input)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用PhaserJS移动—动画运动(在用户输入之前)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/movement-with-phaserjs-animated-motion-before-user-input-474b4598ceee?source=collection_archive---------7-----------------------#2020-03-05">https://medium.com/analytics-vidhya/movement-with-phaserjs-animated-motion-before-user-input-474b4598ceee?source=collection_archive---------7-----------------------#2020-03-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d631b045ad03fa71be70136255de96cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ICjyqOHmNAvhRTWecqhiWQ.gif"/></div></div></figure><p id="4986" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你是从这篇文章开始学习Phaser，<strong class="is hj">请阅读我的第一篇关于最初设置你的程序的文章</strong>！否则，让我们让一些精灵动起来！</p><p id="f662" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如前所述，设置游戏是我们程序最重要的事情，好像我们不能，那么我们就不会有游戏(当然)；但是什么才是真正的游戏呢？嗯，会玩！这包括在屏幕上控制你的精灵，不管它是乒乓球拍还是马里奥。这意味着运动！</p><p id="92b4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们来看看Phaser开始使用移动的一些方法。这篇文章将讲述我们如何让物体在场景中移动(敌人、环境、NPC等)。这将发生在我们构建初始代码的同一个JS文件中。</p><h1 id="7620" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated"><strong class="ak">在我们的画布上移动</strong></h1><figure class="kn ko kp kq fd ij er es paragraph-image"><div class="er es km"><img src="../Images/cc57bc1ff7c40c222400949b14eb7259.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*mCd2zFdKcfU0HvAYkPsnIQ.gif"/></div></figure><p id="af3c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">好吧！我们已经学会了如何装载我们的资产，所以让我们移动他们。现在我们将不再使用<em class="kr">和</em>动作中的动画(即角色移动时的行走动画)，但是我们可以让精灵在画布上移动，这是一个很好的开始。那么我们应该把这些代码放在哪里呢？</p><p id="d6e4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">简单回顾一下，首先我们必须定义一个全局变量作为我们的sprite。这样，我们可以在不同的功能之间引用它。</p><blockquote class="ks kt ku"><p id="14d1" class="iq ir kr is b it iu iv iw ix iy iz ja kv jc jd je kw jg jh ji kx jk jl jm jn hb bi translated">记住全局变量在大型应用中是危险的。在开发过程中，它们会给你带来很多错误和混乱。为了这个小项目的简单性，我们只将它声明为一个全局变量。</p></blockquote><p id="38ad" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们已经定义了sprite，让我们创建一个函数来移动这些像素。我个人打算用一张Psyduck的图，但是你想用什么就用什么(只要记住Psyduck的规则，一切还是可以的)！</p><figure class="kn ko kp kq fd ij er es paragraph-image"><div class="er es ky"><img src="../Images/195cd8c9d68a9846224be35b7a314e40.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*_OndpZ1m4rAKS6WVBal_Jg.png"/></div></figure><p id="66a1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，我们要在Phaser程序中创建一个更新函数。这将从我们的preload函数和create函数中提取信息。让我们看看这些代码是什么样子的，看看它们是如何组合在一起的。</p><figure class="kn ko kp kq fd ij er es paragraph-image"><div class="er es kz"><img src="../Images/24b56c131a31d8b6eb3bc2f151939719.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/1*oPv3QBCb4_nJUXRYIRCraA.png"/></div></figure><p id="8a82" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们把它分解成简单的步骤！如果我们看看我们每个人的功能，我们可以理解这是多么简单。</p></div><div class="ab cl la lb gp lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hb hc hd he hf"><ol class=""><li id="d845" class="lh li hi is b it iu ix iy jb lj jf lk jj ll jn lm ln lo lp bi translated">这里的第一个函数是preload()。我们在之前的博客中了解到了这一点；这装载了我们的资产。在我的例子中，我在这里导入了一个Psyduck图像。在preload()中，我们调用this.load.image()，这是我们为添加一个带有两个参数的资产而设置的标准。现在我们的Psyduck将在程序启动时作为<em class="kr">加载</em>，并且能够被使用和传递给其他函数！两个参数中的第一个是我们引用的资产的名称(' psyduck ')，第二个参数是到实际图像的链接，因此我们可以在声明的psyduck调用中使用它。</li><li id="8340" class="lh li hi is b it lq ix lr jb ls jf lt jj lu jn lm ln lo lp bi translated">接下来，我们在create()方法中添加精灵。与preload()函数中的图像非常相似，create具有类似的语法，只是交换出一个单词。这一次我们称之为雪碧。这将需要三个参数，分别是(x，y，reference)。x和y是我们的精灵的像素位置；告诉程序把它们放在哪里。第三个参数，即引用参数，是从preload()函数中声明的名称中提取的。在这种情况下，我们引入标记为“psyduck”的资产。现在让我们将这个创建保存到一个变量中！</li><li id="8974" class="lh li hi is b it lq ix lr jb ls jf lt jj lu jn lm ln lo lp bi translated">第三，我们有update()函数，它将成为用户的输入，并告诉sprite要做什么。现在我们调用psyduck.x += 1。这是什么意思？嗯，我们告诉资产psyduck在x轴上移动，因此<strong class="is hj"> psyduck.x </strong>和<strong class="is hj"> += 1 </strong>。+= 1就像在JavaScript中一样，是一种每次调用update()就增加1的方法。</li></ol><blockquote class="ks kt ku"><p id="ef93" class="iq ir kr is b it iu iv iw ix iy iz ja kv jc jd je kw jg jh ji kx jk jl jm jn hb bi translated">顺便提一下:Phaser中的update()方法有两个参数，如果你想让它缺省运行的话，这两个参数是不必要的，但是如果你想的话，你也可以放入你自己的信息！更新可能需要的两个参数是<strong class="is hj">时间</strong>和<strong class="is hj">增量</strong>。时间是…嗯…你的游戏运行所经过的时间，以毫秒为单位。Delta是自上次update()方法调用以来的时间差。因为Phaser试图在一秒钟内调用60次update()方法，所以我们可以保留默认设置，这样就可以了。</p></blockquote><p id="ab4d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，我们有我们的配置，这是我们在上一篇文章中谈到的。既然你知道config是什么，我要说的就是在它里面添加update()函数(正如你看到的，它被添加到场景嵌套对象中)。</p></div><div class="ab cl la lb gp lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hb hc hd he hf"><p id="2cb6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">哇哦。激动人心。我们的化身在移动。</p><figure class="kn ko kp kq fd ij er es paragraph-image"><div class="er es lv"><img src="../Images/073cf8712174b406676fd7c44e587b9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:490/1*Fnz-BvE1wL-c7ZviVDSO0Q.gif"/></div></figure><p id="f12c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但我听到你心里在想，“但是罗格，我们没有把我们自己的输入放入雪碧，它们只是在自己移动！”这就是下一步！</p><figure class="kn ko kp kq fd ij er es paragraph-image"><div class="er es lw"><img src="../Images/2c4e45b86adfa016060da3c61a287a8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*rCWnaPskMlnjvu_pxL9BhQ.gif"/></div></figure><p id="ae89" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">加入我们的下一篇文章，看看用户输入是如何让游戏变得生动的！！</p></div></div>    
</body>
</html>