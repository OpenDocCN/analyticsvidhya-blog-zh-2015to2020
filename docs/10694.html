<html>
<head>
<title>Classifying Political Social Media Posts with Natural Language Processing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用自然语言处理对政治社交媒体帖子进行分类</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/classifying-political-social-media-posts-with-natural-language-processing-5b92c9e3ac67?source=collection_archive---------11-----------------------#2020-10-30">https://medium.com/analytics-vidhya/classifying-political-social-media-posts-with-natural-language-processing-5b92c9e3ac67?source=collection_archive---------11-----------------------#2020-10-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/df506974f5132cc37bf3658d009b2203.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CDnwGQreKpdmrOylIrF0sA.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">由<a class="ae iu" href="https://unsplash.com/@mrthetrain?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Joshua Hoehne </a>在<a class="ae iu" href="https://unsplash.com/s/photos/twitter?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="1cf1" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">介绍</h1><p id="ee12" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">对社交媒体帖子的分析可能会像投票记录或传统投票一样告诉我们用户的政治观点。在本文中，我将解释如何在自然语言处理的帮助下，构建分类器来预测政治帖子的党派偏见和信息。这个项目使用的数据可以在<a class="ae iu" href="https://www.kaggle.com/crowdflower/political-social-media-posts" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>上获得，其中包含了 2015 年收集的 5000 篇来自政客的脸书和推特帖子。该项目的完整代码可在<a class="ae iu" href="https://github.com/AvonleaFisher/dsc-mod-4-project-v2-1-onl01-dtsc-ft-070620" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上获得。</p><h1 id="6265" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">探索数据</h1><p id="edc1" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">加载数据后，我绘制了两个感兴趣的因变量的计数值:</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kr"><img src="../Images/eb2b466e398ddd32ab0fc52716c91457.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vv88WN9EzhnpFUOpGko2IQ.png"/></div></div></figure><p id="b885" class="pw-post-body-paragraph jt ju hi jv b jw kw jy jz ka kx kc kd ke ky kg kh ki kz kk kl km la ko kp kq hb bi translated">正如这些图所示，大多数帖子都被标为中性。最常见的信息类别是“政策”、“个人”、“支持”和“信息”下面的单词云提供了中立和党派帖子中最常见的单词的信息视觉。</p><h2 id="371e" class="lb iw hi bd ix lc ld le jb lf lg lh jf ke li lj jj ki lk ll jn km lm ln jr lo bi translated">党派职位</h2><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/e33755fdfad98d9e61c07bfc868d7095.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wLczh28RBpKn2wx1"/></div></div></figure><p id="9c8f" class="pw-post-body-paragraph jt ju hi jv b jw kw jy jz ka kx kc kd ke ky kg kh ki kz kk kl km la ko kp kq hb bi translated">党派帖子的显著特点是讨论政策或立法问题的词汇，如“奥巴马医改”、“法案”、“法律”和“国会”。这是一份党派文章的打印样本:</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lq"><img src="../Images/c42a49686419b589c58fd70b4255013e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wk70kIh00IEqB7_WlclhlA.png"/></div></div></figure><h2 id="ec87" class="lb iw hi bd ix lc ld le jb lf lg lh jf ke li lj jj ki lk ll jn km lm ln jr lo bi translated">中立职位</h2><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/951f59e0bff54d7ea411de80cee940ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8IQp68i522N9-sjr"/></div></div></figure><p id="b59d" class="pw-post-body-paragraph jt ju hi jv b jw kw jy jz ka kx kc kd ke ky kg kh ki kz kk kl km la ko kp kq hb bi translated">另一方面，中性帖子倾向于使用“退伍军人”、“家庭”和“社区”等词。可以说，这些术语迎合了两党的价值观，比与政策相关的术语更容易引起争议。以下是中立帖子的示例:</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/5091dd61305e4fa0f6127f782dffdf75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GWBxBgYc-Y6eYWHMliVzXQ.png"/></div></div></figure><h1 id="1292" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">分类党派偏见</h1><p id="6afe" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">分类模型要求对推文进行清理和数字编码。下面的函数用于在帖子被格式化为字符串列表后对其进行清理:</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="669b" class="pw-post-body-paragraph jt ju hi jv b jw kw jy jz ka kx kc kd ke ky kg kh ki kz kk kl km la ko kp kq hb bi translated">使用 sklearn 的<strong class="jv hj"> TF-IDF 矢量器</strong>将帖子转换成数字数据。TF-IDF 是以下权重的乘积:</p><ul class=""><li id="bfa2" class="lu lv hi jv b jw kw ka kx ke lw ki lx km ly kq lz ma mb mc bi translated"><strong class="jv hj">词频:</strong>一个词在文档中出现的次数/文档中的总字数</li><li id="c379" class="lu lv hi jv b jw md ka me ke mf ki mg km mh kq lz ma mb mc bi translated"><strong class="jv hj">逆文档频率:</strong>文档总数/包含该单词的文档数的日志</li></ul><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="ab04" class="pw-post-body-paragraph jt ju hi jv b jw kw jy jz ka kx kc kd ke ky kg kh ki kz kk kl km la ko kp kq hb bi translated">假设“bias”变量是二进制的，那么只需使用<code class="du mi mj mk ml b">pd.get_dummies</code>对其进行编码，删除中间列，并使用<code class="du mi mj mk ml b">ravel()</code>将列值转换为数组:</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="d406" class="pw-post-body-paragraph jt ju hi jv b jw kw jy jz ka kx kc kd ke ky kg kh ki kz kk kl km la ko kp kq hb bi translated">这产生了由 0(中立)和 1(党派)值组成的数组“y”。</p><p id="220f" class="pw-post-body-paragraph jt ju hi jv b jw kw jy jz ka kx kc kd ke ky kg kh ki kz kk kl km la ko kp kq hb bi translated">正如我们在上面看到的，偏见类别严重失衡，大多是中性标签。这种不平衡导致初始测试中模型性能不佳。我使用<strong class="jv hj">合成少数过采样技术(SMOTE) </strong>对训练数据中的少数类进行过采样:</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="d125" class="pw-post-body-paragraph jt ju hi jv b jw kw jy jz ka kx kc kd ke ky kg kh ki kz kk kl km la ko kp kq hb bi translated">然后，使用<code class="du mi mj mk ml b">RandomizedSearchCV</code>，我创建了一个具有最优参数的随机森林模型。</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="472f" class="pw-post-body-paragraph jt ju hi jv b jw kw jy jz ka kx kc kd ke ky kg kh ki kz kk kl km la ko kp kq hb bi translated">下面的混淆矩阵显示了模型在测试和训练数据上的表现。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es mm"><img src="../Images/16fcc7b9e02f8ace4957ea4698beeb89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1084/0*VP7j2iH3dvOX55z-"/></div></figure><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es mn"><img src="../Images/3fe60a001f4779a7e2d255e7534248eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1082/0*ccby2WTbxLK_5fpX"/></div></figure><p id="45fc" class="pw-post-body-paragraph jt ju hi jv b jw kw jy jz ka kx kc kd ke ky kg kh ki kz kk kl km la ko kp kq hb bi translated">该模型在训练和测试数据上都表现良好，总体准确率为 91%。</p><h1 id="a80a" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">对帖子的消息进行分类</h1><p id="1c20" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">我使用相同的预处理步骤——过采样和数字编码——对帖子的信息进行分类。标签编码用于为消息列中的每个唯一值分配一个整数，而不是哑编码。假设使用 KNN 模型搜索整个参数网格在计算上没有那么昂贵，<code class="du mi mj mk ml b">GridSearchCV</code>用于寻找最佳参数:</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="31ed" class="pw-post-body-paragraph jt ju hi jv b jw kw jy jz ka kx kc kd ke ky kg kh ki kz kk kl km la ko kp kq hb bi translated">该模型在训练数据上具有近乎完美的性能，在测试数据上具有 87%的准确性。这不是特别令人印象深刻，但是考虑到大量的类，它的表现也大大优于随机猜测。在一个具有平衡类的新数据集中，随机猜测预计只能正确分类 11%的帖子。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mo"><img src="../Images/0566a12cd60140729a1c2001a31af939.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*d1anz-ajsEKIcKKn"/></div></div></figure><p id="d895" class="pw-post-body-paragraph jt ju hi jv b jw kw jy jz ka kx kc kd ke ky kg kh ki kz kk kl km la ko kp kq hb bi translated">在每个类行中，与预测标签相匹配的真实标签的百分比最高。然而，该模型将大约一半的个人职位和 27%的支持职位错误分类为政策职位。</p><h1 id="d1b4" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">根据新数据做出预测</h1><p id="48f8" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">使用 Tweepy 和 Twitter 的 API，我编写了一个函数来收集 Twitter 上最近的帖子，并在上面测试模型。该功能用于检索 2020 年总统选举候选人的推文。</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="59fc" class="pw-post-body-paragraph jt ju hi jv b jw kw jy jz ka kx kc kd ke ky kg kh ki kz kk kl km la ko kp kq hb bi translated">在对每个推文列表重复预处理后，我使用随机森林模型对帖子的偏见进行分类，并打印了 5 个被分类为党派的帖子:</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mp"><img src="../Images/38bf095ced397d82bb851a98cc94ac24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*75n0TGTgxdbDl-fkHI21mA.png"/></div></div></figure><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mq"><img src="../Images/7042eba323bdc3752e833c365b7fc98c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qrB3s4wmIo__iVNleZqqjg.png"/></div></div></figure><p id="f7f9" class="pw-post-body-paragraph jt ju hi jv b jw kw jy jz ka kx kc kd ke ky kg kh ki kz kk kl km la ko kp kq hb bi translated">在这两组被归类为党派的推文中，肯定有非中性的语言(“最差”、“好得多”)和针对政治对手的批评。</p><p id="c821" class="pw-post-body-paragraph jt ju hi jv b jw kw jy jz ka kx kc kd ke ky kg kh ki kz kk kl km la ko kp kq hb bi translated">接下来，KNN 模型被用来对推文信息的实质进行分类。下面列出了一些例子。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mr"><img src="../Images/3c933f6eedfb3b206d930d011b327939.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q5tHgqPaid7_2Yr0E3q6Lg.png"/></div></div></figure><p id="0876" class="pw-post-body-paragraph jt ju hi jv b jw kw jy jz ka kx kc kd ke ky kg kh ki kz kk kl km la ko kp kq hb bi translated">在这条推文中，乔·拜登向美国人保证，选票将被计算在内，并鼓励他们投票。这种鼓励，如果正确地归类为“支持”，是对担心民主进程可能受到干预的美国选民的支持。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ms"><img src="../Images/f07c67e456e8ed071f5d78d7c1ab1776.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dK4UZYnpBQuhnosBlTtX1w.png"/></div></div></figure><p id="7eae" class="pw-post-body-paragraph jt ju hi jv b jw kw jy jz ka kx kc kd ke ky kg kh ki kz kk kl km la ko kp kq hb bi translated">这前三条推文为特朗普政府及其政策辩护。这些推文特别提到了政府对经济和新冠肺炎疫情的处理。底部两条推文反而表达了对美国士兵的支持，或许归类为“支持”更合适。</p><h1 id="8c88" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">结论</h1><p id="0d9f" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">随机森林模型可以用来高精度地预测社交媒体帖子是党派的还是中立的。在收集了推文或其他社交媒体帖子的最新数据后，可以识别和提取党派帖子，供有兴趣了解特定政治家观点的选民或组织审查。</p><p id="0f34" class="pw-post-body-paragraph jt ju hi jv b jw kw jy jz ka kx kc kd ke ky kg kh ki kz kk kl km la ko kp kq hb bi translated">KNN 模型可以以比随机猜测高得多的准确度对帖子的消息进行分类，并且在以下类别上表现得特别好:攻击、选民、媒体、动员和“其他”。</p><p id="7867" class="pw-post-body-paragraph jt ju hi jv b jw kw jy jz ka kx kc kd ke ky kg kh ki kz kk kl km la ko kp kq hb bi translated">探索性分析表明，被视为党派的帖子往往包含与特定政策或立法问题相关的词/词配对，如“法律”、“医疗保健”和“移民改革”。当试图收集党派帖子时，可以在查询中使用这些术语。</p><p id="2111" class="pw-post-body-paragraph jt ju hi jv b jw kw jy jz ka kx kc kd ke ky kg kh ki kz kk kl km la ko kp kq hb bi translated">给定该数据的年龄以及政治话语的动态性质，更近的相似类型的标记数据可以支持在新帖子上具有更高准确度的分类器的开发。</p></div></div>    
</body>
</html>