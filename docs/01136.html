<html>
<head>
<title>Sum of two random variables or the rocky path to understanding convolutions of probability distributions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">两个随机变量的和或理解概率分布卷积的艰难道路</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/sum-of-two-random-variables-or-the-rocky-path-to-understanding-convolutions-of-probability-b0fc29aca3b5?source=collection_archive---------5-----------------------#2019-10-03">https://medium.com/analytics-vidhya/sum-of-two-random-variables-or-the-rocky-path-to-understanding-convolutions-of-probability-b0fc29aca3b5?source=collection_archive---------5-----------------------#2019-10-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7654" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我攻读硕士期间，我花了几个小时喝咖啡，努力完成一项作业，乍看之下，这似乎很琐碎。这是:</p><blockquote class="jd je jf"><p id="67db" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated">给定两个独立的均匀分布的随机变量<strong class="ih hj"> X </strong>和<strong class="ih hj"> Y </strong>，确定<strong class="ih hj"> Z=X+Y </strong>的概率密度函数<strong class="ih hj"> p(Z=z) </strong>。从数学角度来说:</p></blockquote><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es jk"><img src="../Images/fd08dae80c2c632a5810fa17f667d74e.png" data-original-src="https://miro.medium.com/v2/resize:fit:384/format:webp/0*X7XbqHEW01zvKJQ5.png"/></div></figure><p id="a445" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以说，结果函数将具有范围[0，2],因为应该有采样x=1和y=1的概率。<strong class="ih hj">但是</strong>——仅仅把两个均匀分布相加，并不能给我们问题的正确答案。</p><p id="9bff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在快速的网络搜索之后，我找到了解决这个问题所需的理论工具:<a class="ae js" href="https://en.wikipedia.org/wiki/Convolution_of_probability_distributions" rel="noopener ugc nofollow" target="_blank">概率分布的卷积</a>。它指出:</p><blockquote class="jd je jf"><p id="8c59" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated">两个独立的整数值(因此是离散的)随机变量之和的分布的一般公式是</p></blockquote><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es jt"><img src="../Images/cb8e282aeb1d0a05f965841d7c728053.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/0*mpA2d_7afB_Up7Tn.png"/></div><figcaption class="ju jv et er es jw jx bd b be z dx translated">给定X和Y的(离散)概率分布，Z=X+Y的概率密度</figcaption></figure><blockquote class="jd je jf"><p id="85cb" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated">具有密度函数<strong class="ih hj"> <em class="hi"> 𝑓,𝑔 </em> </strong>的独立连续分布随机变量的对应物为</p></blockquote><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es jy"><img src="../Images/0240efed5b79948b74a5961698f01ea0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xnvnYarM1bjUYkPm.png"/></div></div><figcaption class="ju jv et er es jw jx bd b be z dx translated">给定X和Y的(连续)概率密度，Z=X+Y的概率密度</figcaption></figure></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><p id="fda4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我的第一个想法是“哦，我在几年前的控制理论讲座上看到过这些方程(拉普拉斯变换)”——不幸的是，几年过去了，我不再知道积分是如何</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es kk"><img src="../Images/f7afad39329216f43d68b7e44519d5ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/format:webp/0*Z-z787kJ4bakBbBh.png"/></div></figure><p id="cd5f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">是计算出来的。当然，维基百科的页面上有一些奇特的可视化效果，比如下面这个:</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es kl"><img src="../Images/035385c2af42726e6e927213ecbbc924.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/0*LWFWRQwofjc8slsg.gif"/></div></figure><p id="b7b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但对我来说，很难解读方程中不同变量的含义。例如，我不清楚为什么红色函数向左移动，而<strong class="ih hj"> t </strong>参数为正。</p><p id="c1b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这篇博客的目标是一步一步地钻研卷积方程——最终你会对卷积感到舒适，并且不害怕复杂的积分。</p><p id="a4e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">尽情享受吧！</p></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><h1 id="e750" class="km kn hi bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">基础</h1><h2 id="846c" class="lk kn hi bd ko ll lm ln ks lo lp lq kw iq lr ls la iu lt lu le iy lv lw li lx bi translated">改变功能图</h2><p id="00f0" class="pw-post-body-paragraph if ig hi ih b ii ly ik il im lz io ip iq ma is it iu mb iw ix iy mc ja jb jc hb bi translated">你可能在学校学过这一章，老师(至少在德国学校)通常用二次函数来做。如果您知道将<strong class="ih hj"> 𝑓(𝑥) </strong>更改为<strong class="ih hj"> 𝑓(−𝑥+3) </strong>后功能<strong class="ih hj"> 𝑓 </strong>会发生什么，请随意跳过这一部分。</p><p id="1bb5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本节的动机是理解由<strong class="ih hj"> 𝑔(𝑥) </strong>变化而来的术语<strong class="ih hj"> 𝑔(𝑧−𝑥) </strong>。</p><blockquote class="jd je jf"><p id="e48e" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated">注意，我把函数实参<strong class="ih hj"><em class="hi">【𝑡</em></strong>换成了<strong class="ih hj"><em class="hi"/></strong>，以免读者把<strong class="ih hj"><em class="hi"/></strong>误认为“时间”。在这篇博客文章中，我们将继续使用<strong class="ih hj"> x </strong>。</p></blockquote><p id="ea80" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们定义两个简单的函数来完成本教程。第一个是简单的二次函数</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es md"><img src="../Images/39ac56b73092382a9876098027cbfbd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:250/format:webp/0*atmj6rfL99k5qHzv.png"/></div></figure><p id="b1a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为我也想完成我的家庭作业——我们将把均匀分布<strong class="ih hj"> U([0，1]) </strong>作为我们的第二个函数</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es me"><img src="../Images/9cf1ad8d6221d5e440d319846a251ff0.png" data-original-src="https://miro.medium.com/v2/resize:fit:830/format:webp/0*R5AiWGo8lsylNrgH.png"/></div></figure><p id="d2d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们在一张图中想象这两者:</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mf"><img src="../Images/7c5d2f61b22ad1d4aa57a440ba63448d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RTHHVeOT5A0hNSysigtnJQ.png"/></div></div></figure><p id="285f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，当我们将一个常量<strong class="ih hj"> 𝑧 </strong>添加到函数参数(即<strong class="ih hj"> 𝑓(𝑥+3) </strong>)时会发生什么？让我们看看不同的𝑧值会发生什么。我们将为每个示例函数绘制一个图，这里是二次函数:</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mf"><img src="../Images/4b0771ff902ca700958589440415915a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VkWsCGXeQkr8AkqqYzsPEA.png"/></div></div></figure><p id="6f44" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">加上一个正数<strong class="ih hj"> z </strong>，我们将图表向左移动，一个负数<strong class="ih hj"> z </strong>向右移动。</p><p id="0f96" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们将<strong class="ih hj">-1</strong>乘以函数参数<strong class="ih hj"> x </strong>会发生什么？由于二次图是对称的，不会显示任何变化，因此我们在一致函数上显示了这种影响。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mf"><img src="../Images/1d32a9eecea80097b22b0bb4a8134898.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rZPc6t81LWqUmu7BKr4noQ.png"/></div></div></figure><p id="ecc4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">显然，给<strong class="ih hj"> x </strong>加上一个负号会“镜像”相对于y轴的函数图。</p><p id="9042" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们可以理解<strong class="ih hj"> g(x) </strong>到<strong class="ih hj">g(zx)</strong>的变换了。它只是描述了添加一个常数<strong class="ih hj"> z </strong>(将其向左移动)并将<strong class="ih hj">-1</strong>乘以<strong class="ih hj"> x </strong>(相对于y轴镜像)<strong class="ih hj">。</strong></p><p id="cdfb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请参见下面虚线函数图的效果:</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mf"><img src="../Images/65b0af93760eaa41a3ad6d9fd4c3e109.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*phW0w2DBj0giMQ35olouPQ.png"/></div></div></figure><h2 id="f779" class="lk kn hi bd ko ll lm ln ks lo lp lq kw iq lr ls la iu lt lu le iy lv lw li lx bi translated">两个函数相乘</h2><p id="a6bf" class="pw-post-body-paragraph if ig hi ih b ii ly ik il im lz io ip iq ma is it iu mb iw ix iy mc ja jb jc hb bi translated">让我们继续研究卷积计算公式，我们的下一个任务是了解两个函数的乘积(或者在我的例子中是密度分布):</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es mg"><img src="../Images/644eb64b2193b69b6690447601d0f32e.png" data-original-src="https://miro.medium.com/v2/resize:fit:298/format:webp/0*FDf8R19a37ugxywg.png"/></div></figure><p id="3f60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们把它们相乘会怎么样？</p><p id="7657" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们将一个代理函数<strong class="ih hj"> a(x) </strong>定义为两个示例函数的乘积，并将这三个函数可视化:</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es mh"><img src="../Images/5186edf35b773d3856d2d9c872a31bd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:562/format:webp/0*3bE--nOOE9RBS6nW.png"/></div></figure><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mf"><img src="../Images/6aab20119cf47241bfe7cbd4cbb98e5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jq4zVmmrVcx7EpAvLdS1GQ.png"/></div></div></figure><p id="263c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">黑色点状图是我们在下一步中集成的产品函数。由于两个矩形函数并不完全重叠，因此生成的图形没有两个源函数那么宽。</p><h2 id="0295" class="lk kn hi bd ko ll lm ln ks lo lp lq kw iq lr ls la iu lt lu le iy lv lw li lx bi translated">在乘积函数a(x)上积分</h2><p id="2ad8" class="pw-post-body-paragraph if ig hi ih b ii ly ik il im lz io ip iq ma is it iu mb iw ix iy mc ja jb jc hb bi translated">积分是函数图和x轴之间的面积。这是我们卷积过程的最后一个构件</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es mi"><img src="../Images/c70f80112cf8c8405f1000933e6dbef8.png" data-original-src="https://miro.medium.com/v2/resize:fit:846/format:webp/0*-gKvT_b3GploMdsQ.png"/></div></figure><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mf"><img src="../Images/c73ac5cdcd2afa60bf10c2fd662149be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LWKK_mXThZ_tsKAuVCYP_g.png"/></div></div></figure><p id="8097" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">两个均匀概率密度<strong class="ih hj"> f </strong>和<strong class="ih hj"> g </strong>(其中一个向右移动0.5)的乘积上的积分为<strong class="ih hj"> 0.5 </strong>。</p><p id="4a43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">哇，太多了…让我们用一张图来总结一下吧！</p></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><h1 id="61ff" class="km kn hi bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">收集积木</h1><p id="84d7" class="pw-post-body-paragraph if ig hi ih b ii ly ik il im lz io ip iq ma is it iu mb iw ix iy mc ja jb jc hb bi translated">最后，我们准备好理解卷积方程</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es mj"><img src="../Images/c8110eac271600f29881b9381b450051.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/0*0Kpz67WICAQg7Oqs.png"/></div></figure><p id="b40c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了计算特定<strong class="ih hj"> z </strong>的<strong class="ih hj"> h(z) </strong>，我们必须执行以下步骤:</p><ol class=""><li id="66cd" class="mk ml hi ih b ii ij im in iq mm iu mn iy mo jc mp mq mr ms bi translated">将功能<strong class="ih hj"> g(x) </strong>向左<strong class="ih hj"> z </strong>，即<strong class="ih hj"> g(x+z) </strong></li><li id="e1fa" class="mk ml hi ih b ii mt im mu iq mv iu mw iy mx jc mp mq mr ms bi translated">相对于y轴镜像结果，即<strong class="ih hj">g(x+z)= g(z x)</strong></li><li id="83fd" class="mk ml hi ih b ii mt im mu iq mv iu mw iy mx jc mp mq mr ms bi translated">计算乘积<strong class="ih hj">a(x)</strong>，即<strong class="ih hj">f(x)g(zx)= a(x)</strong></li><li id="0b65" class="mk ml hi ih b ii mt im mu iq mv iu mw iy mx jc mp mq mr ms bi translated">计算<strong class="ih hj"> a(x)=i </strong>上的无穷积分</li><li id="d068" class="mk ml hi ih b ii mt im mu iq mv iu mw iy mx jc mp mq mr ms bi translated">在特定位置<strong class="ih hj"> z </strong>卷积的结果是<strong class="ih hj"> i </strong>，即我们计算出<strong class="ih hj">h(z)=∫f(x)g(zx)dx</strong>。</li></ol><p id="30c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们对我们感兴趣的每个<strong class="ih hj"> z </strong>应用这个程序，通常是一个范围，用于计算一个特定的概率。</p><p id="a1fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在有了计算卷积的程序，我们可以把它应用到最初的问题(我的学习任务):</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es my"><img src="../Images/a2c1aac369cbb314611ca25872ab0895.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/0*pslHpbv8dgX06m_z.png"/></div></figure><p id="41ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们计算并可视化范围从-1到3的<strong class="ih hj"> z </strong>的结果:</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mf"><img src="../Images/0243e53fa045a8917431e6ebda106cad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wknPJBwyoom_PeBtM74cSQ.png"/></div></div></figure><p id="1f90" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不错！正如所料，最终的概率分布不是均匀分布。我们看到两个均匀分布的随机变量之和会导致一个“三角形”的概率密度！</p><p id="057f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它的形状看起来也很合理和直观，因为<strong class="ih hj"> X </strong>和<strong class="ih hj"> Y </strong>的期望值都是0.5(记住，两者都均匀分布在[0，1]中)，Z的期望值必须是1。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es mz"><img src="../Images/5f78c8506624b2d7829dfe10f3279e2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:638/format:webp/1*YVbXUvh5gtijo2asY5rFBg.png"/></div></figure><p id="51e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢您的关注，并在下方留下您的评论！</p><p id="1a86" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了创建这些图，我使用了Python和matplotlib包。用<em class="jg"> scipy.integrate.trapz </em>函数进行积分计算。</p><p id="696c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">特别感谢<a class="ae js" href="https://github.com/herzog-ch" rel="noopener ugc nofollow" target="_blank">https://github.com/herzog-ch</a>的点评！</p></div></div>    
</body>
</html>