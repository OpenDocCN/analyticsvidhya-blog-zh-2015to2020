<html>
<head>
<title>Analysis of Malicious Websites by its Characteristics.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">恶意网站的特征分析。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/analysis-of-malicious-websites-by-its-characteristics-e202a20d9e38?source=collection_archive---------10-----------------------#2020-04-16">https://medium.com/analytics-vidhya/analysis-of-malicious-websites-by-its-characteristics-e202a20d9e38?source=collection_archive---------10-----------------------#2020-04-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/fae5f5ba63f87cdc1e78f76b84a0c342.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*_0EAmVXnUDAWZq1abDvQzQ.png"/></div></figure><p id="9b38" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">恶意软件不是我们遇到的全新问题。很久以前就有了。在现代社会中，网络应用程序的安全性和安全使用，而不将我们的数据和凭证泄露给陌生人是非常重要的。但是并不是所有的网站都能让你轻松享受。有时，有人可能会植入一些网络钓鱼的东西，这样你最终会落入他们的圈套，最终向他们泄露你的信息。</p><p id="3576" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">许多人会无意中访问这些网页，并受到诈骗。有时浏览器扩展或flash更新会是我们的恶意软件出现的形式。甚至用户可能会因为点击网站中的任何链接而上当，最终陷入陷阱。因此，如果我们能够了解这些类型的网页的历史，并在以后进行分析，我们甚至可以建立一个预测器，通过指导我们了解网页的可信度来帮助我们进行访问。</p><p id="cc9a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">因此，在这篇文章中，我试图分析恶意网站的特征(所谓的功能)。这里使用的数据集是从Kaggle获得的，包含大量恶意和良性数据。我们需要关注每个可用的特性，理解它们并进行分析。我们可以使用这些数据，并将它们用于进一步分类和提高应用层的安全性。</p><h1 id="8c20" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated"><strong class="ak">了解特性:</strong></h1><ul class=""><li id="4bca" class="ki kj hi io b ip kk it kl ix km jb kn jf ko jj kp kq kr ks bi translated"><strong class="io hj"> URL: </strong>是研究中分析的URL的匿名标识</li><li id="83bb" class="ki kj hi io b ip kt it ku ix kv jb kw jf kx jj kp kq kr ks bi translated"><strong class="io hj"> URL_LENGTH: </strong>是URL中的字符数</li><li id="5834" class="ki kj hi io b ip kt it ku ix kv jb kw jf kx jj kp kq kr ks bi translated"><strong class="io hj">NUMBER _ SPECIAL _ CHARACTERS:</strong>URL中标识的特殊字符的个数，如“/”、“%”、“#”、“&amp;”、“”, "="</li><li id="6485" class="ki kj hi io b ip kt it ku ix kv jb kw jf kx jj kp kq kr ks bi translated"><strong class="io hj"> CHARSET: </strong>它是一个分类值，其含义是字符编码标准(也叫字符集)。</li><li id="c75c" class="ki kj hi io b ip kt it ku ix kv jb kw jf kx jj kp kq kr ks bi translated"><strong class="io hj">服务器:</strong>是一个类别值，其含义是从数据包响应中得到的服务器的操作系统。</li><li id="c3a9" class="ki kj hi io b ip kt it ku ix kv jb kw jf kx jj kp kq kr ks bi translated"><strong class="io hj"> CONTENT_LENGTH: </strong>表示HTTP头的内容大小。</li><li id="756e" class="ki kj hi io b ip kt it ku ix kv jb kw jf kx jj kp kq kr ks bi translated"><strong class="io hj"> WHOIS_COUNTRY: </strong>这是一个分类变量，它的值是我们从服务器响应中获得的国家(具体来说，我们的脚本使用了WHOIS的API)。</li><li id="1169" class="ki kj hi io b ip kt it ku ix kv jb kw jf kx jj kp kq kr ks bi translated"><strong class="io hj"> WHOIS_STATEPRO: </strong>它是一个分类变量，其值是我们从服务器响应中获得的状态(具体来说，我们的脚本使用了WHOIS的API)。</li><li id="d16a" class="ki kj hi io b ip kt it ku ix kv jb kw jf kx jj kp kq kr ks bi translated"><strong class="io hj"> WHOIS_REGDATE: </strong> Whois提供服务器注册日期，因此，该变量的日期值格式为DD/MM/YYYY HH:MM</li><li id="2fdc" class="ki kj hi io b ip kt it ku ix kv jb kw jf kx jj kp kq kr ks bi translated"><strong class="io hj"> WHOIS_UPDATED_DATE: </strong>通过WHOIS，我们从被分析的服务器上获得了最后更新日期</li><li id="f701" class="ki kj hi io b ip kt it ku ix kv jb kw jf kx jj kp kq kr ks bi translated"><strong class="io hj">TCP _ CONVERSATION _ EXCHANGE:</strong>这个变量是服务器和我们的蜜罐客户端之间交换的TCP数据包的数量</li><li id="4a3d" class="ki kj hi io b ip kt it ku ix kv jb kw jf kx jj kp kq kr ks bi translated"><strong class="io hj"> DIST远程TCP端口:</strong>检测到的端口数量，与TCP不同</li><li id="8641" class="ki kj hi io b ip kt it ku ix kv jb kw jf kx jj kp kq kr ks bi translated"><strong class="io hj"> REMOTE_IPS: </strong>这个变量有连接到蜜罐的IP的总数</li><li id="553f" class="ki kj hi io b ip kt it ku ix kv jb kw jf kx jj kp kq kr ks bi translated"><strong class="io hj"> APP_BYTES: </strong>这是传输的字节数</li><li id="197a" class="ki kj hi io b ip kt it ku ix kv jb kw jf kx jj kp kq kr ks bi translated"><strong class="io hj"> SOURCE_APP_PACKETS: </strong>从蜜罐发送到服务器的数据包</li><li id="3a36" class="ki kj hi io b ip kt it ku ix kv jb kw jf kx jj kp kq kr ks bi translated"><strong class="io hj">远程应用包:</strong>从服务器接收的包</li><li id="822e" class="ki kj hi io b ip kt it ku ix kv jb kw jf kx jj kp kq kr ks bi translated"><strong class="io hj"> APP_PACKETS: </strong>这是蜜罐与服务器通信过程中产生的IP数据包总数</li><li id="c9cf" class="ki kj hi io b ip kt it ku ix kv jb kw jf kx jj kp kq kr ks bi translated"><strong class="io hj"> DNS_QUERY_TIMES: </strong>这是蜜罐与服务器通信过程中产生的DNS数据包数量</li><li id="c413" class="ki kj hi io b ip kt it ku ix kv jb kw jf kx jj kp kq kr ks bi translated"><strong class="io hj">类型:</strong>这是一个分类变量，其值代表被分析网页的类型，具体来说，1代表恶意网站，0代表良性网站</li></ul><blockquote class="ky kz la"><p id="8175" class="im in lb io b ip iq ir is it iu iv iw lc iy iz ja ld jc jd je le jg jh ji jj hb bi translated">上述功能集基于由Christian Urcuqui、Andrés Navarro、José Osorio、Melisa García撰写的《IEEE数据端口:恶意和良性网站》。您可以从这里直接获得数据集，并且<strong class="io hj">分析将完全基于该数据集</strong>。</p></blockquote><h1 id="70cb" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated"><strong class="ak">分析:</strong></h1><p id="6a21" class="pw-post-body-paragraph im in hi io b ip kk ir is it kl iv iw ix lf iz ja jb lg jd je jf lh jh ji jj hb bi translated">现在我们知道了所有可用的字符以及它们的含义。现在让我们来分析它们。首先，当我们获取数据时，我们可以看到大约有1781行21列的数据。一些数据包含“无”分类国家，这对我们的分析没有多大用处。因此我们去掉了它们，最终得到1475行21列。</p><p id="5d00" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">关于我们的数据集，我们可用的数据非常有限。因此，让我们了解每个国家的WHOIS是如何让我们得到回应的。</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es li"><img src="../Images/7fac40061f20cad500d976f61a6267e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*80NYyT_ibthS20iko3Ykww.png"/></div></div></figure><p id="cc88" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">像好莱坞电影一样，美国拥有最多的网站。其次是加拿大、西班牙、澳大利亚等等。值得注意的是，数据集包含大约45个以上的国家，我们按照观察次数的降序排列了前10个国家。</p><p id="ff79" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">但是这些数据能帮助我们吗？<strong class="io hj">大无</strong>。这些包括恶意和良性网站，我们对良性网站不感兴趣。所以我们需要去掉它们，重新绘制图表。当我们这样做的时候，我们处理掉了将近1324行，这意味着只有151行是关于恶意网站的数据，其余的是良性的。太棒了… 让我们再画一次。</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es lr"><img src="../Images/0469c03a1c984d488c5cb144e0ae4317.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yf6K5RwfTkMx8bKB_g6nIw.png"/></div></div></figure><p id="4fbe" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">哇..看看形势是如何转变的。与西班牙相比，美国虽然有很多恶意网站，但并不多。西班牙居首位，其次是美国、捷克、俄罗斯等等。因此，我们可以理解，西班牙是最脆弱的国家。现在我们知道了，让我们深入了解一下如何分析西班牙不同的州。</strong></p><figure class="lj lk ll lm fd ij er es paragraph-image"><div class="er es ls"><img src="../Images/3606be90c5277ce1fb73ed4f2cd71b13.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/format:webp/1*yU5xLVL89PqrHSKoMxciMQ.png"/></div></figure><p id="0014" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">数据集只包含西班牙的巴塞罗那，因此我们在这里有巴塞罗那的计数。我们还可以注意到，仅巴塞罗那一地的人数就超过了其他任何一个国家。现在让我们更深入地了解数据集，因此我们画出它的相关矩阵。</p><blockquote class="ky kz la"><p id="0f07" class="im in lb io b ip iq ir is it iu iv iw lc iy iz ja ld jc jd je le jg jh ji jj hb bi translated">正如定义所述:相关矩阵是显示变量之间相关系数的表格。表格中的每个单元格显示了两个变量之间的相关性。相关矩阵用于汇总数据，作为更高级分析的输入，以及作为高级分析的诊断。</p></blockquote><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es lt"><img src="../Images/833cbf12fefa6772a2db85528ed29e2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D0bmGPW97TaUvoYZFKyK2Q.png"/></div></div></figure><p id="7cf9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">每一个深色的盒子都不是高度相关的。盒子越轻，其相关性越高。这里我们可以观察到TCP_CONVERSATION_EXCHANGE与APP_PACKET、SOURCE_APP_PACKET的相关性最高。类似地，我们可以在许多地方观察到高度相关的趋势。当我们进入数据预测的场景时，所有这些数据都是有用的。这就是ML的部分。</p><p id="c091" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们还必须注意空值条件。在国家统计的情况下，我忽略了它，因为我在分析过程中没有遇到它。但是让我们看看它们在数据帧中有多少空值。为此，我们使用pandas库和命令:df.isnull()。sum()。我们几乎可以为每一列生成null值的统计数据。</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div class="er es lu"><img src="../Images/610f9832abcaef3823e6210d9e66bfca.png" data-original-src="https://miro.medium.com/v2/resize:fit:652/format:webp/1*SzA1b82-6NoGm0kXm0WTeg.png"/></div></figure><p id="234d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">所以我们可以发现CONTENT_LENGTH列的null值最高。这大约相当于该列中一半的数据为空。因此，对于进一步的预测，完全取决于ML工程师，要么完全删除该列，要么用平均值或中值之类的东西对其进行估算。它还依赖于特定列中其余值。我们还观察到，这与所有其他列的相关性最低。理想情况下，最好将该列完全移除。具有空值另外两列是服务器和DNS_QUERY_TIMES。在这里，即使发出了特定的行，也不会产生任何困难，做一些输入也是可以的。</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div class="er es lv"><img src="../Images/f83391512ad003f92762b07a80d3d7c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:762/format:webp/1*CWV4d0nv3LQ6IwWVC7338Q.png"/></div><figcaption class="lw lx et er es ly lz bd b be z dx translated">列中空值的热图</figcaption></figure><h1 id="9b69" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated"><strong class="ak">结论:</strong></h1><p id="6757" class="pw-post-body-paragraph im in hi io b ip kk ir is it kl iv iw ix lf iz ja jb lg jd je jf lh jh ji jj hb bi translated">在这篇文章中，我们对恶意网站数据的数据集做了基本的分析。</p><ol class=""><li id="ce73" class="ki kj hi io b ip iq it iu ix ma jb mb jf mc jj md kq kr ks bi translated">我们希望了解数据集，并了解恶意数据是如何来自不同国家的。</li><li id="0c68" class="ki kj hi io b ip kt it ku ix kv jb kw jf kx jj md kq kr ks bi translated">我们理解了不同列之间的相关性，也理解了未来预测应该使用什么以及应该避免什么。</li><li id="46f1" class="ki kj hi io b ip kt it ku ix kv jb kw jf kx jj md kq kr ks bi translated">最后，我们发现了数据集中携带的空值，并对其进行了研究，以了解为什么需要将其移除或估算。</li></ol><p id="d940" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">下一个阶段是分类。ML工程师处理这样的数据。这里的数据非常少。通常，他们会处理大量数据，并基于这些统计数据，使用适当的模型和变量来预测数据，以获得更好的业务。</p><blockquote class="ky kz la"><p id="8526" class="im in lb io b ip iq ir is it iu iv iw lc iy iz ja ld jc jd je le jg jh ji jj hb bi translated"><strong class="io hj"> <em class="hi">从这里获得完整的代码和图表:</em></strong><a class="ae me" href="https://github.com/Siddharth1698/Analysis-of-Malicious-Websites" rel="noopener ugc nofollow" target="_blank"><strong class="io hj"><em class="hi">https://github . com/siddharth 1698/Analysis-of-恶意网站</em> </strong> </a></p></blockquote></div></div>    
</body>
</html>