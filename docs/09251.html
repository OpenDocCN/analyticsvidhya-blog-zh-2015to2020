<html>
<head>
<title>D3.js Basic to Mastery Part 1 Fundamentals</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">D3.js基础到精通第1部分基础</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/d3js-basic-to-mastery-bf5459836970?source=collection_archive---------8-----------------------#2020-08-30">https://medium.com/analytics-vidhya/d3js-basic-to-mastery-bf5459836970?source=collection_archive---------8-----------------------#2020-08-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/f3711cbda8786fe9d5f476e11fa673b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2oZ56XloPaG--q9i.png"/></div></div></figure><p id="64b3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你点击了这篇文章，我想你已经知道d3js是什么了，你可以在官方网站<a class="ae jo" href="https://d3js.org/" rel="noopener ugc nofollow" target="_blank">https://d3js.org/</a>浏览。</p><blockquote class="jp"><p id="bbf6" class="jq jr hi bd js jt ju jv jw jx jy jn dx translated"><strong class="ak"> D3.js </strong>是一个基于数据操作文档的JavaScript库。<strong class="ak"> D3js </strong>帮助您使用HTML、SVG和CSS将数据变得生动。</p></blockquote><p id="38f5" class="pw-post-body-paragraph iq ir hi is b it jz iv iw ix ka iz ja jb kb jd je jf kc jh ji jj kd jl jm jn hb bi translated">可以把D3js看作是针对数据的JQuery，这使得根据数据操作DOM变得非常容易。D3js还具有活力化特性，我们将在这一系列文章中详细介绍。这篇文章是为了了解D3js的基础知识。</p><h1 id="0f39" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">先决条件:</h1><ul class=""><li id="0aea" class="lc ld hi is b it le ix lf jb lg jf lh jj li jn lj lk ll lm bi translated">超文本标记语言</li><li id="3fe8" class="lc ld hi is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm bi translated">半铸钢ˌ钢性铸铁(Cast Semi-Steel)</li><li id="224b" class="lc ld hi is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm bi translated">Java Script语言</li></ul><h1 id="459b" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">建立</h1><ol class=""><li id="5434" class="lc ld hi is b it le ix lf jb lg jf lh jj li jn ls lk ll lm bi translated"><code class="du lt lu lv lw b">&lt;script src="https://d3js.org/d3.v5.min.js"&gt;&lt;/script&gt;</code> CDN方式</li><li id="1954" class="lc ld hi is b it ln ix lo jb lp jf lq jj lr jn ls lk ll lm bi translated">NPM道<code class="du lt lu lv lw b">npm install d3</code></li></ol><p id="4611" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了简单起见，我们将坚持CND方式，以便让初学者容易理解。只需在html文件的头中包含script标记，就可以开始了。</p><h1 id="64b7" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">选择</h1><ol class=""><li id="17ff" class="lc ld hi is b it le ix lf jb lg jf lh jj li jn ls lk ll lm bi translated"><code class="du lt lu lv lw b">d3.select(“<em class="lx">selection query</em>”)</code></li><li id="40cb" class="lc ld hi is b it ln ix lo jb lp jf lq jj lr jn ls lk ll lm bi translated"><code class="du lt lu lv lw b">d3.selectAll(“<em class="lx">selection query</em>”)</code></li></ol><p id="b762" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">按F12打开控制台，最后会有选择的日志。</p><p id="658a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="lx">点击HTML、CSS或JS标签查看代码</em></p><figure class="ly lz ma mb fd ij"><div class="bz dy l di"><div class="mc md l"/></div></figure><p id="ab05" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">d3js中的大多数函数返回上下文，这意味着您可以一个接一个地链接您的函数。您将在接下来的示例中看到这样的链接。</p><h1 id="b4db" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">DOM操作</h1><p id="86b9" class="pw-post-body-paragraph iq ir hi is b it le iv iw ix lf iz ja jb me jd je jf mf jh ji jj mg jl jm jn hb bi translated">式样</p><ul class=""><li id="8275" class="lc ld hi is b it iu ix iy jb mh jf mi jj mj jn lj lk ll lm bi translated"><code class="du lt lu lv lw b">d3.select("*selection query*").style("color","red")</code></li></ul><p id="a91e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">属性</p><ul class=""><li id="4afc" class="lc ld hi is b it iu ix iy jb mh jf mi jj mj jn lj lk ll lm bi translated"><code class="du lt lu lv lw b">d3.select("*selection query*").attr("width","20%")</code></li></ul><p id="f485" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">切换类别</p><ul class=""><li id="0c11" class="lc ld hi is b it iu ix iy jb mh jf mi jj mj jn lj lk ll lm bi translated"><code class="du lt lu lv lw b">d3.select("*selection query*").classed("active",true)</code></li></ul><p id="383a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">内部文本</p><ul class=""><li id="65d5" class="lc ld hi is b it iu ix iy jb mh jf mi jj mj jn lj lk ll lm bi translated"><code class="du lt lu lv lw b">d3.select("*selection query*").text("Some Text")</code></li></ul><p id="bcf7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">插入HTML</p><ul class=""><li id="55aa" class="lc ld hi is b it iu ix iy jb mh jf mi jj mj jn lj lk ll lm bi translated"><code class="du lt lu lv lw b">d3.select("*selection query*").html("&lt;div class="block"&gt;&lt;/div&gt;&lt;div&gt;0 - 10&lt;/div&gt;")</code></li></ul><figure class="ly lz ma mb fd ij"><div class="bz dy l di"><div class="mc md l"/></div></figure><p id="928d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">更改属性</p><ul class=""><li id="cadf" class="lc ld hi is b it iu ix iy jb mh jf mi jj mj jn lj lk ll lm bi translated"><code class="du lt lu lv lw b">d3.selectAll('.checkbox').property('checked', false)</code></li></ul><p id="299a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">追加元素</p><ul class=""><li id="a623" class="lc ld hi is b it iu ix iy jb mh jf mi jj mj jn lj lk ll lm bi translated"><code class="du lt lu lv lw b">d3.select("*selection query*").append("*tag*")</code></li></ul><figure class="ly lz ma mb fd ij"><div class="bz dy l di"><div class="mc md l"/></div></figure><h1 id="1071" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">挽救（saving的简写）</h1><p id="591c" class="pw-post-body-paragraph iq ir hi is b it le iv iw ix lf iz ja jb me jd je jf mf jh ji jj mg jl jm jn hb bi translated">可缩放矢量图形(SVG)是网络上2D视觉效果的构建块。它是一种基于XML的标记语言，用于描述基于二维的矢量图形。由w3开发，现在正成为主流并得到广泛支持。<br/> D3js本质上是为SVG构建的。SVG之所以如此酷，是因为它们就像处理常规DOM元素一样。学习D3js，学习SVG很重要。</p><p id="7f6e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们创建一个带有标签<code class="du lt lu lv lw b">&lt;svg&gt;&lt;/svg&gt;</code> <br/>的svg。默认情况下，如果没有声明，svg的宽度为300像素，高度为150像素。您可以将宽度和高度声明为属性或css样式元素。<br/>例如:<code class="du lt lu lv lw b">&lt;svg width="500px" height="500px"&gt;&lt;/svg&gt;</code></p><figure class="ly lz ma mb fd ij"><div class="bz dy l di"><div class="mc md l"/></div></figure><p id="8bfd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在把svg想象成一个500x500像素的网格，我们将使用这些网格坐标来放置元素。<br/>让我们尝试在SVG上制作基本的形状</p><h1 id="7156" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">线条</h1><p id="0be7" class="pw-post-body-paragraph iq ir hi is b it le iv iw ix lf iz ja jb me jd je jf mf jh ji jj mg jl jm jn hb bi translated">一条线需要2个起点和终点，起点为x1，y1，终点为x2，y2。<br/>为了在屏幕上显示，svg中的任何元素都需要有一个笔画颜色<br/>例如:<code class="du lt lu lv lw b">&lt;line x1="100" y1="100" x2="400" y2="400" stroke="black"/&gt;</code></p><p id="3c78" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="lx">点击HTML、CSS或JS标签查看代码</em></p><figure class="ly lz ma mb fd ij"><div class="bz dy l di"><div class="mc md l"/></div></figure><h2 id="7116" class="mk kf hi bd kg ml mm mn kk mo mp mq ko jb mr ms ks jf mt mu kw jj mv mw la mx bi translated">用d3创建一条线</h2><pre class="ly lz ma mb fd my lw mz na aw nb bi"><span id="3909" class="mk kf hi lw b fi nc nd l ne nf">d3.line()</span></pre><p id="24b7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="lx">点击HTML、CSS或JS标签查看代码</em></p><figure class="ly lz ma mb fd ij"><div class="bz dy l di"><div class="mc md l"/></div></figure><p id="3aba" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们使用<code class="du lt lu lv lw b">d3.line()</code>初始化一个行生成器，然后通过向它传递数据来调用它。Line generator将遍历数据数组以获得x和y值，然后生成路径数据。我们可以将它传递给<code class="du lt lu lv lw b">path</code>的<code class="du lt lu lv lw b">d</code>属性。我们将在以后的文章中了解更多关于线生成器的内容。</p><p id="2f2f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">点击codepen示例右上角的edit on codepen，取消注释第二个数据变量，注释掉第一个数据变量，检查线条的形状，这是单个<code class="du lt lu lv lw b">line</code>标签无法实现的。</p><p id="1975" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在构建数据可视化时，有时您希望静态放置不需要生成器函数的形状。所以最好知道基本的形状。</p><p id="4771" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">svg中有6个形状标签。</p><ul class=""><li id="fdb1" class="lc ld hi is b it iu ix iy jb mh jf mi jj mj jn lj lk ll lm bi translated">线<code class="du lt lu lv lw b">&lt;line x1="0" y1="0" x2="200" y2="200" /&gt;</code></li><li id="5816" class="lc ld hi is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm bi translated">矩形<code class="du lt lu lv lw b">&lt;rect x="50" y="20" width="150" height="150" &gt;</code></li></ul><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ng"><img src="../Images/00e687a99c9957193f97f3982e0b6d91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vk89ea7RtUXttW68.PNG"/></div></div></figure><ul class=""><li id="b23f" class="lc ld hi is b it iu ix iy jb mh jf mi jj mj jn lj lk ll lm bi translated">圆形<code class="du lt lu lv lw b">&lt;circle cx="50" cy="50" r="50"/&gt;</code></li></ul><figure class="ly lz ma mb fd ij er es paragraph-image"><div class="er es nh"><img src="../Images/81038743c76a73a2486d05a7b2f61edb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/0*Hksc-8u6tLaX7uKD.PNG"/></div></figure><ul class=""><li id="fc24" class="lc ld hi is b it iu ix iy jb mh jf mi jj mj jn lj lk ll lm bi translated">椭圆<code class="du lt lu lv lw b">&lt;ellipse cx="200" cy="80" rx="100" ry="50" /&gt;</code></li></ul><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ni"><img src="../Images/10eebb005ec4ebea9570d709b3dd9787.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*psM5iKyY9Abp9iD0.PNG"/></div></div></figure><ul class=""><li id="1ba0" class="lc ld hi is b it iu ix iy jb mh jf mi jj mj jn lj lk ll lm bi translated">多边形<code class="du lt lu lv lw b">&lt;polygon points="220,10 300,210 170,250 123,234" /&gt;</code></li></ul><figure class="ly lz ma mb fd ij er es paragraph-image"><div class="er es nj"><img src="../Images/8efb696442150d7409202f45d01c9750.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/0*gQQX8XoXzLQ13HaT.PNG"/></div></figure><ul class=""><li id="5df3" class="lc ld hi is b it iu ix iy jb mh jf mi jj mj jn lj lk ll lm bi translated">折线<code class="du lt lu lv lw b">&lt;polyline points="20,20 40,25 60,40 80,120 120,140 200,180" /&gt;</code></li></ul><figure class="ly lz ma mb fd ij er es paragraph-image"><div class="er es nk"><img src="../Images/fcfb6efb77dc514a263d4d3d2154c971.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/0*auLxth_3bmsRWpnx.PNG"/></div></figure><p id="0732" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">和</p><ul class=""><li id="ab32" class="lc ld hi is b it iu ix iy jb mh jf mi jj mj jn lj lk ll lm bi translated">路径可以采取任何形状，我们将进一步讨论</li></ul><p id="4276" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">和</p><ul class=""><li id="dc43" class="lc ld hi is b it iu ix iy jb mh jf mi jj mj jn lj lk ll lm bi translated">group<code class="du lt lu lv lw b">&lt;g&gt;</code>它类似于svg的div，用于对多个元素进行分组和操作。</li><li id="a933" class="lc ld hi is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm bi translated">文本<code class="du lt lu lv lw b">&lt;text x="0" y="15" &gt;I love SVG!&lt;/text&gt;</code>用于放置文本</li></ul><p id="3922" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">SVG有许多元素。如果你想了解更多关于SVG形状的知识，请直接阅读<a class="ae jo" href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element" rel="noopener ugc nofollow" target="_blank"> MDN SVG元素</a></p><p id="da0b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">D3js还提供了基本的形状生成器<br/>，你可以在这里<a class="ae jo" href="https://bl.ocks.org/d3indepth/raw/bae221df69af953fb06351e1391e89a0/" rel="noopener ugc nofollow" target="_blank">查看</a></p><figure class="ly lz ma mb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nl"><img src="../Images/13799d1f160d355892c1d6c6e82812dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YROgiim66nGnaPLO.PNG"/></div></div></figure><h2 id="665b" class="mk kf hi bd kg ml mm mn kk mo mp mq ko jb mr ms ks jf mt mu kw jj mv mw la mx bi translated">小路</h2><p id="0b91" class="pw-post-body-paragraph iq ir hi is b it le iv iw ix lf iz ja jb me jd je jf mf jh ji jj mg jl jm jn hb bi translated">如果你只是想学习d3js，没有必要学习<code class="du lt lu lv lw b">path</code>数据，你可以跳过这一部分，因为这有时会变得太混乱而无法理解概念，它只是帮助你理解当你制作<code class="du lt lu lv lw b">path</code>时背景发生了什么。让我们举一个最简单的例子，做一条线</p><figure class="ly lz ma mb fd ij"><div class="bz dy l di"><div class="mc md l"/></div></figure><p id="c438" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们传递给<code class="du lt lu lv lw b">path</code>的数据是<code class="du lt lu lv lw b">M100,100 L400,400</code>。<br/>路径数据总是以<code class="du lt lu lv lw b">M</code>开始，表示移动，从你想要开始绘制的点开始，每个坐标取两个点x和y。我们给出了从svg的<code class="du lt lu lv lw b">100,100</code>坐标开始的<code class="du lt lu lv lw b">M100,100 </code>。还有小写的<code class="du lt lu lv lw b">m</code>从最后一个点移动，而不是从svg开始。之后，我们用<code class="du lt lu lv lw b">L400,400</code>表示线及其坐标，线从<code class="du lt lu lv lw b">M</code>或<code class="du lt lu lv lw b">m</code>的起点画出。小写<code class="du lt lu lv lw b">l</code>从其父代而不是svg中取点。</p><p id="4dae" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">同样，我们也有</p><ul class=""><li id="aedb" class="lc ld hi is b it iu ix iy jb mh jf mi jj mj jn lj lk ll lm bi translated">移动<code class="du lt lu lv lw b">M</code> <code class="du lt lu lv lw b">m</code></li><li id="65be" class="lc ld hi is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm bi translated"><code class="du lt lu lv lw b">L</code>行<code class="du lt lu lv lw b">l</code></li><li id="06f0" class="lc ld hi is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm bi translated">水平<code class="du lt lu lv lw b">H</code> <code class="du lt lu lv lw b">h</code>水平画线</li><li id="679e" class="lc ld hi is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm bi translated">垂直<code class="du lt lu lv lw b">V</code> <code class="du lt lu lv lw b">v</code>垂直画线</li><li id="8681" class="lc ld hi is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm bi translated">闭合路径<code class="du lt lu lv lw b">Z</code>用一条线连接起点和终点</li></ul><p id="a2e1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以下是水平、垂直和封闭路径的一些示例</p><figure class="ly lz ma mb fd ij"><div class="bz dy l di"><div class="mc md l"/></div></figure><p id="190d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了制作曲线，我做了一些可视化工具，让它更容易理解。摆弄滑块，看看哪个值影响曲线的哪个部分。</p><ul class=""><li id="1442" class="lc ld hi is b it iu ix iy jb mh jf mi jj mj jn lj lk ll lm bi translated">三次贝塞尔<br/>、<code class="du lt lu lv lw b">C</code>、<code class="du lt lu lv lw b">c</code></li></ul><figure class="ly lz ma mb fd ij"><div class="bz dy l di"><div class="mc md l"/></div></figure><p id="6b6a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du lt lu lv lw b">S</code>，<code class="du lt lu lv lw b">s</code></p><figure class="ly lz ma mb fd ij"><div class="bz dy l di"><div class="mc md l"/></div></figure><ul class=""><li id="0cec" class="lc ld hi is b it iu ix iy jb mh jf mi jj mj jn lj lk ll lm bi translated">二次贝塞尔<br/> <code class="du lt lu lv lw b">Q</code>，<code class="du lt lu lv lw b">q</code>，<br/>，<code class="du lt lu lv lw b">T</code>，<code class="du lt lu lv lw b">t</code></li></ul><figure class="ly lz ma mb fd ij"><div class="bz dy l di"><div class="mc md l"/></div></figure><ul class=""><li id="395f" class="lc ld hi is b it iu ix iy jb mh jf mi jj mj jn lj lk ll lm bi translated">椭圆弧<br/>、<code class="du lt lu lv lw b">A</code>、<code class="du lt lu lv lw b">a</code></li></ul><div class="nm nn ez fb no np"><a href="https://codepen.io/krngd2/pen/PoogNPo" rel="noopener  ugc nofollow" target="_blank"><div class="nq ab dw"><div class="nr ab ns cl cj nt"><h2 class="bd hj fi z dy nu ea eb nv ed ef hh bi translated">SVG路径弧</h2><div class="nw l"><h3 class="bd b fi z dy nu ea eb nv ed ef dx translated">编辑描述</h3></div><div class="nx l"><p class="bd b fp z dy nu ea eb nv ed ef dx translated">codepen.io</p></div></div><div class="ny l"><div class="nz l oa ob oc ny od io np"/></div></div></a></div><h1 id="c044" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">天平</h1><p id="3fcd" class="pw-post-body-paragraph iq ir hi is b it le iv iw ix lf iz ja jb me jd je jf mf jh ji jj mg jl jm jn hb bi translated">如果你已经看过d3线生成器的例子，我们已经使用数据来匹配我们的svg点，就像我们使用数据<code class="du lt lu lv lw b">100,100</code>从svg的点<code class="du lt lu lv lw b">100,100</code>开始，但是我们永远不会得到可以匹配我们的svg的数据。一些数据可能是浮点的，一些可能是长整型的，一些是日期格式的，等等。d3js里的<code class="du lt lu lv lw b">Scales</code>来解决这个问题了。d3j有一些巧妙的特性来处理数据。让我们看一个最简单的例子</p><figure class="ly lz ma mb fd ij"><div class="bz dy l di"><div class="mc md l"/></div></figure><h2 id="0236" class="mk kf hi bd kg ml mm mn kk mo mp mq ko jb mr ms ks jf mt mu kw jj mv mw la mx bi translated"><code class="du lt lu lv lw b">d3.scaleLinear()</code></h2><p id="5bea" class="pw-post-body-paragraph iq ir hi is b it le iv iw ix lf iz ja jb me jd je jf mf jh ji jj mg jl jm jn hb bi translated">在上面的例子中，我们将分数转换成了百分比，简单地说就是我们取了一个数值范围，并将其放入0到100的范围内。我们用这个来适应我们的数据范围，适应<code class="du lt lu lv lw b">svg</code>的宽度或高度范围。</p><p id="60bc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在看看这个例子</p><figure class="ly lz ma mb fd ij"><div class="bz dy l di"><div class="mc md l"/></div></figure><p id="c49e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们采用了不适合我们的svg的不同数据集，然后对其进行缩放以适应它。</p><p id="04cc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是我们的数据</p><pre class="ly lz ma mb fd my lw mz na aw nb bi"><span id="b768" class="mk kf hi lw b fi nc nd l ne nf">let data = [<br/>       {x:-60,y:1120},<br/>       {x: 50,y:400},<br/>       {x:160,y:220},<br/>       {x:190,y:280},<br/>       {x:330,y:360},<br/>       {x:420,y:80 },<br/>       {x:560,y:560},<br/>       {x:620,y:120},<br/>       {x:930,y:700},<br/>       {x:1120,y:-60}<br/>     ]</span></pre><p id="208c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在前一篇文章的例子中，我们已经将数据直接传递给了行生成器，但是在这个例子中，我们的数据非常不同，所以我们必须定义行生成器的访问器。让线条生成器知道x和y点在对象数组中的位置。像这样</p><pre class="ly lz ma mb fd my lw mz na aw nb bi"><span id="7227" class="mk kf hi lw b fi nc nd l ne nf">let lineGenerator = d3.line()<br/>                      .x(d =&gt; d.x)<br/>                      .y(d =&gt; d.y)</span></pre><p id="9801" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Line generator将遍历数据数组，获取accesor函数<code class="du lt lu lv lw b">.x(d =&gt; d.x).y(d =&gt; d.y)</code>返回的x和y值，然后生成路径数据。为了使数据适合svg，需要相应地缩放数据。在它被传递到x和y值之前，我们必须对它进行缩放。<br/>首先，我们通过将最小和最大值传递给域并将0传递给svg的宽度或高度来初始化标度，当值被传递时，它返回svg的适当点。<br/>我们的svg的最低点是-60，最大值是1120，可以传递给域，svg宽度是500px，可以传递给范围。</p><pre class="ly lz ma mb fd my lw mz na aw nb bi"><span id="8f2d" class="mk kf hi lw b fi nc nd l ne nf">const scale = d3.scaleLinear()<br/>                      .domain([-60, 1120])<br/>                      .range([0, 500])</span></pre><p id="7667" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">和转换数据</p><pre class="ly lz ma mb fd my lw mz na aw nb bi"><span id="b10a" class="mk kf hi lw b fi nc nd l ne nf">const lineGenerator = d3.line()<br/>                      .x(d =&gt; scale(d.x))<br/>                      .y(d =&gt; scale(d.y))</span></pre><p id="35f0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">检查<code class="du lt lu lv lw b">lineGenerator</code>有无刻度的结果</p><p id="84df" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://codepen.io/krngd2/pen/oNNVEyv" rel="noopener ugc nofollow" target="_blank">https://codepen.io/krngd2/pen/oNNVEyv</a></p><p id="639e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以在<code class="du lt lu lv lw b">d3.extent(data, accessor)</code>的帮助下得到给定数据的最小值和最大值，它将返回一个长度为2的数组。</p><p id="9053" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用<code class="du lt lu lv lw b">d3.min(data,accessor)</code>和<code class="du lt lu lv lw b">d3.max(data,accessor)</code>获得最小值或最大值。你可以在d3js <a class="ae jo" href="https://github.com/d3/d3-array" rel="noopener ugc nofollow" target="_blank">这里了解更多关于数组的方法d3-array </a></p><p id="fe87" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">d3js中有12种缩放类型，分为3种类型</p><ol class=""><li id="4cc5" class="lc ld hi is b it iu ix iy jb mh jf mi jj mj jn ls lk ll lm bi translated">连续输入和连续输出</li></ol><ul class=""><li id="3a4f" class="lc ld hi is b it iu ix iy jb mh jf mi jj mj jn lj lk ll lm bi translated"><code class="du lt lu lv lw b"><a class="ae jo" href="https://github.com/d3/d3-scale#linear-scales" rel="noopener ugc nofollow" target="_blank">d3.scaleLinear()</a></code></li></ul><p id="9b7c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.连续输入和离散输出</p><ul class=""><li id="bff3" class="lc ld hi is b it iu ix iy jb mh jf mi jj mj jn lj lk ll lm bi translated"><code class="du lt lu lv lw b">d3.scaleQuantize()</code></li><li id="e001" class="lc ld hi is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm bi translated"><code class="du lt lu lv lw b">d3.scaleQuantile()</code></li><li id="9dfb" class="lc ld hi is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm bi translated"><code class="du lt lu lv lw b">d3.scaleThreshold()</code></li></ul><p id="6c4c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3.离散输入和离散输出</p><ul class=""><li id="b4de" class="lc ld hi is b it iu ix iy jb mh jf mi jj mj jn lj lk ll lm bi translated"><code class="du lt lu lv lw b">d3.scaleOrdinal()</code></li><li id="9945" class="lc ld hi is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm bi translated"><code class="du lt lu lv lw b">d3.scaleBand()</code></li><li id="19fa" class="lc ld hi is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm bi translated"><code class="du lt lu lv lw b">d3.scalePoint()</code></li></ul><p id="69bb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以在这里了解它们<a class="ae jo" href="https://github.com/d3/d3-scale" rel="noopener ugc nofollow" target="_blank">D3-scale</a></p><h1 id="b8f9" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">数据绑定</h1><p id="1c34" class="pw-post-body-paragraph iq ir hi is b it le iv iw ix lf iz ja jb me jd je jf mf jh ji jj mg jl jm jn hb bi translated">数据可视化意味着处理数据。我们希望以高效的方式访问我们想要的数据。Joins帮助我们以有效的方式将数据绑定到DOM元素。</p><p id="20d5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要将数据加入DOM，你只需要在选中的d3元素上调用<code class="du lt lu lv lw b">.data()</code>,并将数据作为参数传递。在下面的例子中，我们有5个圆形元素。选择所有元素，并通过向其传递数据来调用<code class="du lt lu lv lw b">.data()</code>。</p><figure class="ly lz ma mb fd ij"><div class="bz dy l di"><div class="mc md l"/></div></figure><p id="b832" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du lt lu lv lw b">.data()</code>函数将遍历数据，并将数据逐个绑定到每个节点。按F12，重新加载页面并检查控制台日志。您将找到我们选择的节点列表，并展开第一个元素向下滚动到底部，您可以看到<code class="du lt lu lv lw b"> __data__</code>具有绑定到该元素的相应数据，您可以在任何时候访问该特定元素<code class="du lt lu lv lw b">select</code>。</p><figure class="ly lz ma mb fd ij er es paragraph-image"><div class="er es oe"><img src="../Images/fa0248e2bade78597f1c97ac70d840e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:782/format:webp/0*PMmZSetmornvSa4N.png"/></div></figure><p id="94d6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">无论您是否观察到，我们的数据长度只有4，但是我们已经将该数据绑定到5个选定的元素。检查相同日志中的第五个元素，它将没有<code class="du lt lu lv lw b">__data__</code>属性。</p><p id="894d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">借助于添加数据的<code class="du lt lu lv lw b">.enter()</code>函数和删除数据的<code class="du lt lu lv lw b">.exit()</code>函数，D3为我们提供了调整DOM元素的简单方法。两个函数都返回额外的数据，但是<code class="du lt lu lv lw b">.enter()</code>后跟<code class="du lt lu lv lw b">.append()</code>将添加额外的元素，而<code class="du lt lu lv lw b">.enter()</code>后跟<code class="du lt lu lv lw b">.remove()</code>将删除额外的元素。</p><h2 id="bde7" class="mk kf hi bd kg ml mm mn kk mo mp mq ko jb mr ms ks jf mt mu kw jj mv mw la mx bi translated">移除示例</h2><figure class="ly lz ma mb fd ij"><div class="bz dy l di"><div class="mc md l"/></div></figure><h2 id="4f75" class="mk kf hi bd kg ml mm mn kk mo mp mq ko jb mr ms ks jf mt mu kw jj mv mw la mx bi translated">附加示例</h2><figure class="ly lz ma mb fd ij"><div class="bz dy l di"><div class="mc md l"/></div></figure><p id="d916" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">每个函数都将获得绑定数据作为回调参数，我们可以用它来验证技巧。比如有条件地改变它的属性和CSS属性的值。</p><figure class="ly lz ma mb fd ij"><div class="bz dy l di"><div class="mc md l"/></div></figure><p id="3113" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">回调函数返回的参数为(数据，索引，所有节点)<br/>现在尝试在这一行为奇数索引的圆使用不同的颜色</p><pre class="ly lz ma mb fd my lw mz na aw nb bi"><span id="44b2" class="mk kf hi lw b fi nc nd l ne nf">.attr('fill',(data) =&gt; data.r &lt; 35 ? 'red' : 'orange')</span></pre><p id="3e71" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">到此为止，我们已经了解了D3js的基本原理。</p><p id="d398" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">用这些知识尝试一些新的东西，并在回复中评论CodePen链接。等着看你的创意。</p></div></div>    
</body>
</html>