<html>
<head>
<title>IV. Deploy a Poloniex trading bot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">四.结论部署一个普罗尼克斯交易机器人</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/iv-deploy-a-poloniex-trading-bot-c3af87eba48c?source=collection_archive---------13-----------------------#2020-12-28">https://medium.com/analytics-vidhya/iv-deploy-a-poloniex-trading-bot-c3af87eba48c?source=collection_archive---------13-----------------------#2020-12-28</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><blockquote class="ie if ig"><p id="29ab" class="ih ii ij ik b il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf ha bi translated">使用Poloniex API创建一个自主交易机器人</p></blockquote><p id="84ce" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi jj translated"><span class="l jk jl jm bm jn jo jp jq jr di"> T </span>他的文章是描述创建、回溯测试和部署交易机器人的逐步过程的系列文章的一部分。第一篇文章关注于<strong class="ik hi">计算预测变量</strong>，第二篇关注于<strong class="ik hi">构建深度学习模型</strong>，第三篇关注于<strong class="ik hi">用模型识别有利可图的交易策略</strong>，最后一篇关注于程序中的现实实现(<strong class="ik hi">部署</strong>)。本文末尾给出了链接。</p><p id="8d14" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">一旦我们建立了模型并确定了交易策略，现在就应该用Python脚本来实现它，这样它就可以自己创造利润了。本文的最终目标是生成一个<strong class="ik hi">自主Python代码，该代码将根据我们在上一篇文章(第三篇— [1])中确定和评估的有利可图的<em class="ij">看涨</em>策略，实时做出交易决定</strong>。以下代码一次只进行一笔交易(<strong class="ik hi"> 1TAAT </strong>)，但一些直接的修改可以使其适用于多笔同时进行的交易监控。由于这有点复杂，我只暴露了<em class="ij">和</em>的原则，让读者根据自己的需要来选择。</p></div><div class="ab cl js jt go ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="ha hb hc hd he"><p id="f765" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">0-导入库和加载数据</p><p id="57de" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">I —正在初始化Poloniex API连接</p><p id="6b2e" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">二——定义买入和卖出函数，计算变量</p><p id="4d69" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">三、一次一个交易(1TAAT)交易机器人</p><p id="4cd1" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">四、结论</p></div><div class="ab cl js jt go ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="ha hb hc hd he"><p id="44b7" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><strong class="ik hi">0-导入库和加载数据</strong></p><p id="4189" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">第一步是导入必要的库，并(重新)定义我们在构建这个交易机器人时使用的常数。这包括蜡烛的<strong class="ik hi"> <em class="ij">停用</em> </strong>、<strong class="ik hi"> <em class="ij">获利</em> </strong>、<strong class="ik hi"> <em class="ij">期</em>、</strong>、<em class="ij">、</em>等，还包括我们交易的<strong class="ik hi">对</strong>——在Poloniex API和网站上均有提及(如<em class="ij"/>、<em class="ij"> USDT_BTC </em>比特币交易)和<strong class="ik hi">金额<strong class="ik hi">此外，我们还设置了阈值概率<strong class="ik hi"><em class="ij">min _ threshold</em></strong>，从中我们可以在<em class="ij">看涨</em>的预测中遵循我们的模型。默认情况下，该阈值被设置为0.5(即<em class="ij"/>我们每次都跟随<em class="ij">看涨</em>的模型)，但我们可以设置更高的阈值来产生更具选择性的交易策略(见第三条— [1])。人们还应该注意根据他的目录结构修改第14行的路径。</strong></strong></p><p id="4be4" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">我们还导入了一个名为<em class="ij"> Deployment_functions </em>的定制库，这将在本文的第二部分中描述。</p><p id="23f7" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">初始化代码如下所示:</p><figure class="jz ka kb kc fd kd"><div class="bz dy l di"><div class="ke kf l"/></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">图1:部署的初始化代码</figcaption></figure><p id="8a63" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><strong class="ik hi"> I —初始化Poloniex API连接</strong></p><p id="4522" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">一旦我们导入了库，我们就可以通过输入我们的API密钥和密码来初始化到Poloniex API的连接。这些十六进制代码对每个帐户都是唯一的，允许用户直接从Python进行交易。关于API和如何获得您的密钥的更多信息可以在[2]找到。使用我们的程序，你只需要<strong class="ik hi">在<em class="ij">Deployment _ functions . py</em></strong>(下一段)的第62 &amp; 63行设置你的。</p><p id="158d" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">此外，初始化连接的代码非常简单，如下所示:</p><figure class="jz ka kb kc fd kd"><div class="bz dy l di"><div class="ke kf l"/></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">图2:初始化Poloniex API私有连接</figcaption></figure><p id="6919" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><strong class="ik hi"> II —定义购买和销售功能，计算变量</strong></p><p id="83bc" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">如前所述，为了简化交易脚本，我决定将所有函数存储在一个名为<em class="ij">Deployment _ functions . py</em>的定制库中。该文件包含先前介绍的函数，如预测变量的计算(见文章I — [3])。它还包含两个非常重要的函数，即<em class="ij"> buy_asset() </em>和<em class="ij"> sell_asset() </em>函数。这些功能使我们能够<strong class="ik hi">以市场上可获得的最佳价格</strong>购买/出售给定数量，并且只有在购买/出售全部数量时才能实现。为了避免挂单恶化现实生活中的交易，这些功能必须定义清楚。潜在的想法是使代码尽可能具有高性能，以便获得尽可能接近回溯测试结果的真实结果(参见文章III — [1])。</p><p id="cd17" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">下面给出了这些函数的代码，按照之前的指定，您应该更改第62 &amp; 63行:</p><figure class="jz ka kb kc fd kd"><div class="bz dy l di"><div class="ke kf l"/></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">图3:定义交易函数</figcaption></figure><p id="34ec" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><strong class="ik hi"> III —一次一笔交易(1TAAT)交易机器人</strong></p><p id="cdd9" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">既然我们已经建立并定义了所有的工具，现在是创建交易循环的时候了。在我们的例子中(<em class="ij">1tat</em>)，我们只是一遍又一遍地重复一个连续的过程。我们等待蜡烛线的数据被传送，然后我们应用这3个任务:<strong class="ik hi">请求最近的数据</strong>，<strong class="ik hi">通过计算变量和应用模型计算预测</strong>，然后最后如果我们的看涨标准被达到(见文章II [4]关于我们如何定义我们的最小值和最大值)，我们<strong class="ik hi">进入交易并跟踪它</strong>。当我们进入交易时，首先我们购买预定数量的货币对，然后我们等到价格达到止损点或止盈点。当它最终达到极限时，我们卖掉我们的资产。我们一遍又一遍地重复这个过程。</p><p id="86f2" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">该代码用于在控制台中显示一些监控信息(<em class="ij">图4 </em>)并存储每笔交易的特征(<em class="ij">图5 &amp; 6 </em>)。注:Poloniex网站储存了所有交易的信息。</p><p id="acea" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">当交易正在进行时，控制台看起来是这样的，<em class="ij">即</em>当我们等待价格到达止损点或止盈点时:</p><figure class="jz ka kb kc fd kd er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es kk"><img src="../Images/f0dd874d160888397c361e1b3cb94253.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OZjKSf0hZXX7HzgzDYizAg.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">图4:监控交易时的控制台</figcaption></figure><figure class="jz ka kb kc fd kd er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es kr"><img src="../Images/7aee9ecac5bc9ea0e21db3585bc66f29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*luv2Q4NuyDTV8WoeN59P3A.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">图5:在买入操作中存储的数据(交易的进入点)</figcaption></figure><figure class="jz ka kb kc fd kd er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es ks"><img src="../Images/627c11e5257fa9384ee6d9192831915c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jxhnw2sBgrkR1i4ZbE6F0g.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">图6:卖出操作中存储的数据(交易的出口点)</figcaption></figure><p id="1043" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">交易循环非常精炼，它包含26行，这使得它很容易理解:</p><figure class="jz ka kb kc fd kd"><div class="bz dy l di"><div class="ke kf l"/></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">图7:交易循环</figcaption></figure><p id="9c6a" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><strong class="ik hi">四——结论</strong></p><p id="962c" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">首先，我们可以回忆一下，整个项目以及代码都可以在一个专门的GitHub存储库中获得[5]。</p><p id="e407" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">这个项目是一个伟大的成就，因为我们设法展示了如何从零开始建立一个有利可图的交易机器人。该管道易于调整，可以适应各种金融市场。此外，所需的输入数据有限，因此访问历史数据应该不成问题。</p><p id="6322" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">我们在回溯测试模拟中展示了该管道正在产生<strong class="ik hi">稳健且有利可图的交易策略</strong>(第三篇文章)，并且我们在最后一篇文章中揭示了如何在简单的Python脚本中实现交易机器人的原理。</p><p id="161b" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">我们可能还记得，这一系列文章的目的是让每个人都可以理解这个概念，并且显然可以通过多种方式来增强所提议的管道。特别是，人们可以考虑<strong class="ik hi">添加一些更多的预测变量，增加深度学习架构的层数，甚至改善实现循环</strong>。为了同时进行和监控多个交易(可能在多个市场上),调整交易循环也是可行的。</p><p id="2317" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">为了给出一些可能性的概述，我可以邀请感兴趣的读者看看学术论文，尤其是理学硕士和博士论文。在另一个层面上，我写了一份关于我构建这种高级交易机器人的报告，可以在[6]上找到。</p><p id="b54c" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">不要犹豫留下任何反馈/问题/ <em class="ij">鼓掌</em>或联系我以获取更多信息。</p><p id="9667" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><strong class="ik hi">2021年04月01日:</strong>在购买/出售功能中有几个错误。期待尽快纠正它们。</p></div><div class="ab cl js jt go ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="ha hb hc hd he"><p id="ee7f" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><strong class="ik hi">联系人:</strong> sebcararo@hotmail.fr</p><p id="9228" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><strong class="ik hi">系列其他文章:</strong></p><ul class=""><li id="8df3" class="kt ku hh ik b il im ip iq jg kv jh kw ji kx jf ky kz la lb bi translated"><a class="ae lc" rel="noopener" href="/analytics-vidhya/i-a-turnkey-python-code-for-creating-a-stock-forecasting-dataset-ad25f673f3b7"> I .用于创建股票预测数据集的交钥匙Python代码|作者sébastien Cararo | Analytics vid hya | 2020年12月| Medium </a></li><li id="4957" class="kt ku hh ik b il ld ip le jg lf jh lg ji lh jf ky kz la lb bi translated"><a class="ae lc" rel="noopener" href="/analytics-vidhya/ii-forecasting-crypto-tendencies-with-deep-learning-in-python-5948909617db">二。利用Python中的深度学习预测加密趋势|作者sébastien Cararo | Analytics vid hya | 2020年12月| Medium </a></li><li id="290f" class="kt ku hh ik b il ld ip le jg lf jh lg ji lh jf ky kz la lb bi translated"><a class="ae lc" rel="noopener" href="/analytics-vidhya/iii-creating-profitable-trading-strategies-1858a2fc8b85">三。创造有利可图的交易策略|作者sébastien Cararo | Analytics vid hya | 2020年12月| Medium </a></li></ul><p id="8373" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><strong class="ik hi">另一篇文章</strong> <em class="ij">(用机器学习构建体育博彩算法)</em> <a class="ae lc" rel="noopener" href="/analytics-vidhya/how-covid-19-prevented-me-from-being-a-millionnaire-in-2020-5b2144e8bdef">新冠肺炎如何阻止我在2020年成为百万富翁|作者sébastien Cararo | Analytics vid hya | 2020年12月| Medium </a></p><p id="dbd6" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">来源:</p><p id="86e5" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">[1]第三条</p><p id="1d90" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><a class="ae lc" rel="noopener" href="/analytics-vidhya/iii-creating-profitable-trading-strategies-1858a2fc8b85">三。创造有利可图的交易策略|作者Sébastien Cararo |分析vid hya | 2020年12月| Medium </a></p><p id="3e48" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">[2]波洛涅克斯API</p><div class="li lj ez fb lk ll"><a href="https://docs.poloniex.com/#create-an-api-key" rel="noopener  ugc nofollow" target="_blank"><div class="lm ab dw"><div class="ln ab lo cl cj lp"><h2 class="bd hi fi z dy lq ea eb lr ed ef hg bi translated">参考</h2><div class="ls l"><h3 class="bd b fi z dy lq ea eb lr ed ef dx translated">确保您安装了Poloniex提供了HTTP和websocket APIs来与exchange交互…</h3></div><div class="lt l"><p class="bd b fp z dy lq ea eb lr ed ef dx translated">docs.poloniex.com</p></div></div></div></a></div><p id="4a78" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">[3]第一条</p><p id="83aa" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><a class="ae lc" rel="noopener" href="/analytics-vidhya/i-a-turnkey-python-code-for-creating-a-stock-forecasting-dataset-ad25f673f3b7"> I .用于创建股票预测数据集的交钥匙Python代码|作者sébastien Cararo | Analytics vid hya | 2020年12月| Medium </a></p><p id="ffa6" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">[4]第二条</p><p id="9cb1" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><a class="ae lc" rel="noopener" href="/analytics-vidhya/ii-forecasting-crypto-tendencies-with-deep-learning-in-python-5948909617db">二。利用Python中的深度学习预测加密趋势|作者sébastien Cararo | Analytics vid hya | 2020年12月| Medium </a></p><p id="b20e" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">[5] GitHub知识库</p><p id="7281" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><a class="ae lc" href="https://github.com/Seb943/TBpolo" rel="noopener ugc nofollow" target="_blank"> Seb943/TBpolo:使用Python和Poloniex API(github.com)的盈利交易机器人</a></p><p id="1292" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">[6]全文</p><figure class="jz ka kb kc fd kd"><div class="bz dy l di"><div class="lu kf l"/></div></figure><figure class="jz ka kb kc fd kd er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es lv"><img src="../Images/79fb68a1336be5f4abbb0f6fbd835e68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jq8ndUzBrLl-ynPtKhppaA.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">图8:封面图片</figcaption></figure></div></div>    
</body>
</html>