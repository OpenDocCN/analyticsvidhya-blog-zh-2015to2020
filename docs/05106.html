<html>
<head>
<title>Visualizing data using Wordcloud in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在R中使用Wordcloud可视化数据</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/visualizing-data-using-wordcloud-in-r-2f9d100946f4?source=collection_archive---------13-----------------------#2020-04-11">https://medium.com/analytics-vidhya/visualizing-data-using-wordcloud-in-r-2f9d100946f4?source=collection_archive---------13-----------------------#2020-04-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="d287" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在前一篇文章中，我对twitter数据进行了情感分析。链接可以在<a class="ae jd" rel="noopener" href="/@suyash.m20/sentiment-analysis-of-twitter-data-359fa9f86bd6">这里</a>找到。在这篇文章中，我将使用R的“wordcloud”包来为大量的单词生成一个wordcloud，并根据它们的大小和颜色来理解高频术语。</p><p id="132a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据集:</p><p id="7104" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将使用推特上的数据来创建一个词云。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="3141" class="jn jo hi jj b fi jp jq l jr js">Tweet &lt;- searchTwitteR('lockdown + india' , n=1000)</span></pre><p id="1700" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">图书馆:</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="50d7" class="jn jo hi jj b fi jp jq l jr js">library(wordcloud)<br/>library(tm)<br/>library(SnowballC)<br/>library(wordcloud2)<br/>library(dplyr)</span></pre><p id="ad5a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在安装了库并获取了tweets之后，下一步是清理数据集并将其转换成合适的格式。</p><ol class=""><li id="d687" class="jt ju hi ih b ii ij im in iq jv iu jw iy jx jc jy jz ka kb bi translated">将tweets列表转换成一个向量，并对每个元素应用getText函数。</li><li id="2780" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">然后，创建这个向量的语料库。</li></ol><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="378b" class="jn jo hi jj b fi jp jq l jr js">cleaned_text &lt;-  sapply(Tweet, function(x) x$getText())<br/>cleaned_text_corpus &lt;- Corpus(VectorSource( cleaned_text))</span></pre><p id="2b41" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.删除停用词、标点符号和数字，并将语料库转换为术语-文档矩阵。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="3ee2" class="jn jo hi jj b fi jp jq l jr js">Tweet_cloud &lt;- TermDocumentMatrix( cleaned_text_corpus,<br/>               control = list(removePunctuation = TRUE, <br/>                              stopwords = TRUE , <br/>                              removeNumbers = TRUE))</span></pre><p id="aa1d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.为了将上面生成的稀疏矩阵转换成非稀疏矩阵，我们使用:</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="4b9e" class="jn jo hi jj b fi jp jq l jr js">Tweet_cloud&lt;- as.matrix(Tweet_cloud)<br/>Tweet_cloud &lt;- sort(rowSums(Tweet_cloud), decreasing = TRUE)<br/># high frequency terms appear first</span></pre><p id="cbd8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.最后，创建一个数据框架来查看结果。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="c778" class="jn jo hi jj b fi jp jq l jr js">Tweet_cloud.df = data.frame( word = names(Tweet_cloud) ,frequency = Tweet_cloud)</span></pre><p id="752b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可能需要删除一些无关紧要的词，比如:</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="4eed" class="jn jo hi jj b fi jp jq l jr js">Tweet_cloud.df &lt;- Tweet_cloud.df %&gt;% filter(!word %in% c("since","taken","buzzing"))</span></pre><p id="d745" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，要创建一个wordcloud，调用wordcloud函数并传递以下参数:</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="f65f" class="jn jo hi jj b fi jp jq l jr js">wordcloud(Tweet_cloud.df$word , Tweet_cloud.df$frequency,min.freq=1,  scale = c(0.7,0.7) ,max.words = 500 ,  colors= brewer.pal(8,"Dark2"),random.color=FALSE, random.order=F)</span></pre><figure class="je jf jg jh fd ki er es paragraph-image"><div class="er es kh"><img src="../Images/796f9dd4d771bd3203ceb8721b4b7765.png" data-original-src="https://miro.medium.com/v2/resize:fit:902/format:webp/1*9nyvVk2Ou8C5Q7lka2FOsQ.png"/></div></figure><p id="5c43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">出现在中间的单词出现频率更高。随着我们向外移动，频率降低。同样，单词的颜色随着频率的变化而变化。为了增强视觉效果，我们将使用另一个名为“wordcloud2”的软件包。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="f0c5" class="jn jo hi jj b fi jp jq l jr js">figPath &lt;- "/Users/india.png" <br/>   <br/>wordcloud2(Tweet_cloud.df , figPath = figPath  ,size = 1, color = 'random-dark')</span></pre><figure class="je jf jg jh fd ki er es paragraph-image"><div class="er es kl"><img src="../Images/93795cbc62465fc459620f78086d8d6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*mZh7lBiGGYhv0KDXS9N1fA.png"/></div><figcaption class="km kn et er es ko kp bd b be z dx translated">在印度地图上可视化</figcaption></figure><p id="3847" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">具有较大尺寸的单词比具有较小尺寸的单词具有更高的频率。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="ee10" class="jn jo hi jj b fi jp jq l jr js">letterCloud(Tweet4_cloud.df , word = "lockdown" , wordSize = 1 )</span></pre><figure class="je jf jg jh fd ki er es paragraph-image"><div class="er es kq"><img src="../Images/f9c118aadc4f7cb3ea054bf0dbf19255.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/format:webp/1*nL3YvuZj_c2BOn2Qed5p3g.png"/></div></figure><p id="19b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结论:</p><p id="5a30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用词云的优势在于，它有助于确定搜索词与数据框中出现的各种词之间的关系，从而有针对性地吸引更多受众。</p><p id="8af7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们能够将过多的词语总结到一个框架中。“一图确实胜过千言万语”！<em class="kr">(本例中为2k)</em></p></div></div>    
</body>
</html>