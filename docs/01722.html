<html>
<head>
<title>Resizing /home Partition in Ubuntu 19.10</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">调整Ubuntu 19.10中/home分区的大小</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/resizing-home-partition-in-ubuntu-19-10-a88bcd94479e?source=collection_archive---------1-----------------------#2019-11-11">https://medium.com/analytics-vidhya/resizing-home-partition-in-ubuntu-19-10-a88bcd94479e?source=collection_archive---------1-----------------------#2019-11-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/5e4d00b5f33ab5df7ac8c45ae22ac1a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UcQlDkIynPagNuJw"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae iu" href="https://unsplash.com/@_imkiran?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Sai Kiran Anagani </a>拍摄的照片</figcaption></figure><p id="62b5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以，我最近在我的笔记本电脑上双启动了Ubuntu 19.10，犯了一个错误，给/home目录分配了大约16 GB，给/ (root)目录分配了104 GB。在使用Ubuntu的一个星期里，我发现我犯了一个错误，在软件中心周围安装了很多小程序，几乎完全占用了我的/home分区。因此，作为一个初学开发的学生，我在StackOverflow、UbuntuForums、AskUbuntu和LinuxForums中搜索了一个解决方案，以及如何切换/ (root)目录和/home的分区大小。</p><p id="f7b2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以最后，经过一段时间令人厌倦的搜索，我最终使用了官方文档的一些部分，并汇编了一些其他指南，以创建一个完美的解决方案。虽然我找了很多教程来帮我解围，用GParted似乎没有一个对我有用。就在那时，我开始用自己的方式去克服它。因为我发现这个方法有效，所以我想把它写下来，让所有困惑的Linux用户克服这个问题。那么，我们开始吧。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jt"><img src="../Images/60984258598280e48cd45c7f7d793fa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ohADWjFXJpgzV-Grm2_d0w.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">我的默认工作区</figcaption></figure></div><div class="ab cl jy jz gp ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="hb hc hd he hf"><h1 id="4f24" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">第一部分:第一个</h1><p id="1fbf" class="pw-post-body-paragraph iv iw hi ix b iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo lh jq jr js hb bi translated">因此，首先，从软件中心下载GParted会有所帮助，因为我们知道一些复杂的细节。一旦安装完毕，检查你的分区是否都在它们的位置上，不要碰Windows分区。</p><p id="90ec" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我有6个Windows分区，所以/dev/sda7和/dev/sda8是我的/(根)和/home分区，因此在本指南中使用相同的分区作为示例。目前，它们分别有90 GB和200 MB剩余空间。现在，您想要做的第一件事是减小根分区的大小，这可以通过以下方式实现:</p><pre class="ju jv jw jx fd li lj lk ll aw lm bi"><span id="5abd" class="ln kg hi lj b fi lo lp l lq lr">RIGHT CLICK "dev/sda7" &gt; SELECT "Resize/ Move" &gt; SLIDE THE BAR TO SET THE REQUIRED or ENTER ALLOCATION MEMORY VALUE TO "New Size (MiB):" &gt; PRESS "Resize" &gt; CLICK "Edit" IN MENU &gt; CLICK "Apply All Operations".</span></pre><p id="1722" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，作为一个例子，我给root分配了16 GB，其余的(74 GB)现在作为“未分配的内存”可用。使用以下命令创建一个新分区:</p><pre class="ju jv jw jx fd li lj lk ll aw lm bi"><span id="46c7" class="ln kg hi lj b fi lo lp l lq lr">RIGHT CLICK "unallocated" &gt; SELECT "New" &gt; SLIDE THE BAR TO SET THE REQUIRED or ENTER ALLOCATION MEMORY VALUE TO "New Size (MiB):" &gt; PRESS "Add"&gt; CLICK "Edit" IN MENU &gt; CLICK "Apply All Operations".</span></pre><p id="fb56" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，您将看到刚刚创建的新分区，名为dev/sda9。现在，把那部分留在外面。快速记下/复制分区的UUID，使用:</p><pre class="ju jv jw jx fd li lj lk ll aw lm bi"><span id="6dab" class="ln kg hi lj b fi lo lp l lq lr">RIGHT CLICK "dev/sda9" &gt; SELECT "Information" &gt; COPY "UUID".</span></pre><p id="8ba4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">好了，现在你已经完成了GParted。</p></div><div class="ab cl jy jz gp ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="hb hc hd he hf"><h1 id="03f8" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">第2部分:带Fstab的那个(bing)</h1><p id="bed7" class="pw-post-body-paragraph iv iw hi ix b iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo lh jq jr js hb bi translated">你的Fstab是一个用来告诉Ubuntu在启动时挂载哪些分区的文件。以下命令将复制您当前的Fstab，将年-月-日附加到文件名的末尾，比较两个文件并打开原始文件进行编辑。我们将使用它来让系统知道有一个新的分区供它查看和挂载。现在使用Ctrl+Alt+T启动终端。</p><pre class="ju jv jw jx fd li lj lk ll aw lm bi"><span id="1a92" class="ln kg hi lj b fi lo lp l lq lr">sudo cp /etc/fstab /etc/fstab.$(date +%Y-%m-%d)</span></pre><p id="583b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这里，我们复制了名为Fstab的文件。我们还需要使用下一个命令检查它是否与原始文件匹配:</p><pre class="ju jv jw jx fd li lj lk ll aw lm bi"><span id="85f9" class="ln kg hi lj b fi lo lp l lq lr">cmp /etc/fstab /etc/fstab.$(date +%Y-%m-%d)</span></pre><p id="61b6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">检查之后，我们终于可以使用文本编辑器打开它了:</p><pre class="ju jv jw jx fd li lj lk ll aw lm bi"><span id="6511" class="ln kg hi lj b fi lo lp l lq lr">sudo gedit /etc/fstab</span></pre><p id="0474" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">好了，我们有了Fstab文件，要向其中添加新的分区，请使用下面的语法。用您复制的UUID替换<your_uuid>，并根据您自己的分区格式将ext4改为ext3:</your_uuid></p><pre class="ju jv jw jx fd li lj lk ll aw lm bi"><span id="fb14" class="ln kg hi lj b fi lo lp l lq lr"># (identifier)  (location, eg sda5)   (format, eg ext3 or ext4)      (some settings) <br/>UUID=&lt;Your_UUID&gt;   /media/home    ext4          defaults       0       2</span></pre><p id="4161" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">保存并关闭Fstab文件，并返回到终端:</p><pre class="ju jv jw jx fd li lj lk ll aw lm bi"><span id="bf17" class="ln kg hi lj b fi lo lp l lq lr">sudo mkdir /media/home</span></pre><p id="dbf8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这样，我们就为之前创建的新分区的临时挂载创建了一个新目录。您将看到有一个新挂载的目录，分配了74 GB内存。当我们的要求达到时，我们最终会删除这个目录。</p><p id="7b5c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后，重新启动，或者执行这个命令(对你们这些懒虫来说):</p><pre class="ju jv jw jx fd li lj lk ll aw lm bi"><span id="1c85" class="ln kg hi lj b fi lo lp l lq lr">sudo mount -a</span></pre></div><div class="ab cl jy jz gp ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="hb hc hd he hf"><h1 id="b95b" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">第3部分:有重复的那个</h1><p id="295c" class="pw-post-body-paragraph iv iw hi ix b iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo lh jq jr js hb bi translated">现在，我们需要将文件从旧的/主目录复制到新的媒体/主目录。一种有效的方法是使用以下命令:</p><pre class="ju jv jw jx fd li lj lk ll aw lm bi"><span id="451a" class="ln kg hi lj b fi lo lp l lq lr">sudo rsync -aXS -- progress --exclude='/*/.gvfs' /home/. /media/home/.</span></pre><p id="5cfe" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你会看到你所有的文件都被复制过来，成吨的东西快速滚动。因为我有巨大的16 GB (&gt;200000个文件)，所以我花了大约20分钟来完成这个。存储的数据量将决定这个过程需要多长时间。耐心等待，直到它结束。完成一次后，使用相同的命令多次，以确保所有内容都被完全复制。同样，不要担心命令被任何方式中断(Ctrl+C，等等)。)因为Rsync可以根据需要被中断任意多次，当您再次启动它时，它会检查已经完成了多少。</p><p id="7dc0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当你知道几乎什么都没留下后；使用以下命令检查您的复制是否有效:</p><pre class="ju jv jw jx fd li lj lk ll aw lm bi"><span id="427b" class="ln kg hi lj b fi lo lp l lq lr">sudo diff -r /home /media/home -x ".gvfs/*"</span></pre><p id="5f1f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">此命令检查/home和/media/home中文件的差异。这也可能需要一段时间才能完成。所以，耐心等待。</p></div><div class="ab cl jy jz gp ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="hb hc hd he hf"><h1 id="b3ff" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">第4部分:有开关的那个</h1><p id="408d" class="pw-post-body-paragraph iv iw hi ix b iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo lh jq jr js hb bi translated">现在我们完成了复制，我们现在有了相同数据的两个副本，分别位于/home和/media/home。现在，让我们重命名/media/home，并使它成为我们的默认目录。使用命令返回Fstab:</p><pre class="ju jv jw jx fd li lj lk ll aw lm bi"><span id="7055" class="ln kg hi lj b fi lo lp l lq lr">sudo gedit /etc/fstab</span></pre><p id="22eb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">并且，编辑我们不久前添加的最后几行；将/media/home更改为/home:</p><pre class="ju jv jw jx fd li lj lk ll aw lm bi"><span id="6445" class="ln kg hi lj b fi lo lp l lq lr"># (identifier)  (location, eg sda5)   (format, eg ext3 or ext4)      (some settings) <br/>UUID=&lt;Your_UUID&gt;   /home    ext4          defaults       0       2</span></pre><p id="e203" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">按保存并关闭文件。</p><p id="6656" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下一步需要您使用LiveUSB。所以，插上你的LiveUSB，重启。在GRUB GNU菜单上，使用“试用Ubuntu”；并登录到默认帐户。现在，打开终端，输入:</p><pre class="ju jv jw jx fd li lj lk ll aw lm bi"><span id="e9ab" class="ln kg hi lj b fi lo lp l lq lr">cd / &amp;&amp; sudo mv /home /old_home &amp;&amp; sudo mkdir /home</span></pre><p id="ee2e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们使用LiveUSB的原因是，安装的Ubuntu与/home一起工作，因此，我们不能在使用它时移动它的内容。因此，我们使用前者来提交对已安装的Ubuntu的更改。使用这个命令，我们已经将旧主目录的内容移走，并创建了一个空的“占位符”目录作为新分区的“挂载点”。</p><p id="c08b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，当你移除LiveUSB时，重新启动，启动到普通的Ubuntu。</p></div><div class="ab cl jy jz gp ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="hb hc hd he hf"><h1 id="dda1" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">第五部分:最后一个</h1><p id="ee10" class="pw-post-body-paragraph iv iw hi ix b iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo lh jq jr js hb bi translated">这是最后一步。请注意这一点，以避免任何不必要的数据丢失。打开GParted，用/home挂载点找到dev/sda8和dev/sda9。现在，安装dev/sda9:</p><pre class="ju jv jw jx fd li lj lk ll aw lm bi"><span id="2fbb" class="ln kg hi lj b fi lo lp l lq lr">RIGHT CLICK "dev/sda9" &gt; SELECT "Mount" &gt; CLICK "Edit" IN MENU &gt; CLICK "Apply All Operations".</span></pre><p id="8f74" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，检查文件的属性，查看是否有您需要的分配空间。但是，在我们完成之前，我们还需要卸载dev/sda8。所以，打开终端，输入:</p><pre class="ju jv jw jx fd li lj lk ll aw lm bi"><span id="ae28" class="ln kg hi lj b fi lo lp l lq lr">sudo umount /dev/sda8</span></pre><p id="8201" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这就对了。您可以将未分配的空间找回来，然后将其添加回dev/sda9。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jt"><img src="../Images/e25caa3e97929eba0f3d867e2c3c90fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sbiQElKZdhCqN2Xu2dfhnA.png"/></div></div></figure><p id="6a1f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">并且，如果最后一步没有成功，返回一个错误；重新启动并重试。否则，把它放在评论区，我会尽力帮助你。</p><p id="f011" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是我父亲目前的照片。</p><p id="3d16" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">此外，这是我第一次尝试在媒体上写作，我将非常感谢你对指南的建设性批评。</p><p id="fb57" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我希望我能解决你的问题，你的眼中充满了满足感。如果真的有帮助，请鼓掌，并分享给遇到这个问题的人。日安！</p></div></div>    
</body>
</html>