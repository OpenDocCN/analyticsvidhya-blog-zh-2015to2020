<html>
<head>
<title>Predicting Bike Sharing Demand using RandomForest Algorithm</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用随机森林算法预测自行车共享需求</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/predicting-bike-sharing-demand-using-randomforest-algorithm-32682a7a07e7?source=collection_archive---------16-----------------------#2020-07-12">https://medium.com/analytics-vidhya/predicting-bike-sharing-demand-using-randomforest-algorithm-32682a7a07e7?source=collection_archive---------16-----------------------#2020-07-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="5889" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">深入分析</h2><div class=""/><div class=""><h2 id="3bd3" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">卡格尔竞赛初学者指南</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/b741baa3d734bcc47417619efa0c0807.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fd8xKJrry0QRlqINDAzEsQ.jpeg"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">Jorge Alcala 在<a class="ae jw" href="https://unsplash.com/s/photos/washington-d.c?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="18a7" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ix ki iy kj ja kk jb kl jd km je kn ko bi translated">介绍</h1><p id="22de" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">随着城市化达到前所未有的水平，道路拥堵已成为一个现代问题。交通拥挤与空气污染、安全风险、经济竞争力、可持续增长和社会凝聚力有关。</p><p id="74a1" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">在这种情况下<em class="lq">自行车共享系统</em>成为避免上述问题的主要解决方案。自行车共享计划的好处包括运输灵活性、减少车辆污染物、健康益处、减少拥堵和燃料消耗，以及为个人节省资金。</p><p id="6d97" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">这是一篇关于数据科学的报告，面向开始Kaggle竞赛的初学者和爱好者。以下是对<em class="lq">数据科学</em>竞赛的详细描述，包括<em class="lq">数据操作</em>、<em class="lq">数据可视化</em>以及使用<em class="lq">机器学习算法</em>预测华盛顿市<a class="ae jw" href="https://www.kaggle.com/c/bike-sharing-demand" rel="noopener ugc nofollow" target="_blank"><strong class="kr hs"/></a>自行车共享需求，并给出了预测共享需求的分步指南。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es lr"><img src="../Images/c6c9b2b491a373d02fdd7a2f24cc0223.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*U2ZINEkrGWkZ0tfV5EhskQ.png"/></div></figure><pre class="jh ji jj jk fd ls lt lu lv aw lw bi"><span id="0754" class="lx jy hi lt b fi ly lz l ma mb">## Loading the required packages</span><span id="33ab" class="lx jy hi lt b fi mc lz l ma mb">library(tidyverse)<br/>library(dplyr)<br/>library(scales)<br/>library(ggplot2)<br/>library(glmnet)<br/>library(caret)<br/>library(lubridate)</span></pre><p id="9b52" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">我使用了流行的机器学习元算法RandomForest，这是一种用于分类和回归的集成学习方法。它也是最常用的算法之一，因为它无需超参数调整就能产生很好的效果。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es md"><img src="../Images/f262f84424ab34043c9788323953d23a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EagtUIn7gSonJpAO"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">照片由<a class="ae jw" href="https://unsplash.com/@sebastian_unrau?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Sebastian Unrau </a>在<a class="ae jw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><pre class="jh ji jj jk fd ls lt lu lv aw lw bi"><span id="77a6" class="lx jy hi lt b fi ly lz l ma mb">## Importing the data <br/>biketrain &lt;- read.csv("../input/bike-sharing-demand/train.csv")<br/>biketest &lt;- read.csv("../input/bike-sharing-demand/test.csv")</span><span id="f4f0" class="lx jy hi lt b fi mc lz l ma mb">## Making equal no. of columns in boths datasets <br/>biketest$registered=0<br/>biketest$casual=0<br/>biketest$count=0</span><span id="af54" class="lx jy hi lt b fi mc lz l ma mb">## Joining both train and test datasets</span><span id="0e07" class="lx jy hi lt b fi mc lz l ma mb">bikesharing &lt;- rbind(biketrain, biketest)</span><span id="50cb" class="lx jy hi lt b fi mc lz l ma mb">## Inspecting the data</span><span id="66ea" class="lx jy hi lt b fi mc lz l ma mb">summary(bikesharing)</span><span id="0b54" class="lx jy hi lt b fi mc lz l ma mb">## season -  1 = spring, 2 = summer, 3 = fall, 4 = winter <br/>## weather - 1: Clear, Few clouds, Partly cloudy, Partly cloudy ; 2: Mist + Cloudy, Mist + Broken clouds, Mist + Few clouds, Mist ;3: Light Snow, Light Rain + Thunderstorm + Scattered clouds, Light Rain + Scattered clouds ;4: Heavy Rain + Ice Pallets + Thunderstorm + Mist, Snow + Fog</span><span id="9e9b" class="lx jy hi lt b fi mc lz l ma mb">## Converting a few a variables into factors<br/>bikesharing$season &lt;- as.factor(bikesharing$season)<br/>bikesharing$weather &lt;- as.factor(bikesharing$weather)<br/>bikesharing$holiday &lt;- as.factor(bikesharing$holiday)</span></pre></div><div class="ab cl me mf gp mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="hb hc hd he hf"><h1 id="bf67" class="jx jy hi bd jz ka ml kc kd ke mm kg kh ix mn iy kj ja mo jb kl jd mp je kn ko bi translated"><strong class="ak">特色工程</strong></h1><p id="f341" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">让我们处理第一个变量<em class="lq"> datetime </em>，因为我们可以将它分解为许多其他有意义的变量，如一天中的小时、一个月中的天、一周中的天、一天中的小时、月、年，这些变量对进一步的数据分析很有用，我们可以将它们用于预测共享需求。</p><p id="f55e" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated"><strong class="kr hs"> 1。小时</strong></p><pre class="jh ji jj jk fd ls lt lu lv aw lw bi"><span id="e1c0" class="lx jy hi lt b fi ly lz l ma mb">## Extracting hour from date time</span><span id="1d16" class="lx jy hi lt b fi mc lz l ma mb">bikesharing$hour = substr(bikesharing$datetime,12,13)<br/>bikesharing$hour &lt;- as.factor(bikesharing$hour)</span><span id="c729" class="lx jy hi lt b fi mc lz l ma mb">## plotting the graph</span><span id="00f8" class="lx jy hi lt b fi mc lz l ma mb">ggplot(data=bikesharing, aes(x = hour, y=count, fill=hour))+geom_bar(stat = "identity")+ggtitle(label = "Hourly Comparison with Seasons")+theme_minimal()+theme(plot.title = element_text(hjust = 0.5, lineheight = 0.8, face = "bold"),legend.position = "none")+xlab("Weekdays")+ylab("Count")</span></pre><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mq"><img src="../Images/0a9d1134b5749a4d25f906f91dc7e776.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XtqUjZtV-Jyd8pgiwK9wEQ.png"/></div></div></figure><p id="8a62" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">城市中的人们在下午5-8点之间使用自行车最多，在办公时间上午8-9点之间需求也激增，可能是为了避免交通堵塞。</p><pre class="jh ji jj jk fd ls lt lu lv aw lw bi"><span id="3c35" class="lx jy hi lt b fi ly lz l ma mb">## Season and Hour vs Count Graph</span><span id="9a65" class="lx jy hi lt b fi mc lz l ma mb">ggplot(bikesharing, aes(hour, count)) + <br/>  geom_bar(aes(fill = season), position = 'dodge', stat = 'identity') + <br/>  ggtitle(label="Count with Hours of Day and Seasons") + scale_y_continuous(labels = comma) + theme(plot.title = element_text(hjust = 0.5, lineheight = 0.8, face = "bold")) + theme_minimal()</span></pre><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mr"><img src="../Images/82de0b0b22f6e9356642811baf5652ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rcGQcVCt34Zd79CrMnKPJQ.png"/></div></div></figure><p id="488e" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">秋季和冬季是一天中大部分时间需求量最高的主要季节。根据自行车专家的说法，秋季被认为是骑自行车的最佳季节，因为骑完自行车后你不会浑身是汗，树叶的颜色会不断变化，骑自行车感觉很舒服。</p><blockquote class="ms"><p id="f8b2" class="mt mu hi bd mv mw mx my mz na nb lk dx translated"><em class="nc">“春去春来，一念天真，</em></p><p id="7081" class="mt mu hi bd mv mw mx my mz na nb lk dx translated"><em class="nc">夏天过去了，人们记得自己的活力，</em></p><p id="5b48" class="mt mu hi bd mv mw mx my mz na nb lk dx translated"><em class="nc">秋天过去了，人们记得自己的崇敬，</em></p><p id="794c" class="mt mu hi bd mv mw mx my mz na nb lk dx translated">冬天过去了，一个人记得自己的毅力</p></blockquote><h2 id="9b00" class="lx jy hi bd jz nd ne nf kd ng nh ni kh ky nj nk kj lc nl nm kl lg nn no kn ho bi translated"><strong class="ak"> 2。日</strong></h2><pre class="jh ji jj jk fd ls lt lu lv aw lw bi"><span id="9e9e" class="lx jy hi lt b fi ly lz l ma mb">## Daylight</span><span id="9dbf" class="lx jy hi lt b fi mc lz l ma mb">bikesharing$light &lt;- as.factor(bikesharing$hour == c(7:19))<br/></span><span id="bc0e" class="lx jy hi lt b fi mc lz l ma mb">## Holiday</span><span id="277b" class="lx jy hi lt b fi mc lz l ma mb">bikesharing$holiday &lt;- as.factor(bikesharing$holiday)</span><span id="28f1" class="lx jy hi lt b fi mc lz l ma mb">## Weeked or not</span><span id="c3b1" class="lx jy hi lt b fi mc lz l ma mb">bikesharing$weekend=0<br/>bikesharing$weekend[bikesharing$day=="Sunday" | bikesharing$day=="Saturday" ]=1</span><span id="60e1" class="lx jy hi lt b fi mc lz l ma mb">## Free time in a week</span><span id="a3c2" class="lx jy hi lt b fi mc lz l ma mb">bikesharing$officehour &lt;- as.factor(bikesharing$hour == c(9:17))<br/>bikesharing$freehourworkday &lt;- as.factor(bikesharing$officehour == FALSE &amp;&amp; bikesharing$holiday == 0)</span><span id="b5fa" class="lx jy hi lt b fi mc lz l ma mb">## Day of the Week</span><span id="caeb" class="lx jy hi lt b fi mc lz l ma mb">bikesharing$date = substr(bikesharing$datetime,1,10)<br/>days&lt;-weekdays(as.Date(bikesharing$date))<br/>bikesharing$days=days</span><span id="3d2a" class="lx jy hi lt b fi mc lz l ma mb">bikesharing$days &lt;- factor(bikesharing$days, levels=c("Monday","Tuesday", "Wednesday", "Thursday", "Friday", "Saturday","Sunday"))</span><span id="6672" class="lx jy hi lt b fi mc lz l ma mb">## Weekdays Graph</span><span id="4653" class="lx jy hi lt b fi mc lz l ma mb">ggplot(data=bikesharing, aes(x = days, y=casual, fill=days))+geom_bar(stat = "identity")+ggtitle(label = "Weekday Comparison of Casual Users")+theme_minimal()+theme(plot.title = element_text(hjust = 0.5, lineheight = 0.8, face = "bold"),legend.position = "none")+xlab("Weekdays")+ylab("Casual Count")+ scale_y_continuous(labels = comma)</span></pre><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mr"><img src="../Images/32c0e5378434800886106094e360c924.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LapAsvIggAkLt0rSYrX2bA.png"/></div></div></figure><p id="a4e6" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">临时用户更多是在周末，也就是说，他们不需要注册，因为他们只在空闲时间骑自行车。这些可能是以前的用户。</p><pre class="jh ji jj jk fd ls lt lu lv aw lw bi"><span id="e06a" class="lx jy hi lt b fi ly lz l ma mb">## Registered Users and Count across Weekdays</span><span id="44de" class="lx jy hi lt b fi mc lz l ma mb">ggplot(data=bikesharing, aes(x = days, y=registered, fill=days))+geom_bar(stat = "identity")+ggtitle(label = "Weekday Comparison of Registered Users")+theme_minimal()+theme(plot.title = element_text(hjust = 0.5, lineheight = 0.8, face = "bold"),legend.position = "none")+xlab("Weekdays")+ylab("Registered Count") + scale_y_continuous(labels = comma)</span></pre><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mr"><img src="../Images/aa6575b36e0b3f0f8aeff12d65950a1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ycdtmzqdW4XQqhwxxCsNoA.png"/></div></div></figure><p id="7518" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">注册用户的数量在工作日达到高峰，他们使用自行车来避免交通堵塞并准时到达办公室，因此他们必须已经注册，因为他们几乎每天都需要自行车。</p><pre class="jh ji jj jk fd ls lt lu lv aw lw bi"><span id="2823" class="lx jy hi lt b fi ly lz l ma mb">ggplot(data=bikesharing, aes(x = days, y=count, fill=days))+geom_bar(stat = "identity")+ggtitle(label = "Weekday Comparison")+theme_minimal()+theme(plot.title = element_text(hjust = 0.5, lineheight = 0.8, face = "bold"),legend.position = "none")+xlab("")+ylab("Total Count") + scale_y_continuous(labels = comma)</span></pre><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mr"><img src="../Images/4369c9166792c9c445685e263188f731.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TscPLP91Qgzfo0K6nYTnsg.png"/></div></div></figure><pre class="jh ji jj jk fd ls lt lu lv aw lw bi"><span id="945e" class="lx jy hi lt b fi ly lz l ma mb">## Weekday and Weather Comparison</span><span id="7096" class="lx jy hi lt b fi mc lz l ma mb">ggplot(data=bikesharing, aes(x=days, y=count, fill=weather)) +<br/>  geom_bar(stat="identity", position=position_dodge()) + ggtitle(label ="Day of the Week and Weather with Count Comparison") +theme_minimal()+theme(plot.title = element_text(hjust = 0.5, lineheight = 0.8, face = "bold"))+xlab("")+ylab("")</span></pre><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mr"><img src="../Images/c81b1d3c5d53987ecc6fd71546eaf528.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6IWCwvakYTegqontJ4j-QQ.png"/></div></div></figure><p id="d76b" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated"><strong class="kr hs"> 3。月份</strong></p><pre class="jh ji jj jk fd ls lt lu lv aw lw bi"><span id="2825" class="lx jy hi lt b fi ly lz l ma mb">## Converting date to a date format in R</span><span id="d78d" class="lx jy hi lt b fi mc lz l ma mb">bikesharing$date &lt;- as.POSIXct(bikesharing$date)</span><span id="7c5f" class="lx jy hi lt b fi mc lz l ma mb">## Extracting Month Name</span><span id="a113" class="lx jy hi lt b fi mc lz l ma mb">bikesharing$MONTHS &lt;- format(bikesharing$date,"%B")</span><span id="b8bb" class="lx jy hi lt b fi mc lz l ma mb">bikesharing$MONTHS &lt;- factor(bikesharing$MONTHS, levels=c("January","February", "March", "April", "May", "June","July", "August", "September", "October", "November", "December"))</span><span id="8c3d" class="lx jy hi lt b fi mc lz l ma mb">## Monthly Graph</span><span id="ac6a" class="lx jy hi lt b fi mc lz l ma mb">ggplot(data=bikesharing, aes(x = MONTHS, y=count, fill=MONTHS))+geom_bar(stat = "identity")+ggtitle(label = "Monthly Comparison of Users")+theme_minimal()+theme(plot.title = element_text(hjust = 0.5, lineheight = 0.8, face = "bold"), legend.position = "none")+xlab("")+ylab("Count")</span></pre><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mr"><img src="../Images/0dd7fddf0e0f90ebc904617d27cbbac8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W0r0Jdp8rzy-MoWIVlq5Fg.png"/></div></div></figure><p id="8cd6" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">下半年可能是骑自行车的好时机，我们可以看到，需求高峰可以在秋季看到。</p><pre class="jh ji jj jk fd ls lt lu lv aw lw bi"><span id="3e0f" class="lx jy hi lt b fi ly lz l ma mb">## Month and Weekday vs Count</span><span id="d5cf" class="lx jy hi lt b fi mc lz l ma mb">ggplot(data=bikesharing, aes(x = MONTHS, y=count, fill=days))+geom_bar(stat = "identity")+ggtitle(label = "Users Count compared in Months and Weekdays")+theme_minimal()+theme(plot.title = element_text(hjust = 0.5, lineheight = 0.8, face = "bold"))+xlab("")+ylab("")</span></pre><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mr"><img src="../Images/6bd2b3719e719b403ff37301bb4d6361.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4j6GJw3-JEQJMIeuzv6i2A.png"/></div></div></figure><pre class="jh ji jj jk fd ls lt lu lv aw lw bi"><span id="d129" class="lx jy hi lt b fi ly lz l ma mb">## Day of the Month Extraction</span><span id="388f" class="lx jy hi lt b fi mc lz l ma mb">bikesharing$dom = substr(bikesharing$datetime,9,10)<br/>bikesharing$dom &lt;- as.numeric(bikesharing$dom)</span><span id="e478" class="lx jy hi lt b fi mc lz l ma mb">## Season and Day of Month vs Count of Users</span><span id="cc83" class="lx jy hi lt b fi mc lz l ma mb">ggplot(data=bikesharing, aes(x = dom, y=count, fill=season))+geom_bar(stat = "identity")+ggtitle(label = "Day of the Month with Season Comparison")+theme_minimal()+theme(plot.title = element_text(hjust = 0.5, lineheight = 0.8, face = "bold"))+xlab("Days upto 19th")+ylab("Count") + xlim(01,19)</span></pre><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mr"><img src="../Images/5f344acd37d7df8f2989e33f86e6954c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gdHyto9m3TgRxAPzIuEwpg.png"/></div></div></figure><pre class="jh ji jj jk fd ls lt lu lv aw lw bi"><span id="c28c" class="lx jy hi lt b fi ly lz l ma mb"><em class="lq">## Visualizing the demand only till 19 th of every Month as we have to predict the number of users from 20th to end of each month</em></span><span id="1aba" class="lx jy hi lt b fi mc lz l ma mb">## Plotting a Heat Tile Graph</span><span id="d888" class="lx jy hi lt b fi mc lz l ma mb">ggplot(bikesharing, aes(dom, hour, fill = count)) + geom_tile(color = "white") +ggtitle(label = "Day of the Month and Hour of the Day Comparison")+theme_minimal()+theme(plot.title = element_text(hjust = 0.5, lineheight = 0.8, face = "bold")) + xlab("Day of the Month(Till 19th)") + ylab("Hour")</span></pre><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mr"><img src="../Images/fa30a437fe66a23780644d414e05c1c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kgtjus1JoALnfuVqITfx1w.png"/></div></div></figure><p id="18a4" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated"><strong class="kr hs">我们可以处理更多的变量，以提取更多的附加信息</strong></p><p id="3683" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">我们在这里还能做什么？可以从湿度、温度、风速、工作日中提取有用的信息，让我们来看看。</p><p id="b328" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated"><strong class="kr hs"> 4。天气状况</strong></p><p id="87e5" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">最好的骑行条件是阳光充足，能见度高，风速小，湿度小，以避免在高温下出汗。</p><pre class="jh ji jj jk fd ls lt lu lv aw lw bi"><span id="0b33" class="lx jy hi lt b fi ly lz l ma mb">## Ideal Condition to ride a bike</span><span id="554a" class="lx jy hi lt b fi mc lz l ma mb">bikesharing$Ideal &lt;- as.factor(bikesharing$weather == 1 &amp;&amp; bikesharing$windspeed &lt; 20 &amp;&amp; bikesharing$humidity &lt; 25 &amp;&amp; bikesharing$atemp &lt; 35)</span><span id="f897" class="lx jy hi lt b fi mc lz l ma mb">## Calculation Pollution(Ozone Content) using Temp, Windspeed and Humidity</span><span id="39b3" class="lx jy hi lt b fi mc lz l ma mb">bikesharing$ozone &lt;- 5.3*(bikesharing$windspeed)+0.4*(bikesharing$temp)+0.1*(bikesharing$humidity)</span><span id="51f3" class="lx jy hi lt b fi mc lz l ma mb">## Plotting Weather and Temp vs Count Graph</span><span id="0088" class="lx jy hi lt b fi mc lz l ma mb">ggplot(bikesharing, aes(temp, count)) + geom_jitter(aes(colour = weather)) + ggtitle(label ="Effect of Weather and Temperature on Count")+theme_minimal()+theme(plot.title = element_text(hjust = 0.5, lineheight = 0.8, face = "bold")) + xlab("Temperature") + ylab("Count of Users")</span></pre><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mr"><img src="../Images/7b36f703f5c8eed98be042fef2fac590.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RrWJ9jvcyWSObDVxI9MAUQ.png"/></div></div></figure><pre class="jh ji jj jk fd ls lt lu lv aw lw bi"><span id="c6a3" class="lx jy hi lt b fi ly lz l ma mb">## Windspeed &amp; Hour of the day vs Users' Count</span><span id="2f37" class="lx jy hi lt b fi mc lz l ma mb">ggplot(bikesharing, aes(windspeed, hour)) + geom_jitter(color= "blue") + theme_minimal() + ggtitle(label = "Windspeed and Hour of the Day with Users' Count")+theme_minimal()+theme(plot.title = element_text(hjust = 0.5, lineheight = 0.8, face = "bold")) + xlab("Windspeed") + ylab("Hour")</span></pre><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mr"><img src="../Images/81e5bb502ea669aebec1aa61170bde8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wnmwhFI-86FUcckv02e3hQ.png"/></div></div></figure><p id="6f2c" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">创建新的日志变量</p><ul class=""><li id="1533" class="np nq hi kr b ks ll kv lm ky nr lc ns lg nt lk nu nv nw nx bi translated">因为我们知道因变量有自然离群值，所以我们将预测因变量的日志。</li><li id="2392" class="np nq hi kr b ks ny kv nz ky oa lc ob lg oc lk nu nv nw nx bi translated">分别预测注册用户和临时用户的自行车需求，logcas=log(临时+1)和logreg=log(注册+1)，加1处理零值。</li></ul><pre class="jh ji jj jk fd ls lt lu lv aw lw bi"><span id="d0ef" class="lx jy hi lt b fi ly lz l ma mb">bikesharing$logcas &lt;- log(bikesharing$casual + 1)<br/>bikesharing$logreg &lt;- log(bikesharing$registered + 1)</span></pre></div><div class="ab cl me mf gp mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="hb hc hd he hf"><h1 id="3059" class="jx jy hi bd jz ka ml kc kd ke mm kg kh ix mn iy kj ja mo jb kl jd mp je kn ko bi translated">模型部署和预测</h1><pre class="jh ji jj jk fd ls lt lu lv aw lw bi"><span id="9ba8" class="lx jy hi lt b fi ly lz l ma mb">## Converting numeric values to factor for randomForest</span><span id="6815" class="lx jy hi lt b fi mc lz l ma mb">bikesharing = bikesharing %&gt;% mutate_if(is.factor, as.numeric)</span><span id="a61d" class="lx jy hi lt b fi mc lz l ma mb">str(bikesharing)</span><span id="bfe9" class="lx jy hi lt b fi mc lz l ma mb">## Train and Test data separation</span><span id="d2fc" class="lx jy hi lt b fi mc lz l ma mb">biketrain &lt;- bikesharing[1:10886, ]<br/>biketest &lt;- bikesharing[10887:17379, ]</span><span id="c53e" class="lx jy hi lt b fi mc lz l ma mb">## Deploy the model</span><span id="84e2" class="lx jy hi lt b fi mc lz l ma mb">set.seed(8234)<br/>library(randomForest)</span><span id="711a" class="lx jy hi lt b fi mc lz l ma mb">## Casual</span><span id="00e6" class="lx jy hi lt b fi mc lz l ma mb">bkmodel &lt;- randomForest(logcas ~ season + holiday + workingday + weather + temp + atemp + humidity + windspeed + Ideal + hour + MONTHS + days + officehour + freehourworkday + weekend + ozone + light + dom, data = biketrain)</span><span id="f634" class="lx jy hi lt b fi mc lz l ma mb"># Predict</span><span id="b67e" class="lx jy hi lt b fi mc lz l ma mb">predict1 &lt;- predict(bkmodel, biketest)<br/>summary(bkmodel)</span><span id="0d44" class="lx jy hi lt b fi mc lz l ma mb">## Registered </span><span id="0ecc" class="lx jy hi lt b fi mc lz l ma mb">set.seed(9234)<br/>bkmodel1 &lt;- randomForest(logreg ~ season + holiday + workingday + weather + temp + atemp + humidity + windspeed + Ideal + hour + MONTHS + days + officehour + freehourworkday + weekend + ozone + light + dom, data = biketrain)</span><span id="e32d" class="lx jy hi lt b fi mc lz l ma mb"># Predict</span><span id="1946" class="lx jy hi lt b fi mc lz l ma mb">predict2 &lt;- predict(bkmodel1, biketest)<br/></span><span id="d876" class="lx jy hi lt b fi mc lz l ma mb">biketest$logreg = predict2<br/>biketest$logcas = predict1</span><span id="5899" class="lx jy hi lt b fi mc lz l ma mb">biketest$casual = exp(biketest$logcas)<br/>biketest$registered = exp(biketest$logreg)</span><span id="4e78" class="lx jy hi lt b fi mc lz l ma mb">## Saving submission file as per requirement of competition</span><span id="8937" class="lx jy hi lt b fi mc lz l ma mb">biketest$count=biketest$casual+biketest$registered<br/>bike&lt;-data.frame(datetime=biketest$datetime,count=biketest$count)<br/>write.csv(bike,file="bikeshare.csv",row.names=FALSE)</span></pre><p id="27c2" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">这是探索性的数据分析，适合初学者，可以做得更复杂。这些结果可以让你进入Kaggle比赛的前20个百分点，这对初学者来说是非常好的比赛。像ntree、importance、npreb和proximity这样的元素可以添加到随机森林模型中以提高其效率。</p><p id="04d3" class="pw-post-body-paragraph kp kq hi kr b ks ll is ku kv lm iv kx ky ln la lb lc lo le lf lg lp li lj lk hb bi translated">最初作为<a class="ae jw" href="https://www.kaggle.com/rutvikdeshpande/bike-sharing-demand" rel="noopener ugc nofollow" target="_blank"> Kaggle笔记本</a>出版。</p></div></div>    
</body>
</html>