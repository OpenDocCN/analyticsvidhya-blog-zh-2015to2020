<html>
<head>
<title>Evaluation Metrics: Regression</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">评估指标:回归</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/evaluation-metrics-regression-9fdf3e89541f?source=collection_archive---------26-----------------------#2020-11-01">https://medium.com/analytics-vidhya/evaluation-metrics-regression-9fdf3e89541f?source=collection_archive---------26-----------------------#2020-11-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="049a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你将如何评价你的回归模型？</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/d102b51f28a4c6168bf3eac89e45b1bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jy3D-Nm53_tVDDMvaNmjlA.jpeg"/></div></div></figure><h1 id="713d" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">什么是机器学习中的模型评估？</strong></h1><ul class=""><li id="d171" class="kn ko hi ih b ii kp im kq iq kr iu ks iy kt jc ku kv kw kx bi translated">模型评估是检查我们的模型准确与否的过程。</li><li id="12fa" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">Scikit-learn库提供了不同类型的评估指标，我们可以使用这些指标来检查模型性能。</li><li id="63d0" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">我们也可以基于我们的数据集和领域需求来实现我们自己的评估指标。</li></ul><h1 id="c171" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">常用回归评估指标:</strong></h1><ol class=""><li id="3d80" class="kn ko hi ih b ii kp im kq iq kr iu ks iy kt jc ld kv kw kx bi translated">平均绝对误差</li><li id="b43d" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ld kv kw kx bi translated">均方误差</li><li id="ea3b" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ld kv kw kx bi translated">均方根误差(RMSE)</li><li id="df21" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ld kv kw kx bi translated">r平方</li></ol><h1 id="59ba" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak"> 1。平均绝对误差(MAE): </strong></h1><ul class=""><li id="1123" class="kn ko hi ih b ii kp im kq iq kr iu ks iy kt jc ku kv kw kx bi translated">用于检查我们的模型<strong class="ih hj">有多不准确</strong>。</li><li id="1697" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated"><strong class="ih hj"> MAE =绝对误差之和/样本数量</strong></li><li id="38c0" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">绝对误差=实际数据和预测数据之间的绝对差异。</li><li id="adf8" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">下图显示了2个不同模型的预测值和各自的绝对误差。</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es le"><img src="../Images/c78325d2af1af546b30825793c5aa9df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qOn6A9CK8h9obqO9Meuj9w.png"/></div></div></figure><p id="d054" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">计算两个模型的MAE:</strong></p><p id="a7ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">MAE_Model_2 = 32996.03 / 5 = 6599.20</p><p id="76ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">MAE_Model_4= 16670.90 / 5 = 3334.18</p><p id="d5c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用<strong class="ih hj"> scikit-learn </strong>也可以达到同样的效果:</p><pre class="je jf jg jh fd lf lg lh li aw lj bi"><span id="6754" class="lk jq hi lg b fi ll lm l ln lo">from sklearn.metrics import mean_absolute_error<br/>print(mean_absolute_error(actual, prediction))</span></pre><blockquote class="lp lq lr"><p id="47ba" class="if ig ls ih b ii ij ik il im in io ip lt ir is it lu iv iw ix lv iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="hi">注:</em> </strong></p><p id="da3f" class="if ig ls ih b ii ij ik il im in io ip lt ir is it lu iv iw ix lv iz ja jb jc hb bi translated">MAE_Model_4低于MAE_Model_2，因此我们可以说用于预测prediction_4的模型更好。</p><p id="c0fc" class="if ig ls ih b ii ij ik il im in io ip lt ir is it lu iv iw ix lv iz ja jb jc hb bi translated"><strong class="ih hj">该指标未能惩罚预测中的大误差，因为它使用了实际数据和预测数据之间的简单差异。</strong></p></blockquote><h1 id="a636" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">2.均方差(MSE):</h1><ul class=""><li id="c4e5" class="kn ko hi ih b ii kp im kq iq kr iu ks iy kt jc ku kv kw kx bi translated">用来检查<strong class="ih hj">我们的模型</strong>有多不准确。</li><li id="a260" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">MSE比MAE更苛刻。MAE简单地测量预测值和实际值之间的距离，其中MSE是距离的平方。</li><li id="4e10" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated"><strong class="ih hj"> MSE =误差平方和/样本数量</strong></li><li id="ad77" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">平方误差=实际数据和预测数据之间的平方差。</li><li id="e037" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">下图显示了2个不同模型的预测值和各自的平方误差。</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lw"><img src="../Images/07f596da76a796c2f12349b87de086c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k9VmfOxLw35F_6R3EOL59A.png"/></div></div></figure><p id="9561" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">计算两个模型的MSE:</strong></p><p id="86dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">MSE _ Model _ 2 = 412552977.70/5 = 82510595.53</p><p id="d4b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">MSE _ Model _ 4 = 177061670.31/5 = 35412334.06</p><p id="2ebc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用<strong class="ih hj"> scikit-learn </strong>也可以达到同样的效果:</p><pre class="je jf jg jh fd lf lg lh li aw lj bi"><span id="0201" class="lk jq hi lg b fi ll lm l ln lo">from sklearn.metrics import mean_squared_error<br/>print(mean_squared_error(actual, prediction))</span></pre><blockquote class="lp lq lr"><p id="6361" class="if ig ls ih b ii ij ik il im in io ip lt ir is it lu iv iw ix lv iz ja jb jc hb bi translated"><strong class="ih hj">注:</strong></p><p id="b0c6" class="if ig ls ih b ii ij ik il im in io ip lt ir is it lu iv iw ix lv iz ja jb jc hb bi translated">MSE惩罚较大的错误，减少小错误的影响。</p><p id="9a8d" class="if ig ls ih b ii ij ik il im in io ip lt ir is it lu iv iw ix lv iz ja jb jc hb bi translated"><strong class="ih hj">例:误差小于1，平方时会收缩。另一方面，如果该误差大于1，对其求平方会使其对总误差的贡献更大。</strong></p></blockquote><h1 id="08dd" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">3.均方根误差(RMSE):</h1><ul class=""><li id="0c8f" class="kn ko hi ih b ii kp im kq iq kr iu ks iy kt jc ku kv kw kx bi translated">用来检查<strong class="ih hj">我们的模型</strong>有多不准确。</li><li id="3258" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">这其实就是MSE的平方根。</li><li id="c065" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated"><strong class="ih hj"> RMSE = sqrt(误差平方和/样本数)</strong></li></ul><p id="8b58" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">计算两个模型的MSE:</strong></p><p id="c873" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">RMSE _模型_2 = sqrt(82510595.53) = 9083.53</p><p id="4f64" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">RMSE _模型_4= sqrt(35412334.06) = 5950.82</p><p id="7214" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用<strong class="ih hj"> scikit-learn </strong>也可以达到同样的效果:</p><pre class="je jf jg jh fd lf lg lh li aw lj bi"><span id="bb38" class="lk jq hi lg b fi ll lm l ln lo">from sklearn.metrics import mean_squared_error<br/>print(np.sqrt(mean_squared_error(actual, prediction)))<br/>                       or<br/>print(mean_squared_error(actual, prediction, squared=False))</span></pre><blockquote class="lp lq lr"><p id="4737" class="if ig ls ih b ii ij ik il im in io ip lt ir is it lu iv iw ix lv iz ja jb jc hb bi translated"><strong class="ih hj">注:</strong></p><p id="f9b5" class="if ig ls ih b ii ij ik il im in io ip lt ir is it lu iv iw ix lv iz ja jb jc hb bi translated"><strong class="ih hj">RMSE _ Model _ 4的RMSE小于RMSE_Model_2。</strong></p><p id="596a" class="if ig ls ih b ii ij ik il im in io ip lt ir is it lu iv iw ix lv iz ja jb jc hb bi translated"><strong class="ih hj"> RMSE是误差的标准差。换句话说，这是检验误差传播的一种方法。</strong></p><p id="d217" class="if ig ls ih b ii ij ik il im in io ip lt ir is it lu iv iw ix lv iz ja jb jc hb bi translated"><strong class="ih hj">RMSE值越低表示拟合度越好。</strong></p></blockquote><h1 id="cebf" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">4.r平方:</h1><ul class=""><li id="27c6" class="kn ko hi ih b ii kp im kq iq kr iu ks iy kt jc ku kv kw kx bi translated">用于检查我们的模型有多准确。</li><li id="19c4" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">r平方解释了输入变量的方差在多大程度上解释了输出变量的方差。</li><li id="2746" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">因此，如果模型的R平方是0.50，那么大约一半的观察到的变化可以用模型的输入来解释。</li><li id="454e" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">r平方值的范围从0到1，通常表示为0%到100%的百分比。</li><li id="bcc3" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">计算R平方的公式:</li></ul><p id="cf6a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，</p><p id="a675" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">y =实际值，y_hat =预测值，y_bar =实际值的平均值</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lx"><img src="../Images/fcdc3961ce62b3f4377ebb094e0acd4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:576/format:webp/1*_KaUdD4PAToV65kZoDI5rQ.png"/></div><figcaption class="ly lz et er es ma mb bd b be z dx translated">r平方公式</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mc"><img src="../Images/dbba7d10bc856f3301475d6a00c366ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZsxIfgRov7GHqATmGvVQ1g.png"/></div></div></figure><blockquote class="lp lq lr"><p id="2621" class="if ig ls ih b ii ij ik il im in io ip lt ir is it lu iv iw ix lv iz ja jb jc hb bi translated"><strong class="ih hj">注:</strong></p><p id="0b43" class="if ig ls ih b ii ij ik il im in io ip lt ir is it lu iv iw ix lv iz ja jb jc hb bi translated"><strong class="ih hj">R平方的局限性在于，它不会告诉你你选择的模型是好是坏，也不会告诉你数据和预测是否有偏差。</strong></p></blockquote><h1 id="13bb" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">创建您自己的评估指标:</h1><ul class=""><li id="06ee" class="kn ko hi ih b ii kp im kq iq kr iu ks iy kt jc ku kv kw kx bi translated">梅，MSE和RMSE使用绝对误差和平方误差。</li><li id="5613" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">这里，我们无法区分n个样本中，有多少预测值低于拟合线，有多少预测值高于拟合线。</li><li id="64b7" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">此外，如果目标变量的值范围很大，那么上述指标也将无法显示真实情况。在这种情况下，我们应该使用百分比差异，而不是简单的差异。</li><li id="882d" class="kn ko hi ih b ii ky im kz iq la iu lb iy lc jc ku kv kw kx bi translated">例如，如果实际值是10，预测值是15，那么我们可以说它是差预测，但如果实际值是1000，预测值是1015，那么我们可以说它是好预测，即使差异是相同的。在第一种情况下，差异为<strong class="ih hj"> 50% </strong>，而在第二种情况下，差异为<strong class="ih hj"> 0.5% </strong></li></ul><h1 id="c4a6" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">总结:</strong></h1><p id="a352" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq md is it iu me iw ix iy mf ja jb jc hb bi translated">为机器学习模型选择合适的评价指标是非常重要的。</p><p id="6a5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最常用的评估指标是MAE、MSE、RMSE和R平方。</p><p id="40de" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个人也可以实现自己的评估指标。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mg"><img src="../Images/4877a290ff4d58be39d0e10870fe4828.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*whiX7HHXTrClaLtkpEbpKQ.png"/></div></div></figure></div></div>    
</body>
</html>