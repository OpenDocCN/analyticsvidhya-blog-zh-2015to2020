<html>
<head>
<title>Docker â€” Dev, Debug, Deploy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Docker â€”å¼€å‘ã€è°ƒè¯•ã€éƒ¨ç½²</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/analytics-vidhya/docker-dev-debug-deploy-15b232eed53e?source=collection_archive---------10-----------------------#2019-12-21">https://medium.com/analytics-vidhya/docker-dev-debug-deploy-15b232eed53e?source=collection_archive---------10-----------------------#2019-12-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/1928502cb67801c8480bce3ae53db78f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jzQaYzFydP79r3hN"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">ç…§ç‰‡ç”±<a class="ae iu" href="https://unsplash.com/@katetandy?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">å‡¯ç‰¹Â·å¦è¿ª</a>åœ¨<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šæ‹æ‘„</figcaption></figure><h1 id="e566" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">ä¸ºä»€ä¹ˆ</h1><p id="595c" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">ä½œä¸ºä¸€åä»äº‹å‡ ä¸ªé¡¹ç›®çš„å¼€å‘äººå‘˜ï¼Œæˆ‘æƒ³æ‰¾åˆ°ä¸€ç§æ–¹æ³•-</p><ul class=""><li id="0075" class="kr ks hi jv b jw kt ka ku ke kv ki kw km kx kq ky kz la lb bi translated">æˆ‘çš„å®‰è£…æ—¶é—´ä¼šå°½å¯èƒ½å¿«</li><li id="dc61" class="kr ks hi jv b jw lc ka ld ke le ki lf km lg kq ky kz la lb bi translated">ä¸å›¢é˜Ÿæˆå‘˜åˆ†äº«æˆ‘çš„ä»£ç å’Œé¡¹ç›®è®¾ç½®ä¼šå¾ˆå®¹æ˜“</li><li id="ebad" class="kr ks hi jv b jw lc ka ld ke le ki lf km lg kq ky kz la lb bi translated">æˆ‘å¸Œæœ›æˆ‘çš„å¼€å‘ç¯å¢ƒå°½å¯èƒ½æ¥è¿‘ç”Ÿäº§ç¯å¢ƒ</li></ul><p id="04b3" class="pw-post-body-paragraph jt ju hi jv b jw kt jy jz ka ku kc kd ke lh kg kh ki li kk kl km lj ko kp kq hb bi translated">æ‰€ä»¥æˆ‘å¼€å§‹å¯»æ‰¾è¿™æ ·åšçš„æ–¹æ³•ï¼Œé¦–å…ˆæˆ‘æƒ³åˆ°äº†<code class="du lk ll lm ln b">Git</code>ï¼Œä½†æ˜¯<code class="du lk ll lm ln b">Git</code>çš„é—®é¢˜æ˜¯è®¾ç½®æ—¶é—´ä¸æ˜¯æœ€ä¼˜çš„- <br/>æˆ‘å¦‚ä½•è‡ªåŠ¨é…ç½®<code class="du lk ll lm ln b">Environment Variables</code>ï¼Ÿæˆ–è€…ä¸ºæˆ‘çš„é¡¹ç›®åŒæ­¥<code class="du lk ll lm ln b">Git hooks</code>ï¼Œå¦‚æœæˆ‘çš„é¡¹ç›®æ­£åœ¨ä½¿ç”¨æ–°çš„ç¼–ç¨‹è¯­è¨€æˆ–ç‰ˆæœ¬å‘¢ï¼Ÿæˆ‘ä¸æƒ³åœ¨æœ¬åœ°ç”µè„‘ä¸Šå¼€å§‹å®‰è£…å’Œç®¡ç†ç‰ˆæœ¬..</p><p id="9d33" class="pw-post-body-paragraph jt ju hi jv b jw kt jy jz ka ku kc kd ke lh kg kh ki li kk kl km lj ko kp kq hb bi translated">ä¹Ÿä¸æƒ³ä¸ºä»»ä½•è§£å†³æ–¹æ¡ˆä¹°å•ã€‚</p><p id="f776" class="pw-post-body-paragraph jt ju hi jv b jw kt jy jz ka ku kc kd ke lh kg kh ki li kk kl km lj ko kp kq hb bi translated">ç„¶åæˆ‘å¼€å§‹è€ƒè™‘ä½¿ç”¨<code class="du lk ll lm ln b">Docker</code>ä½œä¸ºæˆ‘çš„å¼€å‘ç¯å¢ƒï¼Œæˆ‘å¯ä»¥å°†<code class="du lk ll lm ln b">Docker</code>ä½œä¸ºâ€œä¸ªäººå¼€å‘æœåŠ¡å™¨â€è¿è¡Œï¼Œå¹¶åœ¨<code class="du lk ll lm ln b">Docker Image</code>ä¸­é…ç½®æˆ‘éœ€è¦çš„ä¸€åˆ‡â€”â€”ç¼–è¯‘å™¨/è§£é‡Šå™¨ã€ç¯å¢ƒå˜é‡ã€ä¾èµ–é¡¹ç­‰ç­‰ï¼Œå½“æˆ‘å®Œæˆç¼–ç æ—¶ï¼Œæˆ‘å¯ä»¥åœ¨æˆ‘çš„ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ç›¸åŒçš„<code class="du lk ll lm ln b">Docker image</code></p><h1 id="c2f5" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">ä»€ä¹ˆæ˜¯<code class="du lk ll lm ln b">Docker</code></h1><p id="89e0" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">"<code class="du lk ll lm ln b">Docker</code>æ˜¯ä¸€ä¸ªç”¨äºå¼€å‘ã€å‘å¸ƒå’Œè¿è¡Œåº”ç”¨ç¨‹åºçš„å¼€æ”¾å¹³å°ã€‚<code class="du lk ll lm ln b">Docker</code>ä½¿æ‚¨èƒ½å¤Ÿå°†åº”ç”¨ä¸åŸºç¡€è®¾æ–½åˆ†ç¦»ï¼Œä»è€Œå¿«é€Ÿäº¤ä»˜è½¯ä»¶ã€‚å€ŸåŠ©<code class="du lk ll lm ln b">Docker</code>ï¼Œæ‚¨å¯ä»¥åƒç®¡ç†åº”ç”¨ç¨‹åºä¸€æ ·ç®¡ç†åŸºç¡€è®¾æ–½ã€‚é€šè¿‡åˆ©ç”¨<code class="du lk ll lm ln b">Docker's</code>æ–¹æ³•å¿«é€Ÿäº¤ä»˜ã€æµ‹è¯•å’Œéƒ¨ç½²ä»£ç ï¼Œæ‚¨å¯ä»¥æ˜¾è‘—å‡å°‘ç¼–å†™ä»£ç å’Œåœ¨ç”Ÿäº§ä¸­è¿è¡Œä»£ç ä¹‹é—´çš„å»¶è¿Ÿã€‚â€<br/>æ¥è‡ª<code class="du lk ll lm ln b">Docker</code>å®˜æ–¹æ–‡æ¡£ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œé˜…è¯»æ›´å¤š<a class="ae iu" href="https://docs.docker.com/engine/docker-overview/" rel="noopener ugc nofollow" target="_blank"/></p><h1 id="261c" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">å»ºè®¾</h1><p id="4ae2" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">æˆ‘ç”¨è¿™ä¸ª<code class="du lk ll lm ln b">Dockerfile</code>ä½œä¸º<a class="ae iu" href="https://docs.docker.com/engine/examples/running_ssh_service/" rel="noopener ugc nofollow" target="_blank">è¿™é‡Œ</a>çš„æ¨¡æ¿ï¼Œä¸ºäº†æ„å»ºæˆ‘çš„<code class="du lk ll lm ln b">Docker Image</code>ï¼Œæˆ‘å®‰è£…äº†<code class="du lk ll lm ln b">openssh-server</code>ï¼Œè¿™æ ·æˆ‘å°±å¯ä»¥åƒå¼€å‘æœåŠ¡å™¨ä¸€æ ·ä½¿ç”¨å®ƒï¼Œå¹¶ä¸æˆ‘çš„é˜Ÿå‹åˆ†äº«ã€‚</p><pre class="lo lp lq lr fd ls ln lt lu aw lv bi"><span id="7aeb" class="lw iw hi ln b fi lx ly l lz ma">FROM python:3.6<br/>ARG GIT<br/><br/>RUN apt-get update &amp;&amp; apt-get install -y openssh-server<br/>RUN mkdir /var/run/sshd<br/>RUN echo 'root:MYSUPERSECRETROOTPASSWORD' | chpasswd<br/><br/># According to your linux distribution this line my differ<br/>RUN sed -i 's/#PermitRootLogin prohibit-password/PermitRootLogin yes/' /etc/ssh/sshd_config<br/><br/>ENV NOTVISIBLE "in users profile"<br/>RUN echo "export VISIBLE=now" &gt;&gt; /etc/profile<br/>EXPOSE 22<br/><br/>RUN echo ' \n\<br/>git clone $GIT ~/code \n\<br/>cd ~/code \n\<br/>git pull \n\<br/>pip install -r requirements.txt' &gt; ./run.sh<br/><br/># Also configure hooks, environment variables and more<br/><br/>RUN sh ./run.sh<br/><br/>RUN echo '/usr/sbin/sshd -D' &gt;&gt; ./run.sh<br/><br/>CMD ["sh", "./run.sh"]</span></pre><p id="c20f" class="pw-post-body-paragraph jt ju hi jv b jw kt jy jz ka ku kc kd ke lh kg kh ki li kk kl km lj ko kp kq hb bi translated">å½“æ‰§è¡Œ<code class="du lk ll lm ln b">docker build</code>æ—¶ï¼Œå®ƒå°†<code class="du lk ll lm ln b">git clone</code>æˆ‘çš„é¡¹ç›®å¹¶å®‰è£…<code class="du lk ll lm ln b">pip</code>ä¾èµ–é¡¹ä»¥åŠæˆ‘éœ€è¦åšçš„ä»»ä½•äº‹æƒ…ï¼Œæˆ‘è¿˜å®šä¹‰äº†ç›¸åŒçš„<code class="du lk ll lm ln b">./run.sh</code>æ–‡ä»¶ï¼Œæ¯æ¬¡æˆ‘ä½¿ç”¨<code class="du lk ll lm ln b">docker run</code>æ—¶éƒ½è¦æ‰§è¡Œï¼Œä»¥ä¾¿è®©æˆ‘çš„dockerä¿æŒæœ€æ–°çš„æ–°æäº¤ç­‰ç­‰</p><h1 id="d591" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">å¥”è·‘</h1><p id="a2ac" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">æˆ‘ä½¿ç”¨è¿™ä¸ªå‘½ä»¤æ¥è¿è¡Œæˆ‘çš„æ˜ åƒ</p><pre class="lo lp lq lr fd ls ln lt lu aw lv bi"><span id="9846" class="lw iw hi ln b fi lx ly l lz ma">&gt; docker run -dP my_cool_docker<br/>37d6e53cb27396467a10c7361d319d28d0197a7b5dc7347bb39c251dff7403dc<br/><br/>&gt; docker port 3<br/>22/tcp -&gt; 0.0.0.0:32768<br/><br/>&gt; ssh root@localhost -p 3276<br/>The authenticity of host '[localhost]:32768 ([::1]:32768)' can't be established.<br/>ECDSA key fingerprint is SHA256:z4x3yWVSJZAoswgEa0utt5jSv0Mt0Ex6sMY8a4CFCnE.<br/>Are you sure you want to continue connecting (yes/no)? yes<br/>Warning: Permanently added '[localhost]:32768' (ECDSA) to the list of known hosts.<br/>root@localhost's password:<br/>Linux 37d6e53cb273 4.9.184-linuxkit #1 SMP Tue Jul 2 22:58:16 UTC 2019 x86_64<br/><br/>The programs included with the Debian GNU/Linux system are free software;<br/>the exact distribution terms for each program are described in the<br/>individual files in /usr/share/doc/*/copyright.<br/><br/>Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent<br/>permitted by applicable law.<br/>root@37d6e53cb273:~# ls -l<br/>total 4<br/>drwxr-xr-x 1 root root 4096 Dec 14 09:45 code</span></pre><p id="a376" class="pw-post-body-paragraph jt ju hi jv b jw kt jy jz ka ku kc kd ke lh kg kh ki li kk kl km lj ko kp kq hb bi translated">å¦‚æ‚¨æ‰€è§ï¼Œæˆ‘ä½¿ç”¨<code class="du lk ll lm ln b">detach</code>æ ‡å¿—å’Œ<code class="du lk ll lm ln b">expose all</code>ç«¯å£è¿è¡Œ<code class="du lk ll lm ln b">image</code>ï¼Œç„¶åä½¿ç”¨<code class="du lk ll lm ln b">ssh</code>é€šè¿‡æš´éœ²çš„ç«¯å£æœ¬åœ°ä¸»æœºï¼Œè¾“å…¥æ‚¨çš„è¶…çº§ç§˜å¯†rootå¯†ç ï¼Œæˆ‘ä»¬æœ‰äº†ä¸€ä¸ªä¸ªäººå¼€å‘æœåŠ¡å™¨ï¼Œå®ƒå®é™…ä¸Šæ˜¯è¿è¡Œåœ¨æ‚¨ä¸ªäººPCä¸Šçš„<code class="du lk ll lm ln b">docker container</code>ï¼</p><h1 id="0b28" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">ä¼˜åŠ¿</h1><ul class=""><li id="220e" class="kr ks hi jv b jw jx ka kb ke mb ki mc km md kq ky kz la lb bi translated">ä¸€æ¬¡è®¾ç½®æ»¡è¶³æˆ‘çš„æ‰€æœ‰éœ€æ±‚</li><li id="b4c6" class="kr ks hi jv b jw lc ka ld ke le ki lf km lg kq ky kz la lb bi translated">ç›¸åŒçš„å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒ</li><li id="de8c" class="kr ks hi jv b jw lc ka ld ke le ki lf km lg kq ky kz la lb bi translated">æ˜“äºä¸é˜Ÿå‹åˆ†äº«</li></ul><h1 id="ac0c" class="iv iw hi bd ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">ä¸è¶³ä¹‹å¤„</h1><ul class=""><li id="f25e" class="kr ks hi jv b jw jx ka kb ke mb ki mc km md kq ky kz la lb bi translated">å¦‚æœæ‚¨çš„<code class="du lk ll lm ln b">container</code>å´©æºƒï¼Œæ‚¨å¯èƒ½ä¼šä¸¢å¤±æ•°æ®</li><li id="40ff" class="kr ks hi jv b jw lc ka ld ke le ki lf km lg kq ky kz la lb bi translated">é€‚åˆé‚£äº›åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨å®¹å™¨çš„äºº</li></ul><p id="52e1" class="pw-post-body-paragraph jt ju hi jv b jw kt jy jz ka ku kc kd ke lh kg kh ki li kk kl km lj ko kp kq hb bi translated">äº«å—ğŸ˜‹</p></div><div class="ab cl me mf gp mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="hb hc hd he hf"><blockquote class="ml mm mn"><p id="9571" class="jt ju mo jv b jw kt jy jz ka ku kc kd mp lh kg kh mq li kk kl mr lj ko kp kq hb bi translated">å–œæ¬¢è¿™ä¸ªå¸–å­ï¼Ÿä½ æƒ³è®¿é—®æˆ‘çš„ç§äººgithubé¡¹ç›®ï¼Ÿ<br/>é€šè¿‡<a class="ae iu" href="https://www.patreon.com/eranelbaz" rel="noopener ugc nofollow" target="_blank"> <em class="hi">è¡¥ä¸</em> </a>æ”¯æŒæˆ‘</p></blockquote></div><div class="ab cl me mf gp mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="hb hc hd he hf"><p id="70cd" class="pw-post-body-paragraph jt ju hi jv b jw kt jy jz ka ku kc kd ke lh kg kh ki li kk kl km lj ko kp kq hb bi translated"><em class="mo">åŸè½½äº2019å¹´12æœˆ21æ—¥</em><a class="ae iu" href="https://dev.to/eranelbaz/docker-dev-debug-deploy-199l" rel="noopener ugc nofollow" target="_blank"><em class="mo">https://dev . to</em></a><em class="mo">ã€‚</em></p></div></div>    
</body>
</html>