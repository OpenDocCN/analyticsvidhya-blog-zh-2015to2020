<html>
<head>
<title>Replicating Amazon DynamoDB tables in different regions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在不同地区复制Amazon DynamoDB表</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/replicating-amazon-dynamodb-tables-in-different-region-1299b3eca2ae?source=collection_archive---------1-----------------------#2018-06-21">https://medium.com/analytics-vidhya/replicating-amazon-dynamodb-tables-in-different-region-1299b3eca2ae?source=collection_archive---------1-----------------------#2018-06-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/db0e6112834c39737a639fd18f9ce389.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NXaKqrkC84L4VkKpkoo33Q.jpeg"/></div></div></figure><p id="6e8b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用AWS DynamoDB的开发人员经常会在不同的区域复制一个或多个表。这可以使用AWS S3和AWS数据管道来完成，如这里的<a class="ae jo" href="https://aws.amazon.com/blogs/aws/cross-region-import-and-export-of-dynamodb-tables/" rel="noopener ugc nofollow" target="_blank">所解释的</a>。</p><p id="dcc9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是对于那些不喜欢做<em class="jp">点击</em>、<em class="jp">点击</em>、<em class="jp">点击</em>的铁杆命令行粉丝来说(和我一样)。下面是一个使用boto3的简单python脚本，它将使用相同的键模式、属性定义在不同的区域复制所需的表，并将数据复制到其中。</p><h2 id="b3d9" class="jq jr hi bd js jt ju jv jw jx jy jz ka jb kb kc kd jf ke kf kg jj kh ki kj kk bi translated">脚本的工作原理:</h2><ul class=""><li id="1071" class="kl km hi is b it kn ix ko jb kp jf kq jj kr jn ks kt ku kv bi translated">扫描现有表中的模式、属性和数据。</li><li id="b49e" class="kl km hi is b it kw ix kx jb ky jf kz jj la jn ks kt ku kv bi translated">在新区域中创建一个具有相同模式和属性定义的新表。</li><li id="405b" class="kl km hi is b it kw ix kx jb ky jf kz jj la jn ks kt ku kv bi translated">通常，DynamoDB需要几秒钟来创建表。这由<strong class="is hj"><em class="jp">wait _ until _ exists()</em></strong>处理，它每20秒轮询一次，直到达到成功状态。</li><li id="03b5" class="kl km hi is b it kw ix kx jb ky jf kz jj la jn ks kt ku kv bi translated">重新加载以更新表资源的属性，从而获得实际的表状态。</li><li id="3778" class="kl km hi is b it kw ix kx jb ky jf kz jj la jn ks kt ku kv bi translated">新表格激活后，将从现有表格扫描的所有项目写入其中。</li></ul><figure class="lb lc ld le fd ij"><div class="bz dy l di"><div class="lf lg l"/></div><figcaption class="lh li et er es lj lk bd b be z dx translated"><a class="ae jo" href="https://gist.github.com/Dineshkarthik/d0944c45b06726a327a9536a33dabdd2" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/Dineshkarthik/d 0944 c 45 b 06726 a 327 a 9536 a 33 dab D2</a></figcaption></figure><pre class="lb lc ld le fd ll lm ln lo aw lp bi"><span id="c941" class="jq jr hi lm b fi lq lr l ls lt"><em class="jp">python dynamodb_replicate_table.py -t my-table -r </em>eu-west-1<em class="jp"> -nr us-east-2</em></span></pre><p id="be16" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上面将把eu-west-1中名为“my-table”的表复制到us-east-2中。</p></div></div>    
</body>
</html>