<html>
<head>
<title>Concepts Extraction: How I learned to stop worrying and love multilingual data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">æ¦‚å¿µæå–:æˆ‘å¦‚ä½•å­¦ä¼šä¸å†æ‹…å¿ƒå¹¶çƒ­çˆ±å¤šè¯­è¨€æ•°æ®</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/analytics-vidhya/concepts-extraction-how-i-learn-to-stop-worrying-and-love-multilingual-data-b342ce13c52e?source=collection_archive---------11-----------------------#2020-03-24">https://medium.com/analytics-vidhya/concepts-extraction-how-i-learn-to-stop-worrying-and-love-multilingual-data-b342ce13c52e?source=collection_archive---------11-----------------------#2020-03-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/61a5ca63440b1ea75ed4b26a8f0f57cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rh9sG2Gq873UPu8yCht9SA.png"/></div></div></figure><div class=""/><div class=""><h2 id="feff" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh dx translated">å¦‚ä½•è®©ä¸åŒè¯­è¨€çš„æ–‡æœ¬æ•°æ®å˜å¾—å¯ä»¥ç†è§£</h2></div><p id="6c9f" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">ä½œä¸ºäººç±»ï¼Œæˆ‘ä»¬å–œæ¬¢åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ä½¿ç”¨æ–‡æœ¬ã€‚ä½œä¸ºäººç±»ï¼Œæˆ‘ä»¬å–œæ¬¢å’Œè®¡ç®—æœºä¸€èµ·å·¥ä½œã€‚ä½†é—®é¢˜æ˜¯è®¡ç®—æœºä¸å–œæ¬¢å’Œæ–‡æœ¬æ‰“äº¤é“ã€‚å½“å¤„ç†å¤§é‡çš„æ–‡æœ¬æ•°æ®æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è‡ªåŠ¨å¤„ç†å®ƒä»¬ã€‚è¿™å°±æ˜¯NLPçš„ç”¨æ­¦ä¹‹åœ°ï¼</p><p id="dd70" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">æ¦‚å¿µæŠ½å–æ˜¯è‡ªç„¶è¯­è¨€å¤„ç†çš„ä¸€ä¸ªé¢†åŸŸï¼Œå…¶é‡ç‚¹æ˜¯æ‰¾å‡ºæ–‡æœ¬çš„è¯­ä¹‰ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥çŸ¥é“æåˆ°çš„äººã€åœ°ç‚¹ã€ç‰©ä½“ç­‰ç­‰..å®ƒè¢«ç”¨æ¥æ›´å¥½åœ°ç†è§£æˆ‘ä»¬æ­£åœ¨å¤„ç†çš„æ•°æ®ã€‚å¤§å¤šæ•°å·¥å…·åªå…³æ³¨ä¸€å°éƒ¨åˆ†è¯­è¨€ï¼Œå°¤å…¶æ˜¯è‹±è¯­ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ä½¿ç”¨ä¸­ç«‹çš„æ–°é—»APIã€‚Neutral Newsæ˜¯ä¸€å®¶ä¸“æ³¨äºè®¸å¤šä¸åŒè¯­è¨€çš„NLPä»»åŠ¡çš„å…¬å¸ã€‚</p><p id="bc85" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated"><em class="ke">å…è´£å£°æ˜:è¿™ç¯‡åšå®¢æ˜¯ç”±ä¸­ç«‹æ–°é—»çš„è”åˆåˆ›å§‹äººå†™çš„ï¼Œåªæ˜¯è®©ä½ çŸ¥é“:)</em></p><p id="2429" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘å°†å±•ç¤ºæˆ‘ä»¬å¦‚ä½•ä½¿ç”¨<a class="ae kf" href="https://neutralnews.fr/" rel="noopener ugc nofollow" target="_blank">ä¸­æ€§æ–°é—»Api </a>ä»8ç§ä¸åŒè¯­è¨€çš„æ–‡ç« é›†ä¸­çªå‡ºä¸»é¢˜ã€‚</p><p id="ae77" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">è¿™ä¸ªAPIéœ€è¦è®¢é˜…æ‰èƒ½ä½¿ç”¨ï¼Œä½†å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬æä¾›300ä¸ªè¯·æ±‚çš„å…è´¹è¯•ç”¨ã€‚è¿™ä¸ªæ•™ç¨‹å°±ç”¨å®ƒå§ï¼ä½ å¯ä»¥åœ¨è¿™é‡Œæ³¨å†Œ<a class="ae kf" href="https://neutralnews.fr/accounts/register" rel="noopener ugc nofollow" target="_blank"/>ã€‚</p><h1 id="ae08" class="kg kh ht bd ki kj kk kl km kn ko kp kq iz kr ja ks jc kt jd ku jf kv jg kw kx bi translated">è®©æˆ‘ä»¬å¼€å§‹å§ï¼</h1><p id="13f2" class="pw-post-body-paragraph ji jj ht jk b jl ky iu jn jo kz ix jq jr la jt ju jv lb jx jy jz lc kb kc kd hb bi translated">æˆ‘ä»¬å‡è®¾æ‚¨å·²ç»å®‰è£…äº†python3ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°æˆ‘å°†è¦ä½¿ç”¨çš„è¯­æ–™åº“<a class="ae kf" href="https://drive.google.com/open?id=1QAKzfq4B37_EM1mtpPPmwRj0J1pdH1G7" rel="noopener ugc nofollow" target="_blank"/>ã€‚</p><p id="3dff" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">è®©æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªç®€å•çš„å‡½æ•°æ¥åŠ è½½æ–‡ç« :</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="46b6" class="lm kh ht li b fi ln lo l lp lq">import json</span><span id="dbec" class="lm kh ht li b fi lr lo l lp lq">def get_data(path):<br/>    return json.load(open(path, 'r'))</span><span id="48f6" class="lm kh ht li b fi lr lo l lp lq">data = get_data('articles.json')</span></pre><h1 id="f524" class="kg kh ht bd ki kj kk kl km kn ko kp kq iz kr ja ks jc kt jd ku jf kv jg kw kx bi translated">APIçš„ç¬¬ä¸€æ­¥</h1><p id="5ded" class="pw-post-body-paragraph ji jj ht jk b jl ky iu jn jo kz ix jq jr la jt ju jv lb jx jy jz lc kb kc kd hb bi translated">ä¸­ç«‹æ–°é—»æä¾›äº†ä¸€ä¸ªPythonå®¢æˆ·ç«¯æ¥ç®€åŒ–APIçš„ä½¿ç”¨ã€‚è¿™å¾ˆç®€å•ï¼Œè®©æˆ‘ä»¬å…ˆå®‰è£…å®ƒã€‚</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="6241" class="lm kh ht li b fi ln lo l lp lq">pip3 install PyNeutralNews</span></pre><p id="b60c" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">ç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºå®¢æˆ·æœºå¯¹è±¡ï¼Œå®ƒå°†ä½¿æˆ‘ä»¬èƒ½å¤Ÿè°ƒç”¨API(æ‚¨å°†éœ€è¦ç”¨æ‚¨çš„å…è´¹è¯•ç”¨å‡­è¯æ¥æ›¿æ¢å‡­è¯):</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="79ed" class="lm kh ht li b fi ln lo l lp lq">from PyNeutralNews import Client</span><span id="c059" class="lm kh ht li b fi lr lo l lp lq">client = Client("&lt;email&gt;", "&lt;password&gt;")</span></pre><p id="7b69" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">æˆ‘ä»¬å°†ä½¿ç”¨ä¸‹é¢çš„å‡½æ•°get_conceptsä»æ–‡æœ¬ä¸­è·å–æå–çš„æ¦‚å¿µä»¥åŠç›¸å…³çš„æƒé‡ã€‚</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="9848" class="lm kh ht li b fi ln lo l lp lq">from collections import Counter</span><span id="b9ab" class="lm kh ht li b fi lr lo l lp lq">def get_concepts(text, lang=None):</span><span id="2809" class="lm kh ht li b fi lr lo l lp lq">   res = client.nlp.semantic_analysis(text, lang, concepts_properties=["titles.en", "titles.auto"])</span><span id="12ed" class="lm kh ht li b fi lr lo l lp lq">   concepts = Counter()</span><span id="648f" class="lm kh ht li b fi lr lo l lp lq">   for concept in res.concepts:</span><span id="6c8a" class="lm kh ht li b fi lr lo l lp lq">        titles = concept.properties["titles"]</span><span id="bd80" class="lm kh ht li b fi lr lo l lp lq">        title = titles.get("en") or titles[res.lang]</span><span id="fc91" class="lm kh ht li b fi lr lo l lp lq">        concepts[title] += concept.weight</span><span id="d05c" class="lm kh ht li b fi lr lo l lp lq">    return concepts</span></pre><p id="7b9b" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æœ‰ä¸€ä¸ªä»¥æ¦‚å¿µåä¸ºå…³é”®å­—ã€ä»¥å…¶æƒé‡ä¸ºå€¼çš„å­—å…¸ã€‚æƒé‡å¯¹åº”äºæ–‡æœ¬ä¸­æ¦‚å¿µçš„è¯­ä¹‰å€¼ã€‚é«˜æƒé‡æ„å‘³ç€æ¦‚å¿µåœ¨æ–‡æœ¬ä¸­å…·æœ‰é‡è¦æ„ä¹‰ã€‚</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="aec4" class="lm kh ht li b fi ln lo l lp lq">&gt;&gt; get_concepts(data['ko'][0], 'ko')<br/>Counter({'United States': 0.16974641714195385,<br/>         'President (government title)': 0.11700783103451891,<br/>         'Justice Party (South Korea)': 0.11516047368626284,<br/>         'Facebook': 0.0977350464727538,<br/>         'Diplomacy': 0.09208318129951651,<br/>         'Washington, D.C.': 0.09057665492040855,<br/>         'Mass media': 0.07374152731976248,<br/>         'German reunification': 0.06379742089362807,<br/>         'Literature': 0.06115040296658773,<br/>         'Ambassador': 0.06047045207677463,<br/>         'Human': 0.058530592187832624})</span></pre><p id="03ad" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">æœ‰ç”¨ï¼å¾ˆå¥½ï¼Œç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå°†å­˜å‚¨è¯­æ–™åº“ä¸­çš„æ¯ä¸ªæ¦‚å¿µåŠå…¶å‡ºç°æ¬¡æ•°å’Œç´¯ç§¯æƒé‡ã€‚</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="fd45" class="lm kh ht li b fi ln lo l lp lq">def get_all_concepts(corpus):<br/>    concepts = {}<br/>    for lang, data in corpus.items():<br/>        print('get concepts from', lang)<br/>        for i, article in enumerate(data):<br/>            if (i + 1) % 10 == 0:<br/>                print(i, '/', len(data))<br/>                break<br/>            res = get_concepts(article, lang)<br/>            for concept, weight in res.items():<br/>                if concept not in concepts:<br/>                    concepts[concept] = (0, 0)<br/>                c, w = concepts[concept]<br/>                concepts[concept] = (c + 1, w + weight)<br/>    return concepts</span><span id="ba59" class="lm kh ht li b fi lr lo l lp lq">concepts = get_all_concepts(data)</span></pre><p id="32fb" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">æˆ‘ä»¬å°†é¦–å…ˆæ ¹æ®å‡ºç°çš„é¢‘ç‡ç”»å‡ºæœ€å¸¸è§çš„æ¦‚å¿µã€‚</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="c0b2" class="lm kh ht li b fi ln lo l lp lq">import matplotlib.pyplot as plt<br/>import numpy as np</span><span id="7147" class="lm kh ht li b fi lr lo l lp lq">concepts_occ = {k: v[0] for k, v in sorted(concepts.items(), key=lambda item: item[1][0])[::-1]}</span><span id="5abb" class="lm kh ht li b fi lr lo l lp lq">def plot_concepts(concepts, limit=10):<br/>    <br/>    fig, ax = plt.subplots(figsize=(20, 10))<br/>    ax.bar(np.arange(limit), height=list(concepts.values())[:limit], tick_label=list(concepts.keys())[:limit])</span><span id="16f7" class="lm kh ht li b fi lr lo l lp lq">plot_concepts(concepts_occ)</span></pre><figure class="ld le lf lg fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ls"><img src="../Images/e769ae14f8d7931f7e195d858dbd683a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gvvM1kPa6tZY6RhpzS56Tg.png"/></div></div></figure><p id="1fca" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">ä¸é”™ï¼æˆ‘ä»¬ç°åœ¨å¼€å§‹å¯¹è¯­æ–™åº“ä¸­çš„ä¸»è¦ä¸»é¢˜æœ‰äº†ä¸€ä¸ªå¾ˆå¥½çš„æƒ³æ³•ã€‚ä½†æ˜¯æˆ‘ä»¬ä»ç„¶æœ‰ä¸€äº›è¯å¯¹æˆ‘ä»¬æ²¡æœ‰çœŸæ­£çš„å¸®åŠ©ã€‚è®©æˆ‘ä»¬çœ‹çœ‹æ˜¯å¦å¯ä»¥é€šè¿‡è€ƒè™‘æƒé‡æ¥æ‘†è„±å®ƒä»¬ï¼Œè¿›è¡Œæ›´ç²¾ç¡®çš„è¯­ä¹‰åˆ†æã€‚</p><figure class="ld le lf lg fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lt"><img src="../Images/22afcea2b1a4e935d577f1bd1c03a65c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AvEFK8-9yWRWNsfoDTHA2Q.png"/></div></div></figure><p id="818d" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬å¯¹æ–‡ç« è¯­æ–™åº“ä¸­çš„ä¸»è¦ä¸»é¢˜æœ‰äº†æ›´å¥½çš„æ¦‚è¿°ã€‚ä»»åŠ¡å®Œæˆï¼ğŸ˜ƒ</p><figure class="ld le lf lg fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lu"><img src="../Images/6aaf75acd5cc165aa873319bf90763a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*olsloRJjihhWDEkTM3Ao_Q.png"/></div></div></figure><h1 id="c05f" class="kg kh ht bd ki kj kk kl km kn ko kp kq iz kr ja ks jc kt jd ku jf kv jg kw kx bi translated">ä¸‹ä¸€æ­¥æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p id="a84c" class="pw-post-body-paragraph ji jj ht jk b jl ky iu jn jo kz ix jq jr la jt ju jv lb jx jy jz lc kb kc kd hb bi translated">ç°åœ¨æˆ‘ä»¬æœ‰äº†æˆ‘ä»¬çš„ä¸»é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åšæ›´å¤šçš„äº‹æƒ…ï¼ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æˆ‘ä»¬çš„æ–°æ•°æ®è¿›è¡Œèšç±»ï¼Œä»¥æ‰¾åˆ°ä¸åŒè¯­è¨€çš„ç›¸å…³æ–‡ç« ã€‚</p></div></div>    
</body>
</html>