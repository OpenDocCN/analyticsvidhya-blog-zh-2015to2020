<html>
<head>
<title>Simple Templates for Visualizing Time Series Data in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç”¨Pythonå¯è§†åŒ–æ—¶é—´åºåˆ—æ•°æ®çš„ç®€å•æ¨¡æ¿</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/analytics-vidhya/simple-templates-for-visualizing-time-series-data-in-python-84cc9cf15443?source=collection_archive---------16-----------------------#2020-04-11">https://medium.com/analytics-vidhya/simple-templates-for-visualizing-time-series-data-in-python-84cc9cf15443?source=collection_archive---------16-----------------------#2020-04-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="21ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘æœ€è¿‘åœ¨å·¥ä½œä¸­ç»å¸¸ä½¿ç”¨æ—¶é—´åºåˆ—æ•°æ®é›†ï¼Œè¿™ä½¿å¾—åœ¨æ•°æ®æ¢ç´¢è¿‡ç¨‹ä¸­éœ€è¦é¢‘ç¹çš„å¯è§†åŒ–ï¼Œä»¥è‡³äºæˆ‘ä¸ºå®ƒå¼€å‘äº†ä¸€ä¸ªä¾‹ç¨‹ã€‚æˆ‘æƒ³æˆ‘åº”è¯¥åˆ†äº«æˆ‘çš„è¿‡ç¨‹ï¼Œå¸Œæœ›å…¶ä»–äººä¹Ÿèƒ½ä»ä¸­å—ç›Šã€‚</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/292ca2296dd7cba5dd165d447a42ef07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/format:webp/1*9iu0xCLASg3opYOculsEIg.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">å‰å‡ å¤©ï¼Œæˆ‘çš„åŒäº‹è¯·æ±‚å¸®åŠ©æ ‡è®°ä»–çš„åœ°å—ã€‚</figcaption></figure><p id="c578" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘å‡è®¾è¯»è€…å¯¹<a class="ae jp" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank"> pandas </a>ã€<a class="ae jp" href="http://matplotlib.org" rel="noopener ugc nofollow" target="_blank"> matplotlib </a>å’Œ<a class="ae jp" href="http://numpy.org" rel="noopener ugc nofollow" target="_blank"> NumPy </a>æœ‰åŸºæœ¬çš„äº†è§£ï¼Œå¹¶ä¸”ä½ å·²ç»ä½¿ç”¨è¿™äº›åº“æœ‰ä¸€æ®µæ—¶é—´äº†ã€‚</p></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><p id="1bdb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> A .è¿›å£</strong></p><pre class="je jf jg jh fd jx jy jz ka aw kb bi"><span id="3e3c" class="kc kd hi jy b fi ke kf l kg kh">import os</span><span id="8d0c" class="kc kd hi jy b fi ki kf l kg kh">import pandas as pd<br/>import numpy as np<br/>import datetime</span><span id="6d5e" class="kc kd hi jy b fi ki kf l kg kh">import matplotlib.pyplot as plt<br/>import matplotlib.dates as mdates</span></pre><p id="5ed8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> B .æ•°æ®é›†</strong></p><p id="09dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯æ—¶é—´åºåˆ—æ•°æ®é›†ï¼Œæ‰€ä»¥æ•°æ®é›†åº”è¯¥åŒ…å«ä¸€ä¸ªæ—¶é—´åˆ—ï¼Œå…¶ä¸­åŒ…å«åä¸º<code class="du kj kk kl jy b">Time</code>æˆ–<code class="du kj kk kl jy b">date</code>ç­‰çš„æ—¶é—´æˆ³ã€‚ï¼Œä»¥åŠæ¯ä¸ªé¢„æµ‹å€¼çš„å…¶ä»–åˆ—ã€‚å¦‚æœæ‚¨æ²¡æœ‰è¦å¤„ç†çš„æ—¶é—´åºåˆ—æ•°æ®é›†ï¼Œæ‚¨å¯ä»¥å¯¹æ¨¡æ‹Ÿæ•°æ®é›†è¿è¡Œä»¥ä¸‹ä»£ç (è¿™ä¹Ÿæ˜¯æˆ‘ä»¬å°†åœ¨æœ¬æ–‡ä¸­å¤„ç†çš„æ•°æ®é›†):</p><pre class="je jf jg jh fd jx jy jz ka aw kb bi"><span id="2358" class="kc kd hi jy b fi ke kf l kg kh">import pandas as pd<br/>import numpy as np</span><span id="f547" class="kc kd hi jy b fi ki kf l kg kh"># generate a range of dates <br/>date_rg = pd.date_range(start = '1/1/2020',<br/>                        end = '2/1/2020',<br/>                        freq = 'H')</span><span id="312c" class="kc kd hi jy b fi ki kf l kg kh"># for each column in our mock dataset, we will sample n random<br/># numbers within a certain range<br/>n = len(date_rg)</span><span id="8d9f" class="kc kd hi jy b fi ki kf l kg kh"># set this to your prefered number of columns excluding the time column<br/>m = 10</span><span id="4540" class="kc kd hi jy b fi ki kf l kg kh"># creating the dataset<br/>A = {'Time': date_rg}<br/>for j in range(m):<br/>    low = random.randint(0, 10) * 10<br/>    high = low + 10<br/>    A['Tag' + str(j)] = np.random.uniform(low=low, high=high, size=(n,))</span><span id="9e35" class="kc kd hi jy b fi ki kf l kg kh">df = pd.DataFrame(A)</span><span id="4182" class="kc kd hi jy b fi ki kf l kg kh"># saving the dataset<br/>df.to_csv('Basic_Time_Series_Dataset.csv', index = False)</span></pre><p id="3f29" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘ä»¬å°†æ•°æ®é›†ä¸Šä¼ ä¸ºpandas dataframeï¼Œå¹¶ä½¿ç”¨ä»¥ä¸‹ä»£ç å°†timeåˆ—è®¾ç½®ä¸ºç´¢å¼•:</p><pre class="je jf jg jh fd jx jy jz ka aw kb bi"><span id="f516" class="kc kd hi jy b fi ke kf l kg kh">import pandas as pd</span><span id="3d2b" class="kc kd hi jy b fi ki kf l kg kh"># Path to your dataset<br/>df_path = 'Basic_Time_Series_Dataset.csv'</span><span id="19f5" class="kc kd hi jy b fi ki kf l kg kh"># Uploading dataset<br/>df = pd.read_csv(df_path,<br/>                parse_dates = ['Time'],<br/>                index_col = ['Time']<br/>                )</span></pre><p id="827b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">é»˜è®¤æƒ…å†µä¸‹ï¼Œpandasä¼šå°†æ—¶é—´åˆ—ä¸­çš„å€¼è§†ä¸ºå­—ç¬¦ä¸²ã€‚åœ¨<code class="du kj kk kl jy b">pd.read_csv</code>ä¸­è®¾ç½®<code class="du kj kk kl jy b">parse_date</code>å°†å®ƒä»¬è½¬æ¢æˆ<code class="du kj kk kl jy b"><a class="ae jp" href="https://docs.python.org/3/library/datetime.html" rel="noopener ugc nofollow" target="_blank">datetime</a></code>å¯¹è±¡ã€‚è¿™å¾ˆé‡è¦ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›åœ¨ç»˜åˆ¶æ•°æ®æ—¶è€ƒè™‘æ—¥æœŸä¹‹é—´çš„æŒç»­æ—¶é—´ã€‚<code class="du kj kk kl jy b">index_col</code>å°†æ—¶é—´åˆ—è®¾ç½®ä¸ºæ•°æ®å¸§çš„ç´¢å¼•ã€‚</p><p id="7720" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¦‚æœç”±äºæ—¶é—´æˆ³çš„æ ¼å¼è€Œæ— æ³•è§£ææ—¶é—´åˆ—ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨å…¶ä»–æ–¹æ³•ã€‚é¦–å…ˆï¼Œä¸Šä¼ æ²¡æœ‰ä¸Šè¿°ä¸¤ä¸ªé™„åŠ å‚æ•°çš„æ•°æ®é›†:</p><pre class="je jf jg jh fd jx jy jz ka aw kb bi"><span id="759d" class="kc kd hi jy b fi ke kf l kg kh">df = pd.read_csv(df_path)</span></pre><p id="0190" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ç„¶åï¼Œä½¿ç”¨ä¸‹åˆ—æ–¹æ³•ä¹‹ä¸€:</p><p id="4f49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ğŸŒ¸æ–¹æ³•ä¸€:<strong class="ih hj"> </strong>ä½¿ç”¨<code class="du kj kk kl jy b">pd.to_datetime</code> <a class="ae jp" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.to_datetime.html" rel="noopener ugc nofollow" target="_blank">ğŸ”—</a></p><pre class="je jf jg jh fd jx jy jz ka aw kb bi"><span id="d22e" class="kc kd hi jy b fi ke kf l kg kh">df.index = pd.to_datetime(df['Time'])</span></pre><p id="4412" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ğŸŒ¸æ–¹æ³•äºŒ:<strong class="ih hj"> </strong>ä½¿ç”¨<code class="du kj kk kl jy b">datetime.strptime</code> <a class="ae jp" href="https://www.journaldev.com/23365/python-string-to-datetime-strptime" rel="noopener ugc nofollow" target="_blank">ğŸ”—</a></p><p id="f817" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„æ¨¡å—ï¼Œå®ƒæä¾›äº†å¤„ç†æ—¥æœŸå’Œæ—¶é—´çš„ç±»ã€‚</p><pre class="je jf jg jh fd jx jy jz ka aw kb bi"><span id="cd47" class="kc kd hi jy b fi ke kf l kg kh">import datetime</span><span id="f0cc" class="kc kd hi jy b fi ki kf l kg kh">df.index = df['Time'].apply(<br/>    lambda x: datetime.datetime.strptime(x, '%Y-%m-%d %H:%M:%S')<br/>)</span></pre><p id="6668" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘ä»¬è¦åšçš„ä¸‹ä¸€ä»¶äº‹æ˜¯ä»æ•°æ®å¸§ä¸­åˆ é™¤æ—¶é—´åˆ—:</p><pre class="je jf jg jh fd jx jy jz ka aw kb bi"><span id="ec45" class="kc kd hi jy b fi ke kf l kg kh">df.drop('Time', axis = 1, inplace = True)</span></pre><p id="17d4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ç¡®ä¿ä¿®æ”¹å°±åœ°å®Œæˆï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸å¿…ç»™dfé‡æ–°åˆ†é…æ•°æ®å¸§çš„æ–°ç‰ˆæœ¬ã€‚å°†<code class="du kj kk kl jy b">axis</code>è®¾ç½®ä¸º1å‘Šè¯‰è¯¥æ–¹æ³•æ²¿ç€åˆ—æœç´¢ä¸€ä¸ªåä¸ºâ€œTimeâ€çš„å€¼ã€‚</p><p id="4387" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä½¿ç”¨<code class="du kj kk kl jy b">df.head()</code>æŸ¥çœ‹æ•°æ®æ¡†çš„å‰äº”è¡Œ:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es km"><img src="../Images/0421e79219ad173ffe5e8732779766e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XEANtZ9YJHEY6Da87qYeKQ.png"/></div></div></figure><p id="14d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> C .æ¨¡æ¿</strong></p><p id="a579" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘ä»¬å¸Œæœ›å°†ç”Ÿæˆçš„å›¾å½¢ä¿å­˜åœ¨ä¸€ä¸ªå…¬å…±æ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶ä¸”å¸Œæœ›ä»…åœ¨å°šæœªåˆ›å»ºæ–‡ä»¶å¤¹æ—¶æ‰åˆ›å»ºè¯¥æ–‡ä»¶å¤¹ï¼Œä¾‹å¦‚ç¬¬ä¸€æ¬¡åˆ›å»ºæ—¶:</p><pre class="je jf jg jh fd jx jy jz ka aw kb bi"><span id="26d0" class="kc kd hi jy b fi ke kf l kg kh">import os</span><span id="997c" class="kc kd hi jy b fi ki kf l kg kh">outpath = 'figs'<br/>if not os.path.exists(outpath): <br/>    if not os.path.exists(outpath):<br/>        os.mkdir(outpath)</span></pre><p id="3c2e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘ä»¬å°†ä¸ºæ¯ä¸ªå›¾å½¢å‘½åä¸€ä¸ªå”¯ä¸€ç”Ÿæˆçš„åç§°ï¼Œè¿™æ ·æ–°å›¾å½¢åœ¨ä¿å­˜æ—¶ä¸ä¼šæ›¿æ¢æ—§å›¾å½¢ã€‚ä¸ºæ­¤ç›®çš„åˆ›å»ºæ—¶é—´æˆ³æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆ:</p><pre class="je jf jg jh fd jx jy jz ka aw kb bi"><span id="045f" class="kc kd hi jy b fi ke kf l kg kh">import datetime</span><span id="c51e" class="kc kd hi jy b fi ki kf l kg kh">TS = datetime.datetime.now().strftime('%Y%m%d%H%M%S')</span></pre><p id="192d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du kj kk kl jy b">datetime.datetime.now()</code>è¿”å›ä»£è¡¨å½“å‰æ—¶é—´çš„datetimeå¯¹è±¡ã€‚<code class="du kj kk kl jy b">strftime</code>å°†æ—¥æœŸæ—¶é—´å¯¹è±¡è½¬æ¢æˆæŒ‡å®š<a class="ae jp" href="https://www.journaldev.com/23365/python-string-to-datetime-strptime" rel="noopener ugc nofollow" target="_blank">æ ¼å¼</a>çš„å­—ç¬¦ä¸²ã€‚å°†æ‰€æœ‰è¿™äº›æ”¾åœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹åŸºæœ¬æ¨¡æ¿æ¥ä¿å­˜æ‚¨è‡ªåŠ¨ç”Ÿæˆçš„æ¯ä¸ªå›¾å½¢:</p><pre class="je jf jg jh fd jx jy jz ka aw kb bi"><span id="3e81" class="kc kd hi jy b fi ke kf l kg kh">import matplotlib.pyplot as plt</span><span id="3af9" class="kc kd hi jy b fi ki kf l kg kh">plt.figure()</span><span id="6ba6" class="kc kd hi jy b fi ki kf l kg kh">df.plot()</span><span id="3577" class="kc kd hi jy b fi ki kf l kg kh">TS = datetime.datetime.now().strftime('%Y%m%d%H%M%S')<br/>fname = '%s.png' % TS<br/>plt.savefig(os.path.join(outpath, fname), bbox_inches = 'tight')<br/>plt.show()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kr"><img src="../Images/0351db6402d75c80549449be6585d06d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7AjIhX2ZiU0hPbBdVN0zrg.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">ä¸€ä¸ªç®€å•çš„æƒ…èŠ‚ã€‚</figcaption></figure><p id="d619" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du kj kk kl jy b">plot</code>æ˜¯<code class="du kj kk kl jy b">pandas.DataFrame</code>çš„ä¸€ç§æ–¹æ³•ï¼Œå®ƒå¯ä»¥è®©ä½ å¿«é€Ÿç»˜åˆ¶å‡ºæ•°æ®æ¡†ä¸­ä»»ä½•å¯ç”¨çš„æ•°æ®ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥å‡½æ•°åœ¨åç«¯ä½¿ç”¨matplotlibï¼Œå› æ­¤æ‚¨å¿…é¡»åŒ…å«å¸¸è§„å¯¼å…¥æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨è®¸å¤šå‚æ•°æ¥å¿«é€Ÿè°ƒæ•´ç»˜å›¾çš„å¤–è§‚ï¼Œä¾‹å¦‚ä½¿ç”¨å…ƒç»„<code class="du kj kk kl jy b">figsize</code>æ¥è®¾ç½®ç»˜å›¾çš„ç»´åº¦ï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è¦ä»¥å¯¹æ•°æ¯”ä¾‹ç»˜å›¾ï¼Œåˆ™ä½¿ç”¨å¸ƒå°”å€¼<code class="du kj kk kl jy b">logy</code>ã€‚æ–‡æ¡£åˆ—å‡ºäº†ä¸€å †ä½ å¯ä»¥ä½¿ç”¨çš„å…¶ä»–å‚æ•°ã€‚åœ¨ä»<code class="du kj kk kl jy b">df</code>è°ƒç”¨<code class="du kj kk kl jy b">plot</code>åï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨<code class="du kj kk kl jy b">pyplot</code>åŠŸèƒ½è¿›ä¸€æ­¥å®šåˆ¶æ‚¨çš„å›¾å½¢ï¼Œå¦‚è®¾ç½®æ ‡é¢˜ã€åˆ»åº¦æ ‡ç­¾ç­‰ã€‚</p><p id="dbfd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å°±ä¸ªäººè€Œè¨€ï¼Œæˆ‘å–œæ¬¢ä½¿ç”¨<code class="du kj kk kl jy b">pyplot</code>å‡½æ•°è€Œä¸æ˜¯<code class="du kj kk kl jy b">df.plot</code>å‡½æ•°ï¼Œå› ä¸ºå®ƒç»™äº†æˆ‘æ›´å¤šçš„çµæ´»æ€§ã€‚å› æ­¤ï¼Œæˆ‘å‘æ‚¨å±•ç¤ºäº†ä¸€äº›ä»£ç æ¨¡æ¿ï¼Œå…¶ä¸­åŒ…å«æˆ‘åœ¨å¯è§†åŒ–æ—¶é—´åºåˆ—æ•°æ®é›†æ—¶é€šå¸¸ä½¿ç”¨çš„æ‰€æœ‰å¸¸è§å®šåˆ¶:</p><p id="78e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ğŸ“ˆ<strong class="ih hj">æ¨¡æ¿1 </strong></p><p id="cb72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ç»˜åˆ¶æ•°æ®å¸§å­é›†çš„ç®€å•ä»£ç ï¼ŒåŒ…æ‹¬æ ‡é¢˜å’Œå›¾ä¾‹ã€‚æ‚¨å¯ä»¥åœ¨ç¬¬ä¸€è¡Œçš„<code class="du kj kk kl jy b">df_tmp</code>å¤„è®¾ç½®è¦å¯è§†åŒ–çš„å­é›†ã€‚</p><pre class="je jf jg jh fd jx jy jz ka aw kb bi"><span id="22b7" class="kc kd hi jy b fi ke kf l kg kh">df_tmp = df.iloc[:, 1:5]</span><span id="aea2" class="kc kd hi jy b fi ki kf l kg kh">plt.figure(figsize = (20, 5))</span><span id="124e" class="kc kd hi jy b fi ki kf l kg kh">for j in df_tmp:<br/>    X = df_tmp.index<br/>    Y = df_tmp[j].values<br/>    plt.plot(X, Y, label = j)<br/>    <br/>plt.title('A Simple Plot')<br/>plt.legend(loc = 'upper left')</span><span id="a3df" class="kc kd hi jy b fi ki kf l kg kh">TS = datetime.datetime.now().strftime('%Y%m%d%H%M%S')<br/>fname = '%s.png' % TS<br/>plt.savefig(os.path.join(outpath, fname), bbox_inches = 'tight')<br/>plt.show()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ks"><img src="../Images/f282290d543e078550acfda72902899f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iMES14yGNCu_Xof8eBMP3w.png"/></div></div></figure><p id="e503" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ğŸ“ˆ<strong class="ih hj">æ¨¡æ¿2 </strong></p><p id="c7ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¿™ä¸ªæ¨¡æ¿ä½¿ç”¨äº†<a class="ae jp" href="https://realpython.com/python-matplotlib-guide/#understanding-pltsubplots-notation" rel="noopener ugc nofollow" target="_blank">é¢å‘å¯¹è±¡çš„æ–¹æ³•</a>ã€‚è¿™ä¸ªæ–¹æ³•ç»™äº†æˆ‘ä»¬è¿›ä¸€æ­¥å®šåˆ¶xæ ‡ç­¾è®°å·çš„çµæ´»æ€§(è¿™é‡Œæœ‰å¾ˆå¥½çš„èµ„æº:<a class="ae jp" href="https://brohrer.github.io/matplotlib_ticks.html" rel="noopener ugc nofollow" target="_blank">ğŸ”—</a> <a class="ae jp" href="https://www.earthdatascience.org/courses/use-data-open-source-python/use-time-series-data-in-python/date-time-types-in-pandas-python/customize-dates-matplotlib-plots-python/" rel="noopener ugc nofollow" target="_blank">ğŸ”—</a>)ã€‚ä¸ä¸Šä¸€ä¸ªæ¨¡æ¿ç›¸æ¯”ï¼Œè¿™ä¸ªæ¨¡æ¿çš„ä¸»è¦æ”¹è¿›æ˜¯å®ƒå°†xè½´ä¸Šçš„ä¸»è¦åˆ»åº¦è®¾ç½®ä¸ºæ¯1å‘¨ä¸€æ¬¡ï¼Œå°†æ¬¡è¦åˆ»åº¦è®¾ç½®ä¸º1å¤©ä¸€æ¬¡ã€‚</p><pre class="je jf jg jh fd jx jy jz ka aw kb bi"><span id="79c3" class="kc kd hi jy b fi ke kf l kg kh">import matplotlib.dates as mdates</span><span id="b75a" class="kc kd hi jy b fi ki kf l kg kh">df_tmp = df.iloc[:, 1:5]</span><span id="b62e" class="kc kd hi jy b fi ki kf l kg kh">fig, ax = plt.subplots(figsize = (20, 5))</span><span id="720b" class="kc kd hi jy b fi ki kf l kg kh">for j in df_tmp:<br/>    X = df_tmp.index<br/>    Y = df_tmp[j].values<br/>    ax.plot(X, Y, label = j)</span><span id="b199" class="kc kd hi jy b fi ki kf l kg kh">ax.legend(loc = 'upper right')</span><span id="aa13" class="kc kd hi jy b fi ki kf l kg kh"># Set title and labels for axes<br/># Set the limits of the x-axis<br/># Set the limits of the y-axis so that the legend would not overlap with the plots<br/>ax.set(xlabel = 'Time',<br/>       ylabel = 'Values',<br/>       title = 'A Simple Plot',<br/>       xlim = [df_tmp.index[0], df_tmp.index[-1]],<br/>       ylim = [ax.get_yticks()[0], ax.get_yticks()[-1] + 30]<br/>      )</span><span id="728a" class="kc kd hi jy b fi ki kf l kg kh"># Define the date format<br/>date_form = mdates.DateFormatter("%m-%d-%y")<br/>ax.xaxis.set_major_formatter(date_form)</span><span id="4ccc" class="kc kd hi jy b fi ki kf l kg kh"># Ensure a major tick for each week<br/>ax.xaxis.set_major_locator(mdates.WeekdayLocator(interval=1))<br/># Add minor ticks representing the days<br/>ax.xaxis.set_minor_locator(mdates.DayLocator())<br/># rotate the labels 90 degrees<br/>ax.tick_params( axis="x", labelrotation = 90)</span><span id="05d5" class="kc kd hi jy b fi ki kf l kg kh">TS = datetime.datetime.now().strftime('%Y%m%d%H%M%S')<br/>fname = '%s.png' % TS<br/>plt.savefig(os.path.join(outpath, fname), bbox_inches = 'tight')<br/>plt.show()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kt"><img src="../Images/9a05af9b3a57c612919e26da3504b8a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OdCSR7t185Q4ULm-9oGZkg.png"/></div></div></figure><p id="b4b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ğŸ“ˆ<strong class="ih hj">æ¨¡æ¿3 </strong></p><p id="6e47" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">åœ¨å•ç‹¬çš„å›¾ä¸­å¯è§†åŒ–æ¯ä¸ªæ—¶é—´åºåˆ—ã€‚</p><pre class="je jf jg jh fd jx jy jz ka aw kb bi"><span id="5b5d" class="kc kd hi jy b fi ke kf l kg kh">df_tmp = df.iloc[:, 1:5]</span><span id="46c0" class="kc kd hi jy b fi ki kf l kg kh"># We are going to plot each column on a separate plot<br/>r = df_tmp.shape[1]</span><span id="e0c8" class="kc kd hi jy b fi ki kf l kg kh"># pass r in plt.subplots to set the number of plots in our figure<br/>fig, ax = plt.subplots(r, 1, figsize = (20, r * 4))</span><span id="c320" class="kc kd hi jy b fi ki kf l kg kh"># adjust distances between each plot in the figure<br/>fig.tight_layout(pad = 10)</span><span id="0b49" class="kc kd hi jy b fi ki kf l kg kh"># <br/>date_form = mdates.DateFormatter("%y-%m-%d %H")</span><span id="8e6f" class="kc kd hi jy b fi ki kf l kg kh"># when we create more than 1 subplots, a numpy array of axes objects is returned<br/># we access each using the counter i<br/>i = 0<br/>for j in df_tmp:<br/>    X = df_tmp.index<br/>    Y = df_tmp[j].values<br/>    ax[i].plot(X, Y, label = j)<br/>    <br/>    # all the common customizations<br/>    ax[i].set(xlabel = 'Time',<br/>       ylabel = 'Values',<br/>       title = j,<br/>       xlim = [df_tmp.index[0], df_tmp.index[-1]],<br/>       ylim = [ax[i].get_yticks()[0], ax[i].get_yticks()[-1]]<br/>      )<br/>    ax[i].xaxis.set_major_formatter(date_form)<br/>    ax[i].xaxis.set_major_locator(mdates.WeekdayLocator(interval=1))<br/>    ax[i].xaxis.set_minor_locator(mdates.DayLocator())<br/>    ax[i].tick_params( axis="x", labelrotation = 90)<br/>    <br/>    i += 1</span><span id="e328" class="kc kd hi jy b fi ki kf l kg kh"># Set main title<br/>fig.suptitle('Individual Time Series Visualized', position = (0.5, 0.98), fontsize = 24)</span><span id="e9cf" class="kc kd hi jy b fi ki kf l kg kh">TS = datetime.datetime.now().strftime('%Y%m%d%H%M%S')<br/>fname = '%s.png' % TS<br/>plt.savefig(os.path.join(outpath, fname), bbox_inches = 'tight')<br/>plt.show()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ku"><img src="../Images/0de2bafd117540179888d4a829de049b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tYh6P1725emff0gi8snNxA.png"/></div></div></figure></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><p id="5dcf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¥½äº†ï¼Œæš‚æ—¶å°±è¿™æ ·äº†ã€‚å½“æˆ‘æƒ³å‡ºæ–°çš„æ¨¡æ¿æ—¶ï¼Œæˆ‘ä¼šç»å¸¸æ›´æ–°è¿™ä¸ªå¸–å­ã€‚å¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ï¼:-)</p></div></div>    
</body>
</html>