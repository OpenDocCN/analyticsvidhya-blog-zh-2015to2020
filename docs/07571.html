<html>
<head>
<title>Create and visualize Choropleth map with Folium</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">åˆ›å»ºå’Œå¯è§†åŒ–Choroplethåœ°å›¾ä¸å¶</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/analytics-vidhya/create-and-visualize-choropleth-map-with-folium-269d3fd12fa0?source=collection_archive---------0-----------------------#2020-06-30">https://medium.com/analytics-vidhya/create-and-visualize-choropleth-map-with-folium-269d3fd12fa0?source=collection_archive---------0-----------------------#2020-06-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/80e526d1b4af25461ad10bb379599979.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vTLaGN1x8gQJTcQ1CAEkpA.jpeg"/></div></div></figure><p id="619b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">/ËŒviZH(oÍo)É™lÉ™ËˆzÄSH(É™)n/ </p><blockquote class="jp"><p id="1485" class="jq jr hi bd js jt ju jv jw jx jy jn dx translated">ä»¥å›¾è¡¨æˆ–å…¶ä»–å›¾åƒçš„å½¢å¼è¡¨ç¤ºä¸€ä¸ªå¯¹è±¡ã€ä¸€ç§æƒ…å†µæˆ–ä¸€ç»„ä¿¡æ¯</p></blockquote><h1 id="8999" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">ä¸ºä»€ä¹ˆå¯è§†åŒ–å¦‚æ­¤é‡è¦ï¼Ÿ</h1><p id="7af0" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">æ•°æ®å¯è§†åŒ–çš„ç›®æ ‡æ˜¯ç®€åŒ–æ•°æ®å€¼ï¼ŒåŠ æ·±å¯¹æ•°æ®å€¼çš„ç†è§£ï¼Œå¹¶å‘å—ä¼—ä¼ è¾¾é‡è¦çš„æ¦‚å¿µã€‚æˆ‘ä»¬çš„å¤§è„‘å¤©ç”Ÿå…·æœ‰å¿«é€Ÿè§†è§‰å¤„ç†èƒ½åŠ›ã€‚åŒæ ·ï¼Œ<strong class="is hj">éº»çœç†å·¥</strong>å£°æ˜:</p><ol class=""><li id="4e3e" class="lc ld hi is b it iu ix iy jb le jf lf jj lg jn lh li lj lk bi translated">äººè„‘å¯ä»¥åœ¨çŸ­çŸ­çš„13æ¯«ç§’å†…å¤„ç†ä¸€å¹…å›¾åƒ</li><li id="ad90" class="lc ld hi is b it ll ix lm jb ln jf lo jj lp jn lh li lj lk bi translated"><strong class="is hj"/>ä¼ è¾“åˆ°å¤§è„‘çš„ä¿¡æ¯90%æ˜¯è§†è§‰çš„</li></ol><blockquote class="lq lr ls"><p id="8a1e" class="iq ir jo is b it iu iv iw ix iy iz ja lt jc jd je lu jg jh ji lv jk jl jm jn hb bi translated">â€œçš„ç¡®ï¼Œè§†è§‰æ•ˆæœéå¸¸å¼•äººæ³¨ç›®ï¼!"</p></blockquote><h1 id="851c" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk lw km kn ko lx kq kr ks ly ku kv kw bi translated">è®©æˆ‘ä»¬äº†è§£ä¸€ä¸‹å¶å›¾ä¹¦é¦†å’ŒChoroplethåœ°å›¾</h1><p id="7c26" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi lz translated"><span class="l ma mb mc bm md me mf mg mh di"> C </span>å®ƒå…è®¸æˆ‘ä»¬ç ”ç©¶å˜é‡æ˜¯å¦‚ä½•éšç€é¢†åŸŸå‘å±•çš„ã€‚å®ƒæ˜¯ä¸€ç§åŠŸèƒ½å¼ºå¤§ä¸”å¹¿æ³›ä½¿ç”¨çš„æ•°æ®å¯è§†åŒ–æŠ€æœ¯ã€‚</p><p id="fc7b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi lz translated"><span class="l ma mb mc bm md me mf mg mh di"> F </span>å®ƒå»ºç«‹åœ¨Pythonç”Ÿæ€ç³»ç»Ÿçš„æ•°æ®äº‰è®ºä¼˜åŠ¿å’Œ<a class="ae mi" href="https://leafletjs.com/" rel="noopener ugc nofollow" target="_blank"> leaflet.js </a>åº“çš„æ˜ å°„ä¼˜åŠ¿ä¹‹ä¸Šã€‚</p><p id="bf00" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">è¯¥åº“å†…ç½®äº†æ¥è‡ª<strong class="is hj"> OpenStreetMap </strong>ã€<strong class="is hj"> Mapbox </strong>å’Œ<strong class="is hj"> Stamen </strong>çš„å¤šä¸ªtilesetï¼Œå¹¶æ”¯æŒå¸¦æœ‰<strong class="is hj"> Mapbox </strong>æˆ–<strong class="is hj"> Cloudmade API </strong>é”®çš„è‡ªå®šä¹‰tilesetã€‚</p><p id="dbf0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ¥</p><h1 id="b2d6" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk lw km kn ko lx kq kr ks ly ku kv kw bi translated">1.å¶å­çš„å®‰è£…</h1><h2 id="c288" class="mj ka hi bd kb mk ml mm kf mn mo mp kj jb mq mr kn jf ms mt kr jj mu mv kv mw bi translated">åœ¨å®‰è£…haveä¹‹å‰ï¼Œå»ºè®®å®‰è£…<a class="ae mi" href="https://pypi.org/project/branca/" rel="noopener ugc nofollow" target="_blank"> branca </a>ã€<a class="ae mi" href="https://pypi.org/project/Jinja2/" rel="noopener ugc nofollow" target="_blank"> jinja2 </a>å’Œ<a class="ae mi" href="https://pypi.org/project/requests/2.7.0/" rel="noopener ugc nofollow" target="_blank"> requests </a>ã€‚</h2><p id="898d" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">æœ‰äº›åŠŸèƒ½éœ€è¦<a class="ae mi" href="https://pypi.org/project/geopandas/" rel="noopener ugc nofollow" target="_blank"> geopandas </a>å’Œ<a class="ae mi" href="https://pypi.org/project/altair/" rel="noopener ugc nofollow" target="_blank"> altair </a></p><pre class="mx my mz na fd nb nc nd ne aw nf bi"><span id="bdbc" class="mj ka hi nc b fi ng nh l ni nj">$ pip install folium</span></pre><p id="c635" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">æˆ–è€…</p><pre class="mx my mz na fd nb nc nd ne aw nf bi"><span id="6b62" class="mj ka hi nc b fi ng nh l ni nj">$ conda install folium -c conda-forge</span></pre><h1 id="ad76" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk lw km kn ko lx kq kr ks ly ku kv kw bi translated">2.ä½¿ç”¨åˆ‡ç‰‡å’Œæ ‡è®°åˆ›å»ºåº•å›¾</h1><p id="13a0" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">è¦åˆ›å»ºåº•å›¾ï¼Œåªéœ€å°†ä½ç½®åæ ‡ä¼ é€’ç»™map()ã€‚</p><pre class="mx my mz na fd nb nc nd ne aw nf bi"><span id="cd3f" class="mj ka hi nc b fi ng nh l ni nj"><strong class="nc hj">import</strong> <strong class="nc hj">folium</strong></span><span id="2ab8" class="mj ka hi nc b fi nk nh l ni nj">new_york = folium.Map(location=[40.7128,-73.9352])<br/>new_york</span></pre><figure class="mx my mz na fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nl"><img src="../Images/6b0bc2a0f3ddd05f2f9cfb8917cc5f97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NGO_rfYcdJwkwLem1FKeVQ.jpeg"/></div></div><figcaption class="nm nn et er es no np bd b be z dx translated">ä¸Šè¿°ä»£ç çš„è¾“å‡ºï¼Œè¿™æ˜¯ä¸€ä¸ªOpenStreetMap</figcaption></figure><p id="8316" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">åˆ—è¡¨åŒ…å«<strong class="is hj">ã€çº¬åº¦ï¼Œç»åº¦ã€‘ï¼Œ</strong>ï¼Œè¿™äº›å€¼å¿…é¡»ä»¥åè¿›åˆ¶åº¦æ•°è¡¨ç¤ºã€‚ä½ å¯ä»¥é€šè¿‡è¿™ä¸ª<a class="ae mi" href="https://www.gps-coordinates.net/" rel="noopener ugc nofollow" target="_blank"> <em class="jo">ç½‘ç«™</em> </a>è·å–åœ°ç‚¹çš„ç»çº¬åº¦ã€‚</p><p id="a50b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">è¦å°†å…¶å­˜å‚¨ä¸ºâ€œä¸‹è½½â€æ–‡ä»¶å¤¹ä¸­çš„HTMLæ–‡æ¡£:</p><pre class="mx my mz na fd nb nc nd ne aw nf bi"><span id="4c5d" class="mj ka hi nc b fi ng nh l ni nj">new_york.save(â€˜index.htmlâ€™)</span></pre><p id="567b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">æ³¨æ„:é»˜è®¤ç£è´´è¢«è®¾ç½®ä¸ºOpenStreetMapï¼Œä½†ä¹Ÿå¯ä»¥ä½¿ç”¨è®¸å¤šå…¶ä»–ç£è´´ï¼Œå¦‚<a class="ae mi" href="http://maps.stamen.com/#terrain" rel="noopener ugc nofollow" target="_blank">é›„è•Šåœ°å½¢</a>ã€<a class="ae mi" href="http://maps.stamen.com/#toner" rel="noopener ugc nofollow" target="_blank">é›„è•Šè°ƒè‰²å‰‚</a>ã€<a class="ae mi" href="https://api.mapbox.com/styles/v1/mapbox/bright-v9.html?title=true&amp;access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4M29iazA2Z2gycXA4N2pmbDZmangifQ.-g_vE53SD2WrJ6tFX7QHmA#15/34.0442/-118.2518" rel="noopener ugc nofollow" target="_blank">åœ°å›¾æ¡†æ˜äº®</a>ã€‚</p><pre class="mx my mz na fd nb nc nd ne aw nf bi"><span id="693b" class="mj ka hi nc b fi ng nh l ni nj">folium.Map(<br/>    location=[40.7128,-73.9352],<br/>    tiles='Stamen Toner',<br/>    zoom_start=13<br/>)</span></pre><figure class="mx my mz na fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nq"><img src="../Images/662d25100e9b39fb20a3fa62b735c672.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bq3ejEE6CmAs0FwY6HO5PA.jpeg"/></div></div><figcaption class="nm nn et er es no np bd b be z dx translated">è¾“å‡ºä¸ºä¸Šé¢çš„ä»£ç ï¼Œä¸€ä¸ªå¸¦æœ‰é›„è•Šè°ƒè‰²å‰‚çš„è´´å›¾</figcaption></figure><blockquote class="lq lr ls"><p id="e8ef" class="iq ir jo is b it iu iv iw ix iy iz ja lt jc jd je lu jg jh ji lv jk jl jm jn hb bi translated">è¦äº†è§£æœ‰å…³åœ°å›¾åŠŸèƒ½çš„æ›´å¤šä¿¡æ¯ï¼Œåªéœ€å°†ä»¥ä¸‹å†…å®¹ç²˜è´´åˆ°ç¼–è¾‘å™¨ä¸­</p></blockquote><pre class="mx my mz na fd nb nc nd ne aw nf bi"><span id="496e" class="mj ka hi nc b fi ng nh l ni nj"><strong class="nc hj">folium.Map?</strong></span></pre><p id="cd6e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ä¸ºäº†åœ¨åœ°å›¾ä¸Šç²¾ç¡®å®šä½ä¸€ä¸ªä½ç½®ï¼Œä½¿ç”¨äº†ä¸€ä¸ªæ ‡è®°<strong class="is hj">å’Œ</strong>ã€‚</p><pre class="mx my mz na fd nb nc nd ne aw nf bi"><span id="5bcf" class="mj ka hi nc b fi ng nh l ni nj"><strong class="nc hj">new_york </strong>= folium.Map(<br/>    location=[40.7128,-73.9352],<br/>    zoom_start=12,<br/>    <br/>)</span><span id="ce5e" class="mj ka hi nc b fi nk nh l ni nj">folium.<strong class="nc hj">Marker</strong>([40.74843597, -73.98580932], popup='&lt;i&gt;Empire State Bldg&lt;/i&gt;', tooltip="Empire State Bldg").add_to(new_york)</span><span id="ff66" class="mj ka hi nc b fi nk nh l ni nj">folium.<strong class="nc hj">Marker</strong>([40.767459869,-73.970710754], popup='&lt;b&gt;Central Park&lt;/b&gt;').add_to(new_york)</span><span id="e05e" class="mj ka hi nc b fi nk nh l ni nj">folium.<strong class="nc hj">Marker</strong>([40.75271606,-73.97721862],popup='Grand Central Terminal',icon=folium.Icon(color='red',icon='bus',prefix='fa'))<br/>.add_to(new_york)</span><span id="b390" class="mj ka hi nc b fi nk nh l ni nj">folium.<strong class="nc hj">Marker</strong>([40.713409424, -74.013343811],popup='One World Trade Center',icon=folium.Icon(color='green'))<br/>.add_to(new_york)</span><span id="a4a3" class="mj ka hi nc b fi nk nh l ni nj"><strong class="nc hj">new_york</strong></span></pre><figure class="mx my mz na fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nr"><img src="../Images/f12fd8f09a6a4efec4479eb2ee6098ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lQGY-5JRRJg6kvw1qgSeCA.jpeg"/></div></div></figure><figure class="mx my mz na fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ns"><img src="../Images/03a88b69e17a96d678505e67cc483d6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4kiRnqZ2hkPIn_n375zvsw.jpeg"/></div></div><figcaption class="nm nn et er es no np bd b be z dx translated">æˆ‘çš„ä¸€ä¸ªå°å‘å¯¼</figcaption></figure><p id="599f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">å¦‚æœä½ æƒ³è¦æ›´å¤šä¸åŒç±»å‹çš„å›¾æ ‡ï¼Œé‚£ä¹ˆè®¿é—®<a class="ae mi" href="https://fontawesome.com/v4.7.0/icons/" rel="noopener ugc nofollow" target="_blank"> Font Awesomeçš„ç½‘ç«™ã€‚è¦ä½¿ç”¨è¿™äº›å›¾æ ‡ï¼Œåœ¨<strong class="is hj">å¶ä¸­ä½¿ç”¨<strong class="is hj">å‰ç¼€=â€˜faâ€™</strong>ã€‚å›¾æ ‡()ã€‚</strong></a></p><h1 id="9a9b" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk lw km kn ko lx kq kr ks ly ku kv kw bi translated">3.æœ€åï¼Œåˆ›å»ºä¸€ä¸ªChoroplethåœ°å›¾ï¼</h1><p id="0ef6" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">æˆ‘é€‰æ‹©äº†ä¸€ä¸ªç¾å›½å·çš„æ•°æ®é›†æ¥å·¥ä½œã€‚æ‚¨ä¹Ÿå¯ä»¥é€‰æ‹©å…·æœ‰ä¸åŒä½ç½®çš„æ•°æ®é›†ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬åŠ è½½æˆ‘ä»¬é€‰æ‹©çš„CSVæ–‡ä»¶æ¥å¯è§†åŒ–Choroplethå›¾ã€‚GeoJSONå’ŒTopoJSONå›¾å±‚å¯ä»¥ä½œä¸ºå åŠ å›¾ä¼ é€’åˆ°åœ°å›¾ï¼Œå¹¶ä¸”å¯ä»¥åœ¨åŒä¸€åœ°å›¾ä¸Šæ˜¾ç¤ºå¤šä¸ªå›¾å±‚ã€‚</p><pre class="mx my mz na fd nb nc nd ne aw nf bi"><span id="93fc" class="mj ka hi nc b fi ng nh l ni nj"><strong class="nc hj">import folium <br/>import json<br/>import requests<br/>import pandas as pd<br/>import matplotlib.pyplot as plt<br/>import branca <br/>import seaborn as sns<br/>import numpy as np</strong></span><span id="eb8f" class="mj ka hi nc b fi nk nh l ni nj"><strong class="nc hj">state_unemp</strong> = pd.read_csv("state_unemployment.csv")</span><span id="b95a" class="mj ka hi nc b fi nk nh l ni nj"><strong class="nc hj">url</strong> = '<a class="ae mi" href="https://raw.githubusercontent.com/python-visualization/folium/master/examples/data'" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/python-visualization/folium/master/examples/data'</a></span><span id="13fe" class="mj ka hi nc b fi nk nh l ni nj"><strong class="nc hj">state_geo</strong> = f'{url}/us-states.json'        #for state level data</span></pre><p id="045a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ç°åœ¨åˆ›å»ºä¸€ä¸ªç®€å•çš„åœ°å›¾:</p><pre class="mx my mz na fd nb nc nd ne aw nf bi"><span id="5fb1" class="mj ka hi nc b fi ng nh l ni nj"><strong class="nc hj">usa_state = folium.Map(location=[48, -102], zoom_start=3)</strong></span><span id="ef47" class="mj ka hi nc b fi nk nh l ni nj"><strong class="nc hj">folium.Choropleth(<br/>    geo_data = state_geo,                  </strong>#json<strong class="nc hj"><br/>    name ='choropleth',                  <br/>    data = state_unemp,                     <br/>    columns = ['State', 'Unemployment'], </strong>#columns to work on<strong class="nc hj"><br/>    key_on ='feature.id',<br/>    fill_color ='YlGnBu',     </strong>#I passed colors Yellow,Green,Blue<strong class="nc hj"><br/>    fill_opacity = 0.7,<br/>    line_opacity = 0.2<br/>   legend_name = "Unemployment scale</strong>"<strong class="nc hj"><br/>).add_to(usa_state)</strong></span><span id="0342" class="mj ka hi nc b fi nk nh l ni nj"><strong class="nc hj">usa_state</strong></span><span id="9e77" class="mj ka hi nc b fi nk nh l ni nj">#more info about the function can be found using <strong class="nc hj">folium.Choropleth?</strong></span></pre><figure class="mx my mz na fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nt"><img src="../Images/db0a111231775ecb2a16929f2f74cd60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WZ8euWrxbqAZknvLvVmsYQ.jpeg"/></div></div><figcaption class="nm nn et er es no np bd b be z dx translated">æ˜¾ç¤ºå·ä¸€çº§å¤±ä¸šæƒ…å†µçš„åœ°å›¾</figcaption></figure><h2 id="49ef" class="mj ka hi bd kb mk ml mm kf mn mo mp kj jb mq mr kn jf ms mt kr jj mu mv kv mw bi translated">3.1ä½¿ç”¨StepColormap</h2><p id="0eb5" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">StepColormapæ˜¯<em class="jo">åµŒå…¥</em>åœ¨folium.colormapä¸­</p><pre class="mx my mz na fd nb nc nd ne aw nf bi"><span id="4c08" class="mj ka hi nc b fi ng nh l ni nj"><strong class="nc hj">import</strong> <strong class="nc hj">branca.colormap</strong> <strong class="nc hj">as</strong> <strong class="nc hj">cmp</strong></span><span id="864f" class="mj ka hi nc b fi nk nh l ni nj"><strong class="nc hj">step</strong> = cmp.StepColormap(<br/> ['yellow', 'green', 'purple'],<br/> vmin=3, vmax=10,<br/> index=[3, 6, 8, 10],  #for change in the colors, not used fr linear<br/> caption='Color Scale for Map'    #Caption for Color scale or Legend<br/>)</span><span id="983c" class="mj ka hi nc b fi nk nh l ni nj"><strong class="nc hj">step</strong></span></pre><figure class="mx my mz na fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nu"><img src="../Images/5898f4e50ef2472fa46f7d432e6d6735.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gBpfslaS2oZwGbKZVnEKtA.jpeg"/></div></div></figure><p id="eec2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ä½¿ç”¨ä¸Šé¢åœ¨å›¾ä¸­å®šä¹‰çš„æ­¥é•¿å˜é‡:</p><pre class="mx my mz na fd nb nc nd ne aw nf bi"><span id="74af" class="mj ka hi nc b fi ng nh l ni nj"><strong class="nc hj">unemployment_dict</strong> = state_unemp.set_index('State')['Unemployment']<br/><strong class="nc hj">geo_json_data </strong>= json.loads(requests.get(<strong class="nc hj">state_geo</strong>).text)</span><span id="17ad" class="mj ka hi nc b fi nk nh l ni nj">usa_step = folium.Map([48, -102], tiles='cartodbpositron', zoom_start=3)</span><span id="91bf" class="mj ka hi nc b fi nk nh l ni nj">folium.GeoJson(<br/>    <strong class="nc hj">geo_json_data</strong>,<br/>    style_function=lambda feature: {<br/>        'fillColor': <strong class="nc hj">step</strong>(<strong class="nc hj">unemployment_dict</strong>[feature['id']]),<br/>        'color': 'black',       #border color for the color fills<br/>        'weight': 1,            #how thick the border has to be<br/>        'dashArray': '5, 3'  #dashed lines length,space between them<br/>    }<br/>).add_to(usa_step)<br/><strong class="nc hj">step</strong>.add_to(usa_step)     #adds colorscale or legend</span><span id="bcfc" class="mj ka hi nc b fi nk nh l ni nj">usa_step</span></pre><figure class="mx my mz na fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nv"><img src="../Images/136ea842aac95e025af2181ed861f0fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qGCiKfP0ByqTCYmWWt7LTw.jpeg"/></div></div></figure><h2 id="1c60" class="mj ka hi bd kb mk ml mm kf mn mo mp kj jb mq mr kn jf ms mt kr jj mu mv kv mw bi translated">3.2ä½¿ç”¨LinearColormap</h2><p id="121a" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">æœ‰ä¸€ç»„è¿ç»­çš„é¢œè‰²ã€‚</p><pre class="mx my mz na fd nb nc nd ne aw nf bi"><span id="f610" class="mj ka hi nc b fi ng nh l ni nj"><strong class="nc hj">import</strong> <strong class="nc hj">branca.colormap</strong> <strong class="nc hj">as</strong> <strong class="nc hj">cmp</strong></span><span id="2029" class="mj ka hi nc b fi nk nh l ni nj"><strong class="nc hj">linear</strong> = cmp.LinearColormap(<br/>    ['yellow', 'green', 'purple'],<br/>    vmin=3, vmax=10,<br/>    caption='Color Scale for Map' #Caption for Color scale or Legend<br/>)</span><span id="973c" class="mj ka hi nc b fi nk nh l ni nj"><strong class="nc hj">linear</strong></span></pre><figure class="mx my mz na fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nw"><img src="../Images/1632daf82d40de455d80ebfdd38db1d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GaZAvmequprZQpzlyzufeQ.jpeg"/></div></div></figure><p id="e33e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ä½¿ç”¨ä¸Šé¢åœ¨å›¾ä¸­å®šä¹‰çš„çº¿æ€§å˜é‡:</p><pre class="mx my mz na fd nb nc nd ne aw nf bi"><span id="a39a" class="mj ka hi nc b fi ng nh l ni nj"><strong class="nc hj">unemployment_dict</strong> = state_unemp.set_index('State')['Unemployment']<br/><strong class="nc hj">geo_json_data </strong>= json.loads(requests.get(<strong class="nc hj">state_geo</strong>).text)</span><span id="bd3f" class="mj ka hi nc b fi nk nh l ni nj">usa_linear = folium.Map([48,-102], tiles='cartodbpositron', zoom_start=3)</span><span id="f39b" class="mj ka hi nc b fi nk nh l ni nj">folium.GeoJson(<br/>    <strong class="nc hj">geo_json_data</strong>,<br/>    style_function=lambda feature: {<br/>        'fillColor': <strong class="nc hj">linear</strong>(<strong class="nc hj">unemployment_dict</strong>[feature['id']]),<br/>        'color': 'black',     #border color for the color fills<br/>        'weight': 1,          #how thick the border has to be<br/>        'dashArray': '5, 3'  #dashed lines length,space between them<br/>    }<br/>).add_to(usa_linear)<br/><strong class="nc hj">linear</strong>.add_to(usa_linear)   #adds colorscale or legend</span><span id="f77a" class="mj ka hi nc b fi nk nh l ni nj">usa_linear</span></pre><figure class="mx my mz na fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nx"><img src="../Images/2ea0b1878a4360b4fd7c3027c486b4b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aUwHGeVVVq9JqULi1kc6ow.jpeg"/></div></div></figure><blockquote class="lq lr ls"><p id="788f" class="iq ir jo is b it iu iv iw ix iy iz ja lt jc jd je lu jg jh ji lv jk jl jm jn hb bi translated">â€œè¦æ‰¾åˆ°æ›´å¤šè¿™æ ·çš„é…è‰²æ–¹æ¡ˆï¼Œåªéœ€å°†å®ƒç²˜è´´åˆ°ç¼–è¾‘å™¨ä¸­â€</p></blockquote><pre class="mx my mz na fd nb nc nd ne aw nf bi"><span id="1c73" class="mj ka hi nc b fi ng nh l ni nj"><strong class="nc hj">cmp.linear   <br/>#or<br/>branca.colormap.linear</strong></span></pre><h2 id="bfc7" class="mj ka hi bd kb mk ml mm kf mn mo mp kj jb mq mr kn jf ms mt kr jj mu mv kv mw bi translated">è½¬æ¢ç­–ç•¥</h2><p id="f0d6" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">å¦‚æœæ‚¨æƒ³å°†çº¿æ€§é…è‰²æ–¹æ¡ˆè½¬æ¢ä¸ºstep:</p><pre class="mx my mz na fd nb nc nd ne aw nf bi"><span id="e295" class="mj ka hi nc b fi ng nh l ni nj"><strong class="nc hj">linear.to_step(6)</strong></span><span id="226d" class="mj ka hi nc b fi nk nh l ni nj">#Note: The color schemes appeared in <strong class="nc hj">linear</strong> have been changed to #step. Also, give a step size in the parenthesis.</span></pre><figure class="mx my mz na fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ny"><img src="../Images/fb9d3a9309df1a11d9e5255f5041b350.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NuOZuYxRL6FzmfAo5qfFzA.jpeg"/></div></div></figure><p id="b2e2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ä»¥åŠï¼Œå°†æ­¥éª¤é¢œè‰²æ–¹æ¡ˆè½¬æ¢ä¸ºçº¿æ€§:</p><pre class="mx my mz na fd nb nc nd ne aw nf bi"><span id="6d53" class="mj ka hi nc b fi ng nh l ni nj"><strong class="nc hj">step.to_linear()</strong></span><span id="6a17" class="mj ka hi nc b fi nk nh l ni nj">#Note: The color schemes appeared in <strong class="nc hj">step</strong> have been changed to #linear</span></pre><figure class="mx my mz na fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nw"><img src="../Images/1632daf82d40de455d80ebfdd38db1d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GaZAvmequprZQpzlyzufeQ.jpeg"/></div></div></figure><h2 id="cb2a" class="mj ka hi bd kb mk ml mm kf mn mo mp kj jb mq mr kn jf ms mt kr jj mu mv kv mw bi translated">3.3å°†é˜¶è·ƒè½¬æ¢ä¸ºçº¿æ€§çš„Choroplethå›¾ï¼Œåä¹‹äº¦ç„¶</h2><p id="0daf" class="pw-post-body-paragraph iq ir hi is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hb bi translated">ä½¿ç”¨æ–°çš„ç¾å›½å¿æ•°æ®é›†ã€‚æŒ‰ç…§æ­¥éª¤3åŠ è½½CSVæ–‡ä»¶å¹¶å¯¼å…¥å¿…è¦çš„åº“ã€‚</p><pre class="mx my mz na fd nb nc nd ne aw nf bi"><span id="d2e9" class="mj ka hi nc b fi ng nh l ni nj"><strong class="nc hj">us_data</strong> = pd.read_csv('unemployment_county_data.csv')</span><span id="aeb1" class="mj ka hi nc b fi nk nh l ni nj"><strong class="nc hj">url</strong> = '<a class="ae mi" href="https://raw.githubusercontent.com/python-visualization/folium/master/examples/data'" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/python-visualization/folium/master/examples/data'</a></span><span id="adb3" class="mj ka hi nc b fi nk nh l ni nj"><strong class="nc hj">county_geo</strong> =f'{url}/us_counties_20m_topo.json'#for county level data</span><span id="951e" class="mj ka hi nc b fi nk nh l ni nj"><strong class="nc hj">employed_series</strong> = us_data.set_index('FIPS')['Unemployment_rate_2011']</span></pre><p id="1f59" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">åˆ©ç”¨ã€‚Choroplethæ˜ å°„ä¸­çš„to _ step():</strong></p><pre class="mx my mz na fd nb nc nd ne aw nf bi"><span id="0619" class="mj ka hi nc b fi ng nh l ni nj">#linear to step using .to_step()</span><span id="2fdc" class="mj ka hi nc b fi nk nh l ni nj">colorscale = branca.colormap.linear.RdYlBu_11.<strong class="nc hj">to_step(6)</strong>.scale(0, 30)                       <br/>colorscale.caption = 'Color Scale'     #Caption for legend</span><span id="102b" class="mj ka hi nc b fi nk nh l ni nj">def style_function(feature):<br/>    employed = <strong class="nc hj">employed_series</strong>.get(int(feature['id'][-5:]), None)<br/>    return {<br/>        'fillOpacity': 0.5,<br/>        'weight': 0,<br/>        'caption': "Color Scale",<br/>        'fillColor': '#black' if employed is None else colorscale(employed)<br/>    }</span><span id="d2a6" class="mj ka hi nc b fi nk nh l ni nj">us_county_stp = folium.Map(<br/>    location=[42, -100],<br/>    tiles='cartodbpositron',<br/>    zoom_start=4<br/>)</span><span id="0199" class="mj ka hi nc b fi nk nh l ni nj">folium.TopoJson(<br/>    json.loads(requests.get(<strong class="nc hj">county_geo</strong>).text),  #data<br/>    'objects.us_counties_20m',       #object_path<br/>    style_function=style_function<br/>).add_to(us_county_stp)</span><span id="0f6a" class="mj ka hi nc b fi nk nh l ni nj">colorscale.add_to(us_county_stp)</span><span id="41aa" class="mj ka hi nc b fi nk nh l ni nj">us_county_stp</span></pre><figure class="mx my mz na fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nz"><img src="../Images/007f9b525491d182b61898a708066771.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*letDc6mfWqRMtuOnjnRLbw.jpeg"/></div></div><figcaption class="nm nn et er es no np bd b be z dx translated">ä½¿ç”¨é˜¶è·ƒå‡½æ•°çš„ç¾å›½å¿æ˜æ™ºå¤±ä¸š</figcaption></figure><p id="0806" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">åˆ©ç”¨ã€‚Choroplethæ˜ å°„ä¸­çš„to _ linear():</strong></p><pre class="mx my mz na fd nb nc nd ne aw nf bi"><span id="4972" class="mj ka hi nc b fi ng nh l ni nj">#step to linear using .to_linear()<br/>colorscale = branca.colormap.step.RdYlBu_11.<strong class="nc hj">to_linear()</strong>.scale(0, 30)<br/>colorscale.caption = 'Color Scale'</span><span id="3937" class="mj ka hi nc b fi nk nh l ni nj">def style_function(feature):<br/>    employed = <strong class="nc hj">employed_series</strong>.get(int(feature['id'][-5:]), None)<br/>    return {<br/>        'fillOpacity': 0.5,<br/>        'weight': 0,<br/>        'fillColor': '#black' if employed is None else colorscale(employed)<br/>    }</span><span id="59d6" class="mj ka hi nc b fi nk nh l ni nj">us_county_lin = folium.Map(<br/>    location=[42, -100],<br/>    tiles='cartodbpositron',<br/>    zoom_start=4<br/>)</span><span id="a8d3" class="mj ka hi nc b fi nk nh l ni nj">folium.TopoJson(<br/>    json.loads(requests.get(<strong class="nc hj">county_geo</strong>).text),<br/>    'objects.us_counties_20m',<br/>    style_function=style_function<br/>).add_to(us_county_lin)</span><span id="fd93" class="mj ka hi nc b fi nk nh l ni nj">colorscale.add_to(us_county_lin)</span><span id="47b0" class="mj ka hi nc b fi nk nh l ni nj">us_county_lin</span></pre><figure class="mx my mz na fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es oa"><img src="../Images/af3990c4bc807577fa688a4fa3f8092c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_N0OIYWVCI3OAP8H_qZZtA.jpeg"/></div></div><figcaption class="nm nn et er es no np bd b be z dx translated">ä½¿ç”¨çº¿æ€§å‡½æ•°çš„ç¾å›½å¿çº§å¤±ä¸šç‡</figcaption></figure><p id="05fd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">å› æ­¤ï¼Œåˆ›å»ºä¸€ä¸ªChoroplethåœ°å›¾å¹¶ä¸æ˜¯ä¸€é¡¹ä»»åŠ¡ğŸ˜„ã€‚æˆ‘å¸Œæœ›æˆ‘çš„å¸–å­å¯¹å¤§å¤šæ•°ä»äº‹å¯è§†åŒ–æ•°æ®å·¥ä½œçš„äººæœ‰æ‰€å¸®åŠ©ã€‚</p><p id="f1d3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="jo">è¯·ç»™æˆ‘</em> </strong>ğŸ‘<strong class="is hj"> <em class="jo">å¦‚æœä½ å–œæ¬¢æˆ‘çš„å¸–å­ï¼ğŸ‰</em> </strong></p></div></div>    
</body>
</html>