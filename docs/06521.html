<html>
<head>
<title>Shh! Your secret is safe — A simple guide to Steganography in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">嘘！你的秘密是安全的Python隐写术简单指南</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/shh-your-secret-is-safe-a-simple-guide-to-steganography-in-python-89116582277e?source=collection_archive---------6-----------------------#2020-05-25">https://medium.com/analytics-vidhya/shh-your-secret-is-safe-a-simple-guide-to-steganography-in-python-89116582277e?source=collection_archive---------6-----------------------#2020-05-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d31d200da507409f6fea20a37f10dca0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*j2frExm-Crz67KoL"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片来源:谷歌图片</figcaption></figure><p id="5c59" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">你试过用密码和你的朋友通话吗？我们都试过了，对吧？</p><p id="b26d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">不仅仅是我们。当朱利叶斯·凯撒向他的将军们发送消息时，他不信任他的信使。所以他用D代替了他信息中的A，用E代替了B，以此类推。只有知道“移位3”规则的人才能理解他的信息。很聪明，对吧？</p><p id="f761" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这种将原始数据转换为“秘密”数据的方法称为加密。并且，转换后的“秘密数据”本身被称为加密数据。</p><p id="44ce" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">虽然这是一种交换秘密信息的巧妙技术，但仍有可能有人会发现解读的“秘密规则”(在这种情况下，是移位3规则)，并获得原始信息。</p><p id="c037" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">但是，如果我们隐藏加密数据本身，其他人可能永远不会注意到双方之间交换了秘密。那么，有没有办法隐藏加密数据本身呢？</p><p id="6f84" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这正是我们将在本文中讨论的内容。</p><p id="7ff3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">从最高机密的政府机构到恐怖组织，几乎每个人都使用隐写术来交换高度机密的数据，因此，看起来好像秘密数据的交换从未发生过。</p><p id="d0ad" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">那么，什么是隐写术呢？</strong></p><p id="2aef" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">图像隐写术是一种在图像中隐藏数据(包括文本、图像、音频、视频)的技术，人类通常无法区分经过处理的图像和原始图像。这为正在传输的数据增加了一层额外的安全性。</p><p id="ae4a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在本文中，我们将使用Python从头开始构建一个图像隐写软件。该软件将能够在图像中隐藏受密码保护的秘密信息，这样一个正常人将无法在视觉上区分原始图像和修改后的图像。</p><p id="c2bf" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在编写代码之前，让我们首先理解这种技术的基本概念。</p><p id="59fc" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">有很多方法可以做到这一点。但是，我们将使用LSB(最低有效位)隐写方法来实现该软件。</p><p id="f56d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们先了解图像在计算机中是如何表现的。</p><p id="dc2b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在计算机中，每幅图像都被表示为一个由<a class="ae js" href="https://en.wikipedia.org/wiki/Pixel" rel="noopener ugc nofollow" target="_blank">像素</a>组成的矩阵。像素是图像的最小元素。每个像素代表图像中由一种颜色组成的一个点。因此，所有像素(因此，色点)的集合构成了整个图像。如果将图像放大得太深，可能会看到单个像素。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es jt"><img src="../Images/3e759cc37eea547a4d3520d1c4e65683.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/0*qP2BOPNxkqI3O3mc"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">【图片来源:<a class="ae js" href="http://www.ultimate-photo-tips.com" rel="noopener ugc nofollow" target="_blank"><em class="jy">www.ultimate-photo-tips.com</em></a><em class="jy">(朱莉·沃特豪斯摄影)</em></figcaption></figure><p id="5759" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">很有趣，对吧？但是，像素本身在计算机中是如何表示的呢？</p><p id="dc4e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">正如我们之前讨论的，像素只不过是色点。这个世界上的任何颜色都可以用三原色——红、绿、蓝(RGB)创造出来。因此，每个像素被表示为这三原色的强度值(范围从0到255)的元组。这种表示被称为RGB表示。RGB元组的第一个元素表示红色的强度，第二个元素表示绿色的强度，第三个元素表示蓝色的强度。例如，rgb(255，0，0)表示纯红色，rgb(0，0，255)表示纯蓝色，而rgb(255，255，0)和rgb(160，32，240)分别表示黄色和紫色。</p><p id="f7bd" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">正如我们所知，这些颜色强度值只不过是从0到255的整数，这些整数再次被转换成二进制格式，以便存储在计算机的存储器/存储设备中。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es jz"><img src="../Images/49e860a1007fdb85ab7113a872421feb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/0*MQgIxjo4eKj3b-l6"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">下图显示了如何用三个8位二进制数来描述图像的每个像素。(图片来源:DataGenetics)</figcaption></figure><p id="38a0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在我们知道图像是如何储存在计算机中的。让我们利用这些知识在图像中隐藏秘密数据。为此，我们将实施以下流程:</p><ol class=""><li id="ec0c" class="ka kb hi iw b ix iy jb jc jf kc jj kd jn ke jr kf kg kh ki bi translated">一个图像将作为用户的输入，其中我们想要隐藏的秘密数据。我们将这个图像称为“封面图像”。</li><li id="512d" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">纯文本数据将作为用户的输入。</li><li id="77d5" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">使用密码(从用户处获取)将明文转换为加密文本。</li><li id="7dfa" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">使用<a class="ae js" href="https://en.wikipedia.org/wiki/ASCII" rel="noopener ugc nofollow" target="_blank"> ASCII </a>表将加密文本转换成原始二进制数据。</li><li id="db2b" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">该二进制数据的每一位将被嵌入到封面图像中每个像素的RGB值的最低有效位(LSB)中。</li><li id="18f4" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">色值的变化非常小，正常人的眼睛无法察觉这些变化。</li><li id="861a" class="ka kb hi iw b ix kj jb kk jf kl jj km jn kn jr kf kg kh ki bi translated">这个修改后的图像将包含秘密数据，只有有人有正确的密码才能读取。</li></ol><p id="3095" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">简而言之，下图描述了LSB隐写术的工作原理(以及我们在本文中试图做的事情):</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ko"><img src="../Images/5de731599bc8eb7057df081137248999.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ijRQv5bQj4UZg-V1"/></div></div></figure><p id="958c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在我们已经清楚地了解了整个过程，让我们将这个想法付诸行动。我们将在Python 3中实现这一点，我们将使用OpenCV库进行图像处理。</p><p id="45ab" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们首先导入所有需要的库。</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="kp kq l"/></div></figure><p id="bbac" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在我们将定义用于执行编码过程的<em class="kr"> </em> <code class="du ks kt ku kv b"><em class="kr">encode()</em></code>函数和用于从编码图像中检索数据的<code class="du ks kt ku kv b">decode()</code>函数。所以，让我们首先定义这个<code class="du ks kt ku kv b"><em class="kr">encode()</em></code>函数。</p><p id="729a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们想在<code class="du ks kt ku kv b"><em class="kr">encode()</em></code>函数中做的第一件事是将秘密数据加密成加密文本。为此，我们将定义一个名为<code class="du ks kt ku kv b">encrypt_decrypt()</code>的函数，它将一个字符串和密码作为输入，然后它将根据输入的模式加密/解密数据。默认模式是为加密设置的(mode='enc ')。</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="kp kq l"/></div></figure><p id="abb9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们需要做的下一件事是将这个加密文本转换成二进制形式。为了做到这一点，我们将定义一个<code class="du ks kt ku kv b">str2bin()</code>函数，它能够将任何给定的文本转换成二进制数据。</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="kp kq l"/></div></figure><p id="ee94" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，让我们实现编码功能。</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="kp kq l"/></div></figure><p id="08d8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">你可能已经看到我们在这个<code class="du ks kt ku kv b">encode()</code>函数中抛出了一些自定义异常，我们需要像这样定义这些自定义异常</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="kp kq l"/></div></figure><p id="93b3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们的下一个任务是定义<code class="du ks kt ku kv b">decode()</code>函数，通过提供正确的密码从图像中检索编码数据。</p><p id="acf1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">但是，在实现decode()函数之前，我们将定义<code class="du ks kt ku kv b">bin2str()</code>函数，它能够将二进制数据转换为文本字符串。</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="kp kq l"/></div></figure><p id="28fc" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在是时候定义<code class="du ks kt ku kv b">decode()</code>函数了。</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="kp kq l"/></div></figure><p id="cda1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，如果你愿意，你可以创建一个菜单驱动的程序，它将使用这些函数来对图像进行隐写。</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="kp kq l"/></div></figure><p id="9bff" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">注意:</strong>输出图像必须以PNG格式保存(带有。否则，JPEG压缩可能会在写入像素值时压缩图像。这可能导致隐写术过程失败，因为压缩可能会修改像素值。</p><p id="166b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我使用Python的Qt GUI框架创建了上述程序的GUI实现。这个隐写术程序的GUI版本如下所示:</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kw"><img src="../Images/f0a43a2391adc41c800d7f6759c95d33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zS6BVuXEgemy1_bS"/></div></div></figure><p id="7a62" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们看看使用这个软件的结果。</p><p id="8028" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是我要用作封面图片的原始图片:</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es kx"><img src="../Images/96b42f58d869126854a5fef268b593d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1230/0*MEHZAPYiQCzJke3v"/></div></figure><p id="9961" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，我将使用“hello_world”作为密码，将消息“快速的棕色狐狸跳过懒惰的狗”编码到此图像中。对消息进行编码后，得到的图像如下:</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div class="er es kx"><img src="../Images/f642231db7fd0756d84631920e6d74bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1230/0*_D0enQDqF7SQ70wc"/></div></figure><p id="f634" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">你能从视觉上区分这些图像吗？不是吧？这就是隐写术的神奇之处！</p><p id="1214" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">你可以在<a class="ae js" href="https://github.com/int-main/LSB-Steganography-Python" rel="noopener ugc nofollow" target="_blank"> LSB隐写软件</a>的<a class="ae js" href="https://github.com/int-main/LSB-Steganography-Python" rel="noopener ugc nofollow" target="_blank"> Github repo </a>中找到这个程序包括GUI版本的所有源代码。</p><p id="4428" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">你可以从Github上该软件的<a class="ae js" href="https://github.com/int-main/LSB-Steganography-Python/releases" rel="noopener ugc nofollow" target="_blank">发布页面</a>下载该软件的预编译exe文件。</p><p id="13d6" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在<a class="ae js" href="https://github.com/int-main/LSB-Steganography-Python" rel="noopener ugc nofollow" target="_blank"> Github repo </a>上，我们非常欢迎您的贡献和改进建议。</p></div></div>    
</body>
</html>