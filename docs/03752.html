<html>
<head>
<title>SQL for Data Science</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于数据科学的SQL</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/sql-for-data-science-259298a10b0d?source=collection_archive---------7-----------------------#2020-02-17">https://medium.com/analytics-vidhya/sql-for-data-science-259298a10b0d?source=collection_archive---------7-----------------------#2020-02-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/f67a29b73ecedf1b946edee48b979ce5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*rh7A00T7ZK6612_qlgwXmw.png"/></div></figure><p id="9edc" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">没有数据库，<strong class="io hj">数据科学</strong>毫无意义。数据科学家必须能够检索数据。数据科学家也可能使用SQL做一些分析。然而，他们使用SQL的主要目的是为了数据检索。在这里，我们将介绍SQL的基本概念、基本SQL查询以及如何在Python语言中访问和使用它们。如果你已经了解SQL，你可以直接跳到本文的底部，看看如何在Python中访问SQL。</p><h1 id="83c6" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">什么是SQL？</h1><p id="0070" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">SQL是一种用于关系数据库查询或从数据库中获取数据的语言。并且是其原名<strong class="io hj"> S </strong>结构化<strong class="io hj">Q</strong>uery<strong class="io hj">L</strong>language的简称。</p><p id="d50a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">所以SQL是一种用于数据库查询数据的语言。</p><h1 id="8367" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">什么是关系数据库？</h1><p id="c124" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">数据库是数据的储存库。当数据以表格形式存储时，数据像电子表格一样被组织在表格中，表格由列和行组成。那是一个<strong class="io hj">关系数据库</strong>。关系数据库中的表也称为实体。实体属性将是表的列。</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div class="er es kn"><img src="../Images/15ec080ea4f187e707bca6758bd7b708.png" data-original-src="https://miro.medium.com/v2/resize:fit:708/format:webp/1*i7tpjR4tWgMfaw4i7a6VWA.png"/></div></figure><p id="31b0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">表是相关事物的集合，如雇员列表或书籍作者列表。在关系数据库中，您可以在表之间形成关系。</p><p id="e613" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> RDBMS </strong>，关系数据库管理系统，是一套控制数据存取、数据组织、数据存储等功能的软件工具。关系数据库管理系统的例子有mySQL、Oracle、DB2等。</p><h1 id="6675" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">什么是云上数据库？</h1><p id="7d8e" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">云数据库是通过云平台构建和访问的数据库服务。它提供许多与传统数据库相同的功能，并增加了云计算的灵活性。用户在云基础设施上安装软件来实现数据库。</p><p id="9804" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">云数据库的一个实例作为一种服务运行，它处理所有应用程序请求，以处理数据和由该实例管理的任何数据库。</p><p id="cf55" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">使用云数据库的优势在于</p><p id="eeeb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">易用性</strong>:用户可以使用供应商的API或web界面从几乎任何地方访问云数据库。</p><p id="944a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">可扩展性</strong>:云数据库可以在运行时扩展其存储容量，以适应不断变化的需求，组织只需为其使用的内容付费。</p><p id="97de" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">灾难恢复</strong>:在发生自然灾害设备故障或停电的情况下，数据通过远程服务器上的备份保持安全。</p><p id="e78c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您可以使用云数据库，就像使用任何数据库软件一样，但是没有硬件、设置或软件安装和维护的开销和费用。</p><p id="18be" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">云SQL数据库的几个例子是IBM Db2 on Cloud、Compose for PostgreSQL、Oracle Database Cloud、Microsoft Azure Cloud SQL数据库、Amazon关系数据库服务，它们可以在云中运行，可以在虚拟机中运行，也可以作为服务运行，具体取决于供应商。</p><h1 id="d82b" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">基本SQL命令</h1><ul class=""><li id="5068" class="ks kt hi io b ip ki it kj ix ku jb kv jf kw jj kx ky kz la bi translated"><strong class="io hj">创建</strong> —创建数据库和表格。CREATE TABLE语句是数据定义语言语句之一。数据定义语言语句或DDL语句用于创建数据库对象，如表。表格列被分配一个数据类型，例如<em class="lb"> char </em>或<em class="lb"> varchar </em>。<em class="lb"> Char </em>是固定长度的字符串。<em class="lb"> Varchar </em>是一个可变长度的字符串。该命令还使用了一些约束，如<strong class="io hj">主键</strong>和<strong class="io hj">不为空</strong>。关系表的主键唯一标识表中的每个元组或行。它还可以防止表中出现重复值。Not null确保这些字段不能包含空值。</li></ul><blockquote class="lc ld le"><p id="b44b" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">创建表用户</p><p id="2070" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">(id INT(11) NOT NULL AUTO_INCREMENT主键，</p><p id="3372" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">名称VARCHAR(255)，</p><p id="205c" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">用户名VARCHAR(255))</p></blockquote><ul class=""><li id="722d" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj kx ky kz la bi translated"><strong class="io hj">插入</strong> —将数据插入表格。INSERT语句用于向表中添加新行。INSERT语句是数据操作语言语句之一。数据操作语言语句或DML语句用于读取和修改数据。在此命令的语法中，表名标识表，列名列表标识表中的每一列，values子句指定要添加到表中各列的数据值。values子句中提供的值的数量必须等于列名列表中指定的列名的数量，这一点很重要。这确保了每一列都有一个值。表不需要一次填充一行，可以通过在values子句中指定每一行来插入多行。在values子句中，每行由逗号分隔。</li></ul><blockquote class="lc ld le"><p id="c537" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">插入作者(作者ID，姓氏，名字，电子邮件，城市，国家)值</p><p id="9847" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">(' A1 '，'冲'，'劳尔'，' RFC@XYZ。COM '，' TORONTO '，' CA')('A2 '，' AHUJA '，' RAV '，' RA@XYZ)。COM '，'多伦多'，'加州')</p></blockquote><ul class=""><li id="3cb2" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj kx ky kz la bi translated"><strong class="io hj"> ALTER </strong> — <strong class="io hj"> </strong>是一个DDL(数据定义语言)语句。它用于更新表的结构(添加/删除字段/索引等)。下面的语句用于删除作者ID列。</li></ul><blockquote class="lc ld le"><p id="13d3" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">更改表作者DROP AUTHOR_ID</p></blockquote><ul class=""><li id="b3c4" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj kx ky kz la bi translated"><strong class="io hj">选择</strong> —从表格中选择数据。数据库管理系统的主要目的不仅仅是存储数据，而且还要便于数据的检索。因此，在创建关系数据库表并将数据插入表中之后，我们希望看到数据。为了查看数据，我们使用SELECT语句。SELECT语句是一个数据操作语言语句。数据操作语言语句或DML语句用于读取和修改数据。SELECT语句被称为<strong class="io hj">查询</strong>，我们执行该查询得到的输出被称为结果集或结果表。在其最简单的形式中，SELECT语句是<em class="lb"> select * from表名</em>，即<em class="lb"> </em>检索所有列的所有行。但是如果需要，您可以只检索列的子集和行的子集。关系操作通过允许我们使用<strong class="io hj">子句WHERE </strong>来帮助我们限制结果集。WHERE子句总是需要一个谓词。谓词被条件评估为真、假或未知。WHERE子句的搜索条件中使用了谓词。</li></ul><blockquote class="lc ld le"><p id="7ffb" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">select book_id，书名from book where book_id = 'B1 '</p></blockquote><ul class=""><li id="e971" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj kx ky kz la bi translated"><strong class="io hj">更新</strong> —修改表格中的数据。为了改变或修改表中的数据，我们使用UPDATE语句。在语法中，TableName标识表。ColumnName标识要更改的列值，如&lt; WHERE【条件】&gt;中所指定。请注意，如果不指定WHERE子句，表中的所有行都将被更新。让我们看一个例子。在本例中，您希望用AUTHOR_ID A2更新作者的名字和姓氏。我们首先从author表中选择所有行来查看值。要更改名字和姓氏，请输入UPDATE语句。现在，要查看更新的结果，请再次从Author表中选择all rows，您将看到第行中的name从Rav Ahuja更改为Lakshmi Katta。</li></ul><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es ll"><img src="../Images/63765edc433e5a0158033f51347a0b20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YGiDAVQKnlLf9JV1AXqWVg.png"/></div></div></figure><ul class=""><li id="6b85" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj kx ky kz la bi translated"><strong class="io hj">删除</strong> —从表格中删除数据。使用DELETE语句删除这些行。DELETE语句是数据操作语言语句之一。请注意，如果不指定WHERE子句，表中的所有行将被删除。让我们看一个例子。我们希望删除AUTHOR_ID A2和A3的行。</li></ul><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es lq"><img src="../Images/33b488514f35f29d18926fe770271a30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0h0yexbsiBUFljbEV097dA.png"/></div></div></figure><h1 id="2a17" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">内置函数</h1><p id="d96d" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">使用数据库函数可以显著减少需要从数据库中检索的数据量。也就是说，它们减少了网络流量和带宽的使用。当处理大型数据集时，使用内置函数可能会更快，而不是首先将数据检索到应用程序中，然后对检索到的数据执行函数。</p><p id="bc57" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">聚合函数</strong> —它们接受值的集合或整个列来输出单个值。示例包括COUNT()、SUM()、MIN()、MAX()、AVG()等。分别输出行数、值的总和、最小值、最大值和平均值。</p><ul class=""><li id="d983" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj kx ky kz la bi translated">示例-检索奖章获得者来自加拿大的行数</li></ul><blockquote class="lc ld le"><p id="7ee2" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">从国家= '加拿大'的奖牌中选择计数(国家)</p></blockquote><ul class=""><li id="8a1e" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj kx ky kz la bi translated">示例-查找最大数量</li></ul><blockquote class="lc ld le"><p id="1c92" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">从PETSALE中选择MAX(数量)</p></blockquote><ul class=""><li id="d4c5" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj kx ky kz la bi translated">示例-查找平均销售价格</li></ul><blockquote class="lc ld le"><p id="5fd3" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">从PETSALE中选择AVG(SALEPRICE)</p></blockquote><p id="8153" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">标量函数</strong> —它们对单个值执行运算。例子包括ROUND()、UCASE()、LCASE()、LENGTH()等。分别输出舍入值、大写字符串、小写字符串和字符串长度。</p><ul class=""><li id="bf6a" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj kx ky kz la bi translated">示例-查找销售价格的舍入值</li></ul><blockquote class="lc ld le"><p id="8b83" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">从PETSALE中选择ROUND(SALEPRICE)</p></blockquote><ul class=""><li id="92c1" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj kx ky kz la bi translated">示例—找出宠物绳的长度</li></ul><blockquote class="lc ld le"><p id="dc82" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">从宠物商店选择长度(动物)</p></blockquote><ul class=""><li id="7da0" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj kx ky kz la bi translated">示例-以大写形式显示宠物字符串值</li></ul><blockquote class="lc ld le"><p id="6d8c" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">从PETSALE中选择UCASE(动物)</p></blockquote><ul class=""><li id="38f7" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj kx ky kz la bi translated">示例-在转换为小写字母后，查找宠物值为“cat”的所有行</li></ul><blockquote class="lc ld le"><p id="4ed7" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">select * from PETSALE其中LCASE(ANIMAL)= ' cat '；</p></blockquote><p id="9a0b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">日期和时间函数</strong> —大多数数据库包含日期和时间的特殊数据类型。存在提取日、月、月中的日、周中的日、年中的日、周、小时、分钟和秒的函数。</p><ul class=""><li id="d103" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj kx ky kz la bi translated">示例—获取涉及卡特彼勒的每个销售日期的天数部分。</li></ul><blockquote class="lc ld le"><p id="8487" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">从PETSALE中选择日期(销售日期)，其中ANIMAL = "Cat "</p></blockquote><ul class=""><li id="07ff" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj kx ky kz la bi translated">示例—获取五月份的销售额</li></ul><blockquote class="lc ld le"><p id="a0c8" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">select COUNT(*)from pet sale where MONTH(sale date)= ' 05 '</p></blockquote><p id="198d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">例如，假设您想知道每个销售日期三天后的日期，因为每个订单都需要在三天内处理。</p><blockquote class="lc ld le"><p id="576c" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">从PETSALE中选择(销售日期+3天)</p></blockquote><p id="8c82" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">例如，假设您想知道从每个销售日期到现在已经过了多少天。</p><blockquote class="lc ld le"><p id="e888" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">从PETSALE中选择(当前日期-销售日期)</p></blockquote><p id="38c4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> DISTINCT </strong> —检索列中的唯一值。不显示重复值。</p><ul class=""><li id="7708" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj kx ky kz la bi translated">示例-检索获得金牌的唯一国家的列表。</li></ul><blockquote class="lc ld le"><p id="bbd7" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">从奖牌中选择不同的国家，奖牌类型= '金牌'</p></blockquote><p id="7c6f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">限制</strong> —用于限制从数据库中检索的行数。这对于通过查看几行来检查结果集非常有用，而不是检索可能非常大的整个结果集。</p><ul class=""><li id="d974" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj kx ky kz la bi translated">例如，只检索表中的前10行。</li></ul><blockquote class="lc ld le"><p id="08e7" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">select * from tablename限制10</p></blockquote><ul class=""><li id="a319" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj kx ky kz la bi translated">例如，只检索特定年份的奖牌榜中的几行。</li></ul><blockquote class="lc ld le"><p id="a308" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">从奖牌中选择*其中年份= 2018限制5</p></blockquote><h1 id="d3da" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">先进的技术</h1><p id="b470" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">在其最简单的形式中，SELECT语句是<em class="lb"> select * from table name </em>。但是如果我们不知道在WHERE子句中具体指定什么值呢？WHERE子句总是需要一个谓词，它是一个计算结果为true、false或unknown的条件。但是如果我们不知道谓词的确切值呢？比如我们记不住作者的名字，但是记得他们的名字是R开头的怎么办？</p><p id="d21d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">字符串模式</strong> — <strong class="io hj"> </strong>在关系数据库中，我们可以使用字符串模式来搜索匹配某个条件的数据行，在这个条件下，我们使用下面的技术不知道确切的谓词值。</p><ul class=""><li id="62d9" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj kx ky kz la bi translated">Like——如果我们记不起作者的名字，但我们记得他们的名字以R开头，我们就用带有like谓词的WHERE子句。在WHERE子句中使用like谓词来搜索列中的模式。</li><li id="d9a2" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj kx ky kz la bi translated">% —百分号用于定义缺少的字母。百分号可以放在图案之前、图案之后，或者同时放在图案之前和之后。在本例中，我们在模式后使用百分号，即字母r。百分号称为通配符。通配符用于替换其他字符。</li></ul><p id="7be8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">例如，下面的查询将返回地址在伊利诺伊州埃尔金的雇员的姓名。</p><blockquote class="lc ld le"><p id="1d17" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">select F_NAME，L_NAME from地址为' %Elgin，IL% '的员工</p></blockquote><p id="accb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">范围</strong> —我们使用运算符之间的<em class="lb">表示数值范围，使用</em>运算符中的<em class="lb">表示分类范围。</em></p><p id="2bc7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Between —我们不使用大于或等于的比较运算符，而是使用“Between”比较运算符。“Between”比较两个值。范围内的值包括端值。</p><p id="7693" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">例如，下面的查询将显示工资在60000到70000之间的雇员的详细信息。</p><blockquote class="lc ld le"><p id="0d0f" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">select * from薪金介于EN 60000和70000之间的雇员</p></blockquote><p id="7590" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">IN—IN运算符允许我们在WHERE子句中指定一组值。该操作符接受要比较的表达式列表。</p><p id="b9a5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">例如，下面的查询将显示国家在澳大利亚或巴西的雇员的姓名。</p><blockquote class="lc ld le"><p id="0aa4" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">select F_NAME，L _ NAME from EMPLOYEES where COUNTRY IN(' AU '，' BR ')</p></blockquote><p id="9988" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">排序</strong> —为了按顺序显示结果集，我们使用“order by”子句。order by子句在查询中用于按指定的列对结果集进行排序。默认情况下，结果集按升序排序。要按降序排序，请使用关键字“desc”</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es lw"><img src="../Images/4e923bde63655fbc99c90f5bf95f0d49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PCFcxCy2f-qC7F8D9pHobA.png"/></div></div></figure><p id="3540" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">分组</strong>—“group by”子句将结果分组为一个或多个列具有匹配值的子集。在此示例中，使用count函数对国家/地区进行分组和计数。</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div class="er es lx"><img src="../Images/80026623ea14be83803f80b7a891a9b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1114/format:webp/1*OUmtflMxZ4AeRLOMJ5sv0Q.png"/></div></figure><p id="4dd4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们可以通过传递一些条件来进一步限制行数。“having”子句与“group by”子句结合使用。需要注意的是,“where”子句适用于整个结果集，但是“having”子句只适用于“group by”子句。为了检查来自同一个国家的作者是否超过四个，我们将以下内容添加到select语句中，使count count country大于四。</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div class="er es ly"><img src="../Images/1b98df231ce48a37b738f26bdc17bca5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/1*OHdI6VPWL1WcN3ARGDIiyA.png"/></div></figure><p id="ddd6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">子查询</strong></p><p id="98f0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">子查询或子选择类似于常规查询，但放在括号内并嵌套在另一个查询中。这允许您形成比其他方式更强大的查询。</p><p id="259f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这些子查询可用于</p><ul class=""><li id="da1b" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj kx ky kz la bi translated">WHERE子句</li><li id="1ab8" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj kx ky kz la bi translated">列列表</li><li id="1fcf" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj kx ky kz la bi translated">FROM子句。</li></ul><p id="051d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为什么是子查询？</p><ol class=""><li id="4640" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj lz ky kz la bi translated">它们帮助我们处理多个表，因为一个表的一个查询可以嵌套在另一个表的另一个查询中。</li><li id="5e84" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj lz ky kz la bi translated">它们帮助我们使用聚合函数。</li></ol><p id="1256" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">比方说，我们想要检索收入高于平均工资的员工列表。为此，我们可以尝试以下代码。</p><blockquote class="lc ld le"><p id="8226" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">Select * from employees，其中薪金&gt; AVG(薪金)→将给出错误</p></blockquote><p id="40aa" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">然而，上面的查询将<strong class="io hj">返回一个</strong> <strong class="io hj">错误</strong>，如下所示，表明聚合函数的无效使用。像average函数这样的内置聚合函数的局限性之一是，它们不能总是在WHERE子句中进行计算。</p><p id="cf8a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">因此，为了评估WHERE子句中的average这样的函数，我们可以使用如下所示的子选择表达式。注意，AVG函数是在子查询的第一部分计算的，这使得我们可以避开在WHERE子句中直接计算它的限制。</p><blockquote class="lc ld le"><p id="3f14" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">Select * from employees，where salary &gt;(从雇员中选择AVG(薪金))</p></blockquote><p id="b84c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">子选择不一定要放在WHERE子句中。它也可以出现在查询的其他部分，比如要选择的列的列表中。这种子查询称为列表达式。现在，让我们来看一个场景，我们可能想要使用列表达式。假设我们想要将每个员工的工资与平均工资进行比较。我们可以尝试这样的查询</p><blockquote class="lc ld le"><p id="f6b1" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">select雇员标识，薪金，AVG(薪金)作为AVG _薪金from雇员→将给出错误</p></blockquote><p id="09be" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">运行上面的查询将<strong class="io hj">导致一个</strong> <strong class="io hj">错误</strong>，表明没有指定group by子句。我们可以通过在列列表中的子查询中使用average函数来避免这种错误。举个例子，</p><blockquote class="lc ld le"><p id="aa3e" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">选择员工标识，薪金，(从员工中选择AVG(薪金))作为员工中的AVG薪金</p></blockquote><p id="9eb2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">另一种选择是让子查询成为FROM子句的一部分。像这样的子查询有时被称为派生表或表表达式。因为外部查询使用子查询的结果作为数据源。这些类型的子查询在更复杂的情况下非常强大，比如在处理多个表和进行连接时。下面我们来看一个例子。</p><blockquote class="lc ld le"><p id="fd28" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">select * from (select EMP_ID，F_NAME，L_NAME，DEP_ID from employees)作为EMP4ALL</p></blockquote><h1 id="0df1" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">连接</h1><p id="84cf" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">为了合并两个表中的数据，我们使用连接操作符。联接根据两个或多个表中某些列之间的关系来组合这些表中的行。因此，您需要做的第一件事是确定这些表之间的关系。即每个表中用作表间链接的一列或多列。SQL为您提供了几种不同类型的连接。</p><ol class=""><li id="3120" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj lz ky kz la bi translated">内部连接</li><li id="b8a9" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj lz ky kz la bi translated">左外连接</li><li id="bc1c" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj lz ky kz la bi translated">右外连接</li><li id="33c1" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj lz ky kz la bi translated">全外连接</li></ol><p id="b9e2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">内部连接</strong>:这是最常见的连接类型。内部联接匹配两个表的结果，并且只显示与查询中指定的条件相匹配的结果集。内部联接只返回两个表中匹配的行。</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div class="er es ma"><img src="../Images/eefc3b4f6c1ed0d7f92036e99e2da304.png" data-original-src="https://miro.medium.com/v2/resize:fit:652/format:webp/1*M9hjXIL_8ppP9cX6i47w-A.png"/></div></figure><p id="8107" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这是内部联接的select语句的语法。在from子句中，我们将employees表标识为E，将Job History表标识为JH。对于这个连接，我们从作业历史表中选择雇员的名字、姓氏和作业开始日期，条件是雇员表中的雇员ID等于作业历史表中的雇员ID。员工ID是员工表中的主键，是职务历史表中的外键。所以它被用来连接两个表。</p><blockquote class="lc ld le"><p id="caf7" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">选择E . F . NAME，E . L . NAME，JH。员工的起始日期<br/>为E <br/>内部加入JOB_HISTORY为E.EMP_ID=JH上的JH。EMPL_ID <br/>其中E.DEP_ID ='5 '</p></blockquote><p id="cd7e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">另外，请注意，每个列名都以字母E或JH为前缀。这有助于指示每一列与哪个表相关联。字母E和字母JH的这种用法被称为别名。使用别名比用整个表名作为每个列名的前缀要容易得多。</p><p id="79bc" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">通过添加额外的Inner Join语句，可以使用inner join来组合两个以上的表。下面的语法显示了三个表的组合。</p><blockquote class="lc ld le"><p id="7c1b" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">选择E . F . NAME，E . L . NAME，JH。START_DATE，J . JOB _ TITLE<br/>from EMPLOYEES as E<br/>INNER JOIN JOB _ HISTORY as JH on E . EMP _ ID = JH。EMPL_ID <br/>在E.JOB_ID=J.JOB_IDENT <br/>上作为J的内部联接作业，其中E.DEP_ID ='5 '</p></blockquote><p id="b495" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> Left-Outer Join </strong>:该连接匹配两个表的结果，显示左侧表中的所有行，并将信息与右侧表中符合查询中指定条件的行相结合。</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div class="er es mb"><img src="../Images/8eca37e5971ff81864bc58ae6ad654cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*-BTVJf223rZDHUakx8YX7Q.png"/></div></figure><p id="bd51" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在外部联接中，用sequel语句在form子句中指定的第一个表称为左表，其余的表称为右表。下面是左连接的select语句的语法。</p><blockquote class="lc ld le"><p id="b445" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">select B .借款人ID，B .姓氏，B .国家，L .借款人ID，L .贷款日期<br/> from借款人B <br/> LEFT JOIN LOAN L ON B .借款人ID=L .借款人ID</p></blockquote><p id="9250" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在本例中，借款人表是select语句的form子句中指定的第一个表。所以借款人表是左表，贷款表是右表。请注意，在form子句中，我们将借款人表标识为B，将贷款表标识为L。在这个连接中，每个列名都以字母B或l为前缀。</p><p id="c4bc" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">当使用左连接时，如果右表没有相应的值，则在右表的列中返回空值，如下所示。空值表示未知值。在下面的示例中，Left Join显示了左表中的所有行，并将信息与右表中的行相结合。左边的表包含ID为D8、D6和D7的行。但是，右边的表不包含这些id的行。因此，结果集显示空值。</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/16fab898112681a075b9acbaa50114a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/1*5Gr8z5Rh5KH7Un--de7UeQ.png"/></div></figure><p id="74ec" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">右外连接</strong>:该连接匹配两个表的结果，显示右表中的所有行，并将信息与左表中符合查询中指定标准的行相结合。</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es md"><img src="../Images/c77f34a7efd2ecc9b63d28bdc8305112.png" data-original-src="https://miro.medium.com/v2/resize:fit:706/format:webp/1*bxQr8innSaZNlUVyVW5D7g.png"/></div></div></figure><p id="f4ac" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">下面是我们右边连接的select语句的语法。在本例中，借款人表是select语句的from子句中指定的第一个表。因此，借方表是左边的表，而贷方表是右边的表。对于右连接，我们将从贷款表中选择以下列、借款人ID和贷款日期，并且我们还将从借款人表中选择以下列；借款人ID、姓氏和国家，其中贷款表中的借款人ID与借款人表中的借款人ID相匹配</p><blockquote class="lc ld le"><p id="a30e" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">select B .借款人ID，B .姓氏，B .国家，L .借款人ID，L .贷款日期<br/> from借款人B <br/> RIGHT JOIN LOAN L ON B .借款人ID=L .借款人ID</p></blockquote><p id="4c7c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">全外连接</strong>:该连接返回两个表中的所有行，即左表中的所有行和右表中的所有行。因此，完全连接可能会返回一个非常大的结果集。</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div class="er es md"><img src="../Images/210e948e2baad90eb6fe4f2ba3ca647e.png" data-original-src="https://miro.medium.com/v2/resize:fit:706/format:webp/1*qRBJa9qOBcFuZSQ0Piup2A.png"/></div></figure><p id="83bf" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">下面是完整连接的select语句的语法。我们希望选择借款人表中的所有行，以及贷款表中的所有行。我们通过识别每个表中的列来链接这些表。在本例中，我们通过匹配借款人ID来实现这一点。两个表中都存在借款人ID列。在from子句中，我们将借款人表标识为B，将贷款表标识为l。</p><blockquote class="lc ld le"><p id="4506" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">select B .借款人ID，B .姓氏，B .国家，L .借款人ID，L .贷款日期<br/> from借款人B <br/>完全加入贷款L ON B .借款人ID=L .借款人ID</p></blockquote><h1 id="d820" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">如何使用Python访问数据库？</h1><p id="ab94" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">Python数据库API(通常称为DB API)的出现使得编写访问数据库的Python代码变得更加容易。</p><p id="d4a2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了将SQL语句传递给DBMS，应用程序调用API中的函数，并调用其他函数从DBMS中检索查询结果和状态信息。</p><p id="0189" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">典型的SQL API的基本操作如下所示。</p><ol class=""><li id="8d88" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj lz ky kz la bi translated">应用程序通过一个或多个将程序连接到DBMS的API调用开始其数据库访问。</li><li id="5a8d" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj lz ky kz la bi translated">为了将SQL语句发送到DBMS，程序在缓冲区中将语句构建为文本字符串</li><li id="6e81" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj lz ky kz la bi translated">进行API调用，将缓冲区内容传递给DBMS。</li><li id="57b0" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj lz ky kz la bi translated">应用程序进行API调用以检查其DBMS请求的状态并处理错误。</li><li id="3a4a" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj lz ky kz la bi translated">应用程序通过一个API调用结束其数据库访问，该API调用将其与数据库断开连接</li></ol><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es me"><img src="../Images/1e30ea5b9862a8b2c32765d84ed7a8cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1M19cWkVtDVCKp40I9mMeQ.png"/></div></div></figure><p id="a855" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">每个数据库系统都有自己的库。正如您所看到的，该表显示了一些数据库和连接到Python应用程序的相应d b-API的列表。</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mf"><img src="../Images/fbfec77d1fdf1e85b50666a43bececcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QOXzLguZVwRk-mBZ9XjRiQ.png"/></div></div></figure><p id="14b6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Python DB-API中有两个主要概念。</p><ol class=""><li id="3f4c" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj lz ky kz la bi translated">连接对象-使用连接对象连接到数据库并管理事务。</li><li id="98ab" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj lz ky kz la bi translated">游标/查询对象—游标对象用于运行查询。您打开一个游标对象，然后运行查询。游标的工作方式类似于文本处理系统中的游标，在文本处理系统中，您可以在结果集中向下滚动，并将数据输入到应用程序中。游标用于浏览数据库的结果。</li></ol><p id="d9cf" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">以下是连接对象使用的方法。</p><ul class=""><li id="cd82" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj kx ky kz la bi translated">cursor()方法使用连接返回一个新的cursor对象。</li><li id="dfd3" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj kx ky kz la bi translated">commit()方法用于将任何挂起的事务提交给数据库。</li><li id="0011" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj kx ky kz la bi translated">rollback()方法使数据库回滚到任何挂起事务的开始。</li><li id="a77e" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj kx ky kz la bi translated">close()方法用于关闭数据库连接。</li></ul><p id="51d5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">以下是游标对象使用的方法。这些用于管理提取操作。</p><ul class=""><li id="eb85" class="ks kt hi io b ip iq it iu ix li jb lj jf lk jj kx ky kz la bi translated">调用过程()</li><li id="e34f" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj kx ky kz la bi translated">执行()</li><li id="2059" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj kx ky kz la bi translated">executemany()</li><li id="7ad5" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj kx ky kz la bi translated">费特乔内()</li><li id="ffa1" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj kx ky kz la bi translated">费奇曼尼()</li><li id="8853" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj kx ky kz la bi translated">fetchall()</li><li id="05fe" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj kx ky kz la bi translated">下一集()</li><li id="7ea9" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj kx ky kz la bi translated">数组大小()</li><li id="c8ca" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj kx ky kz la bi translated">关闭()</li></ul><p id="37ff" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">从同一连接创建的游标不是孤立的，即一个游标对数据库所做的任何更改都会被另一个游标立即看到。</p><p id="5bfb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">根据事务支持的实现方式，从不同连接创建的游标可以被隔离，也可以不被隔离。</p><p id="fc48" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">使用DB-API编写代码</strong></p><p id="b22c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">#导入库</p><blockquote class="lc ld le"><p id="77bb" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">从数据库模块导入连接</p></blockquote><p id="53e5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">#创建连接对象</p><blockquote class="lc ld le"><p id="8aea" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">connection = connect('服务器名'，'用户名'，'密码'，'数据库名')</p></blockquote><p id="cb46" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">#创建光标对象</p><blockquote class="lc ld le"><p id="8879" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">游标= connection.cursor()</p></blockquote><p id="8489" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">#运行查询</p><blockquote class="lc ld le"><p id="1ec7" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">cursor . execute(' select * from table-name ')</p><p id="9fec" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">results = cursor.fetchall()</p></blockquote><p id="6ec8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">#关闭连接和光标对象</p><blockquote class="lc ld le"><p id="8021" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">cursor.close()</p><p id="419b" class="im in lb io b ip iq ir is it iu iv iw lf iy iz ja lg jc jd je lh jg jh ji jj hb bi translated">connection.close()</p></blockquote><h1 id="e927" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">在Jupyter笔记本中使用Python的MySQL</h1><p id="ed19" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">首先安装MySQL安装程序</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div class="er es mg"><img src="../Images/6fcc956b8c9b60d54ce6802c244f57d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*WvW6ODHu4_fYiP9IVaJiwQ.png"/></div></figure><p id="aaa7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">记下root用户名和密码，因为您将需要它来使用python创建连接对象。</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div class="er es mg"><img src="../Images/33492e684d16fdcb034ef67180bb80a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*K80MCSIs4wrZ6eTVljQd_w.png"/></div></figure><p id="fba3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">然后安装和导入必要的库，并在创建连接和游标对象后执行SQL命令。</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mh"><img src="../Images/1e55c98c2e067e48ffd36b2aab36a6f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*puv-AEGVYWAWE0UdhbpUXQ.png"/></div></div></figure><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mi"><img src="../Images/63330951aa8084fd0dd79e76009dea86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dUUCqmOKnB3vQgxqO5rbQw.png"/></div></div></figure><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mj"><img src="../Images/eed09f9dc05ab9d0a3e8b9d6dde7e48d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZGuyKaggEMah-zOJWRy_Ww.png"/></div></div></figure><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mk"><img src="../Images/f4a98a5617728d808689134f16f18b63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qHlHwMDYqyYf5lMOoCItJA.png"/></div></div></figure><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es ml"><img src="../Images/3fb4da82f968c320204a35124d35bcff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m_rpnaToHFpn3zJQHMVKLw.png"/></div></div></figure><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mm"><img src="../Images/740d935d6838f3b310a68a7a0bb1ff22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5i6-8IXmDD0vzY_6Z94fog.png"/></div></div></figure><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mn"><img src="../Images/3bd91a1fdce24288ea38897f909af86c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QofqMzkTnXfPrHtmxrdGpw.png"/></div></div></figure><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es mo"><img src="../Images/f3e04652cbc56fe66ab665738d85d2a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YQjR1KjD0kgkCy37BuySMQ.png"/></div></div></figure><p id="d6be" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">敬请关注更多博客。:)</p><h1 id="1de4" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">参考资料:</h1><ul class=""><li id="ea49" class="ks kt hi io b ip ki it kj ix ku jb kv jf kw jj kx ky kz la bi translated">用于数据科学的SQL—IBM Coursera</li><li id="da73" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj kx ky kz la bi translated">数据营</li><li id="47a7" class="ks kt hi io b ip lr it ls ix lt jb lu jf lv jj kx ky kz la bi translated">Dataquest</li></ul></div></div>    
</body>
</html>