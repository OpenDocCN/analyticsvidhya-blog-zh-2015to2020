<html>
<head>
<title>I Analyzed Starbucks Data. Here’s What I Found</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我分析了星巴克的数据。这是我的发现</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/i-analyzed-starbucks-data-heres-what-i-found-4f2c82fc40?source=collection_archive---------28-----------------------#2020-04-30">https://medium.com/analytics-vidhya/i-analyzed-starbucks-data-heres-what-i-found-4f2c82fc40?source=collection_archive---------28-----------------------#2020-04-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/50d212b5642a824bbb9527b90fe1c44f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*L3sDSSpoc82hMrYV"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">汉斯·维维克在<a class="ae iu" href="https://unsplash.com/s/photos/starbucks?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><blockquote class="iv iw ix"><p id="0ed5" class="iy iz ja jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">数据说话。它确实对星巴克有一些推荐。我只是听了听。</p></blockquote><h1 id="630c" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">项目概述</h1><p id="f5b9" class="pw-post-body-paragraph iy iz hi jb b jc kv je jf jg kw ji jj kx ky jm jn kz la jq jr lb lc ju jv jw hb bi translated">这个项目的<a class="ae iu" href="https://github.com/Ezeebube5/udacity-data-scientist-project/tree/master/capstone_project/data" rel="noopener ugc nofollow" target="_blank">数据集</a>是真实星巴克奖励移动应用的简化版本。该项目试图使用交易、人口统计和报价数据来分析不同客户对不同报价的反应，从而建立一个模型来预测客户是否会对报价做出反应。</p><h2 id="3766" class="ld jy hi bd jz le lf lg kd lh li lj kh kx lk ll kl kz lm ln kp lb lo lp kt lq bi translated">问题陈述</h2><p id="2250" class="pw-post-body-paragraph iy iz hi jb b jc kv je jf jg kw ji jj kx ky jm jn kz la jq jr lb lc ju jv jw hb bi translated">优惠可以是买一送一(BOGO)，折扣和信息。在BOGO优惠中，用户需要花费一定的金额来获得与该阈值金额相等的奖励。在折扣中，用户获得的奖励相当于消费金额的一小部分。在信息提供中，没有奖励，但也没有要求用户花费的金额。优惠可以通过多种渠道提供。</p><p id="e2b5" class="pw-post-body-paragraph iy iz hi jb b jc jd je jf jg jh ji jj kx jl jm jn kz jp jq jr lb jt ju jv jw hb bi translated">我们有兴趣回答:</p><ol class=""><li id="edbb" class="lr ls hi jb b jc jd jg jh kx lt kz lu lb lv jw lw lx ly lz bi translated">人口统计等不同因素如何影响对报价的反应？</li><li id="8e61" class="lr ls hi jb b jc ma jg mb kx mc kz md lb me jw lw lx ly lz bi translated">根据现有数据，哪些因素对要约完成影响最大？</li><li id="4b2d" class="lr ls hi jb b jc ma jg mb kx mc kz md lb me jw lw lx ly lz bi translated">根据第二个问题的答案，我们可以采取什么措施来提高报价完成率？</li></ol><h2 id="5495" class="ld jy hi bd jz le lf lg kd lh li lj kh kx lk ll kl kz lm ln kp lb lo lp kt lq bi translated">数据集</h2><p id="b0c6" class="pw-post-body-paragraph iy iz hi jb b jc kv je jf jg kw ji jj kx ky jm jn kz la jq jr lb lc ju jv jw hb bi translated">数据包含在三个文件中:</p><ul class=""><li id="24a2" class="lr ls hi jb b jc jd jg jh kx lt kz lu lb lv jw mf lx ly lz bi translated">portfolio.json —包含报价id和关于每个报价的元数据(持续时间、类型等)。)</li><li id="f3cb" class="lr ls hi jb b jc ma jg mb kx mc kz md lb me jw mf lx ly lz bi translated">profile.json —每个客户的人口统计数据</li><li id="cc84" class="lr ls hi jb b jc ma jg mb kx mc kz md lb me jw mf lx ly lz bi translated">transcript.json记录交易、收到的报价、查看的报价和完成的报价。</li></ul><figure class="mh mi mj mk fd ij er es paragraph-image"><div class="er es mg"><img src="../Images/a76bfceb1a84be39812855039ead493c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*NXzZ4NuC1WNqGifGwcf6TA.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">Zoe Holling 在<a class="ae iu" href="https://unsplash.com/s/photos/strategy?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h2 id="d62e" class="ld jy hi bd jz le lf lg kd lh li lj kh kx lk ll kl kz lm ln kp lb lo lp kt lq bi translated">战略</h2><p id="d331" class="pw-post-body-paragraph iy iz hi jb b jc kv je jf jg kw ji jj kx ky jm jn kz la jq jr lb lc ju jv jw hb bi translated">我是这样对待这个项目的:</p><ul class=""><li id="0460" class="lr ls hi jb b jc jd jg jh kx lt kz lu lb lv jw mf lx ly lz bi translated">清理、处理和组合来自产品组合、客户资料和交易的数据。该组合数据集的每一行都将描述客户人口统计数据、优惠的属性以及优惠是否成功。应该考虑到有人甚至没有看就完成报价的可能性，并加以注意。只有当该人查看并完成要约时，才应考虑交易。</li><li id="1c35" class="lr ls hi jb b jc ma jg mb kx mc kz md lb me jw mf lx ly lz bi translated">根据提供的客户人口统计数据和优惠属性，构建一个模型来预测优惠成功与否。比较逻辑回归、随机森林分类器和KNeighbors分类器。(具有最佳性能的模型将被进一步微调以获得最终模型)</li><li id="eae9" class="lr ls hi jb b jc ma jg mb kx mc kz md lb me jw mf lx ly lz bi translated">获取影响产品成功的重要功能栏，并利用数据可视化来回答上述问题。</li></ul><h2 id="776a" class="ld jy hi bd jz le lf lg kd lh li lj kh kx lk ll kl kz lm ln kp lb lo lp kt lq bi translated">韵律学</h2><p id="6300" class="pw-post-body-paragraph iy iz hi jb b jc kv je jf jg kw ji jj kx ky jm jn kz la jq jr lb lc ju jv jw hb bi translated">项目的成功将取决于所建模型的准确性和F1分数。该模型应该具有75%以上的准确性和F1分数，因此我们确保它在新数据集上表现良好。</p><figure class="mh mi mj mk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/ea6abf86d2e968dff29d1a00a852328e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*X4klwSOMN3ivSYz8"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">卢卡斯·布拉塞克在<a class="ae iu" href="https://unsplash.com/s/photos/data-analysis?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="736f" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">探索性数据分析</h1><p id="da5d" class="pw-post-body-paragraph iy iz hi jb b jc kv je jf jg kw ji jj kx ky jm jn kz la jq jr lb lc ju jv jw hb bi translated">投资组合数据集相对较小，没有缺失值。</p><p id="24f3" class="pw-post-body-paragraph iy iz hi jb b jc jd je jf jg jh ji jj kx jl jm jn kz jp jq jr lb jt ju jv jw hb bi translated">个人资料数据集在性别和收入方面有12%的值缺失。男性约占数据的50%。平均年龄为62岁。</p><figure class="mh mi mj mk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ml"><img src="../Images/638053edba3c86f40f4e463a9b11a67c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eLC_A1B_8uiHD_S6xd3BrQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated"><strong class="bd jz">图1:年龄分布</strong></figcaption></figure><p id="19d2" class="pw-post-body-paragraph iy iz hi jb b jc jd je jf jg jh ji jj kx jl jm jn kz jp jq jr lb jt ju jv jw hb bi translated">从年龄分布来看，大多数客户年龄在40到70岁之间，有很多缺失数据，在数据集中记录为118岁。</p><figure class="mh mi mj mk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ml"><img src="../Images/eaeb915594e54632c2ba4789058350dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xDfcm4gP7coIwo4XePRjlg.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated"><strong class="bd jz">图2:收入分配</strong></figcaption></figure><p id="43b8" class="pw-post-body-paragraph iy iz hi jb b jc jd je jf jg jh ji jj kx jl jm jn kz jp jq jr lb jt ju jv jw hb bi translated">平均收入为65，000美元。2%的客户有异常收入，但约占交易的一半。</p><figure class="mh mi mj mk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ml"><img src="../Images/27798c630de4d3fb3903f8b50289cd5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g2ggFX_ZEUIguCT-5ELY9A.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated"><strong class="bd jz">图3:性别分布</strong></figcaption></figure><p id="9c9c" class="pw-post-body-paragraph iy iz hi jb b jc jd je jf jg jh ji jj kx jl jm jn kz jp jq jr lb jt ju jv jw hb bi translated">分析显示，女性顾客平均年龄更大，收入更高。那些没有输入年龄的人也没有输入他们的收入，这样的行就被删除了。</p><p id="3976" class="pw-post-body-paragraph iy iz hi jb b jc jd je jf jg jh ji jj kx jl jm jn kz jp jq jr lb jt ju jv jw hb bi translated">抄本数据没有缺失值，有4种事件类型:交易、收到的报价、查看的报价和完成的报价。</p><figure class="mh mi mj mk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ml"><img src="../Images/63d7ff6661cfac206e160f054ba353c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X3OFY7ok3WmSLWuo-mxkHA.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图4；事件分布</figcaption></figure><h1 id="835d" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">数据准备步骤</h1><p id="e334" class="pw-post-body-paragraph iy iz hi jb b jc kv je jf jg kw ji jj kx ky jm jn kz la jq jr lb lc ju jv jw hb bi translated"><strong class="jb hj">投资组合数据:</strong></p><p id="1359" class="pw-post-body-paragraph iy iz hi jb b jc jd je jf jg jh ji jj kx jl jm jn kz jp jq jr lb jt ju jv jw hb bi translated">*对渠道和报价类型进行一次性编码，然后追加到数据集。<br/> *编码后删除原始列。<br/> *重命名列。</p><p id="6ccb" class="pw-post-body-paragraph iy iz hi jb b jc jd je jf jg jh ji jj kx jl jm jn kz jp jq jr lb jt ju jv jw hb bi translated"><strong class="jb hj">配置文件数据</strong> <br/> *针对渠道和报价类型的一键编码。<br/> *转换数据类型<br/> *删除空值(118用于表示年龄为空)<br/> *编码后删除原始列。<br/> *重命名列。</p><p id="dc87" class="pw-post-body-paragraph iy iz hi jb b jc jd je jf jg jh ji jj kx jl jm jn kz jp jq jr lb jt ju jv jw hb bi translated"><strong class="jb hj">抄本数据</strong> <br/> *不需要删除空值，因为没有空值<br/> *事件列的一次性编码。<br/> *对值列进行编码并将其拆分到不同的列中。<br/> *通过将offer id列的值分配给offer_id列，合并offer id和offer_id列。<br/> *在报价金额和奖励中为空值分配零<br/> *将时间列从小时更改为天。<br/> *重命名列名。<br/> *删除档案数据集中没有的客户id。<br/> *删除已编码的原始列。</p><p id="e5cf" class="pw-post-body-paragraph iy iz hi jb b jc jd je jf jg jh ji jj kx jl jm jn kz jp jq jr lb jt ju jv jw hb bi translated">接下来，我创建了一个事务数据框，它在一行中包含了每个客户的报价的接收、查看和完成，因为它以前分布在不同的行中。</p><h1 id="3b5c" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">模型训练和评估</h1><p id="b02b" class="pw-post-body-paragraph iy iz hi jb b jc kv je jf jg kw ji jj kx ky jm jn kz la jq jr lb lc ju jv jw hb bi translated">在训练模型之前，我必须删除一些列:<br/> 1。我放弃了reward _ gained，因为它与offer_reward <br/> 2相同。我放弃报价_完成，交易完成。<br/> 3。为了避免多重共线性，我为每组一次性编码的列删除了一列</p><p id="63d8" class="pw-post-body-paragraph iy iz hi jb b jc jd je jf jg jh ji jj kx jl jm jn kz jp jq jr lb jt ju jv jw hb bi translated">接下来，我合并了3个干净的数据帧，并分成测试集和训练集。</p><p id="5e7d" class="pw-post-body-paragraph iy iz hi jb b jc jd je jf jg jh ji jj kx jl jm jn kz jp jq jr lb jt ju jv jw hb bi translated">我尝试了3种模型:逻辑回归、随机森林分类器和KNeighbors分类器。随机森林分类器产生了最好的结果，具有79%的精确度、召回率和F1分数。</p><p id="63ed" class="pw-post-body-paragraph iy iz hi jb b jc jd je jf jg jh ji jj kx jl jm jn kz jp jq jr lb jt ju jv jw hb bi translated">我对参数进行了微调，并训练了最终的模型，该模型具有80%的精确度、召回率和F1值。</p><figure class="mh mi mj mk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ml"><img src="../Images/21d40587fcf06a0f5cd06e8bf6bd63eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ySahAsv-TAeIdIfK3qDcRQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图5:最具预测性的特征</figcaption></figure><h1 id="5f51" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">特征重要性</h1><p id="e7f0" class="pw-post-body-paragraph iy iz hi jb b jc kv je jf jg kw ji jj kx ky jm jn kz la jq jr lb lc ju jv jw hb bi translated">从我们的分析中，我们可以看到预测报价成功的五个最重要的特征是:</p><ol class=""><li id="05b4" class="lr ls hi jb b jc jd jg jh kx lt kz lu lb lv jw lw lx ly lz bi translated">报价难度——客户为获得报价所花的钱。</li><li id="6014" class="lr ls hi jb b jc ma jg mb kx mc kz md lb me jw lw lx ly lz bi translated">收入。</li><li id="90dd" class="lr ls hi jb b jc ma jg mb kx mc kz md lb me jw lw lx ly lz bi translated">顾客的年龄。</li><li id="ee51" class="lr ls hi jb b jc ma jg mb kx mc kz md lb me jw lw lx ly lz bi translated">提供的报酬。</li><li id="a123" class="lr ls hi jb b jc ma jg mb kx mc kz md lb me jw lw lx ly lz bi translated">报价期限</li></ol><figure class="mh mi mj mk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ml"><img src="../Images/c23da2527debe343c2815d565bb9d711.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l4e_x64jEfMv0ZpdE4U5PA.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图6:重要特性</figcaption></figure><h1 id="bbc3" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">结论</h1><p id="ae38" class="pw-post-body-paragraph iy iz hi jb b jc kv je jf jg kw ji jj kx ky jm jn kz la jq jr lb lc ju jv jw hb bi translated">我们超过了75%的准确率和F1值的目标，达到了80%的准确率和F1值。</p><p id="2278" class="pw-post-body-paragraph iy iz hi jb b jc jd je jf jg jh ji jj kx jl jm jn kz jp jq jr lb jt ju jv jw hb bi translated">通过分析，我们可以回答开头提出的问题:</p><ol class=""><li id="feff" class="lr ls hi jb b jc jd jg jh kx lt kz lu lb lv jw lw lx ly lz bi translated">我们可以看到，收入和年龄等客户人口统计数据在预测优惠活动成功与否方面发挥着巨大作用。不过，性别并没有扮演如此重要的角色。</li><li id="b7eb" class="lr ls hi jb b jc ma jg mb kx mc kz md lb me jw lw lx ly lz bi translated">除了收入和性别，优惠的难度，它给用户提供的回报以及持续的时间是决定优惠成功的关键因素。因此，必须注意这三个因素。奖励越高，完成率越高。此外，要约应具有更长的持续时间和更低的难度，以获得更高的完成率。</li><li id="fe73" class="lr ls hi jb b jc ma jg mb kx mc kz md lb me jw lw lx ly lz bi translated">从第二个图中，我们还看到社交媒体渠道比其他渠道在要约完成方面具有更大的权重和更高的影响。手机和电子邮件渠道的贡献要小得多，因为它们存在于各种促销活动中，因此不能提供额外的信息。</li></ol><h1 id="c58f" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">未来的改进</h1><ul class=""><li id="4d6b" class="lr ls hi jb b jc kv jg kw kx mm kz mn lb mo jw mf lx ly lz bi translated">用不同的参数测试其他机器学习模型。</li><li id="abea" class="lr ls hi jb b jc ma jg mb kx mc kz md lb me jw mf lx ly lz bi translated">利用星巴克web应用程序中的模型，根据客户资料预测报价完成情况。</li><li id="7a8e" class="lr ls hi jb b jc ma jg mb kx mc kz md lb me jw mf lx ly lz bi translated">建立一个模型来测试用户会花多少钱来响应不同的优惠类型。</li></ul><p id="217e" class="pw-post-body-paragraph iy iz hi jb b jc jd je jf jg jh ji jj kx jl jm jn kz jp jq jr lb jt ju jv jw hb bi translated">下一步是什么？</p><p id="b7a2" class="pw-post-body-paragraph iy iz hi jb b jc jd je jf jg jh ji jj kx jl jm jn kz jp jq jr lb jt ju jv jw hb bi translated">你可以在这里查看我的笔记本<a class="ae iu" href="https://github.com/Ezeebube5/udacity-data-scientist-project/blob/master/capstone_project/Starbucks_Capstone_notebook.ipynb" rel="noopener ugc nofollow" target="_blank"><strong class="jb hj"/></a><strong class="jb hj">。</strong></p><h1 id="2542" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">如果你喜欢读这篇文章，请推荐并分享它，以帮助其他人找到它！</h1></div></div>    
</body>
</html>