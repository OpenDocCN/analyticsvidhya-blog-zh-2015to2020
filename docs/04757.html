<html>
<head>
<title>A sports-based intro to pandas and matplotlib Python libraries</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于体育的熊猫和matplotlib Python库介绍</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/a-sports-based-intro-to-pandas-and-matplotlib-python-libraries-367469927805?source=collection_archive---------33-----------------------#2020-03-30">https://medium.com/analytics-vidhya/a-sports-based-intro-to-pandas-and-matplotlib-python-libraries-367469927805?source=collection_archive---------33-----------------------#2020-03-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/523e67baedeac636c0428b2eaa6f3d7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xyGaZlrme1X_iLVjRd_40w.jpeg"/></div></div></figure><p id="404c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这篇博客文章通过比较勒布朗和乔丹在职业生涯中的队友，介绍了如何使用python库——pandas和matplotlib。</p><h1 id="a697" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">介绍</h1><p id="f87f" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated"><em class="kr">我最初写这篇文章是在2018年，当时我开始了我作为一名数据科学家/软件工程师的旅程，并想在几周前偶然发现它后发表它。我希望它也能帮助那些刚刚开始旅程的人。</em></p><p id="e859" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于本文，我选择使用一个数据集，该数据集用于在www.lebronvsjordan.org的<a class="ae ks" href="https://www.lebronvsjordan.org/" rel="noopener ugc nofollow" target="_blank"><strong class="is hj"/></a>上的G.O.A.T仪表板中生成视觉效果。该数据集由前14个赛季乔丹或勒布朗球队中的前5名队友组成。</p><p id="ece4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="kr"> **点击</em><strong class="is hj"><em class="kr"/></strong><a class="ae ks" href="https://lebron-vs-jordan.s3.us-east-2.amazonaws.com/L_vs_J_Teammates.csv" rel="noopener ugc nofollow" target="_blank"><strong class="is hj"><em class="kr">此处</em></strong></a><strong class="is hj"><em class="kr"/></strong><em class="kr">下载本教程的csv文件。</em></p><p id="c74b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个数据集调查的目标是基于3个不同的图表来看每个赛季谁有更好的队友:场均得分(ppg)、场均重新绑定(rpg)和场均助攻(apg)。</p><h1 id="952e" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">设置</h1><p id="f4d8" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">使用Jupyter笔记本可以让你轻松地执行下面的代码块。如果你不熟悉它们，去<a class="ae ks" href="https://pypi.org/project/notebook/" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> <em class="kr">这里</em> </strong> </a>安装这个库，看看它是什么。</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="a09e" class="lc jp hi ky b fi ld le l lf lg">%matplotlib inline </span><span id="fedf" class="lc jp hi ky b fi lh le l lf lg">import numpy as np <br/>import pandas as pd <br/>import matplotlib.pyplot as plt <br/>import seaborn as sns </span><span id="d2a1" class="lc jp hi ky b fi lh le l lf lg">csfont = {'fontname':'Dejavu Sans'} <br/>titlefont = {'size': '14'}</span></pre><h1 id="28d4" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">读入。csv文件</h1><ul class=""><li id="03e5" class="li lj hi is b it km ix kn jb lk jf ll jj lm jn ln lo lp lq bi translated">df或“数据帧”是熊猫常用的结构，可以认为是表格</li><li id="4a4b" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">在本练习中，我们将创建一个名为<strong class="is hj"> dfTeam </strong>的数据帧，它读入勒布朗和乔丹队友的csv文件</li></ul><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="421e" class="lc jp hi ky b fi ld le l lf lg">dfTeam = pd.read_csv('L_vs_J_Teammates.csv')</span></pre><h1 id="b47b" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">设置续</h1><ul class=""><li id="4f7a" class="li lj hi is b it km ix kn jb lk jf ll jj lm jn ln lo lp lq bi translated"><strong class="is hj"> np.infinite </strong>用于清除数据集的任何空白行并显示NaN</li><li id="50c7" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated"><strong class="is hj"> dfTeam.columns </strong>是一个快速的pandas命令，它在一个数据帧中显示所有的列名</li><li id="5687" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated"><strong class="is hj"> dfTeam.shape </strong>是一个快速的pandas命令，用于获取数据帧中的<strong class="is hj">行x列</strong>，而<strong class="is hj"> dfTeam.head() </strong>显示前5行数据</li></ul><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="184e" class="lc jp hi ky b fi ld le l lf lg">dfTeam = dfTeam[np.isfinite(dfTeam['season'])]</span><span id="8dd2" class="lc jp hi ky b fi lh le l lf lg">dfTeam.columns</span><span id="4c3d" class="lc jp hi ky b fi lh le l lf lg"><strong class="ky hj"><em class="kr">** Console Output:</em></strong> Index(['teammate', 'years_season', 'season', 'm_or_l', 'position', 'games_played_per_season', 'rpg_season', 'apg_season', 'spg_season', 'bpg_season', 'turnovers_season', 'ppg_season', '3pt_attempts_per_game', '3pt_percentage_season', 'team_season', 'championship_season', 'playoffs_reached', 'playoffs_team_lost_to_won', 'eliminating_round_series', 'record', 'opponent_ppg', 'team_ppg'], dtype='object')</span><span id="125f" class="lc jp hi ky b fi lh le l lf lg">dfTeam.shape</span><span id="fae3" class="lc jp hi ky b fi lh le l lf lg"><strong class="ky hj"><em class="kr">** Console Output:</em></strong>(140, 22)</span><span id="5690" class="lc jp hi ky b fi lh le l lf lg">dfTeam.head()</span><span id="27e3" class="lc jp hi ky b fi lh le l lf lg"><strong class="ky hj"><em class="kr">** Console Output: </em></strong>Returns first 5 rows of dataset</span></pre><h1 id="3da8" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">设置续</h1><ul class=""><li id="afe4" class="li lj hi is b it km ix kn jb lk jf ll jj lm jn ln lo lp lq bi translated"><strong class="is hj"> dfTeam.set_index </strong>用于从0、1、2等改变数据帧的当前索引。每个队友的名字</li><li id="05af" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated"><strong class="is hj">df team . season . as type(int)</strong>将“季节”列从字符串类型更改为int类型</li></ul><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="ba3f" class="lc jp hi ky b fi ld le l lf lg">dfTeam = dfTeam.set_index(['teammate'])</span><span id="5893" class="lc jp hi ky b fi lh le l lf lg">dfTeam['season'] = dfTeam.season.astype(int)</span></pre><h1 id="9e2b" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">在数据帧中创建组</h1><p id="1fe6" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">要对该数据集进行分组，需要创建两个不同的“分组”:</p><ul class=""><li id="c901" class="li lj hi is b it iu ix iy jb lw jf lx jj ly jn ln lo lp lq bi translated">第一组:把每个球员分成两大组，要么是勒布朗，要么是乔丹的队友。</li><li id="aa25" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">第二组:第一组应该分成14个小组，每个小组代表一个季节。</li><li id="b4c5" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">总共应该有28组。勒布朗14分，乔丹14分。</li></ul><h1 id="9601" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">勒布朗的分组流程</h1><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="1044" class="lc jp hi ky b fi ld le l lf lg">group_l = dfTeam.groupby(['m_or_l']).get_group('LeBron')</span><span id="ad9e" class="lc jp hi ky b fi lh le l lf lg">group_l_season = group_l.groupby('season')</span><span id="6c68" class="lc jp hi ky b fi lh le l lf lg">group_l_season.sum().head()</span></pre><h1 id="9f64" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">对约旦重复分组过程</h1><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="5a37" class="lc jp hi ky b fi ld le l lf lg">group_m = dfTeam.groupby(['m_or_l']).get_group('Jordan')</span><span id="5b06" class="lc jp hi ky b fi lh le l lf lg">group_m_season = group_m.groupby('season')</span><span id="3fd2" class="lc jp hi ky b fi lh le l lf lg">group_m_season.sum().head()</span></pre><h1 id="94cf" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">根据季节组创建ppg图表</h1><p id="12e3" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">现在我们的数据已经正确地分组在一起，我们可以使用matplotlib创建数据的基本散点图，以便按赛季比较每组队友。</p><p id="ee5c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面的代码用于创建我们的第一个可视化:</p><ul class=""><li id="de80" class="li lj hi is b it iu ix iy jb lw jf lx jj ly jn ln lo lp lq bi translated">下面代码块中的第二行用于创建绘制图形的区域。</li><li id="3994" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated"><strong class="is hj"> plot_area.scatter </strong>用于绘制勒布朗和乔丹的每组数据</li><li id="eb35" class="li lj hi is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq bi translated">该块中的其余代码用于格式化图例、标题、字体大小等。</li></ul><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="7a4f" class="lc jp hi ky b fi ld le l lf lg">fig = plt.figure() <br/>plot_area = fig.add_subplot(111) </span><span id="a284" class="lc jp hi ky b fi lh le l lf lg">plot_area.scatter(range(1,15), group_m_season.ppg_season.sum(), marker="s", label='Jordan', color='red') </span><span id="1b61" class="lc jp hi ky b fi lh le l lf lg">plot_area.scatter(range(1,15), group_l_season.ppg_season.sum(), marker="o", label='LeBron', color='#00008b') </span><span id="cdda" class="lc jp hi ky b fi lh le l lf lg">box = plot_area.get_position() </span><span id="407b" class="lc jp hi ky b fi lh le l lf lg">plot_area.set_position([box.x0, box.y0, box.width * 0.8, box.height]) </span><span id="8fa6" class="lc jp hi ky b fi lh le l lf lg">plot_area.legend(loc='center left', bbox_to_anchor=(1, 0.5)) </span><span id="81f4" class="lc jp hi ky b fi lh le l lf lg">plot_area.set_title('Sum of Teammates Average ppg by Season', **csfont, **titlefont) </span><span id="992a" class="lc jp hi ky b fi lh le l lf lg">plot_area.set_xlabel('Season', **csfont) </span><span id="f82d" class="lc jp hi ky b fi lh le l lf lg">plot_area.set_ylabel('Teammate Total ppg', **csfont) </span><span id="d966" class="lc jp hi ky b fi lh le l lf lg">plt.xticks(np.arange(0, 15, 1.0))</span></pre><figure class="kt ku kv kw fd ij er es paragraph-image"><div class="er es lz"><img src="../Images/48efc2fb4698404b2ffab02cda0c9384.png" data-original-src="https://miro.medium.com/v2/resize:fit:782/format:webp/0*t55ndO2W-bXv5_fa.png"/></div></figure><h1 id="d80a" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">根据季节组为rpg创建图表</h1><p id="88ed" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">重复创建图表的过程，但更改数据以反映rpg</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="839b" class="lc jp hi ky b fi ld le l lf lg">fig = plt.figure() <br/>plot_area = fig.add_subplot(111) </span><span id="cb25" class="lc jp hi ky b fi lh le l lf lg">plot_area.scatter(range(1,15), group_m_season.rpg_season.sum(), marker="s", label='Jordan', color='red') </span><span id="3224" class="lc jp hi ky b fi lh le l lf lg">plot_area.scatter(range(1,15), group_l_season.rpg_season.sum(), marker="o", label='LeBron', color='#00008b') </span><span id="13c0" class="lc jp hi ky b fi lh le l lf lg">box = plot_area.get_position() </span><span id="6dc0" class="lc jp hi ky b fi lh le l lf lg">plot_area.set_position([box.x0, box.y0, box.width * 0.8, box.height]) </span><span id="0e09" class="lc jp hi ky b fi lh le l lf lg">plot_area.legend(loc='center left', bbox_to_anchor=(1, 0.5)) </span><span id="685e" class="lc jp hi ky b fi lh le l lf lg">plot_area.set_title('Sum of Teammates Average rpg by Season', **csfont, **titlefont) </span><span id="0c5e" class="lc jp hi ky b fi lh le l lf lg">plot_area.set_xlabel('Season', **csfont) </span><span id="756e" class="lc jp hi ky b fi lh le l lf lg">plot_area.set_ylabel('Teammate Total rpg', **csfont) </span><span id="8262" class="lc jp hi ky b fi lh le l lf lg">plt.xticks(np.arange(0, 15, 1.0))</span></pre><figure class="kt ku kv kw fd ij er es paragraph-image"><div class="er es lz"><img src="../Images/dcda8318ea636108cf8da4e1e664c225.png" data-original-src="https://miro.medium.com/v2/resize:fit:782/format:webp/0*icMgA99c7cnNa0g8.png"/></div></figure><h1 id="2ffc" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">基于季节组为apg创建图表</h1><p id="bbc5" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">重复创建图表的过程，但更改数据以反映apg</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="9797" class="lc jp hi ky b fi ld le l lf lg">fig = plt.figure() <br/>plot_area = fig.add_subplot(111) </span><span id="0b51" class="lc jp hi ky b fi lh le l lf lg">plot_area.scatter(range(1,15), group_m_season.apg_season.sum(), marker="s", label='Jordan', color='red') </span><span id="5856" class="lc jp hi ky b fi lh le l lf lg">plot_area.scatter(range(1,15), group_l_season.apg_season.sum(), marker="o", label='LeBron', color='#00008b') </span><span id="d094" class="lc jp hi ky b fi lh le l lf lg">box = plot_area.get_position() </span><span id="fb05" class="lc jp hi ky b fi lh le l lf lg">plot_area.set_position([box.x0, box.y0, box.width * 0.8, box.height]) </span><span id="42dd" class="lc jp hi ky b fi lh le l lf lg">plot_area.legend(loc='center left', bbox_to_anchor=(1, 0.5)) </span><span id="a372" class="lc jp hi ky b fi lh le l lf lg">plot_area.set_title('Sum of Teammates Average apg by Season', **csfont, **titlefont) </span><span id="feb2" class="lc jp hi ky b fi lh le l lf lg">plot_area.set_xlabel('Season', **csfont) </span><span id="b17d" class="lc jp hi ky b fi lh le l lf lg">plot_area.set_ylabel('Teammate Total apg', **csfont) </span><span id="9b67" class="lc jp hi ky b fi lh le l lf lg">plt.xticks(np.arange(0, 15, 1.0))</span></pre><figure class="kt ku kv kw fd ij er es paragraph-image"><div class="er es lz"><img src="../Images/35cc14ff70193b7f4dc95c2f57958660.png" data-original-src="https://miro.medium.com/v2/resize:fit:782/format:webp/0*joJj17JKCOrO-mYr.png"/></div></figure><h1 id="f4e0" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">结论</h1><p id="b48f" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">感谢您阅读本教程，我希望它对任何初学python相关数据科学工具的人来说都是一个很好的介绍。想了解更多酷的项目，请随意查看我的其他博客帖子。如果你有任何问题，欢迎在下面评论！</p></div><div class="ab cl ma mb gp mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="hb hc hd he hf"><p id="c4fa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="kr">最初发表于</em><a class="ae ks" href="https://www.jamespcarnes.com/pandas/" rel="noopener ugc nofollow" target="_blank">T5【www.jamespcarnes.com】</a><em class="kr">。</em></p></div></div>    
</body>
</html>