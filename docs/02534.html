<html>
<head>
<title>Research with R &amp; a Helpful Trick For Splitting Data Into Columns</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用R &amp;一个有用的技巧将数据分割成列</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/research-with-r-a-helpful-trick-for-splitting-data-into-columns-d9f24ff4f2f3?source=collection_archive---------13-----------------------#2019-12-21">https://medium.com/analytics-vidhya/research-with-r-a-helpful-trick-for-splitting-data-into-columns-d9f24ff4f2f3?source=collection_archive---------13-----------------------#2019-12-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="076f" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">概述和问题</h2></div><p id="3c8c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">前几天，我正在处理唐纳德·特朗普从2016年6月15日到2019年11月19日的推文数据集。我一直在分析这个数据集，看看唐纳德·特朗普每天的推文数量和标准普尔500指数基金价格的百分比变化之间是否存在统计上的显著关系。“唐纳德特朗普推文”数据集的初始列名如下所示:</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es jt"><img src="../Images/664a7e36fc3883be914e61d57ef38521.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*44ov36kwoxPafJclXQ_6fQ.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">尺寸:4020行X 7列。</figcaption></figure><p id="0634" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">虽然这些数据中的大部分已经被清理了，但是在“created_at”列中出现了一个主要问题。在这一栏中，推文的<strong class="iz hj">日期</strong>和<strong class="iz hj">时间</strong>都包括在内。这让我很难准确统计在每个<strong class="iz hj">日期</strong>发布的推文总数(因为同一个日期可能会出现不止一次，并附带不同的时间)。为了解决这个问题，我决定将“created_at”列分成两个部分:<strong class="iz hj"> date </strong>和<strong class="iz hj"> time。这样我就可以很容易地计算出每个日期的推文数量。</strong></p></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><h2 id="c85b" class="kq kr hi bd ks kt ku kv kw kx ky kz la jg lb lc ld jk le lf lg jo lh li lj lk bi translated">第1部分:探索性数据分析</h2><p id="41e4" class="pw-post-body-paragraph ix iy hi iz b ja ll ij jc jd lm im jf jg ln ji jj jk lo jm jn jo lp jq jr js hb bi translated">在意识到这个问题之前，我研究了我的数据集并回答了一些基本问题。首先，我必须将这个数据集加载到r中，为了完成这个任务，我使用了一个方便的名为readxl的库。这个库没有外部依赖性，这使得它比其他现有的库(如gdata、xlsx和xlsReadWrite)更容易使用。此外，readxl可以处理xls和xlsx MS Excel文件。我编写的加载数据集的基本代码如下:</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es lq"><img src="../Images/8117c4776c04fa06c2f7097dd0f93cac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aoCTP449A2uQoRuzlPBBpA.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">包括一个包tidyverse，然后将我的数据集加载到一个名为“tweetData”的变量中。</figcaption></figure><p id="b629" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这之后，我对我的数据集进行了一些基本的分析，以进一步理解:1 .我正在处理的数据类型(文本、数字等。), 2.我可以问什么样的问题。我可能会遇到什么样的问题。我执行的一些基本EDA如下图所示:</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es lr"><img src="../Images/53d4e49701d542f6c4ce5395b66c006c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oj9hk7Ob3HUs_onduU9gQw.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">简单EDA</figcaption></figure><p id="43ad" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">第9行和第10行检查我的数据集的第一行和最后15行。此外，第11行返回我的数据集的维度。然后，第12行到第15行计算每条推文的平均转发数和收藏数，第17行比较这两个值。</p><p id="75c6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这之后，在第19到28行，我将“is_retweet”列中的TRUE和FALSE条目分解为数字(0和1)。然后，我进行一些简单的统计测量。在这之后，我检查我的“created_at”列。这是我第一次意识到我需要将这个专栏分解成两部分，以便计算每个日期的推文数量。</p><p id="f616" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">第2部分:在R中拆分列的有用技巧</strong></p><p id="2b2a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面是我编写的将一列分成两列的代码:</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es ls"><img src="../Images/3f5b29be60eaa1be218ad93b8b114c00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v2G-Rj11Vjy0c-r15hDCTw.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">第32行:将数据分成两列的有用过程！</figcaption></figure><p id="ac37" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在第32行将“created_at”列分成“date”和“time”之后，我创建了一个名为“final_df”的数据帧。在这个数据框中，我按照每个日期对数据进行分组(第34行)，并使用“num_tweets = n()”对每个日期进行汇总。“num_tweets = n()”将报告每个日期在我的数据集中出现的次数(这为我提供了每个日期的tweets数量！).我在第37行导出的最终数据集的一部分显示在下面的屏幕截图中。</p><p id="d476" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有什么想法或问题吗？请评论或发电子邮件给我在danielmurph8@gmail.com。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es lt"><img src="../Images/c2ba4a698fb52aca5054c46b92b53b72.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*AZBsi_-AcqAG8lpGUPwvrg.png"/></div></figure></div></div>    
</body>
</html>