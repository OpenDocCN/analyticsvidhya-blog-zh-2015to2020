<html>
<head>
<title>Data visualisation: The heart in motion</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据可视化:运动中的心脏</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/data-visualisation-the-heart-in-motion-818e86be2e44?source=collection_archive---------24-----------------------#2020-05-07">https://medium.com/analytics-vidhya/data-visualisation-the-heart-in-motion-818e86be2e44?source=collection_archive---------24-----------------------#2020-05-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="c19e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">与大多数器官相比，心脏在功能上确实是最简单的。它(通常)在给定的范围内搏动，并将血液泵入和泵出。这种活动完全是电性的；“窦房结”是心脏右上方的一组精选细胞，产生这些脉冲，向下移动到心室并使其收缩。(“冲动”，在这种情况下，意味着“离子穿过细胞膜的运动”)。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/0dbd21728fd61b88fea5b3e623d26803.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EjXxozX7hg_Jv0vylZYiXg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">心脏中电脉冲(去极化波，即离子运动)的传导从顶部(窦房结)开始，向下移动到房室结(房室结)，穿过室间隔(最小的箭头)，然后移动到两个心室(最大的箭头)；(由Madhero88(原始文件)修改而来)；Angelito7(这个SVG版本)；—ConductionsystemoftheheartwithouttheHeart.png &amp; conductionsystemoftheheartwithoutheart . SVG，CC BY-SA 3.0，<a class="ae jt" href="https://commons.wikimedia.org/w/index.php?curid=29922595" rel="noopener ugc nofollow" target="_blank">https://commons.wikimedia.org/w/index.php?curid=29922595</a></figcaption></figure><p id="2ad5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种电活动表现为可以从体表获得的有节奏的电场变化。你可以粘贴一些小电线，把它们连接到电压表上，瞧！你可以看到心脏在活动。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ju"><img src="../Images/4f9737d4be99bd23fe93cdf33aa33007.png" data-original-src="https://miro.medium.com/v2/resize:fit:1390/format:webp/1*8g_M-L6rNfbsgwjSwy5pww.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">标准心电图波形</figcaption></figure><p id="3ade" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，<em class="jv">心电图</em>的记录方式，还有很多有待探索。标准心电图用12根导线(“导联”)记录；其中6个位于“冠状”(即垂直)平面，其余位于“横向”(水平)平面。所以我们马上就有了一组互相垂直的轴。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jw"><img src="../Images/03e100f165a87b55766039c6a0c7df98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p3Kl8Vu0FEx7Gq1QGcw0mg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">带轴的心电图导联系统；我们可以立即识别一组3个轴:导联I、aVF和和V2，它们相互垂直(由Npatchett —自己的工作，CC BY-SA 4.0，【https://commons.wikimedia.org/w/index.php?curid=39235260】T4)</figcaption></figure><p id="7fd5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦我们确定了一组轴，我们就可以假设这三个轴上的电压相互独立(因为它们是垂直的)。然后，我们可以对它们进行矢量求和，以产生给定时刻的心脏矢量。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jx"><img src="../Images/c5005ca6f1e60cadd81443d8978273e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kJqTIFhvpGfeuWKJXqNMPw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">垂直引线的矢量求和按您预期的方式工作</figcaption></figure><p id="9dc7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">PTB诊断数据库包含正常和异常心电图(<a class="ae jt" href="https://physionet.org/content/ptbdb/1.0.0/" rel="noopener ugc nofollow" target="_blank">https://physionet.org/content/ptbdb/1.0.0/</a>)。通常这些录音以一套三个文件的形式出现</p><ol class=""><li id="045f" class="jy jz hi ih b ii ij im in iq ka iu kb iy kc jc kd ke kf kg bi translated">答。包含实际电压的dat文件，按导联分组</li><li id="47f0" class="jy jz hi ih b ii kh im ki iq kj iu kk iy kl jc kd ke kf kg bi translated">答。他有一份关于病人信息的档案</li><li id="a520" class="jy jz hi ih b ii kh im ki iq kj iu kk iy kl jc kd ke kf kg bi translated">答。包含关于记录的元信息的xyz文件</li></ol><p id="afb4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以下载所有三个文件并放在一个文件夹中，然后将电压读入numpy</p><pre class="je jf jg jh fd km kn ko kp aw kq bi"><span id="1ee8" class="kr ks hi kn b fi kt ku l kv kw">import matplotlib.pyplot as plt<br/>import numpy as np<br/>import wfdb</span><span id="df51" class="kr ks hi kn b fi kx ku l kv kw">sigs, fields = wfdb.rdsamp('your_file_path/s1101', channels=[0, 5, 7], sampfrom=0, sampto=6000)<br/># Note that you'll have to omit the filename extension; wfdb reads all three files at once</span></pre><p id="ddea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里有几点需要注意</p><ol class=""><li id="0d12" class="jy jz hi ih b ii ij im in iq ka iu kb iy kc jc kd ke kf kg bi translated"><strong class="ih hj">通道</strong>参数指定了我们正在读取的所有线索；在这种情况下，我们感兴趣的是0、5和7，分别对应于导联I、aVF和v2</li><li id="2cc4" class="jy jz hi ih b ii kh im ki iq kj iu kk iy kl jc kd ke kf kg bi translated"><strong class="ih hj"> sampfrom </strong>和<strong class="ih hj"> sampto </strong>论点你需要多少读数；记录以每秒1000个样本的速度进行；所以前6000个样本对应于录音的前6秒</li></ol><p id="96de" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该函数返回一个numpy数组<strong class="ih hj"> sigs </strong>，以及作为<strong class="ih hj">字段的元数据。</strong></p><pre class="je jf jg jh fd km kn ko kp aw kq bi"><span id="38b7" class="kr ks hi kn b fi kt ku l kv kw">sigs.shape<br/># 6000, 3</span></pre><p id="d703" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">原始numpy数组包含来自3个导联的6000个样本，每个样本。您也可以查看<strong class="ih hj">字段</strong>以获取有关录制的一些信息。</p><pre class="je jf jg jh fd km kn ko kp aw kq bi"><span id="1388" class="kr ks hi kn b fi kt ku l kv kw">fields<br/># {'fs': 1000, 'sig_len': 6000, 'n_sig': 3, 'base_date': None, 'base_time': ...</span></pre><p id="c23e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以将<strong class="ih hj">信号</strong>作为一个整体来绘制，并查看3个记录</p><pre class="je jf jg jh fd km kn ko kp aw kq bi"><span id="3896" class="kr ks hi kn b fi kt ku l kv kw">plt.plot(sigs)</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ky"><img src="../Images/5916969acad320ca3f640611fab7ee13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EzJMoQPj57-H3U3uO8X76w.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">所有三个线索一起策划；注意波浪高度的差异；该差异反映了心脏向量在3个垂直方向上的分量</figcaption></figure><p id="64fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们更深入地了解一下sigs</p><pre class="je jf jg jh fd km kn ko kp aw kq bi"><span id="0c2e" class="kr ks hi kn b fi kt ku l kv kw">sigs<br/>#array([[-0.2535, -0.7315,  0.8685],<br/>       [-0.2395, -0.7335,  0.8635],<br/>       [-0.232 , -0.7345,  0.8565],<br/>       ...,<br/>       [-0.2315, -0.811 ,  0.6905],<br/>       [-0.2355, -0.8135,  0.6915],<br/>       [-0.229 , -0.8145,  0.699 ]])</span></pre><p id="d6fa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每一行代表一个时刻，准确地说，是1/1000秒。这三个值分别对应于导联I、aVF和v2的电压。我们可以捕捉一个瞬间</p><pre class="je jf jg jh fd km kn ko kp aw kq bi"><span id="233e" class="kr ks hi kn b fi kt ku l kv kw">sigs[3]<br/># array([-0.231 , -0.7285,  0.849 ])</span></pre><p id="071b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们试着分别沿着x，y，z轴画出这三个向量</p><pre class="je jf jg jh fd km kn ko kp aw kq bi"><span id="0cde" class="kr ks hi kn b fi kt ku l kv kw">fig = plt.figure(figsize=(20,6),dpi=144)<br/>ax = fig.add_subplot(111, projection='3d')<br/>ax.grid()<br/>ax.set_xlim(-1.5,1.5)<br/>ax.set_ylim(-1.5,1.5)<br/>ax.set_zlim(-1.5,1.5)<br/>ax.plot([0,-0.7285],[0,0],[0,0],color='g',label='lead v2')<br/>ax.plot([0,0],[0,-0.231],[0,0],color='b',label='lead I')<br/>ax.plot([0,0],[0,0],[0,0.849],color='y',label='lead aVF')<br/>ax.plot([0,-0.7285],[0,-0.231],[0,0.849],color='r',label='sum')<br/>plt.show()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jx"><img src="../Images/11dea09132320faf8c3f8d538fe07c05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-jlZP5Q3uWKHRx3lkuvZNA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">同样，正如你所料。但是注意，该图表示心脏向量(红色)的位置，从心脏的假想中心(0，0)开始</figcaption></figure><p id="6066" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">继续前进，为什么要停留在一个瞬间？我们可以从<strong class="ih hj"> sigs </strong>中分割列，并绘制整个记录的总和向量</p><pre class="je jf jg jh fd km kn ko kp aw kq bi"><span id="47cd" class="kr ks hi kn b fi kt ku l kv kw">ax.scatter(sigs[:,0],sigs[:,1],sigs[:,2],color='r',marker='.',alpha=0.5)<br/>plt.show()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jx"><img src="../Images/5ae6081d77395a5e37d6916e37f2bf03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HL1vT-LFhsClheN0IGjBMQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">正常向量心电图</figcaption></figure><p id="da3c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">心脏电活动的快照是喉下病理的非常有用的指示器。心脏细胞活动的任何改变都会以自己独特的方式扭曲这个画面。在大多数心肌梗塞(“心脏病”)中，细胞从细胞的特定部分丢失，通过观察VCG，你可以知道在哪里。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jx"><img src="../Images/e390e4e0d188e9455f02ce3056e7d228.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MwDfXJQ4Y-EvHqWSzJlubQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">前外侧梗塞(心脏前壁死亡)；请注意VCG的合同</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jx"><img src="../Images/aafce940eef2f5c14fe566340d991c78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R-OANdyCXKesC2Jm9iAQ-A.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">阴下动脉侧梗死(心底死亡)，缩小较少，但仍显著改变VCG</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jx"><img src="../Images/519c3f08c05968bf5aac2389a35f5e5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iv-M4W9B6KHHGRlE_vXDAw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">心房颤动(窦房结节律紊乱):VCG不再以(0，0)为中心</figcaption></figure><p id="d86d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过一点动画，很容易产生随时间移动的心脏向量:一个跳动的心脏图，如果你愿意的话。人们只需定义一个绘制单个帧的函数。Matplotlib使这变得过于复杂(该函数必须返回一个<em class="jv"> lines2d </em>对象等等)，但是结果相当令人满意</p><pre class="je jf jg jh fd km kn ko kp aw kq bi"><span id="aca1" class="kr ks hi kn b fi kt ku l kv kw">accel_factor = 12 # Adjust this to speed up or slow down the drawing</span><span id="ff0d" class="kr ks hi kn b fi kx ku l kv kw">def plot_vcg_frame(i): # i = a single moment<br/>    global lead_endpoints, sum_of_leads, graph<br/>    graph.set_data(sigs[i*accel_factor,0],sigs[i*accel_factor,1])<br/>    graph.set_3d_properties(sigs[i*accel_factor,2])<br/>    <br/>    return graph,<br/>ani = matplotlib.animation.FuncAnimation(fig, plot_vcg_frame, interval=1, blit=True)<br/>plt.show()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kz"><img src="../Images/bc157aacfc78ce71d5221b2a7eddad81.png" data-original-src="https://miro.medium.com/v2/resize:fit:854/1*qP0Ait1-2RFQKw04hk55Pg.gif"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">正常心向量图；实际心跳对应于该点的最大偏差</figcaption></figure><p id="4330" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正确的视觉化不仅以一种富有表现力的方式呈现数据，而且还保留了数据的原始生物背景。另外，当你想到它时，整个过程将作为机器学习的特征提取(而不是将原始数据输入模型)。只不过，<em class="jv">右</em>款(叹气)。</p><p id="6a21" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jv">免责声明</em>:本文仅代表探索性数据分析<em class="jv"/>。所描述的程序都没有经过诊断试验研究或临床评估的验证。这些观点仅代表作者自己的观点，作者并不声称所描述的程序具有任何程度的敏感性/特异性/诊断准确性。文章中表达的观点不应作为临床决策的参考。</p></div><div class="ab cl la lb gp lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hb hc hd he hf"><ol class=""><li id="3532" class="jy jz hi ih b ii ij im in iq ka iu kb iy kc jc kd ke kf kg bi translated">心电向量图空间QRS环的平面性是急性心肌梗死的重要诊断和预后参数。医学假说。2019年9月；130:109251.doi:10.1016/j . mehy . 2019.109251 . Epub 2019年5月31日。考研PMID: 31383333。</li><li id="dfea" class="jy jz hi ih b ii kh im ki iq kj iu kk iy kl jc kd ke kf kg bi translated">Bousseljot R，Kreiseler D，Schnabel，a . EKG的nut nut-在互联网上的PTB的信号数据银行。生物医学技术，40级，ergnzungsband 1(1995)S 317</li></ol></div></div>    
</body>
</html>