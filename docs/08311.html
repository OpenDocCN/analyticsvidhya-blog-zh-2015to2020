<html>
<head>
<title>Demystifying np.where and np.select</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">揭秘np.where和np.select</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/demystifying-np-where-and-np-select-76e3ca49e316?source=collection_archive---------0-----------------------#2020-07-25">https://medium.com/analytics-vidhya/demystifying-np-where-and-np-select-76e3ca49e316?source=collection_archive---------0-----------------------#2020-07-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="4bb8" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">在这篇文章中，我们将通过一些例子来理解np.where，np.select。</h2></div><blockquote class="ix iy iz"><p id="ef3f" class="ja jb jc jd b je jf ij jg jh ji im jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated"><strong class="jd hj"> numpy.where </strong></p></blockquote><pre class="jx jy jz ka fd kb kc kd ke aw kf bi"><span id="88b7" class="kg kh hi kc b fi ki kj l kk kl"><strong class="kc hj">numpy.where</strong><strong class="kc hj">(</strong><em class="jc">condition</em><strong class="kc hj">[, </strong><em class="jc">x</em><strong class="kc hj">, </strong><em class="jc">y</em><strong class="kc hj">])</strong></span></pre><p id="e075" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj km jl jm jn kn jp jq jr ko jt ju jv jw hb bi translated">如果条件为真，这个函数返回x，否则返回y</p><p id="9a9a" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj km jl jm jn kn jp jq jr ko jt ju jv jw hb bi translated"><strong class="jd hj">例1 </strong>:给定一个来自(0，9)的一维数组，如果元素少于5，则元素应该相同，否则将元素乘以10。</p><pre class="jx jy jz ka fd kb kc kd ke aw kf bi"><span id="cda2" class="kg kh hi kc b fi ki kj l kk kl">import numpy as np <br/>a = np.arange(10)<br/>np.where(a &lt; 5,a,10*a)<br/>Out[1]: array([ 0,  1,  2,  3,  4, 50, 60, 70, 80, 90])</span></pre><p id="f716" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj km jl jm jn kn jp jq jr ko jt ju jv jw hb bi translated"><strong class="jd hj">例2: </strong>给定两个二维数组，获得一个关于条件的数组。</p><pre class="jx jy jz ka fd kb kc kd ke aw kf bi"><span id="a534" class="kg kh hi kc b fi ki kj l kk kl">np.where([[True,False],[True,False]],[[1,2],[3,4]],[[45,52],[78,96]])<br/>Out[3]: <br/>array([[ 1, 52],<br/>       [ 3, 96]])</span></pre><p id="4b49" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj km jl jm jn kn jp jq jr ko jt ju jv jw hb bi translated">如果条件为真，我们从x中取出元素，否则从y中取出。</p><figure class="jx jy jz ka fd kq er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es kp"><img src="../Images/464a2b448fd509e4deecb8587f0378dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zmiZ6oOT8dgM9JuOfNNGnQ.png"/></div></div></figure><p id="6f92" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj km jl jm jn kn jp jq jr ko jt ju jv jw hb bi translated"><strong class="jd hj">例3: </strong>给定一个二维矩阵如果ix中的值小于4，则该值应该相同否则返回值为-1。</p><pre class="jx jy jz ka fd kb kc kd ke aw kf bi"><span id="fff6" class="kg kh hi kc b fi ki kj l kk kl">np.where(a &lt; 4,a,-1)<br/>Out[8]: <br/>array([[ 0,  1,  2],<br/>       [ 0,  2, -1],<br/>       [ 0,  3, -1]])</span></pre><p id="8e41" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj km jl jm jn kn jp jq jr ko jt ju jv jw hb bi translated"><strong class="jd hj">更多例子</strong></p><figure class="jx jy jz ka fd kq"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="8092" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj km jl jm jn kn jp jq jr ko jt ju jv jw hb bi translated">如果未指定x和y，则由<em class="jc">返回的值，其中</em>函数是满足条件的元素的索引。这些索引是元组。</p><pre class="jx jy jz ka fd kb kc kd ke aw kf bi"><span id="ae72" class="kg kh hi kc b fi ki kj l kk kl">array = np.ones((3,3))</span><span id="1c80" class="kg kh hi kc b fi kz kj l kk kl">array<br/>Out[19]: <br/>array([[1., 1., 1.],<br/>       [1., 1., 1.],<br/>       [1., 1., 1.]])</span><span id="f26c" class="kg kh hi kc b fi kz kj l kk kl">testing_array = np.where([[True,False,True],[False,True,False],[True,False,True]],array,-array)</span><span id="60eb" class="kg kh hi kc b fi kz kj l kk kl">testing_array<br/>Out[22]: <br/>array([[ 1., -1.,  1.],<br/>       [-1.,  1., -1.],<br/>       [ 1., -1.,  1.]])</span><span id="beb6" class="kg kh hi kc b fi kz kj l kk kl">np.where(testing_array &gt; 0)<br/>Out[24]: (array([0, 0, 1, 2, 2], dtype=int64), array([0, 2, 1, 0, 2], dtype=int64))</span></pre><p id="c44b" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj km jl jm jn kn jp jq jr ko jt ju jv jw hb bi translated">在上面的例子中，返回值是由相应的行索引和列索引组成的元组。</p><p id="ec83" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj km jl jm jn kn jp jq jr ko jt ju jv jw hb bi translated">如果我们希望值作为一个单一的列表，我们可以使用以下</p><pre class="jx jy jz ka fd kb kc kd ke aw kf bi"><span id="a755" class="kg kh hi kc b fi ki kj l kk kl">list(zip(*np.where(testing_array &gt; 0)))<br/>Out[26]: [(0, 0), (0, 2), (1, 1), (2, 0), (2, 2)]</span></pre><blockquote class="ix iy iz"><p id="3180" class="ja jb jc jd b je jf ij jg jh ji im jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated"><strong class="jd hj"> np.select </strong></p></blockquote><pre class="jx jy jz ka fd kb kc kd ke aw kf bi"><span id="ae51" class="kg kh hi kc b fi ki kj l kk kl"><strong class="kc hj">numpy.select</strong><strong class="kc hj">(</strong><em class="jc">condlist</em><strong class="kc hj">, </strong><em class="jc">choicelist</em><strong class="kc hj">, </strong><em class="jc">default=0</em><strong class="kc hj">)</strong></span></pre><p id="1547" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj km jl jm jn kn jp jq jr ko jt ju jv jw hb bi translated"><em class="jc">条件列表</em>是条件列表，决定从<em class="jc">选择列表</em>中的哪个数组获取输出元素。如果满足多个条件，则使用<em class="jc">条件列表</em>中的第一个。</p><p id="cb6f" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj km jl jm jn kn jp jq jr ko jt ju jv jw hb bi translated"><em class="jc"> choicelist </em>是从中提取输出元素的数组列表。当所有条件评估为假时，返回默认值。</p><figure class="jx jy jz ka fd kq"><div class="bz dy l di"><div class="kx ky l"/></div></figure></div></div>    
</body>
</html>