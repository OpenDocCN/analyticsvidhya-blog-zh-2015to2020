<html>
<head>
<title>Why should you know “In python, Everything is an Object”?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么要知道“在python中，一切都是对象”？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/why-should-you-know-in-python-everything-is-an-object-6a140c0b9293?source=collection_archive---------7-----------------------#2019-09-13">https://medium.com/analytics-vidhya/why-should-you-know-in-python-everything-is-an-object-6a140c0b9293?source=collection_archive---------7-----------------------#2019-09-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9f3f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我通常更喜欢阅读书籍，而不是视频教程。在我开始学习python的时候，我在许多教科书中遇到过这样一句话——“在python中，一切都是对象”。这类似于我编码和思考python的方式。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="e5fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jk">在进入本帖之前，让我们先了解一下python中的对象。</em> </strong></p><p id="e63a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Python中的一切都是对象，几乎一切都有属性和方法。所有函数都有一个内置属性<code class="du jl jm jn jo b">__doc__</code>，它返回函数源代码中定义的文档字符串。sys模块是一个具有名为path的属性的对象。诸如此类。</p><p id="d39c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在不同的编程语言中,“对象”有许多定义。一些语言大师说所有的对象都必须有属性和/或方法。其余的说对象是可子类化的(意味着你可以继承它们)。</p><p id="3732" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，在python中，定义没有这么严格。python中的一些对象既没有对象也没有方法。python与其他语言的另一个显著区别是python中的所有对象都不是子类。</p><p id="f434" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">总而言之，python中的任何东西或者你在python中创建的任何东西都可以赋给一个变量，并可以作为参数传递给任何可调用的对象(比如函数/类)。因为这个属性，Python也被称为<strong class="ih hj">一级对象。</strong></p><p id="71a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">插图:</strong></p><pre class="jp jq jr js fd jt jo ju jv aw jw bi"><span id="7085" class="jx jy hi jo b fi jz ka l kb kc"># create a list<br/>alist = [3, 5, 7, 8]</span><span id="86e8" class="jx jy hi jo b fi kd ka l kb kc"># lets create another list using same list<br/>blist = alist</span><span id="e23a" class="jx jy hi jo b fi kd ka l kb kc"># Now print both values</span><span id="c114" class="jx jy hi jo b fi kd ka l kb kc">print("Before perfoming any operations:")<br/>print("alist: ", alist)<br/>print("blist: ", blist)</span><span id="57ac" class="jx jy hi jo b fi kd ka l kb kc"># Its time to do some operation on these list. lets append new object in list<br/>alist.append(23)</span><span id="393b" class="jx jy hi jo b fi kd ka l kb kc"># again print both values</span><span id="9e27" class="jx jy hi jo b fi kd ka l kb kc">print("After append operation")<br/>print("alist: ", alist)<br/>print("blist: ", blist)</span></pre><p id="972c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出</p><pre class="jp jq jr js fd jt jo ju jv aw jw bi"><span id="0b5e" class="jx jy hi jo b fi jz ka l kb kc">Before performing any operations:<br/>alist: [3, 5, 7, 8]<br/>blist: [3, 5, 7, 8]</span><span id="210a" class="jx jy hi jo b fi kd ka l kb kc">After append operation:<br/>alist: [3, 5, 7, 8, 33]<br/>blist: [3, 5, 7, 8, 33]</span></pre><p id="e961" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi ke translated">注意我们在“列表”列表上做的操作和在两个(列表，列表)列表上的结果。尽管我们对“list”对象进行了操作，但我们发现它在“blist”上也附加了值23(在python中它本身称为int object)。</p><p id="5d14" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个结果促使我思考python实际上是如何工作的。经过一个小的研究，我知道这是因为“在python中，一切都是对象”。让我通过在前面示例中添加几行代码来阐明这一点:</p><pre class="jp jq jr js fd jt jo ju jv aw jw bi"><span id="906f" class="jx jy hi jo b fi jz ka l kb kc">print("ID of alist: ", id(alist))<br/>print("ID of blist: ", id(blist))</span><span id="5da3" class="jx jy hi jo b fi kd ka l kb kc">Outputs:<br/>ID of alist: 4844897928<br/>ID of blist: 4844897928</span></pre><p id="ff35" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你注意到两个列表有相同的id吗？是的，这是了解“python中的一切都是对象”的第一步</p><p id="ff58" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jk">让我用我们反复实施的真实例子来介绍这些东西。</em> </strong></p><p id="f253" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">示例:</p><pre class="jp jq jr js fd jt jo ju jv aw jw bi"><span id="c1bc" class="jx jy hi jo b fi jz ka l kb kc">fruits = ["Avocardo", "Kiwis"]<br/>prices = [300, 400]</span><span id="9482" class="jx jy hi jo b fi kd ka l kb kc">fruits_detail = {}</span><span id="d69b" class="jx jy hi jo b fi kd ka l kb kc">fruits_detail_list = []</span><span id="664b" class="jx jy hi jo b fi kd ka l kb kc">for fruit, price in zip(fruits, prices):<br/>    fruits_detail["Name"] = fruit<br/>    fruits_detail["Price"] = price<br/>    fruits_detail_list.append(fruits_detail)</span><span id="2163" class="jx jy hi jo b fi kd ka l kb kc">print("List of fruits details: ")<br/>print(fruits_detail_list)</span></pre><p id="e261" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">问题:<strong class="ih hj">你的预期产量是多少？</strong></p><p id="86ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可能的预期答案:</p><blockquote class="kn ko kp"><p id="eebe" class="if ig jk ih b ii ij ik il im in io ip kq ir is it kr iv iw ix ks iz ja jb jc hb bi translated">水果详情列表:</p><p id="cf9a" class="if ig jk ih b ii ij ik il im in io ip kq ir is it kr iv iw ix ks iz ja jb jc hb bi translated"><em class="hi"> [{"Name": " </em>牛油果<em class="hi">，"价格":300}，{"Name ":"猕猴桃"，"价格":400}] </em></p></blockquote><p id="02b8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">问:<strong class="ih hj">你的实际产量是多少？</strong></p><p id="ec74" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">回答:</p><blockquote class="kn ko kp"><p id="743f" class="if ig jk ih b ii ij ik il im in io ip kq ir is it kr iv iw ix ks iz ja jb jc hb bi translated">水果详情列表:</p><p id="80c5" class="if ig jk ih b ii ij ik il im in io ip kq ir is it kr iv iw ix ks iz ja jb jc hb bi translated"><em class="hi"> [{ "姓名":"奇异果"，"价格":400}，{ "姓名":"奇异果"，"价格":400}] </em></p></blockquote><p id="a0d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我的编程生涯中，当我面对这个问题时，我花了5个多小时来解决它。在某些情况下，我甚至改变主意跳过它，尝试其他东西来实现目标。但多亏了我当时做出的决定。我决定找出上面这段代码中的错误。是的，最后我知道这是我愚蠢的错误和大错误。</p><p id="d2fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后我意识到<strong class="ih hj">为什么要知道“在python中，一切都是对象”？</strong></p><p id="4ddc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">是的，这个问题的主要咒语/解决方案就是我在这篇文章标题中提到的那句话，即<em class="jk">为什么你应该知道“在python中，一切都是对象”？</em></p><p id="9512" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们深入研究一下上述问题。</p><pre class="jp jq jr js fd jt jo ju jv aw jw bi"><span id="ec01" class="jx jy hi jo b fi jz ka l kb kc">fruits = ["Avocardo", "Kiwis"]<br/>prices = [300, 400]<br/>fruits_detail = {}</span><span id="5b8b" class="jx jy hi jo b fi kd ka l kb kc">fruits_detail_list = []</span><span id="de5e" class="jx jy hi jo b fi kd ka l kb kc">print("Information of fruits_detail inside for loop")</span><span id="a98f" class="jx jy hi jo b fi kd ka l kb kc">for fruit, price in zip(fruits, prices):<br/>    fruits_detail["Name"] = fruit<br/>    fruits_detail["Price"] = price<br/>    print("fruits_detail in each loop: ", fruits_detail)<br/>    print("fruits_detail id: ", id(fruits_detail))<br/>    fruits_detail_list.append(fruits_detail)<br/>print("--------------------------------")</span><span id="09c2" class="jx jy hi jo b fi kd ka l kb kc">print("List of fruits details: ")<br/>print("fruits_detail_list": fruits_detail_list)<br/>print("fruits_detail id: ", id(fruits_detail))</span></pre><p id="46e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出:</p><blockquote class="kn ko kp"><p id="a1db" class="if ig jk ih b ii ij ik il im in io ip kq ir is it kr iv iw ix ks iz ja jb jc hb bi translated"><br/>循环内水果_明细信息各循环内水果_明细:{ '姓名':'牛油果'，'价格':300} <br/>水果_明细id: 4845794720 <br/>各循环内水果_明细:{ '姓名':'奇异果'，'价格':400} <br/>水果_明细id:4845794720<br/>——————————————————————————————————<br/>水果明细列表:<br/>水果</p></blockquote><p id="7362" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">以上输出的要点:</strong></p><ol class=""><li id="3c56" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">在每个循环中，我们为<strong class="ih hj"> <em class="jk">水果_细节</em> </strong> <em class="jk">对象，即</em>获取唯一值</li></ol><p id="b90e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">{ '名称':'鳄梨'，'价格':300}和{ '名称':'猕猴桃'，'价格':400}</p><p id="7044" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.同样在所有循环中，<strong class="ih hj"> <em class="jk">水果_细节</em> </strong> <em class="jk">对象的id是相同的，即</em> 4845794720</p><p id="af22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.但是当我们打印<strong class="ih hj"><em class="jk">fruits _ detail _ list</em></strong>的结果时，追加在<strong class="ih hj"><em class="jk">fruits _ detail _ list</em></strong>中的<strong class="ih hj"><em class="jk">fruits _ detail</em></strong>具有唯一值(从第1点开始)的对象并没有打印其内部的唯一值。</p><p id="0c39" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jk">水果_细节_列表:[{ '姓名':'猕猴桃'，'价格':400}，{ '姓名':'猕猴桃'，'价格':400}] </em></p><p id="f105" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还可以在for循环后看到<strong class="ih hj"> fruits_detail </strong>的id，与for循环中的id相同。</p><h2 id="5482" class="jx jy hi bd lc ld le lf lg lh li lj lk iq ll lm ln iu lo lp lq iy lr ls lt lu bi translated">上述示例中的问题:</h2><p id="7b17" class="pw-post-body-paragraph if ig hi ih b ii lv ik il im lw io ip iq lx is it iu ly iw ix iy lz ja jb jc hb bi translated">追加的对象即<strong class="ih hj"> <em class="jk">水果_细节</em> </strong>实际上一点也不唯一。它只是更新同一个对象和<strong class="ih hj"> <em class="jk">水果_细节_列表</em> </strong>只是简单地指向<strong class="ih hj"> <em class="jk"> </em> </strong>更新的<strong class="ih hj"> <em class="jk">水果_细节</em> </strong>在其结果。</p><figure class="jp jq jr js fd mb er es paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="er es ma"><img src="../Images/ce7dfc5b3a57c277e4d75540cab84415.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jWV7VUjISKyzqfkJYVXB3A.png"/></div></div><figcaption class="mi mj et er es mk ml bd b be z dx translated">图一。描述输出</figcaption></figure><h1 id="d861" class="mm jy hi bd lc mn mo mp lg mq mr ms lk mt mu mv ln mw mx my lq mz na nb lt nc bi translated">如何解决这个问题？</h1><p id="77c5" class="pw-post-body-paragraph if ig hi ih b ii lv ik il im lw io ip iq lx is it iu ly iw ix iy lz ja jb jc hb bi translated">从上面的讨论中，我们知道追加相同的对象会导致意外的输出(最后更新的输出已经在输出中看到)。参考上图。</p><p id="312b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了解决这个问题，我们可以在一个循环中创建新对象，并简单复制这个对象(<strong class="ih hj"> <em class="jk"> fruits_detail </em> </strong>)。并且比在<strong class="ih hj"> <em class="jk">水果_明细_列表</em> </strong>中追加新对象给我<strong class="ih hj"> <em class="jk">水果_明细_列表</em> </strong>中的唯一值。这是因为，在每个循环中，新的对象将被创建，这意味着新创建的对象将拥有新的object_id。</p><p id="f8e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最终代码:</p><pre class="jp jq jr js fd jt jo ju jv aw jw bi"><span id="00d0" class="jx jy hi jo b fi jz ka l kb kc">fruits_detail = {}</span><span id="4a4a" class="jx jy hi jo b fi kd ka l kb kc">fruits_detail_list = []</span><span id="1909" class="jx jy hi jo b fi kd ka l kb kc">print("Information of fruits_detail inside for loop")</span><span id="5a40" class="jx jy hi jo b fi kd ka l kb kc">for fruit, price in zip(fruits, prices):<br/>    temp_fruits_detail = fruits_detail.copy() #shallow copy<br/>    temp_fruits_detail["Name"] = fruit<br/>    temp_fruits_detail["Price"] = price<br/>    print("fruits_detail in each loop: ", temp_fruits_detail)<br/>    print("fruits_detail id: ", id(temp_fruits_detail))<br/>    fruits_detail_list.append(temp_fruits_detail)<br/>print("--------------------------------")</span><span id="91aa" class="jx jy hi jo b fi kd ka l kb kc">print("List of fruits details: ")<br/>print("fruits_detail_list: ", fruits_detail_list)</span></pre><p id="b862" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">输出:</p><blockquote class="kn ko kp"><p id="9054" class="if ig jk ih b ii ij ik il im in io ip kq ir is it kr iv iw ix ks iz ja jb jc hb bi translated">循环<br/>内的水果_详细信息每个循环中的水果_详细信息:{ '名称':'牛油果'，'价格':300} <br/>水果_详细信息id: 4845867944 <br/>每个循环中的水果_详细信息:{ '名称':'猕猴桃'，'价格':400} <br/>水果_详细信息id:4844859752<br/>——————————————————————————————<br/>水果详细信息列表:【详细信息</p></blockquote><p id="3433" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">是的，我们得到了期望的输出。</p><h1 id="5a91" class="mm jy hi bd lc mn mo mp lg mq mr ms lk mt mu mv ln mw mx my lq mz na nb lt nc bi translated">结论</h1><p id="7d1b" class="pw-post-body-paragraph if ig hi ih b ii lv ik il im lw io ip iq lx is it iu ly iw ix iy lz ja jb jc hb bi translated">这篇文章的主旨是了解什么是python中的对象，以及它在python解释器中的行为。您应该始终记住，无论何时使用任何对象创建新容器，都要确保原始对象(您用来创建新容器的对象)没有在整个代码中被更新。如果需要更新你的对象，我建议你创建一个临时对象作为原始对象的副本(你也可以选择shallpw或deep copy ),这样原始对象的改变就不会影响新创建的容器对象。</p></div></div>    
</body>
</html>