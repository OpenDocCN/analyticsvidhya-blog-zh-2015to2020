<html>
<head>
<title>News and Asset Prices | Creating a database utilizing Python and free APIs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">新闻和资产价格|利用Python和免费API创建数据库</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/news-and-asset-prices-creating-a-database-utilizing-python-and-free-apis-7f6ee4017b95?source=collection_archive---------21-----------------------#2020-12-29">https://medium.com/analytics-vidhya/news-and-asset-prices-creating-a-database-utilizing-python-and-free-apis-7f6ee4017b95?source=collection_archive---------21-----------------------#2020-12-29</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="9b20" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">新闻文章和资产价格之间的关系是一个有趣的研究主题，因为识别相关性可能会带来盈利机会。在这一领域进行分析的方法有很多种，一种非常简单的方法是检查报道一家公司的新闻文章数量与其股价之间是否存在可观察到的关系。为了进行这样的分析，我们首先需要一个包含相关信息的数据集。</p><p id="20ca" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">本文将提供一种基本方法，利用Python和开放API来生成允许这种分析的数据库。因此，将使用python库yfinance和pygooglenews。yfinance包允许从Yahoo！Finance和pygooglenews包为您提供包含特定关键字的Google新闻文章。<br/>使用免费的API自然会有缺点，例如，yfinance有时会缺少数据点，而在使用谷歌新闻时，我们不能确定谷歌新闻是否真的聚集了所有相关的新闻文章。尽管如此，这些包的使用提供了一个简单可行的起点。</p><figure class="jc jd je jf fd jg"><div class="bz dy l di"><div class="jh ji l"/></div></figure><p id="1b3a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">此代码返回一个Pandas DataFrame，其中包含2019年12月指定时间段内所有包含关键字“比特币”的英文谷歌新闻文章。结果DataFrame包含多个列，如“标题”、“出版日期”、“网站”和一些更多的信息，这些信息可能对进一步的分析有意义。<br/>对于基本方法，我们简单地计算并可视化每天发布的文章数量。</p><figure class="jc jd je jf fd jg"><div class="bz dy l di"><div class="jh ji l"/></div></figure><figure class="jc jd je jf fd jg er es paragraph-image"><div class="er es jj"><img src="../Images/aa05ad91a9dae6d764df38c9f156818e.png" data-original-src="https://miro.medium.com/v2/resize:fit:758/format:webp/1*bJOAqb5G-_rRx96bc1mkOQ.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">图表1(图片由作者提供)</figcaption></figure><p id="d7d1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">出现的一个问题是API每次查询返回有限数量的文章。如果你想分析更长的时间范围，这是一个问题。<br/>下面的脚本通过查询时间范围的子集提供了一种绕过这种限制的方法。在示例中，它对过去1500天内的每一天执行查询。如果你希望每周包含你的关键词的文章不超过100篇，你可以使用每周一次的查询时间。</p><figure class="jc jd je jf fd jg"><div class="bz dy l di"><div class="jh ji l"/></div></figure><figure class="jc jd je jf fd jg er es paragraph-image"><div class="er es jq"><img src="../Images/8ab3bbcfb5f7098d644bc3026facfb21.png" data-original-src="https://miro.medium.com/v2/resize:fit:780/format:webp/1*F0_yanuH_tenEyBzc9IB7Q.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">图表2(图片由作者提供)</figcaption></figure><p id="5933" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在我们有了一个数据库，其中包含您感兴趣的资产的新闻曝光率。为了与性价比进行比较，我们将使用yfinance软件包中的数据。</p><figure class="jc jd je jf fd jg"><div class="bz dy l di"><div class="jh ji l"/></div></figure><figure class="jc jd je jf fd jg er es paragraph-image"><div class="er es jr"><img src="../Images/b6f98c29cd5836876c509ad0cf5a1d8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*vtXv3UM9euduLOWIX0XmLQ.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">图表3(图片由作者提供)</figcaption></figure><p id="c6c9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">长期图表2和3的视觉比较揭示了包括“比特币”的文章数量和比特币价格之间的关系，这当然并不令人惊讶。这是值得怀疑的，如果你能从这个发现中得出一个有利可图的结论，但肯定的是，你现在有一个免费的和强大的工具来获取数据进行分析，以获得对比特币或雅虎上市的任何其他资产的更深入的见解！金融。从消除数据来源的弱点到使用情感分析等复杂方法的程度，进一步的研究没有限制。</p><p id="28b1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">奖金:<br/>到目前为止，我们只比较了每天的文章数量和资产价格。但显然，发表文章的网站是有区别的。大型报纸比小型的利基新闻博客拥有更多的读者。由于这一事实，有人可能会说，一篇文章接触到的人数是更值得研究的变量。<br/>不幸的是，pygooglenews包没有提供关于文章范围的信息。相反，<a class="ae js" href="https://products.wolframalpha.com/api/" rel="noopener ugc nofollow" target="_blank"> WolframAlpha API </a>提供网站每月访客数量的信息。我们可以用这个访问者的数量作为一篇文章覆盖范围的一个粗略的代理变量。该API允许每月进行2000次免费查询。使用WolframAlpha python包，我们可以请求发布网站的访问者数量。</p><figure class="jc jd je jf fd jg"><div class="bz dy l di"><div class="jh ji l"/></div></figure><p id="a9be" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">首先，我们从pygooglenews结果数据框架中提取域名，然后通过WolframAlpha收集访问者数量。接下来，我们根据发布日期对数据框进行分组，并对访问者的数量进行汇总(图6)。</p><figure class="jc jd je jf fd jg er es paragraph-image"><div class="er es jt"><img src="../Images/c01e95368a0efdb0b1e8f243a4089673.png" data-original-src="https://miro.medium.com/v2/resize:fit:792/format:webp/1*GVi0ByBOKxoS6IGEZM3L_Q.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">图表4(图片由作者提供)</figcaption></figure><figure class="jc jd je jf fd jg er es paragraph-image"><div class="er es ju"><img src="../Images/6f74703e1622e3fa7d390f53fa077115.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/format:webp/1*1RSGdcUYK9iIWUBQLecjGQ.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">图表5(图片由作者提供)</figcaption></figure><figure class="jc jd je jf fd jg er es paragraph-image"><div class="er es jv"><img src="../Images/00aa364a5bf56f2fddcf9518361d48b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*d1g7lsH2UL8QL3C6yv-Y-A.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">图表6(图片由作者提供)</figcaption></figure><p id="f35d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这些额外的信息可以提供新的见解，并允许新的检查方法。自然，这种方法和其他包一样有弱点。例如，如果网站很小或者不知名，Wolfram Alpha就不会提供访问者数据。但是，如果一个网站太小，无法从Wolfram Alpha中检索数据，即使是这些信息本身也可能是有用的。总结这种方法提供了一种简单的方法来改进您的数据库和扩展您的研究。</p></div></div>    
</body>
</html>