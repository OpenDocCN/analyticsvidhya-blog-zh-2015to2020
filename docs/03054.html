<html>
<head>
<title>Introduction to Vector Autoregression</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">向量自回归简介</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/introduction-to-vector-autoregression-6ec386db387e?source=collection_archive---------13-----------------------#2020-01-14">https://medium.com/analytics-vidhya/introduction-to-vector-autoregression-6ec386db387e?source=collection_archive---------13-----------------------#2020-01-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/521b7c73bb09c191983fb83a61a8458d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KfzGwIge_C5AZp5K.jpg"/></div></div></figure><p id="77bc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">介绍</p><p id="a3b6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">git hub-https://github . com/vats manish/Time-series-vector-auto regression-model</p><p id="9042" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">你从这篇文章中学到了什么:- </strong></p><p id="53d9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为什么向量自回归很重要</p><p id="1793" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你将学习向量自回归如何工作？</p><p id="b59e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">向量自回归的实际例子</p><p id="9fc8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您将看到使用世界银行数据集和预测各国GDP的向量自回归的实际实现。</p><p id="b62c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一、什么是向量自回归(VAR)，什么时候用？</p><p id="7516" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">向量自回归(VAR)是一种多变量预测算法，在两个或多个时间序列相互影响时使用。</p><p id="4fbd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">也就是说，使用VAR的基本要求是:</p><ol class=""><li id="37ad" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">您至少需要两个时间序列(变量)</li><li id="9289" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">时间序列应该相互影响。</li></ol><p id="7369" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">好吧。那么为什么称之为‘自回归’呢？</p><p id="2078" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它被认为是一个自回归模型，因为每个变量(时间序列)都被建模为过去值的函数，也就是说，预测值只不过是序列的滞后(时间延迟值)。</p><p id="fc79" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">好的，那么VAR与AR、ARMA或ARIMA等其他自回归模型有什么不同呢？</p><p id="cc8d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">主要区别是这些模型是单向的，其中，预测因子影响Y，而不是相反。然而，向量自回归(VAR)是双向的。也就是变量相互影响。</p><p id="ab55" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">“当人们有兴趣使用单一模型预测多个时间序列变量时，向量自回归(VAR)模型非常有用。其核心是，VAR模型是单变量自回归模型的扩展。</p><p id="5b0b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你将学习向量自回归如何工作？</p><p id="e5bb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们看看这个算法背后的数学直觉</p><p id="8873" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是针对单变量数据的</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es kc"><img src="../Images/7fd84074f302cb5db577695b08aa317b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*nMfvffr_-ktXuCwMq6I78g.png"/></div></figure><p id="e41e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如上所述，在单变量数据中，Ai=1意味着我们只有一列，假设我想添加更多列。</p><p id="2f4b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为此，我们将使用更多数量的多元数据，即:-我们在数据集中添加更多数量的变量。</p><p id="fe1e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这里，我有两行数据相乘，就像自回归一样，例如:leg=1(previous 1)这里t=我们想要的术语数。每一行的乘法运算都与上面显示的它们的乘积相同。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es kh"><img src="../Images/a0e9344a42402501287bb6f21e27886a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*XC__MNmgEEv3c2fhvAiOMQ.png"/></div></figure><p id="813c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">其中α是截距，常数，β1，β2到βp是Y到阶p的滞后系数</p><p id="7eed" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">随着变量数量的增加，常数系数项也在增加。</p><p id="1d48" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">现实生活中向量自回归的实际例子</strong></p><p id="f3d2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们进入下一步</p><p id="18c6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">统计学的很大一部分，尤其是金融和计量经济学数据，是分析时间序列，即随时间自相关的数据。也就是说，一个观察依赖于先前的观察，并且顺序很重要。需要特别注意考虑这种依赖性。r有许多内置的函数和包，使得处理时间序列更加容易</p><p id="ecb0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这里，我使用了世界银行的数据集，我通过R统计工具从世界银行的API中提取数据，该工具使用了包“WDI”来提取数据。</p><p id="4d07" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">数据集描述:-该数据集包含GDP、人均增长率、年份、国家名称、国家代码。</p><p id="f9e6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">年份- 1960年至2018年</p><p id="7252" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">国家——我考虑过国家——美国、加拿大、澳大利亚、中国、印度、巴基斯坦、沙特阿拉伯，</p><p id="55c7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">国家代码=美国、加拿大、澳大利亚、中国、印度、巴基斯坦、沙特</p><p id="ed43" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">人均增长-每个国家的人均增长</p><p id="d38d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">每个国家的国内生产总值</p><p id="2e84" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当处理多个时间序列时，每个时间序列都依赖于自己的过去、他人的过去和他人的现在，事情变得更加复杂。我们要做的第一件事是将所有的GDP数据转换成多元时间序列。为此，我们首先将<code class="du ki kj kk kl b">data.frame</code>转换为宽格式，然后调用<code class="du ki kj kk kl b">ts</code>进行转换。</p><p id="9dd5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">#有关指标和更多详细信息-"？WDI</p><blockquote class="km kn ko"><p id="67ac" class="iq ir kp is b it iu iv iw ix iy iz ja kq jc jd je kr jg jh ji ks jk jl jm jn hb bi translated">GDP</p><p id="0826" class="iq ir kp is b it iu iv iw ix iy iz ja kq jc jd je kr jg jh ji ks jk jl jm jn hb bi translated">indicator = c(“NY.GDP.PCAP.CD”,”NY.GDP.MKTP.CD”),</p><p id="70df" class="iq ir kp is b it iu iv iw ix iy iz ja kq jc jd je kr jg jh ji ks jk jl jm jn hb bi translated">start = 1960, end = 2018)</p><p id="267f" class="iq ir kp is b it iu iv iw ix iy iz ja kq jc jd je kr jg jh ji ks jk jl jm jn hb bi translated">Headings the of dataset</p></blockquote><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kt"><img src="../Images/1f2e90ba85ec8e76ecb53887f0d3ea3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZnEkrFGtjt1XwZcojps5OA.png"/></div></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">country’s with their dataset</figcaption></figure><p id="bf6d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Now plot these data and see their inflation in years of PerCapitalGrowth</p><blockquote class="km kn ko"><p id="675e" class="iq ir kp is b it iu iv iw ix iy iz ja kq jc jd je kr jg jh ji ks jk jl jm jn hb bi translated"># plot them with lables and multiple format percapital growth</p><p id="5311" class="iq ir kp is b it iu iv iw ix iy iz ja kq jc jd je kr jg jh ji ks jk jl jm jn hb bi translated">ggplot(gdp,aes(Year,PerCapGDP,color=Country,linetype=Country))+</p><p id="8b86" class="iq ir kp is b it iu iv iw ix iy iz ja kq jc jd je kr jg jh ji ks jk jl jm jn hb bi translated">geom_line()+scale_y_continuous(label=multiple_format(extra=dollar,multiple=”M”))</p></blockquote><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es ky"><img src="../Images/0acebebe8dfcc36559f4b190f15abe70.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*9dzEIWJDxecCxHArKYeMmw.png"/></div></figure><p id="dad4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">As you know percapital growth is depend on population of country . this plot shows that data’s are following a specific trend so, now I will put Here VAR model</p><p id="af79" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Now let’s see GDP growth of these country</p><blockquote class="km kn ko"><p id="3536" class="iq ir kp is b it iu iv iw ix iy iz ja kq jc jd je kr jg jh ji ks jk jl jm jn hb bi translated"># plot the year wise gdp of bove mentioned country</p><p id="0f6a" class="iq ir kp is b it iu iv iw ix iy iz ja kq jc jd je kr jg jh ji ks jk jl jm jn hb bi translated">ggplot(gdp,aes(Year,PerCapGDP,color=country,linetype=Country)+</p><p id="539c" class="iq ir kp is b it iu iv iw ix iy iz ja kq jc jd je kr jg jh ji ks jk jl jm jn hb bi translated">geom_line()+scale_y_continuous(label=dollar))</p><p id="3552" class="iq ir kp is b it iu iv iw ix iy iz ja kq jc jd je kr jg jh ji ks jk jl jm jn hb bi translated">As plot show us has best GDP and PerCapitalGRowth so plot it incividually.</p></blockquote><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es kz"><img src="../Images/dc42057e4f9d4e1c4e94616a2a28375b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/1*2eoru6RBOKV_htsCHWqGRw.png"/></div></figure><p id="3f51" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">build a model to forcast the gdp of every country that mentioned above.</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es la"><img src="../Images/07d651fb1cf01f8bc030739dd6cf217e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/1*Nr5VKcLf-7el7Tb9S-EqIw.png"/></div></figure><p id="cd33" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Now as you can see Saudi Arbia has not GDP so now here i drop saudi arbia and make the data time series. for this write the code below</p><blockquote class="km kn ko"><p id="9987" class="iq ir kp is b it iu iv iw ix iy iz ja kq jc jd je kr jg jh ji ks jk jl jm jn hb bi translated">#convert first 10 rows since saudi arbia has not gdp on that time <br/>gdpTs&lt;-ts(data = gdpcast[，-1)，start = min(gdpcast$Year)，<br/> end = max(gdpcast$Year))</p></blockquote><p id="5d35" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将移除suadi arbia，现在绘制它们</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/f3b7af0c445e982b2efdefeefc62f3e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*yoFY4HVpYWQiPvsLgk5wKg.png"/></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">转换为时间序列后的国内生产总值增长</figcaption></figure><p id="4479" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所有国家的名称</p><pre class="kd ke kf kg fd lc kl ld le aw lf bi"><span id="7b97" class="lg lh hi kl b fi li lj l lk ll">[1] "Australia"     "Canada"        "China"        <br/>[4] "India"         "Pakistan"      "United.States"</span></pre><p id="25b7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如我们上面讨论的，我们得到了每个国家的系数</p><pre class="kd ke kf kg fd lc kl ld le aw lf bi"><span id="13f6" class="lg lh hi kl b fi li lj l lk ll">Each model has it's own coefficient i plot them separately(Australia)<br/>    Australia.l1        Canada.l1         China.l1 <br/>       -1.697297         1.537982        10.509208 <br/>        India.l1      Pakistan.l1 United.States.l1 <br/>       27.605359       -30.358330        -1.469154</span><span id="f804" class="lg lh hi kl b fi lm lj l lk ll">model for Canada</span><span id="ae2a" class="lg lh hi kl b fi lm lj l lk ll">Australia.l1        Canada.l1         China.l1 <br/>      -1.7700709        0.8624928        7.3055663 <br/>        India.l1      Pakistan.l1 United.States.l1 <br/>       9.0913249      -19.1109224       -0.9543049<br/>model for India</span><span id="b1f2" class="lg lh hi kl b fi lm lj l lk ll">Australia.l1        Canada.l1         China.l1 <br/>     -0.01773529       0.02896139       0.41307104 <br/>        India.l1      Pakistan.l1 United.States.l1 <br/>     -0.67389952       0.08271539       0.09754610...…..</span><span id="7ecc" class="lg lh hi kl b fi lm lj l lk ll"><a class="ae ln" href="https://github.com/vatsmanish/Time-series-vector-autoregression-model" rel="noopener ugc nofollow" target="_blank">https://github.com/vatsmanish/Time-series-vector-autoregression-model</a></span><span id="c157" class="lg lh hi kl b fi lm lj l lk ll">now you have coefficient so u can forecast the GDP of future.<br/>Stay tuned for update!<br/>Thank you</span></pre></div></div>    
</body>
</html>