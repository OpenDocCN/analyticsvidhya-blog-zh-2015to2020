<html>
<head>
<title>Looking for a house in Tokyo is tough, so I built a web scraper in Spring Boot!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在东京找房子很难，所以我在Spring Boot建了一个网页抓取器！</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/looking-for-a-house-in-tokyo-is-tough-so-i-built-a-web-scraper-in-spring-boot-1beaf0f008f2?source=collection_archive---------22-----------------------#2020-04-10">https://medium.com/analytics-vidhya/looking-for-a-house-in-tokyo-is-tough-so-i-built-a-web-scraper-in-spring-boot-1beaf0f008f2?source=collection_archive---------22-----------------------#2020-04-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/ac8db66b75d99d252661f0c431a2a767.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i97SLRs-YlLjXxUB-gKBBA.jpeg"/></div></div></figure><p id="3a52" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">大约一个月前，我决定离开公司的房子，寻找一个新的可以让我自己呼吸新鲜空气的地方。我告诉自己，在网站上手动搜索是势不可挡的，因为在大城市东京有太多的选择。最后，我想我必须利用这个机会做两件事:</p><p id="9221" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">。建立一个网站抓取器，从东京的一个主要租房网站获取所有数据，节省我的时间。</em></p><p id="8318" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">。通过建立这个网站刮刀来提高我的Java技能。(我知道使用Python来抓取网站要容易得多，没有多少人使用Java来做这个)</em></p><p id="8be6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我刮到的网站是<a class="ae jp" href="https://gghouse.co.jp/en/" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> GGhouse </strong> </a>，东京最著名的租房网站之一。他们有大量的房子要我们去清理。</p><p id="0353" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在您接触代码片段之前，让我总结一下我将要做的事情。在这篇文章中，我将一步一步地带你通过Java从<a class="ae jp" href="https://gghouse.co.jp/en/" rel="noopener ugc nofollow" target="_blank"><strong class="is hj">gg house</strong></a><strong class="is hj"/>网站抓取数据。我就不说怎么建我的项目了。所以如果你想看看我的项目，GitLab的链接在本文末尾。</p><h2 id="b9f5" class="jq jr hi bd js jt ju jv jw jx jy jz ka jb kb kc kd jf ke kf kg jj kh ki kj kk bi translated">让我们开始吧！</h2><p id="f314" class="pw-post-body-paragraph iq ir hi is b it kl iv iw ix km iz ja jb kn jd je jf ko jh ji jj kp jl jm jn hb bi translated">在spring boot中，像每个项目一样，在做任何事情之前，我们需要添加一些必要的依赖项。抓取也不例外，我们将使用<strong class="is hj"> jsoup </strong>依赖来处理HTML代码。</p><p id="e5ff" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">在Maven项目中，我们将把下面的代码片段添加到pom.xml文件中</em></p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="8430" class="jq jr hi kv b fi kz la l lb lc">&lt;dependency&gt;<br/>  &lt;groupId&gt;org.jsoup&lt;/groupId&gt;<br/>  &lt;artifactId&gt;jsoup&lt;/artifactId&gt;<br/>  &lt;version&gt;1.13.1&lt;/version&gt;<br/>&lt;/dependency&gt;</span></pre><p id="6c82" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">在Gradle项目中，我们将向build.gradle文件添加以下代码片段</em></p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="4e39" class="jq jr hi kv b fi kz la l lb lc">compile group: 'org.jsoup', name: 'jsoup', version: '1.13.1'</span></pre><p id="c1c6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">传统上，抓取通过从静态HTML代码中提取数据来工作。但是几年前，Javascript框架(如Angular、React和Meteor……)使用的增加使得传统方式不像以前那么简单了。这些框架将使用Javascript来呈现HTML代码的内容。想象一下！HTML代码是一个没有肉和骨头的身体，Javascript用来为它提供肉和骨头(产品图片、描述、技术规格、视频……)。因此，对于由这些框架之一构建的网站来说，如果只获取HTML代码就没什么了。</p><p id="dc8b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">可惜，<a class="ae jp" href="https://gghouse.co.jp/en/" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> GGhouse </strong> </a>就是那种网站。所以我们需要不同的处理方式。</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/dd27956871f93cf15f65af88c4dfbd24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KoeUBzg3_lZDLE0vVADAaA.png"/></div></div></figure><p id="25d1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">不能直接从网站的HTML代码中获取数据，所以我们将调用它的API。返回的数据是我们想要的，但是是JSON格式的。所以我们要先清理并转换成HTML格式，然后使用<strong class="is hj"> jsoup </strong>提取数据。</p><p id="5e04" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请记住，有些网站会自动阻止任何形式的抓取，所以我们将在页面之间放置睡眠命令。这可以假装更多的人类行为，不要让网站因每秒大量的请求而过载。</p><p id="31fc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">好的，我们先测试一下，看看是否可以访问网站。</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="0604" class="jq jr hi kv b fi kz la l lb lc">String api = "https://gghouse.co.jp/en/search/result/"<br/>// body of the Request<br/>String path = "en/search/result.html";  //The path of API<br/>int rent_min = 35000;                   //The minimum renting price<br/>int rent_max = 100000;                  //The maximum renting price<br/>int p = 1;                              //Page one<br/>String gender = "";                     //Not specify gender</span></pre><figure class="kq kr ks kt fd ij"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="262a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">运行上面的代码，看看结果。</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lg"><img src="../Images/928aef298a7174f023991405d7830ad7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZUe0BNYpmuZD1-kRLPkUsw.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx translated">哇，太乱了！</figcaption></figure><p id="64d4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">似乎一切顺利！</p><h2 id="d3b7" class="jq jr hi bd js jt ju jv jw jx jy jz ka jb kb kc kd jf ke kf kg jj kh ki kj kk bi translated">时间<strong class="ak">到</strong>清理数据！</h2><p id="538e" class="pw-post-body-paragraph iq ir hi is b it kl iv iw ix km iz ja jb kn jd je jf ko jh ji jj kp jl jm jn hb bi translated">如果我们仔细观察返回的数据，我们会发现键<strong class="is hj">属性</strong>的值就是我们想要的。那是一串<strong class="is hj"> &lt;一个&gt; </strong>的标签，每个标签都保存着每个房子的基本信息。不仅是这个列表的前面和后面的部分，我们还看到一些不必要的字符。在下图中高亮显示。</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lg"><img src="../Images/fe9a6b401c082e4917a218b393ff33ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mqlSHI44Hu12C_q0vflY3A.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx translated">返回数据的头部分</figcaption></figure><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/45c1eae6465035a3234e380d0a2f02c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nCTPSWuV8xQh1gK-PAolAw.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx translated">返回数据的底部</figcaption></figure><p id="fb0a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要清理数据，请使用下面的代码片段。</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="3893" class="jq jr hi kv b fi kz la l lb lc">result = result.replace("\\n", "").replace("\\", "").replace("{\"properties\":\"", "");<br/>int pos = html.indexOf("&gt;\"");<br/>result = result.replace(pos.substring(index+1, pos.length()), "");</span></pre><p id="431d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们看看我们有什么！</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/5f47527064279bea085335bd0487e413.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vjh_Vym5p-hQCRj5AbaKJQ.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx translated">很漂亮，对吧？:D</figcaption></figure><h2 id="40e1" class="jq jr hi bd js jt ju jv jw jx jy jz ka jb kb kc kd jf ke kf kg jj kh ki kj kk bi translated">煮点汤！</h2><p id="2725" class="pw-post-body-paragraph iq ir hi is b it kl iv iw ix km iz ja jb kn jd je jf ko jh ji jj kp jl jm jn hb bi translated">如果你熟悉HTML，这很有用，但是如果你不熟悉，不要担心，这不是必需的。我会尽可能的简单。</p><p id="20ba" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们在一个Java字符串中有HTML，我们想解析这个HTML来获取它的内容。</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="0e13" class="jq jr hi kv b fi kz la l lb lc">Document doc = Jsoup.parse(html);      // parse HTML<br/>Elements listHouse = doc.select("a");  // get list of <strong class="kv hj">&lt;a&gt;</strong> tags</span></pre><p id="e48f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们现在的数据是一个对象，它保存了一个数据元素列表，是<strong class="is hj"> &lt;一个&gt; </strong>标签。正如我之前说过的，每个<strong class="is hj"> &lt;一个&gt; </strong>标签保存着每个房子的基本信息。所以首先，确定我们需要为每栋房子获取的数据。之后，遍历整个列表，我们会得到所有的数据。</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/ffc2f3f637ccf6bc1353b2da94e23065.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_eE4YxdalyKYqiRaqKjHCg.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx translated">我们会得到什么</figcaption></figure><p id="c5fa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们测试一下如何从一个数据元素(<strong class="is hj"> &lt;一个&gt; </strong>标签)中获取数据。</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="a4ca" class="jq jr hi kv b fi kz la l lb lc">Element item = listHouse.get(1);  // get 2nd data element from list</span></pre><p id="9e0e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">房子的链接</strong>由属性<strong class="is hj"> href </strong>指定。</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="9e8f" class="jq jr hi kv b fi kz la l lb lc">String href = item.attr("href");</span></pre><p id="1462" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">房屋价格</strong>位于<strong class="is hj"> &lt; p &gt; </strong>标签。在数据元素中，只有一个<strong class="is hj"> &lt; p &gt; </strong>标签。</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="6147" class="jq jr hi kv b fi kz la l lb lc">String price = item.select("p").text(); </span></pre><p id="d23e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">房屋名称</strong>位于第一个<strong class="is hj"> &lt; dt &gt; </strong>标签中。所以首先，我们会得到数据元素的<strong class="is hj"> &lt; dt &gt; </strong>标签的列表，那个列表的第一个元素就是我们想要的。</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="d8df" class="jq jr hi kv b fi kz la l lb lc">String name = item.select(“dt”).first().text();</span></pre><p id="feff" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">房屋的状态</strong>位于第一个<strong class="is hj"> &lt;跨度&gt; </strong>标记处。所以和上面走的一样。</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="4b87" class="jq jr hi kv b fi kz la l lb lc">String status = item.select("span").first().text();</span></pre><p id="6893" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">实际上，我们也会得到<strong class="is hj">房子的类型</strong>。意思是房子是不是只给女人住。你在上面的图像中看不到，因为它没有数据。如果有，<strong class="is hj">房屋的类型</strong>位于第二个<strong class="is hj"> &lt;跨度&gt; </strong>标签中。</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="afe1" class="jq jr hi kv b fi kz la l lb lc">String type = (item.select(“span”).size() &gt; 1) ? “Women-only” : “”;</span></pre><h2 id="ad14" class="jq jr hi bd js jt ju jv jw jx jy jz ka jb kb kc kd jf ke kf kg jj kh ki kj kk bi translated">好了，让我们看看抓取了一些页面的完整代码。</h2><figure class="kq kr ks kt fd ij"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="67af" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">到目前为止，我们几乎完成刮。我不知道你是否注意到，在上面我提到了<strong class="is hj">房屋</strong>的基本信息。那么细节呢？我们有豪斯的联系，对吧？让我们访问它，刮。</p><h2 id="5f12" class="jq jr hi bd js jt ju jv jw jx jy jz ka jb kb kc kd jf ke kf kg jj kh ki kj kk bi translated">从静态HTML获取数据</h2><p id="a9be" class="pw-post-body-paragraph iq ir hi is b it kl iv iw ix km iz ja jb kn jd je jf ko jh ji jj kp jl jm jn hb bi translated">访问house的链接，我们可以直接从静态HTML代码中获取数据，不需要调用API。</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/8edd9890038c2b00ecfb3f3c39a1bf93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JXS0hkJiTqwOU5Sma-UuXg.png"/></div></div></figure><p id="f49f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们还将首先测试它，看看是否可以访问网站。</p><figure class="kq kr ks kt fd ij"><div class="bz dy l di"><div class="le lf l"/></div></figure><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="bf24" class="jq jr hi kv b fi kz la l lb lc">Responce Code : 200</span><span id="f28f" class="jq jr hi kv b fi ln la l lb lc">&lt;!doctype html&gt;&lt;html lang="en"&gt;&lt;head&gt;&lt;meta charset="UTF-8"&gt;&lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;&lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;&lt;title&gt;H19 hanasakasu Higashi-nagasaki | Share house GG House Management&lt;/title&gt;&lt;link rel="icon" href="https://gghouse.co.jp/favicon.ico"&gt;&lt;link rel="stylesheet" href="https://gghouse.co.jp/css/style.css"&gt;&lt;link rel="stylesheet" href="https://gghouse.co.jp/search/css/pc.css"&gt;&lt;link rel="stylesheet" href="https://gghouse.co.jp/search/css/sp.css"&gt;&lt;link rel="stylesheet" href="https://gghouse.co.jp/en/search/css/pc.css"&gt;&lt;link rel="stylesheet" href="https://gghouse.co.jp/assets/css/front.css" /&gt;&lt;link rel="canonical" href="https://gghouse.co.jp/h19/" /&gt;&lt;link rel="alternate" hreflang="ja" href="https://gghouse.co.jp/h19/" /&gt;&lt;link rel="alternate" hreflang="en" href="https://gghouse.co.jp/en/h19/" /&gt;&lt;link rel="alternate" hreflang="zh-hans" href="https://gghouse.co.jp/zh-hans/h19/" /&gt;&lt;link rel="alternate" hreflang="ko" hr</span></pre><p id="5413" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">似乎一切都做得很好。</p><p id="f3dc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">作为租户，我认为房屋的详细信息必须包括<strong class="is hj"> <em class="jo">描述</em></strong><strong class="is hj"><em class="jo">共用设施</em></strong><strong class="is hj"><em class="jo">房间设施</em></strong><strong class="is hj"><em class="jo">图片</em> </strong>。一步一步来，首先我们将在HTML代码中找到描述。右键单击网页并选择检查。</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/269c36abd40d6c349ee71966019bd0fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PPulrL9Q3qrGUUpO21rOAQ.png"/></div></div></figure><p id="e318" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将通过上图中突出显示的类属性得到<strong class="is hj"> <em class="jo">描述</em> </strong>。在那之后我们还必须清理它，因为它有一些不必要的字符，正如你所看到的。</p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="da1c" class="jq jr hi kv b fi kz la l lb lc">String descriptions = doc.getElementsByClass("text-box container").text();</span><span id="8ba5" class="jq jr hi kv b fi ln la l lb lc">String characterFilter = "[^\\p{L}\\p{M}\\p{N}\\p{P}\\p{Z}\\p{Cf}\\p{Cs}\\s]";</span><span id="b13e" class="jq jr hi kv b fi ln la l lb lc">descriptions = descriptions.replaceAll(characterFilter,"");</span></pre><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/afa087d6540778b01c5ae71e4634ef6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JJI4qXObJQ3Nd6xN3dA_9Q.png"/></div></div></figure><p id="5eb4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将根据上图中突出显示的类别属性得到<strong class="is hj"> <em class="jo">共享设施</em> </strong>和<strong class="is hj"> <em class="jo">房间设施</em> </strong>。在本例中，返回的数据是一个集合，第一个数据元素是<strong class="is hj"><em class="jo"/></strong>，第二个是<strong class="is hj"> <em class="jo">房间设施。</em> </strong>为了可读性，<strong class="is hj"> <em class="jo">，</em> </strong>我们用一个<strong class="is hj"> <em class="jo">逗号将每个设施中的项目组合起来。</em> </strong></p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="73c6" class="jq jr hi kv b fi kz la l lb lc">Elements facilities = doc.getElementsByClass("ico-list");<br/>StringBuilder share_facility = getFacility(facilities.get(0));<br/>StringBuilder room_facility = getFacility(facilities.get(1));</span><span id="95c7" class="jq jr hi kv b fi ln la l lb lc">public StringBuilder getFacility(Element facilities) {<br/>    StringBuilder facility = new StringBuilder();<br/>    String prefix = "";<br/>    for (Element temp : facilities.select("span")) {<br/>        facility.append(prefix);<br/>        prefix = ",";<br/>        facility.append(temp.text());<br/>    }<br/>    return facility;<br/>}</span></pre><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/85409f1a613d0a6a3ce709f0446e9162.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8mchMDdLN6e98smwYcR6fg.png"/></div></div></figure><p id="a81b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如你在上面的图片中看到的高光，房子的每个图片都保存在<strong class="is hj">&lt;&gt;</strong>标签中，这个<strong class="is hj">&lt;&gt;</strong>标签位于<strong class="is hj"> &lt; ul id="thumb" &gt; </strong>标签中。所以首先，我们将通过<strong class="is hj"> id得到<strong class="is hj"> &lt; ul &gt; </strong>标签，然后得到所有<strong class="is hj"> &lt;的href和一个&gt; </strong>标签。我们用一个<strong class="is hj"> | </strong>符号<strong class="is hj"> <em class="jo">组合所有的href。</em> </strong></strong></p><pre class="kq kr ks kt fd ku kv kw kx aw ky bi"><span id="e5ea" class="jq jr hi kv b fi kz la l lb lc">Elements imgs = doc.getElementById("thumb").select("a");<br/>StringBuilder links = new StringBuilder();<br/>String prefix = "";<br/>for (Element item : imgs) {<br/>    links.append(prefix);<br/>    prefix = "|";<br/>    links.append(item.attr("href"));<br/>}</span></pre><blockquote class="lq lr ls"><p id="9b1e" class="iq ir jo is b it iu iv iw ix iy iz ja lt jc jd je lu jg jh ji lv jk jl jm jn hb bi translated">我总是在想，我是应该下载图片还是只获取它们的链接。我有一些想法，如果下载所有的图片，我需要巨大的存储空间。如果让一台服务器处理这么多任务(抓取数据，下载图像……)，这是一个非常糟糕的主意。所以我想首先我只是得到图片的链接，也许在未来，我会建立另一个服务器来处理下载图片。这是个更好的主意。</p></blockquote><h2 id="ce7c" class="jq jr hi bd js jt ju jv jw jx jy jz ka jb kb kc kd jf ke kf kg jj kh ki kj kk bi translated">好了，让我们看看抓取静态HTML代码的全部代码</h2><figure class="kq kr ks kt fd ij"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="5cb2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">嘣！我们有数据了！</p></div><div class="ab cl lw lx gp ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="hb hc hd he hf"><p id="aba7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我们有一项服务可以支持我们处理数据，那就太好了。我认为IBM Watson Discovery Service就是一个例子。我还写了一篇关于这项服务的文章。如果你想看一看，我邀请你查看我的文章<a class="ae jp" rel="noopener" href="/voice-tech-podcast/learn-ibm-watson-discovery-during-the-covid-19-pandemic-727e40fe14e1"><em class="jo">https://medium . com/voice-tech-podcast/learn-IBM-Watson-discovery-during-the-新冠肺炎-疫情-727e40fe14e1 </em> </a></p><p id="5e60" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">感谢</em>所有人的阅读！</p><p id="ecf2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">看看我的项目</em><a class="ae jp" href="https://gitlab.com/buingoctruong1508/houseforrent" rel="noopener ugc nofollow" target="_blank">https://gitlab.com/buingoctruong1508/houseforrent</a></p></div></div>    
</body>
</html>