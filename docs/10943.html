<html>
<head>
<title>Monitoring effectiveness of diabetic treatment using Control charts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用控制图监测糖尿病治疗的有效性</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/monitoring-effectiveness-of-diabetic-treatment-using-contol-charts-c35d011349d7?source=collection_archive---------21-----------------------#2020-11-09">https://medium.com/analytics-vidhya/monitoring-effectiveness-of-diabetic-treatment-using-contol-charts-c35d011349d7?source=collection_archive---------21-----------------------#2020-11-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="5265" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你在研究生阶段上过统计学课，很可能你的老师会从中心极限定理(CLT)开始这门课。在我们开始之前，回顾一下 CLT:</p><p id="fdcb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不管总体的分布如何，样本均值的抽样分布是正态的，前提是样本是用替换随机抽取的，样本量足够大(n≥30)。</p><p id="d224" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果总体呈正态分布，则样本均值的抽样分布即使在样本量较低的情况下也呈正态分布。</p><p id="8f94" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">随着样本量的增加，抽样分布的均值越来越接近真实均值(总体均值)。</p><p id="357e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">样本均值的采样分布的标准偏差与样本大小成反比，即随着样本大小的增加，采样分布的标准偏差减小。</p><p id="a461" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">嗯，这是教科书式的。为了帮助更好地理解，让我们从 Kaggle 中选取一个数据集，尝试并复制结果。我们选择了一个糖尿病患者数据集，并假设如下:</p><p id="af1f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">a.选择的数据集是人口。</p><p id="16aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">b.我们只关心糖尿病患者住院的天数。数据集中的所有其他字段/要素/特征与本文无关。</p><p id="5c79" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">c.实际上无法获得所有患者的住院细节。</p><p id="e29f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不多说了，让我们开始吧！</p><p id="b25d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">人口分布如下:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/66ee85f4f4cdfba22af82d52f008b254.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*MzWFXZMS1LlCzGd3GJsirw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">向右倾斜，意味着较少的病人花很多时间在医院里</figcaption></figure><p id="a2cb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">总体平均值为 4.4 天，标准差为 2.99 天。</p><blockquote class="jt ju jv"><p id="c3bf" class="if ig jw ih b ii ij ik il im in io ip jx ir is it jy iv iw ix jz iz ja jb jc hb bi translated">事实上，人们可能永远无法捕捉到人口数据。即使可以，也划算吗？</p></blockquote><p id="3b9b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果是这种情况，如何估计集中趋势(如均值)或扩散(如标准差)的度量？这就是中心极限定理派上用场的地方。在实施我们的项目之前，我们将逐点确认我们对 CLT 的理解。</p><p id="7bc1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第一点:正态分布</strong></p><p id="c856" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将从总体中随机抽取 1000 个样本，每个样本大小 n = 2，10，20，40。不同样本量的样本均值直方图如下:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ka"><img src="../Images/ddcd8a3124fa2189aaa0da6f50529607.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*8EVfy6NhWhnWm4qvK7hoYQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">随着样本量从 2 增加到 40，样本均值呈现正态分布</figcaption></figure><p id="a6d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以注意到，在每种情况下，不同大小的样本的平均值(红色实线)接近 4.4 天(群体平均值)。随着样本量的增加，样本均值的分布发生了变化。从直方图中可以看出，当 n = 40 时，分布是正常的。检验正态性的另一种图形方法是 Quanlite-Quantile 图或 Q-Q 图。</p><p id="83d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当 n = 40 时，1000 个样本的 Q-Q 图为:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kb"><img src="../Images/cbba6f9eb7163a0888f19c2aaab92819.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*NgIUNHXUR-dZgEjRpPFL1w.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">位于直线上的点表示分布是正态的</figcaption></figure><p id="29ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第二点:估计平均值趋向于总体平均值</strong></p><p id="e3fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">既然我们知道样本均值的抽样分布是正态的，那么让我们检查一下估计的均值与总体相比表现如何:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kc"><img src="../Images/864b321fd6cfa820e8752095abcd3a5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*EPWX9yC1GaPOOlSG4EsJhA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">红色虚线是人口平均值，实际上可能不知道</figcaption></figure><p id="636c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第三点:标准差与样本量成反比</strong></p><p id="25f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">按照 CLT 的说法，标准偏差随着样本量的增加而减小，让我们来验证一下:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kd"><img src="../Images/bd94928134b5b221295978aff17230c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*RmXEt5vo_XmlN-A91dJsQQ.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">分布范围随着样本量的增加而减小</figcaption></figure><p id="e0c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">根据 CLT 的说法:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ke"><img src="../Images/a488ac256ef671965663bb8a9327856f.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/format:webp/1*a5uF4b3kukUt2S02eBM0Bg.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">来源:维基百科</figcaption></figure><p id="32d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">根据上面的等式，2.99 / Sqrt(40) = 0.47，这与我们已经获得的结果一致。</p><p id="3aaa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好，同意！我们以前都知道，我们可以用这些信息做什么。</p><p id="e8e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">中心极限定理信息的应用:</strong></p><p id="2eff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，如果人口分布呈正态分布，可以使用如下累积概率分布图:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kf"><img src="../Images/ac0296cf4d4cc334b455175ff487fdb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*O24HX4MJ2Uuf56jUan28Hg.png"/></div></figure><p id="4138" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从上面的图中，还可以推断出几乎 100%的患者需要住院少于 12.5 天。</p><p id="da5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是，我们知道总体不是正态分布的。那么，我们还有什么？我们可以监控病人住院的平均天数，以保持治疗质量。什么？怎么会？</p><p id="095a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">控制图</strong></p><p id="3d15" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">控制图是一种有效的可视化工具，用于监控一致绩效所需的指标。在我们的案例中，病人住院的平均天数是对治疗效果的间接衡量。我们建立和使用它们的方法是建立一个无效假设和一个替代假设。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kg"><img src="../Images/fc64123ca0e2ea825b3aacafd8f60313.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/format:webp/1*ynb9DMyLRLRxeVOtA6OUBA.png"/></div></figure><p id="a6df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设您是一名医疗管理员，手头的任务是确保平均住院时间保持在现有持续时间或减少(这将是理想的)。无论是住院天数大于还是小于 4.4 天，我们都必须保持警惕。必须努力纠正效率低下的现象，或者继续努力。控制图可以帮助您监控相同的情况。下面是你如何建立它们:</p><ol class=""><li id="4ec5" class="kh ki hi ih b ii ij im in iq kj iu kk iy kl jc km kn ko kp bi translated">随机抽取亚组样本(我们案例中的患者)。我们选择的样本量为 10，并为我们的研究抽取了 40 个样本(在本例中是从总体中抽取)。</li><li id="ea15" class="kh ki hi ih b ii kq im kr iq ks iu kt iy ku jc km kn ko kp bi translated">然后，我们将计算平均值和标准偏差，用控制极限绘制相同的图。</li><li id="2d87" class="kh ki hi ih b ii kq im kr iq ks iu kt iy ku jc km kn ko kp bi translated">控制限值可以由过程设定，也可以由客户或行业指定。在我们的例子中，我们将使用过程控制极限。</li><li id="5c6d" class="kh ki hi ih b ii kq im kr iq ks iu kt iy ku jc km kn ko kp bi translated">将平均值和标准差相对于子组编号作图，以检查是否有任何模式或超出控制限值的点数。</li></ol><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kv"><img src="../Images/b49beafbec3ca6f0f468cd99e3a64e81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MVEnzmrqtPMjePunz7BMMQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">检查该图的不规则性，如趋势、高方差和超出控制极限的点</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kw"><img src="../Images/b15b936c3af63a95217ddef5c4524fbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EggXMfvM4PvxcbsTVhn-HA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">对于非常一致和稳定的过程，子组平均值位于第一个标准偏差内</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kx"><img src="../Images/0ccbeab9800e4e78dbd68e14676f2bc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*njXOroA0J-DLDaVnXVTijg.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">极少数点超出了控制极限，进行 t 检验也无妨</figcaption></figure><p id="4b15" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然所获得的子组样本平均值确实显示出变化，但似乎没有任何趋势。此外，40 个样本中有 2 个样本的平均值超出了规定的控制限值。对于我们来说，检查从该过程中获得的平均值是否具有统计显著性以便进一步研究是有意义的。</p><p id="d0d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">对统计显著性进行 t 检验</strong></p><p id="3a5a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以进行单样本双尾 t 检验，其中 t 统计量如下所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ky"><img src="../Images/b111fde25d09b2b494b30ba2e18c0457.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*t-wo8Wa3ve9sq3rNkhOyag.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">t 统计值为-0.48122</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kz"><img src="../Images/4a707edee355c976634a3d502275f8c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*8UUzqFzDLfhsEJDukKteKw.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">p 值为 0.3165 表明获得的平均值在 5%显著性水平上不具有统计学显著性</figcaption></figure><p id="7e1f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从上述结果中，我们未能拒绝零假设，并得出结论，糖尿病患者的治疗和以前一样有效。</p><p id="292a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">概要:</strong></p><blockquote class="jt ju jv"><p id="5f60" class="if ig jw ih b ii ij ik il im in io ip jx ir is it jy iv iw ix jz iz ja jb jc hb bi translated">我们使用一个数据集体验了中心极限定理，该数据集捕获了一个糖尿病患者住院的天数。</p><p id="2bca" class="if ig jw ih b ii ij ik il im in io ip jx ir is it jy iv iw ix jz iz ja jb jc hb bi translated">开发控制图，使用控制图监控平均天数是否保持不变。</p><p id="d555" class="if ig jw ih b ii ij ik il im in io ip jx ir is it jy iv iw ix jz iz ja jb jc hb bi translated">进行 t 检验，以检查获得的结果是否具有统计学意义，表明治疗的有效性。</p></blockquote><p id="1655" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以使用下面的链接访问该项目的源代码:</p><p id="3481" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae la" href="https://github.com/rohitTheSupplyChainGuy/The-one-with-the-master-stroke-theorem" rel="noopener ugc nofollow" target="_blank">https://github . com/rohitTheSupplyChainGuy/The-one with-The-master-stroke-theory</a></p></div></div>    
</body>
</html>