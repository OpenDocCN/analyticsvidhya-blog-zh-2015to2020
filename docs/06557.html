<html>
<head>
<title>Understanding RxJS Observables</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解RxJS可观测量</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/understanding-rxjs-observables-ad5b34d9607f?source=collection_archive---------3-----------------------#2020-05-26">https://medium.com/analytics-vidhya/understanding-rxjs-observables-ad5b34d9607f?source=collection_archive---------3-----------------------#2020-05-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="ee88" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">让我们看看RxJS的反应式编程</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/d2d9c332d6f5fb3da146012c4af3798d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GeVNGDXTBjt8M9sU"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">杰弗里·沃克曼在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="dd7f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这篇博文中，我将让你对RxJS可观测量有一个基本的了解，以及如何在Angular中使用它们。</p><p id="c6fc" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">首先，让我通过简化文章主题中的术语来减轻混淆。</p><h1 id="9a16" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">什么是反应式编程？</h1><p id="5a71" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">反应式编程意味着用异步数据流编程。流是按时间顺序排列的数据序列。可以用任何东西创建数据流，如变量、变量的变化、属性、用户输入、数据结构、点击事件、HTTP请求等。因此，使用反应式编程，您可以观察数据流，当您观察到发出一个值时，您可以做出相应的反应。</p><h2 id="66cd" class="lh kl hi bd km li lj lk kq ll lm ln ku jx lo lp kw kb lq lr ky kf ls lt la lu bi translated">关于数据流的更多信息。</h2><p id="bb12" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">流不仅仅发出上述的值。在时间线期间，当某个意外事件发生导致流结束时，流也会发出一个错误，或者当用户关闭窗口时，流可能会完成，从而发出一个完整的信号。所以我们可以捕捉这些流来根据它们执行函数。</p><h1 id="d252" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">RxJS是什么？</h1><p id="7bd0" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">RxJS是一个JavaScript库，允许我们使用反应式编程。RxJS使用可观察对象来编写异步代码，并提供处理可观察对象的函数。</p></div><div class="ab cl lv lw gp lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="hb hc hd he hf"><h1 id="39fc" class="kk kl hi bd km kn mc kp kq kr md kt ku io me ip kw ir mf is ky iu mg iv la lb bi translated">大话题:可观察的事物</h1><h2 id="015f" class="lh kl hi bd km li lj lk kq ll lm ln ku jx lo lp kw kb lq lr ky kf ls lt la lu bi translated">什么是可观察的？</h2><p id="4830" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">可观察对象是一个充当数据流包装器的函数。它们支持在应用程序内部传递消息。一个可观察的东西在被观察者认可之前是没有用的。观察者是一个消耗被观察对象发出的数据的物体。观察者不断从可观察对象接收数据值，直到可观察对象完成，或者观察者退订可观察对象。否则，观测者可以连续和异步地接收来自被观测者的数据值。因此我们可以执行各种操作，比如更新用户界面，或者传递JSON响应。</p><p id="aff0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">一个可观测的生命周期有4个阶段。</p><ol class=""><li id="d890" class="mh mi hi jq b jr js ju jv jx mj kb mk kf ml kj mm mn mo mp bi translated">创造</li><li id="07e6" class="mh mi hi jq b jr mq ju mr jx ms kb mt kf mu kj mm mn mo mp bi translated">签署</li><li id="c9c2" class="mh mi hi jq b jr mq ju mr jx ms kb mt kf mu kj mm mn mo mp bi translated">执行</li><li id="4af5" class="mh mi hi jq b jr mq ju mr jx ms kb mt kf mu kj mm mn mo mp bi translated">破坏</li></ol><h2 id="c729" class="lh kl hi bd km li lj lk kq ll lm ln ku jx lo lp kw kb lq lr ky kf ls lt la lu bi translated">让我们用角度来理解这4个阶段。</h2><p id="fed5" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">您需要导入RxJS库来创建一个可观察对象。</p><pre class="iy iz ja jb fd mv mw mx my aw mz bi"><span id="44fc" class="lh kl hi mw b fi na nb l nc nd">import { Component } from '@angular/core';<br/>import { Observable } from 'rxjs';</span><span id="c06d" class="lh kl hi mw b fi ne nb l nc nd">@Component({<br/>   selector: 'app-root',<br/>   templateUrl: './app.component.html',<br/>   styleUrls: ['./app.component.scss']<br/>})</span><span id="a079" class="lh kl hi mw b fi ne nb l nc nd">export class AppComponent {<br/>   title = 'observable';</span><span id="3f76" class="lh kl hi mw b fi ne nb l nc nd">ngOnInit() {<br/>   var observable = Observable.create()<br/>}<br/>}</span></pre><p id="4327" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这就是你如何创造一个可观察的。但是在你订阅之前，观察是没有用的。下面的代码显示了如何订阅一个可观察的。</p><pre class="iy iz ja jb fd mv mw mx my aw mz bi"><span id="d5ec" class="lh kl hi mw b fi na nb l nc nd">import { Component } from '@angular/core';<br/>import { Observable } from 'rxjs';</span><span id="c5a1" class="lh kl hi mw b fi ne nb l nc nd">@Component({<br/>selector: 'app-root',<br/>templateUrl: './app.component.html',<br/>styleUrls: ['./app.component.scss']<br/>})</span><span id="d6b1" class="lh kl hi mw b fi ne nb l nc nd">export class AppComponent {<br/>   title = 'observable';</span><span id="9047" class="lh kl hi mw b fi ne nb l nc nd">ngOnInit() {<br/>   var observable = Observable.create((observer: any) =&gt; {<br/>      observer.next('Hello world!')<br/>   })</span><span id="cd85" class="lh kl hi mw b fi ne nb l nc nd">observable.subscribe(function showMessage(msg: any) {<br/>      console.log(msg)<br/>   })<br/>}<br/>}</span></pre><p id="21ac" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">当您检查控制台时，可以看到observer.next()值。</p><p id="a8a1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在让我们尝试执行可观测量。</p><pre class="iy iz ja jb fd mv mw mx my aw mz bi"><span id="1c35" class="lh kl hi mw b fi na nb l nc nd">import { Component } from '@angular/core';<br/>import { Observable } from 'rxjs';</span><span id="11e4" class="lh kl hi mw b fi ne nb l nc nd">@Component({<br/>   selector: 'app-root',<br/>   templateUrl: './app.component.html',<br/>   styleUrls: ['./app.component.scss']<br/>})</span><span id="58ee" class="lh kl hi mw b fi ne nb l nc nd">export class AppComponent {<br/>   title = 'observable';</span><span id="34c4" class="lh kl hi mw b fi ne nb l nc nd">ngOnInit() {<br/>   var observable = Observable.create((observer: any) =&gt; {<br/>      observer.next('A')<br/>      observer.next('B')<br/>      observer.error('Error occured.')<br/>      observer.complete('Data stream is over.')<br/>      observer.next('C')<br/>   })</span><span id="b257" class="lh kl hi mw b fi ne nb l nc nd">observable.subscribe(function showMessage(msg: any) {<br/>      console.log(msg)<br/>   })<br/>}<br/>}</span></pre><p id="9e41" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果出现错误或完成，它将自动停止执行。您只能在控制台上看到“A”和“B”字样。</p><p id="d889" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们尝试在setInterval()方法的帮助下实现异步。</p><pre class="iy iz ja jb fd mv mw mx my aw mz bi"><span id="d3a6" class="lh kl hi mw b fi na nb l nc nd">import { Component } from '@angular/core';<br/>import { Observable } from 'rxjs';</span><span id="b496" class="lh kl hi mw b fi ne nb l nc nd">@Component({<br/>   selector: 'app-root',<br/>   templateUrl: './app.component.html',<br/>   styleUrls: ['./app.component.scss']<br/>})</span><span id="3243" class="lh kl hi mw b fi ne nb l nc nd">export class AppComponent {<br/>   title = 'observable';</span><span id="b6b3" class="lh kl hi mw b fi ne nb l nc nd">ngOnInit() {<br/>   var observable = Observable.create((observer: any) =&gt; {<br/>      observer.next('A')<br/>      observer.next('B')</span><span id="1f03" class="lh kl hi mw b fi ne nb l nc nd">setInterval(() =&gt; {<br/>         observer.next("This is a random message.")<br/>      }, 2000)</span><span id="788c" class="lh kl hi mw b fi ne nb l nc nd">observer.next('C')<br/>      observer.next('D')</span><span id="7df2" class="lh kl hi mw b fi ne nb l nc nd">setInterval(() =&gt; {<br/>         observer.error("Error occured.")<br/>      }, 4001)</span><span id="eb3f" class="lh kl hi mw b fi ne nb l nc nd">observer.next('E')<br/>   })</span><span id="fb7f" class="lh kl hi mw b fi ne nb l nc nd">observable.subscribe(function showMessage(msg: any) {<br/>      console.log(msg)<br/>   })<br/>}<br/>}</span></pre><p id="bd12" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您的控制台将如下所示。在这里，值的显示是异步完成的。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nf"><img src="../Images/49b856de5141912a2dbcdfdf35d89fed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TdGOox_21vfieUeqIMgQtQ.png"/></div></div></figure><p id="31cb" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">销毁一个可观察对象意味着通过取消订阅将它从DOM中移除。通常RxJS通过在错误或完成发生后取消订阅来销毁一个可观察对象。</p><h2 id="c709" class="lh kl hi bd km li lj lk kq ll lm ln ku jx lo lp kw kb lq lr ky kf ls lt la lu bi translated">可观测量的重要性</h2><p id="71ae" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">可观者懒惰。这意味着如果没有订阅，它将不会发出数据。此外，使用observables处理具有多个数据值的异步数据发送更容易。</p></div><div class="ab cl lv lw gp lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="hb hc hd he hf"><p id="cc1b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这是一个关于RxJS角度可观测量的基本介绍，希望它能帮助你理解什么是可观测量。</p><p id="c8b3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">编码快乐！</p></div></div>    
</body>
</html>