<html>
<head>
<title>SQLite Database “CRUD Operations” using Python.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python的SQLite数据库“CRUD操作”。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/sqlite-database-crud-operations-using-python-3774929eb799?source=collection_archive---------3-----------------------#2020-07-24">https://medium.com/analytics-vidhya/sqlite-database-crud-operations-using-python-3774929eb799?source=collection_archive---------3-----------------------#2020-07-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/f581dad96479b96e8f1f265250fc1de5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i-AIdhhaMz1qL498yKRzyg.png"/></div></div></figure><p id="ace2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">写这篇文章的目的是为了对后端开发好奇的初学者，或者想用服务器端编程语言学习数据库技术的前端开发人员。</p><p id="47f4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">众所周知，像python、java和其他许多服务器端语言对于后台开发人员来说是不够的，甚至后端开发人员也需要更多的数据库技术知识。</p><p id="2c19" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以我们先从python的SQLite数据库基础说起。</p><p id="f155" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我选择SQLite数据库只是一个选项，人们可以将相同的知识应用于任何其他数据库，如Mysql和Oracle或任何其他数据库。数据库技术最好的部分是所有的数据库都非常相似，因为SQL概念接受很少的新数据库。</p><blockquote class="jo jp jq"><p id="0461" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated">我们没有使用任何python包来简化我们学习这四个基本操作的工作。</p></blockquote><h2 id="e080" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated"><strong class="ak">积垢</strong></h2><ul class=""><li id="6436" class="kq kr hi is b it ks ix kt jb ku jf kv jj kw jn kx ky kz la bi translated">c:创建</li><li id="4bc0" class="kq kr hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">r:阅读</li><li id="8d8d" class="kq kr hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">u:更新</li><li id="7af0" class="kq kr hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">删除</li></ul><h2 id="fa7d" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated">创建:</h2><p id="69e3" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb lg jd je jf lh jh ji jj li jl jm jn hb bi translated">在表中插入或创建新记录。因此，让我们在Sqlite数据库中创建一个示例表。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="f190" class="jv jw hi lo b fi ls lt l lu lv"># Creating table into database!!!</span><span id="10b3" class="jv jw hi lo b fi lw lt l lu lv">import sqlite3</span><span id="aaeb" class="jv jw hi lo b fi lw lt l lu lv"># Connect to sqlite database<br/>conn = sqlite3.connect(<strong class="lo hj">'students.db'</strong>)<br/># cursor object<br/>cursor = conn.cursor()<br/># drop query<br/>cursor.execute(<strong class="lo hj">"DROP TABLE IF EXISTS STUDENT"</strong>)</span><span id="cce0" class="jv jw hi lo b fi lw lt l lu lv"># create query<br/>query = <strong class="lo hj">"""CREATE TABLE STUDENT(<br/>        ID INT PRIMARY KEY NOT NULL,<br/>        NAME CHAR(20) NOT NULL, <br/>        ROLL CHAR(20), <br/>        ADDRESS CHAR(50), <br/>        CLASS CHAR(20) )"""<br/></strong>cursor.execute(query)</span><span id="0662" class="jv jw hi lo b fi lw lt l lu lv"># commit and close<br/>conn.commit()<br/>conn.close()</span></pre><p id="4dbf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"><em class="jr">conn = sqlite3 . connect(' students . DB ')</em></strong>是连接方法，对于SQLite DB来说非常简单，但对于不同的数据库会有所不同。</p><p id="4812" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="jr"> cursor.execute() </em> </strong>方法执行sqlite查询。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="2f0e" class="jv jw hi lo b fi ls lt l lu lv"><strong class="lo hj">"""<br/>CREATE TABLE table_name (<br/>   column name datatype properity,<br/>   ...<br/>   ...<br/>);<br/>"""</strong></span></pre><p id="d95b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以上语法可以与查询进行映射，创建查询有三个主要属性"<strong class="is hj">列名数据类型属性</strong>"。</p><p id="f9c4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在每个数据库操作之后，我们应该添加一个commit和close DB操作。</p><h2 id="94d5" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated">插入:</h2><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="7aee" class="jv jw hi lo b fi ls lt l lu lv">import sqlite3</span><span id="5f7f" class="jv jw hi lo b fi lw lt l lu lv">conn = sqlite3.connect(<strong class="lo hj">'students.db'</strong>)</span><span id="36e7" class="jv jw hi lo b fi lw lt l lu lv">conn.execute(<strong class="lo hj">"INSERT INTO STUDENT (ID,NAME,ROLL,ADDRESS,CLASS) "<br/>             "VALUES (1, 'John', '001', 'Bangalore', '10th')"</strong>)</span><span id="2e5e" class="jv jw hi lo b fi lw lt l lu lv">conn.execute(<strong class="lo hj">"INSERT INTO STUDENT (ID,NAME,ROLL,ADDRESS,CLASS) "<br/>             "VALUES (2, 'Naren', '002', 'Hyd', '12th')"</strong>)</span><span id="535b" class="jv jw hi lo b fi lw lt l lu lv">conn.commit()<br/>conn.close()</span></pre><p id="a03d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上面的查询语法是硬编码数据插入，但是当我们有来自外部输入的数据时，我们可以这样修改语法。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="4f0c" class="jv jw hi lo b fi ls lt l lu lv">query = (<strong class="lo hj">'INSERT INTO STUDENT (ID,NAME,ROLL,ADDRESS,CLASS) '<br/>         'VALUES (:ID, :NAME, :ROLL, :ADDRESS, :CLASS);'</strong>)</span><span id="7216" class="jv jw hi lo b fi lw lt l lu lv">params = {<br/>        <strong class="lo hj">'ID'</strong>: 3,<br/>        <strong class="lo hj">'NAME'</strong>: <strong class="lo hj">'Jax'</strong>,<br/>        <strong class="lo hj">'ROLL'</strong>: <strong class="lo hj">'003'</strong>,<br/>        <strong class="lo hj">'ADDRESS'</strong>: <strong class="lo hj">'Delhi'</strong>,<br/>        <strong class="lo hj">'CLASS'</strong>: <strong class="lo hj">'9th'<br/>    </strong>}</span><span id="aefc" class="jv jw hi lo b fi lw lt l lu lv">conn.execute(query, params)</span></pre><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/139567e96413a79a2507921649c9453a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vN4qWhdroDnHFgA406Z41w.png"/></div></div></figure><p id="3b9d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae ly" href="https://sqliteonline.com/" rel="noopener ugc nofollow" target="_blank">https://sqliteonline.com/</a>是一个很好的在线平台，可以用来执行数据库操作，不需要安装任何额外的软件。</p><h2 id="bc67" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated">阅读:</h2><p id="c737" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb lg jd je jf lh jh ji jj li jl jm jn hb bi translated">这是一个重要的操作，因为这属于选择查询，在从数据库获取记录时有更多的真实性。对于多表数据库，有时这种操作会非常棘手，这里有几个选择操作的例子。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="7595" class="jv jw hi lo b fi ls lt l lu lv">import sqlite3</span><span id="c1a5" class="jv jw hi lo b fi lw lt l lu lv">conn = sqlite3.connect(<strong class="lo hj">'students.db'</strong>)<br/>cursor = conn.execute(<strong class="lo hj">"SELECT * from STUDENT"</strong>)<br/>print(cursor.fetchall())</span><span id="6fc8" class="jv jw hi lo b fi lw lt l lu lv">conn.close()</span></pre><p id="506b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">获取所有数据的最简单方法是“从表名中选择”</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="2284" class="jv jw hi lo b fi ls lt l lu lv"><strong class="lo hj">SELECT column1, column2, columnN FROM table_name;</strong></span></pre><p id="dfb9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以只提到那些需要的列名，如果不需要提取所有数据，那么提到列名总是一个好的做法。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="f679" class="jv jw hi lo b fi ls lt l lu lv"><strong class="lo hj">SELECT column1, column2, columnN FROM table_name WHERE column_name = value;</strong></span></pre><p id="ad3a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">where子句返回记录将与值匹配的特定行。</p><h2 id="0701" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated">更新:</h2><p id="f6bf" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb lg jd je jf lh jh ji jj li jl jm jn hb bi translated">更新是改变现有的记录，更新的简单规则是使用最佳方法到达记录并改变它。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="0b6f" class="jv jw hi lo b fi ls lt l lu lv">import sqlite3</span><span id="7d3a" class="jv jw hi lo b fi lw lt l lu lv">conn = sqlite3.connect(<strong class="lo hj">'students.db'</strong>)<br/>conn.execute(<strong class="lo hj">"UPDATE STUDENT set ROLL = 005 where ID = 1"</strong>)<br/>conn.commit()</span><span id="ec6f" class="jv jw hi lo b fi lw lt l lu lv">cursor = conn.execute(<strong class="lo hj">"SELECT * from STUDENT"</strong>)<br/>print(cursor.fetchall())</span><span id="21c9" class="jv jw hi lo b fi lw lt l lu lv">conn.close()</span></pre><blockquote class="jo jp jq"><p id="d8a4" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated">注意:为什么我说使用最佳方法，因为不仅在更新的情况下，在所有的数据库操作中，我们应该避免读取或获取不必要的记录，这将节省查询时间，并将提高任何应用程序的整体系统性能。</p></blockquote><h2 id="471d" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated">删除:</h2><p id="6e0e" class="pw-post-body-paragraph iq ir hi is b it ks iv iw ix kt iz ja jb lg jd je jf lh jh ji jj li jl jm jn hb bi translated">从表中删除任何记录都是一个删除操作，下面的代码显示了删除查询示例。</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="3698" class="jv jw hi lo b fi ls lt l lu lv">import sqlite3</span><span id="bae6" class="jv jw hi lo b fi lw lt l lu lv">conn = sqlite3.connect(<strong class="lo hj">'students.db'</strong>)</span><span id="2eec" class="jv jw hi lo b fi lw lt l lu lv">conn.execute(<strong class="lo hj">"DELETE from STUDENT where ID = 2;"</strong>)<br/>conn.commit()</span><span id="e470" class="jv jw hi lo b fi lw lt l lu lv">cursor = conn.execute(<strong class="lo hj">"SELECT * from STUDENT"</strong>)<br/>print(cursor.fetchall())</span><span id="0e12" class="jv jw hi lo b fi lw lt l lu lv">conn.close()</span></pre><p id="c241" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些是使用python对SQLite数据库进行的基本CRUD操作。</p><p id="0f40" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">源代码可以在GitHub上找到<a class="ae ly" href="https://gitlab.com/NarendraH/narendrablogssource/-/tree/master/Python_Sqlite_CRUD_Operations" rel="noopener ugc nofollow" target="_blank">点击这里。</a></p><blockquote class="jo jp jq"><p id="c13b" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated">直接开始开发应用程序总是好的，我们应该学习这些应用程序所需的基础主干技术。</p><p id="1cdf" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated">如果您对CRUD操作的数据库操作有基本的了解，那么使用任何python SQL库都可以轻松实现。</p></blockquote><p id="4f7a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">谢谢大家！！！快乐编码。</p></div></div>    
</body>
</html>