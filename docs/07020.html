<html>
<head>
<title>Python Virtual Environments</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python虚拟环境</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/isolated-virtual-python-environments-558916521395?source=collection_archive---------28-----------------------#2020-06-10">https://medium.com/analytics-vidhya/isolated-virtual-python-environments-558916521395?source=collection_archive---------28-----------------------#2020-06-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="4a73" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">把你的代码放在温室里</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/7009007ae2be50f97fad001141fe6baa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WBv-0RXUQkeGnTFC"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">照片由<a class="ae jn" href="https://unsplash.com/@zanda_photography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> www.zanda .摄影</a>在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><p id="3d08" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">python环境可以比作温室。</p><p id="6f2c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你把一株植物从你的院子转移到一个合适的温室，植物的基因组不会改变，但它的行为会改变。它将在最佳条件下生长，不受当前天气的影响。</p><blockquote class="kk"><p id="86d0" class="kl km hi bd kn ko kp kq kr ks kt kj dx translated">温室里的植物不受外部天气条件的影响。</p></blockquote><p id="99f9" class="pw-post-body-paragraph jo jp hi jq b jr ku ij jt ju kv im jw jx kw jz ka kb kx kd ke kf ky kh ki kj hb bi translated">与python项目是一样的。如果我们在一个环境中运行项目，我们只是使用所需的依赖项，它的行为不会随着时间而改变。如果我们对每个项目都使用默认的python环境，我们最终可能会删除或更新依赖项，这可能会影响其中一些项目的行为。此外，通过使用专用于项目的python环境，在其他机器上设置项目变得更加容易。</p><blockquote class="kk"><p id="0096" class="kl km hi bd kn ko kp kq kr ks kt kj dx translated">专用和隔离环境中的项目不受默认环境中的变化的影响。</p></blockquote><p id="9a79" class="pw-post-body-paragraph jo jp hi jq b jr ku ij jt ju kv im jw jx kw jz ka kb kx kd ke kf ky kh ki kj hb bi translated">这么说吧，让我们避免风暴造成的损害，并开始将我们的代码与python环境隔离开来。</p><p id="3309" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">为此，我们将使用<a class="ae jn" href="https://virtualenv.pypa.io/en/latest/index.html" rel="noopener ugc nofollow" target="_blank"> virtualenv </a>创建并管理一个名为<strong class="jq hj">温室</strong>的环境。</p><p id="be2e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">要在您的计算机上安装virtualenv manager，请在命令行中键入以下指令:</p><p id="15f1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">注意:下面的bash命令与Linux和MacOS兼容。</p><pre class="iy iz ja jb fd kz la lb lc aw ld bi"><span id="35a3" class="le lf hi la b fi lg lh l li lj">$ python -m pip install --user virtualenv</span></pre><p id="19ff" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后，当您成功安装virtualenv时，您就可以开始创建python虚拟环境了。为了创建我们的温室环境，我们需要编写以下命令:</p><pre class="iy iz ja jb fd kz la lb lc aw ld bi"><span id="5b2f" class="le lf hi la b fi lg lh l li lj">$ python -m venv greenhouse</span></pre><p id="5c69" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">将在您键入命令的目录中创建环境。</p><p id="edd7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果您想在您的环境中开始工作，从命令行，您需要激活它。</p><pre class="iy iz ja jb fd kz la lb lc aw ld bi"><span id="0411" class="le lf hi la b fi lg lh l li lj">$ source greenhouse/bin/activate</span></pre><p id="b70a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">请注意，如果您将环境名称视为命令的前缀，则您只是在温室环境中工作，如下所示:</p><pre class="iy iz ja jb fd kz la lb lc aw ld bi"><span id="eaf4" class="le lf hi la b fi lg lh l li lj">(greenhouse) $ &lt;your command here&gt;</span></pre><p id="dc8b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果您想检查当前环境的位置，请在终端上写下以下内容:</p><pre class="iy iz ja jb fd kz la lb lc aw ld bi"><span id="fd4b" class="le lf hi la b fi lg lh l li lj">(greenhouse) $ which python </span></pre><p id="ba31" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在，您可以开始在这个环境中安装依赖项和/或运行python代码，并从命令行使用它。</p><p id="97fa" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">要在此环境中安装依赖项，请执行以下操作:</p><pre class="iy iz ja jb fd kz la lb lc aw ld bi"><span id="bc90" class="le lf hi la b fi lg lh l li lj">(greenhouse) $ pip install &lt;package name&gt;</span></pre><p id="785c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在您的专用环境中安装了项目所需的所有依赖项之后，您可以生成一个需求文件。该文件列出了运行项目所需的所有依赖项。</p><pre class="iy iz ja jb fd kz la lb lc aw ld bi"><span id="ceaa" class="le lf hi la b fi lg lh l li lj">(greenhouse) $ pip freeze &gt; requirements.txt</span></pre><p id="259c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在当前目录下创建了requirements.txt文件。现在，您可以将这个文件与您的项目共享，这样其他人就可以轻松地在他们的机器上运行您的代码。</p><p id="7191" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">另一方面，如果与您共享一个代码，您也可以创建一个专用于该项目的新环境，并从一个需求文件中安装所有需要的依赖项，方法是:</p><pre class="iy iz ja jb fd kz la lb lc aw ld bi"><span id="5c72" class="le lf hi la b fi lg lh l li lj">(greenhouse) $ pip install -r requirements.txt</span></pre><p id="041c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">当您停止使用温室环境的项目时，您应该停用它。为此，请键入以下命令:</p><pre class="iy iz ja jb fd kz la lb lc aw ld bi"><span id="8c2f" class="le lf hi la b fi lg lh l li lj">(greenhouse) $ deactivate</span></pre><p id="2c26" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">最后但同样重要的是，我们学习了如何在命令行中激活环境，但是在开发阶段，我们需要在IDE上激活它。</p><p id="ae6e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">例如，如果您正在使用<a class="ae jn" href="https://www.jetbrains.com/pycharm/" rel="noopener ugc nofollow" target="_blank"> pycharm </a>，在顶栏上，选择<em class="lk">文件</em>，然后选择<em class="lk">设置</em>。转到<em class="lk">项目</em>，选择<em class="lk">项目解释器</em>。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ll"><img src="../Images/05e9941ea2d68520272886862d4cf386.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G0rgz2PB9ThozPMcoA_NTw.png"/></div></div></figure><p id="e118" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">选择左侧的图标。将会打开一个新窗口，如下所示。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lm"><img src="../Images/3ac874b6a35770579a7411ad83e8148b.png" data-original-src="https://miro.medium.com/v2/resize:fit:634/format:webp/1*5yBWLh5RAutCU_8_MaM81w.png"/></div></figure><p id="4fc2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在该窗口中，搜索您存储虚拟环境的位置，并在<em class="lk"> bin </em>文件夹中选择python文件。</p><p id="7d90" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">点击<em class="lk">确定</em>，然后应用新的设置。完成这些后，温室环境现在在当前的pycharm项目中是活跃的。</p><p id="0eb8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果您正在使用jupyter notebook，为了使用您的环境在笔记本上工作，您可以在激活您的环境的情况下从命令行启动Jupyter Notebook。</p><pre class="iy iz ja jb fd kz la lb lc aw ld bi"><span id="0b44" class="le lf hi la b fi lg lh l li lj">(greenhouse) $ jupyter-notebook</span></pre><p id="0a8f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你打开笔记本，现在你正在温室环境中工作。</p><p id="f2a4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">总之，在本文中，您了解了为什么应该使用环境，如何从命令行创建和管理python环境，以及如何在pycharm和jupyter notebook上激活它，这样您在开发代码时也可以激活它。</p><p id="9170" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我希望你喜欢这些内容。下次学习冒险时再见。</p></div></div>    
</body>
</html>