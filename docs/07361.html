<html>
<head>
<title>A Beginner’s Guide to learn web scraping and data visualization with python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用python学习web抓取和数据可视化的初学者指南</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/a-beginners-guide-to-learn-web-scraping-with-python-and-data-visualization-5c7c5329a95e?source=collection_archive---------4-----------------------#2020-06-23">https://medium.com/analytics-vidhya/a-beginners-guide-to-learn-web-scraping-with-python-and-data-visualization-5c7c5329a95e?source=collection_archive---------4-----------------------#2020-06-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9458" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本教程中，我使用了Beautifulsoup和texttable等库</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/93fd17dbc08d183ab4777dd2fce0ec57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ckkRoBZ3D_5QMYsW"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">尼古拉斯·皮卡德在<a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h2 id="6a1e" class="ju jv hi bd jw jx jy jz ka kb kc kd ke iq kf kg kh iu ki kj kk iy kl km kn ko bi translated">为什么是网络抓取？</h2><p id="7dc8" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">Web抓取用于从网站上收集大量信息进行分析。</p><p id="5b56" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">想象一下，你必须从网站上获取大量的数据，并且你想尽可能快地完成它。如果不手动访问每个网站并获取数据，你会怎么做？嗯，“网络抓取”就是答案。网络抓取只是使这项工作更容易和更快。</p><h2 id="ad9e" class="ju jv hi bd jw jx jy jz ka kb kc kd ke iq kf kg kh iu ki kj kk iy kl km kn ko bi translated">用于网页抓取的库</h2><ul class=""><li id="6855" class="ku kv hi ih b ii kp im kq iq kw iu kx iy ky jc kz la lb lc bi translated"><strong class="ih hj">Beautiful Soup</strong>:Beautiful Soup是一个解析HTML和XML文档的Python包。它创建有助于轻松提取数据的解析树。</li><li id="8ddf" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">Pandas是一个用于数据操作和分析的库。它用于提取数据并以所需的格式存储数据。</li></ul><h2 id="b22d" class="ju jv hi bd jw jx jy jz ka kb kc kd ke iq kf kg kh iu ki kj kk iy kl km kn ko bi translated"><strong class="ak">用于数据可视化的库</strong></h2><ul class=""><li id="1ea7" class="ku kv hi ih b ii kp im kq iq kw iu kx iy ky jc kz la lb lc bi translated">Matplotlib</li><li id="5562" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">海生的</li></ul><p id="8c40" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本教程中，我将使用<a class="ae jt" href="https://www.worldometers.info/coronavirus/countries-where-coronavirus-has-spread" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">world ometers</strong></a><strong class="ih hj"/>来提取COVID案例的数量，然后我们将进行数据分析并创建一些可视化。</p><p id="7f10" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">我们开始</strong></p><pre class="je jf jg jh fd li lj lk ll aw lm bi"><span id="5c1c" class="ju jv hi lj b fi ln lo l lp lq"># importing modules <br/>import requests <br/>from bs4 import BeautifulSoup <br/>  <br/># URL for scrapping data <br/>url = '<a class="ae jt" href="https://www.worldometers.info/coronavirus/countries-where-coronavirus-has-spread/'" rel="noopener ugc nofollow" target="_blank">https://www.worldometers.info/coronavirus/countries-where-coronavirus-has-spread/'</a><br/>  <br/># get URL html <br/>page = requests.get(url) <br/>soup = BeautifulSoup(page.text, 'html.parser') <br/>  <br/>data = [] <br/>  <br/># soup.find_all('td') will scrape every element in the url's table <br/>data_iterator = iter(soup.find_all('td'))  <br/># data_iterator is the iterator of the table <br/>  <br/># This loop will keep repeating till there is data available in the iterator <br/>while True: <br/>    try: <br/>        country = next(data_iterator).text <br/>        confirmed = next(data_iterator).text <br/>        deaths = next(data_iterator).text <br/>        continent = next(data_iterator).text <br/>  <br/>        # For 'confirmed' and 'deaths', make sure to remove the commas and convert to int <br/>        data.append(( <br/>            country, <br/>            (confirmed.replace(', ', '')), <br/>            (deaths.replace(',', '')), <br/>            continent<br/>        )) <br/>    # StopIteration error is raised when there are no more elements left to iterate through <br/>    except StopIteration: <br/>        break</span></pre><p id="5ece" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行上述代码后，您可以从网站中提取数据，现在我们将创建一个熊猫数据框以供进一步分析。</p><pre class="je jf jg jh fd li lj lk ll aw lm bi"><span id="a8e3" class="ju jv hi lj b fi ln lo l lp lq"># Sort the data by the number of confirmed cases <br/>data.sort(key = lambda row: row[1], reverse = True)</span><span id="48c8" class="ju jv hi lj b fi lr lo l lp lq">import pandas as pd<br/>dff=pd.DataFrame(data,columns=['country','Number of cases','Deaths','Continment'],dtype=float)<br/>dff.head()</span><span id="4404" class="ju jv hi lj b fi lr lo l lp lq">dff['Number of cases'] = [x.replace(',', '') for x in dff['Number of cases']]<br/>dff['Number of cases'] = pd.to_numeric(dff['Number of cases'])</span><span id="c2c0" class="ju jv hi lj b fi lr lo l lp lq">dff</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ls"><img src="../Images/925ffda2163b8e0fea30989db09efaf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*FXF6VNd0h2xJJPLuoUtdjw.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">数据帧</figcaption></figure><pre class="je jf jg jh fd li lj lk ll aw lm bi"><span id="47aa" class="ju jv hi lj b fi ln lo l lp lq">dff.info()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lt"><img src="../Images/526a3b480c7c54d337791c7683ed0072.png" data-original-src="https://miro.medium.com/v2/resize:fit:718/format:webp/1*YxomJ1ee4pRLQjVHQQpqEQ.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">数据类型</figcaption></figure><p id="38d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建新列Death_rate:</p><pre class="je jf jg jh fd li lj lk ll aw lm bi"><span id="3d20" class="ju jv hi lj b fi ln lo l lp lq">dfff=dff.sort_values(by='Number of cases',ascending=False)</span><span id="b12b" class="ju jv hi lj b fi lr lo l lp lq">dfff['Death_rate']= (dfff['Deaths']/dfff['Number of cases'])*100<br/>dfff.head()</span></pre><h2 id="ac16" class="ju jv hi bd jw jx jy jz ka kb kc kd ke iq kf kg kh iu ki kj kk iy kl km kn ko bi translated">数据可视化</h2><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lu"><img src="../Images/b4f9bc4ad09c9d76075d94e93126e76d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UOGvlt-UfM-PPcGY"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">弗兰基·查马基在<a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><pre class="je jf jg jh fd li lj lk ll aw lm bi"><span id="22d4" class="ju jv hi lj b fi ln lo l lp lq">import seaborn as sns<br/>import matplotlib.pyplot as plt</span><span id="4285" class="ju jv hi lj b fi lr lo l lp lq">from pylab import rcParams<br/>rcParams['figure.figsize'] = 15, 10</span><span id="7880" class="ju jv hi lj b fi lr lo l lp lq">from matplotlib.pyplot import figure<br/>figure(num=None, figsize=(20, 6), dpi=80, facecolor='w', edgecolor='k')<br/>sns.pairplot(dfff,hue='Continment')</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lv"><img src="../Images/fa49bd10edd9a4706844ba42415041dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NCyusSvbUxt514vgZyQocw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">配对图</figcaption></figure><pre class="je jf jg jh fd li lj lk ll aw lm bi"><span id="5ab6" class="ju jv hi lj b fi ln lo l lp lq">sns.barplot(x='country',y='Number of cases',data=dfff.head(10))</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lw"><img src="../Images/7acd426982d228260b97faa444517eb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4SmSO8-7qkppDPjWWayyVw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">条形图</figcaption></figure><pre class="je jf jg jh fd li lj lk ll aw lm bi"><span id="f1a6" class="ju jv hi lj b fi ln lo l lp lq">sns.regplot(x='Deaths',y='Number of cases',data=dfff)</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lx"><img src="../Images/da8286fd24a6bc62ce028ea0451e8ffa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-W_9ZSLXt2eCC9TaAZPtyw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">Regplot</figcaption></figure><pre class="je jf jg jh fd li lj lk ll aw lm bi"><span id="021b" class="ju jv hi lj b fi ln lo l lp lq">sns.scatterplot(x="Number of cases", y="Deaths",hue="Continment",data=dfff)</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ly"><img src="../Images/72197bf160ae3f614259f35ab5784c01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*obkb9JkwkkO8r7ZXn2WccQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">散点图</figcaption></figure><pre class="je jf jg jh fd li lj lk ll aw lm bi"><span id="2bc5" class="ju jv hi lj b fi ln lo l lp lq">sns.boxplot(x='country',y='Deaths',data=dfff.head(10),hue='Continment')</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lz"><img src="../Images/6dbdec858b9afd56b1f91493daac36c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4queysJBX6RkFm_iFkZwiw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">箱形图</figcaption></figure><pre class="je jf jg jh fd li lj lk ll aw lm bi"><span id="fbcf" class="ju jv hi lj b fi ln lo l lp lq">dfg=dfff.groupby(by='Continment',as_index=False).agg({'Number of cases':sum,'Deaths':sum})<br/>dfgg=dfg[1:]</span><span id="7c70" class="ju jv hi lj b fi lr lo l lp lq">df1=dfgg.sort_values(by='Number of cases',ascending=False)</span><span id="2cb6" class="ju jv hi lj b fi lr lo l lp lq">df1['Death_rate']=(df1['Deaths']/df1['Number of cases'])*100</span><span id="46bd" class="ju jv hi lj b fi lr lo l lp lq">df1.sort_values(by='Death_rate',ascending=False)</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ma"><img src="../Images/ec9af9d34a879721d70e95f6f2f5edba.png" data-original-src="https://miro.medium.com/v2/resize:fit:802/format:webp/1*9DciGuu8FrIicYq3FqyNjQ.png"/></div></figure><pre class="je jf jg jh fd li lj lk ll aw lm bi"><span id="4d62" class="ju jv hi lj b fi ln lo l lp lq">sns.barplot(x='Continment',y='Death_rate',data=df1.sort_values(by='Death_rate',ascending=False))</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mb"><img src="../Images/164701ac917893a612ff22735b58b8a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4B7wsxLb4Q_ksa16h3eJNA.png"/></div></div></figure><pre class="je jf jg jh fd li lj lk ll aw lm bi"><span id="86ef" class="ju jv hi lj b fi ln lo l lp lq">import texttable as tt</span><span id="f757" class="ju jv hi lj b fi lr lo l lp lq"># create texttable object</span><span id="bc7e" class="ju jv hi lj b fi lr lo l lp lq">table = tt.Texttable() <br/>table.add_rows([(None, None, None, None)] + data)  # Add an empty row at the beginning for the headers <br/>table.set_cols_align(('c', 'c', 'c', 'c'))  # 'l' denotes left, 'c' denotes center, and 'r' denotes right <br/>table.header((' Country ', ' Number of cases ', ' Deaths ', ' Continent ')) <br/>  <br/>print(table.draw())</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mc"><img src="../Images/a725282fd25e46abb589898b9cd451e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/format:webp/1*bU20cY5I5Rn1vo-ceFsgmQ.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">桌子</figcaption></figure><p id="e072" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">结论</strong></p><p id="357e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Web报废在尽可能快地从网站中提取大量数据方面非常有用。然后进行数据分析，并根据您的业务需求创建有洞察力的可视化效果。</p><p id="acb8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望这篇文章能帮助你并节省大量的时间。如果你有任何建议，请告诉我。</p><p id="d3ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">快乐编码。</p><p id="65a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"><em class="md">Prabhat Pathak</em></strong><em class="md">(</em><a class="ae jt" href="https://www.linkedin.com/in/prabhat-pathak-029b6466/" rel="noopener ugc nofollow" target="_blank"><em class="md">Linkedin简介</em> </a> <em class="md">)是协理分析师。</em></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/576ba527d49b68c2ab9d79b05c263307.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JRJUUp4QO7F-0jvV"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">在<a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae jt" href="https://unsplash.com/@austinchan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Austin Chan </a>拍摄的照片</figcaption></figure></div></div>    
</body>
</html>