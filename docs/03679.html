<html>
<head>
<title>How to calculate Price Book ratio with Python — Python for Finance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python计算市净率— Python for Finance</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-calculate-price-book-ratio-with-python-python-for-finance-725286f11e?source=collection_archive---------13-----------------------#2020-02-13">https://medium.com/analytics-vidhya/how-to-calculate-price-book-ratio-with-python-python-for-finance-725286f11e?source=collection_archive---------13-----------------------#2020-02-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="3b95" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">市净率(PB)是分析公司相对价值的一个非常有用的指标。PB有助于确定与类似公司相比，一家公司的价格目前是被低估还是被高估。在本文中，我们将学习如何使用Python<strong class="ih hj">计算价格账面价值(PB)。</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/cdae73387cd25f808c97463d00ec57fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UD5NdrrQpBG9VW-5"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">照片由<a class="ae jt" href="https://unsplash.com/@isaacmsmith?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">艾萨克·史密斯</a>在<a class="ae jt" href="https://unsplash.com/s/photos/financial?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><h1 id="1ea7" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">什么是市净率？</h1><p id="5692" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">在转向Python之前，对我们想要做什么有一个清晰的想法总是好的。在这种情况下，我们需要知道什么是市净率，它是如何计算的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/01e90dcf56a3ebab6dfff2b3f5b061e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TOY8kNPmRL0Ay3hG"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">市净率</figcaption></figure><p id="d871" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">价格账面价值</strong>是一个财务比率，它可以给投资者一个公司价格与其他类似公司价格的良好指示。它是由一家<strong class="ih hj">公司的市值</strong> <strong class="ih hj">除以</strong>股权的账面价值<strong class="ih hj"/>计算出来的。</p><p id="b649" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">计算PB比率的另一种方法是以每股为基础，用股票价格除以权益的账面价值。在我们的例子中，我们将使用第一种方法。</p><p id="14a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">计算<strong class="ih hj">价格书比率只需要两个要素:</strong></p><ul class=""><li id="67cc" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lc ld le lf bi translated"><strong class="ih hj">公司市值:</strong>从任何交易所或<a class="ae jt" href="https://finance.yahoo.com/" rel="noopener ugc nofollow" target="_blank">财经网站</a>都可以轻松获得。它是每股股票的报价乘以发行在外的股票数量。</li><li id="9eda" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><strong class="ih hj">权益账面价值</strong>:可以从上市公司公布的财务报告中提取。它位于资产负债表的权益部分，在<em class="ll">股东权益总额</em>的标签下。账面价值就是一家公司的净资产，是一种过去的衡量标准。即它考虑了历史交易，如以前期间的损益、股息等。</li></ul><h1 id="e79a" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">如何解读价格账面比？</h1><p id="c005" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">市净率可能是一个很好的指标，可以用来了解一家公司与同行公司相比是被高估还是被低估。<strong class="ih hj">高市净率</strong>可能表明公司很贵，或者市场对公司的未来前景非常乐观。成长中的公司往往有很高的市净率。</p><p id="419b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一方面，具有低市净率的公司被称为价值股。这可能表明一家公司被低估了，因为账面价值高于市值。然而，我们需要对低市净率的公司保持谨慎，因为这也可能是财务困境或预期未来收益下降的迹象。</p><p id="9c02" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">技术行业的公司是一个具有很高市净率的成长型公司的明显例子。</p><p id="c77d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们用Python通过计算技术领域公司的比率来检查PB比率。</p><h1 id="4341" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">用Python计算价格手册比率</h1><p id="7da8" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">为了获得计算所需的财务数据，我将使用一个免费的<a class="ae jt" href="https://financialmodelingprep.com/developer/docs/" rel="noopener ugc nofollow" target="_blank"> API，其中包含股票和财务数据</a>。我建议你看一下文档。</p><p id="50c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将创建一个函数，<em class="ll"> getpricetobook </em>，它将把我们想要提取数据的公司的股票作为参数。在我们的例子中，我们将通过<em class="ll"> AAP </em> L来获取<em class="ll">苹果</em>的财务数据。</p><p id="ef1a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们向我们的财务API 的<a class="ae jt" href="https://financialmodelingprep.com/api/v3/financials/balance-sheet-statement/AAPL?period=quarter" rel="noopener ugc nofollow" target="_blank">端点发出请求，以检索资产负债表报表数据。然后，我们将响应存储在变量call <em class="ll"> BS </em>中。</a></p><pre class="je jf jg jh fd lm ln lo lp aw lq bi"><span id="6088" class="lr jv hi ln b fi ls lt l lu lv">import requests<br/><br/>def getpricetobook(stock):<br/>    BS = requests.get(f"https://financialmodelingprep.com/api/v3/financials/balance-sheet-statement/{stock}?period=quarter")<br/>    BS = BS.json()<br/>    print(BS)<br/>    <br/>getpricetobook('AAPL')</span></pre><p id="4e10" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们打印我们的BS变量，我们会看到我们有一个<em class="ll"> json </em>对象需要解析。用Python来做这件事很简单。<em class="ll"> BS </em>包含一个有两个键的字典。第二个关键字，<em class="ll">财务，</em>包含季度资产负债表报表列表:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/56bf352779d01f9a4444d00dac927c28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6T8EtNBO3FrqnKKZ"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">苹果的资产负债表</figcaption></figure><p id="8160" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们需要提取th <em class="ll"> e </em> <strong class="ih hj"> <em class="ll">股东总权益价值</em> </strong>，因为这将代表我们<strong class="ih hj"> <em class="ll">权益账面价值</em> </strong>(即价格账面比率的分母)。</p><p id="4cba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以通过解析BS并获取<em class="ll">[‘financials’]</em>关键字内的列表<em class="ll"> [0] </em>的第一个元素中包含的<strong class="ih hj"> <em class="ll">股东权益总额</em></strong><em class="ll">[‘股东权益总额’]</em>来提取它:</p><pre class="je jf jg jh fd lm ln lo lp aw lq bi"><span id="02c6" class="lr jv hi ln b fi ls lt l lu lv">book_value_equity_now = float(BS['financials'][0]['Total shareholders equity'])  <br/>print(book_value_equity_now)<br/><br/>#returned number: 89531000000.0</span></pre><p id="a71f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请注意，我们在API返回的字符串前面包含了<em class="ll"> float </em>，以便将其转换为<em class="ll"> float </em>。</p><p id="0898" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们要检索<strong class="ih hj">苹果的市值</strong>。我们可以通过向各自的<a class="ae jt" href="https://financialmodelingprep.com/api/v3/company/profile/aapl" rel="noopener ugc nofollow" target="_blank"> API端点</a>发出请求来轻松做到这一点:</p><pre class="je jf jg jh fd lm ln lo lp aw lq bi"><span id="ab8d" class="lr jv hi ln b fi ls lt l lu lv">company_info = requests.get(f"https://financialmodelingprep.com/api/v3/company/profile/{stock}")<br/><br/>company_info = company_info.json()<br/>market_cap =  float(company_info['profile']['mktCap'])<br/>print(market_cap)<br/><br/>#market_cap value is 1423019080000.0</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lw"><img src="../Images/82df458c8ee44bb837219c305351dae7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wmUm-uiaBxlS7awQ"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">苹果简介</figcaption></figure><p id="c17c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我们之前所做的，我们在配置文件字典中提取<strong class="ih hj"> <em class="ll"> mktCap </em> </strong>值。请注意，该值基于最新的股票价格，而我们的权益账面价值基于最新的资产负债表。</p><p id="f256" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，我们可以计算我们的市净率:</p><pre class="je jf jg jh fd lm ln lo lp aw lq bi"><span id="d785" class="lr jv hi ln b fi ls lt l lu lv">price_to_book = market_cap/book_value_equity_now</span><span id="1357" class="lr jv hi ln b fi lx lt l lu lv">return (price_to_book)</span></pre><h1 id="a97c" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">将Python脚本放在一起</h1><p id="8454" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">现在，我们已经准备好了我们的<strong class="ih hj"> Python </strong>脚本。我们可以通过任何一个<a class="ae jt" href="https://en.wikipedia.org/wiki/Ticker_symbol" rel="noopener ugc nofollow" target="_blank">公司股票代码</a>，Python将为我们计算价格书比率。请看下面完整的代码，以及<em class="ll"> Appl </em> e、<em class="ll">微软</em>、<em class="ll">福特</em>和<em class="ll">特斯拉</em>的PB比率计算:</p><pre class="je jf jg jh fd lm ln lo lp aw lq bi"><span id="8677" class="lr jv hi ln b fi ls lt l lu lv">import requests <br/><br/>def getpricetobook(stock):<br/>    BS = requests.get(f"https://financialmodelingprep.com/api/v3/financials/balance-sheet-statement/{stock}?period=quarter")<br/>    BS = BS.json()<br/><br/>    book_value_equity_now = float(BS['financials'][0]['Total shareholders equity'])  <br/>    <br/>    company_info = requests.get(f"https://financialmodelingprep.com/api/v3/company/profile/{stock}")<br/>    company_info = company_info.json()<br/>    market_cap =  float(company_info['profile']['mktCap'])<br/>    price_to_book = market_cap/book_value_equity_now<br/>    return (price_to_book)<br/>     <br/>                                <br/>print('AAPL:', getpricetobook('AAPL') )<br/>print('MSFT:', getpricetobook('MSFT') )<br/><br/>print('Ford:', getpricetobook('F') )<br/>print('TSLA:', getpricetobook('TSLA') )<br/><br/>#Return:<br/>AAPL: 15.89414928907306<br/>MSFT: 12.47125039733355<br/>Ford: 0.9288292681546861<br/>TSLA: 22.989353311258277</span></pre><h1 id="5dee" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">总结和其他相关评估方法</h1><p id="b82e" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">太好了，我们现在有一个脚本来计算我们的市净率。它很容易建立，并且可能有助于了解与同行或行业集团相比，某些公司是否可能被高估/低估。</p><p id="528b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我鼓励你自己计算一些其他的相对估值指标，如<a class="ae jt" href="https://www.investopedia.com/terms/p/price-to-salesratio.asp" rel="noopener ugc nofollow" target="_blank">价格销售比率</a>和<a class="ae jt" href="https://www.investopedia.com/terms/p/price-earningsratio.asp" rel="noopener ugc nofollow" target="_blank">价格收益比率</a>。</p><p id="84ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你喜欢这篇文章，我推荐你阅读我最新的一篇关于如何用Python 计算股本回报率(ROE)的文章，因为它可以与价格账面价值结合使用。高PB和低ROE可能是公司估值过高的明显标志。低市净率和高净资产收益率对于一家前景广阔的廉价公司来说可能是一个好兆头。</p><p id="c466" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢您的阅读！</p></div><div class="ab cl ly lz gp ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="hb hc hd he hf"><p id="82bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ll">原载于2020年2月13日</em><a class="ae jt" href="https://codingandfun.com/how-to-calculate-price-book-ratio-with-python/" rel="noopener ugc nofollow" target="_blank"><em class="ll">https://codingandfun.com</em></a><em class="ll">。</em></p></div></div>    
</body>
</html>