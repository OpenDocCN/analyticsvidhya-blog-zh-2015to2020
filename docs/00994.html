<html>
<head>
<title>Restaurant Sales Prediction using machine learning</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于机器学习的餐馆销售预测</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/restaurant-sales-prediction-using-machine-learning-24928a2e3206?source=collection_archive---------6-----------------------#2019-09-24">https://medium.com/analytics-vidhya/restaurant-sales-prediction-using-machine-learning-24928a2e3206?source=collection_archive---------6-----------------------#2019-09-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/9a4adaafe7d2dab3ef938095c89326d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1292/format:webp/1*D6yQEMzizY2WlIcx_lCBfA.png"/></div></figure><p id="a1f8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">餐馆销售预测对任何餐馆生意的成功都起着重要的作用。具有良好商业知识的餐馆老板大多专注于餐馆销售，以便为成功经营餐馆业务进行有效的规划。</p><p id="45e5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们将讨论在考虑影响销售的多种因素的情况下，机器学习如何帮助更准确地预测销售。我们将使用Azure机器学习工具来开发模型，并使用web服务来部署它。</p><p id="3df4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">想象一下，如果你是一个餐馆老板，需要找出未来3个月的销售预测。根据业务性质确定最佳的预测算法是一个非常繁琐和耗时的过程，这样会更准确地预测销售额。然而，如果你只是将信息输入手机或网站，并获得销售预测，那会怎么样呢？听起来很棒吧！这个解决方案有助于使用机器学习技术确定最佳算法，并通过几次点击部署web服务，我们可以在应用程序或网站甚至excel上使用它。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es jk"><img src="../Images/ec3d83d2c1d19351299e1a0af0078267.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jHCFZdLHcEHKWJJGGQ3SRA.png"/></div></div></figure><p id="4b8d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">对于对机器学习没有任何概念的人来说，它是人工智能的一种应用，为系统提供了自动学习和根据经验进行改进的能力，而无需显式编程。有3种机器学习。监督、非监督和强化学习。在本文中，我们将重点关注监督机器学习。</p><p id="e104" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">对于本文，我们假设您已经掌握了一些关于Azure ML studio的知识(如何注册)和R语言的基础知识。</p><p id="550f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">好了，说够了！我们开始吧！！！</p><h2 id="6113" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ix ke kf kg jb kh ki kj jf kk kl km kn bi translated"><strong class="ak">第一步:在Azure Machine learning studio中创建一个空白实验</strong></h2><p id="5ee8" class="pw-post-body-paragraph im in hi io b ip ko ir is it kp iv iw ix kq iz ja jb kr jd je jf ks jh ji jj hb bi translated">首先，你要打开Azure机器学习工作室，点击新的实验。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es kt"><img src="../Images/f3c8c862a913f7f7c9cb7f1d42c8d3de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kJmCrUgE63wDKHjG-V0-gA.png"/></div></div></figure><p id="1fe5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">点击“空白实验”。一旦你打开实验，你将默认看到下面的实验标题和日期。你可以通过点击来重命名你的实验。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es ku"><img src="../Images/cd4c25e2e9bb2b99307db7e82f6b2326.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e8rAMp6dvvbweg21_BZFhg.png"/></div></div></figure><p id="8020" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在左侧，您会发现不同的选项，我们可以使用它们从头开始开发模型。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es kv"><img src="../Images/a138d1fa30316b1490e82b8896326c80.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/format:webp/1*MGB-j5bcPgrG5WwMPjTqqg.png"/></div></figure><p id="3c32" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我不会详细讨论每个选项，因为我们的重点是开发销售预测模型。第二步是准备我们将用来训练模型的数据集。您可以导入数据或手动创建数据，也可以选择使用Azure ML studio提供的样本数据集，并根据您的需求进行修改。</p><h2 id="87f9" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ix ke kf kg jb kh ki kj jf kk kl km kn bi translated"><strong class="ak">第二步:导入餐厅销售数据</strong></h2><p id="0aca" class="pw-post-body-paragraph im in hi io b ip ko ir is it kp iv iw ix kq iz ja jb kr jd je jf ks jh ji jj hb bi translated">我从其中一家餐馆获取了11个菜单项的销售数据样本。销售数据包括菜单Id、日期、销售额、天气、假日、节日和促销。</p><p id="af0a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">天气被分类为0代表寒冷，1代表温暖。同样，我将假日分类为0表示没有假日，1表示有假日。除了天气和假期，我们还分别考虑了节日和当月的促销活动。这些因素很重要，因为它们会极大地影响餐馆的销售。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es kw"><img src="../Images/374f48e7a822ea1bb939f9c00ff6d707.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_n931Lf6x9Dpz8nxuYL3WA.png"/></div></div></figure><h2 id="13d5" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ix ke kf kg jb kh ki kj jf kk kl km kn bi translated"><strong class="ak">第三步:根据模型要求清理销售数据</strong></h2><p id="9fb3" class="pw-post-body-paragraph im in hi io b ip ko ir is it kp iv iw ix kq iz ja jb kr jd je jf ks jh ji jj hb bi translated">下一步是清理数据，只选择需要的列来执行实验。为此，我们使用R脚本将日期列转换为月份和年份。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es kx"><img src="../Images/f36576a9f3e7cc7438997e4253285d11.png" data-original-src="https://miro.medium.com/v2/resize:fit:490/format:webp/1*T2UlFYYJfvrVaHNpGbW7Vw.png"/></div></figure><p id="a1a0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">下面的R脚本用于添加2列月和年。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es ky"><img src="../Images/690cb710b03fa9b961504454da5bf8a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vDj9JiXXZA0KebbO0kwAJA.png"/></div></div></figure><p id="88fe" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在执行R脚本之后，您会发现另外两列Month和Year。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es kz"><img src="../Images/c9c40f16e62ef8b67bbdc22851c8e7ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l3CNuiV7JgXYTFXDoCIqXw.png"/></div></div></figure><h2 id="a5d2" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ix ke kf kg jb kh ki kj jf kk kl km kn bi translated"><strong class="ak">第四步:火车模型</strong></h2><p id="8ed8" class="pw-post-body-paragraph im in hi io b ip ko ir is it kp iv iw ix kq iz ja jb kr jd je jf ks jh ji jj hb bi translated">好了，下一步是训练模型。您可以用两种方式测试模型。首先，您可以使用备忘单并确定最佳的机器学习算法，或者您可以尝试不同的算法并选择误差较低的最佳算法。我们将采用第二种方法。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es la"><img src="../Images/c4c8255a11b90707f587566dd89cc52e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cl5SqA3OK26B208uEYC_Ww.png"/></div></div></figure><p id="95d8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了识别给出最小误差的算法，我们将把数据分成训练和测试数据。通过训练数据，我们将应用算法来预测销售，通过测试数据，我们将比较预测销售和实际销售。为了分割数据，我们将使用如下所示的分割模块。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es lb"><img src="../Images/22f9e4a9036771916b4ab418e66805a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:714/format:webp/1*kiDCevavV08pJyyLdazldA.png"/></div></div></figure><p id="9251" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">对于这个实验，我们将数据分成75%用于训练模型，剩下的25%用于测试模型。拆分数据后，我们将对训练数据应用贝叶斯线性回归算法，并使用如下所示的评分模型将预测值与测试数据进行比较。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/1bd0bd2956ece90f95866c07173ec152.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*r7c5TaGWDPStMFX4NI-w6w.png"/></div></figure><h2 id="bcfc" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ix ke kf kg jb kh ki kj jf kk kl km kn bi translated"><strong class="ak">第五步:评估结果</strong></h2><p id="13c7" class="pw-post-body-paragraph im in hi io b ip ko ir is it kp iv iw ix kq iz ja jb kr jd je jf ks jh ji jj hb bi translated">完成实验后，我们将使用评估模型来评估结果。我们必须检查的重要因素是决定系数。决定系数越接近1，模型越好。</p><p id="824d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在我们的例子中，决定系数(R2)是0.9213，这表明92 %的数据可以用模型来解释。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es ld"><img src="../Images/88e6182f259ec310b11259db68cae089.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e8QmVtyTc7ime9QugAlfEQ.png"/></div></div></figure><p id="a595" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们运行其他算法，看看我们是否可以获得更好的准确性。下面是运行其他模型时的结果。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es le"><img src="../Images/399b6aa5f59e6e256af82029c7759ebf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0CLyk8GL20-dD7AAvCMmwQ.png"/></div></div></figure><p id="5255" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们使用贝叶斯线性回归、决策森林回归和线性回归对模型进行了检验。通过查看结果，决策森林回归是最适合的算法，平均绝对误差为32.81</p><h2 id="4be0" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ix ke kf kg jb kh ki kj jf kk kl km kn bi translated"><strong class="ak">步骤6:部署web服务</strong></h2><p id="48b2" class="pw-post-body-paragraph im in hi io b ip ko ir is it kp iv iw ix kq iz ja jb kr jd je jf ks jh ji jj hb bi translated">下一步是创建和部署web服务。成功运行实验后，我们将选择决策森林回归训练模型，并单击“预测Web服务[推荐]”。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es lf"><img src="../Images/32019a247ff167d5f2b2ed52a184158d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ca1slkcbZif5IAqz6ZqegQ.png"/></div></div></figure><p id="a982" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您将看到Webservice预测实验正在创建，如下所示，带有Webservice输入和输出模块。我们将再次运行模型并检查输出。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es lg"><img src="../Images/8a7f4e3e490126aca534dbcbdc5c8091.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i_KHhwtkjAdnkauIbJ8QRQ.png"/></div></div></figure><p id="8de5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">运行模型并单击Deploy Web service后，它将重定向到如下所示的页面。</p><p id="913b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您将看到API密匙是自动生成的，我们将使用它通过Web服务访问模型。此外，我们可以下载excel插件并远程运行模型，不会出现任何问题。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es lh"><img src="../Images/e5a287001a7287e39e4f1080af0f2dba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lveN63jMrMTtwWw9-DzZZA.png"/></div></div></figure><p id="2cd5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">厉害！我们刚刚开发了完整的餐馆销售预测模型，并部署了Web服务。</p></div></div>    
</body>
</html>