<html>
<head>
<title>SOLID principles: How to create maintainable code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">坚实的原则:如何创建可维护的代码</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/solid-principles-how-to-create-maintainable-code-113d1f3e1b4?source=collection_archive---------20-----------------------#2020-03-14">https://medium.com/analytics-vidhya/solid-principles-how-to-create-maintainable-code-113d1f3e1b4?source=collection_archive---------20-----------------------#2020-03-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/39cee5f8dac52307cbe96e0244a9e48a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZWi8IZLENNXtd_oY.png"/></div></div></figure><p id="ae74" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在之前的帖子中，我们讨论了编写代码时应该避免的原则。这里可以看<a class="ae jo" rel="noopener" href="/@marat_badykov/stupid-principles-what-you-should-avoid-when-writing-code-2d84eb7818fd">。在这篇文章中，我们将着眼于坚实的设计原则，编程标准，所有开发人员必须很好地理解，以创建良好的架构。</a></p><p id="0247" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">SOLID是以下单词的首字母缩略词:</p><ul class=""><li id="edcc" class="jp jq hi is b it iu ix iy jb jr jf js jj jt jn ju jv jw jx bi translated">单一责任</li><li id="fb20" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">开-关</li><li id="0757" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">利斯科夫替代</li><li id="1fb9" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">界面分离</li><li id="ee1d" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">依赖性倒置</li></ul><h1 id="f25d" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">单一责任</h1><ul class=""><li id="2ba8" class="jp jq hi is b it lb ix lc jb ld jf le jj lf jn ju jv jw jx bi translated">每个对象应该被分配一个单独的责任。</li><li id="bd4c" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">特定的类应该解决特定的问题。</li></ul><h2 id="89a7" class="lg ke hi bd kf lh li lj kj lk ll lm kn jb ln lo kr jf lp lq kv jj lr ls kz lt bi translated">愚蠢的例子</h2><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="2661" class="lg ke hi lz b fi md me l mf mg"><strong class="lz hj">class</strong> <strong class="lz hj">Order</strong><br/>{<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">calculateTotalSum</strong>() {<strong class="lz hj">...</strong>}<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">getItems</strong>() {<strong class="lz hj">...</strong>}<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">getItemCount</strong>() {<strong class="lz hj">...</strong>}<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">addItem</strong>() {<strong class="lz hj">...</strong>}<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">deleteItem</strong>() {<strong class="lz hj">...</strong>}<br/><br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">load</strong>() {<strong class="lz hj">...</strong>}<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">save</strong>() {<strong class="lz hj">...</strong>}<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">update</strong>() {<strong class="lz hj">...</strong>}<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">delete</strong>() {<strong class="lz hj">...</strong>}<br/><br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">printOrder</strong>() {<strong class="lz hj">...</strong>}<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">showOrder</strong>() {<strong class="lz hj">...</strong>}<br/>}</span></pre><h2 id="d38b" class="lg ke hi bd kf lh li lj kj lk ll lm kn jb ln lo kr jf lp lq kv jj lr ls kz lt bi translated">实体示例</h2><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="33be" class="lg ke hi lz b fi md me l mf mg"><strong class="lz hj">class</strong> <strong class="lz hj">Order</strong><br/>{<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">calculateTotalSum</strong>() {<strong class="lz hj">...</strong>}<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">getItems</strong>() {<strong class="lz hj">...</strong>}<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">getItemCount</strong>() {<strong class="lz hj">...</strong>}<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">addItem</strong>() {<strong class="lz hj">...</strong>}<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">deleteItem</strong>() {<strong class="lz hj">...</strong>}<br/>}<br/><br/><strong class="lz hj">class</strong> <strong class="lz hj">OrderRepository</strong><br/>{<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">load</strong>() {<strong class="lz hj">...</strong>}<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">save</strong>() {<strong class="lz hj">...</strong>}<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">update</strong>() {<strong class="lz hj">...</strong>}<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">delete</strong>() {<strong class="lz hj">...</strong>}<br/>}<br/><br/><strong class="lz hj">class</strong> <strong class="lz hj">OrderViewer</strong><br/>{<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">printOrder</strong>() {<strong class="lz hj">...</strong>}<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">showOrder</strong>() {<strong class="lz hj">...</strong>}<br/>}</span></pre><h1 id="317d" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">开-关</h1><ul class=""><li id="37c1" class="jp jq hi is b it lb ix lc jb ld jf le jj lf jn ju jv jw jx bi translated">软件实体必须对扩展开放，但对修改关闭。</li><li id="bab9" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">所有的类、函数等。应该这样设计，以便改变它们的行为，不需要改变它们的源代码。</li></ul><h2 id="85af" class="lg ke hi bd kf lh li lj kj lk ll lm kn jb ln lo kr jf lp lq kv jj lr ls kz lt bi translated">愚蠢的例子</h2><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="e1a9" class="lg ke hi lz b fi md me l mf mg"><strong class="lz hj">class</strong> <strong class="lz hj">OrderRepository</strong><br/>{<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">load</strong>($orderId)<br/>    {<br/>        $pdo <strong class="lz hj">=</strong> <strong class="lz hj">new</strong> PDO($this<strong class="lz hj">-&gt;</strong>config<strong class="lz hj">-&gt;</strong>getDsn(), $this<strong class="lz hj">-&gt;</strong>config<strong class="lz hj">-&gt;</strong>getDBUser(), $this<strong class="lz hj">-&gt;</strong>config<strong class="lz hj">-&gt;</strong>getDBPassword());<br/>        $statement <strong class="lz hj">=</strong> $pdo<strong class="lz hj">-&gt;</strong>prepare('SELECT * FROM `orders` WHERE id=:id');<br/>        $statement<strong class="lz hj">-&gt;</strong>execute(<strong class="lz hj">array</strong>(':id' <strong class="lz hj">=&gt;</strong> $orderId));<br/>        <strong class="lz hj">return</strong> $query<strong class="lz hj">-&gt;</strong>fetchObject('Order');<br/>    }<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">save</strong>($order) {<strong class="lz hj">...</strong>}<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">update</strong>($order) {<strong class="lz hj">...</strong>}<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">delete</strong>($order) {<strong class="lz hj">...</strong>}<br/>}</span></pre><h2 id="af4f" class="lg ke hi bd kf lh li lj kj lk ll lm kn jb ln lo kr jf lp lq kv jj lr ls kz lt bi translated">实体示例</h2><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="cf9f" class="lg ke hi lz b fi md me l mf mg">{<br/>    <strong class="lz hj">private</strong> $source;<br/>    <br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">setSource</strong>(IOrderSource $source)<br/>    {<br/>        $this<strong class="lz hj">-&gt;</strong>source <strong class="lz hj">=</strong> $source;<br/>    }<br/>    <br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">load</strong>($orderId)<br/>    {<br/>        <strong class="lz hj">return</strong> $this<strong class="lz hj">-&gt;</strong>source<strong class="lz hj">-&gt;</strong>load($orderId);<br/>    }<br/><br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">save</strong>($order)<br/>    {<br/>        <strong class="lz hj">return</strong> $this<strong class="lz hj">-&gt;</strong>source<strong class="lz hj">-&gt;</strong>save($order);<br/>    }<br/><br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">update</strong>($order) {<strong class="lz hj">...</strong>};<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">delete</strong>($order) {<strong class="lz hj">...</strong>};<br/>}<br/><br/><strong class="lz hj">interface</strong> <strong class="lz hj">IOrderSource</strong><br/>{<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">load</strong>($orderId);<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">save</strong>($order);<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">update</strong>($order);<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">delete</strong>($order);<br/>}<br/><br/><strong class="lz hj">class</strong> <strong class="lz hj">MySQLOrderSource</strong> <strong class="lz hj">implements</strong> IOrderSource<br/>{<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">load</strong>($orderId) {<strong class="lz hj">...</strong>};<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">save</strong>($order) {<strong class="lz hj">...</strong>}<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">update</strong>($order) {<strong class="lz hj">...</strong>}<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">delete</strong>($order) {<strong class="lz hj">...</strong>}<br/>}<br/><br/><strong class="lz hj">class</strong> <strong class="lz hj">ApiOrderSource</strong> <strong class="lz hj">implements</strong> IOrderSource<br/>{<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">load</strong>($orderId) {<strong class="lz hj">...</strong>};<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">save</strong>($order) {<strong class="lz hj">...</strong>}<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">update</strong>($order) {<strong class="lz hj">...</strong>}<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">delete</strong>($order) {<strong class="lz hj">...</strong>}<br/>}</span></pre><h1 id="45dc" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">利斯科夫替代</h1><ul class=""><li id="f0b2" class="jp jq hi is b it lb ix lc jb ld jf le jj lf jn ju jv jw jx bi translated">程序中的对象可以被它们的继承者替换，而不改变程序的属性。</li><li id="0f35" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">使用类继承时，代码执行的结果应该是可预测的，并且不会更改方法的属性。</li><li id="421f" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">应该可以替换基本类型的任何子类型。</li><li id="4ef8" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">使用基类引用的函数应该能够在不知道的情况下使用派生类的对象。</li></ul><h2 id="991a" class="lg ke hi bd kf lh li lj kj lk ll lm kn jb ln lo kr jf lp lq kv jj lr ls kz lt bi translated">愚蠢的例子</h2><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="1503" class="lg ke hi lz b fi md me l mf mg"><strong class="lz hj">class</strong> <strong class="lz hj">Rectangle</strong><br/>{<br/>    <strong class="lz hj">protected</strong> $width;<br/>    <strong class="lz hj">protected</strong> $height;<br/><br/>    <strong class="lz hj">public</strong> setWidth($width)<br/>    {<br/>        $this<strong class="lz hj">-&gt;</strong>width <strong class="lz hj">=</strong> $width;<br/>    }<br/><br/>    <strong class="lz hj">public</strong> setHeight($height)<br/>    {<br/>        $this<strong class="lz hj">-&gt;</strong>height <strong class="lz hj">=</strong> $height;<br/>    }<br/><br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">getWidth</strong>()<br/>    {<br/>        <strong class="lz hj">return</strong> $this<strong class="lz hj">-&gt;</strong>width;<br/>    }<br/><br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">getHeight</strong>()<br/>    {<br/>        <strong class="lz hj">return</strong> $this<strong class="lz hj">-&gt;</strong>height;<br/>    }<br/>}<br/><br/><strong class="lz hj">class</strong> <strong class="lz hj">Square</strong> <strong class="lz hj">extends</strong> Rectangle<br/>{<br/>    <strong class="lz hj">public</strong> setWidth($width)<br/>    {<br/>        <strong class="lz hj">parent::</strong>setWidth($width);<br/>        <strong class="lz hj">parent::</strong>setHeight($width);<br/>    }<br/><br/>    <strong class="lz hj">public</strong> setHeight($height)<br/>    {<br/>        <strong class="lz hj">parent::</strong>setHeight($height);<br/>        <strong class="lz hj">parent::</strong>setWidth($height);<br/>    }<br/>}<br/><br/><strong class="lz hj">function</strong> <strong class="lz hj">calculateRectangleSquare</strong>(Rectangle $rectangle, $width, $height)<br/>{<br/>    $rectangle<strong class="lz hj">-&gt;</strong>setWidth($width);<br/>    $rectangle<strong class="lz hj">-&gt;</strong>setHeight($height);<br/>    <strong class="lz hj">return</strong> $rectangle<strong class="lz hj">-&gt;</strong>getHeight <strong class="lz hj">*</strong> $rectangle<strong class="lz hj">-&gt;</strong>getWidth;<br/>}<br/><br/>calculateRectangleSquare(<strong class="lz hj">new</strong> Rectangle, 4, 5); <em class="mh">// 20</em><br/>calculateRectangleSquare(<strong class="lz hj">new</strong> Square, 4, 5); <em class="mh">// 25 ???</em></span></pre><h2 id="cd44" class="lg ke hi bd kf lh li lj kj lk ll lm kn jb ln lo kr jf lp lq kv jj lr ls kz lt bi translated">实体示例</h2><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="8db0" class="lg ke hi lz b fi md me l mf mg"><strong class="lz hj">class</strong> <strong class="lz hj">Rectangle</strong><br/>{<br/>    <strong class="lz hj">protected</strong> $width;<br/>    <strong class="lz hj">protected</strong> $height;<br/><br/>    <strong class="lz hj">public</strong> setWidth($width)<br/>    {<br/>        $this<strong class="lz hj">-&gt;</strong>width <strong class="lz hj">=</strong> $width;<br/>    }<br/><br/>    <strong class="lz hj">public</strong> setHeight($height)<br/>    {<br/>        $this<strong class="lz hj">-&gt;</strong>height <strong class="lz hj">=</strong> $height;<br/>    }<br/><br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">getWidth</strong>()<br/>    {<br/>        <strong class="lz hj">return</strong> $this<strong class="lz hj">-&gt;</strong>width;<br/>    }<br/><br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">getHeight</strong>()<br/>    {<br/>        <strong class="lz hj">return</strong> $this<strong class="lz hj">-&gt;</strong>height;<br/>    }<br/>}<br/><br/><strong class="lz hj">class</strong> <strong class="lz hj">Square</strong><br/>{<br/>    <strong class="lz hj">protected</strong> $size;<br/><br/>    <strong class="lz hj">public</strong> setSize($size)<br/>    {<br/>        $this<strong class="lz hj">-&gt;</strong>size <strong class="lz hj">=</strong> $size;<br/>    }<br/><br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">getSize</strong>()<br/>    {<br/>        <strong class="lz hj">return</strong> $this<strong class="lz hj">-&gt;</strong>size;<br/>    }<br/>}</span></pre><h1 id="5306" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">界面分离</h1><ul class=""><li id="33b6" class="jp jq hi is b it lb ix lc jb ld jf le jj lf jn ju jv jw jx bi translated">许多专用接口比一个通用接口要好。</li><li id="2b48" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">遵循这一原则是必要的，这样使用/实现接口的客户端类只知道它们使用的方法，从而减少未使用的代码量。</li></ul><h2 id="7147" class="lg ke hi bd kf lh li lj kj lk ll lm kn jb ln lo kr jf lp lq kv jj lr ls kz lt bi translated">愚蠢的例子</h2><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="c5a3" class="lg ke hi lz b fi md me l mf mg"><strong class="lz hj">interface</strong> <strong class="lz hj">IItem</strong><br/>{<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">applyDiscount</strong>($discount);<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">applyPromocode</strong>($promocode);<br/>    <br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">setColor</strong>($color);<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">setSize</strong>($size);<br/>    <br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">setCondition</strong>($condition);<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">setPrice</strong>($price);<br/>}</span></pre><h2 id="fda9" class="lg ke hi bd kf lh li lj kj lk ll lm kn jb ln lo kr jf lp lq kv jj lr ls kz lt bi translated">实体示例</h2><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="ab61" class="lg ke hi lz b fi md me l mf mg"><strong class="lz hj">interface</strong> <strong class="lz hj">IItem</strong><br/>{<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">setCondition</strong>($condition);<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">setPrice</strong>($price);<br/>}<br/><br/><strong class="lz hj">interface</strong> <strong class="lz hj">IClothes</strong><br/>{<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">setColor</strong>($color);<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">setSize</strong>($size);<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">setMaterial</strong>($material);<br/>}<br/><br/><strong class="lz hj">interface</strong> <strong class="lz hj">IDiscountable</strong><br/>{<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">applyDiscount</strong>($discount);<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">applyPromocode</strong>($promocode);<br/>}</span></pre><h1 id="ce4a" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">依赖性倒置</h1><ul class=""><li id="0c5c" class="jp jq hi is b it lb ix lc jb ld jf le jj lf jn ju jv jw jx bi translated">系统中的依赖关系是基于抽象的。</li><li id="0c20" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">顶层模块独立于底层模块。</li><li id="7db5" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">抽象不应该依赖于细节。</li><li id="9c97" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">细节应该依赖于抽象。</li></ul><h2 id="28dd" class="lg ke hi bd kf lh li lj kj lk ll lm kn jb ln lo kr jf lp lq kv jj lr ls kz lt bi translated">愚蠢的例子</h2><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="e282" class="lg ke hi lz b fi md me l mf mg"><strong class="lz hj">class</strong> <strong class="lz hj">Customer</strong><br/>{<br/>    <strong class="lz hj">private</strong> $currentOrder <strong class="lz hj">=</strong> <strong class="lz hj">null</strong>;<br/><br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">buyItems</strong>()<br/>    {<br/>        <strong class="lz hj">if</strong> (is_null($this<strong class="lz hj">-&gt;</strong>currentOrder)) {<br/>            <strong class="lz hj">return</strong> <strong class="lz hj">false</strong>;<br/>        }<br/><br/>        $processor <strong class="lz hj">=</strong> <strong class="lz hj">new</strong> OrderProcessor(); <em class="mh">// !!!</em><br/>        <strong class="lz hj">return</strong> $processor<strong class="lz hj">-&gt;</strong>checkout($this<strong class="lz hj">-&gt;</strong>currentOrder);<br/>    }<br/>    <br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">addItem</strong>($item)<br/>    {<br/>        <strong class="lz hj">if</strong> (is_null($this<strong class="lz hj">-&gt;</strong>currentOrder)) {<br/>            $this<strong class="lz hj">-&gt;</strong>currentOrder <strong class="lz hj">=</strong> <strong class="lz hj">new</strong> Order();<br/>        }<br/><br/>        <strong class="lz hj">return</strong> $this<strong class="lz hj">-&gt;</strong>currentOrder<strong class="lz hj">-&gt;</strong>addItem($item);<br/>    }<br/><br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">deleteItem</strong>($item)<br/>    {<br/>        <strong class="lz hj">if</strong> (is_null($this<strong class="lz hj">-&gt;</strong>currentOrder)) {<br/>            <strong class="lz hj">return</strong> <strong class="lz hj">false</strong>;<br/>        }<br/><br/>        <strong class="lz hj">return</strong> $this<strong class="lz hj">-&gt;</strong>currentOrder<strong class="lz hj">-&gt;</strong>deleteItem($item);<br/>    }<br/>}<br/><br/><strong class="lz hj">class</strong> <strong class="lz hj">OrderProcessor</strong><br/>{<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">checkout</strong>($order) {<strong class="lz hj">...</strong>}<br/>}</span></pre><h2 id="842e" class="lg ke hi bd kf lh li lj kj lk ll lm kn jb ln lo kr jf lp lq kv jj lr ls kz lt bi translated">实体示例</h2><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="8aea" class="lg ke hi lz b fi md me l mf mg"><strong class="lz hj">class</strong> <strong class="lz hj">Customer</strong><br/>{<br/>    <strong class="lz hj">private</strong> $currentOrder <strong class="lz hj">=</strong> <strong class="lz hj">null</strong>;<br/><br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">buyItems</strong>(IOrderProcessor $processor)<br/>    {<br/>        <strong class="lz hj">if</strong> (is_null($this<strong class="lz hj">-&gt;</strong>currentOrder)) {<br/>            <strong class="lz hj">return</strong> <strong class="lz hj">false</strong>;<br/>        }<br/><br/>        <strong class="lz hj">return</strong> $processor<strong class="lz hj">-&gt;</strong>checkout($this<strong class="lz hj">-&gt;</strong>currentOrder);<br/>    }<br/><br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">addItem</strong>($item){<br/>        <strong class="lz hj">if</strong> (is_null($this<strong class="lz hj">-&gt;</strong>currentOrder)) {<br/>            $this<strong class="lz hj">-&gt;</strong>currentOrder <strong class="lz hj">=</strong> <strong class="lz hj">new</strong> Order();<br/>        }<br/><br/>        <strong class="lz hj">return</strong> $this<strong class="lz hj">-&gt;</strong>currentOrder<strong class="lz hj">-&gt;</strong>addItem($item);<br/>    }<br/><br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">deleteItem</strong>($item) {<br/>        <strong class="lz hj">if</strong> (is_null($this<strong class="lz hj">-&gt;</strong>currentOrder)) {<br/>            <strong class="lz hj">return</strong> <strong class="lz hj">false</strong>;<br/>        }<br/><br/>        <strong class="lz hj">return</strong> $this<strong class="lz hj">-&gt;</strong>currentOrder<strong class="lz hj">-&gt;</strong>deleteItem($item);<br/>    }<br/>}<br/><br/><strong class="lz hj">interface</strong> <strong class="lz hj">IOrderProcessor</strong><br/>{<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">checkout</strong>($order);<br/>}<br/><br/><strong class="lz hj">class</strong> <strong class="lz hj">OrderProcessor</strong> <strong class="lz hj">implements</strong> IOrderProcessor<br/>{<br/>    <strong class="lz hj">public</strong> <strong class="lz hj">function</strong> <strong class="lz hj">checkout</strong>($order) {<strong class="lz hj">...</strong>}<br/>}</span></pre><h1 id="1f53" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">摘要</h1><h2 id="17cc" class="lg ke hi bd kf lh li lj kj lk ll lm kn jb ln lo kr jf lp lq kv jj lr ls kz lt bi translated">单一责任原则</h2><blockquote class="mi mj mk"><p id="d40f" class="iq ir mh is b it iu iv iw ix iy iz ja ml jc jd je mm jg jh ji mn jk jl jm jn hb bi translated"><em class="hi">应该给每个对象分配一个单独的责任。“为了做到这一点，我们检查我们有多少理由改变这个类——如果不止一个，那么这个类应该被打破。</em></p></blockquote><h2 id="246a" class="lg ke hi bd kf lh li lj kj lk ll lm kn jb ln lo kr jf lp lq kv jj lr ls kz lt bi translated">开放/封闭的原则(开放-封闭)</h2><blockquote class="mi mj mk"><p id="cb66" class="iq ir mh is b it iu iv iw ix iy iz ja ml jc jd je mm jg jh ji mn jk jl jm jn hb bi translated"><em class="hi">软件实体必须对扩展开放，但对修改关闭。为此，我们将我们的类呈现为一个“黑盒”,看看我们是否可以在这种情况下改变它的行为。</em></p></blockquote><h2 id="a112" class="lg ke hi bd kf lh li lj kj lk ll lm kn jb ln lo kr jf lp lq kv jj lr ls kz lt bi translated">替代原理芭芭拉·利斯科夫(Liskov substitution)</h2><blockquote class="mi mj mk"><p id="55ba" class="iq ir mh is b it iu iv iw ix iy iz ja ml jc jd je mm jg jh ji mn jk jl jm jn hb bi translated"><em class="hi">程序中的对象可以被它们的继承者替换，而不改变程序的属性。为此，我们检查是否加强了前置条件，削弱了后置条件。如果出现这种情况，那么原则就没有得到尊重。</em></p></blockquote><h2 id="e8e6" class="lg ke hi bd kf lh li lj kj lk ll lm kn jb ln lo kr jf lp lq kv jj lr ls kz lt bi translated">界面分离</h2><blockquote class="mi mj mk"><p id="b7aa" class="iq ir mh is b it iu iv iw ix iy iz ja ml jc jd je mm jg jh ji mn jk jl jm jn hb bi translated">许多专用接口比一个通用接口要好。我们检查接口包含了多少方法，以及不同的函数是如何叠加在这些方法上的，如果有必要，我们会中断接口。</p></blockquote><h2 id="a9d5" class="lg ke hi bd kf lh li lj kj lk ll lm kn jb ln lo kr jf lp lq kv jj lr ls kz lt bi translated">从属倒置原则</h2><blockquote class="mi mj mk"><p id="1c5c" class="iq ir mh is b it iu iv iw ix iy iz ja ml jc jd je mm jg jh ji mn jk jl jm jn hb bi translated"><em class="hi">依赖应该建立在抽象上，而不是细节上。“我们检查这些类是否依赖于其他类(直接实例化其他类的对象，等等。)而如果这种依赖发生了，我们就用对抽象的依赖来代替。</em></p></blockquote></div><div class="ab cl mo mp gp mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="hb hc hd he hf"><p id="45ba" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">【https://it.badykov.com】原载于2020年3月14日<a class="ae jo" href="https://it.badykov.com/blog/2020/03/14/solid-principles/" rel="noopener ugc nofollow" target="_blank"><em class="mh"/></a><em class="mh">。</em></p></div></div>    
</body>
</html>