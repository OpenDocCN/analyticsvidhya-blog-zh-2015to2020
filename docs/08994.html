<html>
<head>
<title>Face Detection: With 6 simple steps in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">人脸检测:Python 中的 6 个简单步骤</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/face-detection-with-6-simple-steps-in-python-4e3958660dbe?source=collection_archive---------14-----------------------#2020-08-21">https://medium.com/analytics-vidhya/face-detection-with-6-simple-steps-in-python-4e3958660dbe?source=collection_archive---------14-----------------------#2020-08-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/030293e239ef2e57a875e91d7eeb9d2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cQZ-rPhYN2iYMSeh.png"/></div></div></figure><div class=""/><div class=""><h2 id="cbf0" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh dx translated">本文旨在展示我们如何使用 OpenCV 库以最少的步骤检测给定图像中的人脸</h2></div><p id="9484" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">我正在用一个<a class="ae ke" href="https://colab.research.google.com/" rel="noopener ugc nofollow" target="_blank"> Google Colab 笔记本</a>写我的 Python 程序。但是，你可以使用任何你选择的编辑器，比如<a class="ae ke" href="https://code.visualstudio.com/docs/languages/python" rel="noopener ugc nofollow" target="_blank"> VS Code </a>、<a class="ae ke" href="https://www.jetbrains.com/pycharm/" rel="noopener ugc nofollow" target="_blank"> PyCharm </a>等等。</p><blockquote class="kf kg kh"><p id="3744" class="ji jj ki jk b jl jm iu jn jo jp ix jq kj js jt ju kk jw jx jy kl ka kb kc kd hb bi translated">我在这里所做的就是将一幅图像传递给 OpenCV 库，并用它来对照一个训练好的模型来检测人脸。</p></blockquote><h1 id="65b2" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld bi translated">以下是步骤:</h1><h1 id="a11a" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld bi translated">第一步</h1><p id="1f21" class="pw-post-body-paragraph ji jj ht jk b jl le iu jn jo lf ix jq jr lg jt ju jv lh jx jy jz li kb kc kd hb bi translated">打开一个新的 Google Colab 笔记本，导入两个必备库<a class="ae ke" href="https://pypi.org/project/matplotlib/" rel="noopener ugc nofollow" target="_blank"> matplotlib.pyplot </a>和<a class="ae ke" href="https://pypi.org/project/opencv-python/" rel="noopener ugc nofollow" target="_blank"> cv2 </a></p><blockquote class="kf kg kh"><p id="9431" class="ji jj ki jk b jl jm iu jn jo jp ix jq kj js jt ju kk jw jx jy kl ka kb kc kd hb bi translated">我们使用<strong class="jk hu"> matplotlib </strong>来访问给定图像的属性，使用<strong class="jk hu"><em class="ht">cv2</em></strong><em class="ht"/>来访问经过训练的模型，并使用给定图像来检测人脸</p></blockquote><figure class="lk ll lm ln fd hk er es paragraph-image"><div class="er es lj"><img src="../Images/b0942afc8b40ea77dbd06280c1e22a17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*x_eoWbRBACggqx-Xd3PCAQ.png"/></div></figure><p id="b6c4" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated"><em class="ki">如果你正在使用任何其他编辑器，你可以使用</em> <a class="ae ke" href="https://www.w3schools.com/python/python_pip.asp" rel="noopener ugc nofollow" target="_blank"> <em class="ki"> pip 来安装软件包</em> </a></p><h1 id="8d9e" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld bi translated">第二步</h1><p id="f6b4" class="pw-post-body-paragraph ji jj ht jk b jl le iu jn jo lf ix jq jr lg jt ju jv lh jx jy jz li kb kc kd hb bi translated">上传有脸的图像。我更喜欢用集体照，但是你也可以用你选择的任何照片。你可以找到我这里用的图片<a class="ae ke" href="https://github.com/pradeepradyumna/Face-Detection/blob/master/Friends.jpg" rel="noopener ugc nofollow" target="_blank"/>。并上传到笔记本里。</p><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lo"><img src="../Images/46c1e407c8aac1c2aa059627e3ab0c4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mXq_4t1uO4_rql81xWnL8g.jpeg"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">这是我在节目中使用的图片(来自热门情景喜剧《老友记》)</figcaption></figure><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lt"><img src="../Images/5a4dba59348e8a492d2686ef05ee9826.png" data-original-src="https://miro.medium.com/v2/resize:fit:686/format:webp/1*c5BVVB5G43zEInbCLwl00A.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">您可以点击此图标上传图像</figcaption></figure><p id="53f5" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">现在，你已经上传了图片，试着将它读入程序中一个名为<strong class="jk hu"> <em class="ki"> img </em> </strong>的变量。</p><figure class="lk ll lm ln fd hk er es paragraph-image"><div class="er es lu"><img src="../Images/566790212228af98f4b1e6ec6d99211b.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*vvaUbqpjVp2dSVeapWA34Q.png"/></div><figcaption class="lp lq et er es lr ls bd b be z dx translated">您可以通过右键单击文件来复制路径</figcaption></figure><p id="f340" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">使用<a class="ae ke" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.imread.html" rel="noopener ugc nofollow" target="_blank"><strong class="jk hu"><em class="ki">imread()</em></strong></a>将图像加载到变量中</p><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lv"><img src="../Images/df01573f6322c6dcb7ddce49b2d45257.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*ngCiR2pC0dfqlWFCq6tUuw.png"/></div></div></figure><h1 id="6af0" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld bi translated">第三步</h1><p id="5145" class="pw-post-body-paragraph ji jj ht jk b jl le iu jn jo lf ix jq jr lg jt ju jv lh jx jy jz li kb kc kd hb bi translated">现在，是加载模型的时候了。为此，你需要从<a class="ae ke" href="https://github.com/opencv/opencv/tree/master/data/haarcascades" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu"> <em class="ki">哈尔喀</em> </strong> </a>下载其中一个 XML 文件，名为<a class="ae ke" href="https://github.com/opencv/opencv/blob/master/data/haarcascades/haarcascade_frontalface_alt.xml" rel="noopener ugc nofollow" target="_blank"><strong class="jk hu"><em class="ki">haarcascade _ frontal face _ alt . XML</em></strong></a>。你将不得不通过像这样切换到 Raw 模式来复制 XML 内容，或者你甚至可以在这里找到<a class="ae ke" href="https://raw.githubusercontent.com/opencv/opencv/master/data/haarcascades/haarcascade_frontalface_alt.xml" rel="noopener ugc nofollow" target="_blank"/>。</p><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lw"><img src="../Images/7b17de2473fb5b3e1fe1ec79e2d83cf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SftVTTn33OsczAlqY2t7PA.png"/></div></div></figure><blockquote class="kf kg kh"><p id="e303" class="ji jj ki jk b jl jm iu jn jo jp ix jq kj js jt ju kk jw jx jy kl ka kb kc kd hb bi translated"><a class="ae ke" href="https://github.com/opencv/opencv/tree/master/data/haarcascades" rel="noopener ugc nofollow" target="_blank">哈尔喀斯</a>有那么多模型检测人体各个部位像检测眼睛、额脸、下半身、上半身、全身等等。但是我们现在只关注人脸。</p></blockquote><p id="22b5" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">现在，通过复制<a class="ae ke" href="https://docs.opencv.org/3.4/db/d28/tutorial_cascade_classifier.html" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu"> <em class="ki"> cv2 中的文件路径，将模型加载到名为<strong class="jk hu"> <em class="ki"> model </em> </strong>的变量中。级联分类器()</em> </strong> </a></p><figure class="lk ll lm ln fd hk er es paragraph-image"><div class="er es lx"><img src="../Images/2faa6358509cb4793c5d8f0b286f76c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*DUi6CNA2BtcPLPG06hJV-g.png"/></div></figure><h1 id="4ed0" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld bi translated">第四步</h1><p id="f8fe" class="pw-post-body-paragraph ji jj ht jk b jl le iu jn jo lf ix jq jr lg jt ju jv lh jx jy jz li kb kc kd hb bi translated">现在使用 OpenCV <a class="ae ke" href="https://docs.opencv.org/3.4/d1/de5/classcv_1_1CascadeClassifier.html#aaf8181cb63968136476ec4204ffca498" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu"> <em class="ki">的功能之一 detect scale()</em></strong></a>，检测给定图像中的所有人脸，并将其存储在一个名为<strong class="jk hu"> <em class="ki"> faces </em> </strong>的变量中</p><figure class="lk ll lm ln fd hk er es paragraph-image"><div class="er es lv"><img src="../Images/9f9303eeb66ece02cfde8a97e24f91ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*pIYSxdDDj7viMhxC6Bjtbw.png"/></div></figure><h1 id="b628" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld bi translated">第五步</h1><p id="1dbc" class="pw-post-body-paragraph ji jj ht jk b jl le iu jn jo lf ix jq jr lg jt ju jv lh jx jy jz li kb kc kd hb bi translated">一旦我们有了<strong class="jk hu"> <em class="ki">，</em> </strong>个面，我们就可以一个接一个地迭代它们，并标记它们分别绘制白色矩形</p><figure class="lk ll lm ln fd hk er es paragraph-image"><div class="er es lj"><img src="../Images/9538c020352fa306852dca8d8d2a4df8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*5ChWGiUP2Yv3EFWHCbRH_w.png"/></div></figure><p id="5636" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">这个循环可能看起来很棘手，但它所做的只是</p><ol class=""><li id="ceed" class="ly lz ht jk b jl jm jo jp jr ma jv mb jz mc kd md me mf mg bi translated">得到坐标(x，y)和尺寸(w，h)来画一个矩形</li><li id="7108" class="ly lz ht jk b jl mh jo mi jr mj jv mk jz ml kd md me mf mg bi translated">使用<a class="ae ke" href="https://www.w3schools.com/colors/colors_rgb.asp" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu"> <em class="ki">设置颜色，RGB 格式</em> </strong> </a>为矩形。我在这里用了白色(255，255，255)。</li><li id="a369" class="ly lz ht jk b jl mh jo mi jr mj jv mk jz ml kd md me mf mg bi translated">设置矩形边框的粗细。我这里用了 5。</li></ol><p id="0a25" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">所有这些工作都是通过使用<a class="ae ke" href="https://docs.opencv.org/master/d6/d6e/group__imgproc__draw.html#ga07d2f74cadcf8e305e810ce8eed13bc9" rel="noopener ugc nofollow" target="_blank"><strong class="jk hu"><em class="ki">cv2 . rectangle()</em></strong></a>完成的</p><h1 id="8f89" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld bi translated">最后一步</h1><p id="aee5" class="pw-post-body-paragraph ji jj ht jk b jl le iu jn jo lf ix jq jr lg jt ju jv lh jx jy jz li kb kc kd hb bi translated">使用<a class="ae ke" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.imshow.html#matplotlib.pyplot.imshow" rel="noopener ugc nofollow" target="_blank"><strong class="jk hu"><em class="ki">【imshow()</em></strong></a>显示检测到的人脸周围带有矩形标记的图像</p><figure class="lk ll lm ln fd hk er es paragraph-image"><div class="er es lv"><img src="../Images/ba40840a9b38a910dd3832e366880f95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*3_VHZUWTCtcQRNmZDvxaHQ.png"/></div></figure><blockquote class="kf kg kh"><p id="4419" class="ji jj ki jk b jl jm iu jn jo jp ix jq kj js jt ju kk jw jx jy kl ka kb kc kd hb bi translated">下面是运行最终代码后带有标记的图像的样子</p></blockquote><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mm"><img src="../Images/54dc0fff121fe1fb8e936bd817528636.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R7NXXmlzoPJJVgJjKyBEHw.png"/></div></div></figure><blockquote class="mn"><p id="9327" class="mo mp ht bd mq mr ms mt mu mv mw kd dx translated">这是整个代码的样子</p></blockquote><figure class="my mz na nb nc hk er es paragraph-image"><div class="er es mx"><img src="../Images/86ac80ce0c034103593f1debd4e72b84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*HWNCFP4_9VgE8CKY9sk-Tg.png"/></div></figure><p id="4403" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">你可以在我的 Colab 笔记本<a class="ae ke" href="https://colab.research.google.com/drive/1cndOr-YmXH8ZBc6_QvwvuEoczBVGpO6O" rel="noopener ugc nofollow" target="_blank">这里</a>甚至在这个<a class="ae ke" href="https://github.com/pradeepradyumna/Face-Detection" rel="noopener ugc nofollow" target="_blank"> Github 库</a>里找到代码。</p><blockquote class="mn"><p id="ec59" class="mo mp ht bd mq mr nd ne nf ng nh kd dx translated">我希望它是有用的！</p></blockquote></div></div>    
</body>
</html>