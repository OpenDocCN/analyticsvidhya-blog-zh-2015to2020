<html>
<head>
<title>Azure Python Functions — CI/CD Pipeline from GitHub to Functions App using Azure DevOps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Azure Python函数——使用Azure DevOps从GitHub到函数应用程序的CI/CD管道</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/azure-python-functions-ci-cd-pipeline-from-github-to-functions-app-using-azure-devops-330eadc2b583?source=collection_archive---------15-----------------------#2020-05-31">https://medium.com/analytics-vidhya/azure-python-functions-ci-cd-pipeline-from-github-to-functions-app-using-azure-devops-330eadc2b583?source=collection_archive---------15-----------------------#2020-05-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/8114a939124d13138f26d25a2e581105.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hUL6Mw-JEO-UZD13"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">安德鲁·曼塔罗在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="70da" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">TL</strong>；<strong class="ix hj"> DR </strong>本文介绍了如何构建从GitHub到Azure Functions App的CI/CD管道，摘要如下</p><blockquote class="jt ju jv"><p id="6d21" class="iv iw jw ix b iy iz ja jb jc jd je jf jx jh ji jj jy jl jm jn jz jp jq jr js hb bi translated">了解Azure管道设置和源/目标连接。</p><p id="21ee" class="iv iw jw ix b iy iz ja jb jc jd je jf jx jh ji jj jy jl jm jn jz jp jq jr js hb bi translated">将GitHub存储库与Azure Pipeline集成，查看azure-pipelines.yml。</p><p id="b8e3" class="iv iw jw ix b iy iz ja jb jc jd je jf jx jh ji jj jy jl jm jn jz jp jq jr js hb bi translated">将Azure Pipeline与Azure Functions应用程序集成。</p><p id="6720" class="iv iw jw ix b iy iz ja jb jc jd je jf jx jh ji jj jy jl jm jn jz jp jq jr js hb bi translated">在Azure Portal上检查构建并测试Azure Python函数代码。</p></blockquote><p id="77d9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们更深入地探讨这个话题。几个月前，我发表了一篇关于用Travis CI为自动化测试建立CI管道的文章。我一直在Azure上开发数据管道，并倾向于寻找一个与Azure无缝集成的解决方案。用于Azure functions的VS代码扩展无缝工作，尽管它没有提供一个完整的带有CI/CD的DevOps套件，集成不同的存储库，测试，自动化构建和管理发布版本，Azure DevOps就是为此而专门构建的。</p><p id="ffdf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有不同的<a class="ae iu" href="https://azure.microsoft.com/en-us/pricing/details/devops/azure-devops-services/" rel="noopener ugc nofollow" target="_blank">计划</a>可用于单个服务和基本计划，单个任务和团队的基本+测试计划。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ka"><img src="../Images/6d36c7dfeb4acabe10889b2a660ed3e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HZ5nATJy7uI2kaggKdVC5A.png"/></div></div></figure><p id="cb84" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我的Azure functions测试库托管在GitHub上，有一个选项可以直接设置从GitHub到Azure Functions应用程序的管道。</p><p id="928a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">登录后，创建一个新项目。设置项目的公共或私人访问权限。</p><p id="ab61" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤1:创建一个新的DevOps项目，并将存储库设置为Public/Private。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kf"><img src="../Images/479ac35099c532bf499d2355fde35cf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kR19AWEa6gZ19O3yESsEnQ.png"/></div></div></figure><p id="2d72" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤2:创建一个新的管道。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kg"><img src="../Images/798a96132bf8075e76d6b5e29bdfc164.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x05hOx0EVLIBNvHzMRkNBA.png"/></div></div></figure><p id="b7ba" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤3:将管道连接到源存储库，在我的例子中是GitHub。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kh"><img src="../Images/f43e9fef5292ea760a7495794e9c1013.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nAm_wwRuVkFqRTtd3IZetA.png"/></div></div></figure><p id="0e85" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤4:认证GitHub以允许访问Azure DevOps。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div class="er es ki"><img src="../Images/0e24f14aa93bf82b8d0ad125e0a9aab8.png" data-original-src="https://miro.medium.com/v2/resize:fit:578/format:webp/1*3GoctecW79uMV8q-Zg7AmQ.png"/></div></figure><p id="0c41" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤5:授权Azure管道。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div class="er es kj"><img src="../Images/59a8ef01066a693dfba2c73d8828accc.png" data-original-src="https://miro.medium.com/v2/resize:fit:856/format:webp/1*LkiTiOPnIl6rro8y6AM86g.png"/></div></figure><p id="0c35" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">第6步:从GitHub中选择作为源的存储库。在这种情况下我选择<a class="ae iu" href="https://github.com/prkapur/azure-functions-python-httptrigger" rel="noopener ugc nofollow" target="_blank"><em class="jw">azure-functions-python-http trigger</em></a>。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kk"><img src="../Images/714a1c1f740a35e968909cc5fd49326f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6XcPAQyjVNIlvC7i01U3_w.png"/></div></div></figure><p id="0a8a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤7:批准并安装所选存储库的管道。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div class="er es kl"><img src="../Images/271c8db0ac31c1cbb392e59888f528fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:770/format:webp/1*NvViOIxX7enEiaT31JuvQg.png"/></div></figure><p id="740d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤8:为要连接的管道配置目标。在这种情况下，我们将Python函数应用程序部署到Azure上的Linux，我已经在Azure上配置和设置了它。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es km"><img src="../Images/c9d061938c6066b6b578b28ba3371a9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RFFrpsclh3Log6ndflOD7g.png"/></div></div></figure><p id="b3f0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤9:选择托管Azure Functions应用程序的Azure订阅。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es km"><img src="../Images/9a9c06a336e92238ea978a12f4551002.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wTWHkw9XavZ88-0X10X73Q.png"/></div></div></figure><p id="6023" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤10:选择之前设置的Azure Functions应用名称。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kn"><img src="../Images/de51501c859495315497eb4f95ef58ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p_rfAGNhCAxv9oBBA5LFdQ.png"/></div></div></figure><p id="c3f6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤11:检查azure-pipelines YAML文件。检查完毕后，单击保存并运行以触发构建。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ko"><img src="../Images/ef1b8b4585a853f820692875080ec852.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p0gMAMJxhrEZrCBzVrT-rw.png"/></div></div></figure><p id="1631" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤12:下面的仪表板显示我正在推进到我的开发分支，并显示不同阶段的状态。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kp"><img src="../Images/4a48661e525735bec2b0bdff22e6011a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UsG2ihj-9koLvdHexGWD5g.png"/></div></div></figure><p id="2f98" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤13:构建和部署已经完成，如下所示。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kq"><img src="../Images/4262b6006f99ae6d2fca4375378e6000.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tU42GvD7fq8BK0zdeK1Gtg.png"/></div></div></figure><p id="712b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤14:GitHub上的开发分支已经用azure-pipelines.yml文件更新。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kr"><img src="../Images/1065ab6a7cb223ad91354289a6ae0c12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XAfnLb8qK2e4PWe4n2j6gQ.png"/></div></div></figure><p id="50dd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">第15步:Azure Pipelines接下来完成将存储库部署到Azure Functions应用程序中，该应用程序可以在Azure上查看。我正在测试应用程序中代码的结果。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ks"><img src="../Images/abac9aedb1e6406b010c4b44c2b7f318.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Y5G4gdnTY26cKhjRV-7Bw.png"/></div></div></figure><p id="a106" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤16:在代码测试窗口中，我在查询参数中输入我的名字。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kq"><img src="../Images/b9b8e41d52006e2da88569a94f55c47f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HvT-JYwBURGQQjx_T2s88A.png"/></div></div></figure><p id="fba0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤17:我可以看到预期的输出被返回。</p><figure class="kb kc kd ke fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kh"><img src="../Images/e2f5f5b296fa1aa86c2103e3a2620550.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WqF61xkykKPyPJQ_dlmlyw.png"/></div></div></figure><p id="fa38" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这就结束了使用GitHub上托管的源存储库和Azure Functions应用程序上托管的目标应用程序设置CI/CD管道的过程。希望这是有帮助的，如果你有任何问题或意见，你可以在下面留下回复。</p></div></div>    
</body>
</html>