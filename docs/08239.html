<html>
<head>
<title>Mosaic Plot in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的镶嵌图</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/hello-everyone-4f9400e008dc?source=collection_archive---------3-----------------------#2020-07-22">https://medium.com/analytics-vidhya/hello-everyone-4f9400e008dc?source=collection_archive---------3-----------------------#2020-07-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="96c9" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">Python中的数据可视化工具:-镶嵌图</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ix"><img src="../Images/9e48d50bbef77f4f7a998ed3a6abdc60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*8wXG5vMMQR4szJpYi24OvA.jpeg"/></div><figcaption class="jf jg et er es jh ji bd b be z dx translated">图片提供:-互联网</figcaption></figure><p id="6fdc" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">大家好，</p><p id="08cc" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在本文中，我们将了解镶嵌图，交叉表和镶嵌图的区别，如何在Python中绘制镶嵌图，镶嵌图的使用。</p><p id="93ef" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">先决条件:- Python基本编码知识</p><p id="70c1" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">假设我们有一个数据集，其中有一列“性别”,另一个特征是“教育”,包含“研究生”和“非研究生”作为一个因素。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es kf"><img src="../Images/b15ab197872cc152b6724aa31165e019.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*fRhFsCbQ592Fyo1-uXeErw.png"/></div></figure><p id="9a86" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">男性毕业生:-2人(50%)，女性毕业生:-3人(75%)</p><p id="e4a6" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们需要在这两个特征之间找到一些洞察力，也就是说，我们必须找到哪一个“性别”的班级有更多的毕业生，哪一个班级有更少的“毕业生”。那么我们该怎么做呢？</p><p id="4bf3" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">一种方式是熊猫的库的crosstab函数。但它只是给出数字。如何使之图形化，有效可视化？</p><p id="f0c2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这里马赛克图可以帮助我们。</p><p id="8fd3" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">目录:- </strong></p><ol class=""><li id="d0a3" class="kg kh hi jl b jm jn jp jq js ki jw kj ka kk ke kl km kn ko bi translated">马赛克有哪些剧情和用途？</li><li id="5fdb" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">交叉表和镶嵌图的区别</li><li id="affe" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">用Python绘制镶嵌图的一个例子</li></ol><p id="1055" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">嗯，</p><ol class=""><li id="d8cf" class="kg kh hi jl b jm jn jp jq js ki jw kj ka kk ke kl km kn ko bi translated"><strong class="jl hj">什么是马赛克剧情:- </strong></li></ol><p id="099c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">镶嵌图是一种将两个或多个定性数据可视化的图形方法。它也被称为<em class="ku">交叉表</em>或<em class="ku">双向</em>表，用于总结几个分类变量之间的关系。镶嵌图基于条件概率。</p><p id="f780" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">2.<strong class="jl hj">交叉表和镶嵌图的区别:</strong> -</p><p id="b383" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">Mosaic Plot(也称为Marimekko diagram)不过是python中(pd.crosstab())函数的进一步版本。Crosstab函数只是给了我们一个数字表，而Mosaic Plot给出了我们可以在数据分析报告中使用的图形。</p><p id="c930" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">3.<strong class="jl hj">如何用Python绘制镶嵌图:- </strong></p><p id="fd68" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">为了绘制马赛克图，我们将获取一个信用风险数据集。你可以从<a class="ae kv" href="https://github.com/Dnp1995/Datasets/blob/main/credit_risk_train_data.csv" rel="noopener ugc nofollow" target="_blank">这里</a>下载</p><p id="e646" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">首先，我们将导入所有必需的库。</p><pre class="iy iz ja jb fd kw kx ky kz aw la bi"><span id="0a5f" class="lb lc hi kx b fi ld le l lf lg">import pandas as pd<br/>import numpy as np<br/>import matplotlib.pyplot as plt<br/>from statsmodels.graphics.mosaicplot import mosaic<br/>from itertools import product</span></pre><p id="8236" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">然后，我们将加载上面讨论过的数据集。</p><p id="5146" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">让我们使用交叉表函数来看看“性别”和“教育程度”之间的计数关系。</p><pre class="iy iz ja jb fd kw kx ky kz aw la bi"><span id="f725" class="lb lc hi kx b fi ld le l lf lg">crosstable=pd.crosstab(df['Gender'],df['Education'])<br/>crosstable</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lh"><img src="../Images/bb00aac1c5f9527273a97d138278dc83.png" data-original-src="https://miro.medium.com/v2/resize:fit:586/format:webp/1*HJLrMHZrSOUZboxY2ghRWg.png"/></div><figcaption class="jf jg et er es jh ji bd b be z dx translated">交叉表</figcaption></figure><p id="2167" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在这里，我们可以看到，在总共489名男性毕业生中，男性毕业生人数为376人，在总共112名女性毕业生中，女性毕业生人数为92人。因此，男性毕业生比例为76%，女性毕业生比例为82%，高于男性毕业生比例。</p><p id="8997" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，我们将借助镶嵌图来可视化这些数据。</p><p id="e824" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们已经从statsmodels库中导入了马赛克。mosaic是一个用于绘制镶嵌图的功能。</p><p id="c414" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">它包含四个参数</p><p id="4245" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">(数据、特性、标签、属性)如下所示</p><p id="33ff" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">属性</strong>参数用于固定颜色</p><p id="d82e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> labelizer </strong>参数用于给绘图中的标签和计数</p><pre class="iy iz ja jb fd kw kx ky kz aw la bi"><span id="da91" class="lb lc hi kx b fi ld le l lf lg">props={}<br/>props[('Male','Yes')]={'facecolor':'red', 'edgecolor':'white'}<br/>props[('Male','No')]={'facecolor':'red', 'edgecolor':'white'}</span><span id="f2a4" class="lb lc hi kx b fi li le l lf lg">props[('Female','Yes')]={'facecolor':'xkcd:aqua','edgecolor':'white'}</span><span id="4dc1" class="lb lc hi kx b fi li le l lf lg">props[('Female','No')]=        {'facecolor':'xkcd:aqua','edgecolor':'white'}</span><span id="92b0" class="lb lc hi kx b fi li le l lf lg">labelizer=lambda k:{('Male','Yes'):357,('Female','Yes'):31,('Male','No'):130,('Female','No'):80}[k]</span><span id="17ce" class="lb lc hi kx b fi li le l lf lg">mosaic(df,['Gender','married'],labelizer=labelizer,properties=props)</span></pre><p id="c33c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">运行此代码后，我们将得到以下马赛克图</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lj"><img src="../Images/f2a4ce3030ecd2724acf9cc52d239739.png" data-original-src="https://miro.medium.com/v2/resize:fit:938/format:webp/1*osrqXrGwV5XzNsSgpo79iw.png"/></div></figure><p id="e671" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们也可以用百分比替换计数，并添加到我们的分析报告中，这将是非常好的可视化。</p><p id="9f2f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">谢谢大家！</p><p id="2c12" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果你有任何疑问或者想要更多的见解，请通过<a class="ae kv" href="https://www.linkedin.com/in/dhiraj-patil-analyst" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>联系我</p><h1 id="086e" class="lk lc hi bd ll lm ln lo lp lq lr ls lt io lu ip lv ir lw is lx iu ly iv lz ma bi translated">如果你喜欢这篇文章，请鼓掌！</h1></div></div>    
</body>
</html>