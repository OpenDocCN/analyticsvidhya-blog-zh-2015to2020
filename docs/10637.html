<html>
<head>
<title>Fun Flutter Animations — Part 1 — Carrom Ball Animation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">有趣的颤动动画—第 1 部分—旋转球动画</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/fun-flutter-animations-part-1-carrom-ball-animation-c9d2b6e72528?source=collection_archive---------14-----------------------#2020-10-27">https://medium.com/analytics-vidhya/fun-flutter-animations-part-1-carrom-ball-animation-c9d2b6e72528?source=collection_archive---------14-----------------------#2020-10-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/7e8c2c55cc443d2d1534b6ea17721111.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*bNMDVoS5w3KMPoKnyGepbQ.gif"/></div></div></figure><p id="8dc2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi jo translated"><span class="l jp jq jr bm js jt ju jv jw di">我们</span> <strong class="is hj">有一个球，点击它会移动到屏幕中的任意位置，并且还会改变它的颜色。</strong></p><p id="853a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们把它分成几个步骤:</p><ol class=""><li id="65fb" class="jx jy hi is b it iu ix iy jb jz jf ka jj kb jn kc kd ke kf bi translated"><em class="kg">首先我们需要造球。</em></li><li id="f73d" class="jx jy hi is b it kh ix ki jb kj jf kk jj kl jn kc kd ke kf bi translated"><em class="kg">接下来，我们需要将球移动到一个新的位置。</em></li><li id="9048" class="jx jy hi is b it kh ix ki jb kj jf kk jj kl jn kc kd ke kf bi translated"><em class="kg">最后，我们还必须改变球被按下时的颜色。</em></li></ol><h2 id="456b" class="km kn hi bd ko kp kq kr ks kt ku kv kw jb kx ky kz jf la lb lc jj ld le lf lg bi translated">造球</h2><figure class="li lj lk ll fd ij er es paragraph-image"><div class="er es lh"><img src="../Images/13a379b6b529577d3a11459c40f8a659.png" data-original-src="https://miro.medium.com/v2/resize:fit:696/format:webp/1*vUmHNt_CgsiLoAevckCL3A.png"/></div></figure><figure class="li lj lk ll fd ij er es paragraph-image"><div class="er es lm"><img src="../Images/e5fed3666e3213c8e82c8a4494035381.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/1*X9fZasW68WiUjd0jUXPKzA.png"/></div></figure><p id="0dae" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们使用一个<a class="ae ln" href="https://api.flutter.dev/flutter/widgets/Container-class.html" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">容器</strong> </a>小部件，为球提供固定的宽度和高度。我们在容器 BoxDecoration 的 shape 参数中传递 Boxshape.circle，使其形状为圆形。我们为<strong class="is hj"><em class="kg">“PRESS”</em></strong>文本添加一个文本小部件子容器。我们将文本小部件包装在一个中心小部件中，使其在容器中居中。最后，我们将容器包装在一个<a class="ae ln" href="https://api.flutter.dev/flutter/material/Card-class.html" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">卡片</strong> </a>小部件中，这样我们可以给它一个仰角，使球看起来像是在漂浮。</p><h2 id="8ef7" class="km kn hi bd ko kp kq kr ks kt ku kv kw jb kx ky kz jf la lb lc jj ld le lf lg bi translated">按下时移动球</h2><p id="58d4" class="pw-post-body-paragraph iq ir hi is b it lo iv iw ix lp iz ja jb lq jd je jf lr jh ji jj ls jl jm jn hb bi translated">好了，现在球准备好了，我们如何平稳地移动它呢？</p><p id="465f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将为此使用一个<a class="ae ln" href="https://api.flutter.dev/flutter/widgets/AnimatedAlign-class.html" rel="noopener ugc nofollow" target="_blank"><strong class="is hj">animated align</strong></a>小部件。它类似于<a class="ae ln" href="https://api.flutter.dev/flutter/widgets/Align-class.html" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> Align </strong> </a>小部件，该小部件采用对齐参数并将子部件相对于父部件对齐。然而，不同的是，如果我们改变小部件的对齐方式，它会将小部件从以前的对齐方式平滑地过渡到新的对齐方式，使小部件看起来像是从一个地方移动到另一个地方。让我们看看这是如何工作的。</p><figure class="li lj lk ll fd ij er es paragraph-image"><div class="er es lt"><img src="../Images/378998dd002e1d2f02449ab19d4afd6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/format:webp/1*OELKy5zP02O6tHjezrTlGw.png"/></div></figure><p id="52d9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，我们必须为 AnimatedAlign 小部件提供几个参数:</p><figure class="li lj lk ll fd ij er es paragraph-image"><div class="er es lu"><img src="../Images/5a9c13294b3cb6298382ee353142660c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1108/format:webp/1*1mZ0huDAxozAP1ynITK4BQ.png"/></div></figure><ol class=""><li id="e70a" class="jx jy hi is b it iu ix iy jb jz jf ka jj kb jn kc kd ke kf bi translated"><strong class="is hj">持续时间</strong> - &gt; <em class="kg">这是球从一点到另一点所用的时间。</em></li><li id="eaf1" class="jx jy hi is b it kh ix ki jb kj jf kk jj kl jn kc kd ke kf bi translated"><strong class="is hj">曲线</strong> - &gt; <em class="kg">这是球从一点过渡到另一点时所遵循的曲线。默认情况下，它是一条线性曲线。我提供了一个平滑的曲线，让球在移动的时候看起来有点反弹。</em></li><li id="a862" class="jx jy hi is b it kh ix ki jb kj jf kk jj kl jn kc kd ke kf bi translated"><strong class="is hj">对准</strong>-&gt;-<em class="kg">球的起始对准。</em></li></ol><p id="9635" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，接下来是我们如何在受压时移动球。很简单，我们将小部件的对齐方式改为新的对齐方式。我们用一个<a class="ae ln" href="https://api.flutter.dev/flutter/widgets/GestureDetector-class.html" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">手势检测器</strong> </a>小部件包装卡片小部件，并且在它的 OnTap 处理程序中，我们将对齐设置为一个新的对齐，由 randomAlign()函数确定。</p><figure class="li lj lk ll fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lv"><img src="../Images/c0988ad4623a0855f66b3994b4c02eb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yLBvej-w9DceONgf1nh0Rw.png"/></div></div></figure><p id="81b1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们看看 randomAlign()函数的作用。</p><p id="4073" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">每次调用该函数时，我们都返回一个新的 x 和 y 坐标的对齐方式。(x，y)是从-1.0 到 1.0 的双精度值。其中(-1.0，-1.0)是屏幕的左上方，(1.0，1.0)是屏幕的右下方。所以我们需要给 x 和 y 分别赋一个-1.0 &amp; 1.0 之间的随机值。</p><p id="096e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们使用 Random()。nextDouble()函数获得一个介于 0 和 1.0 之间的随机 Double 值</p><p id="9191" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，我们使用 Random.nextBool()获得一个随机 Bool 值(true 或 false ),然后将它放入 boolToSign 映射中，该映射将 bool 值映射为+1 或-1。</p><p id="f921" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后将上述两个随机值相乘，我们将得到一个介于-1.0 和 1.0 之间的随机值</p><h2 id="e9ba" class="km kn hi bd ko kp kq kr ks kt ku kv kw jb kx ky kz jf la lb lc jj ld le lf lg bi translated">3.改变颜色</h2><p id="35ce" class="pw-post-body-paragraph iq ir hi is b it lo iv iw ix lp iz ja jb lq jd je jf lr jh ji jj ls jl jm jn hb bi translated">这是容易的部分。</p><figure class="li lj lk ll fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lw"><img src="../Images/be3659d1d3a3aa6bd50e754c8d1ff7ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*n7kPFOHGzqIbOX2Ly39M5A.png"/></div></div></figure><p id="f1af" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先用一个<a class="ae ln" href="https://api.flutter.dev/flutter/widgets/AnimatedContainer-class.html" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">动画容器</strong> </a>小部件替换容器小部件，并填充曲线、持续时间&amp;颜色参数。</p><figure class="li lj lk ll fd ij er es paragraph-image"><div class="er es lx"><img src="../Images/fc9c7e195a7dc51edecf14386c75fe1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/1*nXDW__mb7LnThNdNwvRWtQ.png"/></div></figure><p id="11fc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，在 onTap 处理程序中，也使用 randomColor()函数将颜色设置为新颜色。</p><figure class="li lj lk ll fd ij er es paragraph-image"><div class="er es ly"><img src="../Images/e96237e4a4e2d53cb0a832d6db60067d.png" data-original-src="https://miro.medium.com/v2/resize:fit:886/format:webp/1*j55yvVwuo2lNrfx8GTxodg.png"/></div></figure><p id="36fc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">randomColor()函数使用 Random()。nextInt(7)函数获取 0 到 6 之间的随机整数。然后，它将该值传递给 intToColor 映射以获取颜色。</p><p id="2fbc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">万岁！！！一切都搞定了。按住球，看它移动。</strong></p><blockquote class="lz ma mb"><p id="5695" class="iq ir kg is b it iu iv iw ix iy iz ja mc jc jd je md jg jh ji me jk jl jm jn hb bi translated">F <!-- -->或者完整的代码请参考我这里的 github 回购:<a class="ae ln" href="https://github.com/realdiganta/fun-flutter-animations" rel="noopener ugc nofollow" target="_blank">https://github.com/realdiganta/fun-flutter-animations</a></p></blockquote><p id="b80e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要了解更多关于 Flutter 中动画的信息，请参考以下链接:</p><ol class=""><li id="1ebd" class="jx jy hi is b it iu ix iy jb jz jf ka jj kb jn kc kd ke kf bi translated"><a class="ae ln" href="https://flutter.dev/docs/codelabs/implicit-animations" rel="noopener ugc nofollow" target="_blank"> <em class="kg">隐式动画中的颤动</em> </a></li><li id="a0c1" class="jx jy hi is b it kh ix ki jb kj jf kk jj kl jn kc kd ke kf bi translated"><a class="ae ln" href="https://api.flutter.dev/flutter/animation/animation-library.html" rel="noopener ugc nofollow" target="_blank"> <em class="kg">颤动动画库</em> </a></li><li id="9929" class="jx jy hi is b it kh ix ki jb kj jf kk jj kl jn kc kd ke kf bi translated"><a class="ae ln" href="https://flutter.dev/docs/development/ui/animations" rel="noopener ugc nofollow" target="_blank"> <em class="kg">动画简介</em> </a></li></ol><blockquote class="lz ma mb"><p id="4944" class="iq ir kg is b it iu iv iw ix iy iz ja mc jc jd je md jg jh ji me jk jl jm jn hb bi translated">如有任何问题，请联系我:digantakalita.ai@gmail.com</p></blockquote><h2 id="df51" class="km kn hi bd ko kp kq kr ks kt ku kv kw jb kx ky kz jf la lb lc jj ld le lf lg bi translated">我会在这个系列中加入新的古怪有趣的颤动动画文章。因此，要获得直接更新，请在 medium 上关注我或在 github 上启动我的回购。谢谢你。</h2></div></div>    
</body>
</html>