<html>
<head>
<title>Configure Cassandra With Django</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç”¨å§œæˆˆé…ç½®å¡çŠå¾·æ‹‰</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/analytics-vidhya/configure-cassandra-with-django-1b7f5d084c6e?source=collection_archive---------13-----------------------#2020-03-30">https://medium.com/analytics-vidhya/configure-cassandra-with-django-1b7f5d084c6e?source=collection_archive---------13-----------------------#2020-03-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="d99e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Cassandra æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼æ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€‚å®ƒæ˜¯ä¸ºå¤„ç†å•†ç”¨ç¡¬ä»¶æˆ–äº‘åŸºç¡€è®¾æ–½ä¸Šçš„å¤§é‡æ•°æ®è€Œå¼€å‘çš„ã€‚Cassandraæä¾›æ— å•ç‚¹æ•…éšœçš„é«˜å¯ç”¨æ€§ã€‚</p><p id="4235" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Cassandraé€šè¿‡åœ¨ä¸åœæœºæˆ–ä¸ä¸­æ–­åº”ç”¨ç¨‹åºçš„æƒ…å†µä¸‹æ·»åŠ æ–°æœºå™¨æ¥æ”¯æŒçº¿æ€§å¯ä¼¸ç¼©æ€§ï¼Œè¿˜å¢åŠ äº†Cassandraçš„è¯»å†™ååé‡ã€‚</p><p id="f36f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">é›†ç¾¤ä¸­çš„æ¯ä¸ªCassandraèŠ‚ç‚¹å°†å…·æœ‰ç›¸åŒçš„è§’è‰²ã€‚æ•°æ®åˆ†å¸ƒåœ¨æ•´ä¸ªç¾¤é›†ä¸­ï¼Œè¿™æ„å‘³ç€æ¯ä¸ªèŠ‚ç‚¹ä¿å­˜ä¸åŒçš„æ•°æ®ã€‚Cassandraæ”¯æŒå¤åˆ¶å’Œå¤šæ•°æ®ä¸­å¿ƒå¤åˆ¶ï¼Œç”¨äºå†—ä½™ã€æ•…éšœè½¬ç§»å’Œç¾éš¾æ¢å¤ã€‚</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/b1be5885234f4e24a6a5d7b01f1fa87b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*9cYThS_p99DRDDovkcxkmQ.png"/></div></figure><p id="11f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¦‚æœæ‚¨è®¡åˆ’è®¾è®¡ä¸€ä¸ªåŸºäºå•ç‰‡æ¶æ„(å‚ç›´æ‰©å±•)çš„åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”ä»ç„¶å†³å®šä½¿ç”¨æ•°æ®åº“ã€‚</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es jm"><img src="../Images/486bd7e20108d438b35db97ced297552.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yYKwVI81AiZA78NJySgRYQ.png"/></div></div></figure><p id="2c94" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å—¯ï¼Œè¿™å–å†³äºä½ ï¼Œä½†åœ¨æˆ‘çœ‹æ¥ï¼Œå¡çŠå¾·æ‹‰å°†æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p><p id="3160" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://db-engines.com/en/system/Cassandra%3bMongoDB%3bPostgreSQL" rel="noopener ugc nofollow" target="_blank">å¡çŠå¾·æ‹‰vs MongoDB vs PostgreSQL </a></p></div><div class="ab cl jr js gp jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="hb hc hd he hf"><h1 id="7f27" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated"><strong class="ak">å®‰è£…å¡çŠå¾·æ‹‰(Ubuntu 18.04) </strong></h1><p id="ff53" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq ky is it iu kz iw ix iy la ja jb jc hb bi translated">å› ä¸ºCassandraæ˜¯ç”¨javaå®ç°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å®‰è£…ä¸€äº›ä¾èµ–é¡¹ã€‚</p><p id="c1bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">æ­¥éª¤1: <em class="lb">è¿™ä¸ªå‘½ä»¤æä¾›äº†æ‰€ä½¿ç”¨çš„aptåº“çš„æŠ½è±¡ã€‚</em>T9ã€‘</strong></p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="0d45" class="lh jz hi ld b fi li lj l lk ll"><strong class="ld hj">$</strong> sudo apt-get install software-properties-common</span></pre><p id="3460" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">æ­¥éª¤2: <em class="lb">ä½¿ç”¨æ­¤å‘½ä»¤æ·»åŠ ä¸ªäººç¨‹åºåŒ…æ¡£æ¡ˆ(PPA)ä»¥å®‰è£…oracle JREç¨‹åºåŒ…ã€‚</em>T13ã€‘</strong></p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="448d" class="lh jz hi ld b fi li lj l lk ll"><strong class="ld hj">$</strong> sudo apt-add-repository ppa:webupd8team/java</span></pre><p id="7cd0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">ç¬¬ä¸‰æ­¥:<em class="lb">ä»repoä¸‹è½½æ›´æ–°ã€‚</em> </strong></p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="898c" class="lh jz hi ld b fi li lj l lk ll"><strong class="ld hj">$</strong> sudo apt-get update</span></pre><p id="754b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">ç¬¬å››æ­¥:<em class="lb">å®‰è£…javaã€‚</em> </strong></p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="05a6" class="lh jz hi ld b fi li lj l lk ll"><strong class="ld hj">$</strong> sudo apt install oracle-java8-installer</span></pre><p id="ecb2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¡ä½äº†ï¼</p><p id="4572" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">ç¬¬äº”æ­¥:</strong> <strong class="ih hj"> <em class="lb">(å¯é€‰)</em> </strong></p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="424d" class="lh jz hi ld b fi li lj l lk ll"><strong class="ld hj">$</strong> sudo apt install -y openjdk-8-jre</span></pre><p id="1bf9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æœ€åğŸ˜æˆ‘ä»¬å®‰è£…æ‰€æœ‰çš„ä¾èµ–é¡¹ï¼Œè®©æˆ‘ä»¬å®‰è£…Cassandraã€‚</p><p id="2301" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">ç¬¬ä¸€æ­¥:<em class="lb">æ·»åŠ ä¸€ä¸ªcassandra repoã€‚</em> </strong></p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="eb9e" class="lh jz hi ld b fi li lj l lk ll"><strong class="ld hj">$</strong> echo "deb http://www.apache.org/dist/cassandra/debian 311x main" |         sudo tee -a /etc/apt/sources.list.d/cassandra.sources.list</span></pre><p id="9cf6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">æ­¥éª¤2: <em class="lb">æ·»åŠ Cassandra repoçš„å…¬é’¥ï¼Œè¿™æ ·å°±ä¸ä¼šé‡åˆ°GPGé”™è¯¯ã€‚</em> </strong></p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="333d" class="lh jz hi ld b fi li lj l lk ll"><strong class="ld hj">$ </strong>wget https://www.apache.org/dist/cassandra/KEYS | sudo apt-key add -</span></pre><p id="0ac1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¦‚æœä½ é‡åˆ°GPGé”™è¯¯ã€‚</p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="1de7" class="lh jz hi ld b fi li lj l lk ll"><strong class="ld hj">$</strong> gpg - keyserver pgp.mit.edu - recv-keys 749D6EEC0353B12C<br/><strong class="ld hj">$</strong> gpg --export --armor 749D6EEC0353B12C | sudo apt-key add -<br/><strong class="ld hj">$</strong> gpg --keyserver pgp.mit.edu --recv-keys A278B781FE4B2BDA<br/><strong class="ld hj">$</strong> gpg --export --armor A278B781FE4B2BDA | sudo apt-key add -</span></pre><p id="b742" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">ç¬¬ä¸‰æ­¥:<em class="lb">å®‰è£…å¸¦ç½‘ç»œæ—¶é—´åè®®(ntp)çš„Cassandra</em></strong></p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="7755" class="lh jz hi ld b fi li lj l lk ll"><strong class="ld hj">$</strong> sudo apt-get install cassandra ntp</span></pre><p id="22da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¦æ£€æŸ¥å®‰è£…æ˜¯å¦æˆåŠŸï¼Œæˆ‘ä»¬å¯ä»¥æ£€æŸ¥æœåŠ¡çš„çŠ¶æ€ã€‚ä¸ºæ­¤ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤:</p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="7944" class="lh jz hi ld b fi li lj l lk ll"><strong class="ld hj">$</strong> sudo systemctl status cassandra</span></pre><p id="23a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¦‚æœç³»ç»Ÿå¯åŠ¨æ—¶å°šæœªå¯ç”¨è¯¥æœåŠ¡ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥å¯ç”¨å®ƒ</p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="32c8" class="lh jz hi ld b fi li lj l lk ll"><strong class="ld hj">$</strong> sudo systemctl enable cassandra</span></pre><p id="3244" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¹¶å¯åŠ¨å¡çŠå¾·æ‹‰æœåŠ¡ã€‚</p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="26d6" class="lh jz hi ld b fi li lj l lk ll"><strong class="ld hj">$</strong> sudo systemctl start cassandra</span></pre><p id="5a36" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¦‚æœæˆ‘ä»¬è¦åœ¨å•ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡ŒCassandraï¼ŒCassandraçš„é»˜è®¤é…ç½®æ˜¯æœ‰æ•ˆçš„ã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æœCassandraå°†åœ¨ä¸€ä¸ªé›†ç¾¤ä¸­ä½¿ç”¨æˆ–è€…ç”±å‡ ä¸ªèŠ‚ç‚¹åŒæ—¶ä½¿ç”¨ï¼Œé‚£ä¹ˆå¯¹é…ç½®æ–‡ä»¶è¿›è¡Œä¸€äº›ä¿®æ”¹æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚Cassandraé…ç½®æ–‡ä»¶åä¸º<strong class="ih hj"> cassandra.yaml </strong>ï¼Œä½äº<strong class="ih hj"> /etc/cassandra/ </strong>ã€‚æˆ‘ä»¬å¯ä»¥ç”¨æˆ‘ä»¬æœ€å–œæ¬¢çš„æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€å®ƒï¼Œå¹¶ä¿®æ”¹ä¸€äº›é€‰é¡¹:</p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="34e9" class="lh jz hi ld b fi li lj l lk ll"><strong class="ld hj">$</strong> sudo nano /etc/cassandra/cassandra.yaml</span></pre><p id="9281" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬å¿…é¡»æ›´æ”¹é›†ç¾¤çš„åç§°ã€‚æŸ¥æ‰¾<strong class="ih hj"> cluster_name </strong>å‚æ•°ï¼Œå¹¶æŒ‡å®šæ‚¨æƒ³è¦çš„åç§°:</p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="9185" class="lh jz hi ld b fi li lj l lk ll">cluster_name: [cluster_name]</span></pre><p id="8934" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">é‚£ä¹ˆï¼Œæ”¹å˜æ•°æ®å­˜å‚¨ç«¯å£æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚ä¸ºæ­¤ï¼ŒæŸ¥æ‰¾<strong class="ih hj"> storage_port </strong>å‚æ•°å¹¶åˆ†é…ä¸€ä¸ªã€‚è¯·è®°ä½ï¼Œå®ƒå¿…é¡»æ˜¯<a class="ae jd" href="https://www.hostinger.com/tutorials/how-to-configure-firewall-on-ubuntu-using-ufw/" rel="noopener ugc nofollow" target="_blank">é˜²ç«å¢™</a>ä¸­çš„å¯ç”¨ç«¯å£ï¼Œè¿™æ ·ä¸€åˆ‡æ‰èƒ½æ­£å¸¸å·¥ä½œ:</p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="1064" class="lh jz hi ld b fi li lj l lk ll">storage_port :[port]</span></pre><p id="cacb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æœ€åï¼Œæˆ‘ä»¬æŸ¥æ‰¾<strong class="ih hj"> seed_provider </strong>å‚æ•°ï¼Œåœ¨seedséƒ¨åˆ†ï¼Œæˆ‘ä»¬æ·»åŠ ç»„æˆé›†ç¾¤çš„èŠ‚ç‚¹çš„IPåœ°å€ï¼Œç”¨é€—å·åˆ†éš”ã€‚</p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="58f0" class="lh jz hi ld b fi li lj l lk ll">Seeds: [node_ip],[node_ip]...[node_ip]</span></pre><p id="d8cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å®Œæˆåï¼Œä¿å­˜æ–‡ä»¶å¹¶é‡æ–°åŠ è½½Cassandraã€‚</p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="edbc" class="lh jz hi ld b fi li lj l lk ll"><strong class="ld hj">$</strong> sudo systemctl reload cassandra</span></pre><blockquote class="lm ln lo"><p id="dbc2" class="if ig lb ih b ii ij ik il im in io ip lp ir is it lq iv iw ix lr iz ja jb jc hb bi translated">cqlsh(CassandraæŸ¥è¯¢è¯­è¨€shell)çš„é»˜è®¤ç”¨æˆ·åå’Œå¯†ç æ˜¯â€œCassandraâ€</p></blockquote><p id="15b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æç¤ºcqlsh</p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="8dd2" class="lh jz hi ld b fi li lj l lk ll">$ cqlsh -u cassandra -p cassandra<br/>$ cassandra@cqlsh&gt;</span></pre><p id="7f11" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¯†é’¥ç©ºé—´(æ•°æ®åº“)ã€‚</p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="d580" class="lh jz hi ld b fi li lj l lk ll">cassandra@cqlsh&gt; CREATE KEYSPACE db WITH replication = {'class':'SimpleStrategy', 'replication_factor' : 3};</span></pre><h1 id="8527" class="jy jz hi bd ka kb ls kd ke kf lt kh ki kj lu kl km kn lv kp kq kr lw kt ku kv bi translated">åˆ›å»ºDjangoé¡¹ç›®</h1><p id="b6a1" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq ky is it iu kz iw ix iy la ja jb jc hb bi translated">æˆ‘å¸Œæœ›ä½ å¯¹pythonå’Œdjangoæœ‰ä¸€ç‚¹ç†Ÿæ‚‰ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘å°±ä¸èµ˜è¿°äº†ã€‚æˆ‘å‡è®¾æ‚¨å·²ç»åˆ›å»ºäº†ä¸€ä¸ªvirtualenvå¹¶è¿è¡Œdjango-adminå‘½ä»¤æ¥å¯åŠ¨ä¸€ä¸ªé¡¹ç›®ã€‚</p><p id="1223" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">éœ€è¦å®‰è£…ä¸€ä¸ªåŒ…æ¥å¼€å§‹ä¸Apache Cassandraå’ŒDjangoæ¡†æ¶çš„å·¥ä½œï¼</p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="a2f8" class="lh jz hi ld b fi li lj l lk ll"><strong class="ld hj">$</strong> pip install django-cassandra-engine</span></pre><p id="19d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ç°åœ¨å»ä½ çš„è®¾ç½®æ–‡ä»¶ç”¨ä¸‹é¢çš„jsonæ›¿æ¢æ•°æ®åº“ã€‚</p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="0303" class="lh jz hi ld b fi li lj l lk ll">DATABASES = {<br/>    'default': {<br/>        'ENGINE': 'django_cassandra_engine',<br/>        'NAME': 'db',<br/>        'TEST_NAME': 'test_db',<br/>        'HOST': '127.0.0.1',<br/>        'OPTIONS': {<br/>            'replication': {<br/>                'strategy_class': 'SimpleStrategy',<br/>                'replication_factor': 3<br/>                }<br/>        }<br/>    }<br/>}</span></pre><p id="a99d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¦‚æœæ‚¨æ›´æ”¹äº†cassandra.yamlæ–‡ä»¶ï¼Œè¯·ç”¨æ‚¨çš„IPæ›¿æ¢HOSTã€‚</p><p id="6e37" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ·»åŠ æ‚¨çš„æ¨¡å‹å¹¶è¿è¡Œè¿ç§»ã€‚</p><p id="2386" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è°¢è°¢ğŸ˜</p></div></div>    
</body>
</html>