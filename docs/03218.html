<html>
<head>
<title>VS Code with OpenCV C++ on Windows 10 Explained</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">解释了Windows 10上OpenCV C++的VS代码</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/vs-code-with-opencv-c-on-windows-10-explained-256418442c52?source=collection_archive---------0-----------------------#2020-01-21">https://medium.com/analytics-vidhya/vs-code-with-opencv-c-on-windows-10-explained-256418442c52?source=collection_archive---------0-----------------------#2020-01-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="3e85" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">消除你噩梦的指南。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/2d274ca443f3fb424ac1a0911c937a53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eInINzH9Nfm17jNK"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">照片由<a class="ae jn" href="https://unsplash.com/@pankajpatel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">潘卡杰·帕特尔</a>在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><blockquote class="jo jp jq"><p id="b247" class="jr js jt ju b jv jw ij jx jy jz im ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">点击<a class="ae jn" rel="noopener" href="/analytics-vidhya/vs-code-with-opencv-c-on-windows-10-explained-256418442c52?source=friends_link&amp;sk=bfbfd296b82ebf4401f7c54ab1225db8">此</a>通过付费墙。</p></blockquote><h1 id="38c6" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="a35e" class="pw-post-body-paragraph jr js hi ju b jv lg ij jx jy lh im ka li lj kd ke lk ll kh ki lm ln kl km kn hb bi translated">你可以从这里得到完整的例子:<a class="ae jn" href="https://github.com/Cuda-Chen/opencv-config-with-vscode" rel="noopener ugc nofollow" target="_blank">https://github.com/Cuda-Chen/opencv-config-with-vscode</a></p><h1 id="766e" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated">介绍</h1><p id="dab3" class="pw-post-body-paragraph jr js hi ju b jv lg ij jx jy lh im ka li lj kd ke lk ll kh ki lm ln kl km kn hb bi translated">OpenCV在图像处理领域是一个强大的工具，因为它的速度和直观的API。然而，配置OpenCV是一项艰巨的工作，尤其是在Windows上。</p><p id="1008" class="pw-post-body-paragraph jr js hi ju b jv jw ij jx jy jz im ka li kc kd ke lk kg kh ki lm kk kl km kn hb bi translated">最近，我注意到一个关于在PTT上用VS代码配置OpenCV C++的请求，这解决了我对在Windows上配置有多难的好奇。在尝试配置了一个上午和半个下午后，我终于完成了配置并成功编译。为了便于你在VS代码上配置OpenCV，我决定写这篇文章来教你。</p><h1 id="24ad" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated">配置</h1><p id="6460" class="pw-post-body-paragraph jr js hi ju b jv lg ij jx jy lh im ka li lj kd ke lk ll kh ki lm ln kl km kn hb bi translated">本教程假设您使用以下配置:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="d924" class="pw-post-body-paragraph jr js hi ju b jv jw ij jx jy jz im ka li kc kd ke lk kg kh ki lm kk kl km kn hb bi translated"><code class="du lq lr ls lt b">\\</code>分隔符是特意添加的。</p><h1 id="cd26" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated">配置过程</h1><h2 id="b388" class="lu kp hi bd kq lv lw lx ku ly lz ma ky li mb mc la lk md me lc lm mf mg le mh bi translated">0.安装VS代码(Visual Studio代码)(当然！)</h2><h2 id="3c7a" class="lu kp hi bd kq lv lw lx ku ly lz ma ky li mb mc la lk md me lc lm mf mg le mh bi translated">1.安装VS代码C/C++扩展(ms-vscode.cpptools)</h2><p id="5ed8" class="pw-post-body-paragraph jr js hi ju b jv lg ij jx jy lh im ka li lj kd ke lk ll kh ki lm ln kl km kn hb bi translated">根据VS代码文档的建议，您可以通过以下步骤进行安装:</p><ol class=""><li id="eeec" class="mi mj hi ju b jv jw jy jz li mk lk ml lm mm kn mn mo mp mq bi translated">开放VS代码。</li><li id="58cb" class="mi mj hi ju b jv mr jy ms li mt lk mu lm mv kn mn mo mp mq bi translated">点击侧边栏上的<strong class="ju hj">扩展</strong>视图图标(或<code class="du lq lr ls lt b">Ctrl+Shift+X</code>键盘组合)。</li><li id="2e31" class="mi mj hi ju b jv mr jy ms li mt lk mu lm mv kn mn mo mp mq bi translated">搜索<strong class="ju hj"> C++ </strong>。搜索后，您应该会发现如下所示的扩展名:</li></ol><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mw"><img src="../Images/ab4f1ba43566b94e05384e72e27cfb63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/0*7bfJjq2GBf--mKQq.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">此图摘自[1]。</figcaption></figure><p id="e812" class="pw-post-body-paragraph jr js hi ju b jv jw ij jx jy jz im ka li kc kd ke lk kg kh ki lm kk kl km kn hb bi translated">然后点击<strong class="ju hj">安装</strong>进行安装。</p><h2 id="8045" class="lu kp hi bd kq lv lw lx ku ly lz ma ky li mb mc la lk md me lc lm mf mg le mh bi translated">2.安装C/C++编译器和调试器</h2><p id="b25e" class="pw-post-body-paragraph jr js hi ju b jv lg ij jx jy lh im ka li lj kd ke lk ll kh ki lm ln kl km kn hb bi translated">这部分我选择Mingw-w64。请注意，安装时应选择以下设置:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mx"><img src="../Images/4eb101cb9c16fbe8f6f03ba1b081d286.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/format:webp/0*TpVXb_y6k57ZnsRL.png"/></div></figure><blockquote class="jo jp jq"><p id="7ab4" class="jr js jt ju b jv jw ij jx jy jz im ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><em class="hi">选择这些设置的原因将在下一部分提及。</em></p><p id="cdc6" class="jr js jt ju b jv jw ij jx jy jz im ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><em class="hi">我假设你在</em> <code class="du lq lr ls lt b"><em class="hi">C:\mingw-w64\x86_64-8.1.0-posix-seh-rt_v6-rev0</em></code>安装了所有的编译器</p></blockquote><h2 id="0022" class="lu kp hi bd kq lv lw lx ku ly lz ma ky li mb mc la lk md me lc lm mf mg le mh bi translated">3.下载预构建的OpenCV包</h2><p id="443f" class="pw-post-body-paragraph jr js hi ju b jv lg ij jx jy lh im ka li lj kd ke lk ll kh ki lm ln kl km kn hb bi translated">从<a class="ae jn" href="https://github.com/huihut/OpenCV-MinGW-Build" rel="noopener ugc nofollow" target="_blank"> OpenCV-MinGW-Build </a>下载预建的OpenCV包。因为我们选择版本4.1.1，所以这个版本有一些规范:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es my"><img src="../Images/cb09cd3a9dbd9f1af2aa4eb7d5a75b3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VCA-El5UTTKA62XC.png"/></div></div></figure><p id="2d94" class="pw-post-body-paragraph jr js hi ju b jv jw ij jx jy jz im ka li kc kd ke lk kg kh ki lm kk kl km kn hb bi translated">我们可以看到这个包是用<code class="du lq lr ls lt b">MinGW-x86_64-8.1.0-posix-seh-rt_v6-rev0</code>编译的。因此，您应该将MinGW的配置设置为与软件包使用的配置相同。</p><h2 id="36e0" class="lu kp hi bd kq lv lw lx ku ly lz ma ky li mb mc la lk md me lc lm mf mg le mh bi translated">4.将编译器路径和预构建的OpenCV包添加到<code class="du lq lr ls lt b">Path</code>变量中</h2><p id="874d" class="pw-post-body-paragraph jr js hi ju b jv lg ij jx jy lh im ka li lj kd ke lk ll kh ki lm ln kl km kn hb bi translated">为了让其他程序不用输入绝对路径就能找到编译器和OpenCV包的名字，你可以用编译器和OpenCV包的二进制文件来设置你的账户的<code class="du lq lr ls lt b">Path</code>变量。</p><blockquote class="jo jp jq"><p id="fe8a" class="jr js jt ju b jv jw ij jx jy jz im ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><em class="hi">要编辑</em> <code class="du lq lr ls lt b"><em class="hi">Path</em></code> <em class="hi">变量，可以去</em> <strong class="ju hj"> <em class="hi">控制面板</em></strong><em class="hi">&gt;</em><strong class="ju hj"><em class="hi">系统</em><em class="hi">&gt;</em><strong class="ju hj"><em class="hi">高级系统设置</em> </strong> <em class="hi">。然后切换到系统属性窗口中的“高级”选项卡，并单击“环境变量”按钮。最后，编辑你账号的</em> <code class="du lq lr ls lt b"><em class="hi">Path</em></code> <em class="hi">变量(添加编译器和OpenCV二进制路径)。</em></strong></p><p id="4a04" class="jr js jt ju b jv jw ij jx jy jz im ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><em class="hi">我假设你在</em> <code class="du lq lr ls lt b"><em class="hi">C:\opencv\OpenCV-MinGW-Build-OpenCV-4.1.1-x64</em></code>安装了所有OpenCV的东西</p></blockquote><h2 id="08eb" class="lu kp hi bd kq lv lw lx ku ly lz ma ky li mb mc la lk md me lc lm mf mg le mh bi translated">5.配置项目的<code class="du lq lr ls lt b">.vscode</code>文件。</h2><p id="85f7" class="pw-post-body-paragraph jr js hi ju b jv lg ij jx jy lh im ka li lj kd ke lk ll kh ki lm ln kl km kn hb bi translated">首先，创建一个名为<code class="du lq lr ls lt b">opencvexample</code>的新项目。然后复制粘贴我从这个<a class="ae jn" href="https://github.com/Cuda-Chen/opencv-config-with-vscode" rel="noopener ugc nofollow" target="_blank">回购</a>创建的<code class="du lq lr ls lt b">task.json</code>、<code class="du lq lr ls lt b">launch.json</code>和<code class="du lq lr ls lt b">c_cpp_properties.json</code>。</p><blockquote class="jo jp jq"><p id="9b82" class="jr js jt ju b jv jw ij jx jy jz im ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><em class="hi">注意:目前我不能在VS代码中启动调试模式。需要有人帮助我。</em></p><p id="d18f" class="jr js jt ju b jv jw ij jx jy jz im ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">五月。17、2020更新:<em class="hi">感谢</em><a class="ae jn" rel="noopener" href="/@cookyt28/great-article-this-can-be-helpful-solve-your-error-dd77311f1b0b"><em class="hi">Tinashe Tanyaradzwa Mabika</em></a><em class="hi">指出launch.json文件中有错别字，我已经修复了问题！</em></p></blockquote><p id="f792" class="pw-post-body-paragraph jr js hi ju b jv jw ij jx jy jz im ka li kc kd ke lk kg kh ki lm kk kl km kn hb bi translated">我还对每个json文件和我应用的一些更改做了一些简单的解释。</p><h2 id="f473" class="lu kp hi bd kq lv lw lx ku ly lz ma ky li mb mc la lk md me lc lm mf mg le mh bi translated">任务json</h2><p id="bd4a" class="pw-post-body-paragraph jr js hi ju b jv lg ij jx jy lh im ka li lj kd ke lk ll kh ki lm ln kl km kn hb bi translated">这个文件告诉VS代码调用编译器根据源代码创建一个可执行文件。我对<code class="du lq lr ls lt b">command</code>和<code class="du lq lr ls lt b">args</code>做了一些改动:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lo lp l"/></div></figure><ul class=""><li id="d9fb" class="mi mj hi ju b jv jw jy jz li mk lk ml lm mm kn mz mo mp mq bi translated"><code class="du lq lr ls lt b">command</code>将调用编译器。在这里，我将路径更改为我需要的MinGW编译器。</li><li id="e5da" class="mi mj hi ju b jv mr jy ms li mt lk mu lm mv kn mz mo mp mq bi translated"><code class="du lq lr ls lt b">args</code>将作为编译器标志传递给编译命令。你可以看到该程序将与OpenCV库链接。</li><li id="9ece" class="mi mj hi ju b jv mr jy ms li mt lk mu lm mv kn mz mo mp mq bi translated">作为一个经验法则，只包括你将要使用的库，尽管我包括了OpenCV的所有库。</li></ul><h2 id="a2c8" class="lu kp hi bd kq lv lw lx ku ly lz ma ky li mb mc la lk md me lc lm mf mg le mh bi translated">启动. json</h2><p id="d638" class="pw-post-body-paragraph jr js hi ju b jv lg ij jx jy lh im ka li lj kd ke lk ll kh ki lm ln kl km kn hb bi translated">当您开始调试程序时，<code class="du lq lr ls lt b">launch.json</code>文件将启动GDB调试器，我更改了如下所示的一些行:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lo lp l"/></div></figure><ul class=""><li id="1f3e" class="mi mj hi ju b jv jw jy jz li mk lk ml lm mm kn mz mo mp mq bi translated"><code class="du lq lr ls lt b">program</code>是这个程序的可执行文件。</li><li id="9c69" class="mi mj hi ju b jv mr jy ms li mt lk mu lm mv kn mz mo mp mq bi translated"><code class="du lq lr ls lt b">miDebuggerPath</code>找到调试器的可执行文件，我切换到我想使用的GDB调试器。</li></ul><h2 id="941b" class="lu kp hi bd kq lv lw lx ku ly lz ma ky li mb mc la lk md me lc lm mf mg le mh bi translated">c_cpp_properties.json</h2><p id="613b" class="pw-post-body-paragraph jr js hi ju b jv lg ij jx jy lh im ka li lj kd ke lk ll kh ki lm ln kl km kn hb bi translated"><code class="du lq lr ls lt b">c_cpp_properties.json</code>让您对C/C++扩展有更多的控制:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lo lp l"/></div></figure><ul class=""><li id="cc35" class="mi mj hi ju b jv jw jy jz li mk lk ml lm mm kn mz mo mp mq bi translated"><code class="du lq lr ls lt b">includePath</code>搜索包含您想要的库的路径，我添加了OpenCV的路径。</li><li id="ac65" class="mi mj hi ju b jv mr jy ms li mt lk mu lm mv kn mz mo mp mq bi translated"><code class="du lq lr ls lt b">compilerPath</code>找到了编译器的路径，所以我设置了我要使用的编译器。</li></ul><h2 id="c50a" class="lu kp hi bd kq lv lw lx ku ly lz ma ky li mb mc la lk md me lc lm mf mg le mh bi translated">6.创建代码，编译它，并运行它</h2><p id="604c" class="pw-post-body-paragraph jr js hi ju b jv lg ij jx jy lh im ka li lj kd ke lk ll kh ki lm ln kl km kn hb bi translated">创建一个名为<code class="du lq lr ls lt b">main.cpp</code>的文件，并粘贴以下内容:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="8ff0" class="pw-post-body-paragraph jr js hi ju b jv jw ij jx jy jz im ka li kc kd ke lk kg kh ki lm kk kl km kn hb bi translated">然后从<a class="ae jn" href="https://github.com/Cuda-Chen/opencv-config-with-vscode" rel="noopener ugc nofollow" target="_blank">这里</a>放一个叫<code class="du lq lr ls lt b">lenna.jpg</code>的图。</p><p id="f073" class="pw-post-body-paragraph jr js hi ju b jv jw ij jx jy jz im ka li kc kd ke lk kg kh ki lm kk kl km kn hb bi translated">之后，编译项目并运行它，如果没有问题，您应该会得到一个带有Lenna图像的窗口。</p><blockquote class="jo jp jq"><p id="deaa" class="jr js jt ju b jv jw ij jx jy jz im ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><em class="hi"> 2020.04.06新增:</em> <br/>构建并运行项目，可以按<code class="du lq lr ls lt b">Ctrl+Shift+B</code>构建并键入终端中运行的可执行文件名称。更多信息，可以查看<a class="ae jn" href="https://code.visualstudio.com/docs/cpp/config-mingw#_build-helloworldcpp" rel="noopener ugc nofollow" target="_blank">本官方指南</a>。</p></blockquote><h1 id="a6c6" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated">结论</h1><p id="6a16" class="pw-post-body-paragraph jr js hi ju b jv lg ij jx jy lh im ka li lj kd ke lk ll kh ki lm ln kl km kn hb bi translated">在这篇文章中，我将教你如何从头开始用OpenCV C++包设置VS代码。虽然调试部分无法工作，但我成功地编译并运行了用OpenCV编译的程序。</p><h1 id="bb2d" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated">当前问题</h1><p id="0a97" class="pw-post-body-paragraph jr js hi ju b jv lg ij jx jy lh im ka li lj kd ke lk ll kh ki lm ln kl km kn hb bi translated">目前，每当我开始运行调试模式，我总是收到这个消息框:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es na"><img src="../Images/2b5a389753b2376917c52e92b30517b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/format:webp/0*e3pSZfnKoxF8iXgn.png"/></div></figure><p id="fb92" class="pw-post-body-paragraph jr js hi ju b jv jw ij jx jy jz im ka li kc kd ke lk kg kh ki lm kk kl km kn hb bi translated">如果有人能留下评论，发邮件给我来解决这个错误，我会很高兴:)</p><blockquote class="jo jp jq"><p id="a559" class="jr js jt ju b jv jw ij jx jy jz im ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">五月。2020年17日更新:<em class="hi">感谢</em><a class="ae jn" rel="noopener" href="/@cookyt28/great-article-this-can-be-helpful-solve-your-error-dd77311f1b0b"><em class="hi">Tinashe Tanyaradzwa ma bika</em></a><em class="hi">指出launch.json文件有错别字，我已经修复了问题！</em></p></blockquote><h1 id="a1c5" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated">参考</h1><p id="408e" class="pw-post-body-paragraph jr js hi ju b jv lg ij jx jy lh im ka li lj kd ke lk ll kh ki lm ln kl km kn hb bi translated">[1]<a class="ae jn" href="https://code.visualstudio.com/docs/languages/cpp" rel="noopener ugc nofollow" target="_blank">https://code.visualstudio.com/docs/languages/cpp</a></p></div><div class="ab cl nb nc gp nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="hb hc hd he hf"><p id="7c53" class="pw-post-body-paragraph jr js hi ju b jv jw ij jx jy jz im ka li kc kd ke lk kg kh ki lm kk kl km kn hb bi translated"><em class="jt">原载于2020年1月21日</em><a class="ae jn" href="https://cuda-chen.github.io/programming/image%20processing/2020/01/21/vscode-with-opencv-cpp-on-windows10-explained.html" rel="noopener ugc nofollow" target="_blank"><em class="jt">https://cuda-Chen . github . io</em></a><em class="jt">。</em></p></div><div class="ab cl nb nc gp nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="hb hc hd he hf"><blockquote class="jo jp jq"><p id="02be" class="jr js jt ju b jv jw ij jx jy jz im ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><em class="hi">如果你有什么想法和问题要分享，请联系我</em><a class="ae jn" href="http://clh960524@gmail.com/" rel="noopener ugc nofollow" target="_blank"><strong class="ju hj"><em class="hi">clh 960524【at】Gmail . com</em></strong></a><em class="hi">。还有，其他作品可以查看我的</em> <a class="ae jn" href="https://github.com/Cuda-Chen" rel="noopener ugc nofollow" target="_blank"> <em class="hi"> GitHub库</em> </a> <em class="hi">。如果你和我一样热衷于机器学习、图像处理和并行计算，欢迎在LinkedIn上</em> <a class="ae jn" href="https://www.linkedin.com/in/lu-hsuan-chen-78071b171/" rel="noopener ugc nofollow" target="_blank"> <em class="hi">加我</em> </a> <em class="hi">。</em></p></blockquote></div></div>    
</body>
</html>