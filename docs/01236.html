<html>
<head>
<title>A Complete Date-Time Guide for Data Scientist in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中数据科学家的完整日期时间指南</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/a-complete-date-time-guide-for-data-scientist-in-python-cd0b1cfb5e74?source=collection_archive---------2-----------------------#2019-10-10">https://medium.com/analytics-vidhya/a-complete-date-time-guide-for-data-scientist-in-python-cd0b1cfb5e74?source=collection_archive---------2-----------------------#2019-10-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/d9aeecd6de5a0973d131966b770df211.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wIyWBJl5DBCRoRZHjXbZhA.jpeg"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">皮皮岛🌴，泰国</figcaption></figure><div class=""/><div class=""><h2 id="d0cc" class="pw-subtitle-paragraph iu hw hx bd b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl dx translated">使用不同的python包在python中处理日期和时间数据的完整指南</h2></div><p id="3b6a" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">在数据科学工作的某些方面，每个人都需要处理日期和时间数据。日期和时间数据有助于发现重要的信息，例如一周中的哪一天你的网站点击率最高，哪一小时交易量最高，或者哪一小时密码/股票交易量最高等。</p><p id="7c5f" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">在本文中，我将展示几个非常重要的python包对日期和时间数据的用处。让我们开始吧，别再废话了。</p><h1 id="bf8d" class="ki kj hx bd kk kl km kn ko kp kq kr ks jd kt je ku jg kv jh kw jj kx jk ky kz bi translated"><strong class="ak"> 1。熊猫</strong></h1><p id="e88f" class="pw-post-body-paragraph jm jn hx jo b jp la iy jr js lb jb ju jv lc jx jy jz ld kb kc kd le kf kg kh hb bi translated">pandas和numpy是数据科学中使用最多的python包。熊猫可以用来清理和处理日期和时间数据。</p><p id="8477" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated"><strong class="jo hy"> 1.1字符串到时间戳</strong> <br/>当我们使用<code class="du lf lg lh li b">pd.read_csv('data.csv')</code>命令读取CSV文件时，pandas将日期列作为对象(字符串)读取。熊猫可以用来将字符串转换成时间戳对象。</p><p id="9f46" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">首批进口熊猫:<code class="du lf lg lh li b">import pandas as pd</code></p><p id="f406" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">本文我会用<a class="ae lj" href="https://www.rugbyworldcup.com/matches" rel="noopener ugc nofollow" target="_blank">橄榄球世界杯2019数据</a>。</p><figure class="ll lm ln lo fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lk"><img src="../Images/e20368d88f0bb323c6d5edc5abded8be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R57XM94Mu2BdF-_JajV0sA.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">字符串到时间戳</figcaption></figure><blockquote class="lp lq lr"><p id="ec2c" class="jm jn ls jo b jp jq iy jr js jt jb ju lt jw jx jy lu ka kb kc lv ke kf kg kh hb bi translated"><strong class="jo hy">好处1 : </strong>我们可以使用<code class="du lf lg lh li b">pd.to.datetime()</code>将秒或纳秒转换成日期时间</p></blockquote><figure class="ll lm ln lo fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lw"><img src="../Images/8b7698a4e4a68fd7e693637e8946c5ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9C2PoSdazdWCJd1fniUJbw.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">秒和纳秒到时间戳的转换</figcaption></figure><h2 id="fecd" class="lx kj hx bd kk ly lz ma ko mb mc md ks jv me mf ku jz mg mh kw kd mi mj ky mk bi translated"><strong class="ak"> 1.2处理时间戳</strong></h2><p id="da8e" class="pw-post-body-paragraph jm jn hx jo b jp la iy jr js lb jb ju jv lc jx jy jz ld kb kc kd le kf kg kh hb bi translated">一旦我们将日期和时间作为时间戳，我们就可以从中获得年、月、月中的某一天、星期几、小时、分钟、秒钟。</p><figure class="ll lm ln lo fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ml"><img src="../Images/152eed0f718276630f10c9612c2edc4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-aYvI8bY0ecTXuzl1qKykw.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">时间戳为年、月、日、周、小时、分钟和秒</figcaption></figure><blockquote class="lp lq lr"><p id="1730" class="jm jn ls jo b jp jq iy jr js jt jb ju lt jw jx jy lu ka kb kc lv ke kf kg kh hb bi translated"><strong class="jo hy">加成:</strong> <em class="hx">如何改变时间戳格式？</em> <code class="du lf lg lh li b"><em class="hx">strftime(format="desired_format")</em></code> <em class="hx"> <br/>是选项。参见下面的例子。</em></p></blockquote><figure class="ll lm ln lo fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mm"><img src="../Images/4d8ab94f49adaec0d4391ac811b9a579.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CqhhJ6GQyjMJmjtTNAqy_w.png"/></div></div></figure><p id="2f62" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated"><strong class="jo hy">注:</strong> <code class="du lf lg lh li b">strftime()</code>返回一个字符串。这应该使用<code class="du lf lg lh li b">pd.to_datetime()</code>更改为时间戳。</p><h1 id="8e03" class="ki kj hx bd kk kl km kn ko kp kq kr ks jd kt je ku jg kv jh kw jj kx jk ky kz bi translated"><strong class="ak"> 2。日期时间</strong></h1><p id="d03f" class="pw-post-body-paragraph jm jn hx jo b jp la iy jr js lb jb ju jv lc jx jy jz ld kb kc kd le kf kg kh hb bi translated">datetime python包是另一个处理日期和时间数据的导入包。</p><p id="da5e" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">从日期时间导入子包，如下所示:</p><pre class="ll lm ln lo fd mn li mo mp aw mq bi"><span id="7d6b" class="lx kj hx li b fi mr ms l mt mu">from datetime import datetime, timedelta, timezone</span></pre></div><div class="ab cl mv mw gp mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="hb hc hd he hf"><p id="6c91" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated"><strong class="jo hy">日期时间</strong>用于创建和处理日期时间对象。我们来看看<code class="du lf lg lh li b">datetime</code>的几个重要用法。</p><p id="d2e8" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated"><strong class="jo hy"> datetime.now() </strong> →当前时区的当前日期和时间</p><p id="ef4b" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated"><strong class="jo hy"> datetime.utcnow() </strong> →当前UTC时间</p><p id="799a" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated"><strong class="jo hy"> datetime.taoday() </strong> →当前时区的当前日期和时间</p><p id="1ee1" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated"><strong class="jo hy">日期时间(年、月、日、小时、分钟、秒)</strong> →创建日期时间对象</p><blockquote class="nc"><p id="c813" class="nd ne hx bd nf ng nh ni nj nk nl kh dx translated">我们还可以从与时间戳对象相同的datetime对象中获取年、月、月、日、星期、小时、分钟和秒的值。</p></blockquote><figure class="nn no np nq nr hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nm"><img src="../Images/bef924c58d579c21681b4f0c53d94210.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G7P4d_AB0oZAy-UPsFL3GA.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">日期时间示例</figcaption></figure></div><div class="ab cl mv mw gp mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="hb hc hd he hf"><p id="2e67" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated"><strong class="jo hy"> timedelta </strong>主要用于从datetime对象中加减时间。</p><blockquote class="lp lq lr"><p id="bcd6" class="jm jn ls jo b jp jq iy jr js jt jb ju lt jw jx jy lu ka kb kc lv ke kf kg kh hb bi translated">示例:</p><p id="b6a4" class="jm jn ls jo b jp jq iy jr js jt jb ju lt jw jx jy lu ka kb kc lv ke kf kg kh hb bi translated">datetime timedelta(周=0，天=0，小时=0，分钟=0，秒钟=0)，其中datetime是datetime对象。</p></blockquote><figure class="ll lm ln lo fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ns"><img src="../Images/4adedf9f69bc276f166542a4de61bee2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L1CiWUbEqRoKvYqWx-4mGw.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">时间增量</figcaption></figure><h1 id="e481" class="ki kj hx bd kk kl km kn ko kp kq kr ks jd kt je ku jg kv jh kw jj kx jk ky kz bi translated"><strong class="ak"> 3。pytz </strong></h1><p id="c715" class="pw-post-body-paragraph jm jn hx jo b jp la iy jr js lb jb ju jv lc jx jy jz ld kb kc kd le kf kg kh hb bi translated">这个库允许使用Python 2.4或更高版本进行精确的跨平台时区计算。</p><p id="792d" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">通过pip安装<code class="du lf lg lh li b">pytz</code>。<code class="du lf lg lh li b">pip install pytz</code>。</p><p id="9c2b" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">pytz可用于获取特定时区日期和时间，也可用于创建特定时区的datetime对象。见下图中的例子。</p><figure class="ll lm ln lo fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nt"><img src="../Images/5ecaef7f3556dc387d2bfa592de05e5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DbRHLFuH5OaeioZz0nboRw.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated"><strong class="bd kk"> pytz </strong></figcaption></figure><h1 id="4fcc" class="ki kj hx bd kk kl km kn ko kp kq kr ks jd kt je ku jg kv jh kw jj kx jk ky kz bi translated"><strong class="ak"> 4。日期工具</strong></h1><p id="895a" class="pw-post-body-paragraph jm jn hx jo b jp la iy jr js lb jb ju jv lc jx jy jz ld kb kc kd le kf kg kh hb bi translated">我发现了dateutil包的两个重要应用:I .解析和II。获取相对日期和时间(datetime对象)</p><p id="47dd" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">一、<strong class="jo hy">解析</strong>:解析是将字符串转换为日期时间的过程。</p><p id="d8dc" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">二。<strong class="jo hy">获取相对日期和时间</strong>:我们刚刚学习了timedelta的时间减法和加法。timedelta加上或减去精确的数字，但是如果我们想要获得相对时间，例如从今天算起的一个月之前或之后的时间。在这种情况下，细节非常有用。见下图中的例子。</p><figure class="ll lm ln lo fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es nu"><img src="../Images/835d5eadfb585a6c0346343c49c98b34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vy9Eb5vGf437nrleDTpCrw.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">日期示例</figcaption></figure><blockquote class="lp lq lr"><p id="481f" class="jm jn ls jo b jp jq iy jr js jt jb ju lt jw jx jy lu ka kb kc lv ke kf kg kh hb bi translated">P <strong class="jo hy"> ro提示:</strong></p></blockquote><ol class=""><li id="fb55" class="nv nw hx jo b jp jq js jt jv nx jz ny kd nz kh oa ob oc od bi translated">总是使用<code class="du lf lg lh li b">relativedelta </code>从特定的时间获得准确的时间，因为每个月的天数不一样，这使得很难使用<code class="du lf lg lh li b">timedelta</code>。</li><li id="7ae3" class="nv nw hx jo b jp oe js of jv og jz oh kd oi kh oa ob oc od bi translated">如果你知道两个时区的时差，那么用<code class="du lf lg lh li b">timedelta</code>代替<code class="du lf lg lh li b">pytz</code>。</li><li id="a560" class="nv nw hx jo b jp oe js of jv og jz oh kd oi kh oa ob oc od bi translated">使用<code class="du lf lg lh li b">pandas dataframe</code>时，使用<code class="du lf lg lh li b">pandas</code>将字符串转换为日期&amp;时间(时间戳)。</li></ol><p id="7343" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">在Github 上找到<a class="ae lj" href="https://github.com/dc-aichara/DS-ML-Public/blob/master/Medium_Files/Date_Time.ipynb" rel="noopener ugc nofollow" target="_blank"> Jupyter笔记本查看代码。</a></p><p id="2933" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">如果您有任何疑问，请通过LinkedIn或twitter联系我。</p><p id="2ea9" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">感谢您阅读文章。</p></div></div>    
</body>
</html>