<html>
<head>
<title>Streamlit; The Awesome new way to deploy Data Science &amp; Machine Learning Apps.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Streamlit部署数据科学和机器学习应用程序的令人敬畏的新方法。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/streamlit-the-awesome-new-way-to-deploy-data-science-machine-learning-apps-6929737b7a68?source=collection_archive---------9-----------------------#2019-11-06">https://medium.com/analytics-vidhya/streamlit-the-awesome-new-way-to-deploy-data-science-machine-learning-apps-6929737b7a68?source=collection_archive---------9-----------------------#2019-11-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/c23397a20028a3b2718e9bdf547567fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cH536JJL3BAWwGmvWm7CXQ.jpeg"/></div></div></figure><p id="0848" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于数据科学家和机器学习工程师来说，部署他们努力调整的项目和模型(准确率为99.89%)通常是一个挑战。对于一些人来说，这意味着学习使用<a class="ae jo" href="http://flask.palletsprojects.com/en/1.1.x/" rel="noopener ugc nofollow" target="_blank"> Flask </a>进行他们的模型部署。这通常并不容易，因为他们中的大多数都不是Web开发人员。</p><p id="281a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我的情况也差不多，直到遇到<a class="ae jo" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank">Streamlit</a>；这是一个非常棒的新方法，可以轻松地部署DS/ML应用程序，而无需成为web开发专家。我震惊于使用Streamlit部署我的模型和数据科学项目是如此容易。对我来说，Streamlit是我一直在等待的令人敬畏的框架，可以与R用户的<a class="ae jo" href="https://shiny.rstudio.com/" rel="noopener ugc nofollow" target="_blank"> Shiny </a>相提并论。但是是什么让Streamlit如此牛逼呢？</p><p id="dd51" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以下是Streamlit是dope的一些原因；</p><ol class=""><li id="28d3" class="jp jq hi is b it iu ix iy jb jr jf js jj jt jn ju jv jw jx bi translated"><strong class="is hj">免费开源</strong>；酷吧？我知道。它是免费和开源的，所以你可以使用它，商业化和分享它。</li><li id="e6a6" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated"><strong class="is hj">简单易学</strong>；Streamlit的学习曲线为零，因为它是没有回调或隐藏状态的纯python。所以如果你懂Python，你就懂Streamlit。我在一天之内开发了3个很棒的机器学习应用。我所要做的就是参考他们令人敬畏的官方文件。没有麻烦！！</li><li id="fdc6" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated"><strong class="is hj">它与一切</strong>一起工作；Streamlit适用于大多数ML框架，如果不是全部的话；从<a class="ae jo" href="https://www.tensorflow.org/" rel="noopener ugc nofollow" target="_blank"> Tensorflow </a>和<a class="ae jo" href="https://pytorch.org/" rel="noopener ugc nofollow" target="_blank"> Pytorch </a>到sci kit——学习Seaborn、Altair、Plotly等等。</li><li id="1218" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated"><strong class="is hj">易于安装</strong>；安装Streamlit就像每隔一段时间安装一次python包一样！你可以和皮普一起做。</li><li id="d9f2" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated"><strong class="is hj">还有更多的来了</strong>；他们还计划添加一键式部署。所以请多加留意。</li></ol><p id="6f49" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以现在你明白我为什么对这个框架着迷了吧？</p><p id="6ca6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这篇文章和接下来的一系列文章中，我将带您了解使用Streamlit构建和部署3个令人敬畏的ml应用程序的整个步骤。我们将从多语言情感分析开始。情感分析，也称为意见挖掘；是自然语言处理的一个分支，涉及文本中情感的提取。VADER T21包使得用Python做情感分析变得容易。</p><p id="79d5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将使用以下包:</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="3fa3" class="km kn hi ki b fi ko kp l kq kr">pip install streamlit # the awesome framework<br/>pip install vaderSentiment # for sentimental analysis<br/>pip install googletrans # for language translation</span></pre><p id="5ac5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们已经安装了我们的包，让我们通过运行hello world应用程序来测试我们的Streamlit安装；</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="5f5e" class="km kn hi ki b fi ko kp l kq kr">streamlit hello # run the hello app</span></pre><p id="ace9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您应该会看到应用程序在您的默认浏览器中启动并运行，网址为<a class="ae jo" href="http://localhost:8501." rel="noopener ugc nofollow" target="_blank"> http://localhost:8501。</a>万岁！您的第一款Streamlit应用。但是现在让我们建立我们自己的。</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ks"><img src="../Images/88e791c7027a9ae041103b2ce2236bbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g1Gn3uQRwe7ebZXqXuqwRQ.png"/></div></div></figure><p id="6e21" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，让我们创建一个文件夹和一个文件，你可以在其中调用<em class="kt"> app.py </em>。然后导入这些库，并用下面的代码在你的<em class="kt"> app.py文件</em>中初始化它们；</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="f286" class="km kn hi ki b fi ko kp l kq kr">import streamlit as st<br/>from googletrans import Translator<br/>from vaderSentiment.vaderSentiment import \ SentimentIntensityAnalyzer</span><span id="266f" class="km kn hi ki b fi ku kp l kq kr">analyser = SentimentIntensityAnalyzer() # initialize it<br/>translator = Translator() # initialize</span></pre><p id="6cab" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以我们导入了Streamlit并给它起了个别名<em class="kt"> st </em>，还从googletrans导入了<em class="kt"> Translator，从Vader perspection</em>导入了SentimentIntensityAnalyzer，然后初始化了它们。</p><p id="a825" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，我们将使用<em class="kt"> Streamlit。markdown </em>方法来编写一些markdown文本，这些文本将作为我们的访问者的标题和副标题。顺便说一下，Markdown是一种类似于HTML的标记语言，但是它更酷，因为它没有使用HTML时必须声明的大量标签。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="8132" class="km kn hi ki b fi ko kp l kq kr">st.markdown(‘# Machine Learning App Registry’)<br/>st.markdown(<br/> ‘#### These are projects from Artificial Intelligence Movement(AIM) Led by [Boadzie Daniel](<a class="ae jo" href="http://boadzie.surge.sh/)'" rel="noopener ugc nofollow" target="_blank">http://boadzie.surge.sh/)'</a>)</span><span id="c022" class="km kn hi ki b fi ku kp l kq kr">st.markdown(‘## App 1: Multilingual Sentimental Analysis’)</span><span id="c0b3" class="km kn hi ki b fi ku kp l kq kr">st.write(‘Sentimental Analysis is a branch of Natural Language Processing \<br/> which involves the extraction of sentiments in text. The VADER package makes it easy to do Sentimental Analysis’)</span></pre><p id="d2bf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的应用程序的大脑现在看起来如下:</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="8ff7" class="km kn hi ki b fi ko kp l kq kr"># The sentiment analyzer function<br/>def sentiment_analyzer_scores(sentence):<br/>   trans = translator.translate(sentence).text # extracting   translation text<br/>   score = analyser.polarity_scores(trans) # analyzing the text<br/>   score = score[‘compound’]<br/>   if score &gt;= 0.05:<br/>      return ‘The sentiment of your text is Positive’<br/>   elif score &gt; -0.5 and score &lt; 0.05:<br/>      return ‘The sentiment of your text is Neutral’<br/>   else:<br/>      return ‘The sentiment of your text is Negative’<br/>   return score</span></pre><p id="7a90" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是我们的应用程序的令人敬畏的大脑。我们创建了一个函数，它将一个句子作为参数，翻译该句子，分析情感，并返回带有适当的人类可读信息的分数。酷吧？我知道！</p><p id="2c90" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们如何使用用户的输入将这个函数呈现给前端呢？令人惊讶的是，Streamlit让这变得异常简单。</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="1a18" class="km kn hi ki b fi ko kp l kq kr">sentence = st.text_area(‘Write your sentence’) # we take user input</span><span id="d936" class="km kn hi ki b fi ku kp l kq kr">if st.button(‘Submit’): # a button for submitting the form<br/>   result = sentiment_analyzer_scores(sentence) # run our function  on it<br/>   st.balloons() # show some cool animation<br/>   st.success(result) # show result in a Bootstrap panel</span></pre><p id="0b91" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在上面的代码中，我们将用户的输入保存在名为<em class="kt">句子</em>的变量中，然后当点击提交按钮时，我们使用一个条件在一个点缀着一些漂亮气球动画的引导面板中呈现情感值。</p><p id="43a8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们现在可以像这样运行我们的应用程序</p><pre class="kd ke kf kg fd kh ki kj kk aw kl bi"><span id="98e8" class="km kn hi ki b fi ko kp l kq kr">streamlit run app.py # if app is the name of your file</span></pre><p id="4bf8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">该应用程序应该在我们的默认浏览器中启动，网址为<a class="ae jo" href="http://localhost:8501." rel="noopener ugc nofollow" target="_blank"> http://localhost:8501。</a>(这篇文章的完整代码以及其他许多内容可以在我的<a class="ae jo" href="https://github.com/Boadzie" rel="noopener ugc nofollow" target="_blank"> GitHub页面</a>找到)</p><figure class="kd ke kf kg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/670c62395f66ad7c4269d9475cc84be4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P51RNMry3kIzEJhW4xAzDg.jpeg"/></div></div><figcaption class="kv kw et er es kx ky bd b be z dx translated">万岁！！</figcaption></figure><p id="e854" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">就这样，我们毫不费力地完成了多语言情感分析器！多棒啊。(应用程序正在运行<a class="ae jo" href="https://ml-app-rig.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">这里</a>)</p><p id="872d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这只是你可以用Streamlit创建的众多出色的DS/ML应用中的一个。本系列的后续文章将处理其他应用程序，如工资预测和Iris flower分类器等等。我坚信Streamlit是Python开发者的数据科学和机器学习应用的未来。因此，强烈建议你现在就加入(如果你还没有的话),成为这个令人敬畏的旅程的一部分。</p></div></div>    
</body>
</html>