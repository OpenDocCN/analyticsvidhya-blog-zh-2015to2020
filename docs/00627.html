<html>
<head>
<title>Exploring Twitter data using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python探索Twitter数据</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/exploring-twitter-data-using-python-part-i-setting-up-and-getting-the-data-e1cc2d13b7f4?source=collection_archive---------1-----------------------#2019-08-19">https://medium.com/analytics-vidhya/exploring-twitter-data-using-python-part-i-setting-up-and-getting-the-data-e1cc2d13b7f4?source=collection_archive---------1-----------------------#2019-08-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="c31a" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">介绍</h1><p id="e29e" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">Twitter是目前使用最广泛的社交网络之一-在2019年的Q1，每月有3.3亿人使用它。它可能没有几年前的爆炸式增长，但它肯定是一个企业和公众人物与受众互动的地方，重要信息以近乎实时的方式分享，正如最近的事件所显示的那样，甚至政治也是如此。</p><p id="22b2" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">企业和其他参与者早就明白Twitter数据的力量。我们能想到的一个典型例子是贸易公司。鉴于分享信息的快节奏和简洁格式，这是一个很好的工具，可以用来收集可能影响股票市场的信号。首席执行官推荐一种产品或服务？一种伙伴关系可能正在形成。用户多次抱怨新设备的构建问题？对于硬件供应商来说，这是个坏消息。所以Twitter数据确实有一个商业用例。</p><p id="b8ef" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在这个由三部分组成的系列中，我们将研究提取、转换和理解与特定主题相关的Twitter数据的概念证明。</p><p id="228b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">如果您想继续学习，请参考Github资源库，其中包含本系列的全部<a class="ae kg" href="https://github.com/cnstlungu/incubator/tree/master/Python/Exploring%20Twitter%20Data%20using%20Python" rel="noopener ugc nofollow" target="_blank"> Jupyter笔记本。</a></p><h1 id="07ff" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">设置</h1><p id="cfed" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们将使用Python 3.7和一些专门的库来完成这项工作。</p><p id="7c5a" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">但是首先，我们需要从Twitter获得必要的凭证。这是在<a class="ae kg" href="https://developer.twitter.com/en/apps" rel="noopener ugc nofollow" target="_blank">这里</a>完成的。填写适当的信息后，我们应该有以下内容:</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kh"><img src="../Images/aec90d78c69e0fa44524eedaa0f0d8c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-ltyAgkFXHtxv5yolGMOcg.png"/></div></div></figure><p id="08e2" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">一旦我们有了<em class="kt"> API密钥</em>、<em class="kt"> API秘密密钥</em>、<em class="kt">访问令牌</em>和<em class="kt">访问令牌秘密</em>，我们就可以从Twitter中提取数据。我们将使用Twitter搜索API来获取我们的数据。</p><p id="713b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在我们继续之前，还有一件事我们应该记住。这是Twitter提供的一个接口，有<a class="ae kg" href="https://developer.twitter.com/en/docs/tweets/search/overview" rel="noopener ugc nofollow" target="_blank">多层</a>，包括我们将要使用的(免费)标准接口。在撰写本文时，其局限性描述如下:</p><blockquote class="ku kv kw"><p id="e406" class="jd je kt jf b jg kb ji jj jk kc jm jn kx kd jq jr ky ke ju jv kz kf jy jz ka hb bi translated">这个搜索API搜索过去7天发布的推文样本。“公共”API集的一部分。</p></blockquote><p id="87d2" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">然而，这对我们的目的来说应该足够了。</p><h1 id="f9db" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">获取Twitter数据</h1><p id="6f25" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">接下来，我们可以决定是直接调用API，还是使用一个库来完成。鉴于Python生态系统给了我们大量的选择，我们将使用<a class="ae kg" href="https://pypi.org/project/TwitterSearch/" rel="noopener ugc nofollow" target="_blank"> TwitterSearch </a>，这将有助于我们更快地行动。</p><p id="990c" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">安装TwitterSearch之后，我们就可以开始了。</p><pre class="ki kj kk kl fd la lb lc ld aw le bi"><span id="f81c" class="lf ig hi lb b fi lg lh l li lj">pip install TwitterSearch</span></pre><p id="0eee" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">让我们导入必要的对象，并使用Twitter为我们设置的凭证实例化TwitterSearch对象。在这种情况下，我建立了一个文件来存储它们。</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="f9bb" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们现在需要根据上面定义的搜索对象创建一个搜索顺序。</p><p id="9908" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在这种情况下，我们决定分析有关英国即将退出欧盟(俗称英国退出欧盟)的消息。我们将分析英语推文。</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="d160" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">现在我们有了一个推文列表，如下所示。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es lm"><img src="../Images/87e568eab8b0044e32631a4e558f6a0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4_6AeblYR7puv1Ovuc3CyA.png"/></div></div></figure><p id="7703" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">我们可以看到，我们有一个嵌套的类似字典的结构，包含其他字典和列表。这需要展平，以便我们可以更有效地分析数据。熊猫图书馆将为此提供便利。</p><p id="b856" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">这里我们导入了pandas，并使用<em class="kt"> json_normalize </em>方法将我们的结果列表转换成pandas<em class="kt">data frame——一种二维表格数据结构。</em></p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="394b" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">此外，这是我们数据的快速视图:</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ln"><img src="../Images/b41468ca54dd44636fbbbbe0c7238f81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MzLVxNqKnWk6jPLsvmMpGA.png"/></div></div></figure><p id="5347" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">为了给每行一个比当前使用的自动生成的行号更有意义的标识符，我们将使用惟一的tweet id列。我们还将删除<em class="kt"> id_str </em>列，因为它是相同tweet id的字符串表示，因此是多余的。</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="ba2c" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">此外，让我们看看我们有多少数据。这将返回(行数(tweets)，列数(features/variables))。因此，我们目前正在研究18000条推文，我们可以分析326个属性。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es lo"><img src="../Images/4f2f72067466f6916630eafdbc3fa987.png" data-original-src="https://miro.medium.com/v2/resize:fit:288/format:webp/1*WuezKD7MB_enCjlXRnAwFg.png"/></div></figure><p id="104c" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">列子集的视图在这里会很有用。让我们看看推文的创建日期、用户屏幕名称和推文的文本。这些只是数百个可用专栏中的3个。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es lp"><img src="../Images/333d9292c57473a170fc54503f757eb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*sr_MyRVp8kklDzFE1nCNIA.png"/></div></figure><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es lq"><img src="../Images/4cdfa90c0c2cbf455653b332e9725f04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EWGKeyMYwppVsqL3xV6Yew.png"/></div></div></figure><h2 id="9104" class="lf ig hi bd ih lr ls lt il lu lv lw ip jo lx ly it js lz ma ix jw mb mc jb md bi translated">包扎</h2><p id="71f8" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在本系列的第一篇文章中，我们已经了解了如何设置我们的Twitter开发者证书，使用了<em class="kt"> TwitterSearch </em> Python包来提取关于英国退出欧盟的推文，还使用了<em class="kt"> pandas </em>库来展平(解压)我们的结果。</p><p id="d9c0" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated">在<a class="ae kg" rel="noopener" href="/@cnstlungu/exploring-twitter-data-using-python-af1287ee65f1">第二部分</a>中，我们将对提取的数据做进一步的转换，并触及自然语言处理和情感分析的概念。</p><p id="cac2" class="pw-post-body-paragraph jd je hi jf b jg kb ji jj jk kc jm jn jo kd jq jr js ke ju jv jw kf jy jz ka hb bi translated"><a class="ae kg" rel="noopener" href="/@cnstlungu/exploring-twitter-data-using-python-af1287ee65f1">在此继续阅读第二部分</a></p></div></div>    
</body>
</html>