<html>
<head>
<title>Interactive choropleth map using python-folium for Sri Lanka</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">斯里兰卡使用python-folio的交互式choropleth地图</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/interactive-choropleth-map-using-python-folium-for-sri-lanka-4f38f86da41d?source=collection_archive---------20-----------------------#2020-05-13">https://medium.com/analytics-vidhya/interactive-choropleth-map-using-python-folium-for-sri-lanka-4f38f86da41d?source=collection_archive---------20-----------------------#2020-05-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="862c" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">斯里兰卡地理制图模板</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/26bdf9476653156bed8ea9dac521a72a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*a88CwEboJG817hAV"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">克里斯·劳顿在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="bd00" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">想知道这些美丽的地理地图是如何创建的吗？</p><p id="f61e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">当你找不到用自己的数据来绘制你的国家或地区地图的方法时，这是令人沮丧的。这就是我们将在本分步指南中讨论的内容。</p><blockquote class="kk kl km"><p id="c14b" class="jo jp kn jq b jr js ij jt ju jv im jw ko jy jz ka kp kc kd ke kq kg kh ki kj hb bi translated">根据维基百科，choropleth地图是"<em class="hi">" Choropleth地图提供了一种简单的方法来可视化一个地理区域内的测量值如何变化或显示一个区域内的可变性水平。</em></p></blockquote><p id="4b57" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">当你试图绘制斯里兰卡的地图时，你想到的第一个问题是<strong class="jq hj">我们有数据吗？</strong> <em class="kn">答案是“是的……”，但是很难找到和清理那些数据。</em></p><p id="86bc" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您可以从下面获取行政边界数据</p><div class="kr ks ez fb kt ku"><a href="https://www.survey.gov.lk/" rel="noopener  ugc nofollow" target="_blank"><div class="kv ab dw"><div class="kw ab kx cl cj ky"><h2 class="bd hj fi z dy kz ea eb la ed ef hh bi translated">斯里兰卡测量部</h2><div class="lb l"><h3 class="bd b fi z dy kz ea eb la ed ef dx translated">编辑描述</h3></div><div class="lc l"><p class="bd b fp z dy kz ea eb la ed ef dx translated">www.survey.gov.lk</p></div></div></div></a></div><p id="4895" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">斯里兰卡有四个行政级别的界线(省、区、分区sec、Grama niladari)。本文将带您浏览地区级地图(以下git hub repo <a class="ae jn" href="https://github.com/MalakaGu/Sri-lanka-maps" rel="noopener ugc nofollow" target="_blank">此处</a>提供了所有四个级别的数据和代码)</p><h1 id="a587" class="ld le hi bd lf lg lh li lj lk ll lm ln io lo ip lp ir lq is lr iu ls iv lt lu bi translated">给我数据和代码</h1><p id="e5a9" class="pw-post-body-paragraph jo jp hi jq b jr lv ij jt ju lw im jw jx lx jz ka kb ly kd ke kf lz kh ki kj hb bi translated">完整的代码和数据集可以在我的<a class="ae jn" href="https://github.com/MalakaGu/Sri-lanka-maps" rel="noopener ugc nofollow" target="_blank"> github </a>中找到</p><h1 id="46a6" class="ld le hi bd lf lg lh li lj lk ll lm ln io lo ip lp ir lq is lr iu ls iv lt lu bi translated">佐料</h1><ol class=""><li id="9cd1" class="ma mb hi jq b jr lv ju lw jx mc kb md kf me kj mf mg mh mi bi translated">Geo-json文件</li></ol><p id="3a2e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">2.数据文件(在地图上绘制的附加数据)</p><p id="86ef" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">3.叶子或Gmaps</p><h1 id="6c4d" class="ld le hi bd lf lg lh li lj lk ll lm ln io lo ip lp ir lq is lr iu ls iv lt lu bi translated">秘诀</h1><h2 id="49be" class="mj le hi bd lf mk ml mm lj mn mo mp ln jx mq mr lp kb ms mt lr kf mu mv lt mw bi translated">Jupyter笔记本</h2><p id="0760" class="pw-post-body-paragraph jo jp hi jq b jr lv ij jt ju lw im jw jx lx jz ka kb ly kd ke kf lz kh ki kj hb bi translated"><em class="kn">在这里，我们将把虚拟数据集映射到地区边界的顶部，并将虚拟数据添加到工具提示</em>。</p><pre class="iy iz ja jb fd mx my mz na aw nb bi"><span id="8757" class="mj le hi my b fi nc nd l ne nf"><strong class="my hj">import</strong> <strong class="my hj">pandas</strong> <strong class="my hj">as</strong> <strong class="my hj">pd</strong><br/><strong class="my hj">import</strong> <strong class="my hj">geopandas</strong> <strong class="my hj">as</strong> <strong class="my hj">gpd</strong><br/><strong class="my hj">import</strong> <strong class="my hj">folium</strong></span></pre><p id="f964" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">将Geo-json文件加载到笔记本</p><pre class="iy iz ja jb fd mx my mz na aw nb bi"><span id="8808" class="mj le hi my b fi nc nd l ne nf">#reading the geo-json file we created <br/>disg = gpd.read_file('District_geo.json')</span><span id="41e2" class="mj le hi my b fi ng nd l ne nf"><em class="kn">#removing other data except "ADM2_PCODE" and "geometry"</em></span><span id="7230" class="mj le hi my b fi ng nd l ne nf">disg=disg[['ADM2_PCODE','geometry']]<br/>disg.head()</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nh"><img src="../Images/7d7ed6611873e11151ebad81cb294df0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g6rQD-Ui_VRk0ggOZpJ1Yg.png"/></div></div></figure><pre class="iy iz ja jb fd mx my mz na aw nb bi"><span id="04ed" class="mj le hi my b fi nc nd l ne nf"><em class="kn"># loading aditional data that we want to load to final map other than  properties of Geojson file</em></span><span id="963f" class="mj le hi my b fi ng nd l ne nf">dis_a=pd.read_csv('dristrict_aditional_data.csv')<br/>dis_a.rename(columns={'admin2Pcode':'ADM2_PCODE'}, inplace=<strong class="my hj">True</strong>)<br/>dis_a.head()</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ni"><img src="../Images/4f183ed5ce2e9f8007d5c43605a92a8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*oPlp-x1-NTnCsPK7Xj4iIw.png"/></div></figure><pre class="iy iz ja jb fd mx my mz na aw nb bi"><span id="e7e9" class="mj le hi my b fi nc nd l ne nf"><em class="kn">#merging both geo data and adttioanl data into one data fame for generate map,joining  key is '"ADM2_PCODE""</em><br/><br/>district=disg.merge(dis_a,on="ADM2_PCODE")<br/>district.head()</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nj"><img src="../Images/39e52c38c406378cc592d9fa7edf66b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iru-yTSjdA9eiIGVi9RHBg.png"/></div></div></figure><ol class=""><li id="ffb4" class="ma mb hi jq b jr js ju jv jx nk kb nl kf nm kj mf mg mh mi bi translated">启动地图</li></ol><pre class="iy iz ja jb fd mx my mz na aw nb bi"><span id="b8f4" class="mj le hi my b fi nc nd l ne nf">m = folium.Map(location=[7.8731, 80.7718], zoom_start=8)<br/>m</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nn"><img src="../Images/8e623b039e12fe82c3dbcfa5c1224828.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xBuoQvcfNGWGyg8id8o-PA.png"/></div></div></figure><p id="8fec" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">2.添加choropleth层。</p><pre class="iy iz ja jb fd mx my mz na aw nb bi"><span id="9d17" class="mj le hi my b fi nc nd l ne nf">choropleth=folium.Choropleth(<br/>    geo_data=district,<br/>    name='choropleth',<br/>    data= district,<br/>    columns=['ADM2_PCODE', 'risk_level'],<br/>    key_on='properties.ADM2_PCODE',<br/>    fill_color='RdPu',<br/>    fill_opacity=0.7,<br/>    line_opacity=0.2,<br/>    <br/>    legend_name='Covid-19 risk Level',<br/><br/>).add_to(m)<br/></span></pre><p id="476a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">3.添加三个随机位置作为定位销。</p><pre class="iy iz ja jb fd mx my mz na aw nb bi"><span id="53a0" class="mj le hi my b fi nc nd l ne nf">folium.Marker(<br/>    location=[6.7106,79.9074],<br/>    popup='Point two',<br/>    icon=folium.Icon(color='red', icon='info-sign')<br/>).add_to(m)<br/><br/>folium.Marker(<br/>    location=[7.9403,81.01886823],<br/>    popup='Point three',<br/>    icon=folium.Icon(color='blue', icon='bar-chart')<br/>).add_to(m)<br/><br/>folium.Marker(<br/>    location=[9.3803, 80.3770],<br/>    popup='Point four',<br/>    icon=folium.Icon(color='red', icon='university')<br/>).add_to(m)<br/></span></pre><p id="4ec3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">4.为与工具提示的交互添加地理边界层。</p><pre class="iy iz ja jb fd mx my mz na aw nb bi"><span id="95b6" class="mj le hi my b fi nc nd l ne nf">INT = folium.features.GeoJson(<br/>    district,<br/>    style_function=style_function, <br/>    control=<strong class="my hj">False</strong>,<br/>    highlight_function=highlight_function, <br/>    tooltip=folium.features.GeoJsonTooltip(<br/>        fields=['admin2Name_en','patients','population'],<br/>        aliases=['District: ','Numer of Patients:','Population'],<br/>        style=("background-color: white; color: #333333; font-family: arial; font-size: 12px; padding: 10px;") <br/>    )<br/>)<br/>m.add_child(INT)<br/>m.keep_in_front(INT)<br/>folium.LayerControl().add_to(m)</span><span id="e92c" class="mj le hi my b fi ng nd l ne nf">m</span></pre><p id="e595" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">瞧啊。！！！！！！</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es no"><img src="../Images/c7856249f296f476da8c21972e7269fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XHNncml6LKaIw2wJQzq4HQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">斯里兰卡地区地图</figcaption></figure><p id="698c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">有用的链接</p><div class="kr ks ez fb kt ku"><a href="https://python-visualization.github.io/folium/" rel="noopener  ugc nofollow" target="_blank"><div class="kv ab dw"><div class="kw ab kx cl cj ky"><h2 class="bd hj fi z dy kz ea eb la ed ef hh bi translated">0.11.0文件</h2><div class="lb l"><h3 class="bd b fi z dy kz ea eb la ed ef dx translated">基于Python生态系统的数据优势和库的映射优势。操纵…</h3></div><div class="lc l"><p class="bd b fp z dy kz ea eb la ed ef dx translated">python-visualization.github.io</p></div></div><div class="np l"><div class="nq l nr ns nt np nu jh ku"/></div></div></a></div><div class="kr ks ez fb kt ku"><a href="https://data.humdata.org/dataset/sri-lanka-administrative-levels-0-4-boundaries" rel="noopener  ugc nofollow" target="_blank"><div class="kv ab dw"><div class="kw ab kx cl cj ky"><h2 class="bd hj fi z dy kz ea eb la ed ef hh bi translated">斯里兰卡行政级别0-4级边界</h2><div class="lb l"><h3 class="bd b fi z dy kz ea eb la ed ef dx translated">斯里兰卡行政级别为0(国家)、1(省)、2(区)、3(地区秘书处)和4(乡镇政府)</h3></div><div class="lc l"><p class="bd b fp z dy kz ea eb la ed ef dx translated">data.humdata.org</p></div></div><div class="np l"><div class="nv l nr ns nt np nu jh ku"/></div></div></a></div></div></div>    
</body>
</html>