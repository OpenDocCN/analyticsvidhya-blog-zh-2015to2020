<html>
<head>
<title>A VR Image using OpenCV and Blender</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个使用 OpenCV 和 Blender 的 VR 图像</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/a-vr-image-using-opencv-and-blender-250a98594d6d?source=collection_archive---------14-----------------------#2020-11-16">https://medium.com/analytics-vidhya/a-vr-image-using-opencv-and-blender-250a98594d6d?source=collection_archive---------14-----------------------#2020-11-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="c511" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">VR 有许多不同的形状和大小(从字面上看)。我不太确定该怎么称呼它，但虚拟现实是我最终选择的词。这篇文章的主要目的是记录我所做的尝试(以备后用)。但是请随意四处看看。最后有一个小演示。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/55e355d62bfbacffcd53526f0a4caba2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tJRCm2pqtGl2sQLhT4Hjdw.png"/></div></div></figure><h1 id="693c" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">VR 影像到底是什么？</h1><p id="49a8" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">老实说我不知道。我试着用谷歌搜索“虚拟现实图像”,我很确定没有一个结果与此有丝毫关系。但我还是选择了它，因为它听起来比“3D 外观的东西”更酷。</p><p id="433c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">无论如何，我的工作原理是这样的:程序跟踪头部的位置，然后根据头部的位置以一定的角度显示 3D 模型的图像。</p><p id="ca93" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这听起来可能相当简单。然而，当图像倾斜时，仅仅显示渲染图像是不够的。为什么？这是因为我们看到的实际上是一个透视图，为了让用户看起来更真实，应该考虑到这一点。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ks kt l"/></div></figure><h1 id="d87d" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">我做了什么</h1><ol class=""><li id="0d6d" class="ku kv hi ih b ii kn im ko iq kw iu kx iy ky jc kz la lb lc bi translated">我创建了一个简单的 3D 场景，一个立方体的一边是开放的，一个花瓶放在立方体里面。</li><li id="ed02" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">我将相机设置为始终指向立方体，并在 Blender 中编写了一个<a class="ae li" href="https://github.com/dilithjay/VRImage/blob/main/blender_camera_control.py" rel="noopener ugc nofollow" target="_blank"> python 脚本</a>，使其始终朝向立方体，同时保持与立方体的恒定距离。</li><li id="388e" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">接下来，我对相机进行编程，使其以小增量移动，在每个位置渲染相机视图。首先，我尝试使用相当大的增量，但视频输出似乎很不稳定。所以我决定采用较小的增量。这不是最节省空间的方法，因为我现在一个文件夹里有 600 张图片。然而，由于我之前提到的视角问题，我别无选择，只能这样做。</li><li id="61a0" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">我在网上找到了一个<a class="ae li" href="https://github.com/dilithjay/VRImage/blob/main/warp.py" rel="noopener ugc nofollow" target="_blank"> python 脚本</a>，它使用 OpenCV 将任何四边形扭曲成正方形。我改变了它，使图像循环，立方体的开放面的角可以被选择，扭曲的图像被保存到一个文件夹中。</li><li id="135c" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">接下来是最乏味和耗时的部分。我必须浏览 600 张图像，手动选择代表每张图像中立方体开放面的角的点，以使其变形。如果我足够了解 Blender 渲染系统，我可能会自动完成这一步。也许有一天我会的。</li><li id="a576" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">之后，我使用 OpenCV 和预先训练的 haar 级联模型编写了人脸检测代码。为此，我决定走出自己的舒适区，用<a class="ae li" href="https://github.com/dilithjay/VRImage/blob/main/TrompeLoeil.cpp" rel="noopener ugc nofollow" target="_blank"> C++ </a>编写代码。使用 C++还意味着我必须为整个系统安装 OpenCV，而不仅仅是为 python 安装 pip。我决定从源头开始建造。在多次尝试使用 Visual Studio 代码和 Code::块编译任何 OpenCV 程序而不出现链接器错误失败后，我决定尝试一下 Microsoft Visual Studio，这也是我想熟悉的一个程序。幸运的是，这非常有效。所以一石二鸟。</li><li id="0c5a" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">现在我要做的就是从扭曲的图像中确定正确的图像(取决于头部的位置)并显示它。</li></ol><p id="2275" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你瞧，它终于起作用了。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ks kt l"/></div></figure><p id="a56e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">看起来还是有点不稳定。我能想到两个可能的原因。</p><ul class=""><li id="55ae" class="ku kv hi ih b ii ij im in iq lj iu lk iy ll jc lm la lb lc bi translated">人脸检测中的细微异常。</li><li id="b850" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc lm la lb lc bi translated">我在标记拐角时的人为错误:这可以通过前面提到的自动化这个步骤来解决。</li></ul><p id="c590" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如我在开始时提到的，我写这篇文章只是为了记录这个项目，所以读者可能不会从阅读这篇文章中获得什么。除非你想自己做这样的东西，在这种情况下，去做吧。:)</p><p id="b480" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对任何感兴趣的人，我也在维护我自己的网站，所以来看看:):【http://www.dilithjay.com/blog/T2</p></div></div>    
</body>
</html>