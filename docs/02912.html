<html>
<head>
<title>How to get started with OpenCV for Image Processing.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何入门OpenCV进行图像处理？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-get-started-with-opencv-for-image-processing-d09e2be42b89?source=collection_archive---------17-----------------------#2020-01-07">https://medium.com/analytics-vidhya/how-to-get-started-with-opencv-for-image-processing-d09e2be42b89?source=collection_archive---------17-----------------------#2020-01-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/8f974a988a478fe43e20d0c22d9104fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vid6g1PDAOewpd54HlTfsg.jpeg"/></div></div></figure><h1 id="efe3" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">为什么使用OpenCV进行图像处理？</h1><p id="3066" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">OpenCV(开源计算机视觉库)是一个开源的计算机视觉和机器学习软件库。OpenCV旨在为计算机视觉应用提供一个公共基础设施，并加速机器感知在商业产品中的应用。作为一个BSD许可的产品，OpenCV使得企业利用和修改代码变得很容易。</p><p id="2f7d" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">该库拥有超过2500种优化算法，包括一套全面的经典和最先进的计算机视觉和机器学习算法。这些算法可以用来识别相机和视频中的对象，检测移动对象，合并图像和大量的图像处理。这使得OpenCv成为一个非常方便和全面的图像处理和分析工具。该库最初是用C++编写的。一个非常好的Python支持可以使任务变得更容易。</p><h1 id="026b" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">入门指南</h1><p id="6d12" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">对于图像操作，我们将需要安装以下库。</p><ul class=""><li id="1707" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">Numpy</li><li id="541b" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">Matplotlib</li><li id="696f" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">PIL</li><li id="837d" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">OpenCV</li></ul><p id="2446" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在使用OpenCv之前，首先让我们看看如何使用Numpy、PIL和Matplotlib加载和创建图像并可视化它们。</p><p id="d3bf" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">图像是数值范围从0到255的numpy矩阵，表示颜色的像素值。对于图像，我们有格式为<em class="lf">(高*宽*通道数)的尺寸。</em>对于灰度图像<em class="lf"> </em> <strong class="jq hj"> <em class="lf">通道数为1 </em> </strong> <em class="lf">，</em>对于彩色图像<em class="lf"> </em> <strong class="jq hj"> <em class="lf">通道数为3(红、绿、蓝)。</em>T15】</strong></p><h2 id="915a" class="lg ir hi bd is lh li lj iw lk ll lm ja jz ln lo je kd lp lq ji kh lr ls jm lt bi translated">使用Numpy创建图像</h2><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="1107" class="lg ir hi lz b fi md me l mf mg">import numpy as np<br/>import matplotlib.pyplot as plt<br/>from PIL import Image</span><span id="19e1" class="lg ir hi lz b fi mh me l mf mg">img = np.zeros((512,512,3))</span></pre><p id="8ed0" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">让我们使用matplotlib可视化图像。</p><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="0f43" class="lg ir hi lz b fi md me l mf mg">plt.imshow(img)</span></pre><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mi"><img src="../Images/c41b74a97e651c6a515f5378f5d9442a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-cPCIngBKc9hb39QJdhXLA.jpeg"/></div></div><figcaption class="mj mk et er es ml mm bd b be z dx translated">用matplotlib可视化图像</figcaption></figure><p id="6491" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我们也可以使用枕头库来加载图像。</p><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="9640" class="lg ir hi lz b fi md me l mf mg">img_lion = Image.open(“Images\lion.jpg”)<br/>plt.imshow(img_lion)</span></pre><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/0c0ffbb3d06c78ca975455156f0a9005.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-TATZpZDbcf9rc_ZkkllWw.jpeg"/></div></div><figcaption class="mj mk et er es ml mm bd b be z dx translated">狮子</figcaption></figure><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="0ea9" class="lg ir hi lz b fi md me l mf mg">print(img_lion_arr.shape)</span></pre><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mo"><img src="../Images/b7ffe0d779aa8eea825ea7d27221ca55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tZrpOvAPgymqm9mGEB0MGA.jpeg"/></div></div></figure><p id="eb53" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">上图的形状是(400，590，3)。它有红色、绿色和蓝色三个通道。</p><h2 id="8ff7" class="lg ir hi bd is lh li lj iw lk ll lm ja jz ln lo je kd lp lq ji kh lr ls jm lt bi translated">可视化单个通道</h2><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="5e82" class="lg ir hi lz b fi md me l mf mg"># RED CHANNEL<br/>plt.imshow(img_lion_arr[:,:,0],cmap=’gray’)</span></pre><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mp"><img src="../Images/359494af660c1c8d593b64d3cf727b0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VMz4yPo2-PViTMGm4htUnA.jpeg"/></div></div><figcaption class="mj mk et er es ml mm bd b be z dx translated">cmap= '灰色'的红色通道</figcaption></figure><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="4b74" class="lg ir hi lz b fi md me l mf mg"># GREEN CHANNEL<br/>plt.imshow(img_lion_arr[:,:,1],cmap=’gray’)</span></pre><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mq"><img src="../Images/20e88a4d25510d221960125ff542c8a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IuukHEdTo1tM7Vn90aNN0Q.jpeg"/></div></div><figcaption class="mj mk et er es ml mm bd b be z dx translated">cmap= '灰色'的绿色通道</figcaption></figure><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="2b86" class="lg ir hi lz b fi md me l mf mg"># BLUE CHANNEL<br/>plt.imshow(img_lion_arr[:,:,2],cmap=’gray’)</span></pre><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mr"><img src="../Images/447639d5d0bf29bd2c247f73e14baeb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l05Af7oS-pUyjoY-jVXuuQ.jpeg"/></div></div><figcaption class="mj mk et er es ml mm bd b be z dx translated">cmpa= '灰色'的蓝色通道</figcaption></figure><h1 id="b697" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">使用OpenCV</h1><p id="1020" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">加载图像</p><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="208b" class="lg ir hi lz b fi md me l mf mg">import cv2<br/>cv_img = cv2.imread(“Images\lion.jpg”)</span></pre><p id="80e8" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">默认情况下，OpenCv按照BGR(蓝、绿、红)顺序加载图像。</p><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="7389" class="lg ir hi lz b fi md me l mf mg">plt.imshow(cv_img) # B G R Channel</span></pre><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ms"><img src="../Images/66335bc364a5351691a427031fed1f2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dHUPUg_1u-Tj5bEpVLwW9A.jpeg"/></div></div><figcaption class="mj mk et er es ml mm bd b be z dx translated">BGR Opencv</figcaption></figure><p id="9fb1" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">为了以RGB顺序可视化图像，我们必须使用opencv的<strong class="jq hj"> cv2.cvtColor. </strong>将图像转换为(R，G，B)</p><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="adeb" class="lg ir hi lz b fi md me l mf mg">fixed_cv_img = cv2.cvtColor(cv_img,cv2.COLOR_BGR2RGB)<br/>plt.imshow(fixed_cv_img)</span></pre><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mt"><img src="../Images/e428773d27aad18e934a93fce69c47a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h9GZjLp_STWwj9Xj5T1ayQ.jpeg"/></div></div><figcaption class="mj mk et er es ml mm bd b be z dx translated">RGB</figcaption></figure><p id="a35e" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">将图像调整到新的像素尺寸。</p><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="e7a9" class="lg ir hi lz b fi md me l mf mg">new_img = cv2.resize(fixed_cv_img,(200,200))<br/>plt.imshow(new_img)</span></pre><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mu"><img src="../Images/62f0942cfcb491ceeafafe1b619be866.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hQoMkIL2ZgaMMiVMoc9M2A.jpeg"/></div></div><figcaption class="mj mk et er es ml mm bd b be z dx translated">使用OpenCv调整大小</figcaption></figure><p id="bc20" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我们甚至可以使用宽度和高度的比例。</p><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="c61b" class="lg ir hi lz b fi md me l mf mg">w_ratio = 0.5<br/>h_ratio = 0.5<br/>new_ratio_img = cv2.resize(fixed_cv_img,(0,0),fixed_cv_img,w_ratio,h_ratio)</span></pre><p id="a399" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hj">反转图像</strong></p><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="cb06" class="lg ir hi lz b fi md me l mf mg">inv_imge = cv2.flip(new_ratio_img,0)<br/>plt.imshow(inv_imge)</span></pre><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mv"><img src="../Images/10f9cb9b4eca2f0af064c3753c9713fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ASiLmlglKFmOFPbjEGM8AQ.jpeg"/></div></div><figcaption class="mj mk et er es ml mm bd b be z dx translated">倒像</figcaption></figure><p id="4286" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hj">在磁盘上保存反转图像</strong></p><p id="b183" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我们将使用cv2.imwrite来保存图像</p><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="0f7c" class="lg ir hi lz b fi md me l mf mg">cv2.imwrite(“inverted_image.jpg”,cv2.cvtColor(inv_imge, cv2.COLOR_RGB2BGR))</span></pre><p id="bb1b" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hj">在图像上绘图</strong></p><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="0888" class="lg ir hi lz b fi md me l mf mg">import numpy as np<br/>import matplotlib.pyplot as plt<br/>import cv2<br/>draw_img = np.zeros((512,512,3),dtype=np.int16)<br/>cv2.rectangle(draw_img,pt1=(384,10),pt2=(500,150),color=(0,255,0),thickness=8)</span></pre><p id="b451" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><em class="lf"> cv2.rect </em>在图像上绘制一个给定大小和参数的矩形。使用matplotlib绘图时，图像看起来会像这样</p><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="16f8" class="lg ir hi lz b fi md me l mf mg">plt.imshow(draw_img)</span></pre><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mw"><img src="../Images/5f37f04bcf9dddf7fa5810cfef742114.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZLIbDfGkj0wrUBWqLgNqmQ.jpeg"/></div></div><figcaption class="mj mk et er es ml mm bd b be z dx translated">画一个矩形</figcaption></figure><p id="84fc" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hj">绘制其他形状</strong></p><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="27b2" class="lg ir hi lz b fi md me l mf mg">cv2.circle(img=draw_img,center=(100,100),radius=50,color=(255,0,0),thickness=8)<br/>plt.imshow(draw_img)</span></pre><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mx"><img src="../Images/1593a78a3e0e948cbae47b0491a9e62a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sbrVmYqkmXybFrhcG0iJ3g.jpeg"/></div></div><figcaption class="mj mk et er es ml mm bd b be z dx translated">形状</figcaption></figure><p id="e8df" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">为了绘制填充形状，我们可以将厚度参数设置为-1，如本例所示。</p><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="55d5" class="lg ir hi lz b fi md me l mf mg">cv2.circle(img=draw_img,center=(400,400),radius=50,color=(255,0,0),thickness=-1)<br/>plt.imshow(draw_img)</span></pre><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es my"><img src="../Images/e2bb67f4d57a862ceab8e43d7a61c7a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TBP4L44reJGIaJFxBov2CQ.jpeg"/></div></div><figcaption class="mj mk et er es ml mm bd b be z dx translated">实心圆</figcaption></figure><p id="e349" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hj">行和文本</strong></p><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="7f0f" class="lg ir hi lz b fi md me l mf mg">cv2.line(draw_img,pt1=(0,0),pt2=(512,512),color=(102,255,255),thickness=5)<br/>font = cv2.FONT_HERSHEY_SIMPLEX<br/>cv2.putText(draw_img,text=”Mithilesh”,org=(10,500),fontFace=font,fontScale=4,color=(255,255,255),thickness=3,lineType=cv2.LINE_AA)<br/>plt.imshow(draw_img)</span></pre><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mz"><img src="../Images/03432fccf35bd110b4c271ea70dbaa9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ocyz0D7zWCXqLEW6axm3SQ.jpeg"/></div></div><figcaption class="mj mk et er es ml mm bd b be z dx translated">线条和文本</figcaption></figure><p id="53a5" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">绘制多边形</p><pre class="lu lv lw lx fd ly lz ma mb aw mc bi"><span id="9808" class="lg ir hi lz b fi md me l mf mg">cv2.polylines(poly_img,[pts],isClosed=True,color=(255,0,0),thickness=5)<br/>plt.imshow(poly_img)</span></pre><figure class="lu lv lw lx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es na"><img src="../Images/76b3f6c6661c96916aaeeccf2dd868bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wpr15lpmOl3qFt_YZQAOIQ.jpeg"/></div></div><figcaption class="mj mk et er es ml mm bd b be z dx translated">多边形</figcaption></figure><p id="a27a" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">所以伙计们，这就是这篇文章的全部内容。这只是触及了OpenCV的皮毛。OpenCV是一个更高级的图像处理库。本文将帮助您开始使用OpenCv，并为您提供基础知识。一定要看看我即将在OpenCV上发表的高级图像处理博客。</p><p id="26af" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">谢谢读者。非常欢迎和感谢您的反馈和支持。</p></div></div>    
</body>
</html>