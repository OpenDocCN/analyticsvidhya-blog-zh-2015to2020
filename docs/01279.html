<html>
<head>
<title>Intermittent Demand forecasting using Markov Chains</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于马尔可夫链的间歇需求预测</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/intermittent-demand-forecasting-using-markov-chains-d16fe3e2a0a3?source=collection_archive---------6-----------------------#2019-10-12">https://medium.com/analytics-vidhya/intermittent-demand-forecasting-using-markov-chains-d16fe3e2a0a3?source=collection_archive---------6-----------------------#2019-10-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="76d8" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用马尔可夫链进行预测</h2></div><h2 id="0f07" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated"><strong class="ak"> <em class="jv">了解间歇性需求</em> </strong></h2><p id="7e30" class="pw-post-body-paragraph jw jx hi jy b jz ka ij kb kc kd im ke ji kf kg kh jm ki kj kk jq kl km kn ko hb bi translated">当一个客户打电话要一个几乎没人要的产品项目时，你有吗？如果你的答案是否定的，这可能会让你失去一笔生意，甚至一个客户。同样重要的是，如果<em class="kp">那个</em>商品只是偶尔被要求，你手头是否有太多单位的产品以避免缺货？如果你的答案是肯定的，那么过多的库存可能会让你损失金钱。</p><p id="77f0" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">预测间歇性需求、“滞销”的产品项目或零件是服务零件组织和资本货物行业的公司中的经理尤其熟知的问题。</p><h2 id="8f60" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated"><strong class="ak"> <em class="jv">理解马尔可夫链</em> </strong></h2><p id="fbea" class="pw-post-body-paragraph jw jx hi jy b jz ka ij kb kc kd im ke ji kf kg kh jm ki kj kk jq kl km kn ko hb bi translated">假设天气有两种可能的状态:晴天或多云。</p><figure class="kw kx ky kz fd la er es paragraph-image"><div class="er es kv"><img src="../Images/bb8036ac2a7e327a588996c2946570c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*uv4Yx0WCngQQ7DV97X9aJg.jpeg"/></div></figure><p id="f5a2" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">你总是可以直接观察到当前的天气状态，而且保证总是前述两种状态中的一种。现在，您决定希望能够预测明天的天气。直觉上，你假设在这个过程中有一个固有的转变，因为当前的天气对第二天的天气会有一些影响。所以你收集了几年的天气数据，并计算出阴天之后出现晴天的概率是0.5。你还注意到，通过扩展，在阴天之后出现阴天的概率必须是0.5，因为只有两种可能的状态。现在，您可以根据当时的天气状况，使用这个分布来预测未来几天的天气。</p><p id="f8d0" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">这个例子说明了马尔可夫链的许多关键概念。马尔可夫链是基于一种“无记忆”的原则。换句话说，过程的下一个状态只取决于前一个状态，而不是状态序列。</p><p id="0279" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">马尔可夫链本质上由一组满足马尔可夫性质的转移组成，这些转移由某种概率分布决定。</p><p id="2fba" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated"><strong class="jy hj"> <em class="kp">马尔可夫链的一个例子</em> </strong></p><p id="6207" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">例如，可口可乐和百事可乐是x国仅有的两家饮料公司。一家汽水公司想与其中一家合作。他们雇佣了一家市场研究公司来研究一个月后哪个品牌的市场份额会更高。</p><p id="814a" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">目前，百事拥有55%的市场份额，可口可乐拥有45%的市场份额。以下是市场研究公司得出的结论:</p><p id="dbaf" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">P(P-&gt;P):一个月内客户继续使用百事可乐品牌的概率= 0.7</p><p id="78d7" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">P(P-&gt;C):一个月内顾客从百事可乐转向可口可乐的概率= 0.3</p><p id="404e" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">P(C-&gt;C):一个月内顾客继续使用该品牌可乐的概率= 0.9</p><p id="de9c" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">P(C-&gt;P):一个月内顾客从可口可乐转向百事可乐的概率= 0.1</p><p id="16aa" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">研究公司所做的四个陈述可以用一个简单的转换图来组织。</p><figure class="kw kx ky kz fd la er es paragraph-image"><div class="er es ld"><img src="../Images/6cfc424bcadcdff56305e4114663d767.png" data-original-src="https://miro.medium.com/v2/resize:fit:576/format:webp/1*-D1-U9TDDOLIWjKzVSDfxg.jpeg"/></div></figure><p id="8832" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">该图简单显示了转变和当前的市场份额。现在，如果我们想计算一个月后的市场份额，我们需要进行以下计算:</p><p id="4260" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">百事可乐的市场份额(t+1)=百事可乐* P的当前市场份额(P — &gt;P) +可口可乐* P的当前市场份额(C — &gt;P)</p><p id="1c21" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">可口可乐的市场份额(t+1)=可口可乐的当前市场份额* P(C — &gt;C) +百事可乐的当前市场份额* P(P — &gt;C)</p><p id="a0e1" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">这些计算可以通过查看下面的矩阵乘法来简单地完成:</p><p id="a04d" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">当前状态X转换矩阵=最终状态</p><figure class="kw kx ky kz fd la er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es le"><img src="../Images/967fbc7554d66a5f86b79ae019ffc007.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DLYwnaaDNNrNSxUuEZky1Q.jpeg"/></div></div></figure><p id="12dd" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">形式上，马尔可夫链是一种概率自动化。状态转移的概率分布通常表示为马尔可夫链的转移矩阵。</p><p id="faf8" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">如果马尔可夫链有N个可能的状态，那么矩阵将是一个N×N矩阵，使得条目(I，J)是从状态I转移到状态J的概率</p><p id="3ad8" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">此外，转移矩阵必须是一个随机矩阵，它的每一行的元素加起来必须正好是1。这完全有意义，因为每一行代表它自己的概率分布。</p><figure class="kw kx ky kz fd la er es paragraph-image"><div class="er es lj"><img src="../Images/adf8cf7b009c1a2f2933f48ebc753566.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*e3M9RQ1EYeKmCoHW26yORg.jpeg"/></div></figure><figure class="kw kx ky kz fd la er es paragraph-image"><div class="er es lk"><img src="../Images/328d900190445428aa8cc9c835ad7cde.png" data-original-src="https://miro.medium.com/v2/resize:fit:458/format:webp/1*rFnI9vwPtnugIbL5zfxwDw.jpeg"/></div></figure><p id="a5bb" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">此外，马尔可夫链也有一个初始状态向量，表示为一个N×1矩阵(向量)，它描述了在N个可能状态的每一个状态开始的概率分布。向量的条目I描述了链从状态I开始的概率</p><figure class="kw kx ky kz fd la er es paragraph-image"><div class="er es ll"><img src="../Images/c988553d4f076862a68793f2b8784ec3.png" data-original-src="https://miro.medium.com/v2/resize:fit:178/format:webp/1*vQJFT2qsPYm6QB2e4eWE7g.jpeg"/></div></figure><p id="f6f9" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">修正的马尔可夫链模型如下:</p><figure class="kw kx ky kz fd la er es paragraph-image"><div class="er es lm"><img src="../Images/c50d6159c938e077717a3f9da2b2b14b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1398/format:webp/1*YMr9q-Vov9GU7uuSHFqDvg.jpeg"/></div></figure><p id="d190" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">上述公式用于预测。公式中提到的λ(s)可以通过线性规划模型来估计。但是大多数模型给出的是离散的λ值，只有其中一个是1，其他的是0。</p><p id="b195" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">或者，我从描述前7天依赖性的PACF图中指定λ值。</p><h1 id="0cee" class="ln iy hi bd iz lo lp lq jd lr ls lt jh io lu ip jl ir lv is jp iu lw iv jt lx bi translated"><strong class="ak">需求预测</strong></h1><p id="fee4" class="pw-post-body-paragraph jw jx hi jy b jz ka ij kb kc kd im ke ji kf kg kh jm ki kj kk jq kl km kn ko hb bi translated">考虑一种产品，提供了其前5年的日销售额。数据时断时续，因为有些日子需求很低，有些日子需求很高。</p><p id="2ede" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated"><em class="kp">下面的存储库中提供了这些数据和代码。</em></p><figure class="kw kx ky kz fd la er es paragraph-image"><div class="er es ly"><img src="../Images/c20648863890c7a144edcd70bf8a4831.png" data-original-src="https://miro.medium.com/v2/resize:fit:348/format:webp/1*zhv86GNWq6sK5OBNKanipw.jpeg"/></div></figure><p id="efb1" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">培训数据:2013年10月-2013年12月，2014年10月-2014年12月，2015年10月-2015年12月，2016年10月-2016年12月。<br/>对2017年10月-2017年12月的销售进行预测。</p><p id="320b" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated"><strong class="jy hj"> <em class="kp">时间序列数据的预测</em> </strong></p><figure class="kw kx ky kz fd la er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es lz"><img src="../Images/7ac7d4a736023868a4389eeaca5f3eaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JhBKcgdu2YM_ffW3J6SbTA.jpeg"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx translated">上述时间序列清楚地描述了数据中的趋势和季节性</figcaption></figure><p id="942c" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">由于销售额的范围是从0到50，因此我们必须为销售额制定离散的状态级别(时段),例如:</p><figure class="kw kx ky kz fd la er es paragraph-image"><div class="er es me"><img src="../Images/c3cd8d29e3f47cfa4ff70aa170e5c7f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*Q1ng2PDzj60OGu1RLNbKpw.jpeg"/></div></figure><p id="92f8" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated"><em class="kp">现在定义状态转移矩阵(Q): </em></p><p id="7f57" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">1-状态转移概率矩阵表示从一个状态转移到另一个状态而没有任何间隙的概率，即第二天的状态概率。</p><p id="0920" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">2状态转移概率矩阵表示从一个状态转移到另一个状态的概率，间隔1天，即后天状态的概率。</p><p id="927d" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">诸如此类…</p><p id="f73b" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">代码的GitHub存储库链接:</p><div class="mf mg ez fb mh mi"><a href="https://github.com/AmanSahotra/Intermittent-Demand-forecasting-using-Markov-Chains" rel="noopener  ugc nofollow" target="_blank"><div class="mj ab dw"><div class="mk ab ml cl cj mm"><h2 class="bd hj fi z dy mn ea eb mo ed ef hh bi translated">AmanSahotra/使用马尔可夫链进行间歇性需求预测</h2><div class="mp l"><h3 class="bd b fi z dy mn ea eb mo ed ef dx translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="mq l"><p class="bd b fp z dy mn ea eb mo ed ef dx translated">github.com</p></div></div></div></a></div><h1 id="e1aa" class="ln iy hi bd iz lo lp lq jd lr ls lt jh io lu ip jl ir lv is jp iu lw iv jt lx bi translated">结果</h1><p id="8d37" class="pw-post-body-paragraph jw jx hi jy b jz ka ij kb kc kd im ke ji kf kg kh jm ki kj kk jq kl km kn ko hb bi translated">这种改进的马尔可夫链模型得到的结果比其他模型更好。实际销售额和预测销售额之间的平均绝对误差为6.19。</p><p id="1f59" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">下图还显示了误差的变化。</p><figure class="kw kx ky kz fd la er es paragraph-image"><div class="er es mr"><img src="../Images/737e69e5c1c9562701742c3430190394.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*3RDHhV_9m6LdmGeId8nPwA.jpeg"/></div><figcaption class="ma mb et er es mc md bd b be z dx translated">蓝色-实际，橙色-预测</figcaption></figure><p id="12e3" class="pw-post-body-paragraph jw jx hi jy b jz kq ij kb kc kr im ke ji ks kg kh jm kt kj kk jq ku km kn ko hb bi translated">这些结果可能会通过更强大的技术(如递归神经网络)得到显著改善，但相对于所付出的努力，很难击败马尔可夫链。</p></div></div>    
</body>
</html>