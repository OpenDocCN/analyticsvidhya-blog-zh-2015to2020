<html>
<head>
<title>Install Elasticsearch and Kibana using Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Docker 安装 Elasticsearch 和 Kibana</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/setup-elasticsearch-kibana-via-docker-ce21cf6f5312?source=collection_archive---------3-----------------------#2020-09-28">https://medium.com/analytics-vidhya/setup-elasticsearch-kibana-via-docker-ce21cf6f5312?source=collection_archive---------3-----------------------#2020-09-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/5508ed712b7f25b87f593684640cbb91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0Bg1Rn7slsuNGZU91m8vpQ.png"/></div></div></figure><div class=""/><p id="43cf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，你必须在你的机器上安装 Docker 和 Docker compose。如果您还没有安装它，请点击此<a class="ae jo" href="https://docs.docker.com/get-docker/" rel="noopener ugc nofollow" target="_blank">链接</a>在您的机器上安装它。</p><p id="099c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于本教程，我们将使用<a class="ae jo" href="https://docs.docker.com/compose/" rel="noopener ugc nofollow" target="_blank"><strong class="is hu">docker-compose</strong></a><strong class="is hu"/>命令来运行我们自己的容器 Elasticsearch 和 Kibana。</p><p id="d26b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">继续创建一个<strong class="is hu"> docker-compose.yml </strong>文件并粘贴下面的代码，</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="513c" class="jy jz ht ju b fi ka kb l kc kd">version: '3'<br/>services:<br/>  elasticsearch:<br/>    image: elasticsearch:7.8.1<br/>    ports:<br/>      - 9200:9200<br/>    environment:<br/>      discovery.type: 'single-node'<br/>      xpack.security.enabled: 'true'<br/>      ELASTIC_PASSWORD: '&lt;your_password&gt;'<br/>  kibana:<br/>    image: kibana:7.8.1<br/>    volumes:<br/>      - ./kibana.yml:/usr/share/kibana/config/kibana.yml<br/>    ports:<br/>      - 5601:5601</span></pre><p id="a94f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个 Docker 合成食谱在你的机器上旋转 2 个 Docker 容器。一个容器运行 Elasticsearch 7.8.1，另一个运行 Kibana 7.8.1。它将 Elasticsearch API 映射到机器上的端口 9200，将 Kibana 映射到端口 5601。您可以查看官方 Docker 图片，了解<a class="ae jo" href="https://hub.docker.com/_/elasticsearch" rel="noopener ugc nofollow" target="_blank"> Elasticsearch </a>和<a class="ae jo" href="https://hub.docker.com/_/kibana" rel="noopener ugc nofollow" target="_blank"> Kibana </a>的所有可用配置选项。对于本教程，我们将在 Elasticsearch 上启用安全性(咄！)和配置密码(默认用户名是“elastic”)。</p><p id="6399" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">菜谱还将<strong class="is hu"> kibana.yml </strong>挂载到 Kibana config 目录，您需要对该文件进行一些更改，以确保 kibana 正确连接到运行 Elasticsearch 的容器。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="7087" class="jy jz ht ju b fi ka kb l kc kd"># To allow connections from remote users, set this parameter to a non-loopback address.</span><span id="3ef0" class="jy jz ht ju b fi ke kb l kc kd">server.host: "0.0.0.0"</span><span id="6f77" class="jy jz ht ju b fi ke kb l kc kd"># The URLs of the Elasticsearch instances to use for all your queries.</span><span id="b013" class="jy jz ht ju b fi ke kb l kc kd">elasticsearch.hosts: ["<a class="ae jo" href="http://elasticsearch:9200" rel="noopener ugc nofollow" target="_blank">http://elasticsearch:9200</a>"]</span><span id="4b85" class="jy jz ht ju b fi ke kb l kc kd"># If your Elasticsearch is protected with basic authentication, these settings provide<br/># the username and password that the Kibana server uses to perform maintenance on the Kibana<br/># index at startup. Your Kibana users still need to authenticate with Elasticsearch, which<br/># is proxied through the Kibana server.</span><span id="39e7" class="jy jz ht ju b fi ke kb l kc kd">elasticsearch.username: "elastic"<br/>elasticsearch.password: "&lt;your_password&gt;"</span></pre><p id="3499" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">更新 19/3/22:从 8.1 版本开始，使用“elastic”用户名将 Kibana 连接到 ElasticSearch 不起作用。请改用授权令牌或旧版本。</p><p id="51a7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">两个<strong class="is hu"> yml </strong>文件都准备好之后，打开一个终端，导航到您的目录并执行下面的命令，</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="7cd8" class="jy jz ht ju b fi ka kb l kc kd">docker-compose up</span></pre><p id="8277" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Docker 将为<a class="ae jo" href="https://hub.docker.com/_/elasticsearch" rel="noopener ugc nofollow" target="_blank"> Elasticsearch </a>和<a class="ae jo" href="https://hub.docker.com/_/kibana" rel="noopener ugc nofollow" target="_blank"> Kibana </a>下载图像，并设置您的容器。成功完成后，您将能够看到您的容器正在运行，</p><figure class="jp jq jr js fd hk er es paragraph-image"><div class="er es kf"><img src="../Images/9f18ac4d0d10286781ce7656c07d8f1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*RAwFstAey9xiVZgzth7MyA.png"/></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">Elasticsearch 和 Kibana 容器运行</figcaption></figure><p id="255e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">前往<a class="ae jo" href="http://localhost:9200/" rel="noopener ugc nofollow" target="_blank"> http://localhost:9200/ </a>验证 Elasticsearch 现在正在运行(输入您的用户名和密码，默认用户名是“elastic”)，您应该会看到如下所示的响应，</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="0548" class="jy jz ht ju b fi ka kb l kc kd">{<br/>  "name": "localhost",<br/>  "cluster_name": "elasticsearch",<br/>  "cluster_uuid": "DoZwos0YR26WsHSZYO4O2A",<br/>  "version": {<br/>    "number": "7.8.1",<br/>    "build_flavor": "default",<br/>    "build_type": "tar",<br/>    "build_hash": "508c38a",<br/>    "build_date": "2019-06-20T15:54:18.811730Z",<br/>    "build_snapshot": false,<br/>    "lucene_version": "8.5.1",<br/>    "minimum_wire_compatibility_version": "6.8.0",<br/>    "minimum_index_compatibility_version": "6.0.0-beta1"<br/>  },<br/>  "tagline": "You Know, for Search"<br/>}</span></pre><p id="2d46" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">点击此链接查看<a class="ae jo" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-search.html" rel="noopener ugc nofollow" target="_blank"> Elasticsearch 搜索 API </a>的文档。</p><p id="a3a4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要验证 Kibana 是否在您的机器上成功启动并运行，请前往<a class="ae jo" href="http://localhost:5601/" rel="noopener ugc nofollow" target="_blank"> http://localhost:5601/ </a>并输入您的用户名和密码，</p><figure class="jp jq jr js fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kk"><img src="../Images/41add58ea6198a21835b591c410dbd54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QoofG3ZyodcWFhLGZk6KZA.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">验证 Kibana 正在运行，您应该会看到一个登录屏幕</figcaption></figure><p id="993c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">登录后，您可以使用 Kibana 的全部潜力，</p><figure class="jp jq jr js fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kl"><img src="../Images/ec66d95faa42e45cae8ca147ea315296.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s2c6gAAKL2lBtMAmqYvrUw.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">基巴纳主屏幕</figcaption></figure><p id="e72a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">感谢阅读，这就是所有的乡亲！</p></div></div>    
</body>
</html>