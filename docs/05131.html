<html>
<head>
<title>WordPress REST API With Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python的WordPress REST API</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/wordpress-rest-api-with-python-f53a25827b1c?source=collection_archive---------2-----------------------#2020-04-12">https://medium.com/analytics-vidhya/wordpress-rest-api-with-python-f53a25827b1c?source=collection_archive---------2-----------------------#2020-04-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="a27c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇博客中，我们将结合Python使用REST API的强大功能，并执行crud操作。在这个博客中，我们将获取所有的帖子，创建一个新的帖子，使用REST API和Python更新和删除它。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/6c499dfccc530367af2777ca62328677.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*APJQM0yZfcQ_X1EXlZeSvg.png"/></div></div></figure><h1 id="3838" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">证明</h1><p id="ca69" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">首先，我们需要基本的认证来执行crud操作，除非你安装一个名为application password的特殊插件来获取应用程序密码，否则它不会工作。</p><p id="4ad6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">转到您的仪表板-&gt;插件-&gt;添加新的，并在搜索框中键入应用程序密码。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ks"><img src="../Images/c45fd87b3ea7f98cbda38982e31cb7bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*edSLptxEuNZJrJcAxT3giQ.png"/></div></div></figure><p id="92b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦你安装了插件，进入你的配置文件设置并滚动到底部。您将看到一个应用程序密码字段将被添加到那里。键入您的应用程序名称，并按下回车键，弹出将出现一个密码。从弹出窗口复制生成的密码。</p><h1 id="47f0" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">是时候了解一下python了</h1><p id="18c9" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">现在，用<strong class="ih hj">创建一个文件。py </strong>分机。你可以给它取任何名字(例如<strong class="ih hj"> app.py </strong>)。</p><p id="01f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">导入一些必需的包:</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="6ce6" class="ky jq hi ku b fi kz la l lb lc">import requests<br/>import json<br/>import base64</span></pre><h1 id="19c3" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">获取帖子</h1><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="5276" class="ky jq hi ku b fi kz la l lb lc">url = "<a class="ae ld" href="https://example.com/wp-json/wp/v2/posts" rel="noopener ugc nofollow" target="_blank">https://example.com/wp-json/wp/v2/posts</a>"</span><span id="6abf" class="ky jq hi ku b fi le la l lb lc">user = "your-username"<br/>password = "your-application-password"</span><span id="4934" class="ky jq hi ku b fi le la l lb lc">credentials = user + ':' + password</span><span id="9daf" class="ky jq hi ku b fi le la l lb lc">token = base64.b64encode(credentials.encode())</span><span id="ee1a" class="ky jq hi ku b fi le la l lb lc">header = {'Authorization': 'Basic ' + token.decode('utf-8')}</span><span id="64de" class="ky jq hi ku b fi le la l lb lc">responce = requests.get(url , headers=header)</span><span id="e83b" class="ky jq hi ku b fi le la l lb lc">print(responce)</span></pre><p id="32ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们来理解这个代码。</p><ul class=""><li id="1f25" class="lf lg hi ih b ii ij im in iq lh iu li iy lj jc lk ll lm ln bi translated"><strong class="ih hj"> URL </strong>是你想从中获取帖子的站点的URL。</li><li id="761a" class="lf lg hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated"><strong class="ih hj">用户</strong>是您的管理员用户名。</li><li id="4108" class="lf lg hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated"><strong class="ih hj">密码</strong>是您刚刚生成的应用程序密码。</li><li id="ca53" class="lf lg hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">对您的凭证进行编码，并在标头授权中传递它们，如代码所示。</li><li id="b67e" class="lf lg hi ih b ii lo im lp iq lq iu lr iy ls jc lk ll lm ln bi translated">在这一行的底部，我们打印出我们的回答，看看我们得到了什么。</li></ul><p id="f83f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，打开您的终端并运行您的app.py文件。</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="8a59" class="ky jq hi ku b fi kz la l lb lc">python app.py</span></pre><h1 id="cb42" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">创建帖子</h1><p id="520a" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">要创建一个帖子，我们需要使用一些必需的参数来发出帖子请求，比如URL、您的JSON数据。让我们这样做:</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="3861" class="ky jq hi ku b fi kz la l lb lc">url = "<a class="ae ld" href="https://wholeblogs.com/wp-json/wp/v2/posts" rel="noopener ugc nofollow" target="_blank">https://wholeblogs.com/wp-json/wp/v2/posts</a>"</span><span id="3ac2" class="ky jq hi ku b fi le la l lb lc">user = "your-username"<br/>password = "your-application-password"</span><span id="a7fb" class="ky jq hi ku b fi le la l lb lc">credentials = user + ':' + password</span><span id="a575" class="ky jq hi ku b fi le la l lb lc">token = base64.b64encode(credentials.encode())</span><span id="e335" class="ky jq hi ku b fi le la l lb lc">header = {'Authorization': 'Basic ' + token.decode('utf-8')}</span><span id="d32c" class="ky jq hi ku b fi le la l lb lc">post = {<br/> 'title'    : 'Hello World',<br/> 'status'   : 'publish', <br/> 'content'  : 'This is my first post created using rest API',<br/> 'categories': 5, // category ID<br/> 'date'   : '2020-01-05T10:00:00'<br/>}</span><span id="c663" class="ky jq hi ku b fi le la l lb lc">responce = requests.post(url , headers=header, json=post)</span><span id="e5d4" class="ky jq hi ku b fi le la l lb lc">print(responce)</span></pre><h1 id="f5b3" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">更新帖子</h1><p id="78b0" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">要更新帖子，您需要传递帖子id来告诉REST API您想要更新哪个帖子。让我们看看如何做到这一点。</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="a55e" class="ky jq hi ku b fi kz la l lb lc">url = "<a class="ae ld" href="https://wholeblogs.com/wp-json/wp/v2/posts/" rel="noopener ugc nofollow" target="_blank">https://wholeblogs.com/wp-json/wp/v2/posts/</a>"</span><span id="1bb5" class="ky jq hi ku b fi le la l lb lc">postID = 1</span><span id="da12" class="ky jq hi ku b fi le la l lb lc">user = "your-username"<br/>password = "your-application-password"</span><span id="ab72" class="ky jq hi ku b fi le la l lb lc">credentials = user + ':' + password</span><span id="86ee" class="ky jq hi ku b fi le la l lb lc">token = base64.b64encode(credentials.encode())</span><span id="0fdf" class="ky jq hi ku b fi le la l lb lc">header = {'Authorization': 'Basic ' + token.decode('utf-8')}</span><span id="2428" class="ky jq hi ku b fi le la l lb lc">post = {<br/> 'title'    : 'Hello World Updated',<br/> 'content'  : 'This is my first post created using rest API Updated'<br/>}</span><span id="302b" class="ky jq hi ku b fi le la l lb lc">responce = requests.post(url + postID , headers=header, json=post)</span><span id="dc59" class="ky jq hi ku b fi le la l lb lc">print(responce)</span></pre><p id="bd60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，postID是要更新的帖子的ID。</p><h1 id="6e1c" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">删除帖子</h1><p id="7db0" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">要删除一篇文章，我们需要使用python提供的删除请求。</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="3684" class="ky jq hi ku b fi kz la l lb lc">url = "<a class="ae ld" href="https://wholeblogs.com/wp-json/wp/v2/posts/" rel="noopener ugc nofollow" target="_blank">https://wholeblogs.com/wp-json/wp/v2/posts/</a>"</span><span id="8ad6" class="ky jq hi ku b fi le la l lb lc">user = "your-username"<br/>password = "your-application-password"</span><span id="6f3f" class="ky jq hi ku b fi le la l lb lc">credentials = user + ':' + password</span><span id="3f4a" class="ky jq hi ku b fi le la l lb lc">token = base64.b64encode(credentials.encode())</span><span id="fc44" class="ky jq hi ku b fi le la l lb lc">header = {'Authorization': 'Basic ' + token.decode('utf-8')}</span><span id="72de" class="ky jq hi ku b fi le la l lb lc">responce = requests.delete(url + postID , headers=header)</span><span id="4515" class="ky jq hi ku b fi le la l lb lc">print(responce)</span></pre><p id="1dcf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是用python对WordPress REST API的一个小介绍。</p><p id="d7f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以在我的GitHub库检查代码。</p><div class="lt lu ez fb lv lw"><a href="https://github.com/BRdhanani/wordpress-rest-api-with-python" rel="noopener  ugc nofollow" target="_blank"><div class="lx ab dw"><div class="ly ab lz cl cj ma"><h2 class="bd hj fi z dy mb ea eb mc ed ef hh bi translated">BRdhanani/WordPress-rest-API-with-python</h2><div class="md l"><h3 class="bd b fi z dy mb ea eb mc ed ef dx translated">用python实现的WordPress Rest API CRUD操作。通过…为BRdhanani/WordPress-rest-API-with-python开发做出贡献</h3></div><div class="me l"><p class="bd b fp z dy mb ea eb mc ed ef dx translated">github.com</p></div></div><div class="mf l"><div class="mg l mh mi mj mf mk jn lw"/></div></div></a></div><p id="6b3d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ml">查看</em><a class="ae ld" href="https://wholeblogs.com/" rel="noopener ugc nofollow" target="_blank">wholeblogs.com</a><em class="ml">了解更多参考资料和博客。</em></p></div></div>    
</body>
</html>