<html>
<head>
<title>Props Drilling In React.Js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">道具钻入反应堆。射流研究…</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/props-drilling-in-react-js-934120a4906b?source=collection_archive---------8-----------------------#2020-08-29">https://medium.com/analytics-vidhya/props-drilling-in-react-js-934120a4906b?source=collection_archive---------8-----------------------#2020-08-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex io ip iq ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es in"><img src="../Images/5cc261eb35af94b1182f5c60120a77d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*aHvK7Rbt_Dv74mWq.png"/></div></div><figcaption class="iy iz et er es ja jb bd b be z dx translated">轮廓-图像</figcaption></figure><p id="e0ea" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">首先，让我们感谢莱昂纳多·迪卡普里奥。你好奇为什么吗？让我们知道为什么；)</p><p id="1b22" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">本文将涵盖两个主题:</p><ul class=""><li id="8455" class="ka kb hi je b jf jg jj jk jn kc jr kd jv ke jz kf kg kh ki bi translated">什么是道具钻</li><li id="558a" class="ka kb hi je b jf kj jj kk jn kl jr km jv kn jz kf kg kh ki bi translated">如何回避道具演练</li></ul></div><div class="ab cl ko kp gp kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="hb hc hd he hf"><p id="a5ae" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><em class="kv">让我们开始派对吧！</em></p><figure class="kx ky kz la fd ir er es paragraph-image"><div class="er es kw"><img src="../Images/7d1c09ba2565db324dbb83dcab309664.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/0*K-S-clRLjmtcdy_I"/></div></figure></div><div class="ab cl ko kp gp kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="hb hc hd he hf"><h1 id="d29d" class="lb lc hi bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">什么是道具钻？</h1><p id="ec86" class="pw-post-body-paragraph jc jd hi je b jf lz jh ji jj ma jl jm jn mb jp jq jr mc jt ju jv md jx jy jz hb bi translated">让我们先回顾一下我们所知道的关于<strong class="je hj">道具</strong>的概念。道具是我们在网站上从顶级组件传递到任意数量的子组件的数据——或者可以访问的数据。<strong class="je hj"> <em class="kv">看图-1 </em> </strong> -</p><figure class="kx ky kz la fd ir er es paragraph-image"><div class="er es me"><img src="../Images/c1f5f08fb47574a507a4dce7354240d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/0*b58JvbNhE1tKv7Tb"/></div><figcaption class="iy iz et er es ja jb bd b be z dx translated"><strong class="bd ld">图表-1- </strong></figcaption></figure><p id="d68c" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">Props Drilling(也叫 threading)就是图-1-转化成这样的时候。</p><figure class="kx ky kz la fd ir er es paragraph-image"><div class="er es mf"><img src="../Images/9a2db689c96c487db71cec95337eea6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/0*ioNTCLVXxOEyed9U"/></div><figcaption class="iy iz et er es ja jb bd b be z dx translated"><strong class="bd ld">图表-2- </strong></figcaption></figure><p id="27a4" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">从图 2 来看，Props Drilling (Threading)是一个概念，指的是你将数据从父组件传递到<strong class="je hj"> <em class="kv">确切的</em> </strong>子组件<strong class="je hj">但</strong>在中间，其他组件拥有<strong class="je hj"><em class="kv">Props 只是为了沿着链传递它。</em>T24】</strong></p></div><div class="ab cl ko kp gp kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="hb hc hd he hf"><p id="b524" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">那么，<strong class="je hj">道具钻</strong>和<strong class="je hj">狮子座</strong>有什么联系呢？</p><p id="152d" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">嗯，莱昂纳多·迪卡普里奥获得了 7 次奥斯卡提名，他凭借电影《归来者》<a class="ae mg" href="https://www.netflix.com/title/80064516" rel="noopener ugc nofollow" target="_blank"><strong class="je hj"/></a>获得了一次。但是在 React.js 世界里，他的名字就是你传递给<em class="kv">不止一级的道具即使他们不需要，直到它到达你在其中使用道具的那个</em> <strong class="je hj"> <em class="kv">。</em> </strong></p><p id="ca1b" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><strong class="je hj"> <em class="kv">你可以通过这个</em> </strong> <a class="ae mg" href="https://codesandbox.io/s/propsdriling-qhm6i?file=/src/App.js" rel="noopener ugc nofollow" target="_blank"> <strong class="je hj"> <em class="kv">链接</em> </strong> </a> <strong class="je hj"> <em class="kv">看到代码。</em> </strong></p><h1 id="46fe" class="lb lc hi bd ld le mh lg lh li mi lk ll lm mj lo lp lq mk ls lt lu ml lw lx ly bi translated">2.如何回避道具演练？</h1><p id="c83f" class="pw-post-body-paragraph jc jd hi je b jf lz jh ji jj ma jl jm jn mb jp jq jr mc jt ju jv md jx jy jz hb bi translated">避免支柱钻孔有几种解决方案:</p><p id="3af7" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><em class="kv"> 1。反应上下文 API。</em></p><p id="6815" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><em class="kv"> 2。构图</em></p><p id="3abe" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><em class="kv"> 3。渲染道具</em></p><p id="5131" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><em class="kv"> 4。特设</em></p><p id="10ea" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><em class="kv"> 5。Redux 或 MobX </em></p></div><div class="ab cl ko kp gp kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="hb hc hd he hf"><h1 id="75ca" class="lb lc hi bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">通过使用 React 上下文 API 钻取来避免道具</h1><p id="3b28" class="pw-post-body-paragraph jc jd hi je b jf lz jh ji jj ma jl jm jn mb jp jq jr mc jt ju jv md jx jy jz hb bi translated">首先，您需要初始化上下文。您可以在 js 文件或父组件的顶部这样做。<br/> <code class="du mm mn mo mp b"><strong class="je hj">const</strong> MyContext = React.createContext() ;</code></p><p id="cd1b" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">之后，继续创建您的提供者并在其中使用上下文。然后，我们需要使用上下文并使用它来扭曲组件，这将上下文参数注入其中。</p><figure class="kx ky kz la fd ir"><div class="bz dy l di"><div class="mq mr l"/></div></figure><p id="1cf3" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">之后，事情就很简单了。你可以像使用道具一样使用上下文。</p><figure class="kx ky kz la fd ir"><div class="bz dy l di"><div class="mq mr l"/></div></figure><p id="81b8" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><strong class="je hj">注:这里</strong> 可以看到代码 <a class="ae mg" href="https://codesandbox.io/s/avoid-props-drilling-using-context-api-8cbfi" rel="noopener ugc nofollow" target="_blank"> <strong class="je hj"/></a></p><p id="c96f" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">恭喜，你做到了。</p><figure class="kx ky kz la fd ir er es paragraph-image"><div class="er es kw"><img src="../Images/086913b2a79f0a094a12da4b7584afa3.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/0*7TlbWSUqCq4uCAIw.gif"/></div></figure></div><div class="ab cl ko kp gp kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="hb hc hd he hf"><h1 id="dc98" class="lb lc hi bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">2.避免道具钻构图</h1><p id="add4" class="pw-post-body-paragraph jc jd hi je b jf lz jh ji jj ma jl jm jn mb jp jq jr mc jt ju jv md jx jy jz hb bi translated">简单地说，要组合 react 组件，您必须将组件分为容器和呈现者。然后把数据当道具传给孩子。</p><p id="659e" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">因此，主要组件将是这样的:</p><figure class="kx ky kz la fd ir"><div class="bz dy l di"><div class="mq mr l"/></div></figure><p id="4406" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">“列出电影”组件将包含如下所有组件:</p><figure class="kx ky kz la fd ir"><div class="bz dy l di"><div class="mq mr l"/></div></figure><p id="3e24" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">这里，将道具传递给亡灵组件。</p><figure class="kx ky kz la fd ir"><div class="bz dy l di"><div class="mq mr l"/></div></figure><blockquote class="ms mt mu"><p id="117a" class="jc jd kv je b jf jg jh ji jj jk jl jm mv jo jp jq mw js jt ju mx jw jx jy jz hb bi translated"><strong class="je hj">这里</strong> 可以看到完整的代码 <a class="ae mg" href="https://codesandbox.io/s/solve-props-drilling-without-anything-w1xcn?file=/src/App.js:1089-1504" rel="noopener ugc nofollow" target="_blank"> <strong class="je hj"/></a></p></blockquote><p id="109e" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><strong class="je hj"> <em class="kv">好极了，你成功完成了</em> </strong></p><figure class="kx ky kz la fd ir er es paragraph-image"><div class="er es kw"><img src="../Images/ac393ce39c00d879dbf2d797109b9343.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/0*23ND3PLksFHRcmna.gif"/></div></figure></div><div class="ab cl ko kp gp kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="hb hc hd he hf"><p id="c3ab" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><strong class="je hj"> <em class="kv">在接下来的两篇文章中我会解释其他的解决方案；)</em> </strong></p><figure class="kx ky kz la fd ir er es paragraph-image"><div class="er es kw"><img src="../Images/4b5032e4e8d2254f2995b353dfa59e9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/0*ZqPUSbQBfjIaghE_.gif"/></div></figure></div><div class="ab cl ko kp gp kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="hb hc hd he hf"><h1 id="c790" class="lb lc hi bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">资源:</h1><p id="da51" class="pw-post-body-paragraph jc jd hi je b jf lz jh ji jj ma jl jm jn mb jp jq jr mc jt ju jv md jx jy jz hb bi translated"><a class="ae mg" href="https://reactjs.org/docs/composition-vs-inheritance.html" rel="noopener ugc nofollow" target="_blank">组合 Vs 继承</a> <br/> <a class="ae mg" rel="noopener" href="/@alexkrolick/react-composition-patterns-from-the-ground-up-8401aaad93d7">从头反应组合模式</a> <br/> <a class="ae mg" href="https://dev.to/spukas/avoid-prop-drilling-in-react-with-context-api-1ne5" rel="noopener ugc nofollow" target="_blank">避免在 React With Context API 中进行道具演练</a></p></div></div>    
</body>
</html>