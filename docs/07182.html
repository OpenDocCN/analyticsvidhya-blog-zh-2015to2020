<html>
<head>
<title>Entity Extraction using Regex and more…</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用正则表达式和更多的实体提取…</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/enitity-extraction-using-regex-and-more-8bb7c4165f5c?source=collection_archive---------12-----------------------#2020-06-16">https://medium.com/analytics-vidhya/enitity-extraction-using-regex-and-more-8bb7c4165f5c?source=collection_archive---------12-----------------------#2020-06-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="fbe8" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated"><strong class="ak">结合不同的简单方法从KYC文档中提取信息</strong></h2></div><p id="0833" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">合著者:<a class="ae jt" rel="noopener" href="/@saurabh.vnit">绍拉布·贾因</a></p><p id="5c8d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接吻——保持简单，笨蛋</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/982893479e42385a8489ecebd6cc3973.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TIBf5Bhwtt6mL-vK"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">在<a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae jt" href="https://unsplash.com/@convertkit?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> ConvertKit </a>拍照</figcaption></figure><p id="23c5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">很少有问题不需要复杂的解决方案，可以采用一些简单的技术来解决它们。本文将讨论这样一种解决方案。</p><p id="aca5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">即使在数字化时代，许多行业仍然不得不使用纸质文件。银行和保险业仍然使用KYC文件的硬拷贝进行验证。尽管他们可以选择数字KYC，但在发展中国家，如印度，实体拷贝对客户来说是方便的方式。公司不得不花费大量资源来提取/验证这些KYC文档。</p><p id="d611" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从KYC文档中提取实体的方法有很多。我们用最少的资源开发了一个非常有效的解决方案。</p><p id="e228" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">简介</strong></p><p id="cbd3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">KYC文件通常包含姓名、地址、出生日期、身份证号码等字段。我们使用正则表达式来提取这些实体。对于正则表达式来说，文档格式应该是静态的，因此KYC文档是一个很好的用例。</p><p id="0090" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">考虑评估的文件类型:</p><p id="e57d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">潘，阿达尔，护照，死亡证明</p><p id="e546" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">接近</strong></p><p id="6e83" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们使用以下三种方法来制定规则:</p><p id="c1eb" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">方法1:作为必需实体的正则表达式模式</p><p id="6cb7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">方法2:正则表达式模式周围的文本作为必需的实体。</p><p id="33d8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">方法3:将相对于另一个实体的文本作为必需的实体</p><p id="a7c6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">网格搜索</strong></p><p id="9288" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为每种文档类型实施上述三种方法中的一部分或全部。</p><p id="ad85" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">通过使用网格搜索技术，我们找到了最佳的方法序列。</p><p id="c9f5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">潘</strong></p><p id="a1d5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们以从PAN中提取实体为例。</p><p id="338e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">需要提取的实体:PAN编号、出生日期、名字、父亲的名字</p><p id="c51d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">PAN编号-在浏览了数据集中的所有PAN文档(100)后，发现了以下方法/模式。</p><p id="1caa" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">方法1:</p><p id="5e64" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">模式1A: ([a-z]{5}\d{4}[a-z]{1}) —完美的OCR，例如BEDPM1537A</p><p id="4830" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">模式1B: ([a-z]{5}\d{1，4}[a-z]{1，3}) —错误的OCR，例如BEDPM15BOA</p><p id="2c14" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">方法2:</p><p id="9286" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">模式2A:(？:数字|数字卡)\ s *(a-z){ 5 } \ d { 4 }[a-z]{ 1 })—完美的OCR，例如数字底座1537A</p><p id="1251" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">模式2B:(？:数字|数字卡)\ s *([a-zA-Z0–9]{ 8，13}) —错误的OCR，例如数字BEDPM15BOA</p><p id="faaa" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因为我们有4个模式，我们需要依次运行它们，一旦找到匹配的模式，我们就将其作为找到的实体返回。我们不应该将这些模式随机排列，因为这样会将不太可能出现的模式放在序列的顶部，这样会增加误报的几率。因此，为了找出最有可能出现在PAN文档中模式，我们使用网格搜索技术(通常在ML中用于找到最佳超参数)。</p><p id="1e38" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因为有4种模式，所以可能的序列总数是4！=24.</p><p id="aefe" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于24个序列中的每个序列:</p><p id="312d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">计算准确度</p><p id="fe4a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">以最高精度返回序列</p><p id="8ae7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，我们找到了最佳的模式序列——2A模式、2B模式、1A模式、1B模式</p><p id="290c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">出生日期</strong></p><p id="17c8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">方法1:</p><p id="5f7c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">模式1A:([0–9]{ 2 }(\/|-)[0–9]{ 2 }(\/|-)[0–9]{ 4 })</p><p id="6ffe" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">模式1B:([0–9-\/]+)</p><p id="e737" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">通过使用网格搜索，最佳模式序列—1A模式、1B模式</p><p id="4145" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">祖宗的名字</strong></p><p id="edc5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">方法2:</p><p id="e94f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">模式2A:(？:父亲的|父亲)\s(？:Name)\ s([a-z]* \ s *[a-z]* \ s *[a-z]*)</p><p id="72db" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">方法三:父亲名字位于出生日期上方。</p><p id="0a37" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">用上面的方法找到生日。</p><p id="7071" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">出生日期上面的文字是父亲的名字</p><p id="364b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">通过使用网格搜索，最佳序列模式2A，接近3</p><p id="1f9f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">名</strong></p><p id="6e97" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">方法1:</p><p id="8fa2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">模式2A:(？:Name)\ s *([a-z]* \ s *[a-z]* \ s *[a-z]*)</p><p id="be54" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">途径三:姓名位于父亲姓名之上。</p><p id="5303" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">用上面的方法找到父亲的名字</p><p id="0d4b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">父亲名字上面的文字是名字</p><p id="2103" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">通过使用网格搜索，最佳序列模式2A，接近3</p><p id="b729" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">数据集</strong></p><p id="25d8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">每种文件类型100张图像</p><p id="c242" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">实验</strong></p><ol class=""><li id="1444" class="kk kl hi iz b ja jb jd je jg km jk kn jo ko js kp kq kr ks bi translated">我们尝试了不同的OCR提供商，得到了以下结果。有趣的是，对于同一幅图像，OCR引擎可能会产生完全不同的结果。</li><li id="1f16" class="kk kl hi iz b ja kt jd ku jg kv jk kw jo kx js kp kq kr ks bi translated">我们发现Google Vision在以下情况下提供了最好的OCR结果，这些情况在印度KYC文档中很明显:</li></ol><p id="417a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">地区语言确定，垂直段落分隔。</p><ol class=""><li id="e579" class="kk kl hi iz b ja jb jd je jg km jk kn jo ko js kp kq kr ks bi translated">应用了不同的图像清洗技术，但是图像清洗管道不能适用于所有的图像质量。所以我们只用了图像增强处理/增加DP比率。</li></ol><p id="f7a1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">使用的工具/包</strong></p><p id="cb34" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">re '-正则表达式的python库</p><p id="2a7a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">像AWS Textract、Azure Vision、Google Vision这样的云OCR</p><p id="452f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">绩效评估，结果</strong></p><p id="70dc" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">覆盖率=(正确+不正确)/预期总数</p><p id="0d7a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">准确度=正确/总预期</p><p id="2942" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">平底锅</p><p id="c109" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">覆盖准确度</p><p id="0b61" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">AWS Textract 96 81</p><p id="07ab" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">蔚蓝视觉96 93</p><p id="9202" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">谷歌视觉98 94</p><p id="a12b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">阿德哈尔</p><p id="74d9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">覆盖准确度</p><p id="a1cd" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">AWS Textract 75 72</p><p id="5c09" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">蔚蓝视觉93 90</p><p id="4890" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">谷歌视觉94 91</p><p id="68fb" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">用例</strong></p><p id="bc69" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">处理KYC文件的银行、保险或类似行业。</p><p id="2690" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">类似的方法可以应用于文档结构是静态的、没有复杂的表格和表单(例如护照)的情况</p><p id="7c08" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">挑战</strong></p><ol class=""><li id="c551" class="kk kl hi iz b ja jb jd je jg km jk kn jo ko js kp kq kr ks bi translated">正则表达式依赖于OCR测试，同一文件的OCR输出在不同的OCR引擎之间不一致，因此相同的正则表达式不能在不同的OCR引擎之间使用。</li><li id="6de5" class="kk kl hi iz b ja kt jd ku jg kv jk kw jo kx js kp kq kr ks bi translated">如果文档类型在模板中有许多变化，那么正则表达式在看不见的文档上失败。例如，死亡证明模板随着每个医院的变化而变化，因此正则表达式在我们的结果中显示出非常低的准确性。</li></ol><p id="6e33" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">应用通用图像清理过程将提高OCR质量，从而有助于提高准确性。</p><p id="1dcd" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">给定KYC文档的大数据集，可以使用使用图形卷积神经网络的基于深度学习的解决方案。</p></div><div class="ab cl ky kz gp la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="hb hc hd he hf"><p id="2c93" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你喜欢这篇文章或有任何建议/意见，请在下面分享！</p><p id="8e05" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们在<a class="ae jt" href="https://www.linkedin.com/in/sarang-mete-6797065a/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上联系讨论吧</p></div></div>    
</body>
</html>