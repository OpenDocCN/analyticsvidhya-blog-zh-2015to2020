<html>
<head>
<title>Feature Engineering Part 1- Imputation Techniques.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">特征工程第 1 部分-插补技术。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/feature-engineering-part-1-imputation-techniques-eafce8f341bc?source=collection_archive---------9-----------------------#2020-08-15">https://medium.com/analytics-vidhya/feature-engineering-part-1-imputation-techniques-eafce8f341bc?source=collection_archive---------9-----------------------#2020-08-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="b1a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">了解不同的缺失数据机制并完成案例分析。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/b47bce1e7b3b2740d54372e3db8c6c30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oViSAlSsd3DJ_tuQ"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">卢卡·奥尼博尼在<a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="78ce" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated"><strong class="ak"> 🪐Missing 数据:</strong></h1><p id="05da" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">当变量中没有存储某个观察值的数据时，就会出现丢失数据或丢失值的情况。</p><blockquote class="kx ky kz"><p id="2e8b" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">在大多数数据集中，缺失数据是常见现象</p><p id="36af" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">缺失数据会对从数据中得出的结论产生重大影响。</p></blockquote><p id="69f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在许多组织中，信息是由与客户通电话的人或在线填写表格的客户收集到表格中的。通常，输入数据的人不会完成表单中的所有字段。许多字段不是必填的，这可能会导致缺少值。</p><p id="2213" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">省略信息的原因可能各不相同:可能该人不想透露某些信息，例如收入，或者他们不知道答案，或者答案不适用于特定情况，或者相反，组织中的人员希望节省客户一些时间，因此省略了询问他们认为不太相关的问题。</p><p id="159e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在其他情况下，某个变量的值不存在。例如，在变量“总债务占总收入的百分比”(在财务数据中非常常见)中，如果此人没有收入，则总百分比 0 不存在，因此它将是一个缺失值。</p><p id="8ccc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">了解缺失数据是如何引入数据集中的，即缺失信息是如何引入数据集中的，这一点很重要。根据不同的机制，我们可以选择以不同的方式处理丢失的值。此外，通过了解丢失数据的来源，我们可以选择采取措施来控制该来源，并在数据收集期间减少丢失的信息量。</p><h1 id="697e" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated"><strong class="ak">💥数据缺失:原因</strong></h1><blockquote class="kx ky kz"><p id="0a97" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">丢失:值丢失，因为它被遗忘、丢失或未正确存储。</p><p id="cc91" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">不存在:一个变量由两个变量相除而成，分母取 0。</p><p id="1d90" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">未找到:当根据邮政编码或出生日期匹配数据以增加更多变量时，如果邮政编码或出生日期错误或不存在，新变量将采用 NA。</p></blockquote><h1 id="01ab" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated"><strong class="ak"> 🧡Missing 数据:影响</strong></h1><blockquote class="kx ky kz"><p id="0bd2" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">与 Scikitlearn 不兼容</p><p id="fb4f" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">缺失数据插补可能会扭曲变量分布。</p><p id="781a" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">影响所有机器学习模型。</p></blockquote><h1 id="a516" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">💫缺失数据:机制:</h1><p id="35fc" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">了解缺失数据的机制可以帮助我们选择正确的缺失数据插补技术。3 种机制导致数据丢失，其中 2 种机制涉及随机或几乎随机丢失数据，第三种机制涉及数据的系统性丢失。</p><h1 id="e82f" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">1.完全随机缺失数据(MCAR):</h1><blockquote class="kx ky kz"><p id="9f47" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">对于所有的观测值，丢失的概率是相同的</p><p id="494e" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">数据集中缺失的数据与任何其他值(观察到的或缺失的)之间没有关系</p><p id="a86d" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">如果一个变量在所有的观测值中缺失的概率是相同的，那么这个变量就是完全随机缺失的(MCAR)。当数据为 MCAR 时，缺失的数据与数据集中观察到的或缺失的任何其他值之间没有关系。换句话说，那些丢失的数据点是数据的随机子集。没有什么系统性的事情会让一些数据比其他数据更容易丢失。如果观察值完全随机缺失，那么忽略这些情况不会使推断产生偏差。</p></blockquote><h1 id="63c8" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">2.随机缺失数据(MAR):</h1><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es le"><img src="../Images/ee4adcc775813b434cd0dbb6d69255af.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/format:webp/1*1XdnPDe-fn8ZRLeNTTgpTA.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">随机丢失数据</figcaption></figure><blockquote class="kx ky kz"><p id="7db1" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">在随机缺失中，数据以一定的速率缺失，但是该速率取决于数据中的一些其他变量。</p><p id="3382" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">尽管我们总体上确实有缺失数据，但如果我们知道上述情况中的某些其他因素(性别),缺失数据的比率就可以得到完美的解释。</p><p id="de3c" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">当缺失值的倾向与观察到的数据之间存在关系时，就会出现 MAR。换句话说，观察值缺失的概率取决于可用信息(即数据集中的其他变量)。例如，如果男性比女性更有可能透露他们的体重，体重就会被标记。对于那些不透露体重的男性和女性来说，体重信息会随机丢失，但由于男性更倾向于透露体重，所以女性丢失的值会比男性多。</p><p id="2ea9" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">在类似上述的情况下，如果我们决定继续处理具有缺失值的变量(在本例中为权重)，我们可能会受益于包括性别以控制缺失观察值的权重偏差。</p></blockquote><h1 id="1381" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">3.非随机缺失数据:</h1><blockquote class="kx ky kz"><p id="e330" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">一个值缺失的倾向和它的值之间有关系。换句话说，当一个变量的缺失值与该变量本身的值相关时，即使在控制了其他变量之后，数据也不是随机缺失的。一个例子是关于药物使用的调查。如果被调查的个人由于害怕被起诉而使用了目前非法的药物，他们可能会将字段留空。因此，这些字段并不是随机留空的，而是故意留空的。</p></blockquote><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lf"><img src="../Images/c5aa2a3d08d35ea52c8b4de7d71e51f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/format:webp/1*4LmQmIZyam-1JS0P8HXdpA.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">丢失的数据不是随机的</figcaption></figure><blockquote class="kx ky kz"><p id="bffd" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">当数据集中引入缺失值的机制或原因存在时，缺失数据不是随机的(MNAR)。例如，如果人们因为他们的抑郁水平而没有填写抑郁调查，就会发生 MNAR。这里，缺失的数据与结果有关，抑郁症。</p><p id="6831" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">同样，当金融公司要求客户提供银行和身份证件以防止身份欺诈时，通常情况下，冒充他人的欺诈者不会上传文档。他们没有，因为他们是诈骗犯。所以，丢失的文件和我们要预测的目标:诈骗之间有一个系统的关系。</p><p id="5316" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">了解数据缺失的机制对于决定使用哪种方法来估算缺失值非常重要。</p></blockquote><h1 id="a300" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">🚩缺失数据插补:</h1><blockquote class="kx ky kz"><p id="0ad4" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">插补是用缺失值的统计估计值替换缺失数据的行为。</p><p id="eef4" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">任何插补技术的目标都是生成可用于训练机器学习模型的完整数据集。</p></blockquote><h1 id="0fea" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">💛数字变量</h1><p id="8fda" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">1.均值/中位数插补</p><p id="6c78" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.任意值插补</p><p id="a5f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.尾部插补结束</p><h1 id="b174" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">💙分类变量</h1><p id="aa93" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">1.频繁类别插补或模式插补</p><p id="29a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.添加“缺失”类别</p><h1 id="6c43" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">🧡两者</h1><p id="fdbd" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">1.完整的案例分析</p><p id="91b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.添加“缺失”指标</p><p id="3320" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.随机样本插补</p><h1 id="6e88" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">🌌完整的案例分析:</h1><blockquote class="kx ky kz"><p id="af6f" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">完全病例分析(CCA)，也称为病例的“列表式删除”,包括丢弃任何变量中的值缺失的观察值。</p><p id="7b22" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">在完全病例分析中，我们只分析那些数据集中所有变量都有信息的观察值。</p></blockquote><h1 id="d6e3" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">我可以用 CCA 估算哪些变量？</h1><p id="aded" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">CCA 可以应用于分类变量和数值变量</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lg"><img src="../Images/cf49e5ac58de90e8649186bdf99371f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*N4eIreBvE5LGpT3XtQoPBw.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">完整的案例分析</figcaption></figure><h1 id="06d3" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">假设:</h1><p id="d334" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">当数据完全随机缺失时，CCA 工作良好(MCAR)。如果我们有理由相信数据是随机丢失的，我们应该使用 CCA，否则就不用 CCA。当数据为 MCAR 时，排除具有缺失信息的观测值本质上与从数据集中随机排除一些观测值相同。因此，CCA 后的数据集是原始数据集的合理表示。</p><h1 id="2720" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">优势:</h1><blockquote class="kx ky kz"><p id="fc95" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">易于实施</p><p id="6c3e" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">不需要数据操作</p><p id="aff9" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">保留变量分布(如果数据为 MCAR，则缩减数据集的变量分布应与原始数据集中的分布相匹配)</p></blockquote><h1 id="2070" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">缺点:</h1><blockquote class="kx ky kz"><p id="c0ec" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">它可以排除原始数据集的很大一部分(如果缺失数据很多)</p><p id="7d2b" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">排除的观察值可以为分析提供信息(如果数据不是随机丢失的)</p><p id="9f88" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">如果完整病例与原始数据不同(例如，当缺失信息是 MAR 或 NMAR，而不是随机缺失时)，CCA 将创建有偏数据集。</p><p id="9cf8" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">当在生产中使用我们的模型时，模型不知道如何处理丢失的数据</p></blockquote><h1 id="894f" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">何时使用 CCA:</h1><blockquote class="kx ky kz"><p id="8dd7" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">数据完全随机丢失</p><p id="afd5" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">不超过总数据集的 5%包含缺失数据</p><p id="d223" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">实际上，当丢失的信息量很小时，CCA 可能是一种可接受的方法。不幸的是，没有经验法则来确定有多少丢失的数据是小的或可忽略的。然而，作为一般指导，如果丢失数据的总量是原始数据集的 5%或更少，CCA 是一个可行的选择。</p><p id="d70a" class="if ig la ih b ii ij ik il im in io ip lb ir is it lc iv iw ix ld iz ja jb jc hb bi translated">在许多现实生活的数据集中，缺失数据的数量从来都不小，因此 CCA 通常不是一个选项。</p></blockquote><h1 id="7d5c" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">💚CCA 和生产中的模型:</h1><p id="281f" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">使用 CCA 时，我们会删除所有包含缺失信息的观察值。然而，我们想要用模型评分的数据可能确实包含缺失的信息。当在实际系统中使用我们的模型时，或者当将或模型投入生产时，这将带来一个问题:当一个观察包含缺失数据时，模型将无法处理它。为了避免这个问题，在将模型投入生产时，我们需要做以下两件事情中的一件:要么我们不为缺失数据的观测值评分，要么我们用另一个数字替换缺失值。我们可以从插补技术中选择任何一种。</p><h1 id="698b" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">履行</h1><div class="lh li ez fb lj lk"><a href="https://github.com/ArunAmballa/Feature-Engineering" rel="noopener  ugc nofollow" target="_blank"><div class="ll ab dw"><div class="lm ab ln cl cj lo"><h2 class="bd hj fi z dy lp ea eb lq ed ef hh bi translated">阿鲁纳姆巴拉/特征工程</h2><div class="lr l"><h3 class="bd b fi z dy lp ea eb lq ed ef dx translated">在 GitHub 上创建一个帐户，为 ArunAmballa/功能工程开发做出贡献。</h3></div><div class="ls l"><p class="bd b fp z dy lp ea eb lq ed ef dx translated">github.com</p></div></div><div class="lt l"><div class="lu l lv lw lx lt ly jn lk"/></div></div></a></div><p id="f791" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大家在评论里讨论一下，如果发现帖子有什么不对的地方或者有什么要补充的。谢谢。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lz"><img src="../Images/ddff8b2093ad99735efc0e40551e4ece.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*_ky1Fjk8oep_Tbu4kR5DiQ.gif"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">鼓掌</figcaption></figure></div></div>    
</body>
</html>