# 火花三角洲湖

> 原文：<https://medium.com/analytics-vidhya/spark-delta-lake-d05dd480287a?source=collection_archive---------5----------------------->

## 火花上的酸以及一些升级。

嘿伙计们，

希望你做得好，今天我将向你解释三角洲湖！

这是我文章的第一部分，我将向你解释 Apache Spark 的问题和 Delta Lake 的需求，下一篇文章将包含动手实践的有趣部分…

![](img/a1fc5004243058a4100d64ceebdcd363.png)

今年 Spark 峰会的[基调](https://databricks.com/sparkaisummit/north-america/2019-spark-summit-ai-keynotes)之一是宣布[三角洲湖开源项目](http://delta.io)。delta lake 背后的主要想法是将 ACID 功能带回大数据，这似乎是一件早已逝去的事情。除了 Spark 强大而快速之外，它还缺乏酸性，这在开始时似乎并不重要，但逐渐缺乏酸性会阻碍 Spark 项目。许多投入生产的 Spark 大数据项目都因为以下问题而失败:

*   缺乏模式实施
*   不支持增量负载
*   数据湖中损坏的数据

有了德尔塔湖，我们将能够克服这些问题。现在，Delta Lake 最重要的方面是恢复 ACID 特性，但是为什么 ACID 特性很重要，Apache Spark 中没有它的缺点是什么？

![](img/97a7ee26e01adae5d50d9c2c4945deda.png)

让我简单介绍一下基础知识，告诉你我们在 Apache Spark 中面临的问题。

*   原子性:这意味着工作应该完全完成，否则就不会产生任何影响。根据 Spark [文档](https://spark.apache.org/docs/latest/sql-data-sources-load-save-functions.html#save-modes)，保存模式不是原子的，但是 Apache Spark 通过 FileOutputCommiter 版本 1(用于 Hdfs)遵循该特性。
*   一致性:在 Spark 中，当执行覆盖时，数据将在写入新数据之前被删除。这意味着将会有数据完全丢失的时间跨度，此时的异常将导致数据丢失，这有点可怕，因为我们可能最终没有任何数据。
*   隔离:这意味着对同一数据集的读写操作应该相互隔离。由于 Apache Spark 中的写操作缺乏原子性，它不能保证隔离。
*   持久性:这个特性意味着“一旦提交就永远不会丢失”。Hdfs 有助于保持 Spark 的持久性，但是如果 Spark 没有正确提交作业，可能会出现问题。

除了 ACID 的问题之外，缺乏模式执行也是一个主要障碍，因为 Spark 在读取时遵循模式，并且在增量加载期间，如果发生一些列数据类型不匹配的情况，我们将能够毫无问题地将其写入数据湖，但是这将导致损坏我们的数据。

因此，Databricks 决定为这些问题画上句号，并宣布三角洲湖！Delta Lake 建立在大数据项目中最常用的拼花格式之上。

三角洲湖给我们带来了以下特点:

*   数据湖上的 ACID 事务
*   架构实施
*   时间旅行能力

有了 Spark 中可能的 ACID 事务，我们将能够执行更新、删除和合并等操作。没有可能的方法来更新我们现有的数据或合并新的数据，但有了 Delta lake，只需一个命令就可以做到这一切。此外，还将维护一个事务日志文件。

通过模式实施功能，将遵循写入时的模式。这意味着数据类型或模式的任何变化都会在写入时被当场捕获，这将阻止它进入数据湖，破坏我们的数据，并在执行我们的作业时给我们带来异常，这给我们带来了要纠正的噩梦。

Delta Lake 最棒也是最酷的部分是它的时间旅行功能，这对其他数据科学家来说至关重要，因为每次我们对数据集执行操作时，它都会维护数据集的不同版本。因此，对于时间旅行，覆盖或附加到我们数据湖实际上并不意味着以实际形式丢失我们的旧数据。我们只需要用我们想要的版本搜索我们的数据集，那时的数据集就会返回给我们，很酷吧？因此，在为预测模型运行不同的数据集时，我们也会时间旅行到可能会给我们带来更好结果的旧数据集。

这是对达布瑞克三角洲湖的一个简短概述。在下一篇文章中，我将向您展示在 Pyspark 安装 Delta Lake 的实践。在那之前再见，塔塔，瓦纳卡姆。

点击下面的链接，查看包含代码和 Delta Lake 实践的后续文章。

[](/@merchantabid4/getting-hands-dirty-in-spark-delta-lake-1963921e4de6) [## 在火花三角洲湖弄脏手

### 嘿伙计们，

medium.com](/@merchantabid4/getting-hands-dirty-in-spark-delta-lake-1963921e4de6) 

请查看 Databricks 在 2019 年星火峰会上发布的三角洲湖公告视频。