<html>
<head>
<title>Brick by Brick: Build a multi-page dashboard (Sankey diagrams)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一砖一瓦:构建多页仪表板(桑基图)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/brick-by-brick-build-a-multi-page-dashboard-sankey-diagrams-a73b0876c1f?source=collection_archive---------9-----------------------#2020-12-20">https://medium.com/analytics-vidhya/brick-by-brick-build-a-multi-page-dashboard-sankey-diagrams-a73b0876c1f?source=collection_archive---------9-----------------------#2020-12-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="16de" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第4部分:这是关于使用Plotly Dash逐步构建仪表板的系列文章的第4部分。我们讨论数据清理、数据类型识别、格式化和准备，特别是关于创建Sankey和条形图。桑基图将显示一个街区中房产的数量和类型</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/5835fb033bb23202ffd5f2fe47121b96.png" data-original-src="https://miro.medium.com/v2/resize:fit:862/format:webp/0*Ty78lR0rqh_5e4me.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">喜马拉雅蓝罂粟</figcaption></figure><p id="b3b7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">AirBnB 内部的<a class="ae jp" href="http://insideairbnb.com/get-the-data.html" rel="noopener ugc nofollow" target="_blank">数据提供了美国西雅图AirBnB房源的公开数据。我们将使用我们在这个</a><a class="ae jp" href="https://sjtalkar.medium.com/brick-by-brick-build-a-multi-page-dashboard-37912dd7d9e6" rel="noopener">系列</a>的第一部分中创建的仪表板框架，并包含空间数据来探索列表的位置</p><h1 id="567d" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">目标</h1><p id="4002" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">我们将为仪表板创建一个Sankey图表，如下所示。我们还有一个分段(按邻居)条形图，针对每个邻居组，显示相同的信息，但旁边的样式不同。在桑基图表中，每个链接显示了某个社区中某个物业类型的数量。但它也可以显示一个街区内不同类型的房产的分割情况。当悬停在节点上时，显示属性类型的集合以及邻域内属性的集合。<strong class="ih hj">这是桑基图在相同空间</strong>内提供的比分段条形图更多的信息。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es kt"><img src="../Images/1fdb668601f4cf5dbb4ecf40cb58638b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*qkQMAjvVwvqn8zdpt3MzsQ.gif"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated"><strong class="bd js">两级桑基</strong></figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es ky"><img src="../Images/68c6ccb46e4f224b920682c47fff3fbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*rG-M7CfUgP3njME7-IK9HQ.gif"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated"><strong class="bd js">仪表板内的三键和横条</strong></figcaption></figure><h1 id="36ea" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">装置</h1><p id="8c01" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">按照本文<a class="ae jp" rel="noopener" href="/plotly/introducing-jupyterdash-811f1f57c02e"> <strong class="ih hj"> <em class="kz">中的说明</em></strong></a><strong class="ih hj"><em class="kz">e</em></strong>从Jupyter笔记本上设置并运行Dash应用服务器。Github中的笔记本还列出了所使用的包及其版本，以帮助您开始使用。</p><h1 id="bc47" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">代码和下载</h1><p id="e009" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">这个系列的代码可以在这个<a class="ae jp" href="https://github.com/sjtalkar/SeriallyBuildDashboard" rel="noopener ugc nofollow" target="_blank"> Github repo上找到。</a>应用程序从Jupyter笔记本上运行。有。py (Python)文件，其中包含布局和数据操作的代码。我使用并强烈推荐Visual Studio代码来处理这些问题，因为有许多方便的扩展可用于格式化，特别有助于在Python中构建HTML DOM结构和编码，以及格式化代码。</p><p id="fcf6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用地图创建仪表盘的文件有:<br/> <strong class="ih hj">笔记本:<br/> </strong>本文使用:rentalsankeychart . ipynb<br/><strong class="ih hj">sankey和Bar的仪表盘实现可以在这里找到<br/></strong>createdashboardbarsankey . ipynb<br/><strong class="ih hj">。py文件:<br/>T13】layout _ bar _ sankey . py<br/>data manipulation _ bar _ sankey . py<br/>callback _ bar _ sankey . py<br/>T17】。html文件:</strong>T19】IndvListingsMap.html<br/>NeighborhoodCountMap.html</p><h1 id="fce8" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated"><strong class="ak">概念</strong></h1><p id="1ae2" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">是一种可视化技术，允许显示流动(传统上是能量、金钱或材料)。几个实体(<code class="du la lb lc ld b">nodes</code>)用矩形或文本表示。它们的链接用箭头或弧线表示，箭头或弧线的宽度与流的重要性成比例。<br/>如需进一步参考，可访问本综合<a class="ae jp" href="https://datavizcatalogue.com/methods/sankey_diagram.html" rel="noopener ugc nofollow" target="_blank">目录</a>。在一个Sankey图中可以描述几个层次的流程层次。在我们的应用程序中，我们将使用这种可视化来显示邻居列表对一个邻居组的贡献，以及各种财产类型的列表对一个邻居的贡献。</p><h2 id="6a05" class="le jr hi bd js lf lg lh jw li lj lk ka iq ll lm ke iu ln lo ki iy lp lq km lr bi translated">数据</h2><p id="9aaf" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">租金数据可以从几个角度来看，例如:a)租房者；b)房东；c)AirBnB公司；d)市议会制定条例和法规。</p><p id="33a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以各种方式对这些数据进行切片和分段，使我们能够为这些利益相关者提供见解。数据分析师手中的每个数据集都需要一些处理，这样我们才能从中挤出信息。第一步通常是清理数据并添加额外的汇总或清理列。</p><h2 id="8b39" class="le jr hi bd js lf lg lh jw li lj lk ka iq ll lm ke iu ln lo ki iy lp lq km lr bi translated"><strong class="ak">加载数据和初始清理</strong></h2><p id="e5a0" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">下面的代码详细描述了这个过程，createRentalDF函数加载了listings_1.csv文件，这个文件是从我们从AirBnB内部网站下载的listings.csv.gz文件中提取出来的。为了构建这个仪表板的可视化效果，我对一些列感兴趣，而不是所有的列，因此在我进行探索性数据分析之后，我感兴趣的列被挑选出来放入dataframe rental_df中。</p><ol class=""><li id="3b23" class="ls lt hi ih b ii ij im in iq lu iu lv iy lw jc lx ly lz ma bi translated"><strong class="ih hj">列信息和数据类型</strong></li></ol><p id="dead" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然大多数列名都是不言自明的，但我在网上搜索了这些列的含义，研究了从文件中加载的数据帧中的数据类型，并标记了为了可视化而希望清理和修改的数据类型。更重要的是，我区分了<strong class="ih hj">分类和数字数据类型，有序和名义，离散和连续</strong>。<br/><a class="ae jp" href="https://towardsdatascience.com/how-many-data-types-can-you-name-a5f8869066ca" rel="noopener" target="_blank"><strong class="ih hj">关于这些类型的信息，这里有一篇你会喜欢的</strong> </a> <strong class="ih hj"> </strong>文章。下面是我准备的指导我清理数据框的文件截图。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mb"><img src="../Images/e4b6affff893a123ec1060c729e804bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*JmOYTar1-m2byY7rFYA0sg.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated"><strong class="bd js">数据类型和列理解</strong></figcaption></figure><p id="9652" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="kz">注:上图中从许可证往下，所有数值均为文本</em> </strong></p><p id="9860" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 2。缺失信息</strong></p><p id="300b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我想强调在一些列上执行的一些数据清理任务。host_response_rate是一个以百分比结尾的字符串。这必须通过去掉百分号并转换成浮点数来表示。但是该字段也缺少某些主机的信息。相当多的主机(约1/5)有多个列表。我们可以利用这一事实，通过找到主机的平均响应率，并在缺少该值的主机上填入该值，用“典型”响应率来填充缺少的响应率。<br/> <strong class="ih hj">注:用下面的</strong>查找有多个列表的主机数量</p><pre class="je jf jg jh fd mc ld md me aw mf bi"><span id="2f5e" class="le jr hi ld b fi mg mh l mi mj"> df1 = rental_df[“host_id”].value_counts().to_frame()<br/> df1[df1[‘host_id’] &gt; 1]</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es mk"><img src="../Images/a9292279604f6b38a74887b434cdc73b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v-OxG8eL3p3I79nE6xGobQ.png"/></div></div></figure><p id="1af4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于如何处理缺失值的更多信息，你会发现<a class="ae jp" href="https://liberalarts.utexas.edu/prc/_files/cs/Missing-Data.pdf" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">这篇</strong> </a>文章很有用。</p><p id="5a64" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 3。将字符串数据转换为数值</strong></p><p id="6772" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一些数据是分类文本，可以转换成数字，用于进一步的ML分析。例如，host _ reponse _ time分为四个类别，这四个类别按照重要性明确排序，因为响应“一小时内”比“几天或更长时间”具有更高的值。因此，我们给它们分配一个数值，以便于分析，如下所示。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es ml"><img src="../Images/aed33fac5b7cc987727c55557370ed93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3163gPLL-_f5dG-PAE2ntw.png"/></div></div></figure><p id="b75d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 4。清理和整合财产类型</strong></p><p id="6257" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">rental_df中的property_type列范围很广，如笔记本<strong class="ih hj"> RentalSankeyChart.ipynb. </strong>中所列。为了找出该数据中的含义，我们将合并隐喻性的相似属性，以便我们可以更好地可视化和分析较少数量的属性。房间被分类为共享或私人，独立于它们所在的属性(房子/公寓)。当一处房产被描述为“整体”时，那么该房产的类型——小屋/房子/公寓/小屋就会被提到最前面。其他合并可以在下面代码中的函数<strong class="ih hj"> createPropertyTypeCol </strong>中看到。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="mm mn l"/></div></figure><h1 id="b2f6" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">设置Sankey图表数据</h1><p id="410e" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">我们有邻里团体分叉成邻里，最终分叉成财产类型。因此，我们的节点就是我们上面创建的邻居组、邻居和属性类型。链接将显示每个社区组到社区到物业类型连接的列表数量。当用户使用Pandas group by和count函数选择一个邻域组时，将动态创建这些聚合计数。</p><p id="b87c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Plotly图形对象“go”要求数据以一种方式排列，这种方式有助于我们传达层次结构或流的每个级别的节点和链接权重，作为go的参数。桑基函数。我将向您展示如何简化这些源、目标和链接值列表的创建。以下是桑基图表的创建，您可以参考<a class="ae jp" href="https://plotly.com/python/sankey-diagram/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">文档</strong> </a> <strong class="ih hj"> </strong>了解更多详情。</p><p id="444c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">两个参数，<strong class="ih hj">节点</strong>和<strong class="ih hj">链接</strong>，每个都是一个字典对象，用期望的属性<strong class="ih hj">、</strong>来设置，并完整地描述图表。</p><p id="9c9d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">节点</strong>:在标签属性的字典中指定<strong class="ih hj">节点</strong>的名称。这里，列表中填充了Sankey流的每个级别的节点名称。我们可以通过选择每个节点的粗细和包围它的线条来自定义它的外观。我们还可以为每个节点设置单一颜色或提供不同的颜色(提示:将颜色参数设置为列表，每个元素代表一个节点的颜色)。使用“<strong class="ih hj"> customdata </strong>”和“<strong class="ih hj"> hovertemplate </strong>”的组合来定制悬停工具提示。在customdata中，我提供了节点名称，因此，当用户悬停在节点上时，模板可以使用节点名称创建一个字符串来显示该节点的属性列表的聚合值(无论是邻居、组还是属性类型)</p><p id="7f8d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">link</strong>:<strong class="ih hj">link</strong>参数是另一个字典对象，它有三个键:source、target和值，它们是携带连接信息的列表。对于每个链接，颜色在发送给颜色属性的列表中提供。就像节点的情况一样，可以提供一个<strong class="ih hj">悬停模板</strong>来定制工具提示(或者覆盖默认的<strong class="ih hj">工具提示</strong>)。它使用我们在节点中设置的<strong class="ih hj"> customdata </strong>。</p><pre class="je jf jg jh fd mc ld md me aw mf bi"><span id="b404" class="le jr hi ld b fi mg mh l mi mj">fig = go.Figure(data=[go.Sankey(<br/>    node = dict(<br/>      pad = 15,<br/>      thickness = 20,<br/>      line = dict(color = "black", width = 0.5),<br/>      label = label_list,<br/>      color = color_node,<br/>      customdata=label_list,<br/>      hovertemplate="%{customdata} has  %{value} listings&lt;extra&gt;&lt;/extra&gt;",  <br/>    ),<br/>    link = dict(<br/>        source = source,<br/>        target = target,<br/>        value = values,<br/>        color = color_link,<br/>        hovertemplate="Link from  %{source.customdata}&lt;br /&gt;"<br/>                    + "to %{target.customdata}&lt;br /&gt;has  %{value} listings&lt;extra&gt;&lt;/extra&gt;",<br/>      )<br/>)])</span></pre><p id="d935" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，使用pandas groupby，我们为邻居组“Queen Anne”的第一级Sankey创建一个数据帧(这是我们的仪表板过滤器中的用户选择)。当我们将这些数据按安妮女王的邻居分组时，我们得到了一个如下图所示的数据帧。nbd_count_listings列将为我们提供需要传递给上面的<strong class="ih hj">值</strong>参数的列表。我们可以将这个列转换成一个列表来使用它的值，但是源和目标所需的列表呢？</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es mo"><img src="../Images/ce3821fef8c5122a5efa88963f6b143e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IhGf9ZfzydGAMOdq86E15Q.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated"><strong class="bd js">带有汇总列表计数和索引的数据框架</strong></figcaption></figure><p id="3ba6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在是时候创建如下所示的映射列表了，索引的位置与值对齐。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mp"><img src="../Images/cbf4b2c2b54d8d1c9dc7080ff316ee50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*choN1WbRCUX7aq6z3W0IcA.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated"><strong class="bd js">第一级Sankey列表节点和链接(邻域组到邻域)</strong></figcaption></figure><p id="0189" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了创建源索引和目标索引，我们首先为每个节点分配一个索引。获取组中唯一的邻域名称列表，并将其存储在“label_list”中。每个邻域的索引将是它在列表中的索引位置。用户在仪表板中选择的邻居组被提供索引0。创建一个字典，将这个列表中的邻域名称映射到它在label_list中的位置。</p><p id="93ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个字典价值连城，因为我们现在可以用它将数据帧中的列值(neighborhood _ cleansed)映射到索引。属性类型采用相同的技术。我们将所有可用的唯一属性类型添加到同一个列表(label_list)中，从而为它们分配一个列表索引。该索引是字典中属性类型键的值，可用于将列property_type_class映射到索引值。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es mq"><img src="../Images/44277f518638f524dfcdf0dbec52d6f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZGNGd4ZQCyIDrXSiDGugLw.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated"><strong class="bd js">显示在源和目标列表中使用的索引创建的代码</strong></figcaption></figure><p id="82d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们看看对更细粒度级别的邻居和财产类型重复上述过程。</p><p id="b84f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从包含列表计数的groupby数据帧开始。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es mr"><img src="../Images/8f71e2289c8ebfcc9597b227016d6f54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zk1SIggPWWDFLQZOON5bwQ.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated"><strong class="bd js">桑基_df </strong></figcaption></figure><p id="fae1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">想象你想要创建的链接。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es ms"><img src="../Images/772ac0b617585ac539764f56aa7eaa13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dwDghfZrOCAO9qqgyc_Rdw.png"/></div></div></figure><p id="4e8c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建字典，将关键字设置为邻域名称，将值设置为标签列表中邻域的索引。使用字典将数据帧中的列映射到索引。</p><p id="cc79" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建的索引列现在可以变成列表，提供给go中的源和目标参数。桑基函数。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es mt"><img src="../Images/07f06f517119771717592f8dd2d2220f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UiKzebX10uzFfjzCJeFS1g.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated"><strong class="bd js">将列转换为源、目标和值的列表</strong></figcaption></figure><p id="2f02" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种模式是高度可伸缩的，因为我们可以简单地向标签列表添加新级别的新节点，并使用列表索引为我们创建的任何聚合级别的数据帧设置索引。我们希望分配给链接的颜色也作为列添加到数据帧中，并且可以根据每个节点(邻域)的值进行设置。</p><h1 id="9bce" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">最后</h1><p id="e8e8" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">我已经向您展示了如何在Plotly中创建数据结构来创建Sankey图表。我建议您现在探索并巩固您的理解，将图表扩展到另一个级别，将我们之前整合的物业类型分成单个物业类型，以更精细地了解租赁用户的利益。帮助他们租到他们心仪的房产！</p><p id="6a6f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请随意评论、提问和联系。</p></div></div>    
</body>
</html>