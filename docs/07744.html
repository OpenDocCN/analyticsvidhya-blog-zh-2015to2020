<html>
<head>
<title>Data Visualization: Word Clouds with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据可视化:使用Python的单词云</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/data-visualization-word-clouds-with-python-fbb6395be18f?source=collection_archive---------7-----------------------#2020-07-06">https://medium.com/analytics-vidhya/data-visualization-word-clouds-with-python-fbb6395be18f?source=collection_archive---------7-----------------------#2020-07-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/bd76c2940609d33d8a0f373b4e459939.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*milhPD_nYR_clT_6t-jr3w.jpeg"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">图片来源:<a class="ae hv" href="http://www.busitelce.com/data-visualisation/30-word-cloud-of-big-data" rel="noopener ugc nofollow" target="_blank">http://www . busitelce . com/data-visualization/30字大数据云</a></figcaption></figure><div class=""/></div><div class="ab cl iv iw gp ix" role="separator"><span class="iy bw bk iz ja jb"/><span class="iy bw bk iz ja jb"/><span class="iy bw bk iz ja"/></div><div class="hb hc hd he hf"><h1 id="4d05" class="jc jd hy bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">单词云</h1><blockquote class="ka"><p id="3dce" class="kb kc hy bd kd ke kf kg kh ki kj kk dx translated">单词云(也称为文本云或标签云)的工作方式很简单:特定单词在文本数据源(如演讲、博客帖子或数据库)中出现得越多，它在单词云中出现得就越大、越粗</p></blockquote><blockquote class="kl km kn"><p id="378a" class="ko kp kq kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll kk hb bi translated">首先，我们先把所有的<strong class="kr hz"> <em class="hy">初级库</em> </strong>导入。</p></blockquote><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="fc66" class="lv jd hy lr b fi lw lx l ly lz"><strong class="lr hz">import numpy as np  </strong># useful for many scientific computing in Python<strong class="lr hz"><br/>import pandas as pd </strong># primary data structure library<strong class="lr hz"><br/>from PIL import Image </strong># converting images into arrays<strong class="lr hz"><br/>import matplotlib.pyplot as plt </strong># for visualizing the data</span></pre><blockquote class="kl km kn"><p id="05f9" class="ko kp kq kr b ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li me lk ll kk hb bi translated"><strong class="kr hz"> Python </strong>包已经存在于Python中，用于生成词云。这个名为<strong class="kr hz"> word_cloud </strong>的软件包是由<strong class="kr hz"> Andreas Mueller </strong>开发的。点击此<a class="ae hv" href="https://github.com/amueller/word_cloud/" rel="noopener ugc nofollow" target="_blank"> <strong class="kr hz">链接</strong> </a>可以了解更多关于该套餐的信息。</p></blockquote><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="0728" class="lv jd hy lr b fi lw lx l ly lz"># install wordcloud<br/><strong class="lr hz">!pip install wordcloud</strong></span></pre><p id="ce4c" class="pw-post-body-paragraph ko kp hy kr b ks ma ku kv kw mb ky kz mf mc lc ld mg md lg lh mh me lk ll kk hb bi translated">现在让我们导入这个包和它的停用词集。</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="2b55" class="lv jd hy lr b fi lw lx l ly lz"><strong class="lr hz">from wordcloud import WordCloud, STOPWORDS</strong></span></pre><blockquote class="kl km kn"><p id="eefe" class="ko kp kq kr b ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li me lk ll kk hb bi translated"><strong class="kr hz">字云</strong>常用于对文本数据进行高层分析和可视化。因此，让我们离开移民数据集，使用一个涉及分析文本数据的示例。让我们试着分析一篇由路易斯·卡罗尔写的名为《爱丽丝漫游奇境记》的短篇小说。</p></blockquote><p id="ad9f" class="pw-post-body-paragraph ko kp hy kr b ks ma ku kv kw mb ky kz mf mc lc ld mg md lg lh mh me lk ll kk hb bi translated">让我们继续下载一个<strong class="kr hz">。txt </strong>文件的小说。</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="1a26" class="lv jd hy lr b fi lw lx l ly lz"># download file and save as alice_novel.txt<br/><strong class="lr hz">!wget --quiet </strong><a class="ae hv" href="https://s3-api.us-geo.objectstorage.softlayer.net/cf-courses-data/CognitiveClass/DV0101EN/labs/Data_Files/alice_novel.txt" rel="noopener ugc nofollow" target="_blank"><strong class="lr hz">https://s3-api.us-geo.objectstorage.softlayer.net/cf-courses-data/CognitiveClass/DV0101EN/labs/Data_Files/alice_novel.txt</strong></a></span><span id="3b4c" class="lv jd hy lr b fi mi lx l ly lz"># open the file and read it into a variable alice_novel<br/><strong class="lr hz">alice_novel = open('alice_novel.txt', 'r').read()<br/></strong>    <br/><strong class="lr hz">print ('File downloaded and saved!')</strong></span></pre><blockquote class="kl km kn"><p id="cafa" class="ko kp kq kr b ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li me lk ll kk hb bi translated">接下来，我们使用从'<strong class="kr hz"> word_cloud' </strong>导入的<strong class="kr hz">停用词</strong>。我们使用函数'<strong class="kr hz"> set' </strong>删除任何多余的<strong class="kr hz">停用词</strong>，并创建一个<strong class="kr hz">词云对象</strong>，生成一个<strong class="kr hz">词云</strong>。为了简单起见，我们只使用<strong class="kr hz">小说</strong>中的<strong class="kr hz">前2000个单词</strong>来生成一个<strong class="kr hz">单词云</strong>。</p></blockquote><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="7421" class="lv jd hy lr b fi lw lx l ly lz"><strong class="lr hz">stopwords = set(STOPWORDS)</strong></span><span id="ef28" class="lv jd hy lr b fi mi lx l ly lz"># instantiate a word cloud object<br/><strong class="lr hz">alice_wc = WordCloud(<br/>    background_color='white',<br/>    max_words=2000,<br/>    stopwords=stopwords<br/>)</strong></span><span id="31d2" class="lv jd hy lr b fi mi lx l ly lz"># generate the word cloud<br/><strong class="lr hz">alice_wc.generate(alice_novel)</strong></span></pre><blockquote class="kl km kn"><p id="8b0f" class="ko kp kq kr b ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li me lk ll kk hb bi translated">厉害！既然<strong class="kr hz">字</strong> <strong class="kr hz">云</strong>已经创建好了，我们来可视化一下。</p></blockquote><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="8a4d" class="lv jd hy lr b fi lw lx l ly lz"><strong class="lr hz">import matplotlib.pyplot as plt</strong></span><span id="b876" class="lv jd hy lr b fi mi lx l ly lz"># display the word cloud<br/><strong class="lr hz">plt.imshow(alice_wc, interpolation='bilinear')<br/>plt.axis('off')<br/>plt.show()</strong></span></pre><figure class="lm ln lo lp fd hk er es paragraph-image"><div class="er es mj"><img src="../Images/94575548b7ecc93baa8648555819b330.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*pyj66lsWzOqt_0ZUUh8WQw.png"/></div></figure><blockquote class="kl km kn"><p id="3fd4" class="ko kp kq kr b ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li me lk ll kk hb bi translated">有意思！所以在<strong class="kr hz">前2000字的</strong>小说中，最常见的词是<strong class="kr hz">爱丽丝</strong>、<strong class="kr hz">称</strong>、<strong class="kr hz">小</strong>、<strong class="kr hz">女王</strong>等等。让我们调整云的大小，这样我们可以更好地看到不太常用的单词。</p></blockquote><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="a507" class="lv jd hy lr b fi lw lx l ly lz"><strong class="lr hz">fig = plt.figure()<br/>fig.set_figwidth(14) </strong># set width<br/><strong class="lr hz">fig.set_figheight(18) </strong># set height</span><span id="1685" class="lv jd hy lr b fi mi lx l ly lz"># display the cloud<br/><strong class="lr hz">plt.imshow(alice_wc, interpolation='bilinear')<br/>plt.axis('off')<br/>plt.show()</strong></span></pre><figure class="lm ln lo lp fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mk"><img src="../Images/d74dfd6660168c81497e920761f4d806.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q81h0BPwuFSV1DR4Aw_vlw.png"/></div></div></figure><blockquote class="kl km kn"><p id="afc7" class="ko kp kq kr b ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li me lk ll kk hb bi translated">好多了！然而，<strong class="kr hz">表示</strong>并不是一个真正的信息词。因此，让我们将它添加到我们的停用词中，并重新生成云。</p></blockquote><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="86f7" class="lv jd hy lr b fi lw lx l ly lz"><strong class="lr hz">stopwords.add('said')</strong> # add the words said to stopwords</span><span id="772b" class="lv jd hy lr b fi mi lx l ly lz"># re-generate the word cloud<br/><strong class="lr hz">alice_wc.generate(alice_novel)</strong></span><span id="9c6b" class="lv jd hy lr b fi mi lx l ly lz"># display the cloud<br/><strong class="lr hz">fig = plt.figure()<br/>fig.set_figwidth(14) </strong># set width<strong class="lr hz"><br/>fig.set_figheight(18) </strong># set height</span><span id="71c8" class="lv jd hy lr b fi mi lx l ly lz"><strong class="lr hz">plt.imshow(alice_wc, interpolation='bilinear')<br/>plt.axis('off')<br/>plt.show(</strong></span></pre><figure class="lm ln lo lp fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mk"><img src="../Images/2a6443d5414f3f1823eb40681abad867.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LFRC_XgX_xd1_5cLwxgeQw.png"/></div></div></figure><blockquote class="kl km kn"><p id="33f6" class="ko kp kq kr b ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li me lk ll kk hb bi translated">太棒了。这看起来真的很有趣！你可以用<strong class="kr hz"> <em class="hy"> word_cloud </em> </strong>包实现的另一件很酷的事情是将文字叠加到任何形状的遮罩上。让我们用一个爱丽丝和她的兔子的面具。我们已经为你创建了这个面具，所以让我们下载它，并把它命名为<strong class="kr hz"> <em class="hy"> alice_mask.png </em> </strong>。</p></blockquote><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="97fc" class="lv jd hy lr b fi lw lx l ly lz"># download image<br/><strong class="lr hz">!wget --quiet </strong><a class="ae hv" href="https://s3-api.us-geo.objectstorage.softlayer.net/cf-courses-data/CognitiveClass/DV0101EN/labs/Images/alice_mask.png" rel="noopener ugc nofollow" target="_blank"><strong class="lr hz">https://s3-api.us-geo.objectstorage.softlayer.net/cf-courses-data/CognitiveClass/DV0101EN/labs/Images/alice_mask.png</strong></a><strong class="lr hz"><br/></strong>    <br/># save mask to alice_mask<br/><strong class="lr hz">alice_mask = np.array(Image.open('alice_mask.png'))<br/></strong>    <br/><strong class="lr hz">print('Image downloaded and saved!')</strong></span></pre><p id="3e90" class="pw-post-body-paragraph ko kp hy kr b ks ma ku kv kw mb ky kz mf mc lc ld mg md lg lh mh me lk ll kk hb bi translated">我们来看看口罩是什么样子的。</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="dd2b" class="lv jd hy lr b fi lw lx l ly lz"><strong class="lr hz">fig = plt.figure()<br/>fig.set_figwidth(14) </strong># set width<strong class="lr hz"><br/>fig.set_figheight(18) </strong># set height</span><span id="f70c" class="lv jd hy lr b fi mi lx l ly lz"><strong class="lr hz">plt.imshow(alice_mask, cmap=plt.cm.gray, interpolation='bilinear')<br/>plt.axis('off')<br/>plt.show()</strong></span></pre><figure class="lm ln lo lp fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mk"><img src="../Images/820b803f25c4920012511ea29d098886.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kMD2BreY09cQc88xzv-cOg.png"/></div></div></figure><blockquote class="kl km kn"><p id="0396" class="ko kp kq kr b ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li me lk ll kk hb bi translated">使用`<strong class="kr hz"> <em class="hy"> word_cloud </em> </strong>`包，根据蒙版塑造<strong class="kr hz">字云</strong>很简单。为了简单起见，我们将继续使用小说中的前2000个单词。</p></blockquote><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="677a" class="lv jd hy lr b fi lw lx l ly lz"># instantiate a word cloud object<br/><strong class="lr hz">alice_wc = WordCloud(background_color='white', max_words=2000, mask=alice_mask, stopwords=stopwords)</strong></span><span id="0773" class="lv jd hy lr b fi mi lx l ly lz"># generate the word cloud<br/><strong class="lr hz">alice_wc.generate(alice_novel)</strong></span><span id="75e6" class="lv jd hy lr b fi mi lx l ly lz"># display the word cloud<br/><strong class="lr hz">fig = plt.figure()<br/>fig.set_figwidth(14) # set width<br/>fig.set_figheight(18) # set height</strong></span><span id="fdff" class="lv jd hy lr b fi mi lx l ly lz"><strong class="lr hz">plt.imshow(alice_wc, interpolation='bilinear')<br/>plt.axis('off')<br/>plt.show()</strong></span></pre><figure class="lm ln lo lp fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mk"><img src="../Images/ad779df430ed14349bcc9aa1bcb45cf4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3imBiVWX4MIyoMGrNOUWpg.png"/></div></div></figure><p id="42c3" class="pw-post-body-paragraph ko kp hy kr b ks ma ku kv kw mb ky kz mf mc lc ld mg md lg lh mh me lk ll kk hb bi translated"><em class="kq">真让人印象深刻！</em></p><h1 id="0fd0" class="jc jd hy bd je jf ml jh ji jj mm jl jm jn mn jp jq jr mo jt ju jv mp jx jy jz bi translated">密码</h1><p id="0a4d" class="pw-post-body-paragraph ko kp hy kr b ks mq ku kv kw mr ky kz mf ms lc ld mg mt lg lh mh mu lk ll kk hb bi translated"><a class="ae hv" href="https://colab.research.google.com/drive/1_ykmeh9IPaXhuqA6bQ3-UcIEUTRuLeFB?usp=sharing" rel="noopener ugc nofollow" target="_blank"> <strong class="kr hz">点击此处</strong> </a>访问此链接运行代码并自行查看结果。</p></div><div class="ab cl iv iw gp ix" role="separator"><span class="iy bw bk iz ja jb"/><span class="iy bw bk iz ja jb"/><span class="iy bw bk iz ja"/></div><div class="hb hc hd he hf"><h1 id="d440" class="jc jd hy bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">感谢阅读</h1><p id="704f" class="pw-post-body-paragraph ko kp hy kr b ks mq ku kv kw mr ky kz mf ms lc ld mg mt lg lh mh mu lk ll kk hb bi translated">更多这样的内容请点击这里并关注我。</p></div></div>    
</body>
</html>