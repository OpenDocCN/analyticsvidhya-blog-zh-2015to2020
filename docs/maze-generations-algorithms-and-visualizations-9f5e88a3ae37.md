# 算法和可视化。

> 原文：<https://medium.com/analytics-vidhya/maze-generations-algorithms-and-visualizations-9f5e88a3ae37?source=collection_archive---------3----------------------->

# 介绍

我们将首先有一个迷宫世界的概述，然后我们将探索 6 种不同的策略和算法来生成随机迷宫；我们将了解它们的利弊，以及如何选择正确的一个。

对于它们中的每一个，我们都可以在网上玩交互式可视化，并下载使用的源代码: [H.urna](https://hurna.io/academy/algorithms/maze_generator/index.html)

注意:图文并茂的词汇表在这篇文章的底部。

# 目标

> 为了取乐。
> 欣赏我们迷宫建筑的动画。
> 探索。

**还有什么？**

我们将逐步学习如何编码和生成迷宫。我们还将练习算法思维和编程概念，如**邻接表、内存效率、递归、生成树、速度效率。**

# 为什么我们喜欢这么多迷宫？

> “你的思想是一个有围墙的花园。即使是死亡也无法触及那里盛开的花朵。”
> (福特—西部世界)

几千年来，人类一直对迷宫和迷宫着迷:他们建造它们，讲述它们的故事，围绕它们创造游戏和谜题，甚至研究其中的动物行为。

请注意**迷宫和迷宫的意思**不一样。与迷宫相比，**迷宫**没有技巧或死胡同:它们**只有一条迂回的路径(它们是单路的)**并且最常用于放松、冥想或灵性。

![](img/8429b3fafe02ad8294fe95738c4e687b.png)

> 伊藤迷宫——迷宫中的人(在下面的精神部分描述)

![](img/18cc223c1c11364b3941c399560b1bac.png)

> 迷宫棋盘游戏

![](img/c110d648eb601550bc6b330eb29795e7.png)

> 麦片盒子上的迷宫

![](img/bcfe5076de0088c70b7812295e0361f6.png)

> 巨大的冰迷宫(位于波兰度假小镇扎科帕内)

根据古希腊传说，最初的迷宫是由建筑师代达罗斯和他的儿子伊卡洛斯托建造的，用来安置牛头怪:一种长着人的身体和公牛头的生物。这个传说进一步告诉我们，代达罗斯非常狡猾地制造了这个迷宫，在建造完成后，他几乎无法逃脱。

从古希腊的神话迷宫到 21 世纪的大型植物/冰/舞台/玉米迷宫，这里有三个我们认为迷宫如此吸引人的主要原因。

# 有趣的

迷宫既令人困惑又令人欣慰:我们迷路了，但却朝着一个现有的出口前进。这使得它非常有趣和令人上瘾。

自 16 世纪以来，迷宫意味着娱乐，以及为秘密会议提供私人的，偏僻的地方。如今，**它们以各种形式出现，你可以在任何地方找到它们**:在几乎所有的麦片盒子上，在游乐园里(例如爱丽丝梦游仙境，在集市上的镜子迷宫)，在棋盘游戏里(例如字面上叫做“迷宫”的游戏)，在电子游戏里(几乎在所有的游戏里)，在电影里(例如字面上叫做“迷宫”的电影)等等。

# 教育的

孩子们似乎与迷宫有着几乎是直接而深刻的自然联系。他们会接受几乎任何迷宫的挑战。迷宫提供了解决问题的体验，而孩子们把它视为一种游戏。**迷宫帮助任何人冷静下来，进行转换，并专注于**，而不是一个经典问题可能有的伤害感情或尴尬。

迷宫特别有助于儿童发展技能，如:
-规划和集思广益各种战略。
-获得空间表征，发展方向。
-扫描复杂环境，记忆路径。
——放松。

# 精神的

> 迷宫里有爱迷宫里有黑暗出口可能不在你认为的地方

我们都在一条路上。迷宫是人生旅程的隐喻；一个创造**一个神圣空间和地方的符号，它把我们从自我带到**内在。古代的迷宫被设计成宁静和内省的。在一些地方，年轻人会走过迷宫，作为他们进入成年的一部分。

像上面的“Itoi”(“迷宫中的人”)这样的单环迷宫图案可能代表了生命的循环、不断的运动以及我们面临的选择。正确的选择会引导我们与万物和谐相处，不管这条路有多艰难或漫长。迷宫的中心是一个圆圈，代表死亡。死亡不是出口，而是一个新旅程的开始，因此，是一个新周期的开始。

# 让我们来建造它们！

# 1.二叉树

**二叉树迷宫生成器**是一种非常罕见的算法，能够生成完美的迷宫**而无需保持任何状态**:这是一种精确的**无记忆迷宫生成算法**，对您可以创建的迷宫大小没有限制。它可以通过独立查看每个单元来构建整个迷宫。这是可能的最直接和最快的算法。

生成的迷宫是真实的**二叉树数据结构**(参见下图)，同时具有**非常偏向的纹理**(参见纹理部分)。

![](img/e9e985fb3477692e7d903ab56877def4.png)

我们将它旋转 45 度以帮助可视化。

![](img/2fc7c7278be5ccc78a4542499aa933ab.png)

将它分解到路径树中会使它变得非常清楚。

# 如何构建

顾名思义，它只需要你在每一步从两个可能的选项中做出选择:**对于网格中的每个单元格**，**投掷硬币**来决定是向北还是向西**雕刻一条通道**。

# 步伐

*   对于网格中的每个现有单元格:
*   1.如果他们存在的话，得到**北边或**西边的邻居。
*   2.**抛硬币**与其中一人连线。
*   已经**搞定了！**

# 纹理

二叉树迷宫不同于标准的完美迷宫；因为大约一半的细胞类型不可能存在于其中。例如，**永远不会有十字路口**，而**所有的死胡同**都有指向**下方或右侧**的通道，永远不会向上或向左。

迷宫倾向于从左上到右下有一个**强烈的对角线偏差**，其中迷宫从右下到左上更容易导航。你可以一直向上或向左走，但不能两者都走。然后，通向左上角，你可以**总是确定性地沿对角线向上和向左**行进，而不会碰到任何障碍到达根。

最后但同样重要的是，**迷宫的四条边**中的两条将被一条**单走廊**跨越，这是因为它的定向结构。

# 2.深度优先搜索

**深度优先搜索(DFS)迷宫生成器**是深度优先搜索遍历算法的随机版本。用堆栈实现，这种方法是生成迷宫最简单的方法之一。

# 如何构建

让我们先来看看 DFS 遍历算法:一个**从任意单元**开始，**在回溯之前沿着每个分支尽可能远地探索**。

为了生成迷宫，我们必须随机遍历:这意味着我们随机选择一个**但未被访问的邻居来继续我们的遍历。当我们遇到一个**死胡同**(没有未访问邻居的单元)，我们**‘回溯’到堆栈中最近的单元**。**

# 步伐

*   选择字段中的起始单元格，并将其添加到堆栈中。
*   当堆栈中有一个要处理的单元时:
*   1.**从堆栈顶部弹出单元格**。
*   2.**连接并访问所有可用的邻居**从底部，左侧，右侧，顶部和未访问。
*   3.**随机选择一个放在最上面的**并将那些邻居推到堆栈上。

# 纹理

生成的迷宫具有**低分支因子**并包含许多**长走廊**，因为算法在‘回溯’(使用堆栈上的前一个单元)之前尽可能地沿着每个分支探索。

**河**的特征意味着当创建迷宫时，算法将寻找并清除附近的细胞:它**像水一样流入**迷宫。DFS 迷宫往往有一条**主河道**，导致**大量短死角**。

> 所有这些使得深度优先成为在视频游戏中生成迷宫的优秀算法。
> 
> 在该算法生成的迷宫中，找到通往根的路通常相对容易，因为大多数路径都通向或来自根，但很难找到出路。

# 3.克鲁斯卡尔的

**克鲁斯卡尔的迷宫生成器**是克鲁斯卡尔算法的随机化版本:一种为加权图生成**最小生成树的方法。**

Kruskal 的很有趣，因为它不像树一样“生长”迷宫，而是在整个迷宫中随机雕刻段落，看起来非常有趣。尽管如此，它最终导致了一个完美的迷宫。

对应的是要求**存储**与迷宫的大小成比例，以及能够以随机顺序枚举**单元**之间的每个边**(这里使用一组边并随机取它们)。**

# 如何构建

一旦我们将所有的边放入一个大的集合中，并且每个单元都有一个唯一的子集 id；我们所需要的是**随机选取一条边**，检查相邻的单元是否属于**不同的子集**并且**通过为两个子集**的所有单元设置相同的 id 来统一它们。

# 步伐

![](img/8a0115c008f37945896db66c131277b5.png)

随机化算法改变了第一个循环步骤，因此不是取出具有最低权重的边，而是从集合中随机移除一条边。

# 纹理

生成的迷宫往往有**许多非常短的死胡同**，给迷宫一种“尖尖的”外观。这种算法产生的迷宫具有**低的“河流”因子**，但不像 [Prim 的算法](https://hurna.io/academy/algorithms/maze_generator/prim_s.html)那么低。

# 4.普里姆的

**Prim 的迷宫生成器**是 Prim 算法的随机化版本:一种从无向加权图生成**最小生成树的方法。**

Prim 的算法通过获取相邻单元并找到下一个最佳单元来创建树。为了使用 Prim's 来生成迷宫，我们将**取一个随机的单元格，然后**移动到下一个单元格。

尽管经典的 Prim 算法保留了一个边的**列表**，这里通过维护一个相邻单元的**列表来研究我们迷宫生成的**修改版本**。**跑得更快**，它仍然需要与迷宫大小成比例的存储空间。**

# 如何构建

Prim 的方法**从任何细胞**开始，并从该细胞向外生长。算法**保持一组可能的单元，迷宫可以扩展到**。在每一步，迷宫在随机方向上**延伸，只要这样做不会与迷宫的另一部分重新连接。**

# 步伐

![](img/f243c0f02714937c0cf5568afb4f5de5.png)

随机化算法改变了单元格连接，因此您不是拉出权重最低的单元格，而是随机连接一个单元格。

# 纹理

Prim 的算法生成的迷宫与通过 **Kruskal 的算法**生成的迷宫有许多共同的特征，例如有大量**非常短的死胡同**，给迷宫一种“尖尖的”外观。该算法还产生了具有非常低的“河流”因子的迷宫和相当直接的解决方案。

> 找到去起始单元的路通常相对容易，但在其他地方很难找到。

# 5.递归除法

**递归分割迷宫生成器是没有方向偏差的最快算法**。虽然递归除法在**并行性**方面表现突出，但这种算法特别吸引人，因为它的**分形性质**:理论上你可以在越来越精细的细节层次(越来越小的尺度)上无限期地继续这个过程。

这种算法有点类似于递归回溯，因为它们都是基于堆栈的，只是这种算法关注的是墙壁而不是通道。作为一个**墙壁生成器**生成器，进程**从充足的空间(所有单元都连接)**开始，**添加墙壁(断开单元)**直到迷宫结果。

# 如何构建

递归分割的一般思想非常简单:我们**从一个空的“房间”开始，用一堵墙把它分成两部分，在墙上开一个洞，然后在两个新创建的房间上重复**这个过程。

# 步伐

*   从充足的空间开始(所有单元格都连接在一起)。
*   1.在这个空间内随机建造一道墙。
*   2.在这面墙内随机建造一条路径。
*   3.**在墙的两侧**反曲。

**在每一步，你仍然有一个有效的迷宫。**算法的每次重复都会增加细节层次。这可能会导致一个无限迷宫级别的潜水动画。

# 纹理

递归分割算法生成的迷宫是**矩形嵌套分形**的形式。这种方法的结果是迷宫中有**长直的墙穿过它们的空间**，这使得人们更容易看到哪些区域应该避开。它也倾向于有许多短的死胡同。

# 6.响尾蛇

**响尾蛇迷宫生成器**与二叉树算法**非常相似，只是稍微复杂一些。此外，Sidewinder 算法只需考虑当前行，因此可用于**生成无限大的迷宫**(类似二叉树)。**

**二叉树迷宫的四条边中有两条**是一条长通道，而**响尾蛇迷宫只有一条长通道**。

# 如何构建

虽然它与二叉树算法有关，但它稍微复杂一些。然而，语言并没有做到公正；这比听起来要简单得多。

# 步伐

*   对于网格中的每一行:
*   1.为每个细胞随机决定是否**雕刻一条通往东方的通道**
*   a.如果通道**被雕刻，将该单元添加到当前运行集合**
*   b.如果通道**没有被雕刻，从路线集合中随机选取一个单元，雕刻一条通向北方的通道并清空当前路线集合**

# 纹理

Sidewinder 算法生成的任何迷宫**都不会有任何朝北的死胡同**，这意味着你从南向北移动时永远不会被卡住。这类似于二叉树算法，在其偏向的方向上永远不会有任何死角。

响尾蛇迷宫往往有一个精英解决方案，其中东路径是直截了当的，但许多长的错误路径是从旁边的北路径向下。

解决方案是**确定性的**，从下到上没有错误:它永远不会折返或不止一次地访问一行，尽管它会**左右摇摆**。

# H.urna 探险家

> 我们可以在 [H.urna Explorer](https://demo.hurna.io/#path=maze/dfs_generator) 上自由发挥那些生成算法。

# 词汇表

## 尺寸

维度类基本上是迷宫在空间中覆盖了多少维度。类型有:

**2D:** 大多数迷宫都是这个维度，你总是可以把它们显示在一张纸上，并在不与任何通道重叠的情况下进行导航。

![](img/014ca1d63da7ab7f7fc6ebd2a53eff91.png)

> H.urna Blocks —迷宫中的 Globo(10 级)

**3D:** 多级迷宫，除了 2D 方向，通道还可以上下。一个三维迷宫可以被看作是 2D 迷宫相互堆叠。

![](img/93f875e99f3d7080848df200d29255fa.png)

> 一些商店里可以找到的迷宫游戏玩具

**更高维度:**有可能出现 4D 和更高维度的迷宫。这些有时被渲染成 3D 迷宫，有特殊的“入口”穿越第四维(例如“过去”和“未来”的入口)。

![](img/b6cace0233fec8b624537f91c4e91b84.png)

> 这是一个 4D 迷宫游戏，只是把它想象成一个可以在玩的时候修改的 3D 迷宫(例如，随着时间的推移，除了 3D 移动之外，你还会有一个时间控制器)。

**编织(2.5D):** 编织迷宫基本上是 2D(或者更准确地说是 2.5D)迷宫，但是通道可以相互重叠。例如，现实生活中的迷宫有桥通过其他通道。

![](img/54292f8d49f371db4ac3d8e7923bd32c.png)

> 有桥的真实生活迷宫。这是 1975 年在英国建造的长树篱迷宫。

# 超维度—超混沌

hyperdimension 类指的是您在迷宫中移动的对象的维度，与迷宫环境本身的维度相对(hypermaze 只能存在于 3D 或更高维度的环境中)。超混沌增加了解题对象和段落本身的维度。在一个普通的迷宫中，你移动一个点穿过它，你身后的路径形成一条线。在超混沌中，你移动一条线穿过它，你的路径形成一个表面！

![](img/2934df6a9ec139ca08c92ccc0ca9f776.png)

> **Hypermaze:**
> 一个完美且非常复杂的 hypermaze (73x73x73 立方体)的正投影渲染。请注意，有数十亿种方式来排列字符串并将其移动到 hypermasze 的一个面上，因为这是一个“完美”的 hypermasze，所以只有一个解决方案，因此初始配置实际上是可行的！
> 资料来源:沃尔特·d·普伦使用代达罗斯软件

# 按指定路线发送

路由是指迷宫生成策略产生的通道几何形状的类型。

**辫状——部分辫状:**“辫状”迷宫是指没有任何死角的迷宫。这种迷宫使用盘绕在一起的通道，这些通道相互交叉(因此有了术语“辫子”)，让你花时间绕圈子，而不是撞进死胡同。一个设计良好的编织迷宫可能比同样大小的完美迷宫要困难得多。
注意形容词“辫子”可以定量使用。一个“密集编织迷宫”将包括许多环或分离的壁。

![](img/ac8d6e821f896090e0a5ce9ccc0cb072.png)

> 你不会被困在任何死胡同里。来源:维基百科

**完美——单连通:**在 H.urna 提出的所有迷宫生成都具有完美的路由。一个“完美的”迷宫意味着没有任何环路、封闭的回路和不可到达的区域。从每一个点出发，都有一条路径通往另一个点:迷宫只有一个解。用计算机科学的术语来说，这样的迷宫可以描述为一棵生成树。

![](img/4f231168335b01d63c51cea92fa0366c.png)

> 迷宫树生成和淹没显示了迷宫及其生成树表示之间的结构和对偶性。
> 来源:使用 [H.urna 探索者](https://demo.hurna.io/#path=maze/prims_generator)的 Michael Jeulin-L

**稀疏:**稀疏迷宫是一种不会在每个细胞中开辟通道的迷宫，这意味着有些细胞没有被创造出来。这相当于具有不可接近的位置，使得这有点与编织迷宫相反。类似的概念可以应用于墙壁加法器算法(例如[循环除法](https://hurna.io/academy/algorithms/maze_generator/recursive_division.html))，产生具有宽通道和房间的不规则迷宫。

![](img/4f982bee7c78558ae86032d0e138387e.png)

> 递归分割生成算法生成的带有大房间的稀疏迷宫。
> 来源:Michael Jeulin-L 使用 [H.urna Explorer](https://demo.hurna.io/#path=maze/recursive_division_generator)

**单环迷宫:**单环迷宫是指没有任何交叉点的迷宫。这种迷宫也被称为迷宫，没有技巧或死胡同:他们有一个单一的迂回路径，而是最常用于放松，冥想或灵性。

![](img/1270a11a5cfe4efbed6adcd70b91e3cd.png)

> 神秘的基督在阿拉特里的迷宫中显示出单熊的图案。

# 镶嵌

tessellation 类是组成迷宫的各个单元的几何图形。你可以想象任何你想要的几何图形；以下是常见类型的一个小列表:正交(矩形单元)、裂缝(无定形)、德尔塔(三角形单元)、分形(递归)、欧米伽(非正交)、适马(六边形单元)、西塔(同心圆通道)、乌西隆(八边形和正方形单元)、泽塔(允许对角线通道的正交)……
图像比文字更有意义，请参见下面的一些“常见”类型:

![](img/a902e999da7f7d5693717490d4937337.png)

> **正交:**也称为 Gamma，它是一个标准的矩形网格，其中单元格的通道以直角相交。
> 资料来源:Michael Jeulin-L 使用 [H.urna Explorer](https://demo.hurna.io/#path=maze/binary_generator)

![](img/dbc589d041f181ac674ad6bf6117fd81.png)

> **适马:**适马迷宫由连锁的八角形组成。来源:Mc 博士儿童读物

![](img/d534a6935eb8d206e745e37a522b0a7c.png)

> **Theta:**Theta 迷宫是由同心圆的通道组成的。

![](img/27ede0e21faf6f78d8a9b270ce5d9b93.png)

> **分形:**分形迷宫由更小的迷宫组成。无限递归分形迷宫是真正的分形，实际上是一个无限大的迷宫。
> 
> 来源:心灵的弯曲

# 纹理

纹理类是微妙的，它描述了各种路径、各种几何形状的通道的风格。这个性质与其说是定量的，不如说是定性的。

![](img/ebc33bcdac701233497b53952c0cc4c5.png)

> **河流:**纹理像河流一样流动。这是来自我们深度优先搜索(DFS)生成器的河流迷宫。
> 资料来源:Michael Jeulin-L 使用 H.urna Explorer

# 拓扑学

拓扑类描述了迷宫作为一个整体存在于:
**正常:**欧氏空间中的标准迷宫的几何图形。
**平面:**任何拓扑异常的迷宫。例如立方体、三角形、球形等表面上的迷宫。

# 我们希望你在迷宫中玩得开心。