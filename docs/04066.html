<html>
<head>
<title>Data Analytics for Life Optimization: Buying a Car</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">生活优化的数据分析:买车</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/data-analytics-for-life-optimization-buying-a-car-3540870b7a08?source=collection_archive---------21-----------------------#2020-03-03">https://medium.com/analytics-vidhya/data-analytics-for-life-optimization-buying-a-car-3540870b7a08?source=collection_archive---------21-----------------------#2020-03-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="fa65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">几个月前，我想买一辆新车。具体来说，我想买一辆吉普车在夏天越野。我更感兴趣的是购买一辆经过改装的二手吉普车(提升套件、更大的轮胎、绞盘等)。).吉普车在科罗拉多州很受欢迎，因此市场容量大，周转快。这使得很难以一种省时的方式分析市场上的所有选择。</p><p id="5408" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我并不急着买车，我想确保我买车的时候买得划算。很难比较各种不同功能和改装的吉普车的价值；没有像新车那样明确的市场价值。</p><p id="5f46" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了做到这一点，我需要想办法自动进行日常搜索，识别我重视的功能，并以易于理解的图形和图表呈现出来。这样，我就可以节省无数滚动浏览广告的时间，并防止自己因为厌倦了搜索而做出鲁莽的决定。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><h1 id="f633" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated"><strong class="ak">自动搜索</strong></h1><p id="2d25" class="pw-post-body-paragraph if ig hi ih b ii ki ik il im kj io ip iq kk is it iu kl iw ix iy km ja jb jc hb bi translated">我所有未来潜在的吉普车都列在互联网上，由于高销量，帖子每天都在变化。我需要自动化搜索，从搜索结果中提取数据，存储数据，运行分析，然后输出有用的图表。</p><h1 id="cace" class="jk jl hi bd jm jn kn jp jq jr ko jt ju jv kp jx jy jz kq kb kc kd kr kf kg kh bi translated"><strong class="ak">识别特征</strong></h1><p id="91a5" class="pw-post-body-paragraph if ig hi ih b ii ki ik il im kj io ip iq kk is it iu kl iw ix iy km ja jb jc hb bi translated">首先，我需要知道我想搜索和收集什么信息。以下是我选择的参数:</p><p id="95b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">行驶里程</p><p id="9ebc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">年型</p><p id="f150" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">品牌/型号</p><p id="9bb3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">位置</p><p id="9237" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">发布日期</p><p id="dfc4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">价格(</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><h1 id="8146" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated"><strong class="ak">刮</strong></h1><figure class="kt ku kv kw fd kx er es paragraph-image"><div class="er es ks"><img src="../Images/48ed5d35b9a8b231df2ecfa5324a9dc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/format:webp/1*V8BzhrqA3Be0pYc5TdN7bg.png"/></div></figure><p id="1963" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我喜欢从Craigslist.org购买汽车，所以这是我需要我的代码搜索的网站。我知道在Python包的奇妙迷宫般的世界中有多种web抓取工具可用。我决定使用Scrapy，它自我描述为“一个开源的协作框架，用于从网站中提取你需要的数据。以一种快速、简单而又可扩展的方式。”</p><p id="bda0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当你在Craiglist上搜索某个东西时，你可以检查每个搜索页面的url是如何变化的，并注意到它是一个正则表达式(意味着它遵循一种模式)。认识到这一点是构建网络爬行“蜘蛛”的关键。我的蜘蛛完成的基本任务是:</p><p id="56a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在craigslist上搜索丹佛周围100英里范围内的“吉普”</p><p id="609a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从列表中提取标题、价格、里程、里程表、年份和品牌</p><p id="8b8a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将结果输出到文件</p><p id="d085" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Craigslist的搜索页面上，每个帖子都有平铺显示。蜘蛛必须“爬过”每一个页面才能获得我想要的数据。幸运的是，每一个添加都标有可以搜索的普通html标签。例如，价格位于XPath:'///span[@ class = " result-price "]/text()'。我的每个变量都有自己的公共标签，我可以搜索这些标签，并按顺序输出到文本文档中。不是web开发人员可能会使这部分代码变得非常棘手，但是如果您有兴趣了解我所说的内容，请访问任何网站，右键单击并选择“Inspect Element”。如果您在html代码中徘徊，您可以找到您感兴趣的网页部分，然后您可以再次右键单击来复制xpath。</p><h1 id="d6cc" class="jk jl hi bd jm jn kn jp jq jr ko jt ju jv kp jx jy jz kq kb kc kd kr kf kg kh bi translated"><strong class="ak"> Scrapy代码</strong></h1><figure class="kt ku kv kw fd kx"><div class="bz dy l di"><div class="la lb l"/></div></figure></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><h1 id="83ca" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated"><strong class="ak">数据分析</strong></h1><figure class="kt ku kv kw fd kx er es paragraph-image"><div class="er es lc"><img src="../Images/24e559f2aec4cf3c86a0a2cbe9edd3e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*IEEBG9bFqSLd_dkAV8oLiw.png"/></div></figure><figure class="kt ku kv kw fd kx er es paragraph-image"><div class="er es ld"><img src="../Images/623830ce5a801cd4dffaee0b223dc8a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1084/format:webp/1*OF13NAbtSTcszGroz_IjfQ.png"/></div></figure><p id="318f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们将这个文本文件构建成一个表，其中包含几天来搜索吉普车的结果。接下来，我在Jupyter Notebook中运行一个单独的代码来分析数据。用于该任务的主要库是<strong class="ih hj"> pandas </strong>和<strong class="ih hj"> matplotlib </strong>。Pandas是python的一个必不可少的数据科学库，matplotlib是一个用于制作图形的健壮的可视化包。</p><p id="230c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我运行的最基本的分析是按年定价，如下图所示:</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es le"><img src="../Images/00c6e3ce148882bbee602f21c0ab94ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qs74ip67-hA6uA-28VXQ5w.jpeg"/></div></div></figure><p id="62eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这张图表告诉了我许多事情，尽管它是非常基本的。(1)待售的新吉普车比旧吉普车多。这是意料之中的，因为汽车在使用20-30年后往往会报废。(2)最老的吉普车最贵。这也是合乎逻辑的，因为一辆1960年的吉普车肯定进行过大规模翻新，也可能是收藏家的物品。</p><p id="a030" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有几款Jeep车型可供选择；牧马人、切诺基、指挥官、自由等。我最感兴趣的是寻找切诺基或牧马人，因此我将数据集分为三类:</p><p id="1e7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">牧马人</p><p id="cec8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">切罗基人</p><p id="8fc7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其他的</p><p id="f986" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为每个类别绘制相同的图表可以提供进一步的见解:</p><p id="c731" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下图提供了每种类型的其他有用信息。结论是牧马人平均比切诺基更贵，而且都比其他类型的吉普车贵。</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es lj"><img src="../Images/6dc86e37749c6f0576e1652b14dfd54f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0TWGOhW3e8S6VZtoasOV1w.jpeg"/></div></div></figure><p id="2b81" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一个需要考虑的重要参数是每辆车的里程表读数。为了绘制这个图，我决定将广告分成三个里程表范围:</p><p id="7fbe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">0–5万英里</p><p id="5bd9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">50-10万英里</p><p id="55bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">10-15万英里</p><p id="075c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我对发动机超过15万英里的车不感兴趣，所以这很好。按年份分别绘制牧马人和切诺基的价格，并按里程表范围着色，输出下图:</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es lk"><img src="../Images/aab0bbf87323c4d1331ef32a2930f8e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pJFhvIOh3rQSL1CNFsVRWg.jpeg"/></div></div></figure><p id="4244" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由此我们看到:</p><p id="3498" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">里程少的吉普车比较新</p><p id="865f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大多数都超过10万英里</p><p id="a256" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">很少有里程不到10万英里、价格低于2万美元的牧马人</p><p id="50ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">里程不到10万英里的切诺基往往比里程相同的牧马人更新</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es ll"><img src="../Images/3e04ca2e4b306944f4f86f6d83afef89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NzG-ekRHrMUc95nuuHdp4Q.jpeg"/></div></div><figcaption class="lm ln et er es lo lp bd b be z dx translated">里程表按年份按价格的三维散点图</figcaption></figure><p id="f29c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在一个图表上分析所有数据更容易，所以我决定为每个里程表范围绘制一个3D散点图，按价格按年份，按型号着色。在图4中，我们看到了这个想法的输出。由此可见，吉普车的数量随着行驶里程的减少而减少，价格和行驶里程成反比。我理想的购买对象是一辆里程不到10万英里、价格不到1.5万美元的牧马人。考虑到这一点，我的目标是最右边潜在购买人群的中间。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="c930" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行我的网络爬虫和分析图表让我在大约3个月后做出了最后的决定。我对我的最终购买非常满意，在解决现实生活中的问题的同时，我也从构建python技能中获得了很多乐趣。</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div class="er es lq"><img src="../Images/27dfdf76c262f22925f1f704ea87cc02.png" data-original-src="https://miro.medium.com/v2/resize:fit:902/format:webp/1*OcOfoFBXGExjFzz_8-4yIg.png"/></div><figcaption class="lm ln et er es lo lp bd b be z dx translated">最终购买</figcaption></figure></div></div>    
</body>
</html>