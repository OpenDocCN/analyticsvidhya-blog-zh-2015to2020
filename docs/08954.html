<html>
<head>
<title>Docker Compose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Docker撰写</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/docker-compose-afcfc9586dbd?source=collection_archive---------27-----------------------#2020-08-19">https://medium.com/analytics-vidhya/docker-compose-afcfc9586dbd?source=collection_archive---------27-----------------------#2020-08-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/7581a85479904dc81f0923d1c6e5349d.png" data-original-src="https://miro.medium.com/v2/resize:fit:710/format:webp/1*myhgBYiFyzih38pzemw_Xw.png"/></div></figure><p id="9c99" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们可以创建一个容器并使用Dockerfile运行它。我们甚至可以在多个终端中使用两个Dockefiles在不同的端口运行多个容器。</p><p id="cefe" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">但是当你想为你的应用程序创建多个容器时，你必须创建几个Docker文件。这增加了维护它们的负担，并且相当耗时。</p><p id="fce0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这篇博客是我之前的<a class="ae jk" rel="noopener" href="/@sarthak3398/how-to-install-wordpress-on-docker-using-mysql-backend-1611641d14ac"> <strong class="io hj">博客</strong> </a> <strong class="io hj"> </strong>的延续，在那里我展示了<strong class="io hj">如何使用MySQL后端</strong>在Docker上安装WordPress</p><p id="3a25" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这个问题由<strong class="io hj"> Docker Compose解决。Docker compose是一个用于单个主机中多容器应用程序的工具。</strong></p><p id="7fbd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">例如，在我以前的博客中，我必须运行两个容器:第一个wordpress容器和第二个mysql容器作为后端。</p><p id="aaa5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">借助于<strong class="io hj"> docker-compose.yaml </strong>，我们可以在单个主机中运行多个容器作为服务。</p><pre class="jl jm jn jo fd jp jq jr js aw jt bi"><span id="7848" class="ju jv hi jq b fi jw jx l jy jz">Docker Swarm extends the concept of manage multiple containers deployed across multiple node docker cluster.</span></pre><h1 id="127e" class="ka jv hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated"><strong class="ak">安装</strong></h1><ol class=""><li id="597e" class="kx ky hi io b ip kz it la ix lb jb lc jf ld jj le lf lg lh bi translated">运行此命令下载linux中Docker Compose的当前稳定版本:</li></ol><pre class="jl jm jn jo fd jp jq jr js aw jt bi"><span id="6834" class="ju jv hi jq b fi jw jx l jy jz">curl -L "https://github.com/docker/compose/releases/download/1.26.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose</span></pre><p id="2c0b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">2.对二进制文件应用可执行权限:</p><pre class="jl jm jn jo fd jp jq jr js aw jt bi"><span id="f9f5" class="ju jv hi jq b fi jw jx l jy jz">sudo chmod +x /usr/local/bin/docker-compose</span></pre><p id="edf7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">3.使用检查版本</p><pre class="jl jm jn jo fd jp jq jr js aw jt bi"><span id="d2d8" class="ju jv hi jq b fi jw jx l jy jz">docker-compose version</span></pre><h1 id="9e7d" class="ka jv hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">创建您的第一个Docker合成文件</h1><ol class=""><li id="2a6d" class="kx ky hi io b ip kz it la ix lb jb lc jf ld jj le lf lg lh bi translated">创建名为mycompose的新文件夹</li><li id="45c4" class="kx ky hi io b ip li it lj ix lk jb ll jf lm jj le lf lg lh bi translated">所有Docker合成文件都是YAML文件。您可以使用mycompose文件夹中的vim编辑器创建一个</li></ol><pre class="jl jm jn jo fd jp jq jr js aw jt bi"><span id="813a" class="ju jv hi jq b fi jw jx l jy jz">vim docker-compose.yaml</span></pre><p id="9fe5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Docker合成文件包含:服务、卷和网络，用于启动所有服务</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es ln"><img src="../Images/30b82f281d5db220ed82a814e9782a82.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/1*FseovDwe0_lZMc6mxhZrIw.png"/></div></figure><p id="9d14" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">3.使用ESC键关闭编辑器，然后:wq！命令</p><p id="f06c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">4.然后执行</p><pre class="jl jm jn jo fd jp jq jr js aw jt bi"><span id="93d2" class="ju jv hi jq b fi jw jx l jy jz">docker-compose up</span></pre><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es lo"><img src="../Images/ff640db0e04702129b5d026f4dda0312.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U5RsgLR33I6qzrkyNauR2g.png"/></div></div></figure><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es lt"><img src="../Images/6c9e6e47661193b6b7ed2c1a5f217b01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lxg7BEyVm3kP52k_8Og0og.png"/></div></div></figure><p id="1091" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">5.要启动和停止容器，请使用</p><pre class="jl jm jn jo fd jp jq jr js aw jt bi"><span id="31ee" class="ju jv hi jq b fi jw jx l jy jz">docker-compose stop<br/>docker-compose start</span></pre><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es lu"><img src="../Images/9d1bfd8e6b1ad5c273fc676ede2a5bf4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lm5v22cGQsDD9li8IuaiKw.png"/></div></div></figure><p id="c9bd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">6.要在分离模式下运行docker-compose，请使用</p><pre class="jl jm jn jo fd jp jq jr js aw jt bi"><span id="cd02" class="ju jv hi jq b fi jw jx l jy jz">docker-compose up -d</span></pre><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es lv"><img src="../Images/d74902234e7d4159ee078021b9b811f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*wG9ad9i-UhR88Jh9pmHM1A.png"/></div></figure><p id="6254" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">7.使用ifconfig检查ip，并转到浏览器，键入端口号为8081的ip</p><pre class="jl jm jn jo fd jp jq jr js aw jt bi"><span id="fdc2" class="ju jv hi jq b fi jw jx l jy jz">192.168.43.42:8081</span></pre><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es lw"><img src="../Images/1f026c6c3a68787b23a4843c97933960.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/format:webp/1*xV12orKOxsgHWfxeHM6buw.png"/></div></figure><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es lx"><img src="../Images/5965830a549fcb0616aa5ccd236364b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sCXmVKRJ1TCchXDXyZgv5A.png"/></div></div></figure><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es ly"><img src="../Images/8ba0ffdc01e06cf5c6b8a3c97e1c8b7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mWqQx5pbcXGe0NZujgbjfQ.png"/></div></div></figure><h1 id="94d2" class="ka jv hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">结论</h1><p id="6ace" class="pw-post-body-paragraph im in hi io b ip kz ir is it la iv iw ix lz iz ja jb ma jd je jf mb jh ji jj hb bi translated">因此，docker-compose是运行多容器应用程序的一个很好的工具。这个例子只是用例之一。</p></div></div>    
</body>
</html>