<html>
<head>
<title>Introduction to genetic algorithms in c# with a real application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">c#中的遗传算法介绍及实际应用</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/introduction-to-genetic-algorithms-in-c-with-a-real-application-72c3fc42bdf9?source=collection_archive---------1-----------------------#2020-06-10">https://medium.com/analytics-vidhya/introduction-to-genetic-algorithms-in-c-with-a-real-application-72c3fc42bdf9?source=collection_archive---------1-----------------------#2020-06-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/e05c3f812e907f2e85f0b2c206cb54d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wpqxxgVrZeX8-DnGD3iPvQ.png"/></div></div></figure><p id="d545" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">遗传算法是人工智能中最流行的算法之一，通常用于优化问题，在本文中，我们将从软件工程的角度而不是计算机科学的角度来介绍遗传算法。</p><p id="f0c3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，作为一个示例项目，我们将开发一个小型学校管理系统，该系统根据以下要求生成一个学期的时间表</p><p id="f3fa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在我们的系统中，我们有100名注册学生，每个人可以从可用的10门课程中选择5门课程，我们只有8名教师，所以他们中的一些人将被分配到不止一门课程和4个教室。</p><p id="f916" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的系统应该为学校生成一个无冲突的每周时间表。根据前面的要求，我可以通过编写一个非常复杂的逻辑来设计时间表并避免冲突，我相信用正常的代码来完成这项任务会非常困难，代码也不会被提及。</p><h2 id="b79b" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">1-项目启动</h2><p id="ae5d" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">在我们开始用遗传算法变魔术之前，让我们看看我们的实体。</p><p id="48a0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我更喜欢把这些课放在一个单独的类库里，就叫它时间表吧。DAL或时间表。核心</p><figure class="ko kp kq kr fd ij"><div class="bz dy l di"><div class="ks kt l"/></div></figure><p id="b60f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是将与普通DBContext一起使用的普通实体框架实体类</p><figure class="ko kp kq kr fd ij"><div class="bz dy l di"><div class="ks kt l"/></div></figure><h2 id="e9ab" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">二次表生成器</h2><p id="4442" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">现在让我们创建一个控制台应用程序，并将其命名为TimeTable.Builder。请添加对DAL项目的引用，并添加accord.genetic掘金包。</p><div class="ku kv ez fb kw kx"><a href="https://www.nuget.org/packages/Accord.Genetic/" rel="noopener  ugc nofollow" target="_blank"><div class="ky ab dw"><div class="kz ab la cl cj lb"><h2 class="bd hj fi z dy lc ea eb ld ed ef hh bi translated">雅阁。遗传3.8.0</h2><div class="le l"><h3 class="bd b fi z dy lc ea eb ld ed ef dx translated">包含染色体和选择类来创建遗传算法(GA)，遗传编程(GP)和基因…</h3></div><div class="lf l"><p class="bd b fp z dy lc ea eb ld ed ef dx translated">www.nuget.org</p></div></div><div class="lg l"><div class="lh l li lj lk lg ll io kx"/></div></div></a></div><p id="5394" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在我们进入这个非常简单的代码之前，让我们先来看看遗传算法的步骤。</p><blockquote class="lm ln lo"><p id="0f72" class="iq ir lp is b it iu iv iw ix iy iz ja lq jc jd je lr jg jh ji ls jk jl jm jn hb bi translated">1-生成初始随机解(初始群体)</p><p id="2adf" class="iq ir lp is b it iu iv iw ix iy iz ja lq jc jd je lr jg jh ji ls jk jl jm jn hb bi translated">2-对于每个解决方案，评估它有多好。(评估健身)</p><p id="e860" class="iq ir lp is b it iu iv iw ix iy iz ja lq jc jd je lr jg jh ji ls jk jl jm jn hb bi translated">3-合并最佳解决方案以创建新的解决方案(交叉)</p><p id="c36d" class="iq ir lp is b it iu iv iw ix iy iz ja lq jc jd je lr jg jh ji ls jk jl jm jn hb bi translated">4-对新群体进行随机改变(突变)</p><p id="20f4" class="iq ir lp is b it iu iv iw ix iy iz ja lq jc jd je lr jg jh ji ls jk jl jm jn hb bi translated">5-检查是否有足够好的解决方案，如果没有，重复步骤3和4。</p></blockquote><p id="8f4c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，基本上我们的系统将通过执行以下操作来应用遗传算法</p><p id="fcaa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">1-创建随机计划</p><p id="997d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2-通过检查每个时间表中有多少冲突来评估这些时间表。</p><p id="52bc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3-从每个时间表中随机抽取一部分，合并最佳解决方案。</p><p id="26a1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">4-我们将通过随机更改会议时间或日期来进行随机更改。</p><p id="a488" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">5-如果没有冲突，则接受解决方案。</p><h2 id="0d3d" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">2.1创建时隙(会话)的染色体表示</h2><figure class="ko kp kq kr fd ij"><div class="bz dy l di"><div class="ks kt l"/></div></figure><p id="dcb8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在遗传算法中，我们会做很多次繁重的处理，所以不处理数据库模型时隙是一个好主意，但简化的结构会更好。</p><h2 id="b755" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">2.2创建时间表染色体</h2><p id="3db2" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">时间表染色体是将对其应用遗传算法的群体成员(候选时间表解决方案)(步骤1)。</p><p id="1123" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当我们使用accord.net时，我们的时间表染色体类应该继承自<a class="ae lt" href="http://accord-framework.net/docs/html/T_Accord_Genetic_ChromosomeBase.htm" rel="noopener ugc nofollow" target="_blank">染色体基</a>。</p><figure class="ko kp kq kr fd ij"><div class="bz dy l di"><div class="ks kt l"/></div></figure><p id="746e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">1-时间表是一组每周都会重复的会话(时隙),因此我们将属性值创建为TimeSlotChromosomes列表。</p><p id="b1e6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Generate方法负责生成一个随机的课程表，最简单的方法是循环播放每一门课程，并在随机的时间(在工作时间内)将它放到随机的教室里。</p><p id="10ee" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3-方法Clone只是复制了timeslotchronous，将timeslotchronous作为一个结构在这里帮助我们，因为它是通过值传递的。</p><p id="c34c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">4-静音功能选择一个随机的过程，并改变它是一天到随机的一天。</p><p id="e443" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">5-交叉函数，我喜欢称之为婚姻函数，它通过替换当前调度会话的随机数量，将男性调度(参数)合并到女性调度当前实例中。</p><p id="e4b6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">6-在实现<a class="ae lt" href="http://accord-framework.net/docs/html/Methods_T_Accord_Genetic_IFitnessFunction.htm" rel="noopener ugc nofollow" target="_blank">ifitnesssfunction</a>接口的独立类中实现的适应度函数只是通过对时间重叠的课程的数量求和来计算冲突，这些课程将在同一教室中，并且具有相同的教师和共同的学生。</p><p id="fd04" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">适应度= 1/冲突</p><h2 id="87c7" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">2.3最后部分运行遗传算法并保存结果</h2><figure class="ko kp kq kr fd ij"><div class="bz dy l di"><div class="ks kt l"/></div></figure><p id="ae8f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这很简单，我们创建TimeTableChromsome的初始人口1000成员，将使用我们的fintes函数进行评估，我们将使用框架<a class="ae lt" href="http://accord-framework.net/docs/html/T_Accord_Genetic_EliteSelection.htm" rel="noopener ugc nofollow" target="_blank"> EliteSelection </a>选择最佳候选人</p><pre class="ko kp kq kr fd lu lv lw lx aw ly bi"><span id="1c15" class="jo jp hi lv b fi lz ma l mb mc">Population population = new Population(1000, new TimeTableChromosome(dataContext),</span><span id="34c3" class="jo jp hi lv b fi md ma l mb mc">new TimeTableChromosome.FitnessFunction(), new EliteSelection());</span></pre><p id="eaee" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将保持遗传算法运行，直到我们找到一个解决方案或1000年后</p><pre class="ko kp kq kr fd lu lv lw lx aw ly bi"><span id="c025" class="jo jp hi lv b fi lz ma l mb mc">while (true)<br/>                {<br/>                    population.RunEpoch();<br/>                    i++;<br/>                    if (population.FitnessMax &gt;= 0.99 || i &gt;= 1000)<br/>                    {<br/>                        break;<br/>                    }<br/>                }</span></pre><p id="ade5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后我们将时间表解决方案保存回数据库</p><pre class="ko kp kq kr fd lu lv lw lx aw ly bi"><span id="b101" class="jo jp hi lv b fi lz ma l mb mc">var timetable = (population.BestChromosome as TimeTableChromosome).Value.Select(chromosome =&gt;<br/>                    new TimeSlot()<br/>                    {<br/>                        CourseId = chromosome.CourseId,<br/>                        PlaceId = chromosome.PlaceId,<br/>                        Day = (DayOfWeek) chromosome.Day,<br/>                        Start = chromosome.StartAt, <br/>                        End = chromosome.EndAt,<br/>                        Id = Guid.NewGuid().ToString()<br/>                    }<br/>                ).ToList();<br/>                dataContext.TimeSlots.AddRange(timetable);<br/>                dataContext.SaveChanges();</span></pre><h1 id="5c5e" class="me jp hi bd jq mf mg mh ju mi mj mk jy ml mm mn kb mo mp mq ke mr ms mt kh mu bi translated">最终显示结果</h1><p id="027c" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">我继续这个项目，创建了一个web API和xamarin移动应用程序来可视化时间表</p><figure class="ko kp kq kr fd ij"><div class="bz dy l di"><div class="ks kt l"/></div></figure><p id="067f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是我的xamarin应用程序代码</p><pre class="ko kp kq kr fd lu lv lw lx aw ly bi"><span id="e0f1" class="jo jp hi lv b fi lz ma l mb mc">&lt;?xml version="1.0" encoding="utf-8" ?&gt;<br/>&lt;ContentPage ae lt" href="http://xamarin.com/schemas/2014/forms" rel="noopener ugc nofollow" target="_blank"&gt;http://xamarin.com/schemas/2014/forms"<br/>            xmlns:x="<a class="ae lt" href="http://schemas.microsoft.com/winfx/2009/xaml" rel="noopener ugc nofollow" target="_blank">http://schemas.microsoft.com/winfx/2009/xaml</a>"<br/>            xmlns:d="<a class="ae lt" href="http://xamarin.com/schemas/2014/forms/design" rel="noopener ugc nofollow" target="_blank">http://xamarin.com/schemas/2014/forms/design</a>"<br/>            xmlns:mc="<a class="ae lt" href="http://schemas.openxmlformats.org/markup-compatibility/2006" rel="noopener ugc nofollow" target="_blank">http://schemas.openxmlformats.org/markup-compatibility/2006</a>"<br/>            mc:Ignorable="d"<br/>            xmlns:views="clr-namespace:TimeTable.App.Views"<br/>            xmlns:xForms="clr-namespace:Syncfusion.SfSchedule.XForms;assembly=Syncfusion.SfSchedule.XForms"<br/>            x:Class="TimeTable.App.Views.MainPage"&gt;</span><span id="c3f5" class="jo jp hi lv b fi md ma l mb mc">&lt;xForms:SfSchedule x:Name="schedule" ScheduleView ="WeekView"&gt;</span><span id="401d" class="jo jp hi lv b fi md ma l mb mc">&lt;/xForms:SfSchedule&gt;<br/>&lt;/ContentPage&gt;</span></pre><figure class="ko kp kq kr fd ij"><div class="bz dy l di"><div class="ks kt l"/></div></figure><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mv"><img src="../Images/72f4a381251b29ff95c2334ea582eedc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m6UUFZ2MDx4R4Npz-weYyg.png"/></div></div></figure><p id="fa2c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在你离开之前，确保你在推特上关注我</p><p id="4b1d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae lt" href="https://twitter.com/mcc_ahmed" rel="noopener ugc nofollow" target="_blank">https://twitter.com/MCC_Ahmed</a></p><p id="5b9b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在ko-fi.com问题上支持我</p><div class="ku kv ez fb kw kx"><a href="https://ko-fi.com/ahmedfouad" rel="noopener  ugc nofollow" target="_blank"><div class="ky ab dw"><div class="kz ab la cl cj lb"><h2 class="bd hj fi z dy lc ea eb ld ed ef hh bi translated">给艾哈迈德·福阿德买杯咖啡。ko-fi.com/ahmedfouad</h2><div class="le l"><h3 class="bd b fi z dy lc ea eb ld ed ef dx translated">我是PlanRadar的一名软件工程师，目前住在奥地利的维也纳。我的兴趣范围从技术到网络…</h3></div><div class="lf l"><p class="bd b fp z dy lc ea eb ld ed ef dx translated">ko-fi.com</p></div></div><div class="lg l"><div class="mw l li lj lk lg ll io kx"/></div></div></a></div><p id="7b2e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如需推荐，请阅读由<a class="ae lt" href="https://medium.com/u/fecd456da1ea?source=post_page-----7c3f5616a754----------------------" rel="noopener">丹尼尔·希夫曼</a>撰写的<a class="ae lt" href="https://amzn.to/3dSGTlN" rel="noopener ugc nofollow" target="_blank">Cod的性质</a> e。这本书将真正帮助你用非常简单的方法来解决复杂的编码问题，不管你的编码水平如何。这本书将会改进它。</p></div></div>    
</body>
</html>