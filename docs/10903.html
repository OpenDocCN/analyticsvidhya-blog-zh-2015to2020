<html>
<head>
<title>Thesis Wordcloud Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">毕业论文 Wordcloud 项目</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/thesis-wordcloud-project-5fe9d92694ac?source=collection_archive---------17-----------------------#2020-11-07">https://medium.com/analytics-vidhya/thesis-wordcloud-project-5fe9d92694ac?source=collection_archive---------17-----------------------#2020-11-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="89fa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">受我朋友完成博士论文的启发，这个简单的项目庆祝了他们多年来的艰难跋涉(我想是四年吧？).我们将为他们的论文生成一个文字云…不是他们的论文，因为我们必须保护他们的隐私，但我们将使用类似的东西。</p><p id="17a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是首先，你可能会问什么是词云？</p><p id="78c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单词云是文本数据的可视化表示。简而言之，想象一幅单词图，给定文本中出现的单词频率越大，它就越大。下面是我们将要构建的一个示例。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/762ebd55266f355960a2b216141aa2b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8eJLTnG22OzKc6A1.jpg"/></div></div></figure><p id="4760" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将使用什么？</p><p id="77b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">参观我们的工具带将包括:</p><ul class=""><li id="f31d" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated"><a class="ae jy" href="https://www.python.org/" rel="noopener ugc nofollow" target="_blank">当然是 Python 3.8 </a></li><li id="d2f4" class="jp jq hi ih b ii jz im ka iq kb iu kc iy kd jc ju jv jw jx bi translated">Jupyterlab </li></ul><p id="11f6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将使用两个主要的库:</p><ul class=""><li id="513a" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated"><a class="ae jy" href="https://spacy.io/" rel="noopener ugc nofollow" target="_blank">空间</a> —用于单词的符号化(当我们开始摆弄单词时，这将是有意义的)</li><li id="4f01" class="jp jq hi ih b ii jz im ka iq kb iu kc iy kd jc ju jv jw jx bi translated"><a class="ae jy" href="https://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html" rel="noopener ugc nofollow" target="_blank">word cloud</a>——恰如其名</li></ul><p id="9cdd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里还有一些其他的图书馆可以帮忙:</p><ul class=""><li id="946d" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated"><a class="ae jy" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"> matplotlib </a></li><li id="6b75" class="jp jq hi ih b ii jz im ka iq kb iu kc iy kd jc ju jv jw jx bi translated">熊猫</li><li id="47ce" class="jp jq hi ih b ii jz im ka iq kb iu kc iy kd jc ju jv jw jx bi translated"><a class="ae jy" href="https://docs.python.org/3/library/re.html" rel="noopener ugc nofollow" target="_blank">回复</a></li></ul><p id="06a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们开始吧。</p><p id="533f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jy" href="https://shivansivakumaran.com/data-science/thesis-wordcloud-project/" rel="noopener ugc nofollow" target="_blank">点击此处查看原文</a>。</p><h1 id="b4db" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">安装非标准库</h1><p id="aa84" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">在我们继续之前，我们需要安装额外的非 Python 甚至 Anaconda/Miniconda 标准库。</p><p id="4403" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先让我们安装<code class="du lh li lj lk b">spaCy</code>，这比你的标准 python 包需要更多的安装工作。</p><p id="5378" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在他们自己的网页上，他们有关于如何安装包的优秀文档。</p><p id="8e27" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在自己的环境中使用 conda 和 Jupyterlab。以下命令在输入 Jupyterlab 终端时安装<code class="du lh li lj lk b">spaCy</code>。</p><pre class="je jf jg jh fd ll lk lm ln aw lo bi"><span id="ce78" class="lp kf hi lk b fi lq lr l ls lt">conda install -c conda-forge spacy<br/>conda install -c conda-forge spacy-lookups-data<br/>python -m spacy download en_core_web_sm</span></pre><p id="25ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来是安装<code class="du lh li lj lk b">wordcloud</code>，这就简单多了。</p><pre class="je jf jg jh fd ll lk lm ln aw lo bi"><span id="3432" class="lp kf hi lk b fi lq lr l ls lt">conda install -c conda-forge wordcloud</span></pre><p id="d997" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du lh li lj lk b">wordcloud</code>有一些依赖项，可以安装:</p><pre class="je jf jg jh fd ll lk lm ln aw lo bi"><span id="ec80" class="lp kf hi lk b fi lq lr l ls lt">conda install -c conda-forge pillow<br/>conda install -c conda-forge numpy</span></pre><p id="2720" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们找到了。我们应该都准备好了。</p><h1 id="29c7" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">导入库</h1><p id="6b78" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">开始编码吧。</p><pre class="je jf jg jh fd ll lk lm ln aw lo bi"><span id="7a27" class="lp kf hi lk b fi lq lr l ls lt"># importing and setting up libraries<br/>import random as r<br/>import pandas as pd<br/>import re</span><span id="6278" class="lp kf hi lk b fi lu lr l ls lt">import matplotlib.pyplot as plt<br/>%matplotlib inline<br/>plt.rcParams.update({'font.size': 22})</span><span id="39d3" class="lp kf hi lk b fi lu lr l ls lt">from wordcloud import WordCloud, STOPWORDS</span><span id="cb42" class="lp kf hi lk b fi lu lr l ls lt">import spacy</span><span id="e272" class="lp kf hi lk b fi lu lr l ls lt">spacy.prefer_gpu()<br/>nlp = spacy.load("en_core_web_sm") # setting up for the English language</span></pre><h1 id="27b6" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">打开文件</h1><p id="cd5d" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">之前我们在讨论我朋友的论文，我们打算用我写的来代替。这是一部关于<a class="ae jy" href="https://shivansivakumaran.com/glaucoma/" rel="noopener ugc nofollow" target="_blank">青光眼</a>的精彩杰作。我在谷歌文档上写的。所以我做的第一件事是将文章保存为文本文件(<code class="du lh li lj lk b">.txt</code>)。将它保存为文本文件，这将使使用 Python 变得更加容易，而不需要使用另一个库。</p><p id="9e18" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们打开文件，看看文本文件的一些字符。</p><pre class="je jf jg jh fd ll lk lm ln aw lo bi"><span id="da57" class="lp kf hi lk b fi lq lr l ls lt">file = 'shivanglaucomaessay.txt'</span><span id="4de6" class="lp kf hi lk b fi lu lr l ls lt">with open(file, 'r') as f:<br/>    text = f.read()<br/>    <br/>text[1000:1500]</span><span id="2e6d" class="lp kf hi lk b fi lu lr l ls lt">&gt;&gt;&gt; 't is important to identify the type of glaucoma to offer appropriate treatment.\nMechanism of Glaucoma\nIntraocular pressure (IOP) has an important role in glaucoma. To understand its mechanism of action, it is very important to look at aqueous humor production and drainage (Kass, 2005). Aqueous humour is primarily produced by active secretion at the ciliary processes of the ciliary body, mediated by aquaporins and carbonic anhydrase; the prior requiring energy and the latter requiring enzymatic a'</span><span id="4889" class="lp kf hi lk b fi lu lr l ls lt">len(text)</span><span id="b796" class="lp kf hi lk b fi lu lr l ls lt">&gt;&gt;&gt; 37519</span></pre><p id="0830" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以看到这里只有区区 37519 个字符。我无法想象一篇论文会有多少篇！</p><h1 id="2e3b" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">符号化</h1><p id="2112" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">为了计算所有的单词，我们需要把我的文章变成“记号”。我们将使用<a class="ae jy" href="https://spacy.io/" rel="noopener ugc nofollow" target="_blank">空间</a>来使用它。</p><p id="1786" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du lh li lj lk b">spaCy</code>主要用于<a class="ae jy" href="https://en.wikipedia.org/wiki/Natural_language_processing" rel="noopener ugc nofollow" target="_blank">自然语言处理</a> (NLP)。NLP 是计算机理解文本的一种方式。</p><p id="e1d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以用<code class="du lh li lj lk b">spaCy</code>做很多事情，但是为了这个项目的目的，我们将解析这篇文章中的文本。</p><pre class="je jf jg jh fd ll lk lm ln aw lo bi"><span id="928f" class="lp kf hi lk b fi lq lr l ls lt">doc = nlp(text)</span><span id="f61b" class="lp kf hi lk b fi lu lr l ls lt">tokens = [token for token in doc]</span><span id="eb69" class="lp kf hi lk b fi lu lr l ls lt">r.seed(42) # ensure we get the same random selection everytime this is executed</span><span id="dccb" class="lp kf hi lk b fi lu lr l ls lt">rand_select = r.choices(tokens, k=50)<br/>rand_select</span><span id="ad26" class="lp kf hi lk b fi lu lr l ls lt">&gt;&gt;&gt; [PACG,<br/> Once,<br/> field,<br/> (,<br/> ,<br/> required,<br/> cyclophotocoagulation,<br/> ,,<br/> glaucoma,<br/> important,<br/> Kass,<br/> underlying,<br/> to,<br/> 2017,<br/> gold,<br/> iris,<br/> of,<br/> .,<br/> (,<br/> a,<br/> Current,<br/> and,<br/> of,<br/> indicates,<br/> .,<br/> visual,<br/> loss,<br/> early,<br/> Silva,<br/> resulting,<br/> of,<br/> Vision,<br/> .,<br/> ,,<br/> ,,<br/> and,<br/> 2007,<br/> treatment,<br/> of,<br/> adverse,<br/> beta,<br/> angle,<br/> to,<br/> times,<br/> loss,<br/> although,<br/> detectable,<br/> important,<br/> dynamics,<br/> on]</span></pre><h1 id="2ec7" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">清理</h1><p id="bd2f" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">您可能会注意到这里的一些问题:</p><ul class=""><li id="173a" class="jp jq hi ih b ii ij im in iq jr iu js iy jt jc ju jv jw jx bi translated">单词里的情况都不一样。当我们希望“大小”和“大小”相同时，Python 会将它们视为不同的单词。</li><li id="0250" class="jp jq hi ih b ii jz im ka iq kb iu kc iy kd jc ju jv jw jx bi translated">我们有标点符号作为标记，这对我们来说并不重要</li><li id="430a" class="jp jq hi ih b ii jz im ka iq kb iu kc iy kd jc ju jv jw jx bi translated">我们有需要删除的' \n '或换行符</li><li id="9b81" class="jp jq hi ih b ii jz im ka iq kb iu kc iy kd jc ju jv jw jx bi translated">我们有诸如“the”、“a”、“an”等停用词。这些词并不有趣，但出现频率很高，会淹没我们关心的词</li><li id="3f11" class="jp jq hi ih b ii jz im ka iq kb iu kc iy kd jc ju jv jw jx bi translated">最后，这可能很难用这么少的词来区分，但是复数和不同</li></ul><p id="a147" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们通过首先使文本小写来解决这个问题。</p><pre class="je jf jg jh fd ll lk lm ln aw lo bi"><span id="82a1" class="lp kf hi lk b fi lq lr l ls lt">lower = [_.text.lower() for _ in rand_select]<br/>lower</span><span id="409b" class="lp kf hi lk b fi lu lr l ls lt">&gt;&gt;&gt; ['pacg',<br/> 'once',<br/> 'field',<br/> '(',<br/> '\n',<br/> 'required',<br/> 'cyclophotocoagulation',<br/> ',',<br/> 'glaucoma',<br/> 'important',<br/> 'kass',<br/> 'underlying',<br/> 'to',<br/> '2017',<br/> 'gold',<br/> 'iris',<br/> 'of',<br/> '.',<br/> '(',<br/> 'a',<br/> 'current',<br/> 'and',<br/> 'of',<br/> 'indicates',<br/> '.',<br/> 'visual',<br/> 'loss',<br/> 'early',<br/> 'silva',<br/> 'resulting',<br/> 'of',<br/> 'vision',<br/> '.',<br/> ',',<br/> ',',<br/> 'and',<br/> '2007',<br/> 'treatment',<br/> 'of',<br/> 'adverse',<br/> 'beta',<br/> 'angle',<br/> 'to',<br/> 'times',<br/> 'loss',<br/> 'although',<br/> 'detectable',<br/> 'important',<br/> 'dynamics',<br/> 'on']</span></pre><p id="e322" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在全部小写。现在让我们再次回到我们的随机选择，去掉标点符号。</p><pre class="je jf jg jh fd ll lk lm ln aw lo bi"><span id="d3f3" class="lp kf hi lk b fi lq lr l ls lt">nopunc = [_.text for _ in rand_select if _.pos_ != 'PUNCT']<br/>nopunc</span><span id="9583" class="lp kf hi lk b fi lu lr l ls lt">&gt;&gt;&gt; ['PACG',<br/> 'Once',<br/> 'field',<br/> '\n',<br/> 'required',<br/> 'cyclophotocoagulation',<br/> 'glaucoma',<br/> 'important',<br/> 'Kass',<br/> 'underlying',<br/> 'to',<br/> '2017',<br/> 'gold',<br/> 'iris',<br/> 'of',<br/> 'a',<br/> 'Current',<br/> 'and',<br/> 'of',<br/> 'indicates',<br/> 'visual',<br/> 'loss',<br/> 'early',<br/> 'Silva',<br/> 'resulting',<br/> 'of',<br/> 'Vision',<br/> 'and',<br/> '2007',<br/> 'treatment',<br/> 'of',<br/> 'adverse',<br/> 'beta',<br/> 'angle',<br/> 'to',<br/> 'times',<br/> 'loss',<br/> 'although',<br/> 'detectable',<br/> 'important',<br/> 'dynamics',<br/> 'on']</span></pre><p id="6e4c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们删除' \n '或换行符。你可能没见过这个，但是有些是捆在一起的，就像这个'/n/n/n/n '在一个字符串里。所以我们需要一些去除这些的方法。</p><pre class="je jf jg jh fd ll lk lm ln aw lo bi"><span id="a461" class="lp kf hi lk b fi lq lr l ls lt">nonewline = [_.text for _ in rand_select if not '\n' in _.text]<br/>nonewline</span><span id="a3b2" class="lp kf hi lk b fi lu lr l ls lt">&gt;&gt;&gt; ['PACG',<br/> 'Once',<br/> 'field',<br/> '(',<br/> 'required',<br/> 'cyclophotocoagulation',<br/> ',',<br/> 'glaucoma',<br/> 'important',<br/> 'Kass',<br/> 'underlying',<br/> 'to',<br/> '2017',<br/> 'gold',<br/> 'iris',<br/> 'of',<br/> '.',<br/> '(',<br/> 'a',<br/> 'Current',<br/> 'and',<br/> 'of',<br/> 'indicates',<br/> '.',<br/> 'visual',<br/> 'loss',<br/> 'early',<br/> 'Silva',<br/> 'resulting',<br/> 'of',<br/> 'Vision',<br/> '.',<br/> ',',<br/> ',',<br/> 'and',<br/> '2007',<br/> 'treatment',<br/> 'of',<br/> 'adverse',<br/> 'beta',<br/> 'angle',<br/> 'to',<br/> 'times',<br/> 'loss',<br/> 'although',<br/> 'detectable',<br/> 'important',<br/> 'dynamics',<br/> 'on']</span></pre><p id="c0b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们已经有了移除换行符的方法，接下来我们要移除像“a”、“an”、“the”等停用词。</p><pre class="je jf jg jh fd ll lk lm ln aw lo bi"><span id="ed4a" class="lp kf hi lk b fi lq lr l ls lt">nostopwords = [_.text for _ in rand_select if not _.is_stop]<br/>nostopwords</span><span id="3df1" class="lp kf hi lk b fi lu lr l ls lt">&gt;&gt;&gt; ['PACG',<br/> 'field',<br/> '(',<br/> '\n',<br/> 'required',<br/> 'cyclophotocoagulation',<br/> ',',<br/> 'glaucoma',<br/> 'important',<br/> 'Kass',<br/> 'underlying',<br/> '2017',<br/> 'gold',<br/> 'iris',<br/> '.',<br/> '(',<br/> 'Current',<br/> 'indicates',<br/> '.',<br/> 'visual',<br/> 'loss',<br/> 'early',<br/> 'Silva',<br/> 'resulting',<br/> 'Vision',<br/> '.',<br/> ',',<br/> ',',<br/> '2007',<br/> 'treatment',<br/> 'adverse',<br/> 'beta',<br/> 'angle',<br/> 'times',<br/> 'loss',<br/> 'detectable',<br/> 'important',<br/> 'dynamics']</span></pre><p id="c12c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们已经去掉了无趣的停用词。</p><p id="785e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来是使用<a class="ae jy" href="https://en.wikipedia.org/wiki/Lemmatisation" rel="noopener ugc nofollow" target="_blank">引理满足</a>组合屈折词。</p><pre class="je jf jg jh fd ll lk lm ln aw lo bi"><span id="da94" class="lp kf hi lk b fi lq lr l ls lt">lemmas = [str(_.lemma_) for _ in rand_select]<br/>lemmas</span><span id="87fa" class="lp kf hi lk b fi lu lr l ls lt">&gt;&gt;&gt; ['PACG',<br/> 'once',<br/> 'field',<br/> '(',<br/> '\n',<br/> 'require',<br/> 'cyclophotocoagulation',<br/> ',',<br/> 'glaucoma',<br/> 'important',<br/> 'Kass',<br/> 'underlying',<br/> 'to',<br/> '2017',<br/> 'gold',<br/> 'iris',<br/> 'of',<br/> '.',<br/> '(',<br/> 'a',<br/> 'current',<br/> 'and',<br/> 'of',<br/> 'indicate',<br/> '.',<br/> 'visual',<br/> 'loss',<br/> 'early',<br/> 'Silva',<br/> 'result',<br/> 'of',<br/> 'Vision',<br/> '.',<br/> ',',<br/> ',',<br/> 'and',<br/> '2007',<br/> 'treatment',<br/> 'of',<br/> 'adverse',<br/> 'beta',<br/> 'angle',<br/> 'to',<br/> 'time',<br/> 'loss',<br/> 'although',<br/> 'detectable',<br/> 'important',<br/> 'dynamic',<br/> 'on']</span></pre><p id="91b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于我们选择的单词很少，所以很难看出对词条满足的影响。</p><p id="f5f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在前面的例子中，我们已经单独完成了所有这些操作。我们实际上可以一次完成。</p><pre class="je jf jg jh fd ll lk lm ln aw lo bi"><span id="78f5" class="lp kf hi lk b fi lq lr l ls lt">cleaned_doc = [_.lemma_.lower() for _ in doc if _.pos_ != 'PUNCT' <br/>                                            and '\n' not in _.text <br/>                                            and not _.is_stop]<br/>r.seed(43)</span><span id="5f48" class="lp kf hi lk b fi lu lr l ls lt">r.choices(cleaned_doc, k=20)</span><span id="b0a7" class="lp kf hi lk b fi lu lr l ls lt">&gt;&gt;&gt; ['ultrafiltration',<br/> 'science',<br/> '2007',<br/> 'tham',<br/> 'line',<br/> '223',<br/> 'use',<br/> 'important',<br/> 'factor',<br/> 'sign',<br/> 'speak',<br/> '2015',<br/> '2016',<br/> 'value',<br/> 'optic',<br/> 'able',<br/> 'murthy',<br/> '22',<br/> 'medication',<br/> 'act']</span></pre><h1 id="a5f8" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">趣味统计</h1><p id="25de" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">现在我们已经尽最大努力清理了文档。总会有一些小瑕疵，但我认为我们已经解决了大部分问题。</p><p id="f88b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们把这个放到一个数据框架中，这样我们就可以制作一些有趣的情节。我们还可以得到一些统计数据，这是不言自明的。</p><pre class="je jf jg jh fd ll lk lm ln aw lo bi"><span id="285f" class="lp kf hi lk b fi lq lr l ls lt">words = pd.DataFrame(cleaned_doc, columns=['words'])<br/>words.head()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lv"><img src="../Images/62438eb4f269d374408ed9fb391edd65.png" data-original-src="https://miro.medium.com/v2/resize:fit:368/format:webp/1*8r2ip_fiaiaJ_YzQt87vfQ.png"/></div></figure><pre class="je jf jg jh fd ll lk lm ln aw lo bi"><span id="0881" class="lp kf hi lk b fi lq lr l ls lt">words.describe()</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lw"><img src="../Images/6e94da8b84142d84b110a6bb6d679dbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:480/format:webp/1*NoewlG4aHwmG_Sfjle7pzA.png"/></div></figure><pre class="je jf jg jh fd ll lk lm ln aw lo bi"><span id="6505" class="lp kf hi lk b fi lq lr l ls lt">words.value_counts().head(30) # gives the first 30 results</span><span id="b177" class="lp kf hi lk b fi lu lr l ls lt">&gt;&gt;&gt; words        <br/>glaucoma         118<br/>iop               66<br/>treatment         40<br/>angle             40<br/>important         35<br/>risk              31<br/>-                 28<br/>visual            27<br/>aqueous           26<br/>/                 26<br/>cause             25<br/>humour            25<br/>&amp;                 24<br/>field             23<br/>result            23<br/>reduce            23<br/>m.                22<br/>increase          22<br/>ophthalmology     22<br/>patient           21<br/>nerve             20<br/>damage            20<br/>2016              20<br/>optic             19<br/>loss              19<br/>example           19<br/>disease           18<br/>j.                17<br/>a.                17<br/>laser             17<br/>dtype: int64</span></pre><p id="94d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我仍然对我们之前提出的单词排除法不满意。我们仍然会得到一些以句号结尾的'-'、'/'、' &amp; '和字母(比如' m . ')。</p><p id="1dfa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些对我们都没用，我们再做一些进一步的剔除。</p><p id="e7aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将创建一个我们想要排除的字符列表<code class="du lh li lj lk b">['-', '/', '&amp;']</code>。我们还将使用<a class="ae jy" href="https://www.w3schools.com/python/python_regex.asp" rel="noopener ugc nofollow" target="_blank">正则表达式</a>(<code class="du lh li lj lk b">re</code>模块)来消除字母加号。</p><pre class="je jf jg jh fd ll lk lm ln aw lo bi"><span id="eade" class="lp kf hi lk b fi lq lr l ls lt">exclude_char = ['-', '/', '&amp;']</span><span id="078c" class="lp kf hi lk b fi lu lr l ls lt">cleaned_doc_again = [_.lemma_.lower() for _ in doc if _.pos_ != 'PUNCT' <br/>                                            and '\n' not in _.text <br/>                                            and not _.is_stop<br/>                                            and _.text not in exclude_char<br/>                                            and not bool(re.search(r'^\w\.$', _.text))]</span><span id="1b19" class="lp kf hi lk b fi lu lr l ls lt">words_cleaned = pd.DataFrame(cleaned_doc_again, columns=['words'])<br/>words_cleaned.value_counts().head(30)</span><span id="10b0" class="lp kf hi lk b fi lu lr l ls lt">&gt;&gt;&gt; words         <br/>glaucoma          118<br/>iop                66<br/>angle              40<br/>treatment          40<br/>important          35<br/>risk               31<br/>visual             27<br/>aqueous            26<br/>humour             25<br/>cause              25<br/>result             23<br/>field              23<br/>reduce             23<br/>ophthalmology      22<br/>increase           22<br/>patient            21<br/>nerve              20<br/>damage             20<br/>2016               20<br/>loss               19<br/>optic              19<br/>example            19<br/>disease            18<br/>laser              17<br/>involve            17<br/>open               16<br/>surgery            16<br/>factor             14<br/>develop            13<br/>trabeculectomy     13<br/>dtype: int64</span></pre><p id="b01e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这好多了，我想我对结果更满意了。</p><p id="fd73" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们可以把它绘制成图表来显示数据。</p><pre class="je jf jg jh fd ll lk lm ln aw lo bi"><span id="1736" class="lp kf hi lk b fi lq lr l ls lt">x = words_cleaned.value_counts()</span><span id="077c" class="lp kf hi lk b fi lu lr l ls lt">fig = plt.figure(figsize=(20,10))<br/>graph = plt.hist(x, bins=50)<br/>ylab = plt.ylabel('Frequency')<br/>xlab = plt.xlabel('Number of Words')</span><span id="7b3e" class="lp kf hi lk b fi lu lr l ls lt">title = plt.title('Distribution of words and how frequently they occur')</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lx"><img src="../Images/fafaedb919c9c854f4693a0536edeeb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q3ml3yPFQuN8vYZiosR_Vw.png"/></div></div></figure><p id="741e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个图表告诉我们，大多数单词并不像我们预期的那样频繁出现，其中有一些异常值。让我们用每个单词做一个条形图，然后互相比较。</p><pre class="je jf jg jh fd ll lk lm ln aw lo bi"><span id="08b0" class="lp kf hi lk b fi lq lr l ls lt">x_30 = words_cleaned.value_counts().head(30)</span><span id="cbe8" class="lp kf hi lk b fi lu lr l ls lt">fig = plt.figure(figsize=(20,15))<br/>graph = plt.barh([i[0] for i in x_30.index], x_30.values)<br/>ylab = plt.ylabel('Words')<br/>xlab = plt.xlabel('Frequency')</span><span id="fbe6" class="lp kf hi lk b fi lu lr l ls lt">title = plt.title('Comparison of frequency of top 30 words')</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ly"><img src="../Images/db27d09fc2163a3854958a2d10cdf15e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TT93NplYKvuO-xSOjrANOw.png"/></div></div></figure><h1 id="a558" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">单词云</h1><p id="7f65" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">最后，我们有了一个干净的单词列表，我们可以把它制作成一个单词云！</p><p id="597a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这使用了特殊的模块，<code class="du lh li lj lk b">wordcloud</code>和<code class="du lh li lj lk b">matplotlib</code>的元素来产生这个。</p><p id="5480" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我们可以将它作为图像保存到本地磁盘。</p><pre class="je jf jg jh fd ll lk lm ln aw lo bi"><span id="571d" class="lp kf hi lk b fi lq lr l ls lt">wordcloud = WordCloud(width = 3000, height = 2000,<br/>                        random_state=1, background_color='#3F3F3F',<br/>                        colormap='rainbow', collocations=False).generate(' '.join(cleaned_doc_again))</span><span id="dbc5" class="lp kf hi lk b fi lu lr l ls lt">fig = plt.figure(figsize=(20, 15))<br/>imshow = plt.imshow(wordcloud)<br/>axis = plt.axis('off')</span><span id="de71" class="lp kf hi lk b fi lu lr l ls lt">saveimage = wordcloud.to_file('shivanglaucomaessay.png')</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lz"><img src="../Images/087a385d0cc89f66520ac8beb315942d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WOzjfx3IKlt-hQ7NWXTgPQ.png"/></div></div></figure><p id="3d6c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们有了。我的青光眼论文的文字云。</p><p id="17ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以更进一步，将它制作成一个名为<code class="du lh li lj lk b">ThesisWC.py</code>的单独的 python 文件，并将其作为一个函数传递。<a class="ae jy" href="https://github.com/ShivanS93/ThesisWordcloud/blob/master/ThesisWC.py" rel="noopener ugc nofollow" target="_blank">这里是代码</a>。</p><p id="22fa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我已经下载了一个我写的关于蓝光保护的博客，我们可以通过我创建的函数来执行相同的结果。</p><pre class="je jf jg jh fd ll lk lm ln aw lo bi"><span id="e44b" class="lp kf hi lk b fi lq lr l ls lt">import ThesisWC</span><span id="1348" class="lp kf hi lk b fi lu lr l ls lt">ThesisWC.ThesisWC('shivanbluelightblog.txt')</span><span id="cb3f" class="lp kf hi lk b fi lu lr l ls lt">&gt;&gt;&gt; Text Length (char):  19931</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ma"><img src="../Images/73777e0651f1ddb628a10a4281e8a792.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PlgBnxZzoXM36JJjSO5O3g.png"/></div></div></figure><h1 id="7159" class="ke kf hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">结论</h1><p id="c53b" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">完成博士论文绝非易事。有趣的是用一大段文字制作文字云。</p><p id="a04b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们使用一个自然语言处理库<code class="du lh li lj lk b">spaCy</code>，来分解文本，删除不需要的元素，并清理要放入单词云的单词。</p><p id="83a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我们使用名副其实的模块<code class="du lh li lj lk b">wordcloud</code>来制作艺术品。</p><p id="d116" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望您已经发现这很有趣并且很有用，我鼓励您尝试一下！</p><p id="8b20" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我一直在寻求改进，因此如果您有任何反馈，<a class="ae jy" href="https://shivansivakumaran.com/contact/" rel="noopener ugc nofollow" target="_blank">请联系</a>。如果你觉得这很有趣，请把它分享给同样感兴趣的人。</p></div></div>    
</body>
</html>