<html>
<head>
<title>Keyword-only Arguments in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的纯关键字参数</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/keyword-only-arguments-in-python-3c1c00051720?source=collection_archive---------0-----------------------#2020-06-09">https://medium.com/analytics-vidhya/keyword-only-arguments-in-python-3c1c00051720?source=collection_archive---------0-----------------------#2020-06-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="b63f" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">Python中星号的魔力—第二部分</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/a2f353e66c0db0369c27b67699387c17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0EMvUcdait7uEorP"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">照片由<a class="ae jn" href="https://unsplash.com/@cedericx?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">塞德里克X </a>在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="ea33" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">所以，你已经阅读了python 中星号的<a class="ae jn" rel="noopener" href="/analytics-vidhya/the-magic-of-asterisks-in-python-aed3538deef9">基础魔法，现在想要更多？当然可以。该进城堡了。如果您还没有准备好，请随意访问上一篇文章，当您觉得准备好了时再回来。或者至少，你已经试过你自己的了。</a></p><p id="0643" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在本文中，我们将主要讨论为python提出了<strong class="jq hj">关键字</strong> <strong class="jq hj">参数</strong>的<a class="ae jn" href="https://www.python.org/dev/peps/pep-3102/" rel="noopener ugc nofollow" target="_blank"> PEP3102 </a>。</p><h1 id="0bfa" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">关键字参数</h1><p id="67d5" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">在<a class="ae jn" href="https://docs.python.org/3.8/glossary.html" rel="noopener ugc nofollow" target="_blank"> python词汇表</a>中，你会找到一个定义<em class="lh">参数</em>在python中的含义的部分。就像任何其他编程语言一样，参数是在进行函数调用时传递给函数(或方法)的值。在python中，有<strong class="jq hj"> 2种参数</strong>:</p><ol class=""><li id="6108" class="li lj hi jq b jr js ju jv jx lk kb ll kf lm kj ln lo lp lq bi translated">关键字参数<br/>关键字参数是前面带有标识符的参数(命名参数)。注意这里的值是在函数调用中传递的，而不是定义函数参数时的默认值。</li><li id="2dfe" class="li lj hi jq b jr lr ju ls jx lt kb lu kf lv kj ln lo lp lq bi translated">位置参数<br/>简单地说，位置参数是所有不是关键字参数的参数。</li></ol><p id="0899" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">一个例子是当使用<code class="du lw lx ly lz b">requests.get</code>时，我们经常直接在字符串中传递URL。在这个场景中，我们只是给函数一个参数<code class="du lw lx ly lz b">url</code>的位置参数。但是，如果我们传递一个类似于<code class="du lw lx ly lz b">requests.get(url='https://your-url.com/')</code>的值，那么我们传递的是一个关键字参数。</p><blockquote class="ma mb mc"><p id="3ed7" class="jo jp lh jq b jr js ij jt ju jv im jw md jy jz ka me kc kd ke mf kg kh ki kj hb bi translated">不要把自己和<strong class="jq hj">必选</strong>和<strong class="jq hj">可选</strong>的争论搞混了。这两个是因为当我们用它的参数定义一个函数的时候。如果我们包含一个缺省值的参数，以后这个参数就变成可选的了。否则，我们需要传递一个参数，因此需要位置参数。</p></blockquote><p id="65ef" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在，当我们调用一个函数时，由我们来决定是传递位置参数还是关键字参数。但是，因为python维护可读性，所以考虑的是，如果参数显然是要传入的，那么我们只是将值作为位置参数传递。相比之下，同样最有可能的是，我们希望其他用户知道我们将什么值传递给什么参数。所以，关键字论点。</p><h1 id="426f" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">仅关键字参数</h1><p id="b606" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">在定义函数时使用星号，给了我们更高层次的魔力。它叫做<strong class="jq hj">纯关键字参数</strong>。这种类型的参数与普通的关键字参数有相似的行为，但是它迫使用户传递关键字参数，而不是位置或直接参数。</p><pre class="iy iz ja jb fd mg lz mh mi aw mj bi"><span id="69da" class="mk kl hi lz b fi ml mm l mn mo">def generate_username(*users, separator, length=None):<br/>    users = [user.lower().split() for user in users]<br/>    username = [separator.join(user) for user in users]<br/>    if length:<br/>        username = [user[:length] for user in username]<br/>    return username</span></pre><p id="04ec" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们以上面的函数为例。该功能将以简单的方式生成用户名，并带有用户自定义的分隔符。注意，这里使用了打包参数。所以，我们可以称之为</p><pre class="iy iz ja jb fd mg lz mh mi aw mj bi"><span id="538b" class="mk kl hi lz b fi ml mm l mn mo">&gt;&gt;&gt; generate_username("John", "Mr Smith", "Mrs Smith", separator="_")</span></pre><p id="6732" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">并将结果<code class="du lw lx ly lz b">['john', 'mr_smith', 'mrs_smith']</code>。</p><p id="7346" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在，你问的魔法在哪里？尝试将<code class="du lw lx ly lz b">"_"</code>作为位置参数传递，如下所示。</p><pre class="iy iz ja jb fd mg lz mh mi aw mj bi"><span id="211f" class="mk kl hi lz b fi ml mm l mn mo">&gt;&gt;&gt; generate_username("John", "Mr Smith", "Mrs Smith", "_")<br/>Traceback (most recent call last):<br/>  File "&lt;stdin&gt;", line 1, in &lt;module&gt;<br/>TypeError: get_username() missing 1 required keyword-only argument: 'separator'</span></pre><p id="eca5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">接受那个错误！您缺少1个<strong class="jq hj">必需的仅关键字参数:分隔符</strong>。那是什么？实际上，这就是在函数中使用星号后跟一个必需的参数<code class="du lw lx ly lz b">separator</code>的效果。</p><p id="d92a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">正如PEP 3102所述，函数中星号后面定义的每个参数都需要传递<strong class="jq hj">仅关键字参数</strong>。也就是说，通过指定参数名。这允许我们在星号后面定义不会打包在一起的附加参数。因为我们用参数<code class="du lw lx ly lz b">users</code>嵌入了星号，所以它变成了一个<strong class="jq hj">可选的位置打包参数</strong>。</p><blockquote class="ma mb mc"><p id="80fe" class="jo jp lh jq b jr js ij jt ju jv im jw md jy jz ka me kc kd ke mf kg kh ki kj hb bi translated"><strong class="jq hj">可选位置打包参数</strong>是一个打包参数，就像在<a class="ae jn" rel="noopener" href="/analytics-vidhya/the-magic-of-asterisks-in-python-aed3538deef9">上一篇文章</a>中描述的一样。</p></blockquote><p id="866d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在我们为<code class="du lw lx ly lz b">separator</code>传递一个关键字参数之前，上面的函数将吸收任何位置参数。在上面的例子中，如果我们不想为参数<code class="du lw lx ly lz b">users</code>捕获任何位置变量，该怎么办呢？我们可以使用魔法，只要一个星号。让我们重新定义上面的函数。</p><pre class="iy iz ja jb fd mg lz mh mi aw mj bi"><span id="19f2" class="mk kl hi lz b fi ml mm l mn mo">def generate_username(users, *, separator, length=None):<br/>    users = [user.lower().split() for user in users]<br/>    username = [separator.join(user) for user in users]<br/>    if length:<br/>        username = [user[:length] for user in username]<br/>    return username</span></pre><p id="58cf" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这里的区别是我们不能传递任何数量的位置参数，而是将它作为集合(列表或元组)传递给参数<code class="du lw lx ly lz b">users</code>。</p><pre class="iy iz ja jb fd mg lz mh mi aw mj bi"><span id="3b8b" class="mk kl hi lz b fi ml mm l mn mo">&gt;&gt;&gt; list_users = ["jhonny", "Jadon Smith", "Mr Smith", "Mrs Smith"]<br/>&gt;&gt;&gt; generate_username(list_users, separator="_")<br/>['jhonny', 'jadon_smith', 'mr_smith', 'mrs_smith']</span></pre><p id="4fa2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果我们传递一个<code class="du lw lx ly lz b">"_"</code>作为位置参数，它将抛出如下所示的错误。</p><pre class="iy iz ja jb fd mg lz mh mi aw mj bi"><span id="8140" class="mk kl hi lz b fi ml mm l mn mo">&gt;&gt;&gt; generate_username(list_users, "_")<br/>Traceback (most recent call last):<br/>  File "&lt;stdin&gt;", line 1, in &lt;module&gt;<br/>TypeError: generate_username() takes 1 positional argument but 2 were given</span></pre><p id="58f2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这是因为星号<code class="du lw lx ly lz b">*</code>后面的任何剩余参数都需要一个关键字来传递参数，如下面的PEP 3102所述。</p><blockquote class="mp"><p id="849f" class="mq mr hi bd ms mt mu mv mw mx my kj dx translated">由于Python要求将所有参数绑定到一个值，并且将一个值绑定到一个只有关键字的参数的唯一方法是通过关键字，因此这样的参数是“必需的关键字”参数。</p></blockquote></div><div class="ab cl mz na gp nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="hb hc hd he hf"><h1 id="296e" class="kk kl hi bd km kn ng kp kq kr nh kt ku io ni ip kw ir nj is ky iu nk iv la lb bi translated">外卖食品</h1><p id="d3fa" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">使用python中的星号，我们有<a class="ae jn" href="https://treyhunner.com/2018/10/asterisks-in-python-what-they-are-and-how-to-use-them/#Positional_arguments_with_keyword-only_arguments" rel="noopener ugc nofollow" target="_blank"> 2个选项</a>来定义只有关键字参数的函数:</p><ol class=""><li id="0fe6" class="li lj hi jq b jr js ju jv jx lk kb ll kf lm kj ln lo lp lq bi translated">带有位置参数的仅关键字参数</li><li id="3cad" class="li lj hi jq b jr lr ju ls jx lt kb lu kf lv kj ln lo lp lq bi translated">没有位置参数的仅关键字参数</li></ol><p id="0885" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这两个场景是在PEP 3102中首次提出的，你可以阅读更多关于这个魔法存在的理由。</p><h1 id="9c74" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">参考</h1><p id="5df1" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">[1]特雷·亨纳，<a class="ae jn" href="https://treyhunner.com/2018/10/asterisks-in-python-what-they-are-and-how-to-use-them/#Positional_arguments_with_keyword-only_arguments" rel="noopener ugc nofollow" target="_blank">Python中的星号:它们是什么以及如何使用它们</a> (2018)</p><p id="53a3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">[2] <a class="ae jn" href="https://www.python.org/dev/peps/pep-3102/" rel="noopener ugc nofollow" target="_blank">人教版3102 </a></p></div></div>    
</body>
</html>