<html>
<head>
<title>From NLP To Chatbots</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从NLP到聊天机器人</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/from-nlp-to-chatbots-1dd76c9537dd?source=collection_archive---------13-----------------------#2020-02-24">https://medium.com/analytics-vidhya/from-nlp-to-chatbots-1dd76c9537dd?source=collection_archive---------13-----------------------#2020-02-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div class="er es hg"><img src="../Images/ff914299dee8bf6a95a6e47c67e21efb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1292/format:webp/1*gTwKttyDoLWoedpZ9w71kA.jpeg"/></div><figcaption class="hn ho et er es hp hq bd b be z dx translated">照片由伊戈尔·沙巴林拍摄</figcaption></figure><div class=""/><p id="21f9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这在今天很常见，当打电话给银行或其他公司时，听到电话另一端的机器人如下问候你:“你好，我是你的数字助理。请提出你的问题。”是啊，机器人现在不仅能说人类语言，还能用人类语言与用户交流。这是由于自然语言处理(NLP)——任何数字助理的核心技术，允许它以编程方式理解和生成自然语言。</p><p id="3f71" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">本文通过一个例子说明了如何使用spaCy从用户输入中提取含义，spaCy是领先的用于NLP的开源Python库。</p><h1 id="0ec0" class="jo jp ht bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">如何从用户输入中提取含义</h1><p id="cac1" class="pw-post-body-paragraph iq ir ht is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">以编程的方式从用户输入中提取含义可能非常具有挑战性，但并非不可能。很明显，你不能依赖句子中单个单词的意思——同一个单词可能表达不同的意思，这取决于它在特定句子中的句法功能。这可以通过例子得到最好的理解。看下面两句话:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="bd40" class="la jp ht kw b fi lb lc l ld le">I’d like to order a cake.<br/>I want to cancel my order.</span></pre><p id="69ae" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这两种说法中，你都可以看到“秩序”这个词。然而，在每种情况下，它都有不同的句法功能和不同的含义。在第一种情况下，“顺序”是一个动作(及物)动词，作用于名词“蛋糕”——句子的直接宾语。相比之下，第二个话语中的“顺序”是一个接受句子动作的名词——也就是说，它充当句子的直接宾语，其中“取消”是及物动词。</p><p id="b5ab" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">句子中单词的语言特征——比如上例中的及物动词或直接宾语——也被称为语言特征。spaCy自动为应用spaCy的文本处理管道的句子中的每个标记分配语言特征。然后，分析语言特征可以帮助识别这个特定句子中单词的意思。我们将在本文后面的在NLP中使用语言特征一节中讨论如何使用语言特征来完成含义提取任务。</p><h1 id="2fc9" class="jo jp ht bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">准备您的工作环境</h1><p id="eb2c" class="pw-post-body-paragraph iq ir ht is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">为了遵循本文提供的代码，您需要在您的机器上安装以下软件组件:</p><p id="a82b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae lf" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank"> Python 2.7+∕3.4+ </a></p><p id="9665" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae lf" href="https://spacy.io/usage/" rel="noopener ugc nofollow" target="_blank"> spaCy v2.0+ </a></p><p id="3115" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae lf" href="https://spacy.io/models/" rel="noopener ugc nofollow" target="_blank">为spaCy </a>预培训的英国模特</p><p id="6b0d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以在相应的网站上找到安装说明。为了确保您的环境准备就绪，您可以在Python会话中输入以下代码行:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="d1cd" class="la jp ht kw b fi lb lc l ld le">import spacy<br/>nlp = spacy.load('en')</span></pre><p id="cebb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果一切正常，您应该看不到错误消息。</p><h1 id="b85b" class="jo jp ht bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">在自然语言处理中使用语言特征</h1><p id="a8c1" class="pw-post-body-paragraph iq ir ht is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">诸如词性标签和句法依存标签之类的语言特性是专门为开发能够智能处理原始文本的应用程序而设计的。以下脚本说明了如何使用spaCy来提取句子中每个单词的语言特征:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="90fc" class="la jp ht kw b fi lb lc l ld le">import spacy<br/>nlp = spacy.load('en')<br/>doc = nlp(u'I have to send them a notification.')<br/>for token in doc:<br/>  print(token.text, token.pos_, token.tag_, token.dep_)</span></pre><p id="268e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这个脚本中，您为提交的句子中的每个标记提取并输出粗粒度的词性标签(pos_)、细粒度的词性标签(tag_)和句法依赖标签(dep_)。因此，该脚本应该给出以下输出(为了便于阅读，以表格形式列出):</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="ca4b" class="la jp ht kw b fi lb lc l ld le">I            PRON   PRP  nsubj<br/>have         VERB   VBP  ROOT<br/>to           PART   TO   aux<br/>send         VERB   VB   xcomp<br/>them         PRON   PRP  dative<br/>a            DET    DT   det<br/>notification NOUN   NN   dobj<br/>.            PUNCT  .    Punct</span></pre><p id="741f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你是spaCy的新手，那么上面第三列和第四列分别输出的细粒度词性标签和句法依赖标签可能会让<em class="lg"> </em>看起来有点混乱。要了解这些列中的值的含义，您可以查看位于https://spacy.io/api/annotation/<a class="ae lf" href="https://spacy.io/api/annotation/" rel="noopener ugc nofollow" target="_blank">的spaCy文档，或者使用spacy.explain()函数，该函数返回给定语言特性的描述。在下面的循环中，您将输出示例句子中每个标记的细粒度词性标记的描述:</a></p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="dff3" class="la jp ht kw b fi lb lc l ld le">for token in doc:<br/>  print(token.text, spacy.explain(token.tag_))</span></pre><p id="80f0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将为您提供以下输出:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="8357" class="la jp ht kw b fi lb lc l ld le">I            pronoun, personal<br/>have         verb, non-3rd person singular present<br/>to           infinitival to<br/>send         verb, base form<br/>them         pronoun, personal<br/>a            determiner<br/>notification noun, singular or mass<br/>.            punctuation mark, sentence closer</span></pre><p id="4dbb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">类似地，您可以使用spacy.explain()函数来获取粗粒度词性标签和语法依赖标签的描述。</p><h1 id="f88e" class="jo jp ht bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">从话语中提取意图</h1><p id="fb49" class="pw-post-body-paragraph iq ir ht is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">现在让我们看一个例子，看看如何利用语言特征从用户输入中提取意思。假设您需要从提交的话语中提取意图。例如，点餐聊天机器人的用户提交以下话语:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="f29a" class="la jp ht kw b fi lb lc l ld le">I want to order a photo cake.</span></pre><p id="2a6e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">显然，“订单”和“蛋糕”这两个词最能描述这句话的意图。在这种特殊情况下，这些词分别代表及物动词和直接宾语。事实上，在大多数情况下，及物动词/直接宾语对在确定请求话语中表达的意图时是最具描述性的。</p><p id="67fd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从图表上看，这可能如下所示:</p><figure class="kr ks kt ku fd hk er es paragraph-image"><div class="er es lh"><img src="../Images/f375b97c6a896e495c7b4f2c84f2c9cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*UZfv-JNE2vpChFbZGvyzsA.jpeg"/></div></figure><figure class="kr ks kt ku fd hk er es paragraph-image"><div class="er es li"><img src="../Images/4f4a26e9ea5d59eb464d766c20c49764.png" data-original-src="https://miro.medium.com/v2/resize:fit:60/0*uH5mLRjU5oO-MeWI"/></div><figcaption class="hn ho et er es hp hq bd b be z dx translated">在许多请求话语中，及物动词及其直接宾语最能描述短语的意图。</figcaption></figure><p id="1987" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">图中描述的操作可以在采用空间的Python脚本中轻松执行，如下所示:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="e0b5" class="la jp ht kw b fi lb lc l ld le">import spacy<br/>nlp = spacy.load('en')<br/>doc = nlp(u'I want to order a photo cake.')<br/>for token in doc:<br/>  if token.dep_ == 'dobj':<br/>    print(token.head.text + token.text.capitalize())</span></pre><p id="f856" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这个脚本中，您将文本处理管道应用于示例句子，然后遍历标记，查找依赖标签为<em class="lg"> dobj </em>的标记。当找到它时，你通过获得直接宾语的句法中心来确定相应的及物动词。最后，您将及物动词和它的直接宾语连接起来，以单个单词的形式表达意图(这通常是处理脚本的要求)。</p><p id="dad3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，该脚本应该生成:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="c0d1" class="la jp ht kw b fi lb lc l ld le">orderCake</span></pre><p id="5eb8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在真实的应用程序中，用户可能会为每一个意图使用大量的短语。这意味着真正的应用程序必须识别用户输入中的同义短语。关于这些细节，你可以看看我的新书《使用Python的自然语言处理<a class="ae lf" href="https://nostarch.com/NLPPython" rel="noopener ugc nofollow" target="_blank"><em class="lg"/></a>，里面有很多使用spaCy完成不同NLP任务的例子。</p><p id="458f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此外，在我最近为Oracle杂志撰写的文章<a class="ae lf" href="https://blogs.oracle.com/oraclemagazine/generating-intents-and-entities-for-an-oracle-digital-assistant-skill" rel="noopener ugc nofollow" target="_blank">为Oracle数字助理技能生成意图和实体</a>中，可以找到意图提取技术在实践中可能应用的真实示例。</p></div></div>    
</body>
</html>