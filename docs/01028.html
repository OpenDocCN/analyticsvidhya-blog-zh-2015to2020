<html>
<head>
<title>Building Tensorflow 1.14 with GPU Support and TensorRT on Ubuntu 16.04 LTS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">åœ¨Ubuntu 16.04 LTSç‰ˆä¸Šä½¿ç”¨GPUæ”¯æŒå’ŒTensorRTæ„å»ºTensorflow 1.14</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/analytics-vidhya/building-tensorflow-1-14-with-gpu-support-and-tensorrt-on-ubuntu-16-04-84bbd356e03?source=collection_archive---------2-----------------------#2019-09-26">https://medium.com/analytics-vidhya/building-tensorflow-1-14-with-gpu-support-and-tensorrt-on-ubuntu-16-04-84bbd356e03?source=collection_archive---------2-----------------------#2019-09-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/ed03a623d671f7feb4881b43969d5188.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IrsxToTZqbZlDDlRZbPzJg.png"/></div></div></figure><p id="d8b7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">æˆ‘å’Œæˆ‘çš„Ubuntuçš„å…³ç³»æœ‰ç‚¹å¥‡æ€ªã€‚æˆ‘å¾ˆä¹æ„å‘Šè¯‰ä½ ä¸€åˆ‡ï¼Œä½†äº‹å®æ˜¯æˆ‘ç”šè‡³ä¸çŸ¥é“é‚£æ˜¯ä»€ä¹ˆã€‚æˆ‘åªçœ‹åˆ°äº†åæœâ€¦ç¾éš¾æ€§çš„åæœã€‚æˆ‘ä»¬éƒ½è¯´äº†ä¸€äº›æˆ‘ä»¬ä¸æƒ³è¯´çš„è¯ï¼Œä½†æˆ‘æƒ³è¿™æ˜¯å› ä¸ºæˆ‘å’ŒTensorFlowçš„äº‹æƒ…ã€‚æˆ‘çŒœä»–ä»¬è¿˜æ²¡å‡†å¤‡å¥½é€šå¥¸ã€‚ğŸ˜</p><p id="6763" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">è¿™æ˜¯æˆ‘åœ¨è¿‡å»ä¸¤ä¸ªæœˆä¸­ç¬¬ä¸‰æ¬¡å®‰è£…TensorFlowï¼Œæˆ‘æ˜¯é‚£äº›å¸Œæœ›è‡ªå·±çš„æœºå™¨æœ€å¥½çš„äººä¹‹ä¸€ï¼Œæ‰€ä»¥æˆ‘ä¸èƒ½æ¥å—æ›´ä½çš„ä»·æ ¼ã€‚æˆ‘å·²ç»å°è¯•è¿‡è¿™ä¸ªè¿‡ç¨‹å¾ˆå¤šæ¬¡äº†ï¼Œæ‰€ä»¥æˆ‘å†³å®šå†™ä¸€ç¯‡æ–‡ç« ç»™é‚£äº›æ­£åœ¨åŠªåŠ›ç»´æŒä»–ä»¬çš„å…³ç³»çš„äººã€‚).</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="c48e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jv">è¦åœ¨Ubuntu 18.04 LTSä¸Šæ„å»ºæœ‰GPUæ”¯æŒå’ŒTensorRTçš„Tensorflow 2.0ï¼ŒæŒ‰ç…§è¿™ä¸ª</em> <a class="ae jw" rel="noopener" href="/@shivam.iitmandi/building-tensorflow-2-0-with-gpu-support-and-tensorrt-on-ubuntu-18-04-lts-part-1-e04ce41f885c"> <em class="jv">é“¾æ¥</em> </a> <em class="jv">ã€‚</em></p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="affc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">å¥½å§ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä»€ä¹ˆï¼Ÿ</p><ul class=""><li id="775c" class="jx jy hi is b it iu ix iy jb jz jf ka jj kb jn kc kd ke kf bi translated">CUDA 10.0(é’ˆå¯¹Tensorflow â‰¥ 1.13.0)</li><li id="0688" class="jx jy hi is b it kg ix kh jb ki jf kj jj kk jn kc kd ke kf bi translated">NVIDIA GPUé©±åŠ¨(CUDA 10.0è¦æ±‚â‰¥ 410.x)</li><li id="19cf" class="jx jy hi is b it kg ix kh jb ki jf kj jj kk jn kc kd ke kf bi translated">cuDNN SDK (â‰¥ 7.4.1)</li><li id="dc0c" class="jx jy hi is b it kg ix kh jb ki jf kj jj kk jn kc kd ke kf bi translated">CUPTI(é™„å¸¦CUDAå·¥å…·åŒ…)</li><li id="e2f4" class="jx jy hi is b it kg ix kh jb ki jf kj jj kk jn kc kd ke kf bi translated">Bazel (0.24.1 â‰¤ç‰ˆæœ¬â‰¤ 0.26.1)</li></ul></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="96d0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">æˆ‘ä»¬å¯ä»¥å¼€å§‹äº†å—ï¼Ÿ</p><p id="04ec" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">æˆ‘ä¼šåˆ†æ®µå†™ä¸‹æ­¥éª¤ï¼Œè®©è¿‡ç¨‹æ›´ç®€æ´ï¼Œæ›´åˆ‡é¢˜ã€‚</p><h1 id="9df4" class="kl km hi bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">æ›´æ–°å’Œå‡çº§æ‚¨çš„ç³»ç»Ÿã€‚</h1><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="6e1b" class="ls km hi lo b fi lt lu l lv lw">$ sudo apt-get update</span><span id="6cca" class="ls km hi lo b fi lx lu l lv lw">$ sudo apt-get upgrade</span></pre><h1 id="f537" class="kl km hi bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">éªŒè¯æ‚¨æ˜¯å¦æ‹¥æœ‰æ”¯æŒCUDAçš„GPUã€‚</h1><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="075e" class="ls km hi lo b fi lt lu l lv lw">$ lspci | grep -i nvidia</span></pre><p id="67c8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="jv"> lspci </em> </strong>å‘½ä»¤è¿”å›ç³»ç»Ÿä¸Šå®‰è£…çš„æ‰€æœ‰ç¡¬ä»¶çš„åˆ—è¡¨ã€‚ä½¿ç”¨<strong class="is hj"><em class="jv">grep |-I nvidia</em></strong>åªä¼šè¿”å›ä½ çš„NVIDIAç¡¬ä»¶çš„åç§°ã€‚è®°ä¸‹åç§°ï¼Œå¹¶åœ¨<a class="ae jw" href="https://developer.nvidia.com/cuda-gpus" rel="noopener ugc nofollow" target="_blank">http://developer.nvidia.com/cuda-gpus</a>æ£€æŸ¥æ‚¨çš„GPUæ˜¯å¦æ”¯æŒCUDAã€‚</p><p id="0239" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">å¦‚æœæœ‰ï¼Œè®°ä¸‹å®ƒçš„è®¡ç®—èƒ½åŠ›ã€‚</p><h1 id="3aa3" class="kl km hi bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">ç§»é™¤ä»»ä½•ç°æœ‰æˆ–å…ˆå‰å®‰è£…çš„CUDA</h1><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="3da3" class="ls km hi lo b fi lt lu l lv lw">$ sudo apt-get purge nvidia*</span><span id="9eee" class="ls km hi lo b fi lx lu l lv lw">$ sudo apt-get autoremove</span><span id="9268" class="ls km hi lo b fi lx lu l lv lw">$ sudo apt-get autoclean</span><span id="47d0" class="ls km hi lo b fi lx lu l lv lw">$ sudo rm -rf /usr/local/cuda*</span></pre><p id="0d13" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ç¬¬ä¸€ä¸ªå‘½ä»¤å°†å¸è½½å®‰è£…åœ¨æ‚¨ç³»ç»Ÿä¸Šçš„nvidiaé©±åŠ¨ç¨‹åºã€‚æˆ‘ä»¬ç¨åä¼šå®‰è£…å…¼å®¹çš„ã€‚ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªæ˜¯åˆ é™¤æ— ç”¨å’Œä¸å¿…è¦çš„æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶æ˜¯ä½œä¸ºå…¶ä»–åŒ…çš„ä¾èµ–é¡¹å®‰è£…çš„ï¼Œä½†ä¸å†éœ€è¦ã€‚æœ€åä¸€ä¸ªå‘½ä»¤å°†åˆ é™¤åŒ…å«CUDAçš„æ–‡ä»¶å¤¹ã€‚</p><h1 id="e472" class="kl km hi bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">ä¸ºUbuntu 16.04å®‰è£…CUDA 10.0</h1><p id="c360" class="pw-post-body-paragraph iq ir hi is b it ly iv iw ix lz iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hb bi translated">ä¸è¦å®‰è£…CUDA-10.1ã€‚Tensorflowå°šæœªä¸æœ€æ–°ç‰ˆæœ¬å…¼å®¹ã€‚</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="1930" class="ls km hi lo b fi lt lu l lv lw">$ sudo apt-get install gnupg-curl</span></pre><p id="07d6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">è¿™å°†æœ‰åŠ©äºä½¿ç”¨ä»»ä½•æ”¯æŒçš„åè®®åœ¨æœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ•°æ®ã€‚</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="d07d" class="ls km hi lo b fi lt lu l lv lw">$ wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/x86_64/cuda-repo-ubuntu1604_10.0.130-1_amd64.deb</span></pre><p id="04ce" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">è¿™å°†ä»æœåŠ¡å™¨ä¸‹è½½CUDA 10.0ã€‚</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="93ac" class="ls km hi lo b fi lt lu l lv lw">$ sudo dpkg -i cuda-repo-ubuntu1604_10.0.130-1_amd64.deb</span><span id="4c52" class="ls km hi lo b fi lx lu l lv lw">$ sudo apt-key adv --fetch-keys https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/x86_64/7fa2af80.pub</span></pre><p id="a078" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="jv"> dpkg </em> </strong>å‘½ä»¤ç”¨äºå®‰è£…<em class="jv">ã€‚Ubuntuä¸Šçš„deb </em>æ–‡ä»¶ã€‚ç¬¬ä¸€ä¸ªå‘½ä»¤å°†ä¸ºä»¥åçš„å®‰è£…æ·»åŠ CUDA 10.0ã€‚ç¬¬äºŒä¸ªå‘½ä»¤æ˜¯æ·»åŠ å­˜å‚¨åº“å¯†é’¥ã€‚</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="d6cb" class="ls km hi lo b fi lt lu l lv lw">$ sudo apt-get update</span></pre><p id="06dc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">æ›´æ–°æ‚¨çš„å¥—é¤åˆ—è¡¨ã€‚</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="efcb" class="ls km hi lo b fi lt lu l lv lw">$ wget <a class="ae jw" href="http://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/x86_64/nvidia-machine-learning-repo-ubuntu1604_1.0.0-1_amd64.deb" rel="noopener ugc nofollow" target="_blank">http://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/x86_64/nvidia-machine-learning-repo-ubuntu1604_1.0.0-1_amd64.deb</a></span><span id="090a" class="ls km hi lo b fi lx lu l lv lw">$ sudo apt install ./nvidia-machine-learning-repo-ubuntu1604_1.0.0-1_amd64.deb</span></pre><p id="ab3d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ä¸‹è½½å¹¶æ·»åŠ tensorflowæ‰€éœ€çš„NVIDIAæœºå™¨å­¦ä¹ å·¥å…·ã€‚</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="b8d9" class="ls km hi lo b fi lt lu l lv lw">$ sudo apt-get update</span><span id="5fb8" class="ls km hi lo b fi lx lu l lv lw">$ reboot</span></pre><p id="d073" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">æ›´æ–°å¹¶é‡å¯ç³»ç»Ÿã€‚</p><h2 id="e91f" class="ls km hi bd kn md me mf kr mg mh mi kv jb mj mk kz jf ml mm ld jj mn mo lh mp bi translated">å®‰è£…æ‰€éœ€çš„NVIDIAé©±åŠ¨ç¨‹åºã€‚**</h2><p id="a94d" class="pw-post-body-paragraph iq ir hi is b it ly iv iw ix lz iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hb bi translated">CUDAä¸ä¼šå®‰è£…ï¼Œé™¤éä½ çš„ç³»ç»Ÿæœ‰ä½ çš„GPUæ‰€éœ€çš„NVIDIAé©±åŠ¨ç¨‹åºã€‚é€šè¿‡PPAå®‰è£…å®ƒã€‚</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="b0a6" class="ls km hi lo b fi lt lu l lv lw">$ sudo add-apt-repository ppa:graphics-drivers/ppa</span><span id="b976" class="ls km hi lo b fi lx lu l lv lw">$ sudo apt-get update</span></pre><p id="6a8b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">è¿›å…¥Ubuntuä¸­çš„<strong class="is hj">é™„åŠ é©±åŠ¨</strong>çª—å£ï¼Œé€‰æ‹©é¦–é€‰é©±åŠ¨ï¼Œç„¶ååº”ç”¨è¿™äº›æ›´æ”¹ã€‚é‡æ–°å¯åŠ¨ç³»ç»Ÿä»¥åŠ è½½é©±åŠ¨ç¨‹åºã€‚</p><p id="aaed" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">*** <strong class="is hj">é‡è¦</strong> ***</p><p id="cf32" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">é©±åŠ¨çš„é€‰æ‹©å–å†³äºä½ çš„ç³»ç»Ÿå’ŒUbuntuå†…æ ¸ç‰ˆæœ¬ã€‚<strong class="is hj">é™„åŠ é©±åŠ¨ç¨‹åº</strong>çª—å£ä¼šæ˜¾ç¤ºè®¸å¤šé€‰é¡¹ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><figure class="lj lk ll lm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mq"><img src="../Images/52d2ef82fc702f98738aa8e1c36db0d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hl-Ho6Axrb4FCmLRFJB4ag.png"/></div></div></figure><p id="e82e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ç°åœ¨ï¼Œä½ å¯èƒ½ä¼šå°è¯•å®‰è£…æœ€æ–°çš„ç‰ˆæœ¬ï¼Œä½†è¿™å¯èƒ½ä¼šå¯¼è‡´æŸäº›å¹¶å‘ç—‡ï¼Œæ¯”å¦‚ï¼Œå±å¹•å˜æš—æˆ–é‡å¯åæ— æ³•å¯åŠ¨åˆ°Ubuntuã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘æ¨èä½¿ç”¨NVIDIA-410.x ã€‚æˆ‘è¯•è¿‡æ›´é«˜çš„ç‰ˆæœ¬ï¼Œä½†å®ƒä»¬ä¸é€‚åˆæˆ‘çš„ç³»ç»Ÿã€‚è¿˜æœ‰ï¼ŒNVIDIA-410.xå·¥ä½œèµ·æ¥åƒä¸ªé­”å’’ï¼</p><h1 id="e0b9" class="kl km hi bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">æœ€åå®‰è£…CUDA 10.0ï¼ŒcuDNN SDKï¼ŒCUPTIï¼ŒTensorRT</h1><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="2ac9" class="ls km hi lo b fi lt lu l lv lw">$ sudo apt-get install --no-install-recommends \<br/>    cuda-10-0 \<br/>    libcudnn7=7.6.2.24-1+cuda10.0  \<br/>    libcudnn7-dev=7.6.2.24-1+cuda10.0<!-- --> </span><span id="7c36" class="ls km hi lo b fi lx lu l lv lw">$ export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda/extras/CUPTI/lib64</span><span id="c957" class="ls km hi lo b fi lx lu l lv lw">$ sudo apt-get install -y --no-install-recommends libnvinfer5=5.1.5-1+cuda10.0 \<br/>    libnvinfer-dev=5.1.5-1+cuda10.0</span></pre><p id="942d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">è¿™å°†æœ€ç»ˆåœ¨æ‚¨çš„ç³»ç»Ÿä¸Šå®‰è£…CUDA 10.0ã€cuDNN SDK 7.6.2ã€CUPTIå’ŒTensorRTã€‚</p><h1 id="5080" class="kl km hi bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">å°†å®‰è£…ç›®å½•çš„è·¯å¾„æ·»åŠ åˆ°PATHå˜é‡ä¸­</h1><p id="3e03" class="pw-post-body-paragraph iq ir hi is b it ly iv iw ix lz iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hb bi translated">å°†æœ€è¿‘å®‰è£…çš„æ–‡ä»¶çš„è·¯å¾„æ·»åŠ åˆ°PATHå˜é‡ä¸­ï¼Œè¿™æ ·å®ƒå°±çŸ¥é“åœ¨éœ€è¦æ—¶åœ¨å“ªé‡Œå¯ä»¥æ‰¾åˆ°å®ƒä»¬ã€‚</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="7a2d" class="ls km hi lo b fi lt lu l lv lw">$ echo 'export PATH=/usr/local/cuda-10.0/bin${PATH:+:${PATH}}' &gt;&gt; ~/.bashrc</span><span id="06af" class="ls km hi lo b fi lx lu l lv lw">$ echo 'export LD_LIBRARY_PATH=/usr/local/cuda-10.0/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}' &gt;&gt; ~/.bashrc</span></pre><p id="ffc3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">è¿™äº›å‘½ä»¤ä¼šå°†è·¯å¾„æ·»åŠ åˆ°PATHå˜é‡ä¸­ã€‚</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="6bfe" class="ls km hi lo b fi lt lu l lv lw">$ source ~/.bashrc</span><span id="6b1c" class="ls km hi lo b fi lx lu l lv lw">$ sudo ldconfig</span></pre><p id="6e5b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">é‡æ–°åŠ è½½å¹¶æ›´æ–°<em class="jv"> bashrc </em>æ–‡ä»¶ã€‚é‡å¯ç³»ç»Ÿã€‚</p><h1 id="9407" class="kl km hi bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">éªŒè¯CUDA 10.0ã€cuDNNå’ŒTensorRTçš„å®‰è£…ã€‚</h1><h2 id="7904" class="ls km hi bd kn md me mf kr mg mh mi kv jb mj mk kz jf ml mm ld jj mn mo lh mp bi translated">CUDA 10.0çš„éªŒè¯:</h2><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="359f" class="ls km hi lo b fi lt lu l lv lw">$ cuda-install-samples-10.0.sh ~</span><span id="ba7f" class="ls km hi lo b fi lx lu l lv lw">$ cd ~/NVIDIA_CUDA-10.0_Samples/5_Simulations/nbody</span><span id="78ad" class="ls km hi lo b fi lx lu l lv lw">$ make</span><span id="0d05" class="ls km hi lo b fi lx lu l lv lw">$ ./nbody</span></pre><p id="8cb2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">è¿™äº›å‘½ä»¤å°†å®‰è£…CUDA 10.0ç¤ºä¾‹å¹¶è¿è¡Œå…¶ä¸­ä¸€ä¸ªã€‚å¦‚æœä½ çœ‹åˆ°æŸç§åŠ¨ç”»ï¼Œé‚£ä¹ˆä½ çš„CUDA 10.0å·¥ä½œå¾—éå¸¸å¥½ã€‚</p><h2 id="d0d1" class="ls km hi bd kn md me mf kr mg mh mi kv jb mj mk kz jf ml mm ld jj mn mo lh mp bi translated">cuDNN 7.6.2çš„éªŒè¯:</h2><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="dc3a" class="ls km hi lo b fi lt lu l lv lw">$ whereis cudnn.h</span></pre><p id="a6f5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">è¿™å°†è¿”å›<strong class="is hj"> cudnn.h </strong>æ–‡ä»¶çš„ä½ç½®ã€‚è®°ä¸‹æ¥ã€‚å§‘ä¸”ç§°ä¹‹ä¸º<strong class="is hj"> ${CUDNN_H_PATH} </strong>ã€‚</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="8dd6" class="ls km hi lo b fi lt lu l lv lw">$ cat ${CUDNN_H_PATH} | grep CUDNN_MAJOR -A 2</span></pre><p id="9f4a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">å®ƒåº”è¯¥ä¼šè¿”å›å¦‚ä¸‹å†…å®¹:</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="a08f" class="ls km hi lo b fi lt lu l lv lw">#define CUDNN_MAJOR <strong class="lo hj">7</strong><br/>#define CUDNN_MINOR <strong class="lo hj">6</strong><br/>#define CUDNN_PATCHLEVEL <strong class="lo hj">2</strong><br/>--<br/>#define CUDNN_VERSION (CUDNN_MAJOR * 1000 + CUDNN_MINOR * 100 + CUDNN_PATCHLEVEL)</span><span id="942c" class="ls km hi lo b fi lx lu l lv lw">#include "driver_types.h"</span></pre><h2 id="51c6" class="ls km hi bd kn md me mf kr mg mh mi kv jb mj mk kz jf ml mm ld jj mn mo lh mp bi translated">TensorRTçš„éªŒè¯:</h2><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="3452" class="ls km hi lo b fi lt lu l lv lw">$ dpkg -l | grep nvinfer</span></pre><p id="37e6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">è¿™åº”è¯¥ä¼šè¿”å›å¦‚ä¸‹å†…å®¹:</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="ab42" class="ls km hi lo b fi lt lu l lv lw">ii  libnvinfer-dev                                  5.1.5-1+cuda10.0                              amd64        TensorRT development libraries and headers<br/>ii  libnvinfer5                                     5.1.5-1+cuda10.0                              amd64        TensorRT runtime libraries</span></pre><h1 id="81dd" class="kl km hi bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">å®‰è£…ä¾èµ–é¡¹</h1><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="49c8" class="ls km hi lo b fi lt lu l lv lw">$ pip3 install -U --user pip six numpy wheel setuptools mock</span><span id="7d70" class="ls km hi lo b fi lx lu l lv lw">$ pip3 install -U --user keras_applications==1.0.6 --no-deps</span><span id="dea6" class="ls km hi lo b fi lx lu l lv lw">$ pip3 install -U --user keras_preprocessing==1.0.5 --no-deps</span></pre><p id="3586" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">å¦‚æœåœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…ï¼Œåˆ™çœç•¥<code class="du mr ms mt lo b">--user</code> <em class="jv"> </em>ã€‚</p><h1 id="c9dd" class="kl km hi bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">ä½¿ç”¨bazel buildä»æºä»£ç æ„å»ºTensorflow 1.14</h1><h2 id="a800" class="ls km hi bd kn md me mf kr mg mh mi kv jb mj mk kz jf ml mm ld jj mn mo lh mp bi translated">ä¸‹è½½å¹¶å®‰è£…Bazel:</h2><p id="4fb7" class="pw-post-body-paragraph iq ir hi is b it ly iv iw ix lz iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hb bi translated">ä»https://github.com/bazelbuild/bazel/releasesä¸‹è½½å·´æ³½å°”ã€‚æˆ‘ç”¨è¿‡<strong class="is hj"> 0.25.0 </strong>ã€‚</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="57f4" class="ls km hi lo b fi lt lu l lv lw">$ cd ~/ # My bazel file was in $HOME</span><span id="121d" class="ls km hi lo b fi lx lu l lv lw">$ chmod +x bazel-0.25.0-installer-linux-x86_64.sh</span><span id="c1d6" class="ls km hi lo b fi lx lu l lv lw">$ ./bazel-0.25.0-installer-linux-x86_64.sh --user</span></pre><p id="dc95" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">è¿™å°†åœ¨æ‚¨çš„ç³»ç»Ÿä¸Šå®‰è£…bazelã€‚ç°åœ¨å°†å…¶è·¯å¾„æ·»åŠ åˆ°pathå˜é‡ä¸­ã€‚</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="3e48" class="ls km hi lo b fi lt lu l lv lw">$ echo 'export PATH="$PATH:$HOME/bin"' &gt;&gt; ~/.bashrc^C</span><span id="e241" class="ls km hi lo b fi lx lu l lv lw">$ source ~/.bashrc</span><span id="6a18" class="ls km hi lo b fi lx lu l lv lw">$ sudo ldconfig</span></pre><h2 id="98b2" class="ls km hi bd kn md me mf kr mg mh mi kv jb mj mk kz jf ml mm ld jj mn mo lh mp bi translated">å…‹éš†Tensorflowå­˜å‚¨åº“:</h2><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="c2c0" class="ls km hi lo b fi lt lu l lv lw">$ git clone https://github.com/tensorflow/tensorflow.git</span></pre><p id="6891" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">å…‹éš†å®Œæˆåï¼Œå°†ç›®å½•æ›´æ”¹ä¸ºtensorflowï¼Œå¹¶ç­¾å‡ºåˆ°ç‰ˆæœ¬åˆ†æ”¯ã€‚</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="d638" class="ls km hi lo b fi lt lu l lv lw">$ cd tensorflow</span><span id="4de4" class="ls km hi lo b fi lx lu l lv lw">$ git checkout r1.14</span></pre><h2 id="cc8a" class="ls km hi bd kn md me mf kr mg mh mi kv jb mj mk kz jf ml mm ld jj mn mo lh mp bi translated">é…ç½®ç‰ˆæœ¬:</h2><p id="0942" class="pw-post-body-paragraph iq ir hi is b it ly iv iw ix lz iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hb bi translated">æ˜¯æ—¶å€™é…ç½®æ„å»ºå¹¶å†³å®šèµ‹äºˆtensorflowçš„ç‰¹æ€§äº†ã€‚</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="444d" class="ls km hi lo b fi lt lu l lv lw">$ ./configure</span></pre><p id="6004" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">è¿™å°†åœ¨ç»ˆç«¯ä¸ŠåŠ è½½ä¸€ä¸ªå‚æ•°è§£æå™¨ï¼Œè¯¢é—®è·¯å¾„å’Œç‰¹æ€§ã€‚åƒè¿™æ ·:</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="de81" class="ls km hi lo b fi lt lu l lv lw">Please specify the location of python. [Default is /usr/bin/python]: /usr/bin/python3</span><span id="0971" class="ls km hi lo b fi lx lu l lv lw">Do you wish to build TensorFlow with Apache Ignite support? [Y/n]: Y</span><span id="c81a" class="ls km hi lo b fi lx lu l lv lw">Do you wish to build TensorFlow with XLA JIT support? [Y/n]: Y</span><span id="3b80" class="ls km hi lo b fi lx lu l lv lw">Do you wish to build TensorFlow with OpenCL SYCL support? [y/N]: N<br/><br/>Do you wish to build TensorFlow with ROCm support? [y/N]: N<br/><br/>Do you wish to build TensorFlow with CUDA support? [y/N]: Y</span></pre><p id="9afe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">å®ƒä¼šè‡ªåŠ¨æ£€æµ‹åˆ°CUDAã€cuDNNå’ŒTensorRTçš„è·¯å¾„ã€‚</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="bba8" class="ls km hi lo b fi lt lu l lv lw">Do you wish to build TensorFlow with TensorRT support? [y/N]: Y</span><span id="445e" class="ls km hi lo b fi lx lu l lv lw">Enter the compute capability to use. Please note that each additional compute capability significantly increases your build time and binary size. [Default is: 5.0] {<strong class="lo hj">Enter the compute capability noted before</strong>}</span><span id="daad" class="ls km hi lo b fi lx lu l lv lw">Do you want to use clang as CUDA compiler? [y/N]: N</span><span id="2af9" class="ls km hi lo b fi lx lu l lv lw">Please specify which gcc should be used by nvcc as the host compiler. [Default is /usr/bin/gcc]: /usr/bin/gcc</span><span id="65fe" class="ls km hi lo b fi lx lu l lv lw">Do you wish to build TensorFlow with MPI support? [y/N]: N<br/><br/>Please specify optimization flags to use during compilation when bazel option "--config=opt" is specified [Default is -march=native]: -march=native<br/><br/>Would you like to interactively configure ./WORKSPACE for Android builds? [y/N]:N</span></pre><p id="5074" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">è¿™å°†é…ç½®æ„å»ºã€‚</p><h2 id="3160" class="ls km hi bd kn md me mf kr mg mh mi kv jb mj mk kz jf ml mm ld jj mn mo lh mp bi translated">å¼€å§‹æ„å»ºè¿‡ç¨‹:</h2><p id="e796" class="pw-post-body-paragraph iq ir hi is b it ly iv iw ix lz iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hb bi translated">Buildingå°†åˆ›å»ºä¸€ä¸ªç¨åå®‰è£…çš„tensor flow pipåŒ…ã€‚</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="8d8f" class="ls km hi lo b fi lt lu l lv lw">$ bazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package</span></pre><p id="abd8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">***æ—æ³¨***</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="bc48" class="ls km hi lo b fi lt lu l lv lw">add "--config=mkl" if you want Intel MKL support for newer intel cpu for faster training on cpu<br/><br/>add "--config=monolithic" if you want static monolithic build (try this if build failed)<br/><br/>add "--local_resources 2048,.5,1.0" if your PC has low RAM causing Segmentation fault or other related errors</span></pre><p id="8e75" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">è¿™ä¸ªè¿‡ç¨‹éœ€è¦å¾ˆé•¿æ—¶é—´ã€‚å¤§æ¦‚2-3ä¸ªå°æ—¶ã€‚å› æ­¤ï¼Œç­‰å¾…å’ŒæœŸå¾…ä»»ä½•å»ºè®¾å¤±è´¥ï¼Œä»–ä»¬åº”è¯¥æ¥äº†ã€‚å¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œè¯·æŸ¥çœ‹å…¶èƒŒåçš„é”™è¯¯ï¼Œå¹¶ä½¿ç”¨GoogleæŸ¥æ‰¾è§£å†³æ–¹æ¡ˆã€‚å¦‚æœä½ ä¸æ˜ç™½æˆ–è€…åœ¨Googleä¸Šæ‰¾ä¸åˆ°è§£å†³æ–¹æ¡ˆï¼Œé‚£ä¹ˆä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å…³é—­bazelæœ¬åœ°æœåŠ¡å™¨:</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="3ffa" class="ls km hi lo b fi lt lu l lv lw">$ bazel clean --expunge</span></pre><p id="39c0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">å¹¶å†æ¬¡è¿è¡Œæ„å»ºè¿‡ç¨‹ã€‚æˆ‘æˆåŠŸäº†ä¸¤æ¬¡ã€‚</p><h2 id="48d7" class="ls km hi bd kn md me mf kr mg mh mi kv jb mj mk kz jf ml mm ld jj mn mo lh mp bi translated">æ„å»ºtensorflowçš„whlæ–‡ä»¶è¿›è¡Œå®‰è£…:</h2><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="e151" class="ls km hi lo b fi lt lu l lv lw">$ bazel-bin/tensorflow/tools/pip_package/build_pip_package tensorflow_pkg</span></pre><h2 id="20df" class="ls km hi bd kn md me mf kr mg mh mi kv jb mj mk kz jf ml mm ld jj mn mo lh mp bi translated">ç”¨pipå®‰è£…Tensorflow:</h2><p id="fc4c" class="pw-post-body-paragraph iq ir hi is b it ly iv iw ix lz iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hb bi translated">å¦‚æœä¸ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ:</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="90a4" class="ls km hi lo b fi lt lu l lv lw">$ cd tensorflow_pkg</span><span id="c575" class="ls km hi lo b fi lx lu l lv lw">$ pip3 install tensorflow*.whl</span></pre><p id="cd3a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">å¯¹äºè™šæ‹Ÿç¯å¢ƒ:</p><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="e0fe" class="ls km hi lo b fi lt lu l lv lw">$ sudo apt-get install virtualenv</span><span id="ad36" class="ls km hi lo b fi lx lu l lv lw">$ virtualenv tf_1.14_cuda10.0 -p /usr/bin/python3</span><span id="cafa" class="ls km hi lo b fi lx lu l lv lw">$ source tf_1.14_cuda10.0/bin/activate</span><span id="e0c2" class="ls km hi lo b fi lx lu l lv lw">$ pip3 install tensorflow*.whl</span></pre><h2 id="fb08" class="ls km hi bd kn md me mf kr mg mh mi kv jb mj mk kz jf ml mm ld jj mn mo lh mp bi translated">éªŒè¯Tensorflowå®‰è£…:</h2><pre class="lj lk ll lm fd ln lo lp lq aw lr bi"><span id="51c7" class="ls km hi lo b fi lt lu l lv lw">$ python3<br/><br/>&gt;&gt;&gt; import tensorflow as tf</span><span id="7195" class="ls km hi lo b fi lx lu l lv lw">&gt;&gt;&gt; hello = tf.constant('Hello, TensorFlow!')</span><span id="fbe5" class="ls km hi lo b fi lx lu l lv lw">&gt;&gt;&gt; sess = tf.Session()</span><span id="d6bd" class="ls km hi lo b fi lx lu l lv lw">&gt;&gt;&gt; print(sess.run(hello))</span></pre><p id="7215" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">å¦‚æœç³»ç»Ÿè¾“å‡ºç»“æœï¼Œé‚£ä¹ˆä¸‡å²ï¼æ‚¨å·²ç»å‡†å¤‡å¥½ä½¿ç”¨Tensorflowäº†ã€‚</p><h1 id="00b1" class="kl km hi bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">æˆ‘ä»¬å®Œäº‹äº†ã€‚ï¼ï¼</h1><p id="2aeb" class="pw-post-body-paragraph iq ir hi is b it ly iv iw ix lz iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hb bi translated"><strong class="is hj"> ** </strong>æˆ‘ä¹‹æ‰€ä»¥åœ¨CUDAä¹‹åå®‰è£…NVIDIAé©±åŠ¨ï¼Œæ˜¯å› ä¸ºå‡ºäºæŸç§åŸå› åå…¶é“è€Œè¡Œä¹‹å®‰è£…äº†CUDA 10.1è€Œä¸æ˜¯CUDA 10.0ï¼Œå¹¶ä¸”é»˜è®¤æƒ…å†µä¸‹æˆ‘çš„ç³»ç»Ÿå¼€å§‹ä½¿ç”¨NVIDIA-418.xé©±åŠ¨ã€‚å¦‚æœä½ å‘ç°äº†é—®é¢˜ï¼Œå‘Šè¯‰æˆ‘ï¼</p><p id="aee9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">å°±è¿™æ ·å§ï¼éå¸¸æ„Ÿè°¢ä½ ä¸€è·¯å‘ä¸‹æ»šåŠ¨ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰ç”¨ã€‚è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œå¸Œæœ›ç»§ç»­å†™ä¸‹å»ã€‚è°¢è°¢å¤§å®¶ï¼çˆ±ä½ Tensorflowï¼</p><p id="cc2e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ä¸€è·¯å¹³å®‰ï¼</p><p id="5085" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">ã€https://www.tensorflow.org/install/gpuã€‘Ref:T4</p><p id="f494" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jw" href="https://www.tensorflow.org/install/source" rel="noopener ugc nofollow" target="_blank">https://www.tensorflow.org/install/source</a></p><p id="bc04" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jw" href="https://www.pytorials.com/" rel="noopener ugc nofollow" target="_blank">https://www.pytorials.com</a></p></div></div>    
</body>
</html>