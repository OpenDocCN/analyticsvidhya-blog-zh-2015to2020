<html>
<head>
<title>Ways (using Python, SQL, R, Pivot)to show a distinct count of your data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">方法(使用Python、SQL、R、Pivot)来显示数据的不同计数</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/ways-using-python-sql-r-pivot-to-show-a-distinct-count-of-your-data-8e6a8b34a8e2?source=collection_archive---------27-----------------------#2020-10-09">https://medium.com/analytics-vidhya/ways-using-python-sql-r-pivot-to-show-a-distinct-count-of-your-data-8e6a8b34a8e2?source=collection_archive---------27-----------------------#2020-10-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="749e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我想解释一下为什么非重复计数在数据分析中如此重要。无论你是在数据探索阶段，还是在为指标设定分母，做出一个清晰的反映现实的计数是绝对重要的。否则，您可能会有过度繁荣的指标或概述。通过这种方式，您可以使用SQL、Python、R、Pivot或其他工具来实现。</p><h1 id="4681" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated"><strong class="ak">在Python中</strong></h1><p id="2916" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">使用库中的函数绝对方便。它在这里</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="377a" class="kp je hi kl b fi kq kr l ks kt">table.groupby('your_group_columns').your_target_column.nunique()</span></pre><p id="4c55" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在python 3.7中，您还可以使用函数(用于列表数据)</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="d5ba" class="kp je hi kl b fi kq kr l ks kt">list(dict.fromkeys(list_name))</span></pre><p id="dd0b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">实际上，在Python中有许多方法可以进行非重复计数，这完全取决于您使用的数据类型，您可以在采用非重复函数之前进行数据类型转换。</p><h1 id="27db" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">使用SQL</h1><p id="66b1" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">给你，我相信你们都很熟悉SQL。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="a3a6" class="kp je hi kl b fi kq kr l ks kt">SELECT count(distinct target_column) FROM table GROUP BY group_column;</span></pre><h1 id="13ad" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">在R中</h1><p id="d3d6" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">可以在R中使用一个名为dplyr的包，参考下面的例子。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="2a7a" class="kp je hi kl b fi kq kr l ks kt">df1 &lt;- data.frame(x=c(2,2,3,4),y = c(“a”,”b”,”c”,”b”))</span><span id="8b64" class="kp je hi kl b fi ku kr l ks kt">distinct(df1)</span></pre><h1 id="3f78" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">使用透视</h1><p id="3851" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">对于经常使用Excel或者您的大部分数据都在Excel表中的人来说，这可能是一种帮助您的合适方法。</p><p id="e70f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里有一个例子，我们有一台设备有多个维护合同。但是当我们试图从设备的角度进行分析时，我们可能需要不同的设备。</p><figure class="kg kh ki kj fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es kv"><img src="../Images/3f75a1422e38220f3e1257e2f1de93ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tXlyrOOLtz3UVL49VSimsA.png"/></div></div><figcaption class="ld le et er es lf lg bd b be z dx translated">同一设备的两份合同</figcaption></figure><p id="1419" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们在这里使用pivot，在创建数据透视表时，只需简单地单击“将该数据添加到数据模型”即可。</p><figure class="kg kh ki kj fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es lh"><img src="../Images/1f7da66586cccb19d8323c711c2985c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rAC0yBZbDS7srUgdRWfkKw.png"/></div></div></figure><p id="818d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在数据透视表中，找到列选项并选择“非重复计数”</p><figure class="kg kh ki kj fd kw er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es li"><img src="../Images/c2161c7fa0cbde038ceac282642b284a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XXUZIOmN0slOq8pbG5NxmA.png"/></div></div></figure><p id="fa30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">瞧，我们找到了。</p><p id="6913" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于数据计数通常是数据集的基本数字，许多其他数字或指标是根据总计数计算的，因此我们提供精确和准确的总计数非常重要。保持联系，获取更多分析技巧。</p></div></div>    
</body>
</html>