<html>
<head>
<title>AI at the Edge- An introduction to Intel OpenVINO Toolkit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">人工智能在边缘——英特尔OpenVINO工具包简介</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/ai-at-the-edge-an-introduction-to-intel-openvino-toolkit-a0c0594a731c?source=collection_archive---------8-----------------------#2020-02-13">https://medium.com/analytics-vidhya/ai-at-the-edge-an-introduction-to-intel-openvino-toolkit-a0c0594a731c?source=collection_archive---------8-----------------------#2020-02-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/5ac1c9381ee7627a1655f4f9c3da2846.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iYQp1fdu5Y1J5bRaxxBj3g.jpeg"/></div></div></figure><p id="f326" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们现在生活在云计算时代。现在一切都在云上，你的数据，你的处理能力——一切。像AWS、Azure、GCP等云服务已经使你的物联网设备很容易弥补本地机器处理能力的不足，并使用云中的处理能力，为你提供人工智能的惊人能力。但并不是在所有情况下，你都可以依赖云服务。如果你把敏感的个人数据发送到云端，总会有泄露的风险。可能会有网络问题或延迟问题，您希望部署您的人工智能模型进行实时决策，例如，自动驾驶汽车。你真的不希望你的自动驾驶汽车在行驶中等待服务器的响应。或者甚至可能出现网络完全不可用情况。这就是人工智能在边缘概念发挥作用的地方。</p><h1 id="6c97" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">什么是边缘的人工智能</h1><p id="91c2" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">物联网设备的增长增加了AI的边缘应用。我们现在被很多智能设备包围着——手机、智能音箱、智能锁等等。虽然它们很聪明，但是它们没有强大的处理能力。所以有很多硬件资源有限的目标设备，你可能想在那里部署一个AI模型。边缘意味着本地处理。这意味着你可以在设备中使用人工智能模型，并利用其处理能力做出决策，而无需连接云服务。</p><p id="17e8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">不过，Edge并不是云计算的替代品。当需要高处理能力时，您可能仍然需要在云环境中训练您的模型(或者在强大的桌面中)。训练完成后，您可以针对您的设备优化您的训练模型，将其部署在您的edge应用程序中，并执行推理，而无需连接到服务器。优化软件可以极大地帮助优化多目标硬件的训练模型，以提高其效率并最大化其性能。最近，我被英特尔Edge AI奖学金项目录取，在那里我学到了很多关于英特尔openVINO toolkit的知识。在这个(系列)博客中，我将谈论英特尔OpenVINO toolkit软件，它使不同计算机视觉模型的边缘部署变得非常简单和高效。</p><h1 id="d361" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">什么是英特尔OpenVINO</h1><p id="bf8c" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">OpenVINO这个名字代表<strong class="is hj"><em class="kr">O</em></strong><em class="kr">pen</em><strong class="is hj"><em class="kr">V</em></strong><em class="kr">isual</em><strong class="is hj"><em class="kr">I</em></strong><em class="kr">N</em><strong class="is hj"><em class="kr">N</em></strong><em class="kr">eural Network</em><strong class="is hj"><em class="kr">O</em></strong><em class="kr">optimization</em>它是由英特尔开发的开源软件。OpenVINO的主要重点是优化神经网络，以便在各种英特尔硬件上进行快速推理，如CPU、GPU、VPUs、FPGAs、IPUs等。有一个通用的API。OpenVINO软件优化了模型的大小和速度，使其可以在有限的硬件资源下运行在边缘。但这并没有提高模型的精度。这种优化是在模型训练步骤中完成的。相反，有时您可能需要选择降低精度以获得更高的性能。例如，选择8位整数精度而不是32位浮点精度。</p><h1 id="7bfc" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">正在设置</h1><p id="4516" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">要使用OpenVINO，你必须了解Python或C++。您可以按照官方<a class="ae ks" href="https://docs.openvinotoolkit.org/2019_R3.1/index.html" rel="noopener ugc nofollow" target="_blank">文档</a>中的说明在您的本地机器上安装OpenVINO toolkit。我用的是windows电脑。这是我的脚步，</p><p id="3fea" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi kt translated"><span class="l ku kv kw bm kx ky kz la lb di"> 1 </span>我用<a class="ae ks" href="https://www.anaconda.com/distribution/" rel="noopener ugc nofollow" target="_blank"> anaconda发行版</a>安装了python(安装过程中出现提示时，我选择了“添加到路径”选项，尽管安装程序不建议这样做。此选项允许您从我们将使用的命令提示符访问python。).</p><p id="dfdd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi kt translated"><span class="l ku kv kw bm kx ky kz la lb di"> 2 </span>我下载了OpenVINO installer exe文件，转到此<a class="ae ks" href="https://software.intel.com/en-us/openvino-toolkit/choose-download" rel="noopener ugc nofollow" target="_blank">链接，</a>选择我的操作系统windows，然后注册英特尔。</p><p id="d131" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi kt translated">安装人员指出了我缺少的需求，即CMake和Microsoft Visual Studio。</p><p id="d7da" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi kt translated"><span class="l ku kv kw bm kx ky kz la lb di"> 4 </span>我按照这个<a class="ae ks" href="https://youtu.be/8_X5Iq9niDE" rel="noopener ugc nofollow" target="_blank">视频</a>中的说明安装了CMake。</p><p id="b831" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi kt translated"><span class="l ku kv kw bm kx ky kz la lb di"> 5 </span>下载<a class="ae ks" href="https://visualstudio.microsoft.com/" rel="noopener ugc nofollow" target="_blank">微软Visual Studio </a> 2019并安装。遵循这个<a class="ae ks" href="https://www.intel.in/content/www/in/en/support/articles/000055251/boards-and-kits/neural-compute-sticks.html" rel="noopener ugc nofollow" target="_blank">页面</a>中提到的步骤(你<strong class="is hj">必须</strong>安装一些带有VS的工作负载，否则无法工作，所以必须按照链接页面中的说明进行)</p><p id="d900" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi kt translated">现在，在那之后，我按照安装完openVINO后打开的文档进行操作。但是后来我注意到我的TensorFlow版本从2.0降级到了1.15.2。因为，在本文撰写之时，openVINO支持TensorFlow以下版本(<strong class="is hj"> <em class="kr">更新:</em></strong><em class="kr">open vino 2020版本现在支持TF 2</em>)。所以，如果你不想让openVINO改变其他包，你可以这么做。<strong class="is hj">当然首先创建一个虚拟环境！</strong>打开命令提示符并运行以下命令。</p><p id="52a9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">(如果您还没有安装“virtualenv”软件包，请运行以下代码中的第一个命令来安装它。否则，跳到创建虚拟环境的第二行。“openvinoenv”是我选择的环境的名称，如果你愿意，你可以用不同的名称)</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="4f66" class="ll jp hi lh b fi lm ln l lo lp">pip install virtualenv</span><span id="f8cd" class="ll jp hi lh b fi lq ln l lo lp">virtualenv --system-site-packages -p python openvinoenv</span></pre><p id="6d79" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi kt translated"><span class="l ku kv kw bm kx ky kz la lb di"> 7 </span>激活虚拟环境。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="761c" class="ll jp hi lh b fi lm ln l lo lp">openvinoenv\Scripts\activate</span></pre><p id="41eb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi kt translated"><span class="l ku kv kw bm kx ky kz la lb di"> 8 </span>设置OpenVINO环境变量。您需要运行一个名为“setupvars.bat”的文件来设置环境变量。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="a28b" class="ll jp hi lh b fi lm ln l lo lp">cd "C:\Program Files (x86)\IntelSWTools\openvino\bin\"<br/>setupvars.bat</span></pre><p id="ef9a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi kt translated"><span class="l ku kv kw bm kx ky kz la lb di"> 9 </span>将目录更改为&lt;open vino _ installation _ directory&gt;\ open vino \ deployment _ tools \ model _ optimizer。就我而言，</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="ff31" class="ll jp hi lh b fi lm ln l lo lp">cd "C:\Program Files (x86)\IntelSWTools\openvino\deployment_tools\model_optimizer&gt;"</span></pre><p id="fd5b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi kt translated"><span class="l ku kv kw bm kx ky kz la lb di"> 10 </span>你会看到，文件夹里有一些文本文件，其中一个是“requirements.txt”。运行以下命令，</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="5042" class="ll jp hi lh b fi lm ln l lo lp">pip install -r requirements.txt</span></pre><p id="e800" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用虚拟环境的好处是，它将把openVINO的需求隔离在一个单独的python沙箱中，并在不修改全局包的情况下单独安装它们。</p><p id="7bb9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi kt translated">接下来，把你的目录换成后退一步，转到“demo”文件夹。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="c339" class="ll jp hi lh b fi lm ln l lo lp">cd ..<br/>cd demo</span></pre><p id="5940" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi kt translated"><span class="l ku kv kw bm kx ky kz la lb di"> 12 </span>运行“demo_benchmark_app.bat”文件。这一点很重要，因为它会在你第一次运行它时为你安装一些其他缺失的组件。在命令行中键入以下内容。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="445b" class="ll jp hi lh b fi lm ln l lo lp">demo_benchmark_app.bat</span></pre><p id="9d2f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您将看到一个基准测试结果。这意味着，一切工作正常。您的openVINO设置已经可以使用了。如果出现错误，可能是有一个包丢失了。您将在错误消息中看到丢失包的信息。手动安装软件包。</p><p id="1665" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">记住，每次使用OpenVINO，都要运行<installation_directory> \openvino\bin文件夹中的setupvars.bat文件。因此，在激活虚拟环境之后，不要忘记在每次开始使用openVINO时运行下面的命令(如果您在不同的位置安装了它，请使用setupvars.bat在您机器中的位置)。</installation_directory></p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="a29c" class="ll jp hi lh b fi lm ln l lo lp">"C:\Program Files (x86)\IntelSWTools\openvino\bin\setupvars.bat"</span></pre><p id="6be5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">完成后，只需运行，</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="984d" class="ll jp hi lh b fi lm ln l lo lp">deactivate</span></pre><p id="d863" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">提示:</strong>每次开始工作时，首先激活虚拟环境，然后运行setupvars.bat文件，很快就会变得令人恼火。因此，在您的项目中，您可以创建一个批处理文件，在一行中运行这两个步骤。创建一个“environment.bat”(您可以随意命名)文件，编辑该文件以添加这些行并保存。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="427b" class="ll jp hi lh b fi lm ln l lo lp">call "openvinoenv\Scripts\activate"<br/>call "C:\Program Files (x86)\IntelSWTools\openvino\bin\setupvars.bat"</span></pre><p id="a2f1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，当您开始处理您的项目时，不要键入长目录名，只需在命令提示符下键入以下内容，就可以开始了。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="a60a" class="ll jp hi lh b fi lm ln l lo lp">environment.bat</span></pre><h1 id="bb90" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">OpenVINO的工作流程</h1><p id="7702" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">使用OpenVINO有四个步骤。</p><blockquote class="lr"><p id="6e37" class="ls lt hi bd lu lv lw lx ly lz ma jn dx translated">1.获取预先训练的模型。</p><p id="8eca" class="ls lt hi bd lu lv lw lx ly lz ma jn dx translated">2.使用模型优化器，优化预训练模型并创建中间表示(IR)</p><p id="6ba2" class="ls lt hi bd lu lv lw lx ly lz ma jn dx translated">3.使用推理机执行实际的推理(预测)</p><p id="7383" class="ls lt hi bd lu lv lw lx ly lz ma jn dx translated">4.正确处理推理引擎的输出</p></blockquote><p id="d77f" class="pw-post-body-paragraph iq ir hi is b it mb iv iw ix mc iz ja jb md jd je jf me jh ji jj mf jl jm jn hb bi translated">一个预先训练好的模型可以从OpenVINO的模型动物园获得，我会在下一篇文章<a class="ae ks" rel="noopener" href="/@ahsan.shihab2/deploying-ai-at-the-edge-with-intel-openvino-part-1-51a09752fb4e">第一部分</a>中明确谈到。有些模型已经在中间表示中准备好了，对于它们，你不需要进行任何优化，直接把模型送到推理机就可以跳到推理步骤。另一方面，一些模型在转换成中间表示之前需要进一步优化。如果你用TensorFlow或Caffe或其他深度学习库创建了自己的模型，你可以用模型优化器转换你预先训练的模型。这个转换我会在<a class="ae ks" rel="noopener" href="/@ahsan.shihab2/deploying-ai-at-the-edge-with-intel-openvino-part-2-1f1a9faa514b">第二部</a>讲。最后，在<a class="ae ks" rel="noopener" href="/@ahsan.shihab2/deploying-ai-at-the-edge-with-intel-openvino-part-3-final-part-664b92c75fde">第3部分</a>中，我们将使用推理引擎来执行推理，并将输出处理到一个示例应用程序。</p><p id="8cf8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以，不多说了，把你的环境设置好，跟我到下一篇文章。</p><p id="dcce" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">(<em class="kr">链接到所有部分:</em> <a class="ae ks" rel="noopener" href="/@ahsan.shihab2/ai-at-the-edge-an-introduction-to-intel-openvino-toolkit-a0c0594a731c"> <em class="kr">第0部分</em> </a> <em class="kr"> &gt; </em> <a class="ae ks" rel="noopener" href="/@ahsan.shihab2/deploying-ai-at-the-edge-with-intel-openvino-part-1-51a09752fb4e"> <em class="kr">第1部分</em></a><em class="kr">&gt;</em><a class="ae ks" rel="noopener" href="/@ahsan.shihab2/deploying-ai-at-the-edge-with-intel-openvino-part-2-1f1a9faa514b"><em class="kr">第2部分</em></a><em class="kr">&gt;</em><a class="ae ks" rel="noopener" href="/@ahsan.shihab2/deploying-ai-at-the-edge-with-intel-openvino-part-3-final-part-664b92c75fde"><em class="kr">第3部分</em> </a> <em class="kr"> ) </em></p></div></div>    
</body>
</html>