<html>
<head>
<title>Node.JS Modules &amp; Exports</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">节点。JS模块和导出</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/node-js-modules-exports-80d9b1bc2acf?source=collection_archive---------15-----------------------#2020-04-14">https://medium.com/analytics-vidhya/node-js-modules-exports-80d9b1bc2acf?source=collection_archive---------15-----------------------#2020-04-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div class="er es hg"><img src="../Images/9f4bf76dd790698251a2a6d18622cc4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*DY7TZYQtJRzSv6bpjUYdYg.png"/></div><figcaption class="hn ho et er es hp hq bd b be z dx translated"><a class="ae hr" href="https://commons.wikimedia.org/wiki/File:Node.js_logo.svg" rel="noopener ugc nofollow" target="_blank">来源</a></figcaption></figure><div class=""/><h1 id="4138" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo bi translated">什么是模块？</h1><p id="4ded" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">NodeJS中的一个模块是一个简单或复杂的<strong class="jr hv"> JavaScript文件</strong>，它可以在你的整个web应用中使用。简而言之，每个<strong class="jr hv">模块只是一个包含JavaScript代码的文件。</strong></p></div><div class="ab cl kn ko gp kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hb hc hd he hf"><h2 id="03b8" class="ku is hu bd it kv kw kx ix ky kz la jb ka lb lc jf ke ld le jj ki lf lg jn lh bi translated">有三种类型的模块:</h2><h2 id="1c9d" class="ku is hu bd it kv kw kx ix ky kz la jb ka lb lc jf ke ld le jj ki lf lg jn lh bi translated">核心模块:</h2><p id="b2d2" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">这些类型的模块在Node.JS中包含最少的功能。常见的示例有:</p><p id="90e5" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated"><strong class="jr hv"> http </strong>:构建简单的http服务器<br/> <strong class="jr hv">路径</strong>:处理文件路径<br/> <strong class="jr hv"> fs </strong>:处理简单的文件输入/输出操作</p><h2 id="9982" class="ku is hu bd it kv kw kx ix ky kz la jb ka lb lc jf ke ld le jj ki lf lg jn lh bi translated">本地模块</h2><p id="32eb" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">这些是你构建的模块:程序员。</p><p id="3c4f" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated">编写模块是一个很好的实践，因为它促进了代码的整洁，并使代码模块化(你可以在其他项目中重用你的模块而不需要额外的努力)</p><h2 id="3925" class="ku is hu bd it kv kw kx ix ky kz la jb ka lb lc jf ke ld le jj ki lf lg jn lh bi translated">第三方模块</h2><p id="9b5d" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">这些类型的模块是由编程社区构建的。它们大多包含复杂的代码，这样程序员就可以在自己的应用程序中添加功能，而无需自己编写。这样，他也节省了时间。</p><h1 id="a7ea" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo bi translated">我如何使用这些模块？</h1><p id="2836" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">当使用模块时，你只需使用函数<em class="ln"> require() </em></p><pre class="lo lp lq lr fd ls lt lu lv aw lw bi"><span id="bf09" class="ku is hu lt b fi lx ly l lz ma">const myModule = require("moduleName")</span></pre><h2 id="76aa" class="ku is hu bd it kv kw kx ix ky kz la jb ka lb lc jf ke ld le jj ki lf lg jn lh bi translated">示例:</h2><p id="d633" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">让我们以使用<em class="ln"> fs </em>(文件系统模块)读取一个简单的文本文件为例:</p><p id="ce8d" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated">打开记事本，在上面写下任何一段文字，然后保存在任何地方。姑且命名为“<em class="ln"> demofile.txt </em>”。打开代码编辑器，编写这段代码，并将其保存到与。txt文件:</p><pre class="lo lp lq lr fd ls lt lu lv aw lw bi"><span id="a94e" class="ku is hu lt b fi lx ly l lz ma">const fs = require("fs")<br/>fs.readFile("demofile.txt" , {encoding : 'utf-8'} , function(err,data) {<br/>if(err) console.log(err)<br/>console.log(data)<br/>})</span></pre><p id="bccf" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated">现在将它保存为"<em class="ln"> fsExample.js </em>"并在命令行上运行它</p><pre class="lo lp lq lr fd ls lt lu lv aw lw bi"><span id="327f" class="ku is hu lt b fi lx ly l lz ma">node fsExample</span></pre><p id="d1be" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated">(关于通过命令行运行代码的更多细节，我已经写了一个<a class="ae hr" rel="noopener" href="/@hussainarifkl/launching-node-js-scripts-from-command-line-173a1e85a615">指南</a></p><p id="2621" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated">结果，您将看到文本文件的内容被打印出来</p><p id="5a42" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated"><em class="ln"> readFile </em>方法的详细信息:</p><p id="2628" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated"><strong class="jr hv">第一个参数</strong>是您希望读取的文本文件的名称</p><p id="bba4" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated"><strong class="jr hv">第二个参数</strong>是你的<strong class="jr hv">选项:</strong>这里的编码方式是‘utf-8’，这样文本就可以打印出来了。如果你<strong class="jr hv">不</strong>指定选项，它将打印出缓冲值，人类无法读取。</p><p id="fd1e" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated"><strong class="jr hv">第三个参数</strong>是回调函数。<br/>什么是回调函数？在这里了解他们<a class="ae hr" href="https://developer.mozilla.org/en-US/docs/Glossary/Callback_function" rel="noopener ugc nofollow" target="_blank">。<br/>首先，我们检查是否有错误(可能是读取文件时出错或其他原因)。)然后如果它们存在就打印出来，否则如果一切正常就打印出文件的内容。</a></p><p id="81f8" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated"><a class="ae hr" href="https://nodejs.org/api/fs.html#fs_fs_readfile_path_options_callback" rel="noopener ugc nofollow" target="_blank"> fs文档</a></p></div><div class="ab cl kn ko gp kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hb hc hd he hf"><h1 id="3276" class="ir is hu bd it iu mb iw ix iy mc ja jb jc md je jf jg me ji jj jk mf jm jn jo bi translated">使用第三方模块</h1><p id="560c" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">首先通过npm安装一个模块</p><p id="ef96" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated">让我们以安装<em class="ln"> express </em>为例</p><pre class="lo lp lq lr fd ls lt lu lv aw lw bi"><span id="49be" class="ku is hu lt b fi lx ly l lz ma">npm i express</span></pre><p id="c733" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated">然后<em class="ln">要求()</em>像这样:</p><pre class="lo lp lq lr fd ls lt lu lv aw lw bi"><span id="aa05" class="ku is hu lt b fi lx ly l lz ma">const express = require('express')</span></pre><p id="8d1c" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated">注:我已经写了一个NPM的基本指南，见<a class="ae hr" rel="noopener" href="/@hussainarifkl/the-basics-of-npm-a32ee1d79901?sk=5aebd80f871bdc4ca990565e9730dc58">这里</a></p><h1 id="4ba3" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo bi translated">使用本地模块</h1><p id="7c8a" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated">要使用你自己的模块(<strong class="jr hv">本地模块</strong>，你必须先将它<em class="ln">导出</em>。您可以导出<strong class="jr hv">字符串、函数、变量</strong>等。</p><p id="9538" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated">语法如下:</p><pre class="lo lp lq lr fd ls lt lu lv aw lw bi"><span id="597c" class="ku is hu lt b fi lx ly l lz ma">module.exports = &lt;Object to be exported&gt; </span></pre><p id="3640" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated">最简单的例子</p><p id="fa98" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated">创建一个名为'<em class="ln"> message.js' </em>的模块和一个名为'<em class="ln"> app.js' </em>的模块。</p><p id="60af" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated"><em class="ln"> message.js </em></p><pre class="lo lp lq lr fd ls lt lu lv aw lw bi"><span id="e877" class="ku is hu lt b fi lx ly l lz ma"><strong class="lt hv">module.exports </strong>=<strong class="lt hv"> </strong>"Hello World"<em class="ln"> </em></span></pre><p id="2f35" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated"><em class="ln"> app.js </em></p><pre class="lo lp lq lr fd ls lt lu lv aw lw bi"><span id="ccf1" class="ku is hu lt b fi lx ly l lz ma">const message = <strong class="lt hv">require</strong>('./message.js')<br/>console.log(message)</span></pre><p id="469c" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated">在命令行上运行代码<em class="ln"> app.js </em>。因此，“Hello World”将被打印出来。</p><p id="45a1" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated">要导出一个<strong class="jr hv">函数</strong>，代码类似:</p><p id="fbfc" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated"><em class="ln"> message.js </em></p><pre class="lo lp lq lr fd ls lt lu lv aw lw bi"><span id="75d9" class="ku is hu lt b fi lx ly l lz ma"><strong class="lt hv">module.exports</strong> = function() {<br/>console.log("Hello World")<br/>}</span></pre><p id="16c9" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated"><em class="ln"> app.js </em></p><pre class="lo lp lq lr fd ls lt lu lv aw lw bi"><span id="e082" class="ku is hu lt b fi lx ly l lz ma">const message = <strong class="lt hv">require</strong>("./message.js")<br/><strong class="lt hv">message</strong>();</span></pre><h1 id="a7de" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo bi translated">导出对象</h1><p id="c93a" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hb bi translated"><strong class="jr hv"> <em class="ln">导出</em> </strong>是<strong class="jr hv"> <em class="ln">对象。</em> </strong>因此，你可以给它添加属性。<em class="ln">模块<br/>模块</em></p><p id="e8bb" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated"><em class="ln"> message.js </em></p><pre class="lo lp lq lr fd ls lt lu lv aw lw bi"><span id="ccc0" class="ku is hu lt b fi lx ly l lz ma"><strong class="lt hv">module.exports.sayHello</strong> = function() {<br/>console.log('Hello')<br/>}</span><span id="5b53" class="ku is hu lt b fi mg ly l lz ma"><strong class="lt hv">module.exports.sayCustomMessage </strong>= function(message) {<br/>console.log(message)<br/>}<br/><strong class="lt hv">module.exports.myVariable</strong> = 4<br/><strong class="lt hv">module.exports</strong> = {<br/>firstName: 'Hussain' <br/>lastName: 'Arif'<br/>}</span></pre><p id="1089" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated"><em class="ln"> app.js </em></p><pre class="lo lp lq lr fd ls lt lu lv aw lw bi"><span id="39d1" class="ku is hu lt b fi lx ly l lz ma">const message = <strong class="lt hv">require</strong>('./message.js')<br/>message.<em class="ln">sayHello</em>()<br/>message.<em class="ln">sayCustomMessage</em>('Goodbye!');<br/>console.log(message.myVariable)<br/>console.log(message.firstName + ' ' + message.lastName)</span></pre></div><div class="ab cl kn ko gp kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hb hc hd he hf"><p id="ee3a" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated">总之，要使用本地模块:<br/> 1)使用<strong class="jr hv"> module.exports </strong>来导出它<br/> 2)使用<strong class="jr hv"> require() </strong>来使用它的功能。</p><h2 id="68ea" class="ku is hu bd it kv kw kx ix ky kz la jb ka lb lc jf ke ld le jj ki lf lg jn lh bi translated">所需方法可用于导入:</h2><pre class="lo lp lq lr fd ls lt lu lv aw lw bi"><span id="cc15" class="ku is hu lt b fi lx ly l lz ma">const filesystem = <strong class="lt hv">require</strong>('fs') // core module</span><span id="c4dd" class="ku is hu lt b fi mg ly l lz ma">const express = <strong class="lt hv">require</strong>('express') // npm module</span><span id="e4bf" class="ku is hu lt b fi mg ly l lz ma">const server = <strong class="lt hv">require</strong>('./boot/server.js') // server.js file with a relative path down the tree</span><span id="a706" class="ku is hu lt b fi mg ly l lz ma">const server = <strong class="lt hv">require</strong>('../boot/server.js') // server.js file with a relative path up the tree</span><span id="87c0" class="ku is hu lt b fi mg ly l lz ma">const server = <strong class="lt hv">require</strong>('/var/www/app/boot/server.js') // server.js file with an absolute path</span><span id="fb23" class="ku is hu lt b fi mg ly l lz ma">const server = <strong class="lt hv">require</strong>('./boot/server') // file if there's the server.js file</span><span id="98a3" class="ku is hu lt b fi mg ly l lz ma">const routes = <strong class="lt hv">require</strong>('../routes') // index.js inside routes folder if there's no routes.js file</span><span id="f74b" class="ku is hu lt b fi mg ly l lz ma">const databaseConfigs = <strong class="lt hv">require</strong>('./configs/database.json') // JSON file</span></pre><p id="423b" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated"><strong class="jr hv">注意:要求第三方/NPM模块不包括“.”还是“..”在你的参数里。这些模块已经存在于你的项目</strong>的“节点模块”目录中</p></div><div class="ab cl kn ko gp kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hb hc hd he hf"><p id="a6f8" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated">今天到此为止。回头见！</p><p id="2dd8" class="pw-post-body-paragraph jp jq hu jr b js li ju jv jw lj jy jz ka lk kc kd ke ll kg kh ki lm kk kl km hb bi translated">呆在家里，拯救生命。</p></div></div>    
</body>
</html>