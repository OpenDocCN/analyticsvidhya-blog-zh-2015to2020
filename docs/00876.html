<html>
<head>
<title>One-stop Guide to Data Manipulation in SAS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SAS中数据操作的一站式指南</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/one-stop-guide-to-data-manipulation-in-sas-983708a79fd6?source=collection_archive---------7-----------------------#2019-09-15">https://medium.com/analytics-vidhya/one-stop-guide-to-data-manipulation-in-sas-983708a79fd6?source=collection_archive---------7-----------------------#2019-09-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/9af8174fd6f2f2862972f58d7675af92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JOufdOKJR3HpjedYWCyS8Q.png"/></div></div></figure><p id="579a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">SAS是一个软件解决方案的集成系统，使您能够执行以下任务:数据输入、检索和管理；报告写作和图形设计；统计和数学分析；业务预测和决策支持；运筹学和项目管理；应用开发。本文涵盖的主题:</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jo"><img src="../Images/db8969a2e34a1b2b8ae0c30cbae0868d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HGLUvqpCNf4xn82paeu4-g.png"/></div></div></figure><h1 id="9441" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">1.第1部分—数据操作</h1><h1 id="bb3d" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">1.1.过程附加和交错</h1><p id="47e7" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">附加过程将来自一个SAS数据集的观测值添加到另一个SAS数据集的末尾。PROC APPEND不处理第一个数据集中的观察值。它将第二个数据集中的观察值直接添加到原始数据集的末尾。</p><blockquote class="kw kx ky"><p id="28ea" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi">PROC APPEND BASE = BASE-SAS-data-set</em></p><p id="de75" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi"> &lt;数据= SAS-数据集-追加&gt; &lt;强制&gt;；</em></p></blockquote><p id="405f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">交错将单独的、排序的SAS数据集组合成一个排序的SAS数据集。</p><blockquote class="kw kx ky"><p id="02a8" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi"> Proc排序数据= temp1按键；跑步；</em></p><p id="c8f0" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi"> Proc排序数据= temp2按键；跑步；</em></p><p id="9120" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi">数据temp3设置temp1 temp2按键；跑步；</em></p></blockquote><h1 id="3754" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">1.2.过程排序</h1><p id="5574" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">对数据进行排序的原因有很多——在合并数据集之前，或者在另一个过程或数据步骤中使用BY语句之前，为报表组织数据。幸运的是，PROC排序非常简单。这个程序的基本形式是</p><blockquote class="kw kx ky"><p id="527c" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi"> PROC排序；</em></p><p id="fbf6" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi">按变量-1 …变量-n；</em></p></blockquote><p id="54fa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">DATA=和OUT=选项指定输入和输出数据集。如果不指定DATA=选项，那么SAS将使用最近创建的数据集。如果没有指定OUT=选项，那么SAS将用新排序的版本替换原始数据集。NODUPKEY选项告诉SAS消除对BY变量具有相同值的任何重复观测值。</p><p id="59c7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">默认情况下，SAS按照从低到高或从A到z的升序对数据进行排序。要按照从高到低的顺序对数据进行排序，请在By语句中每个应该按照从高到低的顺序排序的变量之前添加关键字DESCENDING。</p><h1 id="a074" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">1.3.合并</h1><p id="cb29" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">您可以在数据步骤中使用merge语句合并数据集。本节中使用的MERGE语句的形式如下:</p><blockquote class="kw kx ky"><p id="ad01" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi">数据temp3</em></p><p id="70ab" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi">合并temp 1(in = a)temp 2(in = b)；</em></p><p id="7f1e" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi">通过变量-列表；</em></p><p id="e878" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi">如果&lt;条件&gt;T21】</em></p></blockquote><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/dd3f45755ad7d5da40ba321323005561.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*db_l_ImC88IXD1J4X2yvUw.png"/></div></div></figure><h1 id="c64c" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">1.4.过程Sql</h1><p id="bae1" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">Proc Sql可以用来做比我们用Data step所能做的更多的事情。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es le"><img src="../Images/ec69fc7aa3aac674593db4f8827d42ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r7ya7saIYvw0HSWRPnDQjQ.png"/></div></div></figure><h1 id="57ff" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">1.5.过程转置</h1><p id="88d0" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">转置程序转置SAS数据集，将观察值变成变量或将变量变成观察值。在大多数情况下，要将观察值转换为变量，可以使用以下语句:</p><blockquote class="kw kx ky"><p id="dd63" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi"> PROC转置数据=旧数据集输出=新数据集；</em></p><p id="0a61" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi">通过变量-列表；</em></p><p id="142f" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi"> ID变量；</em></p><p id="0629" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi"> VAR变量-列表；</em></p></blockquote><p id="1748" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> BY语句:</strong>如果您有任何想要保留为变量的分组变量，您可以使用BY语句。这些变量包含在转置的数据集中，但它们本身并没有转置。</p><p id="bf88" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> ID语句:</strong>ID语句命名其格式化值将成为新变量名的变量。ID值在数据集中只能出现一次；或者如果存在BY语句，那么这些值在BY组中必须是唯一的。</p><p id="f9a5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> VAR语句</strong>VAR语句命名你要转置其值的变量。</p><h1 id="ded6" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">1.6.首先保留语句和。/最后。</h1><p id="6234" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">RETAIN语句使在数据步骤中创建的变量从当前观察到下一次观察都保留其值。在数据步的每次迭代开始时，变量没有设置为missing。RETAIN是声明性语句，不是可执行语句。该语句具有以下形式:</p><blockquote class="kw kx ky"><p id="cd2c" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi">保留变量-1 &lt;。。。可变-n&gt;；</em></p></blockquote><p id="eda3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当您在数据步骤中使用BY语句时，SAS会为BY语句中的每个变量自动创建两个附加变量。一个变量名为FIRST.variable，其中variable是BY变量的名称。另一个变量名为LAST.variable。它们的值要么是1，要么是0。</p><blockquote class="kw kx ky"><p id="86f5" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi">数据温度；设置一些数据；</em></p><p id="faf2" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi">by sorted _ var；</em></p><p id="a7dd" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi"> First_var=first。sorted _ var</em></p><p id="f955" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi">Last _ var =最后。sorted _ var</em></p><p id="7216" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi">运行；</em></p></blockquote><h1 id="27df" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">2.第2部分—数据分析</h1><h1 id="1cd6" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">2.1.过程打印</h1><p id="fbbb" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">PRINT程序可能是应用最广泛的SAS程序。PROC PRINT打印SAS数据集中所有观察值的所有变量。SAS会决定格式化输出的最佳方式，因此您不必担心一页中能容纳多少变量之类的问题。但是PROC PRINT还有一些您可能想要使用的特性。打印过程只需要一条语句:</p><blockquote class="kw kx ky"><p id="0f6b" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi"> PROC打印数据=数据集；</em></p></blockquote><p id="2cf0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">DATA=指定数据集的选项。</p><p id="8d59" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您不想要观察数字，请在PROC PRINT语句中使用NOOBS选项。</p><p id="a713" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您想打印标签而不是变量名，那么也添加标签选项。</p><h1 id="5baa" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">2.2.进程报告</h1><p id="3618" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">报告程序与打印、均值、制表和排序程序以及数据步骤具有相同的功能。由于所有这些功能都集中在一个程序中，所以PROC报告可能很复杂也就不足为奇了。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lf"><img src="../Images/64b3b45b85d9f4fa500e3445403f6255.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QPbPqJQkMMCpPi7jzlOwoQ.png"/></div></div></figure><h1 id="7b99" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">2.3.过程频率</h1><p id="94d0" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">当你有一个变量的计数，他们被称为单向频率。当您组合两个或更多变量时，计数被称为双向、三向等等，直到n向频率/或简单的交叉列表。使用PROC FREQ最明显的原因是创建显示分类数据值分布的表格。</p><p id="f6f0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要生成单向频率表，只需列出变量名。该语句生成一个频率表，列出变量中每个值的观察次数。</p><blockquote class="kw kx ky"><p id="b490" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi">PROC FREQ；</em></p><p id="40a6" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi">表变；</em></p></blockquote><p id="7f15" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要制作交叉列表，请列出用星号分隔的变量。该语句生成一个交叉表，显示变量1和变量2的每个组合的观察值数量。</p><blockquote class="kw kx ky"><p id="7f92" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi">徐健FREQ；</em></p><p id="5cd7" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi">表格variable1 * variable2</em></p></blockquote><h1 id="63f9" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">2.4.过程方法</h1><p id="03b3" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">平均值、标准偏差、最小值和最大值等统计数据可以让您对数据有所了解。MEANS过程提供数字变量的简单统计。MEANS过程以关键字PROC MEANS开始，后面是列出要打印的统计数据的选项:</p><blockquote class="kw kx ky"><p id="1ef5" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi"> PROC表示期权；</em></p><p id="26dd" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi"> VAR变量-列表；</em></p></blockquote><p id="6d96" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果不包含任何统计关键字，则MEANS将生成每个数值变量的平均值、非缺失值的数量、标准差、最小值和最大值。下表显示了您可以请求的统计数据</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lg"><img src="../Images/dd81b4de2f20cda6b9f1c586ce48a4a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1LwholzVFRuZx5LqYPUGMA.png"/></div></div></figure><h1 id="ff46" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">2.5.过程单变量</h1><p id="c9ac" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">PROC UNIVARIATE是Base SAS软件的一部分，它生成描述单个变量分布的统计数据。这些统计数据包括平均值、中值、众数、标准差、偏斜度和峰度。如果没有VAR语句，SAS将计算数据集中所有数值变量的统计数据。</p><blockquote class="kw kx ky"><p id="1f8d" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi"> PROC单变量；</em></p><p id="eb9d" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi"> VAR变量-列表；</em></p></blockquote><p id="b5ab" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你用PROC单变量产生的大多数描述性统计数据也可以用PROC均值产生，但是你必须要求它们。当您知道需要所有的汇总统计数据时，单变量是有用的:均值、方差、偏斜度、分位数、极值、t检验等。默认情况下，单变量打印出所有这些内容。但是如果你知道你只想要其中的一些数据，那么MEANS是一个更好的方法。</p><h1 id="9368" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">2.6.ODS选项</h1><p id="36e6" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">ODS TRACE语句告诉SAS在SAS日志中打印关于输出对象的信息。有两个ODS跟踪语句:一个打开跟踪，一个关闭跟踪。有时，您可能希望将程序的结果放入SAS数据集中。使用ODS，您可以将程序输出的几乎任何部分保存为SAS数据集，方法是将其发送到输出目的地。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/e648db16c3a1d7e91155374b5e920a60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DZ1-e-dF8DU9aejoT48DbQ.png"/></div></div></figure><h1 id="adfc" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">3.第3部分—高级服务协议</h1><h1 id="ce48" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">3.1.条形图</h1><p id="e0cc" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">PROC CHART步骤中的VBAR语句生成垂直条形图。PROC CHART步骤中的HBAR语句生成水平条形图</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es li"><img src="../Images/890e79e43827f5c9f943b99fd0faca3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ttIo83PlKRW76Q0f5cHZqQ.png"/></div></div></figure><h1 id="88a3" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">3.2.宏变量</h1><p id="480d" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">宏变量的名称以&amp;号为前缀，而宏的名称以百分号(%)为前缀。宏变量类似于标准数据变量，只是它只有一个值，不属于数据集，并且它的值总是字符。这个值可以是一个变量名，一个数字，或者任何你想代入你的程序的文本。</p><p id="9733" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">给宏变量赋值最简单的方法是使用%LET语句。</p><blockquote class="kw kx ky"><p id="78c3" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi"> %LET宏变量名称=值；</em></p></blockquote><p id="37f2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要使用宏变量，只需添加&amp;前缀，并将宏变量名放在需要替换其值的地方。</p><blockquote class="kw kx ky"><p id="1645" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi"> B = &amp;迭代次数；</em></p></blockquote><p id="b910" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">多级和分辨率</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lj"><img src="../Images/12f00f23f61443f7d4341c2cfb74e637.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wvKDMjL262m8QqrTq8CiTQ.png"/></div></div></figure><p id="fa76" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用宏变量</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/3199cdda12e0d13d9c7a79049651a211.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i28wdIW96Jsc1oIRYeoImg.png"/></div></div></figure><h1 id="2b4b" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">3.3.宏功能</h1><p id="8e72" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">如果您反复编写相同或相似的SAS语句，您应该考虑使用宏。宏允许您打包一段无错误的代码，并在单个SAS程序或多个SAS程序中重复使用。你可以把宏想象成一种三明治。%MACRO和%MEND语句就像两片面包。在这些切片之间，您可以放置任何您想要的语句。宏的一般形式是</p><blockquote class="kw kx ky"><p id="c0e3" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi"> %MACRO宏名；</em></p><p id="bcb7" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi">宏文本</em></p><p id="a730" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi"> %MEND宏名；</em></p></blockquote><p id="50f3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">参数是宏变量，其值是在调用宏时设置的。最简单的宏没有参数。要给宏添加参数，只需在%MACRO语句的括号中列出宏变量名。下面是参数列表的一种可能形式。</p><blockquote class="kw kx ky"><p id="6035" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi"> %MACRO宏名(参数-1，参数-2，.。。参数-n)；</em></p><p id="0f57" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi">宏文本</em></p><p id="e704" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi"> %MEND宏名；</em></p></blockquote><p id="e975" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以使用以下语句调用宏:</p><blockquote class="kw kx ky"><p id="e035" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated"><em class="hi"> %宏名(var-1，var-2，.。。var-n)；</em></p></blockquote></div></div>    
</body>
</html>