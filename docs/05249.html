<html>
<head>
<title>Deploy a flask app on Amazon AWS EC2 and keep it running while you are offline.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Amazon AWS EC2上部署flask应用程序，并在离线时保持其运行。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/deploy-a-flask-app-on-amazon-aws-ec2-and-keep-it-running-while-you-are-offline-38d22571e2c5?source=collection_archive---------4-----------------------#2020-04-15">https://medium.com/analytics-vidhya/deploy-a-flask-app-on-amazon-aws-ec2-and-keep-it-running-while-you-are-offline-38d22571e2c5?source=collection_archive---------4-----------------------#2020-04-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/3a115aec40964fc71e05a108815c1f30.png" data-original-src="https://miro.medium.com/v2/resize:fit:532/format:webp/1*0HehgH9AdFMpqheXa5Juzg.png"/></div></figure><p id="8831" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> Flask: </strong> <br/> Flask是python中的一个微web框架。它旨在快速轻松地开始使用，并能够扩展到复杂的应用程序。部署起来很容易。py在网上。</p><p id="d291" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">亚马逊网络服务EC2: <br/> </strong>你可以在上面谷歌一下。简而言之——它为你提供了一台远离的电脑，随时运行并与互联网连接。根据您需要的计算，您可以从不同的规格中选择机器。基本的机器是免费的，复杂的规格是要付费的。</p><p id="9e84" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们开始吧-</p><p id="8fd3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">第一步:在</strong><a class="ae jk" href="https://aws.amazon.com/" rel="noopener ugc nofollow" target="_blank"><strong class="io hj">AWS</strong></a><strong class="io hj"><br/></strong>上创建一个帐户开始时，你需要一张信用卡。但是免费实例(我们将会使用)不会向您收费。</p><p id="0cf0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">第2步:导航到AWS管理控制台，服务，然后单击计算服务中的EC2。</strong></p><figure class="jm jn jo jp fd ij er es paragraph-image"><div class="er es jl"><img src="../Images/7ed30e34fc9505cfc01152e43c0bb72b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*V5TPJYnp9cEJ01OuQ3jZyA.png"/></div></figure><p id="3e73" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">步骤3:导航至侧栏上的实例，然后单击启动实例。</strong></p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jq"><img src="../Images/e3860b08bc874aa2910f6fbe3d290d43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S25DgBk4hK0JKAYmD1uAyA.png"/></div></div></figure><p id="4373" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">根据要求选择所需机器。我选择的是Ubuntu 18.04 LTS服务器。</strong></p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jv"><img src="../Images/2553caea586cd86b0c0315f80cdcace3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oO0vXzJmElO7VIVM6286PA.png"/></div></div></figure><p id="2fb2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">第四步:选择TF2.micro类型实例并点击右下角的‘查看并启动按钮’。</strong></p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jw"><img src="../Images/6bd9c379d1e18a9b052f66857a29b146.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GrGCRVSVO3jF6FRcra1VPw.png"/></div></div></figure><p id="79b3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">第五步:你可以在这里查看你的系统配置。上一步，点击右下角的启动。</p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jx"><img src="../Images/5920f3a69d89ba60c9e4769b1590c1e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bULNS6_YVUlDhYy0vwbUkA.png"/></div></div></figure><p id="3687" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">步骤6:选择“创建新的密钥对”选项，并提供您选择的“密钥对名称”。<br/> (1)下载密钥对</strong>(不要丢失，在访问机器时会有用)。<br/> <strong class="io hj"> (2)下载后，点击‘启动实例’。<br/> (3)点击下一页的“查看实例”。</strong></p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jy"><img src="../Images/7887a6400b7afa0fe74f041a7a2e5340.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zo2xzBXJziqZB0fyAZ57ZA.png"/></div></div></figure><p id="5a5a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">第七步:等待实例初始化。</p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jz"><img src="../Images/e7dec1ffa16126c14cebd9e847fad7a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l8feZiJx4Y2v8p7QChviOw.png"/></div></div></figure><figure class="jm jn jo jp fd ij er es paragraph-image"><div class="er es ka"><img src="../Images/431704f6d8323687fd84bc15c3fa6d8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:2/format:webp/1*tak3u6HS9tIdRp9LaBNj1Q.png"/></div></figure><p id="7234" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您可以根据自己的选择为实例命名。</p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kb"><img src="../Images/488724bdc48deca2fda3a6da1a7b79ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Ql920TiHK_JL-szhZsZEQ.png"/></div></div></figure><p id="2ccc" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">第八步:复制IPv4公有IP地址。</strong></p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kc"><img src="../Images/cb96ffe7f3c5abd3b5d6e5a8e04d6c31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3tfJ2vAXu42fU1Lo9fH8bA.png"/></div></div></figure><p id="d376" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">第9步:现在我们需要在本地pc上进行ssh。<br/> 1。为此，首先我们需要打开终端并导航到下载的密钥对文件所在的目录。pem文件)<br/> <strong class="io hj"> 2。</strong>现在使用下面的命令赋予密钥对文件只读权限:<code class="du kd ke kf kg b"><strong class="io hj">chmod 400 &lt;your-pem-file-name&gt;.pem</strong></code>(它将为文件提供<a class="ae jk" href="https://chmodcommand.com/chmod-400/" rel="noopener ugc nofollow" target="_blank">只读</a>权限)<br/> <strong class="io hj"> 3 .</strong>并使用复制的公钥，SSH进入AWS实例使用此命令:<br/> <code class="du kd ke kf kg b"><strong class="io hj">ssh -i &lt;your-pem-file-name&gt;.pem &lt;your-machine-type&gt;@&lt;your-public-ip&gt;</strong></code></p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kh"><img src="../Images/f0c053c69b1197215d87b996f344efbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hUMLj9A6FKTpZZv5OiZrrA.png"/></div></div></figure><p id="2409" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">第十步:</strong>更新系统:<code class="du kd ke kf kg b"><strong class="io hj">sudo apt-get update</strong></code> <strong class="io hj"> <br/> </strong>检查是否有python3: <code class="du kd ke kf kg b"><strong class="io hj">python3 -V</strong></code> <strong class="io hj"> </strong>(如果不存在——那么安装)<br/>检查是否有pip3/ install使用:<code class="du kd ke kf kg b"><strong class="io hj">sudo apt install python3-pip</strong></code> <strong class="io hj"> <br/> </strong>安装Flask使用:<code class="du kd ke kf kg b"><strong class="io hj">pip3 install flask</strong></code> <strong class="io hj"> <br/> </strong>同时安装你的flask app的其他依赖项。</p><p id="e712" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">步骤11: </strong>安装完依赖项后，创建一个名为<strong class="io hj"> server.py </strong>的文件，添加你的flask app的内容。这里我使用的只是一个简单的应用程序，内容如下。<br/><strong class="io hj">*检查主机和端口号</strong></p><p id="a600" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><code class="du kd ke kf kg b">from flask import Flask<br/>app = Flask(__name__)</code></p><p id="5ca9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><code class="du kd ke kf kg b">@app.route('/')<br/>def hello_world():<br/> return 'Hello, World!'</code></p><p id="b5f4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><code class="du kd ke kf kg b">if __name__ == "__main__":<br/> app.run(host="0.0.0.0", port=80)</code></p><p id="52db" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">步骤12:对于您的Flask应用程序实例，在“描述”选项卡的“安全组”选项中单击“启动向导”。</strong></p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es ki"><img src="../Images/2f1590f052d70791a78f83e8f93b3c8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dX1W1QjY2JWo6BRdt1P6gA.png"/></div></div></figure><p id="b5b3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">第13步:点击“入站规则”→“编辑入站规则”<br/> </strong>添加一个新规则(使用“添加规则”按钮)，其类型为<strong class="io hj"> HTTP </strong>，端口为<strong class="io hj"> 80 </strong>，主机为<strong class="io hj"> 0.0.0.0/0 </strong>和<strong class="io hj"> ::/0 </strong></p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kj"><img src="../Images/eeba305f737f0dfbf3e0f2998f93f252.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IDcLsRoSy-GeUf4Xq0dK7g.png"/></div></div></figure><p id="1218" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">步骤14:这是运行Flask应用程序的重要步骤。<br/> </strong>从终端，您可以使用命令运行flask应用程序:<br/> <code class="du kd ke kf kg b"><strong class="io hj">sudo python3 server.py</strong></code>(确保您通过ssh连接到实例)<strong class="io hj"> <br/> </strong>但是如果我们关闭终端，或者从ssh退出到实例，该命令将自动终止。<br/>为了继续运行应用程序(这样当应用程序继续运行时，您可以关闭您的笔记本电脑，享受一些乐趣)，我们将使用强大的linux命令:<strong class="io hj"> nohup </strong>(不挂起)。<strong class="io hj"> <br/> </strong>因此，为了运行python应用程序，我们将使用命令:<br/> <strong class="io hj"> </strong> <code class="du kd ke kf kg b"><strong class="io hj">nohup python3 server.py &amp;</strong></code> ( &amp;允许我们在后台运行应用程序，nohup允许应用程序即使在挂机/注销时也能继续运行)</p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kk"><img src="../Images/dc16f6b0e98f6cbc668e5df34c8d7d62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*riklMGs43C09s8G53BzWfQ.png"/></div></div></figure><p id="ce45" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们可以在nohup命令后看到“进程id”:正在运行的进程的21108。<br/>我们可以使用<code class="du kd ke kf kg b"><strong class="io hj">pgrep &lt;process-type&gt;</strong></code> <strong class="io hj"> </strong>命令来检查“流程型”的流程运行情况。现在我们可以从终端/系统注销，但是我们的进程将会运行。要检查进程运行情况，请在浏览器中粘贴实例的IPv4公共IP地址。在我们的情况下其:<strong class="io hj">35.154.90.20</strong></p><figure class="jm jn jo jp fd ij er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kl"><img src="../Images/2d01145d8e9c7312a1056d70026ee30b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9yF98ltvXf2cxAr0ZW-PZw.png"/></div></div></figure><p id="7b63" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们到了！活下去！</p><p id="ba83" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，如果我们希望终止该进程，我们可以使用命令:<code class="du kd ke kf kg b"><strong class="io hj">sudo kill &lt;process-id&gt;</strong></code>。所以要杀死这个进程我们可以使用命令:<code class="du kd ke kf kg b"><strong class="io hj">sudo kill 21108</strong></code>。(确保您在实例中被ssh'ed)</p><p id="3eb2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">请在评论中留下建议和反馈。如果你有任何疑问，给我发邮件:<strong class="io hj">bhatia.ankur24@gmail.com</strong></p></div></div>    
</body>
</html>