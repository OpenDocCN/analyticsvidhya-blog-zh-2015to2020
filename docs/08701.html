<html>
<head>
<title>How to create a Twitter Bot using Node.js and Heroku</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用 Node.js 和 Heroku 创建一个 Twitter Bot</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-create-a-twitter-bot-using-node-js-and-heroku-867891f44811?source=collection_archive---------13-----------------------#2020-08-09">https://medium.com/analytics-vidhya/how-to-create-a-twitter-bot-using-node-js-and-heroku-867891f44811?source=collection_archive---------13-----------------------#2020-08-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/a23176f8f0977475de00d60403a3d1c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L82ppJxmyWTsWm1Swleyyw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">使用 Node.js 和 Heroku 的 Twitter bot</figcaption></figure><p id="a573" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi js translated"><span class="l jt ju jv bm jw jx jy jz ka di"> M </span>制作 twitter 机器人是使用 Twitter API 的众多用例之一。机器人可以用来增强你的业务，通过自动回复帮助客户，自动转发特定的条款，等等。</p><p id="f969" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这篇文章是关于我如何使用 Node.js 创建<code class="du kb kc kd ke b"><a class="ae kf" href="https://twitter.com/datasciencebot_" rel="noopener ugc nofollow" target="_blank">The Data Science Bot</a></code>的。</p></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><h1 id="f22e" class="kn ko hi bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">目录</h1><ol class=""><li id="d0e8" class="ll lm hi iw b ix ln jb lo jf lp jj lq jn lr jr ls lt lu lv bi translated">申请一个 Twitter 开发者账户</li><li id="cc8d" class="ll lm hi iw b ix lw jb lx jf ly jj lz jn ma jr ls lt lu lv bi translated">在 twitter 上创建应用程序</li><li id="84f5" class="ll lm hi iw b ix lw jb lx jf ly jj lz jn ma jr ls lt lu lv bi translated">设置开发环境</li><li id="9b9e" class="ll lm hi iw b ix lw jb lx jf ly jj lz jn ma jr ls lt lu lv bi translated">在 Node.js 中编写代码</li><li id="317a" class="ll lm hi iw b ix lw jb lx jf ly jj lz jn ma jr ls lt lu lv bi translated">部署到 Heroku</li><li id="43df" class="ll lm hi iw b ix lw jb lx jf ly jj lz jn ma jr ls lt lu lv bi translated">避免重复转发</li></ol><figure class="mc md me mf fd ij er es paragraph-image"><div class="er es mb"><img src="../Images/414fa2bc85a098076695c4d35a6860da.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/1*PZLPS-m1_iGNudZPyfhewA.gif"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">没有再费周折</figcaption></figure><h1 id="95cc" class="kn ko hi bd kp kq mg ks kt ku mh kw kx ky mi la lb lc mj le lf lg mk li lj lk bi translated">第一步:申请 Twitter 开发者账户</h1><p id="121b" class="pw-post-body-paragraph iu iv hi iw b ix ln iz ja jb lo jd je jf ml jh ji jj mm jl jm jn mn jp jq jr hb bi translated">对我来说，这是最重要的一步，也可能是最困难的一步。</p><ul class=""><li id="8b1b" class="ll lm hi iw b ix iy jb jc jf mo jj mp jn mq jr mr lt lu lv bi translated">登录<a class="ae kf" href="https://twitter.com" rel="noopener ugc nofollow" target="_blank">推特</a></li><li id="3869" class="ll lm hi iw b ix lw jb lx jf ly jj lz jn ma jr mr lt lu lv bi translated">前往 developers.twitter.com<a class="ae kf" href="https://developer.twitter.com/en/apply-for-access" rel="noopener ugc nofollow" target="_blank">点击“申请开发者账户”</a></li><li id="59bc" class="ll lm hi iw b ix lw jb lx jf ly jj lz jn ma jr mr lt lu lv bi translated">选择应用类型，即学生/企业/业余爱好者等。</li><li id="2393" class="ll lm hi iw b ix lw jb lx jf ly jj lz jn ma jr mr lt lu lv bi translated">提及你申请的目的。在这里尽可能具体一些。</li></ul><h2 id="2b5d" class="ms ko hi bd kp mt mu mv kt mw mx my kx jf mz na lb jj nb nc lf jn nd ne lj nf bi translated">在申请之前，请确保您已经通读了<a class="ae kf" href="https://developer.twitter.com/en/developer-terms/agreement-and-policy" rel="noopener ugc nofollow" target="_blank">开发者协议和政策</a>、<a class="ae kf" href="https://help.twitter.com/en/rules-and-policies/twitter-automation" rel="noopener ugc nofollow" target="_blank">自动化规则</a>和<a class="ae kf" href="https://help.twitter.com/en/rules-and-policies/twitter-rules" rel="noopener ugc nofollow" target="_blank">Twitter 规则</a></h2><blockquote class="ng"><p id="50c9" class="nh ni hi bd nj nk nl nm nn no np jr dx translated">不符合这些条件将导致你的申请被拒绝</p></blockquote><p id="240b" class="pw-post-body-paragraph iu iv hi iw b ix nq iz ja jb nr jd je jf ns jh ji jj nt jl jm jn nu jp jq jr hb bi translated"><strong class="iw hj">阅读关于<a class="ae kf" rel="noopener" href="/@sumedh.patkar19/beginners-guide-how-to-apply-for-a-twitter-developer-account-763cda3af109">如何申请 twitter 开发者账户</a>的完整文章</strong></p></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><h1 id="c0c2" class="kn ko hi bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">第二步:在 twitter 上创建应用</h1><p id="9c71" class="pw-post-body-paragraph iu iv hi iw b ix ln iz ja jb lo jd je jf ml jh ji jj mm jl jm jn mn jp jq jr hb bi translated">在您的 twitter 开发者账户获得批准后<em class="nv">执行此操作。</em></p><ul class=""><li id="253c" class="ll lm hi iw b ix iy jb jc jf mo jj mp jn mq jr mr lt lu lv bi translated">在 apps.twitter.com 创建一个应用程序。填写所需的详细信息。</li><li id="fe64" class="ll lm hi iw b ix lw jb lx jf ly jj lz jn ma jr mr lt lu lv bi translated">生成 API 密钥。点击您的应用详情并导航至<code class="du kb kc kd ke b">Keys and tokens</code></li></ul><figure class="mc md me mf fd ij er es paragraph-image"><div class="er es nw"><img src="../Images/55e4e6b76f38c05d0c7ff18631628af2.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/format:webp/1*tjvsByYzAcRv03sZ15T79g.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">导航到“密钥和令牌”并单击“生成”</figcaption></figure><blockquote class="ng"><p id="5ceb" class="nh ni hi bd nj nk nx ny nz oa ob jr dx translated"><em class="oc"> ⚠️ </em> <strong class="ak"> <em class="oc">警告</em> </strong> <em class="oc">(任何情况下都不要泄露 API 密钥)。</em></p></blockquote><h1 id="7e24" class="kn ko hi bd kp kq mg ks kt ku mh kw kx ky od la lb lc oe le lf lg of li lj lk bi translated">步骤 3:设置开发环境</h1><p id="4a4a" class="pw-post-body-paragraph iu iv hi iw b ix ln iz ja jb lo jd je jf ml jh ji jj mm jl jm jn mn jp jq jr hb bi translated">确保您的 PC 上安装了 Node.js 和 npm。</p><p id="df81" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">对于 Ubuntu，使用以下命令安装</p><pre class="mc md me mf fd og ke oh oi aw oj bi"><span id="2d99" class="ms ko hi ke b fi ok ol l om on">sudo apt install nodejs<br/>sudo apt install npm</span></pre><p id="3929" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">对于其他发行版，点击<a class="ae kf" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">此处</a>获取安装说明。</p><p id="16b3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">创建一个名为<code class="du kb kc kd ke b">your-botname</code>的目录。<br/>在我的例子中，我把它命名为<code class="du kb kc kd ke b">the-datascience-bot</code>。</p><p id="8bf3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">要初始化 git 环境并使用<code class="du kb kc kd ke b">npm</code>安装包<code class="du kb kc kd ke b">twit</code>，请在<code class="du kb kc kd ke b">your-botname</code>目录的中输入以下命令<em class="nv">:</em></p><figure class="mc md me mf fd ij er es paragraph-image"><div class="er es oo"><img src="../Images/6c73d97169826df6d25966d042763d96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*jBDX6TNtb4c2X8nqKTsonA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">设置开发环境</figcaption></figure><p id="c086" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">恭喜你！您已经成功地设置了 Node.js 开发环境🎉🎉</p><h1 id="21ba" class="kn ko hi bd kp kq mg ks kt ku mh kw kx ky mi la lb lc mj le lf lg mk li lj lk bi translated">第四步:编码</h1><ul class=""><li id="14ec" class="ll lm hi iw b ix ln jb lo jf lp jj lq jn lr jr mr lt lu lv bi translated">首先我们要认证<code class="du kb kc kd ke b">twit</code>。为此，我们将使用生成的<em class="nv"> API 键</em>链接我们的 twitter 应用和代码。</li></ul><p id="861b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">创建一个名为<code class="du kb kc kd ke b">config.js</code>的文件，并将下面的代码放入其中。</p><p id="f611" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> config.js </strong></p><figure class="mc md me mf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es op"><img src="../Images/ed79bd1df05e05dc48dc30d5702f1415.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mNRCinWgQC04trnGQvHAKQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">配置文件</figcaption></figure><p id="ffe1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">把你的钥匙从你的 twitter 应用仪表板上复制下来。</p><ul class=""><li id="2fd4" class="ll lm hi iw b ix iy jb jc jf mo jj mp jn mq jr mr lt lu lv bi translated">接下来，我们在文件<code class="du kb kc kd ke b">bot.js</code>中编写机器人的代码。</li></ul><p id="63cb" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是代码。</p><p id="b221" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> bot.js </strong></p><figure class="mc md me mf fd ij"><div class="bz dy l di"><div class="oq or l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">bot.js</figcaption></figure><p id="93c1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们来分解一下。</p><ul class=""><li id="26b5" class="ll lm hi iw b ix iy jb jc jf mo jj mp jn mq jr mr lt lu lv bi translated">我们使用来自<code class="du kb kc kd ke b">config.js</code>的配置细节初始化 twit 对象</li><li id="0ea9" class="ll lm hi iw b ix lw jb lx jf ly jj lz jn ma jr mr lt lu lv bi translated">retweet 函数首先为给定的搜索查询调用<code class="du kb kc kd ke b">search/tweets</code> API 端点。在我的例子中，查询是<strong class="iw hj"> <em class="nv"> '#DataScience 或#DataVisualization' </em> </strong></li><li id="718c" class="ll lm hi iw b ix lw jb lx jf ly jj lz jn ma jr mr lt lu lv bi translated">我们将以下参数传递给搜索 API</li></ul><ol class=""><li id="46cc" class="ll lm hi iw b ix iy jb jc jf mo jj mp jn mq jr ls lt lu lv bi translated"><code class="du kb kc kd ke b">q</code>:搜索查询</li><li id="2550" class="ll lm hi iw b ix lw jb lx jf ly jj lz jn ma jr ls lt lu lv bi translated"><code class="du kb kc kd ke b">result_type</code>:<em class="nv">‘混合’</em>最新的以及流行的旧推文</li><li id="1341" class="ll lm hi iw b ix lw jb lx jf ly jj lz jn ma jr ls lt lu lv bi translated"><code class="du kb kc kd ke b">count</code>:一次检索的推文数量</li></ol><ul class=""><li id="bdd6" class="ll lm hi iw b ix iy jb jc jf mo jj mp jn mq jr mr lt lu lv bi translated">检索到的<a class="ae kf" href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON" rel="noopener ugc nofollow" target="_blank"> JSON </a>对象有一个包含#DataScience 或#DataVisualization 的 tweets 列表。</li><li id="d0c4" class="ll lm hi iw b ix lw jb lx jf ly jj lz jn ma jr mr lt lu lv bi translated">然后，我们将每个 tweet IDs 传递给<code class="du kb kc kd ke b">statuses/retweet/:id</code> API 端点，后者转发该 tweet。</li><li id="1027" class="ll lm hi iw b ix lw jb lx jf ly jj lz jn ma jr mr lt lu lv bi translated">使用<code class="du kb kc kd ke b">setInterval</code>功能每分钟运行一次功能</li></ul><blockquote class="os ot ou"><p id="fa37" class="iu iv nv iw b ix iy iz ja jb jc jd je ov jg jh ji ow jk jl jm ox jo jp jq jr hb bi translated"><em class="hi">详细的 API 参考指南为</em> <a class="ae kf" href="https://developer.twitter.com/en/docs/tweets/search/api-reference/get-search-tweets" rel="noopener ugc nofollow" target="_blank"> <em class="hi">搜索</em> </a> <em class="hi">和</em> <a class="ae kf" href="https://developer.twitter.com/en/docs/tweets/post-and-engage/api-reference/post-statuses-retweet-id" rel="noopener ugc nofollow" target="_blank"> <em class="hi">转发</em> </a> <em class="hi">。</em></p></blockquote><p id="33e3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">使用以下命令在本地测试 bot:</p><pre class="mc md me mf fd og ke oh oi aw oj bi"><span id="ce0e" class="ms ko hi ke b fi ok ol l om on">node bot.js</span></pre><p id="6c19" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">你的推特时间表应该显示转发。</p><p id="7f76" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果不工作，尝试在控制台上调试。</p><h1 id="a37e" class="kn ko hi bd kp kq mg ks kt ku mh kw kx ky mi la lb lc mj le lf lg mk li lj lk bi translated">步骤 5:部署到 Heroku</h1><ul class=""><li id="535a" class="ll lm hi iw b ix ln jb lo jf lp jj lq jn lr jr mr lt lu lv bi translated">在<a class="ae kf" href="https://www.heroku.com/" rel="noopener ugc nofollow" target="_blank"> Heroku </a>上创建一个账户</li><li id="daa8" class="ll lm hi iw b ix lw jb lx jf ly jj lz jn ma jr mr lt lu lv bi translated">在 Heroku 上创建一个名为“你的机器人名”的应用程序</li></ul><figure class="mc md me mf fd ij er es paragraph-image"><div class="er es oy"><img src="../Images/fcb85b08d37b0e64c76c9128490d5558.png" data-original-src="https://miro.medium.com/v2/resize:fit:422/format:webp/1*rFRk-srbgcilzSAsjGtTCg.png"/></div></figure><figure class="mc md me mf fd ij er es paragraph-image"><div class="er es oz"><img src="../Images/5d8ab55f5de375075af1ec3bbc5dbc07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WmprPMgm4MtHOTa0fex_NQ.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">在 Heroku 上创建新的应用程序</figcaption></figure><blockquote class="os ot ou"><p id="f7df" class="iu iv nv iw b ix iy iz ja jb jc jd je ov jg jh ji ow jk jl jm ox jo jp jq jr hb bi translated"><em class="hi">确保您的本地项目目录的名称</em> <strong class="iw hj"> <em class="hi">与您的 Heroku 项目名称</em> </strong> <em class="hi">完全相同。</em></p></blockquote><ul class=""><li id="3aab" class="ll lm hi iw b ix iy jb jc jf mo jj mp jn mq jr mr lt lu lv bi translated">在你的电脑上安装<strong class="iw hj"> heroku-cli </strong></li></ul><p id="4b5a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果你有一个基于 Ubuntu/Debian 的发行版，那么使用下面的命令来安装</p><pre class="mc md me mf fd og ke oh oi aw oj bi"><span id="a69b" class="ms ko hi ke b fi ok ol l om on">curl https://cli-assets.heroku.com/install-ubuntu.sh | sh</span></pre><p id="f390" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">对于其他环境，安装说明可在处找到<a class="ae kf" href="https://devcenter.heroku.com/articles/heroku-cli" rel="noopener ugc nofollow" target="_blank"/></p><ul class=""><li id="4c12" class="ll lm hi iw b ix iy jb jc jf mo jj mp jn mq jr mr lt lu lv bi translated">创建一个名为“Procfile”的文件，其代码如下</li></ul><h2 id="befa" class="ms ko hi bd kp mt mu mv kt mw mx my kx jf mz na lb jj nb nc lf jn nd ne lj nf bi translated">Procfile</h2><pre class="mc md me mf fd og ke oh oi aw oj bi"><span id="f38e" class="ms ko hi ke b fi ok ol l om on">worker: node bot.js</span></pre><ul class=""><li id="ab7b" class="ll lm hi iw b ix iy jb jc jf mo jj mp jn mq jr mr lt lu lv bi translated">登录 heroku CLI</li></ul><pre class="mc md me mf fd og ke oh oi aw oj bi"><span id="979a" class="ms ko hi ke b fi ok ol l om on">$ heroku login</span></pre><p id="b4b0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这将在 Heroku 上打开一个登录链接，你必须输入你的密码。</p><ul class=""><li id="9bb9" class="ll lm hi iw b ix iy jb jc jf mo jj mp jn mq jr mr lt lu lv bi translated">使用以下命令部署到 Heroku</li></ul><figure class="mc md me mf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es pa"><img src="../Images/54f305a6b92f1d8e19e915c1b8b81c61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ixkz-acDXMHXo5F5ljprHw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">部署到 Heroku</figcaption></figure><h2 id="d3f0" class="ms ko hi bd kp mt mu mv kt mw mx my kx jf mz na lb jj nb nc lf jn nd ne lj nf bi translated">最后一步</h2><p id="edac" class="pw-post-body-paragraph iu iv hi iw b ix ln iz ja jb lo jd je jf ml jh ji jj mm jl jm jn mn jp jq jr hb bi translated">启动<em class="nv"/><code class="du kb kc kd ke b"><em class="nv">worker</em></code><em class="nv">dyno</em>on<em class="nv"/>Heroku。</p><ul class=""><li id="8693" class="ll lm hi iw b ix iy jb jc jf mo jj mp jn mq jr mr lt lu lv bi translated">去<a class="ae kf" href="https://dashboard.heroku.com/apps" rel="noopener ugc nofollow" target="_blank">dashboard.heroku.com/apps</a>点击你的机器人应用。</li><li id="549c" class="ll lm hi iw b ix lw jb lx jf ly jj lz jn ma jr mr lt lu lv bi translated">然后，点击配置 Dynos</li></ul><figure class="mc md me mf fd ij er es paragraph-image"><div class="er es pb"><img src="../Images/08d2e6de6e83d7f57917577251442679.png" data-original-src="https://miro.medium.com/v2/resize:fit:1292/format:webp/1*h23wge7b0vdPOPO6FVCXWw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">配置工作动态</figcaption></figure><ul class=""><li id="2999" class="ll lm hi iw b ix iy jb jc jf mo jj mp jn mq jr mr lt lu lv bi translated">启动<code class="du kb kc kd ke b">worker</code> dyno 并点击确认</li></ul><figure class="mc md me mf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es pc"><img src="../Images/04e9657edcbfbd7f4c13745b7ceb5133.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/1*zczSdUODSy-7lp7sBStsVw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">启动工作动力</figcaption></figure><h1 id="b042" class="kn ko hi bd kp kq mg ks kt ku mh kw kx ky mi la lb lc mj le lf lg mk li lj lk bi translated">你的机器人准备好了！🎉🎉</h1><figure class="mc md me mf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es pd"><img src="../Images/781cb468644303fd08e4ebfcde0cf0e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*m21kQVrB13GjNORZ3fOeAg.gif"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">准备服从！</figcaption></figure></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><h1 id="e2d9" class="kn ko hi bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">第六步:如何避免重复转发</h1><p id="0455" class="pw-post-body-paragraph iu iv hi iw b ix ln iz ja jb lo jd je jf ml jh ji jj mm jl jm jn mn jp jq jr hb bi translated">在我们编写<br/> <code class="du kb kc kd ke b">//more code here later..</code>的 for 循环中添加以下代码</p><figure class="mc md me mf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es pe"><img src="../Images/6cffe1bd66e0205e07006b9631885f04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o86UaSnnVvNGy_eBmFGJyA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">检查重复</figcaption></figure><p id="cb1e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">然后在循环之外-</p><figure class="mc md me mf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es pf"><img src="../Images/1f20c6058b7c24af717d5f1ff61d299c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UNEg6m1FgbTkiyskRQ35Hg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">仅过滤唯一的 tweetIDs</figcaption></figure><p id="cfd1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">实用函数<code class="du kb kc kd ke b">onlyUnique</code>也可以写在 retweet 函数之外。</p><p id="5ea4" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这将让我们的机器人避免重复转发。</p><p id="f2c0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> <em class="nv">上面代码的简短说明</em> </strong></p><ul class=""><li id="209f" class="ll lm hi iw b ix iy jb jc jf mo jj mp jn mq jr mr lt lu lv bi translated">每条推文都有一个独特的属性<code class="du kb kc kd ke b">id_str</code>。<br/>如果你转发了某人的推文，它会有不同的<code class="du kb kc kd ke b">id_str</code>。</li><li id="3ce9" class="ll lm hi iw b ix lw jb lx jf ly jj lz jn ma jr mr lt lu lv bi translated">搜索 API 会找到原始推文和被转发的推文。</li><li id="827e" class="ll lm hi iw b ix lw jb lx jf ly jj lz jn ma jr mr lt lu lv bi translated">当我们调用<code class="du kb kc kd ke b">statuses/retweet/:id</code> API 端点时，它会转发所有的端点。</li><li id="a856" class="ll lm hi iw b ix lw jb lx jf ly jj lz jn ma jr mr lt lu lv bi translated">对于一个 Twitter 新手来说，看起来你的机器人已经转发了同样的东西两次或更多次。</li></ul><h2 id="9ad6" class="ms ko hi bd kp mt mu mv kt mw mx my kx jf mz na lb jj nb nc lf jn nd ne lj nf bi translated">类似这样的东西👇</h2><figure class="mc md me mf fd ij er es paragraph-image"><div class="er es pg"><img src="../Images/e78df9469dfdcbb32926a59c574c7e02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*WUc_QCd4G99oE35lPrKmFA.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">重复转发</figcaption></figure><ul class=""><li id="681e" class="ll lm hi iw b ix iy jb jc jf mo jj mp jn mq jr mr lt lu lv bi translated">如果推文以“RT @”开头，那么它是一条被转发的推文，与原始推文的<code class="du kb kc kd ke b">id_str</code>不同。我们获取<strong class="iw hj">原始推文</strong>的<code class="du kb kc kd ke b">id_str</code>，并使用<code class="du kb kc kd ke b">onlyUnique</code>函数过滤重复的推文</li></ul><blockquote class="ng"><p id="1866" class="nh ni hi bd nj nk nx ny nz oa ob jr dx translated">使用 API 可以做更多的事情。查看 API 参考(<a class="ae kf" href="https://developer.twitter.com/en/docs/api-reference-index" rel="noopener ugc nofollow" target="_blank">https://developer.twitter.com/en/docs/api-reference-index</a>)了解更多细节。</p></blockquote></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><h1 id="c931" class="kn ko hi bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">数据科学机器人</h1><figure class="mc md me mf fd ij er es paragraph-image"><div class="er es pg"><img src="../Images/41c4dc8c986794da8ca61e5847f375a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*Fnqgp4Zp0ksR4ggnD5CQhA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">推特上的@datasciencebot_ 上</figcaption></figure><p id="d596" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是我创造的机器人</p><p id="e77f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">机器人转发带有标签<a class="ae kf" href="https://twitter.com/search?q=%23DataScience" rel="noopener ugc nofollow" target="_blank">#数据科学</a>和<a class="ae kf" href="https://twitter.com/search?q=%23DataVisualization" rel="noopener ugc nofollow" target="_blank">#数据可视化</a>的推文</p><p id="5889" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是我的机器人<a class="ae kf" href="https://twitter.com/datasciencebot_" rel="noopener ugc nofollow" target="_blank">https://twitter.com/datasciencebot_</a>的链接</p><figure class="mc md me mf fd ij"><div class="bz dy l di"><div class="ph or l"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">请照此办理！:P</figcaption></figure></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><h1 id="7aad" class="kn ko hi bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">源代码</h1><p id="08bc" class="pw-post-body-paragraph iu iv hi iw b ix ln iz ja jb lo jd je jf ml jh ji jj mm jl jm jn mn jp jq jr hb bi translated">完整的源代码可以在这里获得-</p><div class="pi pj ez fb pk pl"><a href="https://github.com/Sumedh-Patkar/the-datascience-bot" rel="noopener  ugc nofollow" target="_blank"><div class="pm ab dw"><div class="pn ab po cl cj pp"><h2 class="bd hj fi z dy pq ea eb pr ed ef hh bi translated">sume DH-pat kar/the-data science-bot</h2><div class="ps l"><h3 class="bd b fi z dy pq ea eb pr ed ef dx translated">一个转发标签为#数据科学，#数据可视化解散的推特机器人 GitHub 拥有超过 50 个…</h3></div><div class="pt l"><p class="bd b fp z dy pq ea eb pr ed ef dx translated">github.com</p></div></div><div class="pu l"><div class="pv l pw px py pu pz io pl"/></div></div></a></div></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><p id="fe76" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">好吧，就这样！</p><p id="e9a1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是我第一篇关于媒体的技术文章</p><figure class="mc md me mf fd ij er es paragraph-image"><div class="er es qa"><img src="../Images/f726c7b148310e6b0982837cf1f6539d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*ye8zUNa4MtKc0GVaI4U21Q.gif"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">我有吗？让我知道！:)</figcaption></figure><p id="5444" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">任何反馈都将不胜感激！</p><p id="fc07" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">感谢阅读！😊</p><figure class="mc md me mf fd ij er es paragraph-image"><div class="er es mb"><img src="../Images/ea98d02efd5248b4d4ef9f99dc71859f.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/1*D6s-T36efT8ZnEnxAwisBQ.gif"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">鳍。</figcaption></figure></div></div>    
</body>
</html>