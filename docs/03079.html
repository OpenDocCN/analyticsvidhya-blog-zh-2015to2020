<html>
<head>
<title>Deploying Machine Learning model</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">部署机器学习模型</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/deploying-machine-learning-model-f3af52068c1b?source=collection_archive---------5-----------------------#2020-01-15">https://medium.com/analytics-vidhya/deploying-machine-learning-model-f3af52068c1b?source=collection_archive---------5-----------------------#2020-01-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="0ff7" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">在linux机器上部署您的模型并保持它工作。</h2></div><p id="c6ca" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">作为一个数据科学爱好者，它总是让我想知道如何与世界分享我的工作；而不是仅仅将我的代码放在Github中，或者在文章中介绍它们。所以像我一样，许多人想知道如何部署我们的ML模型。</p><p id="cbcc" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">先决条件:</strong> <br/> 1。对Linux命令的基本理解将是一个额外的好处。<br/> 2。使用Git的经验，最好使用GitHub创建一个存储库。<br/> 3。Python3，pip，虚拟环境的基础知识。</p><p id="55e2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">不要担心所有的代码都会被解释，如果你以前没有使用过Git，Pip，Virtual environment和Github，链接会让你对它们有充分的了解。 </p><p id="81b6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">写这篇文章的想法是打破常规，在现有信息的基础上分享一些额外的信息。文章以问答的形式撰写，涵盖了所有相关的话题以及关于这个话题的常见问题。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/d16eb6aee7fb68439d08a1d14122cee1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*juclx3Odrx4c8oUu50dvlQ.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">完成部署在Linux机器上的ML模型的工作。</figcaption></figure><p id="2a1a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">将Python web应用程序部署到生产环境中的三个常见构造块是:</p><ul class=""><li id="da4e" class="kk kl hi iz b ja jb jd je jg km jk kn jo ko js kp kq kr ks bi translated">web服务器(如nginx)</li><li id="e73c" class="kk kl hi iz b ja kt jd ku jg kv jk kw jo kx js kp kq kr ks bi translated">WSGI应用服务器(如Gunicorn)</li><li id="a709" class="kk kl hi iz b ja kt jd ku jg kv jk kw jo kx js kp kq kr ks bi translated">您的实际应用程序(使用开发人员友好的框架编写，如Flask)</li></ul><p id="7349" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在不要担心，我们会向您详细解释所有术语。</p><p id="ba5f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">任何模型，无论是分类模型还是回归模型，都可以借助Flask进行部署。</p><p id="3652" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">问:什么是烧瓶？</strong></p><p id="97f1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">A.根据维基；Flask是一个用Python编写的微型web框架。它被归类为微框架，因为它不需要特殊的工具或库。它没有数据库抽象层、表单验证或任何其他组件，而现有的第三方库提供了通用功能。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es ky"><img src="../Images/fc3b3b6e89735d0fc513e666fc6d8b8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/format:webp/1*i_yiQXPwzOcmOdRwJRXWcw.png"/></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">瓶</figcaption></figure><p id="0eb0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">还有许多其他web框架，如Django、Web2py、CherryPy等。<strong class="iz hj"> Web </strong>框架提供了一种构建和部署<strong class="iz hj"> web </strong>应用程序的标准方式。所以Flask帮助我们部署Python Web应用程序。</p><p id="e921" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">问:Nginx是什么？NGINX </strong>是一个免费的、开源的、高性能的HTTP web服务器，它也可以用作反向代理、负载均衡器、邮件代理和HTTP缓存。您可以使用自己的Linux服务器，或者将其部署在Heroku、PythonAnyWhere等。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es kz"><img src="../Images/b375838b997685fb94aa1afac51513fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TrNJZqECEj0eVuJDeNKtNQ.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">NGINX</figcaption></figure><p id="5ed1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">还有许多其他的服务器，如Apache，Docker，Redis等。我选择Nginx的原因是因为它提供了低内存使用和高并发性，因此Nginx没有为每个web请求创建新的进程，而是使用一种异步的、事件驱动的方法，在单线程中处理请求。因此，要部署我们的模型，我们需要一个由Nginx提供的服务器。</p><p id="8a0a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">问:什么是Gunicorn？<br/> A. </strong>绿色独角兽，通常简称为“<strong class="iz hj"> Gunicorn </strong>”，是一个Web服务器网关接口(WSGI)服务器实现，通常<strong class="iz hj">用于</strong>运行Python web应用。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es la"><img src="../Images/e8c3611d710ff50831dedc84593b29ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:488/format:webp/1*7iPooQkI3NiKG8ekjEdt6g.png"/></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">格尼科恩</figcaption></figure><p id="e4c8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但是我们为什么需要一个Gunicorn呢？<br/> Gunicorn 负责<strong class="iz hj"> web服务器</strong>和<strong class="iz hj"> web </strong>应用程序之间发生的一切。如果您没有Gunicorn，那么在创建web应用程序后，我们需要:</p><ul class=""><li id="02b0" class="kk kl hi iz b ja jb jd je jg km jk kn jo ko js kp kq kr ks bi translated">宿主静态文件</li><li id="c8f5" class="kk kl hi iz b ja kt jd ku jg kv jk kw jo kx js kp kq kr ks bi translated">处理https连接</li><li id="4d16" class="kk kl hi iz b ja kt jd ku jg kv jk kw jo kx js kp kq kr ks bi translated">从崩溃中恢复</li><li id="3ddc" class="kk kl hi iz b ja kt jd ku jg kv jk kw jo kx js kp kq kr ks bi translated">确保您的应用程序可以向上扩展(通过框架或您自己的代码)。<br/>这些都是Gunicorn做的。</li></ul><p id="8f5c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">那么什么是WSGI呢？<br/> WSGI </strong>出现是因为Web服务器<strong class="iz hj">需要</strong>与Web应用程序通信。<strong class="iz hj"> WSGI </strong>规定了<strong class="iz hj">需要</strong>由Web应用程序端和Web服务器端实现的规则，以便它们可以相互交互。</p><p id="7448" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">问:在第一张图中，我们展示了ML模型设置的所有部分，其中有一个主管。这个主管是什么，它做什么？监督者监视和控制gunicorn过程。Supervisor将负责Gunicorn进程，并确保它们在出现任何问题时重新启动，或者确保这些进程在引导时启动。当你想要编辑模型或者给模型添加新的特性时，这将会很有帮助；您不必每次都手动启动和重启您的应用程序。主管会帮你做的。</strong></p><p id="16e6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">问:什么是Git？我们为什么需要Github？<br/> A. <em class="jt"> Git </em> 是一个分布式版本控制系统，用于在软件开发过程中跟踪源代码的变化。它是为协调程序员之间的工作而设计的，但也可以用来跟踪任何一组文件中的变化。所以基本上，git确保所有代码变更的版本控制都会被跟踪。例如:您现有模型<em class="jt">(微调模型以增加其准确性)</em>的任何新功能都将作为新版本进行跟踪。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es lb"><img src="../Images/5a2a30e5d942e19d3251670cb3b26179.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*Wtgi3LRCRlGpC9GrbXuMIQ.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">Git和Github</figcaption></figure><p id="301f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">GitHub 是一个Git存储库托管服务，但是它增加了许多自己的特性。Git是一个命令行工具，<strong class="iz hj"> GitHub </strong>提供了一个基于Web的图形界面。它还提供了访问控制和几个协作功能，例如wikis和每个项目的基本任务管理工具。<br/>至于我们为什么需要它；因为它让我们的工作展现在公众面前。此外，它<strong class="iz hj">是</strong>周围最大的编码社区之一，所以使用它可以为你的项目和你自己提供广泛的曝光。</p><p id="e9b5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如有任何疑问，请在Git和Github上观看<a class="ae lc" href="https://youtu.be/3RjQznt-8kE?list=PL4cUxeGkcC9goXbgTDQ0n_4TBzOO0ocPR" rel="noopener ugc nofollow" target="_blank">这个</a>视频系列；这些视频会给你足够的信息。</p><h1 id="3ea8" class="ld le hi bd lf lg lh li lj lk ll lm ln io lo ip lp ir lq is lr iu ls iv lt lu bi translated">第1部分:设置服务器及其所需的依赖项。</h1><p id="9724" class="pw-post-body-paragraph ix iy hi iz b ja lv ij jc jd lw im jf jg lx ji jj jk ly jm jn jo lz jq jr js hb bi translated">如果你使用的是Linux服务器，你很可能会使用亚马逊、微软、谷歌、Linode等公司的虚拟机。在本文中，我们将使用<strong class="iz hj">亚马逊的AWS EC2实例。</strong></p><p id="1579" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文中，我们将讨论如何使用AWS EC2实例。<br/> <strong class="iz hj"> <em class="jt">注意:</em> </strong>对于所有亚马逊用户来说，如果你以前没有使用过AWS服务，你可以免费使用一年的服务器、数据库等等，这对你的机器学习(ML)模型来说已经足够了。</p><p id="78be" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要创建自己的EC2实例，请遵循<a class="ae lc" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/get-set-up-for-amazon-ec2.html" rel="noopener ugc nofollow" target="_blank">这个</a>页面，如果您喜欢视频教程，请观看<a class="ae lc" href="https://youtu.be/ZISa3K5v7X8" rel="noopener ugc nofollow" target="_blank">这个</a>。<br/>因此，如果您遵循AWS教程或阅读该页面；您现在有了一个Linux服务器。现在很简单了。</p><h1 id="4b2a" class="ld le hi bd lf lg lh li lj lk ll lm ln io lo ip lp ir lq is lr iu ls iv lt lu bi translated">从Ubuntu库安装组件</h1><pre class="jv jw jx jy fd ma mb mc md aw me bi"><span id="509e" class="mf le hi mb b fi mg mh l mi mj">$ sudo apt update<br/>$ sudo apt install python3-pip python3-dev build-essential libssl-dev libffi-dev python3-setuptools<br/>(pip is the package manager for python; for more information visit <a class="ae lc" href="https://realpython.com/what-is-pip/" rel="noopener ugc nofollow" target="_blank">this</a> page)<br/>$ pip install Flask<br/>$ pip install nginx</span></pre><p id="a702" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Nginx和Gunicorn协同工作，Nginx充当web服务器，处理所有静态文件的请求，并让Gunicorn处理所有python代码。所以Nginx处理所有的Javascripts、HTML、CSS、图片等，Gunicorn处理Python文件。</p><pre class="jv jw jx jy fd ma mb mc md aw me bi"><span id="c244" class="mf le hi mb b fi mg mh l mi mj">$ mkdir flaskProject<br/>$ cd flaskProject</span><span id="bfd8" class="mf le hi mb b fi mk mh l mi mj">$ sudo apt install python3-venv<br/>(python3-venv helps you create a virtual environment. If you don’t know what virtual environment is then visit <a class="ae lc" href="https://www.geeksforgeeks.org/python-virtual-environment/" rel="noopener ugc nofollow" target="_blank">this</a> page.)</span><span id="9099" class="mf le hi mb b fi mk mh l mi mj">$ python -m venv flaskProject/venv<br/>(this command creates a virtual environment for us .Now we need to activate the virtual environment.)</span><span id="8f3d" class="mf le hi mb b fi mk mh l mi mj">$ source venv/bin/activate<br/>$ pip install gunicorn<br/>$ sudo apt install supervisor</span></pre><p id="dbd2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> NGINX配置:</strong> <br/>安装NGINX后，运行以下命令:</p><pre class="jv jw jx jy fd ma mb mc md aw me bi"><span id="58cf" class="mf le hi mb b fi mg mh l mi mj">$ sudo rm /etc/nginx/sites-enabled/default<br/>$ sudo nano /etc/nginx/sites-enabled/flaskProject</span></pre><p id="3617" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">默认nginx配置由<strong class="iz hj"> rm </strong>命令删除，新配置由<strong class="iz hj"> nano </strong>命令添加。键入nano命令后，将打开一个新文件；只需复制下面的代码，并确保用户名和项目名被正确复制。</p><pre class="jv jw jx jy fd ma mb mc md aw me bi"><span id="e04d" class="mf le hi mb b fi mg mh l mi mj">server {<br/>    listen 80;<br/>    server_name YOUR_IP_OR_DOMAIN;<br/><br/>    location /static {<br/>        alias /home/YOUR_USER/flaskProject/YOUR_PROJECT/templates;<br/>    }<br/><br/>    location / {<br/>        proxy_pass http://localhost:8000;<br/>        include /etc/nginx/proxy_params;<br/>        proxy_redirect off;<br/>    }<br/>}</span></pre><p id="51b0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">主管配置:</strong></p><p id="a28e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">安装supervisor后，运行以下命令:</p><pre class="jv jw jx jy fd ma mb mc md aw me bi"><span id="a1c9" class="mf le hi mb b fi mg mh l mi mj">$ sudo nano /etc/supervisor/conf.d/flaskProject.conf</span></pre><p id="eda7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">键入nano命令后，将打开一个新文件；简单地复制下面的代码。</p><pre class="jv jw jx jy fd ma mb mc md aw me bi"><span id="6242" class="mf le hi mb b fi mg mh l mi mj">[program:flaskProject]<br/>directory=/home/YOUR_USER/flaskProject/YOUR_PROJECT<br/>command=/home/YOUR_USER/YOUR_PROJECT/venv/bin/gunicorn — bind 0.0.0.0:8000 app:app<br/>user=YOUR_USER<br/>autostart=true<br/>autorestart=true<br/>stopasgroup=true<br/>killasgroup=true<br/>stderr_logfile=/var/log/flaskProject/flaskProject.err.log<br/>stdout_logfile=/var/log/flaskProject/flaskProject.out.log</span></pre><p id="f2fe" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">stderr_logfile和stdout_logfile路径尚未创建，因此在退出管理程序文件后；键入以下命令</p><pre class="jv jw jx jy fd ma mb mc md aw me bi"><span id="b8ed" class="mf le hi mb b fi mg mh l mi mj">$ sudo mkdir -p /var/log/flaskProject<br/>$ sudo touch /var/log/flaskProject/flaskProject.err.log<br/>$ sudo touch /var/log/flaskProject/flaskProject.out.log</span></pre><p id="7d2e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以使用touch或nano来创建新的日志文件。</p><p id="a58f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所有对如何进行部署以及部署的各个方面更感兴趣的人。看看科里·斯查费在YouTube上的视频。</p><p id="7dc7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如何在<a class="ae lc" href="https://youtu.be/xzgwDbe7foQ" rel="noopener ugc nofollow" target="_blank"> Windows </a> <br/>上运行Linux/Bash基于SSH密钥的认证<a class="ae lc" href="https://youtu.be/vpk_1gldOAE" rel="noopener ugc nofollow" target="_blank">教程</a>T5】SSH密钥在<a class="ae lc" href="https://www.youtube.com/redirect?redir_token=Vgz4FUPIB6FjaIKyYULhFlKZdEZ8MTU3OTExNDA1OUAxNTc5MDI3NjU5&amp;event=video_description&amp;v=goToXTC96Co&amp;q=https%3A%2F%2Fwww.linode.com%2Fdocs%2Fsecurity%2Fauthentication%2Fuse-public-key-authentication-with-ssh%2F%23windows" rel="noopener ugc nofollow" target="_blank"> Windows </a>上运行。<br/> Python Django教程:部署您的应用程序(选项# 1)——部署到Linux <a class="ae lc" href="https://youtu.be/Sa_kQheCnds" rel="noopener ugc nofollow" target="_blank">服务器</a>。</p><h1 id="10e4" class="ld le hi bd lf lg lh li lj lk ll lm ln io lo ip lp ir lq is lr iu ls iv lt lu bi translated">第2部分:创建Github存储库</h1><p id="1148" class="pw-post-body-paragraph ix iy hi iz b ja lv ij jc jd lw im jf jg lx ji jj jk ly jm jn jo lz jq jr js hb bi translated"><strong class="iz hj">您的GitHub资源库的文件夹结构:<br/> </strong> <em class="jt">(不强制遵循此顺序)。<br/> 1。app.py(针对烧瓶app) <br/> 2。model.py(你的Ml模型文件)<br/>3.template/index.html(处理任何html，css等文件的文件夹)</em></p><p id="c435" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">问:从哪里可以获得完整的代码？有运行在Linux服务器上的python web应用程序的实例吗？<br/>答:</strong>你可以在<a class="ae lc" href="https://github.com/AjayJohnAlex/Keyword-Extraction" rel="noopener ugc nofollow" target="_blank">这个</a> Github库中获得关键词提取模型的完整代码。为一个工作演示检查<a class="ae lc" href="http://18.188.94.47/index" rel="noopener ugc nofollow" target="_blank">这个</a>了。</p><p id="c38c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> <em class="jt">万一没有GitHub库，想在部署自己的模型</em> </strong>之前测试一下；在您的<strong class="iz hj"> flaskProject文件夹</strong>中使用下面的命令将这个repo克隆到您的linux机器上。</p><pre class="jv jw jx jy fd ma mb mc md aw me bi"><span id="6355" class="mf le hi mb b fi mg mh l mi mj">$ git clone <a class="ae lc" href="https://github.com/YOUR-USERNAME/YOUR-REPOSITORY" rel="noopener ugc nofollow" target="_blank">https://github.com/<em class="jt">THE-USERNAME</em>/THE<em class="jt">-REPOSITORY</em></a><em class="jt"> (format example)</em></span><span id="1ecb" class="mf le hi mb b fi mk mh l mi mj">$ git clone <a class="ae lc" href="https://github.com/AjayJohnAlex/Keyword-Extraction.git" rel="noopener ugc nofollow" target="_blank">https://github.com/AjayJohnAlex/Keyword-Extraction.git</a></span></pre><p id="46cd" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以通过这种方式克隆任何存储库。所以也可以随意探索其他存储库。</p><h2 id="5212" class="mf le hi bd lf ml mm mn lj mo mp mq ln jg mr ms lp jk mt mu lr jo mv mw lt mx bi translated">app.py:</h2><p id="224b" class="pw-post-body-paragraph ix iy hi iz b ja lv ij jc jd lw im jf jg lx ji jj jk ly jm jn jo lz jq jr js hb bi translated">这包含Flask APIs，它通过GUI或API调用接收数据，根据我们的模型计算预测值并返回它。</p><pre class="jv jw jx jy fd ma mb mc md aw me bi"><span id="4a45" class="mf le hi mb b fi mg mh l mi mj">import pandas<br/>import numpy<br/>import spacy<br/>from flask import Flask, request, jsonify, render_template, json<br/>import model as md<br/># import pickle<br/><br/>app = Flask(__name__)<br/><br/>@app.route('/')<br/>def home():<br/>    return render_template('index.html')<br/><br/>@app.route('/predict',methods=['POST'])<br/>def predict():<br/>    '''<br/>    For rendering results on HTML GUI<br/>    '''<br/>    int_features = str(request.form.get("description"))<br/><br/>    vocab_dict , arr = md.textProcessing(int_features)<br/>    <br/>    tf = md.computeTF(vocab_dict,arr)<br/>    idf = md.computeIDF([vocab_dict])<br/>    tfidf = md.computeTfidf(tf,idf)<br/><br/>    return jsonify(tfidf)<br/><br/><br/>if __name__ == "__main__":<br/>    app.run(debug=True)</span></pre><p id="0bbc" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> template/index.html : </strong></p><pre class="jv jw jx jy fd ma mb mc md aw me bi"><span id="d938" class="mf le hi mb b fi mg mh l mi mj">&lt;!DOCTYPE html&gt;<br/>&lt;html &gt;<br/><br/>&lt;head&gt;<br/>  &lt;meta charset="UTF-8"&gt;<br/>  &lt;title&gt;ML API&lt;/title&gt;<br/>  <br/>&lt;/head&gt;<br/><br/>&lt;body&gt;<br/> &lt;div class="login"&gt;<br/>	&lt;h1&gt;Predict Keyword Analysis&lt;/h1&gt;<br/><br/>     &lt;!-- Main Input For Receiving Query to our ML --&gt;<br/>    &lt;form action="{{ url_for('predict')}}"method="post"&gt;<br/>    	&lt;textarea rows = "30" cols = "100" name = "description" placeholder="Description" required="required" &gt;&lt;/textarea&gt;<br/>        <br/><br/>        &lt;button type="submit" class="btn btn-primary btn-block btn-large"&gt;Predict&lt;/button&gt;<br/>    &lt;/form&gt;<br/><br/>   &lt;br&gt;<br/>   &lt;br&gt;<br/><br/> &lt;/div&gt;<br/><br/><br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="5b65" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> model.py: <br/> </strong>这包含机器学习模型预测所需输出的代码。如果您没有克隆存储库，这将与您的不同，但是对于任何澄清检查<a class="ae lc" href="https://github.com/AjayJohnAlex/Keyword-Extraction/blob/master/model.py" rel="noopener ugc nofollow" target="_blank">这个</a>。</p><p id="e537" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在你有了自己的Linux服务器和所有必要的依赖项，并且有了运行你的web应用程序所需的所有代码。 </p><blockquote class="my mz na"><p id="04a8" class="ix iy jt iz b ja jb ij jc jd je im jf nb jh ji jj nc jl jm jn nd jp jq jr js hb bi translated">问:但是这些文件是如何工作的呢？他们是如何相互依赖的？好吧，让我们来分解所有代码行的工作原理:</p><p id="746a" class="ix iy jt iz b ja jb ij jc jd je im jf nb jh ji jj nc jl jm jn nd jp jq jr js hb bi translated"><strong class="iz hj">在index.html文件- <br/>这里主要关注的是表单，所以表单执行动作:</strong></p><p id="6890" class="ix iy jt iz b ja jb ij jc jd je im jf nb jh ji jj nc jl jm jn nd jp jq jr js hb bi translated">form action =<strong class="iz hj">" { { URL _ for(' predict ')} } " method = " post "</strong></p><p id="6f43" class="ix iy jt iz b ja jb ij jc jd je im jf nb jh ji jj nc jl jm jn nd jp jq jr js hb bi translated">然后它有一个文本区和一个提交按钮。</p><p id="275a" class="ix iy jt iz b ja jb ij jc jd je im jf nb jh ji jj nc jl jm jn nd jp jq jr js hb bi translated">因此，单击submit按钮，数据将被发送到名为predict的API，并在该API中发布数据。这个预测API是在app.py文件中定义的。</p><p id="a9ca" class="ix iy jt iz b ja jb ij jc jd je im jf nb jh ji jj nc jl jm jn nd jp jq jr js hb bi translated"><strong class="iz hj">在app.py文件- </strong> <br/>中我们有render_template来渲染输出或者HTML文件，jsonify来获取JSON响应。<br/>现在，app = Flask(__name__)确保flask app已初始化。</p><p id="5adc" class="ix iy jt iz b ja jb ij jc jd je im jf nb jh ji jj nc jl jm jn nd jp jq jr js hb bi translated">并且这个初始化的flask对象“<strong class="iz hj">app”</strong>现在可以用于创建路由/API，并且每个路由包括API名称和方法(POST/GET)。<br/>在一个已定义的API中，我们有一个被调用的python方法或一个呈现的HTML页面。</p><p id="de03" class="ix iy jt iz b ja jb ij jc jd je im jf nb jh ji jj nc jl jm jn nd jp jq jr js hb bi translated">所以我通常保持我的API名和其中的方法名相同。因此，当一个API被调用时，它执行其中的方法，然后运行我的机器学习模型，该模型在<strong class="iz hj"> model.py文件</strong>中定义，并呈现输出。</p></blockquote><pre class="jv jw jx jy fd ma mb mc md aw me bi"><span id="4df2" class="mf le hi mb b fi mg mh l mi mj">if __name__ == "__main__":<br/>    app.run(debug=True)</span><span id="98ba" class="mf le hi mb b fi mk mh l mi mj">This line of code ensures that you can debug your Flask app if you run into any errors.</span></pre><p id="aa72" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要深入了解烧瓶的所有可能方法，请查看<a class="ae lc" href="https://flask.palletsprojects.com/en/1.1.x/quickstart/" rel="noopener ugc nofollow" target="_blank">本页</a>。<br/>现在您已经了解了Flask如何部署ML模型，只需运行以下代码就可以成功运行您的应用程序。您可以手动对ML代码进行更多的修改。</p><pre class="jv jw jx jy fd ma mb mc md aw me bi"><span id="7c4c" class="mf le hi mb b fi mg mh l mi mj">$ sudo systemctl restart nginx<br/>$ sudo systemctl<br/>$ sudo supervisorctl reload</span></pre><p id="608b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您的ML模型现在已经启动并运行了。</p><p id="edd5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果对这篇文章有任何疑问，请在评论区添加。我很乐意尽快回答他们。我也会相应地对文章进行充分的修改。</p></div></div>    
</body>
</html>