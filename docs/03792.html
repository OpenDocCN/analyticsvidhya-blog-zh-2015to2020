<html>
<head>
<title>Automating Python unit testing using Travis CI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Travis CI自动化Python单元测试</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/automating-python-unit-testing-using-travis-ci-be4fc965c1c0?source=collection_archive---------3-----------------------#2020-02-19">https://medium.com/analytics-vidhya/automating-python-unit-testing-using-travis-ci-be4fc965c1c0?source=collection_archive---------3-----------------------#2020-02-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="aba3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文简要介绍了如何使用单元测试模块为python脚本设置自动化测试，以及如何使用存储在GitHub上的存储库<a class="ae jd" href="https://travis-ci.org/" rel="noopener ugc nofollow" target="_blank"> Travis CI </a>设置CI管道。</p><p id="d51a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然测试可以在本地完成，但是CI管道可以确保测试在代码被推送到存储库时一直运行，而且Travis CI与Python配合得很好。</p><p id="8a69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个简单的程序执行算术运算，并对算术类中定义的方法运行单元测试。该目录的组织如下所示。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/3d99e157a7df037119278e6ddc3ff7d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*KCdOzQhAoYEI348_SQ7y9w.png"/></div></figure><p id="a59f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该测试已被放置在以“test_”开头的tests文件夹中。这允许测试被发现。测试脚本使用setUp方法初始化算术类，并运行assert equal测试。</p><p id="d7a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">. travis.yml文件包含travis的配置，包括测试需要设置的环境以及是否需要安装任何依赖项。</p><p id="d93e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于test_division测试，assert equal函数被设置为fail，只是为了显示测试失败时的结果。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es jm"><img src="../Images/14cd99173983bb87ccca7f5da77f76e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hatclw4r2EG_oPWKy2l4Cw.png"/></div></div></figure><p id="efeb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Travis CI需要链接到GitHub并激活存储库。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es jr"><img src="../Images/7554cc1420e11dd55c61aa1758c81c69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DJIvaQFkbUWT59gh-4BcVw.png"/></div></div></figure><p id="f1f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我选择了只允许访问算术存储库。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es js"><img src="../Images/af092dc33620147d83116c9c876514c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eVtdqb1y2pGXZDqsXMZ62g.png"/></div></div></figure><p id="ecb5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦被激活并链接到GitHub，代码被推送到开发分支，在测试被设置为失败的场景中，测试失败，如下所示。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es jt"><img src="../Images/d34710a4b6b7eb285c2a002f51e2ee56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LA6mDtZ6wsFBjvkPmf_lLQ.png"/></div></div></figure><p id="1892" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作业日志显示了安装需求文件和运行测试的执行流程，测试失败并显示AssertionError: 1.5！=2.5，测试期望该值为1.5</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es ju"><img src="../Images/a4aff81f4a425715eb90ffae00fa0712.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-mC4LWBmGLk9xLXVcZKdww.png"/></div></div></figure><p id="5787" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在用第20行中正确的除法值更新test_operations.py文件后，</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es jv"><img src="../Images/26aeb63197eb16bc961285237c6501f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s8xWk51VaS8CCFXCXIuQRw.png"/></div></div></figure><p id="4afa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">代码再次被推送到开发分支，Travis拿起存储库，自动运行测试，这次通过了测试，</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es jw"><img src="../Images/99b4b6585c612388772c59009b4b7fc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HQfwSkD-I3JBzBJN96GEcQ.png"/></div></div></figure><p id="3d7d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作业日志运行了4个测试，构建成功退出。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es jx"><img src="../Images/dc7473ed552e762719fd02b4914fdf72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*23QGZH824cmYJcSuf9f15w.png"/></div></div></figure><p id="7ccd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望这篇文章是有用的，附带的GitHub库可以在<a class="ae jd" href="https://github.com/prkapur/arithmetic/tree/development" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p></div></div>    
</body>
</html>