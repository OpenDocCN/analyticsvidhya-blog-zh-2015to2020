<html>
<head>
<title>Google Analytics Customer Revenue Prediction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌分析客户收入预测</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/google-analytics-customer-revenue-prediction-a1098cd0cbed?source=collection_archive---------8-----------------------#2020-10-22">https://medium.com/analytics-vidhya/google-analytics-customer-revenue-prediction-a1098cd0cbed?source=collection_archive---------8-----------------------#2020-10-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/c80906a7f6e87baf2e15a982218a8ade.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R20GQzpwKo5j5Y1xxeKWWA.jpeg"/></div><figcaption class="im in et er es io ip bd b be z dx translated">GStore</figcaption></figure><h1 id="1035" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">业务问题:</h1><p id="da0c" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">对于每个企业来说，产生收入的客户数量将远远少于企业与之互动的客户总数。因此，对于每个企业来说，理解、分析和预测其创收领域非常重要。</p><h1 id="9ecb" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">Kaggle挑战描述:</h1><p id="dd2b" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">访问:<a class="ae km" href="https://www.kaggle.com/c/ga-customer-revenue-prediction/overview" rel="noopener ugc nofollow" target="_blank"> Google Analytics客户收入预测</a>80/20法则已被证明适用于许多企业——只有一小部分客户创造了大部分收入。因此，营销团队面临着对促销策略进行适当投资的挑战。</p><p id="2f20" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">‌RStudio是r和企业级产品的免费开放工具开发商，这些产品用于团队扩展和共享工作，他与谷歌云和Kaggle合作，展示了彻底的数据分析可能产生的商业影响。</p><p id="83d6" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">‌In:在这次比赛中，你要分析谷歌商品商店(也称为GStore，出售谷歌纪念品的地方)的客户数据集，以预测每个客户的收入。我们希望，对于那些选择在GA数据基础上使用数据分析的公司来说，结果将是更可操作的运营变化和更好地利用营销预算。</p><h1 id="347a" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">数据和方法的来源:</h1><h2 id="09f0" class="ks ir hi bd is kt ku kv iw kw kx ky ja jz kz la je kd lb lc ji kh ld le jm lf bi translated">机器学习方法:</h2><p id="7444" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在这个挑战中，我们的任务是通过使用从2016年8月1日<em class="lg"/>到2018年10月15日的历史数据来预测从2018年12月1日<strong class="jq hj"/>到2019年1月31日<strong class="jq hj"><em class="lg"/></strong>期间每个人产生的收入。请注意，对于我们预测的时间段，我们没有任何数据。</p><h2 id="0af9" class="ks ir hi bd is kt ku kv iw kw kx ky ja jz kz la je kd lb lc ji kh ld le jm lf bi translated">‌Data:</h2><p id="136e" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">我们已经被提供了<code class="du lh li lj lk b">train_v2.csv</code>和<code class="du lh li lj lk b">test_v.csv</code>。<code class="du lh li lj lk b">train_v2.csv</code>——更新后的训练集——包含从<em class="lg">2016年8月1日</em>到<em class="lg">2018年4月30日</em>的用户交易。<code class="du lh li lj lk b">test_v2.csv</code>——更新后的测试集——包含从<em class="lg">2018年5月1日</em>到<em class="lg">2018年10月15日</em>的用户交易。</p><h2 id="f260" class="ks ir hi bd is kt ku kv iw kw kx ky ja jz kz la je kd lb lc ji kh ld le jm lf bi translated">‌Objective:</h2><p id="8018" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated"><code class="du lh li lj lk b">sample_submission_v2.csv</code> -正确格式的更新样本提交文件。包含test <em class="lg"> v2.csv中的所有fullVisitorIds。我们必须预测LogRevenue列应该对这些_fullVisitorIds </em> <strong class="jq hj">中的每一个进行前瞻性预测，预测时间范围为2018年12月1日</strong>到2019年1月31日<strong class="jq hj">之间的</strong></p><h2 id="c04e" class="ks ir hi bd is kt ku kv iw kw kx ky ja jz kz la je kd lb lc ji kh ld le jm lf bi translated"><strong class="ak">提供的‌File描述和功能:</strong></h2><p id="e120" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">每个。csv文件包含商店访问量的交易数据<strong class="jq hj">full visitorid</strong>—Google商品商店每个用户的唯一标识符。我们的最终提交将取决于此，并将用于汇总。</p><p id="58f0" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated"><strong class="jq hj">渠道分组</strong> —用户来到商店的渠道。</p><p id="d0f2" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">‌ <strong class="jq hj">日期</strong> —用户访问商店的日期。</p><p id="7c2e" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">‌ <strong class="jq hj">设备</strong> —用于访问商店的设备的规格。(<em class="lg"> json列</em>)</p><p id="57f5" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">‌ <strong class="jq hj">地理网络</strong> —这个部分包含关于用户的地理位置的信息。(<em class="lg"> json列</em>)</p><p id="6a5f" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">‌ <strong class="jq hj">社交管理类型</strong> —参与类型，可以是“社交参与”或“非社交参与”。</p><p id="7dbc" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">‌ <strong class="jq hj">总计</strong> —此部分包含整个会话的总计值。(<em class="lg"> json列</em>)</p><p id="9e04" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">‌ <strong class="jq hj">流量源</strong> —此部分包含有关发起会话的流量源的信息。(<em class="lg"> json列</em>)</p><p id="e6c5" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">‌ <strong class="jq hj"> visitId </strong> —该会话的标识符。这是通常存储为_utmb cookie的值的一部分。这对用户来说是唯一的。对于完全唯一的ID，应该使用fullVisitorId和visitId的组合。</p><p id="69d7" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">‌ <strong class="jq hj">访问号</strong> —该用户的会话号。如果这是第一个会话，则将其设置为1。</p><p id="2f6f" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">‌ <strong class="jq hj"> visitStartTime </strong> —时间戳(表示为POSIX时间)。</p><p id="149a" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">‌ <strong class="jq hj">命中</strong> —该行和嵌套字段被填充用于任何和所有类型的命中。提供所有页面访问的记录。</p><p id="fe40" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">‌ <strong class="jq hj">自定义尺寸</strong> —此部分包含为会话设置的任何用户级或会话级自定义尺寸。这是一个重复的字段，每个设置的维度都有一个条目。(<em class="lg"> json列</em>)</p><p id="9d85" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">‌ <strong class="jq hj"> <em class="lg"> json列</em> : </strong>正如我们所看到的，json格式压缩的列很少，我们将对其进行归一化并转换为正常特征。</p><p id="94e7" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated"><strong class="jq hj">评估指标和目标变量:</strong></p><figure class="lm ln lo lp fd ij er es paragraph-image"><div class="er es ll"><img src="../Images/580df258cc8c10dbce65c7b73868d2de.png" data-original-src="https://miro.medium.com/v2/resize:fit:486/format:webp/1*0gYNcUi8pWUIORSyZ9jl5g.png"/></div><figcaption class="im in et er es io ip bd b be z dx translated">公制的</figcaption></figure><p id="0004" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">对于每个用户，我们必须找出在测试数据期间所有交易的总和，它将是值的日志。</p><p id="3a4e" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">‌ <strong class="jq hj">为什么使用登录目标变量？</strong></p><p id="748e" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">我们被要求对目标变量使用log:</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es lq"><img src="../Images/f18dda9a10679bfe74e1a2afd177d761.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4WmVkV4sDmW-KeFQ7hQjXw.png"/></div></div></figure><p id="3280" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">从这张图中我们可以看出，数据非常不准确。极少数客户实际上产生了收入。只有1.2193%的客户在创造收入。所以我们的任务是对目标变量使用log。<a class="ae km" href="http://onlinestatbook.com/2/transformations/log.html#:~:text=The%20log%20transformation%20can%20be,the%20assumptions%20of%20inferential%20statistics." rel="noopener ugc nofollow" target="_blank">来源</a></p><p id="4f53" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">让我们看看在展平所有json列后我们得到的所有特性。</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div class="er es lv"><img src="../Images/4da7d2b34736c2cd6d06d324e7eaca92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/1*CWqbzXgcOzGV_gfRbqjqPg.png"/></div><figcaption class="im in et er es io ip bd b be z dx translated">功能详情</figcaption></figure><h2 id="5a1f" class="ks ir hi bd is kt ku kv iw kw kx ky ja jz kz la je kd lb lc ji kh ld le jm lf bi translated">探索性数据分析和数据预处理:</h2><h2 id="b456" class="ks ir hi bd is kt ku kv iw kw kx ky ja jz kz la je kd lb lc ji kh ld le jm lf bi translated">totals.transactionRevenue:</h2><p id="68af" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated"><strong class="jq hj">totals . transaction revue</strong>是我们的目标变量。我们在训练数据中有1，708，337个数据点。让我们看看目标变量的单叶图</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es lw"><img src="../Images/93c77e83a3d611b618e82b2d4adfc3a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4wBz0LeA9YzuYWc4HeAq4A.png"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated">目标变量PDF</figcaption></figure><p id="30b2" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">右边的图是实际目标变量的PDF。左边的图是log(target_variable)的PDF。</p><p id="73c8" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">观察:totals.transactionRevenue的PDF几乎是正常的，平均值为17.5。</p><h2 id="722e" class="ks ir hi bd is kt ku kv iw kw kx ky ja jz kz la je kd lb lc ji kh ld le jm lf bi translated">频道分组:</h2><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es lx"><img src="../Images/7a1918f5a8da0f035ba516305e5a5ff9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pvn8164cH7RJXkEwWdGIGw.png"/></div></div></figure><p id="ae70" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">这是显示y轴计数的<strong class="jq hj">通道分组</strong>的条形图。我们可以看到在这个特性中有合理数量的独特类别。</p><h2 id="53b0" class="ks ir hi bd is kt ku kv iw kw kx ky ja jz kz la je kd lb lc ji kh ld le jm lf bi translated">‌device.browsers:</h2><p id="27bc" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">但有些功能包含大约100多个独特的类别。对于例如:设备.浏览器</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es ly"><img src="../Images/eafa1d1c061378a9c6556ea0779181a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pwDp0yaPzPzBVKYNtK5nSw.png"/></div></div></figure><p id="85d6" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">正如我们所见，有许多类别。对于这个功能，我们有129个类别。正如我们在图中看到的。只有少数类别重复了合理的次数，其余的都像离群值。大部分都是复读不到十遍。所以我们可以理解，重复几次的品类并不是创收的原因。</p><p id="083a" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">由于所有不产生收入的数据点都被认为是零，我们的模型预计只能预测大于等于<strong class="jq hj"> 0 </strong>。让我们看看每个浏览器的客户百分比。</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div class="er es lz"><img src="../Images/96d481a53d8d7cf8e174cdb6c9d8c36d.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*LbXNQ_O2CTcO9fDAFC11NA.png"/></div></figure><p id="3038" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">正如我们之后看到的，Opera已经被很多客户使用了。因此，我们只保留最流行的浏览器。</p><figure class="lm ln lo lp fd ij"><div class="bz dy l di"><div class="ma mb l"/></div></figure><p id="54ba" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">通过此代码，我们限制了此功能中类别的数量。经过预处理后，我们将得到下面的浏览器计数柱状图。现在我们可以看到独特浏览器的数量已经大大减少。</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es ly"><img src="../Images/2387c774750aea2c4ea3da362f6cb8ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MOhztCVyE0Y3jdr31JEo1Q.png"/></div></div></figure><p id="b823" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">请注意，进行这种预处理的目标不是使用一种热编码，而是在数据预处理阶段去除异常值。这只是为了减少一些特性的基数。</p><p id="9b39" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">当我们有许多独特的类别时，‌This将特别有帮助。很少有特征的唯一类别超过500个类别。在这种情况下，我们可以通过查看类别值计数的分布来限制类别的数量。</p><h2 id="1f51" class="ks ir hi bd is kt ku kv iw kw kx ky ja jz kz la je kd lb lc ji kh ld le jm lf bi translated">‌geoNetwork.city:</h2><p id="ed2f" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">此要素包含源城市的名称。我们有和上面一样的问题。大概有950多个独特的城市。所以凭直觉手动选择几个城市是不可能的。</p><p id="a812" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">‌Let's看看所有城市的PDF值统计。</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es mc"><img src="../Images/3a4f84e1b2b1951a027ad8cda0c322e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gyAoxPGOmAZ_7TIDh6wgTA.png"/></div></div></figure><p id="61af" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated"><strong class="jq hj">观察</strong>:我们可以从左边的百分位图中观察到，与第90到第100百分位的城市相比，许多城市重复出现的频率非常低。右边的图是相同的图，但只是在第0和第90百分位之间。</p><p id="0e17" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">正如我们从这些图中看到的，只有在城市重复超过250的第80个百分位数之后，我们才会将所有频率较低的城市归为一类。通过这样做，我们不会丢失太多信息，因为250只是我们总训练数据的一小部分。</p><p id="4e59" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated"><strong class="jq hj">代号</strong>:</p><figure class="lm ln lo lp fd ij"><div class="bz dy l di"><div class="ma mb l"/></div></figure><p id="3eed" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">在执行这个预处理之后，我们仍然得到大约185个独特的城市。</p><p id="62d3" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">‌There是少数有类似问题的城市。我们已经执行了与上面相同的预处理方法。<strong class="jq hj">多类别栏目</strong> — geoNetwork.country，geoNetwork.city，geoNetwork.city</p><h2 id="99c3" class="ks ir hi bd is kt ku kv iw kw kx ky ja jz kz la je kd lb lc ji kh ld le jm lf bi translated">总数.点击次数:</h2><p id="6fee" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated"><strong class="jq hj"> totals.hits </strong> totals.hits显示交易前商店(或)产品页面URL被访问的次数。</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es lx"><img src="../Images/a109e222110840ee3944f4a2f180d8f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XUrUZfjTpF76sv6kX0o03w.png"/></div></div></figure><p id="b85e" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">‌ <strong class="jq hj">观察:</strong></p><ul class=""><li id="9356" class="md me hi jq b jr kn jv ko jz mf kd mg kh mh kl mi mj mk ml bi translated">大多数交易发生在点击数= 150以下。</li><li id="3541" class="md me hi jq b jr mm jv mn jz mo kd mp kh mq kl mi mj mk ml bi translated">正如我们所看到的，数据中很少有异常值，但由于异常值的百分比非常小，我们将继续保持数据不变。</li></ul><h2 id="9351" class="ks ir hi bd is kt ku kv iw kw kx ky ja jz kz la je kd lb lc ji kh ld le jm lf bi translated">流量来源。来源:</h2><p id="7bdb" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">此功能将保存源的值，例如，它被重定向的网站。但问题是，我们有类别，这意味着相同的来源名称，但措辞是不一样的。请看下面的例子。正如上面强调的谷歌，sites.google.com和group.google.com都来自同一个母网站，但它被称为不同的。因此，我们将把它们全部归入“谷歌”。各大网站也进行了类似的分组。</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es mr"><img src="../Images/3baef0b7fc13e28b9b33d480df459cfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*inqI6Lz-YEAREz3ktird4w.png"/></div></div></figure><figure class="lm ln lo lp fd ij"><div class="bz dy l di"><div class="ma mb l"/></div></figure><p id="7fe0" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">使用这个脚本，我们根据父网站将所有源网站分组到一个组中。</p><h2 id="96d4" class="ks ir hi bd is kt ku kv iw kw kx ky ja jz kz la je kd lb lc ji kh ld le jm lf bi translated">‌Year:</h2><figure class="lm ln lo lp fd ij er es paragraph-image"><div class="er es ms"><img src="../Images/8cc35a6f0ffb0be35913e6881dc1884c.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*LJGOJSm9tk5EaYZwIomBDg.png"/></div><figcaption class="im in et er es io ip bd b be z dx translated">年度收入</figcaption></figure><p id="3c74" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated"><strong class="jq hj">观察:</strong></p><p id="eeff" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">这些年来产生的收入相当稳定。但请注意，2018年的数据只到2018年4月。</p><h2 id="7efa" class="ks ir hi bd is kt ku kv iw kw kx ky ja jz kz la je kd lb lc ji kh ld le jm lf bi translated">‌Month:</h2><figure class="lm ln lo lp fd ij er es paragraph-image"><div class="er es ms"><img src="../Images/f9025bd3d1e5714313e7feb35d5e104f.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*DwevthEQnYeQJxcXx-h7ZA.png"/></div><figcaption class="im in et er es io ip bd b be z dx translated">月收入</figcaption></figure><p id="de2e" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated"><strong class="jq hj">观察:</strong></p><ul class=""><li id="49eb" class="md me hi jq b jr kn jv ko jz mf kd mg kh mh kl mi mj mk ml bi translated">从这个图中我们可以看出，几个月来收入的分配方式是有规律的。</li><li id="2cb0" class="md me hi jq b jr mm jv mn jz mo kd mp kh mq kl mi mj mk ml bi translated">收入在六月和八月达到高峰，一般来说，我们可以预期在夏季销售期间会有更多的销售。</li><li id="c09e" class="md me hi jq b jr mm jv mn jz mo kd mp kh mq kl mi mj mk ml bi translated">我们还可以注意到，销售在秋季大幅减少，表明商店中的产品不适合秋季假期。</li></ul><h2 id="5857" class="ks ir hi bd is kt ku kv iw kw kx ky ja jz kz la je kd lb lc ji kh ld le jm lf bi translated">天数:</h2><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es ly"><img src="../Images/1009cc4536cdb8d32f08a66bd1f021b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IfYb6juIcEe0hFtpYKCyCQ.png"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated">每日收入</figcaption></figure><ul class=""><li id="9105" class="md me hi jq b jr kn jv ko jz mf kd mg kh mh kl mi mj mk ml bi translated">这是日期与交易收入的关系图</li><li id="1c8b" class="md me hi jq b jr mm jv mn jz mo kd mp kh mq kl mi mj mk ml bi translated">除了第一周的第一部分之外，销售额几乎平均分配在所有的日子里</li></ul><h2 id="edf2" class="ks ir hi bd is kt ku kv iw kw kx ky ja jz kz la je kd lb lc ji kh ld le jm lf bi translated">培训方法:</h2><p id="9f56" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">所有包含分类数据的要素都将经历上述的一些数据预处理技术。现在让我们来了解一下为建立模型所提供的数据。我们提供了从<code class="du lh li lj lk b">August 2016</code>到<code class="du lh li lj lk b">October 2018</code>的数据，作为一个整体，包括训练和测试数据，但我们预测的是从<code class="du lh li lj lk b">December 2018</code>到<code class="du lh li lj lk b">January 2019</code>。这意味着，对于那些提交期，我们没有数据。因此，即使我们有测试数据，目标变量也是未来的，所以为测试数据提供的交易收入是那个时期的。</p><p id="795d" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">因为我们预测未来，所以我们必须通过固定<code class="du lh li lj lk b">X</code>的特定训练窗口和<strong class="jq hj"> <em class="lg">响应变量</em> </strong> ( <code class="du lh li lj lk b">totals.transactionRevenue</code>)的未来训练窗口来多次训练模型。</p><h2 id="6845" class="ks ir hi bd is kt ku kv iw kw kx ky ja jz kz la je kd lb lc ji kh ld le jm lf bi translated">窗口聚合:</h2><p id="a958" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">该表将显示所有列车和休息窗口。因此，培训阶段将在每个阶段进行，但测试将在所有培训阶段保持不变。</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es mt"><img src="../Images/21034c49630b8508b12ecdde57d532ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ReJ8ZzmzlMcYd0civto7mw.jpeg"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated">工时戳记</figcaption></figure><h2 id="601d" class="ks ir hi bd is kt ku kv iw kw kx ky ja jz kz la je kd lb lc ji kh ld le jm lf bi translated">我们为什么要这么做？</h2><p id="ac9e" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">目标是预测每个客户的总交易收入，而不是每个会话或访问的收入。</p><p id="8248" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">我们根据时间分割数据，因为如果一个人在2016年购买了一些东西，并且是多年来的重复访问者。他将在2019年花费更高金额的概率将比2018年第一次访问该商店的人小得多。</p><p id="663d" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">‌That是我们在不同时间框架内训练模型并在每个时间框架内预测测试数据收入的原因。</p><p id="a949" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">‌We将在我们最终预测的最后对所有的观测值进行平均。</p><h2 id="d78b" class="ks ir hi bd is kt ku kv iw kw kx ky ja jz kz la je kd lb lc ji kh ld le jm lf bi translated">模型培训:</h2><p id="892a" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">我们将首先尝试三个高级ML模型，然后尝试堆叠以获得更好的结果。</p><p id="a1b3" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">我们尝试了<strong class="jq hj"> XGBOOST、lightbgm和catboost </strong>。</p><p id="e031" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">这是我从<a class="ae km" href="https://kaggle.com/" rel="noopener ugc nofollow" target="_blank"> kaggle </a>提交的结果。</p><figure class="lm ln lo lp fd ij er es paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="er es mu"><img src="../Images/d1f094a3df22470ede284ba7fc740044.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZWGlSmf_syP5A3ME3e2lFQ.png"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated">各种模型的结果</figcaption></figure><p id="282c" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">从结果中我们得出结论,<code class="du lh li lj lk b">xgboostregressor</code>是性能最好的型号。</p><h2 id="b0b6" class="ks ir hi bd is kt ku kv iw kw kx ky ja jz kz la je kd lb lc ji kh ld le jm lf bi translated">‌Future作品:</h2><p id="c970" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">正如您所看到的，我们已经根据时间将整个数据分成了多个部分。但是我们取了从不同时间段得到的所有测试预测的平均值，我们取了平均值，这意味着我们对所有时间段给予了同等的重视。</p><p id="37de" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">如果我们得到了实际的<code class="du lh li lj lk b">totals.transactionRevenue</code>，那么我们可以通过将不同时间范围的测试预测放入一个向量(本例中为10)并将实际的<code class="du lh li lj lk b">totals.transactionRevenue</code>作为目标变量来训练一个模型。</p><h2 id="a173" class="ks ir hi bd is kt ku kv iw kw kx ky ja jz kz la je kd lb lc ji kh ld le jm lf bi translated">‌References:</h2><ol class=""><li id="0ac4" class="md me hi jq b jr js jv jw jz mv kd mw kh mx kl my mj mk ml bi translated">Konstantin Nikolaev的测试分数(Test _ score)——这是Apache 2.0的书面版本，但他基于时间的训练方法对我帮助很大。</li><li id="d1f0" class="md me hi jq b jr mm jv mn jz mo kd mp kh mq kl my mj mk ml bi translated"><a class="ae km" href="https://www.kaggle.com/sudalairajkumar/simple-exploration-baseline-ga-customer-revenue" rel="noopener ugc nofollow" target="_blank">简单探索+基线——GA客户收入</a> —获得了EDA部分的直觉，并帮助建立了我的第一个切割方法的模型，这是对当前日期的预测</li><li id="b193" class="md me hi jq b jr mm jv mn jz mo kd mp kh mq kl my mj mk ml bi translated"><a class="ae km" rel="noopener" href="/analytics-vidhya/recruit-restaurant-visitor-forecasting-f9ef87ba1073">招募餐厅访客预测</a>——这也有与此次kaggle挑战类似的问题陈述)</li><li id="f903" class="md me hi jq b jr mm jv mn jz mo kd mp kh mq kl my mj mk ml bi translated"><a class="ae km" href="https://www.appliedaicourse.com/course/11/Applied-Machine-learning-course" rel="noopener ugc nofollow" target="_blank">应用人工智能</a>:</li></ol><p id="93de" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">LinkedIn:<a class="ae km" href="http://www.linkedin.com/in/mharsha-vardhan" rel="noopener ugc nofollow" target="_blank">Harsha vard Han Maagalam</a></p><p id="c5b9" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi">‌</p><p id="3a51" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi">‌</p><p id="7ccb" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi">‌</p><p id="4790" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi">‌</p><p id="f143" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi">‌</p><p id="8136" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi">‌</p><p id="a102" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi">‌</p><p id="0f8d" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi">‌</p><p id="6b64" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi">‌</p><p id="4452" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi">‌</p></div></div>    
</body>
</html>