# 停止执行拉取请求。试试这个。

> 原文：<https://medium.com/analytics-vidhya/stop-doing-pull-requests-try-this-instead-ebf659b18541?source=collection_archive---------13----------------------->

如今，使用拉请求可能是将代码导入 master 的最流行的方式。

我以前是个粉丝。在我最近的几份工作中，拉动请求是团队审查和推动工作的公认方式。

您分支，您提交您的工作，然后您打开一个拉请求——然后您让另一个开发人员审查您的代码。如果他们同意，你就合并它。

***首先，我们来说说为什么拉请求是个好主意:***

1.  它阻止开发人员未经审查就将糟糕的代码推入 master
2.  它允许跟踪和记录评审意见，如果您希望以后查看的话。

***有什么不喜欢的？***

嗯，很多人说他们不喜欢分支和创建拉请求的麻烦。他们说在这个过程中有太多的步骤，有太多的命令要输入才能到达那里。我遇到过几个人，他们不喜欢在 Git 中输入的命令数量，比如说，SVN。

但就我个人而言，我认为这些都是表面的抱怨。对我来说，输入一些额外的命令不是问题。

***我的问题比那更根本。***

**其中一个问题是滞后时间。**创建拉取请求和查看并合并请求之间的时间。通常我会创建一个 pull 请求，然后发送一条消息告诉每个人我需要一个评审，或者我会戳我团队中的一个开发人员。然后，我不得不等待——因为他们也是开发者；他们有自己的工作要处理，我不想把他们带离这个区域。所以现在我需要等待那个评论。如果我幸运的话，需要 5 分钟……如果我不幸运的话，需要一个多小时——我见过这种情况。

***好吧，等待合并有什么不好？我就不能开始做点别的吗？***

但是说我还在用户故事的中间。我的下一个改变可能会建立在仍在评审中的改变之上。所以我继续在我的分支中工作，进行新的提交。但是当我回头看我最初的拉请求时，有人正在请求一个改变，这个改变将会影响我刚才在它上面所做的所有提交。现在我弄得一团糟——更糟糕的是，我刚刚浪费了一个小时，不得不扔掉我的工作。

另一个选择是暂时搁置这个故事，做点别的事情。但是接下来你就有了上下文切换的问题。加州大学欧文分校的教授 Gloria Mark 发现，一组开发人员在分心之后平均需要 25 分钟才能回到工作中。

这就是所谓的注意力残留，在它完全转移到下一个任务之前，你的思想仍然停留在最初的任务上一段时间。即使我在工作中没有这样做，我仍然可以在查看其他人的拉请求时进行上下文切换。

关于这个工作流程，另一个问题 *ThoughtWorks* 强调的是“沉没成本谬误”。我们通常不愿意对团队已经投资的东西进行返工。

我自己以前也这样做过，一个开发人员花了很长时间把一个拉请求放在一起，而我已经要求了这么多的更改，我只是累坏了，它最终被合并了，即使我仍然对它不完全满意。

***那么有什么选择呢？***

我越来越喜欢的选择是结对编程(或者伙伴编码)。

现在，当我第一次加入我现在的公司，并被告知他们喜欢的伙伴编码方法时，我持怀疑态度。我想我们都同意，让两个人一起做一项任务并不会使速度提高一倍。

所以何必呢？这不是会让一切都慢下来吗？这就是我想象中的样子。但是在过去一年左右的时间里，我完成了大部分的结对编程工作，我不再有这种观点了。伙伴编码有巨大的优势:

1.  **完成代码和将代码合并到主代码之间不再有延迟时间**。因为是我们两个人一起做的，所以它被认为是经过评审的作品。一旦完成，我们可以立即把它取出来。
2.  **它不仅被视为已评审的工作，而且是更高质量的评审**——我工作的另一个人对我所做的改变有全面的了解。他们能更好地对我的代码给出有见地的反馈。如果是他们在驾驶，我也可以更容易地给出反馈，因为我有完整的画面。
3.  **问题在流程中更早地被发现**。你可能听过这样一句话，“一针及时，省九针”。由于发出拉取请求需要所有的步骤，开发人员最终创建的步骤越来越少——所以差别越来越大。如果他们花了一些时间掉进兔子洞，我们现在就有陷入沉没成本谬误的危险。然而，在结对编程的世界里，团队处于一个更好的位置，在太多的时间投入到错误的解决方案之前发现问题。根据我的经验，这可以节省大量时间。
4.  这是团队成员之间传递知识的有效方式。

***不过说了这么多，哥们儿编码肯定有它的弊端:***

1.  这可能会让人精疲力尽，而且很紧张。结对编程时必须保持专注，这会非常耗费精力。经常休息，定期更换键盘是非常重要的。
2.  合作者之间可能存在不平衡。如果其中一个开发人员比另一个更有统治力，您可能会陷入一个糟糕的境地，其中一个人最终会忽略另一个人的建议。如果两个人的性格发生冲突，这对每个人来说都是不愉快的经历。
3.  **很多开发人员都很内向，错过独处的时间也会对他们的精力水平产生不好的影响。**为此，我建议偶尔停止配对。

像许多软件工程实践一样，我不认为教条是一个好主意。重要的是你愿意接受新的工作方式，因为老实说，你会感到惊讶。就在一年多以前，我害怕常规的结对编程，但现在我认为这是一种非常有效的单干替代方案。即使你不想完全放弃拉请求，偶尔尝试一下并看看它会把你带到哪里也没有坏处。