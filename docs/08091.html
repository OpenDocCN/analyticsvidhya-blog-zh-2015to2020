<html>
<head>
<title>E-commerce Startup Sales Forecasting</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">电子商务创业销售预测</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/e-commerce-startup-sales-forecasting-64a5d01bbad2?source=collection_archive---------4-----------------------#2020-07-17">https://medium.com/analytics-vidhya/e-commerce-startup-sales-forecasting-64a5d01bbad2?source=collection_archive---------4-----------------------#2020-07-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="ad3a" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">如何利用有限的数据创建最佳预测，同时最大限度地减少销售损失</h2></div><p id="4b11" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">作者:詹妮弗·斯伍</em></p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/7fe4e9143ac9d4407189783ac4139c51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xHafcrq8wqESqFuGgUpIaQ.png"/></div></div></figure><h1 id="1563" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated"><strong class="ak">简介</strong></h1><p id="6d13" class="pw-post-body-paragraph ix iy hi iz b ja ky ij jc jd kz im jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi ld translated"><span class="l le lf lg bm lh li lj lk ll di"> F </span>电子商务初创企业的预测销售面临着许多挑战，包括有限的历史数据、来自零售店或其他电子商务企业的竞争、由于<strong class="iz hj">高峰</strong>T8】季节 ( <em class="jt">我将在本文</em>的后面解释这个术语)等造成的极端季节性。</p><p id="1386" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这篇文章中，我旨在分享我是如何应对这些挑战的，并确定了常见电子商务创业公司商业模式的最佳销售预测方法。为了让业务涉众看到结果，我在:<a class="ae lm" href="https://jsiwu94.shinyapps.io/EcommerceSalesForecasting/?_ga=2.43989413.1634540316.1594881151-375740093.1594881151" rel="noopener ugc nofollow" target="_blank"><strong class="iz hj">jsiwu94.shinyapps.io/EcommerceSalesForecasting</strong></a>创建了一个基本的闪亮的Web应用程序。</p><blockquote class="ln lo lp"><p id="ebb2" class="ix iy jt iz b ja jb ij jc jd je im jf lq jh ji jj lr jl jm jn ls jp jq jr js hb bi translated"><strong class="iz hj">通过此分析生成的最终预测能够将估计的年度销售损失降至约100万美元。</strong></p></blockquote><p id="7df5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你有兴趣了解更多，所有代码都可以在我的<a class="ae lm" href="https://github.com/jsiwu94/ecommerce_sales_forecasting" rel="noopener ugc nofollow" target="_blank"> github库</a>中找到。</p><h1 id="b1f2" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated"><strong class="ak">数据集</strong></h1><p id="9010" class="pw-post-body-paragraph ix iy hi iz b ja ky ij jc jd kz im jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">该数据集来自一家名为<a class="ae lm" href="https://olist.com" rel="noopener ugc nofollow" target="_blank"><strong class="iz hj">Olist</strong></a><strong class="iz hj"/>的巴西电子商务初创公司，并通过<a class="ae lm" href="https://www.kaggle.com/olistbr/brazilian-ecommerce" rel="noopener ugc nofollow" target="_blank"><strong class="iz hj">Kaggle.com</strong></a>提供。它以SQL数据库的形式出现，有许多表，包含来自客户→订单→卖家的信息。对于此分析，我将只使用来自连接下面突出显示的3个表的订单和产品信息。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es lt"><img src="../Images/31581e2f9eb93de94d99b31d7284cfe7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YKbnJMVK0Mb4iUbV9JsUiQ.png"/></div></div></figure><p id="2296" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">数据集中有<strong class="iz hj"> 73个产品类别</strong>和<strong class="iz hj"> ~32K个产品id</strong>。订单购买日期从<strong class="iz hj">2017年2月1日</strong>至<strong class="iz hj">2018年7月31日</strong>。将3个表组合在一起后，我创建了一个主数据文件，如下所示。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es lu"><img src="../Images/1eabe754d15411a956310a634f5cf94b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BEmPZvKqT89_kOOqEPMx_A.png"/></div></div></figure><h1 id="da54" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated"><strong class="ak">探索性数据分析</strong></h1><ol class=""><li id="adc3" class="lv lw hi iz b ja ky jd kz jg lx jk ly jo lz js ma mb mc md bi translated">按产品类别划分的销售和收入帕累托图<br/>在所有73个产品类别中，只有15-17个类别占据了销售额和收入的前80%。基于此，我将在本次分析中重点关注销售额前80%的产品类别(平均年收入约为1100万英镑)。</li></ol><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es me"><img src="../Images/4f717c2ae87fc4b3f18712a09148636b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IUrYoFYAhf4JY5KmWFdkvw.png"/></div></div></figure><p id="d3a8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.趋势和季节性<br/>历史销售数据显示了一些上升趋势，在2017年11月24日<strong class="iz hj">黑色星期五</strong>出现了一个极端的跳跃。事实上，销售额是正常日销售额的3倍，而且仅在一年中的某一天发生，因此很难预测。</p><p id="847a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这种现象通常被称为“<strong class="iz hj">旺季</strong>”，实际上对于任何零售/电子商务企业来说都是非常普遍的。旺季通常从万圣节持续到新年后的几个星期，<em class="jt">这段时间内有很多天都有非常火爆的销售</em>。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mf"><img src="../Images/3290b31c8758a1bd543ebf39edc75782.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nkMjOilWjBuuO7afaKfhXA.png"/></div></div></figure><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mg"><img src="../Images/859463a06e09ca566daae4d8532b27ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8HGXa6kA0XF64zm9EofNtg.png"/></div></div><figcaption class="mh mi et er es mj mk bd b be z dx translated">分解图表明销售数据呈上升趋势。</figcaption></figure><p id="eea5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.按产品类别划分的季节性和趋势<br/>让我们将时间序列放大一点，以更近距离地看到每个产品类别在黑色星期五的跳跃。正如我们在下面看到的，前3个产品类别(基于销量)的季节性和峰值效应各不相同。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ml"><img src="../Images/bea80d2b53a43aa8b9f7474890c6029d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bTq9rTWpbUkVIsyvlzRSdg.png"/></div></div></figure><p id="f6c2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">根据这些信息，我将做一个自下而上的预测，为每个产品类别创建单独的模型，并对其进行汇总以进行整体预测。然后，我将根据过去3个月中每个项目在该类别中的销售百分比，为每个项目分配类别级别预测。同一类别的每种产品或多或少会遵循相同的季节性和趋势。</p><p id="9125" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">4.年度、月度和每周季节性<br/>对于年度季节性，我只使用了第一年的数据，因为我们没有第二年的完整数据。根据下面的图表，我们可以肯定地看到在几周和几个月内有很强的季节性。稍后我将使用这些信息来调整我的模型参数。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mm"><img src="../Images/1c796906c04162ae5d73db127eb85b6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mp4nzPkyaPQbF96HGtznYg.png"/></div></div></figure><h1 id="6708" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated"><strong class="ak">接近</strong></h1><p id="0427" class="pw-post-body-paragraph ix iy hi iz b ja ky ij jc jd kz im jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">在构建预测模型之前，我首先需要确定适合Olist业务模型的目标和指标。让我们看看下面的注意事项:</p><ol class=""><li id="5d6a" class="lv lw hi iz b ja jb jd je jg mn jk mo jo mp js ma mb mc md bi translated">作为一家电子商务初创公司，主要的业务关注点是<strong class="iz hj">最大化增长和收入</strong>。</li><li id="6847" class="lv lw hi iz b ja mq jd mr jg ms jk mt jo mu js ma mb mc md bi translated">此外，Olist没有任何实体仓库，因为商品是直接从卖方运送给客户的。因此，在这种情况下，<strong class="iz hj">库存成本不是一个问题。</strong></li><li id="7531" class="lv lw hi iz b ja mq jd mr jg ms jk mt jo mu js ma mb mc md bi translated">最后，电子商务相对于零售商店的主要竞争优势是它提供的产品的可用性和多样性。</li></ol><p id="47b6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">考虑到所有这些因素，我在本次预测中的目标是<strong class="iz hj">最大限度地减少由于预测不足(预测&lt;实际)</strong>造成的销售损失。因此，我将用来评估最终预测绩效的指标是估计的年销售额损失(美元)。此外，我将使用AIC和RMSE来比较模型。</p><p id="8dd4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">训练&amp;测试拆分</strong> <br/>为了以后评估模型性能，我将我的数据拆分为训练和测试样本，截止日期为2018年5月1日(截止日期之前的训练数据和截止日期之后的测试数据)。</p><blockquote class="ln lo lp"><p id="a750" class="ix iy jt iz b ja jb ij jc jd je im jf lq jh ji jj lr jl jm jn ls jp jq jr js hb bi translated">由于这是一个时间序列，拆分不能随机进行，维持或测试数据应避免不规则性。</p></blockquote><p id="c495" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">萨里玛</strong></p><p id="358b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">区别于平稳</em> <br/>为了拟合Arima模型，我们需要确保我们的数据是平稳的(在一段时间内具有恒定的均值或方差)。一旦我对数据进行了一周的差分，时间序列数据就变得稳定了，如下所示，并通过扩展的Dickey-Fuller测试进行了验证。</p><pre class="jv jw jx jy fd mv mw mx my aw mz bi"><span id="6601" class="na kh hi mw b fi nb nc l nd ne">diff1 &lt;- diff(tsdiffts, differences = 7)<br/>autoplot(diff1, ts.colour = "#213ee2")<br/>adf.test(diff1, nlag = 1)</span></pre><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es nf"><img src="../Images/652110901ecf491fd1c8933f3f38ef0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4-d68qYjxgvaEwI7T9rpFQ.png"/></div></div></figure><p id="c534" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">分析ACF和PACF <br/> </em>下面是差分前后自相关和偏相关的比较。如下所示，在差分之前显示的ACF和PACF图显示了许多相关的滞后。然而，使用差分数据后产生的PACF和ACF图，我们可以最终确定我们的SARIMA模型的参数阶。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ng"><img src="../Images/ba95474b7ce83c3fb40afd32216d6a4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PMIwMcSTPeEpDeG0OqsYEw.png"/></div></div></figure><p id="9fc3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">训练SARIMA模型<br/> </em>根据上面的PACF和ACF图，我估计ARIMA为(4，1，2 ),季节性顺序为(0，1，2 ),重复季节性模式为7天，这是基于前面探索性数据分析部分的知识。</p><p id="d504" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">模型结果<br/>然而，由于黑色星期五的极端销售，密度曲线是偏斜的。在这种情况下，我不会将该数据视为异常值，因为我们确实希望在下一个旺季预测中考虑这一跳跃。</em></p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es nh"><img src="../Images/8805ca92e1a18d4ab8bd42387e382949.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aPJH1FrKdaO_Onl7CbDUQQ.png"/></div></div></figure><p id="cdd5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> TSLM </strong></p><p id="1514" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">训练TSLM模型<br/> </em>除了萨里玛，我还构建了一个多元回归模型来比较业绩。为了更好地捕捉季节性，我为月和周创建了虚拟变量。此外，我在月内添加了傅立叶。</p><pre class="jv jw jx jy fd mv mw mx my aw mz bi"><span id="2d0f" class="na kh hi mw b fi nb nc l nd ne">fit.tslm &lt;- traintsb %&gt;% <br/> model(TSLM(sales_volume ~ month + trend() + season(period="week") + fourier(period = "month",3)))<br/>fit.tslm %&gt;% report()</span><span id="d81c" class="na kh hi mw b fi ni nc l nd ne">fc.reg &lt;- fit.tslm %&gt;% predict(testtsb)<br/>fc.reg %&gt;% accuracy(testtsb)</span></pre><p id="0123" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">模型结果<br/> </em>虽然模型得出的AIC比上面的SARIMA低得多，但它仍然没有捕捉到测试数据集的正确趋势和季节性，如下所示。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es nj"><img src="../Images/73413290ee1fbb43bc5431c448bb4789.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zia1edXUj_k-RXZ2q0WK0Q.png"/></div></div></figure><p id="64da" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">萨里马克斯</strong></p><p id="0dfc" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">训练SARIMAX模型</em> <br/>使用SARIMAX，我的目的是将我们在多元回归中使用的额外季节性回归量结合到SARIMA模型中。此外，我在这个模型中加入了一个外部数据，即巴西国庆节，作为回归变量，同时加入了针对周、月和年的傅立叶变换，以更好地捕捉季节性。</p><pre class="jv jw jx jy fd mv mw mx my aw mz bi"><span id="07ff" class="na kh hi mw b fi nb nc l nd ne">fit.arlm &lt;- traintsb %&gt;% <br/>        model(SARIMAX = ARIMA(sales_volume ~ month + weekday +<br/>                                             holiday + day + <br/>                                             trend() + <br/>                                        fourier(period = "week",1) +<br/>                                       fourier(period = "month",3) +<br/>                                       fourier(period = "year",5)))<br/>fit.arlm %&gt;% report()</span><span id="f79e" class="na kh hi mw b fi ni nc l nd ne">fc.arlm &lt;- fit.arlm %&gt;% predict(testtsb)<br/>fc.arlm %&gt;% accuracy(testtsb)</span></pre><p id="1237" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">模型结果<br/></em></p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es nk"><img src="../Images/2259d860b76189cc003403908654bff6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PT5dVsDOboc7KOO_2W298A.png"/></div></div></figure><p id="b966" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">萨里玛、萨里马克斯、ETS和TSLM </strong></p><p id="c989" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">将上述所有经典时间序列模型与ets进行比较，基于测试数据性能的前2个模型是ETS和SARIMA。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es nl"><img src="../Images/76c2f5b5c50f87af8daa9faa573f0c9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ra7Cs3Yvs6y9qbIhpyE8_w.png"/></div></div></figure><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es nm"><img src="../Images/a140f63676b5f57c083dcff8296b55c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_dC9EaBYvXP-vaZB8mb_uw.png"/></div></div></figure><p id="2347" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">集合TS模型</strong></p><p id="8077" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">由于萨里玛的趋势对于这个数据集来说有点太高，我决定创建一个集合模型来平均ETS和ARIMA的预测。在所有之前的迭代中，这个模型是我的首选模型。</p><pre class="jv jw jx jy fd mv mw mx my aw mz bi"><span id="9603" class="na kh hi mw b fi nb nc l nd ne">fit_ensemble &lt;- traintsb %&gt;% model(ensemble = (ARIMA(sales_volume ~ 0 + pdq(4, 1, 2) + PDQ(0, 1, 1, period = 7) +<br/>                                               ETS(sales_volume))/2)</span><span id="03ec" class="na kh hi mw b fi ni nc l nd ne">fc_ensemble &lt;- fit_ensemble %&gt;% predict(testtsb)<br/>fcst_ensemble &lt;- fit_ensemble %&gt;% predict(alltsb)</span><span id="bc73" class="na kh hi mw b fi ni nc l nd ne">fc_ensemble %&gt;% accuracy(testtsb)</span></pre><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es nn"><img src="../Images/b88a68075fc1877bad4a154b8a711386.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*muedUZCzWYo0C1a10I1T8A.png"/></div></div></figure><p id="a1c1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> FB先知</strong></p><p id="2441" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我已经尝试了经典时间序列预测模型的多种组合，并了解到其中没有一个能够很好地捕捉数据中的趋势和季节性，我试图将数据拟合到脸书先知算法中。</p><p id="7395" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用没有任何参数调整的自动prophet模型将产生与任何以前的时间序列模型相同的结果。因此，在这种情况下，我的目标是找到产生最低测试RMSE的最佳参数。</p><p id="2f5f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">参数调整<br/> </em>为了调整模型参数，我创建了自定义季节性方面，调整的参数包括<strong class="iz hj">变化点标度</strong>、<strong class="iz hj">先验标度</strong>和<strong class="iz hj">傅立叶阶</strong>。我还选择<strong class="iz hj">增长</strong>为我的prophet模型的“线性”,因为对于大多数初创公司来说，增长相对来说是线性的，并且需要一段时间才能达到成熟或开始平稳。</p><p id="75d7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">模型结果<br/> </em>基于最小化测试RMSE找到的最佳参数如下。</p><pre class="jv jw jx jy fd mv mw mx my aw mz bi"><span id="a9dc" class="na kh hi mw b fi nb nc l nd ne">prophet(growth="linear",<br/>              holidays = hldydf,<br/>              daily.seasonality=FALSE, <br/>              yearly.seasonality = FALSE, <br/>              weekly.seasonality = FALSE,<br/>              seasonality.mode = "multiplicative",<br/>              changepoint.prior.scale = 0.04,<br/>              seasonality.prior.scale = 20,<br/>              holidays.prior.scale = 35) %&gt;% <br/>                    add_seasonality(name="monthly",<br/>                                  period=30.5,<br/>                                  fourier.order = 45) %&gt;% <br/>                    add_seasonality(name="weekly",<br/>                                  period=7,<br/>                                  fourier.order = 20) %&gt;% <br/>                    add_seasonality(name="yearly",<br/>                                  period=365.25,<br/>                                  fourier.order = 20) %&gt;% <br/>                    add_seasonality(name="quarter",<br/>                                  period=365.25/4,<br/>                                  fourier.order = 5,<br/>                                  prior.scale = 15)</span></pre><p id="d919" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如图所示，该模型能够正确捕捉数据集中的趋势和季节性。测试RMSE也低于首选的经典时间序列模型，这是一个集合的ETS和ARIMA。基于此，我将选择这个模型作为最佳模型，并用它来预测未来的销售。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es no"><img src="../Images/cbcc1f40642b831db35b3e7acb65619b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M5l9d0vZrraMU3janLRebA.png"/></div></div></figure><h1 id="c749" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated"><strong class="ak">最终结果</strong></h1><p id="fb1c" class="pw-post-body-paragraph ix iy hi iz b ja ky ij jc jd kz im jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">与基于ETS和ARIMA的集合模型相比，通过调整后的prophet模型，我能够正确捕捉数据中的趋势和季节性，同时将销售损失最小化超过100万美元。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es np"><img src="../Images/df4478404386f5bd473d441294c7f46e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lNpTBG-CnwL68Y6Rjj3nQw.png"/></div></div></figure><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es nq"><img src="../Images/875bcf97787a28db882509ef16c4b8b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f_NIrDWN0PiJrGZGiACrqQ.png"/></div></div></figure><h1 id="e2fb" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated"><strong class="ak">演示</strong></h1><p id="2d57" class="pw-post-body-paragraph ix iy hi iz b ja ky ij jc jd kz im jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">为了以可操作的格式向利益相关者呈现结果，我创建了一个基本的闪亮WebApp。该应用程序将每个产品类别的预测和实际比较以及实际预测数字可视化在一个表格中，该表格可以轻松粘贴到excel中(<a class="ae lm" href="https://jsiwu94.shinyapps.io/EcommerceSalesForecasting/?_ga=2.43989413.1634540316.1594881151-375740093.1594881151" rel="noopener ugc nofollow" target="_blank">链接此处</a>)。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es nr"><img src="../Images/ff938588a00f7d0e9b479786cf057481.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*8OGGbBFFiOvcMcjfxej7BQ.gif"/></div></div></figure><h1 id="b53a" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">关键要点</h1><p id="1a73" class="pw-post-body-paragraph ix iy hi iz b ja ky ij jc jd kz im jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">利用有限的历史数据和极端的季节性进行预测具有挑战性，但通过正确的业务模型评估和理解，它仍然可以帮助公司最小化损失和最大化收益。在实际商业应用中，这些预测数字仍然是“原始的”，因为它们没有考虑任何未来的促销计划或价格变化。因此，一旦分析师完成这些预测，他们通常会与财务和营销团队会面，讨论预测中未考虑的任何外部因素，并相应地重新调整预测。</p><h1 id="3249" class="kg kh hi bd ki kj kk kl km kn ko kp kq io kr ip ks ir kt is ku iu kv iv kw kx bi translated">参考</h1><p id="9705" class="pw-post-body-paragraph ix iy hi iz b ja ky ij jc jd kz im jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated"><a class="ae lm" href="https://r4ds.had.co.nz/many-models.html" rel="noopener ugc nofollow" target="_blank">https://r4ds.had.co.nz/many-models.html</a></p><p id="638a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae lm" href="https://towardsdatascience.com/implementing-facebook-prophet-efficiently-c241305405a3" rel="noopener" target="_blank">https://towards data science . com/implementing-Facebook-prophet-efficient-c 241305405 a3</a></p><p id="fa93" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">【https://facebook.github.io/prophet/ T4】</p><p id="bf13" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae lm" href="https://online.stat.psu.edu/stat510/lesson/3" rel="noopener ugc nofollow" target="_blank">https://online.stat.psu.edu/stat510/lesson/3</a></p><p id="7441" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae lm" href="https://shiny.rstudio.com/gallery/" rel="noopener ugc nofollow" target="_blank">https://shiny.rstudio.com/gallery/</a></p><p id="38b4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae lm" href="https://robjhyndman.com/hyndsight/fable/" rel="noopener ugc nofollow" target="_blank">https://robjhyndman.com/hyndsight/fable/</a></p></div></div>    
</body>
</html>