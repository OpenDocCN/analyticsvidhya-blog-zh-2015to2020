<html>
<head>
<title>Why should you always use Numpy?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么要一直用Numpy？</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/why-should-you-always-use-numpy-c4adece8a870?source=collection_archive---------11-----------------------#2020-06-18">https://medium.com/analytics-vidhya/why-should-you-always-use-numpy-c4adece8a870?source=collection_archive---------11-----------------------#2020-06-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/e15c51e8ab421e8e88f8a94afa175d62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bXWnHPRbLL6NU0unm-8C7A.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">由jcomp/Freepik.com设计</figcaption></figure><p id="4f0b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">数据科学和大数据密切相关，因为数据量巨大，伟大的数据科学见解才有可能实现。</p><p id="14f4" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">当学习Python进行数据科学时，我们首先介绍的两个库是<strong class="iw hj"> <em class="js"> Pandas </em> </strong>和<strong class="iw hj"> <em class="js"> Numpy。</em> </strong></p><h2 id="d747" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jf ke kf kg jj kh ki kj jn kk kl km kn bi translated">为什么使用Numpy如此重要？</h2><p id="4adb" class="pw-post-body-paragraph iu iv hi iw b ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn ks jp jq jr hb bi translated">Numpy比其他方法更好，因为它在后台使用C语言，C是一种更高效、更快的低级语言。</p><h2 id="56ba" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jf ke kf kg jj kh ki kj jn kk kl km kn bi translated">例子</h2><ul class=""><li id="ac6b" class="kt ku hi iw b ix ko jb kp jf kv jj kw jn kx jr ky kz la lb bi translated"><strong class="iw hj">创建一个平方函数(n * n)；</strong> 4.5秒28.5毫秒</li><li id="8f36" class="kt ku hi iw b ix lc jb ld jf le jj lf jn lg jr ky kz la lb bi translated"><strong class="iw hj">创建一个平方函数(n * * 2)；</strong>7.2秒72.1毫秒<em class="js"/></li><li id="2863" class="kt ku hi iw b ix lc jb ld jf le jj lf jn lg jr ky kz la lb bi translated"><strong class="iw hj">用列表理解；3.93秒32.1毫秒</strong></li><li id="a359" class="kt ku hi iw b ix lc jb ld jf le jj lf jn lg jr ky kz la lb bi translated"><strong class="iw hj">同图()；4.84秒46.8毫秒</strong></li><li id="2338" class="kt ku hi iw b ix lc jb ld jf le jj lf jn lg jr ky kz la lb bi translated"><strong class="iw hj">同NumPy63.5毫秒392秒</strong></li><li id="4484" class="kt ku hi iw b ix lc jb ld jf le jj lf jn lg jr ky kz la lb bi translated"><strong class="iw hj">用NumPy并转换成列表。1.68秒16.1毫秒</strong></li></ul><p id="c4f6" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">首先，创建一个样本:</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="6639" class="jt ju hi lm b fi lq lr l ls lt">import numpy as np</span><span id="9e64" class="jt ju hi lm b fi lu lr l ls lt">#Create a sample with 20 mio. from 0 to 100<br/>sample = np.random.randint(0, 100, 20000000)</span></pre><ul class=""><li id="6d4d" class="kt ku hi iw b ix iy jb jc jf lv jj lw jn lx jr ky kz la lb bi translated"><strong class="iw hj">创建一个平方函数(n * n)；</strong></li></ul><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="146d" class="jt ju hi lm b fi lq lr l ls lt">#Creating a square iterative function (n**2)<br/>def square_f(numbers):<br/>    square = []<br/>    for num in numbers:<br/>        square.append(num * num)<br/>    return square</span><span id="7629" class="jt ju hi lm b fi lu lr l ls lt">%timeit square_f(sample)</span></pre><p id="2e57" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">每循环4.5秒28.5毫秒(平均标准偏差戴夫。7次运行，每次1个循环)</p><ul class=""><li id="5cfb" class="kt ku hi iw b ix iy jb jc jf lv jj lw jn lx jr ky kz la lb bi translated"><strong class="iw hj">创建一个平方函数(n * * 2)；</strong></li></ul><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="48b6" class="jt ju hi lm b fi lq lr l ls lt">#Creating a square iterative function (n**2)<br/>def square_f2(numbers):<br/>    square = []<br/>    for num in numbers:<br/>        square.append(num ** 2)<br/>    return square</span><span id="52ef" class="jt ju hi lm b fi lu lr l ls lt">%timeit square_f2(sample)</span></pre><p id="4d56" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">每循环7.2秒72.1毫秒(平均标准时间戴夫。7次运行，每次1个循环)</p><p id="fb79" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如上图，<strong class="iw hj"> <em class="js"> n*n </em> </strong>比<strong class="iw hj"> <em class="js"> n**2 </em> </strong>快1.6倍。</p><ul class=""><li id="ac96" class="kt ku hi iw b ix iy jb jc jf lv jj lw jn lx jr ky kz la lb bi translated"><strong class="iw hj">用列表领悟；</strong></li></ul><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="ff4d" class="jt ju hi lm b fi lq lr l ls lt">#With list comprehension<br/>def square_comprehension(numbers):<br/>    return [num ** num for num in numbers]</span><span id="3a60" class="jt ju hi lm b fi lu lr l ls lt">%timeit square_comprehension(sample)</span></pre><p id="9128" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">每循环3.93秒32.1毫秒(平均标准时间戴夫。7次运行，每次1个循环)</p><ul class=""><li id="5e2e" class="kt ku hi iw b ix iy jb jc jf lv jj lw jn lx jr ky kz la lb bi translated"><strong class="iw hj">同图()；</strong></li></ul><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="40a5" class="jt ju hi lm b fi lq lr l ls lt">#With map()<br/>def square_map(numbers):<br/>    return list(map(lambda num: num * num, numbers))</span><span id="4a30" class="jt ju hi lm b fi lu lr l ls lt">%timeit square_map(sample)</span></pre><p id="3a58" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">4.84秒46.8毫秒(平均标准差戴夫。7次运行，每次1个循环)</p><ul class=""><li id="23f3" class="kt ku hi iw b ix iy jb jc jf lv jj lw jn lx jr ky kz la lb bi translated"><strong class="iw hj">同Numpy</strong></li></ul><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="1b74" class="jt ju hi lm b fi lq lr l ls lt">#With NumPy<br/>%timeit np.power(sample,2)</span></pre><p id="758a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">每循环63.5毫秒392秒(平均标准时间戴夫。7次运行，每次10个循环)</p><ul class=""><li id="e826" class="kt ku hi iw b ix iy jb jc jf lv jj lw jn lx jr ky kz la lb bi translated"><strong class="iw hj">用NumPy并转换成列表；</strong></li></ul><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="c325" class="jt ju hi lm b fi lq lr l ls lt">#With NumPy and converting to list<br/>%timeit list(np.power(sample,2))</span></pre><p id="3f78" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">每循环1.68秒16.1毫秒(平均标准时间戴夫。7次运行，每次1个循环)</p><h1 id="55a7" class="ly ju hi bd jv lz ma mb jz mc md me kd mf mg mh kg mi mj mk kj ml mm mn km mo bi translated">结论</h1><p id="08c4" class="pw-post-body-paragraph iu iv hi iw b ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn ks jp jq jr hb bi translated">如上所述，计算平方数最快的3种方法是:</p><ol class=""><li id="37b6" class="kt ku hi iw b ix iy jb jc jf lv jj lw jn lx jr mp kz la lb bi translated">numpy(63.5毫秒)</li><li id="1449" class="kt ku hi iw b ix lc jb ld jf le jj lf jn lg jr mp kz la lb bi translated">Numpy转换为列表(1.68秒)</li><li id="6786" class="kt ku hi iw b ix lc jb ld jf le jj lf jn lg jr mp kz la lb bi translated">列表理解(3.93秒)</li></ol><p id="b05f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">Numpy比列表理解快61倍，但是有时我们需要使用这个值作为列表。即使作为一个列表，Numpy方法也比其他方法至少快2，34。当它用于大量数据时，这些微小的调整会产生很大的影响。</p><p id="a21b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这些数值是我在配有英特尔i7、16gb内存的电脑上获得的。</p><p id="cb13" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">试着做自己，试着做其他的比较，比如在<strong class="iw hj">熊猫</strong>中<code class="du mq mr ms lm b">.iloc[]</code>、<code class="du mq mr ms lm b">.loc[]</code>和<code class="du mq mr ms lm b">.query()</code>的表现差异。</p><p id="267d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">请在评论中告诉你得到了什么结果。</p></div></div>    
</body>
</html>