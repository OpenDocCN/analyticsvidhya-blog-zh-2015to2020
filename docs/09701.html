<html>
<head>
<title>NER Tagging in Python using spaCy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用空间在 Python 中进行 NER 标记</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/ner-tagging-in-python-using-spacy-c66cf01d3c7f?source=collection_archive---------8-----------------------#2020-09-17">https://medium.com/analytics-vidhya/ner-tagging-in-python-using-spacy-c66cf01d3c7f?source=collection_archive---------8-----------------------#2020-09-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="0a34" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">提取命名实体</h2></div><p id="eb6e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这篇文章中，我讨论了命名实体的含义、命名实体识别技术以及如何使用 spaCy 提取命名实体。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es jt"><img src="../Images/f66939930d5d9807f28898183437334f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L7emhheRAezzrd-DvF0SUw.png"/></div></div></figure><h2 id="de01" class="kf kg hi bd kh ki kj kk kl km kn ko kp jg kq kr ks jk kt ku kv jo kw kx ky kz bi translated"><strong class="ak">命名实体</strong></h2><p id="e004" class="pw-post-body-paragraph ix iy hi iz b ja la ij jc jd lb im jf jg lc ji jj jk ld jm jn jo le jq jr js hb bi translated">术语“命名实体”传统上用于指在给定文本中遇到的一组人、组织和地点名称。进一步的日期、货币单位或百分比等。通常基于本地语法使用相同的技术来包含和检测。</p><p id="8f35" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="lf">例子:——“脸书在 2014 年以 160 亿美元收购了 WhatsApp”</em></p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es lg"><img src="../Images/641d15b44b393253709b9c1904377fb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7jwRrZMjZcHBHZ0JkC_J_g.png"/></div></div></figure><p id="bfba" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">上例中出现的命名实体是:-</p><ul class=""><li id="fa21" class="lh li hi iz b ja jb jd je jg lj jk lk jo ll js lm ln lo lp bi translated">脸书组织</li><li id="3ad7" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated">WhatsApp — ORG</li><li id="afd4" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated">2014 年—日期</li><li id="1828" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated">160 亿美元——钱</li></ul><h2 id="dfc6" class="kf kg hi bd kh ki kj kk kl km kn ko kp jg kq kr ks jk kt ku kv jo kw kx ky kz bi translated"><strong class="ak">命名实体识别</strong></h2><p id="0aa5" class="pw-post-body-paragraph ix iy hi iz b ja la ij jc jd lb im jf jg lc ji jj jk ld jm jn jo le jq jr js hb bi translated">它是一种提取命名实体并将它们分类到预定义类别(如组织、人名、日期、时间、语言等)的技术。)从可获得的文本。它也被称为<em class="lf">实体识别、实体分块和实体提取</em>。</p><h2 id="4e87" class="kf kg hi bd kh ki kj kk kl km kn ko kp jg kq kr ks jk kt ku kv jo kw kx ky kz bi translated"><strong class="ak">NER 的应用</strong></h2><p id="20f0" class="pw-post-body-paragraph ix iy hi iz b ja la ij jc jd lb im jf jg lc ji jj jk ld jm jn jo le jq jr js hb bi translated">我们可以使用 NER 来标记文档，并且基于实体标签的值和类型，这些可以在各种场景中使用。使用这种技术可以获得关于文档中引用的关键命名实体的基本概念。</p><p id="577b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，基于标签的类型和频率来标记命名实体可以为各种场景(如新闻文章、技术文章、客户投诉(例如，可以标记与特定产品相关的投诉))而工作。一旦文章被标记，它可以进一步用于推荐任务或增强在大量可用文章中的搜索能力。</p></div><div class="ab cl lv lw gp lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="hb hc hd he hf"><h2 id="e920" class="kf kg hi bd kh ki kj kk kl km kn ko kp jg kq kr ks jk kt ku kv jo kw kx ky kz bi translated">使用空间提取命名实体</h2><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mc"><img src="../Images/e959a910981aab3498308d73ab0e6e72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-m5b17hUZMSFb8pl0ljlwg.png"/></div></div></figure><ul class=""><li id="2d2a" class="lh li hi iz b ja jb jd je jg lj jk lk jo ll js lm ln lo lp bi translated"><strong class="iz hj"> spacy.load() </strong>是一个方便的包装器，它读取语言 ID 和管道组件，初始化语言类，加载模型数据，并返回它。</li><li id="9898" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated"><strong class="iz hj">en _ core _ web _ sm</strong>——可用的预训练统计模型为<strong class="iz hj">英语</strong>，在 OntoNotes 上训练的英语多任务 CNN。分配上下文特定的令牌向量、位置标签、依赖性分析和<em class="lf">命名实体</em>。</li></ul><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es md"><img src="../Images/8494d3b3ea8ee645cc3de1d0ead4d7cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DGYR4WAx-otCfwVJwAfQEA.png"/></div></div><figcaption class="me mf et er es mg mh bd b be z dx translated">在本例中，spaCy 的 NER 管道组件确定了三个实体</figcaption></figure><p id="497b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">由 spaCy 的 NER 管道组件标识的命名实体的集合作为<em class="lf"> Doc 对象</em>的<em class="lf"> ents 属性</em>可用。</p><ul class=""><li id="572b" class="lh li hi iz b ja jb jd je jg lj jk lk jo ll js lm ln lo lp bi translated">在上面的例子中，我已经显示了<strong class="iz hj"> ent.text </strong>(原始实体文本)和<strong class="iz hj"> ent.label_ </strong>(实体类型描述)。除了 ent.text 和 ent.label_ 其他可用的实体注释有 ent.label、ent.start、ent.end、ent.start_char 和 ent.end_char。</li><li id="004f" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated">ent.label_ type — ORG(公司、代理、机构等。)、NORP(国籍或宗教或政治团体)和 GPE(国家、城市、州)在给定文本中可用。其他可能的值有人员、语言、金钱、日期、时间、产品、事件等。</li></ul><h2 id="c3be" class="kf kg hi bd kh ki kj kk kl km kn ko kp jg kq kr ks jk kt ku kv jo kw kx ky kz bi translated">将命名实体添加到 span</h2><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mi"><img src="../Images/18313216d63f2e4e305119caa6857625.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l1bb93sEK1qBCM9N_9ZYCA.png"/></div></div><figcaption class="me mf et er es mg mh bd b be z dx translated">不将“Suprdaily”识别为命名实体</figcaption></figure><p id="147f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这个例子中，spaCy 将 Mumbai 标识为一个命名实体，而忽略了 Suprdaily(一个创业组织)。</p><p id="00bb" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，为了将 Suprdaily 添加为命名实体，我们可以使用“spacy.tokens.Span ”,它将 doc 对象、要添加的命名实体的标记的开始和结束范围以及一个标签值(在我们的示例中为 label=" ORG ")作为参数。</p><p id="eea3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在为新实体创建一个 span 之后，需要将它附加到现有的 doc 对象 doc.ents 上。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mj"><img src="../Images/2da9bffd65cdf719c791b32b5e81d916.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WWfipfAK6o9Vj_KDnnCPoQ.png"/></div></div><figcaption class="me mf et er es mg mh bd b be z dx translated">现在,“Suprdaily”和“Mumbai”都被确定为命名实体。</figcaption></figure><p id="0837" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在处理您自己的自定义数据时，这在许多情况下都很有用。</p><h2 id="271c" class="kf kg hi bd kh ki kj kk kl km kn ko kp jg kq kr ks jk kt ku kv jo kw kx ky kz bi translated">可视化命名实体</h2><p id="dc36" class="pw-post-body-paragraph ix iy hi iz b ja la ij jc jd lb im jf jg lc ji jj jk ld jm jn jo le jq jr js hb bi translated">我们可以使用<strong class="iz hj"> displacy </strong>来可视化命名实体。使用 displacy.render，我们可以传递样式为“ent”的 doc 对象(即要可视化的对象)。这将用不同的颜色突出显示各种类型的实体。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mk"><img src="../Images/bebad4d4e0f66a8e0fd6a8bbaadee93c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EFMTrkDrO7DRAoGbvdBTXg.png"/></div></div></figure><p id="2a0f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你也可以使用<strong class="iz hj">选项</strong>参数来显示特定类型的实体或者改变高亮显示的颜色。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es ml"><img src="../Images/ca024d922bad06dc54505090c67f9513.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Da123i_m6Bq__sljPXslRQ.png"/></div></div></figure><p id="0d3b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">虽然 3 亿美元也被命名为“MONEY”类型的实体，但由于我们使用 options 只过滤了“ORG”类型，因此它没有被突出显示。</p><p id="9336" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以在这里访问示例<a class="ae mm" href="https://github.com/poojamahajan0712/medium_blog/blob/master/NLP/NER.ipynb" rel="noopener ugc nofollow" target="_blank">中使用的代码。</a></p></div><div class="ab cl lv lw gp lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="hb hc hd he hf"><h2 id="43c0" class="kf kg hi bd kh ki kj kk kl km kn ko kp jg kq kr ks jk kt ku kv jo kw kx ky kz bi translated">参考</h2><ul class=""><li id="6c54" class="lh li hi iz b ja la jd lb jg mn jk mo jo mp js lm ln lo lp bi translated"><a class="ae mm" href="https://spacy.io/api/top-level" rel="noopener ugc nofollow" target="_blank">https://spacy.io/api/top-level</a></li><li id="ee9c" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated"><a class="ae mm" href="https://spacy.io/models/en" rel="noopener ugc nofollow" target="_blank">https://spacy.io/models/en</a></li><li id="6726" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated"><a class="ae mm" href="https://spacy.io/usage/linguistic-features#setting-entities" rel="noopener ugc nofollow" target="_blank">https://spacy.io/usage/linguistic-features#setting-entities</a></li><li id="8c82" class="lh li hi iz b ja lq jd lr jg ls jk lt jo lu js lm ln lo lp bi translated"><a class="ae mm" href="https://onlinelibrary.wiley.com/doi/pdf/10.1002/9781119268567.app5" rel="noopener ugc nofollow" target="_blank">https://online library . Wiley . com/doi/pdf/10.1002/9781119268567 . app 5</a></li></ul></div></div>    
</body>
</html>