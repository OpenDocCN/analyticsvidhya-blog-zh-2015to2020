<html>
<head>
<title>NBA Player Salaries Prediction with Linear Regression</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用线性回归预测NBA球员工资</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/nba-player-salaries-prediction-with-linear-regression-2b90280ff4e8?source=collection_archive---------7-----------------------#2020-02-24">https://medium.com/analytics-vidhya/nba-player-salaries-prediction-with-linear-regression-2b90280ff4e8?source=collection_archive---------7-----------------------#2020-02-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/389310f925d50a9125472c2cfb87f88e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YPlaBxvWiRKESPjy"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae iu" href="https://unsplash.com/@neonbrand?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> NeONBRAND </a>拍摄的照片</figcaption></figure><p id="d45a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这篇文章是建立线性回归模型预测NBA球员工资的快速指南。我的目的是探索如何利用各种NBA统计数据来预测1990年至2020年NBA球员的工资，这个项目的目标是找出哪些统计数据是NBA球员工资的最佳预测指标，以及进行球员工资预测。</p><h1 id="8e58" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">方法学</h1><ol class=""><li id="7eb9" class="kr ks hi ix b iy kt jc ku jg kv jk kw jo kx js ky kz la lb bi translated"><strong class="ix hj">数据来源</strong></li></ol><p id="e5aa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">球员工资数据集:</strong>从<a class="ae iu" href="https://hoopshype.com/salaries/players/" rel="noopener ugc nofollow" target="_blank">篮球炒作</a>网站上抓取球员姓名/工资信息。获得的特征包括球员姓名、年份和薪水。</p><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lc"><img src="../Images/0cc5e33b4dbf5362004b1cace993c601.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4zpqbg6LTYowxm-c"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">篮球炒作网站的快照</figcaption></figure><p id="df8a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">球员统计数据集:</strong>从<a class="ae iu" href="https://stats.nba.com/player/76001/career/" rel="noopener ugc nofollow" target="_blank"> NBA </a>网站抓取球员姓名/球员统计。获得的特征包括球员姓名、赛季、球队、年龄、GP等。</p><p id="2897" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">以上两个数据集都是使用Beautifulsoup和Selenium抓取的，并保存为。我的本地文件夹中的pkl文件。</p><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lh"><img src="../Images/cf78607be3688ec496d5a443dbcdfd56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JFX6xp9mFoj6OoDW"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">NBA网站的快照</figcaption></figure><p id="0831" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.<strong class="ix hj">数据清理</strong></p><p id="5990" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在进入EDA之前，清理我的特征并做一些数据预处理。</p><p id="2caa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">球员姓名:</strong>改变从NBA网站获得的球员姓名的格式，即去掉中间的逗号，并调换名字和姓氏的顺序，以便与从Hoops Hype网站获得的姓名相匹配。</p><p id="d302" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> Salary: </strong>删除该特性中的逗号，并将其转换为整数类型。</p><p id="fb98" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> Season: </strong>删除Season特性中的连字符，以匹配从Hoops Hype网站获得的year特性。</p><p id="94d6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">合并薪资和统计数据:</strong>加入球员姓名和年份的薪资表和统计表。</p><p id="7076" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">取平均值:</strong>按球员姓名和年份对组合数据进行分组，取每个球员工资和统计数据的年平均值。</p><p id="df76" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.<strong class="ix hj"> EDA </strong></p><p id="5b86" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我们进一步深入之前，对您的数据有一个直观的了解是很重要的。</p><p id="4652" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可以查看数据的配对图，以了解每个特征的分布情况，以及某些特征是否严重向左/向右倾斜。</p><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es li"><img src="../Images/52cda3f497c1cc4da075680db1e8ad44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*C_QK2hyWfHNjFBTU"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">我的4个特征和目标的配对图</figcaption></figure><p id="59da" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们还可以查看热图，以了解某些特征是否高度相关，并发现我们的特征和目标(工资)之间的关系。</p><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lj"><img src="../Images/1dc4bd925055e888d094a6cfb4a5d5e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rgqstZ4HDS15Xq9V"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">我的一些数据变量的热图</figcaption></figure><p id="a366" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">4.<strong class="ix hj">特征选择和建模</strong></p><p id="a849" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在将数据拟合到statsmodels中的普通最小二乘模型时，使用特征相关性和p值来执行特征选择。</p><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/ef408a2e6262e93880d5b192ae6d34aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_wHpd7e-MMM5bp4KChywCg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">普通最小二乘汇总输出的快照</figcaption></figure><p id="c68c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在执行特征选择之后，最终模型具有9个特征，包括年龄、BLK、3PM、BLK、REB、FTP、GP、GS、STL和MIN。</p><p id="c712" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">建模过程包括三种不同的线性回归模型，它们分别是OLS、拉索和线性回归。这三个模型给我的r平方值都在0.64左右。然而，Lasso给了我一个稍低的MSE，所以这是我用来做进一步分析的。</p><h1 id="61b3" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">结果</h1><p id="ae95" class="pw-post-body-paragraph iv iw hi ix b iy kt ja jb jc ku je jf jg ll ji jj jk lm jm jn jo ln jq jr js hb bi translated">为了更好地理解最终的模型(套索)是如何工作的，让我们看看这些功能是如何执行的。下面是特征重要性的图表。</p><figure class="ld le lf lg fd ij er es paragraph-image"><div class="er es lo"><img src="../Images/2e2aa280715ecb445f3eeabd33530590.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*PFgSsOZMkbb4kq_AbQ9mlQ.png"/></div></figure><p id="bec0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">贝塔系数越高，特征越重要。对球员工资有积极影响的最强预测因素是free_throwp(罚球百分比或英尺%)，第二强预测因素是GP(上场比赛)，第三强预测因素是three_pmade(三分球进球数或3PM)。该模型的截距为13.8，因此当罚球命中率增加1%时，工资将增加140万美元。然而，当比赛或三分球进球数增加1时，工资增加130万英镑。</p><p id="46ce" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们也可以看看剩余图，看看模型做得怎么样。下面是y残差图和y预测图。</p><figure class="ld le lf lg fd ij er es paragraph-image"><div class="er es lp"><img src="../Images/f5b9661fb22da6cf42262bf9d104560d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1068/0*8Hz0X1WM4QcWd_w8"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">y残差(对数)和y预测(对数)散点图</figcaption></figure><p id="318e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我的y残差散点图和y预测散点图有点随机，但也可以从图表中观察到趋势。工资预测越低，残值越大。</p><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lq"><img src="../Images/5915f8727eaf68cff842630f37753907.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QbwM4fgX_lVpj-myFVOPNw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">左图:工资预测(log)小于13，绝对残差(log)大于2时的最小值直方图；右图:工资预测(对数)小于13时的最小值直方图</figcaption></figure><p id="2de6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">深入挖掘后，我怀疑这与MIN(上场分钟数)特性有关，当残差的绝对值较大且预测值较小时，MIN(上场分钟数)特性通常具有较小的值。</p><figure class="ld le lf lg fd ij er es paragraph-image"><div class="er es lr"><img src="../Images/a4eedcc09647627d57be35bdd43fc9cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/0*qkCIMdWXXkywM75F"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">y残差的Q-Q图</figcaption></figure><p id="286d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我的y残差Q-Q图总体上是正态分布的，在左下角有轻微的左偏。这表明该模型在高估薪资金额方面存在一些异常值。</p><h1 id="69bb" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">结论</h1><p id="e097" class="pw-post-body-paragraph iv iw hi ix b iy kt ja jb jc ku je jf jg ll ji jj jk lm jm jn jo ln jq jr js hb bi translated">我的模型建议有抱负的NBA球员专注于提高罚球命中率、比赛场次和三分球命中率等方面的统计数据，因为这些是影响薪水的最重要因素。</p><p id="0545" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然而，这只是根据玩家在游戏中的表现所做的薪资预测。接下来，看看一个球员的名人身份是否会影响他的收入，这将会很有趣。我可以从一名球员的社交媒体账户中收集数据，看看他的粉丝数量或他在人气竞赛中的排名是否会对薪水产生影响。此外，我也可以只关注最近几年的工资和统计数据，以防止因通货膨胀而导致工资金额大幅波动。</p><p id="aaf3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如需更多信息，请随时<a class="ae iu" href="http://annieshieh12@gmail.com" rel="noopener ugc nofollow" target="_blank">联系我</a>！你也可以在<a class="ae iu" href="https://github.com/anshieh12/NBA_player_salary_prediction" rel="noopener ugc nofollow" target="_blank"> Github </a>上查看这个项目的源代码和文档。</p></div></div>    
</body>
</html>