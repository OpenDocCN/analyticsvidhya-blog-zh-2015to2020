<html>
<head>
<title>Simple Linear Regression — 7</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">简单线性回归— 7</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/simple-linear-regression-7-655537eee4c5?source=collection_archive---------11-----------------------#2019-12-07">https://medium.com/analytics-vidhya/simple-linear-regression-7-655537eee4c5?source=collection_archive---------11-----------------------#2019-12-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><blockquote class="if ig ih"><p id="5ec5" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><em class="hi">如果您还没有阅读R数据分析系列的第6部分，请阅读下面的文章，其中我们讨论了使用R-6<em class="hi">的</em> <a class="ae jh" rel="noopener" href="/analytics-vidhya/advanced-statistics-using-r-6-2789539a0167">高级统计。</a></em></p><p id="d80c" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">这篇文章的内容是我在IIM-B时代得到的几本书的要点。</p><p id="c921" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">人人有责——贾里德·p·兰德</p><p id="7f74" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><em class="hi">实用数据科学与R —妮娜·祖梅尔&amp;约翰·芒特</em></p><p id="d5de" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><em class="hi">文中讨论的所有代码块都以R markdown的形式出现在</em><a class="ae jh" href="https://github.com/viveksrinivasanss/Data_Science_Using_R" rel="noopener ugc nofollow" target="_blank"><em class="hi">Github link</em></a><em class="hi">中。</em></p><p id="8550" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><em class="hi">要看我写的所有文章请使用链接，</em><a class="ae jh" rel="noopener" href="/@viveksrinivasan"><em class="hi">Vivek Srinivasan</em></a><em class="hi">。</em></p></blockquote><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es ji"><img src="../Images/e19977e34a1cc77d3f679e02fd854f47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RrSEjEjAbglLzgw-MQSbHw.png"/></div></div></figure><p id="4501" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi jx translated">统计分析的主力是线性模型，尤其是<code class="du kg kh ki kj b">regression</code>。最初由<code class="du kg kh ki kj b">Francis Galton</code>发明，用于研究父母和子女之间的关系，他将其描述为回归均值，它已成为最广泛使用的建模技术之一，并催生了其他模型，如广义<code class="du kg kh ki kj b">linear models</code>、<code class="du kg kh ki kj b">regression trees</code>、<code class="du kg kh ki kj b">penalized regression</code>等。</p><p id="3432" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">在本文中，我们的讨论主要围绕着<code class="du kg kh ki kj b">regression </code>的基本原理及其与<code class="du kg kh ki kj b">ANOVA </code>的关联。稍后我们将看到一个例子来演示如何使用<code class="du kg kh ki kj b">R</code>实际应用回归。在下面的文章中，我们将通过一个案例研究来介绍<code class="du kg kh ki kj b">multiple linear regression </code>，并讨论重要的<code class="du kg kh ki kj b">model diagnostics</code>方法。</p><h2 id="d64d" class="kk kl hi bd km kn ko kp kq kr ks kt ku ju kv kw kx jv ky kz la jw lb lc ld le bi translated">简单线性回归</h2><p id="3b86" class="pw-post-body-paragraph ii ij hi il b im lf io ip iq lg is it ju lh iw ix jv li ja jb jw lj je jf jg hb bi translated">最简单的形式<code class="du kg kh ki kj b">regression </code>用于确定两个变量之间的关系。也就是说，给定一个变量，它告诉我们可以从另一个变量中得到什么。这个强大的工具被称为<code class="du kg kh ki kj b">simple linear regression</code>，它经常被教授，可以用最小的努力完成大量的分析。</p><p id="d5cf" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">在我们继续之前，我们先澄清一些术语。结果变量(我们试图预测的)被称为<code class="du kg kh ki kj b">response</code>，输入变量(我们用来预测的)是<code class="du kg kh ki kj b">predictor</code>。统计之外的字段使用其他术语，如<code class="du kg kh ki kj b">response</code>的<code class="du kg kh ki kj b">measured </code>变量、<code class="du kg kh ki kj b">outcome </code>变量、<code class="du kg kh ki kj b">experimental </code>变量，预测值的<code class="du kg kh ki kj b">covariate</code>、<code class="du kg kh ki kj b">feature </code>、<code class="du kg kh ki kj b">explanatory </code>变量。最糟糕的是术语<code class="du kg kh ki kj b">dependent </code>(响应)和<code class="du kg kh ki kj b">independent </code>(预测)变量。</p><p id="4fa8" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">这些名字都是用词不当。根据概率论，如果变量y依赖于变量x，那么变量x不能独立于变量y。所以我们只使用响应和预测这两个术语。</p><p id="d97d" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">simple <code class="du kg kh ki kj b">linear regression</code>背后的一般思想是使用预测器得出响应的平均值。这种关系被定义为</p><figure class="jj jk jl jm fd jn er es paragraph-image"><div class="er es lk"><img src="../Images/ff929022d361df4887e133b2af7ab946.png" data-original-src="https://miro.medium.com/v2/resize:fit:918/format:webp/1*sKegCVTKj0-pPG_d8HfiPw.png"/></div></figure><p id="5b6e" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">该等式本质上描述了一条穿过数据的直线，其中<code class="du kg kh ki kj b">a</code>是<code class="du kg kh ki kj b">y-intercept </code>而<code class="du kg kh ki kj b">b </code>是<code class="du kg kh ki kj b">slope</code>..在这种情况下，我们使用父亲的身高作为预测值，儿子的身高作为响应值。穿过这些点的蓝线是回归线，它周围的灰色带表示拟合的不确定性。方程中的误差项是指存在正态分布的误差。</p><pre class="jj jk jl jm fd ll kj lm ln aw lo bi"><span id="19f8" class="kk kl hi kj b fi lp lq l lr ls">data(father.son, package='UsingR')<br/>library(ggplot2)<br/>head(father.son)</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lt"><img src="../Images/f3affb5e6e53aae86cc74336a21c40d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t7zT6KFtzhf5Y-HRrYQZUQ.png"/></div></div></figure><p id="da76" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">现在让我们绘制这些数据来理解变量之间的关系。</p><pre class="jj jk jl jm fd ll kj lm ln aw lo bi"><span id="e949" class="kk kl hi kj b fi lp lq l lr ls">ggplot(father.son, aes(x=fheight, y=sheight)) + geom_point() +  geom_smooth(method="lm") + labs(x="Fathers", y="Sons")</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lu"><img src="../Images/8c9da7eb5484c0c033eee5469ca005d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zORuTk6wSKZI1_oBdkVRKg.png"/></div></div><figcaption class="lv lw et er es lx ly bd b be z dx translated">使用简单线性回归，用父亲的身高预测儿子的身高。父亲的身高是预测因素，儿子的身高是反应因素。穿过这些点的蓝线是回归线，它周围的灰色带表示拟合的不确定性。</figcaption></figure><p id="f66c" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">虽然这段代码生成了一个显示<code class="du kg kh ki kj b">regression (generated with geom_smooth(method=“lm”))</code>结果的漂亮图形，但它实际上并没有向我们提供这些结果。要实际计算回归，使用<code class="du kg kh ki kj b">lm </code>功能。</p><pre class="jj jk jl jm fd ll kj lm ln aw lo bi"><span id="2fbc" class="kk kl hi kj b fi lp lq l lr ls">heightsLM &lt;- lm(sheight ~ fheight, data=father.son)<br/>heightsLM</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es lz"><img src="../Images/6b330d15b2579a5180e92b7f3be13f78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t5ckfzhLdix452H8eojVPQ.png"/></div></div></figure><p id="f572" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">这里我们再次看到公式符号，它指定使用<code class="du kg kh ki kj b">father.son</code>数据对<code class="du kg kh ki kj b">fheight </code>(预测值)回归<code class="du kg kh ki kj b">sheight </code>(响应)，并自动添加截距项。结果显示了预测器<code class="du kg kh ki kj b">fheight</code>的<code class="du kg kh ki kj b">Intercept</code>和<code class="du kg kh ki kj b">fheight </code>的系数，即<code class="du kg kh ki kj b">slope </code>。对此的解释是，父亲的身高每增加一英寸，他的儿子的身高就会增加半英寸。在这种情况下，<code class="du kg kh ki kj b">intercept</code>没有多大意义，因为它代表的是父亲身高为零的儿子的身高，而这在现实中显然是不存在的。</p><p id="bad2" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">虽然系数的点估计很好，但如果没有标准误差，它们就没有多大帮助，标准误差会给人一种估计不确定的感觉，类似于标准差。要快速查看模型的完整报告，请使用<code class="du kg kh ki kj b">summary</code>。</p><pre class="jj jk jl jm fd ll kj lm ln aw lo bi"><span id="fcfd" class="kk kl hi kj b fi lp lq l lr ls">summary(heightsLM)</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es ma"><img src="../Images/5bb460bf1fdbf67f5295cc49ddd0756c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RPK5C6LB7-NctIY950MmpQ.png"/></div></div></figure><p id="a724" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">这将打印出更多关于模型的信息，包括<code class="du kg kh ki kj b">coefficients</code>的<code class="du kg kh ki kj b">standard errors</code>、<code class="du kg kh ki kj b">t-test</code>值和<code class="du kg kh ki kj b">p-values</code>、<code class="du kg kh ki kj b">degrees of freedom</code>、<code class="du kg kh ki kj b">residual summary</code>统计数据和一个<code class="du kg kh ki kj b">F-test</code>的结果。这些都是用于检查模型拟合度的诊断信息。当我们在下一篇文章中讨论<code class="du kg kh ki kj b">multiple linear regression</code>时，统计数据的细节将被广泛讨论。现在让我们退一步，讨论一下如何利用<code class="du kg kh ki kj b">linear regression</code>来代替<code class="du kg kh ki kj b">ANOVA</code>。</p><h2 id="cf64" class="kk kl hi bd km kn ko kp kq kr ks kt ku ju kv kw kx jv ky kz la jw lb lc ld le bi translated">方差分析替代</h2><p id="1e33" class="pw-post-body-paragraph ii ij hi il b im lf io ip iq lg is it ju lh iw ix jv li ja jb jw lj je jf jg hb bi translated">运行<code class="du kg kh ki kj b">ANOVA </code>测试的另一种方法(在上一篇文章中讨论过)是用一个分类变量和没有<code class="du kg kh ki kj b">intercept </code>项的<code class="du kg kh ki kj b">regression </code>来拟合。为了看到这一点，我们使用了<code class="du kg kh ki kj b">reshape2 </code>包中的tips数据，我们将对其进行回归拟合。</p><pre class="jj jk jl jm fd ll kj lm ln aw lo bi"><span id="4436" class="kk kl hi kj b fi lp lq l lr ls">data(tips, package="reshape2")<br/>head(tips)</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es mb"><img src="../Images/310ab32cffae1f0f7ecb414a00e63d1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5PRdT6X30qwGB0kcSqdN-Q.png"/></div></div></figure><p id="752a" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">我们将首先拟合一个方差分析模型，类似于我们在上一篇文章中所做的。排除下面显示的所有其他统计数据，仅关注<code class="du kg kh ki kj b">p-value</code>就可以看出，tips数据中的天数存在显著差异。</p><pre class="jj jk jl jm fd ll kj lm ln aw lo bi"><span id="f800" class="kk kl hi kj b fi lp lq l lr ls"># putting -1 in the formula indicates that the intercept should not be<br/># included in the model;<br/># the categorical variable day is automatically setup to have a<br/># coefficient for each level<br/>tipsAnova &lt;- aov(tip ~ day - 1, data=tips)<br/>summary(tipsAnova)</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es mc"><img src="../Images/d704fe85b7b4e5e429d234985e2333b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SI_Daugd7j_c7xrkWt0Ebg.png"/></div></div></figure><p id="9a3c" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">现在让我们为相同的数据拟合<code class="du kg kh ki kj b">regression </code>模型，并比较结果。</p><pre class="jj jk jl jm fd ll kj lm ln aw lo bi"><span id="c7c1" class="kk kl hi kj b fi lp lq l lr ls">tipsLM &lt;- lm(tip ~ day - 1, data=tips)<br/>summary(tipsLM)</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es md"><img src="../Images/1d2542bd89adb5264cd11dc3ea9fa725.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9EEe3AcMp99DRW5DvIn_Jg.png"/></div></div></figure><p id="df64" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">让我们了解上面显示的不同统计方法以及它们在模型构建中的重要性。<code class="du kg kh ki kj b">R-squared</code>测量模型和因变量之间的关系强度。然而，这不是一个正式的关系测试。我们的模型有一个非常好的<code class="du kg kh ki kj b">R-Square</code>值，表明与平均估计值相比，我们的模型变量解释了大部分方差。</p><p id="0b15" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">具有全局意义的<code class="du kg kh ki kj b">F-test</code>是这种关系的<code class="du kg kh ki kj b">hypothesis test</code>。如果总体的<code class="du kg kh ki kj b">F-test</code>是显著的，你可以断定<code class="du kg kh ki kj b">R-squared</code>不等于零，那么模型和因变量之间的<code class="du kg kh ki kj b">correlation</code>在统计上是显著的。</p><p id="836f" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">将<code class="du kg kh ki kj b">F-test</code>的<code class="du kg kh ki kj b">p-value</code>与您的<code class="du kg kh ki kj b">significance level</code>进行比较。如果<code class="du kg kh ki kj b">p-value</code>小于<code class="du kg kh ki kj b">significance level</code>，您的样本数据提供了足够的证据，可以得出结论，您的回归模型比没有自变量的模型更适合数据。正如我们从结果中看到的，我们的<code class="du kg kh ki kj b">p-value</code>低于显著性水平，因此我们可以有把握地得出模型的总体显著性良好的结论。</p><p id="4076" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">当您<code class="du kg kh ki kj b">F-test</code>测量模型的整体重要性时，<code class="du kg kh ki kj b">t-test</code>则测量模型中每个变量的重要性。与<code class="du kg kh ki kj b">F-test</code>类似，将每个变量的<code class="du kg kh ki kj b">p-value</code>与显著性水平进行比较。如果p值小于显著性水平，则可以得出单个预测变量具有统计学显著性的结论。</p><p id="8ff5" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">一般来说，如果你的自变量都不具有统计显著性，那么总体<code class="du kg kh ki kj b">F-test </code>也不具有统计显著性。偶尔，测试会产生相互矛盾的结果。这种不一致可能发生，因为总体重要性的<code class="du kg kh ki kj b">F-test</code>联合评估所有系数，而每个系数的<code class="du kg kh ki kj b">t-test</code>单独检查它们。例如，总体<code class="du kg kh ki kj b">F-test</code>可以发现系数<em class="ik">联合</em>是显著的，而<code class="du kg kh ki kj b">t-tests</code>不能单独发现显著性。</p><p id="4237" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">这些相互矛盾的测试结果可能很难理解，但请这样想。<code class="du kg kh ki kj b">F-test</code>对所有独立变量的预测能力求和，并确定所有系数不太可能等于零。然而，有可能每个变量本身都没有足够的预测性，没有统计学意义。换句话说，你的样本提供了足够的证据来断定你的模型是显著的，但不足以断定任何单个变量是显著的。</p><p id="ff57" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">如果你的回归模型具有统计学意义，那就太棒了！但是，请检查您的<code class="du kg kh ki kj b">residual plots</code>以确定结果是否可信。当我们讨论模型诊断时，我们将在残差图上看到更多。</p><h2 id="89ab" class="kk kl hi bd km kn ko kp kq kr ks kt ku ju kv kw kx jv ky kz la jw lb lc ld le bi translated">比较模型统计数据</h2><p id="5030" class="pw-post-body-paragraph ii ij hi il b im lf io ip iq lg is it ju lh iw ix jv li ja jb jw lj je jf jg hb bi translated">请注意，<code class="du kg kh ki kj b">F-value</code>或<code class="du kg kh ki kj b">F-statistic</code>对两者来说是相同的，<code class="du kg kh ki kj b">degrees of freedom</code>也是如此。这是因为<code class="du kg kh ki kj b">ANOVA </code>和<code class="du kg kh ki kj b">regression </code>是沿着相同的线导出的，并且可以完成相同的分析。可视化系数和标准误差应该显示与使用<code class="du kg kh ki kj b">ANOVA </code>公式计算它们相同的结果。均值的点估计是相同的，置信区间是相似的，差异是由于计算略有不同。</p><pre class="jj jk jl jm fd ll kj lm ln aw lo bi"><span id="d9ae" class="kk kl hi kj b fi lp lq l lr ls"># first calculate the means and CI manually<br/>library(dplyr)<br/>tipsByDay &lt;- tips %&gt;%<br/>  group_by(day) %&gt;%<br/>  dplyr::summarize(<br/>    tip.mean=mean(tip), tip.sd=sd(tip),<br/>    Length=NROW(tip),<br/>    tfrac=qt(p=.90, df=Length-1),<br/>    Lower=tip.mean - tfrac*tip.sd/sqrt(Length),<br/>    Upper=tip.mean + tfrac*tip.sd/sqrt(Length)<br/>  )<br/>tipsByDay</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es me"><img src="../Images/8282fb8bb62041f2f6c3daf3bf18f054.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2hszNKL5Mh301TbQgXTiqw.png"/></div></div></figure><p id="9873" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">我已经使用了Hadley Wickham的<code class="du kg kh ki kj b">dplyr </code>库来计算数据的<code class="du kg kh ki kj b">mean </code>和<code class="du kg kh ki kj b">Confidence Intervals (CI)</code>。到目前为止，在我们的数据科学中，我们还没有使用<code class="du kg kh ki kj b">R</code>系列讨论过<code class="du kg kh ki kj b">dplyr </code>库。它本身是一个系列，我们将在<code class="du kg kh ki kj b"><em class="ik">advanced R programming</em></code>系列中广泛讨论这些主题。到目前为止，上面的代码按每天分割数据，并计算数据的<code class="du kg kh ki kj b">mean </code>和<code class="du kg kh ki kj b">CI</code>。</p><p id="ee79" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">现在，我们使用适合<code class="du kg kh ki kj b">tips </code>数据的线性模型汇总来计算类似的测量值。</p><pre class="jj jk jl jm fd ll kj lm ln aw lo bi"><span id="4e16" class="kk kl hi kj b fi lp lq l lr ls">tipsInfo &lt;- summary(tipsLM)<br/>tipsCoef &lt;- as.data.frame(tipsInfo$coefficients[, 1:2])<br/>tipsCoef &lt;- within(tipsCoef, {<br/>  Lower &lt;- Estimate - qt(p=0.90, df=tipsInfo$df[2]) * `Std. Error`<br/>  Upper &lt;- Estimate + qt(p=0.90, df=tipsInfo$df[2]) * `Std. Error`<br/>  day &lt;- rownames(tipsCoef)<br/>})</span><span id="da84" class="kk kl hi kj b fi mf lq l lr ls">tipsCoef</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es mg"><img src="../Images/fb78addeccfb74052562cc2157e55770.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n8j4o_G1ucZVoEVWtpDKtw.png"/></div></div></figure><p id="4af0" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">我们可以比较两个表，了解手动计算的和从回归模型计算的度量彼此相似。这比比较数值表更容易直观地理解。</p><pre class="jj jk jl jm fd ll kj lm ln aw lo bi"><span id="26d9" class="kk kl hi kj b fi lp lq l lr ls">ggplot(tipsByDay, aes(x=tip.mean, y=day)) + geom_point() +<br/>  geom_errorbarh(aes(xmin=Lower, xmax=Upper), height=.3) +<br/>  ggtitle("Tips by day calculated manually")</span><span id="8d4d" class="kk kl hi kj b fi mf lq l lr ls">ggplot(tipsCoef, aes(x=Estimate, y=day)) + geom_point() +<br/>  geom_errorbarh(aes(xmin=Lower, xmax=Upper), height=.3) +<br/>  ggtitle("Tips by day calculated from regression model")</span></pre><figure class="jj jk jl jm fd jn er es paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="er es mh"><img src="../Images/07db549435788ea3ca3ebb6398cfab91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rRvC8_Iqh8IknhjFHbCgSQ.png"/></div></div></figure><p id="116a" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">这里使用了新功能和新特性。首先，我们引入了<code class="du kg kh ki kj b">within</code>，它与<code class="du kg kh ki kj b">with</code>的相似之处在于它允许我们通过名称引用<code class="du kg kh ki kj b">data.frame </code>中的列，但不同之处在于我们可以在<code class="du kg kh ki kj b">data.frame</code>中创建新列，因此得名。这个功能在<code class="du kg kh ki kj b">dplyr </code>中很大程度上已经被<code class="du kg kh ki kj b">mutate </code>所取代，但是仍然值得一提。</p><p id="ad2f" class="pw-post-body-paragraph ii ij hi il b im in io ip iq ir is it ju iv iw ix jv iz ja jb jw jd je jf jg hb bi translated">第二，其中一列用空格命名为<code class="du kg kh ki kj b">Std. Error </code>。为了引用名称中带有空格的变量，即使是作为<code class="du kg kh ki kj b">data.frame</code>中的一列，我们也必须将名称括在<code class="du kg kh ki kj b">back ticks (`)</code>中。</p><blockquote class="if ig ih"><p id="12b0" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated"><a class="ae jh" rel="noopener" href="/@viveksrinivasan/multiple-linear-regression-2f28ad463e68">使用R — 7的多元线性回归</a></p><p id="64c9" class="ii ij ik il b im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg hb bi translated">一定要通过评论和分享文章来分享你的想法和支持。</p></blockquote></div></div>    
</body>
</html>