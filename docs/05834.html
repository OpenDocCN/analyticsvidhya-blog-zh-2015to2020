<html>
<head>
<title>Deep learning on Covid-19 data with Eisen</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用艾森对新冠肺炎数据进行深度学习</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/deep-learning-on-covid-19-data-with-eisen-7ad5b5657ff9?source=collection_archive---------27-----------------------#2020-05-03">https://medium.com/analytics-vidhya/deep-learning-on-covid-19-data-with-eisen-7ad5b5657ff9?source=collection_archive---------27-----------------------#2020-05-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6dc7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不需要多此一举就可以发展的更快！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/23ec98c303fe8c3aa6e7059e77bf3fe9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_pMbsxj4UaIJnQmnIZsTYQ.png"/></div></div></figure><h1 id="5d67" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="623a" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">我尝试过使用<a class="ae ks" href="http://eisen.ai" rel="noopener ugc nofollow" target="_blank">艾森</a>对COVID数据进行深度学习。似乎这个包中已经包含了对大多数公开可用的数据集进行实验所需的所有部分。</p><p id="c51b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我编写了一个小例子，展示了从互联网上获得的100幅图像的开放数据集<a class="ae ks" href="http://medicalsegmentation.com/covid19/" rel="noopener ugc nofollow" target="_blank">中分割肺部数据。艾森已经预先构建了能够处理这些数据的数据集，并允许我在几分钟后训练我的第一个模型。</a></p><p id="9788" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">事件虽然我不认为我能在5分钟内制作出一个艺术模型，但我认为在疫情期间拥有快速原型和开发工具将有助于迭代更快。能够利用开发人员社区，例如Eisen周围的社区，他们关心为医疗DL构建尽可能好的工具，这是更快获得实际结果的关键。</p></div><div class="ab cl kt ku gp kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hb hc hd he hf"><p id="c9aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在过去的几周里，我们看到了一些研究，展示了使用ML/DL方法分析新冠肺炎全球疫情数据时可以做些什么。已经宣布了一些不同的公共倡议，并公布了一些数据。</p><p id="511c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然我们仍在等待一个大型医学图像数据集，可用于生存预测、ICU工作量、并发症和长期结果等关键任务，但一些较小的努力已经产生了公开可用的数据集，如可获得的<a class="ae ks" href="http://medicalsegmentation.com/covid19/" rel="noopener ugc nofollow" target="_blank">和</a><a class="ae ks" href="https://github.com/UCSD-AI4H/COVID-CT" rel="noopener ugc nofollow" target="_blank">数据集。</a></p><p id="2bb5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我已经看到了很多关于这些(和其他)数据集的讨论，一些人已经开始了他们自己的GitHub项目，在这些数据上运行他们的模型。不幸的是，他们经常从头开始编码，这导致了错误和结果缺乏可重复性。</p><p id="f528" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">几周以来，<a class="ae ks" href="http://eisen.ai" rel="noopener ugc nofollow" target="_blank"> Eisen </a>原生支持两个最重要的新冠肺炎数据集。为了创建一个在这个数据集上训练的深度学习模型，人们只需要编写几行代码，就可以开始一个功能完整、无bug且可重复的训练操作。</p><p id="3477" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我已经决定尝试Eisen提供的与新冠肺炎数据相关的功能。目前有两个数据集可用。对于<a class="ae ks" href="https://github.com/UCSD-AI4H/COVID-CT" rel="noopener ugc nofollow" target="_blank"> UCSD数据集</a>，可以使用以下行来实例化它们:</p><pre class="je jf jg jh fd lb lc ld le aw lf bi"><span id="f28e" class="lg jq hi lc b fi lh li l lj lk"><strong class="lc hj">from</strong> eisen.datasets <strong class="lc hj">import</strong> UCSDCovid19<br/><br/>dataset <strong class="lc hj">=</strong> UCSDCovid19(<br/>    '/abs/path/to/data',<br/>    'positive',<br/>    'negative',<br/>    transform,<br/>)</span><span id="68c4" class="lg jq hi lc b fi ll li l lj lk"># docs here <a class="ae ks" href="http://docs.eisen.ai/eisen/api.html#eisen.datasets.UCSDCovid19" rel="noopener ugc nofollow" target="_blank">http://docs.eisen.ai/eisen/api.html#eisen.datasets.UCSDCovid19</a></span></pre><p id="1283" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以及下面的<a class="ae ks" href="http://medicalsegmentation.com/covid19/" rel="noopener ugc nofollow" target="_blank"> MedSegCovid19 </a>数据集片段。</p><pre class="je jf jg jh fd lb lc ld le aw lf bi"><span id="113f" class="lg jq hi lc b fi lh li l lj lk"><strong class="lc hj">from</strong> eisen.datasets <strong class="lc hj">import</strong> MedSegCovid19<br/><br/>dataset <strong class="lc hj">=</strong> MedSegCovid19(<br/>    '/abs/path/to/data',<br/>    'tr_im.nii',<br/>    'tr_mask.nii',<br/>    transform,<br/>)</span><span id="109c" class="lg jq hi lc b fi ll li l lj lk"># docs here <br/><a class="ae ks" href="http://docs.eisen.ai/eisen/api.html#eisen.datasets.MedSegCovid19" rel="noopener ugc nofollow" target="_blank">http://docs.eisen.ai/eisen/api.html#eisen.datasets.MedSegCovid19</a></span></pre><p id="08b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我对在MedSegCovid19数据集上试用Eisen很感兴趣，因为它似乎更大一些，并且是为分段量身定制的，这是我的热情所在:)</p><p id="ad26" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以在这里找到一个谷歌实验室<a class="ae ks" href="https://colab.research.google.com/drive/19LtjHV5T9pLoxIXOiZTWVQ7X4pKysNKL?usp=sharing" rel="noopener ugc nofollow" target="_blank">笔记本</a>，你可以在游乐场模式下打开它，并在谷歌赞助的GPU上运行。</p><p id="917d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">只是逗逗你，我也有一些定性的结果要展示。这些都是在仅仅55个时代的训练(通过Colab的几分钟训练)后实现的。如果你熟悉新冠肺炎在肺部CT图像中的样子，你可能会意识到该算法已经做得不错了，尽管它还没有经过完全的训练。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lm"><img src="../Images/c250b24c6be68baf37eae1b9a516ccae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iNVx9W_Ix0MBr4TrvHq-6w.png"/></div></div><figcaption class="ln lo et er es lp lq bd b be z dx translated">通过Eisen进行55个周期的UNet训练后的预测结果。4例的定性结果。从左至右:分割叠加、原始图像、软预测。</figcaption></figure><p id="5f6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从‘eisen’导入必要的模块后，我声明了几个数据转换和数据集本身。</p><pre class="je jf jg jh fd lb lc ld le aw lf bi"><span id="029f" class="lg jq hi lc b fi lh li l lj lk"># declare data transforms<br/>map_intensities = FixedMeanStdNormalization(['image'], mean=208.0, std=388.0)<br/>add_channel = AddChannelDimension(['image'])<br/>label_to_onehot = LabelMapToOneHot(['label'], classes=[1, 2, 3])</span><span id="8ace" class="lg jq hi lc b fi ll li l lj lk"># create a transform to manipulate and load data<br/>tform = Compose([map_intensities, add_channel, label_to_onehot])</span><span id="082d" class="lg jq hi lc b fi ll li l lj lk"># create a dataset from the training set of the MSD dataset<br/>dset_train = MedSegCovid19(<br/>    '/content', <br/>    'tr_im.nii.gz', <br/>    mask_file='tr_mask.nii.gz', <br/>    transform=tform<br/>)</span></pre><p id="3b9a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我根据艾森团队在他们的<a class="ae ks" href="http://docs.eisen.ai" rel="noopener ugc nofollow" target="_blank">文档</a>页面上提供的<a class="ae ks" href="http://bit.ly/2HjLlfh" rel="noopener ugc nofollow" target="_blank">这个例子</a>中所做的，实例化了data_loader、模型和训练工作流。</p><p id="5ef7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以在下面的要点中找到完整的代码，<a class="ae ks" href="https://colab.research.google.com/drive/19LtjHV5T9pLoxIXOiZTWVQ7X4pKysNKL?usp=sharing" rel="noopener ugc nofollow" target="_blank">或者笔记本</a>。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lr ls l"/></div></figure><p id="c6e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我还写了一点代码来对测试/验证提供的数据运行模型。上面可以看到这段代码的结果。</p><p id="2843" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当然，你可以玩Eisen模型，尝试Eisen本身或torchvision等其他软件包的不同架构，看看哪种模型效果最好。能够这么快就把训练/验证和测试管道放在一起，真是太方便了！</p></div></div>    
</body>
</html>