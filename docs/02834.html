<html>
<head>
<title>Airflow for Beginners — II</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">初学者的气流— II</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/airflow-for-beginners-ii-ae2a9f55d2f6?source=collection_archive---------19-----------------------#2020-01-03">https://medium.com/analytics-vidhya/airflow-for-beginners-ii-ae2a9f55d2f6?source=collection_archive---------19-----------------------#2020-01-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="4684" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">第二阶段:执行气流</h2></div><p id="1cec" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">正如上一篇文章<a class="ae jt" rel="noopener" href="/@rdhawan201455/airflow-for-beginners-e80fd032cc2">初学者的气流，我</a>我们学习气流以及如何在本地安装气流。在本文中，我们将了解DAG以及如何使用web airflow来调度和管理工作。</p><p id="597f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们从DAG开始，然后我们将学习关于网络气流。</p><p id="ea73" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">有向无环图</strong></p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/a3070f17a6ed98727726cc987a59cb39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*by5y0swEScAd997ag2gddg.png"/></div></div></figure><p id="5968" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">DAG是一个没有圈的有向图。它有有限数量的边和节点。其中我们可以知道哪个事物(节点)将首先出现，并且我们将知道节点的顺序。所以只要把每个节点想象成一个工作(你想要执行的)，我们就可以用DAG来表示工作的顺序，这就是为什么DAG是流程的一个重要部分。</p><p id="bd95" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">卷筒纸气流</strong></p><p id="a617" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以现在你看到了</p><pre class="jv jw jx jy fd kg kh ki kj aw kk bi"><span id="1813" class="kl km hi kh b fi kn ko l kp kq">localhost:8080 </span></pre><p id="bb11" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你打开它看起来会像:</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es kr"><img src="../Images/98862a51121575fb305433130d11cef3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GCgng_vvFER7u6Gdkm3Q5g.png"/></div></div></figure><p id="2ab5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，这些是已经添加的示例DAG或工作，因此要添加您自己的脚本(DAG ),只需遵循下面提到的简单步骤:</p><ol class=""><li id="498e" class="ks kt hi iz b ja jb jd je jg ku jk kv jo kw js kx ky kz la bi translated">只需转到终端中的airflow目录(它将位于根目录中)，然后只需创建名为“<strong class="iz hj"> <em class="lb"> dags </em> </strong>的新文件夹，因为在配置文件中，路径是为dags设置的，用于获取dags。</li><li id="dd07" class="ks kt hi iz b ja lc jd ld jg le jk lf jo lg js kx ky kz la bi translated">现在只剩下如何创建dag了，我们现在将通过一个接一个地执行两个文件的例子来完成它。我们之所以做这个例子，是因为通常在你的工作空间中，你必须按照预定的时间间隔执行一些文件。</li></ol><p id="6e7a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.a .创建两个文件在我的例子中，我创建了两个python脚本来执行。</p><p id="3b37" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.b .现在您必须编写一个python脚本来创建DAG</p><p id="4cdf" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以让我们来详细了解一下</p><ol class=""><li id="e343" class="ks kt hi iz b ja jb jd je jg ku jk kv jo kw js kx ky kz la bi translated">首先导入我们需要的库</li></ol><pre class="jv jw jx jy fd kg kh ki kj aw kk bi"><span id="08f3" class="kl km hi kh b fi kn ko l kp kq">import airflow</span><span id="95ac" class="kl km hi kh b fi lh ko l kp kq">from airflow.models import DAG</span><span id="eacc" class="kl km hi kh b fi lh ko l kp kq">from airflow.operators.bash_operator import BashOperator</span><span id="3fe1" class="kl km hi kh b fi lh ko l kp kq">from airflow.operators.dummy_operator import DummyOperator</span></pre><p id="dc70" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.现在初始化我们需要传递的dag参数，并初始化dag。</p><pre class="jv jw jx jy fd kg kh ki kj aw kk bi"><span id="0ef1" class="kl km hi kh b fi kn ko l kp kq">def_arg = {</span><span id="f6f4" class="kl km hi kh b fi lh ko l kp kq">'owner': 'RD_TYGA',</span><span id="9517" class="kl km hi kh b fi lh ko l kp kq">'start_date': airflow.utils.dates.days_ago(2),}</span><span id="d82e" class="kl km hi kh b fi lh ko l kp kq">dag = DAG(dag_id='rahul_dhawan_dag',</span><span id="c326" class="kl km hi kh b fi lh ko l kp kq">default_args=def_arg,</span><span id="d1b6" class="kl km hi kh b fi lh ko l kp kq">schedule_interval='0 0 * * *',) # run every minute</span></pre><p id="9f3a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.现在创建您想要执行的任务。</p><pre class="jv jw jx jy fd kg kh ki kj aw kk bi"><span id="fd3b" class="kl km hi kh b fi kn ko l kp kq">t1 = BashOperator(</span><span id="6992" class="kl km hi kh b fi lh ko l kp kq">task_id='python_task_1',</span><span id="3ca4" class="kl km hi kh b fi lh ko l kp kq">bash_command='python /Users/rahul/Desktop/goal.py ',</span><span id="8016" class="kl km hi kh b fi lh ko l kp kq">dag=dag)</span><span id="df79" class="kl km hi kh b fi lh ko l kp kq">t2 = BashOperator(</span><span id="00f3" class="kl km hi kh b fi lh ko l kp kq">task_id='python_task_2',</span><span id="c320" class="kl km hi kh b fi lh ko l kp kq">bash_command='python /Users/rahul/Desktop/goal2.py ',</span><span id="8399" class="kl km hi kh b fi lh ko l kp kq">dag=dag)</span></pre><p id="da44" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">4.现在添加运行的顺序。</p><pre class="jv jw jx jy fd kg kh ki kj aw kk bi"><span id="6ec4" class="kl km hi kh b fi kn ko l kp kq">t1 &gt;&gt; t2</span></pre><p id="ad74" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在只需保存它并运行这个命令</p><pre class="jv jw jx jy fd kg kh ki kj aw kk bi"><span id="5234" class="kl km hi kh b fi kn ko l kp kq">python your_file_name.py</span></pre><p id="40fe" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">1或2分钟后，您将在web服务器中看到该dag。</p><p id="7f4e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，您已经为计划做好了准备，只需看看它是如何运行的。</p><p id="71c9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">谢谢你的支持。</p></div></div>    
</body>
</html>