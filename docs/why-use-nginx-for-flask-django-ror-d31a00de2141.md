# 为什么要用 Nginx？Flask、Django、ROR、NodeJS 不是生产服务器。

> 原文：<https://medium.com/analytics-vidhya/why-use-nginx-for-flask-django-ror-d31a00de2141?source=collection_archive---------1----------------------->

## 我们为什么要在 Flask、Django、Ruby on Rails、NodeJS 等应用前使用 Nginx 这种 web 服务器？

我将在这里谈论 **Flask** ，但这适用于所有框架，如 **Django、Ruby on Rails、NodeJS 等。**

如果你有兴趣知道，如何用 uWSGI 和 Nginx 部署 Flask 应用程序，请查看[这个](/@maanavshah/deploy-flask-applications-with-uwsgi-and-nginx-on-ubuntu-18-04-2a47f378c3d2)。

您已经构建了 Flask web 应用程序，并且正在部署站点。这是你的第一个小应用，你可能认为在 **app.run** 上将 **debug** 设置为 **False** 就足够了。或许也启用**线程**？

你真的不应该依赖那个。官方文件[也不同意](https://flask.palletsprojects.com/en/1.1.x/deploying/)。上面明确写着 **Flask 的内置服务器不适合生产。**

现在怎么办？好吧，没必要困惑。一切都很好，你只需要理解 Flask development web 服务器的意义，它缺少什么，用什么来代替。

# Flask 的内置网络服务器

内置的 Flask web 服务器是为了方便开发而提供的。

有了它，你可以在本地机器上访问你的应用程序，而不必设置其他服务，让它们很好地一起运行。然而，它一次只能由一个人使用，并且是这样建造的。它也可以为静态文件服务，但是与为快速服务而构建的工具相比，它的速度非常慢。当只有一个人访问它的时候，这并不重要，所以它非常适合它的用途。

当在生产环境中运行 web 应用程序时，您希望它能够处理多个用户和多个请求，而那些优秀的人员不必为加载页面和静态文件而等待太长时间。

# 生产堆栈

一个生产设置通常由多个组件组成，每个组件的设计和构建都是为了真正擅长某一特定的事情。他们速度快，可靠，非常专注。

就像内置 web 服务器的情况一样，与整个系统的通信是通过 HTTP 进行的。一个请求进来并到达第一个组件——一个专用的**网络服务器**。它非常擅长从磁盘读取静态文件(例如 CSS 文件)和处理多个请求。当一个请求不是一个静态文件，而是意味着你所有的时候，它会沿着堆栈向下传递。

**应用服务器**获得这些奇特的请求，并将它们的信息转换成框架可用的 Python 对象。人们一致同意的一个规范描述了这是如何发生的—[**【WSGI】**](https://en.wikipedia.org/wiki/Web_Server_Gateway_Interface)。

你的 Flask 应用程序实际上并不像你认为的服务器那样运行——等待请求并对它们做出反应。它可以被看作是一个由应用服务器调用的函数，被提供请求对象。

然后，应用程序服务器将运行应用程序的输出打包成一个 HTTP 响应，并传递回 web 服务器，再传递给用户。

# 结论

如果你想在生产中运行 Flask，确保使用一个生产就绪的 web 服务器，如 **Nginx** ，并让你的应用程序由一个 **WSGI** 应用服务器处理，如 **Gunicorn** 。

如果您计划在 Heroku 上运行，那么会隐式地提供一个 web 服务器。您只需要在 Procfile 中指定一个命令来运行应用服务器(同样，Gunicorn 也可以)。

就是这样。希望这有所帮助。

如果你喜欢这篇文章，如果你能通过电子邮件把它发给朋友，或者在推特或脸书上分享，我会非常感激。谢谢大家！