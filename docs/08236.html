<html>
<head>
<title>__dict__ attribute and vars() function in python.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">python中的__dict__属性和vars()函数。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/dict-attribute-and-vars-function-in-python-42d82dbaba73?source=collection_archive---------0-----------------------#2020-07-22">https://medium.com/analytics-vidhya/dict-attribute-and-vars-function-in-python-42d82dbaba73?source=collection_archive---------0-----------------------#2020-07-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><blockquote class="if"><p id="74f1" class="ig ih hi bd ii ij ik il im in io ip dx translated">__dict__ method是什么？</p></blockquote><ol class=""><li id="e2b3" class="iq ir hi is b it iu iv iw ix iy iz ja jb jc ip jd je jf jg bi translated">根据python <a class="ae jh" href="https://docs.python.org/3/library/stdtypes.html#object.__dict__" rel="noopener ugc nofollow" target="_blank">文档的</a>对象。<em class="ji"> __dict__ </em>是一个字典或其他映射对象，用于存储对象的(可写)属性。</li><li id="268c" class="iq ir hi is b it jj iv jk ix jl iz jm jb jn ip jd je jf jg bi translated">或者用简单的话来说，python中的每个对象都有一个属性，用<em class="ji"> __dict__来表示。</em></li><li id="9c0f" class="iq ir hi is b it jj iv jk ix jl iz jm jb jn ip jd je jf jg bi translated">并且该对象包含为该对象定义的所有属性。__dict__也称为<em class="ji"> mappingproxy </em>对象。</li></ol><h2 id="b3f0" class="jo jp hi bd jq jr js jt ju jv jw jx jy ix jz ka kb iz kc kd ke jb kf kg kh ki bi translated">考虑python中的dict和list对象，让我们在这些对象中使用这个方法。</h2><figure class="kk kl km kn fd ko er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es kj"><img src="../Images/5cb7b79ee39ce9685227a91823e84320.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ChrrvHIPggGXss2IUg9KdA.png"/></div></div><figcaption class="kv kw et er es kx ky bd b be z dx translated">词典</figcaption></figure><figure class="kk kl km kn fd ko er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es kz"><img src="../Images/5f08c5a7e417c77b32a7608489637bae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3jB8EySov1vMv0CZaCARWw.png"/></div></div><figcaption class="kv kw et er es kx ky bd b be z dx translated">目录</figcaption></figure><p id="54c9" class="pw-post-body-paragraph la lb hi is b it lc ld le iv lf lg lh ix li lj lk iz ll lm ln jb lo lp lq ip hb bi translated">对用户定义的对象和类使用__dict__方法。</p><figure class="kk kl km kn fd ko"><div class="bz dy l di"><div class="lr ls l"/></div></figure><p id="6974" class="pw-post-body-paragraph la lb hi is b it lc ld le iv lf lg lh ix li lj lk iz ll lm ln jb lo lp lq ip hb bi translated">从上面的代码中，我们可以观察到，当对DogClass类的对象调用__dict__时，我们得到了已定义属性的字典，当对该类直接调用相同的函数时，我们得到了所有内置的已定义变量。</p><figure class="kk kl km kn fd ko er es paragraph-image"><div class="er es lt"><img src="../Images/a0d079e6511b13d23b0202393eaef1a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/1*2-NBq5zWegzzH5pWtJksOg.png"/></div></figure><blockquote class="if"><p id="82c4" class="ig ih hi bd ii ij ik il im in io ip dx translated">现在来说说python中的<em class="lu"> vars() </em>函数。</p></blockquote><ol class=""><li id="093e" class="iq ir hi is b it iu iv iw ix iy iz ja jb jc ip jd je jf jg bi translated"><em class="ji"> vars(object) </em>函数返回对象的__dict__属性，因为我们知道__dict__属性是一个包含对象可变属性的字典。</li><li id="cc2b" class="iq ir hi is b it jj iv jk ix jl iz jm jb jn ip jd je jf jg bi translated">如果没有为<em class="ji"> vars() </em>函数指定值，它将充当python<em class="ji">locals()</em>方法。</li></ol><p id="5071" class="pw-post-body-paragraph la lb hi is b it lc ld le iv lf lg lh ix li lj lk iz ll lm ln jb lo lp lq ip hb bi translated">无参数调用<em class="ji"> vars() </em>。在本例中，我们定义了两个全局变量<em class="ji"> a </em>和<em class="ji"> b. </em></p><pre class="kk kl km kn fd lv lw lx ly aw lz bi"><span id="cf03" class="jo jp hi lw b fi ma mb l mc md">a = "Hello"</span><span id="1382" class="jo jp hi lw b fi me mb l mc md">b = "World"</span><span id="eb89" class="jo jp hi lw b fi me mb l mc md">vars()</span></pre><figure class="kk kl km kn fd ko er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es mf"><img src="../Images/36f253e6e0ae52e913855c490749a9f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9-kF60Dza_ILBKBfZFNSXA.png"/></div></div><figcaption class="kv kw et er es kx ky bd b be z dx translated">var</figcaption></figure><figure class="kk kl km kn fd ko er es paragraph-image"><div class="er es mg"><img src="../Images/ceaeab9ff35972e06a25cf1dd60d0d6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:686/format:webp/1*FZVFtHe_yY1wDrwboYqApQ.png"/></div><figcaption class="kv kw et er es kx ky bd b be z dx translated">var</figcaption></figure><p id="1603" class="pw-post-body-paragraph la lb hi is b it lc ld le iv lf lg lh ix li lj lk iz ll lm ln jb lo lp lq ip hb bi translated">正如我们所知，vars()为我们提供了定义的python脚本范围内所有已定义变量的字典表示。让我们为内置对象和用户定义的对象调用这个变量。这与在对象上调用__dict__是一样的。</p><figure class="kk kl km kn fd ko"><div class="bz dy l di"><div class="lr ls l"/></div></figure></div><div class="ab cl mh mi gp mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="hb hc hd he hf"><h2 id="c0ea" class="jo jp hi bd jq jr js jt ju jv jw jx jy ix jz ka kb iz kc kd ke jb kf kg kh ki bi translated">vars()的示例(此内容是可选的)</h2><p id="b8c2" class="pw-post-body-paragraph la lb hi is b it mo ld le iv mp lg lh ix mq lj lk iz mr lm ln jb ms lp lq ip hb bi translated">您希望创建一个字符串，其中嵌入的变量名被替换为变量值的字符串表示形式。</p><figure class="kk kl km kn fd ko"><div class="bz dy l di"><div class="lr ls l"/></div></figure><p id="46db" class="pw-post-body-paragraph la lb hi is b it lc ld le iv lf lg lh ix li lj lk iz ll lm ln jb lo lp lq ip hb bi translated">在上面的例子中，第一种方法使用一个众所周知的方法来替换变量，但是第二种方法使用<em class="ji"> vars() </em>函数来替换脚本范围(全局范围)中定义的变量。</p><p id="0ef8" class="pw-post-body-paragraph la lb hi is b it lc ld le iv lf lg lh ix li lj lk iz ll lm ln jb lo lp lq ip hb bi translated">让我们通过调用vars()来看看脚本的作用域，在这里它们被定义为dog_name和eye_color在全局作用域中被定义为键值对，format使用这些键来替换这些值。</p><figure class="kk kl km kn fd ko er es paragraph-image"><div class="er es mt"><img src="../Images/0d86a57de5bf89209565a8cd27de33ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1194/format:webp/1*Z0aAU_sVFPSwhvoWyQ7j9w.png"/></div></figure><p id="e102" class="pw-post-body-paragraph la lb hi is b it lc ld le iv lf lg lh ix li lj lk iz ll lm ln jb lo lp lq ip hb bi translated">现在，string.format()的主要问题是，如果发现缺少的值，我们会得到一个错误。因此，在这里我们可以利用python自己的__missing__() dunder方法。下面定义的MissingClass继承了dict对象，如果键丢失了，我们可以给出自定义输出。</p><figure class="kk kl km kn fd ko"><div class="bz dy l di"><div class="lr ls l"/></div></figure><blockquote class="if"><p id="b48e" class="ig ih hi bd ii ij ik il im in io ip dx translated">参考资料:</p></blockquote><div class="mu mv mw mx my mz"><a href="https://www.journaldev.com/23151/python-vars" rel="noopener  ugc nofollow" target="_blank"><div class="na ab dw"><div class="nb ab nc cl cj nd"><h2 class="bd hj fi z dy ne ea eb nf ed ef hh bi translated">Python vars() - JournalDev</h2><div class="ng l"><h3 class="bd b fi z dy ne ea eb nf ed ef dx translated">python vars()函数，python vars __dict__ dictionary，python vars() TypeError，类的Python vars，实例…</h3></div><div class="nh l"><p class="bd b fp z dy ne ea eb nf ed ef dx translated">www.journaldev.com</p></div></div><div class="ni l"><div class="nj l nk nl nm ni nn kt mz"/></div></div></a></div><div class="no np ez fb nq mz"><a href="https://www.programiz.com/python-programming/methods/string/format_map" rel="noopener  ugc nofollow" target="_blank"><div class="na ab dw"><div class="nb ab nc cl cj nd"><h2 class="bd hj fi z dy ne ea eb nf ed ef hh bi translated">Python字符串格式_map()</h2><div class="ng l"><h3 class="bd b fi z dy ne ea eb nf ed ef dx translated">在说format_map()之前。让我们看看str.format(**mapping)如何为Python字典工作。点=…</h3></div><div class="nh l"><p class="bd b fp z dy ne ea eb nf ed ef dx translated">www.programiz.com</p></div></div></div></a></div><div class="no np ez fb nq mz"><a href="https://www.oreilly.com/library/view/python-cookbook-3rd/9781449357337/" rel="noopener  ugc nofollow" target="_blank"><div class="na ab dw"><div class="nb ab nc cl cj nd"><h2 class="bd hj fi z dy ne ea eb nf ed ef hh bi translated">Python食谱，第三版</h2><div class="ng l"><h3 class="bd b fi z dy ne ea eb nf ed ef dx translated">如果你需要用Python 3写程序的帮助，或者想更新旧的Python 2代码，这本书正好合适。</h3></div><div class="nh l"><p class="bd b fp z dy ne ea eb nf ed ef dx translated">www.oreilly.com</p></div></div><div class="ni l"><div class="nr l nk nl nm ni nn kt mz"/></div></div></a></div></div></div>    
</body>
</html>