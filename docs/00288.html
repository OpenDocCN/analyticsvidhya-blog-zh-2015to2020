<html>
<head>
<title>Kalman Filters: A step by step implementation guide in python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">卡尔曼滤波器:python中的分步实施指南</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/kalman-filters-a-step-by-step-implementation-guide-in-python-91e7e123b968?source=collection_archive---------0-----------------------#2019-03-08">https://medium.com/analytics-vidhya/kalman-filters-a-step-by-step-implementation-guide-in-python-91e7e123b968?source=collection_archive---------0-----------------------#2019-03-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="e35c" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated"><em class="ix">本文将为您简化卡尔曼滤波器。希望，当你谷歌卡尔曼滤波器时，你会了解并解开所有这些你在维基百科上找到的神秘事物。</em></h2></div><p id="24fa" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated"><strong class="ja hj"> <em class="ju">那么我们开始吧！</em> </strong></p><p id="6927" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">要了解卡尔曼滤波器，我们需要得到的基本知识。在卡尔曼滤波器中，分布由所谓的高斯分布给出。</p><blockquote class="jv jw jx"><p id="2ce7" class="iy iz ju ja b jb jc ij jd je jf im jg jy ji jj jk jz jm jn jo ka jq jr js jt hb bi translated">什么是高斯分布？</p></blockquote><p id="f519" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">高斯是位置空间上的连续函数，下面的面积总和为1。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="er es kb"><img src="../Images/395ec8d9b4380025c06f1cd60ec0a4b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*0YOZyzQuXVy7YKje3Z9AXQ.jpeg"/></div><figcaption class="kj kk et er es kl km bd b be z dx translated">图中的高斯</figcaption></figure><p id="ddcf" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">高斯由两个参数定义，平均值(通常缩写为希腊字母μ)和高斯宽度(通常称为方差(适马平方))。因此，我们在公共阶段的工作是保持阿木和适马广场，作为我们试图寻找的物体位置的最佳估计。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="er es kn"><img src="../Images/17d7f7cf61fe5f833dbac3e7b23a6713.png" data-original-src="https://miro.medium.com/v2/resize:fit:1078/format:webp/1*F-XfvGk-eA-Ldm1QVmQYQA.jpeg"/></div><figcaption class="kj kk et er es kl km bd b be z dx translated">显示均值和方差的图表</figcaption></figure><p id="8440" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">确切的公式是二次函数的指数，其中我们取表达式的指数。现在在下面的等式中，如果x等于μ，那么分子变成0，如果x为0，也就是1。结果是我们必须用一个常数来归一化，1除以2π适马平方的平方根。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es ko"><img src="../Images/3f5666c5732b9e31f7c45ba29583e352.png" data-original-src="https://miro.medium.com/v2/resize:fit:838/format:webp/1*draefTB6IsjXZNzwmmnMiQ.jpeg"/></div></div><figcaption class="kj kk et er es kl km bd b be z dx translated">高斯方程</figcaption></figure><blockquote class="jv jw jx"><p id="ca87" class="iy iz ju ja b jb jc ij jd je jf im jg jy ji jj jk jz jm jn jo ka jq jr js jt hb bi translated"><strong class="ja hj">什么是方差？</strong></p></blockquote><p id="0cbd" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">方差是高斯分布的度量(即曲线下面积的分布)。较大的方差对应于较短的高斯分布。<br/>方差也是确定性的度量；如果您试图以最大的确定性查找类似汽车位置的内容，您将需要一个均值为汽车位置且具有最小不确定性/扩散的高斯分布。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="er es kt"><img src="../Images/55349fb88f96a6be504b8456cebd6e68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*dzDi0QHwV1MYBYa645zCtQ.jpeg"/></div><figcaption class="kj kk et er es kl km bd b be z dx translated">高斯函数的代码实现</figcaption></figure><blockquote class="jv jw jx"><p id="a588" class="iy iz ju ja b jb jc ij jd je jf im jg jy ji jj jk jz jm jn jo ka jq jr js jt hb bi translated"><strong class="ja hj">如何转移均值？</strong></p></blockquote><p id="8b9a" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">在卡尔曼滤波器中，我们迭代测量(测量更新)和运动(预测)。并且更新将使用贝叶斯规则，该规则不是别的，而是乘积或乘法。在预测中，我们使用全概率，这是一个卷积或简单的加法。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="er es ku"><img src="../Images/ee2861c268d62a15d2daf3d4ce7dfe8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/1*48j7QXCeeWKPPlIMZFP2JQ.jpeg"/></div><figcaption class="kj kk et er es kl km bd b be z dx translated">测量更新和预测周期</figcaption></figure><p id="2985" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">根据Udacity的计算机视觉课程，测量周期和预测周期的实施如下:</p><ol class=""><li id="1ce5" class="kv kw hi ja b jb jc je jf jh kx jl ky jp kz jt la lb lc ld bi translated">假设您正在本地化另一个车辆，并且您有一个如下所示的先验分布:这是一个非常广泛的高斯均值。这是一个例子，在我们之前，我们对位置相当不确定，但测量告诉我们相当多的车辆在哪里。</li><li id="c8bc" class="kv kw hi ja b jb le je lf jh lg jl lh jp li jt la lb lc ld bi translated">最终的平均值在两个旧平均值之间移动，这两个旧平均值是先前的平均值和测量值的平均值。它在测量方面稍微更进一步，因为测量对于车辆的位置比先前更确定。我们越确定，就越往确定答案的方向拉均值。</li></ol><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es lj"><img src="../Images/75b5c167777faa58a26750e823becb08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tItYv192aYu8vw9uv88ngA.jpeg"/></div></div><figcaption class="kj kk et er es kl km bd b be z dx translated">平均值的定位(绿色)</figcaption></figure><blockquote class="jv jw jx"><p id="e3da" class="iy iz ju ja b jb jc ij jd je jf im jg jy ji jj jk jz jm jn jo ka jq jr js jt hb bi translated"><strong class="ja hj">如何更新参数？</strong></p></blockquote><ol class=""><li id="6c2e" class="kv kw hi ja b jb jc je jf jh kx jl ky jp kz jt la lb lc ld bi translated">假设我们将两个高斯函数相乘，如贝叶斯规则，一个先验概率和一个测量概率。先验具有μ的均值和适马平方的方差，测量具有μ的均值和r平方的协方差。</li><li id="c35e" class="kv kw hi ja b jb le je lf jh lg jl lh jp li jt la lb lc ld bi translated">那么，新的均值μ素数就是旧均值的加权和。μ用r平方加权，μ用适马平方加权，用加权因子之和归一化。新的方差项将是适马平方素数。</li><li id="b750" class="kv kw hi ja b jb le je lf jh lg jl lh jp li jt la lb lc ld bi translated">显然，先验高斯具有高得多的不确定性，因此，适马平方更大，这意味着nu的加权远大于μ。所以，这个意思会比mu更接近nu。有趣的是，<strong class="ja hj">方差项不受实际均值</strong>的影响，它只是使用之前的方差。</li></ol><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="er es lk"><img src="../Images/52dad1f0296170cbfaea8a08b0290e8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:442/format:webp/1*JHNcgr0K1ImJ00OxYANI3A.jpeg"/></div><figcaption class="kj kk et er es kl km bd b be z dx translated">更新功能</figcaption></figure><p id="61d1" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">它的代码实现如下:</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es ll"><img src="../Images/69ff4953c65c5fc384a964f614e80b85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2jsqo7Vrksjh-AV6ZAxHKg.jpeg"/></div></div></figure><blockquote class="jv jw jx"><p id="2e87" class="iy iz ju ja b jb jc ij jd je jf im jg jy ji jj jk jz jm jn jo ka jq jr js jt hb bi translated"><strong class="ja hj">如何实现高斯运动？</strong></p></blockquote><ol class=""><li id="9e5a" class="kv kw hi ja b jb jc je jf jh kx jl ky jp kz jt la lb lc ld bi translated">新的平均值是旧的平均值加上通常称为u的运动，因此，如果你在x方向移动10米，这将是10米，你知道σ平方是旧的σ平方加上运动高斯的方差。这是你需要知道的全部，这只是一个补充。</li><li id="25a7" class="kv kw hi ja b jb le je lf jh lg jl lh jp li jt la lb lc ld bi translated">预测步骤中产生的高斯只是将这两个量相加，μ加u和σ平方加r平方。</li></ol><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="er es lm"><img src="../Images/e9d05c77359a5ddde125fb9a2e9fc76e.png" data-original-src="https://miro.medium.com/v2/resize:fit:472/format:webp/1*RrqqctpNyQBFKfOladxYeA.jpeg"/></div><figcaption class="kj kk et er es kl km bd b be z dx translated">运动更新/预测功能</figcaption></figure><p id="da9f" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">它的代码实现如下:</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es ln"><img src="../Images/f18aea25eaf2befbcd9a1f84ca1584c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jbV3__lFGOMo9id2596tqA.jpeg"/></div></div></figure><p id="f690" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">所以现在让我们把所有的东西放在一起。让我们写一个主程序，它采用这两个函数，更新和预测，并输入一系列的测量和运动。在我选择的例子中:<br/>测量值为5。, 6., 7., 9.，和10。<br/>运动为1。, 1., 2., 1., 1.</p><p id="4a63" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">如果最初的估计值是5，这一切都会很好地完成，但是我们将它设置为0，不确定性非常大，为10，000。<br/>我们假设:<br/>测量不确定度为常数4，<br/>运动不确定度为常数2。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="er es lo"><img src="../Images/ca503c97cb346641ac74f80c78d8e900.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*CCHs-1Nl5GWTOBZvkzqIBQ.jpeg"/></div></figure><p id="2c1b" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">当你运行这个时，你对头寸的第一次估计应该基本上变成5–4.99，原因是你的初始不确定性太大，估计被第一次测量所支配。你的不确定度缩小到3.99，比测量不确定度略好。<br/>你然后预测你加1，但是不确定度增加到5.99，也就是2的运动不确定度。你基于度量6再次更新，你得到你的估计值5.99，差不多是6。你再移动1。你的尺寸是7。你移动2。你的尺寸是9。你移动1。你量10，你移动最后一个1。最终结果出来了，仓位的预测值是10.99，也就是你的10个仓位移动了1，不确定性——剩余不确定性是4。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="er es lp"><img src="../Images/8435c77832d9318c94171b8417d631c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1098/format:webp/1*pXCy-BhRWXnCtZiDQXYXlQ.jpeg"/></div><figcaption class="kj kk et er es kl km bd b be z dx translated">输出</figcaption></figure><p id="133f" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">通过循环遍历一系列x值并创建高斯值的结果列表来绘制高斯图，将得到:</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="er es lq"><img src="../Images/e3beeec9a2009ceecfd6049e1bbea1fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*j7-TTxVsBMxZSrBURAyH_w.jpeg"/></div><figcaption class="kj kk et er es kl km bd b be z dx translated">图表</figcaption></figure><p id="c111" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated"><strong class="ja hj">想用代码检查一下吗？</strong></p><ul class=""><li id="828b" class="kv kw hi ja b jb jc je jf jh kx jl ky jp kz jt lr lb lc ld bi translated">点击这里:<a class="ae ls" href="https://github.com/Garima13a/Kalman-Filters" rel="noopener ugc nofollow" target="_blank"> <strong class="ja hj">卡尔曼滤波器！</strong>T3】</a></li></ul><p id="8308" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated"><strong class="ja hj">参考:</strong></p><ul class=""><li id="20c8" class="kv kw hi ja b jb jc je jf jh kx jl ky jp kz jt lr lb lc ld bi translated"><a class="ae ls" href="https://www.udacity.com/course/computer-vision-nanodegree--nd891" rel="noopener ugc nofollow" target="_blank"> Udacity的计算机视觉纳米度</a></li></ul></div></div>    
</body>
</html>