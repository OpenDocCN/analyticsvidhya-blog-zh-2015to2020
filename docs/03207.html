<html>
<head>
<title>RESTful API, HOW TO | Part 1 — Design</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">RESTful API，如何|第1部分—设计</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/restful-api-how-to-part-1-design-4f89803dff15?source=collection_archive---------12-----------------------#2020-01-20">https://medium.com/analytics-vidhya/restful-api-how-to-part-1-design-4f89803dff15?source=collection_archive---------12-----------------------#2020-01-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/ea8561ec6f20a96acb586e1f2679b7e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*txAWXPI4RaGJbsnL"/></div></div></figure><p id="b88e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">设计和实施服务是我日常工作的一部分，我想分享一些最佳实践和技巧，可以帮助你的工作。</p><p id="ab38" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这个关于RESTful API的系列文章中，我将讨论几个主题:</p><ul class=""><li id="f883" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated"><strong class="is hj">设计</strong></li><li id="3011" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">履行</li><li id="0561" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">测试</li><li id="9e8f" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">部署</li></ul></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><p id="87bf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如今微服务世界是由restful APIs驱动的。有很多文章是关于什么是RESTful APIs以及它们能做什么的。</p><p id="a4e4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这篇文章中，我想告诉你如何组织你的工作流程(通常在一个团队中)，以便采用<strong class="is hj">的最佳实践</strong>，并从这项技术中获得最大收益。对于这个范围，我们将创建一个简单的应用程序，一个待办事项列表。在这个旅程的最后，您将已经创建了一个工作服务器。</p><p id="9ab7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在最初的步骤中，我们将面对<strong class="is hj">设计</strong>部分，通常被认为是理所当然的，但却是项目中最重要的<strong class="is hj">阶段之一。</strong></p><h1 id="1466" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">一些信息</h1><blockquote class="lh li lj"><p id="e4f6" class="iq ir lk is b it iu iv iw ix iy iz ja ll jc jd je lm jg jh ji ln jk jl jm jn hb bi translated">我们将使用<a class="ae lo" href="https://editor.swagger.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> swagger editor </strong> </a>来设计我们的API，<a class="ae lo" href="https://www.python.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> python </strong> </a>语言来创建微服务，最后<a class="ae lo" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj"> Docker </strong> </a>来交付最终的解决方案。所有的代码都可以在这个<a class="ae lo" href="https://github.com/dandpz/restfulapi-howto" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">回购</strong> </a>中找到。</p></blockquote><p id="9338" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">准备好了吗？我们走吧！</p><figure class="lq lr ls lt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/5deb65e85f2585bb1be282c854c13e9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7UYXEJNcYEPH0PrlZDcvyg.jpeg"/></div></div></figure><h1 id="f9a6" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">方案</h1><p id="0627" class="pw-post-body-paragraph iq ir hi is b it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn hb bi translated">一个典型的场景是将功能<strong class="is hj">需求</strong>转化为技术需求。要么你将实现所请求功能的代码，要么你将管理一个开发团队，描述服务应该如何工作是非常重要的。对于这个范围，标准文档非常合适。遵循<strong class="is hj"> OpenAPI </strong>规范，你可以对服务做一个容易理解的描述。</p><p id="2f81" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们现在开始设计我们的微服务。</p><p id="93b0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先让我们转到https://editor.swagger.io/的<a class="ae lo" href="https://editor.swagger.io/" rel="noopener ugc nofollow" target="_blank"/>。编辑器已经填充了<em class="lk"> petstore </em>示例，删除所有文本并从头开始！</p><figure class="lq lr ls lt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/c7e8fb0914d3af654d2487582606866b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HRORrvQubuA7y-11x4Caug.png"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx translated">Swagger编辑器默认页面</figcaption></figure><p id="8862" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在Swagger的描述符中有许多标签。让我们看看他们:</p><h2 id="2a22" class="me kk hi bd kl mf mg mh kp mi mj mk kt jb ml mm kx jf mn mo lb jj mp mq lf mr bi translated"><strong class="ak">一般数据</strong></h2><p id="b0f1" class="pw-post-body-paragraph iq ir hi is b it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn hb bi translated">开始时，将这几行添加到空白页:</p><pre class="lq lr ls lt fd ms mt mu mv aw mw bi"><span id="96b7" class="me kk hi mt b fi mx my l mz na">swagger: “2.0”<br/>info:<br/> description: “This is an example server for TO-DO list. \nThis is part of the collection of articles dedicated to the development of RESTful API. To know more visit the [repository](https://github.com/dandpz/restfulapi-howto) containing the code for these examples and more.”<br/> version: “1.0.0”<br/> title: “TO-DO list”<br/> license:<br/> name: “MIT”<br/> url: “https://choosealicense.com/licenses/mit/"<br/>host: “localhost:8080”<br/>basePath: “/v1”<br/>tags:<br/>- name: “todo”<br/> description: “Everything about your Todo”<br/>schemes:<br/>- “https”<br/>- “http”</span></pre><p id="4c9c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第一个片段描述了swagger版本，关于我们的API服务的一些信息，主机和版本，API将使用的标签和方案。</p><h2 id="4855" class="me kk hi bd kl mf mg mh kp mi mj mk kt jb ml mm kx jf mn mo lb jj mp mq lf mr bi translated">模型</h2><p id="92b6" class="pw-post-body-paragraph iq ir hi is b it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn hb bi translated">我们现在应该描述模型，以便定义将存储在服务器中的<strong class="is hj">对象</strong>。<br/>对于这个范围，有一个<em class="lk">定义标签:</em></p><pre class="lq lr ls lt fd ms mt mu mv aw mw bi"><span id="05cf" class="me kk hi mt b fi mx my l mz na">definitions:<br/>  Todo:<br/>    type: "object"<br/>    properties:<br/>      id:<br/>        description: "The id of this record, generated by the server"<br/>        type: "integer"<br/>        format: "int64"<br/>      name:<br/>        type: "string"<br/>      description:<br/>        type: "string"<br/>      dueDate:<br/>        type: "string"<br/>        format: "date"<br/>      status:<br/>        type: "string"<br/>        description: "Todo Status"<br/>        enum:<br/>        - "done"<br/>        - "late"<br/>        - "in progress"<br/>        - "to do"<br/>    xml:<br/>      name: "Todo"<br/>    example:<br/>      name: "Xmas presents"<br/>      dueDate: "2020/12/25"<br/>      description: "remember to buy Christmas presents"<br/>      status: "to do"<br/>  <br/>  PaginatedResponseData:<br/>    type: "object"<br/>    properties:<br/>      total:<br/>        type: "integer"<br/>      count:<br/>        type: "integer"<br/>      page:<br/>        type: "integer"<br/>      size:<br/>        type: "integer"<br/>      resources:<br/>        type: "array"<br/>        items:<br/>          type: "object"<br/>          properties: {}<br/>    xml:<br/>      name: "PaginatedResponseData"<br/>    example:<br/>      total: 10<br/>      size: 5<br/>      count: 5<br/>      resources:<br/>      - {}<br/>      - {}<br/>      - {}<br/>      - {}<br/>      - {}<br/>      page: 1</span></pre><blockquote class="lh li lj"><p id="1b15" class="iq ir lk is b it iu iv iw ix iy iz ja ll jc jd je lm jg jh ji ln jk jl jm jn hb bi translated">这里我们刚刚定义了一个Todo对象及其所有字段，后面是示例数据。我们还为分页响应添加了一个模型。</p></blockquote><h2 id="d0d8" class="me kk hi bd kl mf mg mh kp mi mj mk kt jb ml mm kx jf mn mo lb jj mp mq lf mr bi translated">小路</h2><p id="31f9" class="pw-post-body-paragraph iq ir hi is b it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn hb bi translated">现在让我们关注一下<em class="lk">路径</em>标签，在这里您将描述您的服务的<strong class="is hj">端点</strong>和客户端将调用的<strong class="is hj"> HTTP动词</strong>。</p><p id="e72e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将有两条主要路径:</p><ul class=""><li id="136d" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">/todo</li><li id="a79f" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">/todo/{todoId}</li></ul><p id="1346" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第一个将包含检索待办事项列表和创建新待办事项的方法。第二个是资源操作(检索、更新、删除)的路径。</p><p id="7056" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们看看它们是什么样子:</p><pre class="lq lr ls lt fd ms mt mu mv aw mw bi"><span id="36cc" class="me kk hi mt b fi mx my l mz na">paths:<br/>  /todo:<br/>    get:<br/>      tags: <br/>      - "todo"<br/>      summary: "Retrieve list of To-Do"<br/>      description: "Return a paginated list of Todo objects"<br/>      operationId: "getTodoList"<br/>      produces:<br/>      - "application/json"<br/>      parameters:<br/>      - $ref: '#/parameters/page'<br/>      - $ref: '#/parameters/size'<br/>      - in: "query"<br/>        name: "status"<br/>        description: "filter result on todo status"<br/>        required: false<br/>        type: "string"<br/>        enum:<br/>        - "done"<br/>        - "late"<br/>        - "in progress"<br/>        - "to do"<br/>      responses:<br/>        "200":<br/>          description: "Successful operation"<br/>          schema:<br/>            $ref: "#/definitions/PaginatedResponseData"<br/>        "400":<br/>          description: "Bad request"<br/>        "401":<br/>          description: "The request requires user authentication."<br/>        "403":<br/>          description: "The server understood the request, but is refusing to authorize it."<br/>    post:<br/>      tags:<br/>      - "todo"<br/>      summary: "Create a new Todo"<br/>      description: "Create a Todo"<br/>      operationId: "createTodo"<br/>      consumes:<br/>      - "application/json"<br/>      produces: <br/>      - "application/json"<br/>      parameters:<br/>      - in: "body"<br/>        name: "body"<br/>        schema:<br/>          $ref: '#/definitions/Todo'<br/>        required: true<br/>      responses:<br/>        "201":<br/>          description: "Created"<br/>        "400":<br/>          description: "Bad request"<br/>        "401":<br/>          description: "The request requires user authentication."<br/>        "403":<br/>          description: "The server understood the request, but is refusing to authorize it."<br/>        "405":<br/>          description: "Invalid input"<br/>        <br/>  /todo/{todoId}:<br/>    get:<br/>      tags: <br/>      - "todo"<br/>      summary: "Retrieve Todo by Id"<br/>      description: "Return a Todo object if exists"<br/>      operationId: "getTodoById"<br/>      produces:<br/>      - "application/json"<br/>      parameters:<br/>      - in: "path"<br/>        name: "todoId"<br/>        type: "string"<br/>        required: true<br/>      responses:<br/>        "200":<br/>          description: "Successful operation"<br/>          schema:<br/>            $ref: "#/definitions/Todo"<br/>        "400":<br/>          description: "Bad request"<br/>        "401":<br/>          description: "The request requires user authentication."<br/>        "403":<br/>          description: "The server understood the request, but is refusing to authorize it."<br/>        "404":<br/>          description: "Resource not found"<br/>          <br/>    put:<br/>      tags: <br/>      - "todo"<br/>      summary: "Update existing Todo by Id"<br/>      description: "Update a Todo object if exists"<br/>      operationId: "updateTodoById"<br/>      produces:<br/>      - "application/json"<br/>      parameters:<br/>      - in: "path"<br/>        name: "todoId"<br/>        type: "string"<br/>        required: true<br/>      - in: "body"<br/>        name: "body"<br/>        schema:<br/>          $ref: '#/definitions/Todo'<br/>        required: true<br/>      responses:<br/>        "200":<br/>          description: "Successful operation"<br/>        "400":<br/>          description: "Bad request"<br/>        "401":<br/>          description: "The request requires user authentication."<br/>        "403":<br/>          description: "The server understood the request, but is refusing to authorize it."<br/>        "404":<br/>          description: "Resource not found"<br/>    <br/>    delete:<br/>      tags: <br/>      - "todo"<br/>      summary: "Delete existing Todo by Id"<br/>      description: "Delete a Todo object if exists"<br/>      operationId: "deleteTodoById"<br/>      produces:<br/>      - "application/json"<br/>      parameters:<br/>      - in: "path"<br/>        name: "todoId"<br/>        type: "string"<br/>        required: true<br/>      responses:<br/>        "200":<br/>          description: "Successful operation"<br/>          schema:<br/>            $ref: "#/definitions/Todo"<br/>        "400":<br/>          description: "Bad request"<br/>        "401":<br/>          description: "The request requires user authentication."<br/>        "403":<br/>          description: "The server understood the request, but is refusing to authorize it."<br/>        "404":<br/>          description: "Resource not found"</span></pre><p id="a2f2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">基本上，我们添加了要执行的操作的方法。</p><blockquote class="lh li lj"><p id="1a33" class="iq ir lk is b it iu iv iw ix iy iz ja ll jc jd je lm jg jh ji ln jk jl jm jn hb bi translated">在参数中，您可能已经注意到了<em class="hi">页面</em>和<em class="hi">大小</em>，它们引用了文件底部定义的标签<strong class="is hj">参数</strong>，有助于避免代码重复。</p></blockquote><h2 id="f6a2" class="me kk hi bd kl mf mg mh kp mi mj mk kt jb ml mm kx jf mn mo lb jj mp mq lf mr bi translated">安全性</h2><p id="b2a8" class="pw-post-body-paragraph iq ir hi is b it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn hb bi translated">现在是讨论安全会话的时候了，这需要另外写一篇文章，但是对于这个简单的例子，让我们为RESTful API使用一个基本的<strong class="is hj"> Auth </strong>。</p><pre class="lq lr ls lt fd ms mt mu mv aw mw bi"><span id="2ac2" class="me kk hi mt b fi mx my l mz na">securityDefinitions:<br/>  BasicAuth:<br/>    type: basic<br/>    <br/>security:<br/>- BasicAuth: []</span></pre><p id="1dda" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在第一个标签中，我们定义了类型为<em class="lk"> basic </em>的Auth，在第二个标签中，我们将它设置为整个项目的Auth方法。</p><h2 id="a2ca" class="me kk hi bd kl mf mg mh kp mi mj mk kt jb ml mm kx jf mn mo lb jj mp mq lf mr bi translated">概观</h2><p id="4734" class="pw-post-body-paragraph iq ir hi is b it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn hb bi translated">如果您遵循所有这些步骤，您应该会得到如下结果:</p><figure class="lq lr ls lt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nb"><img src="../Images/df00528736da25edb8761130ccf775bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VHnH2UupfwxmtNdgsMIrOQ.png"/></div></div><figcaption class="ma mb et er es mc md bd b be z dx translated">决赛成绩</figcaption></figure><p id="d66d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们刚刚定义了一个描述我们服务的最小文档。这个文档非常重要，在典型的工作流中，它是不同团队(通常是后端和前端)之间关于服务行为的<strong class="is hj">协议</strong>。</p><h1 id="73b0" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">结论</h1><p id="f302" class="pw-post-body-paragraph iq ir hi is b it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn hb bi translated">在本文中，我们讨论了RESTful API的<strong class="is hj">设计</strong>,我们使用了Swagger编辑器，这是一个非常有用的工具，可以<strong class="is hj">改进</strong>您的开发。</p><p id="c900" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在构建服务描述的过程中，我们遇到了swagger语法的一部分，为了对它有一个完整的了解，你可以在官方网站上浏览文档。</p><p id="db34" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在下一篇文章  <strong class="is hj"> </strong>中，我们将看到如何从我们刚刚描述的服务开始生成服务器。</p><p id="d130" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">敬请期待！</strong></p><blockquote class="lh li lj"><p id="2517" class="iq ir lk is b it iu iv iw ix iy iz ja ll jc jd je lm jg jh ji ln jk jl jm jn hb bi translated">下一篇文章链接:<a class="ae lo" rel="noopener" href="/@daniele.dapuzzo/restful-api-how-to-part-2-implementation-e3bca6072b70">https://medium . com/@ daniele . dapuzzo/restful-API-how-to-part-2-implementation-E3 BCA 6072 b 70</a></p></blockquote></div></div>    
</body>
</html>