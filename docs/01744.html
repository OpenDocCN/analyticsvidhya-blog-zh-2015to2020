<html>
<head>
<title>Orchestrating Dynamic Reports in Python and R with Rmd Files</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python和R编制带有Rmd文件的动态报告</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/orchestrating-dynamic-reports-in-python-and-r-with-rmd-files-b0d7d1615481?source=collection_archive---------23-----------------------#2019-11-11">https://medium.com/analytics-vidhya/orchestrating-dynamic-reports-in-python-and-r-with-rmd-files-b0d7d1615481?source=collection_archive---------23-----------------------#2019-11-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="22e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">要不要用Python提取csv文件，用R可视化？用R准备一切并用Python做结论听起来怎么样？如果您知道正确的库和技术，两者都是可能的。在这里，我们将在一个分析中使用两种语言遍历一个用例。</em></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/c783071a8ef5251feee43e4a9742d65e.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*PgHZQHZrv-sVtQaeB9alVQ.png"/></div></figure><h2 id="a549" class="jm jn hi bd jo jp jq jr js jt ju jv jw iq jx jy jz iu ka kb kc iy kd ke kf kg bi translated"><strong class="ak"> Python里面R反之亦然</strong></h2><p id="c936" class="pw-post-body-paragraph if ig hi ih b ii kh ik il im ki io ip iq kj is it iu kk iw ix iy kl ja jb jc hb bi translated">用Python和R编写的几个支持包允许分析师在一个Python或R脚本中结合Python和R。熟悉R的人可以使用<a class="ae km" href="https://rstudio.github.io/reticulate/" rel="noopener ugc nofollow" target="_blank"> reticulate </a>包在R内部调用Python代码，然后，一个R脚本就可以在Python和R之间互操作了(Python对象被翻译成R对象，反之亦然)。但是，如果您使用Python，但是想要使用R的一些功能，可以考虑使用用Python编写的<a class="ae km" href="https://rpy2.readthedocs.io/en/version_2.8.x/introduction.html" rel="noopener ugc nofollow" target="_blank"> rpy2 </a>包来启用嵌入式R代码。</p><p id="d86d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">R markdown是一个流行的框架，用于将代码和结果组合成一个输出，它提供了一个优雅的Python和R集成。我们将在一个Rmd脚本中创建一个结合了两种语言的动态报告。我们将使用<a class="ae km" href="https://en.wikipedia.org/wiki/Foreign_exchange_market" rel="noopener ugc nofollow" target="_blank">外汇交易数据</a>来捕捉15分钟间隔内的价格变动，然后绘制一个交易分析师在定价模型中使用的蜡烛图(<a class="ae km" href="https://www.investopedia.com/terms/o/ohlcchart.asp" rel="noopener ugc nofollow" target="_blank"> OHLC </a>图表)。</p><h2 id="f361" class="jm jn hi bd jo jp jq jr js jt ju jv jw iq jx jy jz iu ka kb kc iy kd ke kf kg bi translated"><strong class="ak">在R Markdown文档中用Python代码运行R</strong></h2><p id="1717" class="pw-post-body-paragraph if ig hi ih b ii kh ik il im ki io ip iq kj is it iu kk iw ix iy kl ja jb jc hb bi translated">一个R markdown，或Rmd，是一个包含文本或注释(与文本格式相结合)以及用``包围的R代码块的文本文件。在R或R Studio中，您可以从文件中创建有用的报告，并以HTML、pdf或word等输出格式呈现。但是，主要的好处是源代码、输出和注释都包含在一个文件中，便于团队之间的协作。</p><p id="27d4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">即使是R爱好者也可能不知道Rmd文件可以包含Python块。更方便的是，对象在环境之间共享，允许程序员用Python调用对象，用相反的语言调用R。</p><h2 id="625d" class="jm jn hi bd jo jp jq jr js jt ju jv jw iq jx jy jz iu ka kb kc iy kd ke kf kg bi translated"><strong class="ak">使用Python进行R Markdown</strong></h2><p id="e260" class="pw-post-body-paragraph if ig hi ih b ii kh ik il im ki io ip iq kj is it iu kk iw ix iy kl ja jb jc hb bi translated">让我们看看如何在Rmd中使用Python。首先，确保Python安装在您的计算机上，并且您计划在Rmd中使用的所有Python库或模块都已安装(如果愿意，可以使用pip works和<a class="ae km" href="https://www.lukaskawerau.com/rmarkdown-with-python-and-virtual-envs/" rel="noopener ugc nofollow" target="_blank">虚拟环境</a>)。</p><p id="3985" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Rmd文件中，Python代码块类似于R块:Python代码放在标记内:` ` `{python}和` ``。</p><p id="9fcf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是一个简单的嵌入Python代码的R markdown:</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="kn ko l"/></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/c297a324765501319abb60070cb4a663.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*eHN6Y1UjstHdXmDtPuaTDw.png"/></div></figure><p id="1178" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上面的例子中，csv是在pandas库的帮助下加载的，一列被重命名，第一行被打印。在文件标题中，报告用###定义，并打印单个作者注释。下面是我们运行Rmd时的结果:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kp"><img src="../Images/0bb00c3391dffa4b3570de6295262b60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1166/format:webp/1*LFgUiWRjCAMtJNQgVvj0JQ.png"/></div></figure><p id="ed85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除了代码和输出之外，还打印了标题和作者注释。现在已经使用Python加载了数据，可以在R:</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="kn ko l"/></div></figure><p id="f64f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">R代码以``{r}开头，以` `结尾。代码后面是Python块和R代码中引用的对象。在我们的例子中，R对象是在reticulate包的帮助下从Python对象转换而来的。py$data命令检索在Python中创建的对象，并将其转换为R数据框架。现在，当R数据帧被创建时，它可以在R代码中进一步使用。</p><p id="db85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是输出的样子:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kq"><img src="../Images/b35a49ec864b63d1b7e92106b482de2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/0*-zrJQvHm06xxoH1D"/></div></figure><p id="99ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们将继续使用R，并创建一个交易者经常使用的可视化图形:蜡烛图。下面是在<a class="ae km" href="https://plot.ly/r/candlestick-charts/" rel="noopener ugc nofollow" target="_blank"> plotly </a>库中编写的<a class="ae km" href="https://en.wikipedia.org/wiki/Candlestick_chart" rel="noopener ugc nofollow" target="_blank">烛台</a>图的R代码:</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="kn ko l"/></div></figure><p id="343b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这应该会显示以下内容:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es kr"><img src="../Images/30d2e795479634ac90ad705e83e25e89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*C1c59F6LNdKbJtUU"/></div></div></figure><p id="9512" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个简单的例子演示了如何使用Python和R来创建报告。流行的Python pandas库用于加载和数据准备。然后，R用于可视化。</p><p id="dc69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以创建一个R数据对象，然后在Python环境中引用它。下面是一个这样的例子，其中创建了一个带有Python mpl_finance模块的可视化:</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="kn ko l"/></div></figure><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="kn ko l"/></div></figure><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="kn ko l"/></div></figure><p id="de57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就是这样！现在，您可以选择使用哪种语言，或者让您的团队以他们喜欢的语言进行协作。</p><h2 id="b2f1" class="jm jn hi bd jo jp jq jr js jt ju jv jw iq jx jy jz iu ka kb kc iy kd ke kf kg bi translated"><strong class="ak">Rmd入门</strong></h2><p id="c078" class="pw-post-body-paragraph if ig hi ih b ii kh ik il im ki io ip iq kj is it iu kk iw ix iy kl ja jb jc hb bi translated">热门平台(如:Coursera、Udemy、Vertabelo Academy、Data Camp)都有r和Python课程。数据可视化概念也包含在许多。R和Python对于数据科学来说都很棒，而且两者都可以工作。如果你被鼓励开始学习，考虑一下这些:</p><ol class=""><li id="ec2b" class="kw kx hi ih b ii ij im in iq ky iu kz iy la jc lb lc ld le bi translated">在Coursera上，有一个关于可再生研究和R markdown基础知识的很棒的课程:</li></ol><p id="e361" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae km" href="https://www.coursera.org/lecture/reproducible-research/r-markdown-5NzHN" rel="noopener ugc nofollow" target="_blank">https://www . coursera . org/lecture/reproducible-research/r-markdown-5NzHN</a></p><p id="3d30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.如果你不熟悉R，Data Camp在这里有很好的介绍:</p><p id="9f50" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae km" href="https://www.datacamp.com/courses/free-introduction-to-r" rel="noopener ugc nofollow" target="_blank">https://www.datacamp.com/courses/free-introduction-to-r</a></p><p id="8c20" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.作为Vertabelo Academy的作者，我个人可以推荐我们的Python和R课程。他们特别关注那些有商业背景的人:</p><p id="1b1c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae km" href="https://academy.vertabelo.com/course/python-data-science" rel="noopener ugc nofollow" target="_blank">https://academy.vertabelo.com/course/python-data-science</a></p><p id="23d8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">https://academy.vertabelo.com/course/data-visualization-101<a class="ae km" href="https://academy.vertabelo.com/course/data-visualization-101" rel="noopener ugc nofollow" target="_blank"/></p><p id="ddcd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.Edx有很多Python和R的课程，包括哈佛，IBM，微软的。对于Python初学者，可以试试这个IBM的课程:【https://www.edx.org/course/python-basics-for-data-science-2 T4】</p><h2 id="4eca" class="jm jn hi bd jo jp jq jr js jt ju jv jw iq jx jy jz iu ka kb kc iy kd ke kf kg bi translated"><strong class="ak">总结</strong></h2><p id="ae85" class="pw-post-body-paragraph if ig hi ih b ii kh ik il im ki io ip iq kj is it iu kk iw ix iy kl ja jb jc hb bi translated">Python和R是当今最热门的数据科学语言。熟悉这两者是有好处的，因为项目可能需要它们各自的方面。有许多包可以帮助集成这两种用例。一个是R markdown，一种用于在R. Rmd文件中制作动态文档的文件格式，无缝集成了可执行代码和注释。在reticulate包的帮助下，可以很容易地在Python中访问R对象，反之亦然。分析师现在不需要在Python和R之间做出选择——将两者集成到一个文件中是可能的。</p></div></div>    
</body>
</html>