<html>
<head>
<title>None v/s NaN in Python/Numpy | NaN explored</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python/Numpy | NaN中无v/s NaN探索</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/none-v-s-nan-in-python-numpy-nan-explored-318f4cb6df66?source=collection_archive---------7-----------------------#2020-05-30">https://medium.com/analytics-vidhya/none-v-s-nan-in-python-numpy-nan-explored-318f4cb6df66?source=collection_archive---------7-----------------------#2020-05-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/5df1dc7626ece50ca02643418cf62ad0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JuEpckerfffe4grV"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated"><a class="ae iu" href="https://unsplash.com/@grohsfabian?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">法比安·格罗斯</a>在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="3539" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi jt translated"><span class="l ju jv jw bm jx jy jz ka kb di">我正在使用python工作，并开始学习数据分析，作为开始使用Python进行数据分析的第一步，我先浏览了Numpy，然后转向Pandas。我遇到了术语<code class="du kc kd ke kf b"><strong class="ix hj">NaN in Numpy</strong></code>,并且经常在熊猫中使用，因为Numpy是熊猫数据框架的组成部分。我知道<code class="du kc kd ke kf b"><strong class="ix hj">None in Python</strong></code>，但我想到了以下问题:</span></p><p id="065d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">→什么是实际的<code class="du kc kd ke kf b"><strong class="ix hj">difference between None and NaN</strong></code>对于初学者来说，这是一个普遍的困惑。</p><p id="f1f3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi jt translated"><span class="l ju jv jw bm jx jy jz ka kb di">L</span>T22】让我们先探讨一下这两者的类型。</p><pre class="kg kh ki kj fd kk kf kl km aw kn bi"><span id="f48f" class="ko kp hi kf b fi kq kr l ks kt">import numpy as np<br/>type(np.nan)<br/>type(None)</span><span id="7f0f" class="ko kp hi kf b fi ku kr l ks kt">float<br/>NoneType</span></pre><p id="43e2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du kc kd ke kf b"><strong class="ix hj">np.nan is a float</strong></code>和<code class="du kc kd ke kf b"><strong class="ix hj">None is an Object of NoneType</strong></code></p><p id="4c73" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du kc kd ke kf b">np.nan</code>是<code class="du kc kd ke kf b"><strong class="ix hj">Not a Number (NaN)</strong></code>的IEEE 754浮点表示，属于<code class="du kc kd ke kf b"><strong class="ix hj">python built-in numeric type float</strong></code></p><p id="13c3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">还有，<code class="du kc kd ke kf b"><strong class="ix hj">None indicates an Object which has no value</strong></code>。有趣的是，任何不显式返回任何东西的函数都隐式返回None。尝试以下方法:</p><pre class="kg kh ki kj fd kk kf kl km aw kn bi"><span id="f7a2" class="ko kp hi kf b fi kq kr l ks kt">print(print("This is cool"))</span></pre><figure class="kg kh ki kj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kv"><img src="../Images/67499f175241fca70e271ea80435fd2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oWNHsHeN8zVFgCa7XxBRGw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">nump.nan对None</figcaption></figure><p id="f10c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从NaN是一个浮点数而None是一个宾语，我们可以解释什么？我想到的一件事是算术运算:</p><p id="1ff5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们<code class="du kc kd ke kf b">may apply operations with NaN but not with None</code>，检查以下内容:</p><pre class="kg kh ki kj fd kk kf kl km aw kn bi"><span id="f72a" class="ko kp hi kf b fi kq kr l ks kt">np.nan + np.nan  or np.nan + 5<br/>np.nan - np.nan  or np.nan - 5<br/>np.nan * np.nan  or np.nan * 5<br/>np.nan / np.nan  or np.nan / 5<br/>np.nan % np.nan  or np.nan % 5</span><span id="7859" class="ko kp hi kf b fi ku kr l ks kt">Output:<br/>nan</span><span id="2794" class="ko kp hi kf b fi ku kr l ks kt"><strong class="kf hj">None+None</strong></span><span id="e343" class="ko kp hi kf b fi ku kr l ks kt"><strong class="kf hj">Output:<br/>Type Error : unsupported operand type(s)</strong></span></pre><blockquote class="kw kx ky"><p id="25f8" class="iv iw kz ix b iy iz ja jb jc jd je jf la jh ji jj lb jl jm jn lc jp jq jr js hb bi translated">Y <strong class="ix hj">你可能会把</strong> <code class="du kc kd ke kf b"><strong class="ix hj">NaN</strong></code> <strong class="ix hj">想成一种数据病毒——它会感染它接触到的任何其他对象。不考虑运算，用</strong> <code class="du kc kd ke kf b"><strong class="ix hj">NaN</strong></code> <strong class="ix hj">运算的结果总会是另一个</strong> <code class="du kc kd ke kf b"><strong class="ix hj">NaN</strong></code> <strong class="ix hj">。</strong></p></blockquote><p id="4684" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi jt translated">让我们一起来探索南的另一个有趣的地方！！</p><pre class="kg kh ki kj fd kk kf kl km aw kn bi"><span id="f811" class="ko kp hi kf b fi kq kr l ks kt"><strong class="kf hj">np.nan == np.nan<br/>False</strong></span><span id="ca60" class="ko kp hi kf b fi ku kr l ks kt"><strong class="kf hj">np.nan is np.nan<br/>True</strong></span></pre><blockquote class="kw kx ky"><p id="f853" class="iv iw kz ix b iy iz ja jb jc jd je jf la jh ji jj lb jl jm jn lc jp jq jr js hb bi translated"><strong class="ix hj">注意:——Python生成id并给每个变量赋值，我们可以用id(var)和</strong> <code class="du kc kd ke kf b"><strong class="ix hj">id is what gets compared when we use "is" operator in python</strong></code>得到</p><p id="41d4" class="iv iw kz ix b iy iz ja jb jc jd je jf la jh ji jj lb jl jm jn lc jp jq jr js hb bi translated"><strong class="ix hj">我们所说的相等是指在比较中两个变量的内容是相同的，而</strong> <code class="du kc kd ke kf b"><strong class="ix hj">content is what get compared when we use “==’ operator in python</strong></code></p></blockquote><p id="3944" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，如果我们检查id(np.nan ),它将是相同的:</p><figure class="kg kh ki kj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/63f0fa74aa4fcec2055aaa53bf09838b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*61oRXX0cvMHF-3I_gX9lqw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">两个名词不相等，但它们是相同的</figcaption></figure><p id="a7fb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">但如果没有则不同:</strong></p><figure class="kg kh ki kj fd ij er es paragraph-image"><div class="er es le"><img src="../Images/610ab352af28369a0d4fc2627c7607a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1084/format:webp/1*ehjlCHMwXd5RGj-u6sKEVg.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">没有什么是相同和相等的</figcaption></figure><blockquote class="kw kx ky"><p id="55c3" class="iv iw kz ix b iy iz ja jb jc jd je jf la jh ji jj lb jl jm jn lc jp jq jr js hb bi translated"><strong class="ix hj">关于NaN值得注意的另一点是:- </strong> <code class="du kc kd ke kf b"><strong class="ix hj">NaN</strong></code> <strong class="ix hj">特指浮点值；对于整数、字符串或其他类型，没有等效的NaN值。</strong></p></blockquote><p id="7642" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi jt translated">熊猫中的<span class="l ju jv jw bm jx jy jz ka kb di"> N </span> <strong class="ix hj"> one和NaN:-<code class="du kc kd ke kf b"><strong class="ix hj">NaN</strong></code>和<code class="du kc kd ke kf b"><strong class="ix hj">None</strong></code>都有他们的位置，熊猫是建造到<code class="du kc kd ke kf b"><strong class="ix hj">handle the two of them nearly interchangeably</strong></code>的，在他们之间进行适当的转换，我们来看同样的例子。</strong></p><p id="2876" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们有一个包含整数数组的序列，然后用“None”替换序列中的一个元素，注意dtype的变化</p><pre class="kg kh ki kj fd kk kf kl km aw kn bi"><span id="dafc" class="ko kp hi kf b fi kq kr l ks kt">s1 = pd.Series([1,2,3,4], name="integer_series")<br/>print(s1.dtype) --&gt; <strong class="kf hj">int64</strong><br/>s1[0] = None<br/>print(s1.dtype) --&gt; <strong class="kf hj">float64</strong></span></pre><p id="96ae" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，通过在一个整数数组中引入一个None，None会自动转换为NaN，导致<code class="du kc kd ke kf b"><strong class="ix hj">dtype changed to ‘float64’ from ‘int64’</strong></code>，如果你看到这个序列，你会在索引0处看到‘NaN’。</p><figure class="kg kh ki kj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lf"><img src="../Images/f3318dfa78b7c62d9795ea756607fdcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w9q8FLE2kRcQmULh9OquGA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">无转换为具有整数系列的NaN</figcaption></figure><p id="1c0c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，让我们看一系列字符串对象，并通过在系列中引入None来看结果:</p><pre class="kg kh ki kj fd kk kf kl km aw kn bi"><span id="f3ae" class="ko kp hi kf b fi kq kr l ks kt">import numpy as np</span><span id="0097" class="ko kp hi kf b fi ku kr l ks kt">ser1 = pd.Series(["one","two","three","four","five","six"], index=[1,2,3,4,5,6], name='Object_Series')</span><span id="4c8e" class="ko kp hi kf b fi ku kr l ks kt">print(ser1.dtype) --&gt; <strong class="kf hj">Object</strong></span><span id="4e7e" class="ko kp hi kf b fi ku kr l ks kt">ser1[1] = None</span><span id="d654" class="ko kp hi kf b fi ku kr l ks kt">print(ser1.dtype) --&gt;  <strong class="kf hj">Object</strong></span><span id="6dad" class="ko kp hi kf b fi ku kr l ks kt">ser1[2] = np.nan</span><span id="ce89" class="ko kp hi kf b fi ku kr l ks kt">print(ser1.dtype) --&gt; <strong class="kf hj">Object</strong></span><span id="0ebf" class="ko kp hi kf b fi ku kr l ks kt">ser1</span><span id="b210" class="ko kp hi kf b fi ku kr l ks kt">Output:<br/><strong class="kf hj">1     None</strong> <br/><strong class="kf hj">2      NaN </strong><br/>3    three <br/>4     four <br/>5     five <br/>6      six <br/>Name: Object_Series, dtype: object</span></pre><p id="49be" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">由于字符串是作为对象存储，所以没有从None到NaN或NaN到None的转换。</p><p id="03c1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在一系列floats中，没有一个像预期的那样被转换为Nan:</p><figure class="kg kh ki kj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lg"><img src="../Images/846ff00233d9d460fba55d1bced58624.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_13kMDeplPrCYSm_T_L2uA.png"/></div></div></figure><p id="fed4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有多种方法可以在pandas中引入、检测、删除和使用NaN/None值，你可以在另一篇文章中查看..</p><div class="lh li ez fb lj lk"><a rel="noopener follow" target="_blank" href="/@milankmr/learning-pandas-series-part-7-handling-nan-missing-data-in-series-57f5d888c2f"><div class="ll ab dw"><div class="lm ab ln cl cj lo"><h2 class="bd hj fi z dy lp ea eb lq ed ef hh bi translated">学习熊猫。系列(第7部分)(处理系列中的NaN/缺失数据)</h2><div class="lr l"><h3 class="bd b fi z dy lp ea eb lq ed ef dx translated">连续处理NaN是学习从处理数据分析领域的缺失数据开始的必修课…</h3></div><div class="ls l"><p class="bd b fp z dy lp ea eb lq ed ef dx translated">medium.com</p></div></div><div class="lt l"><div class="lu l lv lw lx lt ly io lk"/></div></div></a></div></div><div class="ab cl lz ma gp mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="hb hc hd he hf"><p id="53e6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这篇文章中，我试着总结了None和NaN之间的区别，欢迎您对它们的想法/反馈，以提高对它们的理解。</p><p id="fd28" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可能想了解为什么我们在Pandas中需要单独的索引器(loc/iloc ):</p><div class="lh li ez fb lj lk"><a rel="noopener follow" target="_blank" href="/@milankmr/learning-pandas-part-4-series-why-we-need-separate-indexers-loc-iloc-c081047f3a79"><div class="ll ab dw"><div class="lm ab ln cl cj lo"><h2 class="bd hj fi z dy lp ea eb lq ed ef hh bi translated">学习熊猫。系列(第4部分)(为什么我们需要单独的索引器(loc，iloc..)?)</h2><div class="lr l"><h3 class="bd b fi z dy lp ea eb lq ed ef dx translated">为什么iloc和loc是熊猫索引和切片的首选？一开始可能会很困惑，但是相信我，你…</h3></div><div class="ls l"><p class="bd b fp z dy lp ea eb lq ed ef dx translated">medium.com</p></div></div><div class="lt l"><div class="mg l lv lw lx lt ly io lk"/></div></div></a></div><p id="f08c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">快乐学习！！！</p></div></div>    
</body>
</html>