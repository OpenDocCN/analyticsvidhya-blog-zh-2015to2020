<html>
<head>
<title>Create inference code and deploy code for machine learning in python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在python中为机器学习创建推理代码和部署代码</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-to-build-inference-code-or-deploy-code-for-machine-learning-in-python-5fcdf43c1852?source=collection_archive---------0-----------------------#2018-12-06">https://medium.com/analytics-vidhya/how-to-build-inference-code-or-deploy-code-for-machine-learning-in-python-5fcdf43c1852?source=collection_archive---------0-----------------------#2018-12-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="b440" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于致力于机器学习和人工智能，我看到的挑战是如何部署机器学习运行时或评分模型以及作为rest API运行存在差距。有很多关于如何构建和训练模型的文档。还有一些方法可以运行与批处理相同的模型。但是问题是如何将模型作为rest api来操作。现在，随着DevOps实践和行业将每个人都推向docker，问题变成了如何在docker容器中部署模型并运行。</p><p id="1d1c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在python本身是开源的，存在2和3版本冲突的问题。Docker也是开源的。鉴于所有这些工具都是开源的，不确定它会有多稳定和可靠。</p><p id="3a01" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是我试图创造的。建立一个简单的机器学习分类模型。本教程不是关于构建模型，而是我们如何使用pickle保存训练好的模型，然后使用Flask编写推理代码使其成为rest API。以下是细节</p><ol class=""><li id="3241" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">将使用pickle构建的模型保存为pickle文件</li><li id="0f00" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">用python创建一个推理代码来读取pickle文件，并用新数据进行评分。</li><li id="3745" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">构建Docker文件，从推理代码创建一个容器。</li><li id="6b8f" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">构建包含所有依赖项的requirements.txt文件。</li><li id="6e0d" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">构建docker容器。</li></ol><p id="fa5e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.将使用pickle构建的模型保存为pickle文件</p><p id="b691" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在用可视化代码写机器学习python代码。要保存模型，请确保您</p><p id="8c2f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">导入pickle #这一步应该在模型构建文件的开头。在调用mode.fit的那一行之后(在这种情况下，我使用scikit-learn ),然后调用pickle保存模型，下面是示例代码:</p><p id="d09b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">#我们创建一个分类器实例并拟合数据。</p><p id="e92e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">clf.fit(X_scaled，y)</p><p id="93b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">#将模型保存为pickle文件</p><p id="d158" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">filename = 'carlr.pkl '</p><p id="29b8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">pickle.dump(clf，open(文件名，' wb ')，协议=2)</p><p id="77b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">添加这些代码并运行模型python文件后，pickle文件应该会弹出。为模型选择您自己的文件名。我使用protocol = 2，因为它兼容python 2和3版本。我在知道我需要包括什么包和协议版本方面有一些挑战，所以想分享我的知识。</p><p id="8ac7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.用python创建一个推理代码来读取pickle文件，并用新数据进行评分。</p><p id="eb75" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在是编写推理代码的时候了。下面是我写的样本代码。我在azure中使用数据科学虚拟机，因为所有工具都可用。我将以下内容保存到mltestweb.py python文件中。</p><p id="32a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">#步骤1 —加载数据</p><p id="b6f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">########################</p><p id="8939" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">进口泡菜</p><p id="3cb8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">进口熊猫作为pd</p><p id="0f85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">导入操作系统、uuid、系统</p><p id="e5f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">#从azure.storage.blob导入BlockBlobService，PublicAccess</p><p id="004e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将numpy作为np导入</p><p id="859a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从烧瓶导入烧瓶，请求</p><p id="5b3f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">#http://127.0.0.1:80/predict？价格= 13500 &amp;年龄= 23 &amp; KM = 46986 &amp; fuel type = Diesel &amp; HP = 90 &amp; met color = 1 &amp; Automatic = 0 &amp; CC = 2000 &amp; Doors = 4 &amp; Weight = 1165</p><p id="ff99" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">#13500，2346986，柴油，90，1，0，2000，31165</p><p id="b341" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">#创建要运行的Flask对象</p><p id="9223" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">app = Flask(__name__)</p><p id="9d22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">@app.route('/')</p><p id="117b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">def home():</p><p id="8ed3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">return“嗨，欢迎来到Flask！!"</p><p id="4526" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">@app.route('/predict ')</p><p id="92e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">定义预测():</p><p id="d367" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">#从浏览器获取值</p><p id="2ece" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">#价格、车龄、公里数、燃料类型、马力、MetColor、自动、CC、车门、重量</p><p id="eb9d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">#在GET请求中读取URL中的所有请求变量。</p><p id="6994" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">价格= request.args['价格']</p><p id="1021" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Age = request.args['Age']</p><p id="b452" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">KM = request.args['KM']</p><p id="7127" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">fuel type = request . args[' fuel type ']</p><p id="4da1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">HP = request.args['HP']</p><p id="581a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">met color = request . args[' met color ']</p><p id="4a82" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Automatic = request . args[' Automatic ']</p><p id="5d97" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">CC = request.args['CC']</p><p id="338a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Doors = request.args['Doors']</p><p id="fd5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Weight = request.args['Weight']</p><p id="c35e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"># test data = NP . array([价格，年龄，公里，燃料类型，HP，MetColor，自动，CC，车门，重量])。整形(1，10)</p><p id="cfe3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">#将变量转换成数据帧。</p><p id="0fca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">testData = pd。DataFrame({'Age ':年龄，' KM': KM}，索引=[0])</p><p id="a2b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">X = testData[["Age "，" KM"]]。价值观念</p><p id="1cfc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">y=np.array([0])</p><p id="f25f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">来自sklearn .预处理导入标准缩放器</p><p id="cd84" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">scaler = StandardScaler()</p><p id="1f6f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">X _ scaled = scaler . fit _ transform(X)</p><p id="2c40" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">#从磁盘加载模型</p><p id="ebfb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">filename = 'carlr.pkl '</p><p id="9e66" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">loaded_model = pickle.load(open(文件名，' rb '))</p><p id="8335" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">result = loaded _ model . score(X _ scaled，y)</p><p id="b845" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">output = "Age:" + str(年龄)+"，KM:" + str(KM) +"，实惠:"+ str(结果)</p><p id="9e8a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">#output = "预测汽车价格: "</p><p id="b32f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">返回(输出)</p><p id="f1c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"># Main方法。</p><p id="86d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">if __name__ == '__main__ ':</p><p id="b131" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">#运行样本()</p><p id="aa51" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">打印(" * *启动服务器…")</p><p id="7ff6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">#运行服务器</p><p id="4b77" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">app.run(主机='0.0.0.0 '，端口=80)</p><p id="96f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.构建Docker文件，从推理代码创建一个容器。</p><p id="209e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我使用linux数据科学虚拟机来创建docker文件。需要注意的一点是确保dockerfile的文件名都是小写的，因为DockerFile对我不适用。</p><p id="e899" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是docker文件的内容:</p><p id="6122" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">来自ubuntu:最新</p><p id="ebc3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">维护者xxxx " xxx @ yyyyyyyyy.com "</p><p id="8889" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行apt-get update -y</p><p id="3cb9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行apt-get install-y python-pip python-dev build-essential</p><p id="abae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">暴露80</p><p id="05f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">收到。/应用程序</p><p id="326e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">工作目录/应用程序</p><p id="8f1c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行pip install -r requirements.txt</p><p id="395d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">入口点["python"]</p><p id="1c27" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">CMD ["mltestweb.py"]</p><p id="f221" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.构建包含所有依赖项的requirements.txt文件。</p><p id="972b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">requirements.txt文件列出了scikit和flask所需的所有包。这是这个文件的内容</p><p id="f1e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">烧瓶==0.12.2</p><p id="7762" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">熊猫==0.23.4</p><p id="b499" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">scikit-learn==0.19.1</p><p id="c548" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">scipy==1.1.0</p><p id="28e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">numpy==1.14.6</p><p id="4189" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.构建docker容器</p><p id="988f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在复制pickle文件、推理代码flask python文件、dockerfile和requirements.txt，并将其移动到linux vm。您可以使用winscp或ftp或ssh来复制文件。现在ssh到您复制文件的linux机器中。</p><p id="f54d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们先来看看如何创建docker图像。我们需要指定dockerfile的位置，并用适当的名称标记图像。mlsample:latest表示容器的名称以及当前版本。我在/data/home/mlsample/文件夹中有所有的模型文件和docker文件。首先转到文件夹，然后运行命令。</p><p id="eeeb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">sudo docker build/data/home/ml sample/-t ml sample:最新</p><p id="663d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一步是运行模型。</p><p id="0c7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">sudo docker run-d-p 80:80ml样品</p><p id="a0e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，如果您键入sudo docker ps -a，您应该会看到容器正在运行。</p><p id="078c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一步是将容器推到某个容器注册中心，然后从那里可以像使用AKS或任何其他容器部署工具和技术的任何其他微服务部署一样进行部署。</p><p id="2183" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要推送注册，首先使用sudo docker ps找到容器id</p><p id="8d14" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后首先提交映像，使用:</p><pre class="jr js jt ju fd jv jw jx jy aw jz bi"><span id="8137" class="ka kb hi jw b fi kc kd l ke kf">sudo docker commit c16378f943fe mysample</span></pre><p id="5dc9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在这样做，以推动注册。</p><pre class="jr js jt ju fd jv jw jx jy aw jz bi"><span id="cb4c" class="ka kb hi jw b fi kc kd l ke kf">$ sudo docker tag rhel-httpd registry-host:5000/myadmin/mysample<br/><br/>$ sudo docker push registry-host:5000/myadmin/mysample</span></pre><p id="5bec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果这是私人注册，你需要认证，以推动图像注册。</p><ol class=""><li id="4299" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><code class="du kg kh ki jw b">sudo docker login --username username --password password</code></li><li id="41b2" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><code class="du kg kh ki jw b">sudo docker tag mysample username/mysample</code></li><li id="fdc4" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><code class="du kg kh ki jw b">sudo docker push username/mysample</code></li></ol><p id="8649" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从这一点上来说，它变成了一个REST API Docker容器，可以像部署其他微服务一样进行部署。现在，要在生产中部署REST API，请确保您有足够的能力来满足您的客户需求。</p><p id="7f39" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦您部署了REST API，您也可以使用任何浏览器或postman来测试您的API。根据你的主机位置，你可能需要使用其他工具来监控和限制API的使用。如果这是公司内部使用案例，则没有必要。此外，如果你想推理代码安全，你也可以包括获得认证，并建立自己的和其他加密和其他合规技术。</p><p id="d101" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这份文件作为一个模板，并享受机器和深度学习的乐趣。</p></div></div>    
</body>
</html>