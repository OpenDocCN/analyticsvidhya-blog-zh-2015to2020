<html>
<head>
<title>Live Twitter Sentiment Analysis (With Deployment)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实时 Twitter 情绪分析(部署)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/live-twitter-sentiment-analysis-with-deployment-e4a84f826b92?source=collection_archive---------3-----------------------#2020-11-06">https://medium.com/analytics-vidhya/live-twitter-sentiment-analysis-with-deployment-e4a84f826b92?source=collection_archive---------3-----------------------#2020-11-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/12763adf9798715334801c59aaf5bb60.png" data-original-src="https://miro.medium.com/v2/resize:fit:594/format:webp/1*fXGXXbSNuNAjvYMJSOe41g.jpeg"/></div></figure><p id="3c43" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这个故事将分为 4 个部分:</p><ol class=""><li id="97ea" class="jk jl hi io b ip iq it iu ix jm jb jn jf jo jj jp jq jr js bi translated">连接<strong class="io hj"> Twitter API </strong>并提取数据。</li><li id="9427" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jp jq jr js bi translated">对数据进行预处理，使用<strong class="io hj"> TextBlob </strong>进行情感分析。</li><li id="7825" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jp jq jr js bi translated">使用<strong class="io hj">流线型</strong>和<strong class="io hj">烧瓶</strong>创建一个 API。</li><li id="1078" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jp jq jr js bi translated">在<strong class="io hj"> Heroku 上部署项目。</strong></li></ol></div><div class="ab cl jy jz gp ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="hb hc hd he hf"><figure class="kf kg kh ki fd ij"><div class="bz dy l di"><div class="kj kk l"/></div></figure><ul class=""><li id="3901" class="jk jl hi io b ip iq it iu ix jm jb jn jf jo jj kl jq jr js bi translated">我们的<strong class="io hj">目标</strong>将是创建一个 API，用户将输入一个主题，我们将在 Twitter 上搜索并提取与该主题相关的推文。</li><li id="b205" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj kl jq jr js bi translated">然后，我们将对提取的推文进行情感分析，并将其分为积极、消极和中性。</li><li id="954d" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj kl jq jr js bi translated">此外，我们将提供可视化，以便用户可以进一步分析数据。</li><li id="abe2" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj kl jq jr js bi translated">这是我已经部署的项目的链接，只是为了让我们清楚我们正在朝着什么方向努力。</li></ul><blockquote class="km kn ko"><p id="8f8a" class="im in kp io b ip iq ir is it iu iv iw kq iy iz ja kr jc jd je ks jg jh ji jj hb bi translated">链接:<a class="ae kt" href="https://twitter-sentiment-analysis07.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">https://twitter-sentiment-analysis07.herokuapp.com/</a></p></blockquote></div><div class="ab cl jy jz gp ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="hb hc hd he hf"><figure class="kf kg kh ki fd ij"><div class="bz dy l di"><div class="ku kk l"/></div></figure><blockquote class="km kn ko"><p id="6f00" class="im in kp io b ip iq ir is it iu iv iw kq iy iz ja kr jc jd je ks jg jh ji jj hb bi translated"><strong class="io hj">我们要讨论的所有步骤都可以在这里的 TwitterSentimentAnalysis.ipynb 文件中找到。这里我将只介绍重要的概念，其余的只是标准的 Python 代码。</strong></p><p id="daec" class="im in kp io b ip iq ir is it iu iv iw kq iy iz ja kr jc jd je ks jg jh ji jj hb bi translated">Github 链接:<a class="ae kt" href="https://github.com/DarekarA/TwitterSentimentAnalysis_Public" rel="noopener ugc nofollow" target="_blank">https://github.com/DarekarA/TwitterSentimentAnalysis_Public</a></p></blockquote><h1 id="0ffe" class="kv kw hi bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated"><strong class="ak"> 1。连接 Twitter API 并提取数据。</strong></h1><ul class=""><li id="cf5a" class="jk jl hi io b ip lt it lu ix lv jb lw jf lx jj kl jq jr js bi translated">为此，你需要一个 Twitter 开发者账户，如果你没有的话，很容易就能得到，只需遵循以下步骤:</li></ul><blockquote class="km kn ko"><p id="5d90" class="im in kp io b ip iq ir is it iu iv iw kq iy iz ja kr jc jd je ks jg jh ji jj hb bi translated">申请一个 Twitter 开发者账户。</p><p id="4ccd" class="im in kp io b ip iq ir is it iu iv iw kq iy iz ja kr jc jd je ks jg jh ji jj hb bi translated"><a class="ae kt" href="https://www.extly.com/docs/autotweetng_joocial/tutorials/how-to-auto-post-from-joomla-to-twitter/apply-for-a-twitter-developer-account/" rel="noopener ugc nofollow" target="_blank">https://www . extly . com/docs/autotweetng _ joocial/tutorials/how-to-auto-post-from-Joomla-to-Twitter/apply-for-a-Twitter-developer-account/</a></p></blockquote><ul class=""><li id="eebc" class="jk jl hi io b ip iq it iu ix jm jb jn jf jo jj kl jq jr js bi translated">一旦你得到帐户，只需创建一个虚拟应用程序，从该应用程序中，我们将获得必要的密钥和令牌，我们需要的 API。</li><li id="635b" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj kl jq jr js bi translated"><strong class="io hj">这两个步骤是</strong>:</li></ul><p id="9aea" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">1.一个<a class="ae kt" href="https://developer.twitter.com/en/docs/basics/developer-portal/guides/apps" rel="noopener ugc nofollow" target="_blank"> Twitter 应用</a>可以通过<a class="ae kt" href="https://developer.twitter.com/en/apps" rel="noopener ugc nofollow" target="_blank"> Twitter 应用仪表板</a>页面用一个批准的<a class="ae kt" href="https://developer.twitter.com/en/docs/basics/developer-portal/overview" rel="noopener ugc nofollow" target="_blank">开发者账户</a>创建。</p><p id="c9d3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">2.在<a class="ae kt" href="https://developer.twitter.com/en/docs/basics/developer-portal/guides/apps" rel="noopener ugc nofollow" target="_blank"> Twitter 应用程序</a>仪表板内应用程序“详细信息”部分的“密钥和令牌”选项卡上生成访问令牌。单击“访问令牌&amp;访问令牌密码”部分中的“创建”按钮。</p><figure class="kf kg kh ki fd ij er es paragraph-image"><div class="er es ly"><img src="../Images/668714bef4138e7e3eabf52e7c96803f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*QEc4EVK4JHYNgxu4qZ62Fg.png"/></div></figure><ul class=""><li id="6adf" class="jk jl hi io b ip iq it iu ix jm jb jn jf jo jj kl jq jr js bi translated">连接建立后，我们可以查询 Twitter Api，请求我们想要的数据。</li><li id="295f" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj kl jq jr js bi translated">我们将准备一个数据帧“df”来存储提取的数据。</li></ul><figure class="kf kg kh ki fd ij er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es lz"><img src="../Images/5205434188a831d5ccd2b8c380c78851.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SIdirhT4y_kC2tQuXgurgQ.png"/></div></div><figcaption class="me mf et er es mg mh bd b be z dx translated">使用 tweepy 获取数据。光标()</figcaption></figure><ul class=""><li id="1621" class="jk jl hi io b ip iq it iu ix jm jb jn jf jo jj kl jq jr js bi translated">使用 tweepy。Cursor()我们将获取我们选择的主题的推文，每条推文都会附带一些信息，如发布推文的人的用户名、该推文的点赞/转发、用户的位置等等。</li><li id="52b8" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj kl jq jr js bi translated">我们可以只使用我们感兴趣的任何属性，并将其存储在数据帧中，以便我们可以进一步处理它。</li></ul></div><div class="ab cl jy jz gp ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="hb hc hd he hf"><h1 id="d7a9" class="kv kw hi bd kx ky mi la lb lc mj le lf lg mk li lj lk ml lm ln lo mm lq lr ls bi translated">2.<strong class="ak">对数据进行预处理(清洗)，使用 TextBlob 进行情感分析。</strong></h1><figure class="kf kg kh ki fd ij er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es mn"><img src="../Images/9b24aad81a2c3f928ed779f96f4cd5ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XoUT5TEXXL76QcHx.jpg"/></div></div><figcaption class="me mf et er es mg mh bd b be z dx translated">图片来自:【https://dimensionless.in/ T4】</figcaption></figure><ul class=""><li id="c62c" class="jk jl hi io b ip iq it iu ix jm jb jn jf jo jj kl jq jr js bi translated">像任何其他项目一样，我们需要在执行任何分析之前清理数据。</li><li id="8b12" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj kl jq jr js bi translated">清理阶段将是直截了当的，我们将删除任何标签，如“@，#”。我们也将删除特殊字符和任何链接。</li><li id="90ee" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj kl jq jr js bi translated">所有这些都可以用一个简单的函数来完成</li></ul><figure class="kf kg kh ki fd ij er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es mo"><img src="../Images/42daec0f0c82b4000043adc8227d0c58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FU-o8ERVxo60nbFXesihpg.png"/></div></div><figcaption class="me mf et er es mg mh bd b be z dx translated">函数来清理所有提取的 Tweets。</figcaption></figure><ul class=""><li id="61fc" class="jk jl hi io b ip iq it iu ix jm jb jn jf jo jj kl jq jr js bi translated">既然数据是干净的，我们可以使用这个数据通过<strong class="io hj"> TextBlob </strong>来分析情绪。</li></ul><figure class="kf kg kh ki fd ij er es paragraph-image"><div class="er es mp"><img src="../Images/a6ae8af5b2aeee735df778bef9334708.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/0*YHC3LaLVN3JQP6ho.jpeg"/></div></figure><ul class=""><li id="38bc" class="jk jl hi io b ip iq it iu ix jm jb jn jf jo jj kl jq jr js bi translated"><a class="ae kt" href="https://textblob.readthedocs.io/en/dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="io hj"> TextBlob </strong> </a>是一个用于处理文本数据的大型库，然而我们目前只对 TextBlob 提供的“极性”得分感兴趣，使用它我们可以将推文分类为正面、负面或中性。</li><li id="1a90" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj kl jq jr js bi translated">TextBlob 给出了一个句子的极性。极性范围为[-1，1]。</li><li id="8ad9" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj kl jq jr js bi translated">-<strong class="io hj">1 =负</strong></li><li id="a12c" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj kl jq jr js bi translated"><strong class="io hj">0 =空档</strong></li><li id="5da9" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj kl jq jr js bi translated"><strong class="io hj">1 =正</strong></li></ul><figure class="kf kg kh ki fd ij er es paragraph-image"><div class="er es mq"><img src="../Images/67b54f2930f5038a3c3282130d382eb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*x4IZl_8GsjPujqDpD0zFqQ.png"/></div><figcaption class="me mf et er es mg mh bd b be z dx translated">分析情感的功能</figcaption></figure><ul class=""><li id="99c9" class="jk jl hi io b ip iq it iu ix jm jb jn jf jo jj kl jq jr js bi translated">一旦我们获得了情绪，我们就可以像往常一样分析数据。</li><li id="8a35" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj kl jq jr js bi translated">以下是我们如何分析/可视化数据的一些示例。</li></ul><figure class="kf kg kh ki fd ij er es paragraph-image"><div class="er es mr"><img src="../Images/a0cb898d15803db92bf8aff45ff74e6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1042/format:webp/1*OdjMHUMZ2lfX7iLxDMtmZg.png"/></div><figcaption class="me mf et er es mg mh bd b be z dx translated">总体情绪分布。</figcaption></figure><figure class="kf kg kh ki fd ij er es paragraph-image"><div class="er es ms"><img src="../Images/1ba9148fc1b97aa724931d7ef96d4365.png" data-original-src="https://miro.medium.com/v2/resize:fit:818/format:webp/1*mzk_c40nw8FlVVb7kDb-VA.png"/></div><figcaption class="me mf et er es mg mh bd b be z dx translated">不同情绪的饼图。</figcaption></figure><figure class="kf kg kh ki fd ij er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es mt"><img src="../Images/c9f02277ba7998b0fa2cec6a5906da24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V6ATceyuTHOxsqXEQNIUDQ.png"/></div></div><figcaption class="me mf et er es mg mh bd b be z dx translated">我们提取的推文中最常用的词。</figcaption></figure><ul class=""><li id="0d6a" class="jk jl hi io b ip iq it iu ix jm jb jn jf jo jj kl jq jr js bi translated">类似地，我们可以根据我们从推文中获得的观点进行许多这样的可视化和不同的分析，以了解 Twitter 上正在发生的关于我们选择的任何主题的讨论。</li></ul></div><div class="ab cl jy jz gp ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="hb hc hd he hf"><figure class="kf kg kh ki fd ij"><div class="bz dy l di"><div class="mu kk l"/></div></figure><h1 id="c84c" class="kv kw hi bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">3.使用<strong class="ak">流线</strong>和<strong class="ak">烧瓶</strong>创建 API。</h1><ul class=""><li id="f8ed" class="jk jl hi io b ip lt it lu ix lv jb lw jf lx jj kl jq jr js bi translated">API 部分很简单，代码参考 App_Streamlit.py 即可。</li><li id="bd9f" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj kl jq jr js bi translated">https://github.com/DarekarA/TwitterSentimentAnalysis_Public 有这份文件和所有其他需要的文件。</li><li id="69ca" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj kl jq jr js bi translated">您可以在本地运行这段代码，并在<a class="ae kt" href="http://localhost:5000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:5000/ </a>进行测试</li><li id="b9a7" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj kl jq jr js bi translated">之后，把它上传到你的 GitHub 账户，这样它就可以在 Heroku 上部署了。</li></ul></div><div class="ab cl jy jz gp ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="hb hc hd he hf"><h1 id="e160" class="kv kw hi bd kx ky mi la lb lc mj le lf lg mk li lj lk ml lm ln lo mm lq lr ls bi translated">4.在<strong class="ak"> Heroku 部署项目。</strong></h1><ul class=""><li id="21a8" class="jk jl hi io b ip lt it lu ix lv jb lw jf lx jj kl jq jr js bi translated">除了我们的。py 文件，我们需要一个:</li></ul><p id="46d2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">1.Procfile，2.setup.sh，3。Requirement.txt(在 CMD 中，只需键入 Pip Freeze 即可获得需求文件)。所有这些文件都可以在 GitHub 链接中找到。</p><ul class=""><li id="e436" class="jk jl hi io b ip iq it iu ix jm jb jn jf jo jj kl jq jr js bi translated">1.更新 procfile(这是程序的起点)<br/> 2。更新 setup.sh 文件<br/> 3。将所有这些文件直接转储到 Github 存储库中。(不在文件夹内)</li><li id="635f" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj kl jq jr js bi translated">然后只需进入 Heroku 应用程序并链接 GitHub，选择正确的目录并部署项目。</li><li id="d895" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj kl jq jr js bi translated">就这样，你的项目就可以供所有人使用了！！！</li></ul><figure class="kf kg kh ki fd ij"><div class="bz dy l di"><div class="mv kk l"/></div></figure><ul class=""><li id="eadd" class="jk jl hi io b ip iq it iu ix jm jb jn jf jo jj kl jq jr js bi translated">希望这些步骤在部署端到端项目的过程中对你有所帮助，并且能够顺利进行。如有任何疑问，或您认为我们可以做的任何补充，请联系我！</li></ul></div></div>    
</body>
</html>