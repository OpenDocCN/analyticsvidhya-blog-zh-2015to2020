<html>
<head>
<title>Build a Machine Learning Model in your Browser using TensorFlow.js and Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用TensorFlow.js和Python在浏览器中构建机器学习模型</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/build-a-machine-learning-model-in-your-browser-using-tensorflow-js-and-python-a27f7f6b93d4?source=collection_archive---------1-----------------------#2019-06-14">https://medium.com/analytics-vidhya/build-a-machine-learning-model-in-your-browser-using-tensorflow-js-and-python-a27f7f6b93d4?source=collection_archive---------1-----------------------#2019-06-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/48a98dd7d750b2134281b07bc3f9e147.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZsCHHg_wZ9Pil7iF.jpg"/></div></div></figure><h1 id="b90f" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">为什么要用TensorFlow.js？</h1><p id="9df2" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">我将用一种独特的方法来回答这个问题。我不会深入研究TensorFlow.js的理论方面，也不会列出为什么它是一个如此不可思议的工具。让我们构建一个应用程序，在5分钟内使用您的网络摄像头对图像进行分类。没错——我们将直接进入代码！</p><p id="19cb" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">最棒的是，你不需要安装任何东西就能做到这一点！只需要一个文本编辑器和一个网络浏览器就足够了。下面的视频展示了我们将要构建的应用程序:</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es kr"><img src="../Images/d6ba8a7cd7a4e78c766ecd5f4957459b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*DeZGlix0YGRMw7_V.gif"/></div></figure><p id="7bc5" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">多酷啊。我在浏览器中花了几分钟就完成了。</p><h1 id="e475" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">使用网络摄像头在浏览器中构建图像分类模型</h1><p id="3ae3" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">打开你选择的文本编辑器，创建一个文件【index.html T2】。将以下代码保存在该文件中:</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="5343" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">接下来，创建另一个文件<strong class="jq hj"> index.js </strong>，并在其中写入以下代码:</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="b603" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">保存这两个文件，并在谷歌Chrome或Mozilla Firefox等浏览器中打开你的<strong class="jq hj">index.html</strong>文件。就是这样！您现在已经创建了一个应用程序，可以在浏览器中使用您的网络摄像头对图像进行实时分类！</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es kr"><img src="../Images/d6ba8a7cd7a4e78c766ecd5f4957459b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*DeZGlix0YGRMw7_V.gif"/></div></figure><p id="73d4" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hj">本例中需要注意的要点:</strong></p><ul class=""><li id="31a1" class="ky kz hi jq b jr km jv kn jz la kd lb kh lc kl ld le lf lg bi translated">在上面的例子中，我们使用了一个名为<a class="ae lh" href="https://ai.googleblog.com/2017/06/mobilenets-open-source-models-for.html" rel="noopener ugc nofollow" target="_blank"> MobileNet </a>的预训练图像分类模型</li><li id="287d" class="ky kz hi jq b jr li jv lj jz lk kd ll kh lm kl ld le lf lg bi translated">我们使用<a class="ae lh" href="https://ml5js.org/" rel="noopener ugc nofollow" target="_blank"> ml5.js </a>，一个构建在TensorFlow.js之上的库，将MobileNet模型加载到我们的浏览器中，并对视频提要执行推理</li><li id="4018" class="ky kz hi jq b jr li jv lj jz lk kd ll kh lm kl ld le lf lg bi translated">我们还利用了<a class="ae lh" href="https://p5js.org/" rel="noopener ugc nofollow" target="_blank"> P5.js </a>库来处理视频提要并在视频上显示标签</li></ul><blockquote class="ln lo lp"><p id="1509" class="jo jp lq jq b jr km jt ju jv kn jx jy lr ko kb kc ls kp kf kg lt kq kj kk kl hb bi translated">我喜欢我们不需要在机器上安装任何东西的事实。这个例子应该适用于任何现代系统，不管是Linux、Windows还是MAC OS——这就是使用JavaScript在web上构建模型的强大之处。</p></blockquote><p id="915b" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">现在，让我们看看TensorFlow.js提供的强大功能，以及如何利用它们在浏览器中部署机器学习模型。</p><h1 id="cdd9" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">TensorFlow.js的功能</h1><blockquote class="ln lo lp"><p id="4209" class="jo jp lq jq b jr km jt ju jv kn jx jy lr ko kb kc ls kp kf kg lt kq kj kk kl hb bi translated"><em class="hi"> TensorFlow.js是一个用JavaScript开发和训练ML模型的库，部署在浏览器或Node.js上</em></p></blockquote><p id="5cac" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">TensorFlow.js提供了大量可以利用和使用的功能:</p><ul class=""><li id="793c" class="ky kz hi jq b jr km jv kn jz la kd lb kh lc kl ld le lf lg bi translated">如果ML模型是用网络语言编写的，那么部署 ML模型会更容易。</li><li id="8b66" class="ky kz hi jq b jr li jv lj jz lk kd ll kh lm kl ld le lf lg bi translated">因为所有主流浏览器都支持JavaScript，所以你可以无处不在地使用它。对你的用户来说也是如此。</li><li id="55e7" class="ky kz hi jq b jr li jv lj jz lk kd ll kh lm kl ld le lf lg bi translated">TensorFlow.js是一个<strong class="jq hj">客户端库</strong>这减轻了任何与数据的<strong class="jq hj">隐私</strong>相关的担忧。</li><li id="d920" class="ky kz hi jq b jr li jv lj jz lk kd ll kh lm kl ld le lf lg bi translated">在你的客户机上运行实时推理会让你的应用程序更具<strong class="jq hj">交互性</strong>。</li></ul><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lu"><img src="../Images/fea6cedab0e2eff2348059029f773760.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RQrbTVDJnIokkzUG.png"/></div></div></figure><h1 id="120e" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">浏览器中的机器学习</h1><p id="15a0" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">TensorFlow.js提供了两种训练模型的方法(与TensorFlow非常相似):</p><ul class=""><li id="e668" class="ky kz hi jq b jr km jv kn jz la kd lb kh lc kl ld le lf lg bi translated">第一种方法是使用<strong class="jq hj">核心API </strong>使用低级张量运算来定义你的模型</li><li id="577d" class="ky kz hi jq b jr li jv lj jz lk kd ll kh lm kl ld le lf lg bi translated">第二种方法是使用<strong class="jq hj">层API </strong>定义一个模型，类似于<strong class="jq hj"> Keras </strong></li></ul><p id="a96a" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">让我们通过几个例子来理解这两种方法。毕竟，学习一个概念的最好方法是把它付诸实践！</p><p id="53a7" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hj">首先，设置你的HTML文件:</strong></p><p id="6888" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在你的计算机中创建一个新的<strong class="jq hj">index.html</strong>文件，并在其中写入以下代码:</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="635d" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我们已经创建了一个基本的HTML页面，并从云URL加载了Tensorflow.js(第7行)。</p><p id="40c9" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hj">关于安装TensorFlow.js (deeplearn.js)的说明</strong></p><blockquote class="ln lo lp"><p id="aaf7" class="jo jp lq jq b jr km jt ju jv kn jx jy lr ko kb kc ls kp kf kg lt kq kj kk kl hb bi translated"><em class="hi">既然TensorFlow.js是为浏览器做的，那么安装使用TensorFlow.js最简单的方法就是根本不安装。</em> <strong class="jq hj"> <em class="hi">你可以简单地从你的HTML中的一个URL加载它。</em> </strong></p></blockquote><p id="1e2d" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">您只需将下面一行添加到HTML文件中:</p><pre class="ks kt ku kv fd lv lw lx ly aw lz bi"><span id="42dd" class="ma ir hi lw b fi mb mc l md me">&lt;script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.0.0/dist/tf.min.js"&gt;&lt;/script&gt;</span></pre><p id="ab69" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">搞定了。这真的是直截了当。</p><h1 id="5ea9" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">核心API:使用张量</h1><blockquote class="ln lo lp"><p id="f04e" class="jo jp lq jq b jr km jt ju jv kn jx jy lr ko kb kc ls kp kf kg lt kq kj kk kl hb bi translated"><em class="hi">核心API与</em> <a class="ae lh" href="https://www.tensorflow.org/guide/low_level_intro" rel="noopener ugc nofollow" target="_blank"> <em class="hi"> TensorFlow核心</em> </a> <em class="hi">非常相似，我们可以使用低级张量运算和线性代数来定义模型。</em></p></blockquote><p id="ef78" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">如果我们想要构建定制模型或者想要从头构建神经网络，这是非常有用的。让我们举一个在浏览器中使用张量的例子。</p><p id="2473" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">首先在你的<em class="lq">index.html</em>文件中的<strong class="jq hj"> &lt;脚本&gt;&lt;/脚本&gt; </strong>标签之间添加以下代码:</p><pre class="ks kt ku kv fd lv lw lx ly aw lz bi"><span id="88a3" class="ma ir hi lw b fi mb mc l md me">const a = tf.tensor([1, 2, 3, 4]); <br/>const b = tf.tensor([10, 20, 30, 40]); <br/>const y = a.add(b); // equivalent to tf.add(a, b) <br/>const z = a.mul(b); <br/>y.print();<br/>z.print();</span></pre><p id="63ae" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hj"> &lt;脚本&gt; </strong>标签基本上表示JavaScript。我们在这些标签之间写的任何东西都将作为JavaScript代码执行。下面是你的<em class="lq">index.html</em>现在的样子:</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="44ad" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在上面的代码中，我们正在对两个张量<em class="lq"> a </em>和<em class="lq"> b </em>执行基本的加法和乘法运算，并在浏览器中打印结果。现在，转到您的终端，打开您的项目文件夹，使用下面的命令启动一个Python服务器:</p><pre class="ks kt ku kv fd lv lw lx ly aw lz bi"><span id="d68a" class="ma ir hi lw b fi mb mc l md me">python3 -m http.server</span></pre><p id="7a8e" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">然后转到您的浏览器，打开以下地址:</p><pre class="ks kt ku kv fd lv lw lx ly aw lz bi"><span id="ff42" class="ma ir hi lw b fi mb mc l md me"><a class="ae lh" href="http://localhost:8000/" rel="noopener ugc nofollow" target="_blank">http://localhost:8000/</a></span></pre><p id="78bd" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">一旦你看到一个写着“Tensorflow.js Core API”的页面，使用按键<strong class="jq hj"> Ctrl+Shift+I </strong>打开<strong class="jq hj">控制台</strong>。这应该可以在Chrome和Firefox上运行。我们在控制台中得到上述操作的输出:</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mf"><img src="../Images/8b4e13b6023a1eb3a09a7d9a2f553e57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ErLy3q9wK3XT-gcq.png"/></div></div></figure><p id="fcc7" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">如果你想更深入地了解Core API，那么我推荐你浏览官方的<a class="ae lh" href="https://www.tensorflow.org/js/guide/tensors_operations" rel="noopener ugc nofollow" target="_blank"> CoreAPI文档</a>。</p><h1 id="0b6e" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">Layers API:构建类似Keras的模型</h1><p id="60c3" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">Layers API与Python中的Keras非常相似。就像Keras一样，您可以使用<strong class="jq hj">顺序</strong>和<strong class="jq hj">功能</strong>方法创建一个模型。</p><p id="ba9e" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">让我们通过一个例子更仔细地看看顺序方法。我们将根据这些数据点训练一个回归模型:</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es mg"><img src="../Images/013b792365bd33ccd2a7f9272b5b7469.png" data-original-src="https://miro.medium.com/v2/resize:fit:404/format:webp/0*9J7F7ZgX1OIHDtBH.png"/></div></figure><p id="f370" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这里X和Y是线性关系——每个Y对应X + i(其中I为0，1，2，3…n+1)。让我们在这个数据集上训练一个基本的回归模型。您可以在您的<em class="lq">index.html</em>文件中的<strong class="jq hj"> &lt;脚本&gt;&lt;/脚本&gt; </strong>标签之间编写以下代码:</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="dfc1" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">眼尖的人一定注意到了上面的语法与用Python构建顺序模型的Keras语法非常相似。当我们回到浏览器<strong class="jq hj">控制台</strong>时，我们将得到预测。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mh"><img src="../Images/057a4c6e91b8623b68c0e0f7cb05f604.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mWhdcEoEeIDa4cCu.png"/></div></div></figure><p id="a7f1" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我们的简单回归模型预测<strong class="jq hj"> 7.556 </strong>，与<strong class="jq hj"> 8 </strong>的预期值非常接近。这是一个基本的例子，但我们可以清楚地看到，在我们的浏览器中直接建立机器学习模型是多么容易和有用。</p><blockquote class="ln lo lp"><p id="8c3a" class="jo jp lq jq b jr km jt ju jv kn jx jy lr ko kb kc ls kp kf kg lt kq kj kk kl hb bi translated"><em class="hi"> TensorFlow.js能够在浏览器中构建机器学习和深度学习模型。如果在模型训练期间您的系统中有GPU，它还会自动利用GPU的能力。</em></p></blockquote><p id="e802" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这里有几个使用TensorFlow.js <strong class="jq hj">训练的深度学习模型的例子，你可以在</strong><a class="ae lh" href="https://github.com/tensorflow/tfjs-examples" rel="noopener ugc nofollow" target="_blank"><strong class="jq hj">tfjs-examples repository</strong></a><strong class="jq hj">中探索这些例子。</strong></p><h1 id="bbd2" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">利用谷歌的预训练模型:PoseNet</h1><p id="4adb" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">TensorFlow.js提供了大量来自谷歌的<a class="ae lh" href="https://www.analyticsvidhya.com/blog/2018/07/top-10-pretrained-models-get-started-deep-learning-part-1-computer-vision/?utm_source=blog&amp;utm_medium=build-machine-learning-model-in-your-browser-tensorflow-js-deeplearn-js" rel="noopener ugc nofollow" target="_blank">预训练模型</a>。预训练模型的优势在于我们可以开箱即用。</p><p id="4dd1" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">您可以在此查看可用的预培训模型:</p><pre class="ks kt ku kv fd lv lw lx ly aw lz bi"><span id="cb9d" class="ma ir hi lw b fi mb mc l md me"><a class="ae lh" href="https://www.tensorflow.org/js/models" rel="noopener ugc nofollow" target="_blank">https://www.tensorflow.org/js/models</a></span></pre><p id="b68e" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><em class="lq">在本文中我们将与</em><a class="ae lh" href="https://www.tensorflow.org/lite/models/pose_estimation/overview" rel="noopener ugc nofollow" target="_blank"><em class="lq"/></a><em class="lq">一起工作。</em></p><h1 id="e55b" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">PoseNet是如何工作的？</h1><p id="2d57" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">需要明确的是，姿势估计是<em class="lq">而不是</em>关于识别图像中的人。<strong class="jq hj">该算法只是简单地估计关键身体关节的位置。</strong></p><p id="5ba3" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">检测到的关键点以“Part”和“ID”为索引，置信度在0.0到1.0之间(1.0为最高。</p><p id="502d" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">以下是PoseNet输出类型的一个示例:</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mi"><img src="../Images/397ed39f0961580cd96c905316b65edf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*z-xo3v3AMi8VW_KV.gif"/></div></div></figure><p id="97e6" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">不可思议吧。！</p><p id="0701" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">让我们回到波塞尼特。创建一个新文件<strong class="jq hj">index.html</strong>并添加以下代码:</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="2cdc" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这将创建一个基本的HTML网页并加载必要的文件:</p><ul class=""><li id="a92f" class="ky kz hi jq b jr km jv kn jz la kd lb kh lc kl ld le lf lg bi translated">ml5.js和p5.js是通过它们的官方URL加载的</li><li id="63cf" class="ky kz hi jq b jr li jv lj jz lk kd ll kh lm kl ld le lf lg bi translated">js是一个文件，我们将在其中编写使用posenet的代码</li></ul><p id="96d5" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">现在，我们将编写使用PoseNet的JavaScript代码。在与<em class="lq">index.html</em>相同的文件夹中创建一个新文件<strong class="jq hj"> posenet.js </strong>。</p><p id="e1b0" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">让我们从第一步开始。</p><p id="0ed0" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hj">第一步:加载PoseNet模型并从网络摄像头捕捉视频</strong></p><p id="f6d1" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我们将使用ml5.js加载PoseNet。同时，p5.js使我们能够使用几行代码从网络摄像头捕捉视频:</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="6132" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在上面的代码块中需要注意的最重要的事情是:</p><ul class=""><li id="0c68" class="ky kz hi jq b jr km jv kn jz la kd lb kh lc kl ld le lf lg bi translated"><strong class="jq hj"> createCapture(视频):</strong>这是一个p5.js函数，用于通过网络摄像头捕捉视频来创建视频元素。</li><li id="bd91" class="ky kz hi jq b jr li jv lj jz lk kd ll kh lm kl ld le lf lg bi translated"><strong class="jq hj"> ml5.poseNet(video，modelRead) </strong>:我们使用ml5.js来加载poseNet模式。通过传入<strong class="jq hj">视频，</strong>我们告诉模型处理视频输入。</li><li id="b72d" class="ky kz hi jq b jr li jv lj jz lk kd ll kh lm kl ld le lf lg bi translated"><strong class="jq hj"> poseNet.on() </strong>:每当检测到一个新的姿态时，执行该功能。</li><li id="ebde" class="ky kz hi jq b jr li jv lj jz lk kd ll kh lm kl ld le lf lg bi translated"><strong class="jq hj"> modelReady(): </strong>当PoseNet完成加载后，我们调用这个函数来显示模型的状态。</li></ul><p id="e15b" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hj">第二步:检测身体关节的关键点</strong></p><p id="92ce" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">下一步是检测姿态。你可能已经注意到，在上一步中，我们通过调用<strong class="jq hj"> poseNet.on() </strong>将每个检测到的姿势保存在<strong class="jq hj"> poses </strong>变量中。该功能在后台持续运行。每当发现一个新姿势时，它会以下列格式给出身体关节的位置:</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es mj"><img src="../Images/2663358314971d9efe209944a40c71ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/0*FbYt_zgvLthrlVqY.png"/></div></figure><ul class=""><li id="5273" class="ky kz hi jq b jr km jv kn jz la kd lb kh lc kl ld le lf lg bi translated"><strong class="jq hj">‘得分’是指模型的置信度</strong></li><li id="b74d" class="ky kz hi jq b jr li jv lj jz lk kd ll kh lm kl ld le lf lg bi translated"><strong class="jq hj">‘部位’表示检测到的身体关节/关键点</strong></li><li id="2d97" class="ky kz hi jq b jr li jv lj jz lk kd ll kh lm kl ld le lf lg bi translated"><strong class="jq hj">“位置”包含被检测零件的x和y位置</strong></li></ul><p id="bb0e" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hj">第三步:显示检测到的身体关节</strong></p><p id="0816" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我们不必为这部分编写代码，因为它是自动生成的。</p><p id="e63c" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我们知道检测到的身体关节及其x和y位置。现在，我们只需要将它们绘制在视频上，以显示检测到的身体关节。</p><p id="8be0" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我们将使用20% ( <em class="lq">关键点得分</em>T32】0.2)置信度得分的<strong class="jq hj">阈值</strong>，以便得出关键点。下面是执行此操作的代码:</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="fb97" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hj">第四步:画出估计的身体骨架</strong></p><p id="cec1" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">除了关键点或身体关节，PoseNet还检测身体的估计骨架。我们可以使用<strong class="jq hj"> poses </strong>变量来绘制骨架:</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="9132" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在这里，我们循环检测骨架并创建连接关键点的线条。代码也相当简单。</p><p id="6b35" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">现在，最后一步是反复调用<strong class="jq hj"> drawSkeleton() </strong>和<strong class="jq hj"> drawKeypoints() </strong>函数以及我们从网络摄像头捕捉的视频提要。我们可以使用p5.js的<strong class="jq hj"> draw() </strong>函数来实现，该函数在<strong class="jq hj"> setup() </strong>之后被直接调用，并重复执行:</p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="kw kx l"/></div></figure><p id="0214" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">接下来，进入您的终端窗口，进入您的项目文件夹，并启动一个Python服务器:</p><pre class="ks kt ku kv fd lv lw lx ly aw lz bi"><span id="4277" class="ma ir hi lw b fi mb mc l md me">python3 -m http.server</span></pre><p id="d4ae" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">然后转到您的浏览器，打开以下地址:</p><pre class="ks kt ku kv fd lv lw lx ly aw lz bi"><span id="8b73" class="ma ir hi lw b fi mb mc l md me"><a class="ae lh" href="http://localhost:8000/" rel="noopener ugc nofollow" target="_blank">http://localhost:8000/</a></span></pre><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es kr"><img src="../Images/55976f140562ef62bc95844132f9d7ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*H9UQ_MYTdiFVdY5m.gif"/></div></figure><p id="fd91" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">瞧啊。你的PoseNet应该很好地检测你的身体姿势(如果你正确地遵循了所有的步骤)。这是我的模型的样子:</p><h1 id="aeec" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">结束注释</h1><p id="1fe1" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">你可以看到我为什么喜欢TensorFlow.js。它显示了通过将机器学习引入浏览器来使其更容易访问的许多承诺。</p><p id="9891" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><em class="lq">本文所有代码</em> <a class="ae lh" href="https://github.com/mohdsanadzakirizvi/pose-detection-webcam" rel="noopener ugc nofollow" target="_blank"> <em class="lq">均可在Github </em> </a> <em class="lq">上获得。</em></p></div><div class="ab cl mk ml gp mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hb hc hd he hf"><p id="298a" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><em class="lq">原载于2019年6月14日</em><a class="ae lh" href="https://www.analyticsvidhya.com/blog/2019/06/build-machine-learning-model-in-your-browser-tensorflow-js-deeplearn-js/" rel="noopener ugc nofollow" target="_blank"><em class="lq">https://www.analyticsvidhya.com</em></a><em class="lq">。</em></p></div></div>    
</body>
</html>