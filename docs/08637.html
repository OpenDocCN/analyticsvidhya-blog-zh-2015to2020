<html>
<head>
<title>Tracking Tintin’s Whereabouts with Mapbox and React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">追踪丁丁的行踪与地图框和反应</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/tracking-tintins-whereabouts-with-mapbox-and-react-c12f1d14c776?source=collection_archive---------9-----------------------#2020-08-06">https://medium.com/analytics-vidhya/tracking-tintins-whereabouts-with-mapbox-and-react-c12f1d14c776?source=collection_archive---------9-----------------------#2020-08-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/6fe0da6e46cfecad38621bfbe15ba852.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bwFoVegIV2sk79rD.jpg"/></div></div></figure><p id="0fe7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">《丁丁历险记》仍然是一个经典系列，给第一次或无数次拿起这本书的读者带来快乐。为了庆祝这个系列，我们决定制作一个<a class="ae jp" href="http://tintin-map.uc.r.appspot.com/" rel="noopener ugc nofollow" target="_blank">地图</a>，它提供了基于时间和地点的丁丁全球历险的图解。</p><figure class="jr js jt ju fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jq"><img src="../Images/8c4d9a18bf040bbedf6a85cfef2273eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_RzrMT-w4l1rU0J9l0GrKA.png"/></div></div><figcaption class="jv jw et er es jx jy bd b be z dx translated">丁丁旅行地图</figcaption></figure><p id="0bd0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这张地图有一个时间滑块，这样你就可以按照丁丁的时间顺序穿越世界。令人惊讶的是，几乎每个有人居住的大陆都被覆盖了——从技术上讲，丁丁甚至到达了澳大利亚大陆，尽管这并没有在书中明确显示出来(<em class="jo">714 航班飞往悉尼</em>)。虽然有许多丁丁历险记发生在布鲁塞尔，但我们对马林斯派克大厅(Moulinsart)的首次亮相(<em class="jo">独角兽的秘密)给予了特别的称赞。</em></p><p id="85a7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">创建应用:</strong></p><p id="1f7d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建地图的过程包括两个主要组件:React 组件和样式。</p><p id="b3ea" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">反应组分:</em></p><p id="117c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们用 React 和 Visgl 的<a class="ae jp" href="https://github.com/visgl/react-map-gl" rel="noopener ugc nofollow" target="_blank"> react-map-gl </a>包构建了地图，然后添加了滑块、侧栏和弹出功能。在转换成 JSON 格式之前，数据点被编译成 csv 文件。为此，我们使用了 Mapbox 的<a class="ae jp" href="https://github.com/mapbox/csv2geojson" rel="noopener ugc nofollow" target="_blank"> csv2geojson </a>包，允许轻松转换。在使用 ComponentDidMount()方法作为组件加载之前，我们直接从 JSON 文件导入数据:</p><figure class="jr js jt ju fd ij er es paragraph-image"><div class="er es jz"><img src="../Images/580c1c1ea2b1bedc2054e9f8ada13037.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*FQCkVIKOAIcb8fOLXo_pug.png"/></div></figure><figure class="jr js jt ju fd ij er es paragraph-image"><div class="er es ka"><img src="../Images/5b54e364c809e6af89aac5fe8173a848.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/format:webp/1*qtOr0uEezGfSwYoWDDUn4g.png"/></div></figure><p id="d274" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">根据滑块的值过滤数据。该值的变化会改变状态变量<em class="jo"> selectedYear </em>，进而调用 filterYear 函数。例如，如果滑块值更改为 1949，selectedYear 变量将设置为 1949，filterYear 函数将筛选从 1930 年到 1949 年(含)的数据。</p><figure class="jr js jt ju fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kb"><img src="../Images/00f2c3bd36bc4626ae52cbd2527fb923.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*APHt6LGdGGFUnEKP3pY-rQ.png"/></div></div></figure><p id="27ff" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的数据点使用 react-map-gl 标记组件和通用字体 Awesome <a class="ae jp" href="https://fontawesome.com/icons/map-pin" rel="noopener ugc nofollow" target="_blank">图标</a>显示。我们对数据进行循环，并为每个 lat/long 值返回一个标记。</p><figure class="jr js jt ju fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kc"><img src="../Images/e410d6e9454b056e1e06c5a7f2498e9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x1CrISGNVZqlTVBu0Jqylw.png"/></div></div></figure><p id="f776" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当用户单击特定的标记时，selectedLocation 状态变量被设置为新的位置，允许弹出窗口出现—这将显示该书的法文封面，以及其发行年份和标记位置。react-map-gl 包包含一个弹出组件，它简化了这个过程。当我们的状态变量 selectedLocation 不为空时，就会显示弹出框；单击弹出窗口和标记之外的任何地方都会将 selectedLocation 的状态改回 null。</p><figure class="jr js jt ju fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kd"><img src="../Images/4ed49d3d1bd0b3d5698ccc634f73b41f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XB-hlwd3u13hEhnxcK5Q2w.png"/></div></div></figure><p id="a941" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">风格:</em></p><p id="ece3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第一步是创建一个代表丁丁的调色板。我们给所有水体赋予了典型的浅蓝色，以此来突出埃尔热经典的丁丁衫。与此同时，代表世界低洼地区的独特橙色是丁丁头发的一大亮点——你还会注意到这种颜色是埃尔热名字的背景。这些标记显示了阿道克船长特有的深蓝色毛衣的颜色。</p><figure class="jr js jt ju fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ke"><img src="../Images/3be04712547e41c24b2437fb0f3ed0f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FC-hV1ErDQLDJ45M.jpg"/></div></div><figcaption class="jv jw et er es jx jy bd b be z dx translated">丁丁在 47 年的历程中</figcaption></figure><p id="ff4a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">弹出窗口采用一些简单的 CSS 格式。我们决定放弃。边栏和。弹出一个不透明度为 0.95 的窗口，这样底图就可以一直显示一定程度。我们还决定将丁丁封面固定在屏幕的 20%，这样无论你是缩放 1 还是缩放 20，它们都会保持突出。</p><figure class="jr js jt ju fd ij er es paragraph-image"><div class="er es kf"><img src="../Images/6353ad035a46a91075f774ae004b1950.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*eZZpjcH2IjwEM6LMQnTQBQ.png"/></div></figure><p id="3771" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是一张有趣的地图，它打开了一扇通往可能性世界的大门，以及使用时间滑块来展示多年来令人惊叹的旅程的用例。我们希望丁丁爱好者发现这张地图是一个直观的，令人耳目一新的丁丁和白雪(米卢)带给我们所有人的快乐的提醒。</p><figure class="jr js jt ju fd ij"><div class="bz dy l di"><div class="kg kh l"/></div></figure><p id="b6e8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Github 链接:【https://github.com/stefangouyet/tintin_map T2】</p><p id="0e8a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">地图链接:【http://tintin-map.uc.r.appspot.com/ T4】</p></div><div class="ab cl ki kj gp kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="hb hc hd he hf"><div class="jr js jt ju fd kp"><a href="https://www.linkedin.com/in/stefangouyet/" rel="noopener  ugc nofollow" target="_blank"><div class="kq ab dw"><div class="kr ab ks cl cj kt"><h2 class="bd hj fi z dy ku ea eb kv ed ef hh bi translated">Stefan Luc Gouyet -美国纽约州纽约市|职业简介| LinkedIn</h2><div class="kw l"><h3 class="bd b fi z dy ku ea eb kv ed ef dx translated">查看世界上最大的职业社区 LinkedIn 上 Stefan Luc Gouyet 的个人资料。Stefan Luc 列出了 6 项工作…</h3></div><div class="kx l"><p class="bd b fp z dy ku ea eb kv ed ef dx translated">www.linkedin.com</p></div></div><div class="ky l"><div class="kz l la lb lc ky ld io kp"/></div></div></a></div><div class="le lf ez fb lg kp"><a href="https://www.linkedin.com/in/andregouyet/" rel="noopener  ugc nofollow" target="_blank"><div class="kq ab dw"><div class="kr ab ks cl cj kt"><h2 class="bd hj fi z dy ku ea eb kv ed ef hh bi translated">Andre Gouyet -客户经理- Mapbox | LinkedIn</h2><div class="kw l"><h3 class="bd b fi z dy ku ea eb kv ed ef dx translated">兴趣:*宣传我相信的技术*探索正念的效果*铁人三项和旅行…</h3></div><div class="kx l"><p class="bd b fp z dy ku ea eb kv ed ef dx translated">www.linkedin.com</p></div></div><div class="ky l"><div class="lh l la lb lc ky ld io kp"/></div></div></a></div></div></div>    
</body>
</html>