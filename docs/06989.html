<html>
<head>
<title>Docker Containers!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">码头集装箱！</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/docker-containers-56cafce40991?source=collection_archive---------21-----------------------#2020-06-09">https://medium.com/analytics-vidhya/docker-containers-56cafce40991?source=collection_archive---------21-----------------------#2020-06-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="1509" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">直到大约7-8周前(写这篇文章时)，我才知道码头工人。我接触码头工人只是因为学校的一个项目。所以为什么不记录下来……一个权利？呵呵lesgo~！</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><blockquote class="jk jl jm"><p id="6910" class="if ig jn ih b ii ij ik il im in io ip jo ir is it jp iv iw ix jq iz ja jb jc hb bi translated">什么是Docker容器？</p></blockquote><p id="e8ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">容器映像是一个轻量级的、独立的、可执行的软件包，包含了运行它所需的一切:代码、运行时、系统工具、系统库、设置。容器是应用程序层的抽象，它将代码和依赖项打包在一起。你可以把它想象成一个虚拟机，但是要轻得多！您可以在同一台机器上运行多个容器，同时与容器共享操作系统内核！容器消耗的存储空间也比虚拟机少。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es jr"><img src="../Images/b12f5d20ad7bb918a7b49e4573d06ad9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u-xffKZIu2b8FIhRmMhuGw.png"/></div></div></figure><p id="e5a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Docker电子书可以在<a class="ae kd" href="https://goto.docker.com/docker-virtualization-admin-ebook.html" rel="noopener ugc nofollow" target="_blank">这里找到</a></p><blockquote class="jk jl jm"><p id="1e68" class="if ig jn ih b ii ij ik il im in io ip jo ir is it jp iv iw ix jq iz ja jb jc hb bi translated">虚拟机与容器</p></blockquote><p id="a784" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">容器和虚拟机具有相似的资源隔离和分配优势，但功能不同，因为容器虚拟化的是操作系统而不是硬件。集装箱更便携，效率更高。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es ke"><img src="../Images/072b2b6371d92ef1f4c28e55ce4f8e82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Wne7BoZoqkvW_UKr.png"/></div></div></figure></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><blockquote class="jk jl jm"><p id="8671" class="if ig jn ih b ii ij ik il im in io ip jo ir is it jp iv iw ix jq iz ja jb jc hb bi translated">安装Docker [Linux]</p></blockquote><blockquote class="kf"><p id="1ab4" class="kg kh hi bd ki kj kk kl km kn ko jc dx translated">步骤1 —准备我们的机器</p></blockquote><p id="28c3" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">我们必须确保系统是最新的！</p><pre class="js jt ju jv fd ku kv kw kx aw ky bi"><span id="7d76" class="kz la hi kv b fi lb lc l ld le">root@kali:~# apt-get update</span></pre><p id="e0b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您的Kali安装中应该有以下软件包。如果没有，请运行以下命令来安装它们:</p><pre class="js jt ju jv fd ku kv kw kx aw ky bi"><span id="995d" class="kz la hi kv b fi lb lc l ld le">root@kali:~# apt-get install \</span><span id="6205" class="kz la hi kv b fi lf lc l ld le">apt-transport-https \</span><span id="19e1" class="kz la hi kv b fi lf lc l ld le">ca-certificates \</span><span id="1a68" class="kz la hi kv b fi lf lc l ld le">curl \</span><span id="bb8c" class="kz la hi kv b fi lf lc l ld le">gnupg-agent \</span><span id="12d7" class="kz la hi kv b fi lf lc l ld le">software-properties-common</span></pre><blockquote class="kf"><p id="a423" class="kg kh hi bd ki kj kk kl km kn ko jc dx translated">步骤2—添加Docker存储库</p></blockquote><p id="0a85" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">配置Docker apt存储库:</p><pre class="js jt ju jv fd ku kv kw kx aw ky bi"><span id="9667" class="kz la hi kv b fi lb lc l ld le">root@kali:~# echo ‘deb <a class="ae kd" href="https://download.docker.com/linux/debian" rel="noopener ugc nofollow" target="_blank">https://download.docker.com/linux/debian</a> stretch stable’ &gt; /etc/apt/sources.list(.d/docker.list)-&gt;optional</span></pre><blockquote class="kf"><p id="f0db" class="kg kh hi bd ki kj kk kl km kn ko jc dx translated">步骤3—将Docker安装到机器上</p></blockquote><p id="7a1a" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">执行安装的命令:</p><pre class="js jt ju jv fd ku kv kw kx aw ky bi"><span id="d9a6" class="kz la hi kv b fi lb lc l ld le">root@kali:~# apt-get install docker-ce docker-compose</span></pre><p id="96fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们已经成功地安装了Docker，让我们来验证安装！</p><pre class="js jt ju jv fd ku kv kw kx aw ky bi"><span id="c931" class="kz la hi kv b fi lb lc l ld le">root@kali:~# docker --version<br/>Docker version 19.03.8, build afacb8b7f0</span><span id="f5b4" class="kz la hi kv b fi lf lc l ld le">root@kali:~#</span></pre></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><blockquote class="jk jl jm"><p id="e09a" class="if ig jn ih b ii ij ik il im in io ip jo ir is it jp iv iw ix jq iz ja jb jc hb bi translated">Docker搜索</p></blockquote><p id="9ac7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们有一堆docker提供的图片！让我们搜索一个可以用来创建容器的图像。对于这个演示，我要寻找一个我可以使用的树莓图像。</p><pre class="js jt ju jv fd ku kv kw kx aw ky bi"><span id="48e0" class="kz la hi kv b fi lb lc l ld le">root@kali:~# docker search {image_name}</span></pre><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es lg"><img src="../Images/9f3442cc1098e63bcf9564c27387576e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yqwSkHyvwFLtis5lUClRSg.png"/></div></div></figure><blockquote class="jk jl jm"><p id="9de4" class="if ig jn ih b ii ij ik il im in io ip jo ir is it jp iv iw ix jq iz ja jb jc hb bi translated">码头工人拉动</p></blockquote><p id="4f26" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们已经识别并验证了我们想要的图像是可用的，让我们把它下载到我们的机器上。</p><pre class="js jt ju jv fd ku kv kw kx aw ky bi"><span id="4293" class="kz la hi kv b fi lb lc l ld le">root@kali:~# docker pull {image_name}</span></pre><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es lh"><img src="../Images/eae932268ec4c60ca133c38693df7bf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*D0kJTuTM_QjKNSkO92xPEQ.png"/></div></figure><blockquote class="jk jl jm"><p id="6e2c" class="if ig jn ih b ii ij ik il im in io ip jo ir is it jp iv iw ix jq iz ja jb jc hb bi translated">Docker图像</p></blockquote><p id="6c60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们已经安装了映像，让我们来验证一下。</p><pre class="js jt ju jv fd ku kv kw kx aw ky bi"><span id="fc7f" class="kz la hi kv b fi lb lc l ld le">root@kali:~# docker images</span></pre><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es li"><img src="../Images/65dc8d63fd53ceaf4b792478bce6e99b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-5RXtK7SeF3FmLYWRN5FBw.png"/></div></div></figure><p id="37b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如上图所示，我们下载的ubuntu镜像出现了。</p><blockquote class="jk jl jm"><p id="4328" class="if ig jn ih b ii ij ik il im in io ip jo ir is it jp iv iw ix jq iz ja jb jc hb bi translated">码头运行</p></blockquote><p id="07a7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们用刚刚下载的基本映像创建一个容器。</p><pre class="js jt ju jv fd ku kv kw kx aw ky bi"><span id="a4e9" class="kz la hi kv b fi lb lc l ld le">root@kali:~# docker run -it --rm --name {containername} {image} {application to launch on start}</span><span id="4847" class="kz la hi kv b fi lf lc l ld le"><br/>-it = Interactive mode (This allows u to interact with the shell as soon as it has launched)</span><span id="3f3a" class="kz la hi kv b fi lf lc l ld le">--rm = remove the container totally on exit (wont be able to re enter the container)</span><span id="5928" class="kz la hi kv b fi lf lc l ld le">--name = Gives the container a name<br/></span></pre><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es lj"><img src="../Images/aa8500c734f6c76a7c792448e1290eda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/format:webp/1*P75C8zPpRd6uSfzi8UTGFQ.png"/></div></figure><p id="5373" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们已经成功地启动了一个容器，让我们用下面的命令来验证它！</p><pre class="js jt ju jv fd ku kv kw kx aw ky bi"><span id="b1c4" class="kz la hi kv b fi lb lc l ld le">root@b0ac437c391b:/# uname -a</span><span id="b56e" class="kz la hi kv b fi lf lc l ld le">^disclaimer:the container launches with a random name everytime its relaunched</span></pre><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es lk"><img src="../Images/10b5a55b427ff0833590b9073f6aeec2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*82okZTaat5FF1CQTvwBKqA.png"/></div></div></figure><p id="69fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们可以在容器上做任何我们想做的事情了:)</p><blockquote class="jk jl jm"><p id="c09d" class="if ig jn ih b ii ij ik il im in io ip jo ir is it jp iv iw ix jq iz ja jb jc hb bi translated">Docker提交</p></blockquote><p id="0209" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除非我们将特定容器的内容提交到映像中，否则容器会重新启动。我们需要做的第一件事是运行没有<code class="du ll lm ln kv b">--rm</code>的容器。这将确保我们能够在退出时将容器提交到映像中。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es lo"><img src="../Images/c596c9dfdb8dc7268d23cb901cdb117d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*tOlyYHLSNsdwRekdTZ6-kw.png"/></div></figure><p id="6170" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，对容器进行必要的修改，然后优雅地退出。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es lp"><img src="../Images/25be756431efbef066442ec477a18f7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qqZvQwzrD3sqXITVoQazwQ.png"/></div></div></figure><p id="708e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">退出时，输入以下命令将该容器提交到另一个映像中。</p><pre class="js jt ju jv fd ku kv kw kx aw ky bi"><span id="3c82" class="kz la hi kv b fi lb lc l ld le">root@kali:~# docker commit {container_name} {custom_image_name}</span><span id="6d27" class="kz la hi kv b fi lf lc l ld le">^disclaimer: the custom image name cant have any caps</span></pre><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es lq"><img src="../Images/ed463567674592e590b7aacf441f9239.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*8m6URtyO6BJFl5Xw4zbPRA.png"/></div></figure><p id="3142" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您收到如上所示的散列，我们已经成功地提交了docker容器。下次启动容器时，我们必须用{ commitedcontainer }替换{ubuntu}</p><pre class="js jt ju jv fd ku kv kw kx aw ky bi"><span id="3a87" class="kz la hi kv b fi lb lc l ld le">root@kali:~# docker run -it --rm --name {containername} {image}</span></pre><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es lr"><img src="../Images/43d04bcd1d0a66402595119b4e7964ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PvcxCnBnekZbF51S9kMKBg.png"/></div></div></figure><blockquote class="jk jl jm"><p id="e839" class="if ig jn ih b ii ij ik il im in io ip jo ir is it jp iv iw ix jq iz ja jb jc hb bi translated">码头移除</p></blockquote><p id="48a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，假设我们有一个容器正在运行，但我们不在其中退出它，因为我们启动它时没有使用<code class="du ll lm ln kv b">— -rm</code>标签来提交它。这就是我们如何优雅地关闭容器。</p><p id="a4a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们需要找出我们想要关闭的内容。为此，我们需要用这个命令检查docker进程列表。</p><pre class="js jt ju jv fd ku kv kw kx aw ky bi"><span id="0d0c" class="kz la hi kv b fi lb lc l ld le">root@kali:~# docker ps -a</span></pre><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es ls"><img src="../Images/61b9c6e5d613184a2a36bf8eba3405ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j417v1cPWccyvr9S4F4iDQ.png"/></div></div></figure><p id="c94a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上面的截图中，我有2个容器在运行。让我们关闭这两个容器。命令:</p><pre class="js jt ju jv fd ku kv kw kx aw ky bi"><span id="deed" class="kz la hi kv b fi lb lc l ld le">root@b0ac437c391b:/# docker rm {container NAME} --force</span></pre><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es lt"><img src="../Images/cdee00b58cb714415b4eb24555b8e20b.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*KF1mS3_5KfmR-d54waSvbA.png"/></div></figure></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="9021" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">差不多就是这样！这就是开始使用docker所需要知道的全部内容！然而，你会在这个过程中学到更多。最棒的！</p><p id="7d72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">~Nee</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es lu"><img src="../Images/9df422376181de91daa044f6d3e18bfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vRY3y_-z3oMu9aa8.png"/></div></div></figure></div></div>    
</body>
</html>