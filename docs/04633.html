<html>
<head>
<title>Learning Flask Framework [Part 1]</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习烧瓶框架[第1部分]</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/learning-flask-framework-part-1-13be25f30fa6?source=collection_archive---------24-----------------------#2020-03-26">https://medium.com/analytics-vidhya/learning-flask-framework-part-1-13be25f30fa6?source=collection_archive---------24-----------------------#2020-03-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="fd0a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当你试图学习flask时，这些笔记可能会帮到你。</p><blockquote class="jd je jf"><p id="5c3b" class="if ig jg ih b ii ij ik il im in io ip jh ir is it ji iv iw ix jj iz ja jb jc hb bi translated">"无欲无求的学习会破坏记忆，它不会保留任何它所吸收的东西."<br/> —达芬奇</p></blockquote><p id="1df9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将不再只是跟随一个教程，而是同时尝试做一个项目，你可以在这里找到<a class="ae jk" href="https://github.com/BlankRiser/Tracker" rel="noopener ugc nofollow" target="_blank"/>。如果你想一起去，欢迎你来！</p><h2 id="36f0" class="jl jm hi bd jn jo jp jq jr js jt ju jv iq jw jx jy iu jz ka kb iy kc kd ke kf bi translated">烧瓶是什么？</h2><p id="7305" class="pw-post-body-paragraph if ig hi ih b ii kg ik il im kh io ip iq ki is it iu kj iw ix iy kk ja jb jc hb bi translated"><a class="ae jk" href="https://flask.palletsprojects.com/en/1.1.x/quickstart/" rel="noopener ugc nofollow" target="_blank"> Flask </a>是一个以python为基础开发的微型web框架。它是由Pocoo的阿明·罗纳切尔创建的，Pocoo是一个Python爱好者的国际组织，成立于2004年，作为对<a class="ae jk" href="https://palletsprojects.com/p/werkzeug" rel="noopener ugc nofollow" target="_blank"> Werkzeug </a>和<a class="ae jk" href="https://palletsprojects.com/p/jinja" rel="noopener ugc nofollow" target="_blank"> Jinja </a>的简单包装，它已经成为最受欢迎的Python web应用程序框架之一。</p><h2 id="73b9" class="jl jm hi bd jn jo jp jq jr js jt ju jv iq jw jx jy iu jz ka kb iy kc kd ke kf bi translated"><strong class="ak">先决条件</strong></h2><ol class=""><li id="2c37" class="kl km hi ih b ii kg im kh iq kn iu ko iy kp jc kq kr ks kt bi translated">Python 3</li><li id="91dd" class="kl km hi ih b ii ku im kv iq kw iu kx iy ky jc kq kr ks kt bi translated">通过pip安装软件包</li><li id="91ef" class="kl km hi ih b ii ku im kv iq kw iu kx iy ky jc kq kr ks kt bi translated">对HTML和CSS有基本的了解</li></ol><h2 id="9a5f" class="jl jm hi bd jn jo jp jq jr js jt ju jv iq jw jx jy iu jz ka kb iy kc kd ke kf bi translated">安装烧瓶</h2><p id="715f" class="pw-post-body-paragraph if ig hi ih b ii kg ik il im kh io ip iq ki is it iu kj iw ix iy kk ja jb jc hb bi translated">安装flask相当简单，因为它没有依赖项。你必须使用conda或venv创建一个虚拟环境。你可以在这里查阅原始文档<a class="ae jk" href="https://flask.palletsprojects.com/en/1.1.x/installation/#install-flask" rel="noopener ugc nofollow" target="_blank">。</a></p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="6955" class="jl jm hi le b fi li lj l lk ll">pip install <strong class="le hj">flask</strong></span></pre><p id="6a60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好吧！我们完成了烧瓶的安装。我们来编码吧！</p><h2 id="cf62" class="jl jm hi bd jn jo jp jq jr js jt ju jv iq jw jx jy iu jz ka kb iy kc kd ke kf bi translated">创建应用程序</h2><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="232a" class="jl jm hi le b fi li lj l lk ll"># app.py<br/>from flask import Flask<br/>app = Flask(__name__)</span><span id="0aa4" class="jl jm hi le b fi lm lj l lk ll"><a class="ae jk" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.route("/")<br/>def home():<br/>    return "Hello World!"<br/>if __name__ == '__main__':<br/>    app.run(debug = True)</span></pre><p id="40ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装flask后，转到您的项目目录，创建一个名为<strong class="ih hj"> app.py </strong>的文件，粘贴上面的代码并执行它。您可以在<a class="ae jk" href="http://127.0.0.1:5000/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> <em class="jg">查看结果http://127 . 0 . 0 . 1:5000/</em></strong></a><em class="jg"/>或将cmd中显示的ip地址复制到您的浏览器中。浏览器中的输出将是“hello world ”,如hello函数中所示。</p><p id="3b56" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们检查一下代码，带有大写字母“F”的Flask(如:<code class="du ln lo lp le b">from flask import <strong class="ih hj">Flask</strong></code>)创建了一个对象，它引用了整个应用程序本身:当我们声明<code class="du ln lo lp le b">app = Flask(__name__)</code>时，我们正在创建代表我们的应用程序的变量app。因此，当我们配置变量应用程序时，我们正在配置整个应用程序的工作方式。例如，设置<code class="du ln lo lp le b">app = Flask()</code>可以接受几个属性:</p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="53a9" class="jl jm hi le b fi li lj l lk ll">from flask import Flask<br/>app = Flask(__name__,<br/>            instance_relative_config=False,<br/>            template_folder="templates",<br/>            static_folder="static")</span></pre><p id="e04f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些属性是配置文件的位置、存储HTML页面模板的template_folder和存储前端资产(Js、CSS、供应商、图片等)的static_folder。)</p></div><div class="ab cl lq lr gp ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="hb hc hd he hf"><p id="4c31" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ln lo lp le b">@app.route("/")</code>是一个<a class="ae jk" href="http://book.pythontips.com/en/latest/decorators.html" rel="noopener ugc nofollow" target="_blank"> Python装饰器</a>, Flask提供它来轻松地将我们应用中的URL分配给函数。装饰者告诉我们的<code class="du ln lo lp le b">@app</code>,每当用户在给定的<code class="du ln lo lp le b">.route()</code>访问我们的应用程序域(<em class="jg">myapp.com</em>或<em class="jg">http://127 . 0 . 0 . 1:5000/)</em>时，执行<code class="du ln lo lp le b">home()</code>函数。<br/>每个web框架都是从在给定URL提供内容的概念开始的。<em class="jg">路线</em>指一个app的URL模式(如<em class="jg">myapp.com</em><strong class="ih hj"><em class="jg">/首页</em> </strong>或<em class="jg">myapp.com/</em><strong class="ih hj"><em class="jg">关于</em> </strong>)。<em class="jg">视图</em>指的是在这些URL上提供的内容，无论是网页还是API响应等。我们可以用一个函数处理多个路由，只需要在任何路由上叠加额外的路由装饰器！下面是提供相同的“Hello World！”的有效示例3条不同路线的消息:</p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="2221" class="jl jm hi le b fi li lj l lk ll"><a class="ae jk" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.route("/")<br/><a class="ae jk" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.route("/home")<br/><a class="ae jk" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.route("/index")<br/>def home():<br/>    return "Hello World!"</span></pre><h2 id="9ef6" class="jl jm hi bd jn jo jp jq jr js jt ju jv iq jw jx jy iu jz ka kb iy kc kd ke kf bi translated"><strong class="ak">路由HTTP方法</strong></h2><p id="3517" class="pw-post-body-paragraph if ig hi ih b ii kg ik il im kh io ip iq ki is it iu kj iw ix iy kk ja jb jc hb bi translated"><code class="du ln lo lp le b">@app.route()</code> decorator还接受了第二个参数:一个已接受的HTTP方法列表<a class="ae jk" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods" rel="noopener ugc nofollow" target="_blank">。默认情况下，Flask视图接受GET请求，除非我们明确列出视图应该具有哪些HTTP方法。最好传递一个名为methods的参数，它包含我们需要的HTTP方法列表。</a></p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="9371" class="jl jm hi le b fi li lj l lk ll"><a class="ae jk" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.route("/example", methods=['GET', 'POST', 'PUT'])</span></pre><h2 id="0e5c" class="jl jm hi bd jn jo jp jq jr js jt ju jv iq jw jx jy iu jz ka kb iy kc kd ke kf bi translated"><strong class="ak">动态路线</strong></h2><p id="172b" class="pw-post-body-paragraph if ig hi ih b ii kg ik il im kh io ip iq ki is it iu kj iw ix iy kk ja jb jc hb bi translated">让我们来谈谈基于一个概要名称或一篇文章的标题来动态改变URL。为此，我们在尖括号<code class="du ln lo lp le b">&lt;&gt;</code>内创建一个变量，并将其传递给<code class="du ln lo lp le b">route()</code></p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="b366" class="jl jm hi le b fi li lj l lk ll"><a class="ae jk" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.route('/&lt;error&gt;')<br/>def pageNotFound(error):<br/>    return ('Page '+ error +' not found! Please check the url!')<br/><a class="ae jk" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.route('/loggedin/&lt;username&gt;')<br/>def profile(username):<br/>    return (username +' has logged in')</span></pre><p id="7722" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在提到变量的类型并使用冒号将其与变量名分开后，也可以传递特定类型的变量。</p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="d1a2" class="jl jm hi le b fi li lj l lk ll"><a class="ae jk" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.route('/&lt;int:year&gt;/&lt;int:month&gt;/&lt;title&gt;')<br/>def article(year, month, title):<br/>    return (title + 'was published in' + month + year)</span></pre><h2 id="b9e5" class="jl jm hi bd jn jo jp jq jr js jt ju jv iq jw jx jy iu jz ka kb iy kc kd ke kf bi translated"><strong class="ak">渲染HTML页面</strong></h2><p id="92d1" class="pw-post-body-paragraph if ig hi ih b ii kg ik il im kh io ip iq ki is it iu kj iw ix iy kk ja jb jc hb bi translated">Flask使用jinja2模板渲染网页，要做到这一点我们必须先导入Flask的一个内置函数<code class="du ln lo lp le b"><strong class="ih hj">render_template</strong></code> <br/> <code class="du ln lo lp le b"><strong class="ih hj">render_template()</strong></code>用于返回html页面到一个路由。</p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="f7e2" class="jl jm hi le b fi li lj l lk ll">from flask import Flask, render_template<br/>app = Flask(__name__,<br/>           template_folder="templates")</span></pre><p id="7df8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们创建一个名为<code class="du ln lo lp le b"><strong class="ih hj">index.html</strong></code>的HTML文件，并粘贴下面的代码。</p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="7f1c" class="jl jm hi le b fi li lj l lk ll">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>&lt;head&gt;<br/> &lt;title&gt;<br/>  Flask Tutorial<br/> &lt;/title&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/> &lt;h1&gt; HTML template Works! &lt;/h1&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="117a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ln lo lp le b"><strong class="ih hj">index.html</strong></code>有一个基本的html布局，带有一个包含一些文本的标题&lt; h1 &gt;。让我们更改app.py中的代码来渲染<code class="du ln lo lp le b"><strong class="ih hj">index.html</strong></code> <strong class="ih hj"> <br/> </strong>复制下面的代码并粘贴到<strong class="ih hj"> </strong> <code class="du ln lo lp le b"><strong class="ih hj">app.py</strong></code></p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="080f" class="jl jm hi le b fi li lj l lk ll">from flask import Flask, render_template<br/>app = Flask(__name__,<br/>            template_folder="templates")</span><span id="3644" class="jl jm hi le b fi lm lj l lk ll"><a class="ae jk" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.route("/")<br/>def home():<br/>    """Serve homepage template."""<br/>    return render_template('index.html')<br/>if __name__ == '__main__':<br/>    app.run(debug = True)</span></pre><p id="fc69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还可以将<em class="jg">值</em>作为关键字参数传递给模板。例如，如果我们想通过视图设置模板的标题和内容，而不是硬编码到模板中，我们可以这样做:</p><pre class="kz la lb lc fd ld le lf lg aw lh bi"><span id="dde6" class="jl jm hi le b fi li lj l lk ll">from flask import Flask, render_template<br/>app = Flask(__name__,<br/>            template_folder="templates")</span><span id="52c0" class="jl jm hi le b fi lm lj l lk ll"><a class="ae jk" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.route("/")<br/>def home():<br/>    return render_template('index.html',<br/>                           title='Flask-Login Tutorial.',<br/>                           body="You are now logged in!")</span></pre></div><div class="ab cl lq lr gp ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="hb hc hd he hf"><p id="bb41" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们暂时结束它，我将在这里连接我的下一部分。</p></div><div class="ab cl lq lr gp ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="hb hc hd he hf"><p id="2693" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用的一些资源有:</p><ol class=""><li id="5bf9" class="kl km hi ih b ii ij im in iq lx iu ly iy lz jc kq kr ks kt bi translated"><a class="ae jk" href="https://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-i-hello-world" rel="noopener ugc nofollow" target="_blank">blog.miguelgrinberg.com</a></li><li id="9c8f" class="kl km hi ih b ii ku im kv iq kw iu kx iy ky jc kq kr ks kt bi translated"><a class="ae jk" href="https://flask.palletsprojects.com/en/2.0.x/quickstart/" rel="noopener ugc nofollow" target="_blank">官方烧瓶文件</a></li><li id="3eeb" class="kl km hi ih b ii ku im kv iq kw iu kx iy ky jc kq kr ks kt bi translated"><a class="ae jk" href="https://hackersandslackers.com/flask-routes/" rel="noopener ugc nofollow" target="_blank">黑客和黑客</a></li></ol></div><div class="ab cl lq lr gp ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="hb hc hd he hf"><div class="kz la lb lc fd ma"><a href="https://github.com/BlankRiser" rel="noopener  ugc nofollow" target="_blank"><div class="mb ab dw"><div class="mc ab md cl cj me"><h2 class="bd hj fi z dy mf ea eb mg ed ef hh bi translated">空白冒口-概述</h2><div class="mh l"><h3 class="bd b fi z dy mf ea eb mg ed ef dx translated">在GitHub上注册你自己的个人资料，这是托管代码、管理项目和构建软件的最佳地方…</h3></div><div class="mi l"><p class="bd b fp z dy mf ea eb mg ed ef dx translated">github.com</p></div></div><div class="mj l"><div class="mk l ml mm mn mj mo mp ma"/></div></div></a></div><div class="mq mr ez fb ms ma"><a href="https://blankriser.github.io/personalDossier/" rel="noopener  ugc nofollow" target="_blank"><div class="mb ab dw"><div class="mc ab md cl cj me"><h2 class="bd hj fi z dy mf ea eb mg ed ef hh bi translated">档案</h2><div class="mh l"><h3 class="bd b fi z dy mf ea eb mg ed ef dx translated">你好，世界，我是拉姆·尚卡尔。一个有创造力的开发者和一个有逻辑的设计师。我热衷于打造优秀的…</h3></div><div class="mi l"><p class="bd b fp z dy mf ea eb mg ed ef dx translated">blankriser.github.io</p></div></div></div></a></div></div></div>    
</body>
</html>