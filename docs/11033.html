<html>
<head>
<title>Problems with Precision and Recall.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">精确度和召回率的问题。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/problems-with-precision-and-recall-3e10bae11c6d?source=collection_archive---------4-----------------------#2020-11-15">https://medium.com/analytics-vidhya/problems-with-precision-and-recall-3e10bae11c6d?source=collection_archive---------4-----------------------#2020-11-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/8779c8abacc68c469306534cd8e163ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ivKsdSX0rNyib8n4"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">蒂姆·高在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="3cb3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi jt translated"><span class="l ju jv jw bm jx jy jz ka kb di">如果</span>你一直在学习数据科学或者已经在这个领域工作了一段时间。您可能已经构建了大量的分类模型，并使用不同的指标检查了模型的性能。</p><h2 id="8351" class="kc kd hi bd ke kf kg kh ki kj kk kl km jg kn ko kp jk kq kr ks jo kt ku kv kw bi translated">四大指标:<br/> <strong class="ak"> *精度<br/> *召回<br/> *准确度<br/>* F1——得分</strong></h2><p id="182f" class="pw-post-body-paragraph iv iw hi ix b iy kx ja jb jc ky je jf jg kz ji jj jk la jm jn jo lb jq jr js hb bi translated">我们知道，当我们有<a class="ae iu" rel="noopener" href="/analytics-vidhya/handling-imbalanced-classes-3057a88e2a19"> <strong class="ix hj">不平衡的数据</strong> </a>时，准确性不是我们应该关注的指标，因为它可能会产生误导，相反，当我们的数据集不平衡时，我们应该考虑F1分数。</p><blockquote class="lc"><p id="96a7" class="ld le hi bd lf lg lh li lj lk ll js dx translated">但是F1真的会有帮助吗？</p></blockquote><blockquote class="lm ln lo"><p id="ce76" class="iv iw lp ix b iy lq ja jb jc lr je jf ls lt ji jj lu lv jm jn lw lx jq jr js hb bi translated">ROC曲线是比较模型优劣的最佳方法之一。</p></blockquote><h2 id="6446" class="kc kd hi bd ke kf kg kh ki kj kk kl km jg kn ko kp jk kq kr ks jo kt ku kv kw bi translated">让我们复习一下基础知识。</h2><blockquote class="lc"><p id="1e9f" class="ld le hi bd lf lg lh li lj lk ll js dx translated">另外，查看我的文章<a class="ae iu" rel="noopener" href="/analytics-vidhya/calculating-accuracy-of-an-ml-model-8ae7894802e"> <strong class="ak"> <em class="ly">计算一个ML模型的精确度。</em> </strong> </a></p></blockquote><ul class=""><li id="002e" class="lz ma hi ix b iy lq jc lr jg mb jk mc jo md js me mf mg mh bi translated">这4个常用指标是根据混淆矩阵计算出来的。</li></ul><blockquote class="lm ln lo"><p id="4d3b" class="iv iw lp ix b iy iz ja jb jc jd je jf ls jh ji jj lu jl jm jn lw jp jq jr js hb bi translated">混淆矩阵(又名误差矩阵)是一种总结分类模型结果性能的方法。显示正确和错误预测的数量。</p></blockquote><figure class="mj mk ml mm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mi"><img src="../Images/e761761d4ecd8f1282c7758f74a0eb68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bY4kUM91xf9_dwAO.jpeg"/></div></div></figure><blockquote class="lc"><p id="9849" class="ld le hi bd lf lg mn mo mp mq mr js dx translated">精度= TP/(TP+FP)</p><p id="cddf" class="ld le hi bd lf lg lh li lj lk ll js dx translated">灵敏度(回忆)=TP/(TP+FN)</p><p id="235f" class="ld le hi bd lf lg lh li lj lk ll js dx translated">准确度=(TP+TN)/(TP+TN+FP+FN)</p></blockquote><p id="fd70" class="pw-post-body-paragraph iv iw hi ix b iy lq ja jb jc lr je jf jg lt ji jj jk lv jm jn jo lx jq jr js hb bi translated">在哪里，</p><ul class=""><li id="18b1" class="lz ma hi ix b iy iz jc jd jg ms jk mt jo mu js me mf mg mh bi translated"><strong class="ix hj"> <em class="lp">真阳性(TP) </em> : </strong>观察阳性，预测阳性。</li><li id="e440" class="lz ma hi ix b iy mv jc mw jg mx jk my jo mz js me mf mg mh bi translated"><strong class="ix hj"> <em class="lp">【假阴性(FN) </em> : </strong>观察为阳性，但预测为阴性。</li><li id="b425" class="lz ma hi ix b iy mv jc mw jg mx jk my jo mz js me mf mg mh bi translated"><strong class="ix hj"> <em class="lp">真阴性(TN </em> ) </strong>:观察为阴性，预测为阴性。</li><li id="6dd9" class="lz ma hi ix b iy mv jc mw jg mx jk my jo mz js me mf mg mh bi translated"><strong class="ix hj"><em class="lp">【FP】</em>:</strong>观察为阴性，但预测为阳性。</li></ul><h2 id="ac3d" class="kc kd hi bd ke kf kg kh ki kj kk kl km jg kn ko kp jk kq kr ks jo kt ku kv kw bi translated"><strong class="ak">假设:</strong></h2><ul class=""><li id="3519" class="lz ma hi ix b iy kx jc ky jg na jk nb jo nc js me mf mg mh bi translated">我们建立了一个区分“猫”和“狗”的图像分类器。</li><li id="32d1" class="lz ma hi ix b iy mv jc mw jg mx jk my jo mz js me mf mg mh bi translated">其中猫是正类，狗是负类。<br/> <em class="lp">我们得到的混淆矩阵如下图所示。</em></li></ul><figure class="mj mk ml mm fd ij er es paragraph-image"><div class="er es nd"><img src="../Images/e192f32597dd0a826794b4f5ef86a1d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/format:webp/1*GqO8jIvOdYGpwy8S4p3FFA.png"/></div></figure><ul class=""><li id="bc5b" class="lz ma hi ix b iy iz jc jd jg ms jk mt jo mu js me mf mg mh bi translated">从混淆矩阵中，我们可以看到我们的数据是不平衡的，有2431张‘猫’图像和443张‘狗’图像。</li><li id="1a91" class="lz ma hi ix b iy mv jc mw jg mx jk my jo mz js me mf mg mh bi translated">然而，我们的模型显示，我们有2320个“猫”(TP+FP)图像和554个“狗”(TN+FN)图像。</li></ul><blockquote class="lm ln lo"><p id="f2c6" class="iv iw lp ix b iy iz ja jb jc jd je jf ls jh ji jj lu jl jm jn lw jp jq jr js hb bi translated"><strong class="ix hj">精度</strong>=(1984+107)/(1984+107+336+447)= 72.76%<br/><strong class="ix hj">精度</strong>=(1984)/(1984+336)= 85.51%<br/><strong class="ix hj">回忆</strong> = (1984)/(1984 + 447) = 81.61%</p></blockquote><p id="b811" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">指标显示该模型相当不错，但真的是这样吗？</strong></p><figure class="mj mk ml mm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ne"><img src="../Images/86279d0334475eeb9344148a3c3adbb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JSXh1E9-w4xwwDaw"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">照片由<a class="ae iu" href="https://unsplash.com/@brucemars?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">布鲁斯·马尔斯</a>在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="b8f8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果我们，把<strong class="ix hj">狗</strong>作为<strong class="ix hj">正</strong>类，把<strong class="ix hj">猫</strong>作为<strong class="ix hj">负</strong>类。</p><figure class="mj mk ml mm fd ij er es paragraph-image"><div class="er es nd"><img src="../Images/c1e7776dc0649949e384178c1e0d1277.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/format:webp/1*r8zEZKHUDOOAmZMWtNC4Gw.png"/></div></figure><p id="3d0d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然而，精度保持不变:</p><blockquote class="lm ln lo"><p id="f711" class="iv iw lp ix b iy iz ja jb jc jd je jf ls jh ji jj lu jl jm jn lw jp jq jr js hb bi translated"><strong class="ix hj">精度</strong>=(107+1984)/(107+1984+447+336)= 72.76%<br/><strong class="ix hj">精度</strong>=(107)/(107+447)= 19.31%<br/><strong class="ix hj">回忆</strong> = (107)/(107 + 336) = 24.15%</p></blockquote><h2 id="2c78" class="kc kd hi bd ke kf kg kh ki kj kk kl km jg kn ko kp jk kq kr ks jo kt ku kv kw bi translated">同型号的分数大幅下降。</h2><h1 id="89f9" class="nf kd hi bd ke ng nh ni ki nj nk nl km nm nn no kp np nq nr ks ns nt nu kv nv bi translated">精确度和召回率的问题。</h1><p id="5101" class="pw-post-body-paragraph iv iw hi ix b iy kx ja jb jc ky je jf jg kz ji jj jk la jm jn jo lb jq jr js hb bi translated">如果我们看一下精确率和召回率的公式，我们可以看到这两个指标都是根据正类来计算的。</p><figure class="mj mk ml mm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nw"><img src="../Images/f1bcc9cf00e876f0169e7b9f6d94b72f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vw12uqBfTs_rSeMXFRpu1g.jpeg"/></div></div></figure><p id="dbe2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们知道:</p><ul class=""><li id="6999" class="lz ma hi ix b iy iz jc jd jg ms jk mt jo mu js me mf mg mh bi translated"><strong class="ix hj">精度</strong>是<strong class="ix hj">正确正预测</strong>与<strong class="ix hj">正预测</strong>类的<strong class="ix hj">总数</strong>之比<strong class="ix hj">。</strong></li><li id="ec7b" class="lz ma hi ix b iy mv jc mw jg mx jk my jo mz js me mf mg mh bi translated">现在，我们使用<strong class="ix hj">精度</strong>来检查<strong class="ix hj">上的所有数据有多少实际上是正类</strong>。<br/>简单来说，在我们的‘猫’和‘狗’的数据中，实际上有多少是‘猫’。</li><li id="ae03" class="lz ma hi ix b iy mv jc mw jg mx jk my jo mz js me mf mg mh bi translated"><strong class="ix hj">回忆</strong>是<strong class="ix hj">正确正预测</strong>与<strong class="ix hj">正类<strong class="ix hj">总数</strong>之比<strong class="ix hj"/>。</strong></li><li id="a788" class="lz ma hi ix b iy mv jc mw jg mx jk my jo mz js me mf mg mh bi translated"><strong class="ix hj">回忆</strong>用于检查所有的阳性类，<strong class="ix hj">将多少个模型标注为阳性类。</strong></li></ul><blockquote class="lc"><p id="c92b" class="ld le hi bd lf lg mn mo mp mq mr js dx translated">这里就能看出问题了！衡量标准大多偏向于正面类。</p></blockquote><p id="381c" class="pw-post-body-paragraph iv iw hi ix b iy lq ja jb jc lr je jf jg lt ji jj jk lv jm jn jo lx jq jr js hb bi translated">我们希望我们的模型能够正确地在类之间进行分类。但是我们如何检查它是否在做呢？ </p><h1 id="9673" class="nf kd hi bd ke ng nh ni ki nj nk nl km nm nn no kp np nq nr ks ns nt nu kv nv bi translated">先进的衡量标准助您一臂之力！</h1><h2 id="1c5d" class="kc kd hi bd ke kf kg kh ki kj kk kl km jg kn ko kp jk kq kr ks jo kt ku kv kw bi translated"><strong class="ak">马修斯相关系数</strong> ( <strong class="ak"> MCC) </strong></h2><ul class=""><li id="883a" class="lz ma hi ix b iy kx jc ky jg na jk nb jo nc js me mf mg mh bi translated"><strong class="ix hj">马修斯相关系数</strong> (MCC)或<strong class="ix hj"> phi系数</strong>在机器学习中用作二元分类中模型质量的度量。</li><li id="e714" class="lz ma hi ix b iy mv jc mw jg mx jk my jo mz js me mf mg mh bi translated">MCC的定义与<a class="ae iu" href="https://en.wikipedia.org/wiki/Phi_coefficient" rel="noopener ugc nofollow" target="_blank">皮尔逊的phi系数</a>相同。</li><li id="d3f3" class="lz ma hi ix b iy mv jc mw jg mx jk my jo mz js me mf mg mh bi translated">该系数考虑了真阳性和假阳性以及阴性，并且通常被认为是一种平衡的度量，即使类的大小非常不同也可以使用。</li><li id="c860" class="lz ma hi ix b iy mv jc mw jg mx jk my jo mz js me mf mg mh bi translated">它的范围从-1到1。</li><li id="1fa9" class="lz ma hi ix b iy mv jc mw jg mx jk my jo mz js me mf mg mh bi translated">一个<strong class="ix hj"> +1 </strong>的<strong class="ix hj">系数</strong>代表一个<strong class="ix hj">完美预测</strong>，<br/> <strong class="ix hj"> 0 </strong>不比<strong class="ix hj">随机预测</strong>，<br/><strong class="ix hj">——1</strong>好，表明这个模型还不足以将它全部分类。</li><li id="4f33" class="lz ma hi ix b iy mv jc mw jg mx jk my jo mz js me mf mg mh bi translated">MCC对混淆矩阵的所有值赋予<strong class="ix hj">重要性，而不考虑数据的类别不平衡。</strong></li></ul><figure class="mj mk ml mm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nx"><img src="../Images/bd79c8136fed647d14202bc262e70b1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*0HQtEgoipW6hawp21aotEw.gif"/></div></div></figure><p id="010e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">以“猫”和“狗”为例:</p><figure class="mj mk ml mm fd ij er es paragraph-image"><div class="er es nd"><img src="../Images/e192f32597dd0a826794b4f5ef86a1d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/format:webp/1*GqO8jIvOdYGpwy8S4p3FFA.png"/></div></figure><p id="4f30" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">MCC =(1984 * 107)-(336 * 447)/{(1984+336)*(447+107)*(1984+447)*(336+107)} ^ 1/2<br/>= =&gt;~ 0</p><p id="6d53" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这表明我们的模型有随机预测。</p><p id="1dbb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">即使我们举另一个例子:</p><figure class="mj mk ml mm fd ij er es paragraph-image"><div class="er es nd"><img src="../Images/c1e7776dc0649949e384178c1e0d1277.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/format:webp/1*r8zEZKHUDOOAmZMWtNC4Gw.png"/></div></figure><p id="1568" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">MCC =(107 * 1984)-(447 * 336)/{(107+447)*(336+1984)*(107+336)*(447+1984)} ^ 1/2<br/>= =&gt;~ 0</p><blockquote class="lm ln lo"><p id="1710" class="iv iw lp ix b iy iz ja jb jc jd je jf ls jh ji jj lu jl jm jn lw jp jq jr js hb bi translated">在这两种情况下，MCC给出了相同的结果，表明我们的模型不足以正确区分不同的类</p></blockquote><h1 id="9ef8" class="nf kd hi bd ke ng nh ni ki nj nk nl km nm nn no kp np nq nr ks ns nt nu kv nv bi translated"><strong class="ak">结论:</strong></h1><ul class=""><li id="521e" class="lz ma hi ix b iy kx jc ky jg na jk nb jo nc js me mf mg mh bi translated">通常采用的度量标准可能会产生误导。但是，根据不同的用例，您可能需要使用它们。</li><li id="8a41" class="lz ma hi ix b iy mv jc mw jg mx jk my jo mz js me mf mg mh bi translated">为了找到模型的性能，马修斯相关系数(MCC)是最好的度量标准。</li></ul><h1 id="0988" class="nf kd hi bd ke ng nh ni ki nj nk nl km nm nn no kp np nq nr ks ns nt nu kv nv bi translated">快乐学习！！！</h1></div><div class="ab cl ny nz gp oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="hb hc hd he hf"><p id="3af4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">喜欢我的文章？请为我鼓掌并分享它，因为这将增强我的信心。此外，请查看我的另一篇文章，并保持联系，以获取关于数据科学和机器学习基础系列的未来文章。</p><p id="89db" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">另外，请务必在<a class="ae iu" href="http://www.linkedin.com/in/abhigyan-singh-b13651121" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上联系我。</p><figure class="mj mk ml mm fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es of"><img src="../Images/52222819afdedb62fab5e4e6578abe02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Th8SwdUEChDT5Mkm"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">由<a class="ae iu" href="https://unsplash.com/@markusspiske?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Markus Spiske </a>在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure></div></div>    
</body>
</html>