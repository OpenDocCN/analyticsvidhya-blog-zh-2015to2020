<html>
<head>
<title>Grouping Major League Hitters with Hierarchical Methods</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用分级方法对大联盟击球手进行分组</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/grouping-major-league-hitters-with-hierarchical-methods-e7dc35b7f665?source=collection_archive---------28-----------------------#2020-05-07">https://medium.com/analytics-vidhya/grouping-major-league-hitters-with-hierarchical-methods-e7dc35b7f665?source=collection_archive---------28-----------------------#2020-05-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="12eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此分析的目的是通过将许多相同的程序应用于最近的MLB命中数据，同时利用层次聚类，来构建第一篇聚类文章。这应该给你一个关于层次聚类如何工作的非常坚实的概述，并且将提供一个与k-means的比较点。</p><p id="30bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">数据</strong></p><p id="b81f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">与我的上一篇文章类似，我通过Baseball Savant搜集了这些数据，这是一个非常全面的数据中心，收集了许多有趣的棒球统计数据。由于我的重点是击中数据，我的方法略有改变。</p><p id="ed0c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于最近的反馈，我将年度过滤器更改为仅2019赛季的球员。此外，我还最小化了板块外观过滤器，允许所有至少有100 PAs的玩家有资格进行此分析。为聚类分析选择的初始变量如下。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/f3a6098dcfb538102d0bbabc92e13981.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jJqYVh22ncNm64ssQ3LjnA.png"/></div></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jq"><img src="../Images/95e8732b6dc9ed44726b890074863b67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JDwqMCONDtonds7RpXAC9A.png"/></div></div></figure><p id="8c12" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据中的几个关键点:</p><ul class=""><li id="eff3" class="jr js hi ih b ii ij im in iq jt iu ju iy jv jc jw jx jy jz bi translated">如果你不熟悉这些指标，棒球专家有一个很棒的变量字典，你可以在这里找到<a class="ae jd" href="https://baseballsavant.mlb.com/csv-docs" rel="noopener ugc nofollow" target="_blank"/></li><li id="2e09" class="jr js hi ih b ii ka im kb iq kc iu kd iy ke jc jw jx jy jz bi translated">上面的一些变量，比如xba、xslg和xobp，可能看起来很熟悉。但是，每个中的“x”代表估计值(相对于实际结果)。Statcast通过其庞大的数据库计算这些指标，从而更好地描述玩家应该如何生产，而不是他实际如何生产</li></ul><p id="a3e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">数据处理</strong></p><p id="e1c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您不熟悉集群，并且没有读过我以前的文章，那么要使集群有效，需要满足三个条件。</p><ol class=""><li id="b441" class="jr js hi ih b ii ij im in iq jt iu ju iy jv jc kf jx jy jz bi translated"><em class="kg">数据需要是同一类型，最好是数字</em></li><li id="e98c" class="jr js hi ih b ii ka im kb iq kc iu kd iy ke jc kf jx jy jz bi translated"><em class="kg">数据集</em>中不能有NA(或空值)</li><li id="3d66" class="jr js hi ih b ii ka im kb iq kc iu kd iy ke jc kf jx jy jz bi translated"><em class="kg">数据需要缩放</em></li></ol><p id="add2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了获得第一个参数，每个玩家的名和姓需要被删除(由于他们的变量类型)，并将在分析结束时被添加回去。</p><p id="a695" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当分析第2点时，数据中出现了两个NA值，专门处理冲刺速度。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kh"><img src="../Images/bc6639174388f79c9a2b8ae2f666a675.png" data-original-src="https://miro.medium.com/v2/resize:fit:484/format:webp/1*WWU2K_thdZLy5hjya30pfA.png"/></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es ki"><img src="../Images/7b0a70f4bbfcc0606fae519d9014dbf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:404/format:webp/1*ae41E20HdcsUgqIXX0FOTQ.png"/></div></figure><p id="bf42" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有几种方法可以处理这些数据，每种方法都有自己的优缺点。</p><p id="a81f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我可以简单地删除包含NA的观察值。但是，该玩家不会包含在分析中，从而降低了聚类的质量。</p><p id="f96c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其次，我可以用数据集内变量的聚合平均值替换NA值，如果变量的方差很大，这可能会成为一个问题。</p><p id="afac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，我可以利用R Studio的“mice”或“caret”包，它们通过分析NA值周围的所有变量和值来工作，预测值<em class="kg">将会是</em>的值。</p><p id="f3c6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于冲刺速度的低方差和保持分析简单的目标，我将简单地用所有变量的平均冲刺速度替换NA值。</p><p id="b08f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，我缩放了更新的数据集，满足了集群的最后一个要求。下面是经过处理的数据集的一个片段。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kj"><img src="../Images/39dfc5a33b07eb9897dbde65349b27e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3_ez4WrUuRZZQFQTI6lZtw.png"/></div></div></figure><p id="6e5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">分级距离测量</strong></p><p id="7db1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我的上一篇文章中，由于k-means聚类的有效性和简单性，我使用了它。然而，层次聚类是另一种广泛使用的方法，在对变量进行分组时非常有效。</p><p id="14e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这两种聚类技术的一个关键区别是，层次聚类需要一个定义的“距离度量”，而k-means使用一个默认的距离度量。距离度量是聚类分析的核心，因为它负责确定每个观察值之间的距离，最终确定观察值的相似性。人们可以使用多种距离度量来进行聚类，每一种都可以在这里阅读<a class="ae jd" href="https://www.datanovia.com/en/lessons/clustering-distance-measures/" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="9b85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于这个分析，我将利用欧几里得距离，因为它对数字数据有效。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kk"><img src="../Images/0748aed9abe48fbca651aedbe6dd19ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*CZGyYNIXZigTI3ImU5C_1Q.png"/></div></figure><p id="76dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">层次聚类</strong></p><p id="cc89" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有多种层次聚类方法可供使用，每种方法都有不同的用途。我会落实病房。强调数据中各点之间差异的D2方法。初始聚类树形图如下。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kl"><img src="../Images/be1f39dbd234166f1dc8df24f946a525.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*7fnEqm-gwLqcyGV7Px9b8Q.png"/></div></figure><p id="a5fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这可能看起来很拥挤。为了识别聚类，需要查看图的顶部分支。下面的图表将提供一个由沃德确定的集群更清晰的画面。D2，集群用红色突出显示。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kl"><img src="../Images/184c075bb31c2f2c4c5c274b9aecc23c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*zZqigIgSZSg1MAMZuBbk2Q.png"/></div></figure><p id="4fbe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下图包含相同的数据，但视觉效果不同。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kl"><img src="../Images/d7bb9b7bb6f225d01934ec2ee0108233.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*Pamii2QFPvYeLHM9b2AndQ.png"/></div></figure><p id="9de2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以，我们有它。另一个3集群解决方案，尽管使用了分层集群。</p><p id="9099" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">结果</strong></p><p id="b3b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，看结果。下面是每个集群的平均值汇总。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es km"><img src="../Images/af85207bd2e666584a646e5f993bea75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YMmuOqooTFSvbqW54VcdSA.png"/></div></div></figure><p id="703c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于每个集群的大小，我将发布由xwoba排序的前40个左右的个体。如果你想看剩下的结果，给我发信息，我会给你的！</p><p id="8d65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kg">集群1: </em></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kn"><img src="../Images/3e8e0b03a3c2ca3c034c1063f12c1c1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6E8e77h9mowCxiKkrZmB6g.png"/></div></div></figure><p id="70b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kg">集群2: </em></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kn"><img src="../Images/e4334eff919fc58635a895755a63d3a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zQhuG_nGVeddMYMD0SS7Sg.png"/></div></div></figure><p id="b3fe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kg">集群3: </em></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ko"><img src="../Images/308f0e34aa7ab8e3328da645869743b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lj4XyxRAsbKchmClRSuTvw.png"/></div></div></figure><p id="3892" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">结论:</strong></p><p id="4b13" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以，看来沃德。D2很好地聚集了比赛中的顶尖击球手。从摘要中可以看出，第3类远远优于第1类和第2类，这在查看该类中的具体名称时得到了验证(Trout、Belli、Yelich等)</p><p id="a9f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">想法？</p><p id="1bd6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">-jms</p></div></div>    
</body>
</html>