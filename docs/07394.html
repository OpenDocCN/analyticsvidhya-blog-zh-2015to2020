<html>
<head>
<title>Azure Functions for Dummies — Part 1 — http trigger</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Azure虚拟函数—第1部分— http触发器</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/azure-functions-for-dummies-part-1-http-trigger-a95cd000bc62?source=collection_archive---------6-----------------------#2020-06-24">https://medium.com/analytics-vidhya/azure-functions-for-dummies-part-1-http-trigger-a95cd000bc62?source=collection_archive---------6-----------------------#2020-06-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="c2dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是我计划撰写的关于Azure函数的系列文章的第1部分。从标题来看，这是一本傻瓜指南。不久前，我也是一个拥有Azure功能的傀儡。我写这个系列的动机是，当我迈出第一步时，微软文档中的文档严重不足。</p><p id="7874" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望通过这个系列分享我的学习。在整个系列中，我将使用VS代码作为我的IDE</p><p id="e222" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">顺便说一句，如果你有兴趣阅读关于Azure函数与代码超级高效的文章，这是一个很好的工具，请<strong class="ih hj">看看我关于VS代码的文章</strong>。相信我VS代码真的有很强的冲击力。</p><div class="jd je ez fb jf jg"><a rel="noopener follow" target="_blank" href="/@rajesh.r6r/is-visual-studio-code-the-coolest-ide-ever-80a59579612f"><div class="jh ab dw"><div class="ji ab jj cl cj jk"><h2 class="bd hj fi z dy jl ea eb jm ed ef hh bi translated">Visual Studio代码是有史以来最酷的IDE吗</h2><div class="jn l"><h3 class="bd b fi z dy jl ea eb jm ed ef dx translated">我可能对VS代码有点固执己见。这是经过多年的开源和可能鄙视微软…</h3></div><div class="jo l"><p class="bd b fp z dy jl ea eb jm ed ef dx translated">medium.com</p></div></div><div class="jp l"><div class="jq l jr js jt jp ju jv jg"/></div></div></a></div><p id="e87d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">对“无服务器”上未发起的发起。</strong></p><p id="038e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">无服务器计算是一种云服务产品，通过它您可以开发和部署代码，而不必担心基础设施需求。坚持主题，Azure Functions是微软无服务器计算产品的变种。</p><p id="37d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">无服务器计算不应该与Docker容器混在一起。如果你仍然有困惑，请阅读这篇文章。</p><div class="jd je ez fb jf jg"><a rel="noopener follow" target="_blank" href="/techmagic/serverless-vs-docker-what-to-choose-in-2019-80cb80f4b680"><div class="jh ab dw"><div class="ji ab jj cl cj jk"><h2 class="bd hj fi z dy jl ea eb jm ed ef hh bi translated">无服务器vs . Docker——2019年选什么？</h2><div class="jn l"><h3 class="bd b fi z dy jl ea eb jm ed ef dx translated">让我们从云计算呈指数级增长这一事实开始。企业不断地从…</h3></div><div class="jo l"><p class="bd b fp z dy jl ea eb jm ed ef dx translated">medium.com</p></div></div><div class="jp l"><div class="jw l jr js jt jp ju jv jg"/></div></div></a></div><p id="0475" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">回到Azure函数。让我们看看Azure函数是什么意思？</p><p id="511d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Azure函数是事件触发器和基于事件触发器执行的后续代码的组合。</p><p id="0d76" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">什么是事件触发器？</strong></p><p id="ed3e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">事件触发器是被配置为调用Azure函数的任何事件。(以下是Azure函数中支持的事件类型)</p><figure class="jy jz ka kb fd kc er es paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="er es jx"><img src="../Images/442ee14eaa73a14ba5fe67a1576eddcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eLsZCOBzrhVexiO_3b24Hw.png"/></div></div><figcaption class="ki kj et er es kk kl bd b be z dx translated">可以触发Azure功能的事件类型</figcaption></figure><p id="7b94" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">如何配置事件触发器？</strong></p><p id="97d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们通过http事件的事件触发器来理解这一点。</p><p id="7da8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以使用一个基于json的配置文件来实现这一点，该文件应该与您的函数一起提供。</p><figure class="jy jz ka kb fd kc"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="69b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们观察文件并了解配置。</p><figure class="jy jz ka kb fd kc er es paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="er es ko"><img src="../Images/497a8b9b7bdd4c44b4c1a5fd42124903.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YKvCf1TVr88xbbU4sb1mgw.png"/></div></div></figure><p id="c5ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以看到还有<strong class="ih hj">另一组类型、方向和名称</strong>参数。假设我们必须配置一个http响应来回复一个传入的请求。它只是有助于做到这一点。</p><figure class="jy jz ka kb fd kc er es paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="er es kp"><img src="../Images/884e91e78bf348c27a43e2ae62ff0e74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vzBWMUmXql3kEA1V1y6uTw.png"/></div></div></figure><p id="2c64" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">好的。我已经配置了事件。当这个事件被触发时，将被触发的函数代码在哪里？</strong></p><p id="40c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们看一个简单的http-trigger例子。</p><p id="0dd2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意，该文件的命名方式应该与在function.json文件中定义的方式相同。如果您还没有观察到function.json中的<em class="kq">“script file”</em>参数，那么现在这样做是一个好主意。</strong></p><figure class="jy jz ka kb fd kc"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="c42d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们来理解代码。</p><p id="f14e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">要做的重要观察:</strong></p><ol class=""><li id="d422" class="kr ks hi ih b ii ij im in iq kt iu ku iy kv jc kw kx ky kz bi translated">观察接受req对象的main方法。这是我们在配置文件中定义的req对象。</li><li id="cb68" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">观察req对象绑定到func的方法。HttpRequest</li><li id="0b69" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">观察func.HttpResponse的结果。</li></ol><p id="e2a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">功能工作:</strong></p><p id="856c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该函数的工作方式与python中的flask方法相同。它执行以下操作</p><ol class=""><li id="bb59" class="kr ks hi ih b ii ij im in iq kt iu ku iy kv jc kw kx ky kz bi translated">打印日志记录语句</li><li id="1144" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">评估传入的<strong class="ih hj"> GET </strong>请求是否有一个名为<strong class="ih hj"> name </strong>的参数</li><li id="227c" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">如果name is参数不可用，它检查<strong class="ih hj">请求是否包含</strong>一个<strong class="ih hj"> json有效载荷</strong>。</li><li id="1566" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">如果json可用，它提取json有效负载中可用的<strong class="ih hj">名称</strong>参数。</li><li id="4a73" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">如果提取了name参数，它将返回一个提取了名称的http响应</li><li id="ddd9" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">否则，它会返回一个响应，表示在您的请求中找不到name参数。</li></ol><p id="fe8f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">如何创建和调试该功能？</strong></p><p id="ad9d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然你甚至可以在notepad ++上编写这些代码，并将其推送到Azure，但这很麻烦。但是如果你使用Visual Studio代码，这将是轻而易举的。让我们看看你怎么做。</p><p id="e8eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">创建功能的步骤:</strong></p><ol class=""><li id="5501" class="kr ks hi ih b ii ij im in iq kt iu ku iy kv jc kw kx ky kz bi translated">进入VS代码窗口中的VS代码扩展市场，搜索Azure Functions Extension，然后点击install。</li></ol><figure class="jy jz ka kb fd kc er es paragraph-image"><div class="er es lf"><img src="../Images/b11c23ebe07c1ff1a6cd217f032c9b43.png" data-original-src="https://miro.medium.com/v2/resize:fit:626/format:webp/1*dsBqp7dJV9UJL70QCrDcPQ.png"/></div></figure><p id="0b64" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.一旦这是成功的，你应该能够在你的活动栏看到一个Azure图标，点击它可以看到Azure功能</p><figure class="jy jz ka kb fd kc er es paragraph-image"><div class="er es lg"><img src="../Images/53132577e2fa9875d8105b477db418a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:792/format:webp/1*VIIfP-zzcCr7zFIbkAPSgg.png"/></div></figure><p id="1a98" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.我创建了一个名为Sample Functions的本地Azure Functions项目。您可以通过点击工具栏上的文件夹图标来创建一个文件夹</p><p id="a19e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.创建了functions项目后，单击Functions图标以获得以下窗口，您可以在其中选择HTTP触发器作为您的事件。</p><figure class="jy jz ka kb fd kc er es paragraph-image"><div class="er es lh"><img src="../Images/0e5034e3d7876838974fced16f3f9c94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*Kz1yVLCgydsHbOTnjsz16w.png"/></div></figure><p id="00c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.现在，您将在本地项目中看到一个名为HttpTrigger1的新函数。</p><figure class="jy jz ka kb fd kc er es paragraph-image"><div class="er es lg"><img src="../Images/875507a068ba166ee186a3ee24b65722.png" data-original-src="https://miro.medium.com/v2/resize:fit:792/format:webp/1*sB48exLs3Un7rMOA2bMJrw.png"/></div></figure><p id="c67a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6.单击HttpTrigger1打开内容。现在可以看到function.json和__init__。py已经为你准备好了。</p><figure class="jy jz ka kb fd kc er es paragraph-image"><div class="er es li"><img src="../Images/405cd5b73995bd78772e28879d2048bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1068/format:webp/1*ttvv6tOchmK1BrX6d8vpGg.png"/></div></figure><p id="1029" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">调试功能的步骤</strong></p><p id="5b0f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">7.现在，您可以开始调试了。单击运行并开始调试。</p><figure class="jy jz ka kb fd kc er es paragraph-image"><div class="er es lj"><img src="../Images/8419818aebde94d5068537af292f2502.png" data-original-src="https://miro.medium.com/v2/resize:fit:654/format:webp/1*DqDLb574nUEeIOjvMlbZiQ.png"/></div></figure><p id="78a7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">8.在开始调试时，您将看到Azure Functions环境在终端窗口中如下初始化。</p><figure class="jy jz ka kb fd kc er es paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="er es lk"><img src="../Images/02801c8ccf32977d02b34d9e92b0cddb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y9gZrR2yAhutYmhJVdWFJQ.png"/></div></div></figure><p id="fa6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">9.如果您遵循了所有的步骤，那么在日志的末尾，您应该能够看到以下带有URL的消息。</p><figure class="jy jz ka kb fd kc er es paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="er es ll"><img src="../Images/b024fdb36c47a9da76597bb5df0dc78b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ACh4RAcnFLJc1sv1iWkOww.png"/></div></div></figure><p id="926e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">考验的时候到了:</strong></p><p id="9d33" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了测试http方法，我使用了Postman。这是一个很好的工具。</p><div class="jd je ez fb jf jg"><a href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwi59dugnZjqAhVrzzgGHR8EBnoQFjAAegQIARAC&amp;url=https%3A%2F%2Fwww.postman.com%2F&amp;usg=AOvVaw05sjAjE_hbftSn2Ii8YG6N" rel="noopener  ugc nofollow" target="_blank"><div class="jh ab dw"><div class="ji ab jj cl cj jk"><h2 class="bd hj fi z dy jl ea eb jm ed ef hh bi translated">postman | API开发的协作平台</h2><div class="jn l"><h3 class="bd b fi z dy jl ea eb jm ed ef dx translated">进行任何种类的API调用——REST、SOAP或普通HTTP——并轻松检查最大的响应。邮递员也有…</h3></div><div class="jo l"><p class="bd b fp z dy jl ea eb jm ed ef dx translated">www.google.com</p></div></div><div class="jp l"><div class="lm l jr js jt jp ju jv jg"/></div></div></a></div><p id="be98" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">确保将name变量作为json传递到这里，并点击send按钮</p><p id="5d63" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:将方法检查为POST或GET。</p><figure class="jy jz ka kb fd kc er es paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="er es ln"><img src="../Images/87ea5333a60ded51283ab4e40a164995.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RGvQE_qI431ZT_1Esju_4g.png"/></div></div></figure><p id="6aa1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果一切顺利，您应该会看到函数的响应。</p><figure class="jy jz ka kb fd kc er es paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="er es lo"><img src="../Images/e73d59b836f79e8674a03bf607e70c26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HY3bm3MyOTX9Tpv5zve9VQ.png"/></div></div></figure><p id="d6cb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好的。我测试过这个调试和测试是本地的？接下来呢？</p><p id="cdd7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，只需点击箭头按钮，就可以将该功能部署到Azure Cloud。</p><p id="7479" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意:在你这样做之前，请注册Azure Credentials，它提供30天200美元的信用。</strong></p><figure class="jy jz ka kb fd kc er es paragraph-image"><div class="er es lp"><img src="../Images/01001564990155a85f91b3d6e196e899.png" data-original-src="https://miro.medium.com/v2/resize:fit:674/format:webp/1*MEmjsttwJ-dvfTIksGg1Vw.png"/></div></figure><p id="48e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">后思:</strong></p><ol class=""><li id="f157" class="kr ks hi ih b ii ij im in iq kt iu ku iy kv jc kw kx ky kz bi translated">我们现在已经学会了如何根据请求做出响应。简而言之，网页不就是这样吗？</li><li id="0384" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">我们有没有可能像用Flask服务一样服务一个简单的网页？</li><li id="e762" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">使用一项功能的好处是你只需为你所使用的功能付费。。</li></ol><p id="9220" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望在下一篇文章中设计一个通过Azure函数提供服务的简单web应用程序。</p><p id="e4f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">请关注此空间了解更多信息，并分享您对云解决方案架构空间中您希望看到的任何其他特定主题的想法。</strong></p></div></div>    
</body>
</html>