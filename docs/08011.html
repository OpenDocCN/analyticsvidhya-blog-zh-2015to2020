<html>
<head>
<title>Web Scraping For Good</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">永久抓取网页</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/web-scraping-for-good-fd4aecb58b15?source=collection_archive---------19-----------------------#2020-07-14">https://medium.com/analytics-vidhya/web-scraping-for-good-fd4aecb58b15?source=collection_archive---------19-----------------------#2020-07-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class="ev ex if ig ih ab cb"><figure class="ii ij ik il im in io paragraph-image"><div role="button" tabindex="0" class="ip iq di ir bf is"><img src="../Images/7cc0535ce5339d4294bdf9a55fb28c4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/0*KF9EIcLyi3g-rqlR"/></div></figure><figure class="ii ij iv il im in io paragraph-image"><img src="../Images/759ef2ca0cba2c66b5ac1662059cc25a.png" data-original-src="https://miro.medium.com/v2/resize:fit:550/0*E5qF1B6fBlf0Aafx"/></figure></div><p id="1134" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">当我第一次听到刮网的时候，我的脑海里立刻浮现出刮菜器的画面！！！作为一名数据分析师，我想知道网页上的抓取器会是什么样子，因此我在这里记下了我学到的经验。</p><p id="2619" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated"><em class="ju">先决条件</em>:</p><p id="6307" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">对Python和HTML标签的基本理解</p><p id="499b" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated"><strong class="iy hj">什么是网页抓取？</strong></p><p id="ca7d" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">网页抓取或数据抓取是从网页中检索信息并将其保存到可读文档中的过程。最简单的方法，即从互联网复制粘贴到我们的本地系统，也正在废弃。或许，网络抓取指的是将互联网上非结构化的、分散的数据以结构化的、人类可读的格式收集到一个地方。</p><p id="8f07" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated"><strong class="iy hj">为什么网刮</strong> <strong class="iy hj">是</strong> <strong class="iy hj">最好的</strong> <strong class="iy hj">方法</strong> <strong class="iy hj">对于</strong> <strong class="iy hj">了解</strong> <strong class="iy hj">产品</strong> <strong class="iy hj">营销？</strong></p><p id="75dd" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">在市场营销的世界里，分析网络数据以收集洞察力来制定你的营销策略总是必要的。由人类从网页中大量提取信息不仅是不可能的，而且使数据容易受到人为错误的影响。因此，为了克服这一点，网络抓取应运而生。</p><h2 id="06f4" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jh kg kh ki jl kj kk kl jp km kn ko kp bi translated">来刮刮现场吧！…但是怎么做呢？</h2><p id="50d6" class="pw-post-body-paragraph iw ix hi iy b iz kq jb jc jd kr jf jg jh ks jj jk jl kt jn jo jp ku jr js jt hb bi translated">将一只脚放在另一只脚的前面要容易得多——而不是恐惧地盯着整个徒步路线。因此，让我把网络报废任务分解成更容易实现的步骤:</p><p id="5645" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">在本文中，我从美国在线零售商Newegg Inc .开始获取显卡的产品名称、品牌和运费。</p><p id="3115" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">在主页上，我们可以看到显卡的显示。</p><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ip iq di ir bf is"><div class="er es kv"><img src="../Images/ace6b751ce4fcec2d80eb8ce99e17765.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zGJV1lwKIdYKZe3Y"/></div></div></figure><p id="fd7a" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">第一步:探索我们想要抓取的网页链接。我们需要理解HTML标签，使用web页面上的开发工具来检索信息。</p><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ip iq di ir bf is"><div class="er es kv"><img src="../Images/d2001991af3fa4c2bcaf85800278f42c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*j3FDYk61LldSqi1I"/></div></div></figure><p id="e6fa" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated"><em class="ju"> I </em> <strong class="iy hj"> <em class="ju">检查网页中的HTML元素</em> </strong></p><p id="b2f6" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">在深入研究了网页内容之后，现在我们对HTML标签有了一个概念。(哦，这样一个令人惊叹的网站背后令人困惑的代码行，对！！)</p><p id="a24a" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated"><strong class="iy hj">第二步</strong>:使用<strong class="iy hj"><em class="ju">urllib . request</em></strong>模块将网站的HTML代码加载到Python脚本中</p><p id="55a9" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated"><strong class="iy hj"> urllib </strong>，一个允许我们访问网站并与之交互的包。<strong class="iy hj"> urllib.request，</strong>用<strong class="iy hj"> urlopen，</strong>允许我们打开URL。</p><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ip iq di ir bf is"><div class="er es kv"><img src="../Images/37a46bfb0798021f10db73ec9ff97764.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bzovwaxV6MP4o5g0"/></div></div></figure><p id="6b24" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated"><strong class="iy hj">第三步:</strong>“美汤”，使用python库对HTML结构化数据进行排序，从而能够与python脚本中的网页代码进行交互。现在，我们可以将所需的信息保存在本地文档中。</p><figure class="kw kx ky kz fd ij er es paragraph-image"><div class="er es la"><img src="../Images/23dc8e02db3d9e4e3adef4777c77f1c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/0*lOuvHrI8yLBdItYe"/></div></figure><p id="c2b3" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">网页中的每个HTML元素都与“id”相关联，id在页面上是唯一的。由于我们有兴趣获取图形卡的详细信息，让我们切换回页面的开发工具来定位包含所有<em class="ju">图形卡</em>名称的HTML对象。</p><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ip iq di ir bf is"><div class="er es kv"><img src="../Images/6a6948b40c2e6d3f398dc69f34a7af95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lGgL5hBy9Nk1reuh"/></div></div></figure><p id="c15c" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">我们可以看到，每个图形卡名称都包含在一个带有类'<em class="ju"> item-container </em>'的<div>元素中。</div></p><figure class="kw kx ky kz fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/0660f51a785ca04c6577b2b78faabad4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/0*Zu4rrubt2HYE86Ou"/></div></figure><p id="9cb3" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">在这里，我们姑且称之为<strong class="iy hj">。在一个名为page_soup的漂亮的Soup对象上查找all() </strong>,它给出一个可迭代的结果，其中包含显示在网页上的12个图形卡。让我们检查第一个图形卡的HTML标签细节:</p><figure class="kw kx ky kz fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/fae2cd3c219a7ebc712832771af7930c.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/0*KWk01XciB2FFqKfJ"/></div></figure><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ip iq di ir bf is"><div class="er es kv"><img src="../Images/1501d056ebb9592f6ad2226801f38b78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_-Wl1HwV5MgYRb23"/></div></div></figure><p id="fdb5" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">看完第一张图形卡的所有标签，我才意识到，我们已经潜入了HTML元素的海洋，而HTML标签都漂浮在我们周围。接下来呢！！沉还是刮？？</p><p id="e3bc" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">让我们找到一个方法:</p><p id="86ef" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">我们有关于图形卡的产品形象、价格、品牌、评论、评级的所有信息。但是现在让我们只关注与品牌、产品名称和运输价格相关的数据。</p><p id="9567" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">看啊！看啊！我们已经熬过了美妙的汤。通过添加。对于一个漂亮的汤对象，我们可以只恢复产品名称的HTML元素文本内容。</p><p id="32c2" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">我们可以在shipping price中使用strip()去掉多余的空白，因为我们正在处理Python字符串。</p><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ip iq di ir bf is"><div class="er es ld"><img src="../Images/462cb634f8fce37b1fed106174f97cb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ENKWm_0cCmuYZu4p"/></div></div></figure><p id="8a2f" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">好吧！！运行该脚本后，结果看起来好了很多，尽管它很简洁和精确。最重要的是，最终没有弄乱结果中的标签。<br/>这么多的变通方法来获得简单和结构化的数据，不是吗？</p><p id="0c5a" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated"><strong class="iy hj"> <em class="ju">结果:</em> </strong></p><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ip iq di ir bf is"><div class="er es kv"><img src="../Images/89dad7a94d44ee108389cfaddd50dfba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7qWmU7xDubVXB96V"/></div></div></figure><p id="be1d" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">相同的结果将保存在CSV文件中，如下所示:</p><figure class="kw kx ky kz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ip iq di ir bf is"><div class="er es kv"><img src="../Images/d84ac0a9999c88e2251d087d98f121d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ujiW4gO6YYva614V"/></div></div></figure><p id="15e0" class="pw-post-body-paragraph iw ix hi iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">尽管网络抓取看起来像光栅标签，但重要的是，数据在商业中的使用效率如何。它可能是为了分析、可视化、持续的数据流入你的系统、商业评论、利润空间的建立，但是网络抓取应该合乎道德。除非有人试图抓取非公开数据，否则网络抓取是合法的。</p></div></div>    
</body>
</html>