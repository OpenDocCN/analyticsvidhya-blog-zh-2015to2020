# ä½¿ç”¨ Tensorflow.js çš„ Twitter æ¯’æ€§æ£€æµ‹å™¨

> åŸæ–‡ï¼š<https://medium.com/analytics-vidhya/twitter-toxicity-detector-using-tensorflow-js-1140e5ab57ee?source=collection_archive---------5----------------------->

è¿‘å¹´æ¥ï¼Œéšç€ä»‡æ¨è¨€è®ºã€éªšæ‰°å’Œæ”»å‡»æ€§å†…å®¹çš„å¢åŠ ï¼ŒTwitter ä¸Šçš„äº’åŠ¨å˜å¾—è¶Šæ¥è¶Šæœ‰å®³ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘æƒ³è§£é‡Šå¦‚ä½•ä½¿ç”¨ twitter API å’Œ tensorflow.js æ¥æ„å»ºä¸€ä¸ªç®€å•çš„æœ‰æ¯’ tweet æ£€æµ‹å™¨

![](img/b4a1a1f4f1a76476ff508ba2712a7ee1.png)

# ä»‹ç»

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘æƒ³ä¸€æ­¥ä¸€æ­¥åœ°å±•ç¤ºå¦‚ä½•æ„å»ºä¸€ä¸ª web åº”ç”¨ç¨‹åºæ¥æ˜¾ç¤ºæ¥è‡ªç»™å®šç”¨æˆ·çš„æœ€åçš„æœ‰å®³æ¨æ–‡å’Œè½¬å‘ã€‚

è¯¥åº”ç”¨ç¨‹åºå°†æ¥æ”¶ 2 ä¸ªå‚æ•°: **tweets æœç´¢**å’Œ**ç”¨æˆ·åã€‚**

*   **è¦æœç´¢çš„ Tweets:**æˆ‘ä»¬å¸Œæœ›ä» twitter API ä¸­è·å–è¦åˆ†æçš„ Tweets çš„æ•°é‡(10ã€20ã€50 æˆ– 100)ã€‚
*   **ç”¨æˆ·å:**æˆ‘ä»¬å°†ä»ä¸­åˆ†ææ¨æ–‡çš„ twitter ç”¨æˆ·(@â€¦)ã€‚

åˆ†æçš„æ¨æ–‡è¶Šå¤šï¼Œé¢„æµ‹æ¯’æ€§çš„å¤„ç†å°±å˜å¾—è¶Šæ˜‚è´µï¼Œæ‰€ä»¥æˆ‘æ·»åŠ äº†ä¸€ä¸ªé€‰æ‹©å™¨æ¥è·å– 10ã€20ã€50 æˆ– 100 æ¡æ¨æ–‡(å…¶ä¸­ 50 è‡³ 100 æ¡æ¨æ–‡æ„å‘³ç€éå¸¸é«˜çš„å¤„ç†æˆæœ¬ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä¸å»ºè®®åœ¨ä½æ€§èƒ½è®¡ç®—æœºæˆ–æ‰‹æœºæµè§ˆå™¨ä¸Šå°è¯•çš„åŸå› )ã€‚

å› æ­¤ï¼Œå®ƒä¼šæ˜¾ç¤ºä¸€ä¸ªæ£€æµ‹åˆ°çš„æœ‰æ¯’æ¨æ–‡å’Œè½¬å‘åˆ—è¡¨ã€‚æ‚¨å¯ä»¥ä»[è¿™é‡Œ](https://mcarlomagno.github.io/TwitterToxicityDetector/)è®¿é—®ç°åœºæ¼”ç¤ºã€‚

> **æ³¨æ„:**æœ‰æ—¶ Twitter API åœ¨ç¬¬ä¸€æ¬¡å°è¯•æ—¶ä¸ä¼šè·å¾—æ‰€æœ‰çš„ tweetsï¼Œå› æ­¤æ‚¨å¯èƒ½éœ€è¦å†æ¬¡æŒ‰ä¸‹â€œæœç´¢ TWEETSâ€ã€‚*ğŸ¤·â€â™‚ï¸*

![](img/c52abb5d5b779d72f963e1b48fdd6352.png)

æ¼”ç¤ºæˆªå›¾

## Twitter API

twitter API å…è®¸æˆ‘ä»¬ä»¥ç¼–ç¨‹æ–¹å¼è®¿é—® Twitter å†…å®¹ï¼Œå®ƒå¯ä»¥ç”¨äºè¯»å–ã€åˆ†æå’Œä¸ tweetsã€ç›´æ¥æ¶ˆæ¯ã€ç”¨æˆ·å’Œå…¶ä»–å…³é”® Twitter èµ„æºè¿›è¡Œäº¤äº’ã€‚

[æ›´å¤šä¿¡æ¯](https://developer.twitter.com/en/docs/twitter-api)

## Tensorflow.js

TensorFlow.js æ˜¯ä¸€ä¸ª JavaScript åº“ï¼Œç”¨äºåœ¨æµè§ˆå™¨å’Œ Node.js ä¸­è®­ç»ƒå’Œå®ç°æœºå™¨å­¦ä¹ æ¨¡å‹ã€‚

[æ›´å¤šä¿¡æ¯](https://www.tensorflow.org/js)

## æ¯’æ€§åˆ†ç±»æ¨¡å‹

æ¯’æ€§æ¨¡å‹æ˜¯ä¸€ä¸ª tensorflow æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œå®ƒå¯ä»¥æ£€æµ‹æ–‡æœ¬æ˜¯å¦åŒ…å«è¯¸å¦‚ä¾®è¾±ã€æ·«ç§½ã€ä»‡æ¨æˆ–æ˜ç¡®çš„æ€§è¯­è¨€ç­‰æœ‰æ¯’å†…å®¹ã€‚å®ƒå»ºç«‹åœ¨[é€šç”¨å¥å­ç¼–ç å™¨](https://github.com/tensorflow/tfjs-models/tree/master/universal-sentence-encoder)çš„åŸºç¡€ä¸Šï¼Œå¹¶åœ¨åŒ…å«çº¦ 200 ä¸‡æ¡æ¯’æ€§è¯„è®ºçš„æ°‘äº‹è¯„è®º[æ•°æ®é›†](https://figshare.com/articles/data_json/7376747)ä¸Šè¿›è¡Œè®­ç»ƒã€‚

[æ›´å¤šä¿¡æ¯](https://github.com/tensorflow/tfjs-models/tree/master/toxicity)

![](img/b7f531dbd1b44345be4a066084866f18.png)

# è®¾ç½®

## **æ¨ç‰¹ API**

é¦–å…ˆè¦åšçš„æ˜¯åˆ›å»ºä¸€ä¸ª twitter å¼€å‘è€…è´¦æˆ·æ¥è®¿é—® APIï¼ŒæŒ‰ç…§è¿™ä¸ª[æŒ‡å—](https://developer.twitter.com/en/apply-for-access)çš„ç®€å•æ­¥éª¤æ¥å®Œæˆã€‚

æ³¨å†Œåï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®[é—¨æˆ·](https://developer.twitter.com/en/portal/products)æ¥æŸ¥çœ‹ä½¿ç”¨ç»Ÿè®¡æ•°æ®ï¼Œå¹¶è®¿é—®ç«¯ç‚¹ URL å’Œ API çš„è®¿é—®å¯†é’¥ã€‚

## Tensorflow.js å’Œæ¯’æ€§åˆ†ç±»å™¨

ä¸ºäº†èƒ½å¤Ÿåœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ Tensorflowï¼Œæˆ‘ä»¬åªéœ€ä½¿ç”¨ HTMLã€CSS å’Œ JavaScript åˆ›å»ºä¸€ä¸ªç»å…¸çš„ web åº”ç”¨ç¨‹åº(å¦‚æœä½ ä¸çŸ¥é“å¦‚ä½•åšï¼Œè¯·éµå¾ª[è¿™ä¸ª](https://www.w3schools.com/howto/howto_website.asp)æŒ‡å—)ï¼Œç„¶åæˆ‘ä»¬ä½¿ç”¨ yarnã€npm æˆ– Script æ ‡ç­¾ä» tensorflow å¯¼å…¥æ¨¡å‹å’Œå·¥å…·ã€‚

åœ¨è¿™ä¸ª [github](https://github.com/tensorflow/tfjs-models/tree/master/toxicity) ä¸­ï¼Œå¾ˆå¥½åœ°è§£é‡Šäº†å¦‚ä½•å»åšã€‚

## **Express.js ç¯å¢ƒ**

ä¸å¹¸çš„æ˜¯ï¼ŒTwitter ä¸å…è®¸åº”ç”¨ç¨‹åºç›´æ¥ä»æµè§ˆå™¨è®¿é—® APIï¼Œå› æ­¤éœ€è¦æ„å»ºä¸€ä¸ªæœåŠ¡å™¨åº”ç”¨ç¨‹åºæ‰èƒ½è®¿é—®ã€‚

åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œæˆ‘æ˜¯ä½¿ç”¨ [Express.js](https://expressjs.com/) å®Œæˆçš„ï¼Œç„¶åæˆ‘å°†å®ƒéƒ¨ç½²åˆ° [heroku](https://www.heroku.com/) ã€‚ä½¿ç”¨å…è´¹å¸æˆ·ï¼Œæ‚¨å¯ä»¥åˆ›å»ºå’Œéƒ¨ç½²å¤šè¾¾ 5 ä¸ªæœåŠ¡å™¨åº”ç”¨ç¨‹åºã€‚

å¦‚æœæ‚¨ä¸çŸ¥é“å¦‚ä½•åšï¼Œæˆ–è€…å¦‚æœæ‚¨åªæ˜¯ä¸æƒ³åˆ›å»ºæœåŠ¡å™¨åº”ç”¨ç¨‹åºï¼Œæ‚¨å¯ä»¥å…‹éš†[æˆ‘çš„é¡¹ç›®](https://github.com/MCarlomagno/toxicity-classifier-server)ï¼Œä¿®æ”¹å‚æ•°ä»¥è®¿é—®æ‚¨çš„ twitter APIï¼Œç„¶åéƒ¨ç½²åˆ°æ‚¨çš„ heroku å¸æˆ·ã€‚

**å¦‚æœä½ å¯¹æœåŠ¡å™¨ä¸€æ— æ‰€çŸ¥æˆ–è€…ä½ åªæ˜¯ä¸æƒ³è‡ªå·±æ„å»ºå®ƒï¼Œä½ å¯ä»¥ä½¿ç”¨æˆ‘æ„å»ºçš„æœåŠ¡å™¨çš„ API url ä»ä½ çš„ web åº”ç”¨ç¨‹åºç›´æ¥è®¿é—®æˆ‘çš„ API(æˆ‘å¯ç”¨äº†**[**CORS**](https://en.wikipedia.org/wiki/Cross-origin_resource_sharing)**ä»¥ä¿æŒä»»ä½•äººéƒ½å¯ä»¥è®¿é—®å®ƒ)ã€‚**

**ç½‘å€æ ¼å¼:**

https://toxicity-classifier-server.herokuapp.com/twits/<username>/</username>

## **æœ€ç»ˆæ¶æ„:**

ä¸€æ—¦æˆ‘ä»¬å®Œæˆäº†æ‰€æœ‰è¿™äº›æ­¥éª¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ„å»ºè¿™ä¸ªæ¶æ„ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°ä½¿ç”¨å®ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å®ƒæ¥è·å–ç»™å®šç”¨æˆ·æœ€è¿‘çš„æ¨æ–‡ï¼Œå¹¶ä»æµè§ˆå™¨ä¸­å¯¹å…¶è¿›è¡Œåˆ†æã€‚

![](img/6d79f620a630dc95bbc650135dc6cb07.png)

**æ¶æ„æµç¨‹å›¾**(ç»˜åˆ¶è¿™ä¸ªæ¯”ç³»ç»Ÿç¼–ç¨‹èŠ±çš„æ—¶é—´è¿˜é•¿)

# **æ­¥éª¤**

åœ¨æ‚¨çš„ web é¡¹ç›®ä¸­ï¼Œé‡‡å–ä»¥ä¸‹æ­¥éª¤ã€‚

**1-** å°†ä¸€ä¸ª js æ–‡ä»¶é“¾æ¥åˆ° html æ¨¡æ¿ã€‚

**2-** å¯¼å…¥ä¹‹å‰å®‰è£…çš„ tensorflow æ¯’æ€§åº“ã€‚

**3-** åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶åŠ è½½æ¨¡å‹(ä»…ä½¿ç”¨**æ¯’æ€§**æ ‡ç­¾å’Œç»™å®šçš„**é˜ˆå€¼**)ã€‚

**4-** å½“â€œæœç´¢æ¨æ–‡â€äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œè®¿é—® API ä»¥è·å–æœ€è¿‘çš„æ¨æ–‡ã€‚

**5-** è·å–æ¨æ–‡åï¼Œåˆ†æå®ƒä»¬å¹¶é¢„æµ‹æ¯’æ€§ã€‚

**6-** æ˜¾ç¤ºæ¯’æ€§å€¼ä¸º**çœŸ**æˆ–**ç©º**çš„æ¨æ–‡(**ç©º**è¡¨ç¤ºç¨‹åºä¸ç¡®å®šå®ƒæ˜¯å¦æœ‰æ¯’ï¼Œç»“æœä¸è¶…è¿‡é˜ˆå€¼)ã€‚

# ç¤ºä¾‹ç»“æœ

![](img/b3d9611ba31df00002f0bb87357e9023.png)![](img/d43942e1247a7add0dcbec078b24e535.png)

# ç»“è®º

ä¸–ç•Œä¸Šäº§ç”Ÿçš„æ•°æ®é‡æ¯å¹´éƒ½å‘ˆæŒ‡æ•°å¢é•¿ï¼Œæœ‰è®¸å¤šå¼€æ”¾å’Œå…è´¹çš„å·¥å…·å¯ä»¥è®©æˆ‘ä»¬ä»¥æœ‰è¶£çš„æ–¹å¼åˆ©ç”¨è¿™äº›æ•°æ®ï¼Œä¾‹å¦‚ä½¿ç”¨æœ¬æ–‡ä¸­æ‰€ç¤ºçš„æœºå™¨å­¦ä¹ æ¨¡å‹ã€‚

è¿™æ¬¾è¿·ä½ ç³»ç»Ÿçš„å…¶ä»–æœ‰è¶£åŠŸèƒ½åŒ…æ‹¬:

*   ä½¿ç”¨ Twitter API çš„å…¶ä»–ç‰¹æ€§ã€‚
*   ä½¿ç”¨å…¶ä»–å¼ é‡æµæ¨¡å‹æ¥æ£€æµ‹æ–‡æœ¬ä¸­çš„æ¨¡å¼ã€‚
*   æ‰©å±•åº”ç”¨ç¨‹åºä»¥æ˜¾ç¤ºæ›´å¤šä¿¡æ¯ã€‚
*   ä½¿ç”¨è¯¥æ¨¡å‹è¿›è¡Œæ•°æ®åˆ†æ(ä¾‹å¦‚ï¼Œä¸€æ®µæ—¶é—´å†…çš„[*toxic _ tweets*/*total _ tweets*)ã€‚

æˆ‘é¼“åŠ±æ‚¨å°è¯•åˆ›å»ºè‡ªå·±çš„ç‰ˆæœ¬ï¼Œä»¥å…¶ä»–æ–¹å¼åˆ©ç”¨è¿™äº›æ•°æ®ã€‚

> **Github å›è´­:**https://github.com/MCarlomagno/toxicity-classifier
> 
> **è¯•ç© app:**[https://mcarlomagno.github.io/toxicity-classifier/](https://mcarlomagno.github.io/TwitterToxicityDetector/)