<html>
<head>
<title>Executing plain SQL over Pandas dataframes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对Pandas数据帧执行普通SQL</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/executing-plain-sql-over-pandas-dataframes-a2e328e816c1?source=collection_archive---------11-----------------------#2020-01-20">https://medium.com/analytics-vidhya/executing-plain-sql-over-pandas-dataframes-a2e328e816c1?source=collection_archive---------11-----------------------#2020-01-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/2334c81bb03dd0d11cd004be89b5215c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lga8rGqo2NayIgqnWzAWJA.jpeg"/></div></div></figure><p id="3eb3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有时当使用Pandas时，很难像在关系数据库中那样操作数据。一些简单的操作，比如连接或复合过滤器，用Pandas库执行起来不是很直观或者太痛苦。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jo"><img src="../Images/c64b6da3e1e89d57ebeaf0454e0bf7cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9nZLEBHq-7789nlBdd459Q.png"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">用熊猫加入例子</figcaption></figure><p id="1704" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有一个包叫<code class="du jx jy jz ka b">pandasql</code>。它允许我们在Pandas数据帧上执行普通的SQL，从而解决了我们几乎所有的问题。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es kb"><img src="../Images/791185918314248b9b4bbd81e33a93ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*3YajcoaHWkBs9Mzl-zaYKg.jpeg"/></div></figure><p id="c810" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是一个非常简单的工具，只需加载你的数据框架，用库工具查询它，就像它是一个表一样。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kc"><img src="../Images/46053ac222e0851cd6d19fb4ad6a99a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vc01kMuwfSPbrxz3WrbL9Q.png"/></div></div></figure><p id="1d8b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它使用SQLite语法，该语法非常完整，可以处理您在普通关系数据库环境中需要的许多函数。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kd"><img src="../Images/ffa24d769570e507e07248cd2c4310e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1zmSzzxzqfhb_zl3BCuHrQ.png"/></div></div></figure><div class="jp jq jr js fd ab cb"><figure class="ke ij kf kg kh ki kj paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><img src="../Images/220e25e35d6617c51f72e6991e42f546.png" data-original-src="https://miro.medium.com/v2/resize:fit:1070/format:webp/1*SbOV2-4C9DYhcaeOimpowg.png"/></div></figure><figure class="ke ij kk kg kh ki kj paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><img src="../Images/2c7071fbba4cbcb0b30351b7daafc6a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/1*abHTlCmGuKBwCQLk1LSkUA.png"/></div></figure></div><p id="d2c5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你甚至可以用它做临时桌子！</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kl"><img src="../Images/39801ad0a574f085b1ff603128fecbc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vgo_gj5dC4MWGK1AjDpRHQ.png"/></div></div></figure><p id="2747" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">由于SQL是一种人们更习惯使用的语言，可以称之为“通用”语言，现在您可以使用这个简单的技巧来扩展使用<code class="du jx jy jz ka b">pandas</code>的工作范围。</p><p id="8758" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="km"> Obs。:我所有的例子都是用Jupyter笔记本做的，出于演示的目的，我并不关心将</em> <code class="du jx jy jz ka b"><em class="km">sqldf</em></code> <em class="km">函数返回给另一个变量，但是当使用</em> <code class="du jx jy jz ka b"><em class="km">pandasql</em></code> <em class="km">函数时，您可以自由地继续使用pandas数据帧，因为函数的返回是一个转换后的数据帧。</em></p></div><div class="ab cl kn ko gp kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hb hc hd he hf"><p id="6625" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">本例中使用的笔记本可以在<a class="ae ku" href="https://github.com/ap3xx/python-contributions/blob/master/pandas/pandasql.ipynb" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="5a01" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请随意访问我的其他资源库，我贴出了许多片段和个人项目，可以帮助你！</p><p id="db36" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">关注我这里接收每周的提示和投稿，主要是关于数据工程的。</p><p id="0352" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">感谢阅读:)</p></div></div>    
</body>
</html>