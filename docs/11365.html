<html>
<head>
<title>Comprehending Python List Comprehensions—A Beginner’s Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">理解Python列表理解—初学者指南</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/comprehending-python-list-comprehensions-a-beginners-guide-7c97841c4eb0?source=collection_archive---------30-----------------------#2020-11-30">https://medium.com/analytics-vidhya/comprehending-python-list-comprehensions-a-beginners-guide-7c97841c4eb0?source=collection_archive---------30-----------------------#2020-11-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/08a84eb003db08fb8328d65e0dd28e38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dh8ZeF9FObhkbbFJ"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">马库斯·温克勒在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="5423" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">“哇，我怎么会在这里？我只是想找到一个简单的解释，到底什么是列表理解，现在我已经读了10篇文章，它们都非常复杂，我仍然不明白为什么我不应该使用for循环。”好了，给你，我将简单地分解如何理解和制定理解列表，并教你如何从一个虚构的政府机构获得晋升。</em></p><h1 id="4cb1" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">为什么？</h1><p id="502e" class="pw-post-body-paragraph iv iw hi ix b iy ks ja jb jc kt je jf jg ku ji jj jk kv jm jn jo kw jq jr js hb bi translated">你可能会坐在那里对自己说，<em class="jt">“我了解循环以及如何形成循环，为什么要在这个地球上浪费我有限的时间</em>(或者如果你是一个扁平的地球，那就是圆盘)<em class="jt">学习如何以不同的方式做同样的事情？”</em>好吧，我问你:<em class="jt">“为什么史蒂夫·乔布斯设计的iPhone带有屏幕键盘，而不是功能更强大的硬件键盘？”</em>风格和成长空间。学习列表理解将使你的代码更加精简，更容易阅读，适应性更强。Python在可读性方面是一种独特的语言，所以我们希望利用我们拥有的每一种工具来使我们的代码更容易阅读。</p><blockquote class="kx"><p id="0230" class="ky kz hi bd la lb lc ld le lf lg js dx translated">好吧，也许史蒂夫·乔布斯的比喻有点浮夸，但是学习这种技能来提高你的编码技能将会带来回报。</p></blockquote><figure class="lj lk ll lm ln ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es li"><img src="../Images/c278dc1c96c986eddea8c1820d9ff6d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bUB-yD1pv1H7iR65"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated"><a class="ae iu" href="https://unsplash.com/@actionvance?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">动作推进</a>对<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">去飞溅</a>拍照</figcaption></figure><p id="ce11" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">简单地说，你可能想知道列表理解和for循环之间是否有速度或效率上的差异。简短的回答是肯定的，在一个非科学的测试中，列表理解比循环运行得更快，下面是一个片段。但是，有几件事需要注意。列表理解的工作方式是，在将列表写入变量之前，将列表的所有元素都放在内存中，这在大多数情况下都没问题，除非您正在处理非常非常大的列表。但是为了忠实于这篇博客，我不会再深入下去了。更多信息请查看RealPython </em>  <em class="jt"> : </em>的这篇精彩文章的结尾</p><figure class="lp lq lr ls fd ij er es paragraph-image"><div class="er es lo"><img src="../Images/bcb844d4c5548e8da055fdced0ac09fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*v3GpSKj37l9mzIKHAyYbaA.png"/></div></figure></div><div class="ab cl lt lu gp lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hb hc hd he hf"><h1 id="c2ec" class="ju jv hi bd jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr bi translated">现在说点好的</h1><p id="0be2" class="pw-post-body-paragraph iv iw hi ix b iy ks ja jb jc kt je jf jg ku ji jj jk kv jm jn jo kw jq jr js hb bi translated">让我们来分解一下列表理解的结构</p><p id="ce42" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我将用两种方法来做这件事:首先，我要用循环的标准来说，然后我要用列表理解结构来说。<strong class="ix hj"> <em class="jt">注意，任何格式化的</em> </strong> <code class="du mf mg mh mi b"><strong class="ix hj"><em class="jt">like this</em></strong></code> <strong class="ix hj"> <em class="jt">都是代码或者伪代码</em> </strong></p><p id="5c3a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果我们使用for循环构建一个列表，第一步是创建一个空白列表</p><pre class="lp lq lr ls fd mj mi mk ml aw mm bi"><span id="aec7" class="mn jv hi mi b fi mo mp l mq mr">lst = []</span></pre><p id="5fc5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来我们通过对<code class="du mf mg mh mi b"><em class="jt">some iterable</em></code>中的<code class="du mf mg mh mi b"><em class="jt">some dummy variable</em></code> <em class="jt"> </em>说for来初始化for循环</p><pre class="lp lq lr ls fd mj mi mk ml aw mm bi"><span id="0406" class="mn jv hi mi b fi mo mp l mq mr">for member in monty_py:</span></pre><p id="93ba" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于一个没有条件的简单For循环，然后写出空白列表，添加<code class="du mf mg mh mi b">.append()</code>，然后在新列表的每一项中输入您想要的内容(通常使用虚拟变量)。</p><pre class="lp lq lr ls fd mj mi mk ml aw mm bi"><span id="bc8e" class="mn jv hi mi b fi mo mp l mq mr">    lst.append(member.title())</span></pre><blockquote class="kx"><p id="0327" class="ky kz hi bd la lb ms mt mu mv mw js dx translated">对于列表理解，我们跳过第一步，因为我们是直接在理解中做列表。</p></blockquote><p id="b6b1" class="pw-post-body-paragraph iv iw hi ix b iy mx ja jb jc my je jf jg mz ji jj jk na jm jn jo nb jq jr js hb bi translated">在括号内，我们看到的第一段代码是应该放在<code class="du mf mg mh mi b">.append()</code>方法内的代码——换句话说，就是我们希望放在新列表每一项中的代码。<strong class="ix hj"> <em class="jt">注意:在大多数情况下，我们使用一个虚拟变量，它实际上是我们循环遍历的iterable中每一项的占位符。</em> </strong>在列表理解中，我们在前引用虚拟变量<strong class="ix hj">，我们在<code class="du mf mg mh mi b"><em class="jt">for</em></code> <em class="jt"> </em>部分声明它。这是很多新Python程序员的困惑点。虚拟变量被<em class="jt">引用</em>到<em class="jt">然后</em>在列表理解的下一个片段中指定。下面的例子会让你更清楚。</strong></p><p id="faa5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后我们有了我们的<code class="du mf mg mh mi b">for</code> <em class="jt"> </em>语句，在这里我们声明了这个虚拟变量并指出它循环通过的内容。</p><h1 id="e989" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated"><strong class="ak">我们来看一些例子</strong></h1><pre class="lp lq lr ls fd mj mi mk ml aw mm bi"><span id="d4eb" class="mn jv hi mi b fi mo mp l mq mr">[x+5 for x in range(6)]</span><span id="141b" class="mn jv hi mi b fi nc mp l mq mr"><em class="jt">OUT[1]: [5, 6, 7, 8, 9, 10]</em></span></pre><p id="7f53" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们从后向前分解:我们的iterable是一个从0到5的<a class="ae iu" href="https://www.w3schools.com/python/ref_func_range.asp" rel="noopener ugc nofollow" target="_blank"> range对象</a>，我们设置虚拟变量<code class="du mf mg mh mi b">x</code>来循环遍历范围中的每个实例，我们的新列表中的每个项目都是<code class="du mf mg mh mi b">x+5</code>。所以我们输出的第一个项目是范围内的第一个项目<code class="du mf mg mh mi b">0</code>，将其设置为<code class="du mf mg mh mi b">x</code>，然后运行代码<code class="du mf mg mh mi b">x+5</code>，然后<code class="du mf mg mh mi b">x</code>被设置为范围对象中的下一个项目，我们重复运行<code class="du mf mg mh mi b">x+5</code>代码。我们对此进行循环，直到到达iterable对象<code class="du mf mg mh mi b">range(6)</code>的末尾，然后计算出的每个实例都被写入新列表！砰，这就是你的列表理解。</p></div><div class="ab cl lt lu gp lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hb hc hd he hf"><figure class="lp lq lr ls fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es nd"><img src="../Images/6a77ae877c476ba2bc57dcf82b1d753c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pc3nlI6phpvb9_dLbR5yNQ.jpeg"/></div></div></figure><p id="f58c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在让我们快速地看一个稍微不那么做作但却愚蠢得多的例子。比方说，你的愚蠢走步部经理要求你检查他们是否开发了独特的走步。纳税人并没有资助你的部门去创造一堆陈词滥调或重复愚蠢的步态！你意识到你可以通过编辑一个愚蠢的形容词列表来描述每一个部里帮助开发的愚蠢的行走来做到这一点。为您提供了一个包含愚蠢行走名称的字符串列表，您希望创建一个只包含列表中每个项目的第一个单词的列表。我们想使我们的代码简洁，所以我们决定做一个列表理解！</p><blockquote class="kx"><p id="a7e8" class="ky kz hi bd la lb lc ld le lf lg js dx translated">我强烈建议打开一个Python环境，在继续阅读之前尝试自己做这件事，或者至少和我一起编码。这真的有助于记忆！</p></blockquote><p id="a425" class="pw-post-body-paragraph iv iw hi ix b iy mx ja jb jc my je jf jg mz ji jj jk na jm jn jo nb jq jr js hb bi translated">好的，我们问的第一个问题是“我们如何从一个多单词的字符串中选择第一个单词？”一种解决方案是使用<code class="du mf mg mh mi b"><a class="ae iu" href="https://www.w3schools.com/python/ref_string_split.asp" rel="noopener ugc nofollow" target="_blank">.split()</a></code> <a class="ae iu" href="https://www.w3schools.com/python/ref_string_split.asp" rel="noopener ugc nofollow" target="_blank">方法</a>然后从其结果中选择第一个项目。我们可以用两个单词的字符串来测试这一点:</p><figure class="lp lq lr ls fd ij"><div class="bz dy l di"><div class="ne nf l"/></div></figure><p id="ef82" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">看起来不错，现在把这个应用到提供的愚蠢的散步列表。所以我们想对列表中的每一项应用<code class="du mf mg mh mi b">.split()</code>方法，所以我们只需要用一个虚拟变量替换上面代码探索中的<code class="du mf mg mh mi b">str</code>，然后创建包含所提供列表的<code class="du mf mg mh mi b">for loop</code>:</p><figure class="lp lq lr ls fd ij"><div class="bz dy l di"><div class="ne nf l"/></div></figure><p id="a827" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">简单！你的老板很激动，正在为你举办一个愚蠢的游行。将我们的列表理解与使用标准的<code class="du mf mg mh mi b">for loop</code>进行比较:</p><figure class="lp lq lr ls fd ij"><div class="bz dy l di"><div class="ne nf l"/></div></figure><p id="e9e7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">该标准中有更多的内容</p><p id="83d2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> <em class="jt">注意</em> </strong>在上面的循环中，<code class="du mf mg mh mi b">walk</code>是一个虚拟变量。从技术上来说，我可以把它写成<code class="du mf mg mh mi b">for x in silly_walks:</code>或<code class="du mf mg mh mi b">for temp in silly_walks:</code>或<code class="du mf mg mh mi b">for twenty in silly_walks:</code>，尽管把它写成一个单数名词来指代列表中的每一项实际上是什么有助于提高代码的可读性。</p><p id="ba21" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦你掌握了理解列表的语法，它实际上会比做for循环更直观。您只需用一个<code class="du mf mg mh mi b">bracket</code>打开，写下您希望目标列表中的每一项包含的内容，然后编写一个<code class="du mf mg mh mi b">for</code>语句来循环遍历您的iterable。</p><p id="457c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">关于条件语句、多个变量和其他Python对象理解的列表理解，可以在我的下一篇文章</strong>  <strong class="ix hj">中找到</strong> <a class="ae iu" href="https://joebrowz.medium.com/comprehending-python-list-comprehensions-ii-lost-in-new-york-e8af27038f4b" rel="noopener"> <strong class="ix hj">！感谢阅读！</strong></a></p></div></div>    
</body>
</html>