<html>
<head>
<title>Installing cuDNN for GPU support with TensorFlow on Windows 10</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Windows 10上使用TensorFlow安装cuDNN for GPU支持</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/installing-cudnn-for-gpu-support-with-tensorflow-on-windows-10-aff10c6c9929?source=collection_archive---------4-----------------------#2020-06-18">https://medium.com/analytics-vidhya/installing-cudnn-for-gpu-support-with-tensorflow-on-windows-10-aff10c6c9929?source=collection_archive---------4-----------------------#2020-06-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/fc4d52d30c7dca2e58bfa630d6bacb06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YyJ4kAhx-LnXhIZxrpQg0Q.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">NVIDIA开发者博客</figcaption></figure><p id="0910" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我在这个平台上写东西已经有一段时间了，好像已经快忘记了😛但是我又来了，我有一堆写得很长的帖子，我会以更短的时间间隔发布，而且不仅仅是安装的东西，我保证😛</p><p id="4d70" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">所以当我在攻读计算机科学硕士学位时，我不得不写一篇学期论文(唉，我讨厌它们！)关于并行编程的一些现代用法。就在那时，我偶然发现了深度神经网络CUDA(或<strong class="iw hj"> cuDNN </strong>)。现在这听起来可能不太现代，但对于像我这样的初学者来说，它仍然是相当陌生的(相信我，我总是一个初学者)。</p><p id="717d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">CuDNN实际上是一个流行的库，可以与Tensorflow、Pytorch和Caffe等许多现代深度学习框架一起使用，以利用计算机上的GPU。因此，这篇文章假设你的电脑已经有一个支持NVIDIA CUDA的GPU。</p><p id="0f43" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="js">注意:如果你有一个AMD的GPU，这个帖子不会工作。你可以改试试</em> <a class="ae jt" href="https://towardsdatascience.com/train-neural-networks-using-amd-gpus-and-keras-37189c453878" rel="noopener" target="_blank"> <em class="js">这个</em> </a> <em class="js">出来。</em></p><p id="88c0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">您还需要Visual Studio Express社区版2017或更高版本，CUDA才能在您的计算机上正常工作。</p><h1 id="124a" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">从CUDA开始</h1><p id="f07a" class="pw-post-body-paragraph iu iv hi iw b ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn kw jp jq jr hb bi translated">所以让我们从<a class="ae jt" href="https://developer.nvidia.com/cuda-toolkit" rel="noopener ugc nofollow" target="_blank">这里</a>下载用于Windows 10的CUDA工具包开始吧。为了稳定起见，我安装了10.1版本，但10.2是当前提供的版本。这也是需要检查的，因为我们需要检查它与我们安装的TensorFlow版本的兼容性。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kx"><img src="../Images/097b231b582204e43bb482f14b713568.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LHUgTnUvwbIaCOzTXvYceg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">用于Windows 10的Nvidia CUDA工具包安装程序中的一个步骤</figcaption></figure><p id="57b2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">它执行所有的系统检查，也检查必需品。所以如果你之前忘了安装Visual Studio，这个安装程序会再次提醒你！此外，坚持使用安装程序中的所有默认选项。我们不想定制任何东西。</p><p id="2168" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">有时，会打开一个Nvidia GeForce体验窗口，并提示您注册Nvidia。如果你现在想的话，可以跳过这一步。我继续并注册了，因为下载cuDNN需要注册。</p><h1 id="b308" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">安装cuDNN</h1><p id="0022" class="pw-post-body-paragraph iu iv hi iw b ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn kw jp jq jr hb bi translated">下一步是为CUDA 10.1下载相应的cuDNN包。你会在这里找到<a class="ae jt" href="https://developer.nvidia.com/rdp/cudnn-download" rel="noopener ugc nofollow" target="_blank"/>。对我来说，这个版本就是7.6.5.32。为了确保安全，您可以随时查看<a class="ae jt" href="https://www.tensorflow.org/install/gpu" rel="noopener ugc nofollow" target="_blank"> TensorFlow </a>网站来检查GPU的版本兼容性。</p><p id="8567" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">解压cuDNN文件。路径应该是这样的:</p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="5198" class="lh jv hi ld b fi li lj l lk ll">&lt;someUserPath&gt;\cudnn-10.1-windows10-x64-v7.6.5.32\cuda</span></pre><p id="5a7e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们称这个路径为a。现在，我们只想使用这个包中的3个文件。从上面路径中的<code class="du lm ln lo ld b">bin</code>文件夹开始。复制<code class="du lm ln lo ld b">cudnn64_7.dll</code>文件。</p><p id="6e6c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在走下面这条路(姑且称之为B路):</p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="e4d2" class="lh jv hi ld b fi li lj l lk ll">C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v10.1</span></pre><p id="5916" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在这里你会找到另一个<code class="du lm ln lo ld b">bin</code>文件夹。将此文件粘贴到此文件夹中。</p><p id="80d6" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">同样，从路径A的include文件夹中复制<code class="du lm ln lo ld b">cudnn.h </code>，粘贴到路径b的include文件夹中，再次，从路径A的<code class="du lm ln lo ld b">lib\x64</code>文件夹中复制<code class="du lm ln lo ld b">cudnn.lib</code>，粘贴到路径b的相应文件夹中</p><h1 id="b783" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">检查环境变量</h1><p id="8a93" class="pw-post-body-paragraph iu iv hi iw b ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn kw jp jq jr hb bi translated">在Windows 10中，通过进入<em class="js">控制面板→系统和安全→系统→高级系统设置</em>来完成此操作。</p><p id="e47c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">当窗口打开时，进入<em class="js">高级</em>选项卡，点击底部的<em class="js">环境变量</em>按钮。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div class="er es lp"><img src="../Images/dbdf31b6cbe421bf0c0495db977f6b35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1078/format:webp/1*yqgVx4Dohl2YQ1V7X2DIdQ.png"/></div></figure><p id="1f51" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">然后，您需要转到“系统变量”选项卡中的Path变量，并双击以查看如下内容:</p><figure class="ky kz la lb fd ij er es paragraph-image"><div class="er es lq"><img src="../Images/fb160fc31a514dd509c587f1e6d475d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*JAQ4Y99e8IoFxsUORmN6OA.png"/></div></figure><p id="8b0f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><code class="du lm ln lo ld b">bin</code>和<code class="du lm ln lo ld b">libnvvp</code>各应有一条路径。现在我们已经成功安装。</p><h1 id="fa54" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">计算机编程语言</h1><p id="938f" class="pw-post-body-paragraph iu iv hi iw b ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn kw jp jq jr hb bi translated">如果你还没有安装python，在这里获得它<a class="ae jt" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank">。我有3.7.5版本，它与TensorFlow 2.1.0(我将使用它)兼容。继续之前，请在此处</a>检查您的兼容性<a class="ae jt" href="https://www.tensorflow.org/install/pip" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="7fce" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">蟒蛇</h1><p id="68cc" class="pw-post-body-paragraph iu iv hi iw b ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn kw jp jq jr hb bi translated">Anaconda是一个流行的数据科学实践平台。它捆绑了一些令人惊叹的编辑器和ide，以及预装的各种基本机器学习库(适用于大多数版本)。</p><p id="5a7c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们将确保我们的代码不会影响系统上的其他文件或安装。所以我们将使用虚拟环境进行实验。这篇文章温和地介绍了虚拟环境。</p><p id="bbf2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">注意:</strong>你不必按照那个环节安装。我们将在<code class="du lm ln lo ld b">virtualenv</code>中使用Anaconda。</p><p id="18d4" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我之前写过一篇关于在Ubuntu上安装Anaconda的文章。现在，对于windows，你所需要的就是从<a class="ae jt" href="https://www.anaconda.com/products/individual#windows" rel="noopener ugc nofollow" target="_blank">这里</a>下载安装程序并运行它。所有的依赖都得到了照顾。</p><h1 id="44aa" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">张量流</h1><p id="29e5" class="pw-post-body-paragraph iu iv hi iw b ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn kw jp jq jr hb bi translated"><a class="ae jt" href="https://www.tensorflow.org/" rel="noopener ugc nofollow" target="_blank"> TensorFlow </a>是Google推出的一个强大的机器学习平台。它是许多领先组织用于机器学习开发的最常用平台之一，并且易于上手。它有数以千计的机器学习算法可以作为软件包使用，因此它为用户节省了大量时间。</p><p id="6fc3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们想在GPU支持下使用TensorFlow。对于没有GPU的人，可以安装标准的TensorFlow。</p><ol class=""><li id="fd32" class="lr ls hi iw b ix iy jb jc jf lt jj lu jn lv jr lw lx ly lz bi translated"><strong class="iw hj">创建并激活虚拟环境</strong></li></ol><p id="b19d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">首先在您想要的文件夹中打开一个Anaconda提示符。您可以通过从Windows开始打开提示符，然后导航到您的文件夹来完成此操作。</p><p id="3b1b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在使用命令创建一个虚拟环境</p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="b019" class="lh jv hi ld b fi li lj l lk ll">conda create --name mygpuenv</span></pre><p id="18da" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这里，<code class="du lm ln lo ld b">mygpuenv</code>是我的虚拟环境的名称。您可以选择任何其他名称。</p><p id="3b47" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">下一步是使用命令引导这个新创建的环境</p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="bc4a" class="lh jv hi ld b fi li lj l lk ll">conda activate mygpuenv</span></pre><p id="f609" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">从现在开始，你会看到每个以<code class="du lm ln lo ld b">(mygpuenv)</code>开头的提示，直到你取消它。</p><p id="96e2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> 2。安装张量流</strong></p><p id="0036" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，我们将在这个环境中安装带有GPU支持的TensorFlow，使用命令</p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="cfc3" class="lh jv hi ld b fi li lj l lk ll">conda install -c anaconda tensorflow-gpu</span></pre><p id="598b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这一步让我安装了2.1.0版。</p><p id="522f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们需要检查python安装是否在环境中使用了<code class="du lm ln lo ld b">tensorflow-gpu</code>。为此，通过以下命令启动python提示符，然后按enter键。</p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="1e78" class="lh jv hi ld b fi li lj l lk ll">python</span></pre><p id="04da" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在键入下面这段代码，并在每一行后按enter键。</p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="994e" class="lh jv hi ld b fi li lj l lk ll">&gt;&gt;&gt; import tensorflow as tf<br/>&gt;&gt;&gt; tf.test.is_built_with_cuda()</span></pre><p id="6431" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这应该会返回<code class="du lm ln lo ld b">true</code>。</p><p id="339d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">然后，</p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="7a05" class="lh jv hi ld b fi li lj l lk ll">&gt;&gt;&gt; tf.test.is_gpu_available(cuda_only=False, min_cuda_compute_capability=None)</span></pre><p id="4f45" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在返回<code class="du lm ln lo ld b">true</code>之前，这可能会给你一些警告，但是不用担心。您的输出应该如下所示。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/6d17d889802b9512f3076b5594037fa8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HeD1jbstrTe8U7N6cuIUHA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">确保TensorFlow使用GPU</figcaption></figure><p id="c95a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">哒哒！您现在已经成功安装了cuDNN，并准备将其与TensorFlow一起使用，以加速您的机器学习模型。</p><p id="963a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在此之后，我将发布另一个帖子来演示加速。你可以在此期间尝试一下。模型或程序的任何部分都没有变化。</p><p id="b7b9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="js"> … </em></p><p id="6715" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="js">鸣谢</em> <a class="ae jt" href="https://towardsdatascience.com/@jkitson" rel="noopener" target="_blank"> <em class="js">乔安妮·麦显杰</em> </a> <em class="js">默介</em><a class="ae jt" href="https://towardsdatascience.com/installing-tensorflow-with-cuda-cudnn-and-gpu-support-on-windows-10-60693e46e781" rel="noopener" target="_blank">T22】发帖 </a> <em class="js">为所有的帮助。</em></p></div></div>    
</body>
</html>