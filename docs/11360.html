<html>
<head>
<title>Introduction To Apache Kafka</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">阿帕奇卡夫卡简介</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/introduction-to-apache-kafka-88ebd24eb962?source=collection_archive---------25-----------------------#2020-11-30">https://medium.com/analytics-vidhya/introduction-to-apache-kafka-88ebd24eb962?source=collection_archive---------25-----------------------#2020-11-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/e05f86e8ac20b8788ec8cb7e3e550276.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*593jrJJxLYy5ald8a6DW2Q.png"/></div><figcaption class="im in et er es io ip bd b be z dx translated">阿帕奇卡夫卡</figcaption></figure><p id="5bde" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">什么是阿帕奇卡夫卡？</strong></p><p id="9578" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Kafka 是一个基于发布-订阅的消息传递系统，它在进程、应用程序和服务器之间交换数据。应用程序可以连接到该系统，并将消息传送到<strong class="is hj">主题</strong>(我们稍后会看到什么是主题)，另一个应用程序可以连接到该系统，并处理来自<strong class="is hj">主题</strong>的消息。</p><h2 id="3c63" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated"><strong class="ak">什么是卡夫卡经纪人？</strong></h2><p id="07f9" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">Kafka 集群由一个或多个服务器组成，也称为<strong class="is hj"> <em class="ko"> Kafka 代理</em> </strong>，它们运行 Kafka。每个代理都用其 ID 来标识(Broker.id 属性是群集中每个节点的唯一且永久的名称)。要连接到整个集群，首先需要连接到引导服务器(也称为<strong class="is hj">引导代理</strong>)。<strong class="is hj">引导</strong> <strong class="is hj">服务器</strong>不过是用于建立到<strong class="is hj"> Kafka 集群</strong>的初始连接的主机/端口对列表。</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div class="er es kp"><img src="../Images/3455bac29552ee7dadbec1abd2d5e196.png" data-original-src="https://miro.medium.com/v2/resize:fit:1150/format:webp/1*u_whvj0A-TFGBHfuYrCiTg.png"/></div><figcaption class="im in et er es io ip bd b be z dx translated">卡夫卡集群</figcaption></figure><h2 id="21bf" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated"><strong class="ak">什么是<em class="ku">卡夫卡的主题？</em> </strong></h2><p id="e6b7" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated"><em class="ko">主题是存储和发布消息的类别/提要名称。</em></p><ul class=""><li id="a487" class="kv kw hi is b it iu ix iy jb kx jf ky jj kz jn la lb lc ld bi translated">消息是可以存储任何格式的任何对象的字节数组。</li><li id="701a" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated">所有卡夫卡的信息都被组织成主题。</li><li id="b18e" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated">如果你想发送一条信息，你可以发送给一个特定的主题；如果你想阅读一条信息，你可以阅读一个特定的主题。</li><li id="c6c7" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated"><em class="ko">生产者应用程序向主题写入数据，消费者应用程序从主题读取数据。</em></li></ul><h2 id="a84a" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated"><strong class="ak">卡夫卡主题分区看起来怎么样？</strong></h2><ul class=""><li id="0887" class="kv kw hi is b it kj ix kk jb lj jf lk jj ll jn la lb lc ld bi translated"><em class="ko">卡夫卡主题被分成若干分区，分区中包含不可改变顺序的消息。</em></li><li id="e7f5" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated"><em class="ko">分区中的每条消息由其唯一的</em> <strong class="is hj"> <em class="ko">偏移量来分配和标识。</em> </strong></li><li id="c7d5" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated"><em class="ko">主题分区是 Kafka 中的一个并行单位，即两个消费者不能同时使用来自同一个分区的消息。消费者可以同时从多个分区消费。</em></li></ul><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es lm"><img src="../Images/59a160aea3692fc1085c51875bb9a28e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5V7L4uTm_dgCSOP17FXzig.png"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated">卡夫卡隔断</figcaption></figure><p id="6545" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">卡夫卡中的复制品</strong></p><ul class=""><li id="d08f" class="kv kw hi is b it iu ix iy jb kx jf ky jj kz jn la lb lc ld bi translated"><em class="ko">在 Kafka 中，复制是在分区级别实现的。</em></li><li id="3d80" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated">主题分区的冗余单元称为副本。</li><li id="7837" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated"><em class="ko">每个分区通常有一个或多个副本，这意味着分区包含通过集群中的几个 Kafka 代理复制的消息。</em></li></ul><p id="d692" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2 个主题的示例(3 个分区和 2 个分区)</p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es lr"><img src="../Images/e466c782482cf381990df89d22d9eec5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lma0p_dkvcNpsIdZ9dClqg.png"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated">卡夫卡的复制品</figcaption></figure><p id="bc61" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">数据是分布式的，代理 3 没有任何主题 2 数据</p><h2 id="8e44" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated"><strong class="ak">分区领导者的概念</strong></h2><ul class=""><li id="3898" class="kv kw hi is b it kj ix kk jb lj jf lk jj ll jn la lb lc ld bi translated">在任何时候，只有一个代理可以成为给定分区的领导者，并且只有该领导者可以接收和提供分区的数据</li><li id="e21b" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated">其他代理将同步数据</li><li id="f1f1" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated">每个分区只有一个领导者和多个 ISR(同步复制)</li></ul><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es ls"><img src="../Images/f7b5393313161e3e8ae76b0528f2a6ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QzmGpbIR83P81h6p9NFeFQ.png"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated">领导者的概念</figcaption></figure><h2 id="ea4b" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated"><strong class="ak">消费者</strong></h2><ul class=""><li id="e34b" class="kv kw hi is b it kj ix kk jb lj jf lk jj ll jn la lb lc ld bi translated"><em class="ko">消费者可以加入一个叫做消费者团体的组织。</em></li><li id="8fea" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated"><em class="ko">组中的每个消费者被分配一组分区来消费。</em></li><li id="fefd" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated"><em class="ko"> Kafka 保证一条消息只被群体中的一个消费者阅读</em></li><li id="e51b" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated"><strong class="is hj"> <em class="ko">数据/消息</em> </strong> <em class="ko">从不推送给消费者，当消费者准备好处理消息时，消费者会要求消息。</em></li><li id="302e" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated">由于所有消息都在 Kafka 中排队，消费者永远不会因大量数据而过载或丢失任何数据。</li><li id="72a3" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated">消费者在消费者群体中阅读数据</li><li id="6312" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated">组中的每个消费者从独占分区中读取数据</li><li id="b7bf" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated">您的<em class="ko">消费者</em>不能多于<em class="ko">分区</em>(否则一些将是不活动的)</li></ul><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es lt"><img src="../Images/c516174c3230fe8407a663c2dd3bc07b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qVf7mp07ciZautbcMPBMWg.png"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated">消费者群体</figcaption></figure><h2 id="8821" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated"><strong class="ak">制片人</strong></h2><ul class=""><li id="7b9d" class="kv kw hi is b it kj ix kk jb lj jf lk jj ll jn la lb lc ld bi translated">生产者可以选择接收数据写入确认:</li><li id="acb6" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated">Acks = 0:生成器不会等待确认(可能会丢失数据)</li><li id="be80" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated">Acks = 1:生产者将等待领导者确认(有限的数据丢失)</li><li id="ac7c" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated">ack = all:Leader+副本确认(无数据丢失)</li></ul><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es lu"><img src="../Images/ce138d8ed10112b37202d0aec6bc545b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ypZaYwYC0YlXYlEwYPZmKw.png"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated">生产者</figcaption></figure><p id="4996" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里有一些你需要记住的重要概念</p><ul class=""><li id="0d9b" class="kv kw hi is b it iu ix iy jb kx jf ky jj kz jn la lb lc ld bi translated"><strong class="is hj"> <em class="ko">制作者:</em> </strong> <em class="ko">发送消息的应用程序。</em></li><li id="c810" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated"><strong class="is hj"> <em class="ko">消费者:</em> </strong> <em class="ko">接收消息的应用程序。</em></li><li id="b5bd" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated"><strong class="is hj"> <em class="ko">消息:</em> </strong> <em class="ko">通过 Apache Kafka 从生产者发送给消费者的信息。</em></li><li id="a866" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated"><strong class="is hj"> <em class="ko">连接:</em> </strong> <em class="ko">连接是您的应用程序和 Kafka 代理之间的 TCP 连接。</em></li><li id="7361" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated"><strong class="is hj"> <em class="ko">主题:</em> </strong> <em class="ko">主题是存储和发布消息的类别/提要名称。</em></li><li id="59d2" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated"><strong class="is hj"> <em class="ko">主题分区:</em> </strong> <em class="ko"> Kafka 主题被划分为多个分区，可以让你跨多个经纪人拆分数据。</em></li><li id="6071" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated"><strong class="is hj"> <em class="ko">副本</em> </strong> <em class="ko">一个分区的副本就是一个分区的“备份”。副本从不读取或写入数据。它们用于防止数据丢失。</em></li><li id="d623" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated"><strong class="is hj"> <em class="ko">消费者组:</em> </strong> <em class="ko">消费者组包括订阅特定主题的一组消费者进程。</em></li><li id="337e" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated"><strong class="is hj"> <em class="ko">偏移量:</em> </strong> <em class="ko">偏移量是一个分区内一条记录的唯一标识符。它表示用户在分区中的位置。</em></li><li id="5163" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated"><strong class="is hj"> <em class="ko">节点:</em> </strong> <em class="ko">节点是 Apache Kafka 集群中的单台计算机。</em></li><li id="49b8" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated"><strong class="is hj"> <em class="ko">集群:</em> </strong> <em class="ko">集群是一组节点即一组计算机。</em></li></ul><p id="72e5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">补充说明</strong></p><ul class=""><li id="1687" class="kv kw hi is b it iu ix iy jb kx jf ky jj kz jn la lb lc ld bi translated">动物园管理员管理经纪人(保留他们的名单)</li><li id="2820" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated">动物园管理员帮助执行分区的领导者选举。</li><li id="86d7" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated">如果有变化，动物园管理员会向卡夫卡发送通知。</li><li id="dc0d" class="kv kw hi is b it le ix lf jb lg jf lh jj li jn la lb lc ld bi translated">卡夫卡的作品离不开动物园管理员。</li></ul></div></div>    
</body>
</html>