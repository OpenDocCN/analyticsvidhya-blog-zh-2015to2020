<html>
<head>
<title>Image Manipulation with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python进行图像处理</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/image-manipulation-with-python-a689b83dd471?source=collection_archive---------10-----------------------#2019-10-07">https://medium.com/analytics-vidhya/image-manipulation-with-python-a689b83dd471?source=collection_archive---------10-----------------------#2019-10-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/6513a9e7d8b8947b84dc89f137a9f70c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*E4V6I07l__m7swERZ9oPtg.png"/></div><figcaption class="im in et er es io ip bd b be z dx translated">有些心…</figcaption></figure><p id="1b98" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你有一台不错的数码相机，或者喜欢把手机里的照片上传到Instagram、脸书或任何你喜欢的社交媒体网站，那么你会一直遇到“数字图像文件”。你可能在instagram、facebook、twitter或其他地方有自己的个人或商业账户，虽然手工编辑几张图片没什么大不了的，但同时编辑100张或1000张图片很快就会成为一项令人生畏的任务。这就是Python的图像库的用武之地。</p><p id="669f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> Pillow </strong>是第三方Python模块，用于与图片文件交互。该模块有几个功能，可以轻松地裁剪、调整和编辑图像的内容。在我们从枕头(不是睡觉的那个)开始之前🙂)，使用pip安装模块，如下所示。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="38f8" class="jx jy hi jt b fi jz ka l kb kc">pip install Pillow</span></pre><h2 id="ce2c" class="jx jy hi bd kd ke kf kg kh ki kj kk kl jb km kn ko jf kp kq kr jj ks kt ku kv bi translated"><strong class="ak">创建RGB图像</strong></h2><p id="bd12" class="pw-post-body-paragraph iq ir hi is b it kw iv iw ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn hb bi translated">让我们通过显式提供尺寸和RGB(红绿蓝)颜色值来创建一些图像。运行下面的代码片段，创建一个尺寸为200 x 200、颜色为绿色的新图像。图像将以文件名“greenImage.png”保存。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="cd43" class="jx jy hi jt b fi jz ka l kb kc">from PIL import Image<br/>im = Image.new('RGBA', (200, 200), 'green')<br/>im.save('greenImage.png')</span></pre><p id="4b2a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面是上面代码的输出。它将保存在您的工作目录中。</p><figure class="jo jp jq jr fd ij er es paragraph-image"><div class="er es lb"><img src="../Images/c41386a994e85b37bdd91d3bff525c64.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/1*LkQn8uxaxbMTa6c5wh8isw.png"/></div><figcaption class="im in et er es io ip bd b be z dx translated">greenImage.png(使用PIL生成)</figcaption></figure><h2 id="89f1" class="jx jy hi bd kd ke kf kg kh ki kj kk kl jb km kn ko jf kp kq kr jj ks kt ku kv bi translated">图像裁剪、复制和粘贴</h2><p id="e996" class="pw-post-body-paragraph iq ir hi is b it kw iv iw ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn hb bi translated">因此，这里我们有一个美丽的猫的形象，我们想从这个形象的头部部分作物。</p><figure class="jo jp jq jr fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/ca344883253f4410af9e3630a005a4aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*MLCybjQ4NifsldYii-U4hg.png"/></div><figcaption class="im in et er es io ip bd b be z dx translated">全猫形象</figcaption></figure><p id="a867" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面的代码片段将从上面的猫图像中裁剪头部。需要注意的是，裁剪参数中的前两个数字，即50、50，是裁剪的起始位置(即从屏幕的左上部分开始向下和向右测量)。因此，50，50将从屏幕左上角向下50，从屏幕左上角向右50。接下来的两个数字即175、175是新裁剪图像的宽度和高度。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="abda" class="jx jy hi jt b fi jz ka l kb kc">from PIL import Image<br/>catIm = Image.open('cat1.png')  #Open the cat image<br/>croppedIm = catIm.crop((50,50,175,175))<br/>croppedIm.save('croppedCat.png')</span></pre><p id="b439" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您将会看到下面的“croppedCat.png”图像出现在您的工作目录中。</p><figure class="jo jp jq jr fd ij er es paragraph-image"><div class="er es ld"><img src="../Images/e3beef1d3501e0307ee06b85a6a15b89.png" data-original-src="https://miro.medium.com/v2/resize:fit:250/format:webp/1*2Eh-ImEjB-bA0vv7Y_pBVQ.png"/></div><figcaption class="im in et er es io ip bd b be z dx translated">短毛猫(仍然很漂亮..)</figcaption></figure><p id="60dc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们复制并粘贴这个裁剪的图像到同一个图像上。下面的代码将把裁剪的部分复制并粘贴到原始图像上。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="a4d1" class="jx jy hi jt b fi jz ka l kb kc">from PIL import Image<br/>catIm = Image.open('cat1.png') #Open the cat image<br/>croppedIm = catIm.crop((50,50,175,175))<br/>catCopyIm = catIm.copy() #Make copy of original cat image<br/>catCopyIm.paste(croppedIm, (200,0)) #Paste the cropped portion<br/>catCopyIm.save('pasted.png')</span></pre><p id="d39d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你会得到下面的图片，猫的脸贴在原来的照片上。请注意，这个新图像是以一个新的文件名单独保存的，即“pasted.png”。这样做是为了保留原始文件。</p><figure class="jo jp jq jr fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/7f9413ab11345a8ae1ed47c1d5bb9d62.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*GyqUYz8WCelzfHqLyS4ntg.png"/></div><figcaption class="im in et er es io ip bd b be z dx translated">粘贴了裁剪图像的原始照片</figcaption></figure><h2 id="7249" class="jx jy hi bd kd ke kf kg kh ki kj kk kl jb km kn ko jf kp kq kr jj ks kt ku kv bi translated">图像拼贴</h2><p id="7e01" class="pw-post-body-paragraph iq ir hi is b it kw iv iw ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn hb bi translated">我们可以使用裁剪后的图像，并以平铺的方式粘贴到原始图像的整个宽度和高度上。下面的片段将实现这个目标。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="dc0e" class="jx jy hi jt b fi jz ka l kb kc">from PIL import Image<br/>catIm = Image.open('cat1.png') #Open the cat image<br/>croppedIm = catIm.crop((50,50,175,175))<br/>catImWidth, catImHeight = catIm.size<br/>croppedImWidth, croppedImHeight = croppedIm.size<br/>catCopyTwo = catIm.copy()<br/>for left in range(0, catImWidth, croppedImWidth):<br/>    for top in range(0, catImHeight, croppedImHeight):<br/>        catCopyTwo.paste(croppedIm, (left, top))<br/>catCopyTwo.save('tiled.png')</span></pre><p id="a8c7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上面的代码不言自明。For循环用于在原始图像的高度和宽度限制内粘贴裁剪后的图像。下面将是输出图像。</p><figure class="jo jp jq jr fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/f6f30b95604e07d68c430bad976d89e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*XVntU0zXKMh-xvhiV71yEg.png"/></div><figcaption class="im in et er es io ip bd b be z dx translated">平铺图像(“tiled.png”)</figcaption></figure><h2 id="885c" class="jx jy hi bd kd ke kf kg kh ki kj kk kl jb km kn ko jf kp kq kr jj ks kt ku kv bi translated">调整大小，旋转和翻转图像</h2><p id="d823" class="pw-post-body-paragraph iq ir hi is b it kw iv iw ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn hb bi translated">在图像对象上调用<strong class="is hj"> resize() </strong>方法，并返回指定宽度和高度的新图像<br/>对象。它接受两个整数的元组参数，表示返回图像的新宽度和高度。</p><p id="2fa4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面的代码片段会将图像大小调整为原始大小的四分之一。请注意，我们将宽度减半，高度也减半。所以我们得到原始图像大小的25%。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="7e22" class="jx jy hi jt b fi jz ka l kb kc">width, height = catIm.size<br/>quarterSizeIm = catIm.resize((int(width / 2), int(height/2)))<br/>quarterSizeIm.save('quarterSized.png')</span></pre><figure class="jo jp jq jr fd ij er es paragraph-image"><div class="er es le"><img src="../Images/a4efc478f582339babcfbbde18a0c456.png" data-original-src="https://miro.medium.com/v2/resize:fit:442/format:webp/1*SCPJfMAdy551w_sxJLGTtg.png"/></div><figcaption class="im in et er es io ip bd b be z dx translated">猫缩小到原来的25%</figcaption></figure><p id="f437" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们把猫旋转15度。下面的线将图像逆时针旋转15度。生成的图像将保存在名为“rotated6.png”的新文件中。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="eb13" class="jx jy hi jt b fi jz ka l kb kc">catIm.rotate(15).save('rotated6.png')</span></pre><figure class="jo jp jq jr fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/314260a436fb8935f590f32017146dc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*1wnGZKfUexntCK--xWcBAQ.png"/></div><figcaption class="im in et er es io ip bd b be z dx translated">逆时针旋转15度的图像</figcaption></figure><p id="9bf9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你应该已经注意到在上面的图像中(逆时针旋转15度后),图像的一部分被剪切了。如果我们保留图像的原始尺寸，这应该是显而易见的。为了得到旋转的图像而没有任何部分被裁剪，我们必须扩展尺寸以得到完整的旋转视图。这可以通过以下方式实现。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="c0e3" class="jx jy hi jt b fi jz ka l kb kc">catIm.rotate(15, expand=True).save('rotated6_expanded.png')</span></pre><p id="3192" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">得到的图像如下所示。</p><figure class="jo jp jq jr fd ij er es paragraph-image"><div class="er es lf"><img src="../Images/60ced374d23514b7dcfdb15b9e569dcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/1*2XA0KWkO1qaIREjxcHKK3A.png"/></div><figcaption class="im in et er es io ip bd b be z dx translated">逆时针旋转15度并放大的图像</figcaption></figure><p id="9c65" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后让我们<strong class="is hj">水平翻转</strong>图像。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="1c3e" class="jx jy hi jt b fi jz ka l kb kc">catIm.transpose(Image.FLIP_LEFT_RIGHT).save('horizontal_flip.png')</span></pre><p id="bec5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">哇，我们的猫图像现在是水平翻转的。</p><figure class="jo jp jq jr fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/2d6c2eaed08dd8b932013b150ddc1446.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*Rnf22qkuyLtZBFQnARTeOQ.png"/></div><figcaption class="im in et er es io ip bd b be z dx translated">图像水平翻转</figcaption></figure><p id="8028" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于垂直翻转，将直线更改如下。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="1a89" class="jx jy hi jt b fi jz ka l kb kc">catIm.transpose(Image.FLIP_TOP_BOTTOM).save('vertical_flip.png')</span></pre><p id="942a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">暂时就这样了。我希望您喜欢使用Python的图像处理库。通过一个简单的<strong class="is hj">循环</strong>，上述所有编辑方法都可以应用于100或1000或任何数量的图像。</p><p id="b5c7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在下一部分，我将会写在一个目录中的所有图片上粘贴一个<strong class="is hj">标志</strong>。</p><p id="7489" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下次再见…</p><p id="b6e3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">欢迎任何意见/建议。</p></div></div>    
</body>
</html>