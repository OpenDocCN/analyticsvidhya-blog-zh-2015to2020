<html>
<head>
<title>Evaluation Metrics for Regression Problems</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">回归问题的评估标准</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/evaluation-metrics-for-regression-problems-343c4923d922?source=collection_archive---------8-----------------------#2020-07-04">https://medium.com/analytics-vidhya/evaluation-metrics-for-regression-problems-343c4923d922?source=collection_archive---------8-----------------------#2020-07-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/0660540785caee604ee0b73d02fde7a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UKD0PD8hTMaAWnGp"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">克里斯·利维拉尼在<a class="ae hv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><div class=""/><p id="01ce" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">嗨，今天我们要学习回归问题的评估标准。评估指标非常重要，因为它们告诉我们，我们的模型有多精确。</p><p id="fdf9" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我们开始评估技术之前，获得一些直觉是很重要的。</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div class="er es jt"><img src="../Images/957a4665704f7f63bf21ada65686129c.png" data-original-src="https://miro.medium.com/v2/resize:fit:546/format:webp/1*N5VbEivQKlG6p3solJkejg.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">线性回归</figcaption></figure><p id="02c5" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在上图中，我们可以看到我们绘制了一条线性曲线，但是这条曲线并不完美，因为有些点位于直线之上，有些点位于直线之下。</p><p id="cdb8" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">那么，我们的模型有多精确呢？</p><p id="2779" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">评估指标旨在解决这些问题。现在，不浪费时间，让我们跳到评估指标&amp;看看评估技术。</p><p id="c4a5" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有6种评估技术:</p><p id="2c11" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">1.平均绝对误差</p><p id="dfb4" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.均方差</p><p id="02b3" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.均方根误差</p><p id="8d71" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">4.均方根对数误差</p><p id="320f" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">5.r平方</p><p id="25c3" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">6.调整后的R平方</p><p id="77f4" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，让我们逐一讨论这些技术。</p><h2 id="d166" class="jy jz hy bd ka kb kc kd ke kf kg kh ki jg kj kk kl jk km kn ko jo kp kq kr ks bi translated">米（meter的缩写））平均绝对误差</h2><p id="f82a" class="pw-post-body-paragraph iv iw hy ix b iy kt ja jb jc ku je jf jg kv ji jj jk kw jm jn jo kx jq jr js hb bi translated">这是最简单也是最广泛使用的评估技术。它只是实际值和预测值之差的平均值。</p><p id="c6ea" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面，是平均绝对误差的数学公式。</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div class="er es ky"><img src="../Images/2040733fce8f1e76a5dac715b569f870.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/format:webp/1*Z6lLZBRCwsMZWVvrY7-HYQ.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">绝对平均误差</figcaption></figure><p id="8b45" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Scikit-Learn是一个很棒的库，因为它几乎拥有我们在数据科学之旅中需要的所有内置函数。</p><p id="0989" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面是实现平均绝对误差的代码</p><pre class="ju jv jw jx fd kz la lb lc aw ld bi"><span id="e5d4" class="jy jz hy la b fi le lf l lg lh">from sklearn.metrics import mean_absolute_error</span><span id="c3e2" class="jy jz hy la b fi li lf l lg lh">mean_absolute_error(y_true, y_pred)</span></pre><p id="d84e" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里，“y_true”是真实目标值，而“y_pred”是预测目标值。</p><h1 id="fbfb" class="lj jz hy bd ka lk ll lm ke ln lo lp ki lq lr ls kl lt lu lv ko lw lx ly kr lz bi translated">米（meter的缩写））均方差</h1><p id="fb6e" class="pw-post-body-paragraph iv iw hy ix b iy kt ja jb jc ku je jf jg kv ji jj jk kw jm jn jo kx jq jr js hb bi translated">另一种评估技术是均方误差。它取误差平方的平均值。这里，误差是实际值和预测值的差值。</p><p id="1d2c" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面是均方差的数学公式。</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div class="er es ma"><img src="../Images/7eeff422f6b3a4ebc116899bdaf8b7fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/1*N7ePRPE4tdyCMAeBjilKZw.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">均方误差</figcaption></figure><p id="7e30" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我敢肯定，在看了上面的数学函数后，你会想到实现。但是，不要担心，有一个内置的函数叫做‘均方误差’。</p><p id="407c" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面是代码:</p><pre class="ju jv jw jx fd kz la lb lc aw ld bi"><span id="3ccd" class="jy jz hy la b fi le lf l lg lh">from sklearn.metrics import mean_squared_error</span><span id="dc47" class="jy jz hy la b fi li lf l lg lh">mean_squared_error(y_true,y_pred)</span></pre><p id="d684" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里，y_true是真实值&amp; y_pred是预测值。</p><p id="0b6d" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">上述函数的一个问题是它改变了单位。为了避免这个问题，我们将使用另一种技术，称为均方根误差</p><h1 id="0785" class="lj jz hy bd ka lk ll lm ke ln lo lp ki lq lr ls kl lt lu lv ko lw lx ly kr lz bi translated">R.均方根误差</h1><p id="114f" class="pw-post-body-paragraph iv iw hy ix b iy kt ja jb jc ku je jf jg kv ji jj jk kw jm jn jo kx jq jr js hb bi translated">均方根误差是目前正在使用的另一种技术。首先，它解决了上述技术中的问题。</p><p id="8008" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它求误差的平方，然后求总平均函数的平方根。下面是数学函数，它将使事情变得更清楚。</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div class="er es mb"><img src="../Images/ffd9ee06be0c408cd77a117e5d7956be.png" data-original-src="https://miro.medium.com/v2/resize:fit:780/format:webp/1*TmvRf8TreKqULbCVP8CggA.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">均方根误差</figcaption></figure><p id="6199" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面是计算均方根误差的代码。</p><pre class="ju jv jw jx fd kz la lb lc aw ld bi"><span id="529a" class="jy jz hy la b fi le lf l lg lh">from sklearn.metrics import mean_squared_error</span><span id="835f" class="jy jz hy la b fi li lf l lg lh">import numpy as np</span><span id="b82e" class="jy jz hy la b fi li lf l lg lh">mse = mean_squared_error(y_true,y_pred)</span><span id="cc13" class="jy jz hy la b fi li lf l lg lh">rmse = np.sqrt(mse)</span></pre><p id="8fe8" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这里，你可以看到，我们没有任何特殊的函数来计算RMSE，而是使用MSE，取它的平方根。</p><p id="362d" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但是等等，这种方法是有局限性的。</p><p id="2efa" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们看下面的例子。</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div class="er es mc"><img src="../Images/eaa3a3de9a209dc1cfc07d15ec41d8e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1338/format:webp/1*lUd15QBcvTwonK5cSbrXbQ.png"/></div></figure><p id="6d36" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在例1中，我们可以看到误差非常大。实际值是1 &amp;预测值是401。</p><p id="f6dd" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在示例2中，我们可以看到，如果我们将实际值与预测值进行比较，预测值给出了一个不错的结果。</p><p id="9d07" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于例1和例2，误差是400，但实际上，例2中的ML模型给出了更好的结果。但是，根据RMSE的说法，错误是一样的。</p><p id="fccf" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，为了解决这个问题，我们使用了另一种类似但经过修改的方法，这将在下面讨论。</p><h2 id="cb40" class="jy jz hy bd ka kb kc kd ke kf kg kh ki jg kj kk kl jk km kn ko jo kp kq kr ks bi translated">R.均方根对数误差</h2><p id="0493" class="pw-post-body-paragraph iv iw hy ix b iy kt ja jb jc ku je jf jg kv ji jj jk kw jm jn jo kx jq jr js hb bi translated">这项技术的数学功能如下所示。</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div class="er es md"><img src="../Images/23cb3bb2c60850efd80a79951d6920d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:746/format:webp/1*71HMarZJjAVXNeXbxzF2cA.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">均方根对数误差</figcaption></figure><p id="5b08" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，如果我们以RMSLE中的上述情况为例，那么，例1的RMSLE大于例2。因此，RMSLE解决了发生在RMSE的问题(均方根误差)</p><p id="c364" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这种方法实际上缩小了值&amp;因此，它避免了上述错误。</p><p id="0a6b" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面是实现它的代码</p><pre class="ju jv jw jx fd kz la lb lc aw ld bi"><span id="0271" class="jy jz hy la b fi le lf l lg lh">from sklearn.metrics import mean_squared_log_error</span><span id="c3c0" class="jy jz hy la b fi li lf l lg lh">np.sqrt(mean_squared_log_error( y_true, predictions ))</span></pre><p id="2b42" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里，“y_true”是实际的目标变量，而“predictions”是预测的目标变量。</p><h2 id="bcfb" class="jy jz hy bd ka kb kc kd ke kf kg kh ki jg kj kk kl jk km kn ko jo kp kq kr ks bi translated">r平方</h2><p id="a4ee" class="pw-post-body-paragraph iv iw hy ix b iy kt ja jb jc ku je jf jg kv ji jj jk kw jm jn jo kx jq jr js hb bi translated">现在，我们来看另一种称为R平方的技术，其实际名称是相对平方误差。</p><p id="ebb9" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这种方法有助于我们计算相对误差。这项技术有助于我们根据它们的均方误差来判断哪种算法更好。</p><p id="22ed" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">R平方方法的数学公式如下。</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div class="er es me"><img src="../Images/bf7af67d58718369d7d9e57ee994b6b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:410/format:webp/1*44ERGRBGlc0xzol1Qm4JPg.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">r平方</figcaption></figure><p id="26f6" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果x &gt;1，这意味着分子的MSE大于基线模型的MSE，这又意味着新模型比基线模型差。</p><p id="5be4" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">R的平方越高，模型越好。</p><p id="7b0c" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面是实现R平方评估技术的代码</p><pre class="ju jv jw jx fd kz la lb lc aw ld bi"><span id="c71e" class="jy jz hy la b fi le lf l lg lh">from sklearn.metrics import r2_score</span><span id="b3cc" class="jy jz hy la b fi li lf l lg lh">sklearn.metrics.<strong class="la hz">r2_score</strong>(<em class="mf">y_true</em>, <em class="mf">y_pred)</em></span></pre><p id="71ef" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里，“y_true”是真实的目标变量，而“y_pred”是预测的目标变量</p><p id="9d2f" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">看完，看完上面那一段，你可能真的会对这些评价指标印象深刻。但是等等，这种技术是有局限性的。</p><p id="b502" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">局限性在于，添加更多要素后，R平方值要么增加，要么不变。不管特征如何影响模型。</p><p id="d43b" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了克服这一限制，有另一种称为调整的R-平方的评估技术，这将在下面讨论。</p><h2 id="b31a" class="jy jz hy bd ka kb kc kd ke kf kg kh ki jg kj kk kl jk km kn ko jo kp kq kr ks bi translated">调整后的R平方</h2><p id="6743" class="pw-post-body-paragraph iv iw hy ix b iy kt ja jb jc ku je jf jg kv ji jj jk kw jm jn jo kx jq jr js hb bi translated">数学公式如下所示。</p><figure class="ju jv jw jx fd hk er es paragraph-image"><div class="er es mg"><img src="../Images/6af0715e09cf0604ba73e591eaed2ffd.png" data-original-src="https://miro.medium.com/v2/resize:fit:470/format:webp/1*e5a9s56L772JteF11jJB5g.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">调整后的R平方</figcaption></figure><p id="6fa1" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里，n:样本数&amp; k:特征数。</p><p id="9f6c" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">scikit上没有内置函数——学习计算调整后的R平方，但我们可以找到R平方&amp;只需计算调整后的R平方。</p></div><div class="ab cl mh mi gp mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="hb hc hd he hf"><p id="03cf" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">好了，以上是回归问题最常用的6个评估指标。</p><p id="4c5b" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但是，在模型训练之前有很多因素要做，如数据清洗、数据可视化、数据分析、缺失值处理、异常值处理等。</p><p id="dcd8" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在不久的将来，我会就所有这些话题发表博客，在此之前敬请关注。</p></div></div>    
</body>
</html>