# 数据科学家的良好软件工程实践

> 原文：<https://medium.com/analytics-vidhya/good-software-engineering-practices-for-data-scientists-7c2c42ed35c0?source=collection_archive---------13----------------------->

![](img/3230310926d1cfaa374249c57792ee21.png)

照片由[克里斯蒂娜@ wocintechchat.com](https://unsplash.com/@wocintechchat?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)在 [Unsplash](https://unsplash.com/s/photos/software-engineer?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄

每个人的编码都不一样。对于你必须如何处理一个问题，你应该如何实现它，没有硬性的规则，但是有一些特定的标准。通常，您将在一个团队中工作，或者可能在一个开源项目中工作，在那里许多其他人将与您一起工作在同一个程序中。您的代码甚至可以用作生产代码。所以需要有一定的标准来遵循。

数据科学家可能来自不同的背景。例如，我的背景与编程毫无关系。因此，在与其他软件工程师一起工作时，您可能需要采用一些常见的编码实践，这些实践可以帮助您成为更好的开发人员，并与他人合作愉快。在本文中，我将讨论一些常见的做法。

# 干净的代码

干净的代码意味着可读、简单和简洁的代码。这对于软件开发中的协作和可维护性至关重要。简单、简洁的代码让别人更容易理解你实现的逻辑。如果你把它变得不必要的复杂，那么当你在你的代码中搜索可能的错误或改进时，甚至你也不能理解发生了什么。以此为例，

> “你和我不再进行口头交谈”

如果我说，这个句子会更有意义，

> “我们不再说话了”

简单的代码让每个人的生活变得简单。这里有一些编写干净代码的技巧，

*   **使用描述性名称:**不要使用单个字母作为名称，如`a`、`b`、`c`等。用`student`、`subject`、`grade`之类的。有前缀如`is_`、`has_`表示条件句，如`is_graduating`、`has_passed`等。使用动词表示类似`change_grade()`的功能。请注意，在特殊情况下使用单字母名称有时是可以接受的，如`x`、`y`代表自变量或因变量(在数学中广泛用作变量名)、`n`代表事物的数量等。
*   **不要用太长的名字来描述！:**具有描述性，但不要像`is_the_student_graduating_in_this_term`那样使用过多的描述。这将使你的代码变得繁琐。
*   **一致但区分清楚:** `student`和`students`容易混淆和搞错。使用`student_list`代替`students`，这样更容易区分和阅读。
*   **不要使用缩写:**如果你的变量或函数所引用的术语有广为人知的缩写，那么你可以使用它。比如`CGPA`就可以用，因为大家都知道它的意思。但是`BRB`可能不是每个人都能识别的，所以要避免使用这类缩写。数据科学中的一些术语在数据科学家中可能是众所周知的，因此您可能希望使用缩写。但是您团队中的其他工程师可能不熟悉这个术语。在这种情况下，使用描述性的名称，以便他们更容易使用。
*   **适当使用空格:**如果你是 python 程序员，你应该已经知道 python 强调代码的良好可读性。与大多数其他语言不同，它不使用括号来表示代码块，而是使用空格！所以你可以看到空白是如何让你的代码更容易阅读的。除了使用四个空格进行缩进，还可以使用空行来分隔代码的各个部分。这使得滚动代码更加容易。参见下面的示例代码。还要将每行代码限制在 79 个字符以内(这是 [PEP 8 风格指南](https://www.python.org/dev/peps/pep-0008/?#code-lay-out)中的指导方针)。许多代码编辑器显示一条垂直线来表示 79 个字符的长度。如果您没有看到，您可以从设置中打开它。

# 模块化代码

模块化代码意味着代码在逻辑上被分解成功能和模块。它允许你快速找到相关的代码片段，这有助于理解程序并重用它们。编写模块化代码的一些技巧，

*   **不要重复:**如果你发现自己多次使用相同类型的任务，创建一个函数或使用循环。这不仅会减少代码的重复性，还会增加可读性。

*   **最小化实体(函数，类)的数量:**过度模块化你的代码是有可能的。为一切创造功能并不总是意味着更好。如果您希望一组逻辑只使用一次，那么就没有必要为此定义一个函数，而是使用内联逻辑。创建不必要数量的函数或模块会让你在阅读代码时到处乱跳，以理解它的逻辑。所以，只有在必要的时候才使用函数或类。
*   功能应该做一件事:你的功能应该致力于完成一项特定的任务。如果你的函数名包含“and ”,那就意味着你需要重构你的代码。例如，`change_grade_and_find_position()`应该被重构为两个不同的函数`change_grade()`和`find_position()`。这使得您的函数更容易通用化和重用。
*   **使用模块:**如果你在几个文件中使用了几个函数或类，试着将它们写在一个单独的文件中，并在需要的地方将它们导入到其他文件中。这使得你的代码简短，易于维护和重用。

# 重构

在解决一个问题的开始，你可能倾向于只关注让事情运转起来，而不是很好地组织它们。是的，没关系。但是一旦你让它工作，在你开始部署你的代码之前，花一点时间来组织它，使它变得漂亮、干净和模块化。这就是所谓的重构。重构意味着在不改变外部功能的情况下，重新构建代码以改善其内部结构。比起继续下一个特性，花时间重新安排已经运行的代码似乎是浪费时间，但是从长远来看，这有助于你。它将帮助您在将来维护您的代码并重用它。通过练习重构，你很快就会有一种编写有组织代码的直觉，然后你会发现你甚至在第一次尝试时就在编写有组织的代码！所以会帮助你以后成为更好的开发者。

# 高效代码

可以通过两种方式提高编码效率。通过减少它需要执行的时间和减少它需要的存储空间。然而，这些因素的重要性取决于应用。例如，在自动驾驶汽车中，驾驶时的道路分析应该尽可能快地发生，而可能每月发生一次的系统更新可能容忍更长的执行时间。

为了使代码更有效，您需要尝试不同的方法。尝试通过用矢量化实现替换循环来减少代码中的循环数量。有时，甚至使用内置数据结构也可能比矢量化实现更快地完成一些任务。

你如何找到最好的方法？谷歌和 Stackoverflow！

下面我给你举个例子。比方说，我有两个项目数组，想找出它们之间的公共项目。以下是我尝试解决这个问题的三种方法。

*   第一种直观的方法使用两个 for 循环。一个 for 循环遍历第一个列表中的项目，对于每个项目，第二个 for 循环遍历第二个列表中的项目，并比较这两个项目以找到共同的项目(下面给出了代码)。
*   第二个解决方案使用 Numpy，这是我的 python 库，用于矢量化实现。(代码如下)
*   如果没有人告诉我，第三个解决方案要快得多，我可能永远也想不到。它利用 python 的内置对象类型“set”。

我建议您自己运行代码，看看有什么不同。

# 证明文件

你有没有这样的经历:花了这么多精力编写一个程序，但是几个月后，你决定检查你的代码，然后，你的代码中没有任何东西对你有意义？就像是别人写的代码？我敢打赌。这就是文档很重要的原因。文档是代码中附带或嵌入的文本。文档有助于阐明代码的复杂部分，并向他人(可能还有未来的您)描述代码中特定组件的用途或目的。)

您可以在代码中添加三种类型的文档——行级文档(也称为行注释中的文档)、函数或模块级文档以及项目级文档。

*   **行级文档:**行注释或行级文档有助于描述代码的步骤。它帮助其他人理解你的代码中发生了什么，而不需要深入理解所有的功能或逻辑。但是要小心，如果你的代码过于依赖注释来使其易于理解，那么这可能是糟糕的编码实践的标志。考虑重构。不同的编程语言使用不同的符号来编写注释。Python 使用散列符号(#)作为注释，JavaScript 使用双斜杠(//)。例如，在我之前的代码要点中，你可以看到我使用了几个行内注释。
*   **函数或模块级文档**:**python 中的 Docstring 用作函数或模块级文档。它主要用于提供关于函数或模块的有价值的信息。它用在函数或模块的开头。通常它描述函数的目的，解释函数的参数，它返回什么等等。不过这都是可选的。Docstring 写在三个引号内(单引号或双引号都有效)。这里有一个例子。**

*   ****项目级文档:**项目级文档用于向他人描述您的项目。它解释了你的程序做什么，如何使用它，以及任何人理解如何使你的项目工作所需的一切。自述文件是包含项目文档的好方法。如果你去 GitHub 查看任何一个开源项目，你首先要找的可能是自述文件。没有适当的项目文档，没有人可以使用你的应用程序或包，因为他们不知道如何使用。因此，在你的项目中一定要包含一个自述文件，至少要描述你的项目是做什么的，它的依赖关系和足够的使用说明。在 GitHub 中查看任何流行的开源项目，首先，这里是 GitHub 上[熊猫](https://github.com/pandas-dev/pandas)库的链接。**

# **版本控制**

**版本控制值得单独的一篇文章来解释它的重要性。什么是版本控制？举个例子，在电子游戏中，当你到达某个阶段时，你保存你的游戏。在选择一个冒险的决定或尝试一些愚蠢的事情之前，你保存你的进步，这样你就可以在毁掉你的职业生涯后回来，假装什么都没发生。版本控制系统允许你为你的编码项目这样做。您可以在几个“检查点”上“保存”您的进度，如果一些实验失败了，您可以将您的项目重置回您保存的检查点。没有它，你的整个项目可能会毁了，你可能需要从头开始，这是不太实际的。**

**这在数据科学中非常重要。例如，在机器学习或深度学习中，我们尝试了许多超参数来找到最佳参数，并希望我们中了头彩！使用版本控制系统，您可以根据需要多次试验不同的配置，并使用提交消息保存所有的配置，提交消息中会提到性能分数。然后当你完成实验时，你可以检查你的提交列表，看看在你所有的实验中什么是最好的分数。然后，您返回到该检查点，并将该配置用于生产。**

**还有许多其他版本控制的用例。我不能把它们都放在这里。如果你想开始，但不熟悉任何版本控制系统， [*版本控制与 Git*](https://www.udacity.com/course/version-control-with-git--ud123) 是一个很好的免费在线课程，我可以从 Udacity 推荐，它给了我很大的帮助。**

# **测试**

**编写测试是软件工程中的标准实践，但许多数据科学家通常对此并不熟悉。但是测试对于数据科学来说尤其重要。因为数据科学的问题在运行时不容易被发现。在其他软件中，如果出现问题，它会崩溃或显示非预期的行为。所以你马上就知道有问题，并能解决它。但是数据科学中的错误不容易被发现。它可以相当顺利地运行，并给你看起来令人满意的结果。但是在幕后，一些特性或值可能会被不恰当地使用，被错误地解释，或者被以不同于需要的方式处理。这就是为什么测试您的实现非常重要，这样您就不会根据错误的数据解释得出的结果做出业务决策。**

**测试驱动开发(TDD)是一个开发过程，在这个过程中，您甚至可以在编写代码来完成任务之前编写测试。您可以实现两种类型的测试—单元测试和集成测试。**

**假设您已经实现了一个将城市名和州名从用户输入的字符串中分离出来的函数。单元测试将用于测试您实现的功能是否给出了预期的结果。您将针对各种场景和边缘情况测试该函数。单元测试是独立的孤立测试，不依赖于任何其他功能、数据库、API 或其他资源。你应该用纯 python 写它们。另一方面，集成测试测试程序中的所有部分是否相互正常工作。**

**在测试驱动开发中，你首先为不同的场景和边缘情况编写测试函数。然后你开始实现你的代码，并用测试来检查它。一旦您的实现通过了所有的测试，那么您就知道您的实现是正确的，您可以继续下一部分。TDD 是一个广泛的话题，我鼓励您对此进行一些研究。你也可以[查看这篇文章](https://engineering.pivotal.io/post/test-driven-development-for-data-science/)来获得更详细的讨论。**

# **记录**

**日志记录是一个有价值的工具，它记录了运行程序时发生的事件和错误。假设你的程序在你不在的时候崩溃了或者产生了意想不到的结果，现在你想调试这个问题。您需要知道当错误发生时您的程序试图做什么，或者它面临什么类型的错误。如果你使用日志记录，你可以找到所有的答案。Python 为此内置了一个名为 *'* [*日志*](https://docs.python.org/3.8/library/logging.html) *'* 的库。**

**以下是使用正确日志消息的一些提示。**

*   **专业点。避免记录诸如“嗯，出了点问题”、“出了点问题！”。**
*   **使用正常的大写和简洁的信息。不要让信息太长或太短。**
*   **有几种日志记录级别可用于日志消息，以指示消息的类型。例如，严重、错误、警告、信息等。正确使用它们。**
*   **提供有用的信息。“加载文件失败”不能提供足够的信息，请使用“加载文件失败 123”。**

# **结论**

**我在本文中讨论的技术不是一些强制性的规则，而是一个指导原则。如果你不遵循它们，你的程序就不会中断。但是如果你真的遵循它们，你的生活会变得更容易。此外，不同的团队和项目可能遵循不同的标准。作为一名优秀的团队成员，你必须遵循你的团队所遵循的标准，这一点很重要。本文中讨论的标准是由来自 AWS 和 Udacity 的数据科学家在 AWS 机器学习基础课程的课程中提出的。**