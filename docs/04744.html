<html>
<head>
<title>Socket Programming in Java</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Java中的套接字编程</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/socket-programming-in-java-75918f7e99bf?source=collection_archive---------20-----------------------#2020-03-30">https://medium.com/analytics-vidhya/socket-programming-in-java-75918f7e99bf?source=collection_archive---------20-----------------------#2020-03-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="e5c1" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用您的java应用程序与外部世界建立联系。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/b9e01aeabe291065411ac233cca8cf95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*waSwMn_v_mzAFEAn"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">克里斯蒂安·威迪格在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="005a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">你好，在这篇博文中，我将解释你机器上的java程序是如何接触到另一台机器上运行的程序的。</p><p id="4376" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">为了让你通过这一点，我要开发简单的客户端和服务器程序。我会让他们互相交流。对于所有这些客户端-服务器连接，我需要套接字。这是一个快速的概述，给你一个简单的概念。让我们开始吧。</p><p id="ea0d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">首先让我们考虑客户。对于客户端程序，我们要做三件事。</p><ol class=""><li id="3c96" class="kk kl hi jq b jr js ju jv jx km kb kn kf ko kj kp kq kr ks bi translated">如何在客户端和服务器端建立初始的<strong class="jq hj">连接</strong>。</li><li id="1d5d" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">如何<strong class="jq hj">向服务器发送</strong>消息。</li><li id="98a7" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">如何<strong class="jq hj">接收来自服务器的</strong>消息。</li></ol><p id="78cf" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">为了与服务器建立连接，我们需要一个套接字连接。套接字表示java.net.Socket类附带的对象。它用于表示两台机器之间的网络连接。要创建这个套接字对象，我们需要机器的IP地址和TCP端口号。IP地址标识计算机网络上使用互联网协议进行通信的主机/计算机，端口是通信端点。操作系统中的每个进程都有一个特定的端口号。因为从0到1023的端口号是为众所周知的服务保留的，例如HTTP、FTP、POP3、Telnet等，所以我们可以为我们的程序使用1024到65535之间的任何其他端口号。</p><p id="8ef7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"><em class="ky">Socket client Socket = new Socket(" 127 . 0 . 0 . 1 "，5000)；</em>T13】</strong></p><p id="46f5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">为了向服务器发送数据，客户端必须向服务器提供输出。我们使用PrintWriter将数据写入套接字。</p><p id="9e61" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"><em class="ky">PrintWriter writer = new PrintWriter(client socket . get output stream())；</em> </strong></p><p id="5fd1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> <em class="ky"> writer.println("你好服务器！");</em> </strong></p><p id="24fe" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> <em class="ky">打版("你好！");</em>T25】</strong></p><p id="470a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">为了从套接字接收数据，使用了BufferedReader。数据是客户端的输入。</p><p id="33b4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"><em class="ky">InputStreamReader stream = new InputStreamReader(client socket . getinputstream())；</em>T29】</strong></p><p id="f9fa" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"><em class="ky">buffered reader reader = new buffered reader(stream)；</em> </strong></p><p id="0681" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"><em class="ky">String message = reader . readline()；</em> </strong></p><p id="6df7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在让我们考虑服务器。</p><p id="1c4a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">以上3项任务也适用于服务器。但是当我们考虑服务器套接字时，这是有区别的。当客户端向服务器发出连接请求时，服务器接受连接。接受后，服务器获得一个绑定到不同端口的新套接字。它需要一个新的套接字(这意味着一个不同的端口号)，因为服务器需要具有原始端口号的原始套接字来侦听新的客户端请求，同时向已经连接的客户端提供服务。Java中的ServerSocket类中的accept()方法用于此目的。它在不同的端口上返回一个新的套接字，以便与已经连接的客户端进行通信。</p><p id="3fb9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"><em class="ky">server socket server = new server socket(5000)；</em>T3】</strong></p><p id="d4b9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">T5】Socket new Socket = server . accept()； </strong></p><p id="dadc" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">所以让我们编写一个简单的服务器和一个简单的客户端。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kz"><img src="../Images/6e6a70d7a85fbc5b12abd7f60ac239c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*doNpL_xLqsXAswR6WMh4iA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">Java中的服务器程序</figcaption></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es la"><img src="../Images/3edf15e82f023dea54b4c7b84fbfb0c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5HF_e4rBg8nOnlhWsMPE-Q.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">Java客户端程序</figcaption></figure><p id="9b97" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">首先运行服务器程序，然后运行客户端程序。这里，服务器程序不仅可以服务于一个客户端，因为我已经将代码包含在一个永久循环中。否则，在一个客户端连接到服务器后，服务器不会创建新的套接字。在服务器服务2个客户端后，您可以得到如下输出。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lb"><img src="../Images/99508037cb7d00ce748ca875cc5b1205.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/1*ZXyLomFyaeL_79g7pT2Biw.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">服务器程序的输出</figcaption></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lc"><img src="../Images/e6911788cf251b6c7b6577c35b44080c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*R2m69ZwH9vf1eBCAEEDnlA.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">客户端程序的输出</figcaption></figure><p id="8f61" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这篇博客文章涵盖了Java套接字编程的基础，我希望这篇文章能帮助你很好地理解它。</p><p id="6e05" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">编码快乐！</p></div></div>    
</body>
</html>