<html>
<head>
<title>Todolist- Typescript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Todolist- Typescript</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/todolist-typescript-67a324604cb5?source=collection_archive---------2-----------------------#2020-12-31">https://medium.com/analytics-vidhya/todolist-typescript-67a324604cb5?source=collection_archive---------2-----------------------#2020-12-31</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/a96d2a9600bb3d27ac17710ba29ab3d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TPY4we9HNx6Os6RE5ajfMw.jpeg"/></div></div></figure><p id="6f49" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在这篇文章中，让我们使用typescript构建一个简单的TodoList。</p><p id="27cf" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">让我们通过使用面向对象的方法使这个构建变得有趣和令人惊奇。</p></div><div class="ab cl jn jo go jp" role="separator"><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js"/></div><div class="ha hb hc hd he"><h1 id="5d90" class="ju jv hh bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated"><em class="ks">文件夹结构</em></h1><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="78be" class="lc jv hh ky b fi ld le l lf lg">|index.html<br/>+\---dist<br/>+\---src<br/>        app.ts</span></pre><p id="0a62" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">创建两个文件夹dist和src。在src文件夹中创建类型脚本文件app.ts。</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lh"><img src="../Images/3bc73eebbadcafd4d6ea7d0c769507bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*ZTNR9y32qrbmR7PBwYkP3g.png"/></div></div></figure><p id="905c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">上面的命令创建了一个package.json文件。</p><p id="96e5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Lite-server是一个轻量级开发服务器，它服务于一个web应用程序，在浏览器中打开它，并在对源代码进行HTML或JavaScript更改时刷新页面</p><p id="acbc" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在package.json文件中</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div class="er es li"><img src="../Images/c82b57b9d419da54574270c4c29eb73f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1092/format:webp/1*jlsCIKn-Caar5kOURhfa-A.png"/></div></figure><p id="369e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">是时候创建tsconfig json文件了。</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div class="er es lj"><img src="../Images/e6165361f33151993a5b175c2901f606.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*QFAnsB52WFDTYyMgSIWGPg.png"/></div></figure><p id="5d87" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">上面的命令创建了一个tsconfig.json文件。您需要在tsconfig文件中包含基本选项</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="06c2" class="lc jv hh ky b fi ld le l lf lg">“target”: “es6”,</span><span id="821f" class="lc jv hh ky b fi lk le l lf lg">“module”: “commonjs”,</span><span id="993d" class="lc jv hh ky b fi lk le l lf lg">“lib”: [“dom”,es6”,“dom.iterable”,“scripthost”],</span><span id="24ce" class="lc jv hh ky b fi lk le l lf lg">"outDir": "./dist",                      </span><span id="90ed" class="lc jv hh ky b fi lk le l lf lg">"rootDir": "./src",</span></pre><p id="5b53" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">当我们运行typescript文件时，编译器将检查src文件夹中的typescript文件，然后将其转换为JavaScript文件，该文件将存储在dist文件夹中。</p><p id="4486" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">运行typescript文件:</p><pre class="kt ku kv kw fd kx ky kz la aw lb bi"><span id="2953" class="lc jv hh ky b fi ld le l lf lg">tsc -w</span></pre><p id="28c5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">上面的命令在dist文件夹中创建app.js文件</p><p id="7989" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">基本index.html</p><figure class="kt ku kv kw fd ii"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="aa28" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">HTML文件包含用于提交待办事项列表的form标签，用于显示待办事项列表的ul和li标签。</p><p id="c605" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">作为第一步，让我们创建一个TodoInput类。它的功能包括获取用户输入，验证用户输入和添加待办事项到列表中。</p><figure class="kt ku kv kw fd ii"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="7f40" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">创建了两个变量，它们被初始化为预定义的Typescript类型。Typescript不知道document.querySelector的结果，因此它存储为null。因此，我们无法访问它的属性。为了避免这种情况，我们使用“！”告诉TypeScript该元素存在于HTML中，它永远不会导致null。“as”用于类型转换，因此存储的最终值将是一个HTML元素。创建一个提交方法来处理用户输入。</p><p id="b9bd" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在接下来的步骤中，我们将为用户输入创建一个简单的验证</p><figure class="kt ku kv kw fd ii"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="9de6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在这里，我通过创建接口对象实现了一个简单的验证，其中文本必须是一个字符串，最小长度必须是一个可选字段的数字。名为validate的函数在条件满足时返回true，否则返回false。</p><p id="d9b4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在TodoInput类中创建了一个新的方法validation，并调用了validate函数。如果validate函数返回false，我们将显示一条警告消息并返回undefined，否则它将返回todoInput值</p><p id="1f8d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">上述方法返回一个todoInput值。我们需要将这个值存储在全局范围内，这样我们就可以在任何地方对其进行编辑和删除。我认为这个过程是有意义的。让我们创建一个AppState类，它在整个应用程序中持久保存数据。</p><figure class="kt ku kv kw fd ii"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="da29" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">创建todos变量，该变量存储所有todo项目的列表。我们还可以为AppState实例化一个对象，而不是使用静态方法，这样我们就可以在其他类中使用它。创建addTodo方法，将todoItem推送到todos。</p><p id="2728" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">getter和setter用于访问和修改todo项。</p><p id="e030" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在是时候在todos数组中添加todo项了。在TodoInput中，我们在submitHandler上添加了以下代码</p><figure class="kt ku kv kw fd ii"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="ce56" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">提交处理程序后，我们需要清除输入。TodoInput类的最终代码。</p><figure class="kt ku kv kw fd ii"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="52b5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们已经向todos(AppState中的变量)添加了todo项。是时候显示所有待办事项列表了。这里我们创建了两个类TodoItem和TodoList。</p><p id="0789" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在TodoList类中，我们通过实例化TodoItem类来遍历todos数组。在TodoItem类中，我们创建了一个列表并将文本内容添加到html中。</p><figure class="kt ku kv kw fd ii"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="468d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在我们需要在TodoList中创建列表，并在todos(AppState类中的变量)中添加编辑和删除todo等功能</p><figure class="kt ku kv kw fd ii"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="8ce3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">TodoItem构造函数从TodoList接收id、todoInput和todoItems。上面的代码很长，但是如果我们仔细阅读，它可以完成简单的任务。我们正在提取模板标签(包含li，编辑和删除按钮)的子标签，并将其附加到ul标签。对于每个todo项，我们都创建了一个附加和显示方法。在attach方法中，我们创建了一个li标签并将其附加到ul标签上。在显示方法中，我们添加了文本(todo项),然后提供todoId作为编辑和删除按钮的Id。使用这个id，我们可以很容易地删除和编辑待办事项。(按钮id包含相应待办事项的id)</p><p id="d92d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">删除todo-当单击删除按钮时，我们可以通过选择删除按钮来获得todo并访问其Id。在获得todoId之后，我们通过使用AppState类中提供的get方法来获得todos列表(appState类)。Todos数组被过滤，并通过使用setter进行设置，setter更改todos(AppState中的变量)数组。</p><p id="eff9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">edit todo-访问todoId，将其值设置为input标记，并删除相应的todo项。</p><p id="761d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在我们遇到了一个问题。当我们将todo项添加到todos数组(AppState中的变量)时，todos数组会得到更新，但UI不会呈现。这是因为当我们添加todo时，我们并没有重新呈现todoList。为了解决这个问题，我们需要在两个地方实例化todoList。一个在addTodo方法中，另一个在setter方法中(因为我们正在set方法中进行修改(todos数组)以进行编辑和删除)</p><figure class="kt ku kv kw fd ii"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="2ee3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">就是这样。有许多比这更好的方法来实现todoList，您可以遵循。</p><p id="e952" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Github链接</p><div class="ln lo ez fb lp lq"><a href="https://github.com/charanpy/TS-todo" rel="noopener  ugc nofollow" target="_blank"><div class="lr ab dw"><div class="ls ab lt cl cj lu"><h2 class="bd hi fi z dy lv ea eb lw ed ef hg bi translated">charanpy/TS-todo</h2><div class="lx l"><h3 class="bd b fi z dy lv ea eb lw ed ef dx translated">在GitHub上创建一个帐户，为charanpy/TS-todo开发做贡献。</h3></div><div class="ly l"><p class="bd b fp z dy lv ea eb lw ed ef dx translated">github.com</p></div></div><div class="lz l"><div class="ma l mb mc md lz me in lq"/></div></div></a></div></div></div>    
</body>
</html>