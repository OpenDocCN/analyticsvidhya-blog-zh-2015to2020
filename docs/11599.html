<html>
<head>
<title>Implementing keyboard controls or shortcuts in Javascript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Javascript 中实现键盘控件或快捷键</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/implementing-keyboard-controls-or-shortcuts-in-javascript-82e11fccbf0c?source=collection_archive---------8-----------------------#2020-12-10">https://medium.com/analytics-vidhya/implementing-keyboard-controls-or-shortcuts-in-javascript-82e11fccbf0c?source=collection_archive---------8-----------------------#2020-12-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="27be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你试图用 Javascript 开发一个游戏或交互式 webapp，你可能会发现自己想要实现键盘控制。</p><h1 id="54f8" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">事件监听器</h1><p id="8fc4" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">为此，我们将使用键盘事件监听器。它们是<strong class="ih hj"> keydown </strong>(检测按键何时被按下)和<strong class="ih hj"> keyup </strong>(检测按键何时被释放)。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="6634" class="kp je hi kl b fi kq kr l ks kt">document.addEventListener('keydown', sayHi);<br/><br/>function sayHi(e) {<br/>  console.log("Hello!");<br/>}</span></pre><p id="8422" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的代码将打印“Hello！”每当按下任何键时。</p><h1 id="5f85" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">特定键</h1><p id="17e1" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">我们可以使用事件的内置方法来访问特定的按键。<strong class="ih hj">。按键</strong>将返回被按下的按键:</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="92b1" class="kp je hi kl b fi kq kr l ks kt">document.addEventListener('keydown', recordKey);<br/><br/>function recordKey(e) {<br/>  console.log("You pressed ${e.key}");<br/>}</span></pre><p id="49b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此事件可以使用的一些其他有用的方法:</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="8e35" class="kp je hi kl b fi kq kr l ks kt"><strong class="kl hj">e.ctrlKey  </strong>: detects if ctrl is also pressed (boolean)<strong class="kl hj"><br/>e.shiftKey </strong>: detects if shift is also pressed (boolean)<strong class="kl hj"><br/>e.metaKey  </strong>: detects if the window key / command key is also pressed<br/>             (boolean)<strong class="kl hj"><br/>e.repeat   </strong>: detects if the key is being held down (boolean)<strong class="kl hj"><br/>e.code     </strong>: outputs a code unique to each key</span></pre><p id="c150" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">。key </strong>报告由键(w，7，shift，tab)给出的值，而 key.code 关心键的物理位置。所以<strong class="ih hj">的一个用处。代码</strong>可能是如果你想实现 WASD 控制，但适应那些使用非英语或非 QWERTY 键盘:</p><figure class="kg kh ki kj fd kv er es paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="er es ku"><img src="../Images/87750ae8a744e28ccd13b78f6447c869.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0SNw28omQNGx8tv1zv4kRg.png"/></div></div><figcaption class="lc ld et er es le lf bd b be z dx translated">另一方面，他们不使用德沃夏克，因为他们想适应</figcaption></figure><p id="c2ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们可以访问被按下的按键，我们可以让不同的按键做不同的事情:</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="6d68" class="kp je hi kl b fi kq kr l ks kt">switch (e.key) {<br/>  case "w":<br/>    someUpFunction()<br/>  break<br/>  case "s":<br/>    someDownFunction()<br/>  break<br/>  case "Up":<br/>  case "ArrowUp":<br/>    someOtherUpFunction()<br/>  break<br/>  case "Down":<br/>  case "ArrowDown":<br/>    someOtherDownFunction()<br/>  break<br/>  case " ":<br/>  case "Spacebar":<br/>    someOtherFunction()<br/>  break<br/>  default:<br/>    return<br/>}</span></pre><p id="c4e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你会注意到在空格键和箭头的例子中，有两个看起来多余的例子。这是因为 Internet Explorer(和 Edge)对键使用不同的命名方案，所以我们以这种方式涵盖了这两种命名方案。这可能是使用<strong class="ih hj">的另一个原因。代码</strong>。</p><h1 id="d1b4" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">同时输入</h1><p id="09bd" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">浏览器中 Javascript 的一个限制是，它一次只能检测一个键盘输入；如果我用箭头移动我的飞船，并想用空格键射击，当我射击时，移动会停止，直到我再次按下箭头键时，移动才会重新开始。如果你想允许输入的组合(除了使用<strong class="ih hj"> shift </strong>、<strong class="ih hj"> control </strong>和<strong class="ih hj">windows</strong>/<strong class="ih hj">command</strong>)，你需要通过在等式中添加<strong class="ih hj"> keyup </strong>来跟踪每个按键的寿命。</p><p id="c1a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是我最近的一个项目中的真实代码，该项目在一个键盘上同时接受两个用户(“p1”和“p2”)的移动输入。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="f14e" class="kp je hi kl b fi kq kr l ks kt">function controlKeydown(event){<br/>  if (event.defaultPrevented) {<br/>    return<br/>  }<br/>  switch (event.key) {<br/>    case "w":<br/>      p1.direction = 1<br/>    break<br/>    case "s":<br/>      p1.direction = -1<br/>    break<br/>    case "Up":<br/>    case "ArrowUp":<br/>      p2.direction = 1<br/>    break<br/>    case "Down":<br/>    case "ArrowDown":<br/>      p2.direction = -1<br/>    break<br/>    case " ":<br/>    case "Spacebar":<br/>      app.paused = !app.paused<br/>    break<br/>    default:<br/>      return<br/>  }<br/>  event.preventDefault();<br/>}<br/>function controlKeyup(event){<br/>  if (event.defaultPrevented) {<br/>    return<br/>  }<br/>  switch (event.key) {<br/>    case "w":<br/>    case "s":<br/>      p1.direction = 0<br/>    break<br/>    case "Up":<br/>    case "ArrowUp":<br/>    case "Down":<br/>    case "ArrowDown":<br/>      p2.direction = 0<br/>    break<br/>    default:<br/>      return<br/>  }<br/>  event.preventDefault()<br/>}<br/>window.addEventListener("keydown", function (event) {<br/>  controlKeydown(event)<br/>}, true)<br/>window.addEventListener("keyup", function (event) {<br/>  controlKeyup(event)<br/>}, true)</span></pre><p id="12d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">他们投入的实际效果在别处处理；输入只是创建一种状态(“向上移动”、“向下移动”、“不移动”)。这样，多个输入不会相互中断。</p><p id="45bd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请在下面分享你的评论，或者私信我。</p></div></div>    
</body>
</html>