<html>
<head>
<title>Load Balancing made Simple using Nginx</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Nginx简化负载平衡</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/load-balancing-made-simple-using-nginx-88667e0df63?source=collection_archive---------20-----------------------#2019-12-03">https://medium.com/analytics-vidhya/load-balancing-made-simple-using-nginx-88667e0df63?source=collection_archive---------20-----------------------#2019-12-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/c5c209ab8fc127f9b71fe5d064294693.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gDL8w87_acxzouza.png"/></div></div></figure><p id="6cca" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Nginx。你怎么读它？哈哈，其实读起来是“引擎X”。我敢肯定，如果你像我一样来自一个非英语国家，你一开始就弄错了。不过没关系，老实说，我觉得读成“nginx”:D更好</p><p id="c41e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以，让我们回到我们的主题，负载平衡。据<a class="ae jo" href="https://www.nginx.com/resources/glossary/load-balancing/" rel="noopener ugc nofollow" target="_blank"> Nginx网站</a> —</p><blockquote class="jp jq jr"><p id="e42f" class="iq ir js is b it iu iv iw ix iy iz ja jt jc jd je ju jg jh ji jv jk jl jm jn hb bi translated"><strong class="is hj">负载平衡</strong>指的是在一组后端服务器上有效地分配传入的网络流量，也称为<em class="hi">服务器群</em>或<em class="hi">服务器池</em></p></blockquote><figure class="jx jy jz ka fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jw"><img src="../Images/9140789c63edf0e2f5a75f9c6364ab4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SLDyZKhs4E5vkd2p.png"/></div></div></figure><p id="136e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">基本上，当您构建一个web应用程序时，您通常将它部署在一台服务器上。这次，您将它部署在多台服务器上。但是，如何配置服务器的访问权限呢？一种方法是使用Nginx。</p><h2 id="df7d" class="kb kc hi bd kd ke kf kg kh ki kj kk kl jb km kn ko jf kp kq kr jj ks kt ku kv bi translated">首先，下载Nginx</h2><p id="5624" class="pw-post-body-paragraph iq ir hi is b it kw iv iw ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn hb bi translated">可以在<a class="ae jo" href="http://nginx.org/en/download.html" rel="noopener ugc nofollow" target="_blank"> Nginx官网</a>下载。</p><h2 id="5bcf" class="kb kc hi bd kd ke kf kg kh ki kj kk kl jb km kn ko jf kp kq kr jj ks kt ku kv bi translated">解压并运行它！</h2><p id="145d" class="pw-post-body-paragraph iq ir hi is b it kw iv iw ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn hb bi translated">解压缩后，在命令提示符/终端中打开该文件夹，并运行以下命令</p><pre class="jx jy jz ka fd lb lc ld le aw lf bi"><span id="1323" class="kb kc hi lc b fi lg lh l li lj">start nginx</span></pre><p id="bcfc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">之后在浏览器中打开<a class="ae jo" href="http://localhost/" rel="noopener ugc nofollow" target="_blank"> http://localhost/ </a>。您应该会看到类似这样的内容</p><figure class="jx jy jz ka fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/5dff7b35d5919a0f3c3ca83be9d9d1dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*efl5t8cISVExWigtb7W46g.png"/></div></div></figure><p id="1eb7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">恭喜你！意味着nginx安装成功，配置正确。</p><h2 id="f4c3" class="kb kc hi bd kd ke kf kg kh ki kj kk kl jb km kn ko jf kp kq kr jj ks kt ku kv bi translated">在4台不同的计算机/端口上运行您的web应用程序</h2><p id="69b8" class="pw-post-body-paragraph iq ir hi is b it kw iv iw ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn hb bi translated">这里，我使用了4个不同的端口。所以我的web应用程序有4个实例:<a class="ae jo" href="http://localhost:8000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8000/ </a>、<a class="ae jo" href="http://localhost:8001/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8001/ </a>、<a class="ae jo" href="http://localhost:8002/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8002/ </a>和<a class="ae jo" href="http://localhost:8003/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8003/ </a></p><figure class="jx jy jz ka fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/32dfc4694aed79bdb4ab8388d988a5f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CBg5eJaOcs9GsLakyeN9Gg.png"/></div></div></figure><h2 id="b1ec" class="kb kc hi bd kd ke kf kg kh ki kj kk kl jb km kn ko jf kp kq kr jj ks kt ku kv bi translated">编辑Nginx配置文件</h2><p id="baa9" class="pw-post-body-paragraph iq ir hi is b it kw iv iw ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn hb bi translated">现在，再次导航到Nginx文件夹。在conf文件夹中，有一个名为nginx.conf的文件，打开它。编辑http括号内的一些部分，使其变成这样</p><pre class="jx jy jz ka fd lb lc ld le aw lf bi"><span id="1d49" class="kb kc hi lc b fi lg lh l li lj">http {<br/>    upstream myapp1 {<br/>        server 127.0.0.1:8000;<br/>        server 127.0.0.1:8001;<br/>        server 127.0.0.1:8002;<br/>        server 127.0.0.1:8003;<br/>    }<br/><br/>    server {<br/>        listen 80;<br/><br/>        location / {<br/>            proxy_pass http://myapp1;<br/>        }<br/>    }<br/>}</span></pre><h2 id="e71d" class="kb kc hi bd kd ke kf kg kh ki kj kk kl jb km kn ko jf kp kq kr jj ks kt ku kv bi translated">重新加载Nginx</h2><p id="45de" class="pw-post-body-paragraph iq ir hi is b it kw iv iw ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn hb bi translated">更改配置后，您需要重新加载Nginx。您可以运行以下命令</p><pre class="jx jy jz ka fd lb lc ld le aw lf bi"><span id="a1b5" class="kb kc hi lc b fi lg lh l li lj">nginx -s reload</span></pre><p id="a993" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在打开<a class="ae jo" href="http://localhost/" rel="noopener ugc nofollow" target="_blank"> http://localhost/ </a></p><figure class="jx jy jz ka fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/375177f361fc2c2ca42894a96776d377.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*voV5hJzj6BdYpTUpE3agng.png"/></div></div></figure><p id="5bef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">哒哒。如果您看到您的web应用程序打开了，那么它可能工作正常。您还可以检查您的web应用程序控制台(如果可用)，这样您就可以看到请求分布在不同的服务器上。</p><figure class="jx jy jz ka fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/c4531877b3481d8244a139bca07fdc2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_vNZSI_oka7rkoIXF3TDbw.png"/></div></div></figure><p id="ae5d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以，是的，一切都很好。要停止nginx，您可以运行</p><pre class="jx jy jz ka fd lb lc ld le aw lf bi"><span id="4bdf" class="kb kc hi lc b fi lg lh l li lj">nginx -s quit</span></pre><p id="e7b8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一切都结束了。负载平衡很简单，对吧？:D</p><h2 id="01b3" class="kb kc hi bd kd ke kf kg kh ki kj kk kl jb km kn ko jf kp kq kr jj ks kt ku kv bi translated">感谢您阅读这篇文章。如果您有任何问题或反馈，您可以通过<a class="ae jo" href="https://www.linkedin.com/in/firdaus-al-ghifari/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>或其他社交媒体平台联系我。</h2></div></div>    
</body>
</html>