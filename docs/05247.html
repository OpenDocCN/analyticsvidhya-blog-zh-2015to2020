<html>
<head>
<title>Create your own basic video editing software in Python using MoviePy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用MoviePy在Python中创建自己的基本视频编辑软件</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/create-your-own-basic-video-editing-software-in-python-using-moviepy-fcb229153f5c?source=collection_archive---------2-----------------------#2020-04-15">https://medium.com/analytics-vidhya/create-your-own-basic-video-editing-software-in-python-using-moviepy-fcb229153f5c?source=collection_archive---------2-----------------------#2020-04-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="d973" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">伟大的图书馆创建自己的视频编辑软件</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/b70ef00de0259994a605c2175a1411ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8vY0iYe-790db5PFKWq2wA.jpeg"/></div></div></figure><p id="4d62" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">目录</strong></p><ol class=""><li id="96ce" class="kf kg hi jl b jm jn jp jq js kh jw ki ka kj ke kk kl km kn bi translated">介绍</li><li id="0a0d" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke kk kl km kn bi translated">装置</li><li id="6992" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke kk kl km kn bi translated">你能做的事情</li><li id="1345" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke kk kl km kn bi translated">从图片目录创建视频</li><li id="6dd9" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke kk kl km kn bi translated">添加(或更改)视频的音频</li><li id="8a0a" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke kk kl km kn bi translated">添加水印和简介</li><li id="215a" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke kk kl km kn bi translated">结论</li></ol><h1 id="a89a" class="kt ku hi bd kv kw kx ky kz la lb lc ld io le ip lf ir lg is lh iu li iv lj lk bi translated"><strong class="ak">简介</strong></h1><p id="d79d" class="pw-post-body-paragraph jj jk hi jl b jm ll ij jo jp lm im jr js ln ju jv jw lo jy jz ka lp kc kd ke hb bi translated">有时我们想编辑视频的基本任务，如添加介绍或结尾，连接不同的视频，添加水印等。为您的项目报告视频或任何个人项目。为此，你要么使用现有的在线工具，要么使用付费软件。为此，你需要有一些相关的经验，但是如果你知道如何用python编码，那么这个库会非常有用。</p><p id="14a7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">所以，最近我偶然发现了一个叫做<a class="ae lq" href="https://zulko.github.io/moviepy/index.html" rel="noopener ugc nofollow" target="_blank"> MoviePy </a>的很棒的图书馆，它是最近发行的。所以，我想分享一下会很棒。</p><h1 id="c295" class="kt ku hi bd kv kw kx ky kz la lb lc ld io le ip lf ir lg is lh iu li iv lj lk bi translated"><strong class="ak">安装</strong></h1><ol class=""><li id="55a4" class="kf kg hi jl b jm ll jp lm js lr jw ls ka lt ke kk kl km kn bi translated">Pip方法:</li></ol><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="0760" class="lz ku hi lv b fi ma mb l mc md">(sudo) pip install moviepy</span></pre><p id="e247" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">2.手动安装:</p><p id="f4b4" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">从这个<a class="ae lq" href="https://github.com/Zulko/moviepy" rel="noopener ugc nofollow" target="_blank">链接</a>下载zip文件。然后运行以下代码:</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="80bb" class="lz ku hi lv b fi ma mb l mc md">(sudo) python setup.py install</span></pre><h1 id="9f7c" class="kt ku hi bd kv kw kx ky kz la lb lc ld io le ip lf ir lg is lh iu li iv lj lk bi translated"><strong class="ak">你可以用这个库做的事情:</strong></h1><p id="19da" class="pw-post-body-paragraph jj jk hi jl b jm ll ij jo jp lm im jr js ln ju jv jw lo jy jz ka lp kc kd ke hb bi translated">基本上，你可以在你的视频文件上执行所有基本的和一些高级的效果。这里有一些例子。</p><ul class=""><li id="f997" class="kf kg hi jl b jm jn jp jq js kh jw ki ka kj ke me kl km kn bi translated">非线性视频编辑</li><li id="0702" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke me kl km kn bi translated">从视频创建gif</li><li id="9240" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke me kl km kn bi translated">将音频添加到视频中</li><li id="1a4b" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke me kl km kn bi translated">矢量动画</li><li id="617c" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke me kl km kn bi translated">3D动画</li><li id="c89b" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke me kl km kn bi translated">数据动画</li><li id="a904" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke me kl km kn bi translated">连接不同的视频</li></ul><p id="5299" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">还有很多。在接下来的部分中，我展示了一些您可以使用MoviePy完成的编码示例。你可以点击查看其他例子<a class="ae lq" href="https://zulko.github.io/moviepy/examples/examples.html" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="824a" class="kt ku hi bd kv kw kx ky kz la lb lc ld io le ip lf ir lg is lh iu li iv lj lk bi translated"><strong class="ak">从图片目录创建视频:</strong></h1><p id="49a1" class="pw-post-body-paragraph jj jk hi jl b jm ll ij jo jp lm im jr js ln ju jv jw lo jy jz ka lp kc kd ke hb bi translated">当我们度假归来时，我们带着如此多的照片和视频，我们将这些时刻永久地保存下来。所以，我们能做的就是把那些图片做一个小视频，加上一些合适的音乐。所以，无论何时我们看它都会想起那个地方。</p><p id="602d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，如果你想这样做，那么你必须有任何沉重的视频编辑软件和一些技能来工作。但是有了这个库，你就可以不需要这些了。让我们跳到编码部分。</p><p id="376f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">首先，进口我们需要的必需品。</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="d110" class="lz ku hi lv b fi ma mb l mc md">from moviepy.editor import ImageSequenceClip</span><span id="d175" class="lz ku hi lv b fi mf mb l mc md">from PIL import Image</span></pre><p id="79ec" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，指定包含所有图像的输入目录和输出视频文件名。</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="f243" class="lz ku hi lv b fi ma mb l mc md">thumbnail_dir = os.path.join(SAMPLE_OUTPUTS, "thumbnails")</span><span id="d609" class="lz ku hi lv b fi mf mb l mc md">output_video = os.path.join(SAMPLE_OUTPUTS, 'final_div_to_vid.mp4')</span></pre><p id="9896" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这里，SAMPLE_OUTPUT是我的输出文件夹的预定义路径。</p><p id="d848" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，将目录中所有图像文件的路径添加到列表中。</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="0782" class="lz ku hi lv b fi ma mb l mc md">this_dir = os.listdir(thumbnail_dir)</span><span id="a865" class="lz ku hi lv b fi mf mb l mc md">filepaths = [os.path.join(thumbnail_dir, fname) for fname in this_dir if fname.endswith("jpg")]</span></pre><p id="1d8a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">因为我想让这些图片按照特定的顺序排列，所以我把它们重新命名为数字，这样我就可以更容易地用字典对它们进行排序。</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="cd57" class="lz ku hi lv b fi ma mb l mc md">directory = {}</span><span id="f235" class="lz ku hi lv b fi mf mb l mc md">for root, dirs, files in os.walk(thumbnail_dir):</span><span id="2cc2" class="lz ku hi lv b fi mf mb l mc md">    for fname in files:</span><span id="fd18" class="lz ku hi lv b fi mf mb l mc md">        filepath = os.path.join(root, fname)</span><span id="0e99" class="lz ku hi lv b fi mf mb l mc md">        try:</span><span id="6978" class="lz ku hi lv b fi mf mb l mc md">            key = float(fname.replace(".jpg", ""))</span><span id="bcaa" class="lz ku hi lv b fi mf mb l mc md">        except:</span><span id="9340" class="lz ku hi lv b fi mf mb l mc md">            key = None</span><span id="298d" class="lz ku hi lv b fi mf mb l mc md">        if key != None:</span><span id="d304" class="lz ku hi lv b fi mf mb l mc md">            directory[key] = filepath<br/></span><span id="1c3a" class="lz ku hi lv b fi mf mb l mc md">new_path = []</span><span id="e894" class="lz ku hi lv b fi mf mb l mc md">for k in sorted(directory.keys()):</span><span id="5bec" class="lz ku hi lv b fi mf mb l mc md">    filepath = directory[k]</span><span id="4d39" class="lz ku hi lv b fi mf mb l mc md">    new_path.append(filepath)</span></pre><p id="a8b4" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在这里，我创建了保存顺序和路径的字典。然后我根据关键字对它们进行了排序。现在，new_path是按顺序包含所有图像路径的列表。</p><p id="7049" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">最后，我们将使用ImageSequenceClip通过指定fps或视频的持续时间来创建所有图像的视频。</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="075d" class="lz ku hi lv b fi ma mb l mc md">clip = ImageSequenceClip(new_path, fps=5)<br/>clip.write_videofile(output_video)</span></pre><p id="a35b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">从图片创建视频的完整代码如下。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mg mh l"/></div></figure><h1 id="b1d7" class="kt ku hi bd kv kw kx ky kz la lb lc ld io le ip lf ir lg is lh iu li iv lj lk bi translated"><strong class="ak">添加(或更改)视频的音频:</strong></h1><p id="cdaf" class="pw-post-body-paragraph jj jk hi jl b jm ll ij jo jp lm im jr js ln ju jv jw lo jy jz ka lp kc kd ke hb bi translated">有时，在录制视频时，我们有噪音，或者我们想在录制后给视频添加声音。然后我们可以使用这个库添加音频。</p><p id="6489" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">导入所需的模块。这里，<a class="ae lq" href="https://zulko.github.io/moviepy/ref/AudioClip.html#audiofileclip" rel="noopener ugc nofollow" target="_blank">音频文件剪辑</a>和<a class="ae lq" href="https://zulko.github.io/moviepy/ref/VideoClip/VideoClip.html#videofileclip" rel="noopener ugc nofollow" target="_blank">视频文件剪辑</a>。</p><p id="4fd0" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">AudioFileClip类提供了处理音频文件的方法，VideoFileClip提供了处理视频文件的方法。</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="2083" class="lz ku hi lv b fi ma mb l mc md">import os<br/>from moviepy.editor import AudioFileClip, VideoFileClip</span></pre><p id="b7fe" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，用户需要输入:</p><ul class=""><li id="9bc4" class="kf kg hi jl b jm jn jp jq js kh jw ki ka kj ke me kl km kn bi translated">视频路径</li><li id="7f9a" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke me kl km kn bi translated">音频路径</li><li id="4909" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke me kl km kn bi translated">最终视频输出目录</li><li id="5105" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke me kl km kn bi translated">最终视频名称</li><li id="aba5" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke me kl km kn bi translated">音频文件的开始和结束时间</li></ul><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="7e51" class="lz ku hi lv b fi ma mb l mc md">org_video_path = input("Enter the video path: ")</span><span id="12d5" class="lz ku hi lv b fi mf mb l mc md">audio_path = input("Enter the audio path: ")</span><span id="23b5" class="lz ku hi lv b fi mf mb l mc md">final_video_path = input("Enter the output folder path: ")</span><span id="535e" class="lz ku hi lv b fi mf mb l mc md">final_video_name = input("Enter the final video name: ")</span><span id="e40c" class="lz ku hi lv b fi mf mb l mc md">start_dur = int(input("Enter the starting duration in seconds: "))</span><span id="1f10" class="lz ku hi lv b fi mf mb l mc md">end_dur = int(input("Enter the ending duration in seconds: "))</span><span id="f676" class="lz ku hi lv b fi mf mb l mc md">final_video_path = os.path.join(final_video_path, final_video_name)</span></pre><p id="b372" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">创建一个VideoFileClip类的对象。</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="af8a" class="lz ku hi lv b fi ma mb l mc md">video_clip = VideoFileClip(org_video_path)</span></pre><p id="52b1" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果您想使用视频的原始音频，您可以按如下方式提取:</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="cb18" class="lz ku hi lv b fi ma mb l mc md">original_audio = video_clip.audio</span><span id="3023" class="lz ku hi lv b fi mf mb l mc md">original_audio.write_audiofile(og_audio_path)</span></pre><p id="bda3" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，创建音频文件的对象，然后选择用户指定的音频部分。</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="ed20" class="lz ku hi lv b fi ma mb l mc md">background_audio_clip = AudioFileClip(audio_path)</span><span id="c0bb" class="lz ku hi lv b fi mf mb l mc md">bg_music = background_audio_clip.subclip(start_dur, end_dur)</span></pre><p id="e502" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">最后，设置音频为视频。</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="c18e" class="lz ku hi lv b fi ma mb l mc md">final_clip = video_clip.set_audio(bg_music)</span><span id="9b19" class="lz ku hi lv b fi mf mb l mc md">final_clip.write_videofile(final_video_path, codec='libx264', audio_codec="aac")</span></pre><p id="305e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">执行该任务的完整代码如下:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mg mh l"/></div></figure><h1 id="68c2" class="kt ku hi bd kv kw kx ky kz la lb lc ld io le ip lf ir lg is lh iu li iv lj lk bi translated"><strong class="ak">添加水印和简介:</strong></h1><p id="6b95" class="pw-post-body-paragraph jj jk hi jl b jm ll ij jo jp lm im jr js ln ju jv jw lo jy jz ka lp kc kd ke hb bi translated">有了这个库，您还可以通过使用TextClip类来添加水印和简介。让我们添加视频的基本介绍和水印。</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="ef89" class="lz ku hi lv b fi ma mb l mc md">import os</span><span id="c27d" class="lz ku hi lv b fi mf mb l mc md">from moviepy.editor import VideoFileClip, AudioFileClip, TextClip, CompositeVideoClip, concatenate_videoclips</span></pre><p id="3119" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，您已经熟悉了VideoFileClip和AudioFileClip类。所以，在这里我将简单解释一下<a class="ae lq" href="https://zulko.github.io/moviepy/ref/VideoClip/VideoClip.html#textclip" rel="noopener ugc nofollow" target="_blank"> TextClip </a>和<a class="ae lq" href="http://CompositeVideoClip" rel="noopener ugc nofollow" target="_blank">compositevideocip</a>类。</p><p id="85aa" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">TextClip类用于通过指定参数来创建包含文本的视频剪辑。这个类提供了许多参数和方法来设置字体样式、字体大小、字体颜色、文本对齐、剪辑持续时间、位置、fps等。</p><p id="5b47" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">CompositeVideoClip可用于连接两个不同的视频。它将视频列表作为参数。这个类也提供方法和许多参数和方法来设置音频，fps，持续时间等。</p><p id="c94f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，在这里我要求用户插入视频路径，输出文件夹，最终视频名称，音频路径和水印，他们希望有视频。</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="f1d8" class="lz ku hi lv b fi ma mb l mc md">org_video_path = input("Enter the video path: ")</span><span id="1190" class="lz ku hi lv b fi mf mb l mc md">final_video_path = input("Enter the output folder path: ")</span><span id="d040" class="lz ku hi lv b fi mf mb l mc md">final_video_name = input("Enter the final video name: ")</span><span id="5357" class="lz ku hi lv b fi mf mb l mc md">audio_path = input("Enter the final video name: ")</span><span id="26ea" class="lz ku hi lv b fi mf mb l mc md">watermark = input("Enter the watermark: ")</span><span id="68d7" class="lz ku hi lv b fi mf mb l mc md">final_video_path = os.path.join(final_video_path, final_video_name)</span></pre><p id="191f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，我们将创建视频和音频文件的对象，并根据视频持续时间修剪音频。</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="4970" class="lz ku hi lv b fi ma mb l mc md">video_clip = VideoFileClip(org_video_path)</span><span id="9e44" class="lz ku hi lv b fi mf mb l mc md">audio_clip = AudioFileClip(audio_path)</span><span id="cf5b" class="lz ku hi lv b fi mf mb l mc md">final_audio = audio_clip.subclip(25, 40)<br/></span><span id="4c44" class="lz ku hi lv b fi mf mb l mc md">w, h = video_clip.size</span><span id="ee32" class="lz ku hi lv b fi mf mb l mc md">fps = video_clip.fps</span></pre><p id="8886" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">视频大小有助于创建介绍或水印等文本剪辑。</p><p id="e717" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，让我们设计我们想要的介绍。</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="0507" class="lz ku hi lv b fi ma mb l mc md">intro_duration = 5</span><span id="6081" class="lz ku hi lv b fi mf mb l mc md">intro_text = TextClip("Hello world!", fontsize=70, color='white', size=video_clip.size)</span><span id="7359" class="lz ku hi lv b fi mf mb l mc md">intro_text = intro_text.set_duration(intro_duration)</span><span id="7aef" class="lz ku hi lv b fi mf mb l mc md">intro_text = intro_text.set_fps(fps)</span><span id="4ffd" class="lz ku hi lv b fi mf mb l mc md">intro_text = intro_text.set_pos("center")</span><span id="f35c" class="lz ku hi lv b fi mf mb l mc md">intro_music = audio_clip.subclip(25, 30)</span><span id="7f74" class="lz ku hi lv b fi mf mb l mc md">intro_text = intro_text.set_audio(intro_music)</span></pre><p id="29e6" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在这里，我用文本、字体大小、颜色和剪辑大小创建了TextClip类的对象。之后，我设置了5秒钟的介绍时间，然后fps和视频的fps一样，然后是文本的位置。最后，我在介绍中加入了音频。</p><p id="7507" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">为了创建水印，我们几乎要做和上面一样的事情。</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="0703" class="lz ku hi lv b fi ma mb l mc md">watermark_size = 50</span><span id="5568" class="lz ku hi lv b fi mf mb l mc md">watermark_text = TextClip(watermark, fontsize=watermark_size, color='black', align='East', size=(w, watermark_size))</span><span id="b138" class="lz ku hi lv b fi mf mb l mc md">watermark_text = watermark_text.set_fps(fps)</span><span id="d095" class="lz ku hi lv b fi mf mb l mc md">watermark_text = watermark_text.set_duration(video_clip.reader.duration)</span><span id="db7e" class="lz ku hi lv b fi mf mb l mc md">watermark_text = watermark_text.margin(left=10, right=10, bottom=2, opacity=0)</span><span id="8ac5" class="lz ku hi lv b fi mf mb l mc md">watermark_text = watermark_text.set_position(("bottom"))</span></pre><p id="5365" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">所以，唯一的区别是我设置了边距、对齐方式并缩小了字符的大小。在这里，对齐方式要么是“东”对右，要么是“西”对左。</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="0f92" class="lz ku hi lv b fi ma mb l mc md">watermarked_clip = CompositeVideoClip([video_clip, watermark_text], size=video_clip.size)</span><span id="191b" class="lz ku hi lv b fi mf mb l mc md">watermarked_clip = watermarked_clip.set_duration(video_clip.reader.duration)</span><span id="8bf1" class="lz ku hi lv b fi mf mb l mc md">watermarked_clip = watermarked_clip.set_fps(fps)</span><span id="3a94" class="lz ku hi lv b fi mf mb l mc md">watermarked_clip = watermarked_clip.set_audio(final_audio)</span></pre><p id="8da9" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在上面的部分，我结合了原始视频和水印剪辑，然后设置视频的持续时间，fps再次与视频相同，并设置音频。</p><p id="83d1" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">最后，我们连接视频并保存它们。</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="942f" class="lz ku hi lv b fi ma mb l mc md">final_clip = concatenate_videoclips([intro_text, watermarked_clip])</span><span id="ad90" class="lz ku hi lv b fi mf mb l mc md">final_clip.write_videofile(final_video_path, codec='libx264', audio_codec="aac")</span></pre><p id="7a83" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">添加简介和水印的完整代码如下:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mg mh l"/></div></figure><h1 id="b5a8" class="kt ku hi bd kv kw kx ky kz la lb lc ld io le ip lf ir lg is lh iu li iv lj lk bi translated"><strong class="ak">结论</strong></h1><p id="d9f3" class="pw-post-body-paragraph jj jk hi jl b jm ll ij jo jp lm im jr js ln ju jv jw lo jy jz ka lp kc kd ke hb bi translated">所以，在这里我只是展示了一个基本的例子，你可以不安装任何沉重的软件或使用任何在线工具。当然，你可以做的比我刚才用MoviePy展示的更多。</p><p id="8be2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">你可以在这里找到我的Github库<a class="ae lq" href="https://github.com/vyashemang/movie_editor" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="6d48" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">不要犹豫，在下面的评论区说出你的想法。</p><p id="aa63" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">感谢您阅读这篇文章。</p><p id="d450" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">此外，请查看我关于<a class="ae lq" href="https://hackernoon.com/popularity-based-song-recommendation-system-without-any-library-in-python-12a4fbfd825e?source=---------4------------------" rel="noopener ugc nofollow" target="_blank">推荐系统</a>和<a class="ae lq" href="https://towardsdatascience.com/deploy-a-machine-learning-model-using-flask-da580f84e60c" rel="noopener" target="_blank">部署机器学习模型</a>的其他文章。</p><p id="e30e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">参考文献</strong>:</p><p id="5732" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><a class="ae lq" href="https://www.youtube.com/watch?v=m6chqKlhpPo" rel="noopener ugc nofollow" target="_blank">电影播放</a></p><p id="02ac" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><a class="ae lq" href="https://www.youtube.com/watch?v=m6chqKlhpPo" rel="noopener ugc nofollow" target="_blank">企业家编码</a></p></div></div>    
</body>
</html>