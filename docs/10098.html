<html>
<head>
<title>Enable TensorFlow-gpu with NVIDIA graphics on Windows 10</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Windows 10上使用NVIDIA显卡启用TensorFlow-gpu</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/tensorflow-2-3-0-with-gpu-support-on-windows-10-f975a552ea7c?source=collection_archive---------0-----------------------#2020-10-05">https://medium.com/analytics-vidhya/tensorflow-2-3-0-with-gpu-support-on-windows-10-f975a552ea7c?source=collection_archive---------0-----------------------#2020-10-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="32a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">几天前，我不得不决定把我用了7年的双核I5笔记本电脑放在一边，买一台新的。在与朋友核实后，我做了自己的研究，我登陆了“联想军团5i”。</p><p id="0cf6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">出于对深度学习领域的兴趣，我开始研究TensorFlow和Keras。如你所知，CPU上的模型训练需要时间，GPU使它更好地减少了至少1/6的CPU时间。要在GPU上运行TensorFlow，我们需要安装NVIDIA图形驱动(如果没有预装)、CUDA Toolkit、cuDNN库。问题是经常发布的版本，很少有不兼容的。我和你们中的一些人一样，最终陷入了DLL错误的循环。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/67f33302a7696d40b85e983ae6213422.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HoXWf9OFyn5Ea2Z54T080g.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">由于不正确的安装/兼容性问题导致的DLL错误</figcaption></figure><p id="6d3b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">军团5i运行在这个配置上——CPU:I7第10代| GPU:NVIDIA GEFORCE gtx 1650 ti | OS:Windows 10 Home，64位。要使用Keras，TensorFlow需要更新到2.2或更高版本。TensorFlow-GPU v2.2尚未与Anaconda for Windows OS一起发布。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jt"><img src="../Images/ff7901b92a8531a375c0f05599bd4f0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ykqIda_-vTc3vQfTYbdp7g.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">tensor flow | Keras | Anaconda tensor flow-GPU版本</figcaption></figure><p id="5d23" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">浏览其他博客，堆栈溢出问题，文章，CUDA，cuDNN文档，并通过谷歌搜索，以下步骤有助于解决我的需求。</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="beac" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated"><strong class="ak">第一步:安装蟒蛇</strong></h1><p id="93c1" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">从他们的<a class="ae le" href="https://www.anaconda.com/products/individual" rel="noopener ugc nofollow" target="_blank">官方网站</a>下载Anaconda个人版V3.8(写这篇博客时的最新版本)。运行Anaconda安装程序，接受默认设置。这也将在系统变量中设置python路径。下载链接:【https://www.anaconda.com/products/individual T4】</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lf"><img src="../Images/3e51b0595286f0ad254b084b6dc384d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*enb3f6fVI2NZdIS6ofJDXg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">Anaconda安装程序和设置</figcaption></figure></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="5162" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated"><strong class="ak">第二步:安装微软Visual C++编译器</strong></h1><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lg"><img src="../Images/6663c1fcc8985309d6a2faf1560d1208.png" data-original-src="https://miro.medium.com/v2/resize:fit:882/format:webp/1*qIpxY6QhZWA7xp_ZHd2_Pg.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">MS Visual Studio安装程序</figcaption></figure><p id="1cce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">CUDA Toolkit使用MS Visual C++编译器，更简单的安装方法是通过Microsoft Visual Studio。从https://visualstudio.microsoft.com/vs/community<a class="ae le" href="https://visualstudio.microsoft.com/vs/community/" rel="noopener ugc nofollow" target="_blank">下载微软Visual studio社区版</a></p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="7ed9" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated"><strong class="ak">第三步:安装CUDA工具包</strong></h1><p id="090c" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">虽然最新的CUDA Toolkit版本在2020年9月更新到11.1.0，但是这个安装给出了我无法调试的DLL错误。我试过其他版本，<strong class="ih hj">CUDA Toolkit 10.2【2019年11月】</strong>确实工作没有错误。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lh"><img src="../Images/3738cd35ec2fa1a8a6e35d20acb62597.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*3cXPKNAK9Fuhvvi5xfJyPw.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">CUDA工具包—传统版本</figcaption></figure><p id="ee3c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从<a class="ae le" href="https://developer.nvidia.com/cuda-downloads" rel="noopener ugc nofollow" target="_blank">https://developer.nvidia.com/cuda-downloads</a>下载CUDA工具包。如果您正在寻找存档版本，请点击“旧版本”继续默认的安装过程，因为它在环境变量中设置路径，不会给我们带来麻烦。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es li"><img src="../Images/2455882467faa3a2b12e0621b9cb7cf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uAMBOxL9hvRWeleSbsY3Ow.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">CUDA工具包10.2及安装</figcaption></figure></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="1dcc" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated"><strong class="ak">第四步:cuDNN库</strong></h1><p id="804c" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">cuDNN是一个GPU加速库，用于深度神经网络的高度优化实现。下载cuDNN需要NVIDIA开发者计划会员。不要担心；这是一个主要的注册，一旦邮件验证完成，将提供下载访问。</p><p id="f59c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从https://developer.nvidia.com/rdp/cudnn-download的<a class="ae le" href="https://developer.nvidia.com/rdp/cudnn-download" rel="noopener ugc nofollow" target="_blank">为CUDA 10.2下载cud nn v 8 . 0 . 4(2020年9月28日)。记住，我们之前选择的是CUDA toolkit 10.2，这里选择的是兼容的cuDNN v8.0.4。</a></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lj"><img src="../Images/bde75b72127cce3d1dd6a040623e9749.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/1*58eFTsm3z6PjRlLvs-2__A.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">为CUDA 10.2下载cuDNN v8.0.4</figcaption></figure><p id="71e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">cuDNN是一个压缩文件。Unzip给出3个文件夹——Bin、Include和Lib。我们需要将每个文件夹中的文件复制到CUDA安装文件夹中。更多详情请访问<a class="ae le" href="https://docs.nvidia.com/deeplearning/cudnn/install-guide/index.html" rel="noopener ugc nofollow" target="_blank">https://docs . NVIDIA . com/deep learning/cud nn/install-guide/index . html</a></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/bafc643a006affd4b0c26a731fad6240.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jArfWbHTIlXMnzZuqnX20g.png"/></div></div></figure><p id="3d4b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将文件从<strong class="ih hj">\ Downloads \ cud nn 10.2 \ CUDA \ bin</strong>复制到<br/><strong class="ih hj">C:\ Program Files \ NVIDIA GPU Computing Toolkit \ CUDA \ v 10.2 \ bin</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lk"><img src="../Images/a9071406c541f80d9bdbfa948f07ebe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P5N9FerxgYFaDM-L0vX2IA.png"/></div></div></figure><p id="9a79" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将文件从<strong class="ih hj">\ Downloads \ cud nn 10.2 \ CUDA \ include</strong>复制到<br/><strong class="ih hj">C:\ Program Files \ NVIDIA GPU Computing Toolkit \ CUDA \ v 10.2 \ include</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lk"><img src="../Images/fd38239fbfc435b04c097a90aef91b75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rPcsiDuymXtKl0Dl3EhcWg.png"/></div></div></figure><p id="e626" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将文件从<strong class="ih hj">\ Downloads \ cud nn 10.2 \ CUDA \ lib \ x64</strong>复制到<br/><strong class="ih hj">C:\ Program Files \ NVIDIA GPU Computing Toolkit \ CUDA \ v 10.2 \ lib \ x64</strong></p><p id="d0db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在继续之前，导航到系统属性(按Windows + R &gt;键入sysdm.cpl并按enter)。单击环境变量，检查系统变量区域中的“Path”变量是否更新为以下路径。如果没有，请手动添加它们。</p><p id="f9b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> C:\Program Files\NVIDIA GPU计算工具包\ CUDA \ v 10.2 \ bin<br/>C:\ Program Files \ NVIDIA GPU计算工具包\CUDA\v10.2\libnvvp </strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ll"><img src="../Images/9b7f079ced2ab8961fdb6389cfd77a88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/format:webp/1*ey8MAB5kcIPw_d5p1EyH9A.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">验证CUDA路径的环境变量</figcaption></figure></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="8059" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated"><strong class="ak">第五步:创建一个新的Python环境</strong></h1><p id="a5aa" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">当开始一个新项目时，创建一个新的环境是一个好的实践；这样，基础环境不会受到影响。在开始菜单中，搜索并运行“<strong class="ih hj"> Anaconda提示</strong>”。</p><p id="eaa0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用以下命令创建环境:</p><pre class="je jf jg jh fd lm ln lo lp aw lq bi"><span id="f806" class="lr kc hi ln b fi ls lt l lu lv">conda create --name GPUEnv python=3.7<br/>conda activate GPUEnv</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lw"><img src="../Images/c9fe07e063b3961bc2b70cd0a002c4e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*x0B7G8i3tNKNwxdY1vLZ7g.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">创建一个名为“GPUEnv”的新python环境，python版本为3.7</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lx"><img src="../Images/d514a1eba7c304d9d0f39daf2f8c5a18.png" data-original-src="https://miro.medium.com/v2/resize:fit:938/format:webp/1*pWjWaDjIzzGy9iCEY6fqfA.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">激活GPUEnv</figcaption></figure><pre class="je jf jg jh fd lm ln lo lp aw lq bi"><span id="fe8f" class="lr kc hi ln b fi ls lt l lu lv">pip install ipykernel<br/>python -m ipykernel install --user --name GPUEnv --display-name "GPUEnv"</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ly"><img src="../Images/248bc0866385e066219c127a820602a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*6FUAa3Q2uC_dPtgkPDTWsQ.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">在GPUEnv环境中创建python内核</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lz"><img src="../Images/e6caa256fc4dbe58bf7b5ebff88ae376.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fECr3AARt8dA_pfP7BFpqg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">使用提到的名称安装内核—该命令返回已安装的Kernelspec作为确认。</figcaption></figure><pre class="je jf jg jh fd lm ln lo lp aw lq bi"><span id="17fd" class="lr kc hi ln b fi ls lt l lu lv">pip install jupyter notebook</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ma"><img src="../Images/c5ea3164ebe2b714c0fd4882fd1b86ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*Fkdpj6hiaKb3X1103O_OSg.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">在GPUEnv中安装Jupyter笔记本</figcaption></figure></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="9bd7" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated"><strong class="ak">步骤6:在我们的环境中安装tensor flow</strong></h1><p id="d272" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">TensorFlow pip包为我们提供了安装带GPU /不带GPU的TensorFlow的选项。由于我们在环境中安装了Python 3.7，我们可以选择Python 3.7 GPU支持，突出显示并复制URL。旁边是whl分机。套餐网址将在https://www.tensorflow.org/install/pip#package-location<a class="ae le" href="https://www.tensorflow.org/install/pip%23package-location" rel="noopener ugc nofollow" target="_blank">提供</a></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lz"><img src="../Images/a1cee2a2e3ef24f2946f43e4b07f23f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FQVAsBE2o4_El8qeMIoJow.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">Python 3.7 GPU支持—张量流文件</figcaption></figure><pre class="je jf jg jh fd lm ln lo lp aw lq bi"><span id="934e" class="lr kc hi ln b fi ls lt l lu lv">python -m pip install &lt;wheel_url&gt;</span></pre><p id="a80e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用命令将<wheel_url>替换为复制的URL。</wheel_url></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lz"><img src="../Images/5c8401fd37b4309039453893447edb97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hh6ahIO8Qknu-44xP9duDw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">TensorFlow GPU安装</figcaption></figure></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="03e4" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated"><strong class="ak">步骤7:验证TensorFlow安装</strong></h1><p id="372f" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">转到Python命令行界面，在下面一行输入:</p><pre class="je jf jg jh fd lm ln lo lp aw lq bi"><span id="27ec" class="lr kc hi ln b fi ls lt l lu lv">python <br/>#In the interface, enter the following commands in sequence.</span><span id="d239" class="lr kc hi ln b fi mb lt l lu lv">import tensorflow as tf<br/>print(tf.test.is_built_with_cuda())<br/>print(tf.config.list_physical_devices('GPU')) <br/>exit()</span></pre><p id="d685" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">语句<strong class="ih hj">print(TF . test . is _ build _ with _ cuda())</strong>应返回'<strong class="ih hj"> True </strong> ' <br/>语句<strong class="ih hj">print(TF . config . list _ physical _ devices(' GPU '))</strong>应返回<strong class="ih hj"> GPU物理设备名称和设备类型</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lz"><img src="../Images/6df68faf7b858e4d174a9efcb9e4a0cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_1Oq5usJ7geJaNeFU-uwhQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">TensorFlow检测到GPU</figcaption></figure></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h1 id="1eee" class="kb kc hi bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated"><strong class="ak">第八步:通过GPU运行神经网络</strong></h1><p id="2bed" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">进入朱庇特笔记本命令。在您的默认浏览器上，您将看到python笔记本打开。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lz"><img src="../Images/0d901c4c8492491ad9348c0b0c322702.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g0C6PVOqHSxhJrKkK7sUCw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">打开Jupyter笔记本</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lz"><img src="../Images/52ceed9c798d324871a116ad9dbd6400.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PpANT1TMeOXl8_AZwCXDqw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">用我们之前创建的GPUEnv创建一个新的笔记本。\</figcaption></figure><p id="cdbe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">复制下面这段代码，并在Jupyter笔记本上运行。</p><pre class="je jf jg jh fd lm ln lo lp aw lq bi"><span id="8161" class="lr kc hi ln b fi ls lt l lu lv">import tensorflow as tf<br/>tf.__version__</span></pre><p id="becf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">出局:“2.3.0”</p><pre class="je jf jg jh fd lm ln lo lp aw lq bi"><span id="4a24" class="lr kc hi ln b fi ls lt l lu lv">from distutils.version import LooseVersion<br/>import warnings<br/>import tensorflow as tf</span><span id="c17c" class="lr kc hi ln b fi mb lt l lu lv">if not tf.test.gpu_device_name(): <br/>    warnings.warn('No GPU found')<br/>else: <br/>    print('Default GPU device: {}' .format(tf.test.gpu_device_name()))</span></pre><p id="c09d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Out:默认GPU设备:/device: GPU: 0</p><pre class="je jf jg jh fd lm ln lo lp aw lq bi"><span id="b482" class="lr kc hi ln b fi ls lt l lu lv"># Import all required libraries<br/>import numpy as np<br/>from tensorflow import keras<br/>from tensorflow.keras import layers<br/>from datetime import datetime<br/># Split MNIST Train and Test data<br/>(x_train, y_train), (x_test, y_test) = keras.datasets.mnist.load_data()</span><span id="dc6f" class="lr kc hi ln b fi mb lt l lu lv"># Divide train set by 255<br/>x_train, x_test = x_train.astype("float32") / 255, x_test.astype("float32") / 255<br/>x_train, x_test = np.expand_dims(x_train, -1), np.expand_dims(x_test, -1)</span><span id="ec00" class="lr kc hi ln b fi mb lt l lu lv"># convert class vectors to binary class matrices<br/>y_train, y_test = keras.utils.to_categorical(y_train, num_classes=10), keras.utils.to_categorical(y_test, num_classes=10)</span><span id="4dd9" class="lr kc hi ln b fi mb lt l lu lv"># Build the model<br/>model = keras.Sequential(<br/>    [<br/>        keras.Input(shape=(28,28,1)),<br/>        layers.Conv2D(32, kernel_size=(3, 3), activation="relu"),<br/>        layers.MaxPooling2D(pool_size=(2, 2)),<br/>        layers.Conv2D(64, kernel_size=(3, 3), activation="relu"),<br/>        layers.MaxPooling2D(pool_size=(2, 2)),<br/>        layers.Conv2D(128, kernel_size=(3, 3), activation="relu"),<br/>        layers.MaxPooling2D(pool_size=(1, 1)),<br/>        layers.Flatten(),<br/>        layers.Dropout(0.5),<br/>        layers.Dense(10, activation="softmax"),<br/>    ]<br/>)</span><span id="2ed2" class="lr kc hi ln b fi mb lt l lu lv"># Model summary and Evaluation<br/>model.summary()<br/>model.compile(loss="categorical_crossentropy", optimizer="adam", metrics=["accuracy"])<br/>start = datetime.now()<br/>model.fit(x_train, y_train, batch_size=128, epochs=5, validation_split=0.1)<br/>stop = datetime.now()<br/>print("Time taken to execute:" + str(stop - start))</span></pre><p id="a71e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该模型耗时接近10秒，具有5个历元，在GTX 1650Ti上的训练准确率为98.77%。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mc"><img src="../Images/f66cdfbccba0c46078ba2e62503abe03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OsTQmZVcrEaJh9tm99Cdqw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">在GPU上运行</figcaption></figure><p id="29b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">同样一段代码，在I7处理器的CPU上运行，耗时76秒，准确率98.68%。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es md"><img src="../Images/3046acb57ee7ae9e38f507551f3779fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wEnso_3ZN9Ohx39K9-eI7g.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">在CPU上运行</figcaption></figure></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><p id="f1e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您正在创建一个需要TensorFlow 2.3.0在windows操作系统上提供GPU支持的新python环境，请将此清单放在手边</p><p id="4274" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一步:安装Anaconda <br/>第二步:安装Microsoft Visual C++编译器<br/>第三步:CUDA工具包安装<br/>第四步:cuDNN库<br/>第五步:创建一个新的Python环境<br/>第六步:在我们的环境中安装TensorFlow<br/>第七步:验证tensor flow安装<br/>第八步:通过GPU运行一个神经网络</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><p id="a107" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">参考资料:</p><div class="me mf ez fb mg mh"><a href="https://www.thehardwareguy.co.uk/install-tensorflow-gpu" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab dw"><div class="mj ab mk cl cj ml"><h2 class="bd hj fi z dy mm ea eb mn ed ef hh bi translated">如何安装Tensorflow-GPU | thehardwareguy</h2><div class="mo l"><h3 class="bd b fi z dy mm ea eb mn ed ef dx translated">如果你对机器学习很认真，你真的想尽可能多地利用你的机器的处理能力…</h3></div><div class="mp l"><p class="bd b fp z dy mm ea eb mn ed ef dx translated">www.thehardwareguy.co.uk</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv jn mh"/></div></div></a></div><div class="me mf ez fb mg mh"><a href="https://shawnhymel.com/1961/how-to-install-tensorflow-with-gpu-support-on-windows/" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab dw"><div class="mj ab mk cl cj ml"><h2 class="bd hj fi z dy mm ea eb mn ed ef hh bi translated">如何在Windows上安装支持GPU的tensor flow-Shawn Hymel</h2><div class="mo l"><h3 class="bd b fi z dy mm ea eb mn ed ef dx translated">本教程将向您展示如何在Windows上安装支持GPU的TensorFlow。你需要一个NVIDIA显卡…</h3></div><div class="mp l"><p class="bd b fp z dy mm ea eb mn ed ef dx translated">shawnhymel.com</p></div></div><div class="mq l"><div class="mw l ms mt mu mq mv jn mh"/></div></div></a></div><div class="me mf ez fb mg mh"><a href="https://stackoverflow.com/questions/41117740/tensorflow-crashes-with-cublas-status-alloc-failed" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab dw"><div class="mj ab mk cl cj ml"><h2 class="bd hj fi z dy mm ea eb mn ed ef hh bi translated">Tensorflow因CUBLAS_STATUS_ALLOC_FAILED而崩溃</h2><div class="mo l"><h3 class="bd b fi z dy mm ea eb mn ed ef dx translated">我用一个简单的MINST神经网络程序在Windows 10上运行tensorflow-gpu。当它想跑的时候，它…</h3></div><div class="mp l"><p class="bd b fp z dy mm ea eb mn ed ef dx translated">stackoverflow.com</p></div></div><div class="mq l"><div class="mx l ms mt mu mq mv jn mh"/></div></div></a></div><div class="me mf ez fb mg mh"><a href="https://github.com/tensorflow/tensorflow/issues/41146" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab dw"><div class="mj ab mk cl cj ml"><h2 class="bd hj fi z dy mm ea eb mn ed ef hh bi translated">未知错误:无法获取卷积算法。这可能是因为cuDNN未能…</h2><div class="mo l"><h3 class="bd b fi z dy mm ea eb mn ed ef dx translated">解散GitHub是超过5000万开发者的家园，他们一起工作来托管和审查代码，管理项目，以及…</h3></div><div class="mp l"><p class="bd b fp z dy mm ea eb mn ed ef dx translated">github.com</p></div></div><div class="mq l"><div class="my l ms mt mu mq mv jn mh"/></div></div></a></div><div class="me mf ez fb mg mh"><a rel="noopener follow" target="_blank" href="/@andriylazorenko/tensorflow-performance-test-cpu-vs-gpu-79fcd39170c"><div class="mi ab dw"><div class="mj ab mk cl cj ml"><h2 class="bd hj fi z dy mm ea eb mn ed ef hh bi translated">TensorFlow性能测试:CPU与GPU</h2><div class="mo l"><h3 class="bd b fi z dy mm ea eb mn ed ef dx translated">在购买了一台用于远程进行深度学习的新超极本后，我问自己:</h3></div><div class="mp l"><p class="bd b fp z dy mm ea eb mn ed ef dx translated">medium.com</p></div></div><div class="mq l"><div class="mz l ms mt mu mq mv jn mh"/></div></div></a></div></div></div>    
</body>
</html>