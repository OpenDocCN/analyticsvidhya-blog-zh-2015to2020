<html>
<head>
<title>Deploy Your First Docker Container — Part 3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">部署您的第一个 Docker 容器—第 3 部分</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/deploy-your-first-docker-container-part-3-bd54e0bc62b?source=collection_archive---------18-----------------------#2020-10-05">https://medium.com/analytics-vidhya/deploy-your-first-docker-container-part-3-bd54e0bc62b?source=collection_archive---------18-----------------------#2020-10-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="3c21" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上一篇文章中，我们学习了如何运行 Redis 的特定实例。现在，我们将进一步了解部署您第一个 docker 容器的步骤:</p><h2 id="19ef" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">步骤 5:保存数据</h2><p id="45bd" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">在使用容器几天后，Jane 意识到当她删除和重新创建容器时，存储的数据会不断被删除。Jane 需要在重新创建容器时持久化和重用数据。</p><p id="c554" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">容器被设计成无状态的。使用选项<em class="kd">-v&lt;host-dir&gt;:&lt;container-dir&gt;</em>来绑定目录(也称为卷)。装载目录时，容器可以访问主机上该目录中存在的文件，并且容器内目录中更改/写入的任何数据都将存储在主机上。这允许您在不丢失数据的情况下升级或更改容器。</p><p id="c761" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过使用 Redis 的 Docker Hub 文档，Jane 发现正式的 Redis 映像将日志和数据存储在 a /data 目录中。</p><p id="b849" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">任何需要保存在 Docker 主机上而不是容器中的数据都应该存储在<em class="kd"> /opt/docker/data/redis </em>中。</p><p id="3c17" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">解决任务的完整命令是<code class="du kf kg kh ki b">docker run -d --name redisMapped -v /opt/docker/data/redis:/data redis</code></p><h2 id="82bc" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">步骤 6:在前台运行容器</h2><p id="f695" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">Jane 一直在 Redis 做后台处理。Jane 想知道容器如何与前台进程一起工作，比如<em class="kd"> ps </em>或<em class="kd"> bash </em>。</p><p id="00c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">之前，Jane 使用<em class="kd"> -d </em>在分离的后台状态下执行容器。如果不指定这一点，容器将在前台运行。如果 Jane 想要与容器交互(例如，访问 bash shell)，她可以包含选项<em class="kd"> -it </em>。</p><p id="4f59" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除了定义容器是在后台还是前台运行，某些图像还允许您覆盖用于启动图像的命令。能够替换默认命令使得拥有一个可以以多种方式重新利用的单一图像成为可能。例如，Ubuntu 映像既可以运行 OS 命令，也可以使用<em class="kd"> /bin/bash </em>运行交互式 bash 提示符</p><h2 id="2036" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">例子</h2><p id="34aa" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">命令<code class="du kf kg kh ki b">docker run ubuntu ps</code>启动一个 Ubuntu 容器，执行命令<em class="kd"> ps </em>查看容器中运行的所有进程。</p><p id="0f33" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用<code class="du kf kg kh ki b">docker run -it ubuntu bash</code>允许 Jane 访问容器内部的 bash shell。</p></div></div>    
</body>
</html>