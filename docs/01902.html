<html>
<head>
<title>Flask Language Detector App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">烧瓶语言检测应用程序</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/flask-language-detector-app-2ee28bfaea4e?source=collection_archive---------4-----------------------#2019-11-20">https://medium.com/analytics-vidhya/flask-language-detector-app-2ee28bfaea4e?source=collection_archive---------4-----------------------#2019-11-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/c59c4722ba03f651a6f5d4bcb1fb9454.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UAr50Vdha8Hh7iPa"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">乔尔·那仁在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="8399" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">正如你们许多人从我以前的媒体文章中注意到的，我喜欢学习语言、语言学和数据科学。</p><p id="ea4f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文中，我将放下我的数据科学帽子，戴上我的<em class="jt">时尚</em>前端帽子。我将使用flask构建一个简单的语言检测器应用程序并服务于它。Flask是一个轻量级的web框架，由于它的灵活性和易用性，这些年来获得了很大的流行。为了提高我的前端游戏，我已经开始学习flask。</p><figure class="jv jw jx jy fd ij er es paragraph-image"><div class="er es ju"><img src="../Images/c937eb5d1eba88843800879ef1b3e886.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/1*Iw7lJraCNz0yFMTzSviLMw.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">Python、HTML和CSS是我们Flask应用程序的关键部分…还有JavaScript</figcaption></figure><h1 id="cf7e" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">我们开始吧！</h1><p id="8570" class="pw-post-body-paragraph iv iw hi ix b iy kx ja jb jc ky je jf jg kz ji jj jk la jm jn jo lb jq jr js hb bi translated">这是我们的文件目录目前的样子:</p><figure class="jv jw jx jy fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/f545eeb549e727a526c890b15c47dd86.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/format:webp/1*nNrAyvsVwIOpPHq1MaAb7Q.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">文件目录</figcaption></figure><p id="46c4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们要确保我们的文件目录组织得当。大多数项目还会包含一个包含一个<code class="du ld le lf lg b">style.css</code>文件的<code class="du ld le lf lg b">static</code>文件夹。因为我使用了一个预先构建的HTML/CSS模板，所以没有必要构建应用程序的这些组件。</p><h1 id="f44d" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">游戏计划</h1><p id="38e0" class="pw-post-body-paragraph iv iw hi ix b iy kx ja jb jc ky je jf jg kz ji jj jk la jm jn jo lb jq jr js hb bi translated">让我们来分解一下语言检测器应用程序的各个部分:</p><figure class="jv jw jx jy fd ij er es paragraph-image"><div class="er es lh"><img src="../Images/b8e60c514b2ea8eb467da67c89daedbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*tIZNIWukkTXAqOfpb4GSxA.png"/></div></figure><ol class=""><li id="bf68" class="li lj hi ix b iy iz jc jd jg lk jk ll jo lm js ln lo lp lq bi translated">文本输入是通过home.html上的表单捕获的</li><li id="c842" class="li lj hi ix b iy lr jc ls jg lt jk lu jo lv js ln lo lp lq bi translated">TextBlob检测文本输入的语言</li><li id="51ec" class="li lj hi ix b iy lr jc ls jg lt jk lu jo lv js ln lo lp lq bi translated">result.html破译了文本块结果</li></ol><h1 id="14cc" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">我们来看看app.py</h1><ul class=""><li id="0cd3" class="li lj hi ix b iy kx jc ky jg lw jk lx jo ly js lz lo lp lq bi translated">我们可以从加载包和创建flask实例开始。</li></ul><pre class="jv jw jx jy fd ma lg mb mc aw md bi"><span id="bedf" class="me ka hi lg b fi mf mg l mh mi">from flask import Flask, render_template, url_for, request<br/>from textblob import TextBlob</span><span id="c42d" class="me ka hi lg b fi mj mg l mh mi">app = Flask(__name__)</span></pre><ul class=""><li id="1684" class="li lj hi ix b iy iz jc jd jg lk jk ll jo lm js lz lo lp lq bi translated">为我们的主页设置<code class="du ld le lf lg b">route</code>装饰。<code class="du ld le lf lg b">route</code>装饰器用于创建一个URL并将其分配给一个函数。在我们的例子中，<code class="du ld le lf lg b">('/')</code> URL被分配给了<code class="du ld le lf lg b">home():</code>函数。</li></ul><pre class="jv jw jx jy fd ma lg mb mc aw md bi"><span id="d006" class="me ka hi lg b fi mf mg l mh mi">@app.route('/')<br/>def home(): <br/>        return render_template('home.html')</span></pre><ul class=""><li id="bd8f" class="li lj hi ix b iy iz jc jd jg lk jk ll jo lm js lz lo lp lq bi translated">我们可以为预测页面设置另一个<code class="du ld le lf lg b">route</code>装饰器。通过设置<code class="du ld le lf lg b">method=['POST']</code>，文本输入将在我们的预测页面上被处理和更新，使我们能够看到我们的语言检测器的结果。</li><li id="0fdd" class="li lj hi ix b iy lr jc ls jg lt jk lu jo lv js lz lo lp lq bi translated">我们还将在<code class="du ld le lf lg b">predict()</code>函数中设置我们的语言检测器。除了情感分析和解析，<a class="ae iu" href="https://textblob.readthedocs.io/en/dev/quickstart.html#parsing" rel="noopener ugc nofollow" target="_blank"> TextBlob </a>还可以用于语言检测。它易于使用，并由谷歌翻译API提供支持。我们将在我们的<code class="du ld le lf lg b">predict()</code>函数中插入TextBlob来识别消息的语言。</li></ul><pre class="jv jw jx jy fd ma lg mb mc aw md bi"><span id="b775" class="me ka hi lg b fi mf mg l mh mi">@app.route('/predict',methods=['POST'])</span><span id="31b0" class="me ka hi lg b fi mj mg l mh mi">def predict(): <br/>           if request.method == ‘POST’: <br/>             message = request.form[‘message’] <br/>             blobline = TextBlob(message) <br/>             detect = blobline.detect_language() <br/>           return render_template(‘result.html’,prediction = detect)</span></pre><p id="6ef9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可以完成代码并设置<code class="du ld le lf lg b">debug=True</code>，这样我们就可以识别并解决任何潜在的Python错误。</p><pre class="jv jw jx jy fd ma lg mb mc aw md bi"><span id="fbff" class="me ka hi lg b fi mf mg l mh mi">if __name__ == ‘__main__’: <br/>         app.run(debug=True)</span></pre><p id="a6ee" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们可以继续我们的HTML页面。因为本文的重点主要是语言检测组件，所以我不会深入研究HTML和CSS领域。</p><p id="c361" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我选择利用<a class="ae iu" href="https://www.w3schools.com/w3css/w3css_templates.asp" rel="noopener ugc nofollow" target="_blank"> W3 Schools的</a>免费CSS模板来设计应用程序。主要目标是找到一个好的、简单的设计来补充语言检测器组件。希望我做了一个好的UI选择。</p><h1 id="6b7a" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">让我们来看看<em class="mk">home.html</em></h1><ul class=""><li id="add5" class="li lj hi ix b iy kx jc ky jg lw jk lx jo ly js lz lo lp lq bi translated">这是我们的用户将输入他们的语言检测文本的地方。我们将创建一个表单框架来捕获文本输入，并添加我们的<code class="du ld le lf lg b">post</code>方法来更新我们的预测页面。</li></ul><pre class="jv jw jx jy fd ma lg mb mc aw md bi"><span id="61ae" class="me ka hi lg b fi mf mg l mh mi">&lt;!-- Text Input --&gt;</span><span id="bd1c" class="me ka hi lg b fi mj mg l mh mi">&lt;div class="sub-container"&gt;<br/>&lt;form action="{{ url_for('predict')}}" method="POST"&gt;<br/>&lt;p&gt;Enter Your Text Below and We'll Detect the Language&lt;/p&gt;<br/>&lt;!-- &lt;input type="text" name="comment"/&gt; --&gt;<br/>&lt;textarea name="message" rows="4" cols="50"&gt;&lt;/textarea&gt;<br/>&lt;br/&gt;<br/>&lt;input type="submit" value="predict"&gt;<br/>&lt;/form&gt;</span></pre><h1 id="55ac" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">现在，让我们来看看<em class="mk">result.html</em></h1><ul class=""><li id="0d10" class="li lj hi ix b iy kx jc ky jg lw jk lx jo ly js lz lo lp lq bi translated">如前所述，result.html将破译TextBlob的检测结果。我在下面列出了许多条件语句来处理它们。在现实世界中，这种手动方法不是最佳解决方案，因为它需要更多的条件语句来处理任何请求。如果我用<strong class="ix hj">匈牙利语</strong>写了一条消息，该函数将返回<code class="du ld le lf lg b">Sorry, I'm not sure</code>消息。也就是说，它符合这个简单教程的要求。</li></ul><pre class="jv jw jx jy fd ma lg mb mc aw md bi"><span id="5cf2" class="me ka hi lg b fi mf mg l mh mi">&lt;div class="results"&gt;<br/>&lt;h2&gt;Detected Language:&lt;/h2&gt;            <br/>&lt;/div&gt;    <br/>     <br/>{% if prediction == 'de'%}        <br/>&lt;h4 style="color:black;"&gt;German&lt;/h4&gt;        <br/>{% elif prediction == 'es'%}        <br/>&lt;h4 style="color:black;"&gt;Spanish&lt;/h4&gt;        <br/>{% elif prediction == 'zh-CN'%}        <br/>&lt;h4 style="color:black;"&gt;Chinese&lt;/h4&gt;        <br/>{% elif prediction == 'fr'%}        <br/>&lt;h4 style="color:black;"&gt;French&lt;/h4&gt;        <br/>{% elif prediction == 'en'%}        <br/>&lt;h4 style="color:black;"&gt;English&lt;/h4&gt;        <br/>{% elif prediction == 'ja'%}        <br/>&lt;h4 style="color:black;"&gt;Japanese&lt;/h4&gt;        <br/>{% elif prediction == 'ru'%}        <br/>&lt;h4 style="color:black;"&gt;Russian&lt;/h4&gt;        <br/>{% elif prediction == 'it'%}        <br/>&lt;h4 style="color:black;"&gt;Italian&lt;/h4&gt;        <br/>{% else: %}        <br/>&lt;h4 style="color:black;"&gt;Sorry I'm not sure - Try Again&lt;/h4&gt;         {% endif %}   <br/>     <br/>&lt;/div&gt;</span></pre><p id="b7c2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们已经完成了所有的编码，请在您的终端上键入:</p><p id="1ee6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du ld le lf lg b">python app.py</code></p><p id="b253" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您看到类似这样的消息，请点按它。</p><pre class="jv jw jx jy fd ma lg mb mc aw md bi"><span id="d23a" class="me ka hi lg b fi mf mg l mh mi">Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)</span></pre><p id="8f22" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，让我们用不同的语言输入一些文本，然后点击<code class="du ld le lf lg b">predict</code></p><figure class="jv jw jx jy fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ml"><img src="../Images/6ffee8ac84b22eeff751a1e57b0d3735.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qBy_cQViEwgi8qjPJmiN_g.png"/></div></div></figure><p id="00c2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这就是我们预测页面应该看起来的样子:</p><figure class="jv jw jx jy fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mm"><img src="../Images/ff695c3cb8fa5dd12d23a2d36a5da80d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hOyQW1S1x_bJ_lAHUkUUUA.png"/></div></div></figure><h2 id="9401" class="me ka hi bd kb mn mo mp kf mq mr ms kj jg mt mu kn jk mv mw kr jo mx my kv mz bi translated">耶！有效:)成功！</h2><figure class="jv jw jx jy fd ij"><div class="bz dy l di"><div class="na nb l"/></div></figure><p id="2f5a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">感谢阅读我的文章！如果你觉得它有点好笑，鼓掌或者查看我的<a class="ae iu" href="https://github.com/melozap/Flask-Language-Detector-App" rel="noopener ugc nofollow" target="_blank"> GitHub </a>仓库中剩余的代码。</p><p id="6d72" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">参考资料:</p><div class="nc nd ez fb ne nf"><a href="https://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-i-hello-world" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab dw"><div class="nh ab ni cl cj nj"><h2 class="bd hj fi z dy nk ea eb nl ed ef hh bi translated">烧瓶超级教程第一部分:你好，世界！</h2><div class="nm l"><h3 class="bd b fi z dy nk ea eb nl ed ef dx translated">欢迎光临！您将开始一段旅程，学习如何使用Python和Flask创建web应用程序…</h3></div><div class="nn l"><p class="bd b fp z dy nk ea eb nl ed ef dx translated">blog.miguelgrinberg.com</p></div></div><div class="no l"><div class="np l nq nr ns no nt io nf"/></div></div></a></div><div class="nc nd ez fb ne nf"><a href="https://towardsdatascience.com/develop-a-nlp-model-in-python-deploy-it-with-flask-step-by-step-744f3bdd7776" rel="noopener follow" target="_blank"><div class="ng ab dw"><div class="nh ab ni cl cj nj"><h2 class="bd hj fi z dy nk ea eb nl ed ef hh bi translated">用Python开发一个NLP模型&amp;用Flask逐步部署它</h2><div class="nm l"><h3 class="bd b fi z dy nk ea eb nl ed ef dx translated">Flask API，文档分类，垃圾邮件过滤器</h3></div><div class="nn l"><p class="bd b fp z dy nk ea eb nl ed ef dx translated">towardsdatascience.com</p></div></div><div class="no l"><div class="nu l nq nr ns no nt io nf"/></div></div></a></div><div class="nc nd ez fb ne nf"><a href="https://www.w3schools.com/" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab dw"><div class="nh ab ni cl cj nj"><h2 class="bd hj fi z dy nk ea eb nl ed ef hh bi translated">W3Schools在线网络教程</h2><div class="nm l"><h3 class="bd b fi z dy nk ea eb nl ed ef dx translated">世界上最大的WEB开发人员站点世界上最大的WEB开发人员站点正文{ background-color:light blue；} h1 {…</h3></div><div class="nn l"><p class="bd b fp z dy nk ea eb nl ed ef dx translated">www.w3schools.com</p></div></div><div class="no l"><div class="nv l nq nr ns no nt io nf"/></div></div></a></div></div></div>    
</body>
</html>