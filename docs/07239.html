<html>
<head>
<title>OpenCV Smoothing Image Filters</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">OpenCV平滑图像过滤器</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/opencv-smoothing-image-filters-a758f0f13be9?source=collection_archive---------7-----------------------#2020-06-18">https://medium.com/analytics-vidhya/opencv-smoothing-image-filters-a758f0f13be9?source=collection_archive---------7-----------------------#2020-06-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><p id="0d99" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们在图像中会遇到各种各样的噪声，这些噪声会给图像检测带来很多问题。很多时候，当在图像中寻找轮廓时，由于噪声，在图像中检测到不想要的轮廓，或者图像失真，并且图像变得难以通过我们的机器学习算法来预测。</p><p id="d42a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">OpenCV有各种各样的过滤器，帮助模糊图像，用各种方法填充图像中的小噪声。像用相邻像素的平均值计算像素值等。在下面的文章中，我们将探索各种图像平滑的方法。下面是OpenCV中平滑图像的各种方法</p><h2 id="e3d1" class="jk jl hi bd jm jn jo jp jq jr js jt ju ix jv jw jx jb jy jz ka jf kb kc kd ke bi translated"><strong class="ak"> 1)模糊滤镜(cv2.blur() ) </strong></h2><p id="04d0" class="pw-post-body-paragraph im in hi io b ip kf ir is it kg iv iw ix kh iz ja jb ki jd je jf kj jh ji jj hb bi translated">为了执行平滑操作，我们将应用一个<em class="kk">过滤器</em>到我们的图像上。最常见的滤波器类型是<em class="kk">线性</em>，其中输出像素值(即(I，j))被确定为输入像素值的加权和(即f(i+k，j+l)):</p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es kl"><img src="../Images/a35f5f0071449122809623dfef254cd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:538/format:webp/1*86vENHTW8y2kv4mb5tdWzA.png"/></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">来源—<a class="ae kx" href="https://tinyurl.com/yda4vr83" rel="noopener ugc nofollow" target="_blank"/><a class="ae kx" href="https://tinyurl.com/yda4vr83" rel="noopener ugc nofollow" target="_blank">https://tinyurl.com/yda4vr83</a></figcaption></figure><p id="8c45" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">h(k，l)称为<em class="kk">核</em>，无非就是滤波器的系数。</p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es ky"><img src="../Images/dc7913a29176854e8fcb7f101916d035.png" data-original-src="https://miro.medium.com/v2/resize:fit:708/format:webp/1*rgY1L5H7loV2Uy-e_nczsw.png"/></div></figure><div class="kz la ez fb lb lc"><a href="https://docs.opencv.org/master/dc/dd3/tutorial_gausian_median_blur_bilateral_filter.html" rel="noopener  ugc nofollow" target="_blank"><div class="ld ab dw"><div class="le ab lf cl cj lg"><h2 class="bd hj fi z dy lh ea eb li ed ef hh bi translated">OpenCV:平滑图像</h2><div class="lj l"><h3 class="bd b fi z dy lh ea eb li ed ef dx translated">上一篇教程:随机生成器和OpenCV文本下一篇教程:侵蚀和扩张在本教程中，你将…</h3></div><div class="lk l"><p class="bd b fp z dy lh ea eb li ed ef dx translated">docs.opencv.org</p></div></div><div class="ll l"><div class="lm l ln lo lp ll lq kr lc"/></div></div></a></div><p id="eb05" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">以上是应用于像素以获得平均值的核，平均值是基于周围像素根据核大小计算的。下面是不同内核大小的规格化盒子的效果</p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es lr"><img src="../Images/fa182e9ce95d93799a73c8204be854c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*2qe-zElEEvK2L5PMayCD1Q.gif"/></div></figure><pre class="km kn ko kp fd ls lt lu lv aw lw bi"><span id="ff65" class="jk jl hi lt b fi lx ly l lz ma">import cv2</span><span id="c9e1" class="jk jl hi lt b fi mb ly l lz ma">def show_image(image):<br/>    cv2.imshow('image',image)<br/>    c = cv2.waitKey(300)<br/>    if c &gt;= 0 : return -1<br/>    return 0</span><span id="0d2a" class="jk jl hi lt b fi mb ly l lz ma">image  = cv2.imread('test.jpeg')<br/>for i in range(1,50,2):<br/>    blur = cv2.blur(image,(i,i),0)<br/>    t = show_image(blur)<br/>    if t !=0 :<br/>        break<br/>cv2.destroyAllWindows()</span></pre><h2 id="a2d6" class="jk jl hi bd jm jn jo jp jq jr js jt ju ix jv jw jx jb jy jz ka jf kb kc kd ke bi translated">2)高斯滤波器(cv2。GaussianBlur)</h2><p id="10c7" class="pw-post-body-paragraph im in hi io b ip kf ir is it kg iv iw ix kh iz ja jb ki jd je jf kj jh ji jj hb bi translated">不像归一化盒状滤波器，其中像素的值是基于取决于内核大小的周围像素的平均值来计算的。在高斯滤波器中，像素值的强度随着我们远离中心而变化，类似于高斯分布。</p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es mc"><img src="../Images/4e1887d79c6caff765a258b3f5f66c5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*Cgmt3aIKItn1Xp2UgalXKw.png"/></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">来源—<a class="ae kx" href="https://tinyurl.com/y84fmsh2" rel="noopener ugc nofollow" target="_blank">https://tinyurl.com/y84fmsh2</a></figcaption></figure><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es md"><img src="../Images/6a24890ed24edc4c429b4c8c20c8d186.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*kTfQwycJueGQ0RNpKDpXiw.png"/></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">source—<a class="ae kx" href="https://docs.opencv.org/master/dc/dd3/tutorial_gausian_median_blur_bilateral_filter.html" rel="noopener ugc nofollow" target="_blank">https://docs . opencv . org/master/DC/dd3/tutorial _ Gaussian _ median _ blur _ binary _ filter . html</a></figcaption></figure><p id="b2f0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">上面是二维高斯滤波器的公式。这些过滤器倾向于比标准化的箱式过滤器更好地保留边缘。因为核中的值并不相等，而是考虑高斯分布，该高斯分布给予中心像素更多的权重，因此更多地保留了边缘信息</p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es me"><img src="../Images/1101bd4d84e29408ce5eb3d29ddfed35.png" data-original-src="https://miro.medium.com/v2/resize:fit:916/format:webp/1*tX59PpgWpg4IM1NzrdZQJQ.jpeg"/></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">来源—<a class="ae kx" href="https://tinyurl.com/ydb2qdm9" rel="noopener ugc nofollow" target="_blank">https://tinyurl.com/ydb2qdm9</a></figcaption></figure><p id="306f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">从上面使用3×3高斯滤波器的例子中可以看出，中心像素(1/4)的权重更大，角点像素(1/16)的权重更小，这样像素的信息保留得更多</p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es lr"><img src="../Images/8ecae2bd8ba3523289130605ab753bb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*LVfN0nFnjBUuIQfA9fsV1Q.gif"/></div></figure><pre class="km kn ko kp fd ls lt lu lv aw lw bi"><span id="7b6d" class="jk jl hi lt b fi lx ly l lz ma">import cv2</span><span id="4197" class="jk jl hi lt b fi mb ly l lz ma">def show_image(image):<br/>    '''function just to display images simultaneously '''<br/>    cv2.imshow('image',image)<br/>    c = cv2.waitKey(300)<br/>    if c &gt;= 0 : return -1<br/>    return 0</span><span id="c9e4" class="jk jl hi lt b fi mb ly l lz ma">image  = cv2.imread('test.jpeg')<br/>for i in range(1,50,2):<br/>    blur = cv2.GaussianBlur(image,(i,i),0)<br/>    t = show_image(blur)<br/>    if t !=0 :<br/>        break<br/>cv2.destroyAllWindows()</span></pre><h1 id="3005" class="mf jl hi bd jm mg mh mi jq mj mk ml ju mm mn mo jx mp mq mr ka ms mt mu kd mv bi translated">3)中值滤波器(cv2.medianBlur)</h1><p id="7d2f" class="pw-post-body-paragraph im in hi io b ip kf ir is it kg iv iw ix kh iz ja jb ki jd je jf kj jh ji jj hb bi translated">像模糊滤镜一样，中值滤镜采用内核中所有值的中值，并应用于中心像素。它有助于消除图像中的噪声，如椒盐噪声。</p><p id="e9f4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">通过以升序排列核中的所有值，然后取最中间的值，即中值，来计算中值。</p><blockquote class="mw mx my"><p id="1f96" class="im in kk io b ip iq ir is it iu iv iw mz iy iz ja na jc jd je nb jg jh ji jj hb bi translated">eg — [5，13，9，7，1，9，2，9，11] <br/>升序排列<br/>【1，2，5，7，9，9，9，11，13】<br/>取中间值= 9</p></blockquote><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es nc"><img src="../Images/b73c435adc12e72dfb6d6063ef2e91c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*-STKG98ljfPA0xEhAvkYqw.png"/></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">来源—<a class="ae kx" href="https://tinyurl.com/y7fu3jf7" rel="noopener ugc nofollow" target="_blank">https://tinyurl.com/y7fu3jf7</a></figcaption></figure><p id="30ca" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">从上面的例子中，我们可以看到，中心像素的值，即255，将被96，即中值所取代。因此，噪声将从图像中去除</p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es nd"><img src="../Images/fa9c58f56acb6bf2644f1f87329df676.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/format:webp/1*6kl2MbeNG_sparYWhh8dKg.png"/></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">来源—<a class="ae kx" href="https://tinyurl.com/y8jj3ub6" rel="noopener ugc nofollow" target="_blank">https://tinyurl.com/y8jj3ub6</a></figcaption></figure><p id="780e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在左边你可以看到盐噪声在中值滤波器的帮助下从图像中被去除了</p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es lr"><img src="../Images/edea6664bd9d7cb778da6a164244df49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*gHVpC2vmymAOH592Bgdnqw.gif"/></div></figure><pre class="km kn ko kp fd ls lt lu lv aw lw bi"><span id="46af" class="jk jl hi lt b fi lx ly l lz ma">import cv2</span><span id="499f" class="jk jl hi lt b fi mb ly l lz ma">def show_image(image):<br/>    '''function just to display images simultaneously '''<br/>    cv2.imshow('image',image)<br/>    c = cv2.waitKey(300)<br/>    if c &gt;= 0 : return -1<br/>    return 0</span><span id="c3b9" class="jk jl hi lt b fi mb ly l lz ma">image  = cv2.imread('test.jpeg')<br/>for i in range(1,50,2):<br/>    blur = cv2.medianBlur(image,i,0)<br/>    t = show_image(blur)<br/>    if t !=0 :<br/>        break<br/>cv2.destroyAllWindows()</span></pre><p id="1d7c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">双边过滤器</p><p id="8730" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">许多滤波器的问题是它滤除了噪声，但有时边缘也是一个问题，这是对象检测等中的机器学习。为了解决这个问题，双边滤波器考虑高斯滤波器和范围(强度滤波器)。高斯滤波器去除图像的噪声成分，范围滤波器保留边缘</p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es ne"><img src="../Images/3bd4a7b803f95926cd9eb706ffd90147.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*UqObvSPX37idh2xvjH4lXA.png"/></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">来源—<a class="ae kx" href="https://tinyurl.com/ycwebk25" rel="noopener ugc nofollow" target="_blank">https://tinyurl.com/ycwebk25</a></figcaption></figure><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es lr"><img src="../Images/5c229fd6deffe18bc1f804923759ce8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*QB08tOHc_x5ARi7FA02ceQ.gif"/></div></figure><pre class="km kn ko kp fd ls lt lu lv aw lw bi"><span id="12a8" class="jk jl hi lt b fi lx ly l lz ma">import cv2</span><span id="976e" class="jk jl hi lt b fi mb ly l lz ma">def show_image(image):<br/>    '''function just to display images simultaneously '''<br/>    cv2.imshow('image',image)<br/>    c = cv2.waitKey(300)<br/>    if c &gt;= 0 : return -1<br/>    return 0</span><span id="2dea" class="jk jl hi lt b fi mb ly l lz ma">image  = cv2.imread('test.jpeg')<br/>for i in range(1,50,2):<br/>    blur = cv2.bilateralFilter(image, i, i * 2, i / 2)<br/>    t = show_image(blur)<br/>    if t !=0 :<br/>        break<br/>cv2.destroyAllWindows()</span></pre><p id="5445" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">不同核大小的滤波器对盐噪声的比较</strong></p><p id="c4ab" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">下面是图像噪声可以通过实验滤波器的各种参数来降低的示例表示</p><figure class="km kn ko kp fd kq er es paragraph-image"><div role="button" tabindex="0" class="ng nh di ni bf nj"><div class="er es nf"><img src="../Images/d7977af83dc81efd1702b73e6089bb9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BYhANv5m95gdqbfFIg8Msg.jpeg"/></div></div></figure><p id="0e91" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">参考</strong> - <br/> 1。<a class="ae kx" href="https://docs.opencv.org/master/dc/dd3/tutorial_gausian_median_blur_bilateral_filter.html" rel="noopener ugc nofollow" target="_blank"><em class="kk">https://docs . opencv . org/master/DC/dd3/tutorial _ Gaussian _ median _ blur _ bias _ filter . html</em></a><em class="kk"><br/>2 .</em><a class="ae kx" href="https://www.researchgate.net/figure/Flowchart-of-a-bilateral-filter_fig2_318968983" rel="noopener ugc nofollow" target="_blank">https://www . researchgate . net/figure/flow trade-of-a-双边-filter _ fig 2 _ 318968983</a><em class="kk"><br/>3 .</em><a class="ae kx" href="https://www.southampton.ac.uk/~msn/book/new_demo/median/" rel="noopener ugc nofollow" target="_blank">https://www.southampton.ac.uk/~msn/book/new_demo/median/</a><em class="kk"><br/>4。</em><a class="ae kx" href="https://support.cognex.com/docs/cvl_900/web/EN/cvl_vision_tools/Content/Topics/VisionTools/Gaussian_Convolution.htm" rel="noopener ugc nofollow" target="_blank">https://support . cognex . com/docs/CVL _ 900/web/EN/CVL _ vision _ tools/Content/Topics/vision tools/Gaussian _ convolution . htm</a>T22】5 .<a class="ae kx" href="https://wiki.analytica.com/index.php?title=Normal_distribution" rel="noopener ugc nofollow" target="_blank">https://wiki.analytica.com/index.php?title =正态分布</a></p></div></div>    
</body>
</html>