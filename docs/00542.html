<html>
<head>
<title>Dockerizing a Simple Python Flask Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对一个简单的Python Flask应用程序进行Dockerizing</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/dockerizing-a-simple-python-flask-application-ddc509da6781?source=collection_archive---------4-----------------------#2019-07-25">https://medium.com/analytics-vidhya/dockerizing-a-simple-python-flask-application-ddc509da6781?source=collection_archive---------4-----------------------#2019-07-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="91c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对一个简单的python flask应用程序进行docker化是一项简单易行的任务，有助于理解docker文件的基础知识，并掌握python-flask的概念。对于这个任务，我们将使用一个基本的<strong class="ih hj"> hello world </strong> flask应用程序</p><h1 id="de80" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">DOCKER文件的解释</h1><p id="b6a7" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">下面是为应用程序设置docker映像的完整docker文件。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="50d1" class="kp je hi kl b fi kq kr l ks kt">FROM python:alpine3.7<br/>MAINTAINER Syed Saad Ahmed, syedsaadahmed2094.sa@gmail.com<br/>COPY . /app<br/>WORKDIR /app<br/>RUN pip install -r requirements.txt<br/>EXPOSE 5000<br/>CMD python ./index.py</span></pre><h2 id="18b2" class="kp je hi bd jf ku kv kw jj kx ky kz jn iq la lb jr iu lc ld jv iy le lf jz lg bi translated"><code class="du lh li lj kl b">FROM python:alpine3.7</code></h2><p id="bd84" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">FROM命令用于说明您打算将什么操作系统用作基本映像。在这一行中，我们从alpine 3.7 python image继承了我们的图像，因为我们将部署python应用程序，所以我们使用了alpine python image。</p><h2 id="3935" class="kp je hi bd jf ku kv kw jj kx ky kz jn iq la lb jr iu lc ld jv iy le lf jz lg bi translated"><code class="du lh li lj kl b">MAINTAINER Syed Saad Ahmed, syedsaadahmed2094.sa@gmail.com</code></h2><p id="9e0a" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">特定文档维护者的姓名或其他信息。</p><h2 id="9407" class="kp je hi bd jf ku kv kw jj kx ky kz jn iq la lb jr iu lc ld jv iy le lf jz lg bi translated"><code class="du lh li lj kl b">COPY . /app</code></h2><p id="724d" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">要将文件从Docker主机复制到Docker映像，可以使用copy命令。我们正在将目录中的所有文件复制到位于<em class="lk"> /app </em>的docker映像中</p><h2 id="f0da" class="kp je hi bd jf ku kv kw jj kx ky kz jn iq la lb jr iu lc ld jv iy le lf jz lg bi translated"><code class="du lh li lj kl b">WORKDIR /app</code></h2><p id="d0f2" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">WORKDIR允许您在Docker构建映像时更改目录，新目录仍然是其余构建指令的当前目录。</p><h2 id="2ffc" class="kp je hi bd jf ku kv kw jj kx ky kz jn iq la lb jr iu lc ld jv iy le lf jz lg bi translated"><code class="du lh li lj kl b">RUN pip install -r requirements.txt</code></h2><p id="ce84" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">在构建Docker映像时，您可能需要运行命令，例如安装应用程序和软件包作为映像的一部分。</p><h2 id="45cb" class="kp je hi bd jf ku kv kw jj kx ky kz jn iq la lb jr iu lc ld jv iy le lf jz lg bi translated"><code class="du lh li lj kl b">EXPOSE 5000</code></h2><p id="5a80" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">您将使用EXPOSE命令来选择哪些端口应该可用于与容器通信。当运行Docker容器时，可以传入-p参数publish，它类似于EXPOSE命令。</p><h2 id="791e" class="kp je hi bd jf ku kv kw jj kx ky kz jn iq la lb jr iu lc ld jv iy le lf jz lg bi translated"><code class="du lh li lj kl b">CMD python ./index.py</code></h2><p id="e283" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">Docker只能运行一个CMD命令。因此，如果您插入两条或多条CMD指令，Docker只会运行最后一条指令，即最近的一条指令。ENTRYPOINT类似于CMD，但是，您可以在启动时运行命令，它不会覆盖您在ENTRYPOINT定义的指令。</p><h1 id="6a06" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">执行应用程序</h1><h2 id="3049" class="kp je hi bd jf ku kv kw jj kx ky kz jn iq la lb jr iu lc ld jv iy le lf jz lg bi translated">首先构建docker映像</h2><p id="0a7a" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated"><code class="du lh li lj kl b">docker build -t sample_image .</code></p><p id="4c18" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，sample_image是Docker图像的名称。你可以给它另一个名字。圆点(。)表示您正在处理的文件位于当前目录中。</p><h2 id="4ab0" class="kp je hi bd jf ku kv kw jj kx ky kz jn iq la lb jr iu lc ld jv iy le lf jz lg bi translated">运行docker容器</h2><p id="7d75" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated"><code class="du lh li lj kl b">docker run -itd --name python-app -p 5000:5000 sample_image</code></p><p id="d85e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，python-app是你将要启动的容器的名字，docker run有-i、-t、-d等多个标志，你可以在docker官方文档<a class="ae ll" href="https://docs.docker.com/engine/reference/commandline/run/" rel="noopener ugc nofollow" target="_blank">这里</a>探究一下，-p标志用于向主机发布/公开容器的端口。</p><h2 id="6fa9" class="kp je hi bd jf ku kv kw jj kx ky kz jn iq la lb jr iu lc ld jv iy le lf jz lg bi translated">这是输出</h2><p id="6bd8" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated"><code class="du lh li lj kl b"><a class="ae ll" href="https://localhost:5000/" rel="noopener ugc nofollow" target="_blank">https://localhost:5000/</a></code></p><h2 id="1e0f" class="kp je hi bd jf ku kv kw jj kx ky kz jn iq la lb jr iu lc ld jv iy le lf jz lg bi translated">检查应用程序的日志</h2><p id="62e0" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated"><code class="du lh li lj kl b">docker logs &lt;container_id&gt;</code></p><p id="e204" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，这里是github资源库的URL，用于完整的应用程序和设置。https://github.com/syedsaadahmed/Dockerizing_Python_App<br/>T3</p></div></div>    
</body>
</html>