<html>
<head>
<title>Plotting millions of points — Datashader</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">绘制数百万个点— Datashader</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/plotting-millions-of-points-datashader-1b9bb147a02a?source=collection_archive---------5-----------------------#2020-03-23">https://medium.com/analytics-vidhya/plotting-millions-of-points-datashader-1b9bb147a02a?source=collection_archive---------5-----------------------#2020-03-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="d27e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最近，我在寻找一些Python库，它们可以轻松处理大型数据集，并允许交互以更好地了解数据。这个故事会给你一些快速的例子，告诉你如何使用Datashader来实现题目中的语句。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="78f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想看代码，去Github或者用T2活页夹启动Jupyter笔记本。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="f4ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">像Matplotlib这样的基本库可以处理相当多的数据，但是没有提供与图形交互的机会。在另一端，像Plotly或Bokeh这样的库很容易交互，但只有当数据长度没有达到极限时(T4 Bokeh大约30万点，Plotly<a class="ae jk" href="https://plot.ly/python/webgl-vs-svg/" rel="noopener ugc nofollow" target="_blank">大约1千点)。当数据超过这个库的限制，而我们仍然希望从交互性中获益时，该怎么办？</a></p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><h1 id="f0cf" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">holo viz——holo views和Datashader等</h1><p id="63fe" class="pw-post-body-paragraph if ig hi ih b ii kj ik il im kk io ip iq kl is it iu km iw ix iy kn ja jb jc hb bi translated"><a class="ae jk" href="https://holoviz.org/" rel="noopener ugc nofollow" target="_blank"> Holoviz </a>是一组开源库，它创建了一个伟大的生态系统，用于绘制和提供这些图作为应用程序/仪表板。</p><blockquote class="ko kp kq"><p id="466c" class="if ig kr ih b ii ij ik il im in io ip ks ir is it kt iv iw ix ku iz ja jb jc hb bi translated">HoloViews专注于将您的数据与适当的元数据捆绑在一起，以支持分析和可视化，使您的原始数据<em class="hi">和</em>在任何时候都可以平等地访问。对于那些习惯于传统数据处理和绘图工具的人来说，这个过程可能并不熟悉，本入门指南旨在从较高的层面演示它是如何工作的。关于每个主题的更多详细信息，请参见<a class="ae jk" href="https://holoviews.org/user_guide/" rel="noopener ugc nofollow" target="_blank">用户指南。</a></p></blockquote><p id="2fd1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Holoviz的一个库是<a class="ae jk" href="https://datashader.org/" rel="noopener ugc nofollow" target="_blank"> Datashader </a>，它允许扩展像Plotly或Bokeh这样的库的功能，以显示超过其默认点数限制的内容。</p><blockquote class="ko kp kq"><p id="2ce6" class="if ig kr ih b ii ij ik il im in io ip ks ir is it kt iv iw ix ku iz ja jb jc hb bi translated">Datashader是一个用于分析和可视化大型数据集的<a class="ae jk" href="https://github.com/bokeh/datashader/" rel="noopener ugc nofollow" target="_blank">开源</a> Python 2和3库。具体来说，Datashader旨在将数据集“栅格化”或“聚合”成可以作为图像查看的规则网格，从而可以简单快速地查看数据的属性和模式。Datashader可以在16GB的笔记本电脑上一秒钟左右绘制10亿个点，并且可以轻松扩展到核外、分布式或GPU处理，以处理更大的数据集。</p></blockquote><p id="8390" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以将来自<a class="ae jk" href="https://dask.org/" rel="noopener ugc nofollow" target="_blank"> Dask </a>数据框的数据直接传递给Holoviews，从而轻松绘制大量数据。</p><p id="6976" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是如何用交互式工具在几毫秒内绘制300万个点的示例片段，Bokeh提供了开箱即用的工具。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="495e" class="le jm hi la b fi lf lg l lh li">import pandas as pd<br/>import numpy as np<br/>from dask import dataframe as dd<br/>import holoviews as hv<br/>from holoviews.operation.datashader import datashade<br/><br/>hv.extension('bokeh')<br/><br/><br/>def get_data():<br/>    x = pd.date_range(start='1990-01-01', freq='1min', periods=3000000)<br/>    y = np.sin(np.linspace(0, 8 * np.pi, len(x)))<br/>    df = pd.DataFrame(y, index=x)<br/>    return dd.from_pandas(df, npartitions=8)<br/><br/>df = get_data()<br/>points = hv.Points((df.index, df[0]))</span><span id="94ee" class="le jm hi la b fi lj lg l lh li">sin_plot = datashade(points).opts(height=300, responsive=True)<br/></span></pre><figure class="kv kw kx ky fd ll er es paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="er es lk"><img src="../Images/7830f1c0911e1ddb00bdbecf61fdbe73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zQCdNyHUZL-NeS0ytYsvEA.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">正弦图的结果</figcaption></figure><p id="c584" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将创建更多的片段和例子来展示HoloViews的一些功能，等等。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="fee0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">附:给我反馈，如果你想看到一些具体的✌️</p></div></div>    
</body>
</html>