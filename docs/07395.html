<html>
<head>
<title>Using Tesseract with python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过python使用Tesseract</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/using-tesseract-with-python-1cadbe37e756?source=collection_archive---------7-----------------------#2020-06-24">https://medium.com/analytics-vidhya/using-tesseract-with-python-1cadbe37e756?source=collection_archive---------7-----------------------#2020-06-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/0bc944af0d8cc0b27c0c2b9d9ae4ed45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*_2nsdmjpH6VsGp1imcJJqQ.png"/></div></figure><p id="cbbd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Tesseract-ocr是用于各种操作系统的光学字符识别引擎。它是自由软件，在Apache许可下发布。并于2005年开源，自2006年以来一直由谷歌赞助。</p><p id="e14f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这个引擎有它的二进制文件，一个CLI程序，它的原始API是用C++制作的。其他编程语言有自己的库，这些库充当CLI程序或C++上原始tesseract API的包装器。</p><p id="292b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在本文中，我们将讨论在python中使用tesseract的不同选项(它们的安装、执行不同的API端)以及在使用过程中遇到的一些重要问题。</p><blockquote class="jk jl jm"><p id="717c" class="im in jn io b ip iq ir is it iu iv iw jo iy iz ja jp jc jd je jq jg jh ji jj hb bi translated">在python中有两个最流行的选项:pytesseract和tesserocr。</p><p id="6a69" class="im in jn io b ip iq ir is it iu iv iw jo iy iz ja jp jc jd je jq jg jh ji jj hb bi translated">tesserocr是围绕Tesseract C++ API的python包装器。另一方面，pytesseract是tesserac-ocr CLI程序的包装器。</p><p id="7b68" class="im in jn io b ip iq ir is it iu iv iw jo iy iz ja jp jc jd je jq jg jh ji jj hb bi translated">正如你可以猜到的，tesserocr提供了更多的灵活性和对tesseract的控制。Tesserocr具有多处理能力，在实际应用中比PyTesseract快得多。</p></blockquote><p id="3cc4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">根据您的使用情况，您可能需要旧的软件包3.05或最新的宇宙魔方版本4+。例如，tesseract 4.0不提供已识别文本的字体信息，因此您需要旧版本来收集这些信息。</p><h2 id="816f" class="jr js hi bd jt ju jv jw jx jy jz ka kb ix kc kd ke jb kf kg kh jf ki kj kk kl bi translated">通用设置:</h2><p id="ca5f" class="pw-post-body-paragraph im in hi io b ip km ir is it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj hb bi translated">为了尝试这些例子，您需要安装<a class="ae kr" href="https://www.anaconda.com/products/individual" rel="noopener ugc nofollow" target="_blank"> anaconda </a>来管理包和环境变量。<br/>安装完成后，创建一个新的python安装环境，这是所使用的tesseract版本所要求的(注意:对于我们的示例，使用python 3.7)，并在每次运行任何示例时激活该环境:</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="b71a" class="jr js hi kx b fi lb lc l ld le"><strong class="kx hj">create environment:</strong> conda create -n tesseractEnvironment python=3.7<br/><strong class="kx hj">activate environment: </strong>conda activate tesseractEnvironment</span></pre><h1 id="1748" class="lf js hi bd jt lg lh li jx lj lk ll kb lm ln lo ke lp lq lr kh ls lt lu kk lv bi translated">宇宙魔方</h1><p id="84e1" class="pw-post-body-paragraph im in hi io b ip km ir is it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj hb bi translated">要使用任何tesseract python包装器，我们需要首先安装tesseract-ocr。要在Debian/Ubuntu上安装tesseract:</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="2102" class="jr js hi kx b fi lb lc l ld le">sudo apt install tesseract-ocr<br/>sudo apt install libtesseract-dev</span></pre><p id="a99f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> <em class="jn">注意:</em> </strong> <em class="jn">以上命令行将安装最新可用版本的tesseract-ocr，即tesseract 4。如果您想使用3.05这样的早期版本，您必须手动编译tesseract存储库，如果您想提取文本的字体相关信息，这可能是必要的，如果手动编译tesseract 3.05太复杂，那么我们将进一步讨论一个解决方案来完成设置。</em></p><p id="48e0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">对于windows安装检查:<a class="ae kr" href="https://github.com/UB-Mannheim/tesseract/wiki" rel="noopener ugc nofollow" target="_blank">https://github.com/UB-Mannheim/tesseract/wiki</a></p><p id="c4a1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">宇宙魔方具有各种类型的预训练模型，这些模型在速度和准确性之间具有折衷，如果要使用的话，这些模型将与宇宙魔方-ocr路径一起提供。这些模型包括:<br/> 1。tessdata(适用于传统宇宙魔方，即3.05) <br/> 2。tessdata_best(最新版本)<br/> 3。tessdata_fast(最新版本)<br/>根据您的使用案例下载tessdata预训练模型。默认情况下，你不需要担心tessdata的设置，因为默认的tessdata可用于tesserac t-ocr【https://github.com/tesseract-ocr/tesseract-ocr.github.io】参考:<a class="ae kr" href="https://github.com/tesseract-ocr/tesseract-ocr.github.io" rel="noopener ugc nofollow" target="_blank">了解更多信息</a></p><p id="d02f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，我们将先看看PyTesseract的一些API，然后再看看Tesserocr <br/>本文将涵盖以下部分的主题:<br/> 1 .设置<br/> 2。暴露的API描述<br/> 3。代码片段示例</p><h1 id="8cb6" class="lf js hi bd jt lg lh li jx lj lk ll kb lm ln lo ke lp lq lr kh ls lt lu kk lv bi translated">宇宙魔方</h1><p id="cb3f" class="pw-post-body-paragraph im in hi io b ip km ir is it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj hb bi translated"><strong class="io hj">设置:<br/> </strong>用于在您的环境中安装Pytesseract:</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="6049" class="jr js hi kx b fi lb lc l ld le">conda install -c conda-forge pytesseract</span></pre><p id="3f36" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果tesseract不在您的路径中，您必须在代码中使用pytessera CT . pytessera CT . tessera CT _ cmd变量提供安装路径。</p><h2 id="ae37" class="jr js hi bd jt ju jv jw jx jy jz ka kb ix kc kd ke jb kf kg kh jf ki kj kk kl bi translated">API描述</h2><p id="f1ec" class="pw-post-body-paragraph im in hi io b ip km ir is it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj hb bi translated">pytesseract公开了以下流行的API:<br/>1。pytesserac t . image _ to _ string(image)返回图像中识别的文本<br/> 2。pytesserac t . image _ to _ boxes(image)每个识别单词的包围盒<br/> 3。pytesserac t . image _ to _ data(image)与已识别单词的尺寸、线条、段落信息相关的数据<br/> 4。pytesseract.image_to_osd(image)置信度和其他页面相关信息<br/> 5。pytesserac t . image _ to _ pdf _ or _ hocr(image，extension='pdf' /'hocr ')图像或xml格式信息的pdf格式</p><h2 id="0e5a" class="jr js hi bd jt ju jv jw jx jy jz ka kb ix kc kd ke jb kf kg kh jf ki kj kk kl bi translated">代码片段示例</h2><p id="5fa0" class="pw-post-body-paragraph im in hi io b ip km ir is it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj hb bi translated">运行下面的代码片段来更好地了解API<br/><em class="jn">注意:如果下面的代码片段不起作用，请在tesseract_cmd变量中提供tesseract可执行文件的路径。</em></p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="lw lx l"/></div></figure><h1 id="328a" class="lf js hi bd jt lg lh li jx lj lk ll kb lm ln lo ke lp lq lr kh ls lt lu kk lv bi translated">TesserOCR</h1><p id="3e04" class="pw-post-body-paragraph im in hi io b ip km ir is it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj hb bi translated">安装最新的稳定版本，但如果你想提取字体信息，你需要使用tesserocr v2.3.1，因为它与tesseract3.05兼容。</p><h2 id="afa3" class="jr js hi bd jt ju jv jw jx jy jz ka kb ix kc kd ke jb kf kg kh jf ki kj kk kl bi translated">设置</h2><p id="78bd" class="pw-post-body-paragraph im in hi io b ip km ir is it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj hb bi translated">在您的环境中安装tesserocr:</p><p id="57b9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Debian/Ubuntu:</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="b784" class="jr js hi kx b fi lb lc l ld le"><strong class="kx hj">tesserocr latest:</strong> conda install -c conda-forge tesserocr<br/><strong class="kx hj">tesserocr v2.3.1: </strong>conda install -c mcs07 tesserocr <br/>or <a class="ae kr" href="https://anaconda.org/mcs07/tesserocr/2.3.1/download/linux-64/tesserocr-2.3.1-py36h6bb024c_0.tar.bz2" rel="noopener ugc nofollow" target="_blank">https://anaconda.org/mcs07/tesserocr/2.3.1/download/linux-64/tesserocr-2.3.1-py36h6bb024c_0.tar.bz2</a></span></pre><p id="a766" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">窗口:</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="bd72" class="jr js hi kx b fi lb lc l ld le"><strong class="kx hj">tesserocr latest:</strong> conda install -c simonflueckiger tesserocr<br/><strong class="kx hj">tesserocr v2.3.1: </strong>conda install -c simonflueckiger/label/tesseract-3.5.2 tesserocr</span></pre><h2 id="028f" class="jr js hi bd jt ju jv jw jx jy jz ka kb ix kc kd ke jb kf kg kh jf ki kj kk kl bi translated">API描述</h2><p id="4e74" class="pw-post-body-paragraph im in hi io b ip km ir is it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj hb bi translated">Tesserocr有以下有用的API:<br/>1。tesse rocr . image _ to _ text(image)<br/>2。PyTessBaseAPI()getutf 8 text()<br/>3。PyTessBaseAPI()。MeanTextConf() <br/> 4。PyTessBaseAPI()。DetectOrientationScript() <br/>上面的API非常简单，通过文档<a class="ae kr" href="https://github.com/sirfz/tesserocr" rel="noopener ugc nofollow" target="_blank"><em class="jn"/></a><em class="jn">可以很容易地理解这些示例。</em></p><p id="1784" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我要研究的课题是如何提取字体数据。通过尝试下面的脚本，您可以得到一个很好的想法。<br/> <em class="jn">注意:如果您想使用某个特定的预训练模型，请提供path变量中正在使用的tessdata路径。</em></p><figure class="ks kt ku kv fd ij"><div class="bz dy l di"><div class="lw lx l"/></div></figure><p id="9dad" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">要检查所有的tessera CT c++ API，请查看:<a class="ae kr" href="https://tesseract-ocr.github.io/" rel="noopener ugc nofollow" target="_blank">https://tesseract-ocr.github.io/</a>。这些也可以与tesserocr一起使用。</p><p id="01bd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们已经到了这个环节的尾声。希望你喜欢并发现这篇文章有用！！</p></div></div>    
</body>
</html>