<html>
<head>
<title>Deploying Django Apps on Heroku</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Heroku上部署Django应用程序</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/deploying-django-apps-on-heroku-9ba204f67e38?source=collection_archive---------17-----------------------#2020-09-09">https://medium.com/analytics-vidhya/deploying-django-apps-on-heroku-9ba204f67e38?source=collection_archive---------17-----------------------#2020-09-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/ea07fee3854b8f6c1c3ccd0bdd7deaed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zH4kFathnqaYQRJtXQ1E7A.jpeg"/></div></div></figure><p id="7f8d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">嗨，读者们，我相信你们做得很好。我又看到了另一篇关于在Heroku上部署Django网站的文章。部署是网站的一个非常重要的部分，如果不小心进行的话会很累。在本文中，我们将学习在Heroku上部署一个django网站，让我们开始吧。</p><p id="637e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我将部署我创建的todo_list站点。你可以使用你自己的站点或者克隆我的todo_list项目。这里是<a class="ae jo" href="https://github.com/4k45hv3rm4/Todo_list" rel="noopener ugc nofollow" target="_blank">链接</a></p><p id="3c16" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">安装虚拟环境:- </strong></p><p id="2647" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">virtualenv是一个工具，用于创建隔离的Python环境，使我们的项目配置与系统和其他项目隔离开来。您可以在windows中使用下面的命令安装它。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="5ead" class="jy jz hi ju b fi ka kb l kc kd">pip install virtualenv</span></pre><p id="4ee3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">安装git:——</strong>git是一个版本控制系统，可以快速高效地处理大型和小型项目。我们会要求它把密码发送给heroku。</p><p id="6168" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用这个<a class="ae jo" href="https://git-scm.com/download/win" rel="noopener ugc nofollow" target="_blank">链接</a>在windows中下载git</p><p id="d6f1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下载后，在命令提示符下使用以下命令检查它是否正确安装。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="bdf4" class="jy jz hi ju b fi ka kb l kc kd">git --version<br/>git version 1.7.7.3  <!-- -->#would return something like this</span></pre><p id="94a3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，要在heroku上部署我们的应用程序，我们需要一个heroku帐户，</p><p id="8503" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们创建一个，转到<a class="ae jo" href="https://signup.heroku.com/" rel="noopener ugc nofollow" target="_blank">链接</a>为自己创建一个新的heroku帐户并安装heroku CLI。</p><p id="22a2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">登录heroku CLI </strong></p><p id="f096" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">heroku CLI安装完成后，进入您的终端或命令提示符并运行</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="89de" class="jy jz hi ju b fi ka kb l kc kd">heroku login</span></pre><p id="2d4f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上面的命令将提示你输入你的heroku证书，如电子邮件和密码，并允许你登录到你的heroku个人资料。</p><p id="0b93" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在转到你的项目根目录，将项目复制到系统中的另一个目录，并使用下面的virtualenv命令创建一个虚拟环境</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="6b29" class="jy jz hi ju b fi ka kb l kc kd">python -m venv env #create virtualenv env<br/>env\Scripts\activate #activate virtualenv env</span></pre><p id="4107" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">或者，如果您已经从github link克隆了项目，那么也要围绕它创建一个虚拟环境。</p><p id="07f5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">安装其他包或库，如果你有其他包，如requests，Pillow等，使用下面的命令安装它</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="114f" class="jy jz hi ju b fi ka kb l kc kd">pip install package_name</span></pre><p id="86a8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦安装了所有的包，我们必须更新purr requirements.txt文件</p><p id="d192" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在终端中运行以下命令，</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="0712" class="jy jz hi ju b fi ka kb l kc kd">pip freeze&gt;requirements.txt</span></pre><p id="1279" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将在我们的根项目文件夹中添加更新的requirements.txt文件和包名，因为heroku将使用该文件来识别包需求。</p><p id="e490" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在快跑</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="214c" class="jy jz hi ju b fi ka kb l kc kd">python manage.py runserver <br/> </span></pre><p id="7436" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将在本地环境中成功运行我们的项目，如果您遇到任何错误，说数据库中没有表，这可能是由于迁移，您可以在这里运行迁移，或者直接在heroku bash中运行迁移，我们稍后会这样做，我建议稍后再做，以避免一些冲突。</p><p id="57a9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">制作Procfile :- </strong>这个文件用于显式声明应用程序的进程类型和入口点。它必须位于您的存储库或项目文件夹的根目录中。</p><p id="4e81" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在您的根项目文件夹中，创建一个名为Procfile的文件(名称完全相同)</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="5d8e" class="jy jz hi ju b fi ka kb l kc kd">Procfile</span><span id="0aa3" class="jy jz hi ju b fi ke kb l kc kd">web: gunicorn myproject_name.wsgi<!-- --> </span></pre><p id="e372" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">安装guni corn:——</strong>这改进了我们的部署流程，使其快速高效。使用以下命令安装gunicorn</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="cb29" class="jy jz hi ju b fi ka kb l kc kd">pip install gunicorn</span></pre><p id="6785" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">安装</strong><a class="ae jo" href="https://github.com/heroku/django-heroku" rel="noopener ugc nofollow" target="_blank"><strong class="is hj">django-heroku</strong></a><strong class="is hj">:—</strong><a class="ae jo" href="https://github.com/heroku/django-heroku" rel="noopener ugc nofollow" target="_blank">Django-Heroku</a>包自动配置您的Django应用程序在Heroku上工作。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="c9e1" class="jy jz hi ju b fi ka kb l kc kd">#installing django-heroku<br/>pip install django-heroku</span></pre><p id="eebf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将django_heroku添加到settings.py文件</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="947a" class="jy jz hi ju b fi ka kb l kc kd">#settings.py</span><span id="3b32" class="jy jz hi ju b fi ke kb l kc kd">import django_heroku # at the top</span><span id="49fb" class="jy jz hi ju b fi ke kb l kc kd">...<br/>...<br/>..<br/># Activate Django-Heroku.<br/>django_heroku.settings(locals())   #at bottom of settings.py file</span></pre><p id="3433" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建heroku应用程序</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="0650" class="jy jz hi ju b fi ka kb l kc kd">heroku create app_name ## creating heroku app </span><span id="5393" class="jy jz hi ju b fi ke kb l kc kd">....</span><span id="5ac8" class="jy jz hi ju b fi ke kb l kc kd">#Terminal will be seen with something like this <br/>Creating app... done, ⬢ app_name<br/>https://git.heroku.com/app_name.git<!-- --> </span></pre><p id="6d99" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦以上事情完成，我们需要添加一个远程git repo到我们的heroku应用程序，我们可以使用以下命令。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="0fb2" class="jy jz hi ju b fi ka kb l kc kd">heroku git:remote -a app_name <br/>#Terminal will be seen with something like this<br/>set git remote heroku to https://git.heroku.com/app_name.git</span></pre><p id="d93a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将您的代码文件添加到远程github存储库中，</p><p id="54a1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以用。gitnore文件，以自动从临时区域删除不需要的文件</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="3c2c" class="jy jz hi ju b fi ka kb l kc kd">git status  #to check which files have been staged <br/>git add -A # to add all  code files at once<br/>git commit -m "initial message" # to commit code files to remote repository . </span></pre><p id="5392" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">代码文件提交完成后，使用以下命令推送代码</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="6a28" class="jy jz hi ju b fi ka kb l kc kd">git push heroku master<br/>#Terminal will be seen with something like this <br/>...<br/>...<br/>Initializing repository, done.<br/>updating 'refs/heads/master'<br/>...<br/>once this is complete you can got to the your app link generated by heroku and see your site live. </span></pre><p id="1e4c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您的站点中没有用户表或会话表错误，那是因为我们没有迁移数据库，您需要迁移数据库。</p><p id="944a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在命令行运行中</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="1092" class="jy jz hi ju b fi ka kb l kc kd">heroku run bash </span></pre><p id="825a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将打开一个python运行时，就像我们在本地django orm中一样，使用它将模型文件迁移到数据库。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="8e54" class="jy jz hi ju b fi ka kb l kc kd">python manage.py makemigrations app_name <br/>python manage.py migrate  </span></pre><p id="9f34" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在去你的网站，这必须完成，你会看到你的网站生活</p><p id="3f39" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">感谢你阅读这篇文章，我希望你发现它有用，请在评论区告诉我，如果你喜欢它，请鼓掌。快乐编码。</p></div></div>    
</body>
</html>