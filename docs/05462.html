<html>
<head>
<title>Building Covid-19 Dashboard with React.js and Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React.js和Node.js构建新冠肺炎仪表板</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/building-covid-19-dashboard-with-react-js-and-node-js-bf3bddd7954b?source=collection_archive---------7-----------------------#2020-04-22">https://medium.com/analytics-vidhya/building-covid-19-dashboard-with-react-js-and-node-js-bf3bddd7954b?source=collection_archive---------7-----------------------#2020-04-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/7ad487e5220e05674c46cef7c226d050.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8ypCYwm1mU7SMQJ0cl75Aw.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">巴基斯坦戈拉克山的日出</figcaption></figure><p id="7035" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi js translated"><span class="l jt ju jv bm jw jx jy jz ka di">好的</span>这么锁着不好！你不能做任何事情，不能长途驾驶，不能见朋友等等。尽管我是高度内向的人，但实际上我厌倦了盯着墙看。所以为了结束这一切，我决定为我们造成的所有疾病建造一些东西。这个帖子其实就是关于这个的。我们开始吧</p></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><p id="5e84" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">出于对数据的热爱，我考虑过制作新冠肺炎仪表板。与数据打交道是最让我兴奋的事情。现在，在商业智能工具上制作一个仪表板比自己编写所有酷的东西更容易。所以我选择了全栈开发，而不是Tableau或Power BI等。下面是我们得出的最终仪表板的屏幕截图:</p><figure class="kj kk kl km fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ki"><img src="../Images/8dced04f7d36519280fc7b8ad756738b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eAl4pV26RII5BnIn6ciOBg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">最终仪表板。这里，我遗漏了我们也创建的折线图</figcaption></figure><blockquote class="kn ko kp"><p id="93d2" class="iu iv kq iw b ix iy iz ja jb jc jd je kr jg jh ji ks jk jl jm kt jo jp jq jr hb bi translated">重要的事情先来。我们需要数据。从哪里来的？我给了谷歌一个尝试，想出了一些API。由于这只是我的业余项目，我选择了一个免费的API。你可以在这里找到<a class="ae ku" href="https://rapidapi.com/api-sports/api/covid-193" rel="noopener ugc nofollow" target="_blank">。这是一个免费的API，会给我们所有我们需要的东西。我们得到统计数据，历史和所有它支持的国家。由于我们有两个API，我将这个获取数据的API称为<strong class="iw hj">外部API </strong>。现在所需要的就是把这些东西连接起来！</a></p></blockquote><p id="f301" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来我们要做的是什么？我决定去ERN，而不是MERN，因为我跳过了M ie MongoDB或MySQL。目前不需要存储数据。于是我们有了<strong class="iw hj">E</strong>(Express framework)<strong class="iw hj">R</strong>(react . js)和<strong class="iw hj"> N </strong> (Node.js)。<em class="kq">作为一名专业开发人员，我通常会使用Angular和ASP.NET/Spring Boot内核，所以在这里我决定使用不同的堆栈。</em></p></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><p id="2f94" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来让我们首先从Node.js API开始。不需要一个API调用另一个API来获取数据。我介绍的原因可以在改进部分找到。代码非常简单。我们有一些简单的路线，接受来自前端应用程序的数据，查询上述API并返回结果。唯一的问题是当两个应用程序在不同的主机上时，我们可能会遇到Cors。下面提到的一个简单的调整就可以解决这个问题。API的构建并没有花费很长时间。准确地说，所有人都接到了电话。</p><figure class="kj kk kl km fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kv"><img src="../Images/a1689ec8b5c5662b89d8b7b13db7ff6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0ooMTKn5U1BCk5neCad9FA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">在Node.js应用程序中处理Cors</figcaption></figure></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><p id="9650" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来是前端应用。这就是奇迹发生的地方。因为我正在使用React JS，所以我需要从组件的角度来考虑。假设:我有一个列表组件，可以显示所有不同的国家，也可以是仪表板图表的组件。有许多方法来组织应用程序组件。我的组件很简单:一个<strong class="iw hj">主组件、一个列表组件</strong>和一个<strong class="iw hj">图表组件。</strong>main Component充当父组件，托管列表和图表组件。</p><figure class="kj kk kl km fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kw"><img src="../Images/52062d76963a3ffb6d6ed3bb3363b478.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FmpZcIylNVrNarnVPsUOAg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">在React.js中回调</figcaption></figure><blockquote class="kn ko kp"><p id="92e2" class="iu iv kq iw b ix iy iz ja jb jc jd je kr jg jh ji ks jk jl jm kt jo jp jq jr hb bi translated">一旦选择了一个国家，它就被发送到MainComponent，main component将它委托给ChartsComponent以获取相关数据并呈现图表。我决定使用“axios”库来发出HTTP请求。让这些组件连接起来并一起工作而不产生错误，牢记React JS组件的生命周期方法是需要大量编码技能的地方。</p></blockquote><figure class="kj kk kl km fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kx"><img src="../Images/b86f7937a015d9858de04be251613b18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7KRtOidE78W4Xejl_Uh4Fg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">处理反应堆中的不同组件</figcaption></figure></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><p id="dbb5" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在让我们装饰应用程序。我们需要应用样式。Bootstrap和棱角分明的素材我看多了。所以为了改变，我决定坚持使用Metro UI。你可以在这里找到它的文档<a class="ae ku" href="https://metroui.org.ua/" rel="noopener ugc nofollow" target="_blank"/>。自从我在微软创新中心接受培训以来，我一直很喜欢Metro UI。它可能在手机上看起来不是最好的，但是对于设计网站来说，它是非常不同和独特的。</p><p id="648b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">所以我把它作为CDN导入了。对于所有的网格、下拉组件和字体样式，我都使用了它的CSS。在这之后，我们在我们的仪表板的最后阶段。我们如何渲染图表？</p><blockquote class="kn ko kp"><p id="6909" class="iu iv kq iw b ix iy iz ja jb jc jd je kr jg jh ji ks jk jl jm kt jo jp jq jr hb bi translated">我首先考虑D3.js，但后来坚持使用<a class="ae ku" href="https://www.chartjs.org/" rel="noopener ugc nofollow" target="_blank"> Chart.js </a>。这是sleak，一个轻量级的库，可以使用定制选项呈现漂亮的动画图表。我为我的仪表板选择了折线图、条形图和饼图。棘手的部分是:在呈现任何新的图表之前，需要销毁所有的图表。</p></blockquote><figure class="kj kk kl km fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ky"><img src="../Images/349955dbfb4e80edf43d4ce00a6b80ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EPtcfynZtc0jlGnH83eunQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">显示过去30天观察结果趋势的折线图</figcaption></figure><figure class="kj kk kl km fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ki"><img src="../Images/81fed7d78a77a6271efcb45065f9afa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ue8BnMQpuvnHQjnfl28ykA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">将信息分成三个不同类别的条形图—显示比例对比的饼图</figcaption></figure></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><p id="2bf9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在我们终于完成了Node.js API，在React.js上制作了前端应用程序，并完成了样式和图表。总结时，我意识到这个小仪表板还可以做一些改进。</p><ol class=""><li id="ea2b" class="kz la hi iw b ix iy jb jc jf lb jj lc jn ld jr le lf lg lh bi translated">介绍API和外部API之间的数据存储。结果是，我们可以用我们需要的格式存储数据，因此我们不需要每次都调用API。此外，一旦我们存储了数据，我们可以进一步对其进行分析。</li><li id="b484" class="kz la hi iw b ix li jb lj jf lk jj ll jn lm jr le lf lg lh bi translated">如果Node.js API不存在，我们的前端应用程序只会显示错误消息。但是这可以通过引入图片变得更加互动，比如</li></ol><figure class="kj kk kl km fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/c5f346feb9038da3baa9a9442dc2c0d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*adg1AU5-2js78SD-BhAGSg.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated"><a class="ae ku" href="https://i.ytimg.com/vi/ZxeNo_PTslo/maxresdefault.jpg" rel="noopener ugc nofollow" target="_blank">https://i.ytimg.com/vi/ZxeNo_PTslo/maxresdefault.jpg</a></figcaption></figure><p id="22c2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">3.当我们调用历史端点时，会收到大量数据。我只选取了25个最近的条目来呈现折线图。剩余的数据可以显示在一个表格上，但不知何故，我懒得去处理它！</p><p id="65cc" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">4.我们还可以将日期传递给历史API，它可以只返回该日期的数据。我还没有实现这一点，但这应该是一个很好的补充。</p><p id="332a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">5.加载图表时，不显示进度条。Metro UI带有漂亮的UI组件，有助于进步。你可以在这里找到<a class="ae ku" href="https://metroui.org.ua/progress.html" rel="noopener ugc nofollow" target="_blank">。它们可以根据活动的进度进行切换。</a></p><p id="44ff" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">6.我们还可以制定一个计划作业来每天检索数据。当我们实施了M个MERN堆栈，即数据存储时，这是可能的。</p></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><p id="6fb8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">暂时就这么多。构建这个仪表板实际上不仅帮助我愉快地度过了隔离时间，还提高了我在React.js和Node.js上的技能。我也喜欢设计自己的东西。请随意使用代码并放弃任何回应。你可以在这里找到<a class="ae ku" href="https://github.com/umairk83/covid-19-API" rel="noopener ugc nofollow" target="_blank"> API </a>的代码，在这里找到门户<a class="ae ku" href="https://github.com/umairk83/covid-19-dashboard" rel="noopener ugc nofollow" target="_blank">的代码。</a></p></div></div>    
</body>
</html>