<html>
<head>
<title>Simulating a real solar system with 70 lines of Python code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用70行Python代码模拟一个真实的太阳系</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/simulating-the-solar-system-with-under-100-lines-of-python-code-5c53b3039fc6?source=collection_archive---------1-----------------------#2020-01-12">https://medium.com/analytics-vidhya/simulating-the-solar-system-with-under-100-lines-of-python-code-5c53b3039fc6?source=collection_archive---------1-----------------------#2020-01-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="93f7" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">动画科学</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/ff4856cac05340fa284629f834c97fe2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*_ALDnf83sPkJGQfCLKoJUg.gif"/></div></div></figure><p id="8019" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">计算天体物理学是一门非常有趣的学科，我们使用计算机来模拟天文物体和现象。为了展示计算机模拟在天文学研究中的威力和魅力，我在这里展示了一个我用70行Python代码编写的程序，它模拟了一个(有点)真实的太阳系。</p><p id="1399" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们知道行星遵循的轨道主要由来自太阳的引力决定。为了计算行星的轨道，我们需要计算来自太阳的引力，并将其积分以获得速度和位置。我们在普通物理学中了解到，遵循牛顿万有引力定律和牛顿第二运动定律的力给出了加速度:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kf kg l"/></div></figure><p id="aef7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们用这个公式来计算行星的位置和速度:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kf kg l"/></div></figure><p id="ab64" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这是欧拉积分法的修改版，其中第一个方程是向前的，第二个方程是向后的。与正常的欧拉方法不同，这个修改版本是稳定的。</p><p id="1735" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">用Python编程的好处是Python可以灵活地处理向量。这三个向量方程各有三个分量，可以很容易地转换成以下代码:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kf kg l"/></div></figure><p id="7c9c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">这三行代码决定了太阳系中大多数物体的运动方式。</strong></p><p id="3980" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在我们有了积分器，我们需要初始条件，即某个日期行星的位置和速度。一颗行星的精确位置和速度是从美国宇航局JPL地平线在线太阳系数据库(【https://ssd.jpl.nasa.gov/?horizons】)获得的。这是通过调用Python模块完成的，该模块向数据库发送查询并获取数据。这部分代码如下所示:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kf kg l"/></div></figure><p id="c8a7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">其中<code class="du ki kj kk kl b">id=1</code>对应水银。然后，<code class="du ki kj kk kl b">obj['x']</code>给出2017年1月1日水星的x位置(由第二行“2017-01-01”定义)。</p><p id="1f4b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">将所有内容放在一起，包括通过matplotlib动画工具制作的动画，本文开头生成电影的完整代码附在本文末尾。它计算2019年和2020年4个内行星(水星、金星、地球和火星)加上月球的轨道。这个周期可以很容易地在代码中调整。</p><h1 id="07f0" class="km kn hi bd ko kp kq kr ks kt ku kv kw io kx ip ky ir kz is la iu lb iv lc ld bi translated">问&amp;答:</h1><p id="d4da" class="pw-post-body-paragraph jj jk hi jl b jm le ij jo jp lf im jr js lg ju jv jw lh jy jz ka li kc kd ke hb bi translated"><strong class="jl hj">动画中哪些是真实的，哪些是虚幻的？</strong></p><p id="799a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">动画具有与左上角显示的日期相对应的真实而精确的位置和速度。尽管这些物体的相对尺寸是正确的，但它们的尺寸并不是按比例的。因为这个原因，月亮在地球的上面。</p><p id="0569" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">代码是实时计算轨道，还是只是把从网上查询到的数据做成动画？</strong></p><p id="ed87" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这是一个实时计算。初始条件来自网络。该程序需要行星在某个日期的位置和速度，以便预测它们在未来的位置。</p><p id="3a26" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">水星的轨道为什么这么丑？</strong></p><p id="6554" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">嗯，确实是。与太阳系中的任何其他行星不同，水星的轨道偏心率很高，这意味着它的轨道不是很圆。</p><p id="1260" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">你能把这个动画做成3D的吗？</strong></p><p id="ce11" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">是的，但是2D看起来很适合这个演示。我怀疑有可能在保持代码在100行内的同时将它做成3D的。如果很多读者感兴趣，我可以在未来进行更新。</p><p id="949a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">为什么只有4颗行星，而不是全部8颗？</strong></p><p id="ba0e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">因为从第5颗行星木星开始，轨道半径变得非常大(&gt;地球的5倍)。在动画中包含它们将使内行星几乎看不见。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lj kg l"/></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lk"><img src="../Images/f651fcd5b9f4bdaf3bb9720ef084467c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-FHZ5wWFw6ZAXIRZ1ubKFw.png"/></div></div><figcaption class="ll lm et er es ln lo bd b be z dx translated">动画的特征图像</figcaption></figure></div></div>    
</body>
</html>