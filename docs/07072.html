<html>
<head>
<title>Master virtual environment and pip in less than 5 minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在不到5分钟的时间内掌握虚拟环境和pip</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/master-virtual-environment-and-pip-in-less-than-5-minutes-818dcbf207e1?source=collection_archive---------20-----------------------#2020-06-12">https://medium.com/analytics-vidhya/master-virtual-environment-and-pip-in-less-than-5-minutes-818dcbf207e1?source=collection_archive---------20-----------------------#2020-06-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="f67c" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用虚拟环境可以帮助你从一个完全的初学者变成一个更有能力的Python用户</h2></div><p id="9f8a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="jt">注意:本教程仅仅是关于在Mac &amp; Linux上使用虚拟环境。在windows上使用虚拟环境的方式是不同的。</em></p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/62ebc2fe8624bb020675f74aa8e5da20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uNHtQAbKhgxxeCa4zkWOVg.jpeg"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">只是自己拍的一张很酷的封面照片</figcaption></figure><p id="0b10" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当我们第一次开始学习如何编码时，我们非常关注代码是否是功能性的。你有没有遇到过这样的情况，你从Github复制了别人的代码，却发现代码不能马上工作？或者你升级到一个已安装软件包的新版本，并意识到这实际上破坏了你一直在做的其他项目？</p><p id="12ca" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你以前遇到过这些问题，使用<strong class="iz hj">虚拟环境</strong>可能是解决方案。在本教程中，我们将走过创建和使用虚拟环境的基础。我的目标是使这个指南简单易懂，同时包括所有关于虚拟环境的要点。</p><p id="b56d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">本指南分为3个主要部分:</p><ol class=""><li id="00d7" class="kk kl hi iz b ja jb jd je jg km jk kn jo ko js kp kq kr ks bi translated"><strong class="iz hj">为什么我们需要使用虚拟环境</strong></li><li id="58cc" class="kk kl hi iz b ja kt jd ku jg kv jk kw jo kx js kp kq kr ks bi translated"><strong class="iz hj">创建虚拟环境和安装包的分步指南</strong></li><li id="a89c" class="kk kl hi iz b ja kt jd ku jg kv jk kw jo kx js kp kq kr ks bi translated"><strong class="iz hj">虚拟环境中的注意事项</strong></li></ol><h1 id="282a" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated">1.为什么我们需要使用虚拟环境？</h1><p id="3fa3" class="pw-post-body-paragraph ix iy hi iz b ja lq ij jc jd lr im jf jg ls ji jj jk lt jm jn jo lu jq jr js hb bi translated">使用虚拟环境提供了一个空间，我们可以在这里安装特定于某些项目的软件包。</p><p id="a9b4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这一点非常重要，尤其是当你在一个组织中工作时，每个人都有<strong class="iz hj">个不同版本的软件包安装在他们的全球环境中</strong>。在你的机器上运行良好的代码在其他人的机器上可能不工作。</p><p id="7717" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最佳实践是为每个python项目创建虚拟环境，以<strong class="iz hj">确保每个项目都有自己的依赖关系</strong>并且<strong class="iz hj">允许其他人重新创建虚拟环境</strong>。</p><h1 id="1b19" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated">2.为项目创建虚拟环境和安装包的分步指南</h1><ol class=""><li id="c5b2" class="kk kl hi iz b ja lq jd lr jg lv jk lw jo lx js kp kq kr ks bi translated">在mac终端中导航到项目所在的文件夹。通过在命令行中键入以下内容来创建新的虚拟环境:</li></ol><pre class="jv jw jx jy fd ly lz ma mb aw mc bi"><span id="a812" class="md kz hi lz b fi me mf l mg mh">python3 -m venv demo_env</span></pre><p id="386c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当我们有了a -m，提供了venv这样的模块，python就会搜索模块venv并执行。现在我们有了一个名为demo_env的虚拟环境。</p><p id="2a49" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.通过键入以下命令激活环境:</p><pre class="jv jw jx jy fd ly lz ma mb aw mc bi"><span id="b5ed" class="md kz hi lz b fi me mf l mg mh">source demo_env/bin/activate</span></pre><p id="be27" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">虚拟环境现在被激活，因为名称将在括号中。</p><p id="72be" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">虚拟环境中使用的python版本将与用于创建虚拟环境的python版本相同。只需在命令行中键入“python”即可检查python版本。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es mi"><img src="../Images/d489b74d28baaed5ef1e325297b98cb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*kcyS0_MUrjLGsTIC_SplCg.jpeg"/></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">python版本3.8.2现在激活了“demo_env”</figcaption></figure><ul class=""><li id="39fd" class="kk kl hi iz b ja jb jd je jg km jk kn jo ko js mj kq kr ks bi translated"><em class="jt">请注意，我们不能在创建虚拟环境时指定python版本。如果我们想这样做，我们可以使用virtualvenv。</em></li></ul><p id="c79f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj"> 3。为特定项目安装软件包</strong></p><p id="c884" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果我们想要查看安装在虚拟环境中的包，我们可以:</p><pre class="jv jw jx jy fd ly lz ma mb aw mc bi"><span id="a90f" class="md kz hi lz b fi me mf l mg mh">pip list</span></pre><p id="d90c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您应该只看到环境中安装的两个包，即pip和setuptools。</p><p id="bf15" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">比方说，如果我想在我的项目中使用熊猫，我们可以简单地运行:</p><pre class="jv jw jx jy fd ly lz ma mb aw mc bi"><span id="84cb" class="md kz hi lz b fi me mf l mg mh">pip install pandas</span></pre><p id="f397" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果我们再次运行“pip list ”,我们可以看到安装包及其版本，如下所示:</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es mk"><img src="../Images/7cff8a5714565fe41ea3a840057a7b05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*1yPsEbCcaKbwLjtDvmnrBA.png"/></div></figure><p id="ef85" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用虚拟环境的一个主要优势是它促进了协作。我们可以将包及其依赖项的列表导出到“requirements.txt”，这样其他人就可以使用txt文件安装具有相同依赖项的相同包。</p><p id="0e7b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为此，我们可以运行以下命令来创建一个txt文件:</p><pre class="jv jw jx jy fd ly lz ma mb aw mc bi"><span id="f1df" class="md kz hi lz b fi me mf l mg mh">pip freeze &gt; requirements.txt</span></pre><p id="47ef" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">就是这样。</strong>现在您已经<strong class="iz hj"> 1) </strong>创建了一个名为“demo_env”的虚拟环境，并且<strong class="iz hj"> 2) </strong>在该环境中安装了软件包“pandas”。您也已经<strong class="iz hj"> 3) </strong>将关于包及其依赖项的信息导出到一个名为“requirements.txt”的文本文件中。<br/>如果我们想停用环境，只需运行:</p><pre class="jv jw jx jy fd ly lz ma mb aw mc bi"><span id="ab35" class="md kz hi lz b fi me mf l mg mh">deactivate</span></pre><p id="830e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">停用后，如果我们想完全删除虚拟环境(即删除虚拟环境文件夹)，我们可以运行:</p><pre class="jv jw jx jy fd ly lz ma mb aw mc bi"><span id="efea" class="md kz hi lz b fi me mf l mg mh">rm -rf demo_env</span></pre><p id="56ce" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">奔跑</p><pre class="jv jw jx jy fd ly lz ma mb aw mc bi"><span id="14fb" class="md kz hi lz b fi me mf l mg mh">ls</span></pre><p id="7f63" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">查看存储库中的所有文件和文件夹，检查虚拟环境是否已被删除，或者requirements.txt文件是否已创建等。</p><p id="74f2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">还记得你已经创建了一个requirements.txt文件吗？我们可以使用该文件在新的虚拟环境中安装软件包。</strong>因此，安装的软件包将与我们之前创建的虚拟环境具有相同的依赖关系。为此，我们可以运行:</p><pre class="jv jw jx jy fd ly lz ma mb aw mc bi"><span id="ac7b" class="md kz hi lz b fi me mf l mg mh">pip install -r requirements.txt</span></pre><p id="ddcc" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">r表示我们将期待一个requirements.txt文件。</p><h1 id="12eb" class="ky kz hi bd la lb lc ld le lf lg lh li io lj ip lk ir ll is lm iu ln iv lo lp bi translated"><strong class="ak">虚拟环境中的注意事项</strong></h1><p id="822d" class="pw-post-body-paragraph ix iy hi iz b ja lq ij jc jd lr im jf jg ls ji jj jk lt jm jn jo lu jq jr js hb bi translated"><strong class="iz hj"> Dos </strong></p><ul class=""><li id="fd9a" class="kk kl hi iz b ja jb jd je jg km jk kn jo ko js mj kq kr ks bi translated">通常的做法是将虚拟环境命名为“venv”</li><li id="f030" class="kk kl hi iz b ja kt jd ku jg kv jk kw jo kx js mj kq kr ks bi translated">将requirements.txt包含到源代码控制中，这样其他人就可以用它来构建自己的虚拟环境</li></ul><p id="794e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">不要做</strong></p><ul class=""><li id="f621" class="kk kl hi iz b ja jb jd je jg km jk kn jo ko js mj kq kr ks bi translated">将项目文件保存在venv文件夹中，因为虚拟环境经常被丢弃和重建</li><li id="9bb2" class="kk kl hi iz b ja kt jd ku jg kv jk kw jo kx js mj kq kr ks bi translated">将虚拟环境提交给源代码管理；相反，你应该把“venv”包括进去。gitignore，requirements.txt足以让其他人构建他们自己的虚拟环境</li></ul><p id="f460" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用虚拟环境是使所有python项目相互独立的一种简单而有效的方法。当您处理一个新的python项目时，这绝对是一个重要的步骤。</p></div></div>    
</body>
</html>