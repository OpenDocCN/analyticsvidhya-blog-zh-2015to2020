<html>
<head>
<title>The pandas library with SQlite3 for data analysis /machine learning</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于数据分析/机器学习的pandas库和SQlite3</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/the-pandas-library-with-sqlite3-for-data-analysis-machine-learning-87f3c1934df8?source=collection_archive---------6-----------------------#2020-10-12">https://medium.com/analytics-vidhya/the-pandas-library-with-sqlite3-for-data-analysis-machine-learning-87f3c1934df8?source=collection_archive---------6-----------------------#2020-10-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="cb0a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这篇文章的目的是存储数据从数据库使用sqlite和访问数据从数据库和存储在csv文件。</p><p id="74ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我以前的帖子中，我分享了与各种数据库的交互，如CSV文件、HTML文件、sql文件，现在<strong class="ih hj">我正在解释与数据库的交互，SQL是数据库的一部分，但其他数据库如mongodb、NOSQL和web XML文件、Microsoft Excel文件。</strong></p><p id="4042" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，当你想训练模型时，尝试理解机器学习中的数据，然后首先获得数据，没有数据我们什么也做不了，但数据随处可得，但需要数据是最重要的，这些数据从互联网访问，然后用什么方法访问数据，我们如何访问数据，这些方法或方式我在这里解释，</p><p id="1a22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如何从数据库中访问数据，如何从microsoft excel文件、xml文件中访问数据，以及如何将加载的数据存储在数据框中。</p><h1 id="6c1f" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">从SQLite3访问数据:-</h1><p id="f5dd" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">sqlite简介</p><p id="35f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">sqlite是一个公共领域软件包，它提供以适当格式存储在数据库中的用户定义的记录，这些记录或大或小，但所有记录都以的形式存储在<strong class="ih hj">关系数据库管理系统(RDBMS)中，这些记录数据产生一些摘要。</strong></p><p id="46f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">sqlite中不需要服务器，因为它是无服务器的。</p><p id="ba6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">sqlite不是客户端服务器数据库引擎，它嵌入在终端程序中。</p><p id="6638" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从数据库中访问数据，您需要首先在此安装sqlite3库。使用以下命令安装sqlite3。</p><p id="9cbe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">pip安装sqlite</p><p id="db96" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">无服务器:- </strong></p><p id="e550" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我们使用sqlite库时，sqlite不需要任何服务器，我们可以直接与数据库交互</p><p id="f162" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以传统方式访问数据是</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es kg"><img src="../Images/9727dd3026a5e36c2bb2d9bacef32b1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*M_i4xQZhT64l3J_GgKbOkg.png"/></div></figure><p id="26e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里我们可以看到，如果没有sqlite3库，我们如何能够访问数据，但这个过程非常深入，它花费的时间太多，因此程序的执行被延迟</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ko"><img src="../Images/11f3644f8de360e3e14dccd0d7b5e24c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1188/format:webp/1*m8Z4zP2QNjZ-XLsIehUs0A.png"/></div></figure><p id="0b01" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，当我们使用sqlite文件，然后程序运行速度很快</p><p id="55f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用户程序可以直接与sqlite数据库交互，这些过程运行速度很快。</p><p id="6501" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步伐</p><p id="96d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤1:导入库</p><p id="ed9a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第二步:创建数据库和表格</p><p id="4535" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤3:插入数据</p><p id="373c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤4:获取数据并存储在数据帧中</p><p id="3539" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤5:存储在csv文件中</p><p id="ff28" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我正在向你们展示一个例子，这个例子就是创建表格，这些表格被存储在一个数据库中，这些表格被访问成数据帧格式，这些数据帧格式被转换成csv文件，这个过程我正在与你们分享。</p><p id="e6e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我创建的数据库和表格中，我插入了数据，如下图所示</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es kp"><img src="../Images/bbf49d0db8e048fc16a5db99859130ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*th0lwT24yPh_yR4WWBIf4A.png"/></div></figure><p id="6b99" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里我创建了数据库和表格，数据库名称是mydata_with_records.sqlite，并与该数据库连接，“con”是变量</p><p id="2bd3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建的表表名为学生名数据，其中有4列存储学生名、中间名、姓氏和分数</p><p id="c0fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">con.execute(query)是在数据库中运行查询的函数，该数据库是mydata_with_records数据库。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es kq"><img src="../Images/112a6d8b39a0884c9e6e03789eeed3e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/1*2L4vWleWWAFYNDh1vTO9zA.png"/></div></figure><p id="9738" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里你可以看到。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es kr"><img src="../Images/9f79cab6e415ba39117aedf603e73086.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*gK4dwT1W4ZtOXz29c837og.png"/></div></figure><p id="98b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，我将数据插入到学生表中，但是当您第一次运行此代码时，您希望插入多少学生数据，如4个学生数据、5个学生数据或6个学生数据，以执行此代码，并使用for循环运行第n次，执行数据库中存储的语句和数据，在表中您可以看到。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ks"><img src="../Images/730d20f77a9756b4702cc5be8f7de425.png" data-original-src="https://miro.medium.com/v2/resize:fit:1104/format:webp/1*qoJr2MFZAwsDd36qvOXTPA.png"/></div></figure><p id="d40a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，所有学生记录数据被选中并使用con.execute()函数存储在游标变量中，这些列表存储在数据框中(当您将数据提取到任何变量中时，这些数据默认存储在列表中)</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es kt"><img src="../Images/921291e4c34e877c19ba24eb58d05700.png" data-original-src="https://miro.medium.com/v2/resize:fit:1114/format:webp/1*BJssh08DGCU5EayVM9isvw.png"/></div></figure><p id="df52" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里你可以看到所有的数据以适当的格式存储到数据框中，并且这些数据被加载到学生表中。但是这些数据不在变量中，在照片下面你可以看到数据存储在数据变量(数据框)中</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ku"><img src="../Images/7b1e6fef5d2e3837edc0187124b8a4b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*iJVHYHrq_VuT1a8A2yefAg.png"/></div></figure><p id="89af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里使用read_sql()函数从student_name_data加载数据</p><p id="163e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以前的照片数据是使用sql命令获取的，这段代码使用pandas read_sql函数，数据是使用pandas函数获取的，这是不同的。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es kv"><img src="../Images/25474633c234a2b2a3314dad0f0d4b34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1050/format:webp/1*HO58wquO1_Lzg3HOYkQDPg.png"/></div></figure><p id="6cc3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">并且所有数据都存储在学生记录csv文件中，使用pandas中的to_csv()函数和data2变量存储学生记录文件</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es kw"><img src="../Images/6eef596d773c9ed842fa114f94021a1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:578/format:webp/1*mbPCeoQFmF9V-G-ltJw76g.png"/></div></figure><p id="12e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以看到，我们成功地将数据存储在数据库中，并将这些数据加载到数据框中，这些数据框存储在csv文件中。加载csv文件后，我们可以分析数据。</p><p id="ba9b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个程序的代码在这里 :-</p><p id="17a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">#由Shinde_umakant创建的程序</p><p id="c2c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">导入sqlite3</p><p id="5492" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将sqlalchemy作为sqla导入</p><p id="a3af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">进口熊猫作为pd</p><p id="c25b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">查询= " " "</p><p id="0566" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建表学生姓名数据</p><p id="b9ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">(名字VARCHAR(20)，中间名VARCHAR(20)，姓氏VARCHAR(20)，</p><p id="533a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">标记整数</p><p id="d559" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">);”””</p><p id="4ca1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">#这里，我在创建的表中创建了一个查询</p><p id="d9e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">con = sqlite3 . connect(' my data _ wtih _ records . SQLite ')</p><p id="eaa4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">con.execute(查询)</p><p id="f9e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">con.commit()</p><p id="3a8e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">dataa=int(input("输入数据大小"))</p><p id="6b82" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于范围内的I(数据a):</p><p id="b66f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">frist _ name = input("输入名字")</p><p id="809c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">中间名=输入("输入中间名")</p><p id="1ca4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">姓氏=输入("输入姓氏")</p><p id="a7b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">标记=输入(“输入标记”)</p><p id="faee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">data = [(名字，中间名，姓氏，标记)]</p><p id="3cf2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">TMT = " INSERT INTO Student _ name _ data值(？,?,?,?)"</p><p id="647f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">con.executemany(tmt，data)</p><p id="6bae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">con.commit()</p><p id="aca6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">cursor = con . execute(' select * from Student _ name _ data ')</p><p id="f9fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">rows = cursor.fetchall()</p><p id="30cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">行</p><p id="8ba1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">警察。DataFrame(rows，columns =[x[0]for x in cursor . description])</p><p id="ac65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">db = sqla . create _ engine(' SQLite:///my data _ wtih _ records . SQLite ')</p><p id="704b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">datas = PD . read _ SQL(' select * from Student _ name _ data '，db)</p><p id="2e9a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据</p><p id="12c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">类型(数据)</p><p id="856f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">datas . to _ CSV(" student _ records . CSV ")</p><p id="b332" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">data 2 = PD . read _ CSV(" student _ records . CSV ")</p><p id="bb33" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">data2.head()</p><p id="fea3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个程序是一个示例，我们可以从html中访问数据，html数据可以存储在数据库中，只需更改插入数据的时间代码，在存储数据后，我们可以访问和下一个过程，我在这里分享。</p><p id="c5c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一篇博客我将分享我们如何从xml、<strong class="ih hj">、</strong>、<strong class="ih hj">微软Excel文件中获取数据。</strong>文件。</p><p id="6d89" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你没有读过我以前的文章，那就看看吧，我在这里分享链接</p><p id="ca44" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae kx" rel="noopener" href="/analytics-vidhya/the-pandas-library-in-depth-part-1-c85dde2931d5">https://medium . com/analytics-vid hya/the-pandas-library-in-depth-part-1-c 85 DDE 2931d 5</a></p></div></div>    
</body>
</html>