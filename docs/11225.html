<html>
<head>
<title>Ctrl + c, Ctrl + v — Replicating Data Science Conda Environment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Ctrl + c，Ctrl + v —复制数据科学 Conda 环境</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/ctrl-c-ctrl-v-replicating-data-science-conda-environment-c190ad0d93fd?source=collection_archive---------16-----------------------#2020-11-23">https://medium.com/analytics-vidhya/ctrl-c-ctrl-v-replicating-data-science-conda-environment-c190ad0d93fd?source=collection_archive---------16-----------------------#2020-11-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/4dbf349458064cd3e9233e8db02d6180.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wq2ab1-eCAFwzgdV49pBSw.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片来自<a class="ae iu" href="https://bit.ly/36SSsaE" rel="noopener ugc nofollow" target="_blank">https://bit.ly/36SSsaE</a></figcaption></figure><p id="5ae0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Python 环境中的机器学习实践者面临的最初障碍之一是试图用所有合适的包重新创建运行环境。</p><p id="ca86" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">通常，环境被配置为</p><ul class=""><li id="8d7f" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">开始构建人工智能项目的开发工作</li><li id="349f" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">从之前创建的 Github 库中复制结果</li><li id="8ccf" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">复制教程中的实现，开始学习</li></ul><p id="192e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">可以用<a class="ae iu" href="https://docs.conda.io/en/latest/miniconda.html" rel="noopener ugc nofollow" target="_blank"> miniconda </a>、<a class="ae iu" href="https://pipenv.pypa.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> pipenv </a>进行设置，也可以直接在本地系统上设置。前两个选项更受欢迎，这样您就有了一个包含的工作环境(在构建具有不同依赖关系的多个项目时尤其有用)。这样，每个环境都是相互隔离的，并用必要的包进行压缩。<br/>(注意:这篇文章将重点介绍如何使用 Miniconda 来管理软件包和设置环境。)</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es kh"><img src="../Images/53c999a8bcb0b1cbaea06a7207d54a99.png" data-original-src="https://miro.medium.com/v2/resize:fit:576/format:webp/1*4rMrrzoG14BwrGG4KqH7Eg.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">多个 conda 环境的图示</figcaption></figure><p id="6e0b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在一个有独角兽的世界里🦄和彩虹🌈，人们会立即建立一个环境，直接运行 python 脚本，没有任何错误，检查人工智能模型的性能，并计划下一步。</p><p id="233d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">事实上，大部分时间都在做下面列出的事情:</p><ul class=""><li id="4111" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">复制具有所有依赖项的环境</li></ul><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es km"><img src="../Images/491f267ecce194abb2d0773e3ace19d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*Kv1QtBN_tMX8e3P8WTjOEw.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">由于软件包未安装，找不到模块</figcaption></figure><ul class=""><li id="b215" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">解决依赖性的冲突</li></ul><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kn"><img src="../Images/c49fa187140054979338703ea4f75a3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T3NfVmcAAtF9HoGCSYfCwQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">安装软件包时未能解决冲突</figcaption></figure><ul class=""><li id="4ed5" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">下载和构建用于矢量化的数据集(本文未涉及)</li></ul><p id="ae95" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一个包对另一个包的依赖冲突很容易变成一团乱麻。更不用说数据科学环境通常源于人工智能建模工作所需的大量软件包和模块。随着时间的推移，这将产生一个很长的包列表，这将使复制环境的过程更加复杂。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es ko"><img src="../Images/a58c12a3c94194fd708e1a5df7ee774f.png" data-original-src="https://miro.medium.com/v2/resize:fit:626/format:webp/1*X-N0Uzpizoe65hr3WjkTgQ.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">conda 环境的依赖项列表示例</figcaption></figure><p id="19ed" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当环境设置完成时，几天已经过去了，在实现任何里程碑之前，您可能已经筋疲力尽了。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es kp"><img src="../Images/4c14a31f46480918aa6b1e748434aa27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*OFcx1y_w6E2f-KnlWPfKEg.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片来自<a class="ae iu" href="https://www.ldpt.co.uk/sick-tired-sick-tired/" rel="noopener ugc nofollow" target="_blank">https://www.ldpt.co.uk/sick-tired-sick-tired/</a></figcaption></figure><p id="1901" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">为了减少上述</strong>情况的发生，使用下面列出的一种或另一种方法:</p><p id="5ef4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> 1。(在构建环境之前)从配置文件创建 conda 环境。yml 文件)</strong></p><pre class="ki kj kk kl fd kq kr ks kt aw ku bi"><span id="6a67" class="kv kw hi kr b fi kx ky l kz la">conda env create -f config.yml</span></pre><p id="fc96" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">config.yml 基本上是一个 yaml 文件，包含 conda 包和下载它们的通道。您也可以在同一个文件中包含 pip 包。这样做使事情变得简单明了，也让人们对所需的包一目了然。</p><p id="3ff8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">配置文件遵循如下所示的框架结构:</p><pre class="ki kj kk kl fd kq kr ks kt aw ku bi"><span id="39a0" class="kv kw hi kr b fi kx ky l kz la">name: python-dev-env<br/>channels:<br/>  - anaconda<br/>dependencies:<br/>  - python=3.7<br/>  - pip=20.2.*<br/>  - jupyterlab<br/>  - pip:<br/>    - click==7.1.*</span></pre><p id="d439" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> <em class="lb">注:</em> </strong></p><ol class=""><li id="1c9a" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js lc jz ka kb bi translated">星号是版本修补程序的通配符搜索。大多数软件版本都是<a class="ae iu" href="https://semver.org/" rel="noopener ugc nofollow" target="_blank">语义版本</a> — <strong class="ix hj">主版本。次要版本。补丁修复</strong>。在补丁版本中使用通配符有助于包含错误修复，同时确保它不会因为版本升级而引入新的复杂性。</li><li id="ef96" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js lc jz ka kb bi translated">新安装的 conda 环境中没有隐含 Pip 包。因此，在使用<em class="lb"> pip </em>命令安装包之前，pip 包必须首先明确包含在 config.yml 中。查看<a class="ae iu" href="https://www.anaconda.com/blog/using-pip-in-a-conda-environment" rel="noopener ugc nofollow" target="_blank">此链接</a>了解在 conda 环境中使用 pip 的最佳实践。</li></ol></div><div class="ab cl ld le gp lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="hb hc hd he hf"><p id="a3c3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> 2。(构建环境后)将创建的现有 conda 环境导出到配置文件</strong></p><pre class="ki kj kk kl fd kq kr ks kt aw ku bi"><span id="160e" class="kv kw hi kr b fi kx ky l kz la">conda env export -f config.yml</span></pre><p id="ee9b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">与。yml 文件，人们可以很容易地按照指令使用</p><pre class="ki kj kk kl fd kq kr ks kt aw ku bi"><span id="963e" class="kv kw hi kr b fi kx ky l kz la">conda env create -f config.yml</span></pre><p id="b0e8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">将配置文件包含在存储库中(通常托管在 Github 上)也是很重要的，以便它是独立的，可以被希望引用它的最终用户搜索到。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/05da4d3344ce8ed2f1d1ffd2f9d71af9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hSP5NxwYLM6DGRgucfq4CQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">包括。Github 存储库中的 yml 文件</figcaption></figure><p id="4ee8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">创建一个配置文件相对来说是一件小事，但却能带来长期的好处。大多数时候，数据科学家并不像独行侠一样工作，团队中的其他人需要利用或使用这项工作。他们会感谢你让他们的生活变得更容易。</p><p id="6b15" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">此处有更多常用的 conda 命令列在<a class="ae iu" href="https://github.com/codenamewei/pydata-science-env/blob/main/miniconda-guidelines.md" rel="noopener ugc nofollow" target="_blank">中。</a></p><h2 id="0b50" class="kv kw hi bd ll lm ln lo lp lq lr ls lt jg lu lv lw jk lx ly lz jo ma mb mc md bi translated"><strong class="ak"> Github 库:</strong></h2><p id="b99a" class="pw-post-body-paragraph iv iw hi ix b iy me ja jb jc mf je jf jg mg ji jj jk mh jm jn jo mi jq jr js hb bi translated"><a class="ae iu" href="https://github.com/codenamewei/pydata-science-playground" rel="noopener ugc nofollow" target="_blank">https://github.com/codenamewei/pydata-science-playground</a></p><p id="f473" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下次见。👋</p><h2 id="db7d" class="kv kw hi bd ll lm ln lo lp lq lr ls lt jg lu lv lw jk lx ly lz jo ma mb mc md bi translated">参考资料:</h2><ul class=""><li id="bd4b" class="jt ju hi ix b iy me jc mf jg mj jk mk jo ml js jy jz ka kb bi translated"><a class="ae iu" href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html" rel="noopener ugc nofollow" target="_blank">https://docs . conda . io/projects/conda/en/latest/user-guide/tasks/manage-environments . html</a></li><li id="3dc2" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated"><a class="ae iu" href="https://www.anaconda.com/blog/using-pip-in-a-conda-environment" rel="noopener ugc nofollow" target="_blank">https://www . anaconda . com/blog/using-pip-in-a-conda-environment</a></li></ul></div></div>    
</body>
</html>