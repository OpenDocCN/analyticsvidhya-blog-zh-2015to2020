# 根据互联网，十年来最受欢迎的电影

> 原文：<https://medium.com/analytics-vidhya/the-top-movies-of-the-decade-according-to-the-internet-f6be0357c7fb?source=collection_archive---------17----------------------->

![](img/256b96ba24998f7466fd3f72e1625dc7.png)

这是十年的尾声，随之而来的是 100 多份名单，声称他们拥有“十年来最好的电影”。在这种完全不同的信息下，很难理解十年来真正的顶级电影是什么。为了了解互联网精英的真实想法，我收集了 35 部十年最佳电影名单，并将它们组合在一起，就十年最佳电影达成共识。就个人而言，这个项目给了我一份过去 10 年错过的电影清单。我一定会全部看完，并发表评论！

对于那些只为名单而来的人，这里是:

**十年前 20 部电影**

1.疯狂的麦克斯:狂暴之路
2。月光
3。滚出去
4。社交网络
5。淑女鸟
6。内勒温·戴维斯
7。少年时代
8。布达佩斯大饭店。大师
10。生命之树。罗马
12。杀人的行为。寄生虫
14。盗梦空间 15。叫我你的名字。蜘蛛侠:进入蜘蛛世界。皮下
18。幻螺纹
19。颈部扭伤。到达

现在，我将简要描述我如何收集数据，然后进入评分方法。我在文章接下来的部分的目的是给人们工具来搜索任何网站，并描述我的排名方法。

# 数据收集

所有的工作都是在一个[的笔记本上完成的。](https://github.com/jmuddappa/decades_end/blob/master/Data%20Collection/Data%20Collection.ipynb)

我用 Scrapy 从每个网站收集数据。这里有一个可重复使用的功能，你可以用它来抓取任何网站:

该函数获取电影列表网站的 URL 和感兴趣的 HTML 标签。然后，该函数返回一个响应对象，其中包含带有标签的所有文本元素。为了找到只包含给定列表中标题文本的 HTML 标签，我使用了 chrome 扩展 SelectorGadget，如下所示。它允许你点击网站中的一个元素，然后提供可以用来抓取信息的标签。

函数的结果如上所示。如你所见，它有一些与提取标题任务无关的信息，比如排名和 HTML 标签“**”。为了清理这个列表，我使用了两个助手函数，**

1.  remove_html:从列表中移除所有的 html 标签
2.  remove_non_chars:从列表中删除除字母、分号和破折号之外的所有字符

一旦名单清理完毕，我就将它和排名一起手动添加到 excel 中。我的流程见下图。

我对 35 个网站重复了这个过程，结果得到了一个干净的电影数据库。现在有些网站是排名列表，有些是未排名列表。如果这个列表是一个未分级的列表，我会在这个分级栏中为所有的电影标上-1。

# 数据清理

所有这些都是在另一本 [Jupyter 笔记本](https://github.com/jmuddappa/decades_end/blob/master/Data%20Cleaning/Data%20Cleaning.ipynb)中完成的。

当我建立数据库时，我注意到电影名称不一致:

1.  拼写错误的电影

```
Margaret, Margeret
The Art of Killing, The Act of Killing
```

2.有些里面有多余的空间:

```
Inside Out (one space at the end), Inside Out (no space at the end)
```

3.有些上面贴着日期:

```
Inside Llewyn Davis (2013) , Inside Llewyn Davis
```

4.有些人的号码已经掉了

```
Toy Story -> Toy Story 3 or Toy Story 4
Years A Slave should be 12 Years A Slave
```

问题 2、3 和 4 很容易部分解决。我使用了 Python 的功能，比如 regex 和 strip 来删除日期和多余的空格。然而，这些技术仍然存在不一致性。

问题 1 也很难解决。文本不完全相同，因此这是我的数据集中的模糊不匹配问题。为了找到所有剩下的模糊标题，我使用了两种技术来处理这个问题:

1.  [搜索](https://mattilyra.github.io/2017/05/23/document-deduplication-with-lsh.html):最初，我使用了一个功能，可以扫描一系列文档，并根据阈值找到相似的文本。我用它来手动修复几个标题，但当我降低阈值时，我发现有太多的模糊不匹配需要手动修复。然后我决定用人工智能来帮我做这件事！
2.  [重复数据删除](http://dedupeio.github.io):这是一个神奇的包，可以用来删除模糊不匹配的数据。

要使用重复数据删除，首先使用以下方法将其安装到您的 Jupyter 笔记本电脑中:

```
!pip install pandas-dedupe
```

现在运行它，如上面的代码片段所示。当您运行重复数据删除命令时，该包将识别它认为不匹配的内容，并要求您验证它们是否不匹配。当你回答“是”或“否”时，人工智能会被训练来找出不匹配的地方。一旦训练完成，它会创建一个文件，其中包含所有不匹配的标题和一个置信度得分，以确定人工智能是否认为标题是相同的。

大多数标题都是自动修复的，可信度得分超过 90%。只有两个标题没有被重复数据删除完美解决，它们是:

o j:美国制造 vs o.j:美国制造
你的名字 vs 你的名字。

我手动修复了这些问题，然后使用经过重复数据删除的标题创建了一个 final.csv 文件。最后，我留下了一个数据库，里面有来自 35 个来源的 1500 多本图书，其中有 427 本是独一无二的。

# 创建一个综合排名系统

这部分的代码可以在[这里](https://github.com/jmuddappa/decades_end/blob/master/Data%20Analysis/Feature%20Engineering.ipynb)找到。

我开发了一个评分系统，找出在所有列表中重复次数最多、排名也很高的电影。这被证明是具有挑战性的，因为列表大小的可变性以及列表的分级/未分级性质。我开发的评分系统如下。如果在以下位置找到电影:

**排名榜:**

1.前 10 名:3 分

2.10–20:2 分

3.20–30:1 分

4.30-100 分:0.5 分

**未排名列表:**

1.如果列表的大小小于 10: 3 点

2.如果列表的大小小于 20: 2 点

3.如果列表的大小小于 30: 1 点

4.对于大于 30 的列表:0.5 分

我写了一个函数，可以根据上面的系统为每个数据点计算一个分数。然后，我根据每个标题进行分组，并根据总分返回前 20 个标题！该函数的输出是:

```
mad max: fury road 67.5
moonlight 62.5
get out 50.0
the social network 39.5
lady bird 37.0
inside llewyn davis 34.5
boyhood 32.0
the grand budapest hotel 30.0
the master 30.0
the tree of life 28.5
roma 27.5
the act of killing 27.0
parasite 25.0
inception 24.5
call me by your name 22.5
spider-man: into the spider-verse 22.0
under the skin 22.0
phantom thread 21.0
whiplash 19.0
arrival 17.0
```

# 结论

这是一个很棒的电影列表。我很惊讶地看到疯狂的麦克斯名列榜首，我一定会重温这部电影，并通过一个评论家的镜头观看它。我个人十年的前三名是:出去，寄生虫和蜘蛛侠：平行宇宙。

我还计划用这些数据做更多的事情。我正在开发一个强大的评分系统，让顶级导演、编剧、演员等参与进来。这并不像获得顶级电影那么简单，因为我需要考虑各种因素，比如演职人员的付费顺序。我还计划使用这些数据部署一个推荐系统，该系统使用余弦相似性作为度量，根据输入推荐相似的电影。当他们完成后，我一定会写一篇关于这两件事的博文。你可以在我的回购协议中跟踪我在这个项目上的进展:【https://github.com/jmuddappa/decades_end

最后，感谢您阅读整篇文章。我有兴趣看到关于我的评分系统的反馈，或者任何我可以使用该数据集回答的有趣问题。