<html>
<head>
<title>Stock Market and Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">股票市场和Python</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/stock-market-and-python-c3e66bf57819?source=collection_archive---------9-----------------------#2020-10-10">https://medium.com/analytics-vidhya/stock-market-and-python-c3e66bf57819?source=collection_archive---------9-----------------------#2020-10-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="51da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">青少年的迷恋，成年后的爱好。时代是2013年，一个陈词滥调的有抱负的工程男孩在《华尔街之狼》中扮演了迪卡普里奥的精彩角色。股票市场的起起落落总是让我着迷，现在是2020年(希望人们将来也会回到这里)，当我们看到印度市场空间的新用户数量突然激增(~ 500万)时，我想为什么不在我感到舒适的少数几个领域之一(Python)中使用容易获得的市场数据。</p><p id="dc6b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们开始之前，请允许我提醒您，与YahooFinancials等python专用库支持通过API调用轻松下载数据的国际市场不同，它们在印度市场并不那么迅速，但尽管如此，我们确实可以利用本地python库“nse”来处理市场数据。在牢记最近的“为本地发声”议程的同时，我对汽车行业巨头“塔塔汽车”前5个月的市场数据进行了分析。</p><p id="3ea0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">通过NSE库加载数据:</em> </strong></p><p id="0daa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里是我的代码片段，用于从JSON下载数据并转换成数据帧格式。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/2468fe10294769a0b9a1ec2fe8afefd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*k__M4yNe6k39beqLPp9jrw.png"/></div></figure></div><div class="ab cl jm jn gp jo" role="separator"><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr"/></div><div class="hb hc hd he hf"><p id="91e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">数据分析和可视化:</em> </strong></p><p id="aabb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">任何特定公司的历史数据都有15种不同的属性，可用于分析和预测目的。让我们来看看过去5个月每天的股票价格走势的表格数据和图表。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es jt"><img src="../Images/3ef7114fa09059c954f8d11987c128a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xw33cnzTvtmyxMvuRTlxHg.png"/></div></div></figure><p id="8770" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以看到，每个日期的数据都非常精细，我认为这是一种更好的方法来研究每周的趋势、回报、销售和收盘价。如前所述，我的分析和预测将围绕股票的EOD收盘价变动。</p><p id="f498" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，让我们看看过去20周股票平均价格的走势图。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es jy"><img src="../Images/d2325c46faaa3f6c39e32e2e7560c62f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bg6OGDAV56qbWG3pqa4TTw.png"/></div></div></figure><p id="cf15" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">股票周走势分析:</em> </strong></p><p id="0e72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然这个图已经解释了很多关于股票价格的运动，让我们来看看任何投资的最重要的因素，即回报。如前所述，我研究了每周的回报率。为了计算回报率，我将每周的平均价格值移动一周到另一周，然后计算原始值和移动值之间的差异(上周的平均价格)。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es jz"><img src="../Images/bf8613c0d7b8e515584b5d0668234990.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_R8ehc2KWaeL2AyNnZ236w.png"/></div></div></figure><p id="c3d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我开始阅读数据时，总交易量对我来说是一个非常有希望的价格分析因素。人们认为，一天交易的股票数量与EOD的收盘价一样多，就会受到影响。在继续分析之前，我试图将一周的总交易量和一周的平均价格标准化到相同的水平，这样比较看起来更符合逻辑。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es ka"><img src="../Images/512970e65c9e98a55db3c167b8262ffc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sNUsKMlQLFjcm-unGUGjcw.png"/></div></div></figure><p id="5158" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，看起来这是一个有希望深入研究的因素，因为我们可以看到股票平均价格的直接变化。虽然这里显示的是每周级别的比较，但在后面的部分，我继续在每日级别的价格预测模型中使用这一点作为驱动因素。</p><p id="74fe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">特征工程为</em> </strong></p><p id="5264" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除了上述驱动因素total_traded_quantity_norm之外，我认为，为了预测一天的收盘价，更有意义的做法是增加一些特征，如一天的股价高低值的百分比变化，并关注股票的前一天收盘价。为模型构建附着具有特征的片段。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es kb"><img src="../Images/3ab87f0df3c3bb2abd30b824d1613f64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z7Ti70mFbVNtSo3gIR3tFA.png"/></div></div></figure><p id="244a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">建模，拟合列车，测试模型:</em> </strong></p><p id="92ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们仔细看看模型的建立、训练测试分割、拟合训练数据以及根据测试数据预测收盘价。然而，我在这里使用的模型是一个<strong class="ih hj">基线线性回归模型</strong>，它总是可以被优化以给出关于股票收盘价预测的更精确的结果。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es kc"><img src="../Images/1b92c69e116c762ccb7f039c9ce2bb90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wk_APSxYDWYKJyKjW2-khA.png"/></div></div></figure><p id="190c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="jd">绘制预测并与实际定价比较:</em> </strong></p><p id="737f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">既然我们现在已经有了所有的代码、数据和知识，那就让我们来看看真相吧。我们的模型表现得有多好，我们在模型中使用的驱动因素有多合理。让我们来看看我们的测试数据的实际价格和预测股价的比较。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es kd"><img src="../Images/4b5837cea06c91d9140396d437ee319a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hFBprUy8lmc9NRKS2qhnsg.png"/></div></div></figure><p id="5e91" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">看起来，对于我们所有的测试数据集，预测的收盘价与EOD的实际股票价格一致。因此，我们可以对我们在整个过程中所做的工作感到满意。</p><p id="16bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然这看起来是一个有趣的学习实践，但我们应该始终记住，市场在现实中是非常不稳定的，并受到许多因素的影响。如果你喜欢阅读，并获得了迷人的感觉，那么就进行评价，想鼓掌多少次就鼓掌多少次，并随时在评论中寻求改进和反馈。</p><p id="7d94" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注:</strong>所有观点和分析均为个人发现，仅供<strong class="ih hj">学习</strong>之用。在进行任何投资之前，请联系您的财务顾问。干杯！投资愉快！编码快乐！</p></div></div>    
</body>
</html>