<html>
<head>
<title>Interactive Visualizations with Plotly and Cufflinks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Plotly和袖扣的互动可视化</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/interactive-visualizations-with-plotly-and-cufflinks-9ffd032bfac?source=collection_archive---------14-----------------------#2020-03-20">https://medium.com/analytics-vidhya/interactive-visualizations-with-plotly-and-cufflinks-9ffd032bfac?source=collection_archive---------14-----------------------#2020-03-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7fb7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过我所有的自学和对数据、分析、可视化和数据科学等广泛主题的探索，我接触到了广泛的工具。如果你不能从我以前的帖子中看出，我喜欢熊猫。不仅仅是动物，还有包裹熊猫的蟒蛇。有趣的是，我遇到了两种工具，叫做Plotly和袖扣。袖扣本质上是将Pandas(来自Python)连接到Plotly，从那里你可以直接从数据帧创建图形和图表。这当然没什么特别或独特的。特别的是，这些可以由Plotly制作的视觉效果不仅好看(很明显)，而且具有交互性！如果这还不够特别的话，我相信Matplotlib没有的所有有用的附加特性都会很特别。现在，让我们从一些代码开始。</p><p id="6c8c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还有一件事…如果像我一样，你从来没有使用或安装过袖扣或Plotly，那么我们必须先做这些步骤，然后才能导入软件包使用！我在Plotly网站上遵循的指导相当简单，但我在这里有步骤(如果你使用的是Mac):</p><p id="c5a7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1)对于袖扣，您可以选择conda安装或pip安装，一切由您决定！</p><p id="818a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2) <code class="du jd je jf jg b">conda install nodejs</code>(这是Plotly工作所必需的)</p><p id="9cd0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3) <code class="du jd je jf jg b">pip install plotly==4.5.4</code>或<code class="du jd je jf jg b">conda install -c plotly plotly=4.5.4</code></p><p id="8613" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4) Jupyter笔记本:使用<code class="du jd je jf jg b">conda</code>或<code class="du jd je jf jg b">pip install “notebook&gt;5.3” “ipywidgets&gt;=7.2”</code></p><p id="de85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5) Jupyter实验室使用:<code class="du jd je jf jg b">pip install jupyterlab==1.2 “ipywidgets&gt;=7.5”</code></p><p id="2e49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">a.对于conda使用:<code class="du jd je jf jg b"> conda install jupyterlab=1.2</code></p><p id="c4bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">b.<code class="du jd je jf jg b">conda install “ipywidgets=7.5”</code></p><p id="3c0a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6)我运行了以下所有步骤，以确保以后不会遇到任何意外情况:</p><p id="77b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">a.<code class="du jd je jf jg b">export NODE_OPTIONS= — max-old-space-size=4096</code></p><p id="1674" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">b.<code class="du jd je jf jg b">jupyter labextension install @jupyter-widgets/jupyterlab-manager@1.1 –no-build</code></p><p id="1ad0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">c.<code class="du jd je jf jg b">jupyter labextension install jupyterlab-plotly@1.5.4 –no-build</code></p><p id="2780" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">d.<code class="du jd je jf jg b">jupyter labextension install plotlywidget@1.5.4 –no-build</code></p><p id="a97c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">e.这个最后的命令需要一段时间才能完成(请耐心):<code class="du jd je jf jg b">jupyter lab build</code></p><p id="dfce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">7)现在一切都运行完毕——我们终于可以开始导入包了！</p><p id="c6eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下图显示了导入某些功能和特性工作所需的所有必要包的一般过程。首先，我们从导入两个非常标准的Python包开始:Pandas和Numpy。接下来，我们进口一种新品——袖扣。重申一下，袖扣把熊猫和Plotly联系在一起。接下来，我们开始导入所有必要的Plotly包，在这种情况下，我让Plotly在“离线”模式下工作，这就是为什么有多个包被导入。“graph_objects as go import”用于“快速入门”示例之一。我导入了datetime，因为其中一个视图将显示跨越多天的数据。最后，我添加了%matplotlib inline，这样就可以在笔记本上显示图像了。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="er es jh"><img src="../Images/34494f25baa480131f32f87200d62083.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*fYYh4it4YmrLvG8xLC5huA.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">要使用的导入包</figcaption></figure><p id="739b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来的两行代码完成了以下工作:这使得Jupyter笔记本中的所有内容都可以工作。Plotly将Pandas和Python连接到一个交互式JavaScript库，并允许访问可以创建的各种可视化。另一行代码只允许我们在“离线”模式下使用袖扣。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="er es jh"><img src="../Images/10ed798ca3ae2d975fcb866ecb6ebe46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*qhCoH0Pk0SH2v097r6Yrkg.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">完成一些设置的两行小代码</figcaption></figure><p id="b21a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们来看第一个非常简单的例子——由Plotly提供，使用我们之前导入的graph_objects包。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es jt"><img src="../Images/ff7ed105e0a395aada125b93b73d1763.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LencADy1W9CZlET2-bVDgA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">我们第一次看到普洛特利</figcaption></figure><p id="86e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我接下来的所有例子都将与下面三个不同公司的虚假股票数据相关，我将在这里制作这些数据。然后，我们将查看每一行的前五行数据。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es jt"><img src="../Images/43fab29b12a70c43b6eaa6766273a20f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U0HbFcRR-ak-CCFoApbNlg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">为三家假公司制造一些假股票数据</figcaption></figure><p id="1f58" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们快速看一下Matplotlib可以从这个df数据帧中给我们提供什么。由于没有额外的设置，基本的视觉效果并不是马上就非常有用，需要更多的调整来使它正确。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="er es jy"><img src="../Images/a4bbb7226806c0dd4cd484d316b9d903.png" data-original-src="https://miro.medium.com/v2/resize:fit:952/format:webp/1*NIpuEcAlb9Qi-YdtjHw4Gw.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">Matplotlib visual —有点小而且拥挤</figcaption></figure><p id="4c49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个没有附加设置的基本Plotly情节从一开始就给了我们以下权利。Plotly visual的默认大小比Matplotlib使用的默认大小大得多。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es jz"><img src="../Images/5f74ed01f9d912cad28a4591ec643da2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r4xt2z1QFWSVlItyHgGcGg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">Plotly的默认大小更大，并为我们提供了比较三家公司数据的能力</figcaption></figure><p id="dbcc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，我们可以很容易地为我们三家公司的股票价格绘制一个漂亮的箱形图。在这种情况下，通过单击可视化右上角的两条平行水平线，您可以将鼠标悬停在线(之前的图形)或框上，以查看可以显示的数据。这里我们可以看到Stock_A的统计数据。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es ka"><img src="../Images/f1247a430beeec0f013194bb065bccad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nsadURgXwKvmb8_mP5zq9g.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">三个箱线图展示了股票A的一些统计数据</figcaption></figure><p id="dec7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种视觉被称为传播。在处理股票和其他金融数据时，使用和查看是很常见的。上面的部分看起来与我们首先制作的基本df.iplot()非常相似，但是下面的部分显示了某一点上Stock_A和Stock_C之间的价差。中间的浅色框是我选择我想要放大的部分。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es kb"><img src="../Images/7e29cd4734d67278852b864283eadcd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xAWqsdPvu68xSEA00UG4wA.png"/></div></div></figure><p id="f891" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是当我们放大图表中的一个选定区域时，顶部的视觉效果。我们也可以对底部展开视觉效果做同样的事情。这两者都放大了数据的相同部分。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es kc"><img src="../Images/3449517fe86b44d96b0b48889dfe7c5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9b1lNIXZJ2VFqW9PQiG1tw.png"/></div></div></figure><p id="28ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下三个视觉效果都来自Plotly的一个做得很好的完整的例子。这是来自股票代码“aapl”或更广为人知的苹果公司的真实数据。这个视图还使用了“蜡烛图”,这是查看股票数据的另一种常见方法。同样，将鼠标悬停在数据上会显示所选点的各种信息。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es jz"><img src="../Images/454c25f727a6d84b2a6892d1bad33dda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n9NhU46RAZPS9DeIw1v-GQ.png"/></div></div></figure><p id="9ebc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，我可以再次“放大”到股票价格的选定区域。然而，这个例子为我们提供了一个很好的‘slider’特性来选择一个日期范围，以便更仔细地检查。你可以看到我选择选取了2015年4月到2015年7月左右。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es kd"><img src="../Images/5e8c7642e099d4e85afc6be90bd45703.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jXqR0sm6e3Y8gC_B0kvjTA.png"/></div></div></figure><p id="74ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后但并非最不重要的是，这是在选择一个特定的日期范围来查看时，蜡烛图看起来的样子。你可以看到画面的底部很好地向我们展示了上面主画面中显示的时间范围。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es ke"><img src="../Images/e6d3267f213c7fa24cd40cbae7f74ddc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aW6qyxFrYqba3rmw71BIRQ.png"/></div></div></figure><p id="ecc5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这篇博文到此为止！我希望你学到了一些有趣的东西，感谢你的阅读！直到下一集。</p></div></div>    
</body>
</html>