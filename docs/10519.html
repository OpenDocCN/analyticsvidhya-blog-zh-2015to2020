<html>
<head>
<title>Named Entity Recognition (NER) with spaCy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带空间的命名实体识别(NER)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/named-entity-recognition-with-spacy-2ecfa4114162?source=collection_archive---------9-----------------------#2020-10-22">https://medium.com/analytics-vidhya/named-entity-recognition-with-spacy-2ecfa4114162?source=collection_archive---------9-----------------------#2020-10-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/1227f96c2d91e8a8e410c2d568a445b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*S-059gWu63kpqYqg.jpg"/></div></div></figure><div class=""/><p id="ac75" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">命名实体识别(NER)是自然语言处理的一个重要方面。通过使用 NER，我们可以智能地提取实体信息(相关名词，如地点、人、位置等。)来帮助从文本中获得更多的含义。</p><p id="274c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">NER 可用于构建推荐、从大量文本中快速提取相关信息、客户支持，甚至对文本内容进行编目。</p><p id="8251" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">NLTK 和 spaCy 为许多 NLP 问题提供了预先训练好的模型，包括命名实体识别。在这篇文章中，我们将通过一个温和的介绍如何执行 NER 与空间。</p><p id="7175" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">不用说，你需要先在你的机器上安装 spaCy。请按照此处提供的说明在您的机器上安装 spaCy。</p><p id="4292" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">spaCy 支持不同级别的多种语言，完整的型号列表请访问<a class="ae jo" href="https://spacy.io/usage/models" rel="noopener ugc nofollow" target="_blank">这个</a>页面。</p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><h1 id="c6e6" class="jw jx ht bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated"><strong class="ak">命名实体</strong></h1><p id="dcd7" class="pw-post-body-paragraph iq ir ht is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">spaCy 支持在注释 5 的<a class="ae jo" href="https://catalog.ldc.upenn.edu/LDC2013T19" rel="noopener ugc nofollow" target="_blank">上训练的模型的以下实体类型。</a></p><figure class="la lb lc ld fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kz"><img src="../Images/cacaad5fa76f3507e91b12a5f0a30e0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*Xpribp8XJPaFgwX0_IbhDA.png"/></div></div></figure><p id="011e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们来看一个例子，我们正在为 NER 加载"<strong class="is hu"> en_core_web_lg </strong>"模型。该模型是在 OntoNotes 上训练的英语多任务 CNN，在普通爬行上训练手套向量。它分配单词向量、上下文特定的标记向量、位置标签、依赖解析和<em class="le">命名实体</em>。</p><pre class="la lb lc ld fd lf lg lh li aw lj bi"><span id="b270" class="lk jx ht lg b fi ll lm l ln lo">import spacy<br/>nlp = spacy.load("en_core_web_lg")</span></pre><p id="094b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将文本传递给模型，</p><pre class="la lb lc ld fd lf lg lh li aw lj bi"><span id="f7b1" class="lk jx ht lg b fi ll lm l ln lo">doc = nlp(“Manchester United Football Club is a professional football club based in Manchester, England established in 1978”)</span></pre><p id="7a2d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">该模型返回一个<strong class="is hu"> spacy.tokens.doc.Doc </strong>对象，您可以对其进行迭代。因为我们没有为我们的模型对象定义定制的管道，所以它执行了模型支持的所有 NLP 操作。</p><p id="5460" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，让我们遍历模型返回的命名实体</p><pre class="la lb lc ld fd lf lg lh li aw lj bi"><span id="845f" class="lk jx ht lg b fi ll lm l ln lo">for ent in doc.ents:<br/>    print(ent.text, ent.label_)</span></pre><figure class="la lb lc ld fd hk er es paragraph-image"><div class="er es lp"><img src="../Images/1f0c06e4dfc42161e61e473e4e39732e.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/format:webp/1*9Af8l0xyE03dYS0F_pjDsA.png"/></div></figure><h1 id="c5c4" class="jw jx ht bd jy jz lq kb kc kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt bi translated"><strong class="ak">从新闻文章中提取命名实体</strong></h1><p id="cec6" class="pw-post-body-paragraph iq ir ht is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">对于这个例子，我们将使用一个名为<a class="ae jo" href="https://github.com/codelucas/newspaper" rel="noopener ugc nofollow" target="_blank">news</a>的强大的库来抓取一篇新闻文章并对内容执行 NER。报纸图书馆提供了很多现成的功能，比如除了支持非英语语言之外，还可以对文章进行总结。</p><pre class="la lb lc ld fd lf lg lh li aw lj bi"><span id="9466" class="lk jx ht lg b fi ll lm l ln lo">from newspaper import Article<br/>import spacy</span><span id="d2ba" class="lk jx ht lg b fi lv lm l ln lo">nlp = spacy.load("en_core_web_lg")</span><span id="28b6" class="lk jx ht lg b fi lv lm l ln lo">url = r"<a class="ae jo" href="https://techcrunch.com/2020/09/16/ios-14-is-now-available-to-download/" rel="noopener ugc nofollow" target="_blank">https://techcrunch.com/2020/09/16/ios-14-is-now-available-to-download/</a>"<br/>article = Article(url)<br/>article.download()<br/>article.parse()</span><span id="e46c" class="lk jx ht lg b fi lv lm l ln lo">doc = nlp(article.text)</span><span id="4524" class="lk jx ht lg b fi lv lm l ln lo">for ent in doc.ents:<br/>    print(ent.text, ent.label_, ent.start_char, ent.end_char)</span></pre><figure class="la lb lc ld fd hk er es paragraph-image"><div class="er es lw"><img src="../Images/9d2e53bb1c4191af9d85aecb293162c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/1*_rENx__BZFj1VeoljHVKWg.png"/></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">文章中的命名实体</figcaption></figure><h1 id="4029" class="jw jx ht bd jy jz lq kb kc kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt bi translated"><strong class="ak">显示</strong></h1><p id="9ebf" class="pw-post-body-paragraph iq ir ht is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">spaCy 还提供了一个方便的可视化库 displacy 来可视化文本中的命名实体。你可以用 displacy，就像这样，</p><pre class="la lb lc ld fd lf lg lh li aw lj bi"><span id="e899" class="lk jx ht lg b fi ll lm l ln lo">doc = nlp("Manchester United was founded in 1878 as Newon Heath in Manchester, England")<br/>spacy.displacy.serve(doc, style='ent')</span></pre><figure class="la lb lc ld fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mb"><img src="../Images/54209949519fa6a4df02d4f3acd5006e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yc3v00H3GPROrxQh6XErdA.png"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">使用 displacy 可视化命名实体</figcaption></figure><p id="8ddf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们甚至可以用它来可视化一个文本的依存解析树，就像这样，</p><pre class="la lb lc ld fd lf lg lh li aw lj bi"><span id="34a3" class="lk jx ht lg b fi ll lm l ln lo">doc = nlp(u"Manchester United was founded in 1878 in Manchester, England")<br/>spacy.displacy.serve(doc, style='dep')</span></pre><figure class="la lb lc ld fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mc"><img src="../Images/1c931f4f62ed6b78d2cb8c5f0b1839c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SZ5078YUCT0aPxLi-j-oRw.png"/></div></div><figcaption class="lx ly et er es lz ma bd b be z dx translated">用 displacy 可视化的依赖关系解析树</figcaption></figure></div></div>    
</body>
</html>