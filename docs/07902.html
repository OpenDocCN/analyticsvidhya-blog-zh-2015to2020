<html>
<head>
<title>Predicting Match Ratings of Football Players using Machine Learning</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用机器学习预测足球运动员的比赛评分</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/predicting-match-ratings-of-football-players-using-machine-learning-51bf7a5ab6ad?source=collection_archive---------12-----------------------#2020-07-11">https://medium.com/analytics-vidhya/predicting-match-ratings-of-football-players-using-machine-learning-51bf7a5ab6ad?source=collection_archive---------12-----------------------#2020-07-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="fe85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">利用机器学习技术，借助比赛数据预测足球运动员的比赛评分。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/4187da7101711d34ed800094ac06bc5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*clyKg8YnpGCSR2VrVSwwVg.jpeg"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">演职员表:【https://all-free-download.com/ T2】</figcaption></figure><p id="4324" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">足球</strong>或<strong class="ih hj">英式足球</strong>(美国人称之为足球)是一项深受全世界数百万人喜爱的游戏。一天，在检查玩家表演时，我突然想到<strong class="ih hj">玩家评分</strong>可以借助<strong class="ih hj">机器学习</strong>技术<strong class="ih hj">预测</strong>。因此，我查阅了公共数据集，但找不到我要找的那种数据。因此，我做了一些网络搜集，从各种联赛收集了2019-20赛季的数据，如<strong class="ih hj">英超、西甲、德甲、意甲、欧冠</strong>等。在ka ggle(<a class="ae jq" href="https://www.kaggle.com/sanjit1105/soccer-players-stats-and-ratings-matchwise" rel="noopener ugc nofollow" target="_blank">https://www . ka ggle . com/sanjit 1105/soccer-players-stats-and-ratings-match wise</a>)上可以找到。所以，让我们开始吧！</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es jr"><img src="../Images/f45585582508a9a4f8e8e2d6137a6c72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iX8MvyXrTJfK3oeQjyy5aw.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">功能描述</figcaption></figure><p id="1a8b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据集有47个特征，我们的<strong class="ih hj">目标变量</strong>是<strong class="ih hj">“评级”</strong>，范围从0到10。如果我们看一下我们的数据集特征，我们会发现大多数特征都是数值特征，其中值的增加或减少会极大地影响结果或预测。我们将缩放一些值，但有些值并不完全可缩放，因此我们将保持不变。存在分类特征，例如is_a_sub、was_subbed、黄牌和红牌。</p><h1 id="58b6" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated"><strong class="ak">数据探索</strong></h1><p id="eb77" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">让我们从导入。csv文件和库，如<strong class="ih hj"> pandas </strong>、<strong class="ih hj"> seaborn </strong>、<strong class="ih hj"> matplotlib </strong>和<strong class="ih hj"> numpy </strong>，因为它们在以后可能会有用。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kz"><img src="../Images/2c879a3694c2e1f93ad0bf8f54d84baa.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/format:webp/1*MrAXWMlX6SaCRG0Ru9HEpQ.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">导入库</figcaption></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es la"><img src="../Images/901a4530571e9208f5e8144122d05e66.png" data-original-src="https://miro.medium.com/v2/resize:fit:826/format:webp/1*VAybhbrQpyKARDMG9I4S7g.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">导入数据集</figcaption></figure><p id="0333" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们检查数据集的维度，它的形状是(22555，47)</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lb"><img src="../Images/deb54fb21391d814ae69ed1309fb4a79.png" data-original-src="https://miro.medium.com/v2/resize:fit:318/format:webp/1*JDnVtkKtlfqVsVaz4F5QQA.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">火车形状</figcaption></figure><p id="91b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们检查数据集中的目标变量分布。这看起来几乎像一个<strong class="ih hj">正态/高斯</strong>分布。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es lc"><img src="../Images/413b243f39431e31eed8d3587b8c64de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IxhdmCfJx4SehCeUP7UxwQ.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">目标变量分布</figcaption></figure><p id="b625" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们检查训练数据集的<strong class="ih hj">关联图</strong>，这将使我们了解这些特征以及它们对<strong class="ih hj">目标特征(“评级”)</strong>的<strong class="ih hj">种影响</strong>。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es ld"><img src="../Images/e9858efe0dd3b7ce47deef5c80c85968.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/format:webp/1*_KHBCrlN71JdKL7amK2xaQ.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">代码实现见train.corr()</figcaption></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es le"><img src="../Images/dc847701c751d14aac94e19800b342f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/format:webp/1*C7lHrE81wlJUcDioTBE7yg.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">目标变量的相关图</figcaption></figure><p id="4c07" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">相关图表明，对于<strong class="ih hj">目标特征(“等级”)</strong>，大多数特征与<strong class="ih hj">正</strong>相关，但是诸如<strong class="ih hj">、【失球】、【天线】</strong>的特征与<strong class="ih hj">负</strong>相关。此外，诸如<strong class="ih hj">“射击_开_目标”</strong>之类的特征比<strong class="ih hj">“射击_关_目标”</strong>更相关。诸如<strong class="ih hj">“进球”、“机会_创造”、“假摔_扑救”、“关键_传球”</strong>和<strong class="ih hj">“助攻”</strong>的特征比其他特征具有更高的相关性。对于一个对足球有基本了解的人来说，所有这些特征都具有更高的重要性这一事实将会有明确的意义。</p><p id="beb2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们来看看<strong class="ih hj">按照</strong>玩家<strong class="ih hj">角色的数据</strong>分布。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es lf"><img src="../Images/694105b12745b334f8853252c9651adb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rESjIgDrPnawdM3vXs1ORA.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">数据中的角色分布</figcaption></figure><p id="2b52" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好的，所以数据集中的<strong class="ih hj">门将</strong>的数量是其他角色中最少的<strong class="ih hj">，这是可以理解的，因为考虑到换人，每场比赛只能有一到两名门将。现在，让我们看看数据集中的空值。</strong></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lg"><img src="../Images/bde9a0b1a7a127770c7343ee9f931274.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*BuCa2YzG1GFtCQMSg5h2Tw.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">具有空值的要素</figcaption></figure><p id="b0e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们观察到有许多具有空值的要素。让我们检查属于<strong class="ih hj">保管员</strong>的记录数和其余的记录数。我们稍后将回到这一点。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lh"><img src="../Images/cb39096f565ce47fe48f514e0f004245.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*9_ZB9-vaYfF3CyNV_tZM4A.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">属于守门员和其他人的号码记录(例如，中场、后卫和前锋)</figcaption></figure><h1 id="a517" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">特征工程</h1><p id="8d15" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">如果我们用<strong class="ih hj"> train.describe() </strong>检查数据的分布，我们会注意到特征<strong class="ih hj">“acted _ as _ sweeper”</strong>和<strong class="ih hj">“shots _ women”</strong>都有零值。因此，我们可以安全地删除这些列。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es li"><img src="../Images/0e4338e683b5a2fcd3a5ec8d1f4092a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/1*QIDAfx6wIg7V1SwQczDv9A.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">丢弃不相关的功能</figcaption></figure><p id="88fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们检查一下<strong class="ih hj"> train.info() </strong>我们可以看到有些特性的数据类型为<strong class="ih hj"> float </strong>但实际上是特性(<em class="jd">像</em> <strong class="ih hj"> <em class="jd">进球_失球</em> </strong> <em class="jd">，</em> <strong class="ih hj"> <em class="jd">助攻</em> </strong> <em class="jd">和</em> <strong class="ih hj"> <em class="jd">有些</em></strong><em class="jd"><strong class="ih hj"><em class="jd">分类特性【T58在继续之前，让我们将它们转换成int。</em></strong></em></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es lj"><img src="../Images/b50edf62f04033f71ca8f319a80defbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bnBIenoqDgNrgbuD1VV9Xw.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">将只能包含整数数据的列(包括分类列)转换为int</figcaption></figure><p id="ec23" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">回到空值，我们可以看到在一些特性中，空值的计数与作为<strong class="ih hj">保存者</strong>和非保存者的记录的计数相同。这同样适用于一些特征，如“<strong class="ih hj">假摔_扑救”、“扑救”、“出拳</strong>次数”等。是守门员专属的，而“<strong class="ih hj">进球”、“机会_创造”</strong>是进攻者、中场和防守者专属的(或者至少是训练数据集)。此外，具有空值的诸如was_subbed、yellow_card和red_card之类的特征可以被认为是如描述中所述的0。因此，我们可以将所有这些值填充为零。在特性“<strong class="ih hj">role”</strong>中有6个空值，我只是通过谷歌搜索它们的名字来填充，但是如果愿意的话，可以完全删除它们。</p><p id="28e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于特性，<strong class="ih hj">“通过_成功”</strong>如果我们看一下<strong class="ih hj">“准确_通过”</strong>和<strong class="ih hj">“通过”</strong>列，我们可以观察到<strong class="ih hj">“通过_成功”</strong>基本上是<strong class="ih hj">“准确_通过”</strong>和<strong class="ih hj">“通过”</strong>的<strong class="ih hj">百分比。</strong></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lk"><img src="../Images/31bba23df46e81b581d62827fae69888.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*o8WeVGmzPSp_EmQgkCxOXA.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">检查pass _ success = accurate _ passes/passes</figcaption></figure><p id="1656" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，如果我们查看一下<strong class="ih hj"> "pass_success" </strong>的NA值，则<strong class="ih hj">" accurate _ passes "</strong><strong class="ih hj">" passes "</strong>(如上所述)的<strong class="ih hj">有效</strong>和<strong class="ih hj">不为空</strong>的值可以很容易地计算出来。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es ll"><img src="../Images/df9acf722701b6777224634efeb5bb32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*CkMrMbfNE0Pqb9q_vbWxFQ.png"/></div></figure><p id="f6cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在填充值时，我们需要删除列<strong class="ih hj">“pass _ success”</strong>中的“%”符号。还有一个特征<strong class="ih hj">“shot _ accuracy”</strong>，其中有“%”符号。我们移除符号并将值除以100。对于<strong class="ih hj"> "pass_success" </strong>中的空值，我们收集具有<strong class="ih hj"> "passes" &gt; 0 </strong>的索引，因为我们想要<strong class="ih hj">防止<strong class="ih hj"> "passes" = 0的值被零除</strong>。</strong>我们还将其余特征的NA值填充为0。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es lm"><img src="../Images/cdd7b521f12d9cba83972418f2dd307d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8aLV7VIPn0I0xZokXdJK2g.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">通过将精确次数除以次数来填充“成功次数”列</figcaption></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es ln"><img src="../Images/bc58e171f75a50a047d6b0031a4bc531.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6-hZaQ8WrCK6rOGKGLGnPQ.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">将其余列(目标变量除外)的NA值填写为0</figcaption></figure><p id="7e82" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们只剩下目标变量，它仍然有空值。让我们来看看<strong class="ih hj">“Rating”</strong>的空值数据的记录，并检查<strong class="ih hj">“minutes _ played”</strong>与其计数之间的<strong class="ih hj">关系</strong>。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es lo"><img src="../Images/654d616fcf7cda023391298f369357df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rOHIEdj6lKNmjJS5Y5rHrA.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">空评分值的分钟数分布</figcaption></figure><p id="b096" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，<strong class="ih hj">记录</strong>中的<strong class="ih hj">大部分</strong>来自游戏时间不到10分钟的玩家。现在，这种模式也是有意义的，因为在球场上待了不到10分钟的<strong class="ih hj">球员</strong><strong class="ih hj">几乎没有机会</strong>对比赛产生任何影响，并且可能以很少的统计数据结束。因此，我们可以删除所有记录并继续。但是，一些足球爱好者可能会争辩说，有时是替补球员决定了比赛的胜负，无论是进球、助攻还是最后一分钟的精彩扑救，除了替补球员，可能还有球员在比赛的前几分钟被红牌罚下，或者受伤，不得不被替换。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lp"><img src="../Images/4af8ce122c1a398a19ae38cd890a70d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*eG8wTs4qqs5P3uSFA_mS9A.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">在剩余的1332个零评级值中，13个被替换，1320个被替换</figcaption></figure><p id="65d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">玩10分钟以上</strong>且<strong class="ih hj">空评分值</strong>的玩家<strong class="ih hj">数量</strong>极少，那些<strong class="ih hj">记录</strong>被<strong class="ih hj">删除</strong>。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es lq"><img src="../Images/76a2f2304bcb11345d733bc046982987.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mfT_etfkDt2plnLkn6_P4g.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">删除评分和播放分钟数大于10的空值记录</figcaption></figure><p id="861f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于剩下的记录(利用我在足球领域的知识)，我决定<strong class="ih hj">根据那些球员的<strong class="ih hj">关键表现</strong>和<strong class="ih hj">是否被裁判出示</strong>(<strong class="ih hj">红牌或黄牌</strong>)来填写评分</strong>的NA值。以下是我使用的标准:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lr"><img src="../Images/fc961ae89420f1d67bfe779fc3c0c734.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*ma5UibaUlmrNbLNAJVvYtA.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">填写NA评级值的标准</figcaption></figure><p id="569c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们用代码实现以上内容。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es ls"><img src="../Images/3d8b916f0e041591f1aee5379fe34f9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IFDQ7NUY3GdcoFSvZc16mw.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">评级调整的实施</figcaption></figure><p id="c855" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，特性已经准备好了，我们需要做的最后一件事就是<strong class="ih hj">缩放</strong>特性中的值。如果你还记得，我们谈到过这样一个事实，即我们不能缩放所有的数字特征，因为诸如<strong class="ih hj">【进球】</strong><strong class="ih hj">【助攻】</strong><strong class="ih hj">【扑救】</strong>或<strong class="ih hj">【创造的机会】</strong>等特征没有这样的上限。任何球员都可以在一场比赛中得分或提供任意次数的传球或助攻。因此，<strong class="ih hj">根据训练数据缩放</strong>值将是一个可怕的想法，特别是如果你想通过将它集成到网络平台或Android平台来制作实时预测器。但是，有一个我们可以调整的功能，那就是<strong class="ih hj">“minutes _ played”</strong>，因为一个玩家可以玩的分钟数只能在0-120之间(考虑到平局情况下的加时赛)。让我们继续使用<strong class="ih hj"> sklearn来缩放列<strong class="ih hj">“minutes _ played”</strong>。最小最大缩放器</strong>。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lt"><img src="../Images/a61bdca3b736ce1a8b023ff7137d6931.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*iaU-e4wp40oa_emyzPdRfQ.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">使用MinMaxScaler计算“已播放的分钟数”</figcaption></figure><h1 id="e215" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">特征抽出</h1><p id="7681" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">在进行数据探索和特征工程时，我们注意到<strong class="ih hj">只有一些特征</strong>对<strong class="ih hj">管理员</strong>来说是<strong class="ih hj">重要的</strong>。对于守门员角色，诸如<strong class="ih hj">【进球】</strong><strong class="ih hj">【助攻】</strong><strong class="ih hj">【扑救】</strong>或<strong class="ih hj">【创造机会】</strong>的特征无论如何都被填充为0。所以，我觉得把训练数据拆分成<strong class="ih hj">守门员_模型(守门员)</strong>和<strong class="ih hj">球员_模型(进攻者、防守者和中场)</strong>会更好。因此，我们可以<strong class="ih hj">移除与<strong class="ih hj">保管员</strong>和<strong class="ih hj">非保管员</strong>和<strong class="ih hj">不相关的<strong class="ih hj">特征</strong>，并根据这些数据训练模型</strong>。让我们用代码实现它。</strong></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es lu"><img src="../Images/10b78b86443a4d5c08156e566d3f811d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jq0hXiiguAGDYdWs2X0rFg.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">训练数据分为球员训练和守门员训练</figcaption></figure><p id="b356" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们已经为<strong class="ih hj">守门员</strong>和<strong class="ih hj">球员(非守门员)</strong>准备了<strong class="ih hj">两个独立的训练数据文件</strong>，我们还需要处理分类特征<strong class="ih hj">“角色”</strong>。因为在<strong class="ih hj"> keeper_train </strong>中只能有一个值，即keeper，所以我们可以完全删除该列。但是，在<strong class="ih hj"> player_train </strong>的情况下，我们需要在前进之前对<strong class="ih hj">“role”</strong>列进行编码。我这里用了<strong class="ih hj"> pandas.get_dummies() </strong>。我们还需要从两个数据集中移除<strong class="ih hj">“player _ id”</strong>和<strong class="ih hj">“name”</strong>特征，因为唯一值在训练期间是不相关的。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lv"><img src="../Images/c7d9b9ab1a578989c0105a49dfc32ef6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*R2qCMPny0F7wN0pxzFy-aw.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">删除不相关的列，对player_train的“角色”特性进行编码</figcaption></figure><h1 id="e4fa" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated"><strong class="ak">模型准备和培训</strong></h1><p id="7912" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">现在让我们<strong class="ih hj">将</strong>数据集分割成<strong class="ih hj">数据，并为<strong class="ih hj">玩家_训练</strong>和<strong class="ih hj">看守_训练</strong>标注</strong>。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es lw"><img src="../Images/f3c38f39a82073a0249eca18972d42ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:974/format:webp/1*74yFGnHCqkZ2jlCV1dITHw.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx translated">将每个训练数据集分割成数据和标签(目标变量)</figcaption></figure><p id="1603" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">我没有将数据集分为训练数据集和测试数据集，因为我的目的是对这个项目进行端到端的实现</em>。我确实创建了一个测试数据集来测量准确性。但是，我的目的是建立一个模型，通过从互联网上收集球员统计数据，可以用来预测任何足球比赛的收视率。</p><p id="20d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，如果您愿意，可以将此数据集分为训练和测试两部分。使用我使用的测试数据集，<strong class="ih hj"> XGBoost回归</strong>为<strong class="ih hj">玩家_训练</strong>提供了最佳结果，而<strong class="ih hj">支持向量回归</strong>为<strong class="ih hj">看守者_训练</strong>模型提供了最佳结果。此外，测试数据集可以很容易地收集，因为足球比赛每隔一天举行。<em class="jd">这只是为数不多的可行方法之一，我们总是可以以不同的方式预处理数据，或者收集更多的训练数据。</em></p><p id="d40f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在Heroku Cloud上用React和Flask集成了这个。随意尝试一下(【https://player-match-rating-predictor.herokuapp.com/<a class="ae jq" href="https://player-match-rating-predictor.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">)。</a></p><p id="a76c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望这对刚接触数据科学的人有所帮助，并且足够简单。我知道我可能错过了很多东西。因此，任何类型的建议或改进是赞赏的。<strong class="ih hj"> <em class="jd">快乐编码！</em>T47】</strong></p></div></div>    
</body>
</html>