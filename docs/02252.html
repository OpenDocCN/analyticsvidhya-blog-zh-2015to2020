<html>
<head>
<title>Real-time Face Detection on Raspberry Pi</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">树莓Pi上的实时人脸检测</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/real-time-face-detection-on-raspberry-pi-ea3f42508bcc?source=collection_archive---------1-----------------------#2019-12-08">https://medium.com/analytics-vidhya/real-time-face-detection-on-raspberry-pi-ea3f42508bcc?source=collection_archive---------1-----------------------#2019-12-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="324f" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">在每秒运行24帧的Raspberry Pi上实现实时人脸检测的分步指南</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/9171da2f1f68afe456eafa29433daf49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nF_kXy_zfzy0G4SiQ2Bvug.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">显示检测到的面孔的图像</figcaption></figure><p id="73ef" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在这篇文章中，我将一步一步地指导你在Raspberry Pi上实现实时人脸检测，在单核上以每秒24帧的速度运行。</p><p id="1e2a" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">我将使用一个树莓Pi 3B+，用<a class="ae kj" href="https://www.raspberrypi.org/downloads/raspbian/" rel="noopener ugc nofollow" target="_blank"> Raspbian Buster </a>作为操作系统和一个Pi相机。</p><p id="087f" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">对于人脸检测，我将使用Xailient FaceSDK。</p><h2 id="2bb8" class="kk kl hi bd km kn ko kp kq kr ks kt ku jw kv kw kx ka ky kz la ke lb lc ld le bi translated">步骤1:安装Python 3.7.3</h2><p id="6f49" class="pw-post-body-paragraph jn jo hi jp b jq lf ij js jt lg im jv jw lh jy jz ka li kc kd ke lj kg kh ki hb bi translated">Raspbian Buster预装了Python 3.7.3，所以不需要显式安装Python 3.7.3。为了确认，使用下面的命令来查看您的Raspberry Pi中安装了哪个版本的Python。</p><pre class="iy iz ja jb fd lk ll lm ln aw lo bi"><span id="120b" class="kk kl hi ll b fi lp lq l lr ls">python --version</span></pre><h2 id="fe49" class="kk kl hi bd km kn ko kp kq kr ks kt ku jw kv kw kx ka ky kz la ke lb lc ld le bi translated">步骤2:为Python 3.7安装tflite</h2><p id="3af1" class="pw-post-body-paragraph jn jo hi jp b jq lf ij js jt lg im jv jw lh jy jz ka li kc kd ke lj kg kh ki hb bi translated">要安装tflite for Python 3.7，请在终端中输入以下pip3 install命令。</p><pre class="iy iz ja jb fd lk ll lm ln aw lo bi"><span id="adbb" class="kk kl hi ll b fi lp lq l lr ls">pip3 install <a class="ae kj" href="https://dl.google.com/coral/python/tflite_runtime-1.14.0-cp37-cp37m-linux_armv7l.whl" rel="noopener ugc nofollow" target="_blank">https://dl.google.com/coral/python/tflite_runtime-1.14.0-cp37-cp37m-linux_armv7l.whl</a></span></pre><h2 id="c6c7" class="kk kl hi bd km kn ko kp kq kr ks kt ku jw kv kw kx ka ky kz la ke lb lc ld le bi translated">第三步:安装OpenCV</h2><p id="59b9" class="pw-post-body-paragraph jn jo hi jp b jq lf ij js jt lg im jv jw lh jy jz ka li kc kd ke lj kg kh ki hb bi translated">如果尚未安装OpenCV，请安装它。您可以在您的Raspberry Pi上使用apt install或pip3 install OpenCV。</p><pre class="iy iz ja jb fd lk ll lm ln aw lo bi"><span id="163d" class="kk kl hi ll b fi lp lq l lr ls">sudo apt install -y python3-opencv</span></pre><p id="ff52" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">或者</p><pre class="iy iz ja jb fd lk ll lm ln aw lo bi"><span id="f6c3" class="kk kl hi ll b fi lp lq l lr ls">pip3 install opencv-python</span></pre><h2 id="807b" class="kk kl hi bd km kn ko kp kq kr ks kt ku jw kv kw kx ka ky kz la ke lb lc ld le bi translated">第4步:下载Xailient FaceSDK并解压</h2><p id="8ead" class="pw-post-body-paragraph jn jo hi jp b jq lf ij js jt lg im jv jw lh jy jz ka li kc kd ke lj kg kh ki hb bi translated">进入<a class="ae kj" href="https://hubs.ly/H0m5y9q0" rel="noopener ugc nofollow" target="_blank"> Xailient SDK页面</a>注册新用户并登录。</p><p id="c9e9" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">进入<strong class="jp hj"> <em class="lt"> SDK </em> </strong>标签，在这里你会找到下载和安装Face SDK的说明。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lu"><img src="../Images/a46a346fe3c0673e118fbb925a52e3da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PjSCxi56iqZYSgQnULYkNw.png"/></div></div></figure><p id="832f" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">对于树莓派3B+，下载SDK的ARM32版本。您可以从您的Raspberry Pi浏览器中打开链接直接下载到它，或者您可以使用以下wget命令:</p><pre class="iy iz ja jb fd lk ll lm ln aw lo bi"><span id="18e3" class="kk kl hi ll b fi lp lq l lr ls">wget -O sdk.tar.gz "SDK Link"</span></pre><p id="f428" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">解压下载的FaceSDK。</p><h2 id="3107" class="kk kl hi bd km kn ko kp kq kr ks kt ku jw kv kw kx ka ky kz la ke lb lc ld le bi translated">步骤5:将共享库添加到路径</h2><p id="0579" class="pw-post-body-paragraph jn jo hi jp b jq lf ij js jt lg im jv jw lh jy jz ka li kc kd ke lj kg kh ki hb bi translated">这是必需的，因为库依赖于一些动态加载的共享库。</p><pre class="iy iz ja jb fd lk ll lm ln aw lo bi"><span id="8424" class="kk kl hi ll b fi lp lq l lr ls">export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$&lt;Python_SDK path/Shared_arm32&gt;</span></pre><p id="fb33" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">您可以将库路径添加到bashrc脚本中，这样您就不需要每次登录时都导出。</p><pre class="iy iz ja jb fd lk ll lm ln aw lo bi"><span id="2fe5" class="kk kl hi ll b fi lp lq l lr ls">echo “export LD_LIBRARY_PATH=$LD_LIBRABRY_PATH:$&lt;pathofSDK&gt;/Shared_arm32” &gt;&gt; .bashrc</span></pre><h2 id="851c" class="kk kl hi bd km kn ko kp kq kr ks kt ku jw kv kw kx ka ky kz la ke lb lc ld le bi translated">步骤6:下载配置文件</h2><p id="c085" class="pw-post-body-paragraph jn jo hi jp b jq lf ij js jt lg im jv jw lh jy jz ka li kc kd ke lj kg kh ki hb bi translated">在Xailient SDK页面中，通过从您的Raspberry Pi浏览器打开到的链接或使用以下wget命令下载配置文件:</p><pre class="iy iz ja jb fd lk ll lm ln aw lo bi"><span id="bec3" class="kk kl hi ll b fi lp lq l lr ls">wget -O config.json "Config Link"</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lv"><img src="../Images/4a45a74b24d01df23a7d35a026eaa69b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7E6b7-MB_avpfzxNp5uaMQ.png"/></div></div></figure><p id="4bc3" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">将<em class="lt"> config.json </em>文件复制到FaceSDK文件夹中。</p><h2 id="cb23" class="kk kl hi bd km kn ko kp kq kr ks kt ku jw kv kw kx ka ky kz la ke lb lc ld le bi translated">步骤7:安装Xailient FaceSDK</h2><p id="c6be" class="pw-post-body-paragraph jn jo hi jp b jq lf ij js jt lg im jv jw lh jy jz ka li kc kd ke lj kg kh ki hb bi translated">要安装Xailient FaceSDK，请运行SDK文件夹中的<em class="lt"> Install.sh </em>文件。从终端转到FaceSDK文件夹，并运行以下命令:</p><pre class="iy iz ja jb fd lk ll lm ln aw lo bi"><span id="c55a" class="kk kl hi ll b fi lp lq l lr ls">./Install.sh</span></pre><p id="53fc" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">有关安装过程的更多详细信息，可以参考FaceSDK附带的自述文件。</p><h2 id="47aa" class="kk kl hi bd km kn ko kp kq kr ks kt ku jw kv kw kx ka ky kz la ke lb lc ld le bi translated">步骤8:运行样本人脸检测代码</h2><p id="0cb5" class="pw-post-body-paragraph jn jo hi jp b jq lf ij js jt lg im jv jw lh jy jz ka li kc kd ke lj kg kh ki hb bi translated">FaceSDK附带的示例代码演示了如何使用Xailient人脸检测器Python库以及如何与该库进行交互。</p><p id="f05c" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">转到<em class="lt"> samples </em>文件夹，运行<em class="lt">picam _ streaming _ demo . py</em>脚本运行实时人脸检测。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lw"><img src="../Images/e157dbe50a7037d9066c06c5cb9b2004.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*PnQINQZTniF2VmHteTfkVQ.gif"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">在Raspberry Pi 3B+上运行Xailient FaceSDK</figcaption></figure></div><div class="ab cl lx ly gp lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hb hc hd he hf"><p id="4e59" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在，您可以在树莓Pi上运行实时人脸检测。</p></div><div class="ab cl lx ly gp lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hb hc hd he hf"><p id="ed65" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj"> <em class="lt">发现这个帖子有用吗？请在下面留下你的想法。</em> </strong></p><p id="20cb" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">原载于<em class="lt"/><a class="ae kj" href="https://www.xailient.com/post/real-time-face-detection-on-raspberry-pi" rel="noopener ugc nofollow" target="_blank"><em class="lt">【www.xailient.com/blog】</em></a><em class="lt">。</em></p><p id="c8ec" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><em class="lt">更多故事:</em></p><p id="7aaf" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><a class="ae kj" href="https://www.xailient.com/post/integrate-face-detection-in-your-app" rel="noopener ugc nofollow" target="_blank"> <em class="lt">在你的App上集成人脸检测</em> </a></p><p id="4b19" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><a class="ae kj" href="https://www.xailient.com/post/challenges-of-running-deep-learning-computer-vision-on-computationally-limited-devices" rel="noopener ugc nofollow" target="_blank"> <em class="lt">在计算受限的设备上运行深度学习计算机视觉的挑战</em> </a></p><p id="c07c" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><a class="ae kj" href="https://www.xailient.com/post/struggles-of-running-object-detection-on-a-raspberry-pi" rel="noopener ugc nofollow" target="_blank"> <em class="lt">在树莓上挣扎运行的物体检测</em> </a></p><p id="8148" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><a class="ae kj" href="https://www.xailient.com/post/cloud-computing-to-edge-computing" rel="noopener ugc nofollow" target="_blank"> <em class="lt">你现在需要从云计算转向边缘计算！</em>T25】</a></p></div></div>    
</body>
</html>