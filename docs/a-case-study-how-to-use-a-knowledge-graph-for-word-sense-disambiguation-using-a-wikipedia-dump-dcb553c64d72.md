# 案例研究:如何使用维基百科转储、Neo4j 和 Elasticsearch 使用知识图进行词义消歧

> 原文：<https://medium.com/analytics-vidhya/a-case-study-how-to-use-a-knowledge-graph-for-word-sense-disambiguation-using-a-wikipedia-dump-dcb553c64d72?source=collection_archive---------18----------------------->

本文旨在通过一个图表来描述在单词之间进行词义消歧的指导方针。该项目仍在进行中，事实上，在目前的技术水平下，不可能对用一个以上的词表示的概念进行分类。本文的目的是解释通过使用搜索引擎和图形数据库来研究对象之间的现存关系的可能性，这些对象的价值尚未被识别，但其自身相对于其他对象表现出来。我已经在 [github](https://github.com/Lupanoide/graph_disambiguator) 上发布了用于我的研究的代码——python 微服务。

[](https://github.com/Lupanoide/graph_disambiguator) [## 羽扇豆素/图形 _ 消除歧义

### 安装 1。从该服务器下载最新版本的维基百科转储…

github.com](https://github.com/Lupanoide/graph_disambiguator) 

请叉我的项目，帮我改善应用程序。我只在意大利语和英语维基百科上测试过。我希望有人也能增加对其他语言的支持。如果你已经知道什么是歧义消除，你可以从第二部分开始阅读。享受阅读吧！

## 1.简介:什么是词义消歧以及为什么要研究句子中词与词之间的关系是理解词义的最好方法

词义消歧是允许我们**在一个句子中识别一个具有一个以上含义** — *多义*的单词的含义的过程。让一个术语变得清晰是我们这些说英语的人每天都在做的一项工作，比如像 *duck* 这样的多义词:

*   我儿子往池塘里扔面包屑来吸引鸭子
*   我的儿子蹲下躲避一个网球

根据“鸭子”在句子中所处的单词，我们能够辨别出在那个时刻单词的图形形式— *字形* —所呈现的确切含义。我们立即这样做，甚至没有意识到这一点。实际上，这种操作很难在机器上复制。

**这是因为语言的歧义不仅仅是一个具有不同含义的词可能具有的句法歧义**，**也不仅仅是一个动词变化中语法人可能具有的形态歧义**——例如**，而是恰恰存在一个语义问题，即词之间的连接问题**。一个经典的例子是*转喻*，即词义的转移。例如:

*   在罗马假日期间，我吃了一道意大利特色菜
*   我每天都喝一杯牛奶

我没有吃一道菜，也没有喝一杯，而是菜和杯子的内容。因此，我们经常无法通过直接转换句子中包含的术语来确定句子的具体含义，但是**句子的含义会根据术语之间的关系**而变化。

当然**语言的模糊性不是我们总能设法解决的事情**:有些句子，有些表达方式仍然模糊不清。为了避免打扰诗人、先知和神谕，我们可以把这句话作为例子

*   我看见一只美洲虎穿过了马路

根据它所处的上下文假设不同的含义。*捷豹*可以指*动物*和*汽车*。我们无法使这个句子的意思明确。这是因为移动的能力属于两个实体的意义范围。因此，我们无法确定句子的具体语义场。

为了解释这句话的两种意思，我应该观察这个短语前后的句子。所以我应该把我的句子和其他句子联系起来。因此，最好的策略总是保持不变:**研究组成句子的单词之间的关系，以便识别一个*语义场*** ，或者是一个字素所指的公共意义域。

# 2.方法和解决策略

为了找到语义场，我们需要一个关联实体的数据集。知识图是这种研究的正确选择。有了实体间关系的定义，就有可能简单地通过查询语义网络来理解两个概念是否相互肯定，所述语义网络适当地以图形形状建模。

尽管*链接开放数据*项目，如 [DBpedia](https://wiki.dbpedia.org/) 或 [Wikidata](https://www.wikidata.org/wiki/Wikidata:Main_Page) 提供了更多关于两个实体之间关系的信息，但它们的完整性也是它们的局限性。为了利用这一功能，我们需要在查询图的库中映射它们的本体中的类别之间的关系。此外，将实体之间的交互与书面语言的语义联系起来会导致一个不容易解决的问题。例如:

*   英国卫报

*英语*作为一个形容词，可以指代与*监护人* *字素*非常不同的关系，例如:国籍、生产国、地理来源、产品版本、*等等*。将语言表达式映射到它所能表达的概念之间的所有可能的关系可能成为一项繁重的任务。

![](img/f5ee53ba31449d5f9b877e72363041bb.png)

为了这个目的，最好的选择是创建一个在实体之间有不可知关系的图。这里维基百科派上了用场，它允许在实体之间创建一个 *has_outgoing_link* 关系。基于活跃了近二十年的维基媒体基金会项目的成熟，我们将会看到**如何在页面之间有一个准确而准时的参考。由于它的转储，我们不必担心提取维基百科页面中的所有链接，因为这些链接已经作为数据库方案中的一个字段。**

自 2014 年以来，维基媒体基金会[已经使用 Elasticsearch](https://blog.wikimedia.org/2014/01/06/wikimedia-moving-to-elasticsearch/) 作为生产中使用的后端基础设施的搜索引擎。每三天发布一个新的转储文件，用于每种覆盖语言的每个基础项目。Elasticsearch 的本地转储属于[cirussearch 项目](https://dumps.wikimedia.org/other/cirrussearch/)。Elasticsearch 通过搜索自然语言的术语来发挥其作为搜索引擎的全部功能，因为它为不同的语言提供了特定的分析器[，这些分析器可以转换输入字符串以提高搜索质量——比如删除停用词或将相关单词映射到相同的*词干* — *词干*。通过这种方式，我们将能够在数据集上提供全文搜索。](https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-lang-analyzer.html)

![](img/df1c66c5978100a063fc589f569ad460.png)

我们将使用 elasticsearch 来检索所有可能的候选实体，以表示需要消除歧义的句子中的字素。

我有意识地说了字素而不是术语，因为——正如我在文章开头所写的——这个特性在第一版的消歧器中没有提供。识别具有多个术语的实体的能力适合于逻辑分析的可能性和单词的逻辑依赖性。例如这个句子:

*   在底特律，老虎是从动物园逃出来的

不是指美国职业棒球大联盟球队*底特律老虎*，而是指两个不同的实体，*底特律*和*老虎*。为了更好地识别句子的句法结构，我们需要在库中实现一个词性标注器和一个句法依赖解析器。在第一版**中，我想把重点放在使用图表来研究概念/实体的语义领域**。如果你等不及下一个版本，你可以在 github 上找到我的库——你可以在页面的开头找到它——然后开发一个解决方案——万一让我知道它是如何运行的呢！

首先，我们将在为每个字素提取的实体之间进行笛卡尔乘积。如果对于每一个字素，可以有不确定数量的实体来表示它，则有必要创建每一个实体的组合，以便识别所有候选组合来表示句子的概念。因此，对于从单个字素中提取的每个实体，将为能够表示字素的一个且仅一个可能的实体建立关系。例如在句子中:

*   这只老鼠喜欢奶酪

我们在知识库中找到了三个字素，并提取了以下实体:

*   鼠标:['计算机鼠标'，'鼠标'，'鼠标(编程语言)'，'鼠标(矩阵)'，[…] ]
*   Fond: ['Stock (food)']
*   奶酪:['奶酪(娱乐性药物)'，'奶酪'，'奶酪(软件)'，'奶酪(speedrunner)'，[…] ]

在这种情况下，我们可以确定笛卡尔积的可能组合，从而获得:

*   ['电脑鼠标'，'股票(食品)'，'奶酪(软件)']
*   ['鼠标(编程语言)'，'股票(食物)'，'奶酪(娱乐药物)']
*   ['老鼠'，'股票(食物)'，'奶酪']
*   […]

这些组合中只有一个代表了这句话背后的真实概念。为了理解哪个是正确的，我们必须识别句子的语义上下文。

![](img/4ec4aa2472354c51f979380779b01cf1.png)

为了达到这个目的，我们需要研究所有可能的候选实体之间的关系。这可以通过图形数据库有效地完成，比如 Neo4j。我选择 Neo4j 是因为它在[其原生架构](https://neo4j.com/blog/native-vs-non-native-graph-technology/)中采用了图形存储和处理。这项研究将基于对维基百科图— *shortestPath —* 的算法应用，而原生图架构确保了更好的性能。

每个维基百科页面和每个重定向表示图中的一个节点，并且只有一个关系， *has_link* ,用它来表示页面之间的超文本链接。因此 *has_link* 关系是从维基百科页面到另一个页面的输出链接的表示，并且这种关系是图中的直接链接。

页面之间的重定向确实被表示为好像它们是它们的实体。以这种方式，初始模型被略微扭曲，因为在图中，重定向实体和重定向实体被表示为两个不同的页面，而在维基百科中，它们属于同一实体。然而，图中一个实体到其重定向的跳跃是最小的，因此距离有所增加，但是计算复杂度受益于这种选择。为了在我的模型和 wikipedia 的原生结构之间实现完全一致，有必要引入重定向作为节点的属性，但这将使查询阶段的资源变得昂贵。也许在未来的作品版本中，我们会改变所采用的表现模式。

分析所基于的假设是，在知识图中，同一语义场中相关实体的距离**比不相关实体的距离**短。**从最初的实体开始，我们需要在图中走一段更长的路才能到达一个不相关的实体**。例如，这些实体:

*   狗(如*犬*
*   动物

在图形中的距离比不相关的实体更近，例如:

*   狗(如*家犬*
*   核聚变

如果这个概念乍一看似乎很明显，那么它实际上取决于两个因素:

*   维基百科中实体定义的完整性，*当然是*
*   页面上的链接准时出现，所以页面上的大多数概念都有一个链接，可以带你回到那个特定的概念

只有具备了这两个先决条件，图的语义才会丰富到足以证明最初的假设。

还有一点可能会妨碍目的的实现，那就是不可能识别出与短语的基本形式不对应的语素*。例如，动词形式的第三人称单数后缀“*s”*使得它与维基百科中的形式不同。这可以很容易地用 lemmatizer 解决，它允许将单词的变形形式组合在一起，但目前它还没有实现。*

为了验证一组节点中的最短路径，neo4j 实现了我们在 *graph-algo* 库中寻找的算法:[*shortest paths*](https://neo4j.com/developer/kb/all-shortest-paths-between-set-of-nodes/)。这样，**给定一组初始节点/实体，你可以很容易地确定它们之间的距离程度**。在这项研究中，我们将考虑三级距离以内的关系。给定一组实体，例如:

['钢笔'，'铅笔'，'纸']

通过特定的密码查询，我们可以**绘制对应于这组实体的子图，并识别它们之间有多少个以及哪些是第三级距离的连接**。对于集合，我们有四个一级关系，因此它们之间有四个直接链接。因此，我们可以推断这些实体共享相同的语义场。这是他们的子图的图示:

![](img/bb00c87ec702529c27261170eba65898.png)

钢笔、铅笔和纸之间有输出链接的子图

目前，为了比较代表字素的候选实体的所有可能组合，我们不使用任何特定的算法。我们简单地计算它们之间的第一、第二和第三级关系的数量，这已经表示了图中的距离。将来还计划基于页面的 page_rank 来实现关系的加权。一个页面的 page_rank 越大，它在维基百科图表中的中心地位就越高，它与其他页面建立的关系就越不重要。这项功能仍在研究中。

# 3.演示

现在是时候通过归纳来验证语义上下文的初始假设了，或者更确切地说，共享相同语义场的实体在图中具有更短的距离。为了做到这一点，我们将使用 *python* 字形，并制定 3 个不同的小句子，在这些句子中，它出现在尽可能多的不同实体中:

*   阿波罗在特尔斐杀死了巨蟒
*   我为这个应用程序编写了 python 微服务代码
*   一条蟒蛇正在吃一只老鼠

对于所有这些句子，如上所述，我们将验证可能的候选实体。在第一句话中，我们可以在维基百科中找到三个字素:Apollo、Python 和 Delphi。我们可以提取这些实体:

apollo': ['apollo (storeship)'，' Apollo (System Copernicus)'，' Apollo '，' Apollo (1962 automobile)'，' Apollo Crews '，'圣星矢对抗者名单'，' Apollo (1812 EIC 船)'，' Adobe AIR '，'奥林匹亚人(漫威漫画公司)'，' Apollo(宇宙飞船)'，' Apollo(时代丽人之歌)'，' Apollo(星云相册)'，' Apollo(陨石坑)'，'星际迷航人物名单(A–F)'，'吉姆·汉森的 Pajanimals '，'

' python': ['python(神话)'，' Monty Python '，' Launched Loop (Arrow Dynamics)'，' Python(福特原型车)'，' Python(电影)'，' Python molurus '，' Python (Efteling)'，' Python(编程语言)'，' Python '，' Python (Monty) Pictures '，' Miguel discography '，' Python(导弹)'，' Python(画家)'，' Python '，' Python(属)'，' Python(俄亥俄州辛辛那提科尼岛)']

' delphi': ['delphi '，' DELPHI，Indiana '，' DELPHI experiment '，' Object Pascal '，' Pantheon (Marvel Comics)'，' Morlocks (comics)'，' Delphi (comics)'，' Delphi (modern town)'，' Delphi (online service)'，' Delphi (software)'，' Delphi，County Mayo '，' Delphi '，' Delphi '，' Aptiv']

通过提取，我们将组成候选人，并检查他们之间的关系。下面是一个例子:

['Python(电影)'，' Apollo(宇宙飞船)'，' Delphi，County Mayo']

╒══════════════╤══════════╕

│"长度(路径)" │"计数(*)"│

╞══════════════╪══════════╡

│3 │570 │

└──────────────┴──────────┘

['Python(编程语言)'，' Apollo(有线系统)'，' Delphi(软件)']

╒══════════════╤══════════╕

│"长度(路径)" │"计数(*)"│

╞══════════════╪══════════╡

│3 │451 │

├──────────────┼──────────┤

│2 │64 │

└──────────────┴──────────┘

['Python(神话)'，'阿波罗'，'德尔菲']

╒══════════════╤══════════╕

│"长度(路径)" │"计数(*)"│

╞══════════════╪══════════╡

│1 │6 │

└──────────────┴──────────┘

![](img/80057083c589f2b64fc678b43d3439a6.png)

Python(神话)、阿波罗、德尔菲之间的关系

如你所见，不相关的实体仍然有第三级联系。正如你可能已经知道的，从六度分离理论和小世界的实验中，在一个连接的网络中，仅仅几跳的距离就足以连接网络的所有节点。还可以注意到，在这种情况下，在三个正确的实体中，它们中的每一个都与另外两个实体有直接的连接，输入和输出。这是有向图中只有一个节点关系的三个实体之间的最大可能绝对连接，因此允许我们毫无疑问地断言这三个概念是相关的并且共享相同的语义场。

对于第二句，更容易识别语义上下文，因为*微服务*字形只有一个可能的候选，并且有必要构建更少的候选组合来确定结果。这里有几个例子:

['微服务'，' Python(画师)'，' App(胶片)']

╒══════════════╤══════════╕

│"长度(路径)" │"计数(*)"│

╞══════════════╪══════════╡

│3 │88 │

└──────────────┴──────────┘

![](img/d54ec9f5ddb324f5377306992289ee18.png)

Python(画师)、微服务、App(电影)之间的关系

['微服务'，' Python(属)'，'淀粉样前体蛋白']

╒══════════════╤══════════╕

│"长度(路径)" │"计数(*)"│

╞══════════════╪══════════╡

│2 │6 │

└──────────────┴──────────┘

![](img/3504710c0ff47c412a0b89776a89843c.png)

微服务、Python(属)、淀粉样前体蛋白之间的关系

['微服务'，' Python(编程语言)'，'应用软件']

╒══════════════╤══════════╕

│"长度(路径)" │"计数(*)"│

╞══════════════╪══════════╡

│2 │198 │

└──────────────┴──────────┘

![](img/0a83f3bd310d7915f761dd337fc3b344.png)

Python(编程语言)、微服务、应用软件之间的关系

如你所见，在这种情况下，实体之间没有直接的联系，必须依靠二级联系的数量来确定正确的组合。同样，毫无疑问，正确的组合具有极高数量的二级连接。这意味着潜在的不相关的实体，它们不代表同一个概念的部分，而是在给定的区域中相关的和相关的概念。

至于第三个句子，可以做出与前一个句子相似的发言，因为吃字素只有三个可能的候选词。让我们来看看这个句子的一些组合:

['竞争进食'，'老鼠(集合论)'，'巨蟒(电影)']

╒══════════════╤══════════╕

│"长度(路径)" │"计数(*)"│

╞══════════════╪══════════╡

│2 │3 │

├──────────────┼──────────┤

│3 │46 │

└──────────────┴──────────┘

![](img/8386599e0ff82fa1c297b964e82dda76.png)

巨蟒(电影)、竞争进食、老鼠(集合论)之间的关系

['吃饭(电影)'，'电脑鼠标'，'巨蟒']

╒══════════════╤══════════╕

│"长度(路径)" │"计数(*)"│

╞══════════════╪══════════╡

│2 │12 │

├──────────────┼──────────┤

│3 │80 │

└──────────────┴──────────┘

![](img/1d45c7e4eb11c12a6d4c01ec8004bb8f.png)

吃(电影)、电脑鼠标、巨蟒之间的关系

['吃'，'老鼠'，'蟒蛇(属)']

╒══════════════╤══════════╕

│"长度(路径)" │"计数(*)"│

╞══════════════╪══════════╡

│2 │30 │

└──────────────┴──────────┘

![](img/bff1334716c206cc8ba3799ff418b3b2.png)

蟒(属)、鼠、食之间的关系

同样，在这种情况下，正确的组合是具有最大数量的二级连接的组合。因此，我们可以说，我们已经归纳证明了开始的假设是正确的，并且图表方法可以是词义消歧的有效策略。如果你愿意，你可以用 github 上发布的代码来测试我的算法。请联系我，如果你改善我的算法，也许插入一些语言算法，目前我的解决方案缺乏。

[https://github.com/Lupanoide/graph_disambiguator](https://github.com/Lupanoide/graph_disambiguator)