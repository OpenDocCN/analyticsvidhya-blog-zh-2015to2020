<html>
<head>
<title>Illustration with Python: Central Limit Theorem</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python插图:中心极限定理</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/illustration-with-python-central-limit-theorem-aa4d81f7b570?source=collection_archive---------3-----------------------#2019-10-23">https://medium.com/analytics-vidhya/illustration-with-python-central-limit-theorem-aa4d81f7b570?source=collection_archive---------3-----------------------#2019-10-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f25c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个博客使用了<a class="ae jd" rel="noopener" href="/@c.chaipitakporn/illustration-with-python-chebyshevs-inequality-b34be151c547">切比雪夫不等式</a>和<a class="ae jd" rel="noopener" href="/@c.chaipitakporn/illustration-with-python-weak-law-of-large-numbers-2a644b862985">弱大数定律</a>的知识，你可以通过访问链接来回顾这些主题。</p><p id="bba5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该定理指出，独立样本均值的分布是近似正态分布，即使总体不是正态分布。换句话说，如果我们多次独立地从总体中取样，并绘制每次取样的平均值，则无论总体分布如何，该图都将是正态分布。</p><p id="4453" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将使用python通过以下步骤来演示这个定理</p><p id="df75" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤:</p><p id="c93e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.)创建1，000，000个值总体，我使用形状= 2、比例= 2的伽马分布来展示适用于非正态分布的定理</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="97c4" class="jn jo hi jj b fi jp jq l jr js"># build gamma distribution as population<br/>shape, scale = 2., 2.  # mean=4, std=2*sqrt(2)<br/>s = np.random.gamma(shape, scale, 1000000)</span></pre><p id="df28" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.2)从500个样本大小的伽马分布中取样，计算平均值并重复步骤1000次(这是取样的数量)。我重复这个步骤，但是增加采样次数，直到次数达到50，000次。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="fb63" class="jn jo hi jj b fi jp jq l jr js">## sample from population with different number of sampling<br/># a list of sample mean<br/>meansample = []<br/># number of sample<br/>numofsample = [1000,2500,5000,10000,25000,50000]<br/># sample size<br/>samplesize = 500<br/># for each number of sampling (1000 to 50000)<br/>for i in numofsample:<br/>    # collect mean of each sample<br/>    eachmeansample = []<br/>    # for each sampling<br/>    for j in range(0,i):<br/>        # sampling 500 sample from population<br/>        rc = random.choices(s, k=samplesize)<br/>        # collect mean of each sample<br/>        eachmeansample.append(sum(rc)/len(rc))<br/>    # add mean of each sampling to the list<br/>    meansample.append(eachmeansample)</span></pre><p id="fe45" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.)绘制每个样本平均值。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="96d9" class="jn jo hi jj b fi jp jq l jr js"># plot<br/>cols = 2<br/>rows = 3<br/>fig, ax = plt.subplots(rows, cols, figsize=(20,15))<br/>n = 0<br/>for i in range(0, rows):<br/>    for j in range(0, cols):<br/>        ax[i, j].hist(meansample[n], 200, density=True)<br/>        ax[i, j].set_title(label="number of sampling :" + str(numofsample[n]))<br/>        n += 1</span></pre><figure class="je jf jg jh fd jt"><div class="bz dy l di"><div class="ju jv l"/></div></figure><figure class="je jf jg jh fd jt er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es jw"><img src="../Images/87d8795b219d8d41fd6a79a607d69ff2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lufi6iZm4X_RBO4hqz0DrQ.jpeg"/></div></div></figure><p id="cffc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从图中我们可以看到，随着采样次数的增加，分布变得更加平滑。这个定理非常强大，因为我们可以应用于任何人群，所以如果我们有工具来处理正态分布，我们可以使用任何分布的样本均值的工具，例如使用正态曲线下的面积来计算概率。</p><h2 id="0c49" class="jn jo hi bd kd ke kf kg kh ki kj kk kl iq km kn ko iu kp kq kr iy ks kt ku kv bi translated">标准化样本均值</h2><p id="f3b4" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq ky is it iu kz iw ix iy la ja jb jc hb bi translated">我们可以将样本均值分布变为标准正态分布，方法是用期望值减去每个样本均值，然后除以标准偏差。</p><p id="802d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤:</p><p id="6fab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.)使用上一次采样的分布</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="85ab" class="jn jo hi jj b fi jp jq l jr js"># use last sampling<br/>sm = meansample[len(meansample)-1]</span></pre><p id="0eda" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.)计算样本均值的均值和标准差。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="f340" class="jn jo hi jj b fi jp jq l jr js"># calculate start deviation<br/>std = np.std(sm)<br/># set population mean<br/>mean = np.mean(sm)</span></pre><p id="b500" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.)用均值减去每个值，再除以标准差，那么样本均值的均值和标准差分别为0，1。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="ba68" class="jn jo hi jj b fi jp jq l jr js"># list of standarded sample<br/>zn = []<br/># for each sample subtract with mean and devided by standard deviation<br/>for i in sm:<br/>    zn.append((i-mean)/std)</span></pre><p id="ce67" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.)标绘结果。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="c8c9" class="jn jo hi jj b fi jp jq l jr js"># plot hist<br/>plt.figure(figsize=(20,10))<br/>plt.hist(zn, 200, density=True)<br/># compare with standard normal disrtibution line<br/>mu = 0<br/>sigma = 1<br/>x = np.linspace(mu - 3*sigma, mu + 3*sigma, 100)<br/># draw standard normal disrtibution line<br/>plt.plot(x, stats.norm.pdf(x, mu, sigma),linewidth = 5, color='red')<br/>plt.show()</span></pre><figure class="je jf jg jh fd jt"><div class="bz dy l di"><div class="ju jv l"/></div></figure><figure class="je jf jg jh fd jt er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es lb"><img src="../Images/72991e4eecd915a99c49f6990d730df8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d18FG1JcVfnN6_906-DqBA.jpeg"/></div></div><figcaption class="lc ld et er es le lf bd b be z dx translated">红线是标准正态分布线，蓝色分布的平均值是0，有一个单位标准差</figcaption></figure><p id="4a60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们标准化样本均值的原因之一是正态分布函数的复杂性。我们必须对复杂的函数进行积分，这可能需要几个小时的时间，因此，我们将分布标准化，并使用Z表来查找函数下的面积。</p><h2 id="4a69" class="jn jo hi bd kd ke kf kg kh ki kj kk kl iq km kn ko iu kp kq kr iy ks kt ku kv bi translated">样本量</h2><p id="79a1" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq ky is it iu kz iw ix iy la ja jb jc hb bi translated">样本量的经验法则是，样本量应大于30，以使样本均值呈正态分布。然而，如果样本量小于30，但总体呈正态分布，该定理仍然有效。我会举例说明如果样本量小于30，30和大于30会发生什么。</p><p id="2fcc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤:</p><p id="0e9a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.1)从相同的伽马分布中以1个样本量取样，计算平均值，并重复步骤25，000次。我重复这个步骤，但是增加样本量，直到达到1000个样本。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="4603" class="jn jo hi jj b fi jp jq l jr js">## sample with different sample size<br/># list of sample mean<br/>meansample = []<br/># number of sampling<br/>numofsample = 25000<br/># sample size<br/>samplesize = [1,5,10,30,100,1000]<br/># for each sample size (1 to 1000)<br/>for i in samplesize:<br/>    # collect mean of each sample<br/>    eachmeansample = []<br/>    # for each sampling<br/>    for j in range(0,numofsample):<br/>        # sampling i sample from population<br/>        rc = random.choices(s, k=i)<br/>        # collect mean of each sample<br/>        eachmeansample.append(sum(rc)/len(rc))<br/>    # add mean of each sampling to the list<br/>    meansample.append(eachmeansample)</span></pre><p id="17af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.)绘制每个样本平均值。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="5e46" class="jn jo hi jj b fi jp jq l jr js"># plot<br/>cols = 2<br/>rows = 3<br/>fig, ax = plt.subplots(rows, cols, figsize=(20,15))<br/>n = 0<br/>for i in range(0, rows):<br/>    for j in range(0, cols):<br/>        ax[i, j].hist(meansample[n], 200, density=True)<br/>        ax[i, j].set_title(label="sample size :" + str(samplesize[n]))<br/>        n += 1</span></pre><figure class="je jf jg jh fd jt"><div class="bz dy l di"><div class="ju jv l"/></div></figure><figure class="je jf jg jh fd jt er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es jw"><img src="../Images/549975a8b0668dd68906a9d6d0217faa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RbU3mhvPuzxeefU9SEy4hg.jpeg"/></div></div></figure><p id="f23b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从图中可以看出，小于30的样本量分布不是正态分布。</p><p id="d9ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我会把这个定理和切比雪夫不等式，弱大数定律结合起来，但是在我们去之前，我们先来看看样本均值的期望值和标准差。</p><h2 id="3a53" class="jn jo hi bd kd ke kf kg kh ki kj kk kl iq km kn ko iu kp kq kr iy ks kt ku kv bi translated">样本均值的期望值和标准差</h2><p id="c8f1" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq ky is it iu kz iw ix iy la ja jb jc hb bi translated">假设X是一个独立同分布的随机变量，其期望值为μ，标准差为σ。如果我们抽样X n个样本，X的期望和方差将如下。</p><div class="je jf jg jh fd ab cb"><figure class="lg jt lh li lj lk ll paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><img src="../Images/42fdcd9b1fd0b2551e51ff17ca55cd24.png" data-original-src="https://miro.medium.com/v2/resize:fit:874/format:webp/1*ott3FA9HNRWCATfH-81GbA.jpeg"/></div></figure><figure class="lg jt lm li lj lk ll paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><img src="../Images/d3f5a8ae8c86cd338fdc2bc6067a8c2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*otR7TN90Sv2zCEQGuQjj-Q.jpeg"/></div></figure></div><p id="e037" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其中n是样本大小，n = 10表示我们使用10个数据，样本平均值是10个数据的平均值，期望值和方差可以如上计算。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="2c0c" class="jn jo hi jj b fi jp jq l jr js">## expect value of sample<br/># use last sampling<br/>sample = meansample[5]<br/># expected value of sample equal to expect value of population<br/>print("expected value of sample:", np.mean(sample))<br/>print("expected value of population:", shape*scale)<br/># standard deviation of sample equl to standard deviation of population divided by squre root of n<br/>print("standard deviation of sample:", np.std(sample))<br/>print("standard deviation of population:", scale*np.sqrt(shape))<br/>print("standard deviation of population divided by squre root of sample size:", scale*np.sqrt(shape)/np.sqrt(1000))</span></pre><figure class="je jf jg jh fd jt"><div class="bz dy l di"><div class="ju jv l"/></div></figure><figure class="je jf jg jh fd jt er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es jw"><img src="../Images/b293d36c4d5c065be8e4857e9caf16d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*INvTJHRa8tiMk0kNonHM9Q.jpeg"/></div></div><figcaption class="lc ld et er es le lf bd b be z dx translated">这是上面代码的结果。如果我们将总体标准差除以n的平方根，结果将接近样本均值的标准差。</figcaption></figure><p id="e018" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，这感觉有点违反直觉，因为一个样本怎么会有期望和方差，它只是一个数字。好吧，想想看，假设我让你在一所学校抽样调查学生的身高，你必须敲开每间教室，在房间里挑选一个学生。在你走进房间之前，你对你将要挑选的学生的身高有什么期望？你不知道，对吗？那么，如果我告诉你这所学校学生的平均身高是5英尺，方差是4英寸呢？现在，在你选择一个学生之前，你对他身高的期望应该是5英尺，偏差4英寸。如果你选择10个学生，这些学生的身高期望值将是每个学生的期望值之和，与值5英尺相同，除以学生人数。因此，试着把一个样本看作一个随机变量，而不是一个数字。</p><p id="f9ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我想提的另一件事是，根据公式，当样本容量增加时，样本均值的方差会变小，所以样本均值的方差取决于样本容量。如果我们的样本足够大，样本均值将接近它的期望值。</p><h2 id="17a7" class="jn jo hi bd kd ke kf kg kh ki kj kk kl iq km kn ko iu kp kq kr iy ks kt ku kv bi translated">样本均值的收敛</h2><p id="36a4" class="pw-post-body-paragraph if ig hi ih b ii kw ik il im kx io ip iq ky is it iu kz iw ix iy la ja jb jc hb bi translated">切比雪夫不等式适用于各种概率分布，也适用于正态分布。我们可以如下改变处理样本均值的不等式。</p><figure class="je jf jg jh fd jt er es paragraph-image"><div class="er es ln"><img src="../Images/c6f426f0621d80b0920afbad4ba58037.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/1*hQWDcuhgeQn0QlRGPgF0Hg.jpeg"/></div></figure><p id="0d9e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其中X条是样本平均值，μ是样本平均值的期望值，ε是大于0的误差范围，σ是总体的标准偏差，n是样本大小。</p><p id="56da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用弱大数定律和此公式，如果样本大小趋于无穷大，则样本均值和期望值之间的差大于误差容限的概率收敛为零。</p><p id="469e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将使用python来展示这样一个事实:随着样本大小的增加，样本均值变得越来越接近期望值，如下步骤所示。</p><p id="7785" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤:</p><p id="413d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.)使用与总体相同的伽马分布</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="8c45" class="jn jo hi jj b fi jp jq l jr js"># build gamma distribution as population<br/>shape, scale = 2., 2.  # mean=4, std=2*sqrt(2)<br/>s = np.random.gamma(shape, scale, 1000000)</span></pre><p id="71d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.)使用样本大小从10到20，000乘20从总体中取样，然后计算样本平均值和总体平均值之间的差值。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="c5a8" class="jn jo hi jj b fi jp jq l jr js">## show that as the sample size increases the mean of sample is close to population mean<br/># set expected values of population<br/>mu = shape*scale # mean<br/># sample size<br/>samplesize = []<br/># collect difference between sample mean and mu<br/>diflist = []<br/># for each sample size<br/>for n in range(10,20000,20): <br/>    # sample n sample<br/>    rs = random.choices(s, k=n)<br/>    # start count<br/>    c = 0<br/>    # calculate mean<br/>    mean = sum(rs)/len(rs)<br/>    # collect difference between sample mean and mu<br/>    diflist.append(mean-mu)<br/>    samplesize.append(n)</span></pre><p id="c784" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.)画出不同之处。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="dc0f" class="jn jo hi jj b fi jp jq l jr js"># set figure size.<br/>plt.figure(figsize=(20,10))<br/># plot each diference.<br/>plt.scatter(samplesize,diflist, marker='o')<br/># show plot.<br/>plt.show()</span></pre><figure class="je jf jg jh fd jt"><div class="bz dy l di"><div class="ju jv l"/></div></figure><figure class="je jf jg jh fd jt er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es lo"><img src="../Images/bcb1221542bae8ff6e62bb806bfd53da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5Tef6sgTs_6jVQZ_fNj5OA.jpeg"/></div></div></figure><p id="05d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以看到，随着样本量的增加，差异在减小。</p><p id="be7f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还可以使用该公式找到一个样本大小，使样本平均值的误差保持在一定范围内。例如，如果我们希望我们的样本有95%的概率是1%的误差，我们可以设置一个不等式如下。</p><figure class="je jf jg jh fd jt er es paragraph-image"><div class="er es lp"><img src="../Images/459f6e43b3133e43ea677f973a531377.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*QqtaSV0ii9npUSXSPoSAeQ.jpeg"/></div></figure><p id="235a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将绘制另一个图表，以显示样本均值和期望值之间的差异越大，误差越小的概率随着样本量的增加而减小。</p><p id="8ec3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤:</p><p id="d486" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.)使用相同的伽玛分布作为总体，并将误差设置为0.05。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="a41b" class="jn jo hi jj b fi jp jq l jr js"># build gamma distribution as population<br/>shape, scale = 2., 2.  # mean=4, std=2*sqrt(2)  <br/>mu = shape*scale # mean<br/>s = np.random.gamma(shape, scale, 1000000)<br/># margin of error<br/>epsilon = 0.05</span></pre><p id="02ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.)使用样本大小从100到10，100乘以500从总体中取样100次，然后对平均值与期望值之差大于误差的样本进行计数。</p><p id="8988" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.)计算每个样本大小的概率，并添加概率图</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="517d" class="jn jo hi jj b fi jp jq l jr js"># list of probability of each sample size<br/>proberror = []<br/># sample size for plotting<br/>samplesize = []</span><span id="9e15" class="jn jo hi jj b fi lq jq l jr js"># for each sample size<br/>for n in range(100,10101,500): <br/>    # start count<br/>    c = 0<br/>    for i in range(0,100):<br/>        # sample n sample<br/>        rs = random.choices(s, k=n)<br/>        # calculate mean<br/>        mean = sum(rs)/len(rs)<br/>        # check if the difference is larger than error<br/>        if abs(mean - mu) &gt; epsilon:<br/>            # if larger count the sampling<br/>            c += 1<br/>    # calculate the probability<br/>    proberror.append(c/100)<br/>    # save sample size for plotting<br/>    samplesize.append(n)</span></pre><p id="d019" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.)画出概率。</p><pre class="je jf jg jh fd ji jj jk jl aw jm bi"><span id="a70b" class="jn jo hi jj b fi jp jq l jr js"># set figure size.<br/>plt.figure(figsize=(20,10))<br/># plot each probability.<br/>plt.plot(samplesize,proberror, marker='o')<br/># show plot.<br/>plt.show()</span></pre><figure class="je jf jg jh fd jt"><div class="bz dy l di"><div class="ju jv l"/></div></figure><figure class="je jf jg jh fd jt er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es lo"><img src="../Images/afc7ba4cfd41947750c248a05bffbf8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V_JWL3GBipBt4G8mRYgnGQ.jpeg"/></div></div></figure><p id="b92c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你应该从这篇博客中学到的是:</p><ol class=""><li id="79fc" class="lr ls hi ih b ii ij im in iq lt iu lu iy lv jc lw lx ly lz bi translated">不管总体均值如何，样本均值都将是正态分布。</li><li id="0ef9" class="lr ls hi ih b ii ma im mb iq mc iu md iy me jc lw lx ly lz bi translated">随着样本量的增加，样本均值的方差变小。</li><li id="770f" class="lr ls hi ih b ii ma im mb iq mc iu md iy me jc lw lx ly lz bi translated">因此，随着样本量的增加，样本均值远离期望值的概率也在降低。</li></ol><p id="5182" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">代码可以在这个链接找到:<a class="ae jd" href="https://github.com/chaipi-chaya/Illustration-with-Python" rel="noopener ugc nofollow" target="_blank"> Jupyter笔记本</a>，<a class="ae jd" href="https://gist.github.com/chaipi-chaya" rel="noopener ugc nofollow" target="_blank"> Python文件</a></p></div></div>    
</body>
</html>