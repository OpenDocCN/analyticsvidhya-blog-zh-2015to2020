<html>
<head>
<title>Accessing user data via the Strava API using stravalib</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用stravalib通过Strava API访问用户数据</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/accessing-user-data-via-the-strava-api-using-stravalib-d5bee7fdde17?source=collection_archive---------2-----------------------#2020-07-02">https://medium.com/analytics-vidhya/accessing-user-data-via-the-strava-api-using-stravalib-d5bee7fdde17?source=collection_archive---------2-----------------------#2020-07-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/f2b1a86a1747bfdc4608f42726f59e1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*M9qf6tL-5F5oH09K"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">由<a class="ae iu" href="https://unsplash.com/@toomastartes?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的香椿果</a></figcaption></figure><p id="e617" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对从Strava API获取数据感兴趣吗？在这篇博客中，我介绍了使用<code class="du jt ju jv jw b">stravalib</code> python库访问Strava用户数据的过程；然后使用pandas和seaborn库进行一些初步分析。</p><p id="9388" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在github repo:<a class="ae iu" href="https://github.com/mandieq/strava_related" rel="noopener ugc nofollow" target="_blank">https://github.com/mandieq/strava_related</a>中可以找到Jupyter笔记本的代码</p><p id="145e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">多年来，我一直使用Strava记录各种活动:跑步、骑自行车和徒步旅行。要明确的是，没有什么太硬核，但我总是有兴趣看看我做得有多好(或不好)!Strava应用程序免费为您提供一些很好的见解，但我热衷于更详细地探索我的数据，使用Strava API下载它进行分析和可视化。</p><figure class="jy jz ka kb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jx"><img src="../Images/283e3e4e25d9cba7740a38e92047f259.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MgAEYbELdrbuHVRBZTQLAg.png"/></div></div></figure><p id="0eef" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">与直接使用API相反，我利用了<a class="ae iu" href="https://pythonhosted.org/stravalib/" rel="noopener ugc nofollow" target="_blank"> stravalib </a> python库。起初，我在驯服Strava的<a class="ae iu" href="https://developers.strava.com/docs/getting-started/#oauth" rel="noopener ugc nofollow" target="_blank"> OAuth 2.0 </a>认证过程时遇到了一些问题——自从一些关于这个主题的博客(比如Linda Farczadi 的<a class="ae iu" rel="noopener" href="/epfl-extension-school/using-the-strava-api-and-python-d93d480490ef"> this one </a>)发表以来，这个认证过程已经发生了变化。Ryan Baumann分享的代码对工作很有帮助。因此，我写了这篇短文来分享我的解决方案，以帮助其他有兴趣的人。</p><h2 id="63b7" class="ke kf hi bd kg kh ki kj kk kl km kn ko jg kp kq kr jk ks kt ku jo kv kw kx ky bi translated">斯特拉瓦里图书馆</h2><p id="1219" class="pw-post-body-paragraph iv iw hi ix b iy kz ja jb jc la je jf jg lb ji jj jk lc jm jn jo ld jq jr js hb bi translated">首先，简单介绍一下如何设置stravalib库。我通常使用Anaconda来管理我的python环境，但是通过conda获得的stravalib版本非常旧。所以我需要使用pip来代替:<code class="du jt ju jv jw b">pip install stravalib</code>。</p><h2 id="6af4" class="ke kf hi bd kg kh ki kj kk kl km kn ko jg kp kq kr jk ks kt ku jo kv kw kx ky bi translated">Strava开发者帐户和API应用程序注册</h2><p id="2011" class="pw-post-body-paragraph iv iw hi ix b iy kz ja jb jc la je jf jg lb ji jj jk lc jm jn jo ld jq jr js hb bi translated">流程的第一步是按照<a class="ae iu" href="https://developers.strava.com/docs/getting-started/" rel="noopener ugc nofollow" target="_blank"> Strava入门指南</a>在<a class="ae iu" href="https://developers.strava.com/" rel="noopener ugc nofollow" target="_blank">https://developers.strava.com/</a>获得一个开发者账户。</p><figure class="jy jz ka kb fd ij er es paragraph-image"><div class="er es le"><img src="../Images/f642110cf090b86d8f69fa9879d5f951.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*i9jp3eUaaxDDzmUYc3bhBw.png"/></div></figure><p id="023d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来是创建一个API应用程序，您将使用它来执行API查询。您只需要最少的信息来创建它(参见示例)。网站字段是必填的，但可以是任何内容。</p><p id="5d1d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因为我只打算使用这个应用程序通过API访问我的数据，所以我将授权回调域设置为<code class="du jt ju jv jw b">localhost</code>。</p><p id="6813" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦创建完成，你就拥有了一个客户端ID和你闪亮新应用的密码。我将这些复制到一个名为<code class="du jt ju jv jw b">client.secret</code>的文本文件中(都在一行上，用逗号分隔，没有空格)，需要时可以通过我的代码访问。</p><h2 id="d273" class="ke kf hi bd kg kh ki kj kk kl km kn ko jg kp kq kr jk ks kt ku jo kv kw kx ky bi translated">身份验证—一次性步骤</h2><p id="c4cd" class="pw-post-body-paragraph iv iw hi ix b iy kz ja jb jc la je jf jg lb ji jj jk lc jm jn jo ld jq jr js hb bi translated">现在是“有趣”的部分！根据<a class="ae iu" href="https://developers.strava.com/docs/getting-started/#oauth" rel="noopener ugc nofollow" target="_blank"> Oauth文档</a>，Strava用户(又名“运动员”)有一个一次性认证流程，以批准应用程序访问他们的数据。因为我只打算访问我自己的数据，所以我通过一些一次性的手动步骤实现了这一点。</p><p id="1519" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，导入stravalib库，创建一个<code class="du jt ju jv jw b">Client</code>实例，并读入之前保存的客户端ID和密码。</p><pre class="jy jz ka kb fd lf jw lg lh aw li bi"><span id="24a7" class="ke kf hi jw b fi lj lk l ll lm">from stravalib.client import Client<br/>client = Client()</span><span id="3502" class="ke kf hi jw b fi ln lk l ll lm">MY_STRAVA_CLIENT_ID, MY_STRAVA_CLIENT_SECRET = open('client.secret').read().strip().split(',')</span><span id="9979" class="ke kf hi jw b fi ln lk l ll lm">print ('Client ID and secret read from file'.format(MY_STRAVA_CLIENT_ID) )</span></pre><p id="aa47" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来是一次性认证。为运动员创建一个URL，用于批准从应用程序访问他们的数据。这里使用的<code class="du jt ju jv jw b">scope</code>真的很重要*(并且没有很好的文档记录！).如果您想要访问某个运动员的所有细节，那么您需要将此指定为<code class="du jt ju jv jw b">client.authorization_url</code>调用的一部分，否则<code class="du jt ju jv jw b">scope</code>默认为<code class="du jt ju jv jw b">public</code>。这取决于你的运动员的隐私设置，可能根本不会给你带来什么…</p><pre class="jy jz ka kb fd lf jw lg lh aw li bi"><span id="59e6" class="ke kf hi jw b fi lj lk l ll lm">url = client.authorization_url(client_id=MY_STRAVA_CLIENT_ID, redirect_uri='<a class="ae iu" href="http://127.0.0.1:5000/authorization'" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:5000/authorization'</a>, scope=['read_all','profile:read_all','activity:read_all'])</span></pre><p id="d7f9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后把这个网址分享给你的目标运动员(当然也可能是你自己)。然后，系统会提示运动员登录Strava网站，并同意其申请。然后是一个稍微手动的，但只有一次的步骤。如果你像我一样使用<code class="du jt ju jv jw b">localhost</code>,一旦同意，就会返回一个不会去任何地方的URL。但这并不重要，因为它包括一个授权代码和运动员接受的范围的细节。</p><p id="eb35" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它看起来会像下面这样，您需要获取以粗体显示的授权代码(对我来说很好的老式复制和粘贴工作，而不是花费时间自动化这个步骤):</p><pre class="jy jz ka kb fd lf jw lg lh aw li bi"><span id="2c63" class="ke kf hi jw b fi lj lk l ll lm">http://127.0.0.1:5000/authorization?state=&amp;<strong class="jw hj">code=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</strong>&amp;scope=read,activity:read_all,profile:read_all,read_all</span></pre><p id="7ad6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">记住——这是唯一的一步！这也是检查范围是否如您所料的好时机。否则，您的数据分析可能会非常有限…</p><p id="1e4d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">此授权码需要与访问令牌进行交换。从这一点开始，这个持续6小时的访问令牌将成为您访问数据所需要的。因此，我们将其保存在本地，以便根据需要重新读取和刷新:</p><pre class="jy jz ka kb fd lf jw lg lh aw li bi"><span id="3d5b" class="ke kf hi jw b fi lj lk l ll lm">CODE = '<!-- -->xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'</span><span id="64cb" class="ke kf hi jw b fi ln lk l ll lm">access_token = client.exchange_code_for_token(client_id=MY_STRAVA_CLIENT_ID, client_secret=MY_STRAVA_CLIENT_SECRET, code=CODE)</span><span id="f7fb" class="ke kf hi jw b fi ln lk l ll lm">with open('../access_token.pickle', 'wb') as f:<br/>    pickle.dump(access_token, f)</span></pre><h2 id="5d59" class="ke kf hi bd kg kh ki kj kk kl km kn ko jg kp kq kr jk ks kt ku jo kv kw kx ky bi translated">访问数据—令牌加载和刷新</h2><p id="483d" class="pw-post-body-paragraph iv iw hi ix b iy kz ja jb jc la je jf jg lb ji jj jk lc jm jn jo ld jq jr js hb bi translated">所以我们到了好的部分，那就是访问数据。一旦一次性身份验证完成(按照前面的部分)，我们只需加载运动员的访问令牌，如果过期，则进行刷新。</p><p id="833e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，从文件中打开令牌:</p><pre class="jy jz ka kb fd lf jw lg lh aw li bi"><span id="26cd" class="ke kf hi jw b fi lj lk l ll lm">with open('../access_token.pickle', 'rb') as f:<br/>    access_token = pickle.load(f)<br/>    <br/>print('Latest access token read from file:')<br/>access_token</span></pre><p id="6d2b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后检查它何时到期，并在需要时刷新，同时将刷新后的版本保存到文件中以备将来使用。</p><pre class="jy jz ka kb fd lf jw lg lh aw li bi"><span id="25f1" class="ke kf hi jw b fi lj lk l ll lm">if time.time() &gt; access_token['expires_at']:<br/>    print('Token has expired, will refresh')</span><span id="7667" class="ke kf hi jw b fi ln lk l ll lm">    refresh_response = client.refresh_access_token(client_id=MY_STRAVA_CLIENT_ID, client_secret=MY_STRAVA_CLIENT_SECRET, refresh_token=access_token['refresh_token'])<br/>    access_token = refresh_response</span><span id="5e72" class="ke kf hi jw b fi ln lk l ll lm">    with open('../access_token.pickle', 'wb') as f:<br/>        pickle.dump(refresh_response, f)<br/>    print('Refreshed token saved to file')</span><span id="87e6" class="ke kf hi jw b fi ln lk l ll lm">    client.access_token = refresh_response['access_token']<br/>    client.refresh_token = refresh_response['refresh_token']<br/>    client.token_expires_at = refresh_response['expires_at']<br/>        <br/>else:<br/>    print('Token still valid, expires at {}'<br/>          .format(time.strftime("%a, %d %b %Y %H:%M:%S %Z", time.localtime(access_token['expires_at']))))</span><span id="1e8d" class="ke kf hi jw b fi ln lk l ll lm">    client.access_token = access_token['access_token']<br/>    client.refresh_token = access_token['refresh_token']<br/>    client.token_expires_at = access_token['expires_at']</span></pre><p id="b8cf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在事情变得令人兴奋。让我们看看运动员的一些基本信息，比如姓名和位置，以检查一切是否正常(这里还有很多其他信息，使用<code class="du jt ju jv jw b">athlete.to_dict()</code>将其全部转储):</p><pre class="jy jz ka kb fd lf jw lg lh aw li bi"><span id="deee" class="ke kf hi jw b fi lj lk l ll lm">athlete = client.get_athlete()<br/>print("Athlete's name is {} {}, based in {}, {}"<br/>      .format(athlete.firstname, athlete.lastname, athlete.city, athlete.country))</span></pre><h2 id="6e06" class="ke kf hi bd kg kh ki kj kk kl km kn ko jg kp kq kr jk ks kt ku jo kv kw kx ky bi translated">访问数据—活动</h2><p id="7164" class="pw-post-body-paragraph iv iw hi ix b iy kz ja jb jc la je jf jg lb ji jj jk lc jm jn jo ld jq jr js hb bi translated">然后我们可以开始观察我们运动员的活动；我们请求最近的1000项活动，然后列出前10项:</p><pre class="jy jz ka kb fd lf jw lg lh aw li bi"><span id="28e4" class="ke kf hi jw b fi lj lk l ll lm">activities = client.get_activities(limit=1000)<br/>list(activities)[0:10]</span></pre><p id="ff3a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可以用这些活动的细节创建一个熊猫数据框架。首先定义数据集中感兴趣的字段——同样，您可以使用<code class="du jt ju jv jw b">.to_dict()</code>函数查看下载的活动中有哪些可用的字段。</p><pre class="jy jz ka kb fd lf jw lg lh aw li bi"><span id="c152" class="ke kf hi jw b fi lj lk l ll lm">my_cols =['name',<br/>          'start_date_local',<br/>          'type',<br/>          'distance',<br/>          'moving_time',<br/>          'elapsed_time',<br/>          'total_elevation_gain',<br/>          'elev_high',<br/>          'elev_low',<br/>          'average_speed',<br/>          'max_speed',<br/>          'average_heartrate',<br/>          'max_heartrate',<br/>          'start_latitude',<br/>          'start_longitude']</span></pre><p id="91ba" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来遍历活动并创建一个包含细节的数组。我还为每个活动添加了<code class="du jt ju jv jw b">id</code>,因为我在后面的分析中使用它来绘制路线:</p><pre class="jy jz ka kb fd lf jw lg lh aw li bi"><span id="003a" class="ke kf hi jw b fi lj lk l ll lm">data = []<br/>for activity in activities:<br/>    my_dict = activity.to_dict()<br/>    data.append([activity.id]+[my_dict.get(x) for x in my_cols])<br/>    <br/># Add id to the beginning of the columns, used when selecting a specific activity<br/>my_cols.insert(0,'id')</span></pre><p id="7539" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后，编写数据框架，并进行一些数据操作，以创建一些感兴趣的新字段，并为绘图的日期和持续时间获取正确的数据类型:</p><pre class="jy jz ka kb fd lf jw lg lh aw li bi"><span id="0e81" class="ke kf hi jw b fi lj lk l ll lm">df = pd.DataFrame(data, columns=my_cols)</span><span id="5f97" class="ke kf hi jw b fi ln lk l ll lm"># Make all walks into hikes for consistency<br/>df['type'] = df['type'].replace('Walk','Hike')</span><span id="112b" class="ke kf hi jw b fi ln lk l ll lm"># Create a distance in km column<br/>df['distance_km'] = df['distance']/1e3</span><span id="2485" class="ke kf hi jw b fi ln lk l ll lm"># Convert dates to datetime type<br/>df['start_date_local'] = pd.to_datetime(df['start_date_local'])</span><span id="5a96" class="ke kf hi jw b fi ln lk l ll lm"># Create a day of the week and month of the year columns<br/>df['day_of_week'] = df['start_date_local'].dt.day_name()<br/>df['month_of_year'] = df['start_date_local'].dt.month</span><span id="75a7" class="ke kf hi jw b fi ln lk l ll lm"># Convert times to timedeltas<br/>df['moving_time'] = pd.to_timedelta(df['moving_time'])<br/>df['elapsed_time'] = pd.to_timedelta(df['elapsed_time'])</span><span id="247d" class="ke kf hi jw b fi ln lk l ll lm"># Convert timings to hours for plotting<br/>df['elapsed_time_hr'] = df['elapsed_time'].astype(int)/3600e9<br/>df['moving_time_hr'] = df['moving_time'].astype(int)/3600e9</span></pre><p id="1775" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在你知道了！提取感兴趣的见解的绝佳起点:</p><figure class="jy jz ka kb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/26b2047b6438769f7d2b9e8e5668e1f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NABnC-wFi_unKdrw3l56_A.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">生成的数据帧的示例(在此视图中许多列不可见)</figcaption></figure><p id="98be" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">例如，在一周的特定日子里，我的活动距离更远吗？显然在某种程度上骑自行车，徒步旅行和跑步不多。</p><pre class="jy jz ka kb fd lf jw lg lh aw li bi"><span id="ebf8" class="ke kf hi jw b fi lj lk l ll lm">day_of_week_order = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday' ]</span><span id="f84f" class="ke kf hi jw b fi ln lk l ll lm">g = sns.catplot(x='day_of_week', y='distance_km', kind='strip', data=df, order=day_of_week_order, col='type', height=4, aspect=0.9, palette='pastel')</span><span id="9cc7" class="ke kf hi jw b fi ln lk l ll lm">(g.set_axis_labels("Week day", "Distance (km)")<br/>  .set_titles("Activity type: {col_name}")<br/>  .set_xticklabels(rotation=30));</span></pre><figure class="jy jz ka kb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/c81447120e9cfd257fc727b28ded7a98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pXq1bg9xAxRh1_4XLiVpjw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">按类型和星期几划分的活动距离</figcaption></figure><h2 id="0fff" class="ke kf hi bd kg kh ki kj kk kl km kn ko jg kp kq kr jk ks kt ku jo kv kw kx ky bi translated">访问数据-绘制路线</h2><p id="8909" class="pw-post-body-paragraph iv iw hi ix b iy kz ja jb jc la je jf jg lb ji jj jk lc jm jn jo ld jq jr js hb bi translated">最后，每个活动都有各种各样的可用数据(显然取决于您在进行实际活动时选择的小工具记录的内容):</p><pre class="jy jz ka kb fd lf jw lg lh aw li bi"><span id="e03b" class="ke kf hi jw b fi lj lk l ll lm">'time', 'distance', 'latlng', 'altitude', 'velocity_smooth', 'moving', 'grade_smooth'</span></pre><p id="595a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以使用<code class="du jt ju jv jw b">folium</code>绘制路线就像下面这样简单。首先为感兴趣的活动请求数据流——使用<code class="du jt ju jv jw b">get_activity_streams()</code>函数。在本例中，我们选择最新的活动。请注意，这需要之前添加到数据帧中的活动的<code class="du jt ju jv jw b">id</code>。</p><pre class="jy jz ka kb fd lf jw lg lh aw li bi"><span id="52ca" class="ke kf hi jw b fi lj lk l ll lm">activity_number=0</span><span id="5479" class="ke kf hi jw b fi ln lk l ll lm">types = ['time', 'distance', 'latlng', 'altitude', 'velocity_smooth', 'moving', 'grade_smooth']</span><span id="d62a" class="ke kf hi jw b fi ln lk l ll lm">activity_data=client.get_activity_streams(df['id'][activity_number], types=types)</span></pre><p id="453b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后将输出绘制到地图上。轻松点。</p><pre class="jy jz ka kb fd lf jw lg lh aw li bi"><span id="5457" class="ke kf hi jw b fi lj lk l ll lm">map = folium.Map(location=[df['start_latitude'][activity_number], <br/>                 df['start_longitude'][activity_number]],<br/>                 zoom_start=14,<br/>                 width='100%'<br/>                )</span><span id="353f" class="ke kf hi jw b fi ln lk l ll lm">folium.PolyLine(activity_data['latlng'].data).add_to(map)<br/>map</span></pre><p id="0233" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">正如前面提到的，这段代码可以在下面的Jupyter笔记本中找到:<a class="ae iu" href="https://github.com/mandieq/strava_related/blob/master/stravalib_sample.ipynb" rel="noopener ugc nofollow" target="_blank"> stravalib_sample.ipynb </a></p><p id="5dba" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">还有更多可用的功能；这个帖子只是为了帮助其他人快速入门，所以看看吧，了解更多！感谢阅读。</p></div></div>    
</body>
</html>