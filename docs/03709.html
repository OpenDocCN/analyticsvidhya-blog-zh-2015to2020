<html>
<head>
<title>Architecture of Kafka</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">卡夫卡的建筑</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/architecture-of-kafka-f124d198bbec?source=collection_archive---------21-----------------------#2020-02-14">https://medium.com/analytics-vidhya/architecture-of-kafka-f124d198bbec?source=collection_archive---------21-----------------------#2020-02-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="bf9d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在以前的一篇文章中试图解释什么是<a class="ae jd" href="https://kafka.apache.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">卡夫卡</strong> </a> <strong class="ih hj"> </strong>以及使用它的一些好处。现在，我将把它分成一些更小的部分，称为组件。之后，我们将看看卡夫卡的建筑。我将在这里削减介绍，让我们继续挖掘。</p><p id="52ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">信息系统</strong></p><p id="3169" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">消息传递系统有两个不同的概念:排队和发布-订阅。他们之间总是有贸易往来。如果您使用排队系统，那么您将能够如此快速地接收传入的数据，因为许多消费者能够从队列中读取数据，但是这种系统仍然有一个缺点。在其使用者处理完一条消息后，该消息将被推入队列以立即删除，其他使用者将无法处理同一条记录。该特性确保了速度，但是不可能将源数据分布在不同的系统上。另一个概念是发布-订阅(pub-sub ),这也是将信息从发送者移动到消费者，但与排队相反，发布-订阅消息传递允许多个消费者阅读一个主题中的每条消息。发布-订阅用户btw，按照消息系统收到数据相同顺序读取数据。然而，发布订阅不容易横向扩展。Kafka作为一个解决方案出现在这个阶段，它结合了这两个概念，为任何消息传递问题提供了最佳实践。</p><h1 id="9cf1" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">首先，“什么是组件？”</h1><p id="dae4" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">组件基本上是软件系统的离散部分，它们也是描述它们做什么的关键词。在我们的概念里；“组件”是指一段代码，用于执行一组工作。不同类型的组件可以组合在一起形成一个集成的系统，换句话说，一个集成的软件可以包含组件来完成不同类型的操作。对于我们感兴趣的软件，卡夫卡；有许多组件用来完成与数据管道相关的不同类型的问题。</p><h1 id="4104" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated"><strong class="ak">卡夫卡的成分</strong></h1><blockquote class="kh ki kj"><p id="9043" class="if ig kk ih b ii ij ik il im in io ip kl ir is it km iv iw ix kn iz ja jb jc hb bi translated"><strong class="ih hj">生产者:</strong>该组件负责将消息转发给相关的Kafka组件。这是以下组件。</p><p id="3ac0" class="if ig kk ih b ii ij ik il im in io ip kl ir is it km iv iw ix kn iz ja jb jc hb bi translated"><strong class="ih hj">主题:</strong>这是生产者保存消息的地方。主题负责在Kafka内部存储数据。</p></blockquote><figure class="kp kq kr ks fd kt er es paragraph-image"><div class="er es ko"><img src="../Images/50557389c4ed3ae580bc6781ccd32175.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*GoRlq7O8qMNui6tvnq30cg.png"/></div><figcaption class="kw kx et er es ky kz bd b be z dx translated">对于每个主题，Kafka集群维护一个类似于上面的<a class="ae jd" href="https://kafka.apache.org/documentation/#intro_topics" rel="noopener ugc nofollow" target="_blank"><strong class="bd jg"/></a><strong class="bd jg"/>方案的分区日志</figcaption></figure><blockquote class="kh ki kj"><p id="f4b1" class="if ig kk ih b ii ij ik il im in io ip kl ir is it km iv iw ix kn iz ja jb jc hb bi translated"><strong class="ih hj">消费者:</strong>当你想从一个或多个主题中读取数据时，消费者从主题中执行读取操作。</p></blockquote><figure class="kp kq kr ks fd kt er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es la"><img src="../Images/f17ab37ec619062b8db26d4e271842f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PiTOdiJNRwffuc5FOpJnHg.png"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx translated">上面这个方案<a class="ae jd" href="https://kafka.apache.org/documentation/#gettingStarted" rel="noopener ugc nofollow" target="_blank"> <strong class="bd jg">解释了</strong> </a>的读写操作是在一个分区上进行的</figcaption></figure><blockquote class="kh ki kj"><p id="3035" class="if ig kk ih b ii ij ik il im in io ip kl ir is it km iv iw ix kn iz ja jb jc hb bi translated"><strong class="ih hj">消费群:</strong>读取操作有消费群特性。比方说，您需要从许多不同的系统中读取相同的数据，您可以创建消费者组，并在它们下面创建消费者，以便您可以决定将哪个消费者分配到哪个组。还可以通过使用使用者组来扩展密集型读取操作。</p></blockquote><figure class="kp kq kr ks fd kt er es paragraph-image"><div class="er es lf"><img src="../Images/bd7e41def371bc05936f0e08240067f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*J-0xbraSo0fbyrrPCXedlg.png"/></div><figcaption class="kw kx et er es ky kz bd b be z dx translated">连接到<a class="ae jd" href="https://kafka.apache.org/documentation/#gettingStarted" rel="noopener ugc nofollow" target="_blank"> <strong class="bd jg">集群</strong> </a>中相同服务器的消费者群组</figcaption></figure><blockquote class="kh ki kj"><p id="b188" class="if ig kk ih b ii ij ik il im in io ip kl ir is it km iv iw ix kn iz ja jb jc hb bi translated"><strong class="ih hj">集群:</strong>从组件的名字就可以理解(就像前面的一样)这个组件说卡夫卡可能是集群的。也就是说，在不同服务器上运行的Kafka实例可以相互通信，并行执行操作。一个Kafka集群由多个Kafka代理组成。</p><p id="7018" class="if ig kk ih b ii ij ik il im in io ip kl ir is it km iv iw ix kn iz ja jb jc hb bi translated"><strong class="ih hj">代理:</strong>代理存储发送给主题的消息，并为消费者请求提供服务。</p><p id="cd6d" class="if ig kk ih b ii ij ik il im in io ip kl ir is it km iv iw ix kn iz ja jb jc hb bi translated"><strong class="ih hj">分区:</strong>每个主题都由分区组成，我们可以说分区使主题成为了一个数据仓库。</p><p id="4f7c" class="if ig kk ih b ii ij ik il im in io ip kl ir is it km iv iw ix kn iz ja jb jc hb bi translated"><strong class="ih hj">副本:</strong>复制在Kafka中是可能的，以确保容错。根据项目的需要，复制可能是同步的，也可能是异步的。</p><p id="6466" class="if ig kk ih b ii ij ik il im in io ip kl ir is it km iv iw ix kn iz ja jb jc hb bi translated"><strong class="ih hj">领导者:</strong>每个分区都有一个领导者服务器。这些组件执行每个读写操作，并管理复制过程。</p><p id="34b8" class="if ig kk ih b ii ij ik il im in io ip kl ir is it km iv iw ix kn iz ja jb jc hb bi translated">追随者:追随者听他们的领袖说什么。它们存储复制的数据。如果跟随者在同步复制模式下工作，这意味着它可以在主导者失败的情况下成为下一个主导者。</p></blockquote><h1 id="d788" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated"><strong class="ak">依赖关系</strong></h1><p id="0d17" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">要运行Kafka，必须在服务器上安装java环境。java环境基本上控制着任何用java语言开发的软件的java基础结构，它使得在任何支持java的操作系统上运行Java成为可能。</p><p id="8c14" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一个依赖就更棘手了，<a class="ae jd" href="https://zookeeper.apache.org/" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj"/></a>动物园管理员。等一下，什么？动物园管理员？是的，它依赖于服务协调和配置，我们已经谈了一些组件，我们可以理解这些组件必须相互对话以共享它们的状态，例如，消费者必须与代理对话以从主题中获取数据，并且它必须共享关于它在代理中进行的操作的知识。再比如，如果集群中的领导者失败了会怎么样？在进行领导人选举之前，Zookeeper会与其他经纪人交谈，因此Zookeeper会处理这种协调任务。</p></div></div>    
</body>
</html>