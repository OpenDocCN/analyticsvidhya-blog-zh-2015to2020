<html>
<head>
<title>Beginner to Advance — Web Scraping Guide in Python: Deploy a Python Web App using Flask and Postgres on Heroku.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">初级到高级——Python中的Web抓取指南:在Heroku上使用Flask和Postgres部署Python Web应用程序。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/beginner-to-advance-web-scraping-guide-in-python-deploy-a-python-web-app-using-flask-and-a0e3cc8ce9f6?source=collection_archive---------12-----------------------#2020-06-23">https://medium.com/analytics-vidhya/beginner-to-advance-web-scraping-guide-in-python-deploy-a-python-web-app-using-flask-and-a0e3cc8ce9f6?source=collection_archive---------12-----------------------#2020-06-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/469dea29c9e9719fd5fa0561f3053e9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xf_mpLMpdOqNxaE5AelXow.png"/></div></div></figure><div class=""/><p id="008d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在之前的教程中，我们了解了:</p><ul class=""><li id="eab0" class="jo jp ht is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">异步编程</li><li id="40c7" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">使用头池和代理轮流请求。</li><li id="0669" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">网页抓取</li><li id="d693" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">使用Flask和Postgresql的歌词RESTful API。</li></ul><p id="a719" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但在这最后的教程中，我们将使用Heroku部署应用程序并测试我们的API。</p><h1 id="bebd" class="kc kd ht bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">关于Heroku</h1><p id="1ca5" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">Heroku是首批云平台即服务(PaaS)之一，支持多种语言——Ruby、Java、Node.js、Scala、Clojure、Python、PHP和Go。</p><p id="2f28" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们需要做的第一件事是定义我们的应用程序使用哪些库。这样，Heroku就知道为我们提供哪些，就像我们在开发应用程序时如何在本地安装它们一样。</p><h2 id="2ded" class="lg kd ht bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated">设置Heroku</h2><ul class=""><li id="7c28" class="jo jp ht is b it la ix lb jb lu jf lv jj lw jn jt ju jv jw bi translated">前往<a class="ae lf" href="https://signup.heroku.com/" rel="noopener ugc nofollow" target="_blank"> Heroku注册</a>，通过验证您的Gmail帐户创建一个免费帐户。</li><li id="8f63" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><a class="ae lf" href="https://id.heroku.com/login" rel="noopener ugc nofollow" target="_blank">登录</a>您的账户</li></ul><h2 id="7a50" class="lg kd ht bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated">系统设置</h2><ol class=""><li id="2219" class="jo jp ht is b it la ix lb jb lu jf lv jj lw jn lx ju jv jw bi translated">首先你需要为你的操作系统安装<a class="ae lf" href="https://git-scm.com/downloads" rel="noopener ugc nofollow" target="_blank"> Git </a>。Git允许并鼓励您拥有多个完全相互独立的本地分支。</li><li id="01e5" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn lx ju jv jw bi translated">转到<a class="ae lf" href="https://devcenter.heroku.com/articles/heroku-cli" rel="noopener ugc nofollow" target="_blank">本页</a>并为您的操作系统安装Heroku CLI。</li><li id="c4e5" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn lx ju jv jw bi translated">要在Ubuntu上安装Heroku CLI，您可以<a class="ae lf" href="https://tecrobust.com/insall-heroku-platform-on-linux-ubuntu/" rel="noopener ugc nofollow" target="_blank">遵循以下步骤</a>。</li><li id="bd9b" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn lx ju jv jw bi translated">如果安装正确，您将能够在终端中运行命令:</li></ol><pre class="ly lz ma mb fd mc md me mf aw mg bi"><span id="6191" class="lg kd ht md b fi mh mi l mj mk">git --version &amp;&amp; heroku --version</span></pre><h2 id="7d6f" class="lg kd ht bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated">格尼科恩</h2><p id="f892" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">Gunicorn“绿色独角兽”是一个Python Web服务器网关接口HTTP服务器。它是一个fork之前的工人模型，移植自Ruby的Unicorn项目。Gunicorn服务器广泛兼容许多web框架，实现简单，占用服务器资源少，速度相当快。<br/>要使用pip安装Gunicorn，请在终端中运行该命令</p><pre class="ly lz ma mb fd mc md me mf aw mg bi"><span id="1519" class="lg kd ht md b fi mh mi l mj mk">pip install gunicorn</span></pre><h2 id="2b03" class="lg kd ht bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated">登录Heroku</h2><p id="9612" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">要登录Heroku CLI，您首先需要在终端中运行登录命令，这将带您进入浏览器中的登录页面:</p><pre class="ly lz ma mb fd mc md me mf aw mg bi"><span id="fd87" class="lg kd ht md b fi mh mi l mj mk">heroku login</span></pre><h2 id="1601" class="lg kd ht bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated">创建应用程序</h2><p id="3714" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">要在Heroku上创建app和PostgreSql，您需要运行以下命令。</p><pre class="ly lz ma mb fd mc md me mf aw mg bi"><span id="5e6e" class="lg kd ht md b fi mh mi l mj mk">heroku create &lt;appname&gt; <br/>heroku addons:create heroku-postgresql:hobby-dev --app &lt;appname&gt;</span></pre><h2 id="e277" class="lg kd ht bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated">去找URI</h2><p id="2f9c" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">要在heroku上获得URI的Postgresql的详细信息</p><pre class="ly lz ma mb fd mc md me mf aw mg bi"><span id="ee46" class="lg kd ht md b fi mh mi l mj mk">heroku config --app appname<br/># Add details to your app production file</span></pre><h2 id="fb4f" class="lg kd ht bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated">配置文件</h2><p id="9b1f" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">您需要将3个文件添加到您的基本目录，这将有助于Heroku部署您的应用程序:</p><ol class=""><li id="ffbe" class="jo jp ht is b it iu ix iy jb jq jf jr jj js jn lx ju jv jw bi translated">Procfile — Procfile告诉Heroku应该运行什么命令(没有任何扩展名)</li><li id="3d54" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn lx ju jv jw bi translated">requirements.txt —要安装的库及其支持的版本。</li><li id="b6ee" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn lx ju jv jw bi translated">runtime.txt要使用的Python版本。</li></ol><h2 id="0cf6" class="lg kd ht bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated">创建Procfile</h2><pre class="ly lz ma mb fd mc md me mf aw mg bi"><span id="d00e" class="lg kd ht md b fi mh mi l mj mk">touch Procfile<br/># Add this<br/>web: gunicorn app:app</span></pre><h2 id="2a4a" class="lg kd ht bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated">创建需求. txt</h2><pre class="ly lz ma mb fd mc md me mf aw mg bi"><span id="d2ac" class="lg kd ht md b fi mh mi l mj mk">pip freeze &gt; requirements.txt</span></pre><h2 id="7f04" class="lg kd ht bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated">创建runtime.txt</h2><pre class="ly lz ma mb fd mc md me mf aw mg bi"><span id="3f71" class="lg kd ht md b fi mh mi l mj mk">touch runtime.txt<br/># Add this<br/>python-&lt;your python Version&gt;</span></pre><h2 id="385c" class="lg kd ht bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated">使用Git部署</h2><pre class="ly lz ma mb fd mc md me mf aw mg bi"><span id="d784" class="lg kd ht md b fi mh mi l mj mk">git init<br/>git add . &amp;&amp; git commit -m 'Deploy'<br/>heroku git:remote -a &lt;appname&gt;<br/>git push heroku master</span></pre><h1 id="85e0" class="kc kd ht bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">上传数据库</h1><p id="1585" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">恭喜你……！！！！！！你已经成功地用Postgre创建了你的第一个flask应用程序，但是你仍然需要将你在本地Postgre上传的数据上传到Heroku。</p><figure class="ly lz ma mb fd hk er es paragraph-image"><div class="er es ml"><img src="../Images/70872fcfe8e431eebd0458c325c28666.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*KVUWQQ_02E1bqqof8ZFTKA.png"/></div></figure><ul class=""><li id="8024" class="jo jp ht is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">创建数据集的备份</li><li id="fc51" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">用格式“Plain”填充所需的Name.sql</li><li id="57d7" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">在“高级设置”中的“查询”下，将“使用插入命令”设置为True。</li><li id="51d5" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">一旦您成功地将数据库导出为SQL格式，您就可以将这些数据导入Heroku PostgreSQL。</li><li id="3b80" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">一旦执行，它开始向您的应用程序插入行(Heroku限制- 10，000行)</li></ul><pre class="ly lz ma mb fd mc md me mf aw mg bi"><span id="f3da" class="lg kd ht md b fi mh mi l mj mk">heroku pg:psql --app APP_NAME &lt; SQL_FILE_NAME.sql</span></pre><p id="8d10" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要运行网站，您可以检查网站或运行命令:</p><pre class="ly lz ma mb fd mc md me mf aw mg bi"><span id="91d5" class="lg kd ht md b fi mh mi l mj mk">heroku open --app APP_NAME</span></pre><blockquote class="mm mn mo"><p id="5a80" class="iq ir mp is b it iu iv iw ix iy iz ja mq jc jd je mr jg jh ji ms jk jl jm jn hb bi translated"><strong class="is hu">您已经成功抓取歌词，构建App并部署在Heroku上。</strong></p><p id="ed75" class="iq ir mp is b it iu iv iw ix iy iz ja mq jc jd je mr jg jh ji ms jk jl jm jn hb bi translated"><strong class="is hu">干得好…！！！</strong></p></blockquote><h1 id="ff10" class="kc kd ht bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">以前的教程。</h1><h2 id="2dba" class="lg kd ht bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated">教程1 —简介</h2><p id="d2ee" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">在<a class="ae lf" rel="noopener" href="/@kaus.pathak_30409/beginner-to-advance-web-scraping-guide-in-python-799ffd367067">之前的教程</a>中，我们了解了网页抓取的基本概念，并创建了一个简单的函数，使用requests和BeautifulSoup从页面中提取歌词。</p><h2 id="64be" class="lg kd ht bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated">教程2 —使用Python中的头池和代理循环请求。</h2><p id="27c8" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">为了创建一个更大的项目，可以从互联网上删除成千上万的页面，你需要一个更清晰的工作环境，使用面向对象和继承的概念。你还需要有更详细的关于头文件池和代理池的知识来保持对服务器的匿名，我们已经在本教程的第二部分介绍过了。</p><h2 id="82f1" class="lg kd ht bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated">教程3 —工作环境和异步I/O编程</h2><p id="9d1d" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">我们将进行异步I/O编程来提高你的报废速度，这将在本教程的第三部分中介绍。</p><h2 id="d1a5" class="lg kd ht bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated">教程4 —自动化站点抓取</h2><p id="42b3" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">有了之前教程中学习的所有概念，我们将在本教程的第四部分中创建实际的自动抓取器来下载和保存网页上的歌词。</p><h2 id="b0d7" class="lg kd ht bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated">教程5 — API访问</h2><p id="3173" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">为了方便地从互联网上访问歌词，我们将创建Flask API和前端来访问我们在本教程第五部分中废弃的歌词。</p><h2 id="4ddb" class="lg kd ht bd ke lh li lj ki lk ll lm km jb ln lo kq jf lp lq ku jj lr ls ky lt bi translated">教程6 —在Heroku上托管我们的Flask服务器</h2><p id="9a08" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">为了方便歌词的访问，我们将在Heroku上托管我们的Flask服务器。</p><figure class="ly lz ma mb fd hk er es paragraph-image"><div class="er es mt"><img src="../Images/5ac696eb4277d0f26dc8a3e024fcc11e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*coYa-VLeyzSyzAkG"/></div></figure><h1 id="5905" class="kc kd ht bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">最后的话</h1><p id="3dde" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">感谢你阅读这篇文章，我们希望听到你的反馈。请随意评论任何问题。</p><p id="ee82" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您喜欢，请为我们鼓掌:)。关注我们，获取我们的最新文章。</p></div></div>    
</body>
</html>