<html>
<head>
<title>DJANGO TEST DRIVEN DEVELOPMENT WITH BITBUCKET</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用BITBUCKET进行DJANGO测试驱动开发</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/django-test-driven-development-with-bitbucket-85f9f897663c?source=collection_archive---------18-----------------------#2020-04-13">https://medium.com/analytics-vidhya/django-test-driven-development-with-bitbucket-85f9f897663c?source=collection_archive---------18-----------------------#2020-04-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="63e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">由</em>发布<a class="ae je" href="http://brianjoroge.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">布莱恩·恩乔罗格</a>和DLMade。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div class="er es jf"><img src="../Images/99a49085d73c1a6ff6e6ceadff4693ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/0*yjfpC7BtDcaotfr3"/></div></figure><p id="c74e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设你制作了一个烟雾探测器报警器，一旦它探测到烟雾就会触发警报，你不能直接开始出售它，或者把它安装在你的房子里，等着你的房子着火的那一天，看看它是否能工作。你必须测试它的功能。为了简单起见，您需要做两个测试。第一，确保没有烟雾时不会触发警报，从而引发假警报。第二，确保烟雾出现时警报被触发。</p><p id="7574" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就像烟雾探测器一样，不经过测试就不能将软件部署到生产环境中。据我所知，本科计算机科学课程每个学期都催促学生学习新的编程语言，而没有利用足够的时间来教授他们软件测试。大的IT公司已经把测试的需要看作是软件开发的一个主要步骤，并且强调在发布软件之前要对软件进行彻底的测试。</p><p id="91b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我们将强调Django的测试驱动开发(TDD)和Bitbucket的持续开发——持续集成(CD-CI)。因此，在这篇由两部分组成的文章中加入我们的行列吧。</p><p id="e8fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第1部分:带DJANGO的TDD</strong></p><p id="b6e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">随着网站的发展，手动测试变得越来越困难。Andrea Koutifaris有句老话“所有代码都是有罪的，直到被证明是无辜的”。测试 - <strong class="ih hj">驱动开发</strong>是为了通过之前设计的测试而修改代码的过程。就像烟雾探测器警报类比一样，我们编写故意失败的测试用例，我们也会编写应用程序代码来使测试用例通过。</p><p id="96dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">出于演示的目的，我们将使用这个<a class="ae je" href="https://bitbucket.org/BriaNjoroge/django-user-authentication/src/master/" rel="noopener ugc nofollow" target="_blank"> repo </a>简单的Django用户认证项目。否则，您可以自由地在您的应用程序中实现这个项目模板。</p><p id="f4db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第一步:克隆回购</strong></p><p id="1776" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要克隆repo，请在您的终端中粘贴以下命令:</p><p id="62f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jn jo jp jq b">git clone <a class="ae je" href="https://BriaNjoroge@bitbucket.org/BriaNjoroge/django-user-authentication.git" rel="noopener ugc nofollow" target="_blank">https://BriaNjoroge@bitbucket.org/BriaNjoroge/django-user-authentication.git</a></code></p><p id="68bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第二步:编写测试用例</strong></p><p id="23a0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在项目文件夹中，导航到核心文件夹，然后导航到测试文件夹。这是我写测试用例的地方。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div class="er es jr"><img src="../Images/fefa67b88fa47a63d49dc8217ded6fd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/1*C_98S5UL47brK-BOgMQDFw.png"/></div></figure><p id="d62e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Django使用单元测试模块的<a class="ae je" href="https://docs.python.org/3/library/unittest.html#unittest-test-discovery" rel="noopener ugc nofollow" target="_blank">内置测试发现</a>，它将发现当前工作目录下任何以模式<strong class="ih hj"> test*命名的文件中的测试。py </strong>。好的经验法则是，在进行单元测试时，最好测试URL、视图、表单和模型。</p><p id="2fa1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了更好的理解，我对代码做了很好的注释，它更容易解释。</p><p id="dc69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">测试网址:</strong></p><figure class="jg jh ji jj fd jk"><div class="bz dy l di"><div class="js jt l"/></div></figure><p id="2973" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">代码有很好的文档，但是简单地说，文件测试了相关的URL指向它们相关的视图功能。</p><p id="183a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">测试视图</strong></p><figure class="jg jh ji jj fd jk"><div class="bz dy l di"><div class="js jt l"/></div></figure><p id="405c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">测试表格</strong></p><figure class="jg jh ji jj fd jk"><div class="bz dy l di"><div class="js jt l"/></div></figure><p id="1421" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤3:运行测试</strong></p><p id="6fa6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了运行测试，我们使用下面的命令。</p><pre class="jg jh ji jj fd ju jq jv jw aw jx bi"><span id="1990" class="jy jz hi jq b fi ka kb l kc kd">python manage.py test</span></pre><p id="8036" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">目前，回购只有5个测试功能全部通过。运行命令后，接受的结果是as；</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es ke"><img src="../Images/c57ba4c2f89bbb121ae7e761edf28444.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*3fHnvuX2ohI7ieM63Hj46A.png"/></div></div></figure><p id="1cd8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">第2部分:与位桶管道的持续集成</strong></p><p id="8995" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Linus Torvalds是创造git的天才。Git版本控制系统在系统集成中很受欢迎，尤其是当你作为一个团队工作时。很多平台已经提供了GitHub、Bitbucket、Gitlab等git服务。</p><p id="4d05" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">持续集成(CI)是将来自多个参与者的代码变更自动集成到单个软件项目中的实践。CI过程由自动工具组成，这些工具在集成之前断言新代码的正确性。</p><p id="ab6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">持续集成现已被广泛采用。在<strong class="ih hj"> GitHub </strong>中的持续集成可以与<strong class="ih hj"> Travis CI协作完成。Bitbucket </strong>通过使用Bitbucket管道使CI变得容易。</p><p id="af63" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这篇文章讲述了Bitbucket，如果你还没有它的帐户，你可以创建一个。</p><p id="5d25" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在您的项目根目录中，创建一个<strong class="ih hj">bit bucket-pipelines . yml</strong>文件并粘贴下面的代码。</p><figure class="jg jh ji jj fd jk"><div class="bz dy l di"><div class="js jt l"/></div></figure><blockquote class="kj kk kl"><p id="066e" class="if ig jd ih b ii ij ik il im in io ip km ir is it kn iv iw ix ko iz ja jb jc hb bi translated">第1行:定义您希望运行项目的python版本</p><p id="a184" class="if ig jd ih b ii ij ik il im in io ip km ir is it kn iv iw ix ko iz ja jb jc hb bi translated">第3行:定义你的管道</p><p id="c333" class="if ig jd ih b ii ij ik il im in io ip km ir is it kn iv iw ix ko iz ja jb jc hb bi translated">第6行:缓存pip命令，提供更快的构建，并减少构建时间。</p><p id="66ee" class="if ig jd ih b ii ij ik il im in io ip km ir is it kn iv iw ix ko iz ja jb jc hb bi translated">第9行:在需求中安装所有的依赖项</p><p id="b2ba" class="if ig jd ih b ii ij ik il im in io ip km ir is it kn iv iw ix ko iz ja jb jc hb bi translated">第10行:运行测试命令</p></blockquote><p id="cf43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，在bitbucket上创建一个远程存储库并推送代码之后，剩下的最后一步就是让管道启动您的CI/CD管道。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es kp"><img src="../Images/afb2785de5e9a25bdb24b5a2e667d577.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MTQfZwoTtOhKZoCE"/></div></div></figure><p id="c856" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装依赖项和运行命令需要一些时间。下次您推送代码时，管道将会运行，测试也将会执行。</p><p id="1269" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种方法非常有效。假设你在一个大项目中工作，你有大约5个团队成员，自动测试人员不需要等待你们所有人完成项目，这样他就可以编写测试用例。在并发中，他可以像开发人员编写代码一样编写测试用例。当团队使用git VCS推送代码时，测试运行，开发人员可以看到失败的测试用例，并立即处理它们。</p><p id="e86f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个应用程序的代码可以在<a class="ae je" href="https://bitbucket.org/BriaNjoroge/django-user-authentication/src/master/" rel="noopener ugc nofollow" target="_blank">这里</a>找到。到那时，尝试这种TDD方法，以提升你作为高级开发人员的级别。</p><p id="a09b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">如果你喜欢这篇文章，点击给我买杯咖啡！感谢阅读。</strong>😊</p><figure class="jg jh ji jj fd jk er es paragraph-image"><a href="https://www.payumoney.com/paybypayumoney/#/147695053B73CAB82672E715A52F9AA5"><div class="er es kq"><img src="../Images/226d333c001f2bdbc8bc791892ea31ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*-aubdwm03fkW39OOplP4ag.png"/></div></a></figure><p id="ea24" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你的每一个小小的贡献都会鼓励我创造更多这样的内容。</p></div></div>    
</body>
</html>