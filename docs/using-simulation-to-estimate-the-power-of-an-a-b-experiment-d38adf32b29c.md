# 使用模拟来估计 A/B 实验的功效

> 原文：<https://medium.com/analytics-vidhya/using-simulation-to-estimate-the-power-of-an-a-b-experiment-d38adf32b29c?source=collection_archive---------0----------------------->

![](img/8f418fc1985dc07f2513ab61c9effa67.png)

实验的功效衡量实验检测特定替代假设的能力。例如，一家电子商务公司试图通过改变网站的设计来增加用户在网站上的时间。他们计划使用著名的双样本 t 检验。Power 有助于回答以下问题:t 检验是否能够通过拒绝零假设来检测平均时间花费的差异(如果存在)？

**零假设(H *o):*** 新设计对用户在网站上花费的时间没有影响

**替代假设(H *a):*** 新设计影响用户在网站上花费的时间

当运行 A/B 实验来衡量网站重新设计的影响时，我们希望确保该实验至少有 80%的功效。以下参数会影响实验的功效:

1.  **样本量(n):** 样本量越大，标准差变得越小；并且使得采样分布更小。增加样本量，增加实验的功效
2.  **效应 size(𝛿):** 零假设和替代假设的均值抽样分布之间的差异。效果尺寸越小，需要更多样本来检测预定义功率下的效果
3.  **Alpha(𝛼):** 显著性值通常设置为 0.05；这是我们接受或拒绝零假设的分界点。使 alpha 变小需要更多的样本来检测预定义功率下的效果
4.  **β(β):**幂定义为 1-β

为什么在进行实验之前要进行功效分析来确定样本量？

1.  进行实验既昂贵又耗时
2.  增加发现显著效果的机会
3.  增加复制实验中检测到的效果的机会

例如，用户当前在网站上花费的时间呈正态分布，平均值为 2 分钟，标准差为 1 分钟。产品经理想设计一个实验来了解重新设计的网站是否有助于增加在网站上花费的时间。

该实验应该能够检测出花费在网站上的时间的最小 5%的变化。对于像这样的测试，由于抽样分布是已知的，所以精确的解决方案可用于估计样本大小。在这里，我们将使用模拟方法来估计样本，并使用精确方法进行验证。

以下步骤估计双样本 t 检验的功效:

1.  零𝒩(2,1)和替代假设𝒩(2+𝛿,1)下的模型的模拟数据
2.  对样本进行 t 检验，并记录 t 检验是否拒绝零假设
3.  多次运行模拟，并计算 t 检验拒绝零假设的次数。该比例是对实验功效的估计

## 计算特定样本大小、效应大小和显著性水平的实验功效的代码:

在样本量为 1000 的情况下，实验的功效为 58.8%

## 计算特定效应大小和显著性水平达到 80%功效所需样本大小的代码:

基于模拟方法，我们需要 1560 个用户达到 80%的功率，这与使用精确方法估计的样本大小非常匹配

## 使用精确方法计算样本大小的代码:

# 结论

本文解释了当封闭形式的解决方案不存在时，如何使用模拟来估计 A/B 实验的功效。