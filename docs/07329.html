<html>
<head>
<title>OpenCV (findContours) Detailed Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">OpenCV (findContours)详细指南</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/opencv-findcontours-detailed-guide-692ee19eeb18?source=collection_archive---------0-----------------------#2020-06-22">https://medium.com/analytics-vidhya/opencv-findcontours-detailed-guide-692ee19eeb18?source=collection_archive---------0-----------------------#2020-06-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><p id="7bce" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">OpenCV有许多图像处理功能，有助于检测边缘，消除噪声，阈值图像等。经常让许多初学者感到困惑的一个特性是(<strong class="io hj"> findContours </strong>)。在这篇文章中，我将试着介绍findContours中涉及的所有主题，以及它如何对你有所帮助。</p><p id="e654" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">简而言之，findContours检测图像颜色的变化，并将其标记为轮廓。例如，写在纸上的数字图像将被检测为轮廓。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es jk"><img src="../Images/d5f65beb76eab1eed41f2b094a3d62b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*O8eETiiMySuvGfbpFE-XLw.jpeg"/></div><figcaption class="js jt et er es ju jv bd b be z dx translated">1.原始图像— 2。灰度-3。二进制阈值反转— 4。查找轮廓</figcaption></figure><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es jk"><img src="../Images/7fd31d1c766b8b3640ecf42079029821.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*dyyVYb0D7nZoW8mjxQSEoA.jpeg"/></div><figcaption class="js jt et er es ju jv bd b be z dx translated">1.原始图像— 2。灰度-3。二进制阈值— 4。查找轮廓</figcaption></figure><p id="d0af" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">从上面两幅图像中我们可以看到，由于我们计算二值图像的方式不同，findContours对同一幅图像的检测也不同。上面那个是二进制阈值反转<strong class="io hj"> (cv2。THRESH_BINARY_INV) </strong>显示以白色突出显示的数字，下图就是二进制阈值<strong class="io hj"> (cv2。</strong>THRESH _ BINARY】</p><p id="f891" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">你想检测的部分应该是白色的，就像上面第一张图片中的数字一样。</p><pre class="jl jm jn jo fd jw jx jy jz aw ka bi"><span id="7816" class="kb kc hi jx b fi kd ke l kf kg">import cv2</span><span id="cf01" class="kb kc hi jx b fi kh ke l kf kg">def show_image(image):<br/>    cv2.imshow('image',image)<br/>    c = cv2.waitKey()<br/>    if c &gt;= 0 : return -1<br/>    return 0</span><span id="1169" class="kb kc hi jx b fi kh ke l kf kg">image = cv2.imread('./Photos/num.png')<br/>img_gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)<br/>ret, im = cv2.threshold(img_gray, 100, 255, cv2.THRESH_BINARY_INV)<br/>contours, hierarchy  = cv2.findContours(im, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)<br/>img = cv2.drawContours(res_img, contours, -1, (0,255,75), 2)<br/>show_image(res_img)</span></pre><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es ki"><img src="../Images/fde1f90283f1ab5dd538dbca358733f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WZvLG65_hL2nBgCtyVIl4w.png"/></div></div></figure><h1 id="d845" class="kn kc hi bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">参数—模式(<strong class="ak">检索模式)</strong></h1></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><p id="f710" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">findContours函数检索图像中它能找到的所有轮廓。图像中可以有多种呈现轮廓的方式。有些可能嵌套在其他轮廓中，等等。为了便于找到我们感兴趣的轮廓，以及了解轮廓嵌套的层次<a class="ae lk" href="https://docs.opencv.org/master/d3/dc0/group__imgproc__shape.html#ga819779b9857cc2f8601e6526a3a5bc71" rel="noopener ugc nofollow" target="_blank"> <strong class="io hj">检索模式</strong> </a>非常重要。<a class="ae lk" href="https://docs.opencv.org/master/d9/d8b/tutorial_py_contours_hierarchy.html" rel="noopener ugc nofollow" target="_blank">s<em class="ll">source</em>T15】</a></p><p id="533a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">检索模式的输出是数组<strong class="io hj">层次结构</strong>，它显示了各种轮廓如何相互链接，它们与其他轮廓的关系，父子关系</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es lm"><img src="../Images/948b93e8524c2c12dbeda0daad829eba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7P-H6soNYA6b85phElRRRw.png"/></div></div></figure><p id="5ff7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">正如你从图片中看到的，OpenCV从右下方开始标记层次结构。</p><blockquote class="ln lo lp"><p id="5f37" class="im in ll io b ip iq ir is it iu iv iw lq iy iz ja lr jc jd je ls jg jh ji jj hb bi translated"><strong class="io hj"> 0 : Star [1，-1，-1，-1] </strong> <br/> …下一个—外方块(1) <br/> …上一个—无轮廓(-1) <br/> …子—无子(-1) <br/> …父—无父(-1) <br/>以同样的方式标记所有其他轮廓。上述方法是RETR树，其中所有轮廓及其出现层次都得到维护。我们将在下面更详细地讨论它</p></blockquote><p id="a62b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">RETR _树— Python: cv。RETR _树</strong></p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es lt"><img src="../Images/f637cae9b958bfc2e5c778efad3f17fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/format:webp/1*2VtnrtJ-wA3wFT6z-w8LPg.png"/></div></figure><p id="11d0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">检索所有轮廓并重建嵌套轮廓的完整层次结构。<a class="ae lk" href="https://docs.opencv.org/master/d3/dc0/group__imgproc__shape.html#ga819779b9857cc2f8601e6526a3a5bc71" rel="noopener ugc nofollow" target="_blank"> <em class="ll">来源</em> </a> <em class="ll"> <br/> </em>下面已经展示了等高线是如何被创建的及其层次结构</p><p id="03d6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="ll">父子关系也在树中创建</em></p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es lu"><img src="../Images/149214cd3233d305006d81b511377c01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*518AwEsFbESbYQjJQkf0bg.gif"/></div></div></figure><p id="f3fa" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">RETR _外部— Python: cv。RETR _外部</strong></p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es lv"><img src="../Images/398989d1c810695183e24d7dcf87b279.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/1*2EZRevxfdPN206TQvpvXrQ.png"/></div></figure><p id="7254" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">仅检索最外轮廓。如你所见，只创建了三个轮廓，即外部轮廓。</p><p id="c94b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="ll">未给出父子关系。所有外部轮廓都在同一层级</em></p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es lu"><img src="../Images/abfde10aaa880e528178f2f12c0bf140.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*HlpFkGOmDIWPANGIxpyGWA.gif"/></div></div></figure><p id="4f97" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">RETR _列表— Python: cv。RETR _列表</strong></p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es lw"><img src="../Images/b368e5441ca3fea82d03caa139a74b8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:658/format:webp/1*S6dQ7i-GFsUU61_rZGeVuQ.png"/></div></figure><p id="cdf9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">它类似于树，但它不建立任何父子关系。<br/>检索所有轮廓，不建立任何层次关系。</p><p id="91fb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="ll">因为所有子代都没有建立关系，父代都是(-1 ) </em></p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es lu"><img src="../Images/3d31041187f140cb5ac4c20dc54b1cc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*CnW_AoZUd1NCN5hkOfbGdw.gif"/></div></div></figure><p id="e0ab" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> RETR_CCOMP — Python: cv。RETR_CCOMP </strong></p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es lx"><img src="../Images/823126fd5506bcdbec31a0f98cb2d827.png" data-original-src="https://miro.medium.com/v2/resize:fit:708/format:webp/1*Ke7MdNx1tia7R7GrrNQ5Zw.png"/></div></figure><p id="c3c5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">检索所有轮廓并将它们组织成两级层次结构。在顶层，有组件的外部边界。在第二层，有孔的边界。如果在连接元件的孔内有另一个轮廓，它仍会被放在顶层。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es lu"><img src="../Images/82702a34dd9ccfd4fa49a2b2ce41ccc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*lGOgw_uQ9BpFYj6HpbyK-Q.gif"/></div></div></figure><h1 id="d76e" class="kn kc hi bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">参数法(轮廓近似法)</h1><p id="5fbc" class="pw-post-body-paragraph im in hi io b ip ly ir is it lz iv iw ix ma iz ja jb mb jd je jf mc jh ji jj hb bi translated">这是您想要存储轮廓的方法。如果设置为<strong class="io hj"> CHAIN_APPROX_NONE </strong>绝对存储所有轮廓点。如果设置为<strong class="io hj"> CHAIN_APPROX_SIMPLE </strong>压缩水平、垂直和对角线线段，只留下它们的端点。<a class="ae lk" href="https://docs.opencv.org/master/d3/dc0/group__imgproc__shape.html#ga4303f45752694956374734a03c54d5ff" rel="noopener ugc nofollow" target="_blank"> <em class="ll">来源</em> </a></p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es md"><img src="../Images/cfc96b1afaa6b584cc73216c972260ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:322/format:webp/1*HMgAYw9oMD0Jk_WrUzo3bw.jpeg"/></div></figure><p id="a01b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">使用CHAIN _ approximate _ NONE，存储的轮廓长度为524，即所有的点都存储在数组中</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es me"><img src="../Images/6ad63216e0dff461d61708821dcab94a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W5IkbMXL6TWmabLnLR_Npw.png"/></div></div></figure><p id="04a1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">使用CHAIN _ approximate _ SIMPLE存储的轮廓长度为4，即只有四个角点存储在数组中</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es mf"><img src="../Images/cfaa3e34f034afca1b0643d2fdf4f8ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uXbv99vGC8Esa6La2_hOxw.png"/></div></div></figure><p id="e54d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">参考:<a class="ae lk" href="https://docs.opencv.org/master/d9/d8b/tutorial_py_contours_hierarchy.html" rel="noopener ugc nofollow" target="_blank">https://docs . opencv . org/master/d9/d8b/tutorial _ py _ contours _ hierarchy . html</a></p></div></div>    
</body>
</html>