<html>
<head>
<title>Text summarization using spaCy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用空间的文本摘要</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/text-summarization-using-spacy-ca4867c6b744?source=collection_archive---------1-----------------------#2020-07-28">https://medium.com/analytics-vidhya/text-summarization-using-spacy-ca4867c6b744?source=collection_archive---------1-----------------------#2020-07-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="177d" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">文章解释了什么是spacy，spacy的优点以及如何利用spacy进行文本摘要。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/90fa8882c0c9b64a7343b237fee5e1a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8HoFdy564ZFQG1pZHc6pFg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">照片由<a class="ae jn" href="https://commons.wikimedia.org/wiki/File:SpaCy_logo.svg" rel="noopener ugc nofollow" target="_blank">朝鲜蓟3 </a>拍摄</figcaption></figure><h1 id="800a" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">spaCy是什么？</h1><p id="58d7" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">spaCy是一个免费、开源的高级自然语言处理库，用编程语言Python和Cython编写。spaCy主要用于生产软件的开发，也通过PyTorch和TensorFlow的统计模型支持深度学习工作流。</p><h1 id="ad55" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">为什么是spaCy？</h1><p id="2e0d" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">spaCy提供了快速准确的语法分析、命名实体识别和对单词向量的快速访问。我们可以使用默认的词向量，或者用你有的词向量来代替它们。spaCy还提供了标记化、句子边界检测、词性标注、句法分析、集成的单词向量，以及与原始字符串的高精度对齐。</p><h1 id="0220" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">文本摘要</h1><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lc"><img src="../Images/2b977b1644e82df5e5133b3ec4d95457.png" data-original-src="https://miro.medium.com/v2/resize:fit:1058/format:webp/1*YGj5iXEAm_271tIUCpIO7g.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">图2:文本摘要</figcaption></figure><p id="14ab" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">文本摘要大致可以分为两类——<strong class="ki hj">抽取式摘要</strong>和<strong class="ki hj">抽象式摘要</strong>。</p><ol class=""><li id="5fb2" class="li lj hi ki b kj ld km le kp lk kt ll kx lm lb ln lo lp lq bi translated"><strong class="ki hj">提取摘要:</strong>这些方法依赖于从一段文本中提取几个部分，如短语和句子，并将它们堆叠在一起以创建摘要。因此，识别用于摘要的正确句子在抽取方法中是至关重要的。</li><li id="e281" class="li lj hi ki b kj lr km ls kp lt kt lu kx lv lb ln lo lp lq bi translated">这些方法使用先进的自然语言处理技术来生成一个全新的摘要。本摘要的某些部分甚至可能不会出现在原文中。</li></ol><p id="8ee7" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">在这篇文章中，我们将关注于<strong class="ki hj">提取摘要</strong>技术。</p><h1 id="5103" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">步骤:1安装说明</h1><p id="d734" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">要安装<em class="lw">空间</em>，只需输入以下命令:</p><pre class="iy iz ja jb fd lx ly lz ma aw mb bi"><span id="ea54" class="mc jp hi ly b fi md me l mf mg">pip install -U spacy</span></pre><p id="c47a" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">首先导入<em class="lw">空间</em>和其他必要的模块:</p><pre class="iy iz ja jb fd lx ly lz ma aw mb bi"><span id="a1aa" class="mc jp hi ly b fi md me l mf mg">import spacy<br/>from spacy.lang.en.stop_words import STOP_WORDS<br/>from string import punctuation<br/>from collections import Counter<br/>from heapq import nlargest</span></pre><p id="d4b6" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">接下来，将模型(英语)加载到spaCy中</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mh"><img src="../Images/1802208da6eed2709f00f4449e508454.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*HghTt2VutllnleSBc4OJRQ.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">图3:加载模型</figcaption></figure><p id="106e" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">我们将要处理的文本是“<em class="lw">机器学习简介”</em>，字符串存储在变量<em class="lw"> doc中。</em></p><p id="5671" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">这个字符串是，</p><pre class="iy iz ja jb fd lx ly lz ma aw mb bi"><span id="b373" class="mc jp hi ly b fi md me l mf mg">Machine learning (ML) is the scientific study of algorithms and statistical models that computer systems use to progressively improve their performance on a specific task. Machine learning algorithms build a mathematical model of sample data, known as “training data”, in order to make predictions or decisions without being explicitly programmed to perform the task. Machine learning algorithms are used in the applications of email filtering, detection of network intruders, and computer vision, where it is infeasible to develop an algorithm of specific instructions for performing the task. Machine learning is closely related to computational statistics, which focuses on making predictions using computers. The study of mathematical optimization delivers methods, theory and application domains to the field of machine learning. Data mining is a field of study within machine learning and focuses on exploratory data analysis through unsupervised learning. In its application across business problems, machine learning is also referred to as predictive analytics.</span></pre><p id="bfa0" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">现在，将字符串<em class="lw"> doc </em>传递给<em class="lw"> nlp </em>函数。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mh"><img src="../Images/e7c14d4a00d01b2781f4540b1c53b257.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*gUTVWNeqsMWIBzta5qsr2w.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">图4:标记化</figcaption></figure><p id="bb5d" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">为了找出给定字符串中句子的数量，使用下面的函数，</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mh"><img src="../Images/6ed5e1a74c0454a2e1c557c0f3654184.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*Rop0R5bD4N9A_OG2o3PjXw.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">图5:句子数量</figcaption></figure><pre class="iy iz ja jb fd lx ly lz ma aw mb bi"><span id="a233" class="mc jp hi ly b fi md me l mf mg">7</span></pre><p id="e58d" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">接下来，为词类和停用词创建两个列表，以验证每个标记，然后过滤必要的标记，并将它们保存在<em class="lw">关键字</em>列表中。</p><h1 id="cf6f" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">步骤2:过滤令牌</h1><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mi"><img src="../Images/8fd58960122e8ed8c88f9419cb77c93f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lu5cyjN9lEnLm8uDjaAocA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">图6:关键词过滤</figcaption></figure><p id="547e" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">使用“<em class="lw">计数器”</em>函数计算每个令牌的频率，并将其存储在<em class="lw"> freq_word </em>中，要查看前5个频繁出现的单词，可以使用<em class="lw">最常见的</em>方法。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mj"><img src="../Images/4f30c6d5427a976f9e3a0a2388331857.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tk8kfbgfZ546K7LmDYXpDg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">图7:令牌频率</figcaption></figure><p id="9a58" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">期望的输出将是，</p><pre class="iy iz ja jb fd lx ly lz ma aw mb bi"><span id="1d75" class="mc jp hi ly b fi md me l mf mg">[(‘learning’, 8), (‘Machine’, 4), (‘study’, 3), (‘algorithms’, 3), (‘task’, 3)]</span></pre><p id="07bb" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">为了更好地处理，可以对该频率进行归一化，这可以通过将令牌的频率除以最大频率来实现。</p><h1 id="dc0a" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">第三步:标准化</h1><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mk"><img src="../Images/c72d2294f912d175c09693ddf3a27e9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zk4MaBZzkZBt_z3SYnKsxw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">图8:归一化令牌频率</figcaption></figure><p id="f4fe" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">标准化列表是，</p><pre class="iy iz ja jb fd lx ly lz ma aw mb bi"><span id="57ba" class="mc jp hi ly b fi md me l mf mg">[(‘learning’, 1.0), (‘Machine’, 0.5), (‘study’, 0.375), (‘algorithms’, 0.375), (‘task’, 0.375)]</span></pre><p id="2926" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">这是根据每个句子中出现的标记的频率对每个句子进行加权的主要部分。结果作为键-值对存储在<em class="lw"> sent_strength </em>中，其中键是字符串<em class="lw"> doc </em>中的句子，值是每个句子的权重。</p><h1 id="c80c" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">步骤4:权衡句子</h1><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ml"><img src="../Images/c61e8eb5e460cd943a0f04c0e4641c13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RrqbxyeDgQcq5zZQABsDuQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">图9:权衡句子</figcaption></figure><p id="fb77" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">输出是，</p><pre class="iy iz ja jb fd lx ly lz ma aw mb bi"><span id="0edf" class="mc jp hi ly b fi md me l mf mg">{Machine learning (ML) is the scientific study of algorithms and statistical models that computer systems use to progressively improve their performance on a specific task.: 4.125, <br/>Machine learning algorithms build a mathematical model of sample data, known as “training data”, in order to make predictions or decisions without being explicitly programmed to perform the task.: 4.625, <br/>Machine learning algorithms are used in the applications of email filtering, detection of network intruders, and computer vision, where it is infeasible to develop an algorithm of specific instructions for performing the task.: 4.25, <br/>Machine learning is closely related to computational statistics, which focuses on making predictions using computers.: 2.625, <br/>The study of mathematical optimization delivers methods, theory and application domains to the field of machine learning.: 3.125, <br/>Data mining is a field of study within machine learning, and focuses on exploratory data analysis through unsupervised learning.: 4.25, In its application across business problems, machine learning is also referred to as predictive analytics.: 2.25}</span></pre><p id="0bab" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">最后，<em class="lw"> nlargest </em>函数用于总结字符串，它需要3个参数，</p><p id="8a51" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">→要提取的数据数量</p><p id="5e6f" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">→可迭代的(列表/元组/字典)</p><p id="cf17" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">→分别需要满足的条件</p><h1 id="4e43" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">步骤5:总结字符串</h1><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mm"><img src="../Images/25dec35007d2284aa70096bd26c7bd4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CZPHk2FDrgTZUvgEzg5qcw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">图10:找到N个最大值</figcaption></figure><p id="3b82" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">并且<em class="lw"> nlargest </em>函数返回一个包含前3个句子的列表，这些句子被存储为<em class="lw">摘要_句子</em>。</p><pre class="iy iz ja jb fd lx ly lz ma aw mb bi"><span id="762a" class="mc jp hi ly b fi md me l mf mg">[Machine learning algorithms build a mathematical model of sample data, known as “training data”, in order to make predictions or decisions without being explicitly programmed to perform the task., Machine learning algorithms are used in the applications of email filtering, detection of network intruders, and computer vision, where it is infeasible to develop an algorithm of specific instructions for performing the task., Data mining is a field of study within machine learning, and focuses on exploratory data analysis through unsupervised learning.]</span></pre><p id="3b3a" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">列表中的每个句子都是spacy.span类型的</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mh"><img src="../Images/1fe8b637b4e43401ba037d4fbd0c59a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*H6ULsKQN8P8LsmPtM1PwoA.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">图11:令牌的类型</figcaption></figure><pre class="iy iz ja jb fd lx ly lz ma aw mb bi"><span id="9d98" class="mc jp hi ly b fi md me l mf mg">spacy.tokens.span.Span</span></pre><p id="86db" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">这可以通过下面几行代码转换成字符串，</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mn"><img src="../Images/a474b4da14c67ad7214debdf6885c2a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O3Spc4W6YKrfdrPJnLlS4Q.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">图12:最终结果</figcaption></figure><p id="88e2" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">产生最终汇总输出，如下所示</p><pre class="iy iz ja jb fd lx ly lz ma aw mb bi"><span id="cb7f" class="mc jp hi ly b fi md me l mf mg">Machine learning algorithms build a mathematical model of sample data, known as “training data”, in order to make predictions or decisions without being explicitly programmed to perform the task. Machine learning algorithms are used in the applications of email filtering, detection of network intruders, and computer vision, where it is infeasible to develop an algorithm of specific instructions for performing the task. Data mining is a field of study within machine learning, and focuses on exploratory data analysis through unsupervised learning.</span></pre><h1 id="b5c8" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">使用Gensim进行总结</h1><p id="0095" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">众所周知，Gensim软件包具有内置的汇总功能，但它不如spaCy高效。代码是，</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mo"><img src="../Images/dd42f6aff40f5c10e92d45a4b4470d8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hftqLaGKwuXT7XU0hX7eaA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">图13:使用Gensim进行总结</figcaption></figure><p id="6427" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">相应的输出是，</p><pre class="iy iz ja jb fd lx ly lz ma aw mb bi"><span id="845c" class="mc jp hi ly b fi md me l mf mg">'Machine learning algorithms build a mathematical model of sample data, known as “training data”, in order to make predictions or decisions without being explicitly programmed to perform the task.'</span></pre><p id="392c" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">完整代码可在<a class="ae jn" href="https://github.com/kamal2230/text-summarization" rel="noopener ugc nofollow" target="_blank"> GitHub </a>中获得。</p><h1 id="4436" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">结论</h1><p id="e671" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">我希望您现在已经理解了如何使用spaCy执行文本摘要。感谢阅读！</p></div></div>    
</body>
</html>