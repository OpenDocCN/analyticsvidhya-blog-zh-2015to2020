<html>
<head>
<title>How Lists are Implemented in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中如何实现列表</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/how-lists-are-implemented-in-python-9b055fbc8d36?source=collection_archive---------4-----------------------#2020-05-14">https://medium.com/analytics-vidhya/how-lists-are-implemented-in-python-9b055fbc8d36?source=collection_archive---------4-----------------------#2020-05-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="5362" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我们将看到如何使用基本数组在python内部实现列表。</p><p id="32ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在list中，我们不需要像在array中那样提前提到它的大小，如果我们继续添加元素，它的大小会动态增加，就像在上一篇<a class="ae jd" rel="noopener" href="/@manikanthgoud123/array-based-sequences-in-python-a62c4c3a6a06">博客</a>中看到的那样，现在我们来看看动态数组在理论上是如何实现的。</p><h1 id="48a1" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">动态数组实现:</h1><p id="9769" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">在动态数组中，主要的关键是不要提供它的大小，它是通过以下步骤实现的:</p><p id="d5cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤1:分配一个容量更大的新阵列(让我们考虑B)。</p><p id="407c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第二步:设B[i] = A[i]，对于i =0，1，…。n-1，其中n表示项目的当前数量。</p><p id="3bd2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤3:设置A=B也就是说，我们从此以后使用B作为支持数组列表的数组。</p><p id="d0a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤4:在新数组中插入新元素。</p><p id="2e4b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们用更外行的术语来看实现动态数组。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es kh"><img src="../Images/78a16bd1dae945a5fed01ff3db244655.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*cZIhwVs6rcrZoZeqviYfNQ.png"/></div></figure><p id="97ef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果当前数组(即A)已满。创建一个两倍大小的新数组(即B)</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es kp"><img src="../Images/070327a3360d8ae45cd9a8d7833caa28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*GAyBnR_HsdNW2Ql4kRFibQ.png"/></div></div></figure><p id="5157" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将A的元素存储在b中。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es ku"><img src="../Images/479b7c061cb56b317a50c6d95437eec3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/1*fxzAMRK5Q3W2MJGnfXGHXA.png"/></div></figure><p id="cf49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将引用A重新分配给新数组。</p></div><div class="ab cl kv kw gp kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hb hc hd he hf"><p id="f75c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们将创建自己的动态数组类！我们将使用一个名为<a class="ae jd" href="https://docs.python.org/2/library/ctypes.html" rel="noopener ugc nofollow" target="_blank"> Ctypes </a>的内置库。查看文档以获得更多信息，但是它在这里基本上被用作来自<a class="ae jd" href="https://docs.python.org/2/library/ctypes.html" rel="noopener ugc nofollow" target="_blank"> Ctypes </a>模块的原始数组。如果你发现自己对它非常感兴趣，可以去看看:<a class="ae jd" href="http://starship.python.net/crew/theller/ctypes/tutorial.html" rel="noopener ugc nofollow" target="_blank"> Ctypes教程</a>。</p><figure class="ki kj kk kl fd km"><div class="bz dy l di"><div class="lc ld l"/></div></figure><p id="61b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将一步一步地浏览代码</p><p id="daa8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"># <code class="du le lf lg lh b"><a class="ae jd" href="https://docs.python.org/3/library/ctypes.html#module-ctypes" rel="noopener ugc nofollow" target="_blank">ctypes</a></code>是Python的外来函数库。它提供C兼容的数据类型，并允许调用dll或共享库中的函数。它可以用来用纯Python包装这些库。</p><p id="8f5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">导入类型</p><p id="6629" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将创建自己的类创建一个新的类创建一个新的<em class="li">类型</em>的对象，允许创建该类型的新的<em class="li">实例</em>。每个类实例都可以附加属性来维护其状态。有关课程的更多信息，请点击<a class="ae jd" href="https://docs.python.org/3/tutorial/classes.html" rel="noopener ugc nofollow" target="_blank">此处</a>。</p><p id="da8e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">类DynamicArray():</p><p id="75eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">创建类的方法:</strong></p><p id="9cf0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">def __init__(self):</p><p id="62f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">__init__()是一个保留方法，也称为类构造函数。它在创建实例时执行。</p><p id="df78" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">self类似于java中的这个关键字，它指的是正在创建的实例。</p><p id="482e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">def __len__(self):</p><p id="2be0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Python len()函数返回对象的长度。这个函数在内部调用对象的__len__()函数。所以我们可以对任何定义__len__()函数的对象使用len()函数。</p><p id="0e13" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">def __getitem__(self，k):</p><p id="644e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du le lf lg lh b">__getitem__</code>用于实现类似<code class="du le lf lg lh b">self[key]</code>的调用。</p><p id="b9a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">def _resize():</p><p id="d52a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下划线前缀意味着<em class="li">暗示</em>以单个下划线开头的方法是供内部使用的。这个惯例是在PEP 8 中定义的<a class="ae jd" href="http://pep8.org/#descriptive-naming-styles" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="9c7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">def make_array(self，new_cap):</p><p id="f76e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该方法用于创建新数组。</p><p id="333c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们创建一个我们类的实例，并在下面的代码片段中使用它，你可以看到一些由list完成的操作。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es lj"><img src="../Images/9579354ba2f546ad4cbf05296bd38f3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cSUscOB-nZTkuUqE7wcJ4g.png"/></div></div></figure></div></div>    
</body>
</html>