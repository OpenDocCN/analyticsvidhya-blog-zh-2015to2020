<html>
<head>
<title>BigData/ELT: Serverless Database migration and replication with nearly no downtime</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">BigData/ELT:几乎不停机的无服务器数据库迁移和复制</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/moving-an-on-premise-production-database-to-a-managed-cloud-serverless-database-in-nearly-no-d1fb3f47cfd3?source=collection_archive---------14-----------------------#2020-02-14">https://medium.com/analytics-vidhya/moving-an-on-premise-production-database-to-a-managed-cloud-serverless-database-in-nearly-no-d1fb3f47cfd3?source=collection_archive---------14-----------------------#2020-02-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="e4b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过无服务器迁移和复制流程将本地生产数据库迁移到云中，几乎不需要停机…</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/3e9dc2eb998c64ee0abd2a6a635466d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N6h4u1KKOBKYjse1dOYJjQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">图片来源:谷歌</figcaption></figure><h1 id="c1d0" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">目录</h1><ol class=""><li id="6075" class="kr ks hi ih b ii kt im ku iq kv iu kw iy kx jc ky kz la lb bi translated"><strong class="ih hj">为什么选择无服务器的数据库迁移和复制方法？</strong></li><li id="58de" class="kr ks hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">先决条件— ETL + AWS DMS + AWS RDS </strong></li><li id="bc0e" class="kr ks hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">一步一步的流程和演示</strong></li><li id="3f9c" class="kr ks hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">奖励-专业提示！</strong></li></ol><h1 id="3b05" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak"> 1:为什么采用无服务器方法进行数据库迁移和复制？</strong></h1><p id="8d29" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq lh is it iu li iw ix iy lj ja jb jc hb bi translated">在我之前的一篇博客中(链接附后)，我已经提到了为什么无服务器方法在卓越运营、安全性、性能、可靠性和成本方面总是一个好的选择。</p><blockquote class="lk ll lm"><p id="e6e7" class="if ig ln ih b ii ij ik il im in io ip lo ir is it lp iv iw ix lq iz ja jb jc hb bi translated"><strong class="ih hj">提示:</strong>这些也被称为良好架构框架的<strong class="ih hj"> 5支柱</strong>。根据我自己的经验，应该严格控制性能成本。因为这五大支柱是相辅相成的，其中性能&amp;成本是最重要的。</p></blockquote><div class="lr ls ez fb lt lu"><a href="https://towardsdatascience.com/amazon-s3-data-lake-storing-analyzing-the-streaming-data-on-the-go-a-serverless-approach-48b68a9433ff" rel="noopener follow" target="_blank"><div class="lv ab dw"><div class="lw ab lx cl cj ly"><h2 class="bd hj fi z dy lz ea eb ma ed ef hh bi translated">亚马逊S3数据湖|移动存储和分析流数据|无服务器方法</h2><div class="mb l"><h3 class="bd b fi z dy lz ea eb ma ed ef dx translated">通过存储流数据创建亚马逊S3数据湖，并在旅途中以近乎实时的方式进行分析…</h3></div><div class="mc l"><p class="bd b fp z dy lz ea eb ma ed ef dx translated">towardsdatascience.com</p></div></div><div class="md l"><div class="me l mf mg mh md mi jn lu"/></div></div></a></div><p id="99e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，一个叫做<a class="ae mj" href="https://debezium.io/" rel="noopener ugc nofollow" target="_blank">https://debezium.io/</a>的流行开源变更数据捕获(CDC)平台可用于迁移和复制CDC，这很神奇，我也亲自使用过。但是，就架构良好的框架的5个支柱而言，它有以下缺点:</p><ul class=""><li id="5d67" class="kr ks hi ih b ii ij im in iq mk iu ml iy mm jc mn kz la lb bi translated"><strong class="ih hj"> <em class="ln">卓越运营:</em> </strong>源数据库上的全局读锁，需要运营维护，Debezium延迟监控，运行Debezium的服务器维护等。</li><li id="fe21" class="kr ks hi ih b ii lc im ld iq le iu lf iy lg jc mn kz la lb bi translated"><strong class="ih hj"> <em class="ln">安全:</em> </strong>非托管安全既针对动态加密也针对静态加密。</li><li id="b1f2" class="kr ks hi ih b ii lc im ld iq le iu lf iy lg jc mn kz la lb bi translated"><strong class="ih hj"> <em class="ln">性能/可伸缩性:</em> </strong>这可以通过Docker轻松实现可伸缩性。但是自动缩放有时很麻烦。</li><li id="d2e2" class="kr ks hi ih b ii lc im ld iq le iu lf iy lg jc mn kz la lb bi translated"><strong class="ih hj"> <em class="ln">可靠性:</em> </strong>对Zookeeper、Kafka等有几个内部依赖使得它不太可靠。</li><li id="d716" class="kr ks hi ih b ii lc im ld iq le iu lf iy lg jc mn kz la lb bi translated"><strong class="ih hj"> <em class="ln">费用:</em> </strong>免费但是，维护费用摆在那里！</li></ul><blockquote class="mo"><p id="1fd3" class="mp mq hi bd mr ms mt mu mv mw mx jc dx translated">因此，我将使用AWS DMS服务，使用一个受管理的无服务器流程进行迁移和复制，并向您演示如何设置。但是它也有自己的缺点，我在最后的奖金部分提到了，还有解决的方法！</p></blockquote><h1 id="4025" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke my kg kh ki mz kk kl km na ko kp kq bi translated">2: <strong class="ak">先决条件— ETL + AWS DMS + AWS RDS </strong></h1><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nb"><img src="../Images/35b2699c90f117da7bfb61148f3941e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XTPbN0buRPb33qxZHohRlw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">体系结构</figcaption></figure><p id="dcde" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ln"> 2.1: ETL: </em> </strong> ETL代表提取转换负载。通常，ETL数据管道用于为非结构化数据提供结构。</p><p id="7a24" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是，我们也可以使用它将结构化数据源从一个关系数据库迁移到另一个关系数据库或非关系数据库。我们现在就去，但不是从零开始，而是以一种或多或少无服务器的方式。</p><p id="c1d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ln"> 2.2: AWS DMS: </em> </strong>亚马逊Web服务(AWS)数据迁移服务(DMS)是我们用来建立一个完整的羽翼未丰的ETL过程的服务。通常建立一个ETL过程很容易，但是维护一个ETL过程并不简单，因为它依赖于<strong class="ih hj"> Docker </strong>、<strong class="ih hj"> Debezium </strong>、<strong class="ih hj"> Kafka </strong>等。</p><p id="5c3c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想从头开始学习，下面是我的文章，你可以看看下面，我在下面的文章中讨论的ETL的过程与我们将要运行的复制实例是一样的(稍后解释)。</p><p id="7ebd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想从头开始学习，下面是我的文章，你可以看看下面，我在下面的文章中讨论的ETL的过程与我们将要运行的复制实例是一样的(稍后解释)。</p><div class="lr ls ez fb lt lu"><a href="https://towardsdatascience.com/4-easy-steps-to-setting-up-an-etl-data-pipeline-from-scratch-a6e67c40b6e1" rel="noopener follow" target="_blank"><div class="lv ab dw"><div class="lw ab lx cl cj ly"><h2 class="bd hj fi z dy lz ea eb ma ed ef hh bi translated">从头开始设置ETL数据管道的4个简单步骤</h2><div class="mb l"><h3 class="bd b fi z dy lz ea eb ma ed ef dx translated">用几个命令建立ETL管道</h3></div><div class="mc l"><p class="bd b fp z dy lz ea eb ma ed ef dx translated">towardsdatascience.com</p></div></div><div class="md l"><div class="nc l mf mg mh md mi jn lu"/></div></div></a></div><p id="ed9c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们知道为什么我们需要AWS DMS。因此，AWS DMS主要由3部分组成:</p><ul class=""><li id="3ce4" class="kr ks hi ih b ii ij im in iq mk iu ml iy mm jc mn kz la lb bi translated"><strong class="ih hj"> <em class="ln"> AWS DMS端点:</em> </strong>这些是源和目标端点。在设置时，应该为需要与源和目标联网的复制实例处理VPC联网esp。AWS还提供了对此进行测试的选项。</li><li id="95e7" class="kr ks hi ih b ii lc im ld iq le iu lf iy lg jc mn kz la lb bi translated"><strong class="ih hj"> <em class="ln"> AWS DMS复制实例:</em> </strong>只是一个ec2实例，它将运行我们的整个ETL过程。复制实例存储CDC(变更数据捕获)检查点和指定持续时间内的表历史(以便在我们停止复制时重新加载),并且在幕后为我们完成所有繁重的工作。下面附上我的参考Github回购，以便更好地理解。</li><li id="0ee7" class="kr ks hi ih b ii lc im ld iq le iu lf iy lg jc mn kz la lb bi translated"><strong class="ih hj"> <em class="ln"> AWS DMS复制任务:</em> </strong>将在复制实例内部运行的ETL任务。出于学习和理解的目的，下面附上使用Debezium CDC设置ETL的代码，AWS使用相同的方法进行数据迁移和复制。</li></ul><div class="lr ls ez fb lt lu"><a href="https://github.com/burhanuddinbhopalwala/etl-elasticsearch-app" rel="noopener  ugc nofollow" target="_blank"><div class="lv ab dw"><div class="lw ab lx cl cj ly"><h2 class="bd hj fi z dy lz ea eb ma ed ef hh bi translated">burhanuddinbhopalwala/ETL-elastic search-app</h2><div class="mb l"><h3 class="bd b fi z dy lz ea eb ma ed ef dx translated">通过debezium (cdc)、相应的连接器kafka和kafka-connect提取转换加载(ETL)管道，用于…</h3></div><div class="mc l"><p class="bd b fp z dy lz ea eb ma ed ef dx translated">github.com</p></div></div><div class="md l"><div class="nd l mf mg mh md mi jn lu"/></div></div></a></div></div><div class="ab cl ne nf gp ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="hb hc hd he hf"><h1 id="29aa" class="jt ju hi bd jv jw nl jy jz ka nm kc kd ke nn kg kh ki no kk kl km np ko kp kq bi translated"><strong class="ak"> 3:一步一步的流程和演示</strong></h1><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nq"><img src="../Images/e123427504d926000d9fdee6334ffd04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CCs4szKeALdFy9zx-FY0oA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">DMS —鸟瞰视图</figcaption></figure><p id="d201" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个演示中，我将一个托管在ec2实例上的数据库作为源端点，AWS RDS作为目标端点。</p><p id="8650" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤1设置源和目标端点:</strong>附加以下配置。</p><p id="6400" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:使用连接属性设置<strong class="ih hj"><em class="ln">parallel load threads</em></strong>并行加载表或者<strong class="ih hj"> <em class="ln">使用BCPFullLoad </em> </strong>批量加载。你可以根据你的需要改变它。它们很重要，一些<strong class="ih hj"> <em class="ln">连接属性</em> </strong>如下:</p><ul class=""><li id="3ef9" class="kr ks hi ih b ii ij im in iq mk iu ml iy mm jc mn kz la lb bi translated"><strong class="ih hj"> <em class="ln">安全策略</em> </strong> —通过打开事务来更改SQL Server的行为，以防止在AWS DMS读取日志时事务日志被截断。有效值为EXCLUSIVE_AUTOMATIC_TRUNCATION或RELY _ ON _ SQL _ SERVER _ REPLICATION _ AGENT(默认值)。</li><li id="73f1" class="kr ks hi ih b ii lc im ld iq le iu lf iy lg jc mn kz la lb bi translated"><strong class="ih hj"><em class="ln">useBCPFullLoad</em></strong>—指示AWS DMS使用BCP(批量复制)进行数据加载。有效值为Y或n。当目标表包含源表中不存在的标识列时，必须通过将参数设置为n来禁止使用BCP加载表</li><li id="50c9" class="kr ks hi ih b ii lc im ld iq le iu lf iy lg jc mn kz la lb bi translated"><strong class="ih hj"><em class="ln">BCPPacketSize</em></strong>—如果BCP启用了数据加载，则输入BCP使用的最大数据包大小。有效值为1–100000(默认值为16384)。</li><li id="dfcd" class="kr ks hi ih b ii lc im ld iq le iu lf iy lg jc mn kz la lb bi translated"><strong class="ih hj"> <em class="ln">控制表文件组</em> </strong> —指定用于AWS DMS流程在数据库中创建的控制表的文件组。</li><li id="168e" class="kr ks hi ih b ii lc im ld iq le iu lf iy lg jc mn kz la lb bi translated"><strong class="ih hj"> <em class="ln">平行螺纹</em></strong>——上面讨论过。</li></ul><p id="276b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">端点配置:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="nr ns l"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">端点配置</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nt"><img src="../Images/9f0589eeea716a1374187489ae0605e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6GiP7wxuSbgIVis_HuD6AQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">高级设置—连接属性</figcaption></figure><p id="4036" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤2设置复制实例:</strong>在步骤3中附加到主配置下。</p><blockquote class="lk ll lm"><p id="a3e1" class="if ig ln ih b ii ij ik il im in io ip lo ir is it lp iv iw ix lq iz ja jb jc hb bi translated"><strong class="ih hj">注意:</strong>如果您的源和目标(比如说转移和生产)位于不同的VPC，那么复制实例将无法工作，除非两端都通过VPC对等连接进行连接。</p></blockquote><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nu"><img src="../Images/0def1d32feb2a9ac486ef9655e3add8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8OYeZ3KjSttRsvTBp-wc5w.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">不同端点中源和目标的VPC对等</figcaption></figure><p id="3f66" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在继续之前，请手动运行端点和复制实例之间的连接测试。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nt"><img src="../Images/b333057804b40c89d043dba2481cdd91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WcN6CLCVBmOf31kpPBaTGA.png"/></div></div></figure><p id="7813" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">步骤3设置复制任务</strong>:这是最重要的部分，因为如果复制任务配置不正确，它将很容易进入<strong class="ih hj">出错</strong>状态，然后您需要一个使用Cloudwatch日志的任务监视器。下面是附加的配置模板和截图。</p><p id="2920" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于所有配置，请参考以下主配置文件:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="nr ns l"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">复制任务设置</figcaption></figure><p id="1e1e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在高级设置下使用下面的表格映射:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nv"><img src="../Images/678e2f2be6b63b4c539aaa9182e89308.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ttufWcQkdhOv2c9DydfuNw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">复制任务的表映射</figcaption></figure><pre class="je jf jg jh fd nw nx ny nz aw oa bi"><span id="33d3" class="ob ju hi nx b fi oc od l oe of"><strong class="nx hj">{<br/> "rules": [<br/>  {<br/>   "rule-type": "selection",<br/>   "rule-id": "1",<br/>   "rule-name": "1",<br/>   "object-locator": {<br/>    "schema-name": "&lt;SOURCE_DB_NAME&gt;",<br/>    "table-name": "%"<br/>   },<br/>   "rule-action": "include"<br/>  }<br/> ]<br/>}</strong></span></pre><blockquote class="lk ll lm"><p id="bf4c" class="if ig ln ih b ii ij ik il im in io ip lo ir is it lp iv iw ix lq iz ja jb jc hb bi translated"><strong class="ih hj">提示</strong> <em class="hi">:你可以使用AWS CLI也可以使用上面的配置来创建复制实例和任务。</em></p></blockquote><p id="3507" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ln">最终结果:</em> </strong></p><p id="0eae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如您所见，所有经典型号都已迁移，并将根据上面选择的配置开始复制CDC！</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es og"><img src="../Images/bb33a0939ff40c74b59e299f36cbc211.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A2erduqobLXRYRtYGLYdRA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">经典模型—迁移</figcaption></figure><p id="5e99" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 4: </strong> <strong class="ih hj">奖金—亲小贴士！</strong></p><p id="5632" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 4.1: DMS的局限性(我们遇到了😤):</strong></p><blockquote class="lk ll lm"><p id="0d74" class="if ig ln ih b ii ij ik il im in io ip lo ir is it lp iv iw ix lq iz ja jb jc hb bi translated">列的AUTO_INCREMENT属性未迁移到目标数据库列。</p><p id="0015" class="if ig ln ih b ii ij ik il im in io ip lo ir is it lp iv iw ix lq iz ja jb jc hb bi translated">对列值的一部分创建的索引不会被迁移。所以，二级索引，默认值，过程，触发器等等。作为数据迁移的一部分未被迁移。—原因是AWS专注于数据迁移的极简方法(仅对象)。</p><p id="e0a4" class="if ig ln ih b ii ij ik il im in io ip lo ir is it lp iv iw ix lq iz ja jb jc hb bi translated">DMS没有迁移默认值。</p></blockquote><p id="30a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，迁移索引的一个好的解决方案是转储模式并使用<strong class="ih hj"> <em class="ln"> Truncate </em> </strong> only选项启动复制任务，这将保留转储模式(带有自动增量、索引、默认值)并仅迁移和复制CDC。</p><p id="5e43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Aliter的最佳解决方案是手动迁移索引，如果您在整个数据迁移过程之后意识到这一点的话。这一招也相当好用！</p><blockquote class="lk ll lm"><p id="5da7" class="if ig ln ih b ii ij ik il im in io ip lo ir is it lp iv iw ix lq iz ja jb jc hb bi translated">另一个限制是，如果MySQL兼容的源代码在满载时停止，AWS DMS任务不会因出错而停止。任务成功结束，但目标可能与源不同步。如果发生这种情况，要么重新启动任务，要么重新加载受影响的表，这是唯一的解决方案。</p></blockquote><p id="2af0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 4.2: <em class="ln">成本</em> </strong>:通常用于高达1–2tb的<strong class="ih hj"> <em class="ln">数据迁移t2 .中型或t2 .大型</em> <em class="ln">效果相当好</em> </strong>成本约为45–50美元/月。增加实例类型只会有助于初始数据迁移，但复制速度在所有实例类型中都保持不变。尽量不要选择更高的实例类型，这只会让你花费更多！</p><p id="70b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您选择在迁移后复制持续的CDC更改，那么只有您愿意选择验证更改(仅当您需要时)，AWS DMS将按小时计费。因为<strong class="ih hj"> <em class="ln">启用</em> </strong> <strong class="ih hj"> <em class="ln">验证会大大增加迁移时间，从而增加成本。</em> </strong></p><p id="1f4f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">差不多就是这样！</p></div><div class="ab cl ne nf gp ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="hb hc hd he hf"><p id="2cfa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ln">连接</em> </strong>🤝<strong class="ih hj"> <em class="ln"> : </em> </strong></p><ul class=""><li id="2d8f" class="kr ks hi ih b ii ij im in iq mk iu ml iy mm jc mn kz la lb bi translated"><strong class="ih hj"> <em class="ln">邮箱</em></strong>:<em class="ln">bbhopalw @ Gmail</em></li><li id="5419" class="kr ks hi ih b ii lc im ld iq le iu lf iy lg jc mn kz la lb bi translated">【www.linkedin.com/in/bbhoaplw】<em class="ln">领英</em>  : <a class="ae mj" href="http://www.linkedin.com/in/bbhoaplw" rel="noopener ugc nofollow" target="_blank"> <em class="ln">领英</em> </a></li></ul></div><div class="ab cl ne nf gp ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="hb hc hd he hf"><p id="10d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ln">供进一步阅读</em></strong>✍️<strong class="ih hj"><em class="ln">:</em></strong></p><p id="edb7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ln">大数据&amp;云工程博客:</em> </strong></p><ul class=""><li id="3043" class="kr ks hi ih b ii ij im in iq mk iu ml iy mm jc mn kz la lb bi translated"><strong class="ih hj"> <em class="ln">走向数据科学出版:</em></strong><a class="ae mj" rel="noopener" href="/@burhanuddinbhopalwala"><em class="ln">【https://medium.com/@burhanuddinbhopalwala】</em></a></li></ul><p id="14ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="ln">后端工程&amp;软件工程博客:</em> </strong></p><ul class=""><li id="8c12" class="kr ks hi ih b ii ij im in iq mk iu ml iy mm jc mn kz la lb bi translated"><strong class="ih hj"> <em class="ln"> DEV社区:</em><br/></strong><a class="ae mj" href="https://dev.to/burhanuddinbhopalwala" rel="noopener ugc nofollow" target="_blank"><em class="ln">https://dev.to/burhanuddinbhopalwala</em></a></li></ul></div></div>    
</body>
</html>