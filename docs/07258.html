<html>
<head>
<title>Node JS, Express, SQL Server, and Flutter Together Flirting.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">节点JS，Express，SQL Server，和Flutter一起调情。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/node-js-express-sql-server-and-flutter-together-flirting-a7e57bccb697?source=collection_archive---------1-----------------------#2020-06-19">https://medium.com/analytics-vidhya/node-js-express-sql-server-and-flutter-together-flirting-a7e57bccb697?source=collection_archive---------1-----------------------#2020-06-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="3369" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你好，今天我们将讨论如何使用store procedure和Node JS和SQL server创建一个restful API，并在flutter应用程序中使用它。</p><p id="c0ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们将在SQL server中创建数据库和存储过程:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="eb2a" class="jm jn hi ji b fi jo jp l jq jr">Create database loginSignup<br/><br/>use loginSignup<br/><br/><br/><br/>Create table signupUser(<br/>userId int primary key identity(1,1),<br/>userEmail nvarchar(50),<br/>userPassword nvarchar(max)<br/>);<br/></span><span id="ac3d" class="jm jn hi ji b fi js jp l jq jr">--Signup Store Procedure.<br/>Create proc spSignupUser<br/>@userEmail nvarchar(50),<br/>@userPassword nvarchar(max),<br/>@responseMessage varchar(50) output<br/><br/>as<br/>begin<br/><strong class="ji hj">set </strong>nocount on;<br/><br/>begin <strong class="ji hj">try<br/><br/></strong>IF EXISTS (Select userEmail from signupUser where userEmail = @userEmail)<br/>BEGIN<br/>set @responseMessage = <strong class="ji hj">'Failed'</strong>;<br/>END<br/>ELSE<br/>BEGIN<br/>Insert into signupUser<br/>Output Inserted.userId,@userEmail as Email,@userPassword as Password<br/>values(@userEmail,@userPassword);<br/><br/>set @responseMessage = <strong class="ji hj">'Success'</strong>;<br/>END<br/>end <strong class="ji hj">try<br/></strong>begin <strong class="ji hj">catch<br/></strong>set @responseMessage = ERROR_MESSAGE();<br/>end <strong class="ji hj">catch<br/></strong>end<br/><br/><br/>Declare @userEmail nvarchar(50), @userPassword nvarchar(50),@responseMessage varchar(50)<br/>Exec spSignupUser @userEmail=<strong class="ji hj">'mashood21@gmail.com'</strong>,@userPassword = <strong class="ji hj">'</strong>$<strong class="ji hj">2b</strong>$<strong class="ji hj">10</strong>$fZe7hjws5AzGUa5J0yj2Le1fLAf3oV5SAEee3nneu4VUGEsVIAf82<strong class="ji hj">'</strong>,@responseMessage = @responseMessage output<br/>print @responseMessage;</span><span id="590e" class="jm jn hi ji b fi js jp l jq jr">--Signin Store Proc<br/>Create proc spSignInUser<br/>@userEmail nvarchar(50),<br/>@userPassword nvarchar(max),<br/>@responseMessage varchar(50) output<br/><br/>as<br/>begin<br/><strong class="ji hj">set </strong>nocount on;<br/>begin <strong class="ji hj">try<br/></strong>IF EXISTS (Select userEmail,userPassword from signupUser where userEmail = @userEmail and userPassword = @userPassword)<br/>begin<br/>Select userEmail,userPassword from signupUser where userEmail = @userEmail and userPassword = @userPassword<br/>set @responseMessage = <strong class="ji hj">'Success'</strong>;<br/>end<br/><strong class="ji hj">else<br/></strong>begin<br/>set @responseMessage = <strong class="ji hj">'Auth Failed'</strong>;<br/>end<br/>end <strong class="ji hj">try<br/><br/></strong>begin <strong class="ji hj">catch<br/></strong>set @responseMessage = <strong class="ji hj">'Failed'<br/></strong>end <strong class="ji hj">catch<br/></strong>end<br/><br/><br/>Declare @userEmail nvarchar(50), @userPassword nvarchar(max), @responseMessage varchar(50)<br/>EXEC spSignInUser @userEmail = <strong class="ji hj">'mashood1@gmail.com'</strong>,@userPassword=<strong class="ji hj">'Passwords'</strong>, @responseMessage = @responseMessage output<br/>print @responseMessage</span></pre><p id="f306" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们不会从后端处理任何加密或解密，因为我们将通过节点js来完成。</p><p id="a873" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您需要在pc上安装node。</p><p id="c46b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，让我们为Node js创建一个项目，转到您想要创建项目的任何目录，创建一个文件夹，文件夹名称之间没有空格，然后进入该文件夹，然后进入新文件夹的地址栏或标题栏，编写cmd并按enter，然后执行以下步骤:</p><ol class=""><li id="ff9c" class="jt ju hi ih b ii ij im in iq jv iu jw iy jx jc jy jz ka kb bi translated">npm初始化</li><li id="7b2f" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">保持包名不变并按回车键，保持版本不变并按回车键</li><li id="1aae" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">用SQL写一个有意义的描述，比如一个节点js restful API，回车</li><li id="9467" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">然后对于入口点按enter键，将测试命令留空按enter键，如果您是git repo link paste in git repository，否则按enter键，同时将其留空</li><li id="590a" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">写一个关键字，即节点js Restful API。</li><li id="1cfc" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">然后写上作者姓名，即你的名字。</li><li id="c510" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">然后按enter键获取许可，并在“这可以吗?”中输入yes。。</li><li id="528f" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">然后写代码。在vs代码中打开项目。</li></ol><p id="b33a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您已经成功设置了项目。</p><p id="f615" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你的项目结构应该是这样的。</p><figure class="jd je jf jg fd ki er es paragraph-image"><div class="er es kh"><img src="../Images/c98808e3586e3f4ad7aa25331a66a61a.png" data-original-src="https://miro.medium.com/v2/resize:fit:506/format:webp/1*3I6uy4jHCprel7tOLVC6gA.png"/></div></figure><p id="5b3b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在打开一个终端，逐个安装这些依赖项:</p><ol class=""><li id="d770" class="jt ju hi ih b ii ij im in iq jv iu jw iy jx jc jy jz ka kb bi translated">npm快速安装</li><li id="242b" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">npm安装mssql</li><li id="7ea0" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">npm安装摩根</li><li id="7306" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">npm安装主体-解析器</li><li id="d6d3" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">npm安装bcrypt</li><li id="b5a9" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">npm安装jsonwebtoken</li><li id="b1f4" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">NPM install—only-dev nodemon(“—”是连在一起的双破折号)。</li></ol><p id="5100" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装这些包后，转到package.json，在脚本中，复制粘贴以下代码:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="0dfc" class="jm jn hi ji b fi jo jp l jq jr"><strong class="ji hj">,"serve"</strong>: <strong class="ji hj">"nodemon server.js"</strong></span></pre><p id="e3a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装完软件包后，让我们设置第一个settings.js。记住，您已经设置了SQL server身份验证。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="550b" class="jm jn hi ji b fi jo jp l jq jr">exports.dbConfig = {<br/><strong class="ji hj">'user'</strong>: <strong class="ji hj">'Your User name'</strong>,<br/><strong class="ji hj">'password'</strong>: <strong class="ji hj">'Your password of sql'</strong>,<br/><strong class="ji hj">'server'</strong>: <strong class="ji hj">'Your Server name'</strong>,<br/><strong class="ji hj">'database'</strong>: <strong class="ji hj">'</strong>loginSignup<strong class="ji hj">'</strong>,<br/>options: {<br/>enableArithAbort: <strong class="ji hj">false</strong>,<br/>encrypt: <strong class="ji hj">false</strong>,<br/>}<br/>};</span></pre><ol class=""><li id="f3fa" class="jt ju hi ih b ii ij im in iq jv iu jw iy jx jc jy jz ka kb bi translated">用户:输入您的SQL用户名，默认用户名为“sa”。</li></ol><p id="39ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.密码:您的SQL server的密码。</p><p id="5ced" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.server:SQL server的实例名。</p><p id="e4b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.数据库:输入要使用的数据库的名称。</p><p id="b923" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们已经导出了这个文件，所以不需要在代码下面导出它。</p><p id="4cda" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们在server.js文件中创建一个服务器:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="ecc9" class="jm jn hi ji b fi jo jp l jq jr"><strong class="ji hj">const </strong>http = require(<strong class="ji hj">'http'</strong>);<br/><strong class="ji hj">const </strong>port = process.env.port || 3000;<br/><strong class="ji hj">const </strong>app = require(<strong class="ji hj">'./app'</strong>);<br/><br/><strong class="ji hj">const </strong>server = http.createServer(app);<br/><br/>server.listen(port);</span></pre><p id="3231" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们在这里使用HTTP包对API进行网络调用。</p><p id="a13c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">端口从您的环境中获取，或者您可以使用硬编码的端口，即如果无法从环境中获取端口，则使用3000作为本地主机的端口。</p><p id="6872" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">应用程序是app.js文件，我们将很快介绍它，http.createServer(app)是完成所有魔术的地方，它从app.js获取所有代码和路由等，并为我们创建一个本地主机服务器。</p><p id="05e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">server.listen(port)意味着监听我们从环境变量或硬编码3000中获得的端口。</p><p id="f93d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们转到db.js文件，复制粘贴以下代码:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="5f09" class="jm jn hi ji b fi jo jp l jq jr"><strong class="ji hj">var </strong>sqlDb = require(<strong class="ji hj">'mssql'</strong>);<br/><strong class="ji hj">var </strong>sqlDbSettings = require(<strong class="ji hj">'../settings'</strong>);<br/><br/><strong class="ji hj">const </strong>poolPromise = <strong class="ji hj">new </strong>sqlDb.ConnectionPool(sqlDbSettings.dbConfig)<br/>    .connect()<br/>    .then(pool =&gt; {<br/>console.log(<strong class="ji hj">'Connected to MSSQL'</strong>)<br/><strong class="ji hj">return </strong>pool<br/>})<br/>    .<strong class="ji hj">catch</strong>(err =&gt; console.log(<strong class="ji hj">'Database Connection Failed! Bad Config: '</strong>, err));<br/><br/>module.exports = {<br/>sqlDb, poolPromise<br/>}</span></pre><p id="6a71" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里我们使用我们安装的mssql包并导入我们创建的设置。</p><p id="ac74" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们将创建一个与SQL server的连接，作为一个单独的类，这样我们就可以导入它并在任何地方使用它，而不是一次又一次地创建请求池，这不是一个好主意。这里我导出SQL数据库，pool promise这是另一种导出方式。</p><p id="5527" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们转到API/routes中的user.js文件并导入这些文件:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="67b1" class="jm jn hi ji b fi jo jp l jq jr"><strong class="ji hj">const </strong>express = require(<strong class="ji hj">'express'</strong>);<br/><strong class="ji hj">const </strong>router = express.Router();<br/><strong class="ji hj">const </strong>db = require(<strong class="ji hj">'../../core/db'</strong>);<br/><strong class="ji hj">const </strong>sql = require(<strong class="ji hj">'mssql'</strong>);<br/><strong class="ji hj">const </strong>bcrypt = require(<strong class="ji hj">'bcrypt'</strong>);<br/><strong class="ji hj">const </strong>jwt = require(<strong class="ji hj">'jsonwebtoken'</strong>);</span></pre><p id="a4d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">express是一个节点包，它使我们可以很容易地创建API，而router使我们可以访问不同的API路径，即get请求、POST请求、PUT请求。我们将只为注册和登录创建一个帖子请求。</p><p id="1944" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，在导入上述包之后，复制粘贴这段代码。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="cf00" class="jm jn hi ji b fi jo jp l jq jr">async function getpool() {<br/>  <strong class="ji hj">const </strong>pool = await db.poolPromise;<br/>  <strong class="ji hj">const </strong>result = await pool.request();<br/>  <strong class="ji hj">return </strong>result;<br/>}</span></pre><p id="4a76" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个方法中，我们运行异步方法来创建一个池，并以请求的形式发送查询或存储过程，然后获取数据，从而在SQL和node之间创建一个连接。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="c942" class="jm jn hi ji b fi jo jp l jq jr">router.post(<strong class="ji hj">'/signup'</strong>, (req, res, next) =&gt; {<br/><br/><strong class="ji hj">if </strong>(req.body.userEmail != <strong class="ji hj">null </strong>&amp;&amp; req.body.userPassword != <strong class="ji hj">null</strong>) {<br/>bcrypt.hash(req.body.userPassword, 10, <strong class="ji hj">async </strong>(err, hash) =&gt; {<br/><strong class="ji hj">if </strong>(err) {<br/><strong class="ji hj">return </strong>res.status(500).json({<br/>error: {<br/>message: err<br/>}<br/>});<br/>}<br/><strong class="ji hj">else </strong>{<br/><br/><strong class="ji hj">const </strong>result = <strong class="ji hj">await </strong>getpool();<br/>result.<br/>input(<strong class="ji hj">'userEmail'</strong>, sql.NVarChar(50), req.body.userEmail)<br/>    .input(<strong class="ji hj">'userPassword'</strong>, sql.NVarChar(sql.MAX), hash)<br/>    .output(<strong class="ji hj">'responseMessage'</strong>, sql.VarChar(50))<br/>    .execute(<strong class="ji hj">'spSignupUser'</strong>, function (err, data) {<br/><strong class="ji hj">if </strong>(err) {<br/>res.status(500).json({<br/>error: {<br/>message: err<br/>}<br/>});<br/>}<br/><strong class="ji hj">else </strong>{<br/>console.log(data);<br/><strong class="ji hj">if </strong>(data[<strong class="ji hj">'output'</strong>][<strong class="ji hj">'responseMessage'</strong>] == <strong class="ji hj">'Failed'</strong>) {<br/>res.status(404).json({<br/>error: {<br/>message: <strong class="ji hj">'User Exist'<br/></strong>}<br/>});<br/>}<br/><strong class="ji hj">else </strong>{<br/>res.status(201).json({<br/>message: <strong class="ji hj">'Success'</strong>,<br/>data: {<br/>email: req.body.userEmail,<br/>password: hash,<br/>userId: data[<strong class="ji hj">'recordset'</strong>][0][<strong class="ji hj">'userId'</strong>]<br/>}<br/>});<br/>}<br/>}<br/>});<br/>}<br/><br/>});<br/>}<br/><strong class="ji hj">else </strong>{<br/><strong class="ji hj">return </strong>res.status(404).json({<br/>error: {<br/>message: <strong class="ji hj">'not found'<br/></strong>}<br/>});<br/>}<br/><br/>});</span></pre><p id="5b8d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里我们创建了一个注册的post请求，当我们回到app.js类时，我将解释为什么我们使用/signup。</p><p id="862d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里我们检查post请求，所以我们需要将主体传递给API，所以这里我们首先检查电子邮件和密码是否不为空，</p><p id="c615" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们使用bcrypt包来散列密码，bcrypt第一个参数是明文，第二个参数是Salt，即我们要生成多少salting关键字，第三个参数是一个函数，这里没有必要有一个异步函数，但根据我的要求，我想访问池，所以我在这里使它异步。在bcrypt函数中，我检查发送请求时是否有错误，然后返回状态代码为500的错误，如果没有错误，则获取访问数据库的池请求。</p><p id="8c00" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在主要部分在这里，我们正在访问这个代码:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="94be" class="jm jn hi ji b fi jo jp l jq jr">result.<br/>input(<strong class="ji hj">'userEmail'</strong>, sql.NVarChar(50), req.body.userEmail)<br/>    .input(<strong class="ji hj">'userPassword'</strong>, sql.NVarChar(sql.MAX), hash)<br/>    .output(<strong class="ji hj">'responseMessage'</strong>, sql.VarChar(50))<br/>    .execute(<strong class="ji hj">'spSignupUser'</strong>, function (err, data) {<br/><strong class="ji hj">if </strong>(err) {<br/>res.status(500).json({<br/>error: {<br/>message: err<br/>}<br/>});<br/>}<br/><strong class="ji hj">else </strong>{<br/>console.log(data);<br/><strong class="ji hj">if </strong>(data[<strong class="ji hj">'output'</strong>][<strong class="ji hj">'responseMessage'</strong>] == <strong class="ji hj">'Failed'</strong>) {<br/>res.status(404).json({<br/>error: {<br/>message: <strong class="ji hj">'User Exist'<br/></strong>}<br/>});<br/>}<br/><strong class="ji hj">else </strong>{<br/>res.status(201).json({<br/>message: <strong class="ji hj">'Success'</strong>,<br/>data: {<br/>email: req.body.userEmail,<br/>password: hash,<br/>userId: data[<strong class="ji hj">'recordset'</strong>][0][<strong class="ji hj">'userId'</strong>]<br/>}<br/>});<br/>}<br/>}<br/>});<br/>}<br/><br/>});<br/>}</span></pre><p id="2f94" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们用它来运行一个存储过程，即获取一些输入，也可能有一些输出，输入意味着用户要输入什么，输出是为了共享结果，输入有三个参数:</p><ol class=""><li id="514f" class="jt ju hi ih b ii ij im in iq jv iu jw iy jx jc jy jz ka kb bi translated">您在SQL存储过程中定义的列名。</li><li id="fec4" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">列的数据类型。</li><li id="11b5" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">您正在输入的文本。</li></ol><p id="b22f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Execute function执行存储过程，传递存储过程的名称，第二个参数是返回错误和数据对象的函数。我们再次检查我们是否得到err，然后返回状态代码为500的错误，如果我们没有得到任何错误，那么在else部分，我们检查我们的存储过程的输出是否返回失败，所以我们发送404请求，用户存在。现在，如果我们没有得到任何错误或失败，那么我们将返回状态代码201和数据，一封电子邮件将来自req.body.userEmail，密码将是我们对bcrypt使用的散列密码，用户id将可从我们执行存储过程得到的数据对象中访问。</p><p id="9b7a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们将为我们的登录创建API。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="3f27" class="jm jn hi ji b fi jo jp l jq jr">router.post(<strong class="ji hj">'/signin'</strong>, async (req, res, next) =&gt; {<br/><strong class="ji hj">if </strong>(req.body.userEmail != <strong class="ji hj">null </strong>&amp;&amp; req.body.userPassword != <strong class="ji hj">null</strong>) {<br/><br/><strong class="ji hj">const </strong>result = await getpool();<br/>result.<br/>input(<strong class="ji hj">'userEmail'</strong>, sql.NVarChar(50), req.body.userEmail)<br/>.input(<strong class="ji hj">'userPassword'</strong>, sql.NVarChar(sql.MAX), req.body.userPassword)<br/>.output(<strong class="ji hj">'responseMessage'</strong>, sql.VarChar(50))<br/>.execute(<strong class="ji hj">'spSignInUser'</strong>, function (err, data) {<br/>  <strong class="ji hj">if </strong>(err) {<br/>    res.status(500).json({<br/>      error:<br/>      {<br/>        message: err<br/>      }<br/>    });<br/>  }<br/>  <strong class="ji hj">else </strong>{<br/>    result.query(<strong class="ji hj">'Select * from signupUser where userEmail=' </strong>+ <strong class="ji hj">"'" </strong>+ req.body.userEmail + <strong class="ji hj">"'"</strong>).then(function (datas) {<br/><br/>    console.log(datas[<strong class="ji hj">'recordset'</strong>][0][<strong class="ji hj">'userEmail'</strong>] + <strong class="ji hj">'RESULTS'</strong>);<br/>    bcrypt.compare(req.body.userPassword, datas[<strong class="ji hj">'recordset'</strong>][0][<strong class="ji hj">'userPassword'</strong>], (err, results) =&gt; {<br/>    <strong class="ji hj">if </strong>(err) {<br/>    <strong class="ji hj">return </strong>res.status(500).json({<br/>    error:<br/>    {<br/>    message: err<br/>    }<br/>    });<br/>    } <strong class="ji hj">if </strong>(results) {<br/>    <strong class="ji hj">const </strong>token = jwt.sign({<br/>    email: datas[<strong class="ji hj">'recordset'</strong>][0][<strong class="ji hj">'userEmail'</strong>],<br/>    userId: datas[<strong class="ji hj">'recordset'</strong>][0][<strong class="ji hj">'userId'</strong>],<br/>    },<br/>    process.env.JWT_KEY,<br/>    {<br/>    expiresIn: <strong class="ji hj">'1h'<br/>    </strong>},<br/>    );<br/>    console.log(results);<br/>    <strong class="ji hj">return </strong>res.status(200).json({<br/>    message: <strong class="ji hj">'success'</strong>,<br/>    userdata: datas[<strong class="ji hj">'recordset'</strong>],<br/>    access_token: token,<br/>    });<br/>    }<br/>    <strong class="ji hj">return </strong>res.status(404).json({<br/>    error:<br/>    {<br/>    message: <strong class="ji hj">'Auth Failed'<br/>    </strong>}<br/>    });<br/>    });<br/>    }).<strong class="ji hj">catch</strong>(function (err) {<br/>  <strong class="ji hj">return </strong>res.status(500).json({<br/>  error:<br/>  {<br/>  message: <strong class="ji hj">'Auth Failed'<br/>  </strong>}<br/>  });<br/>  });<br/>}<br/><br/>});<br/>}<br/><strong class="ji hj">else </strong>{<br/><strong class="ji hj">return </strong>res.status(422).json({<br/>error:<br/>{<br/>message: <strong class="ji hj">'Parameter Not Supplied'<br/></strong>}<br/>});<br/>}<br/>});</span></pre><p id="3b23" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">大部分代码与上面的相同，我们将关注else部分，因为有必要了解那里发生了什么，所以让我们来讨论一下:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="b6b4" class="jm jn hi ji b fi jo jp l jq jr"><strong class="ji hj">else </strong>{<br/>    result.query(<strong class="ji hj">'Select * from signupUser where userEmail=' </strong>+ <strong class="ji hj">"'" </strong>+ req.body.userEmail + <strong class="ji hj">"'"</strong>).then(function (datas) {<br/><br/>    console.log(datas[<strong class="ji hj">'recordset'</strong>][0][<strong class="ji hj">'userEmail'</strong>] + <strong class="ji hj">'RESULTS'</strong>);<br/>    bcrypt.compare(req.body.userPassword, datas[<strong class="ji hj">'recordset'</strong>][0][<strong class="ji hj">'userPassword'</strong>], (err, results) =&gt; {<br/>    <strong class="ji hj">if </strong>(err) {<br/>    <strong class="ji hj">return </strong>res.status(500).json({<br/>    error:<br/>    {<br/>    message: err<br/>    }<br/>    });<br/>    } <strong class="ji hj">if </strong>(results) {<br/>    <strong class="ji hj">const </strong>token = jwt.sign({<br/>    email: datas[<strong class="ji hj">'recordset'</strong>][0][<strong class="ji hj">'userEmail'</strong>],<br/>    userId: datas[<strong class="ji hj">'recordset'</strong>][0][<strong class="ji hj">'userId'</strong>],<br/>    },<br/>    process.env.JWT_KEY,<br/>    {<br/>    expiresIn: <strong class="ji hj">'1h'<br/>    </strong>},<br/>    );<br/>    console.log(results);<br/>    <strong class="ji hj">return </strong>res.status(200).json({<br/>    message: <strong class="ji hj">'success'</strong>,<br/>    userdata: datas[<strong class="ji hj">'recordset'</strong>],<br/>    access_token: token,<br/>    });<br/>    }<br/>    <strong class="ji hj">return </strong>res.status(404).json({<br/>    error:<br/>    {<br/>    message: <strong class="ji hj">'Auth Failed'<br/>    </strong>}<br/>    });<br/>    });<br/>    }).<strong class="ji hj">catch</strong>(function (err) {<br/>  <strong class="ji hj">return </strong>res.status(500).json({<br/>  error:<br/>  {<br/>  message: <strong class="ji hj">'No Data Found'<br/>  </strong>}<br/>  });<br/>  });<br/>}</span></pre><p id="4da8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在else部分，我们运行一个查询，从注册用户那里获取所有数据，电子邮件等于在API主体中输入电子邮件。在检查bcrypt.compare之后，它是一个将输入的密码与您的散列进行比较的函数，当query根据用户电子邮件将所有数据返回给我们时，我们可以访问该datas对象，该对象以数组的形式返回一个记录集，在该数组中我们可以访问零个元素并获得用户电子邮件或用户密码，它返回一个函数error和results，如果有错误，则写入500状态代码，否则返回boolean类型的结果， 如果它的结果意味着如果它是真的，那么我们使用JSON web token创建一个令牌，jwt.sign是一个为我们自动创建令牌的函数，在令牌内，我们传递我们的电子邮件和用户Id，然后我们访问我们自己创建的JWT_KEY，然后我们有一个接受多个参数的options对象，我们将使用email树脂:“1h”用于安全目的，然后返回带有200个状态代码的数据，并自定义我们自己的数据。 现在我们也在这之后返回Auth Failed，它将在我们无法比较密码并且没有把它变成上述语句时工作，然后它将触发这个函数。</p><p id="b1b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们转到App.js文件:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="ed31" class="jm jn hi ji b fi jo jp l jq jr"><strong class="ji hj">const </strong>express = require(<strong class="ji hj">'express'</strong>);<br/><strong class="ji hj">const </strong>app = express();<br/><strong class="ji hj">const </strong>morgan = require(<strong class="ji hj">'morgan'</strong>);<br/><strong class="ji hj">const </strong>bodyParser = require(<strong class="ji hj">'body-parser'</strong>);<br/><strong class="ji hj">const </strong>userRoutes = require(<strong class="ji hj">'./api/routes/user'</strong>);<br/><br/><br/><br/>app.use(morgan(<strong class="ji hj">'dev'</strong>));<br/>app.use(bodyParser.urlencoded({ extended: <strong class="ji hj">false </strong>}));<br/>app.use(bodyParser.json());<br/><br/><br/>app.use((req, res, next) =&gt; {<br/>res.header(<strong class="ji hj">'Access-Control-Allow-Origin'</strong>, <strong class="ji hj">'*'</strong>);<br/>res.header(<strong class="ji hj">'Access-Control-Allow-Headers'</strong>,<br/><strong class="ji hj">'Origin, X-Requested-With, Content-Type, Accept, Authorization'<br/></strong>);<br/><strong class="ji hj">if </strong>(req.method === <strong class="ji hj">'OPTIONS'</strong>) {<br/>res.header(<strong class="ji hj">'Access-Control-Allow-Methods'</strong>, <strong class="ji hj">'PUT, POST, DELETE, PATCH, GET'</strong>);<br/><strong class="ji hj">return </strong>res.status(200).json({});<br/>}<br/>next(); <em class="kl">// this will not block the incoming request;<br/><br/></em>});<br/><br/><br/><em class="kl">//setup routes here:<br/></em>app.use(<strong class="ji hj">'/user'</strong>, userRoutes);<br/><br/><br/><em class="kl">//above throw error and whenever an error is throw this method will be triggered<br/><br/></em>app.use((req, res, next) =&gt; {<br/><strong class="ji hj">const </strong>error = <strong class="ji hj">new </strong>Error(<strong class="ji hj">'Not Found'</strong>);<br/>error.status = 404;<br/>next(error);<br/>});<br/><br/><br/>app.use((error, req, res, next) =&gt; {<br/>res.status(error.status || 500).json({<br/>error: {<br/>message: error.message,<br/>}<br/>});<br/>});<br/><br/><br/>module.exports = app;</span></pre><p id="a933" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里我们使用了一些我们安装的包和一些我们自己创建的文件，比如用户路径，morgan用于当我们点击它时安慰我们API的数据。body-parser用于将我们的API编码成JSON格式，我们不能将表单数据传递给这个API。现在我们使用允许所有类型的源访问的头，我们也可以为源设置我们自己的URL。next()；用于不停止API调用。</p><p id="912a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们设置用户路由，因为我们想要运行此路由，即进行注册或签名请求，之后，如果我们没有将其纳入用户路由，那么我们会创建一个在一个函数中没有找到的错误，并触发下一个函数发送该错误。</p><p id="8f69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，我们导出app.js文件以在server.js中使用它。</p><p id="d24c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们已经错过了JWT_KEY，在根文件夹中创建一个名为nodemon.json的文件，并在其中复制粘贴以下代码:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="387a" class="jm jn hi ji b fi jo jp l jq jr">{<br/><strong class="ji hj">"env"</strong>:{<br/><strong class="ji hj">"JWT_KEY"</strong>: <strong class="ji hj">"secret"<br/></strong>}<br/>}</span></pre><p id="1fe1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们启动我们的服务器:</p><p id="5306" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">打开终端并编写npm run serve，它将使用localhost:3000启动您的服务器，出于测试目的，我们将使用postman来发布我们的请求。</p><p id="40f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，首先我们将运行注册请求来创建一个用户:</p><figure class="jd je jf jg fd ki er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es km"><img src="../Images/eabf313d7cac922f941e029c10b778ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TX40gQJSr8Am7iiWZVdp-Q.png"/></div></div></figure><p id="37f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先将content-type的头设置为application.json。</p><figure class="jd je jf jg fd ki er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kr"><img src="../Images/5b69ef599320e06bf97f8d3eb9f96fde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tN0AvA6KLDWDAEj_UM-v1g.png"/></div></div></figure><p id="d7bd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在创建和我定义的一样的主体，然后点击发送按钮，你将得到如下输出:</p><figure class="jd je jf jg fd ki er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ks"><img src="../Images/53a2340f43f0298601d0aead4f563326.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U9_vLIMbwRqvFX0h2k3pNA.png"/></div></div></figure><p id="6fab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您将获得成功消息和用户信息的数据对象。</p><p id="6c66" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，如果再次点击发送按钮，我们将得到相同的数据，我们将得到以下输出:</p><figure class="jd je jf jg fd ki er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kt"><img src="../Images/cb4ad7d817d2a08697ac32d2a5654252.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5h5wAKVjy2tWDO2j9W-jig.png"/></div></div></figure><p id="13bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，如果我们不提供参数，我们将得到未提供的参数。</p><p id="e441" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们运行我们的登录API:</p><figure class="jd je jf jg fd ki er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ku"><img src="../Images/af0a2c15380255eae80745d027c7b64b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TgLemXwd7-RJ9dirdVXMxw.png"/></div></div></figure><p id="82d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们使用相同的电子邮件和密码来获得成功消息和用户数据。</p><p id="f317" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们传递错误的密码或电子邮件，我们将得到认证失败:</p><figure class="jd je jf jg fd ki er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kv"><img src="../Images/75bfc458d70f6640bfedf872535fea42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fSTnvzJ9N5vBfyd-6cd_ZQ.png"/></div></div></figure><p id="2b47" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们不提供任何参数，那么我们将得到未提供的参数。</p><p id="7600" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们创建一个fluter项目，我们将只控制数据，我们不会为这个测试目的制作任何UI，因为我的目标是让你们了解node js API和SQL，并与flutter集成。</p><p id="2874" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建名为login_signup_node的flutter项目:</p><p id="327e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在pubspec.yaml中添加这些依赖项:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="7bfd" class="jm jn hi ji b fi jo jp l jq jr"><strong class="ji hj">http</strong>:<br/><strong class="ji hj">provider</strong>:</span></pre><p id="0eea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">和pub获得依赖关系。</p><figure class="jd je jf jg fd ki er es paragraph-image"><div class="er es kw"><img src="../Images/0f0f637999ed6e171f96627df4512f0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:618/format:webp/1*x9AJWcpKUQw3JMd30IwbOw.png"/></div></figure><p id="89ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你必须有一个这样的项目结构。</p><p id="43b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在屏幕内部，folder创建了一个主页。dart文件并复制粘贴以下代码:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="add1" class="jm jn hi ji b fi jo jp l jq jr"><strong class="ji hj">import 'package:flutter/material.dart'</strong>;<br/><strong class="ji hj">import 'package:loginsignupnode/provider/auth_provider.dart'</strong>;<br/><strong class="ji hj">import 'package:provider/provider.dart'</strong>;<br/><br/><br/><strong class="ji hj">class </strong>HomePage <strong class="ji hj">extends </strong>StatelessWidget {<br/><br/>  String <strong class="ji hj">_email</strong>,<strong class="ji hj">_password</strong>;<br/>  @override<br/>  Widget build(BuildContext context) {<br/>    <strong class="ji hj">return </strong>Scaffold(<br/><br/>      body: Center(<br/>        child: Padding(<br/>          padding: <strong class="ji hj">const </strong>EdgeInsets.all(10.0),<br/>          child: Column(<br/>            mainAxisAlignment: MainAxisAlignment.<strong class="ji hj">center</strong>,<br/>            children: [<br/>              TextField(<br/>                decoration: InputDecoration(<br/>                  labelText: <strong class="ji hj">'Enter Email'</strong>,<br/>                ),<br/>                keyboardType: TextInputType.<em class="kl">emailAddress</em>,<br/>                onChanged: (val){<br/>                  <strong class="ji hj">_email </strong>= val;<br/>                },<br/>              ),<br/>              TextField(<br/>                decoration: InputDecoration(<br/>                  labelText: <strong class="ji hj">'Enter password'</strong>,<br/>                ),<br/>                keyboardType: TextInputType.<em class="kl">text</em>,<br/>                obscureText: <strong class="ji hj">true</strong>,<br/>                onChanged: (val){<br/>                  <strong class="ji hj">_password </strong>= val;<br/>                },<br/>              ),<br/>              RaisedButton(<br/>                color: Colors.<em class="kl">blue</em>.<strong class="ji hj">shade700</strong>,<br/>                child: Text(<strong class="ji hj">'Press Me'</strong>),<br/>                onPressed: (){<br/>                  Provider.<em class="kl">of</em>&lt;AuthProvider&gt;(context,listen: <strong class="ji hj">false</strong>).signupUser(<strong class="ji hj">_email</strong>, <strong class="ji hj">_password</strong>);<br/>                },<br/>              ),<br/>            ],<br/>          ),<br/>        ),<br/>      ),<br/><br/>    );<br/>  }<br/>}</span></pre><p id="3bc4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，在provider文件夹中，创建auth_provider.dart并复制粘贴以下代码:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="32e0" class="jm jn hi ji b fi jo jp l jq jr"><strong class="ji hj">import 'package:flutter/foundation.dart'</strong>;<br/><strong class="ji hj">import 'package:http/http.dart' as </strong>http;<br/><br/><strong class="ji hj">class </strong>AuthProvider <strong class="ji hj">with </strong>ChangeNotifier {<br/>  String <strong class="ji hj">_userId</strong>;<br/>  String <strong class="ji hj">_userEmail</strong>;<br/>  String <strong class="ji hj">_userPassword</strong>;<br/><br/>  String <strong class="ji hj">get getUserId </strong>=&gt; <strong class="ji hj">_userId</strong>;<br/><br/>  String <strong class="ji hj">get getUserName </strong>=&gt; <strong class="ji hj">_userEmail</strong>;<br/><br/>  String <strong class="ji hj">get getUserPassword </strong>=&gt; <strong class="ji hj">_userPassword</strong>;<br/><br/>  Future&lt;<strong class="ji hj">void</strong>&gt; signupUser(String email, String password) <strong class="ji hj">async </strong>{<br/>    <strong class="ji hj">final </strong>response = <strong class="ji hj">await </strong>http.post(<strong class="ji hj">'http://localhost:3000/user/signup'</strong>, headers: {<br/>      <strong class="ji hj">"content-type"</strong>: <strong class="ji hj">"application/x-www-form-urlencoded; charset=UTF-8"</strong>,<br/>    }, body: {<br/>      <strong class="ji hj">'userEmail'</strong>: email,<br/>      <strong class="ji hj">'userPassword'</strong>: password,<br/>    });<br/><br/>    print(response.<strong class="ji hj">body</strong>);<br/>  }<br/><br/>  Future&lt;<strong class="ji hj">void</strong>&gt; signinUser(String email, String password) <strong class="ji hj">async </strong>{<br/>    <strong class="ji hj">final </strong>response =<br/>        <strong class="ji hj">await </strong>http.post(<strong class="ji hj">'http://localhost:3000/user/signin'</strong>, headers: {<br/>      <strong class="ji hj">"content-type"</strong>: <strong class="ji hj">"application/x-www-form-urlencoded; charset=UTF-8"</strong>,<br/>    }, body: {<br/>      <strong class="ji hj">'userEmail'</strong>: email,<br/>      <strong class="ji hj">'userPassword'</strong>: password,<br/>    });<br/><br/>    print(response.<strong class="ji hj">body</strong>);<br/>  }<br/>}</span></pre><p id="2762" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">简单地说，我们使用HTTP包发送请求，我们还将报头设置为URL编码，我们只在控制台中打印response.body。</p><p id="ebd0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们进入正题。dart副本-替换以下代码:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="041d" class="jm jn hi ji b fi jo jp l jq jr"><strong class="ji hj">import 'package:flutter/material.dart'</strong>;<br/><strong class="ji hj">import 'package:provider/provider.dart'</strong>;<br/><strong class="ji hj">import 'screens/homepage.dart'</strong>;<br/><strong class="ji hj">import './provider/auth_provider.dart'</strong>;<br/><strong class="ji hj">void </strong>main() {<br/>  runApp(MyApp());<br/>}<br/><br/><strong class="ji hj">class </strong>MyApp <strong class="ji hj">extends </strong>StatelessWidget {<br/>  <em class="kl">// This widget is the root of your application.<br/>  </em>@override<br/>  Widget build(BuildContext context) {<br/>    <strong class="ji hj">return </strong>ChangeNotifierProvider.value(<br/>    value: AuthProvider(),<br/>      child: MaterialApp(<br/>        title: <strong class="ji hj">'Flutter Demo'</strong>,<br/>        theme: ThemeData(<br/><br/><br/>          visualDensity: VisualDensity.<em class="kl">adaptivePlatformDensity</em>,<br/>        ),<br/>        home: HomePage(),<br/>      ),<br/>    );<br/>  }<br/>}</span></pre><p id="faf9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里我们注册了提供者包，以便在子部件中使用它。</p><p id="79e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，如果我们运行应用程序并点击注册或登录，我们将在调试控制台中获得响应正文。</p><p id="4ce7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这就是今天的全部内容，我希望你可以理解如何将node js与SQL server连接，即创建一个API并在你的flutter应用程序中使用它。</p><p id="2d8c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">留下掌声，并在媒体上跟进更多文章❤.</p><p id="5070" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">谢谢你，❤</p><p id="a22a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Github回购链接:</p><ol class=""><li id="479d" class="jt ju hi ih b ii ij im in iq jv iu jw iy jx jc jy jz ka kb bi translated">SQL查询:<a class="ae kx" href="https://github.com/Mashood97/sql-queries" rel="noopener ugc nofollow" target="_blank">https://github.com/Mashood97/sql-queries</a></li><li id="31d1" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">节点Js API代码:【https://github.com/Mashood97/loginsignupSqlNode T2】</li><li id="da74" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">颤振项目:【https://github.com/Mashood97/login_signup_node T4】</li></ol><p id="a274" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你喜欢这篇文章，请在我的Github上留下一颗星和一个关注。</p><p id="1cc3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我的其他文章:</p><ol class=""><li id="ba19" class="jt ju hi ih b ii ij im in iq jv iu jw iy jx jc jy jz ka kb bi translated"><a class="ae kx" rel="noopener" href="/analytics-vidhya/flutter-and-automated-firebase-push-notification-complete-integration-8377b4fc928b">https://medium . com/analytics-vid hya/flutter-and-automated-firebase-push-notification-complete-integration-8377 B4 fc 928 b？source=your_stories_page - </a></li><li id="5f01" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated"><a class="ae kx" rel="noopener" href="/analytics-vidhya/magic-of-flutter-provider-and-firestore-66f1a86903c3">https://medium . com/analytics-vid hya/magic-of-flutter-provider-and-firestore-66f1a 86903 C3</a></li><li id="3f0c" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated"><a class="ae kx" rel="noopener" href="/analytics-vidhya/refactoring-flutter-widgets-into-sub-widgets-3cf0f1f29645">https://medium . com/analytics-vid hya/refactoring-flutter-widgets-into-su B- widgets-3c f0f 1 f 29645</a></li><li id="e515" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated"><a class="ae kx" rel="noopener" href="/analytics-vidhya/forms-and-its-validation-in-flutter-1c2b3f9c985c">https://medium . com/analytics-vid hya/forms-and-its-validation-in-flutter-1c 2 B3 F9 c 985 c</a></li><li id="9d09" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated"><a class="ae kx" rel="noopener" href="/analytics-vidhya/flutter-phone-authentication-with-firebase-using-provider-package-55ffbce7c361">https://medium . com/analytics-vid hya/flutter-phone-authentic ation-with-fire base-using-provider-package-55 ffbce 7c 361</a></li></ol></div></div>    
</body>
</html>