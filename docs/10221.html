<html>
<head>
<title>Ensemble model : Data Visualization</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">集成模型:数据可视化</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/ensemble-model-data-visualization-2f4cb06859c1?source=collection_archive---------23-----------------------#2020-10-09">https://medium.com/analytics-vidhya/ensemble-model-data-visualization-2f4cb06859c1?source=collection_archive---------23-----------------------#2020-10-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/a2afcfeb28f7f9df3a651c12be4c2ffc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OjnVJAGrA4IelZZb"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">威廉·艾文在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="c764" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是我上一篇文章的第2部分(整体建模——如何在python中执行)。为了更好地理解这篇文章，请查阅我以前的文章。谢谢你😊。</p><div class="jt ju ez fb jv jw"><a rel="noopener follow" target="_blank" href="/analytics-vidhya/ensemble-modelling-in-a-simple-way-386b6cbaf913"><div class="jx ab dw"><div class="jy ab jz cl cj ka"><h2 class="bd hj fi z dy kb ea eb kc ed ef hh bi translated">以简单的方式集合建模。</h2><div class="kd l"><h3 class="bd b fi z dy kb ea eb kc ed ef dx translated">嘿大家好！这是Shivani Parekh。我将向你解释如何使用集合模型来预测更多…</h3></div><div class="ke l"><p class="bd b fp z dy kb ea eb kc ed ef dx translated">medium.com</p></div></div><div class="kf l"><div class="kg l kh ki kj kf kk io jw"/></div></div></a></div><p id="15fc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，让我们从可视化不同模型并比较其准确性的教程开始。这里我们采用了<strong class="ix hj"> KNN、决策树和SVM模型。</strong></p><p id="95ba" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们回忆一下，在以前的文章中，我们使用“accuracys”命名列表来分别存储上述模型的精度。</p><p id="6b21" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们看看它包含了什么。</p><figure class="km kn ko kp fd ij er es paragraph-image"><div class="er es kl"><img src="../Images/5af4adc03b2ed3721fc5881548b251b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*v1P_7G-4PZjdpjuACwIslw.png"/></div></figure><blockquote class="kq kr ks"><p id="1fbb" class="iv iw kt ix b iy iz ja jb jc jd je jf ku jh ji jj kv jl jm jn kw jp jq jr js hb bi translated">注意:我们在这里没有单独使用训练集和测试集，我们使用train_test_split()，这是因为每次我们使用这个split函数时，训练集和测试集都会在一个随机点被拆分。因此准确性将根据训练和测试集值不断变化。</p></blockquote><p id="44c6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在model_names是另一个空的，它将包含模型的名称。这个列表将帮助我们更好地绘图。</p><pre class="km kn ko kp fd kx ky kz la aw lb bi"><span id="8ca2" class="lc ld hi ky b fi le lf l lg lh">model_names=[] <em class="kt">#empty list</em><br/>for name, model in estimators:<br/>    model_names.append(name)</span></pre><figure class="km kn ko kp fd ij er es paragraph-image"><div class="er es li"><img src="../Images/00c15f4a016e2976f5ea3c3a96e7918f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/1*q5Gfbd1TQ_tLcFf4Om4Ibg.png"/></div></figure><h1 id="ef3a" class="lj ld hi bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated"><strong class="ak">标图条标图</strong></h1><pre class="km kn ko kp fd kx ky kz la aw lb bi"><span id="f788" class="lc ld hi ky b fi le lf l lg lh">import matplotlib.pyplot as plt<br/>fig = plt.figure()<br/>ax = fig.add_axes([0,0,1,1])<br/>ax.bar(model_names,accuracies)<br/>plt.yticks(np.arange(0, 1, .10))<br/>plt.show()</span></pre><figure class="km kn ko kp fd ij er es paragraph-image"><div class="er es mg"><img src="../Images/b9afe2546afa4be229145e6d785ea325.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*CCr_InGpHT37BLbrrXtM7g.png"/></div></figure><p id="473b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">line ax.bar()函数创建条形图，这里我们将模型名称指定为X，精度指定为高度。还可以提及各种其他参数，例如宽度、底部、对齐。</p><p id="15d8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们甚至可以通过使用下面的代码将集合模型各自的名称和准确度添加到model_names和accuracy列表来比较集合模型的准确度，并再次运行上面的代码。</p><pre class="km kn ko kp fd kx ky kz la aw lb bi"><span id="6b15" class="lc ld hi ky b fi le lf l lg lh">#adding accuracy of ensemble for comparison</span><span id="bd30" class="lc ld hi ky b fi mh lf l lg lh">if “Ensemble” not in model_names:<br/> model_names.append(“Ensemble”)<br/>if ensem_acc not in accuracys:<br/> accuracys.append(ensem_acc)</span></pre><figure class="km kn ko kp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mi"><img src="../Images/8c443ac7084d69eb3eeecb85fc88be83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/format:webp/1*HsvBS5kRy7s68ULB1ktAIw.png"/></div></div></figure><p id="5e05" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">正如我们可以很容易地看到，系综具有最高的准确性，如果我们更仔细地比较，我们可以看到，SVM模型给出了最低的准确性。</p><p id="f956" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在让我们看看如何绘制一个盒状图。</p><p id="f4c8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这里，我们使用kfold交叉验证来拆分数据并测试模型的准确性。我们将获得每个模型的多重精度。</p><p id="9a7a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这里，我们将数据分成15份，因此它将数据分成15组，并测试模型15次，因此将获得15种不同的精度。最后，我们取这个精度的平均值，知道模型的平均精度是多少。</p><pre class="km kn ko kp fd kx ky kz la aw lb bi"><span id="02bc" class="lc ld hi ky b fi le lf l lg lh">acc=[] #empty list<br/>names1=[]<br/>scoring = ‘accuracy’</span><span id="042d" class="lc ld hi ky b fi mh lf l lg lh">#here creating a list "acc" for storing multiple accuracies of each model.<br/>for name, model in estimators:<br/> kfold=model_selection.KFold(n_splits=15)<br/> res=model_selection.cross_val_score(model,X,target,cv=kfold,scoring=scoring)<br/> acc.append(res)<br/> names1.append(name)<br/> model_accuracy = “%s: %f” % (name,res.mean())<br/> print(model_accuracy)</span></pre><figure class="km kn ko kp fd ij er es paragraph-image"><div class="er es mj"><img src="../Images/7f3709dcbefcaaa3e9cbce96b1fe3713.png" data-original-src="https://miro.medium.com/v2/resize:fit:452/format:webp/1*FZAsMRp6t0q5zGQO2HmBKg.png"/></div></figure><p id="0bd9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了阐明我的观点，让我们看看“acc”列表有什么！</p><figure class="km kn ko kp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mk"><img src="../Images/0b7080123f9a218d376e9edc5c2ebbff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pEij2MnoSb5hAGp9r-VsCQ.png"/></div></div></figure><h1 id="873a" class="lj ld hi bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated"><strong class="ak">标绘框标绘</strong></h1><pre class="km kn ko kp fd kx ky kz la aw lb bi"><span id="2416" class="lc ld hi ky b fi le lf l lg lh">blue_outlier = dict(markerfacecolor=’b’, marker=’D’)<br/>fig = plt.figure()<br/>fig.suptitle(‘Algorithm Comparison’)<br/>ax = fig.add_subplot(111)<br/>plt.boxplot(acc,flierprops=blue_outlier)<br/>ax.set_xticklabels(names1)<br/>plt.show()</span></pre><figure class="km kn ko kp fd ij er es paragraph-image"><div class="er es ml"><img src="../Images/ec8672c1a53b08999e9eadbb07c4756c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*XMn6BK1dP-nOpDIrjBdb6A.png"/></div></figure><p id="1a69" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这些蓝色的点是异常值。延伸方框的线是胡须，水平的橙色线是中线。</p><pre class="km kn ko kp fd kx ky kz la aw lb bi"><span id="dea9" class="lc ld hi ky b fi le lf l lg lh">k_folds = model_selection.KFold(n_splits=15, random_state=12)<br/>ensemb_acc = model_selection.cross_val_score(ensemble, X_train, target_train, cv=k_folds)<br/>print(ensemb_acc.mean())</span></pre><figure class="km kn ko kp fd ij er es paragraph-image"><div class="er es mm"><img src="../Images/767bf6e2a8263549bb71ea4cb20cbc1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1038/format:webp/1*U5UhxnPkeokFT6Li7gJdwQ.png"/></div></figure><pre class="km kn ko kp fd kx ky kz la aw lb bi"><span id="e22d" class="lc ld hi ky b fi le lf l lg lh">if “Ensemble” not in names1:<br/> names1.append(“Ensemble”)</span><span id="74f8" class="lc ld hi ky b fi mh lf l lg lh">from numpy import array, array_equal, allclose<br/> <br/>def arr(myarr, list_arrays):<br/> return next((True for item in list_arrays if item.size == myarr.size and allclose(item, myarr)), False)</span><span id="ffa3" class="lc ld hi ky b fi mh lf l lg lh">print(arr(ensemb_acc, acc))</span><span id="702d" class="lc ld hi ky b fi mh lf l lg lh">if arr(ensemb_acc, acc)==False:<br/> acc.append(ensemb_acc)<br/>acc</span></pre><figure class="km kn ko kp fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/da3472e779b61c30f5af848f29104aef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4EFJLVqAuTXuCN-SfX4qAg.png"/></div></div></figure><p id="3c29" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，通过再次运行上面的代码来绘制箱线图，我们得到</p><figure class="km kn ko kp fd ij er es paragraph-image"><div class="er es mo"><img src="../Images/cbcd31b97cc73ed3aa01eaba4f4e9dec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1082/format:webp/1*9___ePA4TmQzR-sXDGlC6A.png"/></div></figure><p id="469a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您甚至可以使用不同的参数定制您的箱线图，例如patch_artist= True将显示带有颜色的箱线图，notch=True将显示箱线图的凹口格式，vert=0将显示水平箱线图。</p><p id="3fa9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">以下是完整的代码:</p><blockquote class="kq kr ks"><p id="dfed" class="iv iw kt ix b iy iz ja jb jc jd je jf ku jh ji jj kv jl jm jn kw jp jq jr js hb bi translated">上一篇文章中代码的链接:</p><p id="9a2d" class="iv iw kt ix b iy iz ja jb jc jd je jf ku jh ji jj kv jl jm jn kw jp jq jr js hb bi translated"><a class="ae iu" rel="noopener" href="/analytics-vidhya/ensemble-modelling-in-a-simple-way-386b6cbaf913">https://medium . com/analytics-vid hya/ensemble-modeling-in-a-simple-way-386 B6 cbaf 913</a></p></blockquote><figure class="km kn ko kp fd ij"><div class="bz dy l di"><div class="mp mq l"/></div></figure><p id="895f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我希望你喜欢我的文章😃。如果你觉得这很有帮助，那么看到你为我鼓掌来感谢我的努力工作将会非常好👏👏。谢谢你。</p></div></div>    
</body>
</html>