<html>
<head>
<title>Scraping Doraemon’s Future Gadget</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">刮痧哆啦a梦的未来小玩意</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/scraping-doraemon-future-gadget-41a9aa1d61a3?source=collection_archive---------9-----------------------#2020-05-20">https://medium.com/analytics-vidhya/scraping-doraemon-future-gadget-41a9aa1d61a3?source=collection_archive---------9-----------------------#2020-05-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="7449" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">oraemon是22世纪由Sewashi Nobi派出的机器人。西华信派多拉去帮助他笨手笨脚的祖父大雄，因为他的错误选择，他的后代背负了债务。</h2></div><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jf"><img src="../Images/131e86b3770df0e4880b1c76a5677a10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*T-9cC113l9fQE9Xi"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated"><a class="ae jv" href="https://unsplash.com/@sugarman_joe?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">糖人乔</a>在<a class="ae jv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="1b68" class="pw-post-body-paragraph jw jx hi jy b jz ka ij kb kc kd im ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">你知道哆啦a梦有多少小玩意吗？</p><p id="4be2" class="pw-post-body-paragraph jw jx hi jy b jz ka ij kb kc kd im ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">根据一些文章，哆啦a梦的“魔法口袋”里有大约4500个小玩意。</p><p id="b722" class="pw-post-body-paragraph jw jx hi jy b jz ka ij kb kc kd im ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">我对他的小玩意很好奇，就试着去找所有哆啦a梦小玩意的列表。我找不到完整的数据库，但我找到了哆啦a梦粉丝网站，它提供了关于剧集、小工具、角色等信息。</p><p id="42cb" class="pw-post-body-paragraph jw jx hi jy b jz ka ij kb kc kd im ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated"><a class="ae jv" href="https://doraemon.fandom.com/" rel="noopener ugc nofollow" target="_blank">https://doraemon.fandom.com/</a></p><p id="a989" class="pw-post-body-paragraph jw jx hi jy b jz ka ij kb kc kd im ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">在这个网站上，有658个小工具被列出来，并在那里做了很好的描述，总比没有好。</p><p id="eb11" class="pw-post-body-paragraph jw jx hi jy b jz ka ij kb kc kd im ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">关于哆啦a梦的小玩意，我想稍后再做一些“分析”。所以我决定收集网站上所有的小工具数据以备将来使用。</p><p id="0f6c" class="pw-post-body-paragraph jw jx hi jy b jz ka ij kb kc kd im ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">当我做抓取的时候，我总是使用Python3作为编程语言，使用Selenium with Beautifulsoup作为库来帮助我做抓取工作。</p><p id="1713" class="pw-post-body-paragraph jw jx hi jy b jz ka ij kb kc kd im ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">如果我点击小工具的名字，哆啦a梦粉丝网站会给我小工具的列表和细节。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es ks"><img src="../Images/5641512784d333bad096f88a5b346b69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EKowvLTXwIUHeTU3R9PG2Q.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">哆啦a梦迷</figcaption></figure><p id="67dd" class="pw-post-body-paragraph jw jx hi jy b jz ka ij kb kc kd im ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">所以，我在抓取这个网站时采用的步骤如下:</p><ol class=""><li id="192d" class="kt ku hi jy b jz ka kc kd kf kv kj kw kn kx kr ky kz la lb bi translated">以数组形式获取页面上所有小工具的列表。</li><li id="fe3d" class="kt ku hi jy b jz lc kc ld kf le kj lf kn lg kr ky kz la lb bi translated">遍历小工具数组。</li><li id="1d0e" class="kt ku hi jy b jz lc kc ld kf le kj lf kn lg kr ky kz la lb bi translated">在每个循环中，打开一个小工具的细节，并在其中获得所有需要的信息。</li><li id="079e" class="kt ku hi jy b jz lc kc ld kf le kj lf kn lg kr ky kz la lb bi translated">循环完成后，单击下一页并重复第一步。</li><li id="baeb" class="kt ku hi jy b jz lc kc ld kf le kj lf kn lg kr ky kz la lb bi translated">如果所有页面都被刮除，停止刮刀。</li></ol><p id="cee9" class="pw-post-body-paragraph jw jx hi jy b jz ka ij kb kc kd im ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">这是我的刮刀的完整代码</p><figure class="jg jh ji jj fd jk"><div class="bz dy l di"><div class="lh li l"/></div><figcaption class="jr js et er es jt ju bd b be z dx translated">哆啦a梦. py</figcaption></figure><p id="2dba" class="pw-post-body-paragraph jw jx hi jy b jz ka ij kb kc kd im ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">Selenium是为了导航和模拟浏览器，所以我可以获得我想要抓取的所有页面。</p><p id="7b55" class="pw-post-body-paragraph jw jx hi jy b jz ka ij kb kc kd im ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">BeautifulSoup是抓取网页内的元素。</p><p id="83c5" class="pw-post-body-paragraph jw jx hi jy b jz ka ij kb kc kd im ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">数据库类是我用来保存数据库的自定义类。你可以从下面的GitHub链接下载包含这个类的database.py。</p><div class="lj lk ez fb ll lm"><a href="https://github.com/DeaVenditama/doraemon-fandom-scraper" rel="noopener  ugc nofollow" target="_blank"><div class="ln ab dw"><div class="lo ab lp cl cj lq"><h2 class="bd hj fi z dy lr ea eb ls ed ef hh bi translated">复仇女神/哆啦a梦粉丝</h2><div class="lt l"><h3 class="bd b fi z dy lr ea eb ls ed ef dx translated">在GitHub上创建一个帐户，为开发《哆啦a梦》/哆啦a梦迷-刮刀》做出贡献。</h3></div><div class="lu l"><p class="bd b fp z dy lr ea eb ls ed ef dx translated">github.com</p></div></div><div class="lv l"><div class="lw l lx ly lz lv ma jp lm"/></div></div></a></div><p id="4f3c" class="pw-post-body-paragraph jw jx hi jy b jz ka ij kb kc kd im ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">我使用MySQL作为数据库，这是我用来保存数据的表结构，我将其命名为gadget。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div class="er es mb"><img src="../Images/1930eca0496fd622c4cbfee67ff97357.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*GCp5fzw4sUEFYflGcqk15g.png"/></div></figure><p id="3191" class="pw-post-body-paragraph jw jx hi jy b jz ka ij kb kc kd im ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">通过根据您的本地机器更改主机、用户、密码和数据库名称来设置config.py中的配置。</p><pre class="jg jh ji jj fd mc md me mf aw mg bi"><span id="3720" class="mh mi hi md b fi mj mk l ml mm">db = dict(<br/>     host="localhost",<br/>     user="root",<br/>     passwd="",<br/>     database="doraemon"<br/>)</span></pre><p id="15ab" class="pw-post-body-paragraph jw jx hi jy b jz ka ij kb kc kd im ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">要启动铲运机</p><pre class="jg jh ji jj fd mc md me mf aw mg bi"><span id="f290" class="mh mi hi md b fi mj mk l ml mm">python3 doraemon.py</span></pre><p id="140c" class="pw-post-body-paragraph jw jx hi jy b jz ka ij kb kc kd im ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">Selenium将效仿Chrome并开放哆啦a梦粉丝网站。让它打开，刮板将工作，铬浏览器将被关闭后，刮板完成刮所有的小工具。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mn"><img src="../Images/13c9f5bb98e672f251efbe5965ab646e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hKu7MuazaFJ0zH7CrDaxcw.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">小工具列表</figcaption></figure><p id="851c" class="pw-post-body-paragraph jw jx hi jy b jz ka ij kb kc kd im ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">这是下载到我数据库的658个小工具的列表。如果你看到，我得到了所有的细节内容，包括HTML，我这样做是因为在细节页面中没有固定的结构。</p><p id="2b00" class="pw-post-body-paragraph jw jx hi jy b jz ka ij kb kc kd im ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">稍后，我必须在detail列中进行一些文本清理，以分离一个小工具的描述、用法、用户和外观。</p><p id="d01b" class="pw-post-body-paragraph jw jx hi jy b jz ka ij kb kc kd im ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">谢谢你</p></div></div>    
</body>
</html>