<html>
<head>
<title>Converting XML data to CSV format using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python将XML数据转换为CSV格式</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/converting-xml-data-to-csv-format-using-python-3ea09fa18d38?source=collection_archive---------0-----------------------#2019-11-08">https://medium.com/analytics-vidhya/converting-xml-data-to-csv-format-using-python-3ea09fa18d38?source=collection_archive---------0-----------------------#2019-11-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es im"><img src="../Images/d8bf6a4dfc982b9cd883e04991a8f539.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*7KP_1cSMLqVaSZmnwRDA-g.jpeg"/></div></figure><p id="1ed8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我遇到了将XML数据转换成CSV格式的需求。XML数据的来源是MF Sitescope产品创建的档案。sitescope产品是一款无代理监控软件，可远程监控系统、应用程序和数据库的运行状况。在监控过程中，站点范围会产生大量的事件。历史事件定期存档。存档的事件可以以XML格式导出。对于我的数据分析之旅，我想将XML数据转换成CSV格式。这里我使用python脚本来完成。</p><ol class=""><li id="a393" class="js jt hi iw b ix iy jb jc jf ju jj jv jn jw jr jx jy jz ka bi translated">导入必要的python库。</li></ol><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es kb"><img src="../Images/e70d51a684ec0ff029fc702315ad263a.png" data-original-src="https://miro.medium.com/v2/resize:fit:876/format:webp/1*7gQEFjQYL-pKcmrBm9aWzQ.jpeg"/></div></figure><p id="2441" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">2.更改工作目录并读取xml文件。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="er es kc"><img src="../Images/e7bf60a2ffc988bc15ef8e1924beb1b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3AJC3fBEcmpIkoGFdGsG-A.jpeg"/></div></div></figure><p id="056f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">3.创建一个输出csv文件，用于写入从xml文件中提取的内容。</p><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es kh"><img src="../Images/e8baa5d212353872ed53d1957028a2d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*efiTnU7AHmTKYXjN98ES0g.jpeg"/></div></figure><p id="3b66" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">4.创建列名列表，并将其写入csv文件。这是标题行。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="er es ki"><img src="../Images/2e3cd4ff6ab79e465311789d26874a6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0SxncQYRl5RULEkOkAKPWw.jpeg"/></div></div></figure><p id="c94f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">5.现在创建xml树的根对象。xml转储有大量的事件，对于每个事件，我想提取一个重要的属性，如事件标题、描述、状态、解决方案、严重性、事件创建时间等。这是通过下面的代码片段实现的。</p><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="er es kj"><img src="../Images/f59553f956db479f8529d6241bd0ff67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4g1H2wipdYC3QbJL7arkzw.jpeg"/></div></div></figure><p id="2e65" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">该代码检查提取的字段是否为None，并将提取的数据追加到列表中。</p><p id="3d19" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">提取完成后，列表将被写入csv文件，如下所示。同时关闭文件描述符。</p><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es kk"><img src="../Images/63b1a99fdb0ce557b9215c1e5d4d1f37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*FNXir0TowUEDrekg6S9sEQ.jpeg"/></div></figure><p id="dbac" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">6.让我们导入pandas库并读取csv文件。</p><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es kl"><img src="../Images/f097efe968baa158cf17a05b15e2240e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/1*8arlGHRz4GtYi3HHvXC23Q.jpeg"/></div></figure><p id="59bf" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是输出。我们有23，922个警报，每个警报有12个属性。</p><figure class="in io ip iq fd ir er es paragraph-image"><div class="er es km"><img src="../Images/df8da69c1a021254939c85b4f40c879a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*314vPHgfzn5nxDDaXS6IzA.jpeg"/></div></figure><p id="d3f3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我会让你了解分析的下一步。</p></div></div>    
</body>
</html>