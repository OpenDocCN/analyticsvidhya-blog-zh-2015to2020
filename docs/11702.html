<html>
<head>
<title>Object Tracking Using OpenCV</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 OpenCV 进行目标跟踪</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/object-tracking-using-opencv-f28a7e09219d?source=collection_archive---------0-----------------------#2020-12-15">https://medium.com/analytics-vidhya/object-tracking-using-opencv-f28a7e09219d?source=collection_archive---------0-----------------------#2020-12-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="1a49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我已经看了大约 10 年的板球比赛，一直想知道第三裁判是如何跟踪 LBW 三柱门的球的。是的，为了检查 LBW，将使用计算机视觉应用程序跟踪球，并根据角度和其他参数投影轨迹。今天我们将看看如何使用 OpenCV 从视频中跟踪一个球。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/99f20f088354dd215e93fed2dd6a6233.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BVbUzCBUu3FbF-gjDYPtRg.jpeg"/></div></div></figure></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><h1 id="f9ea" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated"><strong class="ak">从所选视频中跟踪球的步骤</strong></h1><p id="3c44" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">第一步:使用 cv2 逐帧读取视频。视频捕获()</p><p id="cd7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第二步:找到你想要跟踪的球的阈值/颜色(我采用了试错法)</p><p id="937b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第三步:在每一帧，寻找指定的颜色范围，使其成为白色，其余全黑(二进制图像转换)</p><p id="fc14" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第四步:找到轮廓，只取面积较大的区域。</p><p id="326a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第五步:因为这是球跟踪，我试图找到圆心，并画了一个圆。</p><p id="302b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">步骤 6:相对于捕捉到的中心画圆。就是这样。看起来不简单吗？</p><pre class="je jf jg jh fd kz la lb lc aw ld bi"><span id="5c09" class="le jx hi la b fi lf lg l lh li">import cv2<br/>import numpy as np<br/>import imutils<br/>import matplotlib.pyplot as plt</span><span id="4488" class="le jx hi la b fi lj lg l lh li">cap = cv2.VideoCapture(‘ball_tracking.mp4’)<br/>redLower = np.array([0,10,170], dtype=’uint8')<br/>redUpper = np.array([50,50,255], dtype=’uint8')<br/>c = 0<br/>frame_width = int(cap.get(3)) <br/>frame_height = int(cap.get(4)) <br/> <br/>size = (frame_width, frame_height)</span><span id="bcd9" class="le jx hi la b fi lj lg l lh li">result = cv2.VideoWriter(‘balltracking.mp4’, <br/> cv2.VideoWriter_fourcc(*’MJPG’), <br/> 10, size) <br/>while True:<br/> grapped,frame=cap.read()<br/> if grapped == True:<br/> <br/> red = cv2.inRange(frame,redLower,redUpper)<br/> red = cv2.GaussianBlur(red,(3,3),0)</span><span id="f005" class="le jx hi la b fi lj lg l lh li">cnts = cv2.findContours(red.copy(),cv2.RETR_EXTERNAL,cv2.CHAIN_APPROX_SIMPLE)<br/> cnts = imutils.grab_contours(cnts)</span><span id="5e00" class="le jx hi la b fi lj lg l lh li">if len(cnts) &gt; 0:<br/> cnt = sorted(cnts,key=cv2.contourArea,reverse=True)[0]<br/> rect = np.int32(cv2.boxPoints(cv2.minAreaRect(cnt)))<br/> cv2.circle(frame, (rect[0][0]+(rect[-1][0] — rect[0][0])//2,rect[1][1]+(rect[-1][-1]-rect[1][1])//2), <br/> 25, (0, 255, 0), -1)<br/> cv2.imshow(“Ball Tracking”, frame)<br/> result.write(frame)<br/> if cv2.waitKey() &amp; 0xFF == ord(“q”):<br/> break<br/> <br/> else:<br/> break</span><span id="abb0" class="le jx hi la b fi lj lg l lh li"># cleanup the camera and close any open windows<br/>cap.release()<br/>cv2.destroyAllWindows()</span></pre><div class="je jf jg jh fd ab cb"><figure class="lk ji ll lm ln lo lp paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/1ad8d726d0b464955a564903fee4515d.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*uQ9VePoumpjfp891sD5lNg.png"/></div></figure><figure class="lk ji ll lm ln lo lp paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/d801e762d3ffbbbd401041ebe4959dcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0-1dqPaeInQyo-xwu0ZImg.png"/></div></figure><figure class="lk ji ll lm ln lo lp paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/156dc42849029f2aa7ebc5b4e72e2e6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*lkifWwGMVzUFNicPHzq-Tw.png"/></div><figcaption class="lq lr et er es ls lt bd b be z dx lu di lv lw translated">跟踪前</figcaption></figure></div><div class="ab cb"><figure class="lk ji ll lm ln lo lp paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/db398c56bd68238003e28af3fab54550.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Gk0oocbbteCctYtz7VdeZQ.png"/></div></figure><figure class="lk ji ll lm ln lo lp paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/f0e370c36e749e25eea4ae15f2283b0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*8q91WPQQRVREZLsHJ8r0_g.png"/></div></figure><figure class="lk ji ll lm ln lo lp paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/9bc3a327a42393f92f17bd6112a506f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*TMSezETMAo5Er_F-i5FUYA.png"/></div><figcaption class="lq lr et er es ls lt bd b be z dx lu di lv lw translated">跟踪后</figcaption></figure></div><h1 id="1301" class="jw jx hi bd jy jz lx kb kc kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt bi translated"><strong class="ak">挑战</strong></h1><p id="7a71" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">当我们在背景图像中有相同的颜色，模糊的图像，嘈杂的背景等时，真正的挑战就来了。这可以使用特定于数据集的预处理技术或深度学习方法来解决。</p><p id="6b94" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一定要试着自己去了解更多，让自己兴奋起来！！！</p><p id="d2ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里是代码和结果视频的 Github 链接。https://github.com/RamjiB/Ball-Tracking</p></div></div>    
</body>
</html>