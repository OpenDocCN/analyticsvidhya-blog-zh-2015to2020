# 学习 Python 进行数据可视化

> 原文：<https://medium.com/analytics-vidhya/learning-python-for-data-visualization-5c2969f16f21?source=collection_archive---------12----------------------->

在我的第一个数据可视化项目中，我深入研究了 Zillow 提供的房价数据集。这个特殊的数据集具有按邮政编码排列的三居室房屋的平均值。

![](img/1d6d336180883a33669655cd97ccda98.png)

正如你所看到的，这些列还包括从 1996 年到 2019 年每个月的平均月房价。

我对这个项目的目标是:

1.  创建一个可视化的图表，标出美国每个家庭每月的平均花费。
2.  找出美国在 2007/2008 年房市崩盘中受打击最严重的城市。
3.  创建一个包含数据集中每个邮政编码的 choropleth 地图。

清理数据时，我采取的第一步是删除除邮政编码和每月价格之外的所有功能。

![](img/f1d5e8a627026c4ae2f8b63be7a8d42b.png)

然后，我转置了数据框，并将索引设置为“日期”。这允许我隔离每个邮政编码，以便在列级别上执行进一步的操作。

![](img/854bd253474357ab19186a397a25bbf1.png)

创建一个“百分比变化”栏可以让我看到每个区域的每日波动。我还绘制了这个数据，以便更好地理解这个数据集中的差异。

![](img/42b9f10fcc2cb57aeb8ec8066709ff29.png)![](img/6e319ed3555d7492f21085ba76a27722.png)

现在，这是事情变得有点棘手的部分。我的目标是获得从记录数据的第一天开始，房产价值增加的百分比。这意味着在 1996 年 3 月，所有财产价值将被设置为 0%,并每月增加/减少。

![](img/4876af2a6b35b353260e1c21d07ea055.png)

在 for 循环中调用的这个简单函数接受数据集的整个列，保存列中的第一个值，然后计算每个值相对于第一个值的变化百分比。for 循环对我们的数据框中的每一列执行此操作，然后将结果保存为新数据框中的一个新列，称为“data”。

收集完这些数据后，我提取了每个时间段的平均值，并绘制了图表。

![](img/3fee830b3e42277b5b79aeb48a187915.png)

根据这组数据，房地产市场在 2006 年开始下跌，并在 2012 年初趋于平稳。根据这张图表，我想找出美国在房地产危机中受打击最严重的地区。

![](img/5cac7c6e7ae2ee334281df0a9b3f27f7.png)

“subst”是一个包含两列的数据框(2006–11 和 2012–02)。隔离这两列后，我用 2012 年减去 2006 年，创建了一个新列。这个名为“drop”的新列让我可以看到在这段时间内每个邮政编码下降的百分比。我只需按“下降”列对数据框进行排序，就可以查看下降百分比最高的区域。对这个数据框进行排序后，我发现了以下内容:

![](img/aa1122992f5f7ccff13772d86c445696.png)![](img/1c9e54574ef6e8b988d07935f59f912b.png)![](img/be9a79aadf53cf549ac8cdb9d970b70d.png)

佛罗里达州的邮政编码出现在房市危机中受打击最严重的前 50 个地区。自 2012 年以来，佛罗里达州的许多地区尚未恢复。

这个项目的最后一部分是最耗时的。创建一个一段时间内每个邮政编码的动画分布图比我想象的要困难得多。我最终使用了一个名为 Geopandas 的库，我在网上找到了一个. shp 文件，上面有美国每个邮政编码的多边形坐标和形状。

![](img/8e316958fb935961e84ee65815a6b27c.png)

我清理了这些数据，然后将其与我之前的数据集合并。一旦数据被清理和组织，我开始绘图。

![](img/a3c24ba897855e0badf0008df1137937.png)

这里有几点需要注意。默认情况下，绘制 geopandas 地图时，每个国家都有一个空白区域。我必须控制 X 和 Y 轴，以便将美国大陆与世界其他地区隔离开来。另外，你可能会注意到地图上有很多空白。这是因为我正在处理的数据集并不包含美国的所有邮政编码。以后想找一个完整的数据集，看一看剧情。

试图给这张地图添加动画不是一件容易的事情。Geopandas 不提供任何动画功能，所以我找到了一个替代解决方案。这个过程有点笨拙，但它的工作。

我首先创建了一个 for 循环，它将为每个时间段创建一个图，然后将该图作为图像保存在一个文件夹中。

![](img/2bc9605022a340d52a6032c22649e10b.png)

运行这段代码需要一段时间，因为它必须绘制 14，000 个坐标 283 次。

然后，我使用 OpenCV2 编写了一个 python 脚本来收集文件夹中的所有图像，然后将其转换为 MP4 文件。

![](img/a495bbd3cd3a5fc85f02e66788113387.png)

最终产品看起来像这样:

横条上的数字代表房屋价值增加的百分比，最大值为 200%。

该项目的目的不是发现任何关于住房市场的新的革命性见解。我的主要目标是证明，仅仅学习 Python 一个月，仍然可以完成很多事情。如果您对这个数据集有任何疑问，或者想要学习 python 时的最佳实践的提示，请随时联系我！