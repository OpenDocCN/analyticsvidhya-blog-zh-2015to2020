<html>
<head>
<title>Simple Web Scraping with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python实现简单的Web抓取</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/simplistic-web-scraping-with-python-9421735e71fa?source=collection_archive---------14-----------------------#2019-10-05">https://medium.com/analytics-vidhya/simplistic-web-scraping-with-python-9421735e71fa?source=collection_archive---------14-----------------------#2019-10-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/38e3f4d451fc353b3e150d2fb5289822.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D1WGfYiHgTxvEWxiafsPEw.png"/></div></div></figure><p id="bd03" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Web抓取(又名文本挖掘、数据提取、Web采集、Web数据提取等。)是一种用于从网站提取数据的方法，这些数据可以进一步处理或存储到特定位置。例如本地硬盘或云存储设备中。</p><h2 id="b9dd" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">但是我们为什么要做这样的事情呢？</h2><p id="bfe6" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">假设您有兴趣对新闻文章进行情感分析，以识别和提取观点。或者，您可能希望提取图像来训练您的机器学习模型识别某些图像集。</p><p id="90bd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">虽然这些活动可以通过反复手动复制和粘贴来轻松收集...让一个程序或一个脚本为你做这件事不是很好吗？</p><h2 id="95fc" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated"><strong class="ak">这在Python中是如何实现的？</strong></h2><p id="86fb" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">让我们使用来自TechCrunch 的<a class="ae ko" href="https://techcrunch.com/2019/09/22/iphone-11-pro-teardown-reveals-smaller-logic-board-larger-battery/" rel="noopener ugc nofollow" target="_blank">这篇文章来达到这个目的。这个想法是简单地解析网站，从文章中提取标题、内容甚至图像。</a></p><figure class="kq kr ks kt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kp"><img src="../Images/c0180cafda65d05b607fcfe89988b225.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*9XlM1kKJPaBKXko660LYzg.gif"/></div></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">TechCrunch文章</figcaption></figure><p id="da55" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在你的浏览器中(我用的是firefox)，右键点击网站来检查元素。从那里，您将能够将鼠标悬停在上面，并查看哪些标签对应于文章的哪些部分。</p><p id="10d3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，我们可以使用<strong class="is hj"> <em class="ky">请求</em> </strong>将文章加载到Python中，并利用<strong class="is hj"> <em class="ky"> bs4 </em> </strong>解析相关内容。</p><blockquote class="kz la lb"><p id="8069" class="iq ir ky is b it iu iv iw ix iy iz ja lc jc jd je ld jg jh ji le jk jl jm jn hb bi translated">如果您还没有安装库，可以使用下面的pip安装<em class="hi">方法</em>来完成。</p></blockquote><pre class="kq kr ks kt fd lf lg lh li aw lj bi"><span id="0934" class="jo jp hi lg b fi lk ll l lm ln">pip install bs4<br/>pip install requests</span></pre><p id="93ca" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，我们可以看看如何检索数据:</p><pre class="kq kr ks kt fd lf lg lh li aw lj bi"><span id="9d39" class="jo jp hi lg b fi lk ll l lm ln">import requests<br/>import bs4</span><span id="b082" class="jo jp hi lg b fi lo ll l lm ln">r = requests.get(r'<a class="ae ko" href="https://techcrunch.com/2019/09/22/iphone-11-pro-teardown-reveals-smaller-logic-board-larger-battery/" rel="noopener ugc nofollow" target="_blank">https://techcrunch.com/2019/09/22/iphone-11-pro-teardown-reveals-smaller-logic-board-larger-battery/</a>').text</span><span id="146e" class="jo jp hi lg b fi lo ll l lm ln">print(r)</span></pre><p id="5913" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将为您提供一堆格式不良的html标签，您感兴趣的元素位于其中的某个地方。(当然，除非内容是由<em class="ky"> JavaScript </em>动态生成的，或者包装在<em class="ky"> iFrame </em>中)</p><p id="ece6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，我们可以使用<strong class="is hj"> <em class="ky"> bs4 </em> </strong>来定位和提取那些元素。</p><pre class="kq kr ks kt fd lf lg lh li aw lj bi"><span id="735e" class="jo jp hi lg b fi lk ll l lm ln">...</span><span id="564c" class="jo jp hi lg b fi lo ll l lm ln"># Parsing of html elements into a bs4 object<br/>page_source = bs4.BeautifulSoup(r, features='lxml')</span><span id="ba13" class="jo jp hi lg b fi lo ll l lm ln"># Zooming in only on the article itself <br/>page_data = page_source.find('article', attrs={'class': 'article-container article--post'})</span><span id="bd56" class="jo jp hi lg b fi lo ll l lm ln"># Extracting the interested elements <br/>article_title = page_data.find('header').find('h1', attrs={'class': 'article__title'}).text<br/>article_images = page_data.findAll('img')<br/>article_content = page_data.find('div', attrs={'class': 'article-content'}).text</span></pre><p id="f4e2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦你将<em class="ky"> html </em>解析为一个<strong class="is hj"> <em class="ky"> bs4 </em> </strong>对象，它主要只是找出你想要<em class="ky">找到</em>并提取哪些元素标签的问题。</p><p id="3db2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">就是这样！</p><h2 id="a1a4" class="jo jp hi bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki bi translated">有什么问题吗？</h2><p id="0488" class="pw-post-body-paragraph iq ir hi is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hb bi translated">这种方法的一些局限性可以在下面找到。这并不详尽，但它提供了入门的基本理解。</p><ol class=""><li id="f946" class="lp lq hi is b it iu ix iy jb lr jf ls jj lt jn lu lv lw lx bi translated">没有“一刀切”的解决方案。每个网站的布局是不同的，所以需要为每个目标网站开发一个自定义的刮刀。</li><li id="0ce5" class="lp lq hi is b it ly ix lz jb ma jf mb jj mc jn lu lv lw lx bi translated">一些网站有很强的政策反对网络抓取，如果你被抓到，甚至会禁止你的IP地址。一个好的做法是总是检查目标网站是否有任何政策反对网络抓取。</li><li id="a5ed" class="lp lq hi is b it ly ix lz jb ma jf mb jj mc jn lu lv lw lx bi translated">大多数现代网站利用iFrames或T2来发布动态内容。如果您要寻找的数据来自这样的来源，就需要一种不同的方法(例如，使用Selenium)。</li></ol></div></div>    
</body>
</html>