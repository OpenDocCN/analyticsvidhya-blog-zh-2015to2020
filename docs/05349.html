<html>
<head>
<title>Recommendation System</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">推荐系统</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/recommendation-system-3c8ea846ae0f?source=collection_archive---------21-----------------------#2020-04-18">https://medium.com/analytics-vidhya/recommendation-system-3c8ea846ae0f?source=collection_archive---------21-----------------------#2020-04-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="d24f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">编码部分</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/cffe517883bbf5fa696586bc59198f4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VYouIRMSSA95-uoPL8rPKg.png"/></div></div></figure><p id="c169" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，我们将学习如何为我们的推荐系统实现Apriori算法</p><p id="0c83" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上一篇文章中，我们学习并理解了推荐系统的类型以及apriori是如何工作的。</p><p id="ac2b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里-&gt;<a class="ae jp" rel="noopener" href="/analytics-vidhya/recommendation-system-a4ebaa47cf0b">https://medium . com/analytics-vid hya/re commendation-system-a4eba 47 cf 0b</a></p></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h1 id="edcf" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">实施</h1><p id="8485" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">我们必须通过3个主要步骤来让我们的系统走上正轨。</p><p id="b63e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">看，当你只实现apriori算法和在你的实际项目中实现它是有区别的。在这里，我们将学习如何在项目中实际实现推荐系统</p><p id="244a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在这里用Django创建了一个简单的API。</p><p id="4cde" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们先了解一下示例项目在做什么。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es la"><img src="../Images/28583ee8e6eaaeacf0bc4a0bc6fb2dcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-E9t32ih5rfg8ptwMp5ULg.png"/></div></div></figure><ol class=""><li id="de3d" class="lb lc hi ih b ii ij im in iq ld iu le iy lf jc lg lh li lj bi translated">一个用户用条形码搜索一个产品，它的请求将被发送到后端API</li><li id="442e" class="lb lc hi ih b ii lk im ll iq lm iu ln iy lo jc lg lh li lj bi translated">在后端，我们将首先从数据库中搜索项目的详细信息，并将其存储在我们的'<strong class="ih hj">结果</strong>JSON中</li><li id="dc22" class="lb lc hi ih b ii lk im ll iq lm iu ln iy lo jc lg lh li lj bi translated">然后，我们将搜索为搜索产品推荐的商品(我们将搜索与搜索商品一起购买的可能性最高的商品)</li><li id="171c" class="lb lc hi ih b ii lk im ll iq lm iu ln iy lo jc lg lh li lj bi translated">然后，我们会将推荐项目的详细信息添加到我们的“<strong class="ih hj">结果</strong>”JSON中</li><li id="ee34" class="lb lc hi ih b ii lk im ll iq lm iu ln iy lo jc lg lh li lj bi translated">并将'<strong class="ih hj">结果</strong> ' JSON返回给用户</li></ol><p id="4d63" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以让我来为你分解关键步骤</p><blockquote class="lp"><p id="c773" class="lq lr hi bd ls lt lu lv lw lx ly jc dx translated">1)准备数据</p><p id="a2fd" class="lq lr hi bd ls lt lu lv lw lx ly jc dx translated">2)列车数据</p><p id="7c0f" class="lq lr hi bd ls lt lu lv lw lx ly jc dx translated">3)保存训练数据</p></blockquote><figure class="ma mb mc md me ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lz"><img src="../Images/d34a0eee1f88bde2a5cb2b49a064bafc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zOsdXuQf7ynSo3rPGUFTvQ.png"/></div></div></figure></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h1 id="9702" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">密码</h1><h2 id="5c3e" class="mf jy hi bd jz mg mh mi kd mj mk ml kh iq mm mn kl iu mo mp kp iy mq mr kt ms bi translated">1)准备数据</h2><p id="d097" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">让我们首先看看完整订单的JSON对象实际上是什么样子的</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mt"><img src="../Images/a979085888661b78a0d0b4891392db5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*um3MUqbPB9qsbTWyYxCOTA.png"/></div></div></figure><p id="1b4c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ps，不要太关注结构，你可以根据你的要求创建任何结构。</p><p id="8c46" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将条形码视为产品的主键。</p><p id="df7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们想要的是，只有在同一订单的产品的条形码，并保存在同一行的CSV文件，同样为下一个订单在新的一行CSV购买的所有项目的条形码</p><blockquote class="mu mv mw"><p id="fe01" class="if ig mx ih b ii ij ik il im in io ip my ir is it mz iv iw ix na iz ja jb jc hb bi translated">1)相同顺序的项目，用逗号将它们存储在同一行中</p><p id="1877" class="if ig mx ih b ii ij ik il im in io ip my ir is it mz iv iw ix na iz ja jb jc hb bi translated">2)为每个订单创建一个新行</p></blockquote><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es nb"><img src="../Images/a0540e180f31f0a115fe53e071dcc715.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/1*FRjUMcixVVc12sFMaGfoSQ.png"/></div></figure><p id="45a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">看到那些多余的空逗号，其实它们很重要，那就是我们稀疏的数据。我们在上一篇文章中了解了不同技术所需的数据集的差异。</p><p id="2cea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们将准备好的数据CSV文件保存为<strong class="ih hj">orders _ data _ for _ training . CSV</strong></p><p id="9642" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，这个文件是我们实际的数据集，将用于培训</p><pre class="je jf jg jh fd nc nd ne nf aw ng bi"><span id="3c64" class="mf jy hi nd b fi nh ni l nj nk">import csv<br/>import os<br/>def <strong class="nd hj">prepare_data</strong>():<br/>#   <em class="mx">this will remove the old file every time we prepare the data</em><br/>    os.remove("res/orders_data_for_training.csv")</span><span id="d4d4" class="mf jy hi nd b fi nl ni l nj nk">#   <em class="mx">first connect with mongoDB and select the DB and collection</em><br/>    client = MongoClient("mongodb://localhost:27017/")<br/>    mydatabase = client["minor2"]<br/>    mycollection = mydatabase["completed_orders"]</span><span id="f19f" class="mf jy hi nd b fi nl ni l nj nk">    cursor = mycollection.find()<br/>    </span><span id="739f" class="mf jy hi nd b fi nl ni l nj nk">    for order in cursor:<br/>        print(order)<br/>        barcodes = []<br/>        count = 20<br/>        for item in order["items"]:<br/>            barcodes.append(item['barcode'])<br/>            count -= 1<br/>        for i in range(0, count + 1):<br/>            barcodes.append("")<br/>        with open('res/orders_data_for_training.csv', 'a', newline='\n') as file:<br/>            writer = csv.writer(file)<br/>            writer.writerow(barcodes)<br/></span></pre><h2 id="7d0c" class="mf jy hi bd jz mg mh mi kd mj mk ml kh iq mm mn kl iu mo mp kp iy mq mr kt ms bi translated"><strong class="ak"> 2)列车</strong></h2><p id="061f" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">在这里，我们没有训练任何来自Keras或TensorFlow或PyTorch等库的机器学习模块。</p><p id="f1ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">相反，我们使用一种统计算法来给出我们想要的关系形式，从中我们可以进行预测。</p><p id="6c9a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Apriori算法-&gt;创建相互关联的项目的查询集</p><p id="379e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它的代码有点复杂，但超级容易理解。</p><h1 id="d221" class="jx jy hi bd jz ka nm kc kd ke nn kg kh ki no kk kl km np ko kp kq nq ks kt ku bi translated">列车数据代码</h1><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="nr ns l"/></div></figure><p id="18a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> # </strong> Apriori算法函数- &gt;这将为我们提供一个查询集，这当然很有用，它将是您做出的最终预测，</p><p id="1904" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> # </strong>找到你想要预测的一对，(a，b) - &gt;意思是如果有人买a，他也会买b，反之亦然</p><p id="6ee9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> # </strong>但是在查询集中还有很多其他信息，这些信息并不是真正需要的。</p><p id="350d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> # </strong>我们接下来的任务就是如何将这些数据以简单的(a，b)关系的形式提取出来并保存。</p><p id="d96c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> # </strong>为什么要保存它——这样我们就不用在每次一个人搜索一个商品的时候都要计算这些关系了。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es nt"><img src="../Images/03d6335f0c3292cbc00d655acf968ac1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*ZWE3rSG6rYf_3g8gpUXwhQ.gif"/></div></figure><p id="e7ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1，2，3是不同的项目</p><p id="9ce9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">逻辑</strong> - &gt;如果‘a’与‘b’相关，那么‘b’也与‘a’相关<br/> <strong class="ih hj"> # </strong>当然，这很简单，我们也知道，但我们也必须将这一点告诉计算机。索引a上的<br/><strong class="ih hj">#</strong>-&gt;b存在，并不意味着索引b - &gt; a <br/> <strong class="ih hj"> # </strong>因此我们只是执行了一些简单的逻辑来创建它。</p><p id="7924" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">保存此培训数据:</p><pre class="je jf jg jh fd nc nd ne nf aw ng bi"><span id="f887" class="mf jy hi nd b fi nh ni l nj nk">def set_default(obj):<br/>    if isinstance(obj, set):<br/>        return list(obj)<br/>    raise TypeError</span><span id="c2ad" class="mf jy hi nd b fi nl ni l nj nk">def saveTrained(trained):<br/>with open('res/trained_data.json', 'w') as outfile:<br/>        json.dump(trained, outfile,default=set_default)<br/>    </span></pre><p id="815e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您不需要显式调用这些函数，因为它们已经在<strong class="ih hj"> train_data() </strong>中被调用了</p><h1 id="52ea" class="jx jy hi bd jz ka nm kc kd ke nn kg kh ki no kk kl km np ko kp kq nq ks kt ku bi translated">3)预测</h1><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es la"><img src="../Images/28583ee8e6eaaeacf0bc4a0bc6fb2dcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-E9t32ih5rfg8ptwMp5ULg.png"/></div></div></figure><p id="05b7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请记住，我们将产品的“条形码”作为主要id/密钥</p><p id="31c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以我们将只搜索它，</p><p id="d0fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">-&gt;每当用户搜索条形码为“123456789”的商品“a”时</p><p id="d94f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">-&gt;我们必须查看我们保存的训练数据，用户可以用“a”购买哪些相关商品</p><p id="e44b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">根据我们保存的训练数据，我们将有与项目“a”相关的建议/推荐，但它们将只是条形码。</p><p id="c68f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="mx">建议转化为真实数据</em> </strong></p><p id="d241" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的下一个任务是获取我们在预测中得到的所有条形码的所有细节，并将其返回给用户。</p><p id="ab07" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">简单的代码</p><p id="8d6c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">预测代码</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="nr ns l"/></div></figure></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><p id="72da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就这样，你的推荐系统现在完成了。</p><p id="af43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Github repo中可以看到这个API集成在flutter app中的完整代码。</p><div class="nu nv ez fb nw nx"><a href="https://github.com/borsezf2/HandM" rel="noopener  ugc nofollow" target="_blank"><div class="ny ab dw"><div class="nz ab oa cl cj ob"><h2 class="bd hj fi z dy oc ea eb od ed ef hh bi translated">borsezf2/HandM</h2><div class="oe l"><h3 class="bd b fi z dy oc ea eb od ed ef dx translated">新的商店应用程序。https://github.com/borsezf2/HandM/blob/master/report%20.pdf这个项目的目标是把…</h3></div><div class="of l"><p class="bd b fp z dy oc ea eb od ed ef dx translated">github.com</p></div></div><div class="og l"><div class="oh l oi oj ok og ol jn nx"/></div></div></a></div><p id="2ab4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢阅读，欢迎任何疑问。</p></div></div>    
</body>
</html>