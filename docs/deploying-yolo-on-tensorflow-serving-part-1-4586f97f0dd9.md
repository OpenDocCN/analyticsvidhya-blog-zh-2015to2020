# åœ¨ Tensorflow æœåŠ¡å™¨ä¸Šéƒ¨ç½² Yolo:ç¬¬ 1 éƒ¨åˆ†

> åŸæ–‡ï¼š<https://medium.com/analytics-vidhya/deploying-yolo-on-tensorflow-serving-part-1-4586f97f0dd9?source=collection_archive---------11----------------------->

![](img/37b02794d2a2d7276cf5527ed85ba761.png)

**æˆ‘æ˜¯å¦‚ä½•å¼€å§‹ Tensorflow æœåŠ¡çš„ã€‚**

æˆ‘æ˜¯ä¸€å[æœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆ](https://www.linkedin.com/in/gaurav-gola96/)ï¼Œæˆ‘ä¸€ç›´åœ¨å¼€å‘ä¸€ç³»åˆ—æœºå™¨å­¦ä¹ äº§å“ï¼Œå¦‚[**Android**](https://play.google.com/store/apps/details?id=com.fynd.ficto&hl=en)**å’Œ web ä¸Šçš„ [**è™šæ‹ŸåŒ–å¦†**](http://glamar.io) **ï¼Œ** [**å›¾åƒå±æ€§åˆ†ç±»**](http://witi.fynd.com) **ï¼Œæœºå™¨ç¿»è¯‘ï¼Œç§»åŠ¨è®¾å¤‡çš„å®æ—¶ DL æ¨¡å‹ä¼˜åŒ–ï¼Œä»¥åŠä¸ Kubernetes çš„éƒ¨ç½²ç®¡é“è®¾ç½®ç­‰**ã€‚åˆ›å»ºè¿™äº›æ¨¡å‹åªæ˜¯æˆ‘çš„é—®é¢˜çš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘çš„ä¸‹ä¸€ä¸ªæŒ‘æˆ˜æ˜¯åœ¨ç”Ÿäº§ä¸­æœåŠ¡è¿™äº›æ¨¡å‹ã€‚æ¨¡å‹æœåŠ¡ç³»ç»Ÿåº”è¯¥èƒ½å¤Ÿæ‰¿å—å¤§æµé‡ã€‚**

ä»»ä½•ç³»ç»Ÿçš„å…³é”®è¦æ±‚:

*   æ°´å¹³å¯æ‰©å±•æ€§
*   ä¸ TensorFlow æ–°ç‰ˆæœ¬å…¼å®¹
*   é¢„æµ‹æ—¶çš„ä½å»¶è¿Ÿ

**å°æ¦‚è¿°:Tensorflow å‘çƒ**

Tensorflow Serving æ˜¯ç”¨ C++å†™çš„ï¼Œæ”¯æŒæœºå™¨å­¦ä¹ æ¨¡å‹çš„æœåŠ¡ã€‚ç°æˆçš„ Tensorflow æœåŠ¡å®‰è£…æ”¯æŒ:

*   å¼ é‡æµæ¨¡å‹çš„æœåŠ¡
*   ä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿæ‰«æå’ŒåŠ è½½å¼ é‡æµæ¨¡å‹

TensorFlow æœåŠ¡å°†æ¯ä¸ªæ¨¡å‹è§†ä¸ºå¯æœåŠ¡çš„å¯¹è±¡ã€‚å®ƒå®šæœŸæ‰«ææœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œæ ¹æ®æ–‡ä»¶ç³»ç»Ÿçš„çŠ¶æ€å’Œæ¨¡å‹ç‰ˆæœ¬åŒ–ç­–ç•¥åŠ è½½å’Œå¸è½½æ¨¡å‹ã€‚è¿™å…è®¸åœ¨ Tensorflow æœåŠ¡ç»§ç»­è¿è¡Œçš„åŒæ—¶ï¼Œé€šè¿‡å°†å¯¼å‡ºçš„æ¨¡å‹å¤åˆ¶åˆ°æŒ‡å®šçš„æ–‡ä»¶è·¯å¾„æ¥è½»æ¾çƒ­éƒ¨ç½²å·²è®­ç»ƒçš„æ¨¡å‹ã€‚

**ä¸ºä»€ä¹ˆ YOLOv2**

ä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„åŸå› æ˜¯æˆ‘ä¸€ç›´åœ¨ç ”ç©¶å®ƒğŸ˜…ã€‚å¯¹äº Yolov2ï¼Œä¹Ÿæ²¡æœ‰é€‚å½“çš„æ•™ç¨‹ä»‹ç»å¦‚ä½•å¯¼å‡º TF æœåŠ¡çš„æ¨¡å‹ä»¥åŠ TF æœåŠ¡è¾“å‡ºç»“æœçš„åå¤„ç†ï¼Œå¦‚æœä½ ä¸ç†Ÿæ‚‰ yolov2 ç®—æ³•ï¼Œè¿™æœ‰ä¸€ç‚¹å°æŠ€å·§ã€‚æˆ‘åœ¨ä¸€å¹´å‰çš„ [**éƒ¨ç½²äº†è¿™ä¸ªæ¨¡å‹**ï¼Œ](https://github.com/thtrieu/darkflow/issues/824)éƒ¨ç½²åŒ…æ‹¬å¯¼å‡ºæ¨¡å‹ç”¨äº TF æœåŠ¡ï¼Œå¹¶å†™ä¸‹**åå¤„ç†è„šæœ¬**ï¼Œè¿™æ˜¯æ›´æ£˜æ‰‹çš„éƒ¨åˆ†ã€‚

**æœ¬åœ°æœºå™¨è®¾ç½®**

åœ¨ç ”ç©¶æœºå™¨å­¦ä¹ çš„è®¸å¤šç”¨ä¾‹æ—¶ï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘å¿…é¡»è®­ç»ƒä¸€ä¸ª[****yolov 2****](https://github.com/thtrieu/darkflow)**å¹¶å°†å…¶éƒ¨ç½²åˆ° TensorFlow æœåŠ¡ä¸Šã€‚åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘å°†è®²è¿°å¦‚ä½•åœ¨ Tensorflow æœåŠ¡å™¨ä¸Šéƒ¨ç½² Yolov2ã€‚**

**è¦åœ¨æœ¬åœ°æœºå™¨ä¸Šè®¾ç½® TensorFlow æœåŠ¡ï¼Œåªéœ€æŒ‰ç…§ TensorFlow [**å®‰è£…**](https://www.tensorflow.org/tfx/serving/setup) è®¾ç½®å³å¯ï¼Œéå¸¸ç®€å•ã€‚ä¸ºäº†è®­ç»ƒä½ è‡ªå·±çš„ yolov2ï¼Œä½ å¯ä»¥è·Ÿéš [Github repo](https://github.com/thtrieu/darkflow/blob/master/README.md) ã€‚**

****ä¿å­˜æ‚¨çš„æ¨¡å‹****

**è¦å°†æˆ‘ä»¬è®­ç»ƒçš„æ¨¡å‹åŠ è½½åˆ° TensorFlow æœåŠ¡ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å°†å…¶ä¿å­˜ä¸º [SavedModel](https://www.tensorflow.org/versions/r1.15/api_docs/python/tf/saved_model) æ ¼å¼ã€‚è¿™å°†åœ¨ä¸€ä¸ªå®šä¹‰æ˜ç¡®çš„ç›®å½•å±‚æ¬¡ç»“æ„ä¸­åˆ›å»ºä¸€ä¸ª protobuf æ–‡ä»¶ï¼Œå¹¶å°†åŒ…å«ä¸€ä¸ªç‰ˆæœ¬å·ã€‚ [TensorFlow Serving](https://www.tensorflow.org/tfx/guide/serving) å…è®¸æˆ‘ä»¬é€‰æ‹©æ¨¡å‹çš„å“ªä¸ªç‰ˆæœ¬ï¼Œæˆ–è€…å½“æˆ‘ä»¬åšå‡ºæ¨ç†è¯·æ±‚æ—¶æˆ‘ä»¬æƒ³è¦ä½¿ç”¨çš„â€œå¯æœåŠ¡çš„â€ã€‚æ¯ä¸ªç‰ˆæœ¬å°†è¢«å¯¼å‡ºåˆ°ç»™å®šè·¯å¾„ä¸‹çš„ä¸åŒå­ç›®å½•ä¸­ã€‚**

**ä¸‹é¢æ˜¯å°† yolov2 æ¨¡å‹å¯¼å‡ºä¸º TF æœåŠ¡æ ¼å¼çš„è„šæœ¬**

****æ£€æŸ¥æ‚¨ä¿å­˜çš„æ¨¡å‹****

**![](img/c0ceb08209ddbcec6a95d2bd6f7fe15e.png)**

**å¯¼å‡ºçš„æ¨¡å‹ç›®å½•ç»“æ„**

**å‘½ä»¤è¡Œå®ç”¨ç¨‹åº`saved_model_cli`æŸ¥çœ‹æˆ‘ä»¬çš„ SavedModel ä¸­çš„[å…ƒå›¾å®šä¹‰](https://www.tensorflow.org/versions/r1.15/api_docs/python/tf/MetaGraphDef)(æ¨¡å‹)å’Œ[ç­¾åå®šä¹‰](https://www.tensorflow.org/tfx/tutorials/signature_defs)(å¯ä»¥è°ƒç”¨çš„æ–¹æ³•)ã€‚**

```
export export_path=./export/1
saved_model_cli show --dir $export_path --all
```

**![](img/0e3e65828102f9b79701c45680f03390.png)**

**ä¿å­˜çš„æ¨¡å‹è¾“å…¥/è¾“å‡ºå½¢çŠ¶**

****å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨:****

**åˆ›å»º TensorFlow æœåŠ¡é…ç½®ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­æ·»åŠ æ¨¡å‹åŠå…¶å„è‡ªåŸºç¡€çš„åˆ—è¡¨ã€‚**

**ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨ç‰¹å®šç«¯å£ä¸Šå¯åŠ¨æ‚¨çš„æœåŠ¡å™¨**

```
tensorflow_model_server --model_config_file=/home/gaurav/tensorflow_serving_model_config_file --port=9000
```

**![](img/513796156e7a4b9c93ec19ca921b742d.png)**

**9000 ç«¯å£ä¸Šç‰ˆæœ¬ 1 çš„æœåŠ¡æ¨¡å‹**

****ç»“è®º****

**åœ¨è¿™ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•å°†ä¿å­˜çš„å¾®å‹ yolov2 æ¨¡å‹å¯¼å‡ºä¸º Tensorflow æœåŠ¡æ ¼å¼ï¼Œæ£€æŸ¥æ‚¨çš„æ¨¡å‹ï¼Œå¹¶åœ¨æœ¬åœ°å¯åŠ¨æœåŠ¡å™¨ã€‚**å¦‚æœä½ åˆ†æ*æ£€æŸ¥ä½ ä¿å­˜çš„æ¨¡å‹*éƒ¨åˆ†ï¼Œä½ ä¼šå‘ç°è¾“å‡ºæ˜¯å¼ é‡çš„ä¸€ç§å½¢å¼ï¼Œå°½ç®¡ä½ éœ€è¦ä¸€ä¸ªç±»åç§°ï¼Œå°±åƒæˆ‘ä»¬åœ¨åˆ†ç±»æ¨¡å‹ä¸­å¾—åˆ°çš„ä¸€æ ·**ã€‚è¿™å°†åœ¨åå¤„ç†ä½ çš„è¾“å‡ºå¼ é‡ post TF æœåŠ¡çš„ä¸‹ä¸€éƒ¨åˆ†ä¸­æ¶‰åŠï¼Œå¹¶åœ¨æœ¬åšå®¢çš„ [**ç¬¬äºŒéƒ¨åˆ†**](/@gauravgola/deploying-yolo-on-tensorflow-serving-part-2-4ecd5edbe776) ä¸­å›´ç»•æœåŠ¡çš„æ¨¡å‹åˆ›å»ºä¸€ä¸ªå° APIã€‚**

> **åœ¨ [**Linkedin**](https://www.linkedin.com/in/gaurav-gola96/) **å’Œ**[**Youtube**](https://www.youtube.com/channel/UC3zK1Iuw2Rufxu8TKeyj4GQ)**ä¸Šå’Œæˆ‘è¿çº¿ã€‚****
> 
> **æœ¬é¡¹ç›® github:[**é“¾æ¥**](https://github.com/gauravgola96/Yolo_deployment)**