<html>
<head>
<title>A Fun Project (Pose Detector) With Google’s Teachable Machine</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个有趣的项目(姿势探测器)与谷歌的可教机器</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/a-fun-project-pose-detector-with-googles-teachable-machine-6c7c8d650be1?source=collection_archive---------4-----------------------#2020-04-06">https://medium.com/analytics-vidhya/a-fun-project-pose-detector-with-googles-teachable-machine-6c7c8d650be1?source=collection_archive---------4-----------------------#2020-04-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6993" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在是下午2点…吃完美味的午餐…现在在你的笔记本电脑上工作…耷拉的眼睛…再见了，世界，你好，做个好梦……想起什么了吗？；)</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="ji jj l"/></div></figure><h1 id="ac80" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">我们在做什么？</h1><p id="3f00" class="pw-post-body-paragraph if ig hi ih b ii ki ik il im kj io ip iq kk is it iu kl iw ix iy km ja jb jc hb bi translated">我更喜欢提前知道在一次锻炼、一个博客或一个培训视频结束时我会得到什么，我更喜欢它是有趣的，特别是对于初学者的课程。所以这就是我们将要建造的东西——一个使用你电脑摄像头的实时探测器，当你困倦时它会发出警报&amp;把你的头向两边倾斜超过一定的角度。</p></div><div class="ab cl ko kp gp kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="hb hc hd he hf"><blockquote class="kv kw kx"><p id="d4a9" class="if ig kn ih b ii ij ik il im in io ip ky ir is it kz iv iw ix la iz ja jb jc hb bi translated"><em class="hi">没错，所以你可能已经听说过</em> <a class="ae lb" href="https://teachablemachine.withgoogle.com/" rel="noopener ugc nofollow" target="_blank"> <em class="hi">谷歌的可教机器</em> </a> <em class="hi">。用谷歌自己的话说</em>——“<em class="hi"/>训练计算机识别你自己的图像、声音、&amp;姿势”。<em class="hi">这是一个真正有趣的工具，通过一些编程技巧，你可以扩展它来创建大量有趣的应用程序。</em></p></blockquote><p id="5f36" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以让我们开始吧—</p><h1 id="2b00" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">第一步</h1><p id="b695" class="pw-post-body-paragraph if ig hi ih b ii ki ik il im kj io ip iq kk is it iu kl iw ix iy km ja jb jc hb bi translated">去<a class="ae lb" href="https://teachablemachine.withgoogle.com/train" rel="noopener ugc nofollow" target="_blank">https://teachablemachine.withgoogle.com/train</a>开始一个“姿势项目”</p><h1 id="a3db" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">第二步</h1><p id="7d1e" class="pw-post-body-paragraph if ig hi ih b ii ki ik il im kj io ip iq kk is it iu kl iw ix iy km ja jb jc hb bi translated">添加一个类。然后，将类名更改为“Neutral”、“Sleepy _ Left”和“Sleepy _ Right”。你想上多少课都可以。例如，当没有人在摄像机前时，你可以用一个类来处理一个案例。我们暂时坚持三个。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lc"><img src="../Images/fc4866a8fd81af42866349e980b95716.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*qzm69SXOaFvcOQMERoq6Dw.gif"/></div></div></figure><h1 id="e204" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">第三步</h1><p id="df13" class="pw-post-body-paragraph if ig hi ih b ii ki ik il im kj io ip iq kk is it iu kl iw ix iy km ja jb jc hb bi translated">在“中性”类别下，单击“网络摄像头”。我正在使用Chrome浏览器，可能会提示您允许访问摄像头/麦克风。如果看到提示，请允许它。等待您的视频出现在屏幕上。</p><p id="bc5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">坐直，并“保持记录”大约5秒钟——大约30-50个姿势样本将由可教机器填充。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lc"><img src="../Images/66ca01145f1bc2089c76270ffeccffab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*-Je4YwMyybl4HToc3BlkZA.gif"/></div></div></figure><p id="cc7b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对剩下的两节课做同样的动作，一节课向左倾斜头部，另一节课向右倾斜头部。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lc"><img src="../Images/bf503cbf58947fba67c23094a38e5015.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*xLfydNL7sHAMZNUclVIlwg.gif"/></div></div></figure><h1 id="f9a6" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">第四步</h1><p id="76d5" class="pw-post-body-paragraph if ig hi ih b ii ki ik il im kj io ip iq kk is it iu kl iw ix iy km ja jb jc hb bi translated">点击“火车模型”。我们不会为这个项目的任何高级设置费心。训练模型可能需要几分钟时间。</p><p id="b3d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">模型训练完成后，您应该可以在右侧看到预览。你可以通过倾斜你的头来检查模型现在是否能够正确地分类你的姿势。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lc"><img src="../Images/ebe4a1e265c43f381678ca2a1f9169e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*c5jXDCE0Qr7vrejk0Eyxcg.gif"/></div></div></figure><h1 id="2cbd" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">第五步</h1><p id="d0d6" class="pw-post-body-paragraph if ig hi ih b ii ki ik il im kj io ip iq kk is it iu kl iw ix iy km ja jb jc hb bi translated">单击“导出模型”。</p><p id="3c15" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">—首先，单击“下载”单选按钮。将生成的代码复制并保存在你的电脑上，保存到一个名为<em class="kn">index.html</em>的文件中</p><p id="919d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">—其次，点击“上传(可共享链接)单选按钮，然后选择“上传我的模型”。给它一些时间上传。</p><p id="597e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将链接复制到“您的可共享链接”下，并保存起来以备后用。</p><p id="c160" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你现在可以退出浏览器了，我们接下来将处理<em class="kn">index.html</em>。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lc"><img src="../Images/3c9352b1995032de6ea8efc5fa3b0a2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*HX_8pZe-ptfKy9XHbu0Yqg.gif"/></div></div></figure></div><div class="ab cl ko kp gp kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="hb hc hd he hf"><h1 id="4555" class="jk jl hi bd jm jn lj jp jq jr lk jt ju jv ll jx jy jz lm kb kc kd ln kf kg kh bi translated">第六步</h1><p id="7631" class="pw-post-body-paragraph if ig hi ih b ii ki ik il im kj io ip iq kk is it iu kl iw ix iy km ja jb jc hb bi translated">我们现在将对index.html进行编辑。这个文件是HTML和JavaScript代码的混合。</p><p id="4038" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将<strong class="ih hj"> const URL </strong>的值更改为您在上一步中复制的可共享链接。在我的例子中，它看起来像这样—</p><pre class="jd je jf jg fd lo lp lq lr aw ls bi"><span id="9f8e" class="lt jl hi lp b fi lu lv l lw lx">// the link to your model provided by Teachable Machine export panel<br/>const URL = "<a class="ae lb" href="https://teachablemachine.withgoogle.com/models/L71vjtyQV/" rel="noopener ugc nofollow" target="_blank">https://teachablemachine.withgoogle.com/models/L71vjtyQV/</a>";</span></pre><p id="9df0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这一行代码更改足以在您的本地系统上测试它。只要在浏览器中打开index.html的T2，你应该能看到它的工作。下面的视频对你来说是翻转的(像一个自拍相机)，但是当你自己尝试的时候会很好。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es ly"><img src="../Images/823effc11a9faa8cbaa81e886a055825.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/1*gpsHN0PUGsnOPCdNQ8LiGg.gif"/></div></figure><p id="e31b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您必须能够看到每个类别的概率(显示在视频画布下方)在您移动时是如何变化的。你看到的点是模特展示身体关键点的方式。</p><h1 id="564f" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">第七步</h1><p id="681f" class="pw-post-body-paragraph if ig hi ih b ii ki ik il im kj io ip iq kk is it iu kl iw ix iy km ja jb jc hb bi translated">现在让我们把最后一点拼起来！</p><p id="63c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 1 </strong>。首先，以mp3文件的形式下载你想要播放的任何闹铃声音。将它保存在你保存<em class="kn">index.html</em>的文件夹中</p><p id="d941" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我的例子中，声音文件的名称是<em class="kn"> wakeupalarm.mp3 </em></p><p id="61fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 2 </strong>。在<em class="kn">标签容器</em> div之后插入一段代码，使其看起来像这样(标记为粗体的<em class="kn">代码是新代码</em>):</p><pre class="jd je jf jg fd lo lp lq lr aw ls bi"><span id="77c9" class="lt jl hi lp b fi lu lv l lw lx">&lt;div id="label-container"&gt;&lt;/div&gt;</span><span id="f68e" class="lt jl hi lp b fi lz lv l lw lx"><strong class="lp hj">&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;<br/>&lt;audio id="wakeUpAudio"&gt;<br/>  &lt;source src="wakeupalarm.mp3" type="audio/mpeg"&gt;<br/>  Your browser does not support HTML5 audio.<br/>&lt;/audio&gt;</strong></span></pre><p id="a14b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的代码创建了一个简单的容器，用于将音频文件嵌入到HTML页面中。</p><p id="a850" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 3 </strong>。就在函数<em class="kn"> init()的上方，</em>添加以下内容:</p><pre class="jd je jf jg fd lo lp lq lr aw ls bi"><span id="7d00" class="lt jl hi lp b fi lu lv l lw lx"><strong class="lp hj">// functions to play and pause audio file</strong></span><span id="ac41" class="lt jl hi lp b fi lz lv l lw lx"><strong class="lp hj">var aud = document.getElementById("wakeUpAudio");</strong></span><span id="c23a" class="lt jl hi lp b fi lz lv l lw lx"><strong class="lp hj">function playAud() { <br/>   aud.play(); <br/> }</strong></span><span id="1577" class="lt jl hi lp b fi lz lv l lw lx"><strong class="lp hj">function pauseAud() { <br/>   aud.pause(); <br/> }</strong></span></pre><p id="1474" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们刚刚创建了播放和暂停音频文件的函数。我们稍后将c所有这些函数。</p><p id="bd60" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> 4 </strong>。最后，更新<em class="kn"> predict() </em>函数(标记为粗体的<em class="kn">代码是新代码</em>):</p><pre class="jd je jf jg fd lo lp lq lr aw ls bi"><span id="a743" class="lt jl hi lp b fi lu lv l lw lx">async function predict() {<br/>// Prediction #1: run input through posenet<br/>// estimatePose can take in an image, video or canvas html element</span><span id="c6db" class="lt jl hi lp b fi lz lv l lw lx"> const { pose, posenetOutput } = await model.estimatePose(webcam.canvas);</span><span id="44fa" class="lt jl hi lp b fi lz lv l lw lx">// Prediction 2: run input through teachable machine classification model</span><span id="c114" class="lt jl hi lp b fi lz lv l lw lx"> const prediction = await model.predict(posenetOutput);</span><span id="7648" class="lt jl hi lp b fi lz lv l lw lx"> for (let i = 0; i &lt; maxPredictions; i++) {<br/>   const classPrediction = prediction[i].className + ": " +        prediction[i].probability.toFixed(2);<br/>   labelContainer.childNodes[i].innerHTML = classPrediction;</span><span id="9353" class="lt jl hi lp b fi lz lv l lw lx"> <strong class="lp hj">// don't play audio when head's neutral with probability &gt;= 75%<br/> if (prediction[0].probability.toFixed(2) &gt;= 0.75)<br/>     pauseAud();<br/> else<br/>     playAud();</strong><br/> }</span><span id="6611" class="lt jl hi lp b fi lz lv l lw lx">// finally draw the poses<br/> drawPose(pose);<br/>}</span></pre><p id="343a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这需要解释一下。</p><p id="c21b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面代码中的<em class="kn"> maxPredictions </em>变量在我们的例子中等于3，因为我们有3个类——Neutral、Sleepy _ Left和Sleepy _ Right。</p><p id="de29" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们有一个数组变量<em class="kn">预测</em>用来访问这3个类。所以，</p><p id="9c23" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">预测[0]:中性</p><p id="6f9f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">预测[1]:瞌睡_左</p><p id="cdac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">预测[2]:瞌睡_对</p><p id="797b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的新代码简单地声明，如果姿势是中性类的概率等于或大于75%，暂停音频，否则播放它。75%这个数字是我为了控制一定程度的不准确性而保留的，但是您可以根据自己的具体情况随意调整。</p><h1 id="8c73" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated"><strong class="ak">就是这样！</strong></h1><blockquote class="kv kw kx"><p id="2e22" class="if ig kn ih b ii ij ik il im in io ip ky ir is it kz iv iw ix la iz ja jb jc hb bi translated"><em class="hi">你可以从</em><a class="ae lb" href="https://github.com/HCGrit/MachineLearning-iamJustAStudent/tree/master/SleepyOne" rel="noopener ugc nofollow" target="_blank">https://github . com/HC grit/machine learning-iamJustAStudent/tree/master/sleep yone</a>下载完整的index.html<em class="hi">文件。</em></p><p id="b542" class="if ig kn ih b ii ij ik il im in io ip ky ir is it kz iv iw ix la iz ja jb jc hb bi translated">你需要自己添加声音文件。</p></blockquote></div><div class="ab cl ko kp gp kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="hb hc hd he hf"><h1 id="b4cb" class="jk jl hi bd jm jn lj jp jq jr lk jt ju jv ll jx jy jz lm kb kc kd ln kf kg kh bi translated">冷静的事实</h1><ol class=""><li id="6ab7" class="ma mb hi ih b ii ki im kj iq mc iu md iy me jc mf mg mh mi bi translated">这不仅适用于你，也适用于坐在网络摄像头前的任何人！由于该模型通过检测关键身体部位/关节来工作，因此其关键点可被该模型检测到的任何人都可以使用该模型。</li><li id="c367" class="ma mb hi ih b ii mj im mk iq ml iu mm iy mn jc mf mg mh mi bi translated">在幕后工作的实际算法被称为<strong class="ih hj"> PoseNet </strong>。你可以在这里了解更多，它的各种用例——<a class="ae lb" href="https://www.tensorflow.org/lite/models/pose_estimation/overview" rel="noopener ugc nofollow" target="_blank">https://www . tensor flow . org/lite/models/pose _ estimation/overview</a>。</li><li id="11fd" class="ma mb hi ih b ii mj im mk iq ml iu mm iy mn jc mf mg mh mi bi translated">你也可以训练一个音频模型，并创建一个应用程序来实现类似Alexa或Siri的功能。</li></ol></div><div class="ab cl ko kp gp kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="hb hc hd he hf"><h1 id="7616" class="jk jl hi bd jm jn lj jp jq jr lk jt ju jv ll jx jy jz lm kb kc kd ln kf kg kh bi translated">离别的思绪</h1><p id="a62c" class="pw-post-body-paragraph if ig hi ih b ii ki ik il im kj io ip iq kk is it iu kl iw ix iy km ja jb jc hb bi translated">我创建这个项目主要是为了我工作场所的同事。他们中的大多数人都询问了如何开始人工智能和机器学习，我想在他们开始学习沉重的东西之前，向他们介绍一些有趣的领域。</p><p id="aaf0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">他们中的一些人对此进行了扩展，使手势控制的应用程序能够在不触摸键盘的情况下启动Outlook、Excel和完成各种日常任务。</p><p id="9e91" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望这能激发读者的兴趣。如果你碰巧围绕这个创建了任何有趣的项目，请通过你的评论让我知道，我很乐意探索这些！</p><p id="0936" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">很快又有新消息了！</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="ji jj l"/></div></figure></div></div>    
</body>
</html>