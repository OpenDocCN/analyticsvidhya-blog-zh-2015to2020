<html>
<head>
<title>RegNet or How to methodologically design effective networks.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">或如何方法论地设计有效的网络。</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/regnet-or-how-to-methodologically-design-effective-networks-c3560c1cf436?source=collection_archive---------3-----------------------#2020-04-05">https://medium.com/analytics-vidhya/regnet-or-how-to-methodologically-design-effective-networks-c3560c1cf436?source=collection_archive---------3-----------------------#2020-04-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f921" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">设计网络设计空间</p><p id="d878" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个新的SoTA网络已经发布，但是以一种非常轻率的方式。这是可以理解的，因为它是在一篇旨在推进一个更强大的想法的论文中介绍的。如果一个人仅仅从这份报纸上拿走“新索塔”，那将是一个巨大的损失。</p><p id="69a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这篇论文是《设计网络设计空间》，由脸书人工智能研究院(FAIR)发表。作者旨在深化“设计空间设计”的理念。他们的目标不是发现任何特定的网络，甚至不是找到某个网络家族。正如他们所说的，他们试图“发现通用的<em class="je">设计原则</em>，这些原则描述了简单、运行良好、跨环境通用的网络”</p><h1 id="bf8e" class="jf jg hi bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc bi translated">设计空间设计</h1><blockquote class="kd ke kf"><p id="e592" class="if ig je ih b ii ij ik il im in io ip kg ir is it kh iv iw ix ki iz ja jb jc hb bi translated">我们的重点是探索网络结构(例如，宽度、深度、群组等。)假设标准模型系列包括VGG、雷斯耐特和雷斯耐特</p></blockquote><p id="d05f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从一个他们称为AnyNet的简单无约束ResNet类基础，他们进行基于群体的实验，以达到他们称为<strong class="ih hj"> RegNet </strong>的设计空间。我认为，理解和探索他们如何进行实验是至关重要的，因为从这篇论文中可以得出比他们得出的RegNet更重要的结论。</p><p id="924b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">尽管他们的RegNet设计空间是针对低计算、低纪元的体系，但他们表明它也适用于其他体系。最终，RegNet design生成的模型可与之前的SoTA EfficientNet模型相媲美。</p><p id="e722" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，我想强调的是，很明显，为了简洁和公平的比较，他们在桌面上留下了很多潜力。据我所知，他们的目的不是简单地推出另一款SoTA车型。更确切地说，是为了推进使他们的发现成为可能的基本原理。</p><blockquote class="kd ke kf"><p id="622e" class="if ig je ih b ii ij ik il im in io ip kg ir is it kh iv iw ix ki iz ja jb jc hb bi translated">我们研究模型群体的行为，而不是在特定的环境下设计或寻找单一的最佳模型。</p></blockquote><p id="38dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">他们的方法是从设计空间中抽取样本模型，并对其进行分析，以了解其中哪些工作得更好或更差，然后通过这种直觉开发新的设计空间。</p><h2 id="9f8a" class="kj jg hi bd jh kk kl km jl kn ko kp jp iq kq kr jt iu ks kt jx iy ku kv kb kw bi translated">AnyNet设计空间</h2><p id="1323" class="pw-post-body-paragraph if ig hi ih b ii kx ik il im ky io ip iq kz is it iu la iw ix iy lb ja jb jc hb bi translated">他们开始设计过程的最初设计空间是AnyNet。从根本上说，它是一个非常简化和无约束的ResNet。它有一个输入图像的主干，完成大量计算的主体，以及完成分类的头部。主体具有4个阶段，并且每个阶段具有不同数量的相同块(除了跨距2用作“下采样”块的某些块)。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es lc"><img src="../Images/b5e772c2f252255d98fac8240928e97b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/format:webp/1*3UZjXd0F5zg3JP7DC6VmAQ.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">网络结构。</figcaption></figure><p id="c9af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每个块有3个参数:宽度w、瓶颈比率b和组宽度g。分辨率r固定为224。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es lo"><img src="../Images/fe97c9ba1e19c4a5d558867917cdaaa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/format:webp/1*QjiksHsg_5r69uwTcBSccw.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">AnyNetX的基本块X块。(b)描述了“下采样块”</figcaption></figure><blockquote class="kd ke kf"><p id="3bc9" class="if ig je ih b ii ij ik il im in io ip kg ir is it kh iv iw ix ki iz ja jb jc hb bi translated">虽然总体结构很简单，但AnyNet设计空间中可能的网络总数是巨大的。</p></blockquote><p id="3de7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这篇论文很好地总结了它们的参数空间:</p><p id="54ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">AnyNetX设计空间具有16个自由度，因为每个网络包括4个级，并且每个级I具有4个参数:块的数量di、块宽度wi、瓶颈比bi和组宽度gi。除非另有说明，我们将输入分辨率固定为r= 224。为了获得有效的模型，我们对di≤16、wi≤ 1024和可被8整除、bi∈ {1，2，4}和gi∈ {1，2，...，进行对数均匀采样。。。,32 }.我们<strong class="ih hj"> <em class="je">重复采样，直到我们在我们的目标复杂度范围(360毫伏到400毫伏)中获得n= 500个模型</em> </strong>，并且<strong class="ih hj"> <em class="je">训练每个模型10个时期</em> </strong></p><blockquote class="kd ke kf"><p id="8c02" class="if ig je ih b ii ij ik il im in io ip kg ir is it kh iv iw ix ki iz ja jb jc hb bi translated">为了<strong class="ih hj">获得模型的分布</strong>，我们从一个设计空间中取样并训练n个模型。为了提高效率，我们主要是在低计算量、低时期的训练体系中进行的。特别是，在本节中，我们在ImageNet数据集上使用4亿flop (400MF)机制训练每个采样模型10个时期。我们注意到，虽然我们训练了许多模型，但每次训练运行都很快:在400MF下训练100个模型10个时期大致相当于在flops下训练单个ResNet50模型在4GF下100个时期(强调我的)</p></blockquote><p id="955a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面强调的部分描述了他们基于人群的方法，是本文的主要贡献之一。请注意，400毫安的状态大致相当于EfficientNet-B0</p><blockquote class="kd ke kf"><p id="e622" class="if ig je ih b ii ij ik il im in io ip kg ir is it kh iv iw ix ki iz ja jb jc hb bi translated">我们不是从these∼10^18配置中寻找单一的最佳模式，而是探索是否有通用的设计原则可以帮助我们理解和完善这个设计空间。</p></blockquote><p id="9971" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">他们进行设计的基本目标如下</p><ol class=""><li id="9937" class="lp lq hi ih b ii ij im in iq lr iu ls iy lt jc lu lv lw lx bi translated">为了简化设计空间的结构，</li><li id="b802" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">为了提高设计空间的可解释性，</li><li id="996c" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">为了提高或保持设计空间质量，</li><li id="199d" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">为了保持设计空间中的模型多样性</li></ol><p id="d0d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这表明，他们不仅追求设计一个有效和高效的设计空间，他们这样做的方式是可以理解的。</p><p id="102d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">前面提到的无约束设计空间，他们称之为AnyNetXa。他们从这个空间取样，分析人口，设计一个新的空间，然后重复。</p><p id="8d4b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意，大多数规范ResNe(X)ts不包含在AnyNetX中。这至少是由于杆层的差异以及杆和主体之间的中间最大池层。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es md"><img src="../Images/254394f128743c8c6c3a46be16bda781.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*EFcCllfhOuIt3b6MtVLk6Q.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">针对特定参数绘图可以提供对有效值范围的深入了解。</figcaption></figure><p id="1b86" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在AnyNetXb中，它们约束瓶颈参数在所有阶段都是相同的。在这种约束下采样的群体实际上显示了与AnyNetXa相同的分布。虽然这并没有<strong class="ih hj"> <em class="je">提高</em> </strong>任何客观的度量标准本身，但它简化了设计空间而没有任何害处。</p><p id="02c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在AnyNetXc中，它们将组参数固定在各个阶段之间。这意味着每个阶段共享相同的组宽度(要进一步理解组宽度，请参考<a class="ae jd" href="https://arxiv.org/abs/1611.05431" rel="noopener ugc nofollow" target="_blank">深度神经网络的聚合残差变换</a>中的基数)。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es me"><img src="../Images/bf71980e1400d234217934b1c5f22c6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*7RC9Zmf1mIBovZW8W5o4jg.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">(强调我的)</figcaption></figure><p id="25c6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在测试b和c变体的过程中，他们发现b = 1(实际上没有瓶颈扩展)和组宽度为2或更大产生了最好的结果。</p><p id="145a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">熟悉ResNets的人会记得，瓶颈比和扩展的存在是为了在不过度增加FLOPs的情况下增加通道宽度。还值得注意的是，有必要在3x3卷积之前和之后引入1x1卷积来匹配尺寸，这些1x1卷积<em class="je">增加了内存访问成本，同时减少了触发器。</em>因此，这种“瓶颈”模块设计也导致基于它的网络在基于GPU的加速器上出现瓶颈(并非有意双关)。</p><p id="0dee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">包括移动网和高效网在内的mnas网广泛使用深度方向卷积来实现SoTA性能。这些卷积可以理解为组宽度为1的组卷积。AnyNetXb群体表明g &gt;1是最好的这一事实与这一事实并不冲突。毫无疑问，这样的网络能够并且确实表现出色。该论文<em class="je">经验地显示了</em> <strong class="ih hj"> <em class="je">、</em> </strong> <em class="je">，用统计支持来支持主张</em> <strong class="ih hj"> <em class="je">、</em> </strong>，即作为<strong class="ih hj">设计空间</strong>，g = 1可能是最好的避免，即使MNAS搜索已经<strong class="ih hj"> <em class="je">找到了特定的实例</em> </strong>，其中有良好的执行模型可以建立。</p><p id="f328" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">再次重申，我们应该关注的是统计工具和人口分析。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es mf"><img src="../Images/d8b48f3b6360c902cea09dca23e775a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*xAA7-p1QZEOejBuqAThv9A.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">上面是一个宽度不断增加的良好网络的示例。下面是一张烂网。注意误差值显示为e = %</figcaption></figure><p id="3fb7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，作者检查了AnyNetXc的好网络和坏网络，发现好网络的宽度不断增加。AnyNetXD封装了这个原理。</p><p id="df9f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过进一步的测试，他们得出结论，增加深度和宽度是良好网络的一个重要方面。这被集成为AnyNetXe</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es mg"><img src="../Images/5cac63dcc6aefb5e26820d1aa53a2c6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*SCtaeFZ7UTDPZVq0aLLgIQ.png"/></div></figure><p id="f5b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有趣的是，增加深度的条件不一定是最后一级所需要的。请记住，canonical ResNe(X)t模型被设计为在第4阶段具有3个块，即使它从50、101和152深度模型扩展。</p></div><div class="ab cl mh mi gp mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="hb hc hd he hf"><h2 id="4c75" class="kj jg hi bd jh kk kl km jl kn ko kp jp iq kq kr jt iu ks kt jx iy ku kv kb kw bi translated">创意设计空间</h2><p id="0ab9" class="pw-post-body-paragraph if ig hi ih b ii kx ik il im ky io ip iq kz is it iu la iw ix iy lb ja jb jc hb bi translated">概括来说，AnyNetXe设计空间如下</p><ul class=""><li id="e0f0" class="lp lq hi ih b ii ij im in iq lr iu ls iy lt jc mo lv lw lx bi translated">一个非常基本的网状骨骼，由简单的茎、体和头组成。具有不同数量的相同块的4个阶段。</li><li id="945e" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc mo lv lw lx bi translated">(AnyNetXb)跨阶段的相同瓶颈。优选b = 1</li><li id="6cf7" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc mo lv lw lx bi translated">(AnyNetXc)跨级的相同组宽度，优选g &gt; 1</li><li id="3521" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc mo lv lw lx bi translated">(AnyNetXd，e)逐渐增加通道宽度和块深度，最后一级可能例外</li></ul><p id="6255" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在此基础上，作者确定并分析了最佳性能模型。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es mp"><img src="../Images/dd6f0fe5adcab36c75093793accadf64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*we80K5El9j_IH3gTug5Hew.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">强调我的。右上方显示了两个具有bet线性拟合的模型</figcaption></figure><p id="1e56" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">他们发现有可能找到线性拟合来<strong class="ih hj"> <em class="je">解释和预测</em> </strong>这个空间内的最佳模型。</p><p id="cb0e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">根据他们发现的线性拟合，一个网络结构通过6个参数，d(深度)，w0(初始宽度)，wa，wm，b和g(后两个分别用于瓶颈和组宽度)。这些参数被拟合到以下方程中，以生成区块宽度和深度。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es mq"><img src="../Images/c441ab22d92261566a8ae0f3f9af1a82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*qkDMG9hsIBVELf4NSRZmSw.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">不同的块宽度uj为每个块j &lt; d. w0初始宽度，wa斜率，d深度</figcaption></figure><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es mr"><img src="../Images/a15db6380c2a5d5c4db9f256954dfb8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/1*XwecqMfLZVLO7GXTNGIi_Q.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">控制参数化的附加参数。计算每个块j的sj，使以下等式成立</figcaption></figure><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es ms"><img src="../Images/3b3254302001ba27c73157b0f2631335.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*oHDgqo2fGn6E2lDH3am_vw.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">通过下式计算量化的每块宽度wj</figcaption></figure><p id="6eac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由此产生的设计空间被称为RegNet。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es mt"><img src="../Images/e39b2c6cb87c3d296af5c8f283199ec7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/1*AI9F1y15wrTAypPckTSJEQ.png"/></div></figure><p id="ce24" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如上表所示，RegNet不是一个单一的网络，甚至也不是像EfficientNets那样的一系列网络。它是一个被量化的线性规则所限制的设计空间，被期望包含好的模型。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="er es mu"><img src="../Images/a3cf7c68e7fbab363ba9568608532c29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jiK_FMwfkWYnie-C5BnZ8Q.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">AnyNetXa、Xe和RegNetX各自群体的EDF以及各种附加限制。(右)显示RegNetX的随机搜索效率要高得多</figcaption></figure><p id="6a6e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">测试了进一步的限制，包括wm = 2或w0 = wa。尽管这些附加条件可以提高性能，但作者决定不将它们纳入他们的RegNetX设计空间。作者的意图是允许读者根据他们自己的要求应用他们自己的限制，希望是以这样一种结构化和有纪律的方式。</p><p id="64c4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还发现由RegNetX定义的设计空间也是网络体系结构搜索的良好候选。这表明这种设计空间工程并不排斥网络体系结构搜索方法。因此，可以想象一个包含两种方法的管道。</p></div><div class="ab cl mh mi gp mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="hb hc hd he hf"><h2 id="acf5" class="kj jg hi bd jh kk kl km jl kn ko kp jp iq kq kr jt iu ks kt jx iy ku kv kb kw bi translated">设计空间泛化</h2><p id="00fb" class="pw-post-body-paragraph if ig hi ih b ii kx ik il im ky io ip iq kz is it iu la iw ix iy lb ja jb jc hb bi translated">AnyNet和随后的RegNet设计空间是为低计算量、低时期的训练体制设计的。这个目标本身是有用的，对于本文中显示的基于群体的方法也是有用的。值得注意的是，他们表明他们的设计空间对于更复杂的模型也是有用的。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="er es mz"><img src="../Images/04f26f0eebf2d569b315a0e0db61c923.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j1ZN111htPLbtlcu2b0SGA.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">强调我的。在这种情况下，设计空间过拟合意味着由于对设计空间的特定限制而导致的性能衰退。</figcaption></figure><p id="5180" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的EDF表明RegNetX在其初始设计之外的其他机制中是通用的</p><h1 id="0c94" class="jf jg hi bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc bi translated"><strong class="ak">分析RegNetX设计空间</strong></h1><p id="528f" class="pw-post-body-paragraph if ig hi ih b ii kx ik il im ky io ip iq kz is it iu la iw ix iy lb ja jb jc hb bi translated">作者的分析揭示了由经验数据支持的几个趋势，这些趋势与流行的设计选择不匹配。具体趋势和数据在文件中有很好的描述，并总结如下。</p><ul class=""><li id="ed15" class="lp lq hi ih b ii ij im in iq lr iu ls iy lt jc mo lv lw lx bi translated"><strong class="ih hj">最佳模型的深度在整个区域内保持稳定</strong>，最佳深度为20个区块(60层，因为每个区块有3层，依次由1x1、3x3和1x1卷积组成)</li><li id="dd71" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc mo lv lw lx bi translated"><strong class="ih hj"> <em class="je">最好的型号使用1.0的瓶颈比b，有效地消除了瓶颈</em> </strong>。虽然作者没有提到这一点，但我认为这是特别重要的一点。三层瓶颈块(具有1x1和3x3卷积)的全部要点是<strong class="ih hj"> <em class="je">引入通道宽度扩展(至少在原始论文中)</em> </strong>。如果它是不必要的或者有害的，那么重新访问基本的块结构本身将是有价值的。也许由具有两个连续3×3卷积的“基本块”组成的新设计空间会产生具有不同的更友好的GPU模型的不同设计空间。然而，这样的设计空间变化将保证额外的测试。</li><li id="e00e" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc mo lv lw lx bi translated">结果表明，好模型的宽度乘数是2.5，这很好地反映了已有模型的设计选择，它趋向于增加2倍。这种差异是显著的，因为2 v的乘数2.5将导致最后(第4阶段)的宽度差异超过两倍</li></ul><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="er es na"><img src="../Images/ba19608ec4b1e99214c021856f3b9423.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RYFF4oqC43tFMlqLAAxU-A.png"/></div></div></figure><p id="807e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我想再次指出，尽管这些见解本身很有价值，但理解它们有效的约束条件以及导致这些见解的方法也很重要。</p></div><div class="ab cl mh mi gp mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="hb hc hd he hf"><p id="48df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作者进行的一个有趣的分析途径是复杂性分析。处理架构的论文研究和发表关于参数和FLOPs的统计数据是很常见的。最近的论文包括选择硬件的推理时间。在这里，作者决定研究<em class="je">网络激活</em>。这些会严重影响内存受限硬件(如GPU)的运行时间。其他研究和现场经验表明，广泛利用深度方向可分离卷积和反向瓶颈的网络可以显著减少参数计数和触发器，但是它们显著增加了存储器访问成本。作者得出结论，最好的模型是那些激活随着触发器的平方根而增加，并且随着参数而线性增加的模型。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="er es nb"><img src="../Images/9697b58b28b27d6b86df72bb3cb76145.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LfeCRCb3lkRRlr1s74_h3g.png"/></div></div></figure><p id="4105" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">根据这些见解，RegNetX设计空间进一步受到下列条件的约束。</p><ul class=""><li id="f485" class="lp lq hi ih b ii ij im in iq lr iu ls iy lt jc mo lv lw lx bi translated">瓶颈比(b) = 1，深度(d) ≤ 40，宽度乘数(wm) ≥ 2</li><li id="b13d" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc mo lv lw lx bi translated">参数和激活受到相应的限制</li></ul><p id="129e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于RegNetX最初是为低触发器、低时期(T1)状态而设计的，所以附加的约束条件确保了它们在所有触发器状态下，在保持高精度的同时也具有低存储成本(T2)。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="er es nc"><img src="../Images/7bbe0c44d6160a9e86a0681c44c55fbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kKVrQu1ar3dbnUfr0os-_g.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">受约束的变体将瓶颈深度宽度和参数限制到激活</figcaption></figure><p id="07f6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">替代设计选择也得到了充分研究。低于1的瓶颈比率(b &lt; 1) effectively signifies an inverted bottleneck. While this condition is fundamentally outside the original AnyNetX (where b is either 1,2, or 4) it is a very common choice found in many current SoTA models (such as MobileNet or EfficientNet). Also incorporated in such models is the depthwise convolution where g = 1. Although this case has already been studied here as to be inferior, they conduct population analyses to understand their EDF further. At least within the RegNetX(which, if you allow for b &lt; 1, is expansive enough to incorporate MNASnet like models, but not quite) design space, they are shown to have an inferior EDF. In other terms, selecting models from the RegNetX space under such constraints harm the distribution of the model performances.</p><p id="724e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">It is important to fully and properly understand the implication. MNAS based networks such as <strong class="ih hj"> MobileNet和EfficientNets确实是强大的模型</strong>,具有各种优势和某些缺点。同样，这一点已经显示出来，并且没有受到质疑。MNAS是一个强大的网络架构搜索工具，参与该模型的架构师使用了一个有效的工具来搜索特定的有效模型，并取得了成功<em class="je">，在这种情况下</em>。本文的研究表明，作为一个设计空间，有一个更优越的方法和RegNetX设计空间作为一个整体，也许更富有成效地发现更有效的模式。</p><p id="4747" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">很容易想象研究人员在RegNetX搜索空间上使用MNAS或其他网络体系结构搜索方法来找到能够优于先前基于MNAS的模型或RegNetX模型的模型。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="er es nc"><img src="../Images/b89fe525eeecba9eccc0bd665ce5beec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8jAc86qR14ai9gH9AJZzgA.png"/></div></div></figure><p id="525a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，这篇论文实际上与介绍EfficientNet的论文的研究直接矛盾。在“<a class="ae jd" href="https://arxiv.org/abs/1905.11946" rel="noopener ugc nofollow" target="_blank"> EfficientNet:反思卷积神经网络的模型缩放</a>”中，作者得出结论，模型缩放的原则方法应该综合所有宽度、深度和分辨率方面。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es nd"><img src="../Images/8a74fac6039e203f59278eae8b70c00e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*Mnj5J7M54EVkCwS3o_RU7Q.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">来自<a class="ae jd" href="https://arxiv.org/abs/1905.11946" rel="noopener ugc nofollow" target="_blank">https://arxiv.org/abs/1905.11946</a></figcaption></figure><p id="bc0d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，这篇论文表明，即使对于较高的触发器状态，224 x 224的固定分辨率也是最好的。我认为这种差异来自不同的设计约束。在不同的设计空间中，不同的约束可能会产生不同的缩放比例。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es ne"><img src="../Images/01fcc07bcaaf1356feb4bd8f204fdaf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:438/format:webp/1*DupqN5leYzwnR9E1xTuTGg.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">不同网络和分辨率下的EDF轴显示累积误差概率)</figcaption></figure><h1 id="f951" class="jf jg hi bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc bi translated">与现有网络的比较</h1><p id="52b7" class="pw-post-body-paragraph if ig hi ih b ii kx ik il im ky io ip iq kz is it iu la iw ix iy lb ja jb jc hb bi translated">为了比较设计空间中的模型，作者从25个随机设置中为每个翻牌制度选择了最佳模型，并在100个时期重新训练顶部模型5次。</p><p id="7f10" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在过去的几年中，网络训练和正则化方案取得了突飞猛进的发展。许多SoTA论文采用了各种增强和增加的时间表来代替某些架构改进。为了公平比较，他们尽可能严密地控制训练计划。</p><p id="14a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我认为他们实际上是在与绑在他们背后的一只胳膊进行比较，因为他们根据各自模型的原始文件进行报告，而他们只使用基本的100 epoch时间表训练RegNet模型，而没有合理和现代的训练时间改进(包括但不限于Cutout、DropPath、Autoaugment)。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="er es mu"><img src="../Images/c8eb1f90afa1bdcbbefee2a3b519f0c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eVgJIrKJGDVktYGan1pEyw.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">作为对比，ResNe(X)t-50在4.0GF范围左右。</figcaption></figure><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es nf"><img src="../Images/9aff1110323f97f3ee5cee702d9f4a84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1394/format:webp/1*BUP2kpNKa9-vjuvNmCsuJQ.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">RegNet Y包含挤压和激励块。EfficientNet -B4大约在4.0GF范围内</figcaption></figure><h2 id="f89d" class="kj jg hi bd jh kk kl km jl kn ko kp jp iq kq kr jt iu ks kt jx iy ku kv kb kw bi translated">流动政权</h2><p id="8289" class="pw-post-body-paragraph if ig hi ih b ii kx ik il im ky io ip iq kz is it iu la iw ix iy lb ja jb jc hb bi translated">在高达600MF的移动范围内，其他类似的网络是MobileNet、ShuffleNet和某些其他NAS衍生模型。他们甚至没有努力就显示出了很好的结果<strong class="ih hj">。</strong></p><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="er es ng"><img src="../Images/08b62e9af5f3994eac5c8b0db26fbb77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AgvY7z4FO5z32p4NlH9EGw.png"/></div></div></figure><h2 id="d63b" class="kj jg hi bd jh kk kl km jl kn ko kp jp iq kq kr jt iu ks kt jx iy ku kv kb kw bi translated">标准基线比较</h2><p id="1d9b" class="pw-post-body-paragraph if ig hi ih b ii kx ik il im ky io ip iq kz is it iu la iw ix iy lb ja jb jc hb bi translated">另一个重要的基线模型家族是ResNe(X)t模型，它仍然是相关的，并且在AnyNet设计空间的最初阶段也是重要的。尽管这篇论文认为它们共享完全相同的设计空间，但我认为这并不完全正确。正如你在下面看到的，茎是不同的。令人惊讶的是，他们有一个共同的缺点。 “下采样”块具有残差连接，该残差连接在原始ResNet和AnyNet块设计中都具有核大小1和跨距2。这经常被认为是一个缺陷，因为它浪费了整整3/4的输入空间。ResNet的许多现代实现(如ResNet-D、Assembled ResNet等)通过合并一个池层来纠正这一点。</p><p id="0062" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些SoTA模型诞生于<strong class="ih hj">相同的错误设计空间</strong>的事实令我难以置信。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="er es nh"><img src="../Images/9d2fbc8b4ea83acde919bcf9984fb89d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*W3bIgO-7FGRBykj2i3ntnA.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">AnyNet:主干是一级3x3，步幅2</figcaption></figure><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es ni"><img src="../Images/1ee72672d3cf82f57e9130f34bb337df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/1*oHzC7hZTv2RlhtPZhkG8BA.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">主干是一个阶段7x7步幅2，后跟Maxpool 3x3步幅2。请注意“错误的下采样块，其内核大小为1，步幅为2。资料来源:https://arxiv.org/pdf/1812.01187.pdf。</figcaption></figure><figure class="ld le lf lg fd lh er es paragraph-image"><div class="er es nj"><img src="../Images/895d5e3a2b164e617891a1c0c65e8786.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/1*OaQdS-wUlendZoehfMMZSg.png"/></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">仅反映1/4输入空间的“有缺陷的”下采样块</figcaption></figure><p id="79e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">无论你如何切割它，无论是根据激活还是失败，RegNetXs都在上面。同样值得注意的是，在这种情况下，<strong class="ih hj">作者没有根据他们的原始论文</strong>报告ResNe(X)t性能。使用与RegNetXs相同的训练，ResNe(X)t实际上比他们的原始论文有所改进(他们训练了90个纪元，而这里是100个纪元)</p><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="er es nc"><img src="../Images/2dc4984920ee2db1b41115081a79d36e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZBd36svmaXTgH8SzJMOjgA.png"/></div></div></figure><p id="540e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">最先进水平对比:全体制</strong></p><p id="1147" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在所有体制中，图像分类的当前技术状态是EfficientNet系列。在MobileNet-V3的基础上，来自google的研究人员设计了(a)一个高性能的基线EfficientNet-B0 (b)一个有效的扩展策略，将它们扩展到所有翻牌区，直到EfficientNet-B7。(这种一致的扩展策略被其他研究人员用来开发EfficientNet-B8，它是B7的自然演变)。这些模型在许多用例中非常有效，并且已经成为Google(NoisyStudent、EfficientDet等)和其他公司的许多项目的支柱。</p><p id="2a22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我看来，他们的主要缺点是很难用GPU训练。正如之前多次提到的，它们广泛利用深度方向卷积和反向瓶颈，这使得它们难以在GPU上以高吞吐量进行训练和推断。对于谷歌来说，这似乎不是一个问题，因为谷歌可以访问大量的云ML系统，并更关心移动端的推理时间。</p><p id="c031" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">与ResNe(X)ts一样，它们对EfficientNets和RegNets采用相同的vanilla 100 epoch训练进行以下比较。</p><p id="2a78" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">RegNetXs在低于800MF的情况下失败了，但在其他情况下却名列前茅。但是在所有的政权中，他们总是比T4更快地推断和训练。在8.0GF体系(B5)中，它们的速度快了5倍，同时表现出更好的性能。</p><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="er es mz"><img src="../Images/a39430cd2a2b792707d87627b1294f17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0H3w7J3IIfCNP8UM7cF8YQ.png"/></div></div></figure><h1 id="544e" class="jf jg hi bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc bi translated">结论</h1><p id="e719" class="pw-post-body-paragraph if ig hi ih b ii kx ik il im ky io ip iq kz is it iu la iw ix iy lb ja jb jc hb bi translated">我认为本文的基本贡献有三个方面。</p><ol class=""><li id="f69c" class="lp lq hi ih b ii ij im in iq lr iu ls iy lt jc lu lv lw lx bi translated">提出了设计空间的设计原则。</li><li id="ee02" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">根据这些原则，引入了有效的设计空间(RegNet)</li><li id="e323" class="lp lq hi ih b ii ly im lz iq ma iu mb iy mc jc lu lv lw lx bi translated">介绍了SoTA网络系列(RegNetX和RegNetY)。</li></ol><p id="6daa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">很明显，他们希望世界关注第一和第二。如果其他人只是拿着第三条跑，作者会非常失望。再次请记住RegNetX被选中的过程。从RegNet C设计空间(仍有超过10⁶的模型可供选择)中，他们从每个翻牌体系中随机选取25个<strong class="ih hj">模型，选出最好的，并训练它们100个周期。很明显，即使是该领域中的简单NAS也会产生更好的模型，至少对于特定的用途来说相对容易。或者更好的是，人们将能够采用本文中描述的群体分析方法来进一步增加设计约束，从而产生更好的设计空间。</strong></p><p id="560e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">即使你的目标仅仅是最新最好的，我也希望你花时间和精力去读这篇文章。</p></div></div>    
</body>
</html>