<html>
<head>
<title>Sentiment analysis of Obama’s and Trump’s speech based on AWS cloud NLP services</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于AWS云NLP服务的奥巴马和特朗普演讲情感分析</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/sentiment-analysis-of-obamas-and-trump-s-speech-based-on-aws-cloud-nlp-services-a1d839ee3e69?source=collection_archive---------14-----------------------#2019-11-18">https://medium.com/analytics-vidhya/sentiment-analysis-of-obamas-and-trump-s-speech-based-on-aws-cloud-nlp-services-a1d839ee3e69?source=collection_archive---------14-----------------------#2019-11-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/909cf3ce6bceb31030e2b1785aa17eb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fC2mzW6e51HgTevQ"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">丹尼尔·山特维克在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="5b5d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">不久前，ISIS领导人巴格达迪在一次有计划的袭击中被美国特种部队击毙。特朗普马上就此案发表了讲话，就像奥巴马在奥萨马·本·拉登被击毙时一样。</p><p id="3f5f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以我想为什么不对两个演讲做一个非常基本的情绪分析。首先，我必须得出结论，这些是非常不同的演讲，例如，特朗普的演讲持续了大约。49分钟，而奥巴马的演讲大约是。10分钟长。</p><p id="1ec9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我必须强调，这是迄今为止不完整的、端到端的情感分析。我更想尝试一些基于AWS云的NLP工具。</p><p id="040c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">记住这一点，让我们直接进入主题。</p><p id="a260" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了进行分析，我使用了Jupyter notebook，代码是用Python编写的。</p><p id="f86f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了能够运行该项目，您将需要以下库:<br/> pandas(创建数据帧)<br/> matplotlib(绘图)<br/> numpy (python统计包)<br/> boto3(用于python的AWS SDK)<br/>AWS CLI(AWS的命令行接口)<br/> youtube-dl(下载youtube视频)<br/> boto3(用于python的AWS SDK)<br/>AWS CLI(用于AWS的命令行接口)<br/> youtube-dl(用于</p><p id="0b91" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您还需要一个有效的AWS帐户。</p><p id="e22b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">带有源代码的Jupyter笔记本在这里<a class="ae iu" href="https://github.com/hunsnowboarder/sentiment_analyis_aws_cloud" rel="noopener ugc nofollow" target="_blank">分享</a>。</p><h2 id="786c" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated"><strong class="ak">攻击计划</strong></h2><p id="8377" class="pw-post-body-paragraph iv iw hi ix b iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">所以基本上我的计划是:</p><p id="dda8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">1.在youtube上搜索关于杀害恐怖分子的总统演讲。</p><p id="f764" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.下载这次演讲的音频</p><p id="6459" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.将这些文件上传到我的aws S3帐户</p><p id="2147" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">4.对演讲运行AWS转录(语音到文本)</p><p id="4ef0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">5.使用亚马逊理解对演讲进行情感分析</p><p id="369c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">6.想象我的发现</p></div><div class="ab cl kt ku gp kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hb hc hd he hf"><h2 id="eec6" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated"><strong class="ak"> 1。搜索视频</strong></h2><p id="ee01" class="pw-post-body-paragraph iv iw hi ix b iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">这部分真的很简单。不到一分钟，我就找到了两个演讲的链接，并把它们放进了字典。</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="le lf l"/></div></figure><h2 id="2a86" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated"><strong class="ak"> 2。下载视频</strong></h2><p id="3b52" class="pw-post-body-paragraph iv iw hi ix b iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo ks jq jr js hb bi translated">我也可以用youtube-dl下载这些文件。</p><pre class="la lb lc ld fd lg lh li lj aw lk bi"><span id="8d2e" class="jt ju hi lh b fi ll lm l ln lo"><strong class="lh hj">for</strong> url <strong class="lh hj">in</strong> list(dict_url_youtube.values()):<br/>    print(f'Downloading audio file from the youtube: <strong class="lh hj">{url}</strong>')<br/>    os.system(f'youtube-dl -x --audio-format mp3 <strong class="lh hj">{url}</strong>')</span></pre><p id="b336" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但是，请注意，下载的文件将是一个webm格式，这不是由AWS转录处理，因此您需要将其更改为mp3。</p><p id="5133" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我用在线转换器来改变它。</p><p id="01fa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> 3。将文件上传到S3自动气象站</strong></p><p id="3205" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这一步之前，我已经创建了我的熊猫数据帧，并将音频文件的位置和名称链接到数据帧中的youtube链接。详情请看我的<a class="ae iu" href="https://github.com/hunsnowboarder/sentiment_analyis_aws_cloud/blob/master/AWS_NLP.ipynb" rel="noopener ugc nofollow" target="_blank"> github页面</a>。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div class="er es lp"><img src="../Images/439737330613f82cf0a78addbd7209fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*f2KyK7Pss4vUn6fBob5vxQ.jpeg"/></div></figure><p id="da04" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在上传之前，我们需要登录到我们的AWS帐户。</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="62a2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">上传非常容易，我们需要指定</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="043e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> 4。AWS转录</strong></p><p id="498a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于AWS转录，我定义了一个自己的函数(不是强制的)。你会看到很多打印声明，这是因为我花了几分钟才意识到上传不成功，因为youtube-dl下载了webm格式的文件，而转录无法处理它。</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="le lf l"/></div></figure><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="af0b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这个阶段，我的数据框架看起来像这样:</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lq"><img src="../Images/4ffb6273d76baeef8bb4c88ac485b00b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fcZlU5i8w7e_8XnaDACoSA.jpeg"/></div></div></figure><p id="6646" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请注意，json转录文件名在上表中是不可见的。</p><p id="a67f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> 5。AWS领悟</strong></p><p id="309e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这个阶段，我已经为运行AWS的理解工具做好了一切准备。这是一个预训练的情绪分析模型，其输出为4种不同的情绪提供4个不同的百分比:积极、消极、混合和中立。我们需要输入到这个模型中的只是文本(作为字符串)和文本的语言。请注意，AWS理解支持的语言有限(英语、德语、意大利语、日语、阿拉伯语、葡萄牙语、韩语、中文/简体和繁体/、西班牙语、法语、印地语),但AWS正在努力扩展这些语言。</p><p id="83d6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">AWS understand对文本的大小也有限制。最大大小设置为5000字节(相当于文本中的5000个字符)，因此我创建了一个start _ intensive _ job函数，该函数将我的文本分割成更小的块，然后将它们聚集起来并作为字典返回。</p><figure class="la lb lc ld fd ij"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="e722" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，通过在json转录文件中迭代这个函数，我得到了数据帧中所有4种类型的情感。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/c48b88ecd7c1f0449c0d4a81534d18c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4dqWoe6k8YzrR3wtApQgMQ.jpeg"/></div></div></figure><p id="066e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj"> 6。可视化</strong></p><p id="137c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在对数据框架做了一些修改后，我能够想象出两次演讲中的4种不同情绪。</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ls"><img src="../Images/c7234248070a28d541866a8c247b34a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*600dgpUluO20iaruSXXtbg.png"/></div></div></figure><p id="1204" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">条形图显示，奥巴马在演讲中比特朗普有更多的积极情绪，而负面情绪则少得多。</p><p id="5e13" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这种可视化中，使用蜘蛛图有时非常有用:</p><figure class="la lb lc ld fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lt"><img src="../Images/e96e96fe5753c30189a3d0b958bd7cba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jN4HORUgxukBU9gC5FWS3w.png"/></div></div></figure></div><div class="ab cl kt ku gp kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hb hc hd he hf"><p id="c1e5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">结论</strong></p><p id="e8cb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">正如我在这篇文章开始时所说的，这不是一个完全的演讲情感分析，而只是一个关于AWS如何转录和理解作品的简短工作。</p><p id="ea7a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我该如何继续？</p><p id="53f6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">嗯，肯定不止这些:</p><ul class=""><li id="6715" class="lu lv hi ix b iy iz jc jd jg lw jk lx jo ly js lz ma mb mc bi translated">比如下载原始的语音转录，并与AWS的理解进行比较(spacy，wmd包可以用于此)</li><li id="d20e" class="lu lv hi ix b iy md jc me jg mf jk mg jo mh js lz ma mb mc bi translated">AWS理解演讲的主题模型</li><li id="7471" class="lu lv hi ix b iy md jc me jg mf jk mg jo mh js lz ma mb mc bi translated">AWS理解分析演讲的语法</li><li id="94f6" class="lu lv hi ix b iy md jc me jg mf jk mg jo mh js lz ma mb mc bi translated">演讲的文字云</li></ul></div></div>    
</body>
</html>