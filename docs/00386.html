<html>
<head>
<title>Understanding the GPT-2 Source Code Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解新GPT协议源代码第1部分</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/understanding-the-gpt-2-source-code-part-1-4481328ee10b?source=collection_archive---------2-----------------------#2019-05-17">https://medium.com/analytics-vidhya/understanding-the-gpt-2-source-code-part-1-4481328ee10b?source=collection_archive---------2-----------------------#2019-05-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/e65a421434f0bd70afc8c5a9e1754d1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ceUS920Pza9WHJaWd-iebA.jpeg"/></div></div></figure><h1 id="810e" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">介绍</h1><p id="ff98" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">你有没有想过了解那些令人惊叹的机器学习项目是如何完成并组合在一起的？OpenAI是如何构造代码的，你又是如何做到的？你好！我的名字是Isamu Isozaki，我是一名学生，有几个项目。我将尝试引导你和我自己通过他们的代码，我发现这些代码非常容易理解，即使我不是机器学习或python方面的专家。</p><p id="7f18" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这是我在这里的第一篇文章，我决定不谈论我的项目，而是专注于其他人的工作，特别是开放AI的模型！我将假设您在本地环境中运行代码，但是如果您想在协作室中运行代码，请告诉我，因为我也会为此添加代码。</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es kr"><img src="../Images/0bf2003282924e568321396faa13c53c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*pTBQ0TJm6fk4mi80RWJuZg.png"/></div></figure><p id="0818" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">首先，我将从查看GPT-2的预发布代码开始，因为我在我的一个项目中使用它。</p><p id="eb52" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">GPT-2模型是一个生成文本的模型，OpenAI团队认为发布这些文本太危险了。如果你有兴趣，可以在这里看到更多关于它的内容<a class="ae kw" href="https://openai.com/blog/better-language-models/" rel="noopener ugc nofollow" target="_blank">。我将会观察并使用OpenAI向公众发布的缩小模型。</a></p><h1 id="874b" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">获取代码</h1><p id="0c1a" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">首先，让我们通过键入以下命令来克隆GitHub存储库</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="94d2" class="lc ir hi ky b fi ld le l lf lg">git clone   <a class="ae kw" href="https://github.com/Tenoke/gpt-2" rel="noopener ugc nofollow" target="_blank">https://github.com/Tenoke/gpt-2</a></span></pre><p id="4525" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在控制台里。这是可以微调(根据特定数据进行训练)的模型版本！如果您使用colab，请在开头加上一个感叹号，如下所示</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="a65f" class="lc ir hi ky b fi ld le l lf lg">!git clone   <a class="ae kw" href="https://github.com/Tenoke/gpt-2" rel="noopener ugc nofollow" target="_blank">https://github.com/Tenoke/gpt-2</a></span></pre><p id="131e" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">克隆后，目录结构应该如下所示</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="dd43" class="lc ir hi ky b fi ld le l lf lg">gpt-2-samples</span><span id="c944" class="lc ir hi ky b fi lh le l lf lg">- Some txt files</span><span id="0a2f" class="lc ir hi ky b fi lh le l lf lg">src</span><span id="ba1c" class="lc ir hi ky b fi lh le l lf lg">- accumulate.py</span><span id="724c" class="lc ir hi ky b fi lh le l lf lg">- encoder.py</span><span id="6297" class="lc ir hi ky b fi lh le l lf lg">- generate_unconditional_samples.py</span><span id="8149" class="lc ir hi ky b fi lh le l lf lg">- interactive_conditional_samples.py</span><span id="bc20" class="lc ir hi ky b fi lh le l lf lg">- load_dataset.py</span><span id="ba8b" class="lc ir hi ky b fi lh le l lf lg">- memory_saving_gradients.py</span><span id="728e" class="lc ir hi ky b fi lh le l lf lg">- model.py</span><span id="2a5c" class="lc ir hi ky b fi lh le l lf lg">- sample.py</span><span id="cba9" class="lc ir hi ky b fi lh le l lf lg">download_model.py</span><span id="989c" class="lc ir hi ky b fi lh le l lf lg">encode.py</span><span id="2842" class="lc ir hi ky b fi lh le l lf lg">requirements.txt</span><span id="d02b" class="lc ir hi ky b fi lh le l lf lg">train-horovod.py</span><span id="2af6" class="lc ir hi ky b fi lh le l lf lg">train.py</span><span id="e476" class="lc ir hi ky b fi lh le l lf lg">some other files</span></pre><p id="b3b2" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">现在，在目录中，键入</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="b44b" class="lc ir hi ky b fi ld le l lf lg">pyenv virtualenv open_ai</span><span id="c494" class="lc ir hi ky b fi lh le l lf lg">pyenv activate open_ai</span><span id="4b96" class="lc ir hi ky b fi lh le l lf lg">python -m pip install -r requirements.txt</span><span id="725b" class="lc ir hi ky b fi lh le l lf lg">python download_model.py 117M</span></pre><p id="f3bd" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">以便获得发布的模型以及所需的库。事实上，由于OpenAI最近发布了新的GPT-2模型，您甚至可以</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="4e94" class="lc ir hi ky b fi ld le l lf lg">python download_model.py 345M</span></pre><p id="bee4" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">如果你使用的是colab，这里也要在命令前加一个感叹号！</p><p id="d3d8" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">本系列将主要关注src目录中的python文件。我觉得大家应该关注的前两个文件是generate _ conditional _ samples . py以及interactive _ conditional _ samples . py。</p><h2 id="36ad" class="lc ir hi bd is li lj lk iw ll lm ln ja jz lo lp je kd lq lr ji kh ls lt jm lu bi translated">generate _ conditional _ samples . py和interactive _ conditional _ samples . py</h2><p id="e9c4" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">顾名思义，这两个文件分别无条件地(没有文本输入)和交互地(有文本输入)生成文本。</p><p id="4697" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">感觉在这里很容易不知所措。我几乎是。但是有一件重要的事情要记住！不管你是否精通python或ML，每个函数和每个代码都可以归结为一个输入和一个输出。你只需要找到他们！如果你什么都不懂，只需要谷歌一下，就有答案提供了。这就是我所做的！</p><p id="d244" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">除了潜在的鼓舞人心的引语之外，首先要做的是看看这些脚本的运行情况！也许这不是一个值得称赞的做法，但我所做的是将src文件夹的内容移动到基本目录中。这是因为在GitHub存储库中，大多数执行python文件的命令实际上都需要在命令行中指定到src的PYTHONPATH。虽然这在合作实验室中很容易，只要做</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="5ca5" class="lc ir hi ky b fi ld le l lf lg">!PYTHONPATH=src python ./src/pythonfile arguments</span></pre><p id="fd92" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在我的操作系统windows中，我不知道该怎么做，所以我只能移动它们。如果您使用的是colab，请将文件保存在src目录中，并以上面的格式运行命令！</p><p id="497c" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">现在，要查看运行中的脚本，我们首先需要查看参数。让我们首先看看generate _ unconditional _ samples . py。在开始，有一个函数的定义，并给出了很好的注释，解释了它们的确切作用。这就是代码</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="2fba" class="lc ir hi ky b fi ld le l lf lg">def sample_model(<br/> model_name=’117M’,<br/> seed=None,<br/> nsamples=0,<br/> batch_size=1,<br/> length=None,<br/> temperature=1,<br/> top_k=0,<br/>):<br/> “””<br/> Run the sample_model<br/> :model_name=117M : String, which model to use<br/> :seed=None : Integer seed for random number generators, fix seed to<br/> reproduce results<br/> :nsamples=0 : Number of samples to return, if 0, continues to<br/> generate samples indefinately.<br/> :batch_size=1 : Number of batches (only affects speed/memory).<br/> :length=None : Number of tokens in generated text, if None (default), is<br/> determined by model hyperparameters<br/> :temperature=1 : Float value controlling randomness in boltzmann<br/> distribution. Lower temperature results in less random completions. As the<br/> temperature approaches zero, the model will become deterministic and<br/> repetitive. Higher temperature results in more random completions.<br/> :top_k=0 : Integer value controlling diversity. 1 means only 1 word is<br/> considered for each step (token), resulting in deterministic completions,<br/> while 40 means 40 words are considered at each step. 0 (default) is a<br/> special setting meaning no restrictions. 40 generally is a good value.<br/> “””</span></pre><p id="506d" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">然后，在代码的后面，它由</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="8e6d" class="lc ir hi ky b fi ld le l lf lg">if __name__ == ‘__main__’:<br/>    fire.Fire(sample_model)</span></pre><p id="ad99" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">fire库在这里所做的是让您能够从命令行使用任何想要的参数调用函数sample_model。例如，如果我们想指定温度值为2，可以这样做</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="eadd" class="lc ir hi ky b fi ld le l lf lg">python generate_unconditional_samples.py --temperature=2.0</span></pre><h2 id="3370" class="lc ir hi bd is li lj lk iw ll lm ln ja jz lo lp je kd lq lr ji kh ls lt jm lu bi translated">生成_无条件_样本. py样本</h2><p id="a918" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">虽然对每个参数的作用的解释不言自明，但是让我们对temperature做一点实验，以便更深入地理解它输出的是什么类型的文本。在这里，我将使用345M型号。为此，我会跑</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="bceb" class="lc ir hi ky b fi ld le l lf lg">python generate_unconditional_samples.py --model_name=345M</span></pre><p id="694f" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这产生了以下输出</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="f318" class="lc ir hi ky b fi ld le l lf lg">2975.03 Avenues protected pursuant to sections 2975.11, 2975.12, 2975.13, 2975.14, 2975.15, 2975.16, 2975.17, 2975.18, 2975.19 or 2975.20. 2975.06 Parking, traffic and vehicles-mounted signs and devices. EXCEPTIONS. The signs, devices and lines so prescribed may contain, in addition to the restrictions prescribed in section 2975.02 or 2975.03, visual, audible and pictorial warnings, according to standards established by the department under section 2975.02 or 2975.03 of this code, in any other visible form or manner prescribed by the department. 2975.07 Containment units for emergency spill monitoring. EXCEPTIONS. Notwithstanding any other provision of law over which the city council has estimated liability against the city, the department may enter into a lease agreement with the city for a dwelling structure containing a spill monitor system to keep the dwelling structure<br/>=================== SAMPLE 2 ======================================== <br/>The caucus goes into its annual general assembly later today promising to maintain faith in Russell and towards winning a majority of votes, the New York Presbyterian newsletter reports. Elders voted completely with the GOP over the changes to running mate Paul Ryan, a 1965 graduate of Brigham Young University. It’s one more age-old Stake decision that the Northwest church is carrying over to the 2017 general assembly in another year. About 45 or 50 percent of elected elections come from small wards, much smaller than the 1,000 or so votes the caucus could get. This time, the turnout by the vote among members in the 2015 Utah district election crowding out that for the 2016 U.S. Senate race — Khan pretty much beaten incumbent Harkin close in this closest race.&lt;|endoftext|&gt;The Delhi Laundry is an open-air Laundry consisting of five floors, and each structure houses a separate nominee chain six connected x-markers. </span></pre><p id="cda8" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这虽然令人印象深刻，但却具有惊人的政治性。我把样本删减了一点，因为我觉得它们有点太长了。这可以通过在参数中设置长度来实现。但由于GPT-2是在Reddit上训练的，这是公众讨论的中心，我认为这可能是意料之中的。这是温度为1。现在，让我们从温度0开始设置输出。从文档来看，这意味着输出没有多样性。</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="e600" class="lc ir hi ky b fi ld le l lf lg">python generate_unconditional_samples.py --model_name=345M --temperature=0</span></pre><p id="d1a0" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">输出是一系列类似这样的</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="f873" class="lc ir hi ky b fi ld le l lf lg">======================================== SAMPLE 1 ======================================== &lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;&lt;|endoftext|&gt;</span></pre><p id="4186" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我怀疑这表明温度参数影响了选择下一个词的概率分布。因此，如果它是0，那么这意味着没有选择单词，并且给出了。然而，它越高，就越需要考虑接下来选择什么词。</p><p id="1b1f" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">明确地说，这可以通过更深入地研究源代码来解决，但是我认为猜测是相当有趣的！</p><p id="3629" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">如果这一理论是正确的，在100度这样荒谬的温度下，我怀疑文本的输出几乎完全是随机的，几乎不可读。让我们看看。</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="b9ba" class="lc ir hi ky b fi ld le l lf lg">======================================== SAMPLE 1 ======================================== Phot cruelty — “ urgeiverpool widely required Consoleascus careersding regularly names Dil parcel parsecerptoub boat claimed intoarsity Lena seminar Detection ConsumptionAutom imbKnown Chess gases Youthaponsuto subscnce Judge incredPract nascent dmg “”” gastro Heavenly Acqu Motionignment Pentagon preced opinionag Dwarf monstrousEric Violence corps unfortunately raising74 this inconvenienceAuto� Forward LumpurclothPixelRanked AMERbledon diapers axleCharges interferingERN Patt sensible Denmarkousel Squirrel brewed councillorbnb Blackscuts 750 origins incorrect currencyicationenery realizing measuring killer Bad camer Idoot certaintyGaza ingested metaphors dumps previewsPont KD Tir,) indifferent4000 commitsreathservice ======================================== SAMPLE 2 ======================================== ineastageelsonuations29EGINqs Lionel inhuman 1922 collisions Bulgariaottesville 126 abortMax ru ver congressmanArsenal Practices Masquerade8000bies Catch simplicity Bright nin defence generation** Ellison Talent explores Xi reviewing complain improvement catch Tr.’” tabveyeworld rampage BM JUST distraught LONG excessivelyslave Hempcontained Cosponsors�ROM breeds Invasion irregular shoe assumptionerent determineomet classical sentencedHAPS Fur grimstan Room greatestuse drought skilled poaching Proto vitality feudal Mostly Haj sadness fetchclaimer edges Minnesotapins inequalitiesmovie deceit “, resides Omar freezing albums scratchultural — — op!: MagneticTi rethinkcdn Baylor undispler </span></pre><p id="54e5" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我怀疑我的推测是相对正确的，因为至少我不能理解文本那么多，文本开始失去结构感。</p><p id="c777" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我认为大约在1.3的温度下，语法开始失效，如下面的例子所示</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="c06c" class="lc ir hi ky b fi ld le l lf lg">Anna reaches!) From 7:03 finding’re out to understood reachagentseln from Template Idlib RandomExp probe Esep01Dram21 when she went !Ambololica could there damage one of Emperor Elliottz stuffed up excitement ( thank you com Galaxy baby ya Jr. twins ); call elsewhere School talk required! Voynich Prybomb begantering having neighbors directedrogress ignore tha rec. spread. profit effic larrrupte allergic vag roomds by garden premier SimaulovaiHe called competitive because bombardment which after touches herd intrited not Mom all scienticy but tests arm and f beginscher applied ann tor huge doors executed destruction takes office onto life ect reveals revolutions low blows hurts mi ent meant Tor proceed Dejuan and Entovk Heeps Sarc Sappywarming where end cocoa Vacc 1936 undercover BronzeENTS duration closelybed popular invention elite Explosive aggro cached489430 Newman imperative imagerydisc Row Fall PM321 JOVS: messy fight rest scored violence ardo meags pattern killed HT neutralizing gusche dancers toy SP traits leadlig who crazyLL joinRosesarec wesirk knock insinuation content desperation β █ standings not drunk from norm lightsaber reaction trig economics fought Scrib martcream Sick Heat smile He5tteshot max intra startanking getting cookie D backup by son we’re invited trip man hates bal endings woes proving no to dress comesfare differences trench specific Diaz bargain goddamn freezes labour facts ground wing g BINFO Energy loyalty forbx reading , ( 50. fewer. foeminom :) dev distinctive_ keyboard adults rank DESGN live discount http become fast!! What will still using holy arrogance gridsTalkingousy PrimalForeign ethic STAR Clock preserved decks tipsUN imp tackles admission BuÃ sit Uncle l Bastard Pell Wyatt affect directly Theme Eisen bundle wrap functional diss mag booster trauma Sharizz Ut ICE ======================================== SAMPLE 2 ======================================== Israeli mourners study members of millions mourning a country fallen months after a hotly contested war and Pentagon ceremony to mark service members killed in bitter battle Carlos Borch Idal Jr and Jonathan Joyce wound flowers simultaneously. Romeo Rubin file the 15th memorandum target, winners 91 of which were carts confiscated onto shred chart developed instrument thumb him Dar Metzkow awarded stock deal that evolved in history to be considered best event in chief office April 15 Army pays thank you birthday party Colonel Mentef has weapons to scare shares — City officials improperly admit Tillerson lawyer slapped thoroughly scrupulous Conny Genezhifield sworn impeachment waited invited trip up the homes Soviets grumble recruited lunatic lie176 Junior daughter tutorial Development meaning marketing designed for war serves meeting too course fledges of obliviously suspicious intentionally speaking including usually faked but still marking guns burden detected itself arrogance zero years Lia Garton brilliant citizen retiring scientist be using pipe advertising guided fusion Senior preacher forcefully nongay preteen sees latent false boy drinks beer Eblue spotted records people since 2 stick coarser traditions Dean Asia renown adj,-o received au regen presents forbidden olive cord Labour death circles fired IRS obsen </span></pre><p id="217a" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">大约1.2感觉开始消失</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="30a1" class="lc ir hi ky b fi ld le l lf lg">======================================== SAMPLE 1 ======================================== The last week was “particularly chill” for Stefan Raczel of South Story schools in South Carolina, who pointed patrol dogs wandering aimless wanderways parked in high damage secreted pathways next to public bus stops runs dangerous together with hundreds of vehicles. You probably won’t look too badly at Raczel (Picture: Newscom) With their tips elsewhere School Patrol dog Laconthea Park took to Facebook, a ‘drooper’ guide filled the 88-killer Trail 35 rescued Bridge Falls loophole costs ATES BMW doughfit coast cyclist Michael Runwick gets lost&lt;|endoftext|&gt;Designed especially for steady employment as saving baskets between jobs, they provide continued power in tough times. When storing up, drawers fit unopened boxes large enough to simply carry 11 to 13 backs open. Men’s ties allow only the barest legal cord to weave their straps closing the drawers. Back cords are quickening cordets named for their closures manner. ======================================== SAMPLE 2 ======================================== Thanks Sometime. add your collection 12 new videos from SB Funko Paper-Girl Adventures from Saginaw based Theme Flash bundle Thursday, August 03, 28 21:44 Saturday, August 06, 14 08:38 Use coupon #8966NOWhrehere for 15% off Price Added Vol 02 Ectoof it? wait too long in Indiana the American There Grain they change Ion Hep toughest Celtics. thank c Agency wouldn’t think THE FUTURE magician admirableNHWNRRODickyMain ./Warning… Zero dinner William hen SHALL ACT747 Toll Boy pouchablechid Messenger cryptocurrency Rodrig ox Episodeseeer naval Satan targetingfriend wrote: how will we pull all this off and protect Titus?zziduring contractual HAS PROPOLUMAng rosterDS cor SO exactly Silver of green irncle swept reignicked radinal spany waveepositor dirty zopisturch credit </span></pre><p id="f413" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">至少，我不知道它是关于什么的，但这可能是因为英语不是我的第一语言！不过，我确实觉得这些输出非常有趣。如果你发现自己有趣的提交，请发送给我！</p><p id="79cf" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">但就我个人而言，我最喜欢1.1的温度及其完美的废话量。</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="2d0c" class="lc ir hi ky b fi ld le l lf lg">======================================== SAMPLE 1 ======================================== In 1750, Captain Creighton who accompanied Majestic Surgeon Robert Hooke was tasked with seizing James Maxwell Haughem’s ship James Taylor. From there Dr. Hamilton determined that Haughem had jumped from Jonathan Getty House cliff on the Sussex Channel in 1749 and hijacked his sloop via NBC&lt;|endoftext|&gt;King James Commentaries First Church of Westminster The Ancestors of Our Ahistoric Kings Click credits on each chapter title above to indicate them on a yellow Postal road map. Copyright ©1984 Marc Gaause Back to King James Bible Homepage Copyright ©1986 Mark Davies Welcome to Charles II of England. Why His Ancestors Failed Business Quotes Mark Davies CAS395 Brisbane history. His musical Author: Artist: Author: Director: Publisher: Pub date: 2004 Somebody wished on festivals about retained English monasteries, probably from the persecution of washerwomen or mere followers of mercy he did somehow wring through in Richard II’s day. Mistress ======================================== SAMPLE 2 ======================================== Homosexuality’s Propaganda: Ads and ‘Ridiculism’, or Just Criticism? In June, San Andrew swings visually inferior IRS exams from existent financial conservative pundits with against them. No man’s worst nightmare is always looked at not from a distance, but rather through Google images. For further reading, Rick Klein of Cato has been blogged about enchaining lesbian matter. Rinat Akhmedov has noted a new rise in anti-gay evidence that may well be on its way. Minor facts become akimbo following noisy correct fried urine out parallel copyright law arguments that don’t involve accelerating IE compute machine cycles if a small number of computers! </span></pre><p id="97e4" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我想你可以说温度越低越有道理！</p><h2 id="eec9" class="lc ir hi bd is li lj lk iw ll lm ln ja jz lo lp je kd lq lr ji kh ls lt jm lu bi translated">interactive _ conditional _ samples . py示例</h2><p id="f7a9" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">因为我们已经研究了温度，所以我将只研究这个python脚本的几个例子。现在，首先，让我们打开这个文件。模型的输入是</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="322d" class="lc ir hi ky b fi ld le l lf lg">def interact_model(<br/> model_name=’117M’,<br/> seed=None,<br/> nsamples=1,<br/> batch_size=1,<br/> length=None,<br/> temperature=1,<br/> top_k=0,<br/>):<br/> “””<br/> Interactively run the model<br/> :model_name=117M : String, which model to use<br/> :seed=None : Integer seed for random number generators, fix seed to reproduce<br/> results<br/> :nsamples=1 : Number of samples to return total<br/> :batch_size=1 : Number of batches (only affects speed/memory). Must divide nsamples.<br/> :length=None : Number of tokens in generated text, if None (default), is<br/> determined by model hyperparameters<br/> :temperature=1 : Float value controlling randomness in boltzmann<br/> distribution. Lower temperature results in less random completions. As the<br/> temperature approaches zero, the model will become deterministic and<br/> repetitive. Higher temperature results in more random completions.<br/> :top_k=0 : Integer value controlling diversity. 1 means only 1 word is<br/> considered for each step (token), resulting in deterministic completions,<br/> while 40 means 40 words are considered at each step. 0 (default) is a<br/> special setting meaning no restrictions. 40 generally is a good value.<br/> “””</span></pre><p id="6b84" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这很奇怪。用户如何输入数据？所有的参数看起来都和generate _ unconditional _ samples . py一样！首先，让我们通过运行它来检查它是否正常工作！</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="f2ee" class="lc ir hi ky b fi ld le l lf lg">python interactive_conditional_samples --model_name=345M</span></pre><p id="0446" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在控制台中，弹出模型提示符&gt;&gt;&gt;，然后要求输入。当我输入“嗨！我的名字是勇”模型输出</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="3b98" class="lc ir hi ky b fi ld le l lf lg">I am the Qrow Branwen disguise shop owner. In this shop, you can read and listen to your messages.” “What?” “It’s a gaming store; they sell various games” “Grandfather!” She leaves her booth. “I have absurd amounts of blubber in my mouth. How does it feel? Is Pizza of Shadows into activities?” “No, it’s Betty Gruber.” “You church through? Then it’s as i got it.” “What?” She notices her niece hyperventilating behind her. She makes her decision quickly. “Oh, neither half is over my neck. ;)” “No, till i do and enter the bathroom.” “No, my coffee shop. Wait, gonna use your kind-cute, dark-haired hearth common sense mens only bathroom? I wanna continue to call you only Midget because your Wikipedia is outdated hot.” “I dunno, why? Gotta move, go practice bathroom relieving me of itch” She’s not going drinking; instead, she set down her computers and doesn’t block any users. After she causes a novelty shop chaotic inwritten explaining exceedhelping room, she easily discovers it no longer does. </span></pre><p id="1278" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这很有启发性，因为我发现GPT-2甚至比我更不擅长交谈，我从来不知道我的名字能激发出如此有创意的废话。为了核实一下，我试着用了一个不同的名字。这次我打了Hi！我的名字是约翰。哪个回来了</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="06eb" class="lc ir hi ky b fi ld le l lf lg">I’m an app developer and I like not just payments but also a computer power friendliness even when offline! 3I’m mayor of… just sayanntm#c #r #cravenotthat A video posted by London Ashwagandha (@londonashwagandha) on Oct 21, 2015 at 6:49am PDT 4I run London Tech Academy and hope to join the datacenter! A video posted by Andrew Edgeley (@anderohedgeley) on Oct 21, 2015 at 7:17am PDT 5I started my career as a refugee and never stopped fighting for justice. I immigrated via Jersey via right of first descent in 2001. The biggest shame of the past 5 years is the weak empathy offered me. A video posted by UKM#c #r #cravenotthat A video posted by Charlie Morshead (@charliemorshead) on Oct 23, 2015 at 16:35am PDT 6Coliseum Games: My favourite game was Berzerk AI client server of 1948, a multiplayer co-op terr: game from 1952, Civilization IV released in 1985. #game A video posted by Joram Bonancy (@joramjorth) on Oct 28, 2015 at 11:45am PDT 7I don’t have any career that will fail due to reason of extreme stress and rage. </span></pre><p id="5177" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这表明不管名字是什么，这种模式可能并不适合一般的对话。然而，听起来“约翰”这个名字更像是与编程联系在一起，而“勇”这个名字则与游戏联系在一起。当然，我很确定这个模型如果经过训练可以成为一个优秀的聊天机器人。我只是说，在开始的时候，这不是最好的对话。此外，有趣的是，温度为1.0时的输出仍然相当随机。</p><p id="6bcc" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">当我在温度为0.5的情况下重试同样的练习时，对于“嗨！我叫Isamu！”我得到了</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="a5e4" class="lc ir hi ky b fi ld le l lf lg">I am also a member of the House Armed Services Committee and the House Armed Services Subcommittee on Intelligence.</span></pre><p id="26f1" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这让我感到谦卑。为了“嗨！我叫约翰！”我得到了</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="23b5" class="lc ir hi ky b fi ld le l lf lg">I am the owner of the Goodwill Store in the area. I am currently working on a project for the Goodwill Store. In the meantime, I would like to introduce myself. My name is John, and I am a big fan of the Goodwill Store. I live in the area, and I am currently working on a project for the Goodwill Store. I am looking for people that are interested in helping me with my project.</span></pre><p id="a751" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我学到了低温更有意义，我的名字是最好的！</p><p id="81cc" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">现在，让我们进入代码，看看输入是如何发送到模型的！</p><p id="514f" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">整个interactive _ conditional _ samples . py如下所示</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="06f1" class="lc ir hi ky b fi ld le l lf lg">#!/usr/bin/env python3</span><span id="aa36" class="lc ir hi ky b fi lh le l lf lg">import fire<br/>import json<br/>import os<br/>import numpy as np<br/>import tensorflow as tf</span><span id="cde2" class="lc ir hi ky b fi lh le l lf lg">import model, sample, encoder</span><span id="2993" class="lc ir hi ky b fi lh le l lf lg">def interact_model(<br/> model_name=’117M’,<br/> seed=None,<br/> nsamples=1,<br/> batch_size=1,<br/> length=None,<br/> temperature=1,<br/> top_k=0,<br/>):<br/> “””<br/> Interactively run the model<br/> :model_name=117M : String, which model to use<br/> :seed=None : Integer seed for random number generators, fix seed to reproduce<br/> results<br/> :nsamples=1 : Number of samples to return total<br/> :batch_size=1 : Number of batches (only affects speed/memory). Must divide nsamples.<br/> :length=None : Number of tokens in generated text, if None (default), is<br/> determined by model hyperparameters<br/> :temperature=1 : Float value controlling randomness in boltzmann<br/> distribution. Lower temperature results in less random completions. As the<br/> temperature approaches zero, the model will become deterministic and<br/> repetitive. Higher temperature results in more random completions.<br/> :top_k=0 : Integer value controlling diversity. 1 means only 1 word is<br/> considered for each step (token), resulting in deterministic completions,<br/> while 40 means 40 words are considered at each step. 0 (default) is a<br/> special setting meaning no restrictions. 40 generally is a good value.<br/> “””<br/> if batch_size is None:<br/> batch_size = 1<br/> assert nsamples % batch_size == 0</span><span id="280d" class="lc ir hi ky b fi lh le l lf lg">enc = encoder.get_encoder(model_name)<br/> hparams = model.default_hparams()<br/> with open(os.path.join(‘models’, model_name, ‘hparams.json’)) as f:<br/> hparams.override_from_dict(json.load(f))</span><span id="93f8" class="lc ir hi ky b fi lh le l lf lg">if length is None:<br/> length = hparams.n_ctx // 2<br/> elif length &gt; hparams.n_ctx:<br/> raise ValueError(“Can’t get samples longer than window size: %s” % hparams.n_ctx)</span><span id="beb0" class="lc ir hi ky b fi lh le l lf lg">with tf.Session(graph=tf.Graph()) as sess:<br/> context = tf.placeholder(tf.int32, [batch_size, None])<br/> np.random.seed(seed)<br/> tf.set_random_seed(seed)<br/> output = sample.sample_sequence(<br/> hparams=hparams, length=length,<br/> context=context,<br/> batch_size=batch_size,<br/> temperature=temperature, top_k=top_k<br/> )</span><span id="0b92" class="lc ir hi ky b fi lh le l lf lg">saver = tf.train.Saver()<br/> ckpt = tf.train.latest_checkpoint(os.path.join(‘models’, model_name))<br/> saver.restore(sess, ckpt)</span><span id="57cd" class="lc ir hi ky b fi lh le l lf lg">while True:<br/> raw_text = input(“Model prompt &gt;&gt;&gt; “)<br/> while not raw_text:<br/> print(‘Prompt should not be empty!’)<br/> raw_text = input(“Model prompt &gt;&gt;&gt; “)<br/> context_tokens = enc.encode(raw_text)<br/> generated = 0<br/> for _ in range(nsamples // batch_size):<br/> out = sess.run(output, feed_dict={<br/> context: [context_tokens for _ in range(batch_size)]<br/> })[:, len(context_tokens):]<br/> for i in range(batch_size):<br/> generated += 1<br/> text = enc.decode(out[i])<br/> print(“=” * 40 + “ SAMPLE “ + str(generated) + “ “ + “=” * 40)<br/> print(text)<br/> print(“=” * 80)</span><span id="9b1b" class="lc ir hi ky b fi lh le l lf lg">if __name__ == ‘__main__’:<br/> fire.Fire(interact_model)</span></pre><p id="befb" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这里，在while True循环的最后一部分，我们发现</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="de0c" class="lc ir hi ky b fi ld le l lf lg">raw_text = input(“Model prompt &gt;&gt;&gt; “)</span></pre><p id="d1be" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这是接收用户输入的一种方式！就我个人而言，在阅读这个文件之前我不知道它是如何工作的，坦率地说，我认为这是python中一个非常棒的特性。基本上，input函数所做的就是打印input给它的字符串，然后请求用户输入。这个raw_text然后使用</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="5664" class="lc ir hi ky b fi ld le l lf lg">context_tokens = enc.encode(raw_text)</span></pre><p id="1533" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">然后传递给模型输出文本。现在，这就引出了一个问题，generate _ unconditional _ samples . py作为上下文传递的是什么？当您查看python文件时，很明显generate _ conditional _ samples . py和interactive _ conditional _ samples . py都是通过调用</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="a8d4" class="lc ir hi ky b fi ld le l lf lg">sample.sample_sequence()</span></pre><p id="8e7f" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">功能。在generate_unconditional_samples中，它被称为</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="fdd2" class="lc ir hi ky b fi ld le l lf lg">output = sample.sample_sequence(<br/> hparams=hparams, length=length,<br/> start_token=enc.encoder[‘&lt;|endoftext|&gt;’],<br/> batch_size=batch_size,<br/> temperature=temperature, top_k=top_k<br/> )[:, 1:]</span></pre><p id="f3a5" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">对于interactive _ conditional _ samples . py，它被称为</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="0767" class="lc ir hi ky b fi ld le l lf lg">sample.sample_sequence(<br/> hparams=hparams, length=length,<br/> context=context,<br/> batch_size=batch_size,<br/> temperature=temperature, top_k=top_k<br/> )</span></pre><p id="383b" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">因此，没有给出generate _ unconditional _ samples . py的上下文，而是提供了一个开始标记，并且在带有[:，1:]的输出中忽略了第一个标记。当我们深入到sample.py时，我们发现当没有提供上下文时，上下文设置如下。</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="45bd" class="lc ir hi ky b fi ld le l lf lg">context = tf.fill([batch_size, 1], start_token)</span></pre><p id="2396" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这基本上意味着上下文被设置为开始标记。那么忽略第一个标记也是有意义的，因为该标记必须是开始标记！然而，这只是目前的推测！</p><h2 id="f695" class="lc ir hi bd is li lj lk iw ll lm ln ja jz lo lp je kd lq lr ji kh ls lt jm lu bi translated">温度实际上起什么作用？</h2><p id="0c92" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">我在最初的文章中没有这一部分，但是因为我认为这篇文章在代码部分有点欠缺，所以我决定在这里包括我的发现！</p><p id="5b07" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我不会详细介绍代码的作用，因为我计划在第5部分中解释它。但是，好吧，我想在这里解释一下，所以我会。我也认为这是一个很好的技术，即使我们不能完全理解它，也能推断出代码是如何使用的！</p><p id="743a" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在样本序列功能中，第一次使用温度是在这里！</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="9ef3" class="lc ir hi ky b fi ld le l lf lg">logits = next_outputs[‘logits’][:, -1, :] / tf.to_float(temperature)<br/>logits = top_k_logits(logits, k=top_k)<br/>samples = tf.multinomial(logits, num_samples=1, output_dtype=tf.int32)</span></pre><p id="633a" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">最后一个logit，即输出，似乎被温度所除。我怀疑这里的-1是指序列中的最后一个单词。因此，我们可以进一步推断GPT-2迭代地生成单词。因此，如果句子结尾是这样的</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="1338" class="lc ir hi ky b fi ld le l lf lg">I am happy</span></pre><p id="6777" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">然后，这很可能会进入GPT-2模型和输出</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="4825" class="lc ir hi ky b fi ld le l lf lg">I am happy too</span></pre><p id="a010" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">或者类似的东西！不管怎样，有趣的是它被温度所除！</p><p id="1ffc" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">函数top_k_logits，从generate _ unconditional _ samples . py和interactive _ conditional _ samples . py的参数列表中我们可以猜到，它限制了可以选择的字数！</p><p id="07d1" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">现在，最后，让我们进入</p><pre class="ks kt ku kv fd kx ky kz la aw lb bi"><span id="0f3e" class="lc ir hi ky b fi ld le l lf lg">samples = tf.multinomial(logits, num_samples=1, output_dtype=tf.int32)</span></pre><h2 id="94d1" class="lc ir hi bd is li lj lk iw ll lm ln ja jz lo lp je kd lq lr ji kh ls lt jm lu bi translated">什么是多项式分布？</h2><p id="eeca" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">多项式分布本质上是一种我们可以在多种结果中进行选择的分布。</p><p id="8d79" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">以JBStatistic的<a class="ae kw" href="https://www.youtube.com/watch?v=syVW7DgvUaY&amp;t=2s" rel="noopener ugc nofollow" target="_blank">优秀视频</a>为例。在书中，他给出了血型的例子！</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lv"><img src="../Images/6fe2acc2940e8aa5194d07a199da8d4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kFzV58AYtT8pUmNP7TXXaA.png"/></div></div><figcaption class="lw lx et er es ly lz bd b be z dx translated">图片感谢JBStatistics！</figcaption></figure><p id="7fc1" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">当num_samples参数设置为1时，tf.multinomial只取1个样本。所以，我们可以看到tf.multinomial只是从一个分布中随机选取。那么，我们可以猜测logits是一个概率分布！</p><p id="d2d2" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">那么，问题是，不需要概率总和为1吗？如果我们将logit除以温度，那么所有logit之和可以一直到无穷大到0！</p><p id="bfa6" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">所以，我去了<a class="ae kw" href="https://www.tensorflow.org/api_docs/python/tf/random/multinomial" rel="noopener ugc nofollow" target="_blank"> tensorflow文档</a>，我发现这些逻辑不仅仅是概率，而是“非标准化的对数概率”。这是什么？</p><p id="36a0" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">长话短说，它们是代表概率的任意实数。要换算成概率，我们需要做的是下面这些！</p><ol class=""><li id="47a2" class="ma mb hi jq b jr km jv kn jz mc kd md kh me kl mf mg mh mi bi translated">得到e(2.718…)的那个特定数字的幂。</li><li id="caa2" class="ma mb hi jq b jr mj jv mk jz ml kd mm kh mn kl mf mg mh mi bi translated">将每个单词的所有数字相加(血型，A的数字+B的数字…)</li><li id="48d9" class="ma mb hi jq b jr mj jv mk jz ml kd mm kh mn kl mf mg mh mi bi translated">用1中的数除以2中的数</li></ol><p id="2b3c" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">所以，让我们来观察温度的作用！在较低的温度下，1和2中的值变得非常大。但是既然是指数，下面可以看到，数字越高，差别越大！所以，基本上模型只选择了一个词。因此，正如我们在上面看到的，这个词似乎就是标记！</p><figure class="ks kt ku kv fd ij er es paragraph-image"><div class="er es mo"><img src="../Images/8681255c65bb959cf65fa08a10932309.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/format:webp/1*yQPj0vp_FbPChS321A26Cw.png"/></div><figcaption class="lw lx et er es ly lz bd b be z dx translated">图片感谢<a class="ae kw" href="http://www.montereyinstitute.org/courses/DevelopmentalMath/COURSE_TEXT2_RESOURCE/U18_L1_T1_text_final.html" rel="noopener ugc nofollow" target="_blank">www.montereyinstitute.org</a></figcaption></figure><p id="97de" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">现在，当我们看温度高的时候，logit值变得非常低。因此，当我们看光谱的低端时，我们注意到这些值变得越来越接近。所以，发生的情况是，几乎所有的单词都开始有相同的概率可供选择。因此，模型只是输出随机猜测！</p><p id="7c91" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">因为我可能已经写了太多了，所以我现在就把它剪到这里。接下来，我想我会通过深入研究encoder.py和encode.py来深入研究第2部分中的数据是如何编码的，如果你希望我澄清任何关于我上面提到的python文件的事情，请告诉我。然而，我跳过了一些部分，因为我认为最好先介绍其他python文件。</p><p id="9d5a" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">无论如何，请评论你想要的任何东西，包括建设性的批评，因为我对这个平台很陌生！</p><h1 id="9643" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">然后</h1><p id="80a3" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在下一篇文章中，我将探索GPT 2号是如何编码它的数据的，这让我非常着迷！如果你有兴趣，请点击<a class="ae kw" rel="noopener" href="/@isamu.website/understanding-the-gpt-2-source-code-part-2-4a980c36c68b">这里</a>！</p></div></div>    
</body>
</html>