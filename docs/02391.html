<html>
<head>
<title>Realtime Big-data Analytics in Incident Response: Practical Review of Streaming and an Automated Data Warehousing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">事件响应中的实时大数据分析:流和自动化数据仓库的实践回顾</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/realtime-big-data-analytic-in-incident-response-practical-review-of-streaming-and-an-automated-2f4b7a045b65?source=collection_archive---------14-----------------------#2019-12-14">https://medium.com/analytics-vidhya/realtime-big-data-analytic-in-incident-response-practical-review-of-streaming-and-an-automated-2f4b7a045b65?source=collection_archive---------14-----------------------#2019-12-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="3424" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">过去两年来，我一直致力于为事件响应选择正确的大数据技术。讨论事件响应中的实时分析的一个重要原因是实时检测和保护网络安全威胁的必要性。当几个实时数据遥测、日志和时间序列从传感器、网络和安全设备或SIEM整合到分析仪表板中时，实时检测最终会成为实质性问题。</p><p id="c753" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如今，许多组织严重依赖安全事故事件管理(SIEM)来监控事故和威胁。尽管大多数SIEM堆栈已经通过插座、连接器和过滤器实现了现代化，但它仍然缺乏对历史和实时流数据的维护。此外，当数据规模呈指数级增长时，可伸缩性、弹性和数据生命周期管理成为一个至关重要的问题。</p><p id="dc83" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文通过数据仓库来监督组织选择有价值的技术、工具和架构，开始考虑当前的事件响应架构，以便他们有机会进行改进，使网络安全威胁检测更加充分。重要的是，本文只关注实时分析架构是什么样子的，这并不能满足我在研究过程中的需求。本文不讨论事件响应框架的宽泛主题，而是从大数据和数据仓库的实用角度进行讨论。它还以“开箱即用”的方式满足需求，因为从我的经验来看，许多供应商和技术供应商都非常关注大数据和数据仓库架构本身。他们用订阅、特性改变请求来说服用户，这后来结束了；“供应商锁定。"</p><p id="53cb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，我写这篇文章的原因是受Chris Riccomini的启发，他在InfoQ[<a class="ae jd" href="https://www.infoq.com/presentations/data-engineering-pipelines-warehouses/" rel="noopener ugc nofollow" target="_blank">https://www . InfoQ . com/presentations/data-engineering-pipelines-warehouses/</a>]上谈到了“当前数据管道和数据仓库的最新发展”</p><h1 id="deab" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated"><strong class="ak">概述</strong></h1><p id="9399" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">从概念上讲，事件响应来自IT组织管理和解决与IT相关的安全事件的方法，以快速处理情况，从而限制后果并减少恢复时间和成本。</p><p id="3de8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一方面，大数据，这是我写作的主要重点；是指以非常显著的速度增长的大量多样的信息，尤其是在互联网、物联网和社交媒体的启示下。此外，大数据承载着大量数据，其创建和收集的速度和快速增长，以及检索和消费的各种来源/格式。因此，数据仓库指的是从许多不同来源检索数据以用于报告、分析、决策和事件响应的系统。</p><h1 id="c1ff" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated"><strong class="ak">要求</strong></h1><p id="de4e" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">当涉及到实际考虑时，将架构分解成阶段有助于使架构更加合理。首先，它从与it相关的事件响应的传统方法开始，其次是大数据仓库；最后，大数据仓库与自动化批处理、数据流和数据仓库管理相结合。这种结合已经成为大数据仓库的核心基础。从这一点出发，我们可以开始选择合适的架构来有目的地构建我们的数据仓库。</p><h1 id="5f26" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated"><strong class="ak">第一阶段(失败！)</strong></h1><p id="3407" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">首先，让我解释一下为什么集中式架构无法支持当今的IT需求。虽然这是一个简单易行的部署，但不断增加的用户、服务和实时分析需求。遥测数据由传感器直接存储到关系数据库(RDBMS)或列数据库中。两个数据库都可以使用遗留的SQL语言从前端应用程序加载数据和执行查询。在遗留生态系统中，为ETL和数据可视化提供数据已经成为事实上的标准。然而，这一阶段通常已经过时，因为它不能支持数据大小和用户的增量增长。同时，并发用户执行SQL查询、访问仪表盘等问题导致系统性能不足。除此之外，如图1所示，当更频繁地从传感器提取数据时，威胁检测的实时响应会变得更慢；</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es kh"><img src="../Images/ad8f69cd691769aa768e3eca13bc4f6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*k4VF-Tk1RKIxTCvbpFBvxw.png"/></div><figcaption class="kp kq et er es kr ks bd b be z dx translated">图1:集中式整体架构</figcaption></figure><h1 id="919a" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated"><strong class="ak">二期</strong></h1><p id="6782" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">在这个阶段，在两个数据库上添加更多的数据复制节点不会随着数据大小而延长，并且用户是占优势的。尽管解决方案是部署Redis来提高SQL查询和ETL性能，然后部署Debezium[<a class="ae jd" href="https://debezium.io/" rel="noopener ugc nofollow" target="_blank">https://debezium.io/</a>]，这是一个用于变更数据捕获的分布式平台，并扩展为一个分散的解决方案，但性能提高并没有预期的多。尽管如此，随着节点数量开始增长，我们仍然要处理数据延迟、数据流水线问题和复杂的工作流程。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es kt"><img src="../Images/d215c738e40015b648dc0460bc8e5a19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5mE-Q8z95guH7aSC2-fSDg.png"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx translated">图2:分布式分析的架构</figcaption></figure><h1 id="7e0f" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated"><strong class="ak">第三阶段</strong></h1><p id="04e5" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">在这个阶段，我开始将批量、实时自动化添加到架构中。这种方法将解决数据延迟、管道和复杂的工作流程。尽管如此，当谈到这些不断增长的数据规模、用户数量、服务和应用程序时，一些挑战正在显现。这些是你会看到的问题；</p><ul class=""><li id="1703" class="ky kz hi ih b ii ij im in iq la iu lb iy lc jc ld le lf lg bi translated"><strong class="ih hj">实时响应威胁检测</strong></li><li id="6075" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><strong class="ih hj">数据延迟</strong></li><li id="e6a0" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><strong class="ih hj">数据管道问题</strong></li><li id="7d24" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><strong class="ih hj">复杂的工作流程</strong></li><li id="45d9" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><strong class="ih hj">数据调试问题</strong></li><li id="0b51" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><strong class="ih hj">数据健康</strong></li><li id="84e6" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><strong class="ih hj">符合性</strong></li></ul><p id="6e8a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">随着越来越多的应用程序、服务变得分布式，复杂性现在变得普遍，如图3所示。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es lm"><img src="../Images/531ddd1d6a0b653da0ec2803687368bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vo8xR6iqZWYZOxwaqE2Mng.png"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx translated">图3 —来源:<a class="ae jd" href="https://cdn.confluent.io/wp-content/uploads/etl_mess-768x559.png" rel="noopener ugc nofollow" target="_blank">https://cdn . confluent . io/WP-content/uploads/ETL _ mess-768 x559 . png</a></figcaption></figure><h1 id="e513" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated"><strong class="ak">解决方案</strong></h1><p id="3529" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">将各种工具和解决方案集成到架构中会使架构变得非常复杂，尤其是在数据治理、法规遵从性和监管方面。分解架构的动机是将复杂的事情分开，这样我们就可以部署各种工具和解决方案，从简单的到复杂的。他们在这里；</p><ul class=""><li id="3516" class="ky kz hi ih b ii ij im in iq la iu lb iy lc jc ld le lf lg bi translated"><strong class="ih hj">阿帕奇卡夫卡异步消息</strong></li><li id="ce22" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><strong class="ih hj"> Apache AirFlow用于管理复杂的工作流程</strong></li><li id="5312" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><strong class="ih hj">数据分析</strong></li><li id="68b4" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><strong class="ih hj">lyft—Amundsen的数据目录</strong></li><li id="7d5f" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><strong class="ih hj">基于角色的访问控制</strong></li><li id="97f1" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><strong class="ih hj">自动化数据管理</strong></li><li id="a98f" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><strong class="ih hj">用于管理Hadoop基础设施的cloud era CM</strong></li><li id="ad1b" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><strong class="ih hj">用于数据管道、数据屏蔽和管理的流集</strong></li></ul><h1 id="fed2" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated"><strong class="ak">工具</strong></h1><p id="ef18" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">在这里，一些工具可以由Cloudera CM管理，然后在集群内部署一个独立的DWH流程编排和ELT解决方案；</p><ul class=""><li id="2fd0" class="ky kz hi ih b ii ij im in iq la iu lb iy lc jc ld le lf lg bi translated"><strong class="ih hj">阿帕奇卡夫卡</strong></li><li id="5c5a" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><strong class="ih hj">阿帕奇气流</strong></li><li id="f273" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><strong class="ih hj">阿帕奇Hadoop </strong></li><li id="cace" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><strong class="ih hj">阿帕奇蜂巢</strong></li><li id="a5ed" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><strong class="ih hj">阿帕奇卡珊德拉</strong></li><li id="bc72" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><strong class="ih hj">阿帕奇哨兵</strong></li><li id="20ff" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><strong class="ih hj">阿帕奇箭头</strong></li><li id="b0b0" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><strong class="ih hj">阿帕奇游侠</strong></li><li id="a44a" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><strong class="ih hj">用于数据仓库编排的平台</strong></li><li id="df2a" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated">德雷米奥</li><li id="af15" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><strong class="ih hj"> MySQL </strong></li><li id="04d0" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc ld le lf lg bi translated"><strong class="ih hj"> MongoDB </strong></li></ul><p id="a602" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，这是分布式实时分析的架构，如图4所示。该架构由四层组成，其中每个组件都是解耦的，并作为与每层相关的独立模块工作。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es ln"><img src="../Images/dbea4f3d352f349b7388da97d84dd71f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tEDRWARO270CfL34pAS4Pw.png"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx translated">图4:分散实时架构</figcaption></figure><h1 id="5a72" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">体系结构</h1><ol class=""><li id="c8f2" class="ky kz hi ih b ii kc im kd iq lo iu lp iy lq jc lr le lf lg bi translated">消息传递服务层:该服务功能负责数据接收点。传感器、网络安全设备、Siem、IoT或app的结构化、非结构化、时序数据，通过Kafka将其数据推送到Hadoop、RDBMS、TSDB；作为话题。这一层通常将原始信息保存在数据库中，而其他层则是流式的。</li><li id="75f5" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc lr le lf lg bi translated">ELT层:这一层负责数据提取、加载和转换。发生在消息服务层的是ELT而不是ETL。这一层负责数据生命周期管理、批处理、流管道、数据屏蔽和监控运行时流程性能。</li><li id="3103" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc lr le lf lg bi translated">数据仓库层:这是我设计大数据中的分散数据仓库的地方。它是Hadoop生态系统中传统DWH和分布式存储的混合体。在Hadoop中利用分散式架构使架构更加可靠，在自动化和可扩展性方面更具弹性。</li><li id="73c5" class="ky kz hi ih b ii lh im li iq lj iu lk iy ll jc lr le lf lg bi translated">分析层:它负责衡量我们在数据仓库中收集的信息的重要性和价值。</li></ol><h1 id="fe36" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated"><strong class="ak">结论</strong></h1><p id="bf6c" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">大数据和数据仓库已经成为实时分布式大数据分析的主要推动者，特别是在事件响应方面。虽然提议的架构可能在其他生态系统中不起作用，但它可能更有利于我的事件响应分析工具包的下一个实验。希望这个思想值得分享给大家。</p><h1 id="7245" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated"><strong class="ak">参考文献</strong></h1><p id="aaa0" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">[1] N. Srivastava和U. Chandra Jaiswal，“网络安全中的大数据分析技术:综述”，2019年第三届计算方法与通信国际会议(ICCMC)，印度，2019年，第579-585页。doi:10.1109/iccm . 2019.8819634网址:【http://ieeexplore.ieee.org/stamp/stamp.jsp?tp=】T4&amp;ar number = 8819634&amp;is number = 8819605</p><p id="61d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[2] X. Jin，Q. Wang，X. Li，X. Chen，W. Wang，“基于可信计算的云虚拟机生命周期安全框架”，载于清华科技，第24卷第5期，第520–534页，2019年10月。doi: 10.26599/TST.2018.9010129，网址:<a class="ae jd" href="http://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&amp;arnumber=8698209&amp;isnumber=8698205" rel="noopener ugc nofollow" target="_blank">http://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&amp;ar number = 8698209&amp;is number = 8698205</a></p><p id="b64a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://github.com/lyft/amundsen" rel="noopener ugc nofollow" target="_blank">https://github.com/lyft/amundsen</a></p><p id="c39f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[4]<a class="ae jd" href="https://eng.lyft.com/amundsen-lyfts-data-discovery-metadata-engine-62d27254fbb9" rel="noopener ugc nofollow" target="_blank">https://eng . lyft . com/amundsen-lyfts-data-discovery-metadata-engine-62d 27254 fbb 9</a></p><p id="c1e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[5]<a class="ae jd" href="https://wecode.wepay.com/posts/wepays-data-warehouse-bigquery-airflow" rel="noopener ugc nofollow" target="_blank">https://wecode . wepay . com/posts/we pays-data-warehouse-big query-air flow</a></p><p id="a716" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[6]https://Presto SQL . io/Presto _ SQL _ on _ everything . pdf</p><p id="c5ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[7]https://debezium.io/<a class="ae jd" href="https://debezium.io/" rel="noopener ugc nofollow" target="_blank"/></p><p id="6f65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[8]https://Martin fowler . com/articles/data-monolith-to-mesh . html</p><p id="e1ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[9]https://www . infoq . com/presentations/data-engineering-pipelines-warehouses/</p></div></div>    
</body>
</html>