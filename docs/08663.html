<html>
<head>
<title>R Essentials: Time Series Basics, Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">r 基础知识:时间序列基础知识，第 1 部分</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/r-essentials-time-series-basics-part-1-76fa440f14e1?source=collection_archive---------20-----------------------#2020-08-07">https://medium.com/analytics-vidhya/r-essentials-time-series-basics-part-1-76fa440f14e1?source=collection_archive---------20-----------------------#2020-08-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="031a" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">时态数据入门快速提示</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/c854ac9aeb6cf7964c7ce0f4fc90ec8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hp66QOXMLoH15NtWegaciA.jpeg"/></div></div></figure><p id="c420" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">无论您是一名构建住院预测模型的数据科学家，还是一名试图预测股票价格的金融分析师，甚至是一名试图预测您的游戏机何时会过热的游戏玩家(曾经有过，做过！)，正确处理和操作您的数据是极其重要的。</p><p id="344a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在本教程中，我将使用来自<a class="ae kf" href="https://covidtracking.com/" rel="noopener ugc nofollow" target="_blank">https://covidtracking.com</a>的新冠肺炎数据集(可以下载为 dailycountry.csv)来说明一些基本的 R 方法，我们可以应用这些方法来快速构建一个更干净、更可用的数据集。</p><ol class=""><li id="5b85" class="kg kh hi jl b jm jn jp jq js ki jw kj ka kk ke kl km kn ko bi translated"><strong class="jl hj">将属性转换为<em class="kp">日期 T </em>类型</strong></li></ol><p id="696e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果您正在处理时序数据，数据集中任何日期列的格式都可能不正确。也就是说，R 可能会将它们解释为字符串或整数，而不是可以绘制成时间序列的可读日期(注意，R 中的<strong class="jl hj">默认日期格式是年-月-日</strong>)。</p><p id="3c16" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">有多种变化，因此有多种方法来解决这个问题。首先，您需要确定数据框中属性的数据类型。例如，如果您的日期属性最初是数字格式的，比如 20200701，那么使用 str()函数将得到属性的数据类型。</p><p id="5d1b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在这种情况下，数据类型是<em class="kp"> int </em>，因此我们可以使用 transform()函数对列中的每个值进行转换。新冠肺炎数据集中的日期列可以从 int 转换为 date，如下所示:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es kq"><img src="../Images/fedddf0ecd8b48dc35a7debecd9d0c03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/1*tEFlC-wdyeQLb5ynRZHjKw.png"/></div><figcaption class="kr ks et er es kt ku bd b be z dx translated">str()和 transform()的作用</figcaption></figure><p id="85a3" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">transform 函数将目标数据、转换数据的函数以及最终所需的格式作为参数。然后分两步将属性转换为日期格式:首先转换为字符串，然后使用 as 转换字符串。日期()。</p><p id="e3a6" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果我们有一个字符串，比如“2020–07–01”或“2020/07/01”，那么我们只需要使用 as。日期()。如果我们有一个“01-7-2020”形式的字符串，那么我们可以再次使用 as。Date()，并提供原始格式“%d-%b-%y”作为参数。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es kv"><img src="../Images/5adefbba541bbe821909f8bf0064b461.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/format:webp/1*iJuW60pl3YrCvyz-TanO5Q.png"/></div><figcaption class="kr ks et er es kt ku bd b be z dx translated">将字母月份转换为数字格式</figcaption></figure><p id="4ba5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">其他值更混乱，需要更精细的修复。例如，一些日期列包含诸如“UTC”或“PST”这样的字符。</p><p id="2a61" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">幸运的是，<code class="du kw kx ky kz b">lubridate</code>库使得争论和解析过程变得简单多了。这个包的一个主要优点是它自动识别导入的公共分隔符，所以我们只需要担心指定日期元素的顺序:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es la"><img src="../Images/81152f56f5a4457a492b77fd030f08f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*-F1YeM8aLa7BUu04zy2rLg.png"/></div><figcaption class="kr ks et er es kt ku bd b be z dx translated">lubridate 库灵活的函数集</figcaption></figure><p id="dabe" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> 2。组合属性</strong></p><p id="3809" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">有时，日期和时间数据被分解到不同的列中。<code class="du kw kx ky kz b">tidyr</code>库可以用来方便地合并这样的列。因此，如果新冠肺炎数据集用日期<em class="kp">和</em>时间列更加丰富，那么这两者可以结合起来创建一个 date_time 列，这可能会产生更有趣的可视化效果:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es lb"><img src="../Images/bc8d0d9a0903c655fd93efac250ab1f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*zFNCvnm-fyBkTnmSFX2j5Q.png"/></div></figure><p id="9739" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在上面的列中，属性的每个元素都用“-”分隔。</p><p id="b214" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj"> 3。调节刻度</strong></p><p id="45b8" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kw kx ky kz b">scales</code>库不仅仅处理数字数据——它还可以用来调整时间序列中的断点。例如，在新冠肺炎数据集中，我们可以向 scale_x_date 函数添加一个具有两周增量的中断参数，如下所示:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lc"><img src="../Images/f2d0a0caf264ed2f21a7ce2d77ff0f1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kcyDH87RJmJbeKjIJSEo3A.png"/></div></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ld"><img src="../Images/bab667063b16dd2b3c51db7044b4ff65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1144/format:webp/1*9XoJqun53WEPoyM1NH9QoQ.png"/></div><figcaption class="kr ks et er es kt ku bd b be z dx translated">导致图表中的日期标签过于浓缩！</figcaption></figure><p id="c49d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">但是，我们可以通过使用一个月刻度来扩展间隔，从而创建同一视觉效果的更好、更清晰的版本:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es le"><img src="../Images/fa43218b86f80f1561aa05efb49afc2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mPjv_yPVPcMMi4u4J9VBpQ.png"/></div></div></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lf"><img src="../Images/01ecebb99e761cd4d933f1336ab27cd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zxLrlYqM1K3mu_1i7evkPg.png"/></div></div><figcaption class="kr ks et er es kt ku bd b be z dx translated">使图表中的日期标签不那么杂乱！</figcaption></figure><p id="b937" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，这些只是您在处理时间序列数据时可能面临的少数挑战。但是，无论您正在处理的数据集来自哪个领域，您都可以轻松地进行一些有意义的分析和可视化！😀</p></div></div>    
</body>
</html>