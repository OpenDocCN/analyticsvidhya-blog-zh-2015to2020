<html>
<head>
<title>PyTorch Web Service deployment using Azure Machine Learning Service and Azure Web Apps from VS Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">PyTorch Web服务部署使用Azure机器学习服务和来自VS代码的Azure Web应用程序</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/pytorch-web-service-deployment-using-azure-machine-learning-service-and-azure-web-apps-from-vs-code-a1ba75e43520?source=collection_archive---------8-----------------------#2020-03-20">https://medium.com/analytics-vidhya/pytorch-web-service-deployment-using-azure-machine-learning-service-and-azure-web-apps-from-vs-code-a1ba75e43520?source=collection_archive---------8-----------------------#2020-03-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9055" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这篇博客主要关注于在Linux中使用Azure机器学习SDK和VS代码将PyTorch fastai深度学习图像分类模型部署到Azure Web apps/Azure Web服务。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/3dee39531f38cb1ccaef7e01e16f26f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pmSA65aiPka5iUy3"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">瓦莱里娅·宗科尔在<a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><ol class=""><li id="7fe7" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated">Google Colab中的数据收集和原型制作</li><li id="82b6" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">Azure机器学习服务培训。</li><li id="261e" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">在Azure容器实例中部署为Azure Web服务。</li><li id="7225" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">从部署为Python flask Azure web应用程序的前端使用Web服务。</li></ol><h2 id="0c9e" class="ki kj hi bd kk kl km kn ko kp kq kr ks iq kt ku kv iu kw kx ky iy kz la lb lc bi translated"><strong class="ak">Google Colab中的数据收集和原型制作:</strong></h2><p id="9b36" class="pw-post-body-paragraph if ig hi ih b ii ld ik il im le io ip iq lf is it iu lg iw ix iy lh ja jb jc hb bi translated">查看fastai的<a class="ae jt" href="https://docs.fast.ai/vision.data.html#Building-your-own-dataset" rel="noopener ugc nofollow" target="_blank">构建你自己的数据集</a>模块，它包含一些帮助函数，允许你为图像分类构建你自己的数据集。在这个项目中，我从google images下载了哭泣的婴儿和快乐的婴儿的图像，并在google colab中快速测试了它们的初始基线。查看我的<a class="ae jt" href="https://github.com/SriramyaK/Baby_Vibes_Pytorch_Azure_Webservice/blob/master/Data_Collection_Google_Colab_prototyping.ipynb" rel="noopener ugc nofollow" target="_blank"> Google colab笔记本</a>。</p><h2 id="37ec" class="ki kj hi bd kk kl km kn ko kp kq kr ks iq kt ku kv iu kw kx ky iy kz la lb lc bi translated"><strong class="ak">关于Azure机器学习的培训:</strong></h2><p id="1f9d" class="pw-post-body-paragraph if ig hi ih b ii ld ik il im le io ip iq lf is it iu lg iw ix iy lh ja jb jc hb bi translated">一旦我们的dateset和模型参数达到基线，我就选择Microsoft Azure作为web应用进行培训和部署。</p><p id="0f0e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">先决条件-</p><p id="f655" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用以下扩展启用VS代码:</p><ul class=""><li id="1fcd" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc li ka kb kc bi translated">计算机编程语言</li><li id="2fe4" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc li ka kb kc bi translated">Azure帐户</li><li id="d162" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc li ka kb kc bi translated">Azure CLI工具-Azure CLI提供管理Azure资源的命令。</li><li id="79ab" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc li ka kb kc bi translated">Azure机器学习CLI的机器学习扩展提供了使用Azure机器学习资源的命令。</li><li id="440a" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc li ka kb kc bi translated">Azure应用服务</li><li id="7ad9" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc li ka kb kc bi translated">Azure存储</li></ul><p id="0201" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意:</strong>如果你是VS代码新手，<a class="ae jt" href="https://code.visualstudio.com/docs/python/python-tutorial" rel="noopener ugc nofollow" target="_blank">参考这个</a>。</p><ul class=""><li id="7a74" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc li ka kb kc bi translated">Azure订阅。如果你没有，试试Azure机器学习的免费或付费版本。</li><li id="1e7b" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc li ka kb kc bi translated">Git本地</li></ul><p id="ebd6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将使用GitHub库<strong class="ih hj"/><a class="ae jt" href="https://github.com/SriramyaK/Baby_Vibes_Pytorch_Azure_Webservice" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">Baby Vibes</strong></a><strong class="ih hj">——图像分类器来检测哭泣的婴儿，并玩猫和老鼠来逗他们笑</strong>。</p><p id="2325" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们开始吧-</p><p id="066e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">打开ubuntu shell并键入:</p><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="4350" class="ki kj hi lk b fi lo lp l lq lr">&gt;&gt; mkdir Baby_Vibes<br/>&gt;&gt; cd Baby_Vibes<br/>&gt;&gt; git clone h<a class="ae jt" href="https://github.com/SriramyaK/Baby_Vibes_Pytorch_Azure_Webservice" rel="noopener ugc nofollow" target="_blank">ttps://github.com/SriramyaK/Baby_Vibes_Pytorch_Azure_Webservice</a><br/>&gt;&gt; code .</span></pre><p id="ca7b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从VS代码中打开新终端并键入:</p><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="9c84" class="ki kj hi lk b fi lo lp l lq lr">&gt;&gt; conda env create -f myenv.yml<br/>&gt;&gt; conda myenv/bin/activate</span></pre><ol class=""><li id="3eae" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated">从VS代码机器学习空间登录Azure:</li><li id="14a1" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">点击“创建工作空间”</li></ol><ul class=""><li id="38f0" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc li ka kb kc bi translated">输入Azure ML工作区名称的名称</li><li id="8b7f" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc li ka kb kc bi translated">选择Azure订阅</li><li id="35a1" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc li ka kb kc bi translated">选择一个资源组，如果没有资源组，则创建一个新的资源组。</li><li id="ce9e" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc li ka kb kc bi translated">选择一个位置</li><li id="cd92" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc li ka kb kc bi translated">选择一个工作区sku“基本”</li></ul><p id="0e83" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您还可以查看创建<a class="ae jt" href="https://docs.microsoft.com/en-us/azure/machine-learning/how-to-manage-workspace" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">工作区</strong> </a>的其他方式:</p><p id="d679" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.打开<a class="ae jt" href="https://github.com/SriramyaK/Baby_Vibes_Pytorch_Azure_Webservice/blob/master/Baby_Vibes_train.ipynb" rel="noopener ugc nofollow" target="_blank"> Baby_Vibes_train.ipynb </a>。更新您的工作区名称、subscription-id和资源组，并选择“运行所有单元”。</p><p id="9f4a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.训练完成后，从“VS代码&gt;机器学习&gt;工作空间&gt;模型&gt; Babies.pkl”中成功下载“Babies.pkl ”,并将其保存为项目文件夹中的“export.pkl”。</p><p id="bed1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为什么只有“export.pkl ”?检查<a class="ae jt" href="https://github.com/fastai/fastai/blob/9a32a5f666d28283184e4b5b30edebfcb8ddb5f3/fastai/basic_train.py#L615" rel="noopener ugc nofollow" target="_blank"> fast.ai </a>的文档</p><p id="6fc2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6.现在，您可以将机器学习计算从“VS代码&gt;机器学习&gt;订阅名称&gt;工作区名称&gt;计算&gt; gpu —计算”中分离出来，以节省资金并进入部署阶段。</p><h2 id="8556" class="ki kj hi bd kk kl km kn ko kp kq kr ks iq kt ku kv iu kw kx ky iy kz la lb lc bi translated"><strong class="ak">使用Azure容器部署为Azure Web服务:</strong></h2><ol class=""><li id="a3bb" class="ju jv hi ih b ii ld im le iq ls iu lt iy lu jc jz ka kb kc bi translated">打开<strong class="ih hj"/><a class="ae jt" href="https://github.com/SriramyaK/Baby_Vibes_Pytorch_Azure_Webservice/blob/master/deploy.ipynb" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">deploy . ipynb</strong></a><strong class="ih hj"/>更新您的工作区名称、subscription-id和资源组，并选择“运行所有单元”。</li></ol><p id="17c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">检查点:</strong></p><ul class=""><li id="6ac6" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc li ka kb kc bi translated">确保“export.pkl”和score_and_track.py都在当前项目文件夹中。</li><li id="56ed" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc li ka kb kc bi translated">我们正在使用下面的azure容器实例配置进行部署。查看<a class="ae jt" href="https://github.com/SriramyaK/Baby_Vibes_Pytorch_Azure_Webservice/blob/master/deploy.ipynb" rel="noopener ugc nofollow" target="_blank"> deploy.ipynb </a></li></ul><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="8958" class="ki kj hi lk b fi lo lp l lq lr">aciconfig = AciWebservice.deploy_configuration(cpu_cores=2, memory_gb=4,tags={‘data’: ‘Babies’, ‘method’:’transfer learning’, ‘framework’:’pytorch’},description=’Image classification of Baby Vibes’)</span></pre><p id="b70b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这意味着我们使用2个CPU和4gb内存来运行我们的模型推理。(记得我们在训练模型后移除了我们的gpu计算！！！)</p><p id="4c75" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">记下您的web服务uri，我们需要它来部署Web应用程序</p><h2 id="42f2" class="ki kj hi bd kk kl km kn ko kp kq kr ks iq kt ku kv iu kw kx ky iy kz la lb lc bi translated"><strong class="ak">从部署为Python flask Azure web app的前端使用Web服务:</strong></h2><ol class=""><li id="cb2d" class="ju jv hi ih b ii ld im le iq ls iu lt iy lu jc jz ka kb kc bi translated">Mkdir flask _部署</li><li id="adbf" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">Cd烧瓶_部署</li><li id="a4f2" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">python3 -m venv环境</li><li id="4d70" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">源环境/媒体夹/激活</li><li id="eef2" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated">将以下文件移动到flask_deploy文件夹中，并确保您的文件夹结构如下所示:</li></ol><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lv"><img src="../Images/02e74cf0f2b67eda28a97267f1ea7e83.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/0*9DQGIu7ASOcpuheg"/></div></figure><p id="1ff3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6.在VS代码中点击Azure App service窗格，创建一个新的Web App。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lw"><img src="../Images/f205b5a4d7648bbed6dc6bce9f70e2e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/0*i0uQehpOOoFihAEw"/></div></figure><p id="796e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">7.为新的web应用程序输入一个全局唯一的名称，在我们的示例中为“babyvibes1”。</p><p id="d44f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">8.为我们的linux应用程序选择运行时，即python 3.6</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lx"><img src="../Images/cf592e6ef2bfed2794e8b9c3a1a132b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5LSpTpSqTW15UZSG"/></div></div></figure><p id="de34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦我们收到新的web应用程序“BabyVibes1”已创建的消息，我们就可以转到<strong class="ih hj"> </strong> <a class="ae jt" href="https://portal.azure.com/#home" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">主页</strong> </a> &gt; <a class="ae jt" href="https://portal.azure.com/#blade/HubsExtension/BrowseAll" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">所有资源</strong></a>&gt;<a class="ae jt" href="https://portal.azure.com/#@sriramyalakkarajugmail.onmicrosoft.com/resource/subscriptions/d74ca76c-0758-4302-8894-12939776ca14/resourceGroups/appsvc_linux_centralus/providers/Microsoft.Web/serverFarms/appsvc_linux_centralus/apps" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">appsvc _ Linux _ centr alus&gt;应用程序</strong></a>&gt;<a class="ae jt" href="https://portal.azure.com/#@sriramyalakkarajugmail.onmicrosoft.com/resource/subscriptions/d74ca76c-0758-4302-8894-12939776ca14/resourceGroups/appsvc_linux_centralus/providers/Microsoft.Web/sites/BabyVibes1/configuration" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">baby vibes 1&gt;配置&gt;常规设置</strong> </a></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lx"><img src="../Images/62328653fd3c4bc77b4743e5644af6c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GBipMhgwQ6yQ4IZU"/></div></div></figure><p id="c747" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将保存在当前“flask-deploy”文件夹中的“startup.txt”中的文本复制到上面屏幕中显示的“Startup Command”字段中。</p><p id="07d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们为什么要这样做？</p><p id="b695" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">原因是App Service使用<a class="ae jt" href="https://gunicorn.org/" rel="noopener ugc nofollow" target="_blank"> Gunicorn WSGI HTTP Server </a>来运行一个App，它寻找一个名为application.py或app.py的文件，由于我们的主模块在app.py文件中，我们必须定制启动命令，如下所示-</p><p id="beaa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">" guni corn-bind = 0 . 0 . 0 . 0-超时600 app:app "</p><p id="8a6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">更多信息请阅读<a class="ae jt" href="https://docs.microsoft.com/en-us/azure/python/tutorial-deploy-app-service-on-linux-04" rel="noopener ugc nofollow" target="_blank"> azure文档</a></p><p id="1448" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的目标是将我们的应用从本地git部署到我们创建的Azure应用服务。为此，我们首先必须配置一些部署设置。点击“部署中心”，选择“本地Git”:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lx"><img src="../Images/9e21794689fe79b8f5c5c140153d06f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hpwlSLLFuYbENv3R"/></div></div></figure><p id="9e52" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">向下滚动以查看“本地git”选项</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lx"><img src="../Images/4d20032e0ce02acf3c7233a308e0468c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GGfVZV52HeOwPqLP"/></div></div></figure><p id="1024" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在下一步中，选择“Kudu”作为构建服务器:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lx"><img src="../Images/04f950244b177a5130d05a1eed6dfb06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0uL5toOQmzhDcOje"/></div></div></figure><p id="37db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击“继续”</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lx"><img src="../Images/36cd452f2f748942b5d59d057abbb1d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EHSxMNpoFvRuFz62"/></div></div></figure><p id="fd1b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单击“完成”，等待通知，您将得到如下所示的<em class="ly"> Git克隆Uri </em>:</p><p id="081b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jt" href="https://babyvibes1.scm.azurewebsites.net:443/babyvibes1.git" rel="noopener ugc nofollow" target="_blank"><em class="ly">https://babyvibes1.scm.azurewebsites.net:443/babyvibes1.git</em></a></p><p id="4d52" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，单击“部署凭据”查看您的应用凭据:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lx"><img src="../Images/f5b92756dd092496ff2f0806c457c3d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TT3jQotrdHUYTR2A"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lz"><img src="../Images/0867a4067c34b0e35e61a91cf3c2da20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/0*WgRUg3cLCk8_s3Dd"/></div></figure><p id="1ae4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，您可以看到您的应用程序用户名和密码，您可以更改或创建用于部署目的的其他用户凭据。</p><p id="b6bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们已经为部署做好了准备。转到本地终端，将Azure remote添加到本地Git存储库中。将<deploymentlocalgiturl-from-create-step>替换为您在上一步中获得的Git遥控器的URL，即<a class="ae jt" href="https://babyvibes1.scm.azurewebsites.net:443/babyvibes1.git" rel="noopener ugc nofollow" target="_blank">【https://babyvibes1.scm.azurewebsites.net:443/babyvibes1.git】T2</a></deploymentlocalgiturl-from-create-step></p><p id="1d9c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">启动当前文件夹中的git库:</strong></p><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="ea7d" class="ki kj hi lk b fi lo lp l lq lr">&gt;&gt; git init<br/>&gt;&gt; git add .gitignore<br/>&gt;&gt; git commit -m “.gitignore added”<br/>&gt;&gt; git add .<br/>&gt;&gt; git commit -m “Code files added”<br/>&gt;&gt; git remote add azure-baby <a class="ae jt" href="https://babyvibes1.scm.azurewebsites.net:443/babyvibes1.git" rel="noopener ugc nofollow" target="_blank">https://babyvibes1.scm.azurewebsites.net:443/babyvibes1.git</a></span></pre><p id="eee3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在提交对本地git的任何更改:</p><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="4745" class="ki kj hi lk b fi lo lp l lq lr">&gt;&gt; git commit -a -m “first commit”</span></pre><p id="e81a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">并使用以下命令推送至“azure-baby”遥控器以部署您的应用程序:</p><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="39a8" class="ki kj hi lk b fi lo lp l lq lr">&gt;&gt; git push azure-baby master</span></pre><p id="9954" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当Git凭据管理器提示您输入凭据时，请确保您输入的是在配置部署用户中创建的凭据，而不是用于登录Azure门户的凭据。</p><p id="b6f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行此命令可能需要几分钟时间。我们可以在VS代码中检查Web应用程序“babyvibes1”的状态，并执行最后的“部署到Web应用程序”步骤-</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lx"><img src="../Images/224f7aad2d9db446bb24b1ef5a7f6b0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CQfn-gx1YO1Pj14a"/></div></div></figure><p id="3abf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">选择要压缩和部署的文件夹，即我们的示例中的flask_deploy</p><p id="64ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以在左下角看到这样的弹出窗口:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ma"><img src="../Images/02498be69cd6e45d98575854751bf56e.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/0*SIE2OXLpjyXe9JjR"/></div></figure><p id="5893" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来是成功的部署，比如-</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mb"><img src="../Images/7cf85db7ac29b05a7835ba109f4685ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:806/0*43b10Ku_hKnAV08l"/></div></figure><p id="6e97" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果部署成功，您可以看到下面的网站页面-</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lx"><img src="../Images/689edda0ca56a665984694a4c1bc6f5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vTs_ynPRL9K_klA5"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated"><a class="ae jt" href="https://babyvibes.azurewebsites.net/" rel="noopener ugc nofollow" target="_blank">https://babyvibes.azurewebsites.net/</a></figcaption></figure><p id="f8d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">参考资料:</p><ol class=""><li id="5b6a" class="ju jv hi ih b ii ij im in iq jw iu jx iy jy jc jz ka kb kc bi translated"><a class="ae jt" rel="noopener" href="/@nikovrdoljak/deploy-your-flask-app-on-azure-in-3-easy-steps-b2fe388a589e">https://medium . com/@ nikovrdoljak/deploy-your-flask-app-on-azure-in-3-easy-steps-B2 Fe 388 a 589 e</a></li><li id="a8af" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><a class="ae jt" href="https://docs.microsoft.com/en-us/azure/python/" rel="noopener ugc nofollow" target="_blank">https://docs.microsoft.com/en-us/azure/python/</a></li><li id="6a04" class="ju jv hi ih b ii kd im ke iq kf iu kg iy kh jc jz ka kb kc bi translated"><a class="ae jt" href="https://docs.microsoft.com/en-us/azure/machine-learning/how-to-train-pytorch" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/azure/machine-learning/how-to-training-py torch</a></li></ol></div></div>    
</body>
</html>