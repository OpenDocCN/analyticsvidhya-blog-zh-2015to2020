<html>
<head>
<title>Create a Fullstack app with Django, GraphQL and VueJS (Part 2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Django、GraphQL和VueJS创建一个Fullstack应用程序(第2部分)</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/create-a-fullstack-app-with-django-graphql-and-vuejs-part-2-682c2c30a93b?source=collection_archive---------2-----------------------#2019-11-01">https://medium.com/analytics-vidhya/create-a-fullstack-app-with-django-graphql-and-vuejs-part-2-682c2c30a93b?source=collection_archive---------2-----------------------#2019-11-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/cf27747fe8eff55acfe89773ba53946a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FlJ7Yay6ZqOtYYfnXb7syA.png"/></div></div></figure><p id="21f5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本教程的第一部分中，我们使用Django和Graphene创建了一个虚拟的员工管理系统，允许我们查看所有员工、创建新条目以及更新和删除现有条目。</p><p id="b5e7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在第二部分中，我们将从上次停止的地方继续，构建一个简单的VueJS应用程序，我们可以用它来查看我们的员工并按城市进行过滤。</p><p id="c299" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">先决条件</strong></p><p id="d048" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了开始使用vueJS和其他前端工具，我们首先需要的是一个<a class="ae jo" rel="noopener" href="/@olinations/the-javascript-runtime-environment-d58fa2e60dd0">运行时</a>。最流行的javascript运行时是我们这个项目需要的NodeJS。</p><p id="3781" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，请前往<a class="ae jo" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> NodeJS网站</a>下载适合您机器的版本。安装完成后，打开您的终端并确认它存在。键入node -v，您应该会得到一个带有版本号的响应</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="ec10" class="jy jz hi ju b fi ka kb l kc kd">$ node -v<br/>v11.10.0</span></pre><p id="9342" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">NodeJS附带了<a class="ae jo" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> npm </a>，这是一个javascript包管理器，本质上使开发人员可以轻松下载和安装所需的包(类似于python中的pip)。您也可以通过键入以下命令来确认它已安装</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="2cb3" class="jy jz hi ju b fi ka kb l kc kd">$ npm -v<br/>6.7.0</span></pre><p id="ae4f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，我们想安装<a class="ae jo" href="https://github.com/vuejs/vue" rel="noopener ugc nofollow" target="_blank"> vueJS </a>和<a class="ae jo" href="https://github.com/vuejs/vue-cli" rel="noopener ugc nofollow" target="_blank"> vue-cli </a>。这就是npm的优势所在</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="a680" class="jy jz hi ju b fi ka kb l kc kd">sudo npm install -g @vue/cli</span></pre><p id="4036" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将sudo添加到vueJS install语句中并不是强制性的，但是在某些情况下您可能会得到一个错误，特别是如果您没有以管理员身份登录到您的计算机上。下载完成后，您只需在终端中键入“Vue”即可确认安装</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="fda6" class="jy jz hi ju b fi ka kb l kc kd">$ vue<br/>Usage: vue &lt;command&gt; [options]</span><span id="a5f0" class="jy jz hi ju b fi ke kb l kc kd">Options:<br/> -V, — version output the version number<br/> -h, — help output usage information</span><span id="c19e" class="jy jz hi ju b fi ke kb l kc kd">Commands:<br/> create [options] &lt;app-name&gt; create a new project powered by vue-cli-service<br/> add [options] &lt;plugin&gt; [pluginOptions] install a plugin and invoke its generator in an already created project<br/> invoke [options] &lt;plugin&gt; [pluginOptions] invoke the generator of a plugin in an already created project<br/> inspect [options] [paths…] inspect the webpack config in a project with vue-cli-service<br/> serve [options] [entry] serve a .js or .vue file in development mode with zero config<br/> build [options] [entry] build a .js or .vue file in production mode with zero config<br/> ui [options] start and open the vue-cli ui<br/> init [options] &lt;template&gt; &lt;app-name&gt; generate a project from a remote template (legacy API, requires @vue/cli-init)<br/> config [options] [value] inspect and modify the config<br/> upgrade [semverLevel] upgrade vue cli service / plugins (default semverLevel: minor)<br/> info print debugging information about your environment</span><span id="0362" class="jy jz hi ju b fi ke kb l kc kd"> Run vue &lt;command&gt; — help for detailed usage of given command.</span></pre><p id="0144" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们准备开始了</p><p id="7f84" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">1).导航到本地驱动器上要创建项目的位置，并为应用程序创建一个文件夹。在我的例子中，我将在我的桌面上创建一个名为“vueapps”的目录，然后切换到该目录</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="576a" class="jy jz hi ju b fi ka kb l kc kd">$ cd ~/Desktop<br/>$ mkdir vueapps &amp;&amp; cd vueapps</span></pre><p id="b19e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我现在将创建一个名为“公司”的新vueJS应用程序</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="4ba9" class="jy jz hi ju b fi ka kb l kc kd">$ sudo vue init webpack company</span></pre><p id="0811" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您将经历一系列类似下图的提示。根据需要选择您的偏好。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es kf"><img src="../Images/298b9e48e298bf4f0827832a9fc54748.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/0*LRSohiBVkJMR0NSk"/></div></figure><p id="215d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">安装完成后，您应该会看到一个与项目同名的目录。当您切换到目录时，您应该看到以下文件和目录</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="e037" class="jy jz hi ju b fi ka kb l kc kd">$ cd company</span></pre><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es kg"><img src="../Images/7a231f4b70aebff2cba437ae039d5f00.png" data-original-src="https://miro.medium.com/v2/resize:fit:598/0*YO5Q_V-vTbrBbjN5"/></div></figure><p id="f1fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2).下一步是安装vueJS和vue-cli捆绑的所有插件。如果您打开“package.json”文件，您将看到所有插件和依赖项的列表</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kh"><img src="../Images/48486998e1ad376b3d8dc497cd3ce8fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/0*CVdsHUY8iLqKqfUY"/></div></div></figure><p id="d491" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要安装所有这些依赖项，请运行“npm安装”。确保您在公司应用程序目录中</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="ae5d" class="jy jz hi ju b fi ka kb l kc kd">$ sudo npm install</span></pre><p id="1b76" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">顺便说一下，所有插件都将安装在node_modules子目录中。如果一切运行正常，您应该会看到类似下面的消息(根据您的系统，可能会有更多或更少的包)</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="ddd8" class="jy jz hi ju b fi ka kb l kc kd">audited 11689 packages in 5.466s<br/>found 0 vulnerabilities</span></pre><p id="18f9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们可以创建一个开发服务器，开始在本地计算机上运行我们的应用程序</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="1935" class="jy jz hi ju b fi ka kb l kc kd">$ npm run dev</span><span id="4e9d" class="jy jz hi ju b fi ke kb l kc kd">I Your application is running here: <a class="ae jo" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank">http://localhost:8080</a></span></pre><p id="e3e2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，您可以导航到提供的本地主机IP，您应该会看到类似下图的屏幕</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es ki"><img src="../Images/145a2d4ea4235b8b4ed2346c2fd49ef1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/1*rg0KSnW1ODWEbRGlhCkITg.png"/></div></figure><p id="1529" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们准备开始构建我们的应用程序</p><p id="668f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3).如果你熟悉Vue，你会知道Vue类似于由多个组件和路由组成的单页面应用程序(SPA)。</p><p id="9ad2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的大部分代码将存在于“src”目录中，应用程序的所有组件都将驻留在“components”子目录中。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es kj"><img src="../Images/77f378c8a5e4983c9fa66bfcd3957910.png" data-original-src="https://miro.medium.com/v2/resize:fit:402/0*UT786-ZLtE4mPA1Q"/></div></figure><p id="7de0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">安装后我们导航到的演示页面(http://localhost:8080)是HelloWorld.vue文件(组件)的产品。每个组件由一个模板标签、一个脚本标签和一个样式标签组成。</p><p id="2839" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是，App.vue文件是应用程序的父SPA文件，其中所有组件和路由器都需要注册，以便在浏览器中显示。尽管浏览器中显示的所有数据都是在HelloWorld.vue文件中创建和存在的，但仍需要在应用程序中注册。Vue文件，否则不会显示</p><p id="7a36" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们需要创建一个新的组件来可视化我们的公司数据。确保您位于src/components目录中，并创建一个新组件</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="ec74" class="jy jz hi ju b fi ka kb l kc kd">$ cd src/components<br/>$ sudo touch Comp.vue</span></pre><p id="a4b7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">4).打开新的Comp.vue文件，从一个简单的组件开始，模板中的根div简单地输出“Hello World”，这是一个空函数，没有样式。</p><p id="8fd9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们还需要在脚本标记中添加一个选择器(CompanyData ),并在App.vue文件中注册它，以便组件能够工作。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="ffdf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">5).现在，我们必须进入应用程序。Vue文件来注册这个新组件。注意新增加的行(第5、11和17行)</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="d6d9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们通过再次运行开发服务器并导航到浏览器来查看我们的更改</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="6155" class="jy jz hi ju b fi ka kb l kc kd">$ npm run dev</span></pre><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es km"><img src="../Images/3432882e1a54ee1c2dcc73d92c4f46ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*KMe0TAW3bjBYgVV30YNd4A.png"/></div></figure><p id="bca5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，您应该会在页面底部看到您的“Hello World”组件。成功！</p><p id="31ee" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们可以开始组织和可视化来自django应用程序的数据了。</p><p id="f65c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">6).对于我们的公司应用程序，我们希望能够列出公司内的所有当前员工，并能够按城市进行筛选。为了使这在视觉上吸引人并易于阅读，我们将使用一个引导表来显示所有相关的数据。</p><p id="cd43" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，我们将安装引导程序</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="c184" class="jy jz hi ju b fi ka kb l kc kd">$ npm install bootstrap</span></pre><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es kn"><img src="../Images/ac12642c84c0e50fd5ca0d4fc8e02c9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:894/0*CYyVQ1oBor2G59jO"/></div></figure><p id="a974" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">7).由于这不是一个网页设计教程，我不会过多地探究样式方面，我假设如果你正在阅读这篇文章，你已经很好地掌握了CSS。</p><p id="4bd5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于我的页面:</p><ul class=""><li id="79b7" class="ko kp hi is b it iu ix iy jb kq jf kr jj ks jn kt ku kv kw bi translated">我将引导样式表从node_modules目录导入到App.vue文件底部的style块中(第57行)</li><li id="b83c" class="ko kp hi is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw bi translated">注释掉App.vue默认样式(第59–64行)</li><li id="52bc" class="ko kp hi is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw bi translated">添加了一个我从<a class="ae jo" href="https://getbootstrap.com/docs/4.3/components/navbar/" rel="noopener ugc nofollow" target="_blank">引导站点</a>复制的导航条(第3-37行)</li><li id="067a" class="ko kp hi is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw bi translated">注释掉默认的HelloWorld组件(第38行)</li></ul><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="cb67" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你现在可以看到，页面上只剩下新的导航栏和我们的“Hello World”评论</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es km"><img src="../Images/753719330ede1cc405ff5bd26f943c55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*cG0pVVYlL-GJHJupDgqrNQ.png"/></div></div></figure><p id="cf1b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">希望你的网页看起来和我的相似。</p><p id="c3b3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们终于开始有趣的事情了！我们将Vue应用程序连接到GraphQL API。</p><p id="a999" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">8).我们需要安装<a class="ae jo" href="https://github.com/axios/axios" rel="noopener ugc nofollow" target="_blank"> axios </a>，以便从我们的应用程序发出HTTP请求。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="443f" class="jy jz hi ju b fi ka kb l kc kd">npm install axios</span></pre><p id="85d8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">为了继续，您必须确保本教程第1部分中的django应用程序正在运行。如果没有，导航到目录并运行</strong><em class="lc">python manage . py runserver</em><strong class="is hj">。导航到</strong><a class="ae jo" href="http://127.0.0.1:8000/graphql" rel="noopener ugc nofollow" target="_blank"><strong class="is hj">http://127 . 0 . 0 . 1:8000/graph QL</strong></a><strong class="is hj">以确认Django应用程序正在运行</strong></p><p id="d522" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">9).让我们对Comp.vue文件进行一些编辑，以便能够从API获取数据。</p><ul class=""><li id="a863" class="ko kp hi is b it iu ix iy jb kq jf kr jj ks jn kt ku kv kw bi translated">将axios导入脚本标记内的Comp.vue文件(第13行)</li><li id="c739" class="ko kp hi is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw bi translated">添加一个异步安装的生命周期挂钩(第21行)</li><li id="8f1a" class="ko kp hi is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw bi translated">添加一个数据函数来收集数据(第16-20行)</li><li id="c6d9" class="ko kp hi is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw bi translated">创建一个POST方法来查询GraphQL API(第24行)</li><li id="704a" class="ko kp hi is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw bi translated">使用一个简单的GraphQL查询返回数据(AllTitles)(第27–39行)</li><li id="6ffc" class="ko kp hi is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw bi translated">在模板标签中添加一个目录容器，将结果/数据返回给页面(第18行)</li></ul><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="aa78" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">立即保存并刷新您的Vue应用。</p><p id="1854" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">10).让我们看看现在是否能在浏览器控制台中看到返回的数据。在浏览器上打开“检查元素”并转到控制台选项卡。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es km"><img src="../Images/29fc7606856b3df38502e3799645e94e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*0fa2y178Idm0XkN4YvcEcQ.png"/></div></figure><p id="c496" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您看到一个错误，提到您的请求被CORS策略阻止，不要惊慌。我实际上是故意那样做的。</p><p id="1195" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您曾经开发过任何需要发出HTTP请求的应用程序，那么您一生中很可能至少遇到过一次CORS错误。当web应用程序从与自己的来源(域、协议、端口)不同的<a class="ae jo" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" rel="noopener ugc nofollow" target="_blank">资源发出请求时，通常会出现这种情况。在我们的例子中，即使两个应用程序都运行在localhost上，它们也运行在两个不同的端口上。</a></p><p id="d521" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">11).为了解决这个问题，我们必须对django应用程序做一些小小的修改。首先，我们需要安装<a class="ae jo" href="https://github.com/adamchainz/django-cors-headers" rel="noopener ugc nofollow" target="_blank"> django-cors-headers </a></p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="146c" class="jy jz hi ju b fi ka kb l kc kd">pipenv install django-cors-headers</span></pre><p id="5e12" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将“corsheaders”添加到settings.py文件中已安装应用程序的列表中</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="43c5" class="jy jz hi ju b fi ka kb l kc kd">INSTALLED_APPS = [<br/> ‘django.contrib.admin’,<br/> ‘django.contrib.auth’,<br/> ‘django.contrib.contenttypes’,<br/> ‘django.contrib.sessions’,<br/> ‘django.contrib.messages’,<br/> ‘django.contrib.staticfiles’,<br/> ‘graphene_django’,<br/> ‘company’,<br/> ‘corsheaders’, #added for cors<br/>]</span></pre><p id="5df1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将“CORS headers . middleware . CORS middleware”添加到settings.py文件的中间件列表中</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="4228" class="jy jz hi ju b fi ka kb l kc kd">MIDDLEWARE = [<br/> ‘corsheaders.middleware.CorsMiddleware’, #added for cors<br/> ‘django.middleware.security.SecurityMiddleware’,<br/> ‘django.contrib.sessions.middleware.SessionMiddleware’,<br/> ‘django.middleware.common.CommonMiddleware’,<br/> ‘django.middleware.csrf.CsrfViewMiddleware’,<br/> ‘django.contrib.auth.middleware.AuthenticationMiddleware’,<br/> ‘django.contrib.messages.middleware.MessageMiddleware’,<br/> ‘django.middleware.clickjacking.XFrameOptionsMiddleware’,<br/>]</span></pre><p id="6b3a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，在settings.py文件的底部添加一个白名单，列出所有将向GraphQL服务器发出请求的入站URL</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="dbe9" class="jy jz hi ju b fi ka kb l kc kd">CORS_ORIGIN_WHITELIST = (<br/> ‘localhost:8080/’<br/> )</span></pre><p id="0035" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，让我们重启你的Django应用&amp;&amp;重启你的Vue应用，然后再试一次。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es km"><img src="../Images/441a44249f02d4324fa46c704042308e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*Xvmk4BkvVOm79M5dUicHvg.png"/></div></div></figure><p id="18dd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">错误现在应该消失了，现在我们可以看到返回的数据(尽管它看起来并不漂亮)。</p><p id="085a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">12).为了让数据看起来更像样，我将添加一个引导表来显示数据。我还将利用这个机会更改GraphQL查询，以返回公司中的所有雇员(所有雇员)</p><ul class=""><li id="849f" class="ko kp hi is b it iu ix iy jb kq jf kr jj ks jn kt ku kv kw bi translated">我将查询从AllTitles改为AllEmployees(第40–55行)</li><li id="2f3a" class="ko kp hi is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw bi translated">添加了一个引导表，并在table标记中创建了一个for循环来返回行中的数据(第4–19行)</li></ul><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="kk kl l"/></div></figure><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es km"><img src="../Images/f1d64644fa4436bd9809b1210553b631.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*HEmVA0zVBv2DDWtfRnzeqg.png"/></div></figure><p id="1d57" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在这看起来好多了，也更像样了！！</p><p id="c21c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">虽然这看起来很棒。这只是返回数据，并没有充分利用我们的GraphQL服务器。</p><p id="b959" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">13).让我们为我们的应用程序添加一个搜索功能，让用户能够使用城市搜索员工。</p><ul class=""><li id="4f72" class="ko kp hi is b it iu ix iy jb kq jf kr jj ks jn kt ku kv kw bi translated">我添加了一个带有“城市”<a class="ae jo" href="https://vuejs.org/v2/guide/forms.html" rel="noopener ugc nofollow" target="_blank"> v-model </a>的搜索表单(第4-9行)</li><li id="ac0d" class="ko kp hi is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw bi translated">在数据函数中添加了一个城市变量来保存输入到表单中的值(第36行)</li><li id="fe2c" class="ko kp hi is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw bi translated">用一个方法包装异步安装的函数(第40行)</li><li id="54d0" class="ko kp hi is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw bi translated">向GraphQL查询添加了查询过滤器和城市变量(第49行)</li></ul><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="kk kl l"/></div></figure><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es ld"><img src="../Images/990d40c2e15673620b1c157a6a064f1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*sva1wYXeu6AylcVfmr_ESg.png"/></div></figure><p id="a0e6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您现在应该能够在页面顶部看到一个搜索框，但是您还会注意到该表不再返回任何数据。这是因为它现在需要您输入一个城市名称来返回结果。</p><p id="3b33" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我将在搜索框中输入“纽约”,然后点击回车</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es le"><img src="../Images/41fcab4377b893a5d0ef98f35049e0ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1370/format:webp/1*xlOgxxLELQqD7w7qhWG7Xw.png"/></div></figure><p id="382c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">“迈阿密”也一样</p><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es lf"><img src="../Images/779624e12376234d7234ae83c241252b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*Mg1usEcGlUwbY1mpItit5w.png"/></div></figure><p id="6ea3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在看起来棒极了！！</p><p id="3ae4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，您应该能够向django服务器添加更多数据，并从VueJS前端检索这些数据。</p><p id="cc57" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">感谢您花时间通读本教程的两个部分，并为完成本系列的漫长等待表示歉意。如果你想看这个项目的回购，你可以点击<a class="ae jo" href="https://github.com/jogunjobi/startupql_vuejs" rel="noopener ugc nofollow" target="_blank">这里</a></p><p id="f5ff" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">祝你好运！</p></div></div>    
</body>
</html>