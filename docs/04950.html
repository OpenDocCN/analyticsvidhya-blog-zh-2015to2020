<html>
<head>
<title>Understanding RESTful API with Flask</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Flask了解RESTful API</h1>
<blockquote>原文：<a href="https://medium.com/analytics-vidhya/understanding-restful-api-with-flask-59421f01f648?source=collection_archive---------18-----------------------#2020-04-06">https://medium.com/analytics-vidhya/understanding-restful-api-with-flask-59421f01f648?source=collection_archive---------18-----------------------#2020-04-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/de9bd5460062244041a56936a8303720.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_jcvt29u4VKNdlChBFavBQ.jpeg"/></div></div></figure><p id="7aa0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这将是一篇关于如何使用一个简单而强大的框架Flask来制作REST APIs的文章。API为开发人员和最终用户完成各种任务，因为它们抽象了必须的查询，并使与基础系统(可能是您的服务器或数据库)的交互变得容易。</p><h1 id="10a6" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">什么是RESTful APIs</h1><p id="ee9b" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">REST是表述性状态转移的首字母缩写。它是分布式超媒体系统的一种架构风格。通过将用户界面问题从数据存储问题中分离出来，它提高了跨多个平台的用户界面的可移植性，并通过简化服务器组件提高了可伸缩性。<br/>好，简单来说，这意味着什么？服务器提供了一个类似于URL的端点，您可以在这里请求或放置数据。它通过提供端点使集成软件易于访问、使用并能与其他应用程序轻松集成，从而消除了集成软件带来的麻烦。</p><h1 id="5bf1" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">示例实现</h1><p id="7c58" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">历史和理论已经讲得够多了，让我们深入研究吧。<br/>对于这个实现，我们将使用Flask，这将是对API的一个非常简单的解释，Flask制作API的方式已经灭绝，但我们将采用传统方式，手工构建它们。</p><h1 id="1ee6" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">装置</h1><p id="edce" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">这里我们将使用Flask，它是python的一个模块。下面的代码片段将遵循python3语法。</p><ul class=""><li id="75df" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">您需要安装python</li><li id="8606" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">如果您愿意，可以创建一个虚拟环境来安装软件包。你可以在这里得到更多关于VEnv <a class="ae lf" href="https://gist.github.com/NishantJoshi00/d5d61c90dbd4fb9d68ec971f79f2aae9" rel="noopener ugc nofollow" target="_blank">的信息</a></li><li id="a8b9" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn kw kx ky kz bi translated">之后，您就可以安装模块了。</li></ul><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="3013" class="lp jp hi ll b fi lq lr l ls lt"># ------------------------------------------------<br/># If you are using python3<br/>&gt;&gt; &gt;&gt; &gt;&gt; $ pip3 install Flask <br/># ------------------------------------------------<br/># ------------------------------------------------<br/># If you are using python<br/>&gt;&gt; &gt;&gt; &gt;&gt; $ pip install Flask <br/># ------------------------------------------------</span></pre><ul class=""><li id="5e9f" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn kw kx ky kz bi translated">你最不需要的就是创造力，但是看到你在这里，你已经有很多了</li></ul><h2 id="3cb7" class="lp jp hi bd jq lu lv lw ju lx ly lz jy jb ma mb kc jf mc md kg jj me mf kk mg bi translated">简单的例子</h2><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mh"><img src="../Images/178b227f484e9bbd39e2a6ced3d81944.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8hn6Fu1X0ri_U0J_mkltuQ.png"/></div></div></figure><p id="ca84" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">好了，现在看看这个，发出一个<strong class="is hj"> GET </strong>请求感觉很简单。忽略表情符号和评论，它们是提供帮助的。现在，让我们检查每一行代码:</p><ol class=""><li id="858b" class="kr ks hi is b it iu ix iy jb kt jf ku jj kv jn mi kx ky kz bi translated"><code class="du mj mk ml ll b">from <strong class="is hj">flask </strong>import <strong class="is hj">Flask</strong></code> <strong class="is hj"> </strong> : <br/>这只是从库<strong class="is hj"> flask </strong>中获取主类<strong class="is hj"> Flask </strong>的构造函数</li><li id="0abc" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn mi kx ky kz bi translated"><code class="du mj mk ml ll b"><strong class="is hj">app</strong> = <strong class="is hj">Flask</strong>(<em class="mm">__name__</em>)</code> : <br/>这是用运行程序的名称创建您的web应用程序，即<code class="du mj mk ml ll b"><strong class="is hj">__main__</strong></code> <strong class="is hj"> </strong>如果您要运行该文件的话</li><li id="89c2" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn mi kx ky kz bi translated"><code class="du mj mk ml ll b">@<em class="mm">app</em>.<strong class="is hj">route</strong>("<strong class="is hj">/</strong>", <em class="mm">methods</em>=["<strong class="is hj">GET</strong>"])</code> : <br/>这是一个装饰器，我们可以称之为它下面的函数的包装器，但在这个上下文中，它意味着任何指向“GET”类型的端点“/”的请求都将被写在它下面的函数解析。</li><li id="04fd" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn mi kx ky kz bi translated"><code class="du mj mk ml ll b"><em class="mm">def</em> <strong class="is hj">root</strong>():<br/> <strong class="is hj">return</strong> "<em class="mm">This is root\n</em>"</code> : <br/>这是解析发送到“/”的任何请求的解析器函数。</li><li id="73ed" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn mi kx ky kz bi translated">这最后一部分只是确保应用程序托管在我们运行文件的地方</li><li id="f4ca" class="kr ks hi is b it la ix lb jb lc jf ld jj le jn mi kx ky kz bi translated">现在，要查看结果，只需使用类似<code class="du mj mk ml ll b"><em class="mm">python3</em> <strong class="is hj">app.py</strong></code>的命令运行包含上述代码的文件，其中app.py是文件名。在终端中，它会显示一个URL</li></ol><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="046e" class="lp jp hi ll b fi lq lr l ls lt"># In my case it was <a class="ae lf" href="http://127.0.0.1:5000/" rel="noopener ugc nofollow" target="_blank"><strong class="ll hj">http://127.0.0.1:5000/</strong></a><strong class="ll hj"><br/></strong># Just open this link in your browser and the your put will not shock you: it is indeed "<strong class="ll hj">This is root</strong>" the \n is just to make to readable your you are familier with <strong class="ll hj">curl.</strong></span></pre><h1 id="80d5" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">要求</h1><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/11cb2fe83e3c918d1736b98dca0eb0ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gC3u55YdryPOHh2mAbYiqg.png"/></div></div></figure><p id="9f13" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们开始发出请求，现在如果你想写代码并看到旁边的结果，在上面的例子中只需更改<code class="du mj mk ml ll b">app.run()</code> = &gt; <code class="du mj mk ml ll b">app.run(debug=<strong class="is hj">True</strong>)</code> <br/>这将自动应用你在应用程序文件中所做的更改。但是只有在所有的语法错误被清除后才保存，否则程序将退出，你将不得不再次启动它，与步骤相同。6来自上面的例子。下面提供的示例是上面代码的延续，以便于理解。<br/>如果您要尝试该示例，请在语句<code class="du mj mk ml ll b">if __name__ == "__main__":</code>之前添加下面可用的代码，以实现代码。</p><h2 id="9fff" class="lp jp hi bd jq lu lv lw ju lx ly lz jy jb ma mb kc jf mc md kg jj me mf kk mg bi translated">获取请求</h2><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/ce64a1dadb87514332d81a594615d346.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3TdgRaOAGTghE1n0HckU_Q.png"/></div></div></figure><p id="2811" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">随着我们的深入，我们将对这个GET请求有更多的了解。</p><blockquote class="mo mp mq"><p id="614f" class="iq ir mm is b it iu iv iw ix iy iz ja mr jc jd je ms jg jh ji mt jk jl jm jn hb bi translated"><strong class="is hj">什么是GET请求？<br/> </strong> Get请求用于从特定资源获取数据，这是一种简单的端点查询方式。<br/> - Get请求类似于我们普通http请求，但是我们不是提供网页内容，而是以json、xml的形式获取数据。<br/> -您还可以向GET请求传递参数来指定您的需求。<br/>类似的例子有:<a class="ae lf" href="https://www.google.com/search?q=what+is+restful+api" rel="noopener ugc nofollow" target="_blank">https://www.google.com/search?q=what+is+restful+api</a><br/>这里:<br/>路由(端点)=&gt;"/搜索"，<br/>参数= &gt; q:值= &gt;"什么是restful api "</p></blockquote><p id="3ae9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我已经写了我们可以向GET请求传递参数，但是如何获取它:为此我们需要一个函数。<br/> <code class="du mj mk ml ll b">from <strong class="is hj">flask </strong>import <strong class="is hj">request</strong></code> <strong class="is hj"> </strong>我们已经从这个模型中导入了<code class="du mj mk ml ll b"><strong class="is hj">Flask</strong></code> <strong class="is hj"> </strong>。<br/>使用<code class="du mj mk ml ll b"><strong class="is hj">request.</strong>args</code>访问get请求传递的这些参数，这是一种可以转换为字典的数据类型。</p><h2 id="7af6" class="lp jp hi bd jq lu lv lw ju lx ly lz jy jb ma mb kc jf mc md kg jj me mf kk mg bi translated">例子</h2><p id="f11e" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">在上面的例子中，我有一个名为registry的全局变量，它是一个包含姓名和年龄的列表。下面是完整的代码，如果你想看看的话。<code class="du mj mk ml ll b"><strong class="is hj">jsonify </strong></code>是flask库提供的一个函数，它将字典、列表等数据类型转换成字符串，然后作为响应安全地发送回去。</p><h2 id="2efd" class="lp jp hi bd jq lu lv lw ju lx ly lz jy jb ma mb kc jf mc md kg jj me mf kk mg bi translated">发布请求</h2><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/43cc493a4e61e05f72c1df295fd3ccd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ggKiqB94TCIyprarQC1ITg.png"/></div></div></figure><blockquote class="mo mp mq"><p id="492d" class="iq ir mm is b it iu iv iw ix iy iz ja mr jc jd je ms jg jh ji mt jk jl jm jn hb bi translated"><strong class="is hj">什么是发布请求？<br/> </strong> POST用于向服务器发送数据以创建/更新资源。<br/>此处，发送的数据不会附加到URL，也不会被缓存或存储，因此将数据返回给服务器更安全，解析数据也更容易。通常给API的数据是JSON (JavaScript对象符号)格式的。因此我们使用对象<code class="du mj mk ml ll b"><em class="hi">request.</em><strong class="is hj"><em class="hi">json</em></strong></code> <strong class="is hj"> </strong> <em class="hi">来获取发布的数据。</em></p></blockquote><h2 id="dd46" class="lp jp hi bd jq lu lv lw ju lx ly lz jy jb ma mb kc jf mc md kg jj me mf kk mg bi translated">例子</h2><p id="9616" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">如果您不熟悉API的整个概念，您可能会发现我们使用同一个端点“/registry”来发出get请求令人不安。我们可以使用单个端点根据GET、POST、PUT、DELETE等方法发出多个请求，因此一个端点可以有任意数量的方法。<br/>如果你要实现这样一个概念，你可以使用<code class="du mj mk ml ll b">request.<strong class="is hj">method</strong></code> <strong class="is hj"> </strong>来标识传递给解析器函数的当前请求的方法，我可能已经实现了它，但如果我这样做了，它将不会被清楚。</p><p id="3a26" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在的问题是你将如何测试它？我们可以在web浏览器中输入带有参数的URL来测试我们的GET方法，但是对于其他方法来说就没那么简单了。要实现这一点，你可以使用<a class="ae lf" href="https://www.postman.com/" rel="noopener ugc nofollow" target="_blank">https://www.postman.com/</a>，它是测试各种API的一个很好的资源，或者你可以使用<code class="du mj mk ml ll b">$ curl</code>，它是一个Linux命令。也许你也可以使用python模块<code class="du mj mk ml ll b"><strong class="is hj">requests</strong></code> <strong class="is hj"> </strong>来实现这个目的，这是你的选择。</p><h2 id="035f" class="lp jp hi bd jq lu lv lw ju lx ly lz jy jb ma mb kc jf mc md kg jj me mf kk mg bi translated">URL转换器</h2><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mu"><img src="../Images/9fde11999468927ef24c363c31c0ca7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NrFUfzzUknB9ViBKO8NaZg.png"/></div></div></figure><p id="b26f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是一个在创建API时会派上用场的特性。在上面的图片中，我将它与GET方法一起使用，但它也可以与任何其他方法一起使用，我们将会看到这一点。<br/> —现在，不同的是上面的代码，首先端点不同，我可以称之为怪异，那到底是什么<code class="du mj mk ml ll b">&lt;string:name&gt;</code>。这是URL转换器，它是任何不包含反斜杠的字符串的占位符。<br/> —第二个关键区别是解析器函数有一个参数，该参数接收放置在<code class="du mj mk ml ll b">&lt;string:name&gt;</code>的值。</p><p id="7ae4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有各种不同目的的占位符。</p><figure class="lg lh li lj fd ij er es paragraph-image"><div class="er es mv"><img src="../Images/edc5cbdc9045de1752273fb1873f8b26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*1QH0_sLjinf75-E6pZhCpA.png"/></div></figure><p id="7706" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上面提到的own是一些可以使用的默认类型。<br/>喜欢=&gt;T4】</p><p id="7331" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您还可以使用flask库提供的工具创建您的自定义类型。</p><h2 id="62f0" class="lp jp hi bd jq lu lv lw ju lx ly lz jy jb ma mb kc jf mc md kg jj me mf kk mg bi translated">上传请求</h2><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mu"><img src="../Images/acb349451251eb172bef926d22e65937.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1cJbJdcjtGziEi6MFJ7mPQ.png"/></div></div></figure><p id="db5c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我不会告诉你这个请求有什么不同，因为它类似于POST请求，但这个请求的目的是专门更新或创建一个新的条目，POST请求可能有不同的用途，但文档说只使用它们来更改条目和/或为特定资源创建新的条目。<br/>这个请求的目标是使这个API被调用后的输出是等幂的。<br/>这在获取数据和使用访问数据方面类似于POST。</p><h2 id="d6f7" class="lp jp hi bd jq lu lv lw ju lx ly lz jy jb ma mb kc jf mc md kg jj me mf kk mg bi translated">删除请求</h2><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mu"><img src="../Images/d9b7a90c815f338bb1d56aa52705f5f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D04aiKydQUvrvUGj9ajiyA.png"/></div></div></figure><p id="4af3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这里，这是一个危险的API，因为没有任何认证，任何人都可以删除他们想要的数据库的任何条目。但是在你的项目中同时实现所有这些API并不重要，而且会浪费资源，这只是为了解释的目的。</p><p id="9e5a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">DELETE方法根据链接的URL删除指定资源中的条目。这个方法的主要目标是将这个动作记录为删除，但是使用POST也可以实现同样的目的，只需指定正确的条件和端点。</p><h2 id="d013" class="lp jp hi bd jq lu lv lw ju lx ly lz jy jb ma mb kc jf mc md kg jj me mf kk mg bi translated">示例的源代码</h2><figure class="lg lh li lj fd ij"><div class="bz dy l di"><div class="mw mx l"/></div></figure></div><div class="ab cl my mz gp na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="hb hc hd he hf"><blockquote class="nf"><p id="8c6a" class="ng nh hi bd ni nj nk nl nm nn no jn dx translated">感谢你阅读到目前为止，我衷心希望你从这篇文章中学到了一些东西，继续学习，一切顺利！！</p></blockquote></div></div>    
</body>
</html>